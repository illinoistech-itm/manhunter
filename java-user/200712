From java-user-return-31306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 01 00:49:53 2007
Return-Path: <java-user-return-31306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33670 invoked from network); 1 Dec 2007 00:49:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2007 00:49:53 -0000
Received: (qmail 47285 invoked by uid 500); 1 Dec 2007 00:49:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47259 invoked by uid 500); 1 Dec 2007 00:49:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47248 invoked by uid 99); 1 Dec 2007 00:49:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Nov 2007 16:49:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rsivak@istandfor.com designates 72.32.36.243 as permitted sender)
Received: from [72.32.36.243] (HELO mx0.istandfor.com) (72.32.36.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Dec 2007 00:49:14 +0000
Received: from [192.168.1.42] (pool-70-18-22-232.ny325.east.verizon.net [70.18.22.232])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id lB10nAbo020602
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 30 Nov 2007 18:49:15 -0600
Message-ID: <4750AF86.2010304@istandfor.com>
Date: Fri, 30 Nov 2007 19:49:10 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: IndexReader locking index
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I am using MoreLikeThis functionality in my code.  This code is running 
on four separate servers.  When I ran tests, it seemed to be fine, but 
looks like under heavy use, the index file is always locked, and when I 
reindex all the docs, it doubles the size of the index (my guess is the 
old files are not being deleted). 

Since my index is only about 11mb, I would like to load it into RAM.  
I'm not sure if this is compatible with MoreLikeThis?  How do I load the 
index into memory and then open and IndexReader on it?  Also if I load 
it into memory, how can I find out when changes have been made to the 
index file on disk so that I can reload it? 

Russ



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 01 06:17:12 2007
Return-Path: <java-user-return-31307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40063 invoked from network); 1 Dec 2007 06:17:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2007 06:17:11 -0000
Received: (qmail 86995 invoked by uid 500); 1 Dec 2007 06:16:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86962 invoked by uid 500); 1 Dec 2007 06:16:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86951 invoked by uid 99); 1 Dec 2007 06:16:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 30 Nov 2007 22:16:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [68.142.237.94] (HELO n9.bullet.re3.yahoo.com) (68.142.237.94)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 01 Dec 2007 06:16:52 +0000
Received: from [68.142.237.87] by n9.bullet.re3.yahoo.com with NNFMP; 01 Dec 2007 06:16:30 -0000
Received: from [66.196.97.135] by t3.bullet.re3.yahoo.com with NNFMP; 01 Dec 2007 06:16:30 -0000
Received: from [127.0.0.1] by omp108.mail.re3.yahoo.com with NNFMP; 01 Dec 2007 06:16:30 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 365472.29739.bm@omp108.mail.re3.yahoo.com
Received: (qmail 64330 invoked by uid 60001); 1 Dec 2007 06:16:30 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=U3IJKHQ7Y9saIlawYKVlCy0HGmFoLYBbKjXFdfnBEz0tt/3iNn9LrDGPM+IMg2X7ZHG/O5coTCkLAPwYXLe36o5Mau86cZ73EIDrAvIrhZCdcnAh+kMRygUivpxNzTLAP+WJJvOgMMn8ElRe1n+H2Q6duNgo5xGdJmlvAEx+5s4=;
X-YMail-OSG: sajeUVkVM1n9npViqI70EvVsxsmNj06_bRM1d9T.GFdMwC2Fo3p0MvENgfWyXfiZPuv4pvy7I.ySYUYbeXE_FoyxpF8UiUHAkRDr
Received: from [59.96.163.236] by web57314.mail.re1.yahoo.com via HTTP; Fri, 30 Nov 2007 22:16:30 PST
Date: Fri, 30 Nov 2007 22:16:30 -0800 (PST)
From: Ruchi Thakur <ruchi.thak11@yahoo.com>
Subject: Re: BooleanQuery TooManyClauses in wildcard search
To: java-user@lucene.apache.org
In-Reply-To: <359a92830711301211g17a07b68k115df38dcce2822e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1279482354-1196489790=:63288"
Content-Transfer-Encoding: 8bit
Message-ID: <252523.63288.qm@web57314.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1279482354-1196489790=:63288
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

 
  Erick/John, thank you so much for the reply. I have gone through the mailing list u have redirected me  to. I know i need to read more, but some quick questions. Please bear with me if they appear to be too simple.
  Below is the code snippet of my current search. Also i need to get score info of each of my document returned in search, as i display the search result in the order of scroing.
    {
   Directory fsDir = FSDirectory.getDirectory(aIndexDir, false);
   IndexSearcher is = new IndexSearcher(fsDir);
   ELSAnalyser elsAnalyser = new ELSStopAnalyser();
   Analyzer analyzer = elsAnalyser.getAnalyzer();
     QueryParser parser = new QueryParser(aIndexField, analyzer);
     Query query = parser.parse(aSearchStr);
     hits = is.search(query);
  }
   
  Now as i have understood, through the mail archives you have suggsted, below is what we need to do.
  1)The second was to build a *Filter* that uses WildcardTermEnum -- not a 
Query. 
  because it's a filter, the scoring aspects of each document are taken out of the equation (I am worried abt it , as i need scoring info)
   
  2)Once you have a "WildcardFilter" wrapping it in a ConstantScoreQuery would give you a drop in replacement for WildCardQuery that would sacrifive the TF/IDF scoring factors for speed and garunteed execution on any pattern in any index regardless of size. (Does that mean it will solve my scoring issue and i will get scoring info)
   
  Also it suggests "SpanNearQuery on a wildcard". I am kinda cofused which is the approach that should be actually used. Please suggest. At the same time i am studing more abt it. Thanks a lot for ur help on this.
   
  Best Regards,
  Ruchika
  
Erick Erickson <erickerickson@gmail.com> wrote:
  John's answer is spot-on. There's a wealth of information in the user group
archives that you should be able to search on discussing ways of providing
the functionality. One thread titled "I just don't get wildcards at all"
is one where the folks who know generously helped me out.

Once you find out how to search for that you'll know you're in the right
place.
Here's the searchable archive.....

http://www.gossamer-threads.com/lists/engine?do=search;search_forum=forum_2;;list=lucene

Make sure you select the "java user" from the top drop-down labeled
"Search".

Best
Erick

On Nov 30, 2007 2:07 PM, John Byrne wrote:

> Hi,
>
> Your problem is that when you do a wildacrd search, Lucene expands the
> wildacrd term into all possible terms. So, searching for "stat*"
> produces a list of terms like "state", "states", "stating" etc. (It only
> uses terms that actually occur in your index, however). These terms are
> all added as OR clauses of a boolean query.
>
> The thing is, be defult, there is a limit of 1024 caluses for a boolean
> query. If yuor wildacrd term expands into more than this, (which happens
> very easily), you get that exception you described. You can solve the
> issues by setting the maximum clause count yourself, using
>
> BooleanQuery.setMaxClauseCount(int maxClauseCount)
>
> See
>
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/core/index.html
> for mroe info.
>
> Bear in mind that putting a wildcard near the start of the term results
> in a large number of boolean clauses, which increases memory usage. This
> is the reason for the default limit. This limit will also affect fuzzy
> queries, because they are expanded in the same way.
>
> Regards,
> JB
>
> Ruchi Thakur wrote:
> >
> > Hi there.
> > I am a new Lucene user and I have been searching the group archives but
> couldn't solve the problem. I have just joined a project that uses Lucene.
> > We use the StandardAnalyzer for indexing our documents and our query is
> as
> > follows when we issue a search string of t* for example:
> > +t* +cont_type:pa
> >
> > We get an Exception when we issue some of our wildcard text searches
> we get following Exception
> > org.apache.lucene.search.BooleanQuery$TooManyClauses Exception : Max
> clause if 1024
> >
> > Please suggest.
> >
> > Regards,
> > Ruchi
> >
> >
> >
> >
> >
> >
> >
> >
> > ---------------------------------
> > Never miss a thing. Make Yahoo your homepage.
> >
> > ------------------------------------------------------------------------
> >
> > No virus found in this incoming message.
> > Checked by AVG Free Edition.
> > Version: 7.5.503 / Virus Database: 269.16.11/1161 - Release Date:
> 30/11/2007 12:12
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


       
---------------------------------
Be a better pen pal. Text or chat with friends inside Yahoo! Mail. See how.
--0-1279482354-1196489790=:63288--


From java-user-return-31308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 01 09:56:40 2007
Return-Path: <java-user-return-31308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96529 invoked from network); 1 Dec 2007 09:56:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2007 09:56:40 -0000
Received: (qmail 77414 invoked by uid 500); 1 Dec 2007 09:56:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77382 invoked by uid 500); 1 Dec 2007 09:56:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77371 invoked by uid 99); 1 Dec 2007 09:56:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Dec 2007 01:56:22 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Dec 2007 09:56:02 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id 7F3E05822D
	for <java-user@lucene.apache.org>; Sat,  1 Dec 2007 04:56:04 -0500 (EST)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Sat, 01 Dec 2007 04:56:04 -0500
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 5F17E2726C; Sat,  1 Dec 2007 04:56:04 -0500 (EST)
Message-Id: <1196502964.318.1224228883@webmail.messagingengine.com>
X-Sasl-Enc: siqNj8IPS1Dx6wAvIX6a2XIMTDckUvmN2z8Pd9PVhDUN 1196502964
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <4750AF86.2010304@istandfor.com>
Subject: Re: IndexReader locking index
In-Reply-To: <4750AF86.2010304@istandfor.com>
Date: Sat, 01 Dec 2007 04:56:04 -0500
X-Virus-Checked: Checked by ClamAV on apache.org


"Ruslan Sivak" <rsivak@istandfor.com> wrote:
> I am using MoreLikeThis functionality in my code.  This code is
> running on four separate servers.

How do your separate servers share the index?  What remote filesytem
are you using here?

> When I ran tests, it seemed to be fine, but looks like under heavy
> use, the index file is always locked,

Which version of Lucene are you using?  Read-only use of the index
(using an IndexReader without using any of its "writing" methods like
deleteDocument or setNorm) should not do any locking against the
index, as of Lucene 2.1.

> and when I reindex all the docs, it doubles the size of the index
> (my guess is the old files are not being deleted).

If you have a reader open on the index, then the reader will hold
these files open so they cannot be deleted (until that reader/readers
close).  If you then fully re-index into that same directory, that
would explain the 2X usage.

> Since my index is only about 11mb, I would like to load it into RAM.
> I'm not sure if this is compatible with MoreLikeThis?  How do I load
> the index into memory and then open and IndexReader on it?

This is simple:

  Directory dir = new RAMDirectory(otherDir)

will load all files in otherDir into RAM.  Then you can pass that dir
to IndexReader.open or IndexSearcher.  This will work fine with
MoreLikeThis and all other searching, etc.  But just remember since
this is a RAMDirectory, if you make any changes to it, they won't be
saved to disk unless you explicitly do so.

> Also if I load it into memory, how can I find out when changes have
> been made to the index file on disk so that I can reload it?

You can call IndexReader.isCurrent() if you have a reader open on the
disk-based Directory, or, IndexReader.getCurrenVersion (static method)
if you don't; when that version number changes, your index has
changed.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 01 14:55:42 2007
Return-Path: <java-user-return-31309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75328 invoked from network); 1 Dec 2007 14:55:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2007 14:55:42 -0000
Received: (qmail 39800 invoked by uid 500); 1 Dec 2007 14:55:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39767 invoked by uid 500); 1 Dec 2007 14:55:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39756 invoked by uid 99); 1 Dec 2007 14:55:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Dec 2007 06:55:23 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Dec 2007 14:55:01 +0000
Received: by mu-out-0910.google.com with SMTP id i10so1211082mue
        for <java-user@lucene.apache.org>; Sat, 01 Dec 2007 06:55:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=0FcDuy7dsJnQynlvyFVqMbf8NCwplynPfNDsZeaB+nI=;
        b=G3SU9Ky/wj7f6eyk/aZ+J4+oZBokCt/thohF9B67Dpns6DjFOYQF5oakLEmaWy7aniLaFP2gIfGsyyOkWHWX4NEuPte7242fgjdkGU+Hf2Z+gXSHa8Uhj0mLljdFrPaBy4a+pyMHeJAJekTrLgF/LXOlGMirb2FDpzaFbEwYqW8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Pr9yIc5DnuUBCiYj43UjHro4SR2gYu3GtzAEHBDBYMwx0h3fcCbkLdVVL0/ulM5KlaKxWuKgwD18+/s7mLVzcw8DEtUFlvuPANPt3bZqPJsCtC/RcxvVSVG2iFNPxXQnR0eucLHjf4WAJnP+ARtNm2nN/RNq18Hs+lLj7ojDe8A=
Received: by 10.82.174.20 with SMTP id w20mr8157405bue.1196520902003;
        Sat, 01 Dec 2007 06:55:02 -0800 (PST)
Received: by 10.82.155.11 with HTTP; Sat, 1 Dec 2007 06:55:01 -0800 (PST)
Message-ID: <359a92830712010655n65c129a5p1a47df9de1efc282@mail.gmail.com>
Date: Sat, 1 Dec 2007 09:55:01 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery TooManyClauses in wildcard search
In-Reply-To: <252523.63288.qm@web57314.mail.re1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2111_14026496.1196520901998"
References: <359a92830711301211g17a07b68k115df38dcce2822e@mail.gmail.com>
	 <252523.63288.qm@web57314.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2111_14026496.1196520901998
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below:

On Dec 1, 2007 1:16 AM, Ruchi Thakur <ruchi.thak11@yahoo.com> wrote:

>
>  Erick/John, thank you so much for the reply. I have gone through the
> mailing list u have redirected me  to. I know i need to read more, but some
> quick questions. Please bear with me if they appear to be too simple.
>  Below is the code snippet of my current search. Also i need to get score
> info of each of my document returned in search, as i display the search
> result in the order of scroing.
>    {
>   Directory fsDir = FSDirectory.getDirectory(aIndexDir, false);
>   IndexSearcher is = new IndexSearcher(fsDir);
>   ELSAnalyser elsAnalyser = new ELSStopAnalyser();
>   Analyzer analyzer = elsAnalyser.getAnalyzer();
>     QueryParser parser = new QueryParser(aIndexField, analyzer);
>     Query query = parser.parse(aSearchStr);
>     hits = is.search(query);
>  }
>

EOE: Minor point that you probably already know, but opening a searcher is
expensive.
         I'm assuming you put it in here for clarity, but in case not be
aware you should
         open a reader and re-use it as much as posslble.

         Also, it looks like you're using an older version of Lucene, since
the
         getDirecotory(dir, bool) is deprecated.....


>
>  Now as i have understood, through the mail archives you have suggsted,
> below is what we need to do.
>  1)The second was to build a *Filter* that uses WildcardTermEnum -- not a
> Query.
>  because it's a filter, the scoring aspects of each document are taken out
> of the equation (I am worried abt it , as i need scoring info)
>

This is true *for the wildcard clause*. It's a legitimate question to ask
what
scoring means for a wildcard clause. Rather, it's legitimate to ask whether
that adds much value. I managed to convince my product manager that
the end user experience didn't suffer enough to matter, but it can be argued
either way.

That said, I'm pretty sure that if you make this a sub-clause of a boolean
query,
you still get scoring for the *other* parts of the query. That is,
BooleanQuery bq = ....
bq.add(regular query);
bq.add(filtered wildcard query);

search (bq);

(note, really sloppy pseudo code there) will give you scoring for
the "regular query" part of the bq. Of course that requires you to
break up the incoming query to the wildcard parts and the not
wildcard parts.......


>
>  2)Once you have a "WildcardFilter" wrapping it in a ConstantScoreQuery
> would give you a drop in replacement for WildCardQuery that would sacrifive
> the TF/IDF scoring factors for speed and garunteed execution on any pattern
> in any index regardless of size. (Does that mean it will solve my scoring
> issue and i will get scoring info)
>

I'm pretty sure that you don't get scoring here. ConstantScoreQuery is
named that way on purpose <G>.


>
>  Also it suggests "SpanNearQuery on a wildcard". I am kinda cofused which
> is the approach that should be actually used. Please suggest. At the same
> time i am studing more abt it. Thanks a lot for ur help on this.
>

I think I was looking at this for a method of highlighting, but span queries
won't fix up wildcard queries.

handling arbitrary wildcard queries, that is queries with, say, only
one or two leading letters is an area of Lucene that requires that
one really dig into the guts of querying and do some custom work.
We've had quite reasonable results by imposing the restriction that
wildcard queries MUST have three leading characters. That is,
a*, ab* are illegal, but abc* is legal.

What I'd suggest is to start by imposing that restriction, bumping the
maxbooleanclauses number and just let Lucene do its tricks.
Perhaps catching the TooManyClauses exception and informing
the user with some message like "query to general" or some such.
Then, if the product manager says that is unacceptable let them
know what the cost is and go from there. You'll get push-back that
"of course we must allow one character wildcards", but in my
experience that's often just a knee-jerk reaction and not as
much of a requirement as people think. Your situation may vary....

Yet another possibility, depending upon the size and space
requirements is to play interesting games with your index, for
instance for any word index special one and two letter tokens,
e.g. abcde gets a$, ab$ and abcde all indexed. Then you
pre-process your query and turn a* into a$, ab* into ab$
and just use these terms (you have to take some car
that your query analyzer doesn't strip these out). Now, you've
turned arbitrary wildcards into your three-letter-prefix rule
or simple term queries, preserving relevance etc. You have
to take some care to index your special tokens with 0 increments
so phrase and span queries work, but that's not very hard
especially since Lucene In Action demonstrates the
SynonymAnalyzer which does the same thing.

But note the implicit restriction here that you really
don't search for ab*cd*e* with this scheme, but
neither does Google.

Whew! enough for Saturday morning <G>....

Best
Erick


>
>  Best Regards,
>  Ruchika
>
> Erick Erickson <erickerickson@gmail.com> wrote:
>  John's answer is spot-on. There's a wealth of information in the user
> group
> archives that you should be able to search on discussing ways of providing
> the functionality. One thread titled "I just don't get wildcards at all"
> is one where the folks who know generously helped me out.
>
> Once you find out how to search for that you'll know you're in the right
> place.
> Here's the searchable archive.....
>
>
> http://www.gossamer-threads.com/lists/engine?do=search;search_forum=forum_2;;list=lucene
>
> Make sure you select the "java user" from the top drop-down labeled
> "Search".
>
> Best
> Erick
>
> On Nov 30, 2007 2:07 PM, John Byrne wrote:
>
> > Hi,
> >
> > Your problem is that when you do a wildacrd search, Lucene expands the
> > wildacrd term into all possible terms. So, searching for "stat*"
> > produces a list of terms like "state", "states", "stating" etc. (It only
> > uses terms that actually occur in your index, however). These terms are
> > all added as OR clauses of a boolean query.
> >
> > The thing is, be defult, there is a limit of 1024 caluses for a boolean
> > query. If yuor wildacrd term expands into more than this, (which happens
> > very easily), you get that exception you described. You can solve the
> > issues by setting the maximum clause count yourself, using
> >
> > BooleanQuery.setMaxClauseCount(int maxClauseCount)
> >
> > See
> >
> >
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/core/index.html
> > for mroe info.
> >
> > Bear in mind that putting a wildcard near the start of the term results
> > in a large number of boolean clauses, which increases memory usage. This
> > is the reason for the default limit. This limit will also affect fuzzy
> > queries, because they are expanded in the same way.
> >
> > Regards,
> > JB
> >
> > Ruchi Thakur wrote:
> > >
> > > Hi there.
> > > I am a new Lucene user and I have been searching the group archives
> but
> > couldn't solve the problem. I have just joined a project that uses
> Lucene.
> > > We use the StandardAnalyzer for indexing our documents and our query
> is
> > as
> > > follows when we issue a search string of t* for example:
> > > +t* +cont_type:pa
> > >
> > > We get an Exception when we issue some of our wildcard text searches
> > we get following Exception
> > > org.apache.lucene.search.BooleanQuery$TooManyClauses Exception : Max
> > clause if 1024
> > >
> > > Please suggest.
> > >
> > > Regards,
> > > Ruchi
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > > ---------------------------------
> > > Never miss a thing. Make Yahoo your homepage.
> > >
> > >
> ------------------------------------------------------------------------
> > >
> > > No virus found in this incoming message.
> > > Checked by AVG Free Edition.
> > > Version: 7.5.503 / Virus Database: 269.16.11/1161 - Release Date:
> > 30/11/2007 12:12
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> ---------------------------------
> Be a better pen pal. Text or chat with friends inside Yahoo! Mail. See
> how.
>

------=_Part_2111_14026496.1196520901998--

From java-user-return-31310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 01 19:49:14 2007
Return-Path: <java-user-return-31310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42092 invoked from network); 1 Dec 2007 19:49:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 1 Dec 2007 19:49:14 -0000
Received: (qmail 85275 invoked by uid 500); 1 Dec 2007 19:48:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85242 invoked by uid 500); 1 Dec 2007 19:48:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85231 invoked by uid 99); 1 Dec 2007 19:48:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Dec 2007 11:48:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of john.wang@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 01 Dec 2007 19:48:37 +0000
Received: by nf-out-0910.google.com with SMTP id d3so2162216nfc
        for <java-user@lucene.apache.org>; Sat, 01 Dec 2007 11:48:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=1K0s6ePToRRpyikWGw3GQZacnrRqqZDZWbSaB3jYGgw=;
        b=bXF1vBjiX+3Kyw/icAXJMMh2EIJIXHnpaXkG8BMmM+Cs6gmhH5O3EOJ5w+p7QAuRlBUsSB3WJoE+cptIA9BQ5jx/evlHANJYfAqW72H7S7klfQ3p3eQNKJvrTOLCTGu8Mxz7/xBgH4e0AjwRkC8GCj3jazclo8TBA3nvtj4rtHo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=deoZoX/ESdmkFCMG2haoSD6JodQ8NW4JiVViOjlUtmOPj7vCIekmXWncG9TBwr929k0P2Y7OdmbRh5njJPHgpbUOePb7zZsKJn4gQNhQ7qhaX/lQ9+TkxMZJiOJ/y1NNAovosAe1Pilw+iGS1hpe66IVNXdDKy9Jj9mIcK4kbBo=
Received: by 10.86.65.11 with SMTP id n11mr8681456fga.1196538518658;
        Sat, 01 Dec 2007 11:48:38 -0800 (PST)
Received: by 10.86.30.10 with HTTP; Sat, 1 Dec 2007 11:48:38 -0800 (PST)
Message-ID: <8837fb770712011148s72366a8dl42f0d7fe04a2d6b0@mail.gmail.com>
Date: Sat, 1 Dec 2007 11:48:38 -0800
From: "John Wang" <john.wang@gmail.com>
To: java-user@lucene.apache.org
Subject: multireader vs multisearcher
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_3183_18301291.1196538518669"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_3183_18301291.1196538518669
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi:

   What is the difference between using:

1) MultiReader reader=....; // create multi reader from different indexes
    IndexSearcher searcher=new IndexSearcher(reader);
    searcher.search();

vs.

2) IndexSearcher searcher1=...
    IndexSearcher searcher 2=..

    MultiSearcher searcher=new MultiSearcher(new
IndexSearcher[]{searcher1,searcher});

    searcher.search();


I understand there are some differences with idf fixing etc., but seems to
me the api is presenting two ways of solving a problem with slightly
different results.

Thanks

-John

------=_Part_3183_18301291.1196538518669--

From java-user-return-31311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 02 13:34:57 2007
Return-Path: <java-user-return-31311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97063 invoked from network); 2 Dec 2007 13:34:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 2 Dec 2007 13:34:57 -0000
Received: (qmail 7356 invoked by uid 500); 2 Dec 2007 13:34:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7322 invoked by uid 500); 2 Dec 2007 13:34:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7311 invoked by uid 99); 2 Dec 2007 13:34:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Dec 2007 05:34:38 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.237.123] (HELO n10.bullet.re3.yahoo.com) (68.142.237.123)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 02 Dec 2007 13:34:15 +0000
Received: from [68.142.237.89] by n10.bullet.re3.yahoo.com with NNFMP; 02 Dec 2007 13:34:16 -0000
Received: from [66.196.97.135] by t5.bullet.re3.yahoo.com with NNFMP; 02 Dec 2007 13:34:16 -0000
Received: from [127.0.0.1] by omp108.mail.re3.yahoo.com with NNFMP; 02 Dec 2007 13:34:16 -0000
X-Yahoo-Newman-Property: ymail-3
X-Yahoo-Newman-Id: 673592.35264.bm@omp108.mail.re3.yahoo.com
Received: (qmail 22674 invoked by uid 60001); 2 Dec 2007 13:34:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=WT6Tgl83BP0366FWQt/rxgluaNJ8OLJ7PcLD+cnOiwe3KISTlapczn5ROaygOnc32jttJCsz6d8FK/nCA7A1LKsZ7aitbLeWsaIoQFpZuJeeqGy8wUndx10PeRmBq/q+q7uRty4nBjqFgUoJWbQO/IpIxqy6u4lMhUY9UXdEt9o=;
X-YMail-OSG: lFym56QVM1maNerfH_3GYPNqznV7BFv4uaKH0ozWWbJERT.8ycKjBsIPS0Mo7igHFPuGAJ.0vvfkpgnpBhcQbOHKUupGUXsEXx4W
Received: from [59.94.103.27] by web57304.mail.re1.yahoo.com via HTTP; Sun, 02 Dec 2007 05:34:16 PST
Date: Sun, 2 Dec 2007 05:34:16 -0800 (PST)
From: Ruchi Thakur <ruchi.thak11@yahoo.com>
Subject: Re: BooleanQuery TooManyClauses in wildcard search
To: java-user@lucene.apache.org
In-Reply-To: <359a92830712010655n65c129a5p1a47df9de1efc282@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1775707797-1196602456=:20714"
Content-Transfer-Encoding: 8bit
Message-ID: <546094.20714.qm@web57304.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1775707797-1196602456=:20714
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Erick can you please point me to some example of creating a filtered wildcard query. I have not used filters anytime before. Tried reading but still am really not able to understand how filters actually work and will help me getting rid of MaxClause Exception.
   
  Regards,
  Ruchika

Erick Erickson <erickerickson@gmail.com> wrote:
  See below:

On Dec 1, 2007 1:16 AM, Ruchi Thakur wrote:

>
> Erick/John, thank you so much for the reply. I have gone through the
> mailing list u have redirected me to. I know i need to read more, but some
> quick questions. Please bear with me if they appear to be too simple.
> Below is the code snippet of my current search. Also i need to get score
> info of each of my document returned in search, as i display the search
> result in the order of scroing.
> {
> Directory fsDir = FSDirectory.getDirectory(aIndexDir, false);
> IndexSearcher is = new IndexSearcher(fsDir);
> ELSAnalyser elsAnalyser = new ELSStopAnalyser();
> Analyzer analyzer = elsAnalyser.getAnalyzer();
> QueryParser parser = new QueryParser(aIndexField, analyzer);
> Query query = parser.parse(aSearchStr);
> hits = is.search(query);
> }
>

EOE: Minor point that you probably already know, but opening a searcher is
expensive.
I'm assuming you put it in here for clarity, but in case not be
aware you should
open a reader and re-use it as much as posslble.

Also, it looks like you're using an older version of Lucene, since
the
getDirecotory(dir, bool) is deprecated.....


>
> Now as i have understood, through the mail archives you have suggsted,
> below is what we need to do.
> 1)The second was to build a *Filter* that uses WildcardTermEnum -- not a
> Query.
> because it's a filter, the scoring aspects of each document are taken out
> of the equation (I am worried abt it , as i need scoring info)
>

This is true *for the wildcard clause*. It's a legitimate question to ask
what
scoring means for a wildcard clause. Rather, it's legitimate to ask whether
that adds much value. I managed to convince my product manager that
the end user experience didn't suffer enough to matter, but it can be argued
either way.

That said, I'm pretty sure that if you make this a sub-clause of a boolean
query,
you still get scoring for the *other* parts of the query. That is,
BooleanQuery bq = ....
bq.add(regular query);
bq.add(filtered wildcard query);

search (bq);

(note, really sloppy pseudo code there) will give you scoring for
the "regular query" part of the bq. Of course that requires you to
break up the incoming query to the wildcard parts and the not
wildcard parts.......


>
> 2)Once you have a "WildcardFilter" wrapping it in a ConstantScoreQuery
> would give you a drop in replacement for WildCardQuery that would sacrifive
> the TF/IDF scoring factors for speed and garunteed execution on any pattern
> in any index regardless of size. (Does that mean it will solve my scoring
> issue and i will get scoring info)
>

I'm pretty sure that you don't get scoring here. ConstantScoreQuery is
named that way on purpose .


>
> Also it suggests "SpanNearQuery on a wildcard". I am kinda cofused which
> is the approach that should be actually used. Please suggest. At the same
> time i am studing more abt it. Thanks a lot for ur help on this.
>

I think I was looking at this for a method of highlighting, but span queries
won't fix up wildcard queries.

handling arbitrary wildcard queries, that is queries with, say, only
one or two leading letters is an area of Lucene that requires that
one really dig into the guts of querying and do some custom work.
We've had quite reasonable results by imposing the restriction that
wildcard queries MUST have three leading characters. That is,
a*, ab* are illegal, but abc* is legal.

What I'd suggest is to start by imposing that restriction, bumping the
maxbooleanclauses number and just let Lucene do its tricks.
Perhaps catching the TooManyClauses exception and informing
the user with some message like "query to general" or some such.
Then, if the product manager says that is unacceptable let them
know what the cost is and go from there. You'll get push-back that
"of course we must allow one character wildcards", but in my
experience that's often just a knee-jerk reaction and not as
much of a requirement as people think. Your situation may vary....

Yet another possibility, depending upon the size and space
requirements is to play interesting games with your index, for
instance for any word index special one and two letter tokens,
e.g. abcde gets a$, ab$ and abcde all indexed. Then you
pre-process your query and turn a* into a$, ab* into ab$
and just use these terms (you have to take some car
that your query analyzer doesn't strip these out). Now, you've
turned arbitrary wildcards into your three-letter-prefix rule
or simple term queries, preserving relevance etc. You have
to take some care to index your special tokens with 0 increments
so phrase and span queries work, but that's not very hard
especially since Lucene In Action demonstrates the
SynonymAnalyzer which does the same thing.

But note the implicit restriction here that you really
don't search for ab*cd*e* with this scheme, but
neither does Google.

Whew! enough for Saturday morning ....

Best
Erick


>
> Best Regards,
> Ruchika
>
> Erick Erickson wrote:
> John's answer is spot-on. There's a wealth of information in the user
> group
> archives that you should be able to search on discussing ways of providing
> the functionality. One thread titled "I just don't get wildcards at all"
> is one where the folks who know generously helped me out.
>
> Once you find out how to search for that you'll know you're in the right
> place.
> Here's the searchable archive.....
>
>
> http://www.gossamer-threads.com/lists/engine?do=search;search_forum=forum_2;;list=lucene
>
> Make sure you select the "java user" from the top drop-down labeled
> "Search".
>
> Best
> Erick
>
> On Nov 30, 2007 2:07 PM, John Byrne wrote:
>
> > Hi,
> >
> > Your problem is that when you do a wildacrd search, Lucene expands the
> > wildacrd term into all possible terms. So, searching for "stat*"
> > produces a list of terms like "state", "states", "stating" etc. (It only
> > uses terms that actually occur in your index, however). These terms are
> > all added as OR clauses of a boolean query.
> >
> > The thing is, be defult, there is a limit of 1024 caluses for a boolean
> > query. If yuor wildacrd term expands into more than this, (which happens
> > very easily), you get that exception you described. You can solve the
> > issues by setting the maximum clause count yourself, using
> >
> > BooleanQuery.setMaxClauseCount(int maxClauseCount)
> >
> > See
> >
> >
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/core/index.html
> > for mroe info.
> >
> > Bear in mind that putting a wildcard near the start of the term results
> > in a large number of boolean clauses, which increases memory usage. This
> > is the reason for the default limit. This limit will also affect fuzzy
> > queries, because they are expanded in the same way.
> >
> > Regards,
> > JB
> >
> > Ruchi Thakur wrote:
> > >
> > > Hi there.
> > > I am a new Lucene user and I have been searching the group archives
> but
> > couldn't solve the problem. I have just joined a project that uses
> Lucene.
> > > We use the StandardAnalyzer for indexing our documents and our query
> is
> > as
> > > follows when we issue a search string of t* for example:
> > > +t* +cont_type:pa
> > >
> > > We get an Exception when we issue some of our wildcard text searches
> > we get following Exception
> > > org.apache.lucene.search.BooleanQuery$TooManyClauses Exception : Max
> > clause if 1024
> > >
> > > Please suggest.
> > >
> > > Regards,
> > > Ruchi
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > > ---------------------------------
> > > Never miss a thing. Make Yahoo your homepage.
> > >
> > >
> ------------------------------------------------------------------------
> > >
> > > No virus found in this incoming message.
> > > Checked by AVG Free Edition.
> > > Version: 7.5.503 / Virus Database: 269.16.11/1161 - Release Date:
> > 30/11/2007 12:12
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>
> ---------------------------------
> Be a better pen pal. Text or chat with friends inside Yahoo! Mail. See
> how.
>


       
---------------------------------
Be a better pen pal. Text or chat with friends inside Yahoo! Mail. See how.
--0-1775707797-1196602456=:20714--


From java-user-return-31312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 02:11:24 2007
Return-Path: <java-user-return-31312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45194 invoked from network); 3 Dec 2007 02:11:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 02:11:24 -0000
Received: (qmail 546 invoked by uid 500); 3 Dec 2007 02:11:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 521 invoked by uid 500); 3 Dec 2007 02:11:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 510 invoked by uid 99); 3 Dec 2007 02:11:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Dec 2007 18:11:07 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 02:11:09 +0000
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <318228(1)>; Sun, 2 Dec 2007 18:10:33 PST
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58696>; Sun, 2 Dec 2007 18:10:29 PST
To: java-user@lucene.apache.org
Subject: Re: lucene-core-2.2.0.jar broken? CorruptIndexException? 
In-reply-to: <07Nov30.101339pst."58696"@synergy1.parc.xerox.com> 
References: <07Nov28.094136pst."58696"@synergy1.parc.xerox.com> <07Nov28.102301pst."58696"@synergy1.parc.xerox.com> <07Nov28.112847pst."58696"@synergy1.parc.xerox.com> <1196280278.23481.1223752059@webmail.messagingengine.com> <07Nov28.130137pst."58696"@synergy1.parc.xerox.com> <1196284625.4114.1223763677@webmail.messagingengine.com> <07Nov28.210649pst."58696"@synergy1.parc.xerox.com> <1196331025.25608.1223860421@webmail.messagingengine.com> <07Nov29.103456pst."58696"@synergy1.parc.xerox.com> <262FD71B-41F1-4AB6-A0E0-38A785F8CA95@apache.org> <07Nov29.112701pst."58696"@synergy1.parc.xerox.com> <507AA1FE-18DB-4DC6-AF68-C31171FC9AE8@apache.org> <07Nov29.141603pst."58696"@synergy1.parc.xerox.com> <1196375823.32362.1223988889@webmail.messagingengine.com> <07Nov30.101339pst."58696"@synergy1.parc.xerox.com>
Comments: In-reply-to Bill Janssen <janssen@parc.com>
    message dated "Fri, 30 Nov 2007 10:13:29 -0800."
Date: Sun, 2 Dec 2007 18:10:21 PST
From: Bill Janssen <janssen@parc.com>
Message-Id: <07Dec2.181029pst."58696"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> I'll see if I can get back to this over the weekend.

I got a chance to copy my corpus to another G4 and try indexing with
Lucene 2.2.  This one seems OK!  Same texts.  So now I'm inclined to
believe that it *is* the machine, rather than the code.  Whew!  Though
that doesn't explain why 2.0 works fine on the same corpus on the same
machine, in repeated tests.

I'm going to run some diagnostics on the first G4, and see if I can
find a hardware problem.  I'll report back.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 02:24:12 2007
Return-Path: <java-user-return-31313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48433 invoked from network); 3 Dec 2007 02:24:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 02:24:12 -0000
Received: (qmail 13450 invoked by uid 500); 3 Dec 2007 02:23:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13415 invoked by uid 500); 3 Dec 2007 02:23:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13403 invoked by uid 99); 3 Dec 2007 02:23:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Dec 2007 18:23:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of smokeystu@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 02:23:35 +0000
Received: by wa-out-1112.google.com with SMTP id j40so5124440wah
        for <java-user@lucene.apache.org>; Sun, 02 Dec 2007 18:23:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=Pl9vDM0cFEPsulx555tDI5pmwXF1caXVH4+hanv70Zs=;
        b=gAe5gw7xmsb+HgCaIC8rVn0uj9x/p8ogmBWtO/e5UnOmVoMoxjzmUxZ3GVIw0w+FOgYEdMTKh8U7blZs9VW8PkIMYZCyYm+SxaYHL99jc9YzRoQD+XIS6JSufWZAXdXCvcAYmUlNSFGm7T2mDT9XHkTyeXZPISFNYCPgfrGPelo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=DmyRBguiEEJ7hTvkTO8scM52RX5t6y7ANzeekhwJ1BiN3dG/OSmuVY6zZvLICPEIpsupX8Q59Wku/UG7x+/+uaHxiLNoYohVRutzauuJJZsbx9fvVMPdsGIdd47AQEeYqy/++pENjMdKPmzRdqaGxdNogABHiqhbgFXTFz5ixGk=
Received: by 10.143.161.3 with SMTP id n3mr3098344wfo.1196648618102;
        Sun, 02 Dec 2007 18:23:38 -0800 (PST)
Received: by 10.143.16.2 with HTTP; Sun, 2 Dec 2007 18:23:38 -0800 (PST)
Message-ID: <f3c2a27b0712021823k126dc357na4a3d87360173512@mail.gmail.com>
Date: Sun, 2 Dec 2007 21:23:38 -0500
From: smokey <smokeystu@gmail.com>
To: java-user@lucene.apache.org
Subject: SpellChecker performance and usage
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11933_15080828.1196648618100"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11933_15080828.1196648618100
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

My question is for anyone who has experience with Lucene's SpellChecker,
especially around its performance characteristics/ramifications.

1. Given the fact that SpellChecker expands a query by adding all the
permutations of potentially misspelled word, how does it perform in general?

2. How are others handling the case where SpellChecker would NOT perform
well if you expand the query adding all the permutations? In other words,
what kind of techniques are people using to get around or alleviate the
performance hit if any?

Any sharing of information or pointers would be appreciated.

------=_Part_11933_15080828.1196648618100--

From java-user-return-31314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 02:29:39 2007
Return-Path: <java-user-return-31314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49231 invoked from network); 3 Dec 2007 02:29:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 02:29:39 -0000
Received: (qmail 18524 invoked by uid 500); 3 Dec 2007 02:29:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18500 invoked by uid 500); 3 Dec 2007 02:29:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18489 invoked by uid 99); 3 Dec 2007 02:29:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Dec 2007 18:29:21 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.83] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.83)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 02:29:00 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 6349AB86F5
	for <java-user@lucene.apache.org>; Sun,  2 Dec 2007 18:29:00 -0800 (PST)
Message-Id: <F47FD7DE-26AE-4C56-8BC1-A03CC11540EE@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <07Dec2.181029pst."58696"@synergy1.parc.xerox.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: lucene-core-2.2.0.jar broken? CorruptIndexException? 
Date: Sun, 2 Dec 2007 21:28:57 -0500
References: <07Nov28.094136pst."58696"@synergy1.parc.xerox.com> <07Nov28.102301pst."58696"@synergy1.parc.xerox.com> <07Nov28.112847pst."58696"@synergy1.parc.xerox.com> <1196280278.23481.1223752059@webmail.messagingengine.com> <07Nov28.130137pst."58696"@synergy1.parc.xerox.com> <1196284625.4114.1223763677@webmail.messagingengine.com> <07Nov28.210649pst."58696"@synergy1.parc.xerox.com> <1196331025.25608.1223860421@webmail.messagingengine.com> <07Nov29.103456pst."58696"@synergy1.parc.xerox.com> <262FD71B-41F1-4AB6-A0E0-38A785F8CA95@apache.org> <07Nov29.112701pst."58696"@synergy1.parc.xerox.com> <507AA1FE-18DB-4DC6-AF68-C31171FC9AE8@apache.org> <07Nov29.141603pst."58696"@synergy1.parc.xerox.com> <1196375823.32362.1223988889@webmail.messagingengine.com> <07Nov30.101339pst."58696"@synergy1.parc.xerox.com> <07Dec2.181029pst."58696"@synergy1.parc.xerox.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Hmmm, it still sounds like you are hitting a threading issue that is  
probably exacerbated by the multicore platform of the newer machine.   
Is there anyway to put together a unit test that we can try?

Thanks,
Grant

On Dec 2, 2007, at 9:10 PM, Bill Janssen wrote:

>> I'll see if I can get back to this over the weekend.
>
> I got a chance to copy my corpus to another G4 and try indexing with
> Lucene 2.2.  This one seems OK!  Same texts.  So now I'm inclined to
> believe that it *is* the machine, rather than the code.  Whew!  Though
> that doesn't explain why 2.0 works fine on the same corpus on the same
> machine, in repeated tests.
>
> I'm going to run some diagnostics on the first G4, and see if I can
> find a hardware problem.  I'll report back.
>
> Bill
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 02:33:17 2007
Return-Path: <java-user-return-31315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50139 invoked from network); 3 Dec 2007 02:33:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 02:33:17 -0000
Received: (qmail 23414 invoked by uid 500); 3 Dec 2007 02:32:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23376 invoked by uid 500); 3 Dec 2007 02:32:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23365 invoked by uid 99); 3 Dec 2007 02:32:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Dec 2007 18:32:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of yseeley@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 02:33:03 +0000
Received: by wa-out-1112.google.com with SMTP id j40so5131253wah
        for <java-user@lucene.apache.org>; Sun, 02 Dec 2007 18:32:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=I4LmxhLXbNKbX8oRHpscpmtExKm8qN4CL37uX0FnV60=;
        b=gFrDgNV3OF4aH0DRcA3AmpRWZPfeTHBEBUaHn5fIUGkxWws4oAlDICNzOmAVLZIBZTJtaYlSS5sFw2gs4mCqd2LjCeptUXsJXHtKGb7j6pYof7nIs4LngNLV+vQUOFwWp476uVkEGYgt3XNuxeIFQtrvMkTD5mkTP/zbrKPtxpQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=FN8e3Lg6qHrzjW3kZ3dvKl6X5uMe7Pjf0gLnUyplV7qdXgqrV7L3YF2onsahWjB3uYbZBhPccaWAa9F1NlOswwVVrNxeSRPTdsUj8JzF+bEiwWwwvyF9lLw1suxeNRvxGPkrlV78HFERiBv7Ls9isHuLPwOQCswqZEoYXNV3+5U=
Received: by 10.142.102.5 with SMTP id z5mr1629620wfb.1196649161641;
        Sun, 02 Dec 2007 18:32:41 -0800 (PST)
Received: by 10.143.165.13 with HTTP; Sun, 2 Dec 2007 18:32:41 -0800 (PST)
Message-ID: <c68e39170712021832o340befdam4a4c4adb1beb7c9b@mail.gmail.com>
Date: Sun, 2 Dec 2007 21:32:41 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: lucene-core-2.2.0.jar broken? CorruptIndexException?
In-Reply-To: <F47FD7DE-26AE-4C56-8BC1-A03CC11540EE@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1196280278.23481.1223752059@webmail.messagingengine.com>
	 <1196284625.4114.1223763677@webmail.messagingengine.com>
	 <1196331025.25608.1223860421@webmail.messagingengine.com>
	 <262FD71B-41F1-4AB6-A0E0-38A785F8CA95@apache.org>
	 <507AA1FE-18DB-4DC6-AF68-C31171FC9AE8@apache.org>
	 <1196375823.32362.1223988889@webmail.messagingengine.com>
	 <F47FD7DE-26AE-4C56-8BC1-A03CC11540EE@apache.org>
X-Google-Sender-Auth: 7f6f257d8b8b6820
X-Virus-Checked: Checked by ClamAV on apache.org

On Dec 2, 2007 9:28 PM, Grant Ingersoll <gsingers@apache.org> wrote:
> Hmmm, it still sounds like you are hitting a threading issue that is
> probably exacerbated by the multicore platform of the newer machine.

Exactly what I was thinking.
What are the details of the CPUs of these two systems?

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 03:14:59 2007
Return-Path: <java-user-return-31316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58838 invoked from network); 3 Dec 2007 03:14:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 03:14:57 -0000
Received: (qmail 50812 invoked by uid 500); 3 Dec 2007 03:14:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50407 invoked by uid 500); 3 Dec 2007 03:14:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50396 invoked by uid 99); 3 Dec 2007 03:14:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Dec 2007 19:14:39 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of smokeystu@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 03:14:20 +0000
Received: by wa-out-1112.google.com with SMTP id j40so5161190wah
        for <java-user@lucene.apache.org>; Sun, 02 Dec 2007 19:14:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=YgtSKLrAs7zLuPU4OpJv7A2wT/eNoUo7jmK82xPFy98=;
        b=NmOFQ4HBytIcNq7CrLJpkuTuxjLv62s2TS5+Xka+xhefNfrekWZToZWpq+WXpk1W0BUg9mbYy90c/djAsvhOWUGzz04iBT1JeOHaeuD9qF/glHMgvneHyIkBjCaZLl+rAysIAOYnhPEOH66pyJVvHoUT9oCWcLk68RXD1mTjkDE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=jSzaaE94PzkDV4poEnD4gOGbz4MnI16NPHxZDeGuM0lLmjsPvFajoSXQhdYcGawzxYWzGPf/4KoBE5VgMMHM/EvrT/1Ky9igVye7TY9phLOi+roS6aLn2ubhY8YdHus9NzjEduuk8N1r8j8tyN+8CbeaMKG2xKm+DSUT7EQ6wd0=
Received: by 10.142.73.8 with SMTP id v8mr269870wfa.1196651663249;
        Sun, 02 Dec 2007 19:14:23 -0800 (PST)
Received: by 10.143.16.2 with HTTP; Sun, 2 Dec 2007 19:14:23 -0800 (PST)
Message-ID: <f3c2a27b0712021914o494d55d6r7e569ccde3001dfa@mail.gmail.com>
Date: Sun, 2 Dec 2007 22:14:23 -0500
From: smokey <smokeystu@gmail.com>
To: java-user@lucene.apache.org
Subject: Applying SpellChecker to a phrase
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12082_233907.1196651663246"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12082_233907.1196651663246
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Suppose I have an index containing the terms impostor, imposter, fraud, and
fruad, then presumably regardless of whether I spell impostor and fraud
correctly, Lucene SpellChecker will offer the improperly spelled versions as
corrections. This means that the phrase "The login fraud involves an
impostor" would need to expand to:

"The login fraud involves an impostor" OR "The login fruad involves an
impostor" OR "The login fraud involves an imposter" OR "The login fruad
involves an imposter" to cover all cases and thus find all possible matches.

However, that feels like an aweful a lot of matches to perform on the index.
A more efficient approach would be to expand the query to "The login (fraud
OR fruad) involves an (impostor OR imposter)", which should be logically
equivalent to the first (longer) query.

So my question is
(1) if others have generated the "The login (fraud OR fruad) involves an
(impostor OR imposter)" types of queries when applying SpellChecker to a
phrase, and agreed that this indeed performs better than the first one.
(2) if others have observed any problems in doing so in terms of performance
or anything else

Any information would be appreciated.

------=_Part_12082_233907.1196651663246--

From java-user-return-31317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 03:38:53 2007
Return-Path: <java-user-return-31317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64993 invoked from network); 3 Dec 2007 03:38:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 03:38:53 -0000
Received: (qmail 58729 invoked by uid 500); 3 Dec 2007 03:38:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58700 invoked by uid 500); 3 Dec 2007 03:38:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58689 invoked by uid 99); 3 Dec 2007 03:38:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Dec 2007 19:38:35 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 03:38:14 +0000
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <318971(2)>; Sun, 2 Dec 2007 19:38:02 PST
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58696>; Sun, 2 Dec 2007 19:37:55 PST
To: java-user@lucene.apache.org
Subject: Re: lucene-core-2.2.0.jar broken? CorruptIndexException? 
In-reply-to: <c68e39170712021832o340befdam4a4c4adb1beb7c9b@mail.gmail.com> 
References: <1196280278.23481.1223752059@webmail.messagingengine.com> <1196284625.4114.1223763677@webmail.messagingengine.com> <1196331025.25608.1223860421@webmail.messagingengine.com> <262FD71B-41F1-4AB6-A0E0-38A785F8CA95@apache.org> <507AA1FE-18DB-4DC6-AF68-C31171FC9AE8@apache.org> <1196375823.32362.1223988889@webmail.messagingengine.com> <F47FD7DE-26AE-4C56-8BC1-A03CC11540EE@apache.org> <c68e39170712021832o340befdam4a4c4adb1beb7c9b@mail.gmail.com>
Comments: In-reply-to "Yonik Seeley" <yonik@apache.org>
    message dated "Sun, 02 Dec 2007 18:32:41 -0800."
Date: Sun, 2 Dec 2007 19:37:46 PST
From: Bill Janssen <janssen@parc.com>
Message-Id: <07Dec2.193755pst."58696"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked by ClamAV on apache.org

> > Hmmm, it still sounds like you are hitting a threading issue that is
> > probably exacerbated by the multicore platform of the newer machine.
> 
> Exactly what I was thinking.
> What are the details of the CPUs of these two systems?

Ah, good point.  The bad machine is a dual-processor 1GHz G4 "wind
tunnel" model, and the good machine is a 1.5GH single-processor G4
Powerbook.  I'm running the re-indexing in a daemon thread in a server
which manages the repository.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 05:05:01 2007
Return-Path: <java-user-return-31318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85424 invoked from network); 3 Dec 2007 05:05:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 05:05:01 -0000
Received: (qmail 81643 invoked by uid 500); 3 Dec 2007 05:04:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81609 invoked by uid 500); 3 Dec 2007 05:04:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81598 invoked by uid 99); 3 Dec 2007 05:04:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Dec 2007 21:04:44 -0800
X-ASF-Spam-Status: No, hits=-2.1 required=10.0
	tests=DATE_IN_PAST_06_12,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.157 as permitted sender)
Received: from [195.212.29.157] (HELO mtagate8.de.ibm.com) (195.212.29.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 05:04:22 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate8.de.ibm.com (8.13.8/8.13.8) with ESMTP id lB354NNN465978
	for <java-user@lucene.apache.org>; Mon, 3 Dec 2007 05:04:23 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id lB354NwM3010772
	for <java-user@lucene.apache.org>; Mon, 3 Dec 2007 06:04:23 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id lB354NBj004829
	for <java-user@lucene.apache.org>; Mon, 3 Dec 2007 06:04:23 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id lB354NeJ004826
	for <java-user@lucene.apache.org>; Mon, 3 Dec 2007 06:04:23 +0100
In-Reply-To: <8837fb770712011148s72366a8dl42f0d7fe04a2d6b0@mail.gmail.com>
Subject: Re: multireader vs multisearcher
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF924D8F48.261C9541-ONC22573A5.0077E70D-C22573A5.007A94D3@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 3 Dec 2007 00:18:54 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 8.0|August 02, 2007) at 03/12/2007
 07:04:23
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

MultiReader is more efficient and is preferred when possible.
MultiSearcher allows further functionality.

Every time an index has more than a single segment (which is.
to say almost every index except for after calling optimize()),
Opening an IndexReader (or an IndexSearcher) above that index),
is actually using a MultiReader, each reader actually is a
SegmentReader. So MultiReader is a basic "tool" for
accessing a multi-segment index.

MultiSearcher is more geared for situations where an
application maintains several separate indexes, and needs
to allow searching all (or some) of them. They may reside in
separate machines. The specific Searcher implementation
to access some of them may be Web based. Still, MultiSearcher),
allows to search all of them with a single search() call.

"John Wang" <john.wang@gmail.com> wrote on 01/12/2007 21:48:38:

> Hi:
>
>    What is the difference between using:
>
> 1) MultiReader reader=....; // create multi reader from different indexes
>     IndexSearcher searcher=new IndexSearcher(reader);
>     searcher.search();
>
> vs.
>
> 2) IndexSearcher searcher1=...
>     IndexSearcher searcher 2=..
>
>     MultiSearcher searcher=new MultiSearcher(new
> IndexSearcher[]{searcher1,searcher});
>
>     searcher.search();
>
>
> I understand there are some differences with idf fixing etc.,
> but seems to
> me the api is presenting two ways of solving a problem with slightly
> different results.
>
> Thanks
>
> -John


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 05:05:09 2007
Return-Path: <java-user-return-31319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85471 invoked from network); 3 Dec 2007 05:05:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 05:05:09 -0000
Received: (qmail 82700 invoked by uid 500); 3 Dec 2007 05:04:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82660 invoked by uid 500); 3 Dec 2007 05:04:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82519 invoked by uid 99); 3 Dec 2007 05:04:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 02 Dec 2007 21:04:44 -0800
X-ASF-Spam-Status: No, hits=-2.1 required=10.0
	tests=DATE_IN_PAST_06_12,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.155 as permitted sender)
Received: from [195.212.29.155] (HELO mtagate6.de.ibm.com) (195.212.29.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 05:04:22 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate6.de.ibm.com (8.13.8/8.13.8) with ESMTP id lB354Njx397766
	for <java-user@lucene.apache.org>; Mon, 3 Dec 2007 05:04:23 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id lB354NfP2572430
	for <java-user@lucene.apache.org>; Mon, 3 Dec 2007 06:04:23 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id lB354NS0004832
	for <java-user@lucene.apache.org>; Mon, 3 Dec 2007 06:04:23 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id lB354NeK004826
	for <java-user@lucene.apache.org>; Mon, 3 Dec 2007 06:04:23 +0100
In-Reply-To: <47501C4A.2080300@gmail.com>
Subject: Re: FSDirectory Again
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFF56C789D.7346A638-ONC22573A5.007AE830-C22573A5.007B5FF9@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 3 Dec 2007 00:27:34 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 8.0|August 02, 2007) at 03/12/2007
 07:04:23
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

This is from Lucene's CHANGES.txt:
    LUCENE-773: Deprecate the FSDirectory.getDirectory(*) methods that
    take a boolean "create" argument.  Instead you should use
    IndexWriter's "create" argument to create a new index.
    (Mike McCandless)

So you should create the FSDir with

    FSDirectory.getDirectory(File file)

and then you may tell IndexWriter that it shuold clear
old indexes files from FSDir and start/create a new/fresh
index, for examlpe by using:

    new IndexWriter(dir, myAnalyzer, create); // create=true


Liaqat Ali <liaqatalimian@gmail.com> wrote on 30/11/2007 16:20:58:

> No you are not getting me.  I have this original code. What i should use
> instead of this code to create  a directory, because the dir
> =FSDirectory.getDirectory(indexDir, true) is deprecated.
>
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.FSDirectory;
>
> protected Directory dir;
>
>   protected void setUp() throws IOException {
>     String indexDir =
>       System.getProperty("java.io.tmpdir", "tmp") +
>       System.getProperty("file.separator") + "index-dir";
>     dir = FSDirectory.getDirectory(indexDir, true);
>     addDocuments(dir);
>   }


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 08:42:28 2007
Return-Path: <java-user-return-31320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37562 invoked from network); 3 Dec 2007 08:42:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 08:42:28 -0000
Received: (qmail 7035 invoked by uid 500); 3 Dec 2007 08:42:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6993 invoked by uid 500); 3 Dec 2007 08:42:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6982 invoked by uid 99); 3 Dec 2007 08:42:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 00:42:10 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [202.137.233.110] (HELO rediff.co.in) (202.137.233.110)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 08:42:12 +0000
Received: (qmail 4066 invoked from network); 3 Dec 2007 14:08:57 +0530
Received: from unknown (HELO nizamulh) (202.137.233.192)
  by mailserver with SMTP; 3 Dec 2007 14:08:57 +0530
Message-ID: <003701c83589$4c412ab0$3c0310ac@nizamulh>
Reply-To: "Nizamul" <nizamulh@rediff.co.in>
From: "Nizamul" <nizamulh@rediff.co.in>
To: <java-user@lucene.apache.org>
Subject: can we do partial optimization?
Date: Mon, 3 Dec 2007 14:18:34 +0530
Organization: Rediff.com
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0034_01C835B7.63761730"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1914
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1914
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_0034_01C835B7.63761730
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hello,=20
I am very new to Lucene.I am facing one problem.
 I have one very large index which is constantly getting update(add and =
delete) at a regular interval.after which I am optimizing the whole =
index (otherwise searches will be slow) but optimization takes time.So I =
was thinking to merge only the segments of lesser size(I guess it will =
be a good compromise between search time and optimization time) i.e. =
suppose I have 10 segment=20
1 of 10,000,000 doc
4 of 100,000 doc
4 of 10,000 doc=20
and 1 of 5 doc.

I want to merger 9 segment of lesser size  in to  one(I believe this =
would not take much time and searching will improve a lot).But I don't =
know how to do partial merging.Whether Lucene allow it or not?? or if I =
can extend indexWriter and add a method optimize of my own where I can =
specify which cfs file to chose for optimization?

Thanks and Regards,
Nizam
------=_NextPart_000_0034_01C835B7.63761730--


From java-user-return-31321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 09:52:01 2007
Return-Path: <java-user-return-31321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53003 invoked from network); 3 Dec 2007 09:52:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 09:52:01 -0000
Received: (qmail 70488 invoked by uid 500); 3 Dec 2007 09:51:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70453 invoked by uid 500); 3 Dec 2007 09:51:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70442 invoked by uid 99); 3 Dec 2007 09:51:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 01:51:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 09:51:23 +0000
Received: from compute2.internal (compute2.internal [10.202.2.42])
	by out1.messagingengine.com (Postfix) with ESMTP id 724D65A001;
	Mon,  3 Dec 2007 04:51:25 -0500 (EST)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute2.internal (MEProxy); Mon, 03 Dec 2007 04:51:25 -0500
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 58C4238EFC; Mon,  3 Dec 2007 04:51:25 -0500 (EST)
Message-Id: <1196675485.12775.1224472045@webmail.messagingengine.com>
X-Sasl-Enc: zbptArI4K7ZTczNBUBXoMvN9hBjs/GJVXH7SoenZe+SX 1196675485
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org, "Nizamul" <nizamulh@rediff.co.in>
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <003701c83589$4c412ab0$3c0310ac@nizamulh>
Subject: Re: can we do partial optimization?
In-Reply-To: <003701c83589$4c412ab0$3c0310ac@nizamulh>
Date: Mon, 03 Dec 2007 04:51:25 -0500
X-Virus-Checked: Checked by ClamAV on apache.org


The current trunk of Lucene (unreleased 2.3-dev) has a new method on
IndexWriter: optimize(int maxNumSegments).  This method should do what
you want: you tell it how many segments to optimize down to, and it
will try to pick the least cost merges to get the index to that
point.  It's very new (only committed a few days ago), plus the trunk
may have bugs, so tread carefully!

If that doesn't seem to do the right merges for your index, it's also
very simple to create your own MergePolicy.  You can subclass the
default LogByteSizeMergePolicy and override the
"findMergesForOptimize" method.  This feature (separate MergePolicy)
is also only available in 2.3-dev (trunk).

Mike

"Nizamul" <nizamulh@rediff.co.in> wrote:
> Hello, 
> I am very new to Lucene.I am facing one problem.
>  I have one very large index which is constantly getting update(add and
>  delete) at a regular interval.after which I am optimizing the whole
>  index (otherwise searches will be slow) but optimization takes time.So I
>  was thinking to merge only the segments of lesser size(I guess it will
>  be a good compromise between search time and optimization time) i.e.
>  suppose I have 10 segment 
> 1 of 10,000,000 doc
> 4 of 100,000 doc
> 4 of 10,000 doc 
> and 1 of 5 doc.
> 
> I want to merger 9 segment of lesser size  in to  one(I believe this
> would not take much time and searching will improve a lot).But I don't
> know how to do partial merging.Whether Lucene allow it or not?? or if I
> can extend indexWriter and add a method optimize of my own where I can
> specify which cfs file to chose for optimization?
> 
> Thanks and Regards,
> Nizam

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 11:46:29 2007
Return-Path: <java-user-return-31322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87173 invoked from network); 3 Dec 2007 11:46:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 11:46:29 -0000
Received: (qmail 7427 invoked by uid 500); 3 Dec 2007 11:46:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7399 invoked by uid 500); 3 Dec 2007 11:46:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7388 invoked by uid 99); 3 Dec 2007 11:46:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 03:46:11 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a8.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 11:45:49 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a8.g.dreamhost.com (Postfix) with ESMTP id E1A1510BB4B
	for <java-user@lucene.apache.org>; Mon,  3 Dec 2007 03:45:51 -0800 (PST)
Message-Id: <BC06E488-8B08-4971-A55E-05AE6B2D1314@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: FieldCache Implementations
Date: Mon, 3 Dec 2007 06:45:50 -0500
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Does any out there using Lucene implement their own version of  
FieldCache.java?  We are proposing to make it an abstract class, which  
violates our general rule about back-compatibility (see https://issues.apache.org/jira/browse/LUCENE-1045)

-Grant

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 13:12:51 2007
Return-Path: <java-user-return-31323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16306 invoked from network); 3 Dec 2007 13:12:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 13:12:50 -0000
Received: (qmail 74085 invoked by uid 500); 3 Dec 2007 13:12:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74054 invoked by uid 500); 3 Dec 2007 13:12:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74043 invoked by uid 99); 3 Dec 2007 13:12:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 05:12:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 13:12:12 +0000
Received: by mu-out-0910.google.com with SMTP id i10so1109520mue
        for <java-user@lucene.apache.org>; Mon, 03 Dec 2007 05:12:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=RqbNvRZeY5tjhbjINLHdvnNJCzfhIvFgzq1RPR1SFFs=;
        b=VMVd4c193R1Y9+xdrB9oKf3kQ1IuQz4TENXZgtfVXlCyVUndjcEmLfKyYxuIyZXbvRi9GgCTbLhwEITkMwSXH7GbF3b43Hpha84zbEWk0DtVO+yF3qlZ3lxq0t66JFpZGTRBMYEdOqOzYs0EkI+KcRIRYbmrHyPZRN+xet5r6Rc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LMQzpK7JSFdiKosh/58l+mreqBZc140Ldwx8rFoAi/sNwVwUQeCB8WzZkndRqlriipxSCZ0WorbiV2GVnYxFiHi8PwadXkpQIm3eVfzovvVrzC5HZ/syMB+cXknVS+IZEngUyvCEoMHi0fvfmC+ORJ58M276Q/hEehWWSyrRQBs=
Received: by 10.82.116.15 with SMTP id o15mr16766653buc.1196687532694;
        Mon, 03 Dec 2007 05:12:12 -0800 (PST)
Received: by 10.82.155.11 with HTTP; Mon, 3 Dec 2007 05:12:12 -0800 (PST)
Message-ID: <359a92830712030512s46a750c1l5ef460b62efd8353@mail.gmail.com>
Date: Mon, 3 Dec 2007 08:12:12 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Applying SpellChecker to a phrase
In-Reply-To: <f3c2a27b0712021914o494d55d6r7e569ccde3001dfa@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5746_5577148.1196687532684"
References: <f3c2a27b0712021914o494d55d6r7e569ccde3001dfa@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5746_5577148.1196687532684
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have you actually tried this and done a query.toString() to see
how this is actually expanded? Not that I'm all that familiar
with SpellChecker, but before presuming how things work
you would get answers faster if you ran a test.....

And, why do you care about performance? I know that's
a silly question, but you haven't supplied any parameters
about your index and usage to give us a clue whether this
matters. If your index is 3M, you'll never see the difference
between the two ways of expanding the query. If your
index is distributed over 10 machines and is 1T, you really,
really, really care.

And under any circumstances, you can always generate
your own query of the second form by a bit of pre-processing.

More info please.....

Best
Erick

On Dec 2, 2007 10:14 PM, smokey <smokeystu@gmail.com> wrote:

> Suppose I have an index containing the terms impostor, imposter, fraud,
> and
> fruad, then presumably regardless of whether I spell impostor and fraud
> correctly, Lucene SpellChecker will offer the improperly spelled versions
> as
> corrections. This means that the phrase "The login fraud involves an
> impostor" would need to expand to:
>
> "The login fraud involves an impostor" OR "The login fruad involves an
> impostor" OR "The login fraud involves an imposter" OR "The login fruad
> involves an imposter" to cover all cases and thus find all possible
> matches.
>
> However, that feels like an aweful a lot of matches to perform on the
> index.
> A more efficient approach would be to expand the query to "The login
> (fraud
> OR fruad) involves an (impostor OR imposter)", which should be logically
> equivalent to the first (longer) query.
>
> So my question is
> (1) if others have generated the "The login (fraud OR fruad) involves an
> (impostor OR imposter)" types of queries when applying SpellChecker to a
> phrase, and agreed that this indeed performs better than the first one.
> (2) if others have observed any problems in doing so in terms of
> performance
> or anything else
>
> Any information would be appreciated.
>

------=_Part_5746_5577148.1196687532684--

From java-user-return-31324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 13:19:24 2007
Return-Path: <java-user-return-31324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20302 invoked from network); 3 Dec 2007 13:19:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 13:19:24 -0000
Received: (qmail 81932 invoked by uid 500); 3 Dec 2007 13:19:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81907 invoked by uid 500); 3 Dec 2007 13:19:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81628 invoked by uid 99); 3 Dec 2007 13:19:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 05:19:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 13:19:02 +0000
Received: by mu-out-0910.google.com with SMTP id i10so1116082mue
        for <java-user@lucene.apache.org>; Mon, 03 Dec 2007 05:18:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=yyxZjncHjxctPMv2GmqgX1FuaZXzvJKF2FMYNlmKhss=;
        b=MJ9bRcdTSx6bRkBsVYYDLlNO7VqGLEBxbelVwcxSh8J9u4fr8Y1sZhsm00W/dvPxV9rJJ7eqEh+hllKtfAEHkstE9QM47gySpcIUaiQTeKv5z5mdN47CLVb55JHVzOwmWSDTWQ4gu1jlsVpWDx2KVNfdJ/TOELSY6+nqQ34ru0M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FPvgavbMO73Rulmoh1tL73xFUffzyb6BiEH/xWgg63PGadQN2poS5kHz5M5rSFx2l+9rH777O3Np1bjo+B76bn14wqvlU5BwQqDg2M7MaaTjFyviRdSi1d9cw0C7GFjpY/fzM5oqgDCG12QLibfNA73RKglffsUqt9SfYFzcxUs=
Received: by 10.82.118.2 with SMTP id q2mr1543536buc.1196687920506;
        Mon, 03 Dec 2007 05:18:40 -0800 (PST)
Received: by 10.82.155.11 with HTTP; Mon, 3 Dec 2007 05:18:40 -0800 (PST)
Message-ID: <359a92830712030518h1e44b37dwdded19a7449976ee@mail.gmail.com>
Date: Mon, 3 Dec 2007 08:18:40 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery TooManyClauses in wildcard search
In-Reply-To: <546094.20714.qm@web57304.mail.re1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5764_5604056.1196687920487"
References: <359a92830712010655n65c129a5p1a47df9de1efc282@mail.gmail.com>
	 <546094.20714.qm@web57304.mail.re1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5764_5604056.1196687920487
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

First time I tried this I made it WAAAAAY more complex than it is <G>....

WARNING: this is from an older code base so you may have to tweak
it. Might be 1.9 code....

public class WildcardTermFilter
        extends Filter {

    private static final long serialVersionUID = 1L;


    protected BitSet bits = null;
    private String   field;
    private String   value;

    public WildcardTermFilter(String field, String value) {
        this.field = field;
        this.value = value;
    }

    public BitSet bits(IndexReader reader)
            throws IOException {
        bits = new BitSet(reader.maxDoc());

        TermDocs         termDocs = reader.termDocs();
        WildcardTermEnum wildEnum = new WildcardTermEnum(reader, new
Term(field, value));

        for (Term term = null; (term = wildEnum.term()) != null;
wildEnum.next()) {
            termDocs.seek(new Term(
                    field,
                    term.text()));

            while (termDocs.next()) {
                bits.set(termDocs.doc());
            }
        }

        return bits;
    }
}


On Dec 2, 2007 8:34 AM, Ruchi Thakur <ruchi.thak11@yahoo.com> wrote:

> Erick can you please point me to some example of creating a filtered
> wildcard query. I have not used filters anytime before. Tried reading but
> still am really not able to understand how filters actually work and will
> help me getting rid of MaxClause Exception.
>
>  Regards,
>  Ruchika
>
> Erick Erickson <erickerickson@gmail.com> wrote:
>  See below:
>
> On Dec 1, 2007 1:16 AM, Ruchi Thakur wrote:
>
> >
> > Erick/John, thank you so much for the reply. I have gone through the
> > mailing list u have redirected me to. I know i need to read more, but
> some
> > quick questions. Please bear with me if they appear to be too simple.
> > Below is the code snippet of my current search. Also i need to get score
> > info of each of my document returned in search, as i display the search
> > result in the order of scroing.
> > {
> > Directory fsDir = FSDirectory.getDirectory(aIndexDir, false);
> > IndexSearcher is = new IndexSearcher(fsDir);
> > ELSAnalyser elsAnalyser = new ELSStopAnalyser();
> > Analyzer analyzer = elsAnalyser.getAnalyzer();
> > QueryParser parser = new QueryParser(aIndexField, analyzer);
> > Query query = parser.parse(aSearchStr);
> > hits = is.search(query);
> > }
> >
>
> EOE: Minor point that you probably already know, but opening a searcher is
> expensive.
> I'm assuming you put it in here for clarity, but in case not be
> aware you should
> open a reader and re-use it as much as posslble.
>
> Also, it looks like you're using an older version of Lucene, since
> the
> getDirecotory(dir, bool) is deprecated.....
>
>
> >
> > Now as i have understood, through the mail archives you have suggsted,
> > below is what we need to do.
> > 1)The second was to build a *Filter* that uses WildcardTermEnum -- not a
> > Query.
> > because it's a filter, the scoring aspects of each document are taken
> out
> > of the equation (I am worried abt it , as i need scoring info)
> >
>
> This is true *for the wildcard clause*. It's a legitimate question to ask
> what
> scoring means for a wildcard clause. Rather, it's legitimate to ask
> whether
> that adds much value. I managed to convince my product manager that
> the end user experience didn't suffer enough to matter, but it can be
> argued
> either way.
>
> That said, I'm pretty sure that if you make this a sub-clause of a boolean
> query,
> you still get scoring for the *other* parts of the query. That is,
> BooleanQuery bq = ....
> bq.add(regular query);
> bq.add(filtered wildcard query);
>
> search (bq);
>
> (note, really sloppy pseudo code there) will give you scoring for
> the "regular query" part of the bq. Of course that requires you to
> break up the incoming query to the wildcard parts and the not
> wildcard parts.......
>
>
> >
> > 2)Once you have a "WildcardFilter" wrapping it in a ConstantScoreQuery
> > would give you a drop in replacement for WildCardQuery that would
> sacrifive
> > the TF/IDF scoring factors for speed and garunteed execution on any
> pattern
> > in any index regardless of size. (Does that mean it will solve my
> scoring
> > issue and i will get scoring info)
> >
>
> I'm pretty sure that you don't get scoring here. ConstantScoreQuery is
> named that way on purpose .
>
>
> >
> > Also it suggests "SpanNearQuery on a wildcard". I am kinda cofused which
> > is the approach that should be actually used. Please suggest. At the
> same
> > time i am studing more abt it. Thanks a lot for ur help on this.
> >
>
> I think I was looking at this for a method of highlighting, but span
> queries
> won't fix up wildcard queries.
>
> handling arbitrary wildcard queries, that is queries with, say, only
> one or two leading letters is an area of Lucene that requires that
> one really dig into the guts of querying and do some custom work.
> We've had quite reasonable results by imposing the restriction that
> wildcard queries MUST have three leading characters. That is,
> a*, ab* are illegal, but abc* is legal.
>
> What I'd suggest is to start by imposing that restriction, bumping the
> maxbooleanclauses number and just let Lucene do its tricks.
> Perhaps catching the TooManyClauses exception and informing
> the user with some message like "query to general" or some such.
> Then, if the product manager says that is unacceptable let them
> know what the cost is and go from there. You'll get push-back that
> "of course we must allow one character wildcards", but in my
> experience that's often just a knee-jerk reaction and not as
> much of a requirement as people think. Your situation may vary....
>
> Yet another possibility, depending upon the size and space
> requirements is to play interesting games with your index, for
> instance for any word index special one and two letter tokens,
> e.g. abcde gets a$, ab$ and abcde all indexed. Then you
> pre-process your query and turn a* into a$, ab* into ab$
> and just use these terms (you have to take some car
> that your query analyzer doesn't strip these out). Now, you've
> turned arbitrary wildcards into your three-letter-prefix rule
> or simple term queries, preserving relevance etc. You have
> to take some care to index your special tokens with 0 increments
> so phrase and span queries work, but that's not very hard
> especially since Lucene In Action demonstrates the
> SynonymAnalyzer which does the same thing.
>
> But note the implicit restriction here that you really
> don't search for ab*cd*e* with this scheme, but
> neither does Google.
>
> Whew! enough for Saturday morning ....
>
> Best
> Erick
>
>
> >
> > Best Regards,
> > Ruchika
> >
> > Erick Erickson wrote:
> > John's answer is spot-on. There's a wealth of information in the user
> > group
> > archives that you should be able to search on discussing ways of
> providing
> > the functionality. One thread titled "I just don't get wildcards at all"
> > is one where the folks who know generously helped me out.
> >
> > Once you find out how to search for that you'll know you're in the right
> > place.
> > Here's the searchable archive.....
> >
> >
> >
> http://www.gossamer-threads.com/lists/engine?do=search;search_forum=forum_2;;list=lucene
> >
> > Make sure you select the "java user" from the top drop-down labeled
> > "Search".
> >
> > Best
> > Erick
> >
> > On Nov 30, 2007 2:07 PM, John Byrne wrote:
> >
> > > Hi,
> > >
> > > Your problem is that when you do a wildacrd search, Lucene expands the
> > > wildacrd term into all possible terms. So, searching for "stat*"
> > > produces a list of terms like "state", "states", "stating" etc. (It
> only
> > > uses terms that actually occur in your index, however). These terms
> are
> > > all added as OR clauses of a boolean query.
> > >
> > > The thing is, be defult, there is a limit of 1024 caluses for a
> boolean
> > > query. If yuor wildacrd term expands into more than this, (which
> happens
> > > very easily), you get that exception you described. You can solve the
> > > issues by setting the maximum clause count yourself, using
> > >
> > > BooleanQuery.setMaxClauseCount(int maxClauseCount)
> > >
> > > See
> > >
> > >
> >
> http://lucene.zones.apache.org:8080/hudson/job/Lucene-Nightly/javadoc/core/index.html
> > > for mroe info.
> > >
> > > Bear in mind that putting a wildcard near the start of the term
> results
> > > in a large number of boolean clauses, which increases memory usage.
> This
> > > is the reason for the default limit. This limit will also affect fuzzy
> > > queries, because they are expanded in the same way.
> > >
> > > Regards,
> > > JB
> > >
> > > Ruchi Thakur wrote:
> > > >
> > > > Hi there.
> > > > I am a new Lucene user and I have been searching the group archives
> > but
> > > couldn't solve the problem. I have just joined a project that uses
> > Lucene.
> > > > We use the StandardAnalyzer for indexing our documents and our query
> > is
> > > as
> > > > follows when we issue a search string of t* for example:
> > > > +t* +cont_type:pa
> > > >
> > > > We get an Exception when we issue some of our wildcard text searches
> > > we get following Exception
> > > > org.apache.lucene.search.BooleanQuery$TooManyClauses Exception : Max
> > > clause if 1024
> > > >
> > > > Please suggest.
> > > >
> > > > Regards,
> > > > Ruchi
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > ---------------------------------
> > > > Never miss a thing. Make Yahoo your homepage.
> > > >
> > > >
> > ------------------------------------------------------------------------
> > > >
> > > > No virus found in this incoming message.
> > > > Checked by AVG Free Edition.
> > > > Version: 7.5.503 / Virus Database: 269.16.11/1161 - Release Date:
> > > 30/11/2007 12:12
> > > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> >
> > ---------------------------------
> > Be a better pen pal. Text or chat with friends inside Yahoo! Mail. See
> > how.
> >
>
>
>
> ---------------------------------
> Be a better pen pal. Text or chat with friends inside Yahoo! Mail. See
> how.
>

------=_Part_5764_5604056.1196687920487--

From java-user-return-31325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 15:23:59 2007
Return-Path: <java-user-return-31325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58751 invoked from network); 3 Dec 2007 15:23:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 15:23:58 -0000
Received: (qmail 25403 invoked by uid 500); 3 Dec 2007 15:23:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25373 invoked by uid 500); 3 Dec 2007 15:23:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25362 invoked by uid 99); 3 Dec 2007 15:23:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 07:23:40 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of smokeystu@gmail.com designates 64.233.162.228 as permitted sender)
Received: from [64.233.162.228] (HELO nz-out-0506.google.com) (64.233.162.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 15:23:20 +0000
Received: by nz-out-0506.google.com with SMTP id i28so1902603nzi
        for <java-user@lucene.apache.org>; Mon, 03 Dec 2007 07:23:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=thcj2ooWGu0GMksOntPvfMxMUygZ0SubY4wr2vZHYx8=;
        b=UZnjJo0agqB/QN4L1gicjf5PVZ4eifvdc2fRvKOXPBoKj4Twd6JxgDsXo8Y8kNYJ7Rs+5H9cUBLJ5yEMh6k5CY8d3YDCxAqRTkYEyXWMx1mnV+JLW/tnA5Q/RiaeOV9zLfzm4ut1dqasE79v9ZTfQKOSn7qWxcFUTxSVffchm58=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=received:message-id:date:from:to:subject:mime-version:content-type;
        b=FD5so9wBBgykRd3BGwxC6bIHvy5qZp/B+DimajuwEWhNOHVIi8JRwBa4K/WiPC6sPJtiYUFy2KMGVRJIHx+trib9h1tyekyHfHpzLoK2PSZGvW3SAIDepbnIk1VK3J8i16Mdn6z3hSvLfMqd0jQcygrtQnNb246xtX8duHyW/bs=
Received: by 10.142.214.5 with SMTP id m5mr356003wfg.1196695401447;
        Mon, 03 Dec 2007 07:23:21 -0800 (PST)
Received: by 10.143.16.2 with HTTP; Mon, 3 Dec 2007 07:23:21 -0800 (PST)
Message-ID: <f3c2a27b0712030723rbb9075eweeacc95488ccc198@mail.gmail.com>
Date: Mon, 3 Dec 2007 10:23:21 -0500
From: smokey <smokeystu@gmail.com>
To: java-user@lucene.apache.org
Subject: SpellChecker performance and usage
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16328_8813537.1196695401407"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16328_8813537.1196695401407
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

My question is for anyone who has experience with Lucene's SpellChecker,
especially around its performance characteristics/ramifications.

1. Given the fact that SpellChecker expands a query by adding all the
permutations of potentially misspelled word, how does it perform in general?

2. How are others handling the case where SpellChecker would NOT perform
well if you expand the query adding all the permutations? In other words,
what kind of techniques are people using to get around or alleviate the
performance hit if any?

Any sharing of information or pointers would be appreciated.

------=_Part_16328_8813537.1196695401407--

From java-user-return-31326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 15:44:51 2007
Return-Path: <java-user-return-31326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66320 invoked from network); 3 Dec 2007 15:44:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 15:44:51 -0000
Received: (qmail 63283 invoked by uid 500); 3 Dec 2007 15:44:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63206 invoked by uid 500); 3 Dec 2007 15:44:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63195 invoked by uid 99); 3 Dec 2007 15:44:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 07:44:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of smokeystu@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 15:44:12 +0000
Received: by wa-out-1112.google.com with SMTP id j40so5713855wah
        for <java-user@lucene.apache.org>; Mon, 03 Dec 2007 07:44:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=kOAc1kcl2jFApVy9ppdmLfHqPEBB79UOXyjCWE8YUBY=;
        b=FxbBPXp9EoS3PWjgbWw0PFXijk9OpND4S509+eaczcUWJUfrG1u5aLCyBC8JOIFdFg65TZGwT+hDdraXYn8pLjh6euCFsNcFnhGzU9zKbWnYZkGXxrq/4cS//GVxkDrvDO5UbTOUy7Vs6BBD0FdDd/tj7MyuwAnNLPioOp+wZG0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Dagq3v7IItbG1Wlii1/eOIyY7Xposu9TfvOBJ64SjrKmho3SL649rL7VX0swQtr65gQxanOj+W+FcGXK1dgX6YzKI6mGqSRHZL+AI7Z38y3woUsXHoun78S2+DJsYlxgfXUiQFrlkXKq/dyJK3IrJNGhglYSz8PUfBxLs4dtfKE=
Received: by 10.142.246.8 with SMTP id t8mr359502wfh.1196696654821;
        Mon, 03 Dec 2007 07:44:14 -0800 (PST)
Received: by 10.143.16.2 with HTTP; Mon, 3 Dec 2007 07:44:14 -0800 (PST)
Message-ID: <f3c2a27b0712030744q1613b2a2u31824afd2778108c@mail.gmail.com>
Date: Mon, 3 Dec 2007 10:44:14 -0500
From: smokey <smokeystu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Applying SpellChecker to a phrase
In-Reply-To: <359a92830712030512s46a750c1l5ef460b62efd8353@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16469_17612556.1196696654816"
References: <f3c2a27b0712021914o494d55d6r7e569ccde3001dfa@mail.gmail.com>
	 <359a92830712030512s46a750c1l5ef460b62efd8353@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16469_17612556.1196696654816
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I have not tried this yet. I am trying to understand the best practices from
others who have experiences with SpellChecker before actually implementing
it.

If I understand it correctly, the spell check class suggests alternate but
similar words for a single input term. So I believe I will have to parse the
phrase string and apply spell checker for each member term to construct the
final expanded query. I don't think there is a higher level support that
lets me apply spell check to a phase and do query.toString() to examine how
it internally expanded the query (although it would have been nice to have
something like that - has anyone written or found such class?)

As for performance, we're dealing with hundreds of indexes where each index
typically grows well above 1G in size, so performance is the single most
important factor to consider.

On Dec 3, 2007 8:12 AM, Erick Erickson <erickerickson@gmail.com> wrote:

> Have you actually tried this and done a query.toString() to see
> how this is actually expanded? Not that I'm all that familiar
> with SpellChecker, but before presuming how things work
> you would get answers faster if you ran a test.....
>
> And, why do you care about performance? I know that's
> a silly question, but you haven't supplied any parameters
> about your index and usage to give us a clue whether this
> matters. If your index is 3M, you'll never see the difference
> between the two ways of expanding the query. If your
> index is distributed over 10 machines and is 1T, you really,
> really, really care.
>
> And under any circumstances, you can always generate
> your own query of the second form by a bit of pre-processing.
>
> More info please.....
>
> Best
> Erick
>
> On Dec 2, 2007 10:14 PM, smokey <smokeystu@gmail.com> wrote:
>
> > Suppose I have an index containing the terms impostor, imposter, fraud,
> > and
> > fruad, then presumably regardless of whether I spell impostor and fraud
> > correctly, Lucene SpellChecker will offer the improperly spelled
> versions
> > as
> > corrections. This means that the phrase "The login fraud involves an
> > impostor" would need to expand to:
> >
> > "The login fraud involves an impostor" OR "The login fruad involves an
> > impostor" OR "The login fraud involves an imposter" OR "The login fruad
> > involves an imposter" to cover all cases and thus find all possible
> > matches.
> >
> > However, that feels like an aweful a lot of matches to perform on the
> > index.
> > A more efficient approach would be to expand the query to "The login
> > (fraud
> > OR fruad) involves an (impostor OR imposter)", which should be logically
> > equivalent to the first (longer) query.
> >
> > So my question is
> > (1) if others have generated the "The login (fraud OR fruad) involves an
> > (impostor OR imposter)" types of queries when applying SpellChecker to a
> > phrase, and agreed that this indeed performs better than the first one.
> > (2) if others have observed any problems in doing so in terms of
> > performance
> > or anything else
> >
> > Any information would be appreciated.
> >
>

------=_Part_16469_17612556.1196696654816--

From java-user-return-31327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 03 19:36:08 2007
Return-Path: <java-user-return-31327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57417 invoked from network); 3 Dec 2007 19:36:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 3 Dec 2007 19:36:08 -0000
Received: (qmail 78023 invoked by uid 500); 3 Dec 2007 19:35:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77987 invoked by uid 500); 3 Dec 2007 19:35:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77976 invoked by uid 99); 3 Dec 2007 19:35:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 11:35:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of thomnelson@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 19:35:28 +0000
Received: by an-out-0708.google.com with SMTP id c5so788637anc
        for <java-user@lucene.apache.org>; Mon, 03 Dec 2007 11:35:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=jbe9czAMFGDWBw6E/YnYneCRaeDlz24bCn4b4YMq0tE=;
        b=pzezdQ1w0V7bP92K63FoQH4akYyfSYS39qZ3aZOPBBY2Awq30DPQlxyy1PTsx+4Map5dUI80YOndjqIGEzJWxOOsSDrqmlfYScUsUEiCkM94jbandCucH1LRlcb+GO8jLzPHppfQjBs1uBnF81qrOl53z/tTjL2OCf5MFNBpNe8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ZqOM9E7mbcVApl+i/oOe1Meg0ZrCH4bQavd8OzzWOY2kxo2eDTip4Ano0GVbXf3fysgpO+RilnOm9fv6xChll6A55sPG8/LSsgMaF9FqOu3gILCD1buf59GjS2StfgcTITG2DOYy6SN+iDaHo6fwhBii7iijBXlW9KmOMSE/6Bg=
Received: by 10.100.225.19 with SMTP id x19mr664050ang.1196710529811;
        Mon, 03 Dec 2007 11:35:29 -0800 (PST)
Received: from thom-nelsons-computer.local ( [76.194.117.17])
        by mx.google.com with ESMTPS id 38sm1626381aga.2007.12.03.11.35.25
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Mon, 03 Dec 2007 11:35:27 -0800 (PST)
Message-ID: <47545A7B.90207@gmail.com>
Date: Mon, 03 Dec 2007 11:35:23 -0800
From: Thom Nelson <thomnelson@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Macintosh/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: FieldCache Implementations
References: <BC06E488-8B08-4971-A55E-05AE6B2D1314@apache.org>
In-Reply-To: <BC06E488-8B08-4971-A55E-05AE6B2D1314@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have implemented a custom version of FieldCache to handle multi-valued 
fields, but this requires an interface change so it isn't applicable to 
what you're suggesting.  However, it would be great to have a standard 
solution for handling multiple values.

Grant Ingersoll wrote:
> Does any out there using Lucene implement their own version of 
> FieldCache.java?  We are proposing to make it an abstract class, which 
> violates our general rule about back-compatibility (see 
> https://issues.apache.org/jira/browse/LUCENE-1045)
>
> -Grant
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 04 06:02:04 2007
Return-Path: <java-user-return-31328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44330 invoked from network); 4 Dec 2007 06:02:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2007 06:02:04 -0000
Received: (qmail 22341 invoked by uid 500); 4 Dec 2007 06:01:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22312 invoked by uid 500); 4 Dec 2007 06:01:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22301 invoked by uid 99); 4 Dec 2007 06:01:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 22:01:46 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 06:01:47 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id lB461Qcv080304
	for <java-user@lucene.apache.org>; Tue, 4 Dec 2007 06:01:26 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id lB461QI02797620
	for <java-user@lucene.apache.org>; Tue, 4 Dec 2007 07:01:26 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id lB461QMI000337
	for <java-user@lucene.apache.org>; Tue, 4 Dec 2007 07:01:26 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id lB461QU9000332
	for <java-user@lucene.apache.org>; Tue, 4 Dec 2007 07:01:26 +0100
In-Reply-To: <f3c2a27b0712030723rbb9075eweeacc95488ccc198@mail.gmail.com>
Subject: Re: SpellChecker performance and usage
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF264C91B6.425ABFBC-ONC22573A7.001F4767-C22573A7.0020EF72@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 4 Dec 2007 07:59:44 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 8.0|August 02, 2007) at 04/12/2007
 08:01:25
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

I didn't have performance issues when using the spell checker.
Can you describe what you tried and how long it took, so
people can relate to that.

AFAIK the spell checker in o.a.l.search.spell does not "expand
a query by adding all the permutations of potentially misspelled
word". It is based on building an auxiliary index whose *documents*
are *words* of the main index, going through n-gram tokenization.
A checked word is tokenized that way too, and used as a query on.
the auxiliary index.

There's more wisdom in the query tokenization,
but a simplifying example an help to see how it works:
- a misspelled word 'helo' is tokenized as 'he el lo',
- the auxiliary index contains a document for the correct
  word "hello" that was tokenized as 'he el ll lo'
- the score of the document 'hello' would be high when searching
  the auxiliary index for 'he el lo'.

The only performance hit is when refreshing/rebuilding the
auxiliary index after the lexicon of the actual index
has changed a lot. But this can be done in the background when
adequate for the application using Lucene and the spell checker.

Doron

smokey <smokeystu@gmail.com> wrote on 03/12/2007 17:23:21:

> My question is for anyone who has experience with Lucene's SpellChecker,
> especially around its performance characteristics/ramifications.
>
> 1. Given the fact that SpellChecker expands a query by adding all the
> permutations of potentially misspelled word, how does it
> perform in general?
>
> 2. How are others handling the case where SpellChecker would NOT perform
> well if you expand the query adding all the permutations? In other words,
> what kind of techniques are people using to get around or alleviate the
> performance hit if any?
>
> Any sharing of information or pointers would be appreciated.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 04 06:16:13 2007
Return-Path: <java-user-return-31329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47746 invoked from network); 4 Dec 2007 06:16:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2007 06:16:12 -0000
Received: (qmail 28388 invoked by uid 500); 4 Dec 2007 06:15:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28349 invoked by uid 500); 4 Dec 2007 06:15:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28338 invoked by uid 99); 4 Dec 2007 06:15:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 22:15:55 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 06:15:33 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id lB46FZbD057406
	for <java-user@lucene.apache.org>; Tue, 4 Dec 2007 06:15:35 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id lB46FYNl2797776
	for <java-user@lucene.apache.org>; Tue, 4 Dec 2007 07:15:34 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id lB46FY24000958
	for <java-user@lucene.apache.org>; Tue, 4 Dec 2007 07:15:34 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id lB46FYR5000953
	for <java-user@lucene.apache.org>; Tue, 4 Dec 2007 07:15:34 +0100
In-Reply-To: <003701c83589$4c412ab0$3c0310ac@nizamulh>
Subject: Re: can we do partial optimization?
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF8CF9F22D.B9E9C43A-ONC22573A7.0020FC59-C22573A7.0021FDA0@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 4 Dec 2007 08:11:16 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 8.0|August 02, 2007) at 04/12/2007
 08:15:33
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

It doesn't make sense to optimize() after every document add.
Lucene in fact implements a logic in the spirit of what you
describe below, when it decides to merge segments on the fly.

There are various ways to tell Lucene how often to flush
recently added/updated documents and what to merge.

But it will pay to check the simple things first, like - Are
you closing and opening the index writer after each document
add (don't)? Are you deleting using IndexRedaer or
IndexWriter (use IndexWriter if you can)? etc.

It's a good start to going again through Lucene FAQ,
http://wiki.apache.org/lucene-java/LuceneFAQ
and in addition see this wiki page on performance:
http://wiki.apache.org/lucene-java/BasicsOfPerformance

Good luck, and let us know how it went!
Doron

"Nizamul" <nizamulh@rediff.co.in> wrote on 03/12/2007 10:48:34:

> Hello,
> I am very new to Lucene.I am facing one problem.
>  I have one very large index which is constantly getting
> update(add and delete) at a regular interval.after which I am
> optimizing the whole index (otherwise searches will be slow)
> but optimization takes time.So I was thinking to merge only the
> segments of lesser size(I guess it will be a good compromise
> between search time and optimization time) i.e. suppose I have
> 10 segment
> 1 of 10,000,000 doc
> 4 of 100,000 doc
> 4 of 10,000 doc
> and 1 of 5 doc.
>
> I want to merger 9 segment of lesser size  in to  one(I believe
> this would not take much time and searching will improve a
> lot).But I don't know how to do partial merging.Whether Lucene
> allow it or not?? or if I can extend indexWriter and add a
> method optimize of my own where I can specify which cfs file to
> chose for optimization?
>
> Thanks and Regards,
> Nizam


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 04 06:25:05 2007
Return-Path: <java-user-return-31330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54862 invoked from network); 4 Dec 2007 06:25:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2007 06:25:05 -0000
Received: (qmail 35020 invoked by uid 500); 4 Dec 2007 06:24:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34984 invoked by uid 500); 4 Dec 2007 06:24:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34973 invoked by uid 99); 4 Dec 2007 06:24:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 03 Dec 2007 22:24:48 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 06:24:26 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id lB46OR0F176180
	for <java-user@lucene.apache.org>; Tue, 4 Dec 2007 06:24:27 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id lB46ORki2670712
	for <java-user@lucene.apache.org>; Tue, 4 Dec 2007 07:24:27 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id lB46ORLO016824
	for <java-user@lucene.apache.org>; Tue, 4 Dec 2007 07:24:27 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id lB46ORnG016818
	for <java-user@lucene.apache.org>; Tue, 4 Dec 2007 07:24:27 +0100
In-Reply-To: <f3c2a27b0712021914o494d55d6r7e569ccde3001dfa@mail.gmail.com>
Subject: Re: Applying SpellChecker to a phrase
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF09878B8E.B59A59B7-ONC22573A7.0022302C-C22573A7.0023091D@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 4 Dec 2007 08:22:40 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 8.0|August 02, 2007) at 04/12/2007
 08:24:26
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

See below -

smokey <smokeystu@gmail.com> wrote on 03/12/2007 05:14:23:

> Suppose I have an index containing the terms impostor,
> imposter, fraud, and
> fruad, then presumably regardless of whether I spell impostor and fraud
> correctly, Lucene SpellChecker will offer the improperly
> spelled versions as
> corrections. This means that the phrase "The login fraud involves an
> impostor" would need to expand to:
>
> "The login fraud involves an impostor" OR "The login fruad involves an
> impostor" OR "The login fraud involves an imposter" OR "The login fruad
> involves an imposter" to cover all cases and thus find all
> possible matches.
>
> However, that feels like an aweful a lot of matches to perform
> on the index.
> A more efficient approach would be to expand the query to "The
> login (fraud
> OR fruad) involves an (impostor OR imposter)", which should be logically
> equivalent to the first (longer) query.
>
> So my question is
> (1) if others have generated the "The login (fraud OR fruad) involves an
> (impostor OR imposter)" types of queries when applying SpellChecker to a
> phrase, and agreed that this indeed performs better than the first one.
> (2) if others have observed any problems in doing so in terms
> of performance
> or anything else
>
> Any information would be appreciated.

Lucene phrase query does not support 'sub parts'. But you may
want to look at o.a.l.search.spans. It seems that a span-near query
made of span-term queries and span-or queries, setting (max)span as
~the length of your phrase and setting in-order=true would get
pretty close.

About performance I hope others can comment, cause I never compared
this to phrase query. When you do try this, please tell us of any
interesting performance results!

Regards,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 04 09:18:52 2007
Return-Path: <java-user-return-31331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95779 invoked from network); 4 Dec 2007 09:18:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2007 09:18:51 -0000
Received: (qmail 81997 invoked by uid 500); 4 Dec 2007 09:18:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81971 invoked by uid 500); 4 Dec 2007 09:18:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81960 invoked by uid 99); 4 Dec 2007 09:18:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 01:18:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 09:18:13 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id lB49I6U7009242
	for <java-user@lucene.apache.org>; Tue, 4 Dec 2007 11:18:06 +0200
Received: from [10.142.130.89] ([10.142.130.89]) by nimitz.teamw.com with ESMTP
	 id mc4bhk8e; 4 Dec 2007 11:17:00 +0200
Message-ID: <47551B44.6060005@teamware.com>
Date: Tue, 04 Dec 2007 11:17:56 +0200
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: deleteDocuments by Term[] for ALL terms
References: <474A5F36.8060207@teamware.com> <1196074156.30488.1223219125@webmail.messagingengine.com>
In-Reply-To: <1196074156.30488.1223219125@webmail.messagingengine.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Tue, 04 Dec 2007 11:18:07 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Mike, just what I was after.
Antony


Michael McCandless wrote:
> You can just create a query with your and'd terms, and then do this:
> 
>   Weight weight = query.weight(indexSearcher);
>   IndexReader reader = indexSearcher.getIndexReader();
>   Scorer scorer = weight.scorer(reader);
>   int delCount = 0;
>   while(scorer.next()) {
>     reader.deleteDocument(scorer.doc());
>     delCount++;
>   }
> 
> that iterates over all the docIDs without scoring them and without
> building up a Hit for each, etc.
> 
> Mike
> 
> "Antony Bowesman" <adb@teamware.com> wrote:
>> Hi,
>>
>> I'm using IndexReader.deleteDocuments(Term) to delete documents in
>> batches.  I 
>> need the deleted count, so I cannot use IndexWriter.deleteDocuments().
>>
>> What I want to do is delete documents based on more than one term, but
>> not like 
>> IndexWriter.deleteDocuments(Term[]) which deletes all documents with ANY
>> term. 
>> I want it to delete documents which have ALL terms, e.g.
>>
>> Term("owner", "ownerUID") AND Term("subject", "something");
>>
>> I have a new reader being used, so I could make a new IndexSearcher and
>> query 
>> the documents with all terms in a BooleanQuery and then iterate the
>> results, but 
>> that would either mean using the Hits mechanism or TopDocs and seems like
>> a 
>> heavyweight way to do things.
>>
>> What I want to be able to do is to delete sequentially without storing up
>> a 
>> result set as I may want to delete all and ALL may be rather big.
>>
>> I see the implementation uses reader.termDocs() to do the deletion for a
>> single 
>> Term, which of course is easy, but is there a simple way to make a
>> deletion for 
>> multiple terms with AND via the reader using, say termDocs, that will not 
>> potentially use large amounts of memory, or should I just go with the
>> searcher 
>> TopDocs mechanism and do that also in batches to avoid the risk of a
>> large 
>> memory hit.
>>
>> I know there's lots of clever 'expert-mode' stuff under the Lucene API
>> hood, but 
>> does anyone know any good way to do this or have I missed anything
>> obvious in 
>> the API docs?
>>
>> Thanks
>> Antony
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 04 10:54:51 2007
Return-Path: <java-user-return-31332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31401 invoked from network); 4 Dec 2007 10:54:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2007 10:54:51 -0000
Received: (qmail 84512 invoked by uid 500); 4 Dec 2007 10:54:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84470 invoked by uid 500); 4 Dec 2007 10:54:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84459 invoked by uid 99); 4 Dec 2007 10:54:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 02:54:32 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 10:54:11 +0000
Received: by ug-out-1314.google.com with SMTP id u40so53695ugc
        for <java-user@lucene.apache.org>; Tue, 04 Dec 2007 02:54:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=6xL5n/7lTqaPIRWnIIsOCzeBOrMcFW0KLUg1nqoCaXQ=;
        b=pql5YUD1z1mDDvlZC01mMHn3oHqKk6K1Hvoc+yEUvSVbO7XjZhrstGc0//bJk1gIXyRZHi46KZRdFeoGjQlTT+/Mu+KUqo2MKO2vbR2NquQqwNyaD0GKRnBh2ySYKGSeg6Oums+0Gb1+LF3WemOkVnXXHm+GXu9yaDNOqKEv2JM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=YpCOqJHrQukgBhFzpnc41lFzQg1SOYRgdA38jbOxhKBEovcI8gvN0+sS7GKF44I2GPQ6gr5DMS6TzDMnzpsnv1HvjHJmqK6vrCmGIw0IrwcUyYJLYO6tXl4opMtTfiq7oXbRx6zYgCEFsFBPSI8If/gxbqAfHgDmMu7lowdNk08=
Received: by 10.66.237.9 with SMTP id k9mr638950ugh.1196765652936;
        Tue, 04 Dec 2007 02:54:12 -0800 (PST)
Received: from ?10.0.36.139? ( [202.125.143.70])
        by mx.google.com with ESMTPS id a1sm18648390ugf.2007.12.04.02.54.07
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 04 Dec 2007 02:54:11 -0800 (PST)
Message-ID: <475531BF.8060706@gmail.com>
Date: Tue, 04 Dec 2007 15:53:51 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Indexing Non-English text
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,
I m facing a problem while indexing a small .txt file with Lucene. The 
file which i want to index with lucene is in Urdu language (varient of 
Arabic and Persian). But the Index i get is in Unicode form, not in the 
real form (original Urdu text). This program works good for a file in 
English language. This is the code i use for indexing..

        FileReader file = new FileReader ("urdoc.txt");
        BufferedReader buff = new BufferedReader(file);
        String line = buff.readLine();
        boolean eof = false;
        buff.close();
        String indexDir = "D:\\index";
               Analyzer analyzer = new StandardAnalyzer();
            boolean createFlag = true;
        IndexWriter writer =
                    new IndexWriter(indexDir, analyzer, createFlag);
            Document document  = new Document();
        document.add(new Field("fieldname",line, Field.Store.YES,
        Field.Index.TOKENIZED));
            writer.addDocument(document);
            writer.close();

Kindly guide me, what I should do, would i have to change this code or 
whatever else do you suggest?

Liaqat

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 04 11:53:11 2007
Return-Path: <java-user-return-31333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54923 invoked from network); 4 Dec 2007 11:53:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2007 11:53:11 -0000
Received: (qmail 59556 invoked by uid 500); 4 Dec 2007 11:52:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59523 invoked by uid 500); 4 Dec 2007 11:52:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59512 invoked by uid 99); 4 Dec 2007 11:52:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 03:52:53 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 11:52:53 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 1CCF53BA0F
	for <java-user@lucene.apache.org>; Tue,  4 Dec 2007 03:52:22 -0800 (PST)
Message-Id: <6DD0DED1-F86B-45F5-A1AF-11A38DF7A3C3@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <475531BF.8060706@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Indexing Non-English text
Date: Tue, 4 Dec 2007 06:52:20 -0500
References: <475531BF.8060706@gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

FileReader is dependent on your local locale.  http://wiki.apache.org/lucene-java/IndexingOtherLanguages 
  has some useful tips.  Essentially, you need to make sure you  
control the encodings at all input points of your application.  Lucene  
will do the appropriate thing internally.

On Dec 4, 2007, at 5:53 AM, Liaqat Ali wrote:

> Hi,
> I m facing a problem while indexing a small .txt file with Lucene.  
> The file which i want to index with lucene is in Urdu language  
> (varient of Arabic and Persian). But the Index i get is in Unicode  
> form, not in the real form (original Urdu text). This program works  
> good for a file in English language. This is the code i use for  
> indexing..
>
>       FileReader file = new FileReader ("urdoc.txt");
>       BufferedReader buff = new BufferedReader(file);
>       String line = buff.readLine();
>       boolean eof = false;
>       buff.close();
>       String indexDir = "D:\\index";
>              Analyzer analyzer = new StandardAnalyzer();
>           boolean createFlag = true;
>       IndexWriter writer =
>                   new IndexWriter(indexDir, analyzer, createFlag);
>           Document document  = new Document();
>       document.add(new Field("fieldname",line, Field.Store.YES,
>       Field.Index.TOKENIZED));
>           writer.addDocument(document);
>           writer.close();
>
> Kindly guide me, what I should do, would i have to change this code  
> or whatever else do you suggest?
>
> Liaqat
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 04 14:55:10 2007
Return-Path: <java-user-return-31334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16166 invoked from network); 4 Dec 2007 14:55:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2007 14:55:10 -0000
Received: (qmail 96250 invoked by uid 500); 4 Dec 2007 14:54:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96218 invoked by uid 500); 4 Dec 2007 14:54:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96207 invoked by uid 99); 4 Dec 2007 14:54:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 06:54:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of smokeystu@gmail.com designates 64.233.162.227 as permitted sender)
Received: from [64.233.162.227] (HELO nz-out-0506.google.com) (64.233.162.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 14:54:54 +0000
Received: by nz-out-0506.google.com with SMTP id i28so2120841nzi
        for <java-user@lucene.apache.org>; Tue, 04 Dec 2007 06:54:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=tUsr81RTTdzTjCpEjyEcffNGeIabqmq0wzTuQdPXAzo=;
        b=WpKoq0wp2NacoPreyOPMr5mkZVx14UqUZe+7Uz1KdiszqPtFqpbpLfVZdurpm7IHzOKykTP2+T8wDOwdWwWZmsYC2uYjKvm3/WEVw5qX3PeAF2Ny92bNwpI1jLu4Wq8uOC6+y5s8/EMhve4uYEcT30Ckt5hBHpsvjjOyofI7FF0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sXTe3BiRCkSt2ET4apwMjTRKqzph0zdbsWj9REML3UDhueQD2lgf2v8yJ/Iy9gwCuxAVeHEj1jeA1BSlH5ERfmesU5OX6UV4dGTpTu1BjGafJQwS1QDjIZmk676QF1GSLYWEg2+kgh2RIn5aZZO9/qp9RQm8VzpsCrS60Acax6s=
Received: by 10.142.106.18 with SMTP id e18mr223330wfc.1196780072253;
        Tue, 04 Dec 2007 06:54:32 -0800 (PST)
Received: by 10.142.102.4 with HTTP; Tue, 4 Dec 2007 06:54:32 -0800 (PST)
Message-ID: <f3c2a27b0712040654s368fd56l314933b6b57410fa@mail.gmail.com>
Date: Tue, 4 Dec 2007 09:54:32 -0500
From: smokey <smokeystu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Applying SpellChecker to a phrase
In-Reply-To: <OF09878B8E.B59A59B7-ONC22573A7.0022302C-C22573A7.0023091D@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19860_16316609.1196780072245"
References: <f3c2a27b0712021914o494d55d6r7e569ccde3001dfa@mail.gmail.com>
	 <OF09878B8E.B59A59B7-ONC22573A7.0022302C-C22573A7.0023091D@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19860_16316609.1196780072245
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for the information on o.a.l.search.spans.

I was thinking of parsing the phrase query string into a sequence of terms,
then constructing a phrase query object using add(Term term, int position)
method in org.apache.lucene.search.PhraseQuery class. Then I can inject
similar words (suggested by SpellChecker) at appropriate positions for each
term as I construct the final phrase query object.

Do you agree that this should work too?

On Dec 4, 2007 1:22 AM, Doron Cohen <DORONC@il.ibm.com> wrote:

> See below -
>
> smokey <smokeystu@gmail.com> wrote on 03/12/2007 05:14:23:
>
> > Suppose I have an index containing the terms impostor,
> > imposter, fraud, and
> > fruad, then presumably regardless of whether I spell impostor and fraud
> > correctly, Lucene SpellChecker will offer the improperly
> > spelled versions as
> > corrections. This means that the phrase "The login fraud involves an
> > impostor" would need to expand to:
> >
> > "The login fraud involves an impostor" OR "The login fruad involves an
> > impostor" OR "The login fraud involves an imposter" OR "The login fruad
> > involves an imposter" to cover all cases and thus find all
> > possible matches.
> >
> > However, that feels like an aweful a lot of matches to perform
> > on the index.
> > A more efficient approach would be to expand the query to "The
> > login (fraud
> > OR fruad) involves an (impostor OR imposter)", which should be logically
> > equivalent to the first (longer) query.
> >
> > So my question is
> > (1) if others have generated the "The login (fraud OR fruad) involves an
> > (impostor OR imposter)" types of queries when applying SpellChecker to a
> > phrase, and agreed that this indeed performs better than the first one.
> > (2) if others have observed any problems in doing so in terms
> > of performance
> > or anything else
> >
> > Any information would be appreciated.
>
> Lucene phrase query does not support 'sub parts'. But you may
> want to look at o.a.l.search.spans. It seems that a span-near query
> made of span-term queries and span-or queries, setting (max)span as
> ~the length of your phrase and setting in-order=true would get
> pretty close.
>
> About performance I hope others can comment, cause I never compared
> this to phrase query. When you do try this, please tell us of any
> interesting performance results!
>
> Regards,
> Doron
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19860_16316609.1196780072245--

From java-user-return-31335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 04 18:05:54 2007
Return-Path: <java-user-return-31335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94058 invoked from network); 4 Dec 2007 18:05:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2007 18:05:54 -0000
Received: (qmail 61522 invoked by uid 500); 4 Dec 2007 18:05:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61496 invoked by uid 500); 4 Dec 2007 18:05:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61485 invoked by uid 99); 4 Dec 2007 18:05:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 10:05:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 18:05:12 +0000
Received: by ug-out-1314.google.com with SMTP id u40so118494ugc
        for <java-user@lucene.apache.org>; Tue, 04 Dec 2007 10:05:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=VBpjscK9a4Ftyk24alyFNbwpPJzEnCx7NBrIPhoXhTQ=;
        b=nONvjgM96Whhzf2QVhQdr3JOtGOdXdKMu7rw1x819eTPKxA4ukUJQe+ax7hYiKSAwyvbl6/fFE4qFm8CYIYEqsFSAhSY+gG1mznORsswW8JVEDsinLFf+hL3+fS25aBNOu0iD0oc0Ms3bNJRPo5QlUEpzFBiZKZvtfaAMWiQ1Jo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=iJ+d1XufGBxkmcToBVINziCnE9NDrE23PW1tYSKArPkrs+dFbOPvPsxHWPfNDxgyJ9CpkcMf5WdQnmo04Ms6zo8Xvn/fi5Zl4Y4fTz4eub/wkdr941GderELt+3XpoyI0erMfRZh1nZ2Di2uErYYxUsMqjE62P05h2W0usDQnWo=
Received: by 10.67.196.2 with SMTP id y2mr1023308ugp.1196791514146;
        Tue, 04 Dec 2007 10:05:14 -0800 (PST)
Received: from ?10.0.57.42? ( [202.125.143.68])
        by mx.google.com with ESMTPS id e33sm540218ugd.2007.12.04.10.04.59
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 04 Dec 2007 10:05:13 -0800 (PST)
Message-ID: <475596BD.40903@gmail.com>
Date: Tue, 04 Dec 2007 23:04:45 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Indexing XML document
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

I want to index an XML file,containing 200 Urdu language (Varient of 
Arabic and Persian) documents. This corpus is in CES format,consisting 
of information about author and many more, I just want to extract 
textual data of each document and relative Doc number and title in each 
document using SAX.

The problem I m facing that what should be the output of this whole 
processing, which is acceptable to Lucene Indexer. I just want to store 
Document number, and Title with each document. The example given below 
is Doc 2 from that XML file. I want to make complete index of 200 
documents with Doc number and title... Kindly guide me......


<h.title>Doc 2</h.title>

<title>       </title>
</p>
<p>                
              
                
              
             
               
               
                 
             </p>



Thanks ..... Liaqat

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 04 21:42:43 2007
Return-Path: <java-user-return-31336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72689 invoked from network); 4 Dec 2007 21:42:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2007 21:42:43 -0000
Received: (qmail 60964 invoked by uid 500); 4 Dec 2007 21:42:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60931 invoked by uid 500); 4 Dec 2007 21:42:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60914 invoked by uid 99); 4 Dec 2007 21:42:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 13:42:25 -0800
X-ASF-Spam-Status: No, hits=-2.0 required=10.0
	tests=HTML_MESSAGE,RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of aarnone@rightnow.com designates 216.82.249.51 as permitted sender)
Received: from [216.82.249.51] (HELO mail190.messagelabs.com) (216.82.249.51)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 04 Dec 2007 21:42:26 +0000
X-VirusChecked: Checked
X-Env-Sender: aarnone@rightnow.com
X-Msg-Ref: server-13.tower-190.messagelabs.com!1196804524!17290200!1
X-StarScan-Version: 5.5.12.14.2; banners=-,-,-
X-Originating-IP: [69.145.86.38]
Received: (qmail 4565 invoked from network); 4 Dec 2007 21:42:04 -0000
Received: from rnt-boz-0204.rightnow.com (HELO rnt-boz-0204.rightnow.com) (69.145.86.38)
  by server-13.tower-190.messagelabs.com with SMTP; 4 Dec 2007 21:42:04 -0000
Received: from EVS2.corp.rightnow.com ([172.22.1.206]) by rnt-boz-0204.rightnow.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 4 Dec 2007 14:42:04 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C836BE.825B858A"
Subject: span queries and proximity boosting
Date: Tue, 4 Dec 2007 14:42:02 -0700
Message-ID: <25E214935D7C0342B91631BC43467D8D0110A4B0@EVS2.corp.rightnow.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: span queries and proximity boosting
Thread-Index: Acg2voHVzOnRI1uvQsm89C1ztbcVWQ==
From: "Arnone, Anthony" <aarnone@rightnow.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 04 Dec 2007 21:42:04.0061 (UTC) FILETIME=[82776CD0:01C836BE]
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C836BE.825B858A
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64

SGVsbG8gYWxsLA0KDQogDQoNCknigJl2ZSBiZWVuIGxvb2tpbmcgaW50byB1c2luZyB0aGUgbmlj
ZSBwb3dlciBvZiB0aGUgU3Bhbk5lYXJRdWVyeSBpbnN0ZWFkIG9mIFBocmFzZVF1ZXJ5LCBtb3N0
bHkgYmVjYXVzZSBvZiB0aGUgc2ltcGxpZmljYXRpb24gb2YgdGhlIHNsb3AgZmFjdG9ycy4gSG93
ZXZlciwgSeKAmW0gd29uZGVyaW5nIGlmIHRoZSBTcGFuTmVhclF1ZXJpZXMgd2lsbCBib29zdCB0
aGUgcmVzdWx0IGJhc2VkIG9uIHRoZSB0ZXJtIHByb3hpbWl0eSwganVzdCBsaWtlIFBocmFzZVF1
ZXJ5IGRvZXMuIERvZXMgYW55b25lIGhhdmUgYW55IGV4cGVyaWVuY2Ugd2l0aCBkb2luZyB0aGlz
Pw0KDQogDQoNClRoYW5rcywNCg0KQW50aG9ueQ0KDQo=

------_=_NextPart_001_01C836BE.825B858A--

From java-user-return-31337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 04 22:01:51 2007
Return-Path: <java-user-return-31337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81284 invoked from network); 4 Dec 2007 22:01:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2007 22:01:51 -0000
Received: (qmail 93114 invoked by uid 500); 4 Dec 2007 22:01:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93093 invoked by uid 500); 4 Dec 2007 22:01:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93082 invoked by uid 99); 4 Dec 2007 22:01:33 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 14:01:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 22:01:12 +0000
Received: by py-out-1112.google.com with SMTP id d32so15049364pye
        for <java-user@lucene.apache.org>; Tue, 04 Dec 2007 14:01:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=6sz3SwOBPDHPozwnHAGwhr6uY7wGX5bEgOSK0x/ql4E=;
        b=LyX9nod0Ue0wyK5PM+P1VENI3zVGHH9HG7z1ef8RXCCYpFHVTsxvmqmIfBBDsa8F1RbVdXBselW49ifJz3XAmZAZ+E4TeP9NDN85MkdW+Z1p26/6pBW+A8QDLnPfZEwAMg5LJvdxw7UmZZh4tuW7PmnYXLgqaT5PirRWT+8z1M0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=OaJff28s9M1O0i8wnyQ30g4neaf5xJU1crtMy8aebqfIJTjClLhK3PlW84ujApPqEe50f2mjp3nE5h60w59Gr6S9j9OkVuzxit/qf/byTbiCXK2G73lA4FChHSpCEoadYNFos1tm66HDkiW4AP1ME3h0w57Rx1IXz8EYlTpQ6qo=
Received: by 10.65.219.20 with SMTP id w20mr7745859qbq.1196805670643;
        Tue, 04 Dec 2007 14:01:10 -0800 (PST)
Received: from ?192.168.1.102? ( [69.124.234.183])
        by mx.google.com with ESMTPS id q14sm359864qbq.2007.12.04.14.01.09
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 04 Dec 2007 14:01:09 -0800 (PST)
Message-ID: <4755CE18.4060802@gmail.com>
Date: Tue, 04 Dec 2007 17:00:56 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: span queries and proximity boosting
References: <25E214935D7C0342B91631BC43467D8D0110A4B0@EVS2.corp.rightnow.com>
In-Reply-To: <25E214935D7C0342B91631BC43467D8D0110A4B0@EVS2.corp.rightnow.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

A quick look at the code would say no, unless I am missing something. 
Neither the weight or span scorer seem to take distance into account.

Arnone, Anthony wrote:
> Hello all,
>
>  
>
> Ive been looking into using the nice power of the SpanNearQuery instead of PhraseQuery, mostly because of the simplification of the slop factors. However, Im wondering if the SpanNearQueries will boost the result based on the term proximity, just like PhraseQuery does. Does anyone have any experience with doing this?
>
>  
>
> Thanks,
>
> Anthony
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 04 23:33:37 2007
Return-Path: <java-user-return-31338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24924 invoked from network); 4 Dec 2007 23:33:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 4 Dec 2007 23:33:37 -0000
Received: (qmail 13759 invoked by uid 500); 4 Dec 2007 23:33:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13726 invoked by uid 500); 4 Dec 2007 23:33:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13715 invoked by uid 99); 4 Dec 2007 23:33:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 15:33:18 -0800
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a10.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 23:33:17 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a10.g.dreamhost.com (Postfix) with ESMTP id 2B9BF16226B
	for <java-user@lucene.apache.org>; Tue,  4 Dec 2007 15:32:55 -0800 (PST)
Message-Id: <1993BE49-71FD-4CB1-B951-C851A5E3FF29@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <475596BD.40903@gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Indexing XML document
Date: Tue, 4 Dec 2007 18:32:52 -0500
References: <475596BD.40903@gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

You are on the right path, just extract your content using SAX and =20
then you can add Fields to Lucene for each document.  As long as the =20
values are strings, it should be the same as any indexing task.  The =20
key of course will be using an Analyzer that understands how to =20
tokenize/stem Urdu.

This would look something like (I did not compile this):
Document doc =3D new Document()
doc.add(new Field("title", titleString, ...);
doc.add(new Field("body", bodyString, ...);
doc.add(new Field("id", id, ...);

indexWriter.addDocument(doc);

indexWriter.optimize();
indexWriter.close();


The problem really isn't any different than indexing English, except =20
for what Analyzer you choose.  You may very well have to write your =20
own Analyzer/Tokenizer/TokenFilter.  Other thing to be concerned with =20=

is the character encoding as you are reading in the files.  Once you =20
have Strings in your program, that is all Lucene needs.

Are you able to index other things in Lucene (i.e. a simple set of =20
unstructured documents)?

-Grant

On Dec 4, 2007, at 1:04 PM, Liaqat Ali wrote:

> Hi all,
>
> I want to index an XML file,containing 200 Urdu language (Varient of =20=

> Arabic and Persian) documents. This corpus is in CES =20
> format,consisting of information about author and many more, I just =20=

> want to extract textual data of each document and relative Doc =20
> number and title in each document using SAX.
>
> The problem I m facing that what should be the output of this whole =20=

> processing, which is acceptable to Lucene Indexer. I just want to =20
> store Document number, and Title with each document. The example =20
> given below is Doc 2 from that XML file. I want to make complete =20
> index of 200 documents with Doc number and title... Kindly guide =20
> me......
>
>
> <h.title>Doc 2</h.title>
>
> <title>=D8=AD=DA=A9=D9=85=D8=AA =DB=8C=D8=A7=D8=B1 =DA=A9=D9=88 =
=D8=A7=DB=8C=D8=B1=D8=A7=D9=86 =D8=A8=D8=AF=D8=B1 =DA=A9=D8=B1=D9=86=DB=92=
 =D9=BE=D8=B1 =D8=BA=D9=88=D8=B1</=20
> title>
> </p>
> <p>=D8=A7=D9=88=D8=B1 =D8=AE=D8=A8=D8=B1=DB=8C=DA=BA =DB=81=DB=8C=DA=BA =
=DA=A9=DB=81 =D8=A7=D9=86=DA=BE=DB=8C=DA=BA =D8=A7=DB=8C=D8=B1=D8=A7=D9=86=
 =D8=A8=D8=AF=D8=B1 =20
> =DA=A9=D8=B1=D9=86=DB=92 =D9=BE=D8=B1 =D8=A8=DA=BE=DB=8C =D8=BA=D9=88=D8=
=B1 =DA=A9=DB=8C=D8=A7 =D8=AC=D8=A7 =D8=B1=DB=81=D8=A7 =DB=81=DB=92=DB=94 =
=D8=AD=DA=A9=D9=85=D8=AA =DB=8C=D8=A7=D8=B1 =20
> =D8=AC=D9=88 =D8=B3=D8=A7=D8=A8=D9=82 =D8=B3=D9=88=D9=88=DB=8C=D8=AA =
=DB=8C=D9=88=D9=86=DB=8C=D9=86 =DA=A9=DB=8C =D9=85=D8=AF=D8=A7=D8=AE=D9=84=
=D8=AA =DA=A9=DB=92 =D8=AE=D9=84=D8=A7=D9=81 =20
> =D8=A7=D9=85=D8=B1=DB=8C=DA=A9=DB=8C =D8=AD=D9=85=D8=A7=DB=8C=D8=AA =
=D8=B3=DB=92 =DA=86=D9=84=DB=92 =D9=88=D8=A7=D9=84=DB=8C =D9=85=D8=B2=D8=A7=
=D8=AD=D9=85=D8=AA =D9=85=DB=8C=DA=BA =20
> =D8=B3=D8=A7=D9=85=D9=86=DB=92 =D8=A2=DB=93 =D8=AA=DA=BE=DB=92 =D8=A7=D8=
=A8 =D9=85=D8=AE=D8=A7=D9=84=D9=81 =D8=AE=DB=8C=D8=A7=D9=84=D8=A7=D8=AA =
=DA=A9=DB=92 =D9=84=DB=93 =20
> =D8=AC=D8=A7=D9=86=DB=92 =D8=AC=D8=A7=D8=AA=DB=92 =DB=81=DB=8C=DA=BA =
=D8=A7=D9=88=D8=B1 =D8=A7=D8=A8 =D9=88=DB=81 =DA=A9=D8=B1=D8=B2=D8=A6=DB=8C=
 =D8=A7=D9=86=D8=AA=D8=B8=D8=A7=D9=85=DB=8C=DB=81 =20
> =DA=A9=DB=8C =D8=A8=DA=BE=DB=8C =D9=85=D8=AE=D8=A7=D9=84=D9=81=D8=AA =
=DA=A9=D8=B1=D8=B1=DB=81=DB=92 =D8=AA=DA=BE=DB=92=DB=94 =DA=AF=D8=B0=D8=B4=
=D8=AA=DB=81 =DB=81=D9=81=D8=AA=DB=92 =20
> =D8=A7=DB=8C=D8=B1=D8=A7=D9=86 =D9=86=DB=92 =D8=AD=DA=A9=D9=85=D8=AA =
=DB=8C=D8=A7=D8=B1 =D9=BE=D8=B1 =D8=A7=D9=84=D8=B2=D8=A7=D9=85 =
=D9=84=DA=AF=D8=A7=DB=8C=D8=A7 =D8=AA=DA=BE=D8=A7 =20
> =DA=A9=DB=81 =D9=88=DB=81 =D8=A7=DB=8C=D8=B1=D8=A7=D9=86 =DA=A9=DB=8C =
=D8=B3=D8=B1=D8=B2=D9=85=DB=8C=D9=86 =DA=A9=D9=88 =D8=A7=D9=81=D8=BA=D8=A7=
=D9=86 =20
> =D8=A7=D9=86=D8=AA=D8=B8=D8=A7=D9=85=DB=8C=DB=81 =DA=A9=DB=92 =D8=AE=D9=84=
=D8=A7=D9=81 =DA=A9=D8=A7=D8=B1=D9=88=D8=A7=D8=A6=DB=8C=D8=A7=DA=BA =
=DA=A9=D8=B1=D9=86=DB=92 =DA=A9=DB=92 =D9=84=DB=93 =20
> =D8=A7=D8=B3=D8=AA=D8=B9=D9=85=D8=A7=D9=84 =DA=A9=D8=B1=D8=B1=DB=81=DB=92=
 =DB=81=DB=8C=DA=BA =D8=AC=D8=A8 =DA=A9=DB=81 =D8=A7=DB=8C=D8=B1=D8=A7=D9=86=
 =DA=A9=D8=A7 =DA=A9=DB=81=D9=86=D8=A7 =20
> =DB=81=DB=92 =DA=A9=DB=81 =D9=88=DB=81 =D8=B7=D8=A7=D9=84=D8=A8=D8=A7=D9=
=86 =DA=A9=DB=92 =D8=AE=D9=84=D8=A7=D9=81 =D9=85=D8=B2=D8=A7=D8=AD=D9=85 =
=D8=AF=DA=BE=DA=91=D9=88=DA=BA =DA=A9=D9=88 =20
> =D8=AC=D9=88 =D8=AD=D9=85=D8=A7=DB=8C=D8=AA =D9=81=D8=B1=D8=A7=D8=AD=D9=85=
 =DA=A9=D8=B1 =D8=B1=DB=81=D8=A7 =D8=AA=DA=BE=D8=A7 =D9=88=DB=81 =
=D8=B7=D8=A7=D9=84=D8=A8=D8=A7=D9=86 =DA=A9=D8=A7 =20
> =DA=A9=D9=86=D9=B9=D8=B1=D9=88=D9=84 =D8=AE=D8=AA=D9=85 =DB=81=D9=88=D9=86=
=DB=92 =DA=A9=DB=92 =D8=A8=D8=B9=D8=AF =D8=A8=D9=86=D8=AF =DA=A9=D8=B1 =
=D8=AF=DB=8C =DA=AF=D8=A6=DB=8C =20
> =DB=81=DB=92=DB=94 =D8=AA=D8=A7=DB=81=D9=85 =D8=A8=D8=B9=D8=B6 =
=D8=B0=D8=B1=D8=A7=D8=A6=D8=B9 =DA=A9=D8=A7 =D8=AE=DB=8C=D8=A7=D9=84 =
=DB=81=DB=92 =DA=A9=DB=81 =D8=A7=DB=8C=D8=B1=D8=A7=D9=86 =20
> =D9=86=DB=92 =D8=AD=DA=A9=D9=85=D8=AA =DB=8C=D8=A7=D8=B1 =DA=A9=DB=92 =
=D8=AE=D9=84=D8=A7=D9=81 =D8=A7=D9=82=D8=AF=D8=A7=D9=85 =D8=A7=D9=85=D8=B1=
=DB=8C=DA=A9=DB=81 =DA=A9=DB=92 =20
> =D8=A7=D8=B9=D8=AA=D8=B1=D8=A7=D8=B6=D8=A7=D8=AA =DA=A9=DB=92 =D8=A8=D8=B9=
=D8=AF =DA=A9=DB=8C=DB=92 =DB=81=DB=8C=DA=BA=DB=94</p>
>
>
>
> Thanks ..... Liaqat
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 05 01:14:58 2007
Return-Path: <java-user-return-31339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67728 invoked from network); 5 Dec 2007 01:14:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2007 01:14:57 -0000
Received: (qmail 13905 invoked by uid 500); 5 Dec 2007 01:14:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13861 invoked by uid 500); 5 Dec 2007 01:14:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13850 invoked by uid 99); 5 Dec 2007 01:14:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 17:14:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 01:14:43 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id A61C071C248; Tue,  4 Dec 2007 17:14:22 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 9C2D371C245
	for <java-user@lucene.apache.org>; Tue,  4 Dec 2007 17:14:22 -0800 (PST)
Date: Tue, 4 Dec 2007 17:14:22 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Boost One Term Query
In-Reply-To: <14035572.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0712041708500.14245@radix.cryptio.net>
References: <14035572.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


first off: if you are looking at the score from the "Hits" class, bear in 
mind they are "psuedo-normalized" and don't mean much.

second: a "query" doesn't have a score, a document has a score relative to 
a query ... scores can't be compared between different queries.

third: there is a "queryNorm" that comes into play, it's designed to keep 
scores "managable" you can read more about it (and how to change it if you 
want) in the scoring documentation.  you should also look at the 
"Explanation" info for each query/doc to make sure you understand what's 
going on.



: For example:
: apple
: 
: Has the same score as:
: apple^3
: 
: But repeating the term will up the score
: apple apple apple
: 
: I expected the score to go up when boosting a one term query.  Is that a
: wrong expectation?



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 05 02:40:59 2007
Return-Path: <java-user-return-31340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10761 invoked from network); 5 Dec 2007 02:40:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2007 02:40:59 -0000
Received: (qmail 87920 invoked by uid 500); 5 Dec 2007 02:40:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87885 invoked by uid 500); 5 Dec 2007 02:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87874 invoked by uid 99); 5 Dec 2007 02:40:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 18:40:40 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 02:40:20 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 3E60771C1B1; Tue,  4 Dec 2007 18:40:23 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 324D271C1A4
	for <java-user@lucene.apache.org>; Tue,  4 Dec 2007 18:40:23 -0800 (PST)
Date: Tue, 4 Dec 2007 18:40:23 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: span queries and proximity boosting
In-Reply-To: <4755CE18.4060802@gmail.com>
Message-ID: <Pine.LNX.4.62.0712041837160.27722@radix.cryptio.net>
References: <25E214935D7C0342B91631BC43467D8D0110A4B0@EVS2.corp.rightnow.com>
 <4755CE18.4060802@gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: A quick look at the code would say no, unless I am missing something. Neither
: the weight or span scorer seem to take distance into account.

uh, i think you're wrong ... SpanScorer takes the distance between the 
"end" of the spans and the "start" of the spans into account just like a 
PraseQuery considers the positions of the terms (it's just a bit more 
complicated with Spans because of the nesting that's possible)

(look for "matchLength" in SpamScorer)




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 05 03:23:10 2007
Return-Path: <java-user-return-31341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22549 invoked from network); 5 Dec 2007 03:23:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2007 03:23:09 -0000
Received: (qmail 17481 invoked by uid 500); 5 Dec 2007 03:22:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17452 invoked by uid 500); 5 Dec 2007 03:22:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17439 invoked by uid 99); 5 Dec 2007 03:22:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 19:22:52 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 03:22:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IzkqF-0003h1-Tf
	for java-user@lucene.apache.org; Tue, 04 Dec 2007 19:22:31 -0800
Message-ID: <14164565.post@talk.nabble.com>
Date: Tue, 4 Dec 2007 19:22:31 -0800 (PST)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Error running Lucene in Action code
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Dear Fellow Java & Lucene developers:

I am a Java developer learning lucene and I am currently going through the
book Lucene in Action.  At present, I am trying to run the sample code for
indexing an xml document using sax.  My code has been slightly updated for
Lucene version 2.2:

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

package lucenexml;


import java.io.File;
import java.io.FileInputStream;
import java.io.InputStream;
import java.io.IOException;
import java.util.HashMap;
import java.util.Iterator;

import org.xml.sax.helpers.DefaultHandler;
import org.xml.sax.SAXException;
import org.xml.sax.Attributes;

import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import javax.xml.parsers.ParserConfigurationException;


import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;

/**
 *
 * @author fayyaz
 */
public class SAXXMLHandler extends DefaultHandler implements
DocumentHandler{

    private StringBuffer elementBuffer=new StringBuffer();
    private HashMap attributeMap;
    
    private Document doc;
    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws Exception {
        // TODO code application logic here
        SAXXMLHandler handler=new SAXXMLHandler();
        Document doc=handler.getDocument(new FileInputStream(new
File(args[0])));
        System.out.println(doc);
    }
    
    public Document getDocument(InputStream is) throws
DocumentHandlerException{
        
        SAXParserFactory spf=SAXParserFactory.newInstance();
        
        try{
            SAXParser parser=spf.newSAXParser();
            parser.parse(is, this);
             
        }
        catch (IOException e){
            throw new DocumentHandlerException("Cannot parse XML document",
e);
        }
        catch (ParserConfigurationException e) {
            throw new DocumentHandlerException("Cannot parse XML document",
e);
        }
        catch (SAXException e){
            throw new DocumentHandlerException("Cannot parse XML document",
e);
        }
        return doc;
    }
    
    public void startDocument(){
        doc=new Document();
    }
    
    public void startElement(String uri, String localName, String qName,
Attributes atts) throws SAXException{
        
        elementBuffer.setLength(0);
        attributeMap.clear();
        if(atts.getLength()>0){
            attributeMap=new HashMap();
            for(int i=0; i<atts.getLength(); i++){
                attributeMap.put(atts.getQName(i), atts.getValue(i));
            }
        }
    }
    
    public void characters(char[] text, int start, int length){
        elementBuffer.append(text, start, length);
    }
    
    public void endElement(String uri, String localName, String qName)
throws SAXException{
        if(qName.equals("address-book")){
            return;
        }
        
        else if(qName.equals("contact")){
            Iterator iter=attributeMap.keySet().iterator();
            while(iter.hasNext()){
                String attName=(String)iter.next();
                String attValue=(String)attributeMap.get(attName);
                doc.add(new Field(qName, elementBuffer.toString(),
Field.Store.YES,Field.Index.NO));
            }
        }
    }
}


However, although the code compiles, I get the following runtime error when
I pass the file addressbook.xml (which is used in the book) as a runtime
argument:

Exception in thread "main" java.lang.NullPointerException
        at lucenexml.SAXXMLHandler.startElement(SAXXMLHandler.java:81)
        at org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown
Source)
        at org.apache.xerces.impl.dtd.XMLDTDValidator.startElement(Unknown
Source)
        at
org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown
Source)
        at
org.apache.xerces.impl.XMLDocumentScannerImpl$ContentDispatcher.scanRootElementHook(Unknown
Source)
        at
org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown
Source)
        at
org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown
Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown
Source)
        at org.apache.xerces.parsers.XML11Configuration.parse(Unknown
Source)
        at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
        at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown
Source)
        at org.apache.xerces.jaxp.SAXParserImpl.parse(Unknown Source)
        at javax.xml.parsers.SAXParser.parse(SAXParser.java:198)
        at lucenexml.SAXXMLHandler.getDocument(SAXXMLHandler.java:59)
        at lucenexml.SAXXMLHandler.main(SAXXMLHandler.java:49)
Java Result: 1

What am I doing wrong?  Any help would be greatly appreciated.

Thanks in advance.
Sincerely;
Fayyaz

-- 
View this message in context: http://www.nabble.com/Error-running-Lucene-in-Action-code-tf4947242.html#a14164565
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 05 07:41:23 2007
Return-Path: <java-user-return-31342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53123 invoked from network); 5 Dec 2007 07:41:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2007 07:41:23 -0000
Received: (qmail 81981 invoked by uid 500); 5 Dec 2007 07:41:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81957 invoked by uid 500); 5 Dec 2007 07:41:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81946 invoked by uid 99); 5 Dec 2007 07:41:05 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 04 Dec 2007 23:41:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucene@nitwit.de designates 80.67.29.28 as permitted sender)
Received: from [80.67.29.28] (HELO smtprelay11.ispgateway.de) (80.67.29.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 07:41:06 +0000
Received: (qmail 13997 invoked from network); 5 Dec 2007 07:40:46 -0000
Received: from unknown (HELO server.localdomain) ([pbs]153383@[85.178.207.242])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay11.ispgateway.de (qmail-ldap-1.03) with AES256-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 5 Dec 2007 07:40:46 -0000
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 6429A22D9EE
	for <java-user@lucene.apache.org>; Wed,  5 Dec 2007 08:40:49 +0100 (CET)
From: Timo Nentwig <lucene@nitwit.de>
To: java-user@lucene.apache.org
Subject: Re: FieldSelector
Date: Wed, 5 Dec 2007 08:40:49 +0100
User-Agent: KMail/1.9.7
References: <200711301227.50788.lucene@nitwit.de> <200711301658.02229.lucene@nitwit.de> <98340F18-AC0F-4545-9CE5-11638E3E0F8C@apache.org>
In-Reply-To: <98340F18-AC0F-4545-9CE5-11638E3E0F8C@apache.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200712050840.49211.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 30 November 2007 19:28:12 Grant Ingersoll wrote:
> I guess the question becomes what is the nature of your fields?  Do
> you have some really large fields that you want to avoid loading b/c
> they are not shown initially?  That is the main use case, I guess.

I wonder why there's not LazyFieldSelector that loads all fields lazyly in 
general. Is this for some reason slow or why is this obviously reasonable 
class missing?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 05 10:03:10 2007
Return-Path: <java-user-return-31343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59298 invoked from network); 5 Dec 2007 10:03:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2007 10:03:10 -0000
Received: (qmail 66991 invoked by uid 500); 5 Dec 2007 10:02:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66719 invoked by uid 500); 5 Dec 2007 10:02:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66708 invoked by uid 99); 5 Dec 2007 10:02:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 02:02:51 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [66.111.4.25] (HELO out1.smtp.messagingengine.com) (66.111.4.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 10:02:50 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id C836D606D7
	for <java-user@lucene.apache.org>; Wed,  5 Dec 2007 05:02:29 -0500 (EST)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Wed, 05 Dec 2007 05:02:29 -0500
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id 9FDD63C258; Wed,  5 Dec 2007 05:02:29 -0500 (EST)
Message-Id: <1196848949.11634.1224908039@webmail.messagingengine.com>
X-Sasl-Enc: 7KUtVrllnNju1W0fv4rB6O5loBvAHY7Uix6nXOAVsBoQ 1196848949
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <14164565.post@talk.nabble.com>
Subject: Re: Error running Lucene in Action code
In-Reply-To: <14164565.post@talk.nabble.com>
Date: Wed, 05 Dec 2007 05:02:29 -0500
X-Virus-Checked: Checked by ClamAV on apache.org


I think you need to initialize attributeMap, eg add " = new HashMap()" in
the declaration?

Mike

"syedfa" <fayyazuddin@gmail.com> wrote:
> 
> Dear Fellow Java & Lucene developers:
> 
> I am a Java developer learning lucene and I am currently going through the
> book Lucene in Action.  At present, I am trying to run the sample code for
> indexing an xml document using sax.  My code has been slightly updated for
> Lucene version 2.2:
> 
> /*
>  * To change this template, choose Tools | Templates
>  * and open the template in the editor.
>  */
> 
> package lucenexml;
> 
> 
> import java.io.File;
> import java.io.FileInputStream;
> import java.io.InputStream;
> import java.io.IOException;
> import java.util.HashMap;
> import java.util.Iterator;
> 
> import org.xml.sax.helpers.DefaultHandler;
> import org.xml.sax.SAXException;
> import org.xml.sax.Attributes;
> 
> import javax.xml.parsers.SAXParser;
> import javax.xml.parsers.SAXParserFactory;
> import javax.xml.parsers.ParserConfigurationException;
> 
> 
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> 
> /**
>  *
>  * @author fayyaz
>  */
> public class SAXXMLHandler extends DefaultHandler implements
> DocumentHandler{
> 
>     private StringBuffer elementBuffer=new StringBuffer();
>     private HashMap attributeMap;
>     
>     private Document doc;
>     /**
>      * @param args the command line arguments
>      */
>     public static void main(String[] args) throws Exception {
>         // TODO code application logic here
>         SAXXMLHandler handler=new SAXXMLHandler();
>         Document doc=handler.getDocument(new FileInputStream(new
> File(args[0])));
>         System.out.println(doc);
>     }
>     
>     public Document getDocument(InputStream is) throws
> DocumentHandlerException{
>         
>         SAXParserFactory spf=SAXParserFactory.newInstance();
>         
>         try{
>             SAXParser parser=spf.newSAXParser();
>             parser.parse(is, this);
>              
>         }
>         catch (IOException e){
>             throw new DocumentHandlerException("Cannot parse XML
>             document",
> e);
>         }
>         catch (ParserConfigurationException e) {
>             throw new DocumentHandlerException("Cannot parse XML
>             document",
> e);
>         }
>         catch (SAXException e){
>             throw new DocumentHandlerException("Cannot parse XML
>             document",
> e);
>         }
>         return doc;
>     }
>     
>     public void startDocument(){
>         doc=new Document();
>     }
>     
>     public void startElement(String uri, String localName, String qName,
> Attributes atts) throws SAXException{
>         
>         elementBuffer.setLength(0);
>         attributeMap.clear();
>         if(atts.getLength()>0){
>             attributeMap=new HashMap();
>             for(int i=0; i<atts.getLength(); i++){
>                 attributeMap.put(atts.getQName(i), atts.getValue(i));
>             }
>         }
>     }
>     
>     public void characters(char[] text, int start, int length){
>         elementBuffer.append(text, start, length);
>     }
>     
>     public void endElement(String uri, String localName, String qName)
> throws SAXException{
>         if(qName.equals("address-book")){
>             return;
>         }
>         
>         else if(qName.equals("contact")){
>             Iterator iter=attributeMap.keySet().iterator();
>             while(iter.hasNext()){
>                 String attName=(String)iter.next();
>                 String attValue=(String)attributeMap.get(attName);
>                 doc.add(new Field(qName, elementBuffer.toString(),
> Field.Store.YES,Field.Index.NO));
>             }
>         }
>     }
> }
> 
> 
> However, although the code compiles, I get the following runtime error
> when
> I pass the file addressbook.xml (which is used in the book) as a runtime
> argument:
> 
> Exception in thread "main" java.lang.NullPointerException
>         at lucenexml.SAXXMLHandler.startElement(SAXXMLHandler.java:81)
>         at
>         org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown
> Source)
>         at
>         org.apache.xerces.impl.dtd.XMLDTDValidator.startElement(Unknown
> Source)
>         at
> org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown
> Source)
>         at
> org.apache.xerces.impl.XMLDocumentScannerImpl$ContentDispatcher.scanRootElementHook(Unknown
> Source)
>         at
> org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown
> Source)
>         at
> org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown
> Source)
>         at org.apache.xerces.parsers.XML11Configuration.parse(Unknown
> Source)
>         at org.apache.xerces.parsers.XML11Configuration.parse(Unknown
> Source)
>         at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
>         at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown
>         Source)
>         at
>         org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown
> Source)
>         at org.apache.xerces.jaxp.SAXParserImpl.parse(Unknown Source)
>         at javax.xml.parsers.SAXParser.parse(SAXParser.java:198)
>         at lucenexml.SAXXMLHandler.getDocument(SAXXMLHandler.java:59)
>         at lucenexml.SAXXMLHandler.main(SAXXMLHandler.java:49)
> Java Result: 1
> 
> What am I doing wrong?  Any help would be greatly appreciated.
> 
> Thanks in advance.
> Sincerely;
> Fayyaz
> 
> -- 
> View this message in context:
> http://www.nabble.com/Error-running-Lucene-in-Action-code-tf4947242.html#a14164565
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 05 11:21:37 2007
Return-Path: <java-user-return-31344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92201 invoked from network); 5 Dec 2007 11:21:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2007 11:21:37 -0000
Received: (qmail 75318 invoked by uid 500); 5 Dec 2007 11:21:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75281 invoked by uid 500); 5 Dec 2007 11:21:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75270 invoked by uid 99); 5 Dec 2007 11:21:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 03:21:18 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.66] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.66)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 11:20:57 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 08110B884C
	for <java-user@lucene.apache.org>; Wed,  5 Dec 2007 03:20:58 -0800 (PST)
Message-Id: <DA9749F0-50E3-48E0-8342-A3D97A410FAA@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <200712050840.49211.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: FieldSelector
Date: Wed, 5 Dec 2007 06:20:51 -0500
References: <200711301227.50788.lucene@nitwit.de> <200711301658.02229.lucene@nitwit.de> <98340F18-AC0F-4545-9CE5-11638E3E0F8C@apache.org> <200712050840.49211.lucene@nitwit.de>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 5, 2007, at 2:40 AM, Timo Nentwig wrote:

> On Friday 30 November 2007 19:28:12 Grant Ingersoll wrote:
>> I guess the question becomes what is the nature of your fields?  Do
>> you have some really large fields that you want to avoid loading b/c
>> they are not shown initially?  That is the main use case, I guess.
>
> I wonder why there's not LazyFieldSelector that loads all fields  
> lazyly in
> general. Is this for some reason slow or why is this obviously  
> reasonable
> class missing?

Probably because it wasn't obvious to me :-)  That is, my use case was  
almost always to load small fields right away and large fields  
lazily.  I haven't tested the cost of this, but you would essentially  
be doing all the work and then some to load them all lazily, so I am  
not sure I see the point.  For example, if you have 4 fields, 3 small  
and 1 large, the FieldsReader more or less does:

1. move the pointer to the start of the doc
2. Check the field selector
3. if Lazy, store a pointer, else load the field or skip
4. Skip ahead to the next field, repeat 2-4 until all fields in the  
doc have been addressed

Then, when you go to access those 4 fields, which you most certainly  
will at some point soon, otherwise why did you get the document to  
begin with, it then has to go reset the pointer to that position and  
then load the info.  Chances are, b/c of the way OSes handle disk,  
etc. you've already loaded all the small info (and probably in some  
cases the big data too, depending on size) so why not just return it  
the first time?  In cases of really small fields (i.e. integers, etc.)  
the cost of storing the pointer is probably really close if not the  
same as storing the field, if not more b/c now you have to store the  
pointer plus do a seek.

Cheers,
Grant



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 05 12:18:36 2007
Return-Path: <java-user-return-31345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10438 invoked from network); 5 Dec 2007 12:18:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2007 12:18:36 -0000
Received: (qmail 42913 invoked by uid 500); 5 Dec 2007 12:18:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42883 invoked by uid 500); 5 Dec 2007 12:18:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42872 invoked by uid 99); 5 Dec 2007 12:18:18 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 04:18:18 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,FUZZY_CPILL,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 12:18:16 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1IztCN-0001HB-PL
	for java-user@lucene.apache.org; Wed, 05 Dec 2007 04:17:55 -0800
Message-ID: <14170395.post@talk.nabble.com>
Date: Wed, 5 Dec 2007 04:17:55 -0800 (PST)
From: ninaS <nina256@gmx.de>
To: java-user@lucene.apache.org
Subject: Re: Group by in Lucene ?
In-Reply-To: <7e536b1f0711060019r32914558ke1e2ee7885e9f1f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: nina256@gmx.de
References: <7e536b1f0711042157j4b2ee68fld8043344b022095d@mail.gmail.com> <F101D398-9CC5-4053-BFE1-72002F8822EE@apache.org> <7e536b1f0711050449u15b6af6j8456e9c5e89f4364@mail.gmail.com> <C7DED9F8-A524-4735-A1F5-1089DC869CEC@apache.org> <7e536b1f0711060019r32914558ke1e2ee7885e9f1f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hey Marcus,

have you already implemented this feature?
I'm searching a group by function for lucene, too.

More precisely I need it in Compass, which is built on top of lucene.

I was thinking about using a HitCollector to get only one result per group.

How did you do it?

Cheers,
Nina



Marcus Herou-2 wrote:
> 
> Cool.
> 
> I'll do since this is a field which I can spend time in.
> 
> Kindly
> 
> //Marcus
> On 11/5/07, Grant Ingersoll <gsingers@apache.org> wrote:
>>
>>
>> On Nov 5, 2007, at 7:49 AM, Marcus Herou wrote:
>>
>> > Thanks. They seem to have got real far in the dev cycle on this.
>> > Seems like
>> > it will hit the road in Solr 1.3.
>> >
>> > However I would really like this feature to be developed for Core
>> > Lucene,
>> > how do I start that process?
>> > Develop it yourself you would say :) I'm serious isn't it a really
>> > cool and
>> > useful feature ?
>>
>>
>> We're always open to well-thought out and tested patches.  See the
>> Wiki for info on contributing.
>>
>> -Grant
>>
>>
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>>
>> Lucene Boot Camp Training:
>> ApacheCon Atlanta, Nov. 12, 2007.  Sign up now!  http://www.apachecon.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 
> -- 
> Marcus Herou Solution Architect & Core Java developer Tailsweep AB
> +46702561312
> marcus.herou@tailsweep.com
> http://www.tailsweep.com
> 
> 

-- 
View this message in context: http://www.nabble.com/Group-by-in-Lucene---tf4749806.html#a14170395
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 05 12:31:17 2007
Return-Path: <java-user-return-31346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22577 invoked from network); 5 Dec 2007 12:31:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2007 12:31:17 -0000
Received: (qmail 57887 invoked by uid 500); 5 Dec 2007 12:30:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57617 invoked by uid 500); 5 Dec 2007 12:30:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57606 invoked by uid 99); 5 Dec 2007 12:30:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 04:30:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 12:30:37 +0000
Received: by py-out-1112.google.com with SMTP id d32so16098227pye
        for <java-user@lucene.apache.org>; Wed, 05 Dec 2007 04:30:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=UZvAaEnNaRDCyVtFaX5MeUpuv3d6k/N5elBo4ypw7kA=;
        b=PANsCi4zDDSYEKgAxIpFtFPv2OLgcqPaYRjcggIi1eOn8Pkh2WDK4iPq4Z4/sH8FfRJ6VHVQSB00PtZkz/FFXLAnZ06MQ+CUDhEonzt6r4dmuVNyxyuEscWgOLyrV8daI5WyTt4LJ07w7+ztb2qt/mIHLLI23eMnfCNY5MqE/aA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=qEBbELvLzUlzevQG2D78aCS7rcMey3fqZWmreZWnbCUwnbJMDaP8+gjVnYrFRgHCAhKqyTl92NbDPYdoRZ0K1iGZuVpfvYm9xa2naZYAm4AbEl1bAckp5VyGmZcMdwp4Uy6Jw1DTvzoefP0WEe62b1xpFG6lmyqHqZZqIq1ogzQ=
Received: by 10.65.54.9 with SMTP id g9mr1048323qbk.1196857838982;
        Wed, 05 Dec 2007 04:30:38 -0800 (PST)
Received: from ?192.168.1.102? ( [69.124.234.183])
        by mx.google.com with ESMTPS id e15sm810179qbe.2007.12.05.04.30.37
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 05 Dec 2007 04:30:37 -0800 (PST)
Message-ID: <475699DA.1000309@gmail.com>
Date: Wed, 05 Dec 2007 07:30:18 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: span queries and proximity boosting
References: <25E214935D7C0342B91631BC43467D8D0110A4B0@EVS2.corp.rightnow.com> <4755CE18.4060802@gmail.com> <Pine.LNX.4.62.0712041837160.27722@radix.cryptio.net>
In-Reply-To: <Pine.LNX.4.62.0712041837160.27722@radix.cryptio.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Doh! Even after careful scanning I missed that. Of course your right 
though....scores with:
 
/** Computes the amount of a sloppy phrase match, based on an edit distance.
   * This value is summed for each sloppy phrase match in a document to form
   * the frequency that is passed to {@link #tf(float)}.
   *
   * <p>A phrase match with a small edit distance to a document passage more
   * closely matches the document, so implementations of this method usually
   * return larger values when the edit distance is small and smaller values
   * when it is large.
   *
   * @see PhraseQuery#setSlop(int)
   * @param distance the edit distance of this sloppy phrase match
   * @return the frequency increment for this match
   */
  public abstract float sloppyFreq(int distance);

Chris Hostetter wrote:
> : A quick look at the code would say no, unless I am missing something. Neither
> : the weight or span scorer seem to take distance into account.
>
> uh, i think you're wrong ... SpanScorer takes the distance between the 
> "end" of the spans and the "start" of the spans into account just like a 
> PraseQuery considers the positions of the terms (it's just a bit more 
> complicated with Spans because of the nesting that's possible)
>
> (look for "matchLength" in SpamScorer)
>
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 05 14:36:12 2007
Return-Path: <java-user-return-31347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66396 invoked from network); 5 Dec 2007 14:36:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2007 14:36:12 -0000
Received: (qmail 14085 invoked by uid 500); 5 Dec 2007 14:35:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14049 invoked by uid 500); 5 Dec 2007 14:35:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14038 invoked by uid 99); 5 Dec 2007 14:35:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 06:35:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucene@nitwit.de designates 80.67.29.24 as permitted sender)
Received: from [80.67.29.24] (HELO smtprelay10.ispgateway.de) (80.67.29.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 14:35:56 +0000
Received: (qmail 29520 invoked from network); 5 Dec 2007 14:35:35 -0000
Received: from unknown (HELO server.localdomain) ([pbs]153383@[85.178.227.207])
          (envelope-sender <lucene@nitwit.de>)
          by smtprelay10.ispgateway.de (qmail-ldap-1.03) with AES256-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 5 Dec 2007 14:35:35 -0000
Received: from localhost (localhost [127.0.0.1])
	by server.localdomain (Postfix) with ESMTP id 72DF228E8DC
	for <java-user@lucene.apache.org>; Wed,  5 Dec 2007 15:35:40 +0100 (CET)
From: Timo Nentwig <lucene@nitwit.de>
To: java-user@lucene.apache.org
Subject: Re: FieldSelector
Date: Wed, 5 Dec 2007 15:35:40 +0100
User-Agent: KMail/1.9.7
References: <200711301227.50788.lucene@nitwit.de> <200712050840.49211.lucene@nitwit.de> <DA9749F0-50E3-48E0-8342-A3D97A410FAA@apache.org>
In-Reply-To: <DA9749F0-50E3-48E0-8342-A3D97A410FAA@apache.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200712051535.40258.lucene@nitwit.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 05 December 2007 12:20:51 Grant Ingersoll wrote:
> Then, when you go to access those 4 fields, which you most certainly
> will at some point soon, otherwise why did you get the document to

Nope, I won't :)

In fact my Document contain fields I only need for searching and sorting. But 
I never need to actually read them.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 05 19:22:16 2007
Return-Path: <java-user-return-31348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80766 invoked from network); 5 Dec 2007 19:22:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 5 Dec 2007 19:22:16 -0000
Received: (qmail 19028 invoked by uid 500); 5 Dec 2007 19:21:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18815 invoked by uid 500); 5 Dec 2007 19:21:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18804 invoked by uid 99); 5 Dec 2007 19:21:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 11:21:57 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 19:21:36 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 43F4D21211
	for <java-user@lucene.apache.org>; Wed,  5 Dec 2007 11:21:38 -0800 (PST)
Message-Id: <6B1D6F5B-0C43-4D09-8E22-CC5F6BD7900D@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <200712051535.40258.lucene@nitwit.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: FieldSelector
Date: Wed, 5 Dec 2007 14:21:36 -0500
References: <200711301227.50788.lucene@nitwit.de> <200712050840.49211.lucene@nitwit.de> <DA9749F0-50E3-48E0-8342-A3D97A410FAA@apache.org> <200712051535.40258.lucene@nitwit.de>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 5, 2007, at 9:35 AM, Timo Nentwig wrote:

> On Wednesday 05 December 2007 12:20:51 Grant Ingersoll wrote:
>> Then, when you go to access those 4 fields, which you most certainly
>> will at some point soon, otherwise why did you get the document to
>
> Nope, I won't :)
>

I probably should have said you will access at least one of those 4  
fields, otherwise why load the document.


> In fact my Document contain fields I only need for searching and  
> sorting. But
> I never need to actually read them.



Yes, but is this the case for all Fields on the Document?  This is the  
most often use case.  You have some fields for display, some for  
searching and some for sorting.  If there all small, you really aren't  
going to pay too much cost for getting them all, b/c they are next to  
each other in the index, so you might as well load them.  If one or  
more are really big, then it might make sense to lazily load just  
those fields.  I don't see much value in loading all the fields  
lazily, but it certainly is easy enough to do w/ the  
SetBasedFieldSelector or a trivial implementation of FieldSelector  
where the accept method returns Lazy no matter the input.

-Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 00:41:41 2007
Return-Path: <java-user-return-31349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91210 invoked from network); 6 Dec 2007 00:41:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 00:41:40 -0000
Received: (qmail 27705 invoked by uid 500); 6 Dec 2007 00:41:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27682 invoked by uid 500); 6 Dec 2007 00:41:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27671 invoked by uid 99); 6 Dec 2007 00:41:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 16:41:21 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 00:40:59 +0000
Received: from hop04-l1d11-si01.isus.emc.com (HOP04-L1D11-SI01.isus.emc.com [10.254.111.54])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id lB60f0sK008698
	for <java-user@lucene.apache.org>; Wed, 5 Dec 2007 19:41:00 -0500 (EST)
Received: from mailhub.lss.emc.com (sesha.lss.emc.com [10.254.144.12]) by hop04-l1d11-si01.isus.emc.com (Tablus Interceptor) for <java-user@lucene.apache.org>; Wed, 5 Dec 2007 19:41:00 -0500
Received: from corpussmtp1.corp.emc.com (corpussmtp1.corp.emc.com [128.221.10.43])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id lB60eMv7016487
	for <java-user@lucene.apache.org>; Wed, 5 Dec 2007 19:40:58 -0500 (EST)
From: Seneviratne_Yasoja@emc.com
Received: from CORPUSMX10C.corp.emc.com ([128.221.14.93]) by corpussmtp1.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 5 Dec 2007 19:34:38 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="utf-8"
Content-Transfer-Encoding: base64
Subject: RE: Indexing XML document
Date: Wed, 5 Dec 2007 19:34:37 -0500
Message-ID: <8856DF1FF75B2348A2D4033D1E8A7EE40222A024@CORPUSMX10C.corp.emc.com>
In-Reply-To: <475596BD.40903@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing XML document
Thread-Index: Acg2oFODfRp24BicShGx268eG59OtQA/QNhg
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Dec 2007 00:34:38.0481 (UTC) FILETIME=[C8984810:01C8379F]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.8.30.53115
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CP_URI_IN_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __HIGHBITS 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __RUS_HASHBUSTER_KOI8R 0, __SANE_MSGID 0'
X-Tablus-Inspected: yes
X-Tablus-Classifications: public
X-Tablus-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

VGhlIGV4YW1wbGUgZnJvbSBHcmFudCdzIGVhcmxpZXIgcmVwbHkgdXNlcyBVVEYtODogaHR0cDov
L3dpa2kuYXBhY2hlLm9yZy9sdWNlbmUtamF2YS9JbmRleGluZ090aGVyTGFuZ3VhZ2VzDQoNCkkg
dHJpZWQgb3V0IHRoZSBVcmR1IGluIHlvdXIgZW1haWwsIGZpcnN0IGNvbnZlcnRlZCBpdCB0byBV
VEYtOCwgdGhlbiBMdWNlbmUgc2VlbWVkIHRvIGluZGV4L3NlYXJjaCBvaywgU0FYIHdvcmtlZCBh
cyB3ZWxsIGZvciBwYXJzaW5nIGl0Lg0KDQotLS0tLU9yaWdpbmFsIE1lc3NhZ2UtLS0tLQ0KRnJv
bTogTGlhcWF0IEFsaSBbbWFpbHRvOmxpYXFhdGFsaW1pYW5AZ21haWwuY29tXSANClNlbnQ6IFR1
ZXNkYXksIERlY2VtYmVyIDA0LCAyMDA3IDEwOjA1IEFNDQpUbzogamF2YS11c2VyQGx1Y2VuZS5h
cGFjaGUub3JnDQpTdWJqZWN0OiBJbmRleGluZyBYTUwgZG9jdW1lbnQNCg0KSGkgYWxsLA0KDQpJ
IHdhbnQgdG8gaW5kZXggYW4gWE1MIGZpbGUsY29udGFpbmluZyAyMDAgVXJkdSBsYW5ndWFnZSAo
VmFyaWVudCBvZiANCkFyYWJpYyBhbmQgUGVyc2lhbikgZG9jdW1lbnRzLiBUaGlzIGNvcnB1cyBp
cyBpbiBDRVMgZm9ybWF0LGNvbnNpc3RpbmcgDQpvZiBpbmZvcm1hdGlvbiBhYm91dCBhdXRob3Ig
YW5kIG1hbnkgbW9yZSwgSSBqdXN0IHdhbnQgdG8gZXh0cmFjdCANCnRleHR1YWwgZGF0YSBvZiBl
YWNoIGRvY3VtZW50IGFuZCByZWxhdGl2ZSBEb2MgbnVtYmVyIGFuZCB0aXRsZSBpbiBlYWNoIA0K
ZG9jdW1lbnQgdXNpbmcgU0FYLg0KDQpUaGUgcHJvYmxlbSBJIG0gZmFjaW5nIHRoYXQgd2hhdCBz
aG91bGQgYmUgdGhlIG91dHB1dCBvZiB0aGlzIHdob2xlIA0KcHJvY2Vzc2luZywgd2hpY2ggaXMg
YWNjZXB0YWJsZSB0byBMdWNlbmUgSW5kZXhlci4gSSBqdXN0IHdhbnQgdG8gc3RvcmUgDQpEb2N1
bWVudCBudW1iZXIsIGFuZCBUaXRsZSB3aXRoIGVhY2ggZG9jdW1lbnQuIFRoZSBleGFtcGxlIGdp
dmVuIGJlbG93IA0KaXMgRG9jIDIgZnJvbSB0aGF0IFhNTCBmaWxlLiBJIHdhbnQgdG8gbWFrZSBj
b21wbGV0ZSBpbmRleCBvZiAyMDAgDQpkb2N1bWVudHMgd2l0aCBEb2MgbnVtYmVyIGFuZCB0aXRs
ZS4uLiBLaW5kbHkgZ3VpZGUgbWUuLi4uLi4NCg0KDQo8aC50aXRsZT5Eb2MgMjwvaC50aXRsZT4N
Cg0KPHRpdGxlPtit2qnZhdiqINuM2KfYsSDaqdmIINin24zYsdin2YYg2KjYr9ixINqp2LHZhtuS
INm+2LEg2LrZiNixPC90aXRsZT4NCjwvcD4NCjxwPtin2YjYsSDYrtio2LHbjNq6INuB24zauiDa
qduBINin2YbavtuM2rog2KfbjNix2KfZhiDYqNiv2LEg2qnYsdmG25Ig2b7YsSDYqNq+24wg2LrZ
iNixINqp24zYpyDYrNinINix24HYpyDbgduS25Qg2K3aqdmF2KogDQrbjNin2LEg2KzZiCDYs9in
2KjZgiDYs9mI2YjbjNiqINuM2YjZhtuM2YYg2qnbjCDZhdiv2KfYrtmE2Kog2qnbkiDYrtmE2KfZ
gSDYp9mF2LHbjNqp24wg2K3Zhdin24zYqiDYs9uSINqG2YTbkiDZiNin2YTbjCANCtmF2LLYp9it
2YXYqiDZhduM2rog2LPYp9mF2YbbkiDYotuTINiq2r7bkiDYp9ioINmF2K7Yp9mE2YEg2K7bjNin
2YTYp9iqINqp25Ig2YTbkyDYrNin2YbbkiDYrNin2KrbkiDbgduM2rog2KfZiNixINin2Kgg2Yjb
gSANCtqp2LHYstim24wg2KfZhtiq2LjYp9mF24zbgSDaqduMINio2r7bjCDZhdiu2KfZhNmB2Kog
2qnYsdix24HbkiDYqtq+25LblCDar9iw2LTYqtuBINuB2YHYqtuSINin24zYsdin2YYg2YbbkiDY
rdqp2YXYqiDbjNin2LEg2b7YsSANCtin2YTYstin2YUg2YTar9in24zYpyDYqtq+2Kcg2qnbgSDZ
iNuBINin24zYsdin2YYg2qnbjCDYs9ix2LLZhduM2YYg2qnZiCDYp9mB2LrYp9mGINin2YbYqti4
2KfZhduM24Eg2qnbkiDYrtmE2KfZgSANCtqp2KfYsdmI2KfYptuM2KfauiDaqdix2YbbkiDaqduS
INmE25Mg2KfYs9iq2LnZhdin2YQg2qnYsdix24HbkiDbgduM2rog2KzYqCDaqduBINin24zYsdin
2YYg2qnYpyDaqduB2YbYpyDbgduSINqp24Eg2YjbgSANCti32KfZhNio2KfZhiDaqduSINiu2YTY
p9mBINmF2LLYp9it2YUg2K/avtqR2YjauiDaqdmIINis2Ygg2K3Zhdin24zYqiDZgdix2KfYrdmF
INqp2LEg2LHbgdinINiq2r7YpyDZiNuBINi32KfZhNio2KfZhiDaqdinIA0K2qnZhtm52LHZiNmE
INiu2KrZhSDbgdmI2YbbkiDaqduSINio2LnYryDYqNmG2K8g2qnYsSDYr9uMINqv2KbbjCDbgduS
25Qg2KrYp9uB2YUg2KjYudi2INiw2LHYp9im2Lkg2qnYpyDYrtuM2KfZhCDbgduSINqp24EgDQrY
p9uM2LHYp9mGINmG25Ig2K3aqdmF2Kog24zYp9ixINqp25Ig2K7ZhNin2YEg2KfZgtiv2KfZhSDY
p9mF2LHbjNqp24Eg2qnbkiDYp9i52KrYsdin2LbYp9iqINqp25Ig2KjYudivINqp24zbkiDbgduM
2rrblDwvcD4NCg0KDQoNClRoYW5rcyAuLi4uLiBMaWFxYXQNCg0KLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tDQpUbyB1
bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5lLmFwYWNoZS5v
cmcNCkZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1Y2Vu
ZS5hcGFjaGUub3JnDQoNCg0K


From java-user-return-31350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 00:43:11 2007
Return-Path: <java-user-return-31350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91468 invoked from network); 6 Dec 2007 00:43:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 00:43:11 -0000
Received: (qmail 30922 invoked by uid 500); 6 Dec 2007 00:42:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29939 invoked by uid 500); 6 Dec 2007 00:42:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29928 invoked by uid 99); 6 Dec 2007 00:42:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 16:42:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 00:42:33 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id 6557D4A823D
	for <java-user@lucene.apache.org>; Thu,  6 Dec 2007 11:41:54 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Tricky (maybe) query question
Date: Thu, 6 Dec 2007 11:42:32 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200712061142.32839.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all.

Suppose you have a text index with a field used for deduplication, and then 
you later add a second field with further information that might also be used 
for deduplication.  We'll call them A and B for the sake of brevity.

If I have only a current text index, then I can use (a:foo AND b:bar) to 
deduplicate.  However, I still want to deduplicate between the older ones 
which don't have B and the new ones which do.

Is there a way I can do a query which will:
  - Match a document if both a:foo and b:bar are matched
  - Match a document if a:foo matches and b is absent, or vice versa.
  - Not match a document if both a:foo and b:foo are absent
  - Not match a document if either a:foo or b:foo are present and do not
    match ?

If not, I suppose I'll have to go with the lowest common denominator approach 
and find out which fields are present in every index.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 01:31:07 2007
Return-Path: <java-user-return-31351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60728 invoked from network); 6 Dec 2007 01:31:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 01:31:07 -0000
Received: (qmail 55626 invoked by uid 500); 6 Dec 2007 01:30:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55594 invoked by uid 500); 6 Dec 2007 01:30:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55583 invoked by uid 99); 6 Dec 2007 01:30:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 17:30:47 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 01:30:24 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J05ZL-0002tF-2p
	for java-user@lucene.apache.org; Wed, 05 Dec 2007 17:30:27 -0800
Message-ID: <14184703.post@talk.nabble.com>
Date: Wed, 5 Dec 2007 17:30:27 -0800 (PST)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Error running Lucene in Action code
In-Reply-To: <1196848949.11634.1224908039@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
References: <14164565.post@talk.nabble.com> <1196848949.11634.1224908039@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I'll give it a try.  I would be surprised if that is the problem, since the
code is straight from the book.  Let's see what happens.

Fayyaz




Michael McCandless-2 wrote:
> 
> 
> I think you need to initialize attributeMap, eg add " = new HashMap()" in
> the declaration?
> 
> Mike
> 
> "syedfa" <fayyazuddin@gmail.com> wrote:
>> 
>> Dear Fellow Java & Lucene developers:
>> 
>> I am a Java developer learning lucene and I am currently going through
>> the
>> book Lucene in Action.  At present, I am trying to run the sample code
>> for
>> indexing an xml document using sax.  My code has been slightly updated
>> for
>> Lucene version 2.2:
>> 
>> /*
>>  * To change this template, choose Tools | Templates
>>  * and open the template in the editor.
>>  */
>> 
>> package lucenexml;
>> 
>> 
>> import java.io.File;
>> import java.io.FileInputStream;
>> import java.io.InputStream;
>> import java.io.IOException;
>> import java.util.HashMap;
>> import java.util.Iterator;
>> 
>> import org.xml.sax.helpers.DefaultHandler;
>> import org.xml.sax.SAXException;
>> import org.xml.sax.Attributes;
>> 
>> import javax.xml.parsers.SAXParser;
>> import javax.xml.parsers.SAXParserFactory;
>> import javax.xml.parsers.ParserConfigurationException;
>> 
>> 
>> import org.apache.lucene.document.Document;
>> import org.apache.lucene.document.Field;
>> 
>> /**
>>  *
>>  * @author fayyaz
>>  */
>> public class SAXXMLHandler extends DefaultHandler implements
>> DocumentHandler{
>> 
>>     private StringBuffer elementBuffer=new StringBuffer();
>>     private HashMap attributeMap;
>>     
>>     private Document doc;
>>     /**
>>      * @param args the command line arguments
>>      */
>>     public static void main(String[] args) throws Exception {
>>         // TODO code application logic here
>>         SAXXMLHandler handler=new SAXXMLHandler();
>>         Document doc=handler.getDocument(new FileInputStream(new
>> File(args[0])));
>>         System.out.println(doc);
>>     }
>>     
>>     public Document getDocument(InputStream is) throws
>> DocumentHandlerException{
>>         
>>         SAXParserFactory spf=SAXParserFactory.newInstance();
>>         
>>         try{
>>             SAXParser parser=spf.newSAXParser();
>>             parser.parse(is, this);
>>              
>>         }
>>         catch (IOException e){
>>             throw new DocumentHandlerException("Cannot parse XML
>>             document",
>> e);
>>         }
>>         catch (ParserConfigurationException e) {
>>             throw new DocumentHandlerException("Cannot parse XML
>>             document",
>> e);
>>         }
>>         catch (SAXException e){
>>             throw new DocumentHandlerException("Cannot parse XML
>>             document",
>> e);
>>         }
>>         return doc;
>>     }
>>     
>>     public void startDocument(){
>>         doc=new Document();
>>     }
>>     
>>     public void startElement(String uri, String localName, String qName,
>> Attributes atts) throws SAXException{
>>         
>>         elementBuffer.setLength(0);
>>         attributeMap.clear();
>>         if(atts.getLength()>0){
>>             attributeMap=new HashMap();
>>             for(int i=0; i<atts.getLength(); i++){
>>                 attributeMap.put(atts.getQName(i), atts.getValue(i));
>>             }
>>         }
>>     }
>>     
>>     public void characters(char[] text, int start, int length){
>>         elementBuffer.append(text, start, length);
>>     }
>>     
>>     public void endElement(String uri, String localName, String qName)
>> throws SAXException{
>>         if(qName.equals("address-book")){
>>             return;
>>         }
>>         
>>         else if(qName.equals("contact")){
>>             Iterator iter=attributeMap.keySet().iterator();
>>             while(iter.hasNext()){
>>                 String attName=(String)iter.next();
>>                 String attValue=(String)attributeMap.get(attName);
>>                 doc.add(new Field(qName, elementBuffer.toString(),
>> Field.Store.YES,Field.Index.NO));
>>             }
>>         }
>>     }
>> }
>> 
>> 
>> However, although the code compiles, I get the following runtime error
>> when
>> I pass the file addressbook.xml (which is used in the book) as a runtime
>> argument:
>> 
>> Exception in thread "main" java.lang.NullPointerException
>>         at lucenexml.SAXXMLHandler.startElement(SAXXMLHandler.java:81)
>>         at
>>         org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown
>> Source)
>>         at
>>         org.apache.xerces.impl.dtd.XMLDTDValidator.startElement(Unknown
>> Source)
>>         at
>> org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown
>> Source)
>>         at
>> org.apache.xerces.impl.XMLDocumentScannerImpl$ContentDispatcher.scanRootElementHook(Unknown
>> Source)
>>         at
>> org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown
>> Source)
>>         at
>> org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown
>> Source)
>>         at org.apache.xerces.parsers.XML11Configuration.parse(Unknown
>> Source)
>>         at org.apache.xerces.parsers.XML11Configuration.parse(Unknown
>> Source)
>>         at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
>>         at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown
>>         Source)
>>         at
>>         org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown
>> Source)
>>         at org.apache.xerces.jaxp.SAXParserImpl.parse(Unknown Source)
>>         at javax.xml.parsers.SAXParser.parse(SAXParser.java:198)
>>         at lucenexml.SAXXMLHandler.getDocument(SAXXMLHandler.java:59)
>>         at lucenexml.SAXXMLHandler.main(SAXXMLHandler.java:49)
>> Java Result: 1
>> 
>> What am I doing wrong?  Any help would be greatly appreciated.
>> 
>> Thanks in advance.
>> Sincerely;
>> Fayyaz
>> 
>> -- 
>> View this message in context:
>> http://www.nabble.com/Error-running-Lucene-in-Action-code-tf4947242.html#a14164565
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Error-running-Lucene-in-Action-code-tf4947242.html#a14184703
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 02:46:07 2007
Return-Path: <java-user-return-31352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89353 invoked from network); 6 Dec 2007 02:46:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 02:46:07 -0000
Received: (qmail 6811 invoked by uid 500); 6 Dec 2007 02:45:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6783 invoked by uid 500); 6 Dec 2007 02:45:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6772 invoked by uid 99); 6 Dec 2007 02:45:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 05 Dec 2007 18:45:48 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 02:45:26 +0000
Received: from hop04-l1d11-si01.isus.emc.com (HOP04-L1D11-SI01.isus.emc.com [10.254.111.54])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id lB62jRbw008393
	for <java-user@lucene.apache.org>; Wed, 5 Dec 2007 21:45:27 -0500 (EST)
Received: from mailhub.lss.emc.com (nirah.lss.emc.com [10.254.144.13]) by hop04-l1d11-si01.isus.emc.com (Tablus Interceptor) for <java-user@lucene.apache.org>; Wed, 5 Dec 2007 21:45:27 -0500
Received: from corpussmtp1.corp.emc.com (corpussmtp1.corp.emc.com [128.221.10.43])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id lB62jOeu027897
	for <java-user@lucene.apache.org>; Wed, 5 Dec 2007 21:45:25 -0500 (EST)
From: Seneviratne_Yasoja@emc.com
Received: from CORPUSMX10C.corp.emc.com ([128.221.14.93]) by corpussmtp1.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 5 Dec 2007 21:05:10 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: does the MultiSearcher class calculate IDF properly?
Date: Wed, 5 Dec 2007 21:05:09 -0500
Message-ID: <8856DF1FF75B2348A2D4033D1E8A7EE40222A025@CORPUSMX10C.corp.emc.com>
In-Reply-To: <14184703.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: does the MultiSearcher class calculate IDF properly?
Thread-Index: Acg3p7KA10vUC49RR/qmHZNnjISovQAAtAVQ
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Dec 2007 02:05:10.0184 (UTC) FILETIME=[6E246280:01C837AC]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.8.30.51425
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Tablus-Inspected: yes
X-Tablus-Classifications: public
X-Tablus-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

I tried the following.  Creating 2 different indexes, search each
individually and print score details and compare to searching both
indexes with MulitSearcher and printing score details. =20

The "docFreq" value printed don't seem right - is this just a problem
with using Explain together with the MultiSearcher?


Code is like:
MultiSearcher multi =3D new MultiSearcher(searchables);
Hits hits =3D multi.search(query);
for(int i=3D0; i<hits.length(); i++)
{
  Explanation expl =3D multi.explain(query, hits.id(i));
  System.out.println(expl.toString());
}


Output:
id =3D 14 score =3D 0.071
0.07073946 =3D (MATCH) fieldWeight(contents:climate in 2), product of:
  1.0 =3D tf(termFreq(contents:climate)=3D1)
  1.8109303 =3D idf(docFreq=3D1)
  0.0390625 =3D fieldNorm(field=3Dcontents, doc=3D2)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 09:49:15 2007
Return-Path: <java-user-return-31353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25304 invoked from network); 6 Dec 2007 09:49:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 09:49:15 -0000
Received: (qmail 27015 invoked by uid 500); 6 Dec 2007 09:48:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26986 invoked by uid 500); 6 Dec 2007 09:48:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26975 invoked by uid 99); 6 Dec 2007 09:48:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 01:48:56 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 09:48:33 +0000
Received: by ug-out-1314.google.com with SMTP id u40so616691ugc
        for <java-user@lucene.apache.org>; Thu, 06 Dec 2007 01:48:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=xDAozHAuFtmHDcPeKYk5zEvNjqLmKn62bLVwyFNMlpU=;
        b=grLPkZXlzpH4qEnL3cy+Mw3NqhxOPdn7Wn7i4vr2vrB9rqHxfS/UzfZymeK8fJkjNCynAQcwAsU1TxqshveUwZl3bnebvhsiW5/W1J0F67gRYw0B80qNdNtmqB1Q50W/M+l28OOw/D29AXst5WmqLIPRjh/nU1zYtw2YA3+L1xA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=Gc6GZWv5oHNk6Fq2UCmRXfyhqgwIMKgPhUldYXbSWeAW73/S+4uAh7Hz2TSjYi5UbXNZsXwP9uOaG5HDCviDPvtXPS2CGVyU5wfGGjGeI9jte0WbAreVq6DQNiuUPGHjdjJz2CkZAw2jyWwVYfbNwhRB7+ZjVr4+Z5IMDw71KAc=
Received: by 10.67.115.2 with SMTP id s2mr1201146ugm.1196934514192;
        Thu, 06 Dec 2007 01:48:34 -0800 (PST)
Received: from ?10.0.111.100? ( [202.125.143.66])
        by mx.google.com with ESMTPS id 32sm366531ugf.2007.12.06.01.48.29
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 06 Dec 2007 01:48:33 -0800 (PST)
Message-ID: <4757C563.5040209@gmail.com>
Date: Thu, 06 Dec 2007 14:48:19 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Errors while running LIA code.
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi

I am trying to run a code from Lucene In Action, but it generate some 
errors.There is one one warning at compilation time and the errors 
generate at run time. Given below the code and errors. Kindly give me 
some clue. thanks...

*_Code:_*

///package lia.handlingtypes.xml;
import lia.handlingtypes.framework.DocumentHandler;
import lia.handlingtypes.framework.DocumentHandlerException;
import org.xml.sax.helpers.DefaultHandler;
import org.xml.sax.SAXException;
import org.xml.sax.Attributes;
import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;
import javax.xml.parsers.ParserConfigurationException;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.io.FileInputStream;
import java.util.Iterator;
import java.util.HashMap;

public class SAXXMLHandler
  extends DefaultHandler implements DocumentHandler {

  /** A buffer for each XML element */
  private StringBuffer elementBuffer = new StringBuffer();
  private HashMap attributeMap;

  private Document doc;

  public Document getDocument(InputStream is)
    throws DocumentHandlerException {

    SAXParserFactory spf = SAXParserFactory.newInstance();
    try {
      SAXParser parser = spf.newSAXParser();
      parser.parse(is, this);
    }
    catch (IOException e) {
      throw new DocumentHandlerException(
        "Cannot parse XML document", e);
    }
    catch (ParserConfigurationException e) {
      throw new DocumentHandlerException(
        "Cannot parse XML document", e);
    }
    catch (SAXException e) {
      throw new DocumentHandlerException(
        "Cannot parse XML document", e);
    }

    return doc;
  }

  public void startDocument() {
    doc = new Document();
  }

  public void startElement(String uri, String localName,
    String qName, Attributes atts)
    throws SAXException {

    elementBuffer.setLength(0);
    attributeMap.clear();
    if (atts.getLength() > 0) {
      attributeMap = new HashMap();
      for (int i = 0; i < atts.getLength(); i++) {
        attributeMap.put(atts.getQName(i), atts.getValue(i));
      }
    }
  }

  public void characters(char[] text, int start, int length) {
    elementBuffer.append(text, start, length);
  }

  public void endElement(String uri, String localName, String qName)
    throws SAXException {
    if (qName.equals("address-book")) {
      return;
    }
    else if (qName.equals("contact")) {
      Iterator iter = attributeMap.keySet().iterator();
      while (iter.hasNext()) {
        String attName = (String) iter.next();
        String attValue = (String) attributeMap.get(attName);
        doc.add(new Field(attName, 
attValue,Field.Store.YES,Field.Index.TOKENIZED));
      }
    }
    else {
      doc.add(new Field(qName, 
elementBuffer.toString(),Field.Store.YES,Field.Index.TOKENIZED));
    }
  }

  public static void main(String args[]) throws Exception {
    SAXXMLHandler handler = new SAXXMLHandler();

    //File file = new File ("d:\\addressbook.xml");

    Document doc = handler.getDocument(new FileInputStream(new 
File(args[0])));

    //Document doc = handler.getDocument(new FileInputStream(file));

    System.out.println(doc);
  }
}
/

_*Errors:

*_/D:\>java SAXXMLHandler d:\addressbook.xml

Exception in thread "main" java.lang.NullPointerException
        at SAXXMLHandler.startElement(SAXXMLHandler.java:66)
        at 
com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startEle
ment(Unknown Source)
        at 
com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.startElem
ent(Unknown Source)
        at 
com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
l.scanStartElement(Unknown Source)
        at 
com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$Conten
tDriver.scanRootElementHook(Unknown Source)
        at 
com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
l$FragmentContentDriver.next(Unknown Source)
        at 
com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$Prolog
Driver.next(Unknown Source)
        at 
com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(U
nknown Source)
        at 
com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
l.scanDocument(Unknown Source)
        at 
com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(U
nknown Source)
        at 
com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(U
nknown Source)
        at 
com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown So
urce)
        at 
com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Un
known Source)
        at 
com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.p
arse(Unknown Source)
        at javax.xml.parsers.SAXParser.parse(Unknown Source)
        at javax.xml.parsers.SAXParser.parse(Unknown Source)
        at SAXXMLHandler.getDocument(SAXXMLHandler.java:39)
        at SAXXMLHandler.main(SAXXMLHandler.java:102)
/_*
*_

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 09:53:22 2007
Return-Path: <java-user-return-31354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26443 invoked from network); 6 Dec 2007 09:53:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 09:53:22 -0000
Received: (qmail 30572 invoked by uid 500); 6 Dec 2007 09:53:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30534 invoked by uid 500); 6 Dec 2007 09:53:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30523 invoked by uid 99); 6 Dec 2007 09:53:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 01:53:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [66.111.4.27] (HELO out3.smtp.messagingengine.com) (66.111.4.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 09:52:41 +0000
Received: from compute1.internal (compute1.internal [10.202.2.41])
	by out1.messagingengine.com (Postfix) with ESMTP id EAB9665774
	for <java-user@lucene.apache.org>; Thu,  6 Dec 2007 04:52:42 -0500 (EST)
Received: from web8.messagingengine.com ([10.202.2.217])
  by compute1.internal (MEProxy); Thu, 06 Dec 2007 04:52:42 -0500
Received: by web8.messagingengine.com (Postfix, from userid 99)
	id D22173D32D; Thu,  6 Dec 2007 04:52:42 -0500 (EST)
Message-Id: <1196934762.20350.1225117151@webmail.messagingengine.com>
X-Sasl-Enc: qJpcFuBjLs4H9dnXXS+o4oha6CsZWAUR2BFhfyf+0MYC 1196934762
From: "Michael McCandless" <lucene@mikemccandless.com>
To: java-user@lucene.apache.org
Content-Disposition: inline
Content-Transfer-Encoding: 7bit
Content-Type: text/plain; charset="ISO-8859-1"
MIME-Version: 1.0
X-Mailer: MessagingEngine.com Webmail Interface
References: <4757C563.5040209@gmail.com>
Subject: Re: Errors while running LIA code.
In-Reply-To: <4757C563.5040209@gmail.com>
Date: Thu, 06 Dec 2007 04:52:42 -0500
X-Virus-Checked: Checked by ClamAV on apache.org


See this thread for one suggestion:

    http://www.gossamer-threads.com/lists/lucene/java-user/55465

Mike

"Liaqat Ali" <liaqatalimian@gmail.com> wrote:
> Hi
> 
> I am trying to run a code from Lucene In Action, but it generate some 
> errors.There is one one warning at compilation time and the errors 
> generate at run time. Given below the code and errors. Kindly give me 
> some clue. thanks...
> 
> *_Code:_*
> 
> ///package lia.handlingtypes.xml;
> import lia.handlingtypes.framework.DocumentHandler;
> import lia.handlingtypes.framework.DocumentHandlerException;
> import org.xml.sax.helpers.DefaultHandler;
> import org.xml.sax.SAXException;
> import org.xml.sax.Attributes;
> import javax.xml.parsers.SAXParser;
> import javax.xml.parsers.SAXParserFactory;
> import javax.xml.parsers.ParserConfigurationException;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
> import java.io.File;
> import java.io.IOException;
> import java.io.InputStream;
> import java.io.FileInputStream;
> import java.util.Iterator;
> import java.util.HashMap;
> 
> public class SAXXMLHandler
>   extends DefaultHandler implements DocumentHandler {
> 
>   /** A buffer for each XML element */
>   private StringBuffer elementBuffer = new StringBuffer();
>   private HashMap attributeMap;
> 
>   private Document doc;
> 
>   public Document getDocument(InputStream is)
>     throws DocumentHandlerException {
> 
>     SAXParserFactory spf = SAXParserFactory.newInstance();
>     try {
>       SAXParser parser = spf.newSAXParser();
>       parser.parse(is, this);
>     }
>     catch (IOException e) {
>       throw new DocumentHandlerException(
>         "Cannot parse XML document", e);
>     }
>     catch (ParserConfigurationException e) {
>       throw new DocumentHandlerException(
>         "Cannot parse XML document", e);
>     }
>     catch (SAXException e) {
>       throw new DocumentHandlerException(
>         "Cannot parse XML document", e);
>     }
> 
>     return doc;
>   }
> 
>   public void startDocument() {
>     doc = new Document();
>   }
> 
>   public void startElement(String uri, String localName,
>     String qName, Attributes atts)
>     throws SAXException {
> 
>     elementBuffer.setLength(0);
>     attributeMap.clear();
>     if (atts.getLength() > 0) {
>       attributeMap = new HashMap();
>       for (int i = 0; i < atts.getLength(); i++) {
>         attributeMap.put(atts.getQName(i), atts.getValue(i));
>       }
>     }
>   }
> 
>   public void characters(char[] text, int start, int length) {
>     elementBuffer.append(text, start, length);
>   }
> 
>   public void endElement(String uri, String localName, String qName)
>     throws SAXException {
>     if (qName.equals("address-book")) {
>       return;
>     }
>     else if (qName.equals("contact")) {
>       Iterator iter = attributeMap.keySet().iterator();
>       while (iter.hasNext()) {
>         String attName = (String) iter.next();
>         String attValue = (String) attributeMap.get(attName);
>         doc.add(new Field(attName, 
> attValue,Field.Store.YES,Field.Index.TOKENIZED));
>       }
>     }
>     else {
>       doc.add(new Field(qName, 
> elementBuffer.toString(),Field.Store.YES,Field.Index.TOKENIZED));
>     }
>   }
> 
>   public static void main(String args[]) throws Exception {
>     SAXXMLHandler handler = new SAXXMLHandler();
> 
>     //File file = new File ("d:\\addressbook.xml");
> 
>     Document doc = handler.getDocument(new FileInputStream(new 
> File(args[0])));
> 
>     //Document doc = handler.getDocument(new FileInputStream(file));
> 
>     System.out.println(doc);
>   }
> }
> /
> 
> _*Errors:
> 
> *_/D:\>java SAXXMLHandler d:\addressbook.xml
> 
> Exception in thread "main" java.lang.NullPointerException
>         at SAXXMLHandler.startElement(SAXXMLHandler.java:66)
>         at 
> com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startEle
> ment(Unknown Source)
>         at 
> com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.startElem
> ent(Unknown Source)
>         at 
> com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
> l.scanStartElement(Unknown Source)
>         at 
> com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$Conten
> tDriver.scanRootElementHook(Unknown Source)
>         at 
> com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
> l$FragmentContentDriver.next(Unknown Source)
>         at 
> com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$Prolog
> Driver.next(Unknown Source)
>         at 
> com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(U
> nknown Source)
>         at 
> com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
> l.scanDocument(Unknown Source)
>         at 
> com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(U
> nknown Source)
>         at 
> com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(U
> nknown Source)
>         at 
> com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown So
> urce)
>         at 
> com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Un
> known Source)
>         at 
> com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.p
> arse(Unknown Source)
>         at javax.xml.parsers.SAXParser.parse(Unknown Source)
>         at javax.xml.parsers.SAXParser.parse(Unknown Source)
>         at SAXXMLHandler.getDocument(SAXXMLHandler.java:39)
>         at SAXXMLHandler.main(SAXXMLHandler.java:102)
> /_*
> *_
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 10:07:11 2007
Return-Path: <java-user-return-31355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29722 invoked from network); 6 Dec 2007 10:07:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 10:07:10 -0000
Received: (qmail 43394 invoked by uid 500); 6 Dec 2007 10:06:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42948 invoked by uid 500); 6 Dec 2007 10:06:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42937 invoked by uid 99); 6 Dec 2007 10:06:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 02:06:53 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 10:06:29 +0000
Received: by ug-out-1314.google.com with SMTP id u40so618768ugc
        for <java-user@lucene.apache.org>; Thu, 06 Dec 2007 02:06:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=gWXiGQnIx+cULmY5e1LVZVawgJpj7Kz/kIIbwroFjGE=;
        b=MC7Ei6Zj55HKIoN5EBJNnyT8aqtEu3R/P307oLvw5s7Ns3LQQO1RUaLG0r9lZjdMtkRxWCFxpNBGavRuvfqd7ei81KvBC1flkRxbs0jS83pg3AgVeVqCaZb0yxNy6IoNQyfSi6ljdclm6C7DIOH3Wish9nUP7KY47kmVXbfmqaw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ZzHBn5K8tcHL/yoDVEh2UWXq1tSMXd9R0HX8FYtwdHsbHcvhYg54kbc5C1FKClYtyh/GYun+mOTfhM4Hfvv7glrCvsQh1g+a/hWr7x1TLUMq2uKnaswo+5xmJ0E2tY7REhDWUXKh++kOtHZbljjQJp2Cs/vywa8lr9YfiiYFTtU=
Received: by 10.67.115.19 with SMTP id s19mr802279ugm.1196935588716;
        Thu, 06 Dec 2007 02:06:28 -0800 (PST)
Received: from ?10.0.111.100? ( [202.125.143.66])
        by mx.google.com with ESMTPS id r38sm1725432ugc.2007.12.06.02.06.18
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 06 Dec 2007 02:06:27 -0800 (PST)
Message-ID: <4757C989.8020101@gmail.com>
Date: Thu, 06 Dec 2007 15:06:01 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Errors while running LIA code.
References: <4757C563.5040209@gmail.com> <1196934762.20350.1225117151@webmail.messagingengine.com>
In-Reply-To: <1196934762.20350.1225117151@webmail.messagingengine.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
> See this thread for one suggestion:
>
>     http://www.gossamer-threads.com/lists/lucene/java-user/55465
>
> Mike
>
> "Liaqat Ali" <liaqatalimian@gmail.com> wrote:
>   
>> Hi
>>
>> I am trying to run a code from Lucene In Action, but it generate some 
>> errors.There is one one warning at compilation time and the errors 
>> generate at run time. Given below the code and errors. Kindly give me 
>> some clue. thanks...
>>
>> *_Code:_*
>>
>> ///package lia.handlingtypes.xml;
>> import lia.handlingtypes.framework.DocumentHandler;
>> import lia.handlingtypes.framework.DocumentHandlerException;
>> import org.xml.sax.helpers.DefaultHandler;
>> import org.xml.sax.SAXException;
>> import org.xml.sax.Attributes;
>> import javax.xml.parsers.SAXParser;
>> import javax.xml.parsers.SAXParserFactory;
>> import javax.xml.parsers.ParserConfigurationException;
>> import org.apache.lucene.document.Document;
>> import org.apache.lucene.document.Field;
>> import java.io.File;
>> import java.io.IOException;
>> import java.io.InputStream;
>> import java.io.FileInputStream;
>> import java.util.Iterator;
>> import java.util.HashMap;
>>
>> public class SAXXMLHandler
>>   extends DefaultHandler implements DocumentHandler {
>>
>>   /** A buffer for each XML element */
>>   private StringBuffer elementBuffer = new StringBuffer();
>>   private HashMap attributeMap;
>>
>>   private Document doc;
>>
>>   public Document getDocument(InputStream is)
>>     throws DocumentHandlerException {
>>
>>     SAXParserFactory spf = SAXParserFactory.newInstance();
>>     try {
>>       SAXParser parser = spf.newSAXParser();
>>       parser.parse(is, this);
>>     }
>>     catch (IOException e) {
>>       throw new DocumentHandlerException(
>>         "Cannot parse XML document", e);
>>     }
>>     catch (ParserConfigurationException e) {
>>       throw new DocumentHandlerException(
>>         "Cannot parse XML document", e);
>>     }
>>     catch (SAXException e) {
>>       throw new DocumentHandlerException(
>>         "Cannot parse XML document", e);
>>     }
>>
>>     return doc;
>>   }
>>
>>   public void startDocument() {
>>     doc = new Document();
>>   }
>>
>>   public void startElement(String uri, String localName,
>>     String qName, Attributes atts)
>>     throws SAXException {
>>
>>     elementBuffer.setLength(0);
>>     attributeMap.clear();
>>     if (atts.getLength() > 0) {
>>       attributeMap = new HashMap();
>>       for (int i = 0; i < atts.getLength(); i++) {
>>         attributeMap.put(atts.getQName(i), atts.getValue(i));
>>       }
>>     }
>>   }
>>
>>   public void characters(char[] text, int start, int length) {
>>     elementBuffer.append(text, start, length);
>>   }
>>
>>   public void endElement(String uri, String localName, String qName)
>>     throws SAXException {
>>     if (qName.equals("address-book")) {
>>       return;
>>     }
>>     else if (qName.equals("contact")) {
>>       Iterator iter = attributeMap.keySet().iterator();
>>       while (iter.hasNext()) {
>>         String attName = (String) iter.next();
>>         String attValue = (String) attributeMap.get(attName);
>>         doc.add(new Field(attName, 
>> attValue,Field.Store.YES,Field.Index.TOKENIZED));
>>       }
>>     }
>>     else {
>>       doc.add(new Field(qName, 
>> elementBuffer.toString(),Field.Store.YES,Field.Index.TOKENIZED));
>>     }
>>   }
>>
>>   public static void main(String args[]) throws Exception {
>>     SAXXMLHandler handler = new SAXXMLHandler();
>>
>>     //File file = new File ("d:\\addressbook.xml");
>>
>>     Document doc = handler.getDocument(new FileInputStream(new 
>> File(args[0])));
>>
>>     //Document doc = handler.getDocument(new FileInputStream(file));
>>
>>     System.out.println(doc);
>>   }
>> }
>> /
>>
>> _*Errors:
>>
>> *_/D:\>java SAXXMLHandler d:\addressbook.xml
>>
>> Exception in thread "main" java.lang.NullPointerException
>>         at SAXXMLHandler.startElement(SAXXMLHandler.java:66)
>>         at 
>> com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startEle
>> ment(Unknown Source)
>>         at 
>> com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.startElem
>> ent(Unknown Source)
>>         at 
>> com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
>> l.scanStartElement(Unknown Source)
>>         at 
>> com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$Conten
>> tDriver.scanRootElementHook(Unknown Source)
>>         at 
>> com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
>> l$FragmentContentDriver.next(Unknown Source)
>>         at 
>> com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$Prolog
>> Driver.next(Unknown Source)
>>         at 
>> com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(U
>> nknown Source)
>>         at 
>> com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImp
>> l.scanDocument(Unknown Source)
>>         at 
>> com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(U
>> nknown Source)
>>         at 
>> com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(U
>> nknown Source)
>>         at 
>> com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown So
>> urce)
>>         at 
>> com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(Un
>> known Source)
>>         at 
>> com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.p
>> arse(Unknown Source)
>>         at javax.xml.parsers.SAXParser.parse(Unknown Source)
>>         at javax.xml.parsers.SAXParser.parse(Unknown Source)
>>         at SAXXMLHandler.getDocument(SAXXMLHandler.java:39)
>>         at SAXXMLHandler.main(SAXXMLHandler.java:102)
>> /_*
>> *_
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>     
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>   
Hello, Still facing the same problem after making the suggested change.  
What would be a solution for this?

Liaqat

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 14:15:17 2007
Return-Path: <java-user-return-31356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6212 invoked from network); 6 Dec 2007 14:15:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 14:15:17 -0000
Received: (qmail 24008 invoked by uid 500); 6 Dec 2007 14:14:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23964 invoked by uid 500); 6 Dec 2007 14:14:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23952 invoked by uid 99); 6 Dec 2007 14:14:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 06:14:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 14:14:35 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9325E30EFC1A; Thu,  6 Dec 2007 07:14:37 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-209-44.dyn.embarqhsd.net [71.53.209.44])
	by ehatchersolutions.com (Postfix) with ESMTP id CC52930EFC16
	for <java-user@lucene.apache.org>; Thu,  6 Dec 2007 07:14:32 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <4757C989.8020101@gmail.com>
References: <4757C563.5040209@gmail.com> <1196934762.20350.1225117151@webmail.messagingengine.com> <4757C989.8020101@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7772B4DD-DF50-4994-BAC5-68D118FE8C0C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Errors while running LIA code.
Date: Thu, 6 Dec 2007 09:13:47 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.7 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1

Wow, sure enough there is a bug in LIA's SAXXMLHandler!   After all  
these years!   We did not have it registered to run by default in the  
examples - it uses the Digester implementation instead of SAX.

Mike's suggested fix works fine for me, changing the attributeMap  
declaration to be this:

   private HashMap attributeMap = new HashMap();

Here's how I ran this:

   1) Downloaded http://www.ehatchersolutions.com/downloads/ 
LuceneInAction.zip - sorry, lucenebook.com is broken at the moment :(

   2) Unzipped it, ran "ant" to build the base indexes.  Ran "ant  
test" to verify all was working fine.

   3) Ran "ant ExtensionHandler" to run the handling test, and put in  
"src/lia/handlingtypes/data/addressbook.xml".   That works because  
the XML handler is set to Digester.  If you change src/lia/ 
handlingtypes/framework/handler.properties to have

    xml  = lia.handlingtypes.xml.SAXXMLHandler

instead, it'll fail until you add the above "new HashMap()" to the mix.

	Erik

p.s. Otis!!!!!!  :)


On Dec 6, 2007, at 5:06 AM, Liaqat Ali wrote:

> Michael McCandless wrote:
>> See this thread for one suggestion:
>>
>>     http://www.gossamer-threads.com/lists/lucene/java-user/55465
>>
>> Mike
>>
>> "Liaqat Ali" <liaqatalimian@gmail.com> wrote:
>>
>>> Hi
>>>
>>> I am trying to run a code from Lucene In Action, but it generate  
>>> some errors.There is one one warning at compilation time and the  
>>> errors generate at run time. Given below the code and errors.  
>>> Kindly give me some clue. thanks...
>>>
>>> *_Code:_*
>>>
>>> ///package lia.handlingtypes.xml;
>>> import lia.handlingtypes.framework.DocumentHandler;
>>> import lia.handlingtypes.framework.DocumentHandlerException;
>>> import org.xml.sax.helpers.DefaultHandler;
>>> import org.xml.sax.SAXException;
>>> import org.xml.sax.Attributes;
>>> import javax.xml.parsers.SAXParser;
>>> import javax.xml.parsers.SAXParserFactory;
>>> import javax.xml.parsers.ParserConfigurationException;
>>> import org.apache.lucene.document.Document;
>>> import org.apache.lucene.document.Field;
>>> import java.io.File;
>>> import java.io.IOException;
>>> import java.io.InputStream;
>>> import java.io.FileInputStream;
>>> import java.util.Iterator;
>>> import java.util.HashMap;
>>>
>>> public class SAXXMLHandler
>>>   extends DefaultHandler implements DocumentHandler {
>>>
>>>   /** A buffer for each XML element */
>>>   private StringBuffer elementBuffer = new StringBuffer();
>>>   private HashMap attributeMap;
>>>
>>>   private Document doc;
>>>
>>>   public Document getDocument(InputStream is)
>>>     throws DocumentHandlerException {
>>>
>>>     SAXParserFactory spf = SAXParserFactory.newInstance();
>>>     try {
>>>       SAXParser parser = spf.newSAXParser();
>>>       parser.parse(is, this);
>>>     }
>>>     catch (IOException e) {
>>>       throw new DocumentHandlerException(
>>>         "Cannot parse XML document", e);
>>>     }
>>>     catch (ParserConfigurationException e) {
>>>       throw new DocumentHandlerException(
>>>         "Cannot parse XML document", e);
>>>     }
>>>     catch (SAXException e) {
>>>       throw new DocumentHandlerException(
>>>         "Cannot parse XML document", e);
>>>     }
>>>
>>>     return doc;
>>>   }
>>>
>>>   public void startDocument() {
>>>     doc = new Document();
>>>   }
>>>
>>>   public void startElement(String uri, String localName,
>>>     String qName, Attributes atts)
>>>     throws SAXException {
>>>
>>>     elementBuffer.setLength(0);
>>>     attributeMap.clear();
>>>     if (atts.getLength() > 0) {
>>>       attributeMap = new HashMap();
>>>       for (int i = 0; i < atts.getLength(); i++) {
>>>         attributeMap.put(atts.getQName(i), atts.getValue(i));
>>>       }
>>>     }
>>>   }
>>>
>>>   public void characters(char[] text, int start, int length) {
>>>     elementBuffer.append(text, start, length);
>>>   }
>>>
>>>   public void endElement(String uri, String localName, String qName)
>>>     throws SAXException {
>>>     if (qName.equals("address-book")) {
>>>       return;
>>>     }
>>>     else if (qName.equals("contact")) {
>>>       Iterator iter = attributeMap.keySet().iterator();
>>>       while (iter.hasNext()) {
>>>         String attName = (String) iter.next();
>>>         String attValue = (String) attributeMap.get(attName);
>>>         doc.add(new Field(attName,  
>>> attValue,Field.Store.YES,Field.Index.TOKENIZED));
>>>       }
>>>     }
>>>     else {
>>>       doc.add(new Field(qName, elementBuffer.toString 
>>> (),Field.Store.YES,Field.Index.TOKENIZED));
>>>     }
>>>   }
>>>
>>>   public static void main(String args[]) throws Exception {
>>>     SAXXMLHandler handler = new SAXXMLHandler();
>>>
>>>     //File file = new File ("d:\\addressbook.xml");
>>>
>>>     Document doc = handler.getDocument(new FileInputStream(new  
>>> File(args[0])));
>>>
>>>     //Document doc = handler.getDocument(new FileInputStream(file));
>>>
>>>     System.out.println(doc);
>>>   }
>>> }
>>> /
>>>
>>> _*Errors:
>>>
>>> *_/D:\>java SAXXMLHandler d:\addressbook.xml
>>>
>>> Exception in thread "main" java.lang.NullPointerException
>>>         at SAXXMLHandler.startElement(SAXXMLHandler.java:66)
>>>         at  
>>> com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.startEl 
>>> e
>>> ment(Unknown Source)
>>>         at  
>>> com.sun.org.apache.xerces.internal.impl.dtd.XMLDTDValidator.startEle 
>>> m
>>> ent(Unknown Source)
>>>         at  
>>> com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerIm 
>>> p
>>> l.scanStartElement(Unknown Source)
>>>         at  
>>> com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl 
>>> $Conten
>>> tDriver.scanRootElementHook(Unknown Source)
>>>         at  
>>> com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerIm 
>>> p
>>> l$FragmentContentDriver.next(Unknown Source)
>>>         at  
>>> com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl 
>>> $Prolog
>>> Driver.next(Unknown Source)
>>>         at  
>>> com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next( 
>>> U
>>> nknown Source)
>>>         at  
>>> com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerIm 
>>> p
>>> l.scanDocument(Unknown Source)
>>>         at  
>>> com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse( 
>>> U
>>> nknown Source)
>>>         at  
>>> com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse( 
>>> U
>>> nknown Source)
>>>         at  
>>> com.sun.org.apache.xerces.internal.parsers.XMLParser.parse 
>>> (Unknown So
>>> urce)
>>>         at  
>>> com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse 
>>> (Un
>>> known Source)
>>>         at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl 
>>> $JAXPSAXParser.p
>>> arse(Unknown Source)
>>>         at javax.xml.parsers.SAXParser.parse(Unknown Source)
>>>         at javax.xml.parsers.SAXParser.parse(Unknown Source)
>>>         at SAXXMLHandler.getDocument(SAXXMLHandler.java:39)
>>>         at SAXXMLHandler.main(SAXXMLHandler.java:102)
>>> /_*
>>> *_
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
> Hello, Still facing the same problem after making the suggested  
> change.  What would be a solution for this?
>
> Liaqat
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 15:25:40 2007
Return-Path: <java-user-return-31357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36739 invoked from network); 6 Dec 2007 15:25:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 15:25:40 -0000
Received: (qmail 34353 invoked by uid 500); 6 Dec 2007 15:25:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34328 invoked by uid 500); 6 Dec 2007 15:25:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34317 invoked by uid 99); 6 Dec 2007 15:25:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 07:25:23 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.150 as permitted sender)
Received: from [195.212.29.150] (HELO mtagate1.de.ibm.com) (195.212.29.150)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 15:24:59 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate1.de.ibm.com (8.13.8/8.13.8) with ESMTP id lB6FP0Kr072116
	for <java-user@lucene.apache.org>; Thu, 6 Dec 2007 15:25:00 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id lB6FOxtW2412744
	for <java-user@lucene.apache.org>; Thu, 6 Dec 2007 16:24:59 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id lB6FOx00015416
	for <java-user@lucene.apache.org>; Thu, 6 Dec 2007 16:24:59 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id lB6FOxiO015413
	for <java-user@lucene.apache.org>; Thu, 6 Dec 2007 16:24:59 +0100
In-Reply-To: <7772B4DD-DF50-4994-BAC5-68D118FE8C0C@ehatchersolutions.com>
Subject: Re: Errors while running LIA code.
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFA230B865.537C79B8-ONC22573A9.00546287-C22573A9.00548CCA@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Thu, 6 Dec 2007 17:23:30 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 8.0|August 02, 2007) at 06/12/2007
 17:24:58
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

>    1) Downloaded http://www.ehatchersolutions.com/downloads/
> LuceneInAction.zip - sorry, lucenebook.com is broken at the moment :(

This one works too -
http://www.manning.com/hatcher2/ --> Downloads --> Source Code


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 17:44:36 2007
Return-Path: <java-user-return-31358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84732 invoked from network); 6 Dec 2007 17:44:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 17:44:36 -0000
Received: (qmail 5216 invoked by uid 500); 6 Dec 2007 17:44:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5190 invoked by uid 500); 6 Dec 2007 17:44:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5170 invoked by uid 99); 6 Dec 2007 17:44:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 09:44:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of NBEYER@cerner.com designates 159.140.213.228 as permitted sender)
Received: from [159.140.213.228] (HELO mail01.cerner.com) (159.140.213.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 17:43:56 +0000
Received: from msbhwhq03.northamerica.cerner.net (msbhwhq03.cerner.com [10.160.16.183])
	by mail01.cerner.com (8.13.8/8.13.8) with ESMTP id lB6HhtP6026366
	for <java-user@lucene.apache.org>; Thu, 6 Dec 2007 11:43:56 -0600
Received: from MAIL05.northamerica.cerner.net ([10.160.16.178]) by msbhwhq03.northamerica.cerner.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 6 Dec 2007 11:43:55 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
x-cr-hashedpuzzle: Absh AhyX AtY1 BXsQ E/UA FHDw FMK+ GSnH H8SX IoFN Ita3 I9NM JXRM J9Tn LgIf Lgmt;1;agBhAHYAYQAtAHUAcwBlAHIAQABsAHUAYwBlAG4AZQAuAGEAcABhAGMAaABlAC4AbwByAGcA;Sosha1_v1;7;{0ABF9785-D320-49A3-B82C-4F35323F0735};bgBiAGUAeQBlAHIAQABjAGUAcgBuAGUAcgAuAGMAbwBtAA==;Thu, 06 Dec 2007 17:43:15 GMT;YgBlAHMAdAAgAHAAcgBhAGMAdABpAGMAZQBzACAAZgBvAHIAIAByAGUAbABvAGEAZABpAG4AZwAgAGEAbgAgAGkAbgBkAGUAeAAgAGYAbwByACAAYQAgAHMAZQBhAHIAYwBoAGUAcgA=
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
x-cr-puzzleid: {0ABF9785-D320-49A3-B82C-4F35323F0735}
Content-class: urn:content-classes:message
Subject: best practices for reloading an index for a searcher
Date: Thu, 6 Dec 2007 11:43:15 -0600
Message-ID: <99833356D526854CAF8ECF4D7C769D49BBDAA1@MAIL05.northamerica.cerner.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: best practices for reloading an index for a searcher
Thread-Index: Acg4L3sPtznQXdVnQWS6nVLyvzTA3w==
From: "Beyer,Nathan" <NBEYER@CERNER.COM>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Dec 2007 17:43:55.0804 (UTC) FILETIME=[92D3EDC0:01C8382F]
X-Proofpoint-Virus-Version: vendor=fsecure engine=4.65.5502:2.3.11,1.2.37,4.0.164 definitions=2007-12-06_01:2007-11-28,2007-12-06,2007-12-06 signatures=0
X-Virus-Checked: Checked by ClamAV on apache.org

I did some searching on the lucene site and wiki, but didn't quite find
what I was looking for in regards to a basic approach to how and when to
reload index data. I have a long running process that will be
continually indexing and concurrently searching the same index and I'm
looking for a basic approach to reloading the data for the searcher.
Perhaps I should verify that the data does need to be reloaded. Does a
manual reload of a changing index need to be performed for a searcher?

I'd appreciate any links to documents, source or some quick pseudo code.

Thanks.

-Nathan

----------------------------------------------------------------------
CONFIDENTIALITY NOTICE This message and any included attachments are from C=
erner Corporation and are intended only for the addressee. The information =
contained in this message is confidential and may constitute inside or non-=
public information under international, federal, or state securities laws. =
Unauthorized forwarding, printing, copying, distribution, or use of such in=
formation is strictly prohibited and may be unlawful. If you are not the ad=
dressee, please promptly delete this message and notify the sender of the d=
elivery error by e-mail or you may call Cerner's corporate offices in Kansa=
s City, Missouri, U.S.A at (+1) (816)221-1024.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 18:10:23 2007
Return-Path: <java-user-return-31359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91896 invoked from network); 6 Dec 2007 18:10:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 18:10:23 -0000
Received: (qmail 54074 invoked by uid 500); 6 Dec 2007 18:10:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54041 invoked by uid 500); 6 Dec 2007 18:10:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54030 invoked by uid 99); 6 Dec 2007 18:10:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 10:10:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 18:09:43 +0000
Received: by mu-out-0910.google.com with SMTP id i10so27111mue
        for <java-user@lucene.apache.org>; Thu, 06 Dec 2007 10:09:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=plS9ElVFwoMpT5jM9nb3tr1/9Vp+fvVfd8ncoU9bt/E=;
        b=R6jm/V183f4ilfHQ4qb1NpaFUyNwc7p7OwzyOYP7nLB00iiBxuY61a/2cwt2/JYyRWVcD6lxyAPaDDDHUb0NdKdoS4h+IQ6/8TPpUZK6UEFKoKcGETIszwhd8kplUowOpkHnDHm7I3D/nuvatlYG7MaB6M3A+FyKKKstKWSP8Yc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cQS30HoU4aSAPwzvdb+qbnKDyUAR17iUS35SvbQ1rOwihLTZbHeqMthGUZ/6L5JUCgFuCR/FZA2T9Vv9H74D418pHpZRGepzNLQFk2jN3HjDwwe0LujTQqkfO3bchAt3pa0yxpGbEaUNX1hkn+2QvnlWIgm6iS9mWK1GZ3Z5MDU=
Received: by 10.82.134.12 with SMTP id h12mr9495858bud.1196964583008;
        Thu, 06 Dec 2007 10:09:43 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Thu, 6 Dec 2007 10:09:42 -0800 (PST)
Message-ID: <359a92830712061009r636345eie217cf9cdcecb63b@mail.gmail.com>
Date: Thu, 6 Dec 2007 13:09:42 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: best practices for reloading an index for a searcher
In-Reply-To: <99833356D526854CAF8ECF4D7C769D49BBDAA1@MAIL05.northamerica.cerner.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9289_28378251.1196964582999"
References: <99833356D526854CAF8ECF4D7C769D49BBDAA1@MAIL05.northamerica.cerner.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9289_28378251.1196964582999
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If by reload you mean closing and opening the reader, then yes. You need
to do this in order to see the changes since the *last* time you opened
the reader.

Think of it as the reader taking a snapshot of the index and using that
for its lifetime.

Be aware that opening a reader (and running the first searches) is an
expensive operation and shouldn't be done unnecessarily. I guess it
all depends upon your requirements for how soon changes are available
for search.

As for guidelines, to quote the famous wise ones.... it depends. The
real question is how quickly your users require seeing recent changes.

One technique for handling these updates is to periodically open a new
reader
*without* closing the old one. Fire a few warm-up queries at the new
searcher,
then close the old one and start using the new one. There are some
coordination issues here..... Also be aware that this will chew up some
disk space....

Hope this helps
Erick

On Dec 6, 2007 12:43 PM, Beyer,Nathan <NBEYER@cerner.com> wrote:

> I did some searching on the lucene site and wiki, but didn't quite find
> what I was looking for in regards to a basic approach to how and when to
> reload index data. I have a long running process that will be
> continually indexing and concurrently searching the same index and I'm
> looking for a basic approach to reloading the data for the searcher.
> Perhaps I should verify that the data does need to be reloaded. Does a
> manual reload of a changing index need to be performed for a searcher?
>
> I'd appreciate any links to documents, source or some quick pseudo code.
>
> Thanks.
>
> -Nathan
>
> ----------------------------------------------------------------------
> CONFIDENTIALITY NOTICE This message and any included attachments are from
> Cerner Corporation and are intended only for the addressee. The information
> contained in this message is confidential and may constitute inside or
> non-public information under international, federal, or state securities
> laws. Unauthorized forwarding, printing, copying, distribution, or use of
> such information is strictly prohibited and may be unlawful. If you are not
> the addressee, please promptly delete this message and notify the sender of
> the delivery error by e-mail or you may call Cerner's corporate offices in
> Kansas City, Missouri, U.S.A at (+1) (816)221-1024.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9289_28378251.1196964582999--

From java-user-return-31360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 19:32:36 2007
Return-Path: <java-user-return-31360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19998 invoked from network); 6 Dec 2007 19:32:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 19:32:36 -0000
Received: (qmail 66486 invoked by uid 500); 6 Dec 2007 19:32:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66451 invoked by uid 500); 6 Dec 2007 19:32:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66440 invoked by uid 99); 6 Dec 2007 19:32:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 11:32:17 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 19:31:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J0MRz-0002lr-67
	for java-user@lucene.apache.org; Thu, 06 Dec 2007 11:31:59 -0800
Message-ID: <14199255.post@talk.nabble.com>
Date: Thu, 6 Dec 2007 11:31:59 -0800 (PST)
From: java_user_ <jkraemer@cs.tufts.edu>
To: java-user@lucene.apache.org
Subject: Re: Boost One Term Query
In-Reply-To: <Pine.LNX.4.62.0712041708500.14245@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jkraemer@cs.tufts.edu
References: <14035572.post@talk.nabble.com> <Pine.LNX.4.62.0712041708500.14245@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the response Hoss.

The score I receive is from the Explaination object.  The score stays the
same regardless of how I boost the single term.

The score of the query:
apple

Is the same as the score of the query:
apple^3

I am surprised by the result of the test.  Would you expect "apple" and
"apple^3" to receive the same score?

Thanks


hossman wrote:
> 
> 
> first off: if you are looking at the score from the "Hits" class, bear in 
> mind they are "psuedo-normalized" and don't mean much.
> 
> second: a "query" doesn't have a score, a document has a score relative to 
> a query ... scores can't be compared between different queries.
> 
> third: there is a "queryNorm" that comes into play, it's designed to keep 
> scores "managable" you can read more about it (and how to change it if you 
> want) in the scoring documentation.  you should also look at the 
> "Explanation" info for each query/doc to make sure you understand what's 
> going on.
> 
> 
> 
> : For example:
> : apple
> : 
> : Has the same score as:
> : apple^3
> : 
> : But repeating the term will up the score
> : apple apple apple
> : 
> : I expected the score to go up when boosting a one term query.  Is that a
> : wrong expectation?
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Boost-One-Term-Query-tf4900128.html#a14199255
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 19:47:34 2007
Return-Path: <java-user-return-31361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27627 invoked from network); 6 Dec 2007 19:47:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 19:47:34 -0000
Received: (qmail 85324 invoked by uid 500); 6 Dec 2007 19:47:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85031 invoked by uid 500); 6 Dec 2007 19:47:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85020 invoked by uid 99); 6 Dec 2007 19:47:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 11:47:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of NBEYER@cerner.com designates 159.140.213.228 as permitted sender)
Received: from [159.140.213.228] (HELO mail01.cerner.com) (159.140.213.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 19:46:55 +0000
Received: from msbhwhq02.northamerica.cerner.net (msbhwhq02.cerner.com [10.160.16.184])
	by mail01.cerner.com (8.13.8/8.13.8) with ESMTP id lB6JkvhW025323
	for <java-user@lucene.apache.org>; Thu, 6 Dec 2007 13:46:57 -0600
Received: from MAIL05.northamerica.cerner.net ([10.160.16.178]) by msbhwhq02.northamerica.cerner.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 6 Dec 2007 13:46:57 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: best practices for reloading an index for a searcher
Date: Thu, 6 Dec 2007 13:46:51 -0600
Message-ID: <99833356D526854CAF8ECF4D7C769D49BBDB85@MAIL05.northamerica.cerner.net>
In-Reply-To: <359a92830712061009r636345eie217cf9cdcecb63b@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: best practices for reloading an index for a searcher
Thread-Index: Acg4M0KFRE+FNAPZTqK5NspR8pmBNwADSDlg
References: <99833356D526854CAF8ECF4D7C769D49BBDAA1@MAIL05.northamerica.cerner.net> <359a92830712061009r636345eie217cf9cdcecb63b@mail.gmail.com>
From: "Beyer,Nathan" <NBEYER@CERNER.COM>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 06 Dec 2007 19:46:57.0291 (UTC) FILETIME=[C28975B0:01C83840]
X-Proofpoint-Virus-Version: vendor=fsecure engine=4.65.5502:2.3.11,1.2.37,4.0.164 definitions=2007-12-06_01:2007-11-28,2007-12-06,2007-12-06 signatures=0
X-Virus-Checked: Checked by ClamAV on apache.org

That does help, thank you.

Does closing a reader, writer or searcher close the underlying
Directory? I've been operating under the assumption that it does not and
that I should be sharing the Directory instance as much as possible.

-Nathan

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com]=20
Sent: Thursday, December 06, 2007 12:10 PM
To: java-user@lucene.apache.org
Subject: Re: best practices for reloading an index for a searcher

If by reload you mean closing and opening the reader, then yes. You need
to do this in order to see the changes since the *last* time you opened
the reader.

Think of it as the reader taking a snapshot of the index and using that
for its lifetime.

Be aware that opening a reader (and running the first searches) is an
expensive operation and shouldn't be done unnecessarily. I guess it
all depends upon your requirements for how soon changes are available
for search.

As for guidelines, to quote the famous wise ones.... it depends. The
real question is how quickly your users require seeing recent changes.

One technique for handling these updates is to periodically open a new
reader
*without* closing the old one. Fire a few warm-up queries at the new
searcher,
then close the old one and start using the new one. There are some
coordination issues here..... Also be aware that this will chew up some
disk space....

Hope this helps
Erick

On Dec 6, 2007 12:43 PM, Beyer,Nathan <NBEYER@cerner.com> wrote:

> I did some searching on the lucene site and wiki, but didn't quite
find
> what I was looking for in regards to a basic approach to how and when
to
> reload index data. I have a long running process that will be
> continually indexing and concurrently searching the same index and I'm
> looking for a basic approach to reloading the data for the searcher.
> Perhaps I should verify that the data does need to be reloaded. Does a
> manual reload of a changing index need to be performed for a searcher?
>
> I'd appreciate any links to documents, source or some quick pseudo
code.
>
> Thanks.
>
> -Nathan
>

----------------------------------------------------------------------
CONFIDENTIALITY NOTICE This message and any included attachments are from C=
erner Corporation and are intended only for the addressee. The information =
contained in this message is confidential and may constitute inside or non-=
public information under international, federal, or state securities laws. =
Unauthorized forwarding, printing, copying, distribution, or use of such in=
formation is strictly prohibited and may be unlawful. If you are not the ad=
dressee, please promptly delete this message and notify the sender of the d=
elivery error by e-mail or you may call Cerner's corporate offices in Kansa=
s City, Missouri, U.S.A at (+1) (816)221-1024.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 20:00:55 2007
Return-Path: <java-user-return-31362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34226 invoked from network); 6 Dec 2007 20:00:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 20:00:55 -0000
Received: (qmail 7806 invoked by uid 500); 6 Dec 2007 20:00:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7502 invoked by uid 500); 6 Dec 2007 20:00:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7491 invoked by uid 99); 6 Dec 2007 20:00:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 12:00:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of yseeley@gmail.com designates 64.233.166.177 as permitted sender)
Received: from [64.233.166.177] (HELO py-out-1112.google.com) (64.233.166.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 20:00:17 +0000
Received: by py-out-1112.google.com with SMTP id d32so1649696pye
        for <java-user@lucene.apache.org>; Thu, 06 Dec 2007 12:00:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=qA9Q2SHG9z934Ao7wZM0TRZpNjggX8Kqdm19nnwHr/c=;
        b=rdSdbcFRiBJSO2ZXADxkTv98fiQbAmt/wex7e4P8SkOqS8g5qhPNDpZ7LH5lnoghWcugQObUzBNIqF5yechUt/OFs5kdDYnHN+AmqqyXi8CQfZIf5CvkCsCZLgpzpneOcXuDpLKmFzkMhuuv0e25XZb24IoVOYxTX66GPvzsTD0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=ahwRdlGUG0JNk3cx3xm/ojglSaNWe1ZBrCrHDlfXPoyCwAYRLgHcHnHw3TeDX/kpxEQ1vPIfG8hWNoo9pAXLNNjASykDqRiWdZrzhDfJc+n4ESwZK1pjwNItZWnsnVqH0nb/s167eeh7TcvLBQiYiKwsR0GOcHlVfl2U4PLPtaw=
Received: by 10.142.106.18 with SMTP id e18mr1898956wfc.1196971217263;
        Thu, 06 Dec 2007 12:00:17 -0800 (PST)
Received: by 10.143.165.13 with HTTP; Thu, 6 Dec 2007 12:00:17 -0800 (PST)
Message-ID: <c68e39170712061200i1420c48byd0f00e3a8e4115e9@mail.gmail.com>
Date: Thu, 6 Dec 2007 15:00:17 -0500
From: "Yonik Seeley" <yonik@apache.org>
Sender: yseeley@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Boost One Term Query
In-Reply-To: <14199255.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <14035572.post@talk.nabble.com>
	 <Pine.LNX.4.62.0712041708500.14245@radix.cryptio.net>
	 <14199255.post@talk.nabble.com>
X-Google-Sender-Auth: 7d2afd9beebb8eb4
X-Virus-Checked: Checked by ClamAV on apache.org

On Dec 6, 2007 2:31 PM, java_user_ <jkraemer@cs.tufts.edu> wrote:
> Thanks for the response Hoss.
>
> The score I receive is from the Explaination object.  The score stays the
> same regardless of how I boost the single term.
>
> The score of the query:
> apple
>
> Is the same as the score of the query:
> apple^3

This boosts apple 3 times in relation to the other query clauses.  If
there are no other query clauses, it's a bit meaningless.

> I am surprised by the result of the test.  Would you expect "apple" and
> "apple^3" to receive the same score?

Lucene does some "weighting" of the query that causes this to happen.

class Query { [...]
  /** Expert: Constructs and initializes a Weight for a top-level query. */
  public Weight weight(Searcher searcher)
    throws IOException {
    Query query = searcher.rewrite(this);
    Weight weight = query.createWeight(searcher);
    float sum = weight.sumOfSquaredWeights();
    float norm = getSimilarity(searcher).queryNorm(sum);
    weight.normalize(norm);
    return weight;
  }

Are you simply curious about this, or is it causing you a problem somehow?

-Yonik

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 20:13:37 2007
Return-Path: <java-user-return-31363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39888 invoked from network); 6 Dec 2007 20:13:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 20:13:37 -0000
Received: (qmail 33427 invoked by uid 500); 6 Dec 2007 20:13:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33398 invoked by uid 500); 6 Dec 2007 20:13:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33387 invoked by uid 99); 6 Dec 2007 20:13:19 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 12:13:19 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 20:13:20 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J0N5f-0004HG-QR
	for java-user@lucene.apache.org; Thu, 06 Dec 2007 12:12:59 -0800
Message-ID: <14200211.post@talk.nabble.com>
Date: Thu, 6 Dec 2007 12:12:59 -0800 (PST)
From: java_user_ <jkraemer@cs.tufts.edu>
To: java-user@lucene.apache.org
Subject: Re: Boost One Term Query
In-Reply-To: <c68e39170712061200i1420c48byd0f00e3a8e4115e9@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jkraemer@cs.tufts.edu
References: <14035572.post@talk.nabble.com> <Pine.LNX.4.62.0712041708500.14245@radix.cryptio.net> <14199255.post@talk.nabble.com> <c68e39170712061200i1420c48byd0f00e3a8e4115e9@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


I was hoping to boost the entire query to give the query more weight compared
to other queries.

Instead of boosting my entire query, I may just multiply the resulting score
by the weight (or something like that).



Yonik Seeley wrote:
> 
> On Dec 6, 2007 2:31 PM, java_user_ <jkraemer@cs.tufts.edu> wrote:
>> Thanks for the response Hoss.
>>
>> The score I receive is from the Explaination object.  The score stays the
>> same regardless of how I boost the single term.
>>
>> The score of the query:
>> apple
>>
>> Is the same as the score of the query:
>> apple^3
> 
> This boosts apple 3 times in relation to the other query clauses.  If
> there are no other query clauses, it's a bit meaningless.
> 
>> I am surprised by the result of the test.  Would you expect "apple" and
>> "apple^3" to receive the same score?
> 
> Lucene does some "weighting" of the query that causes this to happen.
> 
> class Query { [...]
>   /** Expert: Constructs and initializes a Weight for a top-level query.
> */
>   public Weight weight(Searcher searcher)
>     throws IOException {
>     Query query = searcher.rewrite(this);
>     Weight weight = query.createWeight(searcher);
>     float sum = weight.sumOfSquaredWeights();
>     float norm = getSimilarity(searcher).queryNorm(sum);
>     weight.normalize(norm);
>     return weight;
>   }
> 
> Are you simply curious about this, or is it causing you a problem somehow?
> 
> -Yonik
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Boost-One-Term-Query-tf4900128.html#a14200211
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 20:23:43 2007
Return-Path: <java-user-return-31364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46056 invoked from network); 6 Dec 2007 20:23:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 20:23:43 -0000
Received: (qmail 48233 invoked by uid 500); 6 Dec 2007 20:23:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47692 invoked by uid 500); 6 Dec 2007 20:23:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47681 invoked by uid 99); 6 Dec 2007 20:23:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 12:23:25 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 20:23:04 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J0NFS-0004Ze-SC
	for java-user@lucene.apache.org; Thu, 06 Dec 2007 12:23:06 -0800
Message-ID: <14200220.post@talk.nabble.com>
Date: Thu, 6 Dec 2007 12:23:06 -0800 (PST)
From: ts01 <venkat@clearwellsystems.com>
To: java-user@lucene.apache.org
Subject: Conversion from Lucene 1.4.3 API to 2.2.0 API.
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: venkat@clearwellsystems.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

With Lucene 1.4.3, we had used this constructor for Field. What is its
equivalent in Lucene 2.2.0?

  /** Constructs a String-valued Field that is tokenized and indexed,
    and is stored in the index, for return with hits. The tokens are
    generated from the reader */
  public static final Field Text(String name, String value, Reader reader) {
      Field aField = Text(name, value);
      aField.readerValue = reader;
      return aField;
  }

Thanks
-- 
View this message in context: http://www.nabble.com/Conversion-from-Lucene-1.4.3-API-to-2.2.0-API.-tf4958346.html#a14200220
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 21:03:32 2007
Return-Path: <java-user-return-31365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71842 invoked from network); 6 Dec 2007 21:03:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 21:03:32 -0000
Received: (qmail 3950 invoked by uid 500); 6 Dec 2007 21:03:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3915 invoked by uid 500); 6 Dec 2007 21:03:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3904 invoked by uid 99); 6 Dec 2007 21:03:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 13:03:13 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 21:02:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J0Nry-00065y-Pu
	for java-user@lucene.apache.org; Thu, 06 Dec 2007 13:02:54 -0800
Message-ID: <14201041.post@talk.nabble.com>
Date: Thu, 6 Dec 2007 13:02:54 -0800 (PST)
From: java_user_ <jkraemer@cs.tufts.edu>
To: java-user@lucene.apache.org
Subject: Custom SynonymMap
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: jkraemer@cs.tufts.edu
X-Virus-Checked: Checked by ClamAV on apache.org


Is there a way to add synonyms to the SynonymMap map?
The HashMap that holds all the words is not visible (private) so extending
it will not work. 

Has anyone added their own custom vocabulary?
-- 
View this message in context: http://www.nabble.com/Custom-SynonymMap-tf4958585.html#a14201041
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 06 21:25:10 2007
Return-Path: <java-user-return-31366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84419 invoked from network); 6 Dec 2007 21:25:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 6 Dec 2007 21:25:09 -0000
Received: (qmail 48855 invoked by uid 500); 6 Dec 2007 21:24:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48828 invoked by uid 500); 6 Dec 2007 21:24:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48817 invoked by uid 99); 6 Dec 2007 21:24:51 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 13:24:51 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 21:24:51 +0000
Received: from hop04-l1d11-si01.isus.emc.com (HOP04-L1D11-SI01.isus.emc.com [10.254.111.54])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id lB6LOSwx003151;
	Thu, 6 Dec 2007 16:24:28 -0500 (EST)
Received: from mailhub.lss.emc.com (nagas.lss.emc.com [10.254.144.11]) by hop04-l1d11-si01.isus.emc.com (Tablus Interceptor); Thu, 6 Dec 2007 16:24:28 -0500
Received: from corpussmtp1.corp.emc.com (corpussmtp1.corp.emc.com [128.221.10.43])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id lB6LO6BZ027227;
	Thu, 6 Dec 2007 16:24:26 -0500 (EST)
From: Seneviratne_Yasoja@emc.com
Received: from CORPUSMX10C.corp.emc.com ([128.221.14.93]) by corpussmtp1.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Thu, 6 Dec 2007 16:23:57 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Indexing XML documents (Urdu)
Date: Thu, 6 Dec 2007 16:23:56 -0500
Message-ID: <8856DF1FF75B2348A2D4033D1E8A7EE40222A028@CORPUSMX10C.corp.emc.com>
In-Reply-To: <4757C3D4.4020307@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing XML documents (Urdu)
Thread-Index: Acg39z/jnabTalyDRUyyXcmgtyL9GgAUwdvw
To: <java-user@lucene.apache.org>, <liaqatalimian@gmail.com>
X-OriginalArrivalTime: 06 Dec 2007 21:23:57.0049 (UTC) FILETIME=[4F620E90:01C8384E]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.8.30.53115
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CP_MEDIA_2_BODY 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Tablus-Inspected: yes
X-Tablus-Classifications: public
X-Tablus-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Liaqat, I'd rather keep the email-thread on the lucene user list.

The code I used is below, the thing to do is be careful when reading
UTF-8 text so you don't garble it.
=20
import org.xml.sax.*;
import org.xml.sax.helpers.DefaultHandler;
import org.apache.lucene.document.*;
import org.apache.lucene.index.*;
import org.apache.lucene.analysis.SimpleAnalyzer;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.search.*;

import javax.xml.parsers.*;
import java.io.*;

public class testNonEnglishXML
{
    public static void main(String[] args){
        if(args.length < 3) {
            System.out.println("Usage: <file-name> <index-name>
<query-file-name>" );
            System.exit(-1);
        }

        testNonEnglishXML idx =3D new testNonEnglishXML();
        try {
            idx.index(args[0], args[1]);
            idx.search(args[1], args[2]);
        } catch(Exception e) {
            e.printStackTrace();
        }
    }

    public void index(String filePath, String indexPath) throws
IOException, UnsupportedEncodingException, ParserConfigurationException,
SAXException {
        Document luceneDoc =3D new Document();
        luceneDoc.add(new Field("name", filePath, Field.Store.YES,
Field.Index.UN_TOKENIZED));

        StringBuffer sb =3D new StringBuffer(1024); String line;
        BufferedReader reader =3D new BufferedReader( new
InputStreamReader(new FileInputStream(new File(filePath)),  "UTF-8") );
        while( (line =3D reader.readLine()) !=3D null) {
            sb.append(line);
        }
        luceneDoc.add(new Field("contents", sb.toString(),
Field.Store.NO, Field.Index.TOKENIZED));

        TestParser parser =3D new TestParser(luceneDoc);
        SAXParser saxParser =3D
SAXParserFactory.newInstance().newSAXParser();
        saxParser.parse(new FileInputStream(new File(filePath)),
parser);

        IndexWriter writer =3D new IndexWriter(indexPath, new
SimpleAnalyzer(), true);
        writer.addDocument(luceneDoc);
        writer.optimize();
        writer.close();
    }

    public void search(String indexPath, String queryFilePath) throws
IOException {
        BufferedReader reader =3D new BufferedReader( new
InputStreamReader(new FileInputStream(new File(queryFilePath)),
"UTF-8") );
        String queryString =3D  new String( reader.readLine() );
        reader.close();

        IndexSearcher searcher =3D new
IndexSearcher(FSDirectory.getDirectory(indexPath));
        PhraseQuery query =3D new PhraseQuery();
        query.add(new Term("contents", queryString));

        Hits hits =3D searcher.search(query);
        if(hits.length()> 0)
            System.out.println("found " + hits.doc(0).getField("name"));
    }

    public class TestParser extends DefaultHandler
    {
      public TestParser(Document doc)
      {
          luceneDoc =3D doc;
      }

      public void startElement(String namespaceURI, String localName,
String qName, Attributes atts) throws SAXException
      {
          if(qName.equalsIgnoreCase("title"))
            buffer =3D new String();
      }

      public void characters(char[] ch, int start, int length) throws
SAXException
      {
          buffer +=3D  new String(ch, start, length);
      }

      public void endElement(String namespaceURI, String localName,
String qName) throws SAXException
      {
          if(qName.equalsIgnoreCase("title"))
            luceneDoc.add(new Field(qName, buffer, Field.Store.YES,
Field.Index.UN_TOKENIZED));
      }

      public void endDocument() {}
      public void startDocument() {}
      public void error(SAXParseException e) {}
      public void fatalError(SAXParseException e) {}
      public void ignorableWhitespace(char[] ch, int start, int length)
{}

      private Document luceneDoc =3D null;
      private String buffer =3D null;
    }
}

-----Original Message-----
From: Liaqat Ali [mailto:liaqatalimian@gmail.com]=20
Sent: Thursday, December 06, 2007 1:42 AM
To: Seneviratne, Yasoja
Subject: Indexing XML documents (Urdu)

Hello,

I read your reply. I need some more help in this regard. As you saw the=20
text (Urdu language). The whole XML file is a collection of 200=20
documents. I am at initial level as SAX is concerned. Can you kindly=20
provide me the code how to extract textual information of each document=20
plus its Doc number and title  or some guidence, because my whole=20
project has stuck  because of this...

Looking for your response....  Thanks..

Liaqat




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 00:48:51 2007
Return-Path: <java-user-return-31367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74703 invoked from network); 7 Dec 2007 00:48:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 00:48:50 -0000
Received: (qmail 77267 invoked by uid 500); 7 Dec 2007 00:48:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77231 invoked by uid 500); 7 Dec 2007 00:48:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77220 invoked by uid 99); 7 Dec 2007 00:48:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 16:48:32 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.191 as permitted sender)
Received: from [209.85.134.191] (HELO mu-out-0910.google.com) (209.85.134.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 00:48:10 +0000
Received: by mu-out-0910.google.com with SMTP id i10so145244mue
        for <java-user@lucene.apache.org>; Thu, 06 Dec 2007 16:48:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=FhATcMl1I0EaqeU1v5fAF+jzaNDiUGPbAZt82yS2gLw=;
        b=hJWCw/XNs9zO0OxhD2pvYmMHHeskIJx03qkACcEpw/qN9PZKykSLtpIG/yHeFYbNWi5UVILyVLDvDtTsxwNHVt5airkOIbaUR810Y8NB4VAQfttOGK1lD3zAjjYCWJgCsPQ2RCsiwwKWif7tXDUfIFqVysk9f8VLWnbRtBVAsX4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=cX5lAOaHNI/Vf7h6s//RNbrNC+ENwdR5IoZcGjz1Zh+g9EJQVJPsUdDXdtq1i+UqNsApBtXIzgylcHydKlldhhu/Yl/Fh5IUCmCSUB/5HZBB5TqI8mpCFU8RKK79RCRCksfkdAnFTRjnvdlvfduQb2rWj6zMu4R2lozM6QafMVk=
Received: by 10.82.174.20 with SMTP id w20mr10314274bue.1196988492432;
        Thu, 06 Dec 2007 16:48:12 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Thu, 6 Dec 2007 16:48:12 -0800 (PST)
Message-ID: <359a92830712061648g6a7ed835y4157a8d4037f5047@mail.gmail.com>
Date: Thu, 6 Dec 2007 19:48:12 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boost One Term Query
In-Reply-To: <14200211.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10679_25471932.1196988492424"
References: <14035572.post@talk.nabble.com>
	 <Pine.LNX.4.62.0712041708500.14245@radix.cryptio.net>
	 <14199255.post@talk.nabble.com>
	 <c68e39170712061200i1420c48byd0f00e3a8e4115e9@mail.gmail.com>
	 <14200211.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10679_25471932.1196988492424
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't believe you can compare scores across queries in any meaningful
way.

This sounds a lot like you're trying to solve some problem and have decided
that boosting and comparing scores across queries is the answer. in other
words, the XY problem.

Perhaps if you explained what you're trying to accomplish someone could
suggest an alternative...

Best
Erick

On Dec 6, 2007 3:12 PM, java_user_ <jkraemer@cs.tufts.edu> wrote:

>
> I was hoping to boost the entire query to give the query more weight
> compared
> to other queries.
>
> Instead of boosting my entire query, I may just multiply the resulting
> score
> by the weight (or something like that).
>
>
>
> Yonik Seeley wrote:
> >
> > On Dec 6, 2007 2:31 PM, java_user_ <jkraemer@cs.tufts.edu> wrote:
> >> Thanks for the response Hoss.
> >>
> >> The score I receive is from the Explaination object.  The score stays
> the
> >> same regardless of how I boost the single term.
> >>
> >> The score of the query:
> >> apple
> >>
> >> Is the same as the score of the query:
> >> apple^3
> >
> > This boosts apple 3 times in relation to the other query clauses.  If
> > there are no other query clauses, it's a bit meaningless.
> >
> >> I am surprised by the result of the test.  Would you expect "apple" and
> >> "apple^3" to receive the same score?
> >
> > Lucene does some "weighting" of the query that causes this to happen.
> >
> > class Query { [...]
> >   /** Expert: Constructs and initializes a Weight for a top-level query.
> > */
> >   public Weight weight(Searcher searcher)
> >     throws IOException {
> >     Query query = searcher.rewrite(this);
> >     Weight weight = query.createWeight(searcher);
> >     float sum = weight.sumOfSquaredWeights();
> >     float norm = getSimilarity(searcher).queryNorm(sum);
> >     weight.normalize(norm);
> >     return weight;
> >   }
> >
> > Are you simply curious about this, or is it causing you a problem
> somehow?
> >
> > -Yonik
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Boost-One-Term-Query-tf4900128.html#a14200211
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10679_25471932.1196988492424--

From java-user-return-31368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 02:03:23 2007
Return-Path: <java-user-return-31368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16528 invoked from network); 7 Dec 2007 02:03:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 02:03:23 -0000
Received: (qmail 46882 invoked by uid 500); 7 Dec 2007 02:03:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46850 invoked by uid 500); 7 Dec 2007 02:03:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46839 invoked by uid 99); 7 Dec 2007 02:03:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 18:03:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of supercooc@gmail.com designates 209.85.198.191 as permitted sender)
Received: from [209.85.198.191] (HELO rv-out-0910.google.com) (209.85.198.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 02:02:44 +0000
Received: by rv-out-0910.google.com with SMTP id k20so460585rvb
        for <java-user@lucene.apache.org>; Thu, 06 Dec 2007 18:02:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=z5FP7ly1kLBuZwMmxKOsM98abaW/vcI0SRHR2/ySAes=;
        b=x2XFqQ8owKzzoVSeYEkNMXLw/NhYRe20Ylp2dqpEfupjOOEPvzyxA/zgGqt7kC6uj6sHa14hED6dqccXF8tkmUMN2Db9PGqjLX4vGa+HrtcJn6HGxElqg1GyGj1h3b5OQFrb7OZ6P3r7ZS3Hg32Guz3jyLqQGZGiajlxGbFBPf8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=F/F8cxGYtZolsrIxXbyf/MSQXF8ukBubShzQnPzaDUDk4pf3xEkRJXVocEPIhPrPQ4lfRRCA29cnOD//DCO01hGrw7ZZ1zAemp+EhNnHzNg/jYiINRnNwGspeQmB5wUJVcq0Zw2OXwQLVUFwIfFX+/ImnMOSSXLvpjc8zAnsDcU=
Received: by 10.140.171.4 with SMTP id t4mr2382878rve.1196992967828;
        Thu, 06 Dec 2007 18:02:47 -0800 (PST)
Received: by 10.140.172.16 with HTTP; Thu, 6 Dec 2007 18:02:47 -0800 (PST)
Message-ID: <ee0c896c0712061802t4b938b9fh176e01ab2e3892e9@mail.gmail.com>
Date: Fri, 7 Dec 2007 10:02:47 +0800
From: "=?GB2312?B?087TvrPYtcTT4w==?=" <supercooc@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: Can I search in realtime?
In-Reply-To: <ee0c896c0712060511uc63766aj444a7c81fa4a4580@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6739_5273322.1196992967826"
References: <ee0c896c0712060511uc63766aj444a7c81fa4a4580@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6739_5273322.1196992967826
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi, it's my first time to use lucene maillist. I have problem that  when  I
add a document with IndexWriter , it searchable for the IndexSearcher
instance which is creat before the document flush to index? if lucene can
not do this,any suggest to solve this problem?

   Regards,
   cooc

------=_Part_6739_5273322.1196992967826--

From java-user-return-31369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 02:54:17 2007
Return-Path: <java-user-return-31369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29454 invoked from network); 7 Dec 2007 02:54:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 02:54:17 -0000
Received: (qmail 83374 invoked by uid 500); 7 Dec 2007 02:53:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83347 invoked by uid 500); 7 Dec 2007 02:53:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83336 invoked by uid 99); 7 Dec 2007 02:53:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 18:53:58 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 02:53:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J0TLO-0008OD-PX
	for java-user@lucene.apache.org; Thu, 06 Dec 2007 18:53:38 -0800
Message-ID: <14205907.post@talk.nabble.com>
Date: Thu, 6 Dec 2007 18:53:38 -0800 (PST)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Error running Lucene in Action code
In-Reply-To: <1196848949.11634.1224908039@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
References: <14164565.post@talk.nabble.com> <1196848949.11634.1224908039@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks very much for your reply.  I commented out the line:

attributeMap.clear();

in the startElement() method, and the code ran!  

Thanks for your prompt reply, and my apologies for the delay in responding.

All the best.
Fayyaz


Michael McCandless-2 wrote:
> 
> 
> I think you need to initialize attributeMap, eg add " = new HashMap()" in
> the declaration?
> 
> Mike
> 
> "syedfa" <fayyazuddin@gmail.com> wrote:
>> 
>> Dear Fellow Java & Lucene developers:
>> 
>> I am a Java developer learning lucene and I am currently going through
>> the
>> book Lucene in Action.  At present, I am trying to run the sample code
>> for
>> indexing an xml document using sax.  My code has been slightly updated
>> for
>> Lucene version 2.2:
>> 
>> /*
>>  * To change this template, choose Tools | Templates
>>  * and open the template in the editor.
>>  */
>> 
>> package lucenexml;
>> 
>> 
>> import java.io.File;
>> import java.io.FileInputStream;
>> import java.io.InputStream;
>> import java.io.IOException;
>> import java.util.HashMap;
>> import java.util.Iterator;
>> 
>> import org.xml.sax.helpers.DefaultHandler;
>> import org.xml.sax.SAXException;
>> import org.xml.sax.Attributes;
>> 
>> import javax.xml.parsers.SAXParser;
>> import javax.xml.parsers.SAXParserFactory;
>> import javax.xml.parsers.ParserConfigurationException;
>> 
>> 
>> import org.apache.lucene.document.Document;
>> import org.apache.lucene.document.Field;
>> 
>> /**
>>  *
>>  * @author fayyaz
>>  */
>> public class SAXXMLHandler extends DefaultHandler implements
>> DocumentHandler{
>> 
>>     private StringBuffer elementBuffer=new StringBuffer();
>>     private HashMap attributeMap;
>>     
>>     private Document doc;
>>     /**
>>      * @param args the command line arguments
>>      */
>>     public static void main(String[] args) throws Exception {
>>         // TODO code application logic here
>>         SAXXMLHandler handler=new SAXXMLHandler();
>>         Document doc=handler.getDocument(new FileInputStream(new
>> File(args[0])));
>>         System.out.println(doc);
>>     }
>>     
>>     public Document getDocument(InputStream is) throws
>> DocumentHandlerException{
>>         
>>         SAXParserFactory spf=SAXParserFactory.newInstance();
>>         
>>         try{
>>             SAXParser parser=spf.newSAXParser();
>>             parser.parse(is, this);
>>              
>>         }
>>         catch (IOException e){
>>             throw new DocumentHandlerException("Cannot parse XML
>>             document",
>> e);
>>         }
>>         catch (ParserConfigurationException e) {
>>             throw new DocumentHandlerException("Cannot parse XML
>>             document",
>> e);
>>         }
>>         catch (SAXException e){
>>             throw new DocumentHandlerException("Cannot parse XML
>>             document",
>> e);
>>         }
>>         return doc;
>>     }
>>     
>>     public void startDocument(){
>>         doc=new Document();
>>     }
>>     
>>     public void startElement(String uri, String localName, String qName,
>> Attributes atts) throws SAXException{
>>         
>>         elementBuffer.setLength(0);
>>         attributeMap.clear();
>>         if(atts.getLength()>0){
>>             attributeMap=new HashMap();
>>             for(int i=0; i<atts.getLength(); i++){
>>                 attributeMap.put(atts.getQName(i), atts.getValue(i));
>>             }
>>         }
>>     }
>>     
>>     public void characters(char[] text, int start, int length){
>>         elementBuffer.append(text, start, length);
>>     }
>>     
>>     public void endElement(String uri, String localName, String qName)
>> throws SAXException{
>>         if(qName.equals("address-book")){
>>             return;
>>         }
>>         
>>         else if(qName.equals("contact")){
>>             Iterator iter=attributeMap.keySet().iterator();
>>             while(iter.hasNext()){
>>                 String attName=(String)iter.next();
>>                 String attValue=(String)attributeMap.get(attName);
>>                 doc.add(new Field(qName, elementBuffer.toString(),
>> Field.Store.YES,Field.Index.NO));
>>             }
>>         }
>>     }
>> }
>> 
>> 
>> However, although the code compiles, I get the following runtime error
>> when
>> I pass the file addressbook.xml (which is used in the book) as a runtime
>> argument:
>> 
>> Exception in thread "main" java.lang.NullPointerException
>>         at lucenexml.SAXXMLHandler.startElement(SAXXMLHandler.java:81)
>>         at
>>         org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown
>> Source)
>>         at
>>         org.apache.xerces.impl.dtd.XMLDTDValidator.startElement(Unknown
>> Source)
>>         at
>> org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown
>> Source)
>>         at
>> org.apache.xerces.impl.XMLDocumentScannerImpl$ContentDispatcher.scanRootElementHook(Unknown
>> Source)
>>         at
>> org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown
>> Source)
>>         at
>> org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown
>> Source)
>>         at org.apache.xerces.parsers.XML11Configuration.parse(Unknown
>> Source)
>>         at org.apache.xerces.parsers.XML11Configuration.parse(Unknown
>> Source)
>>         at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
>>         at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown
>>         Source)
>>         at
>>         org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown
>> Source)
>>         at org.apache.xerces.jaxp.SAXParserImpl.parse(Unknown Source)
>>         at javax.xml.parsers.SAXParser.parse(SAXParser.java:198)
>>         at lucenexml.SAXXMLHandler.getDocument(SAXXMLHandler.java:59)
>>         at lucenexml.SAXXMLHandler.main(SAXXMLHandler.java:49)
>> Java Result: 1
>> 
>> What am I doing wrong?  Any help would be greatly appreciated.
>> 
>> Thanks in advance.
>> Sincerely;
>> Fayyaz
>> 
>> -- 
>> View this message in context:
>> http://www.nabble.com/Error-running-Lucene-in-Action-code-tf4947242.html#a14164565
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Error-running-Lucene-in-Action-code-tf4947242.html#a14205907
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 06:28:23 2007
Return-Path: <java-user-return-31370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77826 invoked from network); 7 Dec 2007 06:28:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 06:28:23 -0000
Received: (qmail 38848 invoked by uid 500); 7 Dec 2007 06:28:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38817 invoked by uid 500); 7 Dec 2007 06:28:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38806 invoked by uid 99); 7 Dec 2007 06:28:06 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 06 Dec 2007 22:28:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [222.66.106.38] (HELO mx01.dusee.cn) (222.66.106.38)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 06:28:08 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="GB2312"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.5
Subject: =?GB2312?B?tPC4tDogQ2FuIEkgc2VhcmNoIGluIHJlYWx0aW1lPw==?=
Date: Fri, 7 Dec 2007 14:27:37 +0800
Message-ID: <8E5BA7FAF994C6409A8E074B78EB46770144854B@14sha-msg02.zm.sd.mediazone.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Can I search in realtime?
Thread-Index: Acg4dVwwVpZej4vGTYyKkk3ybDcwPQAJNDug
From: "Kai Hu" <kai.hu@dusee.cn>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Reopen the indexSearch or IndexReader;

-----=D3=CA=BC=FE=D4=AD=BC=FE-----
=B7=A2=BC=FE=C8=CB: =D3=CE=D3=BE=B3=D8=B5=C4=D3=E3 =
[mailto:supercooc@gmail.com]=20
=B7=A2=CB=CD=CA=B1=BC=E4: 2007=C4=EA12=D4=C27=C8=D5 =D0=C7=C6=DA=CE=E5 =
10:03
=CA=D5=BC=FE=C8=CB: java-user@lucene.apache.org
=D6=F7=CC=E2: Fwd: Can I search in realtime?

Hi, it's my first time to use lucene maillist. I have problem that  when =
 I
add a document with IndexWriter , it searchable for the IndexSearcher
instance which is creat before the document flush to index? if lucene =
can
not do this,any suggest to solve this problem?

   Regards,
   cooc

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 10:30:50 2007
Return-Path: <java-user-return-31371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38627 invoked from network); 7 Dec 2007 10:30:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 10:30:50 -0000
Received: (qmail 59207 invoked by uid 500); 7 Dec 2007 10:30:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59177 invoked by uid 500); 7 Dec 2007 10:30:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59166 invoked by uid 99); 7 Dec 2007 10:30:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 02:30:33 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 10:30:34 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6325630EFC23; Fri,  7 Dec 2007 03:30:13 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-209-44.dyn.embarqhsd.net [71.53.209.44])
	by ehatchersolutions.com (Postfix) with ESMTP id C890E30EFC1F
	for <java-user@lucene.apache.org>; Fri,  7 Dec 2007 03:30:10 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <ee0c896c0712061802t4b938b9fh176e01ab2e3892e9@mail.gmail.com>
References: <ee0c896c0712060511uc63766aj444a7c81fa4a4580@mail.gmail.com> <ee0c896c0712061802t4b938b9fh176e01ab2e3892e9@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; delsp=yes; format=flowed
Message-Id: <7194980E-7236-4DDC-82A5-C80B65486FD5@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Can I search in realtime?
Date: Fri, 7 Dec 2007 05:29:25 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.7 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Dec 6, 2007, at 9:02 PM, =E6=B8=B8=E6=B3=B3=E6=B1=A0=E7=9A=84=E9=B1=BC =
wrote:
> Hi, it's my first time to use lucene maillist. I have problem that  =20=

> when  I
> add a document with IndexWriter , it searchable for the IndexSearcher
> instance which is creat before the document flush to index? if =20
> lucene can
> not do this,any suggest to solve this problem?

Yes... recreate a new IndexSearcher after adding documents :)   =20
That's the Lucene Way.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 11:15:50 2007
Return-Path: <java-user-return-31372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60520 invoked from network); 7 Dec 2007 11:15:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 11:15:50 -0000
Received: (qmail 7795 invoked by uid 500); 7 Dec 2007 11:15:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7759 invoked by uid 500); 7 Dec 2007 11:15:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7747 invoked by uid 99); 7 Dec 2007 11:15:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 03:15:29 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 11:15:06 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6787430EFC1F; Fri,  7 Dec 2007 04:15:09 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-209-44.dyn.embarqhsd.net [71.53.209.44])
	by ehatchersolutions.com (Postfix) with ESMTP id EF0FE30EFC1F
	for <java-user@lucene.apache.org>; Fri,  7 Dec 2007 04:15:06 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <14205907.post@talk.nabble.com>
References: <14164565.post@talk.nabble.com> <1196848949.11634.1224908039@webmail.messagingengine.com> <14205907.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <23C1984C-848F-490E-B83C-0FBF95FB3CDC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Error running Lucene in Action code
Date: Fri, 7 Dec 2007 06:14:19 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.7 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1

Fayyaz - that is the incorrect action to take.  That will cause  
future documents to have fields from all previous ones!   All you  
have to do is:

    private HashMap attributeMap = new HashMap();

	Erik


On Dec 6, 2007, at 9:53 PM, syedfa wrote:

>
> Thanks very much for your reply.  I commented out the line:
>
> attributeMap.clear();
>
> in the startElement() method, and the code ran!
>
> Thanks for your prompt reply, and my apologies for the delay in  
> responding.
>
> All the best.
> Fayyaz
>
>
> Michael McCandless-2 wrote:
>>
>>
>> I think you need to initialize attributeMap, eg add " = new HashMap 
>> ()" in
>> the declaration?
>>
>> Mike
>>
>> "syedfa" <fayyazuddin@gmail.com> wrote:
>>>
>>> Dear Fellow Java & Lucene developers:
>>>
>>> I am a Java developer learning lucene and I am currently going  
>>> through
>>> the
>>> book Lucene in Action.  At present, I am trying to run the sample  
>>> code
>>> for
>>> indexing an xml document using sax.  My code has been slightly  
>>> updated
>>> for
>>> Lucene version 2.2:
>>>
>>> /*
>>>  * To change this template, choose Tools | Templates
>>>  * and open the template in the editor.
>>>  */
>>>
>>> package lucenexml;
>>>
>>>
>>> import java.io.File;
>>> import java.io.FileInputStream;
>>> import java.io.InputStream;
>>> import java.io.IOException;
>>> import java.util.HashMap;
>>> import java.util.Iterator;
>>>
>>> import org.xml.sax.helpers.DefaultHandler;
>>> import org.xml.sax.SAXException;
>>> import org.xml.sax.Attributes;
>>>
>>> import javax.xml.parsers.SAXParser;
>>> import javax.xml.parsers.SAXParserFactory;
>>> import javax.xml.parsers.ParserConfigurationException;
>>>
>>>
>>> import org.apache.lucene.document.Document;
>>> import org.apache.lucene.document.Field;
>>>
>>> /**
>>>  *
>>>  * @author fayyaz
>>>  */
>>> public class SAXXMLHandler extends DefaultHandler implements
>>> DocumentHandler{
>>>
>>>     private StringBuffer elementBuffer=new StringBuffer();
>>>     private HashMap attributeMap;
>>>
>>>     private Document doc;
>>>     /**
>>>      * @param args the command line arguments
>>>      */
>>>     public static void main(String[] args) throws Exception {
>>>         // TODO code application logic here
>>>         SAXXMLHandler handler=new SAXXMLHandler();
>>>         Document doc=handler.getDocument(new FileInputStream(new
>>> File(args[0])));
>>>         System.out.println(doc);
>>>     }
>>>
>>>     public Document getDocument(InputStream is) throws
>>> DocumentHandlerException{
>>>
>>>         SAXParserFactory spf=SAXParserFactory.newInstance();
>>>
>>>         try{
>>>             SAXParser parser=spf.newSAXParser();
>>>             parser.parse(is, this);
>>>
>>>         }
>>>         catch (IOException e){
>>>             throw new DocumentHandlerException("Cannot parse XML
>>>             document",
>>> e);
>>>         }
>>>         catch (ParserConfigurationException e) {
>>>             throw new DocumentHandlerException("Cannot parse XML
>>>             document",
>>> e);
>>>         }
>>>         catch (SAXException e){
>>>             throw new DocumentHandlerException("Cannot parse XML
>>>             document",
>>> e);
>>>         }
>>>         return doc;
>>>     }
>>>
>>>     public void startDocument(){
>>>         doc=new Document();
>>>     }
>>>
>>>     public void startElement(String uri, String localName, String  
>>> qName,
>>> Attributes atts) throws SAXException{
>>>
>>>         elementBuffer.setLength(0);
>>>         attributeMap.clear();
>>>         if(atts.getLength()>0){
>>>             attributeMap=new HashMap();
>>>             for(int i=0; i<atts.getLength(); i++){
>>>                 attributeMap.put(atts.getQName(i), atts.getValue 
>>> (i));
>>>             }
>>>         }
>>>     }
>>>
>>>     public void characters(char[] text, int start, int length){
>>>         elementBuffer.append(text, start, length);
>>>     }
>>>
>>>     public void endElement(String uri, String localName, String  
>>> qName)
>>> throws SAXException{
>>>         if(qName.equals("address-book")){
>>>             return;
>>>         }
>>>
>>>         else if(qName.equals("contact")){
>>>             Iterator iter=attributeMap.keySet().iterator();
>>>             while(iter.hasNext()){
>>>                 String attName=(String)iter.next();
>>>                 String attValue=(String)attributeMap.get(attName);
>>>                 doc.add(new Field(qName, elementBuffer.toString(),
>>> Field.Store.YES,Field.Index.NO));
>>>             }
>>>         }
>>>     }
>>> }
>>>
>>>
>>> However, although the code compiles, I get the following runtime  
>>> error
>>> when
>>> I pass the file addressbook.xml (which is used in the book) as a  
>>> runtime
>>> argument:
>>>
>>> Exception in thread "main" java.lang.NullPointerException
>>>         at lucenexml.SAXXMLHandler.startElement 
>>> (SAXXMLHandler.java:81)
>>>         at
>>>         org.apache.xerces.parsers.AbstractSAXParser.startElement 
>>> (Unknown
>>> Source)
>>>         at
>>>         org.apache.xerces.impl.dtd.XMLDTDValidator.startElement 
>>> (Unknown
>>> Source)
>>>         at
>>> org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartEleme 
>>> nt(Unknown
>>> Source)
>>>         at
>>> org.apache.xerces.impl.XMLDocumentScannerImpl 
>>> $ContentDispatcher.scanRootElementHook(Unknown
>>> Source)
>>>         at
>>> org.apache.xerces.impl.XMLDocumentFragmentScannerImpl 
>>> $FragmentContentDispatcher.dispatch(Unknown
>>> Source)
>>>         at
>>> org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument 
>>> (Unknown
>>> Source)
>>>         at org.apache.xerces.parsers.XML11Configuration.parse 
>>> (Unknown
>>> Source)
>>>         at org.apache.xerces.parsers.XML11Configuration.parse 
>>> (Unknown
>>> Source)
>>>         at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
>>>         at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown
>>>         Source)
>>>         at
>>>         org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse 
>>> (Unknown
>>> Source)
>>>         at org.apache.xerces.jaxp.SAXParserImpl.parse(Unknown  
>>> Source)
>>>         at javax.xml.parsers.SAXParser.parse(SAXParser.java:198)
>>>         at lucenexml.SAXXMLHandler.getDocument(SAXXMLHandler.java: 
>>> 59)
>>>         at lucenexml.SAXXMLHandler.main(SAXXMLHandler.java:49)
>>> Java Result: 1
>>>
>>> What am I doing wrong?  Any help would be greatly appreciated.
>>>
>>> Thanks in advance.
>>> Sincerely;
>>> Fayyaz
>>>
>>> -- 
>>> View this message in context:
>>> http://www.nabble.com/Error-running-Lucene-in-Action-code- 
>>> tf4947242.html#a14164565
>>> Sent from the Lucene - Java Users mailing list archive at  
>>> Nabble.com.
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> -- 
> View this message in context: http://www.nabble.com/Error-running- 
> Lucene-in-Action-code-tf4947242.html#a14205907
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 11:34:01 2007
Return-Path: <java-user-return-31373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64200 invoked from network); 7 Dec 2007 11:34:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 11:34:01 -0000
Received: (qmail 26679 invoked by uid 500); 7 Dec 2007 11:33:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25914 invoked by uid 500); 7 Dec 2007 11:33:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25903 invoked by uid 99); 7 Dec 2007 11:33:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 03:33:44 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 11:33:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J0bSM-0006Gj-HH
	for java-user@lucene.apache.org; Fri, 07 Dec 2007 03:33:22 -0800
Message-ID: <14210833.post@talk.nabble.com>
Date: Fri, 7 Dec 2007 03:33:22 -0800 (PST)
From: d33mb33 <david.balzan@entity.co.uk>
To: java-user@lucene.apache.org
Subject: Post processing to get around TooManyClauses?
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: david.balzan@entity.co.uk
X-Virus-Checked: Checked by ClamAV on apache.org


I have developed a fuzzy search application over a database of books (titles,
authors etc) and it works really well.  (I use Lucene.Net but read the
JavaDocs and forums for java Lucene)

However I've got an interesting use case with "TooManyClauses" and need some
help in solving it.

My users accept that silly title queries like "m*" are going to return too
many results to be useful but they want to combine the wildcard searches
with other search terms.

For example:

Use Case 1
A user wants to search for books by "Charles Dickens"
This works fine using a term query and about 500 results are returned

Use Case 2
A user wants to search for books by "Charles Dickens" where the title starts
with M
This throws a TooManyClauses exceptions (or eats a huge amount of RAM)
because, I guess, Lucene treats the two as independent queries and M* is
expanded across the whole index and not just the books by Charles Dickens. 
User's don't understand why the Use Case 1 works but Use Case 2 doesn't. 
Use Case 2 as actually being a more restrictive query and will return better
results than Use Case 1.

I've thought a bit about how to solve this but none of them seem very
elegant or efficient.
One solution could be too eliminate one or two character wildcards from the
inital search and then loop through the results doing a String.contains or
something horrible.
Another solution could be through clever use of the QueryFilter classes but
I don't quite understand how they work yet.

Any suggestions would be welcome

-- 
View this message in context: http://www.nabble.com/Post-processing-to-get-around-TooManyClauses--tf4961564.html#a14210833
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 13:09:07 2007
Return-Path: <java-user-return-31374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1661 invoked from network); 7 Dec 2007 13:09:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 13:09:07 -0000
Received: (qmail 23455 invoked by uid 500); 7 Dec 2007 13:08:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23418 invoked by uid 500); 7 Dec 2007 13:08:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23407 invoked by uid 99); 7 Dec 2007 13:08:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 05:08:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [62.213.161.134] (HELO pmx.sirma.bg) (62.213.161.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 13:08:52 +0000
X-Virus-Scanned: Sirma Antivirus System
Received: from [192.168.128.140] (ivasilev.sirma.int [192.168.128.140])
	by pmx.sirma.bg (Sirma mail system) with ESMTP id 73BD5245536
	for <java-user@lucene.apache.org>; Fri,  7 Dec 2007 15:08:31 +0200 (EET)
Message-ID: <475945CF.1010209@sirma.bg>
Date: Fri, 07 Dec 2007 15:08:31 +0200
From: Ivan Vasilev <ivasilev@sirma.bg>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: LUCENE MAIL LIST <java-user@lucene.apache.org>
Subject: When is expected Lucene 2.3 to be released?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Lucene Guys,

Can you say approximately when will be released Lucene 2.3? We have some 
costumizations in the source code of hte Lucene and we will have to 
transfer them in the 2.3 release, so it is important for us to know when 
approximately this will happen in order to make our plans.

Thanks in advance,
Ivan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 13:16:49 2007
Return-Path: <java-user-return-31375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3583 invoked from network); 7 Dec 2007 13:16:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 13:16:49 -0000
Received: (qmail 30037 invoked by uid 500); 7 Dec 2007 13:16:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29992 invoked by uid 500); 7 Dec 2007 13:16:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29981 invoked by uid 99); 7 Dec 2007 13:16:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 05:16:32 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.28] (HELO smtp-vbr8.xs4all.nl) (194.109.24.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 13:16:09 +0000
Received: from [192.168.89.206] (impressie.xs4all.nl [82.93.53.149])
	by smtp-vbr8.xs4all.nl (8.13.8/8.13.8) with ESMTP id lB7DGADW066151
	for <java-user@lucene.apache.org>; Fri, 7 Dec 2007 14:16:11 +0100 (CET)
	(envelope-from matthijs@impressie.nl)
Message-ID: <475947A0.2040604@impressie.nl>
Date: Fri, 07 Dec 2007 14:16:16 +0100
From: Matthijs Bierman <matthijs@impressie.nl>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Conversion from Lucene 1.4.3 API to 2.2.0 API.
References: <14200220.post@talk.nabble.com>
In-Reply-To: <14200220.post@talk.nabble.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I would recommend downloading the 1.9.0 release for porting your code. 
It will show you what's deprecated and the javadoc will show you the 
proper way to do it.
What you would want with your field is:

  /** Constructs a String-valued Field that is tokenized and indexed,
    and is stored in the index, for return with hits. The tokens are
    generated from the reader */
  public static final Field(String name, String value) {
      Field aField = new Field(name, value, Field.Store.NO, Field.Index.TOKENIZED);
      return aField;
  }

If you want to store the field change NO to YES, if you want to store 
the field untokenized change TOKENIZED to UN_TOKENIZED.

Cheers,
Matthijs

ts01 wrote:
> Hi,
>
> With Lucene 1.4.3, we had used this constructor for Field. What is its
> equivalent in Lucene 2.2.0?
>
>   /** Constructs a String-valued Field that is tokenized and indexed,
>     and is stored in the index, for return with hits. The tokens are
>     generated from the reader */
>   public static final Field Text(String name, String value, Reader reader) {
>       Field aField = Text(name, value);
>       aField.readerValue = reader;
>       return aField;
>   }
>
> Thanks
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 13:58:38 2007
Return-Path: <java-user-return-31376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12333 invoked from network); 7 Dec 2007 13:58:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 13:58:37 -0000
Received: (qmail 80166 invoked by uid 500); 7 Dec 2007 13:58:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79946 invoked by uid 500); 7 Dec 2007 13:58:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79935 invoked by uid 99); 7 Dec 2007 13:58:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 05:58:20 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.246] (HELO hs-out-2122.google.com) (64.233.178.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 13:57:58 +0000
Received: by hs-out-2122.google.com with SMTP id 54so175087hsz
        for <java-user@lucene.apache.org>; Fri, 07 Dec 2007 05:57:58 -0800 (PST)
Received: by 10.142.245.10 with SMTP id s10mr2110112wfh.1197035877201;
        Fri, 07 Dec 2007 05:57:57 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id m75sm479721wrm.2007.12.07.05.57.56
        (version=TLSv1/SSLv3 cipher=OTHER);
        Fri, 07 Dec 2007 05:57:56 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <475945CF.1010209@sirma.bg>
References: <475945CF.1010209@sirma.bg>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A786F910-1C1B-430C-AD3D-1F37A2A21DB6@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: When is expected Lucene 2.3 to be released?
Date: Fri, 7 Dec 2007 08:57:14 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


There are active discussions now on java-dev about trying to get the  
2.3 release out "soon", maybe in the next month or two.

However, nothing is certain!

Best to check java-dev and follow along...

Mike

Ivan Vasilev wrote:

> Hi Lucene Guys,
>
> Can you say approximately when will be released Lucene 2.3? We have  
> some costumizations in the source code of hte Lucene and we will  
> have to transfer them in the 2.3 release, so it is important for us  
> to know when approximately this will happen in order to make our  
> plans.
>
> Thanks in advance,
> Ivan
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 14:43:45 2007
Return-Path: <java-user-return-31377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33030 invoked from network); 7 Dec 2007 14:43:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 14:43:45 -0000
Received: (qmail 46718 invoked by uid 500); 7 Dec 2007 14:43:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46681 invoked by uid 500); 7 Dec 2007 14:43:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46670 invoked by uid 99); 7 Dec 2007 14:43:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 06:43:28 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.185 as permitted sender)
Received: from [209.85.134.185] (HELO mu-out-0910.google.com) (209.85.134.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 14:43:04 +0000
Received: by mu-out-0910.google.com with SMTP id i10so893424mue
        for <java-user@lucene.apache.org>; Fri, 07 Dec 2007 06:43:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=awOn3NT/3nDetwAmAxw/T1H65EpSTOHS5KeS+5valfU=;
        b=Qi386ZvS4/io2uXs/MxUKHwD034n8cL4st0awdc1AClnlNETZkd/1bYPzIaa8N0Iw7WV2tklTEuhD+Hwi7KVRomHkCQpv32HfPOkRlmno93525Zz1m4ZOCOQEaIqzAdwzglRwC+J2RYjpbLNMCfaGDErekIrnBNa4WuhTxO16Xg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=u5RVkUIbQtlGsGeRh2u83+yNYWe6F9FC5yjRPG30J7iXX3nVhNo7oYiyinlf3tSfKI3+LWtbFm/6CGmDDVswv8jcvHdoK47xPii81cTD3gNXcCTy24gLau/2kVyDsOCF5Mc+ZVP7YeL3ur/R0m9t1D70+3jA3wb9K0Ue5gmQp20=
Received: by 10.82.123.16 with SMTP id v16mr1752857buc.1197038586202;
        Fri, 07 Dec 2007 06:43:06 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Fri, 7 Dec 2007 06:43:06 -0800 (PST)
Message-ID: <359a92830712070643td2575dfjf5fae1e78adc3a05@mail.gmail.com>
Date: Fri, 7 Dec 2007 09:43:06 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Post processing to get around TooManyClauses?
In-Reply-To: <14210833.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12069_10245693.1197038586194"
References: <14210833.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12069_10245693.1197038586194
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Have you looked at Filters? Essentially, you construct a bitmap where each
bit corresponds to a document and pass that along into your search.
Constructing
a filter is surprisingly speedy.

What you lose is relevancy for the filtered part of the query. See
ConstantScoreQuery.

Also, search the mail archive for wildcard and you'll find a wealth of
information.
See the thread "I just don't get wildcards at all" for some very worthwhile
discussion.

Best
Erick

On Dec 7, 2007 6:33 AM, d33mb33 <david.balzan@entity.co.uk> wrote:

>
> I have developed a fuzzy search application over a database of books
> (titles,
> authors etc) and it works really well.  (I use Lucene.Net but read the
> JavaDocs and forums for java Lucene)
>
> However I've got an interesting use case with "TooManyClauses" and need
> some
> help in solving it.
>
> My users accept that silly title queries like "m*" are going to return too
> many results to be useful but they want to combine the wildcard searches
> with other search terms.
>
> For example:
>
> Use Case 1
> A user wants to search for books by "Charles Dickens"
> This works fine using a term query and about 500 results are returned
>
> Use Case 2
> A user wants to search for books by "Charles Dickens" where the title
> starts
> with M
> This throws a TooManyClauses exceptions (or eats a huge amount of RAM)
> because, I guess, Lucene treats the two as independent queries and M* is
> expanded across the whole index and not just the books by Charles Dickens.
> User's don't understand why the Use Case 1 works but Use Case 2 doesn't.
> Use Case 2 as actually being a more restrictive query and will return
> better
> results than Use Case 1.
>
> I've thought a bit about how to solve this but none of them seem very
> elegant or efficient.
> One solution could be too eliminate one or two character wildcards from
> the
> inital search and then loop through the results doing a String.contains or
> something horrible.
> Another solution could be through clever use of the QueryFilter classes
> but
> I don't quite understand how they work yet.
>
> Any suggestions would be welcome
>
> --
> View this message in context:
> http://www.nabble.com/Post-processing-to-get-around-TooManyClauses--tf4961564.html#a14210833
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12069_10245693.1197038586194--

From java-user-return-31378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 14:57:58 2007
Return-Path: <java-user-return-31378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37203 invoked from network); 7 Dec 2007 14:57:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 14:57:58 -0000
Received: (qmail 75546 invoked by uid 500); 7 Dec 2007 14:57:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75316 invoked by uid 500); 7 Dec 2007 14:57:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75305 invoked by uid 99); 7 Dec 2007 14:57:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 06:57:41 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 14:57:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J0edl-0004l6-Lu
	for java-user@lucene.apache.org; Fri, 07 Dec 2007 06:57:21 -0800
Message-ID: <14213935.post@talk.nabble.com>
Date: Fri, 7 Dec 2007 06:57:21 -0800 (PST)
From: d33mb33 <david.balzan@entity.co.uk>
To: java-user@lucene.apache.org
Subject: Re: Post processing to get around TooManyClauses?
In-Reply-To: <359a92830712070643td2575dfjf5fae1e78adc3a05@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: david.balzan@entity.co.uk
References: <14210833.post@talk.nabble.com> <359a92830712070643td2575dfjf5fae1e78adc3a05@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org



Erick Erickson wrote:
> 
> Have you looked at Filters? Essentially, you construct a bitmap where each
> bit corresponds to a document and pass that along into your search.
> Constructing a filter is surprisingly speedy.
> 

Thanks for the reply.. I'll take a look at filters.

So in my "Charles Dickens starting with m" use case, should I make a filter
for "Charles Dickens" and then do a prefix query on title passing "m"...?

i.e. rewrite the quick query as a filter so the prefix and wildcard queries
work against a smaller index.

Or have I got this the wrong way around :-S

-- 
View this message in context: http://www.nabble.com/Post-processing-to-get-around-TooManyClauses--tf4961564.html#a14213935
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 17:44:27 2007
Return-Path: <java-user-return-31379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92447 invoked from network); 7 Dec 2007 17:44:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 17:44:27 -0000
Received: (qmail 35047 invoked by uid 500); 7 Dec 2007 17:44:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34867 invoked by uid 500); 7 Dec 2007 17:44:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34856 invoked by uid 99); 7 Dec 2007 17:44:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 09:44:08 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 17:43:47 +0000
Received: by mu-out-0910.google.com with SMTP id i10so960911mue
        for <java-user@lucene.apache.org>; Fri, 07 Dec 2007 09:43:49 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=5KaU/jgV5kqJPMXx7qIiuC2qHYqnCfxRU+Zx/1/RZm0=;
        b=QL4xTGLIsIRXDAgjnxcJqOMJ2poWnEYbQCXv2kjluJHFbe05795xRwCBPYupJedLPdxD9IH6dZmD1CRn5tDemFma+sI8/s463Hc928pfGYo/KQo+JztugUGkzdViC1MfWGXbUITHR1Hb/1r4jVyEfK4O+JWgnxXEcYTzmcu2tKQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WGt9ZpUiAW/H8jHc2SpdThGOO3U6UOz0xYufJabDwpmp5hgqNMY59Tr0++TuYy4CewJ4RrAZaXMWxOW2rfmT9Kzvy+z5Qvl6bQh2MFSMRcyBXZIB99zTzGqbLwXchLBtz8aTqvWxwe6NwP+5qBzNqGBobPi5/RwkODyMQ/Y78go=
Received: by 10.82.150.20 with SMTP id x20mr12628444bud.1197049428169;
        Fri, 07 Dec 2007 09:43:48 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Fri, 7 Dec 2007 09:43:48 -0800 (PST)
Message-ID: <359a92830712070943j25a3f54ag9c16ac3d2a3e3425@mail.gmail.com>
Date: Fri, 7 Dec 2007 12:43:48 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Post processing to get around TooManyClauses?
In-Reply-To: <14213935.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_12686_321124.1197049428166"
References: <14210833.post@talk.nabble.com>
	 <359a92830712070643td2575dfjf5fae1e78adc3a05@mail.gmail.com>
	 <14213935.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_12686_321124.1197049428166
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I was thinking that you'd assemble a BooleanQuery, perhaps with phrase
queries, perhaps not. The critical thing here is to add in a BooleanClause
that included your filter on the relevant field (s).

Erick

On Dec 7, 2007 9:57 AM, d33mb33 <david.balzan@entity.co.uk> wrote:

>
>
> Erick Erickson wrote:
> >
> > Have you looked at Filters? Essentially, you construct a bitmap where
> each
> > bit corresponds to a document and pass that along into your search.
> > Constructing a filter is surprisingly speedy.
> >
>
> Thanks for the reply.. I'll take a look at filters.
>
> So in my "Charles Dickens starting with m" use case, should I make a
> filter
> for "Charles Dickens" and then do a prefix query on title passing "m"...?
>
> i.e. rewrite the quick query as a filter so the prefix and wildcard
> queries
> work against a smaller index.
>
> Or have I got this the wrong way around :-S
>
> --
> View this message in context:
> http://www.nabble.com/Post-processing-to-get-around-TooManyClauses--tf4961564.html#a14213935
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_12686_321124.1197049428166--

From java-user-return-31380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 18:28:21 2007
Return-Path: <java-user-return-31380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10036 invoked from network); 7 Dec 2007 18:28:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 18:28:21 -0000
Received: (qmail 86980 invoked by uid 500); 7 Dec 2007 18:28:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86954 invoked by uid 500); 7 Dec 2007 18:28:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86943 invoked by uid 99); 7 Dec 2007 18:28:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 10:28:03 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 18:28:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J0hvL-000471-4G
	for java-user@lucene.apache.org; Fri, 07 Dec 2007 10:27:43 -0800
Message-ID: <14217744.post@talk.nabble.com>
Date: Fri, 7 Dec 2007 10:27:43 -0800 (PST)
From: ts01 <venkat@clearwellsystems.com>
To: java-user@lucene.apache.org
Subject: Re: Conversion from Lucene 1.4.3 API to 2.2.0 API.
In-Reply-To: <475947A0.2040604@impressie.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: venkat@clearwellsystems.com
References: <14200220.post@talk.nabble.com> <475947A0.2040604@impressie.nl>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your reply. I am aware of the new API, but with the new API that
you provided we lost the ability to "Store" the field as a string (the
Value), but "Tokenize" it differently for Indexing, using a Reader.


Matthijs Bierman wrote:
> 
> Hi,
> 
> I would recommend downloading the 1.9.0 release for porting your code. 
> It will show you what's deprecated and the javadoc will show you the 
> proper way to do it.
> What you would want with your field is:
> 
>   /** Constructs a String-valued Field that is tokenized and indexed,
>     and is stored in the index, for return with hits. The tokens are
>     generated from the reader */
>   public static final Field(String name, String value) {
>       Field aField = new Field(name, value, Field.Store.NO,
> Field.Index.TOKENIZED);
>       return aField;
>   }
> 
> If you want to store the field change NO to YES, if you want to store 
> the field untokenized change TOKENIZED to UN_TOKENIZED.
> 
> Cheers,
> Matthijs
> 
> ts01 wrote:
>> Hi,
>>
>> With Lucene 1.4.3, we had used this constructor for Field. What is its
>> equivalent in Lucene 2.2.0?
>>
>>   /** Constructs a String-valued Field that is tokenized and indexed,
>>     and is stored in the index, for return with hits. The tokens are
>>     generated from the reader */
>>   public static final Field Text(String name, String value, Reader
>> reader) {
>>       Field aField = Text(name, value);
>>       aField.readerValue = reader;
>>       return aField;
>>   }
>>
>> Thanks
>>   
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Conversion-from-Lucene-1.4.3-API-to-2.2.0-API.-tf4958346.html#a14217744
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 18:42:52 2007
Return-Path: <java-user-return-31381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16211 invoked from network); 7 Dec 2007 18:42:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 18:42:51 -0000
Received: (qmail 15093 invoked by uid 500); 7 Dec 2007 18:42:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15062 invoked by uid 500); 7 Dec 2007 18:42:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15036 invoked by uid 99); 7 Dec 2007 18:42:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 10:42:34 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tremerson@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 18:42:12 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1740138wah
        for <java-user@lucene.apache.org>; Fri, 07 Dec 2007 10:42:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=MD6tXftXhPusCBElHeym3aSaNA474JqHMEHgo5mk5aE=;
        b=slIgkY5pZS4JiWXl/TLivUZ2UPIVmkAQjPn6yBUPRwFR5gg9nTPMIF+Ap30m2LI8fQ94uhKuSy6K5ZYF6AlDyZW5hUZKx59o0PQ3yw0gDQ6ApOEq1iK+ocX4ce+S6eyn96AciMzoHTxAwIwGSx/FL8bBm89ApWUlJm22/jdFwMw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=aFQuq0ZRXmVOF9spQbldC1GaopJGsqnbtudEcGKot4GxwaJmuZz63SiCgQXOBUg8eCgqTEfD0wERWBqcMPVraN6YDGDNu+U93yUybHDwjaORKzHlNHDnwP+t9u2wGli9GOTRLprJA7YixZBPo3yPX9Tgm5PGkDb8MuIy+qh3OpI=
Received: by 10.115.88.1 with SMTP id q1mr3738224wal.1197052932839;
        Fri, 07 Dec 2007 10:42:12 -0800 (PST)
Received: by 10.115.74.5 with HTTP; Fri, 7 Dec 2007 10:42:12 -0800 (PST)
Message-ID: <cefddd100712071042u29973d92n75f16a5e8f6f799@mail.gmail.com>
Date: Fri, 7 Dec 2007 13:42:12 -0500
From: "Tom Emerson" <tremerson@gmail.com>
To: java-user@lucene.apache.org
Subject: Boosting hits based on a value in a field, without that field contributing to the search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13860_29641015.1197052932835"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13860_29641015.1197052932835
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hello,

I'm looking for suggestions on how to deal with the following (simplified)
scenario (Lucene 2.2.0):

Documents in my index have some number of fields that are searched in
various combinations via boolean queries.

Each document also contains a field that contains a field that isn't
searched that contains values "Foo", "Bar", "Baz", or no value at all.

I need to boost the score of a hit in a Document by different amounts based
on whether the field in the matching document contains "Foo", "Bar", or
"Baz".

Heretofore I have been adding a document boost at indexing time based on the
source data that is being indexed in each document. This makes the boost
apply across the board and gives the desired results. However, my users now
want to the ability to selectively apply the boost or not, so doing this at
indexing time is no longer an option.

Many thanks in advance for your thoughts,

    -tree

-- 
Tom Emerson
tremerson@gmail.com
http://www.dreamersrealm.net/~tree

------=_Part_13860_29641015.1197052932835--

From java-user-return-31382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 19:25:13 2007
Return-Path: <java-user-return-31382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28705 invoked from network); 7 Dec 2007 19:25:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 19:25:13 -0000
Received: (qmail 85838 invoked by uid 500); 7 Dec 2007 19:24:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85404 invoked by uid 500); 7 Dec 2007 19:24:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85393 invoked by uid 99); 7 Dec 2007 19:24:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 11:24:54 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 19:24:31 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J0ioL-00067S-Ig
	for java-user@lucene.apache.org; Fri, 07 Dec 2007 11:24:33 -0800
Message-ID: <14218817.post@talk.nabble.com>
Date: Fri, 7 Dec 2007 11:24:33 -0800 (PST)
From: syedfa <fayyazuddin@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Error running Lucene in Action code
In-Reply-To: <23C1984C-848F-490E-B83C-0FBF95FB3CDC@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fayyazuddin@gmail.com
References: <14164565.post@talk.nabble.com> <1196848949.11634.1224908039@webmail.messagingengine.com> <14205907.post@talk.nabble.com> <23C1984C-848F-490E-B83C-0FBF95FB3CDC@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for the reply Erik.  However, my follow up question is this:

What about the block of code that appears in the startElement() method:

if(atts.getLength()>0){
            attributeMap=new HashMap();

Do we need to modify it at all in anyway?  Your suggestion works, but isn't
this redundant?

Just wondering.
Fayyaz



Erik Hatcher wrote:
> 
> Fayyaz - that is the incorrect action to take.  That will cause  
> future documents to have fields from all previous ones!   All you  
> have to do is:
> 
>     private HashMap attributeMap = new HashMap();
> 
> 	Erik
> 
> 
> On Dec 6, 2007, at 9:53 PM, syedfa wrote:
> 
>>
>> Thanks very much for your reply.  I commented out the line:
>>
>> attributeMap.clear();
>>
>> in the startElement() method, and the code ran!
>>
>> Thanks for your prompt reply, and my apologies for the delay in  
>> responding.
>>
>> All the best.
>> Fayyaz
>>
>>
>> Michael McCandless-2 wrote:
>>>
>>>
>>> I think you need to initialize attributeMap, eg add " = new HashMap 
>>> ()" in
>>> the declaration?
>>>
>>> Mike
>>>
>>> "syedfa" <fayyazuddin@gmail.com> wrote:
>>>>
>>>> Dear Fellow Java & Lucene developers:
>>>>
>>>> I am a Java developer learning lucene and I am currently going  
>>>> through
>>>> the
>>>> book Lucene in Action.  At present, I am trying to run the sample  
>>>> code
>>>> for
>>>> indexing an xml document using sax.  My code has been slightly  
>>>> updated
>>>> for
>>>> Lucene version 2.2:
>>>>
>>>> /*
>>>>  * To change this template, choose Tools | Templates
>>>>  * and open the template in the editor.
>>>>  */
>>>>
>>>> package lucenexml;
>>>>
>>>>
>>>> import java.io.File;
>>>> import java.io.FileInputStream;
>>>> import java.io.InputStream;
>>>> import java.io.IOException;
>>>> import java.util.HashMap;
>>>> import java.util.Iterator;
>>>>
>>>> import org.xml.sax.helpers.DefaultHandler;
>>>> import org.xml.sax.SAXException;
>>>> import org.xml.sax.Attributes;
>>>>
>>>> import javax.xml.parsers.SAXParser;
>>>> import javax.xml.parsers.SAXParserFactory;
>>>> import javax.xml.parsers.ParserConfigurationException;
>>>>
>>>>
>>>> import org.apache.lucene.document.Document;
>>>> import org.apache.lucene.document.Field;
>>>>
>>>> /**
>>>>  *
>>>>  * @author fayyaz
>>>>  */
>>>> public class SAXXMLHandler extends DefaultHandler implements
>>>> DocumentHandler{
>>>>
>>>>     private StringBuffer elementBuffer=new StringBuffer();
>>>>     private HashMap attributeMap;
>>>>
>>>>     private Document doc;
>>>>     /**
>>>>      * @param args the command line arguments
>>>>      */
>>>>     public static void main(String[] args) throws Exception {
>>>>         // TODO code application logic here
>>>>         SAXXMLHandler handler=new SAXXMLHandler();
>>>>         Document doc=handler.getDocument(new FileInputStream(new
>>>> File(args[0])));
>>>>         System.out.println(doc);
>>>>     }
>>>>
>>>>     public Document getDocument(InputStream is) throws
>>>> DocumentHandlerException{
>>>>
>>>>         SAXParserFactory spf=SAXParserFactory.newInstance();
>>>>
>>>>         try{
>>>>             SAXParser parser=spf.newSAXParser();
>>>>             parser.parse(is, this);
>>>>
>>>>         }
>>>>         catch (IOException e){
>>>>             throw new DocumentHandlerException("Cannot parse XML
>>>>             document",
>>>> e);
>>>>         }
>>>>         catch (ParserConfigurationException e) {
>>>>             throw new DocumentHandlerException("Cannot parse XML
>>>>             document",
>>>> e);
>>>>         }
>>>>         catch (SAXException e){
>>>>             throw new DocumentHandlerException("Cannot parse XML
>>>>             document",
>>>> e);
>>>>         }
>>>>         return doc;
>>>>     }
>>>>
>>>>     public void startDocument(){
>>>>         doc=new Document();
>>>>     }
>>>>
>>>>     public void startElement(String uri, String localName, String  
>>>> qName,
>>>> Attributes atts) throws SAXException{
>>>>
>>>>         elementBuffer.setLength(0);
>>>>         attributeMap.clear();
>>>>         if(atts.getLength()>0){
>>>>             attributeMap=new HashMap();
>>>>             for(int i=0; i<atts.getLength(); i++){
>>>>                 attributeMap.put(atts.getQName(i), atts.getValue 
>>>> (i));
>>>>             }
>>>>         }
>>>>     }
>>>>
>>>>     public void characters(char[] text, int start, int length){
>>>>         elementBuffer.append(text, start, length);
>>>>     }
>>>>
>>>>     public void endElement(String uri, String localName, String  
>>>> qName)
>>>> throws SAXException{
>>>>         if(qName.equals("address-book")){
>>>>             return;
>>>>         }
>>>>
>>>>         else if(qName.equals("contact")){
>>>>             Iterator iter=attributeMap.keySet().iterator();
>>>>             while(iter.hasNext()){
>>>>                 String attName=(String)iter.next();
>>>>                 String attValue=(String)attributeMap.get(attName);
>>>>                 doc.add(new Field(qName, elementBuffer.toString(),
>>>> Field.Store.YES,Field.Index.NO));
>>>>             }
>>>>         }
>>>>     }
>>>> }
>>>>
>>>>
>>>> However, although the code compiles, I get the following runtime  
>>>> error
>>>> when
>>>> I pass the file addressbook.xml (which is used in the book) as a  
>>>> runtime
>>>> argument:
>>>>
>>>> Exception in thread "main" java.lang.NullPointerException
>>>>         at lucenexml.SAXXMLHandler.startElement 
>>>> (SAXXMLHandler.java:81)
>>>>         at
>>>>         org.apache.xerces.parsers.AbstractSAXParser.startElement 
>>>> (Unknown
>>>> Source)
>>>>         at
>>>>         org.apache.xerces.impl.dtd.XMLDTDValidator.startElement 
>>>> (Unknown
>>>> Source)
>>>>         at
>>>> org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartEleme 
>>>> nt(Unknown
>>>> Source)
>>>>         at
>>>> org.apache.xerces.impl.XMLDocumentScannerImpl 
>>>> $ContentDispatcher.scanRootElementHook(Unknown
>>>> Source)
>>>>         at
>>>> org.apache.xerces.impl.XMLDocumentFragmentScannerImpl 
>>>> $FragmentContentDispatcher.dispatch(Unknown
>>>> Source)
>>>>         at
>>>> org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument 
>>>> (Unknown
>>>> Source)
>>>>         at org.apache.xerces.parsers.XML11Configuration.parse 
>>>> (Unknown
>>>> Source)
>>>>         at org.apache.xerces.parsers.XML11Configuration.parse 
>>>> (Unknown
>>>> Source)
>>>>         at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
>>>>         at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown
>>>>         Source)
>>>>         at
>>>>         org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse 
>>>> (Unknown
>>>> Source)
>>>>         at org.apache.xerces.jaxp.SAXParserImpl.parse(Unknown  
>>>> Source)
>>>>         at javax.xml.parsers.SAXParser.parse(SAXParser.java:198)
>>>>         at lucenexml.SAXXMLHandler.getDocument(SAXXMLHandler.java: 
>>>> 59)
>>>>         at lucenexml.SAXXMLHandler.main(SAXXMLHandler.java:49)
>>>> Java Result: 1
>>>>
>>>> What am I doing wrong?  Any help would be greatly appreciated.
>>>>
>>>> Thanks in advance.
>>>> Sincerely;
>>>> Fayyaz
>>>>
>>>> -- 
>>>> View this message in context:
>>>> http://www.nabble.com/Error-running-Lucene-in-Action-code- 
>>>> tf4947242.html#a14164565
>>>> Sent from the Lucene - Java Users mailing list archive at  
>>>> Nabble.com.
>>>>
>>>>
>>>> -------------------------------------------------------------------- 
>>>> -
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>> -- 
>> View this message in context: http://www.nabble.com/Error-running- 
>> Lucene-in-Action-code-tf4947242.html#a14205907
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Error-running-Lucene-in-Action-code-tf4947242.html#a14218817
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 20:04:31 2007
Return-Path: <java-user-return-31383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38753 invoked from network); 7 Dec 2007 20:04:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 20:04:31 -0000
Received: (qmail 55240 invoked by uid 500); 7 Dec 2007 20:04:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55214 invoked by uid 500); 7 Dec 2007 20:04:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55203 invoked by uid 99); 7 Dec 2007 20:04:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 12:04:13 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 20:03:51 +0000
Received: by nf-out-0910.google.com with SMTP id d3so384040nfc
        for <java-user@lucene.apache.org>; Fri, 07 Dec 2007 12:03:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=VB8KMx637pl9x8+BU6BP9+Y7RDz21wFjEuA4NAhhPaU=;
        b=ZiwZR01O1ySz/gaGc2siDecHkcuSPAfPjx8tdumshtufgdiXUCS+zi+2pE/3WoJHgYeBdc+pOErCH2Iwy5f8T7aXyWMmNRicAg1xB8cpnVXsRQ/n0/+3twhK8Dv66TLBuWV+Yo8UCPPBop8NTOsYEnbjynI81URphCz0wgqANGA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GrzTW362PR8K1/P9JitUsJQ8u0UOwHNRGykjCg0nL/rmqo41JD8e/TNE7zJ4BBTIYfjOVHJkDZlT1+akA1UHQfkpgije7CxFzu8MimSdGi9+700nCTanPDMC+hfQfjgDL3xTOLjziHctAIu/50dPjfh+XULlaZodaEwu5VPzLpQ=
Received: by 10.82.174.20 with SMTP id w20mr685366bue.1197057831541;
        Fri, 07 Dec 2007 12:03:51 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Fri, 7 Dec 2007 12:03:51 -0800 (PST)
Message-ID: <359a92830712071203t1f09d2c4hdeff2f56f1465d49@mail.gmail.com>
Date: Fri, 7 Dec 2007 15:03:51 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boosting hits based on a value in a field, without that field contributing to the search
In-Reply-To: <cefddd100712071042u29973d92n75f16a5e8f6f799@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13006_4104613.1197057831532"
References: <cefddd100712071042u29973d92n75f16a5e8f6f799@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13006_4104613.1197057831532
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It seems like doing something like pre-processing the query
(or equivlently, adding a BooleanClause to a BooleanQuery)
that expressed
(your original query) AND (field:foo^boost1 OR field:bar^boost2 OR
field:baz^boost3)
should do the trick. Or I'm just not understanding what you're doing at all

Erick

On Dec 7, 2007 1:42 PM, Tom Emerson <tremerson@gmail.com> wrote:

> Hello,
>
> I'm looking for suggestions on how to deal with the following (simplified)
> scenario (Lucene 2.2.0):
>
> Documents in my index have some number of fields that are searched in
> various combinations via boolean queries.
>
> Each document also contains a field that contains a field that isn't
> searched that contains values "Foo", "Bar", "Baz", or no value at all.
>
> I need to boost the score of a hit in a Document by different amounts
> based
> on whether the field in the matching document contains "Foo", "Bar", or
> "Baz".
>
> Heretofore I have been adding a document boost at indexing time based on
> the
> source data that is being indexed in each document. This makes the boost
> apply across the board and gives the desired results. However, my users
> now
> want to the ability to selectively apply the boost or not, so doing this
> at
> indexing time is no longer an option.
>
> Many thanks in advance for your thoughts,
>
>    -tree
>
> --
> Tom Emerson
> tremerson@gmail.com
> http://www.dreamersrealm.net/~tree <http://www.dreamersrealm.net/%7Etree>
>

------=_Part_13006_4104613.1197057831532--

From java-user-return-31384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 20:23:31 2007
Return-Path: <java-user-return-31384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44014 invoked from network); 7 Dec 2007 20:23:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 20:23:31 -0000
Received: (qmail 79939 invoked by uid 500); 7 Dec 2007 20:23:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79914 invoked by uid 500); 7 Dec 2007 20:23:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79903 invoked by uid 99); 7 Dec 2007 20:23:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 12:23:13 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tremerson@gmail.com designates 209.85.146.178 as permitted sender)
Received: from [209.85.146.178] (HELO wa-out-1112.google.com) (209.85.146.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 20:23:14 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1792889wah
        for <java-user@lucene.apache.org>; Fri, 07 Dec 2007 12:22:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=PovI8Vp3Odx1WxgXYk8BgmSMoACdJGxm+aebzTFTqNc=;
        b=hsyk2jIu163C+zFpnCi9JUPrCmnvfhLEPF8OdZ8neyuHy0uZUuuDqXNZusXpvDH4UPySsvSmzoeggxmBICP7BpxhsTtVv6GgUU/JL3vQuESxuh5szEriLpDv7gg2g8u0oK1oPaZFUrDVafpfiIvQWkPFDJvmK32Kpp9zvBHHDCc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UZE3IvC49+G6Anq/iRkVRV+CpDa+vq7Bpc2DILIS8d4wiNtGAR9Qe93ixjjSyaZ+o1SYXex50KN2x1Yf/U7sPJnKMv3IUsVays3QNVTM4sYKMBnYMg97LFgtHOFt2/IGHz0NaMtkLhCAMoDZQUDp97e3rH6z/0IOIZhUPw/EVO4=
Received: by 10.114.81.1 with SMTP id e1mr3038338wab.1197058967516;
        Fri, 07 Dec 2007 12:22:47 -0800 (PST)
Received: by 10.115.74.5 with HTTP; Fri, 7 Dec 2007 12:22:42 -0800 (PST)
Message-ID: <cefddd100712071222q7f5e1782ma2ad91d9f1669eeb@mail.gmail.com>
Date: Fri, 7 Dec 2007 15:22:42 -0500
From: "Tom Emerson" <tremerson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boosting hits based on a value in a field, without that field contributing to the search
In-Reply-To: <359a92830712071203t1f09d2c4hdeff2f56f1465d49@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14339_21479075.1197058962487"
References: <cefddd100712071042u29973d92n75f16a5e8f6f799@mail.gmail.com>
	 <359a92830712071203t1f09d2c4hdeff2f56f1465d49@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14339_21479075.1197058962487
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Erik,

Thanks for the response. The issue with

(original query) AND (field:foo^boost1 OR field:bar^boost2 OR
field:baz^boost3)

means that the 'field' must have a value for the query to succeed, which
isn't always the case: there could be documents where 'field' has no value.
So unless I understand the BooleanQueries this would be a non-starter.

Or am I missing something?

Thanks again,

    -tree

On Dec 7, 2007 3:03 PM, Erick Erickson <erickerickson@gmail.com> wrote:

> It seems like doing something like pre-processing the query
> (or equivlently, adding a BooleanClause to a BooleanQuery)
> that expressed
> (your original query) AND (field:foo^boost1 OR field:bar^boost2 OR
> field:baz^boost3)
> should do the trick. Or I'm just not understanding what you're doing at
> all
>
> Erick
>
> On Dec 7, 2007 1:42 PM, Tom Emerson <tremerson@gmail.com> wrote:
>
> > Hello,
> >
> > I'm looking for suggestions on how to deal with the following
> (simplified)
> > scenario (Lucene 2.2.0):
> >
> > Documents in my index have some number of fields that are searched in
> > various combinations via boolean queries.
> >
> > Each document also contains a field that contains a field that isn't
> > searched that contains values "Foo", "Bar", "Baz", or no value at all.
> >
> > I need to boost the score of a hit in a Document by different amounts
> > based
> > on whether the field in the matching document contains "Foo", "Bar", or
> > "Baz".
> >
> > Heretofore I have been adding a document boost at indexing time based on
> > the
> > source data that is being indexed in each document. This makes the boost
> > apply across the board and gives the desired results. However, my users
> > now
> > want to the ability to selectively apply the boost or not, so doing this
> > at
> > indexing time is no longer an option.
> >
> > Many thanks in advance for your thoughts,
> >
> >    -tree
> >
> > --
> > Tom Emerson
> > tremerson@gmail.com
> > http://www.dreamersrealm.net/~tree<http://www.dreamersrealm.net/%7Etree><
> http://www.dreamersrealm.net/%7Etree>
> >
>



-- 
Tom Emerson
tremerson@gmail.com
http://www.dreamersrealm.net/~tree

------=_Part_14339_21479075.1197058962487--

From java-user-return-31385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 20:27:20 2007
Return-Path: <java-user-return-31385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45432 invoked from network); 7 Dec 2007 20:27:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 20:27:20 -0000
Received: (qmail 87382 invoked by uid 500); 7 Dec 2007 20:27:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87351 invoked by uid 500); 7 Dec 2007 20:27:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87340 invoked by uid 99); 7 Dec 2007 20:27:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 12:27:01 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a12.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 20:26:38 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a12.g.dreamhost.com (Postfix) with ESMTP id 3E72E7FA8
	for <java-user@lucene.apache.org>; Fri,  7 Dec 2007 12:26:33 -0800 (PST)
Message-Id: <11590226-BA59-484E-9224-490DFCB8418A@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <cefddd100712071042u29973d92n75f16a5e8f6f799@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Boosting hits based on a value in a field, without that field contributing to the search
Date: Fri, 7 Dec 2007 15:26:32 -0500
References: <cefddd100712071042u29973d92n75f16a5e8f6f799@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at the o.a.l.search.function package, which can be used to  
give boosts to documents based on the value contained in a field.   
Also, would a custom sort work?

-Grant

On Dec 7, 2007, at 1:42 PM, Tom Emerson wrote:

> Hello,
>
> I'm looking for suggestions on how to deal with the following  
> (simplified)
> scenario (Lucene 2.2.0):
>
> Documents in my index have some number of fields that are searched in
> various combinations via boolean queries.
>
> Each document also contains a field that contains a field that isn't
> searched that contains values "Foo", "Bar", "Baz", or no value at all.
>
> I need to boost the score of a hit in a Document by different  
> amounts based
> on whether the field in the matching document contains "Foo", "Bar",  
> or
> "Baz".
>
> Heretofore I have been adding a document boost at indexing time  
> based on the
> source data that is being indexed in each document. This makes the  
> boost
> apply across the board and gives the desired results. However, my  
> users now
> want to the ability to selectively apply the boost or not, so doing  
> this at
> indexing time is no longer an option.
>
> Many thanks in advance for your thoughts,
>
>    -tree
>
> -- 
> Tom Emerson
> tremerson@gmail.com
> http://www.dreamersrealm.net/~tree

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 21:00:47 2007
Return-Path: <java-user-return-31386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52862 invoked from network); 7 Dec 2007 21:00:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 21:00:46 -0000
Received: (qmail 33091 invoked by uid 500); 7 Dec 2007 21:00:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33059 invoked by uid 500); 7 Dec 2007 21:00:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33048 invoked by uid 99); 7 Dec 2007 21:00:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 13:00:29 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.152 as permitted sender)
Received: from [195.212.29.152] (HELO mtagate3.de.ibm.com) (195.212.29.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 21:00:30 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate3.de.ibm.com (8.13.8/8.13.8) with ESMTP id lB7L08V7115442
	for <java-user@lucene.apache.org>; Fri, 7 Dec 2007 21:00:08 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id lB7L08cN2768922
	for <java-user@lucene.apache.org>; Fri, 7 Dec 2007 22:00:08 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id lB7L087i026830
	for <java-user@lucene.apache.org>; Fri, 7 Dec 2007 22:00:08 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id lB7L08kr026827
	for <java-user@lucene.apache.org>; Fri, 7 Dec 2007 22:00:08 +0100
In-Reply-To: <f3c2a27b0712040654s368fd56l314933b6b57410fa@mail.gmail.com>
Subject: Re: Applying SpellChecker to a phrase
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF4816461A.DD2100A8-ONC22573AA.00729C9A-C22573AA.00733A56@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Fri, 7 Dec 2007 22:58:35 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 8.0|August 02, 2007) at 07/12/2007
 23:00:07
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

smokey <smokeystu@gmail.com> wrote on 04/12/2007 16:54:32:

> Thanks for the information on o.a.l.search.spans.
>
> I was thinking of parsing the phrase query string into a
> sequence of terms,
> then constructing a phrase query object using add(Term term,
> int position)
> method in org.apache.lucene.search.PhraseQuery class. Then I can inject
> similar words (suggested by SpellChecker) at appropriate
> positions for each
> term as I construct the final phrase query object.
>
> Do you agree that this should work too?

I never tried this but I'm sure it will not work.

The phrase query scorer requires all the terms to
appear - either at the 'right' place or with slop
for sloppy phrases. Therefore if you inject two
terms in the same position the scorer will require
to find both of them in the same position in order to
match a document. This would be an AND logic, while
what you need is an OR logic.

The phrase positions are handy for something else:
supporting searching when stopwords where filtered
(either at indexing or at search or both).

Regards,
Doron


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 21:04:25 2007
Return-Path: <java-user-return-31387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54525 invoked from network); 7 Dec 2007 21:04:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 21:04:25 -0000
Received: (qmail 45293 invoked by uid 500); 7 Dec 2007 21:04:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44875 invoked by uid 500); 7 Dec 2007 21:04:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44862 invoked by uid 99); 7 Dec 2007 21:04:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 13:04:06 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tremerson@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 21:03:44 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1814032wah
        for <java-user@lucene.apache.org>; Fri, 07 Dec 2007 13:03:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=iEHHRcP1uLl7901MF0QZfalpQi8fvGlPHYpSdjVu5gQ=;
        b=Ok9bJKz1JMgwezH9Q3VgOufrbLbQQXAiCo3GT2oJ3aRRDKh9IV1mK8pzL/z2ebkAsudeA+/EZBe0b/qYSti2jKaWFj8rcgiRaRoe0TK2P/GB/TRt5fozUReZpGmaOmKO1gngda66Qo6UyubsVEGrBKOMxtDBrtXLWB25+Zi1ndc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dktxMZc4zWlVMk988Xv9GOXIDY0AYONVF16G/DUe17CSLhFhJd0ZcXJuax7Ck63k1okMDtVv2pnCQTNhgDAJ/2Vb4cKYrwxPPWYBiWTYvkDWbU2fB5pcZ2ez+lP79m4X+k/9Iy+hdnhvpT4A/+2KMi8ZVe1KsaPN2XAoLEaP8/A=
Received: by 10.115.89.1 with SMTP id r1mr1741865wal.1197061426088;
        Fri, 07 Dec 2007 13:03:46 -0800 (PST)
Received: by 10.115.74.5 with HTTP; Fri, 7 Dec 2007 13:03:46 -0800 (PST)
Message-ID: <cefddd100712071303r7282284cx7953420d774e6d4c@mail.gmail.com>
Date: Fri, 7 Dec 2007 16:03:46 -0500
From: "Tom Emerson" <tremerson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boosting hits based on a value in a field, without that field contributing to the search
In-Reply-To: <11590226-BA59-484E-9224-490DFCB8418A@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14520_4802052.1197061426089"
References: <cefddd100712071042u29973d92n75f16a5e8f6f799@mail.gmail.com>
	 <11590226-BA59-484E-9224-490DFCB8418A@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14520_4802052.1197061426089
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Grant,

I was thinking that something in o.a.l.search.function was going to be the
route to take, but wanted to hear if there were other ideas from the
experts. Thanks!

A custom sort wouldn't work in this case because we don't want the items to
necessarily be bunched together, rather just have their scores increased.

Thanks again.

    -tree

On Dec 7, 2007 3:26 PM, Grant Ingersoll <gsingers@apache.org> wrote:

> Have a look at the o.a.l.search.function package, which can be used to
> give boosts to documents based on the value contained in a field.
> Also, would a custom sort work?
>
> -Grant
>
> On Dec 7, 2007, at 1:42 PM, Tom Emerson wrote:
>
> > Hello,
> >
> > I'm looking for suggestions on how to deal with the following
> > (simplified)
> > scenario (Lucene 2.2.0):
> >
> > Documents in my index have some number of fields that are searched in
> > various combinations via boolean queries.
> >
> > Each document also contains a field that contains a field that isn't
> > searched that contains values "Foo", "Bar", "Baz", or no value at all.
> >
> > I need to boost the score of a hit in a Document by different
> > amounts based
> > on whether the field in the matching document contains "Foo", "Bar",
> > or
> > "Baz".
> >
> > Heretofore I have been adding a document boost at indexing time
> > based on the
> > source data that is being indexed in each document. This makes the
> > boost
> > apply across the board and gives the desired results. However, my
> > users now
> > want to the ability to selectively apply the boost or not, so doing
> > this at
> > indexing time is no longer an option.
> >
> > Many thanks in advance for your thoughts,
> >
> >    -tree
> >
> > --
> > Tom Emerson
> > tremerson@gmail.com
> > http://www.dreamersrealm.net/~tree<http://www.dreamersrealm.net/%7Etree>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Tom Emerson
tremerson@gmail.com
http://www.dreamersrealm.net/~tree

------=_Part_14520_4802052.1197061426089--

From java-user-return-31388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 21:22:36 2007
Return-Path: <java-user-return-31388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59288 invoked from network); 7 Dec 2007 21:22:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 21:22:35 -0000
Received: (qmail 76602 invoked by uid 500); 7 Dec 2007 21:22:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76578 invoked by uid 500); 7 Dec 2007 21:22:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76567 invoked by uid 99); 7 Dec 2007 21:22:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 13:22:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tremerson@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 21:21:55 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1823131wah
        for <java-user@lucene.apache.org>; Fri, 07 Dec 2007 13:21:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=egHfEDHeXVfl5nKuPHwaB4ipECuRDVu5tYSJBI/LYAI=;
        b=qir1jrRC50dE0mvK+YTHW6v3iQ8ODq5f3ejm4ctjzL/17OnPDlGfwKxHQcnWarpLtxw9ZZpf2CxNyFh0jvTEOuJJTBVM9Nu/bw0hKvRHnS7VQhstQaZFV6+UbTfdzKG7Eaq7pUZDtUmPKo4XqOV0C+kyrNaDLq/FLKuLOkLSF5w=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WbIs0MCLzN5QIgNBHUq9QRyICdatvD+1h972NzHFKu7Y1wN6vFknx6Bey7ftpp8AVbkAz5KoZiD6AuvL+PKqqkvSr6gDMl40ozQKKm9bo74uxfJQpVrNkqRJPKAG6z6kgubZJU6e5u+SHiVYOue+kTIe+kZTL81Dl2t7oM1OF3o=
Received: by 10.114.124.1 with SMTP id w1mr3972610wac.1197062514638;
        Fri, 07 Dec 2007 13:21:54 -0800 (PST)
Received: by 10.115.74.5 with HTTP; Fri, 7 Dec 2007 13:21:54 -0800 (PST)
Message-ID: <cefddd100712071321y238578aehf5e21d3793121817@mail.gmail.com>
Date: Fri, 7 Dec 2007 16:21:54 -0500
From: "Tom Emerson" <tremerson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Rewrite one phrase to another in search query
In-Reply-To: <46845683.2060604@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14589_19091544.1197062514637"
References: <5751da780706270738j19fdcb0cx4013844720e47275@mail.gmail.com>
	 <46845683.2060604@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14589_19091544.1197062514637
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Mark,

Thanks for the pointer, but for my application I already have a custom query
parser, and I think the use of a functional query will do what I want.

    -tree

On Jun 28, 2007 7:46 PM, Mark Miller <markrmiller@gmail.com> wrote:

> You might try my Query Parser, Qsol. http://myhardshadow.com/qsol.php
> There is a find/replace feature that will do what you want. FindReplace
> takes the find string, the replace string, boolean for case sensitive,
> boolean to indicate the replacement will act as an operator (allows for
> correct default space operator functionality).
>
> - Mark
> Example Code:
>
>        QsolParser parser = ParserFactory.getInstance(new
> QsolConfiguration())
>                                     .getParser(false);
>
>        parser.addFindReplace(new FindReplace("\"the old fast razor\"",
> "tofr",
>                true, false));
>
>        parser.addFindReplace(new FindReplace("tofr", "\"the old fast
> razor\"",
>                true, false));
>
>        example = "test(\"the old fast razor\" & mark)";
>        expected = "+test:tofr +test:mark";
>        assertEquals(expected, parse(example));
>
>        Parse Method:
>
>        Query result = null;
>        try {
>            result = parser.parse("field", query, analyzer);
>        } catch (EmptyQueryException e) {
>            return "";
>        } catch (QsolSyntaxException e) {
>            throw new RuntimeException(e);
>        }
>
>        return result.toString();
>
> Aliaksandr Radzivanovich wrote:
> > What if I need to search for synonyms, but synonyms can be expanded to
> > phrases of several words?
> > For example, user enters query "tcp", then my application should also
> > find documents containing phrase "Transmission Control Protocol". And
> > conversely, user enters "Transmission Control Protocol", then my
> > application should also find documents with word "tcp".
> >
> > It seems like Lucene does not support this scenario out of the box.
> > Then where to look for the solution? What Lucene
> > extensions/classes/interfaces should I investigate?
> >
> > Thanks.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Tom Emerson
tremerson@gmail.com
http://www.dreamersrealm.net/~tree

------=_Part_14589_19091544.1197062514637--

From java-user-return-31389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 07 21:23:10 2007
Return-Path: <java-user-return-31389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59699 invoked from network); 7 Dec 2007 21:23:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 7 Dec 2007 21:23:10 -0000
Received: (qmail 78364 invoked by uid 500); 7 Dec 2007 21:22:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78335 invoked by uid 500); 7 Dec 2007 21:22:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78323 invoked by uid 99); 7 Dec 2007 21:22:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 13:22:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tremerson@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 21:22:29 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1823131wah
        for <java-user@lucene.apache.org>; Fri, 07 Dec 2007 13:22:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=MvhNJKecCIVcd9E5H0MAbaOciA9N1tfi4Kr6Z1GjC7s=;
        b=HP0nXWh/pwlZiokzGyRJXVDzoUPolmnP5waC2zfLI3CMVtaL+KVOpw0sr2Zynw+753LaLqRNoDX3EUc5duoTu9Jybqt5PYZtyctaVlK4AZVHwxAtJd07dvq8Byu/pGe+Zp2MoEdqNTXAxAXd8RKiA4/axmT1hPjJMwX2LyalJ2g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=A67l5RzkPToDjiv1G3LewR6c6QG2pucfK5MAV2PVNv5ZYsz8IelSL+ZQrMBzbIiv4JgBrd4VuQzhERYMVNbx47prMFmo2jL0bsjij2kXu/vfa2pGXPXAfOXxvEuPnR0yagZowerFEje3AlWYeYaaneYQ+UbhF2H57obnntJTpkI=
Received: by 10.114.192.1 with SMTP id p1mr200078waf.1197062551943;
        Fri, 07 Dec 2007 13:22:31 -0800 (PST)
Received: by 10.115.74.5 with HTTP; Fri, 7 Dec 2007 13:22:31 -0800 (PST)
Message-ID: <cefddd100712071322p6cca5bfai2f6377a158061747@mail.gmail.com>
Date: Fri, 7 Dec 2007 16:22:31 -0500
From: "Tom Emerson" <tremerson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Rewrite one phrase to another in search query
In-Reply-To: <cefddd100712071321y238578aehf5e21d3793121817@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14595_24795528.1197062551941"
References: <5751da780706270738j19fdcb0cx4013844720e47275@mail.gmail.com>
	 <46845683.2060604@gmail.com>
	 <cefddd100712071321y238578aehf5e21d3793121817@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14595_24795528.1197062551941
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Bleh, never mind this, I've replied to the wrong thread... mea culpa.

On Dec 7, 2007 4:21 PM, Tom Emerson <tremerson@gmail.com> wrote:

> Hi Mark,
>
> Thanks for the pointer, but for my application I already have a custom
> query parser, and I think the use of a functional query will do what I want.
>
>     -tree
>
>
> On Jun 28, 2007 7:46 PM, Mark Miller < markrmiller@gmail.com> wrote:
>
> > You might try my Query Parser, Qsol. http://myhardshadow.com/qsol.php
> > There is a find/replace feature that will do what you want. FindReplace
> > takes the find string, the replace string, boolean for case sensitive,
> > boolean to indicate the replacement will act as an operator (allows for
> > correct default space operator functionality).
> >
> > - Mark
> > Example Code:
> >
> >        QsolParser parser = ParserFactory.getInstance(new
> > QsolConfiguration())
> >                                     .getParser(false);
> >
> >        parser.addFindReplace(new FindReplace("\"the old fast razor\"",
> > "tofr",
> >                true, false));
> >
> >        parser.addFindReplace(new FindReplace("tofr", "\"the old fast
> > razor\"",
> >                true, false));
> >
> >        example = "test(\"the old fast razor\" & mark)";
> >        expected = "+test:tofr +test:mark";
> >        assertEquals(expected, parse(example));
> >
> >        Parse Method:
> >
> >        Query result = null;
> >        try {
> >            result = parser.parse ("field", query, analyzer);
> >        } catch (EmptyQueryException e) {
> >            return "";
> >        } catch (QsolSyntaxException e) {
> >            throw new RuntimeException(e);
> >        }
> >
> >        return result.toString();
> >
> > Aliaksandr Radzivanovich wrote:
> > > What if I need to search for synonyms, but synonyms can be expanded to
> > > phrases of several words?
> > > For example, user enters query "tcp", then my application should also
> > > find documents containing phrase "Transmission Control Protocol". And
> > > conversely, user enters "Transmission Control Protocol", then my
> > > application should also find documents with word "tcp".
> > >
> > > It seems like Lucene does not support this scenario out of the box.
> > > Then where to look for the solution? What Lucene
> > > extensions/classes/interfaces should I investigate?
> > >
> > > Thanks.
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Tom Emerson
> tremerson@gmail.com
> http://www.dreamersrealm.net/~tree <http://www.dreamersrealm.net/%7Etree>
>



-- 
Tom Emerson
tremerson@gmail.com
http://www.dreamersrealm.net/~tree

------=_Part_14595_24795528.1197062551941--

From java-user-return-31390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 08 06:30:19 2007
Return-Path: <java-user-return-31390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23473 invoked from network); 8 Dec 2007 06:30:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2007 06:30:19 -0000
Received: (qmail 78064 invoked by uid 500); 8 Dec 2007 06:30:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78025 invoked by uid 500); 8 Dec 2007 06:30:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78014 invoked by uid 99); 8 Dec 2007 06:30:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 07 Dec 2007 22:30:01 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Dec 2007 06:29:41 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 5577F71C265; Fri,  7 Dec 2007 22:29:44 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 5318271C25E
	for <java-user@lucene.apache.org>; Fri,  7 Dec 2007 22:29:44 -0800 (PST)
Date: Fri, 7 Dec 2007 22:29:44 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: does the MultiSearcher class calculate IDF properly?
In-Reply-To: <8856DF1FF75B2348A2D4033D1E8A7EE40222A025@CORPUSMX10C.corp.emc.com>
Message-ID: <Pine.LNX.4.62.0712072222580.16892@radix.cryptio.net>
References: <8856DF1FF75B2348A2D4033D1E8A7EE40222A025@CORPUSMX10C.corp.emc.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


a quick glance at the code seems to indicate that MultiSearcher has code 
for calcuating the docFreq accross all of the Searchables when searching 
(or when the docFreq method is explicitly called) but that explain method 
just delegates to Searchable that the specific docid came from.

if you compare that Explanation score you got with the score returned by 
a HitCollector (or TopDocs) they probably won't match.

So i would say "yes MultiSearcher calculates IDF properly, but 
MultiSeracher.explain is broken.  Please file a bug about this, i can't 
think of an easy way to fix it, but it certianly seems broken to me.


: Subject: does the MultiSearcher class calculate IDF properly?
: 
: I tried the following.  Creating 2 different indexes, search each
: individually and print score details and compare to searching both
: indexes with MulitSearcher and printing score details.  
: 
: The "docFreq" value printed don't seem right - is this just a problem
: with using Explain together with the MultiSearcher?
: 
: 
: Code is like:
: MultiSearcher multi = new MultiSearcher(searchables);
: Hits hits = multi.search(query);
: for(int i=0; i<hits.length(); i++)
: {
:   Explanation expl = multi.explain(query, hits.id(i));
:   System.out.println(expl.toString());
: }
: 
: 
: Output:
: id = 14 score = 0.071
: 0.07073946 = (MATCH) fieldWeight(contents:climate in 2), product of:
:   1.0 = tf(termFreq(contents:climate)=1)
:   1.8109303 = idf(docFreq=1)
:   0.0390625 = fieldNorm(field=contents, doc=2)
: 
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
: 



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 08 14:52:21 2007
Return-Path: <java-user-return-31391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32650 invoked from network); 8 Dec 2007 14:52:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2007 14:52:21 -0000
Received: (qmail 41492 invoked by uid 500); 8 Dec 2007 14:52:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41459 invoked by uid 500); 8 Dec 2007 14:52:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41448 invoked by uid 99); 8 Dec 2007 14:52:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Dec 2007 06:52:02 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.32 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Dec 2007 14:51:40 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr12.xs4all.nl (8.13.8/8.13.8) with ESMTP id lB8EpejF030258
	for <java-user@lucene.apache.org>; Sat, 8 Dec 2007 15:51:40 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <05923C20-EA89-431A-9FC7-CA62603FDF32@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <OF4816461A.DD2100A8-ONC22573AA.00729C9A-C22573AA.00733A56@il.ibm.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Applying SpellChecker to a phrase
Date: Sat, 8 Dec 2007 15:51:39 +0100
References: <OF4816461A.DD2100A8-ONC22573AA.00729C9A-C22573AA.00733A56@il.ibm.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

You might want to take a look at the TokenPhraseSuggester in  
LUCENE-626. It is more or less a FuzzySpanQuery, built from a matrix  
of tokens, but places one search for each possible query out of the  
matrix (with some optional parameters to minimze the query) to find a  
score and the hits for each possible match.

In my test cases this can end up beeing thousands or tens of thousands  
of queries to find the most plausable spelling. So rather than  
applying these queries to the main index, one wants to do it against a  
small a priori index.

http://issues.apache.org/jira/browse/LUCENE-626

TokenPhraseSuggester is quite well documented in code and there is  
some about it in the package level java docs too:
http://ginandtonique.org/~kalle/javadocs/didyoumean/org/apache/lucene/search/didyoumean/package-summary.html#package_description



7 dec 2007 kl. 21.58 skrev Doron Cohen:

> smokey <smokeystu@gmail.com> wrote on 04/12/2007 16:54:32:
>
>> Thanks for the information on o.a.l.search.spans.
>>
>> I was thinking of parsing the phrase query string into a
>> sequence of terms,
>> then constructing a phrase query object using add(Term term,
>> int position)
>> method in org.apache.lucene.search.PhraseQuery class. Then I can  
>> inject
>> similar words (suggested by SpellChecker) at appropriate
>> positions for each
>> term as I construct the final phrase query object.
>>
>> Do you agree that this should work too?
>
> I never tried this but I'm sure it will not work.
>
> The phrase query scorer requires all the terms to
> appear - either at the 'right' place or with slop
> for sloppy phrases. Therefore if you inject two
> terms in the same position the scorer will require
> to find both of them in the same position in order to
> match a document. This would be an AND logic, while
> what you need is an OR logic.
>
> The phrase positions are handy for something else:
> supporting searching when stopwords where filtered
> (either at indexing or at search or both).
>
> Regards,
> Doron
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 08 22:44:59 2007
Return-Path: <java-user-return-31392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24882 invoked from network); 8 Dec 2007 22:44:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2007 22:44:59 -0000
Received: (qmail 46046 invoked by uid 500); 8 Dec 2007 22:44:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46006 invoked by uid 500); 8 Dec 2007 22:44:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45994 invoked by uid 99); 8 Dec 2007 22:44:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Dec 2007 14:44:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.61] (HELO web50307.mail.re2.yahoo.com) (206.190.38.61)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 08 Dec 2007 22:44:19 +0000
Received: (qmail 15910 invoked by uid 60001); 8 Dec 2007 22:44:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=a0fv+L2pK33szBXuTtjQXoD5m61071QQ/XbpMA27BGJglJ0LFf1HSefIPJBeJyesUwsB2N9TFXNvGiC4i0V7D7EqPUyxLp9SWIvSdxDi5i8cPlTV8U+c2YCeEsHPNfEI8F8RsrO+OEVlLCNMkZIxSxX/1me68IcHiYouv9DXTrQ=;
X-YMail-OSG: 5XejgeIVM1n0ZLAYOGSIx3pgUuRXVZC6z75.Ev9jNGMSIzCm
Received: from [72.231.9.236] by web50307.mail.re2.yahoo.com via HTTP; Sat, 08 Dec 2007 14:44:20 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Sat, 8 Dec 2007 14:44:20 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Getting the actual token from Token's term buffer
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <355728.15564.qm@web50307.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

It's been a while since I've written a custom TokenFilter, and I'm not having luck getting tokens out of the TokenStream using 2.3-dev.
I'm hitting that default term buffer of the size 10 using the following:

    public final Token next(Token result) throws IOException {
        result = input.next(result);
        if (result != null) {
            final int len = result.termLength();       // gives me the actual term length, not the buffer of length 10
            result.setTermLength(len);
            System.out.println("LEN 1: " + len);     // prints the actual length
            final char[] buffer = result.termBuffer(); // this still gives me the buffer of length 10
            System.out.println("LEN 2: " + buffer.length); // and this prints 10


Is the idea to:
1) get the char[] buffer from Token
2) get its real length via termLength()
3) manually fill a new char[]  with the content of the buffer, minus the extra buffering?

I'm looking at Token to see how to get the *actual* term, but don't see anything, so it looks like a Filter writer has to do one of these for each term buffer:

    public final Token next(Token result) throws IOException {

        result = input.next(result);

        if (result != null) {
            final int len = result.termLength();
            final char[] buffer = result.termBuffer();
            final char[] token = new char[len];
            System.arraycopy(buffer, 0, token, 0, len);

Am I missing a Token method I could use instead, or is this the new way to go?

Thanks,
Otis



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 08 23:17:10 2007
Return-Path: <java-user-return-31393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30381 invoked from network); 8 Dec 2007 23:17:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 8 Dec 2007 23:17:10 -0000
Received: (qmail 56890 invoked by uid 500); 8 Dec 2007 23:16:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56855 invoked by uid 500); 8 Dec 2007 23:16:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56844 invoked by uid 99); 8 Dec 2007 23:16:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Dec 2007 15:16:52 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 08 Dec 2007 23:16:30 +0000
Received: by an-out-0708.google.com with SMTP id c5so267789anc
        for <java-user@lucene.apache.org>; Sat, 08 Dec 2007 15:16:29 -0800 (PST)
Received: by 10.100.215.5 with SMTP id n5mr3570959ang.1197155789663;
        Sat, 08 Dec 2007 15:16:29 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 44sm1121238hsa.2007.12.08.15.16.29
        (version=TLSv1/SSLv3 cipher=OTHER);
        Sat, 08 Dec 2007 15:16:29 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <355728.15564.qm@web50307.mail.re2.yahoo.com>
References: <355728.15564.qm@web50307.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <05916D62-185B-4422-AF9F-3685E6A60762@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Getting the actual token from Token's term buffer
Date: Sat, 8 Dec 2007 18:15:42 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Otis Gospodnetic wrote:

 > Is the idea to:
 >   1) get the char[] buffer from Token
 >   2) get its real length via termLength()

Yes.  And, on getting the char[] buffer, if you need more space than
its current length, call resizeTermBuffer(int newSize), which returns  
a buffer
of size >= newSize.

 > 3) manually fill a new char[]  with the content of the buffer,  
minus the extra buffering?

Or, better, directly alter the char[] buffer you just got, in place.

If you really need/want to do a new buffer, then you can call
Token.setTermBuffer and it will do the copy (into its buffer) for
you.

Mike


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 09 11:01:08 2007
Return-Path: <java-user-return-31394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44316 invoked from network); 9 Dec 2007 11:01:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2007 11:01:08 -0000
Received: (qmail 10568 invoked by uid 500); 9 Dec 2007 11:00:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10533 invoked by uid 500); 9 Dec 2007 11:00:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10522 invoked by uid 99); 9 Dec 2007 11:00:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Dec 2007 03:00:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Dec 2007 11:00:52 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id lB9B0O63000659
	for <java-user@lucene.apache.org>; Sun, 9 Dec 2007 13:00:24 +0200
Received: from [10.142.130.89] ([10.142.130.89]) by nimitz.teamw.com with ESMTP
	 id mc9d0k6m; 9 Dec 2007 13:00:00 +0200
Message-ID: <475BCAC7.1050300@teamware.com>
Date: Sun, 09 Dec 2007 13:00:23 +0200
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Concurrency between IndexReader and IndexWriter
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Sun, 09 Dec 2007 13:00:24 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

My application batch adds documents to the index using IndexWriter.addDocument. 
  Another thread handles searchers, creating new ones as needed, based on a 
policy.  These searchers open a new IndexReader and there is currently no 
synchronisation between this action and any being performed by my writer threads.

I wanted to use the new writer.deleteDocuments and writer.updateDocument in the 
same phase as the addDocument, so I wrote some test cases to check the behaviour 
of using these in the same phase and found that an IndexReader opened on the 
index during this phase gives some odd values and this has upset my 
understanding of the concurrency issue...

For example, the following

------------------------------------
Create IndexWriter
Loop IndexWriter.addDocument * count

Create IndexReader
Check numDocs
Check maxDoc
Close reader

Loop IndexWriter.deleteDocuments * count

Create IndexReader
Check numDocs
Check maxDoc
Close reader

Close IndexWriter
------------------------------------

However, the numDocs shows interesting numbers with different values of count.

count = 2, numDocs = 0 after add, 0 after delete
count = 100, numDocs = 100 after add and 100 after delete
count = 127, numDocs = 120 after add, 120 after delete
count = 150, numDocs = 150 after add and 150 after delete
count = 1000, numDocs = 1000 after add and 0 after delete

I then checked how terms returned via a TermEnum were affected and these too 
also do not reflect the current state of a deleted document.

I know these numbers are affected by the DEFAULT_MAX_BUFFERED_DELETE_TERMS and 
DEFAULT_MERGE_FACTOR.

My question is therefore: how can actions by a reader determine the real state 
of a Document or Term if a writer is currently updating the index.  Using 
reader.isDeleted(docNum) shows an item is not deleted even though it has been, 
but not flushed.  reader.hasDeletions() also shows false.

My index app never actually uses reader.document() as it collects and caches Id 
terms using TermEnum when opening a reader and stale Ids are handled elsewhere, 
however, as it stands, the following logic

if (!reader.isDeleted(n))
     doc = reader.document(n)

can fail with an IllegalArgumentException if the concurrent writer flushes in 
between the test and read.

Thanks
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 09 11:11:11 2007
Return-Path: <java-user-return-31395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45527 invoked from network); 9 Dec 2007 11:11:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2007 11:11:11 -0000
Received: (qmail 15620 invoked by uid 500); 9 Dec 2007 11:10:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15588 invoked by uid 500); 9 Dec 2007 11:10:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15577 invoked by uid 99); 9 Dec 2007 11:10:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Dec 2007 03:10:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Dec 2007 11:10:32 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id lB9BAPxx001137
	for <java-user@lucene.apache.org>; Sun, 9 Dec 2007 13:10:25 +0200
Received: from [10.142.130.89] ([10.142.130.89]) by nimitz.teamw.com with ESMTP
	 id mc9d9kaq; 9 Dec 2007 13:09:00 +0200
Message-ID: <475BCD07.5010205@teamware.com>
Date: Sun, 09 Dec 2007 13:09:59 +0200
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Concurrency between IndexReader and IndexWriter
References: <475BCAC7.1050300@teamware.com>
In-Reply-To: <475BCAC7.1050300@teamware.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Sun, 09 Dec 2007 13:10:25 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0.001, required 5,
	autolearn=not spam, BAYES_50 0.00)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Using Lucene 2.1

Antony Bowesman wrote:
> My application batch adds documents to the index using 
> IndexWriter.addDocument.  Another thread handles searchers, creating new 
> ones as needed, based on a policy.  These searchers open a new 
> IndexReader and there is currently no synchronisation between this 
> action and any being performed by my writer threads.
> 
> I wanted to use the new writer.deleteDocuments and writer.updateDocument 
> in the same phase as the addDocument, so I wrote some test cases to 
> check the behaviour of using these in the same phase and found that an 
> IndexReader opened on the index during this phase gives some odd values 
> and this has upset my understanding of the concurrency issue...
> 
> For example, the following
> 
> ------------------------------------
> Create IndexWriter
> Loop IndexWriter.addDocument * count
> 
> Create IndexReader
> Check numDocs
> Check maxDoc
> Close reader
> 
> Loop IndexWriter.deleteDocuments * count
> 
> Create IndexReader
> Check numDocs
> Check maxDoc
> Close reader
> 
> Close IndexWriter
> ------------------------------------
> 
> However, the numDocs shows interesting numbers with different values of 
> count.
> 
> count = 2, numDocs = 0 after add, 0 after delete
> count = 100, numDocs = 100 after add and 100 after delete
> count = 127, numDocs = 120 after add, 120 after delete
> count = 150, numDocs = 150 after add and 150 after delete
> count = 1000, numDocs = 1000 after add and 0 after delete
> 
> I then checked how terms returned via a TermEnum were affected and these 
> too also do not reflect the current state of a deleted document.
> 
> I know these numbers are affected by the 
> DEFAULT_MAX_BUFFERED_DELETE_TERMS and DEFAULT_MERGE_FACTOR.
> 
> My question is therefore: how can actions by a reader determine the real 
> state of a Document or Term if a writer is currently updating the 
> index.  Using reader.isDeleted(docNum) shows an item is not deleted even 
> though it has been, but not flushed.  reader.hasDeletions() also shows 
> false.
> 
> My index app never actually uses reader.document() as it collects and 
> caches Id terms using TermEnum when opening a reader and stale Ids are 
> handled elsewhere, however, as it stands, the following logic
> 
> if (!reader.isDeleted(n))
>     doc = reader.document(n)
> 
> can fail with an IllegalArgumentException if the concurrent writer 
> flushes in between the test and read.
> 
> Thanks
> Antony
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 09 11:33:02 2007
Return-Path: <java-user-return-31396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48105 invoked from network); 9 Dec 2007 11:33:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 9 Dec 2007 11:33:02 -0000
Received: (qmail 26591 invoked by uid 500); 9 Dec 2007 11:32:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26547 invoked by uid 500); 9 Dec 2007 11:32:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26536 invoked by uid 99); 9 Dec 2007 11:32:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Dec 2007 03:32:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of adb@teamware.com designates 212.226.92.15 as permitted sender)
Received: from [212.226.92.15] (HELO monkey.teamware.com) (212.226.92.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Dec 2007 11:32:24 +0000
Received: from intrepid.teamw.com (intrepid.teamw.com [10.142.128.11])
	by monkey.teamware.com (8.13.1/8.13.1) with ESMTP id lB9BWJ39001863
	for <java-user@lucene.apache.org>; Sun, 9 Dec 2007 13:32:19 +0200
Received: from [10.142.130.89] ([10.142.130.89]) by nimitz.teamw.com with ESMTP
	 id mc9dw8pu; 9 Dec 2007 13:32:00 +0200
Message-ID: <475BD23C.9060104@teamware.com>
Date: Sun, 09 Dec 2007 13:32:12 +0200
From: Antony Bowesman <adb@teamware.com>
Organization: Teamware Group
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Concurrency between IndexReader and IndexWriter
References: <475BCAC7.1050300@teamware.com>
In-Reply-To: <475BCAC7.1050300@teamware.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (monkey.teamware.com [212.226.92.15]); Sun, 09 Dec 2007 13:32:20 +0200 (EET)
X-TWG-MailScanner-Information: See www.mailscanner.info for information
X-TWG-MailScanner: Found to be clean
X-TWG-MailScanner-SpamCheck: not spam, SpamAssassin (score=0, required 5,
	autolearn=not spam)
X-MailScanner-From: adb@teamware.com
X-Virus-Checked: Checked by ClamAV on apache.org

Looks like I got myself into a twist for nothing - the reader will see a 
consistent view, despite what the writer does as long as the reader remains open.

Appologies for the noise...
Antony



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 04:24:07 2007
Return-Path: <java-user-return-31397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15908 invoked from network); 10 Dec 2007 04:24:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 04:24:07 -0000
Received: (qmail 18178 invoked by uid 500); 10 Dec 2007 04:23:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18142 invoked by uid 500); 10 Dec 2007 04:23:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18131 invoked by uid 99); 10 Dec 2007 04:23:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 09 Dec 2007 20:23:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of m.scott.tiger@gmail.com designates 72.14.246.247 as permitted sender)
Received: from [72.14.246.247] (HELO ag-out-0708.google.com) (72.14.246.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 04:23:29 +0000
Received: by ag-out-0708.google.com with SMTP id 5so6250598agb
        for <java-user@lucene.apache.org>; Sun, 09 Dec 2007 20:23:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=J+j67JZIcW215eXZ3K46vUewnz596N0jp/M558OOFFs=;
        b=ZvITCwfS4kb8NeuU5FLLGgJmfxW2PNEzAsvXL1ZWRkpinX0mPpmHXvkNiNLZts1p09v3Bpgi6JP7wycVE+dB+C6OW95SquMw1XpZZVNiR2uSBwUhU4oLO3yn4shQZzR/k9YZ4Z03jsN7jkrUp2gHKKvY+tnpHCPFtr7lhgQ3EbI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=bOw354a398GOUN+gmFTLjUYEdlGqz6+VvB2PLfXyCdfbnl77SncQYc5RtuOPq4ruF00q2vCdt3sT+nQWgT4LvlRiFUpfF1PcgrSS168bJdsIJQ2AKY2VVvEMFDM/WDEoIgA/OkktJhodwpD40i1aCBt14mpO0tP7HIT2G5f3QPE=
Received: by 10.150.152.17 with SMTP id z17mr2136905ybd.1197260607843;
        Sun, 09 Dec 2007 20:23:27 -0800 (PST)
Received: by 10.150.230.14 with HTTP; Sun, 9 Dec 2007 20:23:27 -0800 (PST)
Message-ID: <b5db44200712092023g16860e81w97da9ffb5bff6867@mail.gmail.com>
Date: Mon, 10 Dec 2007 13:23:27 +0900
From: "Scott Tiger" <m.scott.tiger@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can changes on an index be visible to an open IndexSearcher without reopening it?
In-Reply-To: <1194271242.24173.1219603671@webmail.messagingengine.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <017001c81fb2$8dc53310$330ee00a@telco.tspain.local>
	 <1194271242.24173.1219603671@webmail.messagingengine.com>
X-Virus-Checked: Checked by ClamAV on apache.org

No plan for IndexSearcher.reopen?
I don't know about cost of creating IndexSearcher instance.
But we almost need IndexSearcher.reopen instead of IndexReader.reopen.


----
IndexReader reader = IndexReader.open(...);
IndexSearcher searcher = new IndexSearcher(reader);
searcher.search(...);

...for reopen

IndexReader newReader = reader.reopen();
if (newReader != reader) {
    searcher.close();
    reader.close();
    reader = newReader;
    newReader = null;
    searcher = new IndexSearcher(reader);
} else {
    newReader = null;
}
searcher.search(...);

...want simply...

IndexSearcher newSearcher = searcher.reopen();
if (newSearcher != searcher) {
    searcher.close();
    searcher = newSearcher;
    newSearcher = null;
}

2007/11/5, Michael McCandless <lucene@mikemccandless.com>:
>
> Unfortunately, no.  Once open, the IndexReader/IndexSearcher searches
> a frozen "point in time" snapshot of the index as it existed when it
> was first opened.
>
> You'll have to open a new searcher in order to see the changes.
>
> However, there is work underway now to add a "reopen" method to
> IndexReader that somewhat lowers the cost of opening a reader (not yet
> clear by how much).  This should be part of the next release (2.3).
> See here for details:
>
>   https://issues.apache.org/jira/browse/LUCENE-743
>
> Mike
>
> "Enrique Lamas" <enrique.lamas@corp.ya.com> wrote:
> > Hi,
> > I have an application using Lucene 2.2.0 that opens an IndexSearcher only
> > once to optimize performance, because opening the index is a heavy
> > operation. My question is, if I modify the index with an IndexWriter or
> > IndexModifier, is there any way for the changes to be visible to the
> > opened IndexSearcher without reopening it?
> >
> > Thanks
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 09:34:13 2007
Return-Path: <java-user-return-31398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6837 invoked from network); 10 Dec 2007 09:34:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 09:34:12 -0000
Received: (qmail 61469 invoked by uid 500); 10 Dec 2007 09:33:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60783 invoked by uid 500); 10 Dec 2007 09:33:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60487 invoked by uid 99); 10 Dec 2007 09:33:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 01:33:52 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.187] (HELO rv-out-0910.google.com) (209.85.198.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 09:33:30 +0000
Received: by rv-out-0910.google.com with SMTP id k20so1408789rvb
        for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 01:33:32 -0800 (PST)
Received: by 10.142.154.20 with SMTP id b20mr2797613wfe.1197279212385;
        Mon, 10 Dec 2007 01:33:32 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 7sm4472755wrh.2007.12.10.01.33.31
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 10 Dec 2007 01:33:32 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <b5db44200712092023g16860e81w97da9ffb5bff6867@mail.gmail.com>
References: <017001c81fb2$8dc53310$330ee00a@telco.tspain.local> <1194271242.24173.1219603671@webmail.messagingengine.com> <b5db44200712092023g16860e81w97da9ffb5bff6867@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7FDF77FB-1614-45CA-8B7E-FEAEA5C3374B@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Can changes on an index be visible to an open IndexSearcher without reopening it?
Date: Mon, 10 Dec 2007 04:32:40 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

This is an excellent question.

You are right, what we really need is efficient reopening of an
IndexSearcher.  Creating & warming a new IndexSearcher can be
expensive due [at least] to populating the FieldCache.

This has been discussed before, eg here:

     http://www.gossamer-threads.com/lists/lucene/java-dev/53852#53852

And there is at least one Jira issue opened, here:

     https://issues.apache.org/jira/browse/LUCENE-831

But this is clearly still a "work in progress".  Stay tuned (on
java-dev)...

Mike

Scott Tiger wrote:

> No plan for IndexSearcher.reopen?
> I don't know about cost of creating IndexSearcher instance.
> But we almost need IndexSearcher.reopen instead of IndexReader.reopen.
>
>
> ----
> IndexReader reader = IndexReader.open(...);
> IndexSearcher searcher = new IndexSearcher(reader);
> searcher.search(...);
>
> ...for reopen
>
> IndexReader newReader = reader.reopen();
> if (newReader != reader) {
>     searcher.close();
>     reader.close();
>     reader = newReader;
>     newReader = null;
>     searcher = new IndexSearcher(reader);
> } else {
>     newReader = null;
> }
> searcher.search(...);
>
> ...want simply...
>
> IndexSearcher newSearcher = searcher.reopen();
> if (newSearcher != searcher) {
>     searcher.close();
>     searcher = newSearcher;
>     newSearcher = null;
> }
>
> 2007/11/5, Michael McCandless <lucene@mikemccandless.com>:
>>
>> Unfortunately, no.  Once open, the IndexReader/IndexSearcher searches
>> a frozen "point in time" snapshot of the index as it existed when it
>> was first opened.
>>
>> You'll have to open a new searcher in order to see the changes.
>>
>> However, there is work underway now to add a "reopen" method to
>> IndexReader that somewhat lowers the cost of opening a reader (not  
>> yet
>> clear by how much).  This should be part of the next release (2.3).
>> See here for details:
>>
>>   https://issues.apache.org/jira/browse/LUCENE-743
>>
>> Mike
>>
>> "Enrique Lamas" <enrique.lamas@corp.ya.com> wrote:
>>> Hi,
>>> I have an application using Lucene 2.2.0 that opens an  
>>> IndexSearcher only
>>> once to optimize performance, because opening the index is a heavy
>>> operation. My question is, if I modify the index with an  
>>> IndexWriter or
>>> IndexModifier, is there any way for the changes to be visible to the
>>> opened IndexSearcher without reopening it?
>>>
>>> Thanks
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 09:49:10 2007
Return-Path: <java-user-return-31399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10441 invoked from network); 10 Dec 2007 09:49:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 09:49:09 -0000
Received: (qmail 83847 invoked by uid 500); 10 Dec 2007 09:48:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83809 invoked by uid 500); 10 Dec 2007 09:48:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83798 invoked by uid 99); 10 Dec 2007 09:48:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 01:48:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [124.30.170.13] (HELO hydmail1.satyam.com) (124.30.170.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 09:48:31 +0000
Received: from hyd.satyam.com (hyd.satyam.com [204.252.161.226])
	by hydmail1.satyam.com (8.13.4/8.13.4) with ESMTP id lBA9OSsf021636
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 14:54:28 +0530
Received: from Disclaimerhyd.corp.satyam.ad (hhtbh.satyam.com [172.16.186.212])
	by hyd.satyam.com (8.13.1/8.13.1) with ESMTP id lBA9ljaB027881
	for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 15:17:45 +0530
Received: from hstmsg005.corp.satyam.ad ([172.16.186.216]) by Disclaimerhyd.corp.satyam.ad with Microsoft SMTPSVC(6.0.3790.211); Mon, 10 Dec 2007 15:18:14 +0530
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.607
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: help required ... ~ operator
Priority: normal
Importance: normal
Date: Mon, 10 Dec 2007 15:18:13 +0530
Message-ID: <9312093579B72048B1E5659DC3EC7F39022E9328@hstmsg005.corp.satyam.ad>
In-Reply-To: <05916D62-185B-4422-AF9F-3685E6A60762@mikemccandless.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: help required ... ~ operator
Thread-Index: Acg58Hkk+f9374hLRQyaEh0x+S4ecABIUutA
From: "Shakti_Sareen" <Shakti_Sareen@satyam.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Dec 2007 09:48:14.0563 (UTC) FILETIME=[C8932B30:01C83B11]
X-Virus-Scanned: ClamAV version 0.88.4, clamav-milter version 0.88.4 on hyd.satyam.com
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Hi all,

     I am using StandardAnalyzer() to index the data. I am getting false
hits in ~ operator query.

Actual data is: "signals by magnets of different strength"
and when I am parsing a query: "signals strength"~2  , I am getting a
hit which is a false result.

I am using QueryParser.

Please help on this issue.

Thanks
Shakti Sareen





DISCLAIMER:
This email (including any attachments) is intended for the sole use of =
the intended recipient/s and may contain material that is CONFIDENTIAL =
AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or =
copying or distribution or forwarding of any or all of the contents in =
this message is STRICTLY PROHIBITED. If you are not the intended =
recipient, please contact the sender by email and delete all copies; =
your cooperation in this regard is appreciated.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 10:06:25 2007
Return-Path: <java-user-return-31400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20588 invoked from network); 10 Dec 2007 10:06:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 10:06:25 -0000
Received: (qmail 16929 invoked by uid 500); 10 Dec 2007 10:06:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16900 invoked by uid 500); 10 Dec 2007 10:06:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16889 invoked by uid 99); 10 Dec 2007 10:06:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 02:06:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 10:06:09 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AA37230EFC24; Mon, 10 Dec 2007 03:05:47 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.2] (va-71-53-211-218.dyn.embarqhsd.net [71.53.211.218])
	by ehatchersolutions.com (Postfix) with ESMTP id 46E8330EFC18
	for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 03:05:44 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <9312093579B72048B1E5659DC3EC7F39022E9328@hstmsg005.corp.satyam.ad>
References: <9312093579B72048B1E5659DC3EC7F39022E9328@hstmsg005.corp.satyam.ad>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3F2214A2-57B9-4DA4-BD25-229BB1D8CBCB@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: help required ... ~ operator
Date: Mon, 10 Dec 2007 05:04:58 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.7 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Dec 10, 2007, at 4:48 AM, Shakti_Sareen wrote:
>      I am using StandardAnalyzer() to index the data. I am getting  
> false
> hits in ~ operator query.
>
> Actual data is: "signals by magnets of different strength"
> and when I am parsing a query: "signals strength"~2  , I am getting a
> hit which is a false result.
>
> I am using QueryParser.
>
> Please help on this issue.

Chances are that you've got a stop word remover in the mix, and "by"  
and "of" are being removed, thus making the words close enough for a  
match.  The built in stop filter does not leave gaps for removed  
words.  So you could either use a custom stop filter or remove it  
altogether to keep those words there.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 10:58:51 2007
Return-Path: <java-user-return-31401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41582 invoked from network); 10 Dec 2007 10:58:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 10:58:51 -0000
Received: (qmail 97420 invoked by uid 500); 10 Dec 2007 10:58:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97385 invoked by uid 500); 10 Dec 2007 10:58:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97374 invoked by uid 99); 10 Dec 2007 10:58:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 02:58:34 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 10:58:12 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J1gL1-0003dm-M0
	for java-user@lucene.apache.org; Mon, 10 Dec 2007 02:58:15 -0800
Message-ID: <14250898.post@talk.nabble.com>
Date: Mon, 10 Dec 2007 02:58:15 -0800 (PST)
From: "chris.b" <omelhornomedomundo@gmail.com>
To: java-user@lucene.apache.org
Subject: Problem with termdocs.freq and other
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: omelhornomedomundo@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Here goes,
I'm developing an application using lucene which will evaluate the
representativeness of a list of keywords within a collection of documents.
I'm doing this by indexing the documents and then, loading the list of
keywords and using the IndexReader Class and DefaultSimilarity, retrieving
and average tf of each word (where the tf is obtained through
TermDocs.freq() and the average is the sum of tf's divided by the number of
documents) and the idf for each word, and printing the output in an html
document, together with the documents in which they appear, and others.

At this point, I have found two problems,
I have documents, in which I know the word appears, but still the tf comes
out as '0' (even though the number of documents says 2).
and it doesn't print a list of all the documents (ie: it says there are 2
documents which contain the word, but only one of them is printed).

I don't know if what i'm doing is correct, but to obtain the tf, i'm doing
the following:

			while (termDocs.next()) {
				listaDocNums.add(termDocs.doc());
				tf += termDocs.freq();
				termDocs.next();
			}

where termDocs is an enumeration of the documents which contain the word.

and for the document names I'm doing the following:

			for (int f = 0; f < listaDocNums.size(); f++) {
				outrstream.write(reader.document(listaDocNums.get(f)).get("filename"));
			}

where listaDocNums is an arraylist which contains the numbers for the
documents.
I must also mention that when i try printing the list of numbers, it also
doesn't contain all the documents.

That's it, i think i wrote all that was needed.

Thanks in advance for any help/guidelines :)

Chris
-- 
View this message in context: http://www.nabble.com/Problem-with-termdocs.freq-and-other-tp14250898p14250898.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 11:04:32 2007
Return-Path: <java-user-return-31402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45832 invoked from network); 10 Dec 2007 11:04:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 11:04:32 -0000
Received: (qmail 7893 invoked by uid 500); 10 Dec 2007 11:04:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7863 invoked by uid 500); 10 Dec 2007 11:04:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7851 invoked by uid 99); 10 Dec 2007 11:04:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 03:04:14 -0800
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.153 as permitted sender)
Received: from [195.212.29.153] (HELO mtagate4.de.ibm.com) (195.212.29.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 11:03:50 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate4.de.ibm.com (8.13.8/8.13.8) with ESMTP id lBAB3quR053526
	for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 11:03:52 GMT
Received: from d12av02.megacenter.de.ibm.com (d12av02.megacenter.de.ibm.com [9.149.165.228])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id lBAB3qeS2363516
	for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 12:03:52 +0100
Received: from d12av02.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id lBAB3qi0026416
	for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 12:03:52 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av02.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id lBAB3qUC026407
	for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 12:03:52 +0100
In-Reply-To: <14250898.post@talk.nabble.com>
Subject: Re: Problem with termdocs.freq and other
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OFD35B3B12.58161758-ONC22573AD.003C7803-C22573AD.003CA53A@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 10 Dec 2007 13:02:24 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 8.0|August 02, 2007) at 10/12/2007
 13:03:52
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

>          while (termDocs.next()) {
>             termDocs.next();
>          }

For one, this loop calls next() twice in each iteration,
so every second is skipped... ?

"chris.b" <omelhornomedomundo@gmail.com> wrote on 10/12/2007 12:58:15:

>
> Here goes,
> I'm developing an application using lucene which will evaluate the
> representativeness of a list of keywords within a collection ofdocuments.
> I'm doing this by indexing the documents and then, loading the list of
> keywords and using the IndexReader Class and DefaultSimilarity,retrieving
> and average tf of each word (where the tf is obtained through
> TermDocs.freq() and the average is the sum of tf's divided by
> the number of
> documents) and the idf for each word, and printing the output in an html
> document, together with the documents in which they appear, and others.
>
> At this point, I have found two problems,
> I have documents, in which I know the word appears, but still
> the tf comes
> out as '0' (even though the number of documents says 2).
> and it doesn't print a list of all the documents (ie: it says there are 2
> documents which contain the word, but only one of them is printed).
>
> I don't know if what i'm doing is correct, but to obtain the
> tf, i'm doing
> the following:
>
>          while (termDocs.next()) {
>             listaDocNums.add(termDocs.doc());
>             tf += termDocs.freq();
>             termDocs.next();
>          }
>
> where termDocs is an enumeration of the documents which containthe word.
>
> and for the document names I'm doing the following:
>
>          for (int f = 0; f < listaDocNums.size(); f++) {
>             outrstream.write(reader.document(listaDocNums.
> get(f)).get("filename"));
>          }
>
> where listaDocNums is an arraylist which contains the numbers for the
> documents.
> I must also mention that when i try printing the list of numbers, it also
> doesn't contain all the documents.
>
> That's it, i think i wrote all that was needed.
>
> Thanks in advance for any help/guidelines :)
>
> Chris
> --
> View this message in context: http://www.nabble.com/Problem-
> with-termdocs.freq-and-other-tp14250898p14250898.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 11:27:57 2007
Return-Path: <java-user-return-31403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59221 invoked from network); 10 Dec 2007 11:27:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 11:27:57 -0000
Received: (qmail 43740 invoked by uid 500); 10 Dec 2007 11:27:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43704 invoked by uid 500); 10 Dec 2007 11:27:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43690 invoked by uid 99); 10 Dec 2007 11:27:40 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 03:27:40 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 11:27:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J1gnA-0004dz-8g
	for java-user@lucene.apache.org; Mon, 10 Dec 2007 03:27:20 -0800
Message-ID: <14251256.post@talk.nabble.com>
Date: Mon, 10 Dec 2007 03:27:20 -0800 (PST)
From: "chris.b" <omelhornomedomundo@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with termdocs.freq and other
In-Reply-To: <OFD35B3B12.58161758-ONC22573AD.003C7803-C22573AD.003CA53A@il.ibm.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: omelhornomedomundo@gmail.com
References: <14250898.post@talk.nabble.com> <OFD35B3B12.58161758-ONC22573AD.003C7803-C22573AD.003CA53A@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Okay, now i feel real stupid :p
Seen as that solved all my problems (i think),

thank you very much,
Chris



Doron Cohen wrote:
> 
>>          while (termDocs.next()) {
>>             termDocs.next();
>>          }
> 
> For one, this loop calls next() twice in each iteration,
> so every second is skipped... ?
> 
> "chris.b" <omelhornomedomundo@gmail.com> wrote on 10/12/2007 12:58:15:
> 
>>
>> Here goes,
>> I'm developing an application using lucene which will evaluate the
>> representativeness of a list of keywords within a collection ofdocuments.
>> I'm doing this by indexing the documents and then, loading the list of
>> keywords and using the IndexReader Class and DefaultSimilarity,retrieving
>> and average tf of each word (where the tf is obtained through
>> TermDocs.freq() and the average is the sum of tf's divided by
>> the number of
>> documents) and the idf for each word, and printing the output in an html
>> document, together with the documents in which they appear, and others.
>>
>> At this point, I have found two problems,
>> I have documents, in which I know the word appears, but still
>> the tf comes
>> out as '0' (even though the number of documents says 2).
>> and it doesn't print a list of all the documents (ie: it says there are 2
>> documents which contain the word, but only one of them is printed).
>>
>> I don't know if what i'm doing is correct, but to obtain the
>> tf, i'm doing
>> the following:
>>
>>          while (termDocs.next()) {
>>             listaDocNums.add(termDocs.doc());
>>             tf += termDocs.freq();
>>             termDocs.next();
>>          }
>>
>> where termDocs is an enumeration of the documents which containthe word.
>>
>> and for the document names I'm doing the following:
>>
>>          for (int f = 0; f < listaDocNums.size(); f++) {
>>             outrstream.write(reader.document(listaDocNums.
>> get(f)).get("filename"));
>>          }
>>
>> where listaDocNums is an arraylist which contains the numbers for the
>> documents.
>> I must also mention that when i try printing the list of numbers, it also
>> doesn't contain all the documents.
>>
>> That's it, i think i wrote all that was needed.
>>
>> Thanks in advance for any help/guidelines :)
>>
>> Chris
>> --
>> View this message in context: http://www.nabble.com/Problem-
>> with-termdocs.freq-and-other-tp14250898p14250898.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Problem-with-termdocs.freq-and-other-tp14250898p14251256.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 11:43:07 2007
Return-Path: <java-user-return-31404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69724 invoked from network); 10 Dec 2007 11:43:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 11:43:06 -0000
Received: (qmail 64791 invoked by uid 500); 10 Dec 2007 11:42:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64754 invoked by uid 500); 10 Dec 2007 11:42:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64732 invoked by uid 99); 10 Dec 2007 11:42:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 03:42:50 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.151 as permitted sender)
Received: from [195.212.29.151] (HELO mtagate2.de.ibm.com) (195.212.29.151)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 11:42:27 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate2.de.ibm.com (8.13.8/8.13.8) with ESMTP id lBABgTKw156600
	for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 11:42:29 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id lBABgSFT2175182
	for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 12:42:28 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id lBABgSgu000669
	for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 12:42:28 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id lBABgSvL000666
	for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 12:42:28 +0100
In-Reply-To: <14251256.post@talk.nabble.com>
Subject: Re: Problem with termdocs.freq and other
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF0C80AD35.107C7BEE-ONC22573AD.003F2557-C22573AD.00402DC1@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Mon, 10 Dec 2007 13:41:00 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 8.0|August 02, 2007) at 10/12/2007
 13:42:28
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

> Seen as that solved all my problems (i think),

Glad it helped! (btw it's always like this with,
debugging - others see stuff in my code that I don't)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 16:40:01 2007
Return-Path: <java-user-return-31405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80963 invoked from network); 10 Dec 2007 16:40:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 16:40:01 -0000
Received: (qmail 87587 invoked by uid 500); 10 Dec 2007 16:39:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87558 invoked by uid 500); 10 Dec 2007 16:39:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87547 invoked by uid 99); 10 Dec 2007 16:39:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 08:39:43 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [134.130.7.73] (HELO mta-2.ms.rz.rwth-aachen.de) (134.130.7.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 16:39:44 +0000
Received: from ironport-out-2.rz.rwth-aachen.de ([134.130.3.59])
 by mta-2.ms.rz.RWTH-Aachen.de
 (Sun Java System Messaging Server 6.2-8.04 (built Feb 28 2007))
 with ESMTP id <0JSU00INDE9O0NC0@mta-2.ms.rz.RWTH-Aachen.de> for
 java-user@lucene.apache.org; Mon, 10 Dec 2007 17:39:24 +0100 (CET)
Received: from relay.rwth-aachen.de ([134.130.3.1])
 by ironport-in-2.rz.rwth-aachen.de with ESMTP; Mon, 10 Dec 2007 17:39:24 +0100
Received: from numa-i.igpm.rwth-aachen.de
 (numa-i.igpm.RWTH-Aachen.DE [134.130.161.252])
	by relay.rwth-aachen.de (8.13.7/8.13.3/1) with ESMTP id lBAGdN0r014794	for
 <java-user@lucene.apache.org>; Mon, 10 Dec 2007 17:39:23 +0100 (MET)
Received: by numa-i.igpm.rwth-aachen.de (Postfix, from userid 230)
	id B67EF1068DC; Mon, 10 Dec 2007 17:39:22 +0100 (CET)
Date: Mon, 10 Dec 2007 17:39:22 +0100 (CET)
From: Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
Subject: content depending Analyzing
To: java-user@lucene.apache.org
Reply-to: jarausch@igpm.rwth-aachen.de
Message-id: <tkrat.20c3bd125562c742@igpm.rwth-aachen.de>
MIME-version: 1.0
Content-type: TEXT/PLAIN; CHARSET=us-ascii
Content-transfer-encoding: 7BIT
Content-disposition: INLINE
X-IronPort-AV: E=Sophos;i="4.23,277,1194217200";   d="scan'208";a="23993123"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I'm new to Lucene. I've seen similar questions to mine
but didn't get an answer to my question:

I'd like to index books from our library.
Among other field there are

LANG  which contains a code specifying the language
      the book is written in

TOC   the table of contents

When indexing I have to specify an Analyzer (esp. for
the TOC field) but that depends on the LANG field.
As far as I understood from the LiA book, an Analyzer
implements a 'TokenStream(String fieldName, Reader reader)"
But for me that's too late. When tokenizing the TOC
field I would need access to the LANG field to decide
how to tokenize.

Is there a solution to this problem?

Many thanks for your help,

Helmut Jarausch

Lehrstuhl fuer Numerische Mathematik
RWTH - Aachen University
D 52056 Aachen, Germany

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 18:58:40 2007
Return-Path: <java-user-return-31406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39342 invoked from network); 10 Dec 2007 18:58:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 18:58:40 -0000
Received: (qmail 4338 invoked by uid 500); 10 Dec 2007 18:58:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4308 invoked by uid 500); 10 Dec 2007 18:58:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4297 invoked by uid 99); 10 Dec 2007 18:58:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 10:58:22 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.222.32.20] (HELO mexforward.lss.emc.com) (128.222.32.20)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 18:58:22 +0000
Received: from hop04-l1d11-si01.isus.emc.com (HOP04-L1D11-SI01.isus.emc.com [10.254.111.54])
	by mexforward.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id lBAIw099006653
	for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 13:58:00 -0500 (EST)
Received: from mailhub.lss.emc.com (sesha.lss.emc.com [10.254.144.12]) by hop04-l1d11-si01.isus.emc.com (Tablus Interceptor) for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 13:58:00 -0500
Received: from corpussmtp1.corp.emc.com (corpussmtp1.corp.emc.com [128.221.10.43])
	by mailhub.lss.emc.com (Switch-3.2.5/Switch-3.1.7) with ESMTP id lBAIvT9G000170
	for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 13:57:58 -0500 (EST)
From: Seneviratne_Yasoja@emc.com
Received: from CORPUSMX10C.corp.emc.com ([128.221.14.94]) by corpussmtp1.corp.emc.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 10 Dec 2007 13:57:48 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: does the MultiSearcher class calculate IDF properly?
Date: Mon, 10 Dec 2007 13:57:47 -0500
Message-ID: <8856DF1FF75B2348A2D4033D1E8A7EE40222A037@CORPUSMX10C.corp.emc.com>
In-Reply-To: <Pine.LNX.4.62.0712072222580.16892@radix.cryptio.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: does the MultiSearcher class calculate IDF properly?
Thread-Index: Acg5Y9CDqw7g4OHgQQaSw9QHXvgssQB+pUkA
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 10 Dec 2007 18:57:48.0531 (UTC) FILETIME=[8E976430:01C83B5E]
X-PMX-Version: 4.7.1.128075, Antispam-Engine: 2.5.1.298604, Antispam-Data: 2007.8.30.53115
X-PerlMx-Spam: Gauge=, SPAM=1%, Reason='EMC_FROM_0+ -3, NO_REAL_NAME 0, __CT 0, __CTE 0, __CT_TEXT_PLAIN 0, __HAS_MSGID 0, __IMS_MSGID 0, __MIME_TEXT_ONLY 0, __MIME_VERSION 0, __SANE_MSGID 0'
X-Tablus-Inspected: yes
X-Tablus-Classifications: public
X-Tablus-Action: allow
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you for the response.  I logged a bug
https://issues.apache.org/jira/browse/LUCENE-1087

-----Original Message-----
From: Chris Hostetter [mailto:hossman_lucene@fucit.org]=20
Sent: Friday, December 07, 2007 10:30 PM
To: java-user@lucene.apache.org
Subject: Re: does the MultiSearcher class calculate IDF properly?


a quick glance at the code seems to indicate that MultiSearcher has code

for calcuating the docFreq accross all of the Searchables when searching

(or when the docFreq method is explicitly called) but that explain
method=20
just delegates to Searchable that the specific docid came from.

if you compare that Explanation score you got with the score returned by

a HitCollector (or TopDocs) they probably won't match.

So i would say "yes MultiSearcher calculates IDF properly, but=20
MultiSeracher.explain is broken.  Please file a bug about this, i can't=20
think of an easy way to fix it, but it certianly seems broken to me.


: Subject: does the MultiSearcher class calculate IDF properly?
:=20
: I tried the following.  Creating 2 different indexes, search each
: individually and print score details and compare to searching both
: indexes with MulitSearcher and printing score details. =20
:=20
: The "docFreq" value printed don't seem right - is this just a problem
: with using Explain together with the MultiSearcher?
:=20
:=20
: Code is like:
: MultiSearcher multi =3D new MultiSearcher(searchables);
: Hits hits =3D multi.search(query);
: for(int i=3D0; i<hits.length(); i++)
: {
:   Explanation expl =3D multi.explain(query, hits.id(i));
:   System.out.println(expl.toString());
: }
:=20
:=20
: Output:
: id =3D 14 score =3D 0.071
: 0.07073946 =3D (MATCH) fieldWeight(contents:climate in 2), product of:
:   1.0 =3D tf(termFreq(contents:climate)=3D1)
:   1.8109303 =3D idf(docFreq=3D1)
:   0.0390625 =3D fieldNorm(field=3Dcontents, doc=3D2)
:=20
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:=20



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 19:00:05 2007
Return-Path: <java-user-return-31407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39831 invoked from network); 10 Dec 2007 19:00:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 19:00:05 -0000
Received: (qmail 9872 invoked by uid 500); 10 Dec 2007 18:59:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9847 invoked by uid 500); 10 Dec 2007 18:59:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9834 invoked by uid 99); 10 Dec 2007 18:59:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 10:59:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.8 as permitted sender)
Received: from [80.67.29.8] (HELO smtprelay08.ispgateway.de) (80.67.29.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 18:59:43 +0000
Received: (qmail 13562 invoked from network); 10 Dec 2007 18:59:22 -0000
Received: from unknown (HELO p54bfeddf.dip.t-dialin.net) (695637@[84.191.237.223])
          (envelope-sender <lucenelist2007@danielnaber.de>)
          by smtprelay08.ispgateway.de (qmail-ldap-1.03) with AES256-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 10 Dec 2007 18:59:22 -0000
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: content depending Analyzing
Date: Mon, 10 Dec 2007 19:59:45 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <tkrat.20c3bd125562c742@igpm.rwth-aachen.de>
In-Reply-To: <tkrat.20c3bd125562c742@igpm.rwth-aachen.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200712101959.45796@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Montag, 10. Dezember 2007, Helmut Jarausch wrote:

>  an Analyzer
> implements a 'TokenStream(String fieldName, Reader reader)"
> But for me that's too late. When tokenizing the TOC
> field I would need access to the LANG field to decide
> how to tokenize.

IndexWriter contains an addDocument() call that also takes an analyzer. If 
you always use that call, the analyzer in the IndexWriter constructor will 
never be called. This way you can create your Document object and always 
use the appropriate analyzer.

I hope you are aware that you need to use the same analyzer for searching. 
This is a bit difficult with multiple analyzers, unless you ask the users 
what language they want to search in.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 19:57:25 2007
Return-Path: <java-user-return-31408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66446 invoked from network); 10 Dec 2007 19:57:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 19:57:25 -0000
Received: (qmail 4977 invoked by uid 500); 10 Dec 2007 19:57:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4940 invoked by uid 500); 10 Dec 2007 19:57:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4929 invoked by uid 99); 10 Dec 2007 19:57:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 11:57:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.236.178] (HELO web58410.mail.re3.yahoo.com) (68.142.236.178)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Dec 2007 19:56:46 +0000
Received: (qmail 3263 invoked by uid 60001); 10 Dec 2007 19:56:47 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=pydOx0irwS9vdeHZ7uGmoIBgNahU0g3H9lrLVAbZ6EXuE2XnC3FBICfa1xlIcLVnZndGZA80b5euo6YOia6UhWmI8KT4EagFL5Pw1CI+M0jLIgelz1Hr+r2lGonN82fNZIaX3+99GcpoATkGP3Y9aX41oSg82X5KiqQoRMVyNrc=;
X-YMail-OSG: wCcinToVM1lL6e8DRVVb2vYfzjr6P80oTNpHxCA06NMmyok3PYHGJ9d7aNwJpeVpJwlBrVx5PRT2YpqsRMApGE32fjc4KUduc8Lim.UQhHC8Gpx2MGd4ZW_mUq8jwA--
Received: from [204.15.20.249] by web58410.mail.re3.yahoo.com via HTTP; Mon, 10 Dec 2007 11:56:46 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Mon, 10 Dec 2007 11:56:46 -0800 (PST)
From: Bob Daha <neokalus@yahoo.com>
Subject: Out of memory?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1725124179-1197316606=:3248"
Message-ID: <79811.3248.qm@web58410.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1725124179-1197316606=:3248
Content-Type: text/plain; charset=us-ascii

Hello,

I'm building a ticketing system for my company and am using Lucene for some of the more complicated queries.  I'd say my application differs from the typical lucene application in that my documents are (re)-indexed more frequently, the query load is actually relatively light, and most of the indexed document data is numerical.  (ticket id, owner id, date ranges, etc are numbers and there's just one giant "text" searchable field.)

I just got an out of memory exception on my app.  When I fired up jhat, I was very surprised at the object allocation:

7862 instances of class org.apache.lucene.index.Term 
7787 instances of class org.apache.lucene.index.TermInfo 
504 instances of class org.apache.lucene.index.FieldInfo 
224 instances of class org.apache.lucene.index.TermBuffer 
79 instances of class org.apache.lucene.index.CompoundFileReader$CSIndexInput 
75 instances of class org.apache.lucene.index.SegmentTermEnum 
70 instances of class org.apache.lucene.store.RAMFile 
64 instances of class org.apache.lucene.store.RAMInputStream 
63 instances of class org.apache.lucene.index.FieldInfos 
20 instances of class com.facebook.tps_search_server.tps_search_ticket 
20 instances of class com.facebook.tps_search_server.tps_search_ticket$Isset 
10 instances of class org.apache.lucene.index.IndexReader$FieldOption 
9 instances of class org.apache.lucene.index.IndexFileDeleter$RefCount 
8 instances of class org.apache.lucene.index.CompoundFileReader$FileEntry 
8 instances of class org.apache.lucene.index.CompoundFileWriter$FileEntry 
8 instances of class org.apache.lucene.index.SegmentReader$Norm 
7 instances of class org.apache.lucene.document.FieldSelectorResult 
5 instances of class org.apache.lucene.document.Field$TermVector 
5 instances of class org.apache.lucene.queryParser.Token 
4 instances of class org.apache.lucene.document.Field$Index 
4 instances of class org.apache.lucene.search.FieldCacheImpl$Entry 
3 instances of class com.facebook.thrift.protocol.TBinaryProtocol 
3 instances of class com.facebook.thrift.transport.TSocket 
3 instances of class org.apache.lucene.document.Field$Store 
3 instances of class org.apache.lucene.index.SegmentInfos 
3 instances of class org.apache.lucene.search.BooleanClause$Occur 
2 instances of class com.facebook.thrift.protocol.TBinaryProtocol$Factory 
2 instances of class com.facebook.thrift.server.TThreadPoolServer$WorkerProcess 
2 instances of class com.facebook.thrift.transport.TTransportFactory 
2 instances of class org.apache.lucene.analysis.standard.StandardAnalyzer 
2 instances of class org.apache.lucene.index.SegmentInfo 
2 instances of class org.apache.lucene.queryParser.QueryParser$Operator 
2 instances of class org.apache.lucene.search.DefaultSimilarity 
2 instances of class org.apache.lucene.search.FieldSortedHitQueue$2 
2 instances of class org.apache.lucene.search.Sort 
2 instances of class org.apache.lucene.search.SortField 
2 instances of class org.apache.lucene.store.RAMDirectory 
2 instances of class org.apache.lucene.store.SingleInstanceLockFactory 
2 instances of class [Lorg.apache.lucene.search.SortField;
...

Any ideas on why I'd have so many Term and TermInfo objects?  To give you a little more insight into my application, worker threads can be spawned by client requests that do one of 4 things - search, index tickets, deindex tickets, or reindex tickets.  (reindex a ticket is basically deindex then index ticket)  I'm using a RAMDirectory for all my searches and updates although I have another thread which backs this up to disc periodically.

Thanks,
B




      ____________________________________________________________________________________
Looking for last minute shopping deals?  
Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping
--0-1725124179-1197316606=:3248--

From java-user-return-31409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 22:18:09 2007
Return-Path: <java-user-return-31409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37906 invoked from network); 10 Dec 2007 22:18:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 22:18:09 -0000
Received: (qmail 36582 invoked by uid 500); 10 Dec 2007 22:17:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36546 invoked by uid 500); 10 Dec 2007 22:17:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36531 invoked by uid 99); 10 Dec 2007 22:17:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 14:17:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 66.249.92.171 as permitted sender)
Received: from [66.249.92.171] (HELO ug-out-1314.google.com) (66.249.92.171)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 22:17:26 +0000
Received: by ug-out-1314.google.com with SMTP id u40so68949ugc.29
        for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 14:17:28 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=C75bm8sfZ/450mokwu+FyJTn07Gx2Y7vwIu74qJOjpw=;
        b=t4mO10w9HluhMjleX60m0RSxynzuaoMdVEn1ZXSBIBm7ehcxuNCsmlqvWSp/gyEWaydt/x6MNlyizhbqvjqMP//3cZk8dOzgzHZGEotcEjd5l50HbH38nHfM3A2favRJoxsDnc/Io4Oqv/36Pl2NV0LvL/yGkDkZyNDdKoiVDxU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=PshyVW56v1+/I/JlOarf1MFXbgH5vlxYpzJs6b0AQ0L6rGxLe7LrtsfyhSBU04nSNJeK2qj+vb2aHzE4mB4X4gUQ3GG5x6X7espn1ZtZiw2P2TtWvnFKcIUpLLVrnthXSog1oN0hUGGRzIpIlwhDZNcnCwu/bTIbiNMufYLu0Sg=
Received: by 10.78.193.19 with SMTP id q19mr7855206huf.1197325046837;
        Mon, 10 Dec 2007 14:17:26 -0800 (PST)
Received: by 10.78.155.15 with HTTP; Mon, 10 Dec 2007 14:17:26 -0800 (PST)
Message-ID: <6e3ae6310712101417y3dc0cfd1v3938bfb716bc826e@mail.gmail.com>
Date: Mon, 10 Dec 2007 14:17:26 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Out of memory?
In-Reply-To: <79811.3248.qm@web58410.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <79811.3248.qm@web58410.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Looks like you are using FieldCacheImpl to count search results for
each category. ( or called facet search by a fancy name ).

Well, it's a cache and the terms are loaded in the memory.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer Twenga got 2.6 Million Euro funding!
http://www.techcrunch.com/2007/12/07/twenga-gets-e26-million-for-product-search/

On Dec 10, 2007 11:56 AM, Bob Daha <neokalus@yahoo.com> wrote:
> Hello,
>
> I'm building a ticketing system for my company and am using Lucene for some of the more complicated queries.  I'd say my application differs from the typical lucene application in that my documents are (re)-indexed more frequently, the query load is actually relatively light, and most of the indexed document data is numerical.  (ticket id, owner id, date ranges, etc are numbers and there's just one giant "text" searchable field.)
>
> I just got an out of memory exception on my app.  When I fired up jhat, I was very surprised at the object allocation:
>
> 7862 instances of class org.apache.lucene.index.Term
> 7787 instances of class org.apache.lucene.index.TermInfo
> 504 instances of class org.apache.lucene.index.FieldInfo
> 224 instances of class org.apache.lucene.index.TermBuffer
> 79 instances of class org.apache.lucene.index.CompoundFileReader$CSIndexInput
> 75 instances of class org.apache.lucene.index.SegmentTermEnum
> 70 instances of class org.apache.lucene.store.RAMFile
> 64 instances of class org.apache.lucene.store.RAMInputStream
> 63 instances of class org.apache.lucene.index.FieldInfos
> 20 instances of class com.facebook.tps_search_server.tps_search_ticket
> 20 instances of class com.facebook.tps_search_server.tps_search_ticket$Isset
> 10 instances of class org.apache.lucene.index.IndexReader$FieldOption
> 9 instances of class org.apache.lucene.index.IndexFileDeleter$RefCount
> 8 instances of class org.apache.lucene.index.CompoundFileReader$FileEntry
> 8 instances of class org.apache.lucene.index.CompoundFileWriter$FileEntry
> 8 instances of class org.apache.lucene.index.SegmentReader$Norm
> 7 instances of class org.apache.lucene.document.FieldSelectorResult
> 5 instances of class org.apache.lucene.document.Field$TermVector
> 5 instances of class org.apache.lucene.queryParser.Token
> 4 instances of class org.apache.lucene.document.Field$Index
> 4 instances of class org.apache.lucene.search.FieldCacheImpl$Entry
> 3 instances of class com.facebook.thrift.protocol.TBinaryProtocol
> 3 instances of class com.facebook.thrift.transport.TSocket
> 3 instances of class org.apache.lucene.document.Field$Store
> 3 instances of class org.apache.lucene.index.SegmentInfos
> 3 instances of class org.apache.lucene.search.BooleanClause$Occur
> 2 instances of class com.facebook.thrift.protocol.TBinaryProtocol$Factory
> 2 instances of class com.facebook.thrift.server.TThreadPoolServer$WorkerProcess
> 2 instances of class com.facebook.thrift.transport.TTransportFactory
> 2 instances of class org.apache.lucene.analysis.standard.StandardAnalyzer
> 2 instances of class org.apache.lucene.index.SegmentInfo
> 2 instances of class org.apache.lucene.queryParser.QueryParser$Operator
> 2 instances of class org.apache.lucene.search.DefaultSimilarity
> 2 instances of class org.apache.lucene.search.FieldSortedHitQueue$2
> 2 instances of class org.apache.lucene.search.Sort
> 2 instances of class org.apache.lucene.search.SortField
> 2 instances of class org.apache.lucene.store.RAMDirectory
> 2 instances of class org.apache.lucene.store.SingleInstanceLockFactory
> 2 instances of class [Lorg.apache.lucene.search.SortField;
> ...
>
> Any ideas on why I'd have so many Term and TermInfo objects?  To give you a little more insight into my application, worker threads can be spawned by client requests that do one of 4 things - search, index tickets, deindex tickets, or reindex tickets.  (reindex a ticket is basically deindex then index ticket)  I'm using a RAMDirectory for all my searches and updates although I have another thread which backs this up to disc periodically.
>
> Thanks,
> B
>
>
>
>
>       ____________________________________________________________________________________
> Looking for last minute shopping deals?
> Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 22:25:39 2007
Return-Path: <java-user-return-31410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39983 invoked from network); 10 Dec 2007 22:25:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 22:25:38 -0000
Received: (qmail 45509 invoked by uid 500); 10 Dec 2007 22:25:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45482 invoked by uid 500); 10 Dec 2007 22:25:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45471 invoked by uid 99); 10 Dec 2007 22:25:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 14:25:21 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 22:24:58 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id 7FA90B86E1
	for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 14:24:59 -0800 (PST)
Message-Id: <1A25A95F-10EE-4D63-BDE6-F70F733128D6@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <79811.3248.qm@web58410.mail.re3.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Out of memory?
Date: Mon, 10 Dec 2007 17:24:58 -0500
References: <79811.3248.qm@web58410.mail.re3.yahoo.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Those terms could be coming from a lot of diff. places.

What size JVM heap, etc. are you giving your application?  My guess is  
your index is too big to fit into RAM, you probably need to use a  
FSDirectory or give it more RAM, but it is hard to say for sure w/o  
knowing more about the application.

See http://wiki.apache.org/lucene-java/BasicsOfPerformance for more on  
performance.

-Grant

On Dec 10, 2007, at 2:56 PM, Bob Daha wrote:

> Hello,
>
> I'm building a ticketing system for my company and am using Lucene  
> for some of the more complicated queries.  I'd say my application  
> differs from the typical lucene application in that my documents are  
> (re)-indexed more frequently, the query load is actually relatively  
> light, and most of the indexed document data is numerical.  (ticket  
> id, owner id, date ranges, etc are numbers and there's just one  
> giant "text" searchable field.)
>
> I just got an out of memory exception on my app.  When I fired up  
> jhat, I was very surprised at the object allocation:
>
> 7862 instances of class org.apache.lucene.index.Term
> 7787 instances of class org.apache.lucene.index.TermInfo
> 504 instances of class org.apache.lucene.index.FieldInfo
> 224 instances of class org.apache.lucene.index.TermBuffer
> 79 instances of class org.apache.lucene.index.CompoundFileReader 
> $CSIndexInput
> 75 instances of class org.apache.lucene.index.SegmentTermEnum
> 70 instances of class org.apache.lucene.store.RAMFile
> 64 instances of class org.apache.lucene.store.RAMInputStream
> 63 instances of class org.apache.lucene.index.FieldInfos
> 20 instances of class com.facebook.tps_search_server.tps_search_ticket
> 20 instances of class  
> com.facebook.tps_search_server.tps_search_ticket$Isset
> 10 instances of class org.apache.lucene.index.IndexReader$FieldOption
> 9 instances of class org.apache.lucene.index.IndexFileDeleter$RefCount
> 8 instances of class org.apache.lucene.index.CompoundFileReader 
> $FileEntry
> 8 instances of class org.apache.lucene.index.CompoundFileWriter 
> $FileEntry
> 8 instances of class org.apache.lucene.index.SegmentReader$Norm
> 7 instances of class org.apache.lucene.document.FieldSelectorResult
> 5 instances of class org.apache.lucene.document.Field$TermVector
> 5 instances of class org.apache.lucene.queryParser.Token
> 4 instances of class org.apache.lucene.document.Field$Index
> 4 instances of class org.apache.lucene.search.FieldCacheImpl$Entry
> 3 instances of class com.facebook.thrift.protocol.TBinaryProtocol
> 3 instances of class com.facebook.thrift.transport.TSocket
> 3 instances of class org.apache.lucene.document.Field$Store
> 3 instances of class org.apache.lucene.index.SegmentInfos
> 3 instances of class org.apache.lucene.search.BooleanClause$Occur
> 2 instances of class com.facebook.thrift.protocol.TBinaryProtocol 
> $Factory
> 2 instances of class com.facebook.thrift.server.TThreadPoolServer 
> $WorkerProcess
> 2 instances of class com.facebook.thrift.transport.TTransportFactory
> 2 instances of class  
> org.apache.lucene.analysis.standard.StandardAnalyzer
> 2 instances of class org.apache.lucene.index.SegmentInfo
> 2 instances of class org.apache.lucene.queryParser.QueryParser 
> $Operator
> 2 instances of class org.apache.lucene.search.DefaultSimilarity
> 2 instances of class org.apache.lucene.search.FieldSortedHitQueue$2
> 2 instances of class org.apache.lucene.search.Sort
> 2 instances of class org.apache.lucene.search.SortField
> 2 instances of class org.apache.lucene.store.RAMDirectory
> 2 instances of class org.apache.lucene.store.SingleInstanceLockFactory
> 2 instances of class [Lorg.apache.lucene.search.SortField;
> ...
>
> Any ideas on why I'd have so many Term and TermInfo objects?  To  
> give you a little more insight into my application, worker threads  
> can be spawned by client requests that do one of 4 things - search,  
> index tickets, deindex tickets, or reindex tickets.  (reindex a  
> ticket is basically deindex then index ticket)  I'm using a  
> RAMDirectory for all my searches and updates although I have another  
> thread which backs this up to disc periodically.
>
> Thanks,
> B
>
>
>
>
>       
> ____________________________________________________________________________________
> Looking for last minute shopping deals?
> Find them fast with Yahoo! Search.  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 22:43:07 2007
Return-Path: <java-user-return-31411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46076 invoked from network); 10 Dec 2007 22:43:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 22:43:07 -0000
Received: (qmail 93242 invoked by uid 500); 10 Dec 2007 22:42:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93205 invoked by uid 500); 10 Dec 2007 22:42:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93194 invoked by uid 99); 10 Dec 2007 22:42:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 14:42:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.236.175] (HELO web58407.mail.re3.yahoo.com) (68.142.236.175)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Dec 2007 22:42:25 +0000
Received: (qmail 345 invoked by uid 60001); 10 Dec 2007 22:42:27 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=TW0Ucqce34B9R85w8277T7Jrv7+RLsFLpY5ExgtPd0mKJPc45HggVWDgZLHiZlP5UmR/fyB4XK5qzdBSRVQHb/tEmfgRZ8pK5Umis8BQfstBPkP15rZs/UNna36QLz53nA+TqWxowwvmfe9htAkeUCNOVN2fz3eliCm33Oh/2sc=;
X-YMail-OSG: ozzNIscVM1kC5inbVgHPizcaOS.MDXdO__nVXM_mZdRm.DPWbXDyk59DcuEaVn5DcIrb4P1.74HjeCbozYN1CMCqArMXG.6LsmTwLLKsjtxT_gCC5FSnngVPNPV2mp1gA96ustoFbe7ZZiY-
Received: from [204.15.20.249] by web58407.mail.re3.yahoo.com via HTTP; Mon, 10 Dec 2007 14:42:27 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Mon, 10 Dec 2007 14:42:27 -0800 (PST)
From: Bob Daha <neokalus@yahoo.com>
Subject: Re: Out of memory?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1009121609-1197326547=:99913"
Message-ID: <434508.99913.qm@web58407.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1009121609-1197326547=:99913
Content-Type: text/plain; charset=us-ascii

Interesting... I didn't explicitly turn that on... I'm creating a query using query parser, then executing a search using that query and a sort.  Would this algorithmically somehow invoke the FieldCacheImpl?  If so, anyway I can turn it off?  Basically the caching wouldn't be valuable anyway given the volatility of the index, and I'm not that concerned with speed.  (seeing most queries take well under 20ms)

Here's the searcher thread, if the code would help... note rd is my RAMDirectory object - it is never closed / reopened for the life of the application.

  public tps_search_results searchIndex(String query, String sortColumn, boolean desc) {
    ArrayList<Long> results = new ArrayList<Long>();

    try {

      if (!readerTPS.isCurrent()) {
        searcher.close();
        readerTPS.close();
        readerTPS = IndexReader.open(rd);
        searcher  = new IndexSearcher(readerTPS);
      }

      Query q = parserTPS.parse(query);

      Sort sort = new Sort(sortColumn, desc);

      Hits hits = searcher.search(q, sort);

      for (Iterator<Hit> it = hits.iterator(); it.hasNext(); ) {
        Hit hit = it.next();

        results.add(Long.parseLong(hit.get("ticket_id")));
      }

    } catch (Exception e) {
      rlog.exception(e);
    }

    rlog.queryComplete(": Results count: " + results.size());

    tps_search_results ret_results = new tps_search_results(results);

    return ret_results;
  }


----- Original Message ----
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Sent: Monday, December 10, 2007 2:17:26 PM
Subject: Re: Out of memory?


Looks like you are using FieldCacheImpl to count search results for
each category. ( or called facet search by a fancy name ).

Well, it's a cache and the terms are loaded in the memory.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer Twenga got 2.6 Million Euro funding!
http://www.techcrunch.com/2007/12/07/twenga-gets-e26-million-for-product-search/

On Dec 10, 2007 11:56 AM, Bob Daha <neokalus@yahoo.com> wrote:
> Hello,
>
> I'm building a ticketing system for my company and am using Lucene
 for some of the more complicated queries.  I'd say my application differs
 from the typical lucene application in that my documents are
 (re)-indexed more frequently, the query load is actually relatively light, and
 most of the indexed document data is numerical.  (ticket id, owner id,
 date ranges, etc are numbers and there's just one giant "text"
 searchable field.)
>
> I just got an out of memory exception on my app.  When I fired up
 jhat, I was very surprised at the object allocation:
>
> 7862 instances of class org.apache.lucene.index.Term
> 7787 instances of class org.apache.lucene.index.TermInfo
> 504 instances of class org.apache.lucene.index.FieldInfo
> 224 instances of class org.apache.lucene.index.TermBuffer
> 79 instances of class
 org.apache.lucene.index.CompoundFileReader$CSIndexInput
> 75 instances of class org.apache.lucene.index.SegmentTermEnum
> 70 instances of class org.apache.lucene.store.RAMFile
> 64 instances of class org.apache.lucene.store.RAMInputStream
> 63 instances of class org.apache.lucene.index.FieldInfos
> 20 instances of class
 com.facebook.tps_search_server.tps_search_ticket
> 20 instances of class
 com.facebook.tps_search_server.tps_search_ticket$Isset
> 10 instances of class org.apache.lucene.index.IndexReader$FieldOption
> 9 instances of class
 org.apache.lucene.index.IndexFileDeleter$RefCount
> 8 instances of class
 org.apache.lucene.index.CompoundFileReader$FileEntry
> 8 instances of class
 org.apache.lucene.index.CompoundFileWriter$FileEntry
> 8 instances of class org.apache.lucene.index.SegmentReader$Norm
> 7 instances of class org.apache.lucene.document.FieldSelectorResult
> 5 instances of class org.apache.lucene.document.Field$TermVector
> 5 instances of class org.apache.lucene.queryParser.Token
> 4 instances of class org.apache.lucene.document.Field$Index
> 4 instances of class org.apache.lucene.search.FieldCacheImpl$Entry
> 3 instances of class com.facebook.thrift.protocol.TBinaryProtocol
> 3 instances of class com.facebook.thrift.transport.TSocket
> 3 instances of class org.apache.lucene.document.Field$Store
> 3 instances of class org.apache.lucene.index.SegmentInfos
> 3 instances of class org.apache.lucene.search.BooleanClause$Occur
> 2 instances of class
 com.facebook.thrift.protocol.TBinaryProtocol$Factory
> 2 instances of class
 com.facebook.thrift.server.TThreadPoolServer$WorkerProcess
> 2 instances of class com.facebook.thrift.transport.TTransportFactory
> 2 instances of class
 org.apache.lucene.analysis.standard.StandardAnalyzer
> 2 instances of class org.apache.lucene.index.SegmentInfo
> 2 instances of class
 org.apache.lucene.queryParser.QueryParser$Operator
> 2 instances of class org.apache.lucene.search.DefaultSimilarity
> 2 instances of class org.apache.lucene.search.FieldSortedHitQueue$2
> 2 instances of class org.apache.lucene.search.Sort
> 2 instances of class org.apache.lucene.search.SortField
> 2 instances of class org.apache.lucene.store.RAMDirectory
> 2 instances of class
 org.apache.lucene.store.SingleInstanceLockFactory
> 2 instances of class [Lorg.apache.lucene.search.SortField;
> ...
>
> Any ideas on why I'd have so many Term and TermInfo objects?  To give
 you a little more insight into my application, worker threads can be
 spawned by client requests that do one of 4 things - search, index
 tickets, deindex tickets, or reindex tickets.  (reindex a ticket is
 basically deindex then index ticket)  I'm using a RAMDirectory for all my
 searches and updates although I have another thread which backs this up to
 disc periodically.
>
> Thanks,
> B
>
>
>
>
>      
 ____________________________________________________________________________________
> Looking for last minute shopping deals?
> Find them fast with Yahoo! Search.
  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org







      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs
--0-1009121609-1197326547=:99913--

From java-user-return-31412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 22:43:56 2007
Return-Path: <java-user-return-31412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46419 invoked from network); 10 Dec 2007 22:43:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 22:43:56 -0000
Received: (qmail 96124 invoked by uid 500); 10 Dec 2007 22:43:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96094 invoked by uid 500); 10 Dec 2007 22:43:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96083 invoked by uid 99); 10 Dec 2007 22:43:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 14:43:38 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [68.142.236.178] (HELO web58410.mail.re3.yahoo.com) (68.142.236.178)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 10 Dec 2007 22:43:14 +0000
Received: (qmail 64375 invoked by uid 60001); 10 Dec 2007 22:43:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=fH+Pgk1YdExjryNhRYQT/ZPSehbSqBkLyvzgt77ql0Mg2IsbkbdUKlCJ2iAZ9RutoNsXFgbP8H9t1z/nw7uji/4xhoBtR/LHFiQC/ftgpMkZ1Yn749gXcvwhc4nXvzoLjrJUaWXwS7o2Nn7IVg8kiJdQ3ClKCGtF1luDMe7Pbxw=;
X-YMail-OSG: AzTZW8IVM1mt.5kVGxpJUd4gjGHlIZzdznfmXPiYBMh_47sxCANHNbrNvds3FCln1A6zk8_LAGvSRGUadIPtE2OjeA--
Received: from [204.15.20.249] by web58410.mail.re3.yahoo.com via HTTP; Mon, 10 Dec 2007 14:43:16 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Mon, 10 Dec 2007 14:43:16 -0800 (PST)
From: Bob Daha <neokalus@yahoo.com>
Subject: Re: Out of memory?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1957446321-1197326596=:62552"
Message-ID: <833835.62552.qm@web58410.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

--0-1957446321-1197326596=:62552
Content-Type: text/plain; charset=us-ascii

Thanks for the reply.  The backup of the index on disc is around 80 MB.  I'm giving my JVM 4 gigs of heap space...  I probably should have mentioned in my first thread that this is not the first crash; it's done it a few times now and usually has almost a week of uptime before it crashes even with the growing index.  (last time it crashed the index was about 60MB on disc)  It's also worth noting I am only going to keep around 4 weeks of ticket data and I'm adding week 5 right now, so the index should be relatively close to this size "forever", although rather rapidly changing.

I think *something* is holding onto those terms... just not sure what.  =\



----- Original Message ----
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
Sent: Monday, December 10, 2007 2:24:58 PM
Subject: Re: Out of memory?


Those terms could be coming from a lot of diff. places.

What size JVM heap, etc. are you giving your application?  My guess is
  
your index is too big to fit into RAM, you probably need to use a  
FSDirectory or give it more RAM, but it is hard to say for sure w/o  
knowing more about the application.

See http://wiki.apache.org/lucene-java/BasicsOfPerformance for more on
  
performance.

-Grant

On Dec 10, 2007, at 2:56 PM, Bob Daha wrote:

> Hello,
>
> I'm building a ticketing system for my company and am using Lucene  
> for some of the more complicated queries.  I'd say my application  
> differs from the typical lucene application in that my documents are
  
> (re)-indexed more frequently, the query load is actually relatively  
> light, and most of the indexed document data is numerical.  (ticket  
> id, owner id, date ranges, etc are numbers and there's just one  
> giant "text" searchable field.)
>
> I just got an out of memory exception on my app.  When I fired up  
> jhat, I was very surprised at the object allocation:
>
> 7862 instances of class org.apache.lucene.index.Term
> 7787 instances of class org.apache.lucene.index.TermInfo
> 504 instances of class org.apache.lucene.index.FieldInfo
> 224 instances of class org.apache.lucene.index.TermBuffer
> 79 instances of class org.apache.lucene.index.CompoundFileReader 
> $CSIndexInput
> 75 instances of class org.apache.lucene.index.SegmentTermEnum
> 70 instances of class org.apache.lucene.store.RAMFile
> 64 instances of class org.apache.lucene.store.RAMInputStream
> 63 instances of class org.apache.lucene.index.FieldInfos
> 20 instances of class
 com.facebook.tps_search_server.tps_search_ticket
> 20 instances of class  
> com.facebook.tps_search_server.tps_search_ticket$Isset
> 10 instances of class org.apache.lucene.index.IndexReader$FieldOption
> 9 instances of class
 org.apache.lucene.index.IndexFileDeleter$RefCount
> 8 instances of class org.apache.lucene.index.CompoundFileReader 
> $FileEntry
> 8 instances of class org.apache.lucene.index.CompoundFileWriter 
> $FileEntry
> 8 instances of class org.apache.lucene.index.SegmentReader$Norm
> 7 instances of class org.apache.lucene.document.FieldSelectorResult
> 5 instances of class org.apache.lucene.document.Field$TermVector
> 5 instances of class org.apache.lucene.queryParser.Token
> 4 instances of class org.apache.lucene.document.Field$Index
> 4 instances of class org.apache.lucene.search.FieldCacheImpl$Entry
> 3 instances of class com.facebook.thrift.protocol.TBinaryProtocol
> 3 instances of class com.facebook.thrift.transport.TSocket
> 3 instances of class org.apache.lucene.document.Field$Store
> 3 instances of class org.apache.lucene.index.SegmentInfos
> 3 instances of class org.apache.lucene.search.BooleanClause$Occur
> 2 instances of class com.facebook.thrift.protocol.TBinaryProtocol 
> $Factory
> 2 instances of class com.facebook.thrift.server.TThreadPoolServer 
> $WorkerProcess
> 2 instances of class com.facebook.thrift.transport.TTransportFactory
> 2 instances of class  
> org.apache.lucene.analysis.standard.StandardAnalyzer
> 2 instances of class org.apache.lucene.index.SegmentInfo
> 2 instances of class org.apache.lucene.queryParser.QueryParser 
> $Operator
> 2 instances of class org.apache.lucene.search.DefaultSimilarity
> 2 instances of class org.apache.lucene.search.FieldSortedHitQueue$2
> 2 instances of class org.apache.lucene.search.Sort
> 2 instances of class org.apache.lucene.search.SortField
> 2 instances of class org.apache.lucene.store.RAMDirectory
> 2 instances of class
 org.apache.lucene.store.SingleInstanceLockFactory
> 2 instances of class [Lorg.apache.lucene.search.SortField;
> ...
>
> Any ideas on why I'd have so many Term and TermInfo objects?  To  
> give you a little more insight into my application, worker threads  
> can be spawned by client requests that do one of 4 things - search,  
> index tickets, deindex tickets, or reindex tickets.  (reindex a  
> ticket is basically deindex then index ticket)  I'm using a  
> RAMDirectory for all my searches and updates although I have another
  
> thread which backs this up to disc periodically.
>
> Thanks,
> B
>
>
>
>
>       
>
 ____________________________________________________________________________________
> Looking for last minute shopping deals?
> Find them fast with Yahoo! Search.
  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org







      ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs
--0-1957446321-1197326596=:62552--

From java-user-return-31413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 22:47:16 2007
Return-Path: <java-user-return-31413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47595 invoked from network); 10 Dec 2007 22:47:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 22:47:16 -0000
Received: (qmail 1183 invoked by uid 500); 10 Dec 2007 22:46:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1155 invoked by uid 500); 10 Dec 2007 22:46:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1144 invoked by uid 99); 10 Dec 2007 22:46:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 14:46:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.184.235 as permitted sender)
Received: from [64.233.184.235] (HELO wr-out-0506.google.com) (64.233.184.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 22:46:34 +0000
Received: by wr-out-0506.google.com with SMTP id c46so1458317wra
        for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 14:46:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=md0q8b2vL5pKBuESLjvMnsVw6ATnCZXOdKoo7kgRxIU=;
        b=bL+K4uXe+/GFGZZpU974Blkdcr1mwR4MOhxX+7f8Lj3sv3K0/EmIufH/2tH8JP+AgUKqW9CWeYjKw10LcphmOL9xn/rjF5XcLvNq26Hlof+fFF/3SHO3Dg9BxpabK/iIEMkKgGZH+oIQ2zHO/28fMU7BCDuy44ssQoeaHoOs5Js=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=jWLpUe8uvwjPGSRFG2HosSk27bnKZkMRWIDIG62u6QuxPKNRHmQN01Ppr2pGXVH/NfGOpBhsFmbu8vj+p7BIuyNKyT2RgUTkFNIWdM5UgcdsT+qFmS4SrF/JnE8UZeLxLFoHvN5zGVXbDP7nzRZwA3DaPy06E+npqGL4PE5a6rc=
Received: by 10.78.122.16 with SMTP id u16mr7877023huc.1197326790746;
        Mon, 10 Dec 2007 14:46:30 -0800 (PST)
Received: by 10.78.155.15 with HTTP; Mon, 10 Dec 2007 14:46:30 -0800 (PST)
Message-ID: <6e3ae6310712101446ua41b310sf43aa9a894027c30@mail.gmail.com>
Date: Mon, 10 Dec 2007 14:46:30 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Out of memory?
In-Reply-To: <434508.99913.qm@web58407.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <434508.99913.qm@web58407.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I am wrong about the facet search. You are using Sorting, which also
use FieldCacheImpl.

Doesn't seem a way to turn it off though.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes

DBSight customer Twenga got 2.6 Million Euro funding!
http://www.techcrunch.com/2007/12/07/twenga-gets-e26-million-for-product-search/



On Dec 10, 2007 2:42 PM, Bob Daha <neokalus@yahoo.com> wrote:
> Interesting... I didn't explicitly turn that on... I'm creating a query using query parser, then executing a search using that query and a sort.  Would this algorithmically somehow invoke the FieldCacheImpl?  If so, anyway I can turn it off?  Basically the caching wouldn't be valuable anyway given the volatility of the index, and I'm not that concerned with speed.  (seeing most queries take well under 20ms)
>
> Here's the searcher thread, if the code would help... note rd is my RAMDirectory object - it is never closed / reopened for the life of the application.
>
>   public tps_search_results searchIndex(String query, String sortColumn, boolean desc) {
>     ArrayList<Long> results = new ArrayList<Long>();
>
>     try {
>
>       if (!readerTPS.isCurrent()) {
>         searcher.close();
>         readerTPS.close();
>         readerTPS = IndexReader.open(rd);
>         searcher  = new IndexSearcher(readerTPS);
>       }
>
>       Query q = parserTPS.parse(query);
>
>       Sort sort = new Sort(sortColumn, desc);
>
>       Hits hits = searcher.search(q, sort);
>
>       for (Iterator<Hit> it = hits.iterator(); it.hasNext(); ) {
>         Hit hit = it.next();
>
>         results.add(Long.parseLong(hit.get("ticket_id")));
>       }
>
>     } catch (Exception e) {
>       rlog.exception(e);
>     }
>
>     rlog.queryComplete(": Results count: " + results.size());
>
>     tps_search_results ret_results = new tps_search_results(results);
>
>     return ret_results;
>   }
>
>
> ----- Original Message ----
> From: Chris Lu <chris.lu@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Monday, December 10, 2007 2:17:26 PM
> Subject: Re: Out of memory?
>
>
> Looks like you are using FieldCacheImpl to count search results for
> each category. ( or called facet search by a fancy name ).
>
> Well, it's a cache and the terms are loaded in the memory.
>
> --
> Chris Lu
> -------------------------
> Instant Scalable Full-Text Search On Any Database/Application
> site: http://www.dbsight.net
> demo: http://search.dbsight.com
> Lucene Database Search in 3 minutes:
> http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
> DBSight customer Twenga got 2.6 Million Euro funding!
> http://www.techcrunch.com/2007/12/07/twenga-gets-e26-million-for-product-search/
>
>
> On Dec 10, 2007 11:56 AM, Bob Daha <neokalus@yahoo.com> wrote:
> > Hello,
> >
> > I'm building a ticketing system for my company and am using Lucene
>  for some of the more complicated queries.  I'd say my application differs
>  from the typical lucene application in that my documents are
>  (re)-indexed more frequently, the query load is actually relatively light, and
>  most of the indexed document data is numerical.  (ticket id, owner id,
>  date ranges, etc are numbers and there's just one giant "text"
>  searchable field.)
> >
> > I just got an out of memory exception on my app.  When I fired up
>  jhat, I was very surprised at the object allocation:
> >
> > 7862 instances of class org.apache.lucene.index.Term
> > 7787 instances of class org.apache.lucene.index.TermInfo
> > 504 instances of class org.apache.lucene.index.FieldInfo
> > 224 instances of class org.apache.lucene.index.TermBuffer
> > 79 instances of class
>  org.apache.lucene.index.CompoundFileReader$CSIndexInput
> > 75 instances of class org.apache.lucene.index.SegmentTermEnum
> > 70 instances of class org.apache.lucene.store.RAMFile
> > 64 instances of class org.apache.lucene.store.RAMInputStream
> > 63 instances of class org.apache.lucene.index.FieldInfos
> > 20 instances of class
>  com.facebook.tps_search_server.tps_search_ticket
> > 20 instances of class
>  com.facebook.tps_search_server.tps_search_ticket$Isset
> > 10 instances of class org.apache.lucene.index.IndexReader$FieldOption
> > 9 instances of class
>  org.apache.lucene.index.IndexFileDeleter$RefCount
> > 8 instances of class
>  org.apache.lucene.index.CompoundFileReader$FileEntry
> > 8 instances of class
>  org.apache.lucene.index.CompoundFileWriter$FileEntry
> > 8 instances of class org.apache.lucene.index.SegmentReader$Norm
> > 7 instances of class org.apache.lucene.document.FieldSelectorResult
> > 5 instances of class org.apache.lucene.document.Field$TermVector
> > 5 instances of class org.apache.lucene.queryParser.Token
> > 4 instances of class org.apache.lucene.document.Field$Index
> > 4 instances of class org.apache.lucene.search.FieldCacheImpl$Entry
> > 3 instances of class com.facebook.thrift.protocol.TBinaryProtocol
> > 3 instances of class com.facebook.thrift.transport.TSocket
> > 3 instances of class org.apache.lucene.document.Field$Store
> > 3 instances of class org.apache.lucene.index.SegmentInfos
> > 3 instances of class org.apache.lucene.search.BooleanClause$Occur
> > 2 instances of class
>  com.facebook.thrift.protocol.TBinaryProtocol$Factory
> > 2 instances of class
>  com.facebook.thrift.server.TThreadPoolServer$WorkerProcess
> > 2 instances of class com.facebook.thrift.transport.TTransportFactory
> > 2 instances of class
>  org.apache.lucene.analysis.standard.StandardAnalyzer
> > 2 instances of class org.apache.lucene.index.SegmentInfo
> > 2 instances of class
>  org.apache.lucene.queryParser.QueryParser$Operator
> > 2 instances of class org.apache.lucene.search.DefaultSimilarity
> > 2 instances of class org.apache.lucene.search.FieldSortedHitQueue$2
> > 2 instances of class org.apache.lucene.search.Sort
> > 2 instances of class org.apache.lucene.search.SortField
> > 2 instances of class org.apache.lucene.store.RAMDirectory
> > 2 instances of class
>  org.apache.lucene.store.SingleInstanceLockFactory
> > 2 instances of class [Lorg.apache.lucene.search.SortField;
> > ...
> >
> > Any ideas on why I'd have so many Term and TermInfo objects?  To give
>  you a little more insight into my application, worker threads can be
>  spawned by client requests that do one of 4 things - search, index
>  tickets, deindex tickets, or reindex tickets.  (reindex a ticket is
>  basically deindex then index ticket)  I'm using a RAMDirectory for all my
>  searches and updates although I have another thread which backs this up to
>  disc periodically.
> >
> > Thanks,
> > B
> >
> >
> >
> >
> >
>  ____________________________________________________________________________________
> > Looking for last minute shopping deals?
> > Find them fast with Yahoo! Search.
>   http://tools.search.yahoo.com/newsearch/category.php?category=shopping
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>
>       ____________________________________________________________________________________
> Never miss a thing.  Make Yahoo your home page.
> http://www.yahoo.com/r/hs

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 10 22:59:31 2007
Return-Path: <java-user-return-31414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52033 invoked from network); 10 Dec 2007 22:59:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 10 Dec 2007 22:59:31 -0000
Received: (qmail 14777 invoked by uid 500); 10 Dec 2007 22:59:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14537 invoked by uid 500); 10 Dec 2007 22:59:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14526 invoked by uid 99); 10 Dec 2007 22:59:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 14:59:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.184.225 as permitted sender)
Received: from [64.233.184.225] (HELO wr-out-0506.google.com) (64.233.184.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 22:58:49 +0000
Received: by wr-out-0506.google.com with SMTP id c46so1462337wra
        for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 14:58:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=7IV2zfmErtwiPWv6HA3Gj1PvTm7pAWm2sGIm5FdaLPI=;
        b=DjdTn9Tu3o2qpjpOHF3gPWjceiL7gcW9QPZmYKgr+zpVz7phF52QuZgHrnFZxsfIiI2GRdpIMCJ2YUHtp8vGyaWJRh2GKspgg2CPzHz0o3XEjrBXWcx1dbgsIdgMkZm4Othybh3QyB8SvNVa1AssTSAEqjq6b8ODRoi5giv7rsc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=fR/iSzm6RMopOn4cYTtoPh1oRvPrjHiilTvNipQs7yKZPTAo7ueIMmifVLn6VLiBds7fetqw0P/QGvOXyxJVmbkJmTDTKZqev9jmVlGRPZYccLx/W58b0Ej6CwjXXDfuNcjQiY+P7/phAfBmkHU/gFOFWo81LI7aCA4ILhUzWNA=
Received: by 10.78.184.2 with SMTP id h2mr7887111huf.1197327150511;
        Mon, 10 Dec 2007 14:52:30 -0800 (PST)
Received: by 10.78.155.15 with HTTP; Mon, 10 Dec 2007 14:52:30 -0800 (PST)
Message-ID: <6e3ae6310712101452r12e265c8v6a58119e5223edd9@mail.gmail.com>
Date: Mon, 10 Dec 2007 14:52:30 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Out of memory?
In-Reply-To: <833835.62552.qm@web58410.mail.re3.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <833835.62552.qm@web58410.mail.re3.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

It's hard to debug just by your description. But I think in general,
you should close the reader and searcher, after you update the index.

BTW: If you are using database, my software DBSight does this kind of
pruning out old data and keep the index up-to-date. No memory leaks
etc. It's not related to how you search, but how you release the
resources.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer Twenga got 2.6 Million Euro funding!
http://www.techcrunch.com/2007/12/07/twenga-gets-e26-million-for-product-search/



On Dec 10, 2007 2:43 PM, Bob Daha <neokalus@yahoo.com> wrote:
> Thanks for the reply.  The backup of the index on disc is around 80 MB.  I'm giving my JVM 4 gigs of heap space...  I probably should have mentioned in my first thread that this is not the first crash; it's done it a few times now and usually has almost a week of uptime before it crashes even with the growing index.  (last time it crashed the index was about 60MB on disc)  It's also worth noting I am only going to keep around 4 weeks of ticket data and I'm adding week 5 right now, so the index should be relatively close to this size "forever", although rather rapidly changing.
>
> I think *something* is holding onto those terms... just not sure what.  =\
>
>
>
> ----- Original Message ----
> From: Grant Ingersoll <gsingers@apache.org>
> To: java-user@lucene.apache.org
> Sent: Monday, December 10, 2007 2:24:58 PM
> Subject: Re: Out of memory?
>
>
> Those terms could be coming from a lot of diff. places.
>
> What size JVM heap, etc. are you giving your application?  My guess is
>
> your index is too big to fit into RAM, you probably need to use a
> FSDirectory or give it more RAM, but it is hard to say for sure w/o
> knowing more about the application.
>
> See http://wiki.apache.org/lucene-java/BasicsOfPerformance for more on
>
> performance.
>
> -Grant
>
>
> On Dec 10, 2007, at 2:56 PM, Bob Daha wrote:
>
> > Hello,
> >
> > I'm building a ticketing system for my company and am using Lucene
> > for some of the more complicated queries.  I'd say my application
> > differs from the typical lucene application in that my documents are
>
> > (re)-indexed more frequently, the query load is actually relatively
> > light, and most of the indexed document data is numerical.  (ticket
> > id, owner id, date ranges, etc are numbers and there's just one
> > giant "text" searchable field.)
> >
> > I just got an out of memory exception on my app.  When I fired up
> > jhat, I was very surprised at the object allocation:
> >
> > 7862 instances of class org.apache.lucene.index.Term
> > 7787 instances of class org.apache.lucene.index.TermInfo
> > 504 instances of class org.apache.lucene.index.FieldInfo
> > 224 instances of class org.apache.lucene.index.TermBuffer
> > 79 instances of class org.apache.lucene.index.CompoundFileReader
> > $CSIndexInput
> > 75 instances of class org.apache.lucene.index.SegmentTermEnum
> > 70 instances of class org.apache.lucene.store.RAMFile
> > 64 instances of class org.apache.lucene.store.RAMInputStream
> > 63 instances of class org.apache.lucene.index.FieldInfos
> > 20 instances of class
>  com.facebook.tps_search_server.tps_search_ticket
> > 20 instances of class
> > com.facebook.tps_search_server.tps_search_ticket$Isset
> > 10 instances of class org.apache.lucene.index.IndexReader$FieldOption
> > 9 instances of class
>  org.apache.lucene.index.IndexFileDeleter$RefCount
> > 8 instances of class org.apache.lucene.index.CompoundFileReader
> > $FileEntry
> > 8 instances of class org.apache.lucene.index.CompoundFileWriter
> > $FileEntry
> > 8 instances of class org.apache.lucene.index.SegmentReader$Norm
> > 7 instances of class org.apache.lucene.document.FieldSelectorResult
> > 5 instances of class org.apache.lucene.document.Field$TermVector
> > 5 instances of class org.apache.lucene.queryParser.Token
> > 4 instances of class org.apache.lucene.document.Field$Index
> > 4 instances of class org.apache.lucene.search.FieldCacheImpl$Entry
> > 3 instances of class com.facebook.thrift.protocol.TBinaryProtocol
> > 3 instances of class com.facebook.thrift.transport.TSocket
> > 3 instances of class org.apache.lucene.document.Field$Store
> > 3 instances of class org.apache.lucene.index.SegmentInfos
> > 3 instances of class org.apache.lucene.search.BooleanClause$Occur
> > 2 instances of class com.facebook.thrift.protocol.TBinaryProtocol
> > $Factory
> > 2 instances of class com.facebook.thrift.server.TThreadPoolServer
> > $WorkerProcess
> > 2 instances of class com.facebook.thrift.transport.TTransportFactory
> > 2 instances of class
> > org.apache.lucene.analysis.standard.StandardAnalyzer
> > 2 instances of class org.apache.lucene.index.SegmentInfo
> > 2 instances of class org.apache.lucene.queryParser.QueryParser
> > $Operator
> > 2 instances of class org.apache.lucene.search.DefaultSimilarity
> > 2 instances of class org.apache.lucene.search.FieldSortedHitQueue$2
> > 2 instances of class org.apache.lucene.search.Sort
> > 2 instances of class org.apache.lucene.search.SortField
> > 2 instances of class org.apache.lucene.store.RAMDirectory
> > 2 instances of class
>  org.apache.lucene.store.SingleInstanceLockFactory
> > 2 instances of class [Lorg.apache.lucene.search.SortField;
> > ...
> >
> > Any ideas on why I'd have so many Term and TermInfo objects?  To
> > give you a little more insight into my application, worker threads
> > can be spawned by client requests that do one of 4 things - search,
> > index tickets, deindex tickets, or reindex tickets.  (reindex a
> > ticket is basically deindex then index ticket)  I'm using a
> > RAMDirectory for all my searches and updates although I have another
>
> > thread which backs this up to disc periodically.
> >
> > Thanks,
> > B
> >
> >
> >
> >
> >
> >
>  ____________________________________________________________________________________
> > Looking for last minute shopping deals?
> > Find them fast with Yahoo! Search.
>   http://tools.search.yahoo.com/newsearch/category.php?category=shopping
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
> ---------------------------------------------------------------------
>
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
>
>
>       ____________________________________________________________________________________
> Never miss a thing.  Make Yahoo your home page.
> http://www.yahoo.com/r/hs

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 07:12:52 2007
Return-Path: <java-user-return-31415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31987 invoked from network); 11 Dec 2007 07:12:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 07:12:52 -0000
Received: (qmail 44213 invoked by uid 500); 11 Dec 2007 07:12:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43223 invoked by uid 500); 11 Dec 2007 07:12:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43211 invoked by uid 99); 11 Dec 2007 07:12:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 10 Dec 2007 23:12:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 07:12:14 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id D40DD71C1C7; Mon, 10 Dec 2007 23:12:17 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id D115771C199
	for <java-user@lucene.apache.org>; Mon, 10 Dec 2007 23:12:17 -0800 (PST)
Date: Mon, 10 Dec 2007 23:12:17 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Applying SpellChecker to a phrase
In-Reply-To: <OF4816461A.DD2100A8-ONC22573AA.00729C9A-C22573AA.00733A56@il.ibm.com>
Message-ID: <Pine.LNX.4.62.0712102307100.10012@radix.cryptio.net>
References: <OF4816461A.DD2100A8-ONC22573AA.00729C9A-C22573AA.00733A56@il.ibm.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


Isn't MultiPhraseQuery what is desired here?  you can add Term[]s per 
position and at least one term in each array must much.

: > I was thinking of parsing the phrase query string into a
: > sequence of terms,
: > then constructing a phrase query object using add(Term term,
: > int position)
: > method in org.apache.lucene.search.PhraseQuery class. Then I can inject
: > similar words (suggested by SpellChecker) at appropriate
: > positions for each
: > term as I construct the final phrase query object.
: >
: > Do you agree that this should work too?
: 
: I never tried this but I'm sure it will not work.
: 
: The phrase query scorer requires all the terms to
: appear - either at the 'right' place or with slop
: for sloppy phrases. Therefore if you inject two
: terms in the same position the scorer will require
: to find both of them in the same position in order to
: match a document. This would be an AND logic, while
: what you need is an OR logic.





-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 08:14:27 2007
Return-Path: <java-user-return-31416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48479 invoked from network); 11 Dec 2007 08:14:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 08:14:26 -0000
Received: (qmail 97485 invoked by uid 500); 11 Dec 2007 08:14:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97447 invoked by uid 500); 11 Dec 2007 08:14:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97436 invoked by uid 99); 11 Dec 2007 08:14:09 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 00:14:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [124.30.170.13] (HELO hydmail1.satyam.com) (124.30.170.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 08:14:10 +0000
Received: from hyd.satyam.com (hyd.satyam.com [204.252.161.226])
	by hydmail1.satyam.com (8.13.4/8.13.4) with ESMTP id lBB7nZYL020913
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 13:19:35 +0530
Received: from Disclaimerhyd.corp.satyam.ad (hhtbh.satyam.com [172.16.186.212])
	by hyd.satyam.com (8.13.1/8.13.1) with ESMTP id lBB8Csqk000581
	for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 13:42:55 +0530
Received: from hstmsg005.corp.satyam.ad ([172.16.186.216]) by Disclaimerhyd.corp.satyam.ad with Microsoft SMTPSVC(6.0.3790.211); Tue, 11 Dec 2007 13:43:48 +0530
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.607
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: help required ... ~ operator
Priority: normal
Importance: normal
Date: Tue, 11 Dec 2007 13:43:47 +0530
Message-ID: <9312093579B72048B1E5659DC3EC7F39022E932B@hstmsg005.corp.satyam.ad>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: help required ... ~ operator
Thread-Index: Acg58Hkk+f9374hLRQyaEh0x+S4ecABIUutAAC7nAGA=
From: "Shakti_Sareen" <Shakti_Sareen@satyam.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 Dec 2007 08:13:48.0274 (UTC) FILETIME=[C19DD520:01C83BCD]
X-Virus-Scanned: ClamAV version 0.88.4, clamav-milter version 0.88.4 on hyd.satyam.com
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org


Hi all,

     I am using StandardAnalyzer() to index the data.

Actual data is: "signals by magnets of different strength"
when I am parsing a query: "signals strength"~2  , I am getting a hit.


But when I am parsing a query "strength signals"~2 , I am not getting a
hit.
WHY???it should work....

I am using QueryParser.

Please help on this issue.

Thanks
Shakti Sareen





DISCLAIMER:
This email (including any attachments) is intended for the sole use of =
the intended recipient/s and may contain material that is CONFIDENTIAL =
AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or =
copying or distribution or forwarding of any or all of the contents in =
this message is STRICTLY PROHIBITED. If you are not the intended =
recipient, please contact the sender by email and delete all copies; =
your cooperation in this regard is appreciated.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 08:26:16 2007
Return-Path: <java-user-return-31417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52497 invoked from network); 11 Dec 2007 08:26:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 08:26:14 -0000
Received: (qmail 7919 invoked by uid 500); 11 Dec 2007 08:25:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7890 invoked by uid 500); 11 Dec 2007 08:25:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7701 invoked by uid 99); 11 Dec 2007 08:25:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 00:25:48 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of DORONC@il.ibm.com designates 195.212.29.156 as permitted sender)
Received: from [195.212.29.156] (HELO mtagate7.de.ibm.com) (195.212.29.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 08:25:48 +0000
Received: from d12nrmr1607.megacenter.de.ibm.com (d12nrmr1607.megacenter.de.ibm.com [9.149.167.49])
	by mtagate7.de.ibm.com (8.13.8/8.13.8) with ESMTP id lBB8PGoG057160
	for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 08:25:16 GMT
Received: from d12av04.megacenter.de.ibm.com (d12av04.megacenter.de.ibm.com [9.149.165.229])
	by d12nrmr1607.megacenter.de.ibm.com (8.13.8/8.13.8/NCO v8.7) with ESMTP id lBB8PG6H2773164
	for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 09:25:16 +0100
Received: from d12av04.megacenter.de.ibm.com (loopback [127.0.0.1])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.13.3) with ESMTP id lBB8PGFH019798
	for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 09:25:16 +0100
Received: from d12mc102.megacenter.de.ibm.com (d12mc102.megacenter.de.ibm.com [9.149.167.114])
	by d12av04.megacenter.de.ibm.com (8.12.11.20060308/8.12.11) with ESMTP id lBB8PGqX019795
	for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 09:25:16 +0100
In-Reply-To: <Pine.LNX.4.62.0712102307100.10012@radix.cryptio.net>
Subject: Re: Applying SpellChecker to a phrase
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 7.0 HF277 June 21, 2006
Message-ID: <OF6328841E.E2C7B20B-ONC22573AE.002CD16E-C22573AE.002E2035@il.ibm.com>
From: Doron Cohen <DORONC@il.ibm.com>
Date: Tue, 11 Dec 2007 10:23:49 +0200
X-MIMETrack: Serialize by Router on D12MC102/12/M/IBM(Release 8.0|August 02, 2007) at 11/12/2007
 10:25:16
MIME-Version: 1.0
Content-type: text/plain; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org

Yes that's right, my mistake.

In fact even after reading your comment I was puzzled
because PhraseScorer indeed requires *all* phrase-positions
to be satisfied in order to match. The answer is that
the OR logic is taken care of by MultipleTermPositions,
so the scorer does not need to be aware of any of this.

Anyhow, example usage of this is in TestMultiPhraseQuery.

Doron

Chris Hostetter <hossman_lucene@fucit.org> wrote on 11/12/2007 09:12:17:

>
> Isn't MultiPhraseQuery what is desired here?  you can add Term[]s per
> position and at least one term in each array must much.
>
> : > I was thinking of parsing the phrase query string into a
> : > sequence of terms,
> : > then constructing a phrase query object using add(Term term,
> : > int position)
> : > method in org.apache.lucene.search.PhraseQuery class. Then
> I can inject
> : > similar words (suggested by SpellChecker) at appropriate
> : > positions for each
> : > term as I construct the final phrase query object.
> : >
> : > Do you agree that this should work too?
> :
> : I never tried this but I'm sure it will not work.
> :
> : The phrase query scorer requires all the terms to
> : appear - either at the 'right' place or with slop
> : for sloppy phrases. Therefore if you inject two
> : terms in the same position the scorer will require
> : to find both of them in the same position in order to
> : match a document. This would be an AND logic, while
> : what you need is an OR logic.
>
>
>
>
>
> -Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 09:49:36 2007
Return-Path: <java-user-return-31418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84098 invoked from network); 11 Dec 2007 09:49:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 09:49:36 -0000
Received: (qmail 33965 invoked by uid 500); 11 Dec 2007 09:49:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33931 invoked by uid 500); 11 Dec 2007 09:49:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33920 invoked by uid 99); 11 Dec 2007 09:49:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 01:49:19 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [124.30.170.13] (HELO hydmail1.satyam.com) (124.30.170.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 09:48:57 +0000
Received: from hyd.satyam.com (hyd.satyam.com [204.252.161.226])
	by hydmail1.satyam.com (8.13.4/8.13.4) with ESMTP id lBB9Oj3n006716
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 14:54:45 +0530
Received: from Disclaimerhyd.corp.satyam.ad (hhtbh.satyam.com [172.16.186.212])
	by hyd.satyam.com (8.13.1/8.13.1) with ESMTP id lBB9m5bP019001
	for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 15:18:05 +0530
Received: from hstmsg005.corp.satyam.ad ([172.16.186.216]) by Disclaimerhyd.corp.satyam.ad with Microsoft SMTPSVC(6.0.3790.211); Tue, 11 Dec 2007 15:18:59 +0530
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.607
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: like search in NOT operator
Priority: normal
Importance: normal
Date: Tue, 11 Dec 2007 15:18:58 +0530
Message-ID: <9312093579B72048B1E5659DC3EC7F39022E932C@hstmsg005.corp.satyam.ad>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: like search in NOT operator
Thread-Index: Acg58Hkk+f9374hLRQyaEh0x+S4ecABIUutAAC7nAGAAA2YJcA==
From: "Shakti_Sareen" <Shakti_Sareen@satyam.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 11 Dec 2007 09:48:59.0436 (UTC) FILETIME=[0DBBFEC0:01C83BDB]
X-Virus-Scanned: ClamAV version 0.88.4, clamav-milter version 0.88.4 on hyd.satyam.com
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org



Hi all,

     I am using StandardAnalyzer() to index the data.

Actual data is: "signals by magnets of different strength"

I want to search for "sign* NOT Machine".....how can I do that??

I am using QueryParser.

Please help on this issue.

Thanks
Shakti Sareen





DISCLAIMER:
This email (including any attachments) is intended for the sole use of =
the intended recipient/s and may contain material that is CONFIDENTIAL =
AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or =
copying or distribution or forwarding of any or all of the contents in =
this message is STRICTLY PROHIBITED. If you are not the intended =
recipient, please contact the sender by email and delete all copies; =
your cooperation in this regard is appreciated.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 13:18:14 2007
Return-Path: <java-user-return-31419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58840 invoked from network); 11 Dec 2007 13:18:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 13:18:14 -0000
Received: (qmail 49390 invoked by uid 500); 11 Dec 2007 13:17:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49356 invoked by uid 500); 11 Dec 2007 13:17:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49345 invoked by uid 99); 11 Dec 2007 13:17:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 05:17:56 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 13:17:57 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J24zQ-0007EI-U5
	for java-user@lucene.apache.org; Tue, 11 Dec 2007 05:17:36 -0800
Message-ID: <14273737.post@talk.nabble.com>
Date: Tue, 11 Dec 2007 05:17:36 -0800 (PST)
From: d33mb33 <david.balzan@entity.co.uk>
To: java-user@lucene.apache.org
Subject: Re: Post processing to get around TooManyClauses?
In-Reply-To: <359a92830712070943j25a3f54ag9c16ac3d2a3e3425@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: david.balzan@entity.co.uk
References: <14210833.post@talk.nabble.com> <359a92830712070643td2575dfjf5fae1e78adc3a05@mail.gmail.com> <14213935.post@talk.nabble.com> <359a92830712070943j25a3f54ag9c16ac3d2a3e3425@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Ok I'm still struggling with this and a QueryFilter didn't help me one bit
:-(

I'm trying to query for books by "Charles Dickens" that start with "m".  I
have constructed a QueryFilter for the author search and a PrefixQuery for
the title search.  A simplified version of my code is below.

    ' Charles Dickens query filter
    Dim authorQry As TermQuery = New TermQuery(New Term("ContributorName",
"dickens"))
    Dim authorFlter As QueryFilter = New QueryFilter(authorQry)

    ' M* query
    Dim titleQry As PrefixQuery = New PrefixQuery(New Term("Title", "m"))

    Dim topDocs As TopDocs = GetIndexSearcher().Search(titleQry,
authorFlter, maxResults)

This still throws a TooManyClauses exception because the PrefixQuery is
being expanded across the entire index.  
-- 
View this message in context: http://www.nabble.com/Post-processing-to-get-around-TooManyClauses--tp14210833p14273737.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 14:00:19 2007
Return-Path: <java-user-return-31420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71023 invoked from network); 11 Dec 2007 14:00:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 14:00:19 -0000
Received: (qmail 13092 invoked by uid 500); 11 Dec 2007 13:59:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13055 invoked by uid 500); 11 Dec 2007 13:59:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12343 invoked by uid 99); 11 Dec 2007 13:59:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 05:59:48 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [63.65.184.134] (HELO birexchange.BIRPLAZA.local) (63.65.184.134)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 13:59:26 +0000
Content-class: urn:content-classes:message
MIME-Version: 1.0
Subject: RE: Post processing to get around TooManyClauses?
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 11 Dec 2007 08:59:27 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Message-ID: <CC2671C08F06704ABFD37ED1EA09AA5633A1F5@birexchange.BIRPLAZA.local>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Post processing to get around TooManyClauses?
Thread-Index: Acg7+Eh0LSrk4Z55S5qGcSg/W4W5CQABBvHQ
From: "Beard, Brian" <Brian.Beard@mybir.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

I had a similar problem (I think). Look at using a WildcardFilter
(below), possibly wrapped in a CachingWrapperFilter, depending if you
want to re-use it. I over-rode the method QueryParser.getWildcardQuery
to customize it. In your case you would probably have to specifically
detect for the presence of a wildcard to use this.

Someone posted this a while back which I found helpful.

/**
 * This is used to construct wildcard queries
 * to avoid the 'too many boolean clauses' exception.
 *
 */
public class WildcardFilter extends Filter {

    private Term term;

    public WildcardFilter(Term term) {
        this.term =3D term;
    }

    /**
     * A bit corrresponds to each document in the index and is set to
true if
     * it matches the criterion in the wildcard search.
     *=20
     * @param reader - the indexReader @see
org.apache.lucene.index.IndexReader
     * @return @see org.apache.lucene.search.Filter#bits()
     */
    @Override
    public BitSet bits(IndexReader reader) throws IOException {
        BitSet bits =3D new BitSet(reader.maxDoc());
        WildcardTermEnum enumerator =3D new WildcardTermEnum(reader,
term);
        TermDocs termDocs =3D reader.termDocs();

        try {
            do {
                Term term =3D enumerator.term();

                if (term !=3D null) {
                    termDocs.seek(term);

                    while (termDocs.next()) {
                        bits.set(termDocs.doc());
                    }
                } else {
                    break;
                }
            } while (enumerator.next());
        } finally {
            termDocs.close();
            enumerator.close();
        }

        return bits;
    }
}

-----Original Message-----
From: d33mb33 [mailto:david.balzan@entity.co.uk]=20
Sent: Tuesday, December 11, 2007 8:18 AM
To: java-user@lucene.apache.org
Subject: Re: Post processing to get around TooManyClauses?


Ok I'm still struggling with this and a QueryFilter didn't help me one
bit
:-(

I'm trying to query for books by "Charles Dickens" that start with "m".
I
have constructed a QueryFilter for the author search and a PrefixQuery
for
the title search.  A simplified version of my code is below.

    ' Charles Dickens query filter
    Dim authorQry As TermQuery =3D New TermQuery(New
Term("ContributorName",
"dickens"))
    Dim authorFlter As QueryFilter =3D New QueryFilter(authorQry)

    ' M* query
    Dim titleQry As PrefixQuery =3D New PrefixQuery(New Term("Title",
"m"))

    Dim topDocs As TopDocs =3D GetIndexSearcher().Search(titleQry,
authorFlter, maxResults)

This still throws a TooManyClauses exception because the PrefixQuery is
being expanded across the entire index. =20
--=20
View this message in context:
http://www.nabble.com/Post-processing-to-get-around-TooManyClauses--tp14
210833p14273737.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 14:45:45 2007
Return-Path: <java-user-return-31421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89143 invoked from network); 11 Dec 2007 14:45:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 14:45:44 -0000
Received: (qmail 82155 invoked by uid 500); 11 Dec 2007 14:45:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81796 invoked by uid 500); 11 Dec 2007 14:45:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81785 invoked by uid 99); 11 Dec 2007 14:45:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 06:45:27 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [134.130.7.72] (HELO mta-1.ms.rz.rwth-aachen.de) (134.130.7.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 14:45:05 +0000
Received: from ironport-out-2.rz.rwth-aachen.de ([134.130.3.59])
 by mta-1.ms.rz.RWTH-Aachen.de
 (Sun Java System Messaging Server 6.2-8.04 (built Feb 28 2007))
 with ESMTP id <0JSW004TZ3N2G8D0@mta-1.ms.rz.RWTH-Aachen.de> for
 java-user@lucene.apache.org; Tue, 11 Dec 2007 15:45:02 +0100 (CET)
Received: from relay.rwth-aachen.de ([134.130.3.1])
 by ironport-in-2.rz.rwth-aachen.de with ESMTP; Tue, 11 Dec 2007 15:45:02 +0100
Received: from numa-i.igpm.rwth-aachen.de
 (numa-i.igpm.RWTH-Aachen.DE [134.130.161.252])
	by relay.rwth-aachen.de (8.13.7/8.13.3/1) with ESMTP id lBBEj2Wd017888	for
 <java-user@lucene.apache.org>; Tue, 11 Dec 2007 15:45:02 +0100 (MET)
Received: by numa-i.igpm.rwth-aachen.de (Postfix, from userid 230)
	id 5D59A1068DC; Tue, 11 Dec 2007 15:45:01 +0100 (CET)
Date: Tue, 11 Dec 2007 15:45:01 +0100 (CET)
From: Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
Subject: DEFAULT_OPERATOR_AND  globally ?
To: java-user@lucene.apache.org
Reply-to: jarausch@igpm.rwth-aachen.de
Message-id: <tkrat.cc109675cd96c938@igpm.rwth-aachen.de>
MIME-version: 1.0
Content-type: TEXT/PLAIN; CHARSET=us-ascii
Content-transfer-encoding: 7BIT
Content-disposition: INLINE
X-IronPort-AV: E=Sophos;i="4.24,152,1196636400";   d="scan'208";a="24094255"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I know how to set DEFAULT_OPERATOR_AND for an individual QueryParser
Objekt (after creation)

Since I always want this to be set, is there a means to set a (global)
option such that any QueryParser object has this default operator.

Many thanks for a hint,

Helmut Jarausch

Lehrstuhl fuer Numerische Mathematik
RWTH - Aachen University
D 52056 Aachen, Germany

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 16:34:47 2007
Return-Path: <java-user-return-31422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39865 invoked from network); 11 Dec 2007 16:34:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 16:34:47 -0000
Received: (qmail 4485 invoked by uid 500); 11 Dec 2007 16:34:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4447 invoked by uid 500); 11 Dec 2007 16:34:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4436 invoked by uid 99); 11 Dec 2007 16:34:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 08:34:29 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [134.130.7.72] (HELO mta-1.ms.rz.rwth-aachen.de) (134.130.7.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 16:34:30 +0000
Received: from ironport-out-1.rz.rwth-aachen.de ([134.130.3.58])
 by mta-1.ms.rz.RWTH-Aachen.de
 (Sun Java System Messaging Server 6.2-8.04 (built Feb 28 2007))
 with ESMTP id <0JSW00K8O8OXGH10@mta-1.ms.rz.RWTH-Aachen.de> for
 java-user@lucene.apache.org; Tue, 11 Dec 2007 17:34:09 +0100 (CET)
Received: from relay.rwth-aachen.de ([134.130.3.1])
 by ironport-in-1.rz.rwth-aachen.de with ESMTP; Tue, 11 Dec 2007 17:34:09 +0100
Received: from numa-i.igpm.rwth-aachen.de
 (numa-i.igpm.RWTH-Aachen.DE [134.130.161.252])
	by relay.rwth-aachen.de (8.13.7/8.13.3/1) with ESMTP id lBBGY93j005679	for
 <java-user@lucene.apache.org>; Tue, 11 Dec 2007 17:34:09 +0100 (MET)
Received: by numa-i.igpm.rwth-aachen.de (Postfix, from userid 230)
	id 3024F1068DC; Tue, 11 Dec 2007 17:34:08 +0100 (CET)
Date: Tue, 11 Dec 2007 17:34:08 +0100 (CET)
From: Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
Subject: DEFAULT_OPERATOR_AND  globally ?
To: java-user@lucene.apache.org
Reply-to: jarausch@igpm.rwth-aachen.de
Message-id: <tkrat.dc3ae479df044225@igpm.rwth-aachen.de>
MIME-version: 1.0
Content-type: TEXT/PLAIN; CHARSET=us-ascii
Content-transfer-encoding: 7BIT
Content-disposition: INLINE
X-IronPort-AV: E=Sophos;i="4.24,153,1196636400";   d="scan'208";a="38902681"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I know how to set DEFAULT_OPERATOR_AND for an individual QueryParser
Objekt (after creation)

Since I always want this to be set, is there a means to set a (global)
option such that any QueryParser object has this default operator.

Many thanks for a hint,

Helmut Jarausch

Lehrstuhl fuer Numerische Mathematik
RWTH - Aachen University
D 52056 Aachen, Germany

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 18:30:50 2007
Return-Path: <java-user-return-31423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66164 invoked from network); 11 Dec 2007 18:30:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 18:30:49 -0000
Received: (qmail 86088 invoked by uid 500); 11 Dec 2007 18:30:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86062 invoked by uid 500); 11 Dec 2007 18:30:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86049 invoked by uid 99); 11 Dec 2007 18:30:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 10:30:32 -0800
X-ASF-Spam-Status: No, hits=2.7 required=10.0
	tests=HTML_MESSAGE,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of jluna@usbmis.com does not designate 204.127.217.104 as permitted sender)
Received: from [204.127.217.104] (HELO fmailhost04.isp.att.net) (204.127.217.104)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 18:30:33 +0000
Received: from [127.0.0.1] (adsl-074-239-052-167.sip.gnv.bellsouth.net[74.239.52.167])
          by isp.att.net (frfwmhc04) with ESMTP
          id <20071211183009H0400ac9s6e>; Tue, 11 Dec 2007 18:30:09 +0000
X-Originating-IP: [74.239.52.167]
Message-ID: <475ED731.10801@usbmis.com>
Date: Tue, 11 Dec 2007 13:30:09 -0500
From: Jose Luna <jluna@usbmis.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Advice regarding fuzzy phrase searching
Content-Type: multipart/alternative;
 boundary="------------000204010301030109010501"
X-Antivirus: avast! (VPS 071210-0, 12/10/2007), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

--------------000204010301030109010501
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hello,

I am looking for some advice regarding which tools I might use to solve 
my problem.  I apologize ahead of time for the long explanation.

Problem Description:  I would like to index a set of very large HTML 
documents.  I would then be able to run two different kinds of queries: 
proximity queries, and fuzzy phrase queries.   I would like to get the 
exact positions of the matching results from the query (I need to modify 
the original documents at these positions.)  I will only need to search 
one document at a time, i.e., I already know which document I'll be 
looking in, so what's important is finding the positions of the hits 
within that document.

For example,  for a fuzzy search, I may want to search for "arterial 
oxygen saturation".   I would want this to match "arterial oxygen 
saturate", and I would want to get the position of where it matches.  I 
would also like to do proximity searches, with these broken into 
separate terms.  So, I may be searching for "arterial", "oxygen", and 
"saturate" all within 10 terms of each other, and get the positions of 
the cases that match.

To the best of my understanding, Lucene is not a good choice to solve 
this problem (please correct me if I'm wrong).   As far as I can tell, 
Lucene breaks up a document into a set of terms, and indexes these in 
some sort of structure.  My guess is a B+ tree, but I'm curious to learn 
more about it -- I couldn't find much in the documentation about the 
underlying index structure.   Anyway, this means that the keys->pointer 
pairs in the index are basically term->documenID pairs.  So this isn't 
very suitable for my problem. I already know which document I want to 
search, I'm interested in the position of hits.    If I were to search 
for the phrase "arterial oxygen saturation", this would be broken into 
terms and I could iterate through all of the TermPositions for a given 
term in the document, and try to find out where these terms are adjacent 
in the document.  Considering that my document is very large, the 
phrases can be 10+ terms, and I need to do this hundreds of times, this 
doesn't sound like a very good solution.  If we introduce the idea of 
fuzzy matches and proximity searches, it seems like this task of 
iterating through TermPositions becomes very complicated. 

I've spent time reading the docs, creating a test program, and reading 
the mailing list.  As far as I can tell, Lucene is geared towards 
document based queries, and isn't the ideal tool for my problem.  I 
think an index based on a suffix tree (or variation of) would better 
meet my needs, but I'm not sure how well these perform with fuzzy and 
proximity searches.  I've looked around, and I can't seem to find a good 
opensource indexing framework like lucene that's based on a suffix 
tree.  Are there any suggestions for tools that would help with this 
problem?  Does anyone have any suggestions on how I might bend Lucene to 
meet my needs?

Thanks in advance,

JLuna



--------------000204010301030109010501--

From java-user-return-31424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 19:27:24 2007
Return-Path: <java-user-return-31424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68710 invoked from network); 11 Dec 2007 19:27:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 19:27:24 -0000
Received: (qmail 65089 invoked by uid 500); 11 Dec 2007 19:27:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65044 invoked by uid 500); 11 Dec 2007 19:27:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65004 invoked by uid 99); 11 Dec 2007 19:27:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 11:27:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of smokeystu@gmail.com designates 64.233.162.239 as permitted sender)
Received: from [64.233.162.239] (HELO nz-out-0506.google.com) (64.233.162.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 19:26:41 +0000
Received: by nz-out-0506.google.com with SMTP id i28so928094nzi
        for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 11:26:44 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=0+fxpO8CLqGOux1A6bclEDP++4643ezLCacR59zxqIY=;
        b=p4T0XD5JRX1Ru7IG/sVA/F0F/Uo+i94TQUzfNZ5p9Av6msnIuBanZk/aWwkX0XEkgHSEB++du2nFfWhtOsMmaysBDSEG3k81FWUHg9bHxXEt0LfBmLUUbh/ccjhkNApenn8NRdLihARYtTF3KM14AG8f6bR8M+AVxys6Fc6A+7o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Q/AAWyMEXHrxSEQNg11io9X5qk8nccho6t8Sn/29UJiVxj8MIxkt09ysjmIPpyXaqq/w+VHtMCKuhg5f+XrcV/TV+Is6MIFlKivlgrHvxCbgBh6gp9AMSInBswnD03ECHvFpR0HzRHTF+gSy6URfTvudp3eUrRbEnrBtol61Dz4=
Received: by 10.142.101.17 with SMTP id y17mr1199553wfb.1197401203412;
        Tue, 11 Dec 2007 11:26:43 -0800 (PST)
Received: by 10.143.16.2 with HTTP; Tue, 11 Dec 2007 11:26:43 -0800 (PST)
Message-ID: <f3c2a27b0712111126q2ef8604al4a587d86775c75ac@mail.gmail.com>
Date: Tue, 11 Dec 2007 14:26:43 -0500
From: smokey <smokeystu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Applying SpellChecker to a phrase
In-Reply-To: <OF6328841E.E2C7B20B-ONC22573AE.002CD16E-C22573AE.002E2035@il.ibm.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36626_2593832.1197401203411"
References: <Pine.LNX.4.62.0712102307100.10012@radix.cryptio.net>
	 <OF6328841E.E2C7B20B-ONC22573AE.002CD16E-C22573AE.002E2035@il.ibm.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36626_2593832.1197401203411
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Thanks for pointing me to the right class to use.

On Dec 11, 2007 3:23 AM, Doron Cohen <DORONC@il.ibm.com> wrote:

> Yes that's right, my mistake.
>
> In fact even after reading your comment I was puzzled
> because PhraseScorer indeed requires *all* phrase-positions
> to be satisfied in order to match. The answer is that
> the OR logic is taken care of by MultipleTermPositions,
> so the scorer does not need to be aware of any of this.
>
> Anyhow, example usage of this is in TestMultiPhraseQuery.
>
> Doron
>
> Chris Hostetter <hossman_lucene@fucit.org> wrote on 11/12/2007 09:12:17:
>
> >
> > Isn't MultiPhraseQuery what is desired here?  you can add Term[]s per
> > position and at least one term in each array must much.
> >
> > : > I was thinking of parsing the phrase query string into a
> > : > sequence of terms,
> > : > then constructing a phrase query object using add(Term term,
> > : > int position)
> > : > method in org.apache.lucene.search.PhraseQuery class. Then
> > I can inject
> > : > similar words (suggested by SpellChecker) at appropriate
> > : > positions for each
> > : > term as I construct the final phrase query object.
> > : >
> > : > Do you agree that this should work too?
> > :
> > : I never tried this but I'm sure it will not work.
> > :
> > : The phrase query scorer requires all the terms to
> > : appear - either at the 'right' place or with slop
> > : for sloppy phrases. Therefore if you inject two
> > : terms in the same position the scorer will require
> > : to find both of them in the same position in order to
> > : match a document. This would be an AND logic, while
> > : what you need is an OR logic.
> >
> >
> >
> >
> >
> > -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_36626_2593832.1197401203411--

From java-user-return-31425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 20:40:38 2007
Return-Path: <java-user-return-31425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79879 invoked from network); 11 Dec 2007 20:40:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 20:40:37 -0000
Received: (qmail 68985 invoked by uid 500); 11 Dec 2007 20:40:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68956 invoked by uid 500); 11 Dec 2007 20:40:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68945 invoked by uid 99); 11 Dec 2007 20:40:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 12:40:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of devquestions@gmail.com designates 209.85.146.183 as permitted sender)
Received: from [209.85.146.183] (HELO wa-out-1112.google.com) (209.85.146.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 20:40:00 +0000
Received: by wa-out-1112.google.com with SMTP id j40so4489612wah
        for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 12:40:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=uR5mfoSePAd4tURoJ17Syz8ZQtJHjfoTu9vDP7z0Jxs=;
        b=qv6y6XHVu9fpd3MUvbKFEca3Agd9eQck4VoiTQ2JcQ01ZU8Xk0Mcy/PUDO8gd3KlU6v3w1i/hKa1VfVpvxFHELE2AftzCwcaqsykmB4kfcXWIE/bn3rY8TLCMl97gYJfD40HX+zgysQSn+Tx+xV60lyaq29JmglGS0npuCr8e1s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=GALvCZUtpHJ9G6IT1X8YJ0SzTdG4SG6DXjYNWXW7XX2gXmx0epFxFxmLY241jVS1jmjk9nwGano5NpBMYzRcI7jTgy4YTD5m1G+PX6tG1mWA28e8RaEA1pPH9RS4+clDir/dyOd8OnKW2TwDk5lSa10QwMWQMuzKGnCvrX7P5Ss=
Received: by 10.140.188.10 with SMTP id l10mr2374871rvf.1197405603820;
        Tue, 11 Dec 2007 12:40:03 -0800 (PST)
Received: by 10.141.170.12 with HTTP; Tue, 11 Dec 2007 12:40:03 -0800 (PST)
Message-ID: <c01704c90712111240i60ef7f36rc1ddb0e9158c8bf6@mail.gmail.com>
Date: Tue, 11 Dec 2007 15:40:03 -0500
From: "Developer Developer" <devquestions@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Crawling in Nutch
In-Reply-To: <b0ba206a0708010759rdc8ff7ay953f0b2d5bbac1df@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16162_8232150.1197405603792"
References: <b0ba206a0708010759rdc8ff7ay953f0b2d5bbac1df@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16162_8232150.1197405603792
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

use luke to explroe the index. the content is present in the content field.
However, it is not stored so you can only search on it.

On Aug 1, 2007 9:59 AM, Srinivasarao Vundavalli <srinivas.apache@gmail.com>
wrote:

> Hi,
>     Where does (in which field)  nutch stores the content of a document
> while indexing. I am using this nutch index to search in Lucene. So i want
> to know the field in which the content of the document is present.
>
> Thank You
>

------=_Part_16162_8232150.1197405603792--

From java-user-return-31426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 22:38:23 2007
Return-Path: <java-user-return-31426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58628 invoked from network); 11 Dec 2007 22:38:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 22:38:22 -0000
Received: (qmail 37554 invoked by uid 500); 11 Dec 2007 22:38:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37533 invoked by uid 500); 11 Dec 2007 22:38:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37517 invoked by uid 99); 11 Dec 2007 22:38:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 14:38:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rsivak@istandfor.com designates 72.32.36.243 as permitted sender)
Received: from [72.32.36.243] (HELO mx0.istandfor.com) (72.32.36.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 22:37:43 +0000
Received: from [192.168.1.42] (pool-70-18-194-158.ny325.east.verizon.net [70.18.194.158])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id lBBMbdg3007512
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 16:37:45 -0600
Message-ID: <475F1134.6050402@istandfor.com>
Date: Tue, 11 Dec 2007 17:37:40 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Refreshing RAMDirectory
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

I have an index of about 10mb.  Since it's so small, I would like to 
keep it loaded in memory, and reload it about every minute or so, 
assuming that it has changed on disk.  I have the following code, which 
works, except it doesn't reload the changes. 

protected String indexName;
protected IndexReader reader;
private long lastCheck=0;
...
protected IndexReader getReader() throws CorruptIndexException, IOException
    {
        if (reader==null || System.currentTimeMillis() > lastCheck+60000)
        {
            lastCheck=System.currentTimeMillis();
            if (reader==null || !reader.isCurrent())
            {
                if (reader!=null)
                    reader.close();
               
                Directory dir = new RAMDirectory(indexName);
                reader = IndexReader.open(dir);
                searcher = new IndexSearcher(reader);
            }
        }
        return reader;
}


Apparently reader.isCurrent() won't tell you if the underlying 
FSDirectory has changed. 

I also had the following code before:
instead of
if (reader==null || !reader.isCurrent())
I had
if (reader==null || reader.getVersion() != 
IndexReader.getCurrentVersion(indexName))


I was getting a bunch of this indexreader is closed errors, and I'm not 
sure why there's no method like reader.isClosed().

Am I going about things the right way?  Is there a better implementation 
of what I'm looking to do?  Is there perhaps some function I'm not 
seeing which will let me know if the indexreader is closed?

Russ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 22:44:39 2007
Return-Path: <java-user-return-31427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23365 invoked from network); 11 Dec 2007 22:44:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 22:44:38 -0000
Received: (qmail 48637 invoked by uid 500); 11 Dec 2007 22:44:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48608 invoked by uid 500); 11 Dec 2007 22:44:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48597 invoked by uid 99); 11 Dec 2007 22:44:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 14:44:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rsivak@istandfor.com designates 72.32.36.243 as permitted sender)
Received: from [72.32.36.243] (HELO mx0.istandfor.com) (72.32.36.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 22:44:20 +0000
Received: from [192.168.1.42] (pool-70-18-194-158.ny325.east.verizon.net [70.18.194.158])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id lBBMhvRM007838
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 16:43:58 -0600
Message-ID: <475F12AF.4090505@istandfor.com>
Date: Tue, 11 Dec 2007 17:43:59 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Advice regarding fuzzy phrase searching
References: <475ED731.10801@usbmis.com>
In-Reply-To: <475ED731.10801@usbmis.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Look into SpanNearQuery.  It has a slop which lets you say how close you 
want the terms to be.  For a single document, if you are going to be 
doing a lot of these searches, I recommend using a MemoryIndex.

Russ

Jose Luna wrote:
> Hello,
>
> I am looking for some advice regarding which tools I might use to 
> solve my problem.  I apologize ahead of time for the long explanation.
>
> Problem Description:  I would like to index a set of very large HTML 
> documents.  I would then be able to run two different kinds of 
> queries: proximity queries, and fuzzy phrase queries.   I would like 
> to get the exact positions of the matching results from the query (I 
> need to modify the original documents at these positions.)  I will 
> only need to search one document at a time, i.e., I already know which 
> document I'll be looking in, so what's important is finding the 
> positions of the hits within that document.
>
> For example,  for a fuzzy search, I may want to search for "arterial 
> oxygen saturation".   I would want this to match "arterial oxygen 
> saturate", and I would want to get the position of where it matches.  
> I would also like to do proximity searches, with these broken into 
> separate terms.  So, I may be searching for "arterial", "oxygen", and 
> "saturate" all within 10 terms of each other, and get the positions of 
> the cases that match.
>
> To the best of my understanding, Lucene is not a good choice to solve 
> this problem (please correct me if I'm wrong).   As far as I can tell, 
> Lucene breaks up a document into a set of terms, and indexes these in 
> some sort of structure.  My guess is a B+ tree, but I'm curious to 
> learn more about it -- I couldn't find much in the documentation about 
> the underlying index structure.   Anyway, this means that the 
> keys->pointer pairs in the index are basically term->documenID pairs.  
> So this isn't very suitable for my problem. I already know which 
> document I want to search, I'm interested in the position of hits.    
> If I were to search for the phrase "arterial oxygen saturation", this 
> would be broken into terms and I could iterate through all of the 
> TermPositions for a given term in the document, and try to find out 
> where these terms are adjacent in the document.  Considering that my 
> document is very large, the phrases can be 10+ terms, and I need to do 
> this hundreds of times, this doesn't sound like a very good solution.  
> If we introduce the idea of fuzzy matches and proximity searches, it 
> seems like this task of iterating through TermPositions becomes very 
> complicated.
> I've spent time reading the docs, creating a test program, and reading 
> the mailing list.  As far as I can tell, Lucene is geared towards 
> document based queries, and isn't the ideal tool for my problem.  I 
> think an index based on a suffix tree (or variation of) would better 
> meet my needs, but I'm not sure how well these perform with fuzzy and 
> proximity searches.  I've looked around, and I can't seem to find a 
> good opensource indexing framework like lucene that's based on a 
> suffix tree.  Are there any suggestions for tools that would help with 
> this problem?  Does anyone have any suggestions on how I might bend 
> Lucene to meet my needs?
>
> Thanks in advance,
>
> JLuna
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 22:59:41 2007
Return-Path: <java-user-return-31428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69407 invoked from network); 11 Dec 2007 22:59:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 22:59:41 -0000
Received: (qmail 68658 invoked by uid 500); 11 Dec 2007 22:59:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68494 invoked by uid 500); 11 Dec 2007 22:59:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68483 invoked by uid 99); 11 Dec 2007 22:59:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 14:59:24 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 22:59:03 +0000
Received: by nf-out-0910.google.com with SMTP id d3so1517192nfc
        for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 14:59:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=BdfxqT7oTozhJ7TeZ3PSjBj5WVJwZB0ETWwMNvyLzxk=;
        b=qa2Ma1jpQFc9kJ+TJhp/KMFmX+tmY9eUiueTGdGGR6RmDDwQJ9omo/aGeIr+KbkV//wr1yAaM7DHVzSqdiQVflN+BGcbBdj3V6mq53eAPB/lDDgXfQN1h9b35bJ/GTGVBHenDydP6Vl9ylRfWznAdgxYOh9g9NRh7oeutzOhS2c=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=SorSNdqpLNDEVUKJS/0y2AH87fdVDW/0V0M6shD0kI5nZWUN1Z2C3YLQZQ2GtNI5ME47O2G5Hxjow/M6rEcYickppc171PCNr3MqmsE7KeKXlrsj4SASfqlKrelCd0mzo20mvgAG3E9TGv036Zk1ylUdEGJ5jR7QesKJFi/49r4=
Received: by 10.82.146.14 with SMTP id t14mr14133641bud.1197413944891;
        Tue, 11 Dec 2007 14:59:04 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Tue, 11 Dec 2007 14:59:04 -0800 (PST)
Message-ID: <359a92830712111459o620d76c9kb6f4ea3f897f6d41@mail.gmail.com>
Date: Tue, 11 Dec 2007 17:59:04 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Refreshing RAMDirectory
In-Reply-To: <475F1134.6050402@istandfor.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_25053_24929612.1197413944887"
References: <475F1134.6050402@istandfor.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_25053_24929612.1197413944887
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I can't speak to the errors, but how is the index being updated? An
indexwriter buffers changes and periodically flushes them out to
disk. So the writer may not have flushed your data, depending
upon how it's written.

Best
Erick

On Dec 11, 2007 5:37 PM, Ruslan Sivak <rsivak@istandfor.com> wrote:

> I have an index of about 10mb.  Since it's so small, I would like to
> keep it loaded in memory, and reload it about every minute or so,
> assuming that it has changed on disk.  I have the following code, which
> works, except it doesn't reload the changes.
>
> protected String indexName;
> protected IndexReader reader;
> private long lastCheck=0;
> ...
> protected IndexReader getReader() throws CorruptIndexException,
> IOException
>    {
>        if (reader==null || System.currentTimeMillis() > lastCheck+60000)
>        {
>            lastCheck=System.currentTimeMillis();
>            if (reader==null || !reader.isCurrent())
>            {
>                if (reader!=null)
>                    reader.close();
>
>                Directory dir = new RAMDirectory(indexName);
>                reader = IndexReader.open(dir);
>                searcher = new IndexSearcher(reader);
>            }
>        }
>        return reader;
> }
>
>
> Apparently reader.isCurrent() won't tell you if the underlying
> FSDirectory has changed.
>
> I also had the following code before:
> instead of
> if (reader==null || !reader.isCurrent())
> I had
> if (reader==null || reader.getVersion() !=
> IndexReader.getCurrentVersion(indexName))
>
>
> I was getting a bunch of this indexreader is closed errors, and I'm not
> sure why there's no method like reader.isClosed().
>
> Am I going about things the right way?  Is there a better implementation
> of what I'm looking to do?  Is there perhaps some function I'm not
> seeing which will let me know if the indexreader is closed?
>
> Russ
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_25053_24929612.1197413944887--

From java-user-return-31429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 23:00:34 2007
Return-Path: <java-user-return-31429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71847 invoked from network); 11 Dec 2007 23:00:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 23:00:34 -0000
Received: (qmail 71375 invoked by uid 500); 11 Dec 2007 23:00:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70902 invoked by uid 500); 11 Dec 2007 23:00:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70891 invoked by uid 99); 11 Dec 2007 23:00:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 15:00:16 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.184.233 as permitted sender)
Received: from [64.233.184.233] (HELO wr-out-0506.google.com) (64.233.184.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 22:59:54 +0000
Received: by wr-out-0506.google.com with SMTP id c46so1902333wra
        for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 14:59:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=Xj37l373i+U7LTIizyVKZl34Molh+uLMBaWb0VXlOK8=;
        b=czV0VZcvTnRbZI/45KG0JOtqU39rplm4oGyq+hw+onAe9jQypnQW4Cj/1iT6Hkg5rVYRGf2dDUYzUcpvTMlbyG8WcYRp1TuktMYe08+eBeaZvElS1b9oAquD+Ah++Wu7Kd43nGd3fExUgbnBNJA3fQIeGHrUlrM4hMSwrVD6b80=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=UtQirtSnt4ekIf9V8GBDLEFQ0IvvpvVhWRpuSI5UKLTdLyA/X9ytqXsMxCA5btTL9NxyGwog5xDAV7rWM8ReM/bxWlDN8GOVH24x0tipCBI70hrvkWiFJEcCI0ViEvpB75QXNLU6tNtiubFgyBE3a5BndeLxKaTCAOrhwfR8aZA=
Received: by 10.70.36.20 with SMTP id j20mr10846945wxj.1197413993641;
        Tue, 11 Dec 2007 14:59:53 -0800 (PST)
Received: from ?192.168.1.102? ( [216.66.119.110])
        by mx.google.com with ESMTPS id i14sm10209375wxd.2007.12.11.14.59.52
        (version=SSLv3 cipher=RC4-MD5);
        Tue, 11 Dec 2007 14:59:53 -0800 (PST)
Message-ID: <475F160D.6070301@gmail.com>
Date: Tue, 11 Dec 2007 17:58:21 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Advice regarding fuzzy phrase searching
References: <475ED731.10801@usbmis.com>
In-Reply-To: <475ED731.10801@usbmis.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Take a look at: https://issues.apache.org/jira/browse/LUCENE-794

This is an extension to the Highlighter that highlights span and 
proximity queries. If you rewrite the query it will also do fuzzy 
queries. I am sure you can easily steal some of the code to do what you 
want.

Keep in mind, because of how Lucene's SpanQuery works, if you say to 
find 'mark within 4 of ball', Lucene will not find all occurrences. ie: 
'mark close to ball ball' -- even if you say find mark within 20 of 
ball, a Span query will only find the first occurrence of ball even 
though both occurrences are within 20. If ball was on both sides of 
mark, both would match, but after finding the first ball with 20 of 
mark, Span doesnt continue looking for another.

- Mark

Jose Luna wrote:
> Hello,
>
> I am looking for some advice regarding which tools I might use to 
> solve my problem.  I apologize ahead of time for the long explanation.
>
> Problem Description:  I would like to index a set of very large HTML 
> documents.  I would then be able to run two different kinds of 
> queries: proximity queries, and fuzzy phrase queries.   I would like 
> to get the exact positions of the matching results from the query (I 
> need to modify the original documents at these positions.)  I will 
> only need to search one document at a time, i.e., I already know which 
> document I'll be looking in, so what's important is finding the 
> positions of the hits within that document.
>
> For example,  for a fuzzy search, I may want to search for "arterial 
> oxygen saturation".   I would want this to match "arterial oxygen 
> saturate", and I would want to get the position of where it matches.  
> I would also like to do proximity searches, with these broken into 
> separate terms.  So, I may be searching for "arterial", "oxygen", and 
> "saturate" all within 10 terms of each other, and get the positions of 
> the cases that match.
>
> To the best of my understanding, Lucene is not a good choice to solve 
> this problem (please correct me if I'm wrong).   As far as I can tell, 
> Lucene breaks up a document into a set of terms, and indexes these in 
> some sort of structure.  My guess is a B+ tree, but I'm curious to 
> learn more about it -- I couldn't find much in the documentation about 
> the underlying index structure.   Anyway, this means that the 
> keys->pointer pairs in the index are basically term->documenID pairs.  
> So this isn't very suitable for my problem. I already know which 
> document I want to search, I'm interested in the position of hits.    
> If I were to search for the phrase "arterial oxygen saturation", this 
> would be broken into terms and I could iterate through all of the 
> TermPositions for a given term in the document, and try to find out 
> where these terms are adjacent in the document.  Considering that my 
> document is very large, the phrases can be 10+ terms, and I need to do 
> this hundreds of times, this doesn't sound like a very good solution.  
> If we introduce the idea of fuzzy matches and proximity searches, it 
> seems like this task of iterating through TermPositions becomes very 
> complicated.
> I've spent time reading the docs, creating a test program, and reading 
> the mailing list.  As far as I can tell, Lucene is geared towards 
> document based queries, and isn't the ideal tool for my problem.  I 
> think an index based on a suffix tree (or variation of) would better 
> meet my needs, but I'm not sure how well these perform with fuzzy and 
> proximity searches.  I've looked around, and I can't seem to find a 
> good opensource indexing framework like lucene that's based on a 
> suffix tree.  Are there any suggestions for tools that would help with 
> this problem?  Does anyone have any suggestions on how I might bend 
> Lucene to meet my needs?
>
> Thanks in advance,
>
> JLuna
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 11 23:11:20 2007
Return-Path: <java-user-return-31430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97446 invoked from network); 11 Dec 2007 23:11:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 11 Dec 2007 23:11:20 -0000
Received: (qmail 78850 invoked by uid 500); 11 Dec 2007 23:11:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78814 invoked by uid 500); 11 Dec 2007 23:11:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78803 invoked by uid 99); 11 Dec 2007 23:11:03 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 15:11:03 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rsivak@istandfor.com designates 72.32.36.243 as permitted sender)
Received: from [72.32.36.243] (HELO mx0.istandfor.com) (72.32.36.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 23:11:04 +0000
Received: from [192.168.1.42] (pool-70-18-194-158.ny325.east.verizon.net [70.18.194.158])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id lBBNAgKZ009135
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 17:10:43 -0600
Message-ID: <475F18F4.90602@istandfor.com>
Date: Tue, 11 Dec 2007 18:10:44 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Refreshing RAMDirectory
References: <475F1134.6050402@istandfor.com> <359a92830712111459o620d76c9kb6f4ea3f897f6d41@mail.gmail.com>
In-Reply-To: <359a92830712111459o620d76c9kb6f4ea3f897f6d41@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

The on-disk index gets updated.  Something like this:
The second indexDoc function is what does the actual indexing, but this 
should have the relevant content. 

public void indexDoc(int userId) throws ClassNotFoundException, 
SQLException, CorruptIndexException, IOException
    {
        IndexWriter iw=new IndexWriter(indexName, analyzer, false);
        deleteDoc(userId, iw);
        ResultSet rs=sg.getSomeData(userId);
        indexDoc(iw,rs);
        iw.close();
    }

Russ


Erick Erickson wrote:
> I can't speak to the errors, but how is the index being updated? An
> indexwriter buffers changes and periodically flushes them out to
> disk. So the writer may not have flushed your data, depending
> upon how it's written.
>
> Best
> Erick
>
> On Dec 11, 2007 5:37 PM, Ruslan Sivak <rsivak@istandfor.com> wrote:
>
>   
>> I have an index of about 10mb.  Since it's so small, I would like to
>> keep it loaded in memory, and reload it about every minute or so,
>> assuming that it has changed on disk.  I have the following code, which
>> works, except it doesn't reload the changes.
>>
>> protected String indexName;
>> protected IndexReader reader;
>> private long lastCheck=0;
>> ...
>> protected IndexReader getReader() throws CorruptIndexException,
>> IOException
>>    {
>>        if (reader==null || System.currentTimeMillis() > lastCheck+60000)
>>        {
>>            lastCheck=System.currentTimeMillis();
>>            if (reader==null || !reader.isCurrent())
>>            {
>>                if (reader!=null)
>>                    reader.close();
>>
>>                Directory dir = new RAMDirectory(indexName);
>>                reader = IndexReader.open(dir);
>>                searcher = new IndexSearcher(reader);
>>            }
>>        }
>>        return reader;
>> }
>>
>>
>> Apparently reader.isCurrent() won't tell you if the underlying
>> FSDirectory has changed.
>>
>> I also had the following code before:
>> instead of
>> if (reader==null || !reader.isCurrent())
>> I had
>> if (reader==null || reader.getVersion() !=
>> IndexReader.getCurrentVersion(indexName))
>>
>>
>> I was getting a bunch of this indexreader is closed errors, and I'm not
>> sure why there's no method like reader.isClosed().
>>
>> Am I going about things the right way?  Is there a better implementation
>> of what I'm looking to do?  Is there perhaps some function I'm not
>> seeing which will let me know if the indexreader is closed?
>>
>> Russ
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 00:34:36 2007
Return-Path: <java-user-return-31431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78742 invoked from network); 12 Dec 2007 00:34:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 00:34:36 -0000
Received: (qmail 72410 invoked by uid 500); 12 Dec 2007 00:34:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72384 invoked by uid 500); 12 Dec 2007 00:34:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72373 invoked by uid 99); 12 Dec 2007 00:34:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 16:34:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 00:33:57 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id EB88F4A8263
	for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 11:33:25 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: DEFAULT_OPERATOR_AND  globally ?
Date: Wed, 12 Dec 2007 11:33:33 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <tkrat.dc3ae479df044225@igpm.rwth-aachen.de>
In-Reply-To: <tkrat.dc3ae479df044225@igpm.rwth-aachen.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200712121133.33361.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wednesday 12 December 2007 03:34:08 Helmut Jarausch wrote:
> Hi,
>
> I know how to set DEFAULT_OPERATOR_AND for an individual QueryParser
> Objekt (after creation)
>
> Since I always want this to be set, is there a means to set a (global)
> option such that any QueryParser object has this default operator.

I would simply centralise the place where you construct your QueryParser, 
either in a utility method, a factory or a builder.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 00:38:18 2007
Return-Path: <java-user-return-31432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80526 invoked from network); 12 Dec 2007 00:38:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 00:38:18 -0000
Received: (qmail 77633 invoked by uid 500); 12 Dec 2007 00:38:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77463 invoked by uid 500); 12 Dec 2007 00:37:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77452 invoked by uid 99); 12 Dec 2007 00:37:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 16:37:58 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.245] (HELO an-out-0708.google.com) (209.85.132.245)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 00:37:36 +0000
Received: by an-out-0708.google.com with SMTP id c5so5805anc.49
        for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 16:37:34 -0800 (PST)
Received: by 10.100.240.18 with SMTP id n18mr71639anh.75.1197419853947;
        Tue, 11 Dec 2007 16:37:33 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 26sm5459256wra.2007.12.11.16.37.33
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 11 Dec 2007 16:37:33 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <475F1134.6050402@istandfor.com>
References: <475F1134.6050402@istandfor.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AC726309-9A26-4DF7-804C-BE3D8E161D0B@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Refreshing RAMDirectory
Date: Tue, 11 Dec 2007 19:36:36 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Ruslan Sivak wrote:

> I have an index of about 10mb.  Since it's so small, I would like  
> to keep it loaded in memory, and reload it about every minute or  
> so, assuming that it has changed on disk.  I have the following  
> code, which works, except it doesn't reload the changes.
> protected String indexName;
> protected IndexReader reader;
> private long lastCheck=0;
> ...
> protected IndexReader getReader() throws CorruptIndexException,  
> IOException
>    {
>        if (reader==null || System.currentTimeMillis() > lastCheck 
> +60000)
>        {
>            lastCheck=System.currentTimeMillis();
>            if (reader==null || !reader.isCurrent())
>            {
>                if (reader!=null)
>                    reader.close();
>                              Directory dir = new RAMDirectory 
> (indexName);
>                reader = IndexReader.open(dir);
>                searcher = new IndexSearcher(reader);
>            }
>        }
>        return reader;
> }
>
>
> Apparently reader.isCurrent() won't tell you if the underlying  
> FSDirectory has changed.

That's right: your reader is only searching the RAMDirectory; it has  
no idea that your RAMDirectory was copied from an FSDirectory that  
has now changed.  (That ctor for RAMDirectory makes a full copy of  
what's currently in the FSDirectory and thereafter maintains no link  
to that FSDirectory).

> I also had the following code before:
> instead of
> if (reader==null || !reader.isCurrent())
> I had
> if (reader==null || reader.getVersion() !=  
> IndexReader.getCurrentVersion(indexName))

That 2nd line seems like it should have worked.  What version of  
Lucene are you using?  Are you really sure it's not showing the  
changes?  Can you print the two versions?  Every commit to the index  
(by IndexWriter) should increment that version number.

> I was getting a bunch of this indexreader is closed errors, and I'm  
> not sure why there's no method like reader.isClosed().

That's spooky: can you explain why you're accidentally using a closed  
reader?  Your code above seems to replace reader after closing it.   
Are there other threads that are using the reader while you are doing  
this re-opening?

> Am I going about things the right way?  Is there a better  
> implementation of what I'm looking to do?  Is there perhaps some  
> function I'm not seeing which will let me know if the indexreader  
> is closed?

Your 2nd line above is the right way I think.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 04:06:44 2007
Return-Path: <java-user-return-31433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4825 invoked from network); 12 Dec 2007 04:06:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 04:06:43 -0000
Received: (qmail 30130 invoked by uid 500); 12 Dec 2007 04:06:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30103 invoked by uid 500); 12 Dec 2007 04:06:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30088 invoked by uid 99); 12 Dec 2007 04:06:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 20:06:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Dec 2007 04:05:55 +0000
Received: (qmail 1936 invoked by uid 60001); 12 Dec 2007 04:05:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=QVeoZ6AE4+RfWxBfAtlKoDkGkIiiS8MxccVC0kjwOsj6DGYYBDpn/LzyJnDo5mrdAcnKPcycIZkTCttSFtn9touhGN/MgSPMLfmEJlIzQMBnMaEZRONPaqTkKApNSz8ZgOuxntE6NfRx8NuoUaE3o9Sz2DDVL8dPoeyCdME7Iw8=;
X-YMail-OSG: AJiA2FUVM1mURGltLeP4AuUCSbXrAPQe7L4DK7doL7JS875Rcy0sSGQ5tTN476fSaA--
Received: from [72.231.9.236] by web50304.mail.re2.yahoo.com via HTTP; Tue, 11 Dec 2007 20:05:56 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Tue, 11 Dec 2007 20:05:56 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: like search in NOT operator
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <968359.1413.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Shakti,

I think you provided the answer:
"sign* NOT Machine"
or
"sign* -Machine"

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Shakti_Sareen <Shakti_Sareen@satyam.com>
To: java-user@lucene.apache.org
Sent: Tuesday, December 11, 2007 4:48:58 AM
Subject: like search in NOT operator



Hi all,

     I am using StandardAnalyzer() to index the data.

Actual data is: "signals by magnets of different strength"

I want to search for "sign* NOT Machine".....how can I do that??

I am using QueryParser.

Please help on this issue.

Thanks
Shakti Sareen





DISCLAIMER:
This email (including any attachments) is intended for the sole use of
 the intended recipient/s and may contain material that is CONFIDENTIAL
 AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or
 copying or distribution or forwarding of any or all of the contents in
 this message is STRICTLY PROHIBITED. If you are not the intended
 recipient, please contact the sender by email and delete all copies; your
 cooperation in this regard is appreciated.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 04:07:38 2007
Return-Path: <java-user-return-31434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5110 invoked from network); 12 Dec 2007 04:07:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 04:07:37 -0000
Received: (qmail 33542 invoked by uid 500); 12 Dec 2007 04:07:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33508 invoked by uid 500); 12 Dec 2007 04:07:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33497 invoked by uid 99); 12 Dec 2007 04:07:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 20:07:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [206.190.38.57] (HELO web50303.mail.re2.yahoo.com) (206.190.38.57)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Dec 2007 04:07:19 +0000
Received: (qmail 74116 invoked by uid 60001); 12 Dec 2007 04:06:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=JziDl/LYPs1UrmKFuLKhPIuyc8Fi/pdzljuVVOqUy2zPJdj/6e2xHM76xXXdyJs9YYzSuyVIgXgy8AA1kwpth+mTJtWhEx7nl0urR2BZof0a0z7bX5aqi6m2a9zRwADd8jqpdbbYf7nhjueUvCf5rtR7x5J0GDKaxav2RBspbGI=;
X-YMail-OSG: bRashwMVM1kdDi_Sze_iHLQY2CrvJCgsaflDxNz7fk93TjWeypzhgG3rhA_bTD51wuY.syi2Hl_.giBdCTW9Rc1w75Sa46lM1gK31Sqo.gihmR8rYTk-
Received: from [66.196.116.52] by web50303.mail.re2.yahoo.com via HTTP; Tue, 11 Dec 2007 20:06:57 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Tue, 11 Dec 2007 20:06:57 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: help required ... ~ operator
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <637920.74082.qm@web50303.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Have you tried with ~3 or ~4?  Just curious...

Otis
--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Shakti_Sareen <Shakti_Sareen@satyam.com>
To: java-user@lucene.apache.org
Sent: Tuesday, December 11, 2007 3:13:47 AM
Subject: help required ... ~ operator


Hi all,

     I am using StandardAnalyzer() to index the data.

Actual data is: "signals by magnets of different strength"
when I am parsing a query: "signals strength"~2  , I am getting a hit.


But when I am parsing a query "strength signals"~2 , I am not getting a
hit.
WHY???it should work....

I am using QueryParser.

Please help on this issue.

Thanks
Shakti Sareen





DISCLAIMER:
This email (including any attachments) is intended for the sole use of
 the intended recipient/s and may contain material that is CONFIDENTIAL
 AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or
 copying or distribution or forwarding of any or all of the contents in
 this message is STRICTLY PROHIBITED. If you are not the intended
 recipient, please contact the sender by email and delete all copies; your
 cooperation in this regard is appreciated.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 04:10:31 2007
Return-Path: <java-user-return-31435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6053 invoked from network); 12 Dec 2007 04:10:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 04:10:31 -0000
Received: (qmail 38081 invoked by uid 500); 12 Dec 2007 04:10:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38048 invoked by uid 500); 12 Dec 2007 04:10:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38032 invoked by uid 99); 12 Dec 2007 04:10:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 20:10:13 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.58] (HELO web50304.mail.re2.yahoo.com) (206.190.38.58)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Dec 2007 04:09:49 +0000
Received: (qmail 3208 invoked by uid 60001); 12 Dec 2007 04:09:52 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=qrXRuLNY/wAdFVCKnDNYAz4rjBXOUbpd1GgNKpVekj10eocemjZQLT+a72D/joGZ2HQQcCSX+RNnZ3OXvO+Nx0k65sWaq9ADkXMKM/UinkU0UWwRtcDWnmhSvkAO7zVMl5+wmi2dpDpDaxGLee2K/LWyrQqZCnXP6GyOBXsn79A=;
X-YMail-OSG: BFMkMmQVM1l883R0G6Y6upEY1L0WryVfQSZGAHAVr744b60XzkaRzcKtMxkbJ1y3JIfV75qbX0tPhPbxJ1M2Vp0SgXQtIMsaHHxvoKnnNB5h3QHZmiE-
Received: from [72.231.9.236] by web50304.mail.re2.yahoo.com via HTTP; Tue, 11 Dec 2007 20:09:52 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Tue, 11 Dec 2007 20:09:52 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Out of memory?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <363804.2764.qm@web50304.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Bob,

Move the following line in your if block:

Sort sort = new Sort(sortColumn, desc);
That will fix your OOM problem.

Otis 

--
Sematext -- http://sematext.com/ -- Lucene - Solr - Nutch

----- Original Message ----
From: Bob Daha <neokalus@yahoo.com>
To: java-user@lucene.apache.org
Sent: Monday, December 10, 2007 5:42:27 PM
Subject: Re: Out of memory?

Interesting... I didn't explicitly turn that on... I'm creating a query
 using query parser, then executing a search using that query and a
 sort.  Would this algorithmically somehow invoke the FieldCacheImpl?  If
 so, anyway I can turn it off?  Basically the caching wouldn't be
 valuable anyway given the volatility of the index, and I'm not that concerned
 with speed.  (seeing most queries take well under 20ms)

Here's the searcher thread, if the code would help... note rd is my
 RAMDirectory object - it is never closed / reopened for the life of the
 application.

  public tps_search_results searchIndex(String query, String
 sortColumn, boolean desc) {
    ArrayList<Long> results = new ArrayList<Long>();

    try {

      if (!readerTPS.isCurrent()) {
        searcher.close();
        readerTPS.close();
        readerTPS = IndexReader.open(rd);
        searcher  = new IndexSearcher(readerTPS);
      }

      Query q = parserTPS.parse(query);

      Sort sort = new Sort(sortColumn, desc);

      Hits hits = searcher.search(q, sort);

      for (Iterator<Hit> it = hits.iterator(); it.hasNext(); ) {
        Hit hit = it.next();

        results.add(Long.parseLong(hit.get("ticket_id")));
      }

    } catch (Exception e) {
      rlog.exception(e);
    }

    rlog.queryComplete(": Results count: " + results.size());

    tps_search_results ret_results = new tps_search_results(results);

    return ret_results;
  }


----- Original Message ----
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Sent: Monday, December 10, 2007 2:17:26 PM
Subject: Re: Out of memory?


Looks like you are using FieldCacheImpl to count search results for
each category. ( or called facet search by a fancy name ).

Well, it's a cache and the terms are loaded in the memory.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer Twenga got 2.6 Million Euro funding!
http://www.techcrunch.com/2007/12/07/twenga-gets-e26-million-for-product-search/

On Dec 10, 2007 11:56 AM, Bob Daha <neokalus@yahoo.com> wrote:
> Hello,
>
> I'm building a ticketing system for my company and am using Lucene
 for some of the more complicated queries.  I'd say my application
 differs
 from the typical lucene application in that my documents are
 (re)-indexed more frequently, the query load is actually relatively
 light, and
 most of the indexed document data is numerical.  (ticket id, owner id,
 date ranges, etc are numbers and there's just one giant "text"
 searchable field.)
>
> I just got an out of memory exception on my app.  When I fired up
 jhat, I was very surprised at the object allocation:
>
> 7862 instances of class org.apache.lucene.index.Term
> 7787 instances of class org.apache.lucene.index.TermInfo
> 504 instances of class org.apache.lucene.index.FieldInfo
> 224 instances of class org.apache.lucene.index.TermBuffer
> 79 instances of class
 org.apache.lucene.index.CompoundFileReader$CSIndexInput
> 75 instances of class org.apache.lucene.index.SegmentTermEnum
> 70 instances of class org.apache.lucene.store.RAMFile
> 64 instances of class org.apache.lucene.store.RAMInputStream
> 63 instances of class org.apache.lucene.index.FieldInfos
> 20 instances of class
 com.facebook.tps_search_server.tps_search_ticket
> 20 instances of class
 com.facebook.tps_search_server.tps_search_ticket$Isset
> 10 instances of class org.apache.lucene.index.IndexReader$FieldOption
> 9 instances of class
 org.apache.lucene.index.IndexFileDeleter$RefCount
> 8 instances of class
 org.apache.lucene.index.CompoundFileReader$FileEntry
> 8 instances of class
 org.apache.lucene.index.CompoundFileWriter$FileEntry
> 8 instances of class org.apache.lucene.index.SegmentReader$Norm
> 7 instances of class org.apache.lucene.document.FieldSelectorResult
> 5 instances of class org.apache.lucene.document.Field$TermVector
> 5 instances of class org.apache.lucene.queryParser.Token
> 4 instances of class org.apache.lucene.document.Field$Index
> 4 instances of class org.apache.lucene.search.FieldCacheImpl$Entry
> 3 instances of class com.facebook.thrift.protocol.TBinaryProtocol
> 3 instances of class com.facebook.thrift.transport.TSocket
> 3 instances of class org.apache.lucene.document.Field$Store
> 3 instances of class org.apache.lucene.index.SegmentInfos
> 3 instances of class org.apache.lucene.search.BooleanClause$Occur
> 2 instances of class
 com.facebook.thrift.protocol.TBinaryProtocol$Factory
> 2 instances of class
 com.facebook.thrift.server.TThreadPoolServer$WorkerProcess
> 2 instances of class com.facebook.thrift.transport.TTransportFactory
> 2 instances of class
 org.apache.lucene.analysis.standard.StandardAnalyzer
> 2 instances of class org.apache.lucene.index.SegmentInfo
> 2 instances of class
 org.apache.lucene.queryParser.QueryParser$Operator
> 2 instances of class org.apache.lucene.search.DefaultSimilarity
> 2 instances of class org.apache.lucene.search.FieldSortedHitQueue$2
> 2 instances of class org.apache.lucene.search.Sort
> 2 instances of class org.apache.lucene.search.SortField
> 2 instances of class org.apache.lucene.store.RAMDirectory
> 2 instances of class
 org.apache.lucene.store.SingleInstanceLockFactory
> 2 instances of class [Lorg.apache.lucene.search.SortField;
> ...
>
> Any ideas on why I'd have so many Term and TermInfo objects?  To give
 you a little more insight into my application, worker threads can be
 spawned by client requests that do one of 4 things - search, index
 tickets, deindex tickets, or reindex tickets.  (reindex a ticket is
 basically deindex then index ticket)  I'm using a RAMDirectory for all
 my
 searches and updates although I have another thread which backs this
 up to
 disc periodically.
>
> Thanks,
> B
>
>
>
>
>      

 ____________________________________________________________________________________
> Looking for last minute shopping deals?
> Find them fast with Yahoo! Search.

  http://tools.search.yahoo.com/newsearch/category.php?category=shopping

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org







    
  ____________________________________________________________________________________
Never miss a thing.  Make Yahoo your home page. 
http://www.yahoo.com/r/hs



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 05:20:06 2007
Return-Path: <java-user-return-31436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96696 invoked from network); 12 Dec 2007 05:20:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 05:20:06 -0000
Received: (qmail 67926 invoked by uid 500); 12 Dec 2007 05:19:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67894 invoked by uid 500); 12 Dec 2007 05:19:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67883 invoked by uid 99); 12 Dec 2007 05:19:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 21:19:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rsivak@istandfor.com designates 72.32.36.243 as permitted sender)
Received: from [72.32.36.243] (HELO mx0.istandfor.com) (72.32.36.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 05:19:26 +0000
Received: from [192.168.0.108] (ool-457abb02.dyn.optonline.net [69.122.187.2])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id lBC5JQZX024795
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 23:19:29 -0600
Message-ID: <475F6F5E.9040103@istandfor.com>
Date: Wed, 12 Dec 2007 00:19:26 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Refreshing RAMDirectory
References: <475F1134.6050402@istandfor.com> <AC726309-9A26-4DF7-804C-BE3D8E161D0B@mikemccandless.com>
In-Reply-To: <AC726309-9A26-4DF7-804C-BE3D8E161D0B@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
>
> Ruslan Sivak wrote:
>
>> I have an index of about 10mb.  Since it's so small, I would like to 
>> keep it loaded in memory, and reload it about every minute or so, 
>> assuming that it has changed on disk.  I have the following code, 
>> which works, except it doesn't reload the changes.
>> protected String indexName;
>> protected IndexReader reader;
>> private long lastCheck=0;
>> ...
>> protected IndexReader getReader() throws CorruptIndexException, 
>> IOException
>>    {
>>        if (reader==null || System.currentTimeMillis() > lastCheck+60000)
>>        {
>>            lastCheck=System.currentTimeMillis();
>>            if (reader==null || !reader.isCurrent())
>>            {
>>                if (reader!=null)
>>                    reader.close();
>>                              Directory dir = new 
>> RAMDirectory(indexName);
>>                reader = IndexReader.open(dir);
>>                searcher = new IndexSearcher(reader);
>>            }
>>        }
>>        return reader;
>> }
>>
>>
>> Apparently reader.isCurrent() won't tell you if the underlying 
>> FSDirectory has changed.
>
> That's right: your reader is only searching the RAMDirectory; it has 
> no idea that your RAMDirectory was copied from an FSDirectory that has 
> now changed.  (That ctor for RAMDirectory makes a full copy of what's 
> currently in the FSDirectory and thereafter maintains no link to that 
> FSDirectory).
>
>> I also had the following code before:
>> instead of
>> if (reader==null || !reader.isCurrent())
>> I had
>> if (reader==null || reader.getVersion() != 
>> IndexReader.getCurrentVersion(indexName))
>
> That 2nd line seems like it should have worked.  What version of 
> Lucene are you using?  Are you really sure it's not showing the 
> changes?  Can you print the two versions?  Every commit to the index 
> (by IndexWriter) should increment that version number.
>
The 2nd line was working fine, however I was getting errors in other 
places saying that the indexReader is closed. 
>> I was getting a bunch of this indexreader is closed errors, and I'm 
>> not sure why there's no method like reader.isClosed().
>
> That's spooky: can you explain why you're accidentally using a closed 
> reader?  Your code above seems to replace reader after closing it.  
> Are there other threads that are using the reader while you are doing 
> this re-opening?
>
There could be other threads using this, and there are other places in 
the code that open and close readers.  My main problem I guess is that I 
can't tell when a reader is closed.  Is there some method I can use?  I 
basically want to do something like this.
if (reader==null || reader.isClosed || reader.getVersion() != 
IndexReader.getCurrentVersion(indexName))

Is reader threadsafe?  Should each invocation open it's own reader?

Russ

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 05:35:42 2007
Return-Path: <java-user-return-31437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9368 invoked from network); 12 Dec 2007 05:35:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 05:35:41 -0000
Received: (qmail 78517 invoked by uid 500); 12 Dec 2007 05:35:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78486 invoked by uid 500); 12 Dec 2007 05:35:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78475 invoked by uid 99); 12 Dec 2007 05:35:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 21:35:24 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.60] (HELO web50306.mail.re2.yahoo.com) (206.190.38.60)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Dec 2007 05:35:03 +0000
Received: (qmail 78286 invoked by uid 60001); 12 Dec 2007 05:35:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=4Y150QZAbv1C6lZLB9kwbHB0b0YdxyolztC6J/hfrOIN5lgH1Qthe5C6xYFE59O7g21l1MZ48hebiLPZhqgcNen/fyItxuQ7Fhenqtqn049xeL31tpeqmZUZkXfOBoczoNgTD77MI5x0aRFWgrT0EF8AwICKN6dH4tVcMtAbVlk=;
X-YMail-OSG: tHkl54IVM1mKZG8th3py9U1bripVN2apX16KO3WXQusRpk2PFMrZcDkxxpq3g973uA--
Received: from [72.231.9.236] by web50306.mail.re2.yahoo.com via HTTP; Tue, 11 Dec 2007 21:35:05 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Tue, 11 Dec 2007 21:35:05 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Indexing Wikipedia dumps
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <547045.76613.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I need to index a Wikipedia dump.  I know there is code in contrib/benchmark for indexing *English* Wikipedia for benchmarking purposes.  However, I'd like to index a non-English dump, and I actually don't need it for benchmarking, I just want to end up with a Lucene index.

Any suggestions where I should start?  That is, can anything in contrib/benchmark already do this, or is there anything there that I should use as a starting point?  As opposed to writing my own Wikipedia XML dump parser+indexer.

Thanks,
Otis



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 06:20:24 2007
Return-Path: <java-user-return-31438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12598 invoked from network); 12 Dec 2007 06:20:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 06:20:24 -0000
Received: (qmail 2291 invoked by uid 500); 12 Dec 2007 06:20:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2254 invoked by uid 500); 12 Dec 2007 06:20:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2243 invoked by uid 99); 12 Dec 2007 06:20:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 22:20:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of kangas@gmail.com designates 64.233.178.246 as permitted sender)
Received: from [64.233.178.246] (HELO hs-out-2122.google.com) (64.233.178.246)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 06:19:44 +0000
Received: by hs-out-2122.google.com with SMTP id 54so112500hsz.5
        for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 22:19:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to:in-reply-to:content-type:content-transfer-encoding:mime-version:subject:date:references:x-mailer;
        bh=A9HIQHVg7m4vHavkWK3YmgPzNKVgHeY6yawxNvz4aM0=;
        b=kgPC9zMYMu5v0PJ8m3QETItpcnMr2qExkxnYQ/u86Koexp6Gok+7kzWzQAiJSdaM5pa/LmRkcvGB5aV7B/Lcw7IaRgPqteVyFWZp7WLcavU79zB+JFY1mEf41RhAW5l2Ntr8v2G39rbZIAG7KxgIra/RxeUFhdwIntixODVg0Zc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:in-reply-to:content-type:content-transfer-encoding:mime-version:subject:date:references:x-mailer;
        b=ww2Yp+L+CtLnEEzEY2MQuCJBzD/s4zZ3gTH18+MCHV5uXIjS+wvLcVZSrIl7bsgZMkWsr3wsaIXAwe3MS/WG3R0bpaCq+iG+gM3qei7aU/kcZzrbZujk56c6VfPlXtc2M/y1NKGREvxIbtn1XuAaNTjVRflKs2FKdIBPvFwyh3M=
Received: by 10.70.22.16 with SMTP id 16mr523237wxv.45.1197440387229;
        Tue, 11 Dec 2007 22:19:47 -0800 (PST)
Received: from ?192.168.11.121? ( [69.203.135.173])
        by mx.google.com with ESMTPS id h15sm10959748wxd.2007.12.11.22.19.45
        (version=TLSv1/SSLv3 cipher=OTHER);
        Tue, 11 Dec 2007 22:19:46 -0800 (PST)
Message-Id: <13D36B9F-D20C-4101-BCCC-A06C1014736A@gmail.com>
From: Matt Kangas <kangas@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <547045.76613.qm@web50306.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Indexing Wikipedia dumps
Date: Wed, 12 Dec 2007 01:19:44 -0500
References: <547045.76613.qm@web50306.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Otis, if you're willing to use some non-Java code for your task...

1) Wikipedia uses Lucene for their full-text searches, and the module  
is part of Mediawiki. You could use this as follows:
- Install Mediawiki
- Load your Wikipedia dump into MW (and MySQL)
- Build a search index for the Lucene Search extension:
http://svn.wikimedia.org/viewvc/mediawiki/trunk/lucene-search/README.txt?revision=8535&view=markup

2) Alternately, use Mediawiki's native import parser (in PHP) and use  
that to feed Solr, etc. The code is a bit hairy, 'tho.
http://svn.wikimedia.org/viewvc/mediawiki/trunk/phase3/includes/SpecialImport.php?revision=27686&view=markup

--Matt

On Dec 12, 2007, at 12:35 AM, Otis Gospodnetic wrote:

> Hi,
>
> I need to index a Wikipedia dump.  I know there is code in contrib/ 
> benchmark for indexing *English* Wikipedia for benchmarking  
> purposes.  However, I'd like to index a non-English dump, and I  
> actually don't need it for benchmarking, I just want to end up with  
> a Lucene index.
>
> Any suggestions where I should start?  That is, can anything in  
> contrib/benchmark already do this, or is there anything there that I  
> should use as a starting point?  As opposed to writing my own  
> Wikipedia XML dump parser+indexer.
>
> Thanks,
> Otis

--
Matt Kangas / kangas@gmail.com



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 06:31:21 2007
Return-Path: <java-user-return-31439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72027 invoked from network); 12 Dec 2007 06:31:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 06:31:21 -0000
Received: (qmail 6754 invoked by uid 500); 12 Dec 2007 06:31:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6712 invoked by uid 500); 12 Dec 2007 06:31:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6701 invoked by uid 99); 12 Dec 2007 06:31:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 22:31:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.re2.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Dec 2007 06:30:41 +0000
Received: (qmail 22778 invoked by uid 60001); 12 Dec 2007 06:30:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=Z3XWWYxV0qejitwH1mVOFOpYuqOA1Rz+WkXYB44x0NoVWXt0/TL00nUSKGxNNKEVBMKzphZvpqbJ+X6WTlxP3cAJW+lI4Q5+aHVS8nyvyJMVN4MZG6sIhpt4Q3nXmWzVWG1U0JgU9oiXTYVAb7p6VjeOYjWghHhO8rzScSUNUWE=;
X-YMail-OSG: qnsNYyMVM1lO..pH_2INR2XXhFrkH71WaAR1S4TVNVqfnZ8NWTOlptCCvkAFkB5MZuVB_Ou2xX6le2DWqMW5i_LLqyw8S3GGDBf6HPlKRqyZkc9TzVZ4xUj0C8z9QRmuqGgb_VAm_ThaclQ-
Received: from [72.231.9.236] by web50308.mail.re2.yahoo.com via HTTP; Tue, 11 Dec 2007 22:30:43 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Tue, 11 Dec 2007 22:30:43 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing XML document
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <555499.22042.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Liaqat,=0A=0AOut of curiosity - what are you using to analyze and index Urd=
u?  AraMorph or something else?=0A=0AThanks,=0AOtis=0A--=0ASematext -- http=
://sematext.com/ -- Lucene - Solr - Nutch=0A=0A----- Original Message ----=
=0AFrom: Liaqat Ali <liaqatalimian@gmail.com>=0ATo: java-user@lucene.apache=
.org=0ASent: Tuesday, December 4, 2007 1:04:45 PM=0ASubject: Indexing XML d=
ocument=0A=0AHi all,=0A=0AI want to index an XML file,containing 200 Urdu l=
anguage (Varient of =0AArabic and Persian) documents. This corpus is in CES=
 format,consisting =0Aof information about author and many more, I just wan=
t to extract =0Atextual data of each document and relative Doc number and t=
itle in each=0A =0Adocument using SAX.=0A=0AThe problem I m facing that wha=
t should be the output of this whole =0Aprocessing, which is acceptable to =
Lucene Indexer. I just want to store=0A =0ADocument number, and Title with =
each document. The example given below =0Ais Doc 2 from that XML file. I wa=
nt to make complete index of 200 =0Adocuments with Doc number and title... =
Kindly guide me......=0A=0A=0A<h.title>Doc 2</h.title>=0A=0A<title>=D8=AD=
=DA=A9=D9=85=D8=AA =DB=8C=D8=A7=D8=B1 =DA=A9=D9=88 =D8=A7=DB=8C=D8=B1=D8=A7=
=D9=86 =D8=A8=D8=AF=D8=B1 =DA=A9=D8=B1=D9=86=DB=92 =D9=BE=D8=B1=0A =D8=BA=
=D9=88=D8=B1</title>=0A</p>=0A<p>=D8=A7=D9=88=D8=B1 =D8=AE=D8=A8=D8=B1=DB=
=8C=DA=BA =DB=81=DB=8C=DA=BA =DA=A9=DB=81 =D8=A7=D9=86=DA=BE=DB=8C=DA=BA =
=D8=A7=DB=8C=D8=B1=D8=A7=D9=86 =D8=A8=D8=AF=D8=B1 =DA=A9=D8=B1=D9=86=DB=92=
=0A =D9=BE=D8=B1 =D8=A8=DA=BE=DB=8C =D8=BA=D9=88=D8=B1 =DA=A9=DB=8C=D8=A7 =
=D8=AC=D8=A7 =D8=B1=DB=81=D8=A7 =DB=81=DB=92=DB=94 =D8=AD=DA=A9=D9=85=D8=AA=
 =0A=DB=8C=D8=A7=D8=B1 =D8=AC=D9=88 =D8=B3=D8=A7=D8=A8=D9=82 =D8=B3=D9=88=
=D9=88=DB=8C=D8=AA =DB=8C=D9=88=D9=86=DB=8C=D9=86 =DA=A9=DB=8C =D9=85=D8=AF=
=D8=A7=D8=AE=D9=84=D8=AA =DA=A9=DB=92=0A =D8=AE=D9=84=D8=A7=D9=81 =D8=A7=D9=
=85=D8=B1=DB=8C=DA=A9=DB=8C =D8=AD=D9=85=D8=A7=DB=8C=D8=AA =D8=B3=DB=92 =DA=
=86=D9=84=DB=92 =D9=88=D8=A7=D9=84=DB=8C =0A=D9=85=D8=B2=D8=A7=D8=AD=D9=85=
=D8=AA =D9=85=DB=8C=DA=BA =D8=B3=D8=A7=D9=85=D9=86=DB=92 =D8=A2=DB=93 =D8=
=AA=DA=BE=DB=92 =D8=A7=D8=A8 =D9=85=D8=AE=D8=A7=D9=84=D9=81 =D8=AE=DB=8C=D8=
=A7=D9=84=D8=A7=D8=AA=0A =DA=A9=DB=92 =D9=84=DB=93 =D8=AC=D8=A7=D9=86=DB=92=
 =D8=AC=D8=A7=D8=AA=DB=92 =DB=81=DB=8C=DA=BA =D8=A7=D9=88=D8=B1 =D8=A7=D8=
=A8 =D9=88=DB=81 =0A=DA=A9=D8=B1=D8=B2=D8=A6=DB=8C =D8=A7=D9=86=D8=AA=D8=B8=
=D8=A7=D9=85=DB=8C=DB=81 =DA=A9=DB=8C =D8=A8=DA=BE=DB=8C =D9=85=D8=AE=D8=A7=
=D9=84=D9=81=D8=AA =DA=A9=D8=B1=D8=B1=DB=81=DB=92=0A =D8=AA=DA=BE=DB=92=DB=
=94 =DA=AF=D8=B0=D8=B4=D8=AA=DB=81 =DB=81=D9=81=D8=AA=DB=92 =D8=A7=DB=8C=D8=
=B1=D8=A7=D9=86 =D9=86=DB=92 =D8=AD=DA=A9=D9=85=D8=AA =DB=8C=D8=A7=D8=B1 =
=D9=BE=D8=B1 =0A=D8=A7=D9=84=D8=B2=D8=A7=D9=85 =D9=84=DA=AF=D8=A7=DB=8C=D8=
=A7 =D8=AA=DA=BE=D8=A7 =DA=A9=DB=81 =D9=88=DB=81 =D8=A7=DB=8C=D8=B1=D8=A7=
=D9=86 =DA=A9=DB=8C =D8=B3=D8=B1=D8=B2=D9=85=DB=8C=D9=86=0A =DA=A9=D9=88 =
=D8=A7=D9=81=D8=BA=D8=A7=D9=86 =D8=A7=D9=86=D8=AA=D8=B8=D8=A7=D9=85=DB=8C=
=DB=81 =DA=A9=DB=92 =D8=AE=D9=84=D8=A7=D9=81 =0A=DA=A9=D8=A7=D8=B1=D9=88=D8=
=A7=D8=A6=DB=8C=D8=A7=DA=BA =DA=A9=D8=B1=D9=86=DB=92 =DA=A9=DB=92 =D9=84=DB=
=93 =D8=A7=D8=B3=D8=AA=D8=B9=D9=85=D8=A7=D9=84 =DA=A9=D8=B1=D8=B1=DB=81=DB=
=92 =DB=81=DB=8C=DA=BA=0A =D8=AC=D8=A8 =DA=A9=DB=81 =D8=A7=DB=8C=D8=B1=D8=
=A7=D9=86 =DA=A9=D8=A7 =DA=A9=DB=81=D9=86=D8=A7 =DB=81=DB=92 =DA=A9=DB=81 =
=D9=88=DB=81 =0A=D8=B7=D8=A7=D9=84=D8=A8=D8=A7=D9=86 =DA=A9=DB=92 =D8=AE=D9=
=84=D8=A7=D9=81 =D9=85=D8=B2=D8=A7=D8=AD=D9=85 =D8=AF=DA=BE=DA=91=D9=88=DA=
=BA =DA=A9=D9=88 =D8=AC=D9=88 =D8=AD=D9=85=D8=A7=DB=8C=D8=AA=0A =D9=81=D8=
=B1=D8=A7=D8=AD=D9=85 =DA=A9=D8=B1 =D8=B1=DB=81=D8=A7 =D8=AA=DA=BE=D8=A7 =
=D9=88=DB=81 =D8=B7=D8=A7=D9=84=D8=A8=D8=A7=D9=86 =DA=A9=D8=A7 =0A=DA=A9=D9=
=86=D9=B9=D8=B1=D9=88=D9=84 =D8=AE=D8=AA=D9=85 =DB=81=D9=88=D9=86=DB=92 =DA=
=A9=DB=92 =D8=A8=D8=B9=D8=AF =D8=A8=D9=86=D8=AF =DA=A9=D8=B1 =D8=AF=DB=8C =
=DA=AF=D8=A6=DB=8C =DB=81=DB=92=DB=94=0A =D8=AA=D8=A7=DB=81=D9=85 =D8=A8=D8=
=B9=D8=B6 =D8=B0=D8=B1=D8=A7=D8=A6=D8=B9 =DA=A9=D8=A7 =D8=AE=DB=8C=D8=A7=D9=
=84 =DB=81=DB=92 =DA=A9=DB=81 =0A=D8=A7=DB=8C=D8=B1=D8=A7=D9=86 =D9=86=DB=
=92 =D8=AD=DA=A9=D9=85=D8=AA =DB=8C=D8=A7=D8=B1 =DA=A9=DB=92 =D8=AE=D9=84=
=D8=A7=D9=81 =D8=A7=D9=82=D8=AF=D8=A7=D9=85 =D8=A7=D9=85=D8=B1=DB=8C=DA=A9=
=DB=81=0A =DA=A9=DB=92 =D8=A7=D8=B9=D8=AA=D8=B1=D8=A7=D8=B6=D8=A7=D8=AA =DA=
=A9=DB=92 =D8=A8=D8=B9=D8=AF =DA=A9=DB=8C=DB=92 =DB=81=DB=8C=DA=BA=DB=94</p=
>=0A=0A=0A=0AThanks ..... Liaqat=0A=0A-------------------------------------=
--------------------------------=0ATo unsubscribe, e-mail: java-user-unsubs=
cribe@lucene.apache.org=0AFor additional commands, e-mail: java-user-help@l=
ucene.apache.org=0A=0A=0A=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 06:32:23 2007
Return-Path: <java-user-return-31440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77057 invoked from network); 12 Dec 2007 06:32:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 06:32:23 -0000
Received: (qmail 9097 invoked by uid 500); 12 Dec 2007 06:32:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8615 invoked by uid 500); 12 Dec 2007 06:32:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8602 invoked by uid 99); 12 Dec 2007 06:32:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 22:32:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.30.112.121] (HELO listen.hbz-nrw.de) (193.30.112.121)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 06:31:42 +0000
Received: from agrippa.hbz-nrw.de (agrippa.hbz-nrw.de [193.30.112.24])
	by listen.hbz-nrw.de (Postfix) with ESMTP id CD2B72D75A
	for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 07:31:44 +0100 (CET)
Received: from [10.1.1.23] ([::ffff:10.1.1.23])
	by agrippa.hbz-nrw.de with ESMTP; Wed, 12 Dec 2007 07:31:27 +0100
Message-ID: <475F803F.5070107@hbz-nrw.de>
Date: Wed, 12 Dec 2007 07:31:27 +0100
From: Andre Halama <halama@hbz-nrw.de>
User-Agent: Thunderbird 2.0.0.0 (X11/20070419)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: DEFAULT_OPERATOR_AND  globally ?
References: <tkrat.dc3ae479df044225@igpm.rwth-aachen.de>
In-Reply-To: <tkrat.dc3ae479df044225@igpm.rwth-aachen.de>
X-Enigmail-Version: 0.95.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: amavisd-new at hbz-nrw.de
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Helmut Jarausch schrieb:

Hi Helmut,

> I know how to set DEFAULT_OPERATOR_AND for an individual QueryParser
> Objekt (after creation)
> 
> Since I always want this to be set, is there a means to set a (global)
> option such that any QueryParser object has this default operator.

if I'm not totally mistaken, the "solrQueryParser defaultOperator"
parameter in schema.xml should be your friend...

HTH,

Andre
- --
Andr Halama
vascoda
hbz - Hochschulbibliothekszentrum NRW
Postfach 270451
50510 Kln
Tel.: (+49) (0) 221 400 75 - 229
Fax: (+49) (0) 221 400 75 -180
e-mail : halama@hbz-nrw.de
www.hbz-nrw.de
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (GNU/Linux)
Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org

iD8DBQFHX4A/KWvEdxF+FtQRAmgiAJoDN7N9TLDtuOzmCsoy2Sc6DhAFGwCfdDwF
MR1Mq5KUr5YTtUOVCimPT5Q=
=1J5R
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 06:35:25 2007
Return-Path: <java-user-return-31441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99312 invoked from network); 12 Dec 2007 06:35:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 06:35:24 -0000
Received: (qmail 16514 invoked by uid 500); 12 Dec 2007 06:35:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16475 invoked by uid 500); 12 Dec 2007 06:35:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16464 invoked by uid 99); 12 Dec 2007 06:35:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 22:35:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [193.30.112.121] (HELO listen.hbz-nrw.de) (193.30.112.121)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 06:34:43 +0000
Received: from agrippa.hbz-nrw.de (agrippa.hbz-nrw.de [193.30.112.24])
	by listen.hbz-nrw.de (Postfix) with ESMTP id 6B8472F17C
	for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 07:34:45 +0100 (CET)
Received: from [10.1.1.23] ([::ffff:10.1.1.23])
	by agrippa.hbz-nrw.de with ESMTP; Wed, 12 Dec 2007 07:34:15 +0100
Message-ID: <475F80E7.6040608@hbz-nrw.de>
Date: Wed, 12 Dec 2007 07:34:15 +0100
From: Andre Halama <halama@hbz-nrw.de>
User-Agent: Thunderbird 2.0.0.0 (X11/20070419)
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: DEFAULT_OPERATOR_AND  globally ?
References: <tkrat.dc3ae479df044225@igpm.rwth-aachen.de>
In-Reply-To: <tkrat.dc3ae479df044225@igpm.rwth-aachen.de>
X-Enigmail-Version: 0.95.2
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: amavisd-new at hbz-nrw.de
X-Virus-Checked: Checked by ClamAV on apache.org

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Helmut Jarausch schrieb:

> I know how to set DEFAULT_OPERATOR_AND for an individual QueryParser
> Objekt (after creation)
> 
> Since I always want this to be set, is there a means to set a (global)
> option such that any QueryParser object has this default operator.

Ooops, sorry for my last post! Wrong list/too early in the morning to
think straight...;-)

A.
- --
Andr Halama
vascoda
hbz - Hochschulbibliothekszentrum NRW
Postfach 270451
50510 Kln
Tel.: (+49) (0) 221 400 75 - 229
Fax: (+49) (0) 221 400 75 -180
e-mail : halama@hbz-nrw.de
www.hbz-nrw.de
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.7 (GNU/Linux)
Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org

iD8DBQFHX4DnKWvEdxF+FtQRAtSEAKDL/DoghkZTzPTuNspGHkLTZSkfAQCgkwK7
SCGfeAzqGI7aamCERizeTwk=
=p0w0
-----END PGP SIGNATURE-----

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 06:55:40 2007
Return-Path: <java-user-return-31442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68887 invoked from network); 12 Dec 2007 06:55:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 06:55:40 -0000
Received: (qmail 28256 invoked by uid 500); 12 Dec 2007 06:55:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28227 invoked by uid 500); 12 Dec 2007 06:55:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28216 invoked by uid 99); 12 Dec 2007 06:55:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 11 Dec 2007 22:55:23 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 64.233.182.186 as permitted sender)
Received: from [64.233.182.186] (HELO nf-out-0910.google.com) (64.233.182.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 06:55:01 +0000
Received: by nf-out-0910.google.com with SMTP id d3so111047nfc.15
        for <java-user@lucene.apache.org>; Tue, 11 Dec 2007 22:55:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=yo2jFXYeCWco6HFzFcrana4w14Hx9kZ+67pXXrKe7rg=;
        b=TP0U7of4gOnXClzoiRseAOD6l0WC86Dc6RCESxFa5Jfz+dUksUdurylkGGkue2+MXokwSPVONnj8jI/s917TboMKo96z8OugYsneLA8lkqHqcSrcaXtN9yXlCJdUQcwyYUaRt8nkr9dZ/jSiavvG0EgF+ZQFy4ch7kJ8wxTO3xI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=GZAy+TVdLDAs9GgyOOGPfBRw3cHjf4XXFJ9pwEnyshYLWGL4c24Ryo4gQGWIx/2A0mQEgQofDPfsrycxf1AnFUJgFCC8fJy287afwjLUU40i3wKe9yL7eSg1s83aAVWdx0aBtV8IsJBR5uMd//E5+QBKzSWB2BN0U5iORmYsAZU=
Received: by 10.78.185.15 with SMTP id i15mr185103huf.15.1197442502902;
        Tue, 11 Dec 2007 22:55:02 -0800 (PST)
Received: by 10.78.155.15 with HTTP; Tue, 11 Dec 2007 22:55:02 -0800 (PST)
Message-ID: <6e3ae6310712112255y4db3f6dn2afd65d79840b826@mail.gmail.com>
Date: Tue, 11 Dec 2007 22:55:02 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Wikipedia dumps
In-Reply-To: <547045.76613.qm@web50306.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <547045.76613.qm@web50306.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

For a quick java approach, give yourself 3 minutes and try to use
DBSight to access the database. You can simply use "select * from
mw_searchindex" as a starting point. It'll build the index for you.
However, you may need to pluggin your custom analyzer for media wiki's
format(Or maybe not).

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer (remain anonymous per request) got 2.6 Million Euro funding!


On Dec 11, 2007 9:35 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hi,
>
> I need to index a Wikipedia dump.  I know there is code in contrib/benchmark for indexing *English* Wikipedia for benchmarking purposes.  However, I'd like to index a non-English dump, and I actually don't need it for benchmarking, I just want to end up with a Lucene index.
>
> Any suggestions where I should start?  That is, can anything in contrib/benchmark already do this, or is there anything there that I should use as a starting point?  As opposed to writing my own Wikipedia XML dump parser+indexer.
>
> Thanks,
> Otis
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 08:19:30 2007
Return-Path: <java-user-return-31443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32844 invoked from network); 12 Dec 2007 08:19:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 08:19:30 -0000
Received: (qmail 22671 invoked by uid 500); 12 Dec 2007 08:19:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22645 invoked by uid 500); 12 Dec 2007 08:19:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22623 invoked by uid 99); 12 Dec 2007 08:19:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 00:19:11 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [206.190.38.62] (HELO web50308.mail.re2.yahoo.com) (206.190.38.62)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Dec 2007 08:18:47 +0000
Received: (qmail 65873 invoked by uid 60001); 12 Dec 2007 08:18:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=rQ6NylQyWwgZ1svWl9OEs9pC51NWw3wghNgJZC+fk8aITtv37il0410XCWm5i+sPeeGzybegoydSJyhqWFc+ID0zRgE9CqW0Nqu9mg9eRx6rH0DNNpIQytelB9zwWxoDgrZGd7FkjdCQ98W8J+lRI6OyJp3wsGS6l1jodzZtomA=;
X-YMail-OSG: issQlngVM1kwhAfpQcfskLaQH_O_xWqGFaBFDye8odzlrNjjzkgfCJYNysblhXiE_1z5PCkYmIHnGMfJgv5FQIm3N2TP8ID8fYDMKpE1L8p2L7CFGSiAOwZoZcLLGwxaJVyu5K6OIm8Guyw-
Received: from [72.231.9.236] by web50308.mail.re2.yahoo.com via HTTP; Wed, 12 Dec 2007 00:18:49 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Wed, 12 Dec 2007 00:18:49 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing Wikipedia dumps
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <729908.63712.qm@web50308.mail.re2.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Database?  I imagine I can avoid that.... Wiki dump.gz -> gunzip -> parse -> index no?

Otis


----- Original Message ----
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Sent: Wednesday, December 12, 2007 1:55:02 AM
Subject: Re: Indexing Wikipedia dumps

For a quick java approach, give yourself 3 minutes and try to use
DBSight to access the database. You can simply use "select * from
mw_searchindex" as a starting point. It'll build the index for you.
However, you may need to pluggin your custom analyzer for media wiki's
format(Or maybe not).

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer (remain anonymous per request) got 2.6 Million Euro
 funding!


On Dec 11, 2007 9:35 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com>
 wrote:
> Hi,
>
> I need to index a Wikipedia dump.  I know there is code in
 contrib/benchmark for indexing *English* Wikipedia for benchmarking purposes.
  However, I'd like to index a non-English dump, and I actually don't need
 it for benchmarking, I just want to end up with a Lucene index.
>
> Any suggestions where I should start?  That is, can anything in
 contrib/benchmark already do this, or is there anything there that I should
 use as a starting point?  As opposed to writing my own Wikipedia XML
 dump parser+indexer.
>
> Thanks,
> Otis
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 08:55:25 2007
Return-Path: <java-user-return-31444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94919 invoked from network); 12 Dec 2007 08:55:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 08:55:25 -0000
Received: (qmail 58798 invoked by uid 500); 12 Dec 2007 08:55:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58760 invoked by uid 500); 12 Dec 2007 08:55:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58749 invoked by uid 99); 12 Dec 2007 08:55:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 00:55:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [124.30.170.13] (HELO hydmail1.satyam.com) (124.30.170.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 08:55:09 +0000
Received: from hyd.satyam.com (hyd.satyam.com [204.252.161.226])
	by hydmail1.satyam.com (8.13.4/8.13.4) with ESMTP id lBC8UNcY018949
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 14:00:23 +0530
Received: from Disclaimerhyd.corp.satyam.ad (hhtbh.satyam.com [172.16.186.212])
	by hyd.satyam.com (8.13.1/8.13.1) with ESMTP id lBC8rHmg028836
	for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 14:23:20 +0530
Received: from hstmsg005.corp.satyam.ad ([172.16.186.216]) by Disclaimerhyd.corp.satyam.ad with Microsoft SMTPSVC(6.0.3790.211); Wed, 12 Dec 2007 14:24:26 +0530
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.607
Content-class: urn:content-classes:message
Content-Transfer-Encoding: 7bit
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C83C9C.957059BC"
Subject: (~) opertor query....
Priority: normal
Importance: normal
Date: Wed, 12 Dec 2007 14:24:19 +0530
Message-ID: <9312093579B72048B1E5659DC3EC7F39022E9330@hstmsg005.corp.satyam.ad>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: (~) opertor query....
Thread-Index: Acg8nKrvbgHT/w/UQi6kU4mZ1vAIBw==
From: "Shakti_Sareen" <Shakti_Sareen@satyam.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Dec 2007 08:54:26.0601 (UTC) FILETIME=[9962C190:01C83C9C]
X-Virus-Scanned: ClamAV version 0.88.4, clamav-milter version 0.88.4 on hyd.satyam.com
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C83C9C.957059BC
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

=20

Hi All,

          I am parsing this query:  "Auto*  machine"~4.

          Will it work? If yes then right now it's not working. Can
anyone help on this?

=20

Thanks & Regards

Shakti Sareen

=20

=20

=20

=20



DISCLAIMER:
This email (including any attachments) is intended for the sole use of =
the intended recipient/s and may contain material that is CONFIDENTIAL =
AND PRIVATE COMPANY INFORMATION. Any review or reliance by others or =
copying or distribution or forwarding of any or all of the contents in =
this message is STRICTLY PROHIBITED. If you are not the intended =
recipient, please contact the sender by email and delete all copies; =
your cooperation in this regard is appreciated.

------_=_NextPart_001_01C83C9C.957059BC--

From java-user-return-31445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 09:45:29 2007
Return-Path: <java-user-return-31445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98015 invoked from network); 12 Dec 2007 09:45:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 09:45:29 -0000
Received: (qmail 27845 invoked by uid 500); 12 Dec 2007 09:45:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27816 invoked by uid 500); 12 Dec 2007 09:45:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27804 invoked by uid 99); 12 Dec 2007 09:45:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 01:45:11 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 09:44:49 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J2O96-0000tA-0p
	for java-user@lucene.apache.org; Wed, 12 Dec 2007 01:44:52 -0800
Message-ID: <14291880.post@talk.nabble.com>
Date: Wed, 12 Dec 2007 01:44:52 -0800 (PST)
From: "chris.b" <omelhornomedomundo@gmail.com>
To: java-user@lucene.apache.org
Subject: Basic Named Entity Indexing
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: omelhornomedomundo@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


I'm not even sure if it can be considered Named Entity Recognition, but what
the hell...

so here's my problem...
I was asked to retrieve a the named entities out of a collection of
documents, and I've thought of two ways of doing so (not sure if either of
them work)...
a) index the documents by wrapping the whitespace analyzer with
ngramanalyzerwrapper and then retrieving only the words which have 3 or more
characters and start with a capital, filtering the "garbage" manually.
b) creating my own analyzer which will only index ngrams that start with
capital letters and then retrieving the indexed words.

which would be the best solution (i know that neither of them is very
correct, but it's supposed to be a quick fix :), and if it's the second one,
how would i go about creating my own analyzer? (i've read lucene in action
and it wasn't much help :s)

Thanks in advance, 
Chris
-- 
View this message in context: http://www.nabble.com/Basic-Named-Entity-Indexing-tp14291880p14291880.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 10:02:11 2007
Return-Path: <java-user-return-31446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4080 invoked from network); 12 Dec 2007 10:02:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 10:02:10 -0000
Received: (qmail 58584 invoked by uid 500); 12 Dec 2007 10:01:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57939 invoked by uid 500); 12 Dec 2007 10:01:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57928 invoked by uid 99); 12 Dec 2007 10:01:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 02:01:52 -0800
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=SPF_PASS,WHOIS_DMNBYPROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.218] (HELO web26007.mail.ukl.yahoo.com) (217.12.10.218)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 12 Dec 2007 10:01:28 +0000
Received: (qmail 28238 invoked by uid 60001); 12 Dec 2007 10:01:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=BH6e0i5LmQ8NifjVIr6u4aD6PmEyvt0bENZcQYSj8qHgc1VWAF6nmBpjaDlx5kC2vz0zaPby6MtbDSGhYQBRa+0kZ56/4smgSNBiKlPZjmeOXqyJOXrGS4fey/BmXbX3TmCn0DHoqlJqCAiHnI3UdIsRrxNsEE6MCyk0YzpbmYI=;
X-YMail-OSG: lIUo1rwVM1kZP._l296hK6jqukCWVmTOHYSixvlsZmmwz7p31AM_a8_x6QUSbPkNy4qfQceHXX0LPvFarwWNJJW.Qb5HL2vonzKeoIcjNYAjXX9zMHYxJhDwa4M-
Received: from [193.36.230.96] by web26007.mail.ukl.yahoo.com via HTTP; Wed, 12 Dec 2007 10:01:29 GMT
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Wed, 12 Dec 2007 10:01:29 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Indexing Wikipedia dumps
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <84352.26112.qm@web26007.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Otis, I've used this to index wikipedia from XML before now:=0A=0Ahttp://sc=
hmidt.devlib.org/software/lucene-wikipedia.html=0A=0ACheers=0AMark=0A=0A---=
-- Original Message ----=0AFrom: Otis Gospodnetic <otis_gospodnetic@yahoo.c=
om>=0ATo: java-user@lucene.apache.org=0ASent: Wednesday, 12 December, 2007 =
8:18:49 AM=0ASubject: Re: Indexing Wikipedia dumps=0A=0ADatabase?  I imagin=
e I can avoid that.... Wiki dump.gz -> gunzip ->=0A parse -> index no?=0A=
=0AOtis=0A=0A=0A----- Original Message ----=0AFrom: Chris Lu <chris.lu@gmai=
l.com>=0ATo: java-user@lucene.apache.org=0ASent: Wednesday, December 12, 20=
07 1:55:02 AM=0ASubject: Re: Indexing Wikipedia dumps=0A=0AFor a quick java=
 approach, give yourself 3 minutes and try to use=0ADBSight to access the d=
atabase. You can simply use "select * from=0Amw_searchindex" as a starting =
point. It'll build the index for you.=0AHowever, you may need to pluggin yo=
ur custom analyzer for media wiki's=0Aformat(Or maybe not).=0A=0A-- =0AChri=
s Lu=0A-------------------------=0AInstant Scalable Full-Text Search On Any=
 Database/Application=0Asite: http://www.dbsight.net=0Ademo: http://search.=
dbsight.com=0ALucene Database Search in 3 minutes:=0Ahttp://wiki.dbsight.co=
m/index.php?title=3DCreate_Lucene_Database_Search_in_3_minutes=0ADBSight cu=
stomer (remain anonymous per request) got 2.6 Million Euro=0A funding!=0A=
=0A=0AOn Dec 11, 2007 9:35 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com=
>=0A wrote:=0A> Hi,=0A>=0A> I need to index a Wikipedia dump.  I know there=
 is code in=0A contrib/benchmark for indexing *English* Wikipedia for bench=
marking=0A purposes.=0A  However, I'd like to index a non-English dump, and=
 I actually don't=0A need=0A it for benchmarking, I just want to end up wit=
h a Lucene index.=0A>=0A> Any suggestions where I should start?  That is, c=
an anything in=0A contrib/benchmark already do this, or is there anything t=
here that I=0A should=0A use as a starting point?  As opposed to writing my=
 own Wikipedia XML=0A dump parser+indexer.=0A>=0A> Thanks,=0A> Otis=0A>=0A>=
=0A>=0A> ------------------------------------------------------------------=
---=0A> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A>=
 For additional commands, e-mail: java-user-help@lucene.apache.org=0A>=0A>=
=0A=0A---------------------------------------------------------------------=
=0ATo unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor ad=
ditional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=
=0A---------------------------------------------------------------------=0A=
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor addit=
ional commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=
=0A      ___________________________________________________________=0AYaho=
o! Answers - Got a question? Someone out there knows the answer. Try it=0An=
ow.=0Ahttp://uk.answers.yahoo.com/ 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 10:30:34 2007
Return-Path: <java-user-return-31447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82970 invoked from network); 12 Dec 2007 10:30:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 10:30:34 -0000
Received: (qmail 93886 invoked by uid 500); 12 Dec 2007 10:30:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93851 invoked by uid 500); 12 Dec 2007 10:30:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93840 invoked by uid 99); 12 Dec 2007 10:30:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 02:30:16 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.247] (HELO an-out-0708.google.com) (209.85.132.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 10:29:54 +0000
Received: by an-out-0708.google.com with SMTP id c5so41693anc.49
        for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 02:29:56 -0800 (PST)
Received: by 10.101.67.11 with SMTP id u11mr1173412ank.16.1197455396407;
        Wed, 12 Dec 2007 02:29:56 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 44sm4762393hsa.2007.12.12.02.29.55
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 12 Dec 2007 02:29:56 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <547045.76613.qm@web50306.mail.re2.yahoo.com>
References: <547045.76613.qm@web50306.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <80EC5EE9-581A-46F5-B250-344DD164A158@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Indexing Wikipedia dumps
Date: Wed, 12 Dec 2007 05:28:57 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


I haven't actually tried it, but I think very likely the current code  
in contrib/benchmark might be able to extract non-English Wikipedia  
dump as well?

Have a look at contrib/benchmark/conf/extractWikipedia.alg: I think  
if you just change the docs.file to reference your downloaded XML  
file it could just work?

Mike

Otis Gospodnetic wrote:

> Hi,
>
> I need to index a Wikipedia dump.  I know there is code in contrib/ 
> benchmark for indexing *English* Wikipedia for benchmarking  
> purposes.  However, I'd like to index a non-English dump, and I  
> actually don't need it for benchmarking, I just want to end up with  
> a Lucene index.
>
> Any suggestions where I should start?  That is, can anything in  
> contrib/benchmark already do this, or is there anything there that  
> I should use as a starting point?  As opposed to writing my own  
> Wikipedia XML dump parser+indexer.
>
> Thanks,
> Otis
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 10:37:42 2007
Return-Path: <java-user-return-31448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84699 invoked from network); 12 Dec 2007 10:37:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 10:37:42 -0000
Received: (qmail 3088 invoked by uid 500); 12 Dec 2007 10:37:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3065 invoked by uid 500); 12 Dec 2007 10:37:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3054 invoked by uid 99); 12 Dec 2007 10:37:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 02:37:25 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.243] (HELO an-out-0708.google.com) (209.85.132.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 10:37:02 +0000
Received: by an-out-0708.google.com with SMTP id c5so42136anc.49
        for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 02:37:03 -0800 (PST)
Received: by 10.100.248.9 with SMTP id v9mr1183533anh.14.1197455823007;
        Wed, 12 Dec 2007 02:37:03 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id l31sm4775418hsa.2007.12.12.02.37.02
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 12 Dec 2007 02:37:02 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <475F6F5E.9040103@istandfor.com>
References: <475F1134.6050402@istandfor.com> <AC726309-9A26-4DF7-804C-BE3D8E161D0B@mikemccandless.com> <475F6F5E.9040103@istandfor.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <00707F08-B155-4066-83D1-65B57BA44136@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Refreshing RAMDirectory
Date: Wed, 12 Dec 2007 05:36:04 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Ruslan Sivak wrote:

> Michael McCandless wrote:
>>
>> Ruslan Sivak wrote:
>>
>>> I have an index of about 10mb.  Since it's so small, I would like  
>>> to keep it loaded in memory, and reload it about every minute or  
>>> so, assuming that it has changed on disk.  I have the following  
>>> code, which works, except it doesn't reload the changes.
>>> protected String indexName;
>>> protected IndexReader reader;
>>> private long lastCheck=0;
>>> ...
>>> protected IndexReader getReader() throws CorruptIndexException,  
>>> IOException
>>>    {
>>>        if (reader==null || System.currentTimeMillis() > lastCheck 
>>> +60000)
>>>        {
>>>            lastCheck=System.currentTimeMillis();
>>>            if (reader==null || !reader.isCurrent())
>>>            {
>>>                if (reader!=null)
>>>                    reader.close();
>>>                              Directory dir = new RAMDirectory 
>>> (indexName);
>>>                reader = IndexReader.open(dir);
>>>                searcher = new IndexSearcher(reader);
>>>            }
>>>        }
>>>        return reader;
>>> }
>>>
>>>
>>> Apparently reader.isCurrent() won't tell you if the underlying  
>>> FSDirectory has changed.
>>
>> That's right: your reader is only searching the RAMDirectory; it  
>> has no idea that your RAMDirectory was copied from an FSDirectory  
>> that has now changed.  (That ctor for RAMDirectory makes a full  
>> copy of what's currently in the FSDirectory and thereafter  
>> maintains no link to that FSDirectory).
>>
>>> I also had the following code before:
>>> instead of
>>> if (reader==null || !reader.isCurrent())
>>> I had
>>> if (reader==null || reader.getVersion() !=  
>>> IndexReader.getCurrentVersion(indexName))
>>
>> That 2nd line seems like it should have worked.  What version of  
>> Lucene are you using?  Are you really sure it's not showing the  
>> changes?  Can you print the two versions?  Every commit to the  
>> index (by IndexWriter) should increment that version number.
>>
> The 2nd line was working fine, however I was getting errors in  
> other places saying that the indexReader is closed.

Can you restructure your code, such that you open a new reader  
without first closing the old one, and then only once the open is  
complete, you swap the new reader in as "reader", wait for threads to  
finish using the old reader, then call close on the old one?

>>> I was getting a bunch of this indexreader is closed errors, and  
>>> I'm not sure why there's no method like reader.isClosed().
>>
>> That's spooky: can you explain why you're accidentally using a  
>> closed reader?  Your code above seems to replace reader after  
>> closing it.  Are there other threads that are using the reader  
>> while you are doing this re-opening?
>>
> There could be other threads using this, and there are other places  
> in the code that open and close readers.  My main problem I guess  
> is that I can't tell when a reader is closed.  Is there some method  
> I can use?  I basically want to do something like this.
> if (reader==null || reader.isClosed || reader.getVersion() !=  
> IndexReader.getCurrentVersion(indexName))

There is currently no way to ask a reader if it's closed.  I suppose  
you could do something like:

   try {
     version = reader.getVersion();
     isClosed = false;
   } catch (AlreadyClosedException e) {
     isClosed = true;
   }

However this is somewhat bad form.  It's better to restructure your  
code such that it's not possible to accidentally use a reader you had  
closed.

> Is reader threadsafe?  Should each invocation open it's own reader?

Reader is definitely thread safe, so you should share 1 reader across  
all threads.  You just need to take care in your app to not close a  
reader if other threads are still using it or will continue using it.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 10:39:11 2007
Return-Path: <java-user-return-31449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86144 invoked from network); 12 Dec 2007 10:39:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 10:39:11 -0000
Received: (qmail 6965 invoked by uid 500); 12 Dec 2007 10:38:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6936 invoked by uid 500); 12 Dec 2007 10:38:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6920 invoked by uid 99); 12 Dec 2007 10:38:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 02:38:53 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 10:38:55 +0000
Received: from [130.225.25.7] (pc977.sb.statsbiblioteket.dk [130.225.25.7])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JSX00FE2MWAT8@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Wed, 12 Dec 2007 11:38:34 +0100 (MET)
Date: Wed, 12 Dec 2007 11:37:47 +0100
From: Lars Clausen <lc@statsbiblioteket.dk>
Subject: Re: OutOfMemoryError on small search in large, simple index
In-reply-to: <Pine.LNX.4.62.0711130722400.6553@radix.cryptio.net>
To: java-user@lucene.apache.org
Message-id: <1197455867.9075.416.camel@pc977>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.12.1
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <1194964649.13896.1180.camel@pc977>
 <200711131613.07641@danielnaber.de>
 <Pine.LNX.4.62.0711130722400.6553@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org


On Tue, 2007-11-13 at 07:26 -0800, Chris Hostetter wrote:
> : > Can it be right that memory usage depends on size of the index rather
> : > than size of the result?
> : 
> : Yes, see IndexWriter.setTermIndexInterval(). How much RAM are you giving to 
> : the JVM now?
> 
> and in general: yes.  Lucene is using memory so that *lots* of searches 
> can be fast ... if you reuse the searcher object for multiple searches, 
> they will all reuse those same internal memory structures.
> 
> 
> there's also the specific issue of norms ... did you OMIT_NORMS when you 
> indexed your data? do you need norms for this field? (if you aren't sure, 
> take a look at the scoring docs)
> 
> http://lucene.apache.org/java/docs/scoring.html

I've now made trial runs with no norms on the two indexed fields, and
also tried with varying TermIndexIntervals.  Omitting the norms saves
about 4MB on 50 million entries, much less than I expected.  Increasing
the TermIndexInterval by a factor of 4 gave no measurable savings.  This
is measured by using JConsole to look at the heap size after GC has set
in.  We only have one searcher object live at a time except when
changing index, and it's easy to see that the old ones get reclaimed
fairly quickly.  We're giving the JVM 1.5GB of heap space, so there's
not a lot of wiggle room there.  Doing random searches shows no memory
leakage from searching.

Judging from the amount of RAM used in my tests and the number of
entries involved, it would appear that in the full system, each searcher
uses about 1GB of memory, so when changing, we hit the 2GB barrier.

If we cannot reduce the memory usage of Lucene, we'll have to go back to
binary searches in the file, which would be clumsy.  Does Lucene keep
anything in memory per item when all indexed fields have omit_norms?  

-Lars



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 10:49:46 2007
Return-Path: <java-user-return-31450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91240 invoked from network); 12 Dec 2007 10:49:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 10:49:45 -0000
Received: (qmail 27250 invoked by uid 500); 12 Dec 2007 10:49:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27218 invoked by uid 500); 12 Dec 2007 10:49:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27207 invoked by uid 99); 12 Dec 2007 10:49:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 02:49:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 10:49:29 +0000
Received: from [130.225.25.7] (pc977.sb.statsbiblioteket.dk [130.225.25.7])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JSX00FTJNDXT8@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Wed, 12 Dec 2007 11:49:09 +0100 (MET)
Date: Wed, 12 Dec 2007 11:48:21 +0100
From: Lars Clausen <lc@statsbiblioteket.dk>
Subject: Re: OutOfMemoryError on small search in large, simple index
In-reply-to: <1197455867.9075.416.camel@pc977>
To: java-user@lucene.apache.org
Message-id: <1197456501.9075.421.camel@pc977>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.12.1
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <1194964649.13896.1180.camel@pc977>
 <200711131613.07641@danielnaber.de>
 <Pine.LNX.4.62.0711130722400.6553@radix.cryptio.net>
 <1197455867.9075.416.camel@pc977>
X-Virus-Checked: Checked by ClamAV on apache.org

On Wed, 2007-12-12 at 11:37 +0100, Lars Clausen wrote: 
> Increasing
> the TermIndexInterval by a factor of 4 gave no measurable savings. 

Following up on myself because I'm not 100% sure that the indexes have
the term index intervals I expect, and I'd like to check.  Where can I
see what term index interval an index was made with?  Can I use Luke for
this?

-Lars



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 13:12:12 2007
Return-Path: <java-user-return-31451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15320 invoked from network); 12 Dec 2007 13:12:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 13:12:12 -0000
Received: (qmail 21628 invoked by uid 500); 12 Dec 2007 13:11:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21585 invoked by uid 500); 12 Dec 2007 13:11:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21572 invoked by uid 99); 12 Dec 2007 13:11:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 05:11:54 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 13:11:56 +0000
Received: from [10.0.1.2] (unknown [66.201.52.100])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id E9C383BA03
	for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 05:11:33 -0800 (PST)
Message-Id: <C44CF8C3-3A5D-46FC-9094-7486874C3392@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <80EC5EE9-581A-46F5-B250-344DD164A158@mikemccandless.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Indexing Wikipedia dumps
Date: Wed, 12 Dec 2007 08:11:32 -0500
References: <547045.76613.qm@web50306.mail.re2.yahoo.com> <80EC5EE9-581A-46F5-B250-344DD164A158@mikemccandless.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Note that the current code doesn't actually do anything with the wiki  
syntax, but I would think as long as the other language is in the same  
format you should be fine.

-Grant

On Dec 12, 2007, at 5:28 AM, Michael McCandless wrote:

>
> I haven't actually tried it, but I think very likely the current  
> code in contrib/benchmark might be able to extract non-English  
> Wikipedia dump as well?
>
> Have a look at contrib/benchmark/conf/extractWikipedia.alg: I think  
> if you just change the docs.file to reference your downloaded XML  
> file it could just work?
>
> Mike
>
> Otis Gospodnetic wrote:
>
>> Hi,
>>
>> I need to index a Wikipedia dump.  I know there is code in contrib/ 
>> benchmark for indexing *English* Wikipedia for benchmarking  
>> purposes.  However, I'd like to index a non-English dump, and I  
>> actually don't need it for benchmarking, I just want to end up with  
>> a Lucene index.
>>
>> Any suggestions where I should start?  That is, can anything in  
>> contrib/benchmark already do this, or is there anything there that  
>> I should use as a starting point?  As opposed to writing my own  
>> Wikipedia XML dump parser+indexer.
>>
>> Thanks,
>> Otis
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 13:27:15 2007
Return-Path: <java-user-return-31452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33947 invoked from network); 12 Dec 2007 13:27:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 13:27:15 -0000
Received: (qmail 45521 invoked by uid 500); 12 Dec 2007 13:26:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45487 invoked by uid 500); 12 Dec 2007 13:26:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45474 invoked by uid 99); 12 Dec 2007 13:26:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 05:26:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 13:26:35 +0000
Received: from [130.225.25.7] (pc977.sb.statsbiblioteket.dk [130.225.25.7])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JSX00IHLUOCVV@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Wed, 12 Dec 2007 14:26:36 +0100 (MET)
Date: Wed, 12 Dec 2007 14:25:47 +0100
From: Lars Clausen <lc@statsbiblioteket.dk>
Subject: Re: OutOfMemoryError on small search in large, simple index
In-reply-to: <1197455867.9075.416.camel@pc977>
To: java-user@lucene.apache.org
Message-id: <1197465947.9075.436.camel@pc977>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.12.1
Content-type: text/plain
Content-transfer-encoding: 7BIT
References: <1194964649.13896.1180.camel@pc977>
 <200711131613.07641@danielnaber.de>
 <Pine.LNX.4.62.0711130722400.6553@radix.cryptio.net>
 <1197455867.9075.416.camel@pc977>
X-Virus-Checked: Checked by ClamAV on apache.org


On Wed, 2007-12-12 at 11:37 +0100, Lars Clausen wrote:
> I've now made trial runs with no norms on the two indexed fields, and
> also tried with varying TermIndexIntervals.  Omitting the norms saves
> about 4MB on 50 million entries, much less than I expected. 

Seems there's a reason we still use all this memory:
SegmentReader.fakeNorms() creates the full-size array for us anyway, so
the memory usage cannot be avoided as long as somebody asks for the
norms array at any point.  The solution is starting to look like a patch
that allows the norms array to be null and handles uses of it
appropriately.  Some of the code seems to consider this legal, but
others do not.

-Lars



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 13:44:38 2007
Return-Path: <java-user-return-31453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48774 invoked from network); 12 Dec 2007 13:44:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 13:44:38 -0000
Received: (qmail 75885 invoked by uid 500); 12 Dec 2007 13:44:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75834 invoked by uid 500); 12 Dec 2007 13:44:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75823 invoked by uid 99); 12 Dec 2007 13:44:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 05:44:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [198.144.201.51] (HELO esseff.org) (198.144.201.51)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 13:43:59 +0000
Received: from localhost (localhost [127.0.0.1])
	by esseff.org (Postfix) with ESMTP id 3E47B50ECF
	for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 05:39:33 -0800 (PST)
X-Quarantine-ID: <OzD96u74eiEj>
X-Virus-Scanned: amavisd-new at esseff.org
Received: from esseff.org ([127.0.0.1])
	by localhost (esseff.org [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id OzD96u74eiEj for <java-user@lucene.apache.org>;
	Wed, 12 Dec 2007 05:39:01 -0800 (PST)
Received: from professorville.windows.esseff.org (professorville.windows.esseff.org [10.0.1.16])
	by esseff.org (Postfix) with ESMTP id 9B9EF94BF0A
	for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 05:38:48 -0800 (PST)
Subject: RE: Indexing Wikipedia dumps
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Content-class: urn:content-classes:message
Date: Wed, 12 Dec 2007 05:35:36 -0800
Message-ID: <392521EA2692A2418DF48C331E61E3250E7646@professorville.windows.esseff.org>
X-MimeOLE: Produced By Microsoft Exchange V6.5
In-Reply-To: <80EC5EE9-581A-46F5-B250-344DD164A158@mikemccandless.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Indexing Wikipedia dumps
Thread-Index: Acg8qZYKG9vFLhGBS1mG9u6VB2mKiAAGc4NA
References: <547045.76613.qm@web50306.mail.re2.yahoo.com> <80EC5EE9-581A-46F5-B250-344DD164A158@mikemccandless.com>
From: "Steven Parkes" <steven_parkes@esseff.org>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Probably want a combination of extractWikipedia.alg and wikipedia.alg?

You want the EnwikiDocMaker from extractWikipedia.alg which reads the
uncompressed xml file but rather than using WriteLineDoc, you want to go
ahead and index as wikipedia.alg does. (Ditch the query part.)

You'll need an acceptable analyzer, which StandardAnalyzer might not be.

-----Original Message-----
From: Michael McCandless [mailto:lucene@mikemccandless.com]=20
Sent: Wednesday, December 12, 2007 2:29 AM
To: java-user@lucene.apache.org
Subject: Re: Indexing Wikipedia dumps


I haven't actually tried it, but I think very likely the current code =20
in contrib/benchmark might be able to extract non-English Wikipedia =20
dump as well?

Have a look at contrib/benchmark/conf/extractWikipedia.alg: I think =20
if you just change the docs.file to reference your downloaded XML =20
file it could just work?

Mike

Otis Gospodnetic wrote:

> Hi,
>
> I need to index a Wikipedia dump.  I know there is code in contrib/=20
> benchmark for indexing *English* Wikipedia for benchmarking =20
> purposes.  However, I'd like to index a non-English dump, and I =20
> actually don't need it for benchmarking, I just want to end up with =20
> a Lucene index.
>
> Any suggestions where I should start?  That is, can anything in =20
> contrib/benchmark already do this, or is there anything there that =20
> I should use as a starting point?  As opposed to writing my own =20
> Wikipedia XML dump parser+indexer.
>
> Thanks,
> Otis
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 14:34:41 2007
Return-Path: <java-user-return-31454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24368 invoked from network); 12 Dec 2007 14:34:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 14:34:41 -0000
Received: (qmail 71445 invoked by uid 500); 12 Dec 2007 14:34:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71408 invoked by uid 500); 12 Dec 2007 14:34:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71396 invoked by uid 99); 12 Dec 2007 14:34:22 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 06:34:22 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 14:34:01 +0000
Received: by mu-out-0910.google.com with SMTP id i10so396952mue.5
        for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 06:34:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=tHvLbCLRBORe0VspLkah2fXjobErH86BsMb0HwPFXZg=;
        b=lKTUQhjNU33swrh1LqppwWzX7Np1RnAfRmtcs86GNiVCmERuSpGO2cbiJbNAj/TbSy7ny6unWK0/dDgnrDdflubGCzXfcVg5HFvap3ihD3u5f/DT61R1S+kK4MNmbWbBLjzBUdicPICDLlzG3oAa+68DqVMXrFq0Gff6HY/tq+4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Lm725BbgWwyWBtTe9yyeXukOqe/L/is9BtAYDGZBEWXDDH1gx7d6atYrUQ20ItGBqRoPgKp57ZN+HRRcXcbBWBfKeinR/eEhz3fP9UUccp/C4KHRfZ+O46yEoVPfpFkQS6r4H809bdaa0MFz8dHyFEUo/hgVCNq5WXzrVa3Aqg0=
Received: by 10.82.158.12 with SMTP id g12mr1961973bue.21.1197470038166;
        Wed, 12 Dec 2007 06:33:58 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Wed, 12 Dec 2007 06:33:58 -0800 (PST)
Message-ID: <359a92830712120633w4b29c892h8229b31ba868697a@mail.gmail.com>
Date: Wed, 12 Dec 2007 09:33:58 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Refreshing RAMDirectory
In-Reply-To: <00707F08-B155-4066-83D1-65B57BA44136@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_27232_10839071.1197470038159"
References: <475F1134.6050402@istandfor.com>
	 <AC726309-9A26-4DF7-804C-BE3D8E161D0B@mikemccandless.com>
	 <475F6F5E.9040103@istandfor.com>
	 <00707F08-B155-4066-83D1-65B57BA44136@mikemccandless.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_27232_10839071.1197470038159
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Even if you could tell a reader is closed, you'd wind up with
unmaintainable code. I envision you have a bunch of places
where you'd do something like

if (reader.isClosed()) {
     reader = create a new reader.
}

But practically, you'd be opening a new reader someplace,
closing it someplace else, opening it in another place......

This just leads to maintenance nightmares. For instance, how
could you determine what the state of a particular reader was
when trying to figure out why your searches didn't work if you don't
have a clue where/when it was opened?

Perhaps the easiest thing to do if you can't restructure your code
as Michael suggested is just employ a singleton pattern to give you
complete control over when/where a reader is opened.....

Best
Erick

On Dec 12, 2007 5:36 AM, Michael McCandless <lucene@mikemccandless.com>
wrote:

>
> Ruslan Sivak wrote:
>
> > Michael McCandless wrote:
> >>
> >> Ruslan Sivak wrote:
> >>
> >>> I have an index of about 10mb.  Since it's so small, I would like
> >>> to keep it loaded in memory, and reload it about every minute or
> >>> so, assuming that it has changed on disk.  I have the following
> >>> code, which works, except it doesn't reload the changes.
> >>> protected String indexName;
> >>> protected IndexReader reader;
> >>> private long lastCheck=0;
> >>> ...
> >>> protected IndexReader getReader() throws CorruptIndexException,
> >>> IOException
> >>>    {
> >>>        if (reader==null || System.currentTimeMillis() > lastCheck
> >>> +60000)
> >>>        {
> >>>            lastCheck=System.currentTimeMillis();
> >>>            if (reader==null || !reader.isCurrent())
> >>>            {
> >>>                if (reader!=null)
> >>>                    reader.close();
> >>>                              Directory dir = new RAMDirectory
> >>> (indexName);
> >>>                reader = IndexReader.open(dir);
> >>>                searcher = new IndexSearcher(reader);
> >>>            }
> >>>        }
> >>>        return reader;
> >>> }
> >>>
> >>>
> >>> Apparently reader.isCurrent() won't tell you if the underlying
> >>> FSDirectory has changed.
> >>
> >> That's right: your reader is only searching the RAMDirectory; it
> >> has no idea that your RAMDirectory was copied from an FSDirectory
> >> that has now changed.  (That ctor for RAMDirectory makes a full
> >> copy of what's currently in the FSDirectory and thereafter
> >> maintains no link to that FSDirectory).
> >>
> >>> I also had the following code before:
> >>> instead of
> >>> if (reader==null || !reader.isCurrent())
> >>> I had
> >>> if (reader==null || reader.getVersion() !=
> >>> IndexReader.getCurrentVersion(indexName))
> >>
> >> That 2nd line seems like it should have worked.  What version of
> >> Lucene are you using?  Are you really sure it's not showing the
> >> changes?  Can you print the two versions?  Every commit to the
> >> index (by IndexWriter) should increment that version number.
> >>
> > The 2nd line was working fine, however I was getting errors in
> > other places saying that the indexReader is closed.
>
> Can you restructure your code, such that you open a new reader
> without first closing the old one, and then only once the open is
> complete, you swap the new reader in as "reader", wait for threads to
> finish using the old reader, then call close on the old one?
>
> >>> I was getting a bunch of this indexreader is closed errors, and
> >>> I'm not sure why there's no method like reader.isClosed().
> >>
> >> That's spooky: can you explain why you're accidentally using a
> >> closed reader?  Your code above seems to replace reader after
> >> closing it.  Are there other threads that are using the reader
> >> while you are doing this re-opening?
> >>
> > There could be other threads using this, and there are other places
> > in the code that open and close readers.  My main problem I guess
> > is that I can't tell when a reader is closed.  Is there some method
> > I can use?  I basically want to do something like this.
> > if (reader==null || reader.isClosed || reader.getVersion() !=
> > IndexReader.getCurrentVersion(indexName))
>
> There is currently no way to ask a reader if it's closed.  I suppose
> you could do something like:
>
>   try {
>     version = reader.getVersion();
>     isClosed = false;
>   } catch (AlreadyClosedException e) {
>     isClosed = true;
>   }
>
> However this is somewhat bad form.  It's better to restructure your
> code such that it's not possible to accidentally use a reader you had
> closed.
>
> > Is reader threadsafe?  Should each invocation open it's own reader?
>
> Reader is definitely thread safe, so you should share 1 reader across
> all threads.  You just need to take care in your app to not close a
> reader if other threads are still using it or will continue using it.
>
> Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_27232_10839071.1197470038159--

From java-user-return-31455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 14:49:56 2007
Return-Path: <java-user-return-31455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42322 invoked from network); 12 Dec 2007 14:49:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 14:49:55 -0000
Received: (qmail 9480 invoked by uid 500); 12 Dec 2007 14:49:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9116 invoked by uid 500); 12 Dec 2007 14:49:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9104 invoked by uid 99); 12 Dec 2007 14:49:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 06:49:38 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.22 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 14:49:16 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr2.xs4all.nl (8.13.8/8.13.8) with ESMTP id lBCEnHgf077026
	for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 15:49:17 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <3D78A9FE-D030-40BC-A742-BC327D812582@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <547045.76613.qm@web50306.mail.re2.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Indexing Wikipedia dumps
Date: Wed, 12 Dec 2007 15:49:16 +0100
References: <547045.76613.qm@web50306.mail.re2.yahoo.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


12 dec 2007 kl. 06.35 skrev Otis Gospodnetic:

> I need to index a Wikipedia dump.  I know there is code in contrib/ 
> benchmark for indexing *English* Wikipedia for benchmarking  
> purposes.  However, I'd like to index a non-English dump, and I  
> actually don't need it for benchmarking, I just want to end up with  
> a Lucene index.
>
> Any suggestions where I should start?  That is, can anything in  
> contrib/benchmark already do this, or is there anything there that I  
> should use as a starting point?  As opposed to writing my own  
> Wikipedia XML dump parser+indexer.


Here is one more alternative, the way I did it way back.

Get the tarballs containing rendered HTML. Using NekoHTML (or so) find  
the DOM-node that contains the text content. And there you go, plain  
text.


-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 16:16:03 2007
Return-Path: <java-user-return-31456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89877 invoked from network); 12 Dec 2007 16:16:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 16:16:03 -0000
Received: (qmail 50308 invoked by uid 500); 12 Dec 2007 16:15:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50269 invoked by uid 500); 12 Dec 2007 16:15:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50257 invoked by uid 99); 12 Dec 2007 16:15:45 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 08:15:45 -0800
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of jluna@usbmis.com does not designate 204.127.217.101 as permitted sender)
Received: from [204.127.217.101] (HELO fmailhost01.isp.att.net) (204.127.217.101)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 16:15:46 +0000
Received: from [127.0.0.1] (adsl-074-239-052-167.sip.gnv.bellsouth.net[74.239.52.167])
          by isp.att.net (frfwmhc01) with ESMTP
          id <20071212161522H0100n64nde>; Wed, 12 Dec 2007 16:15:23 +0000
X-Originating-IP: [74.239.52.167]
Message-ID: <4760091D.5020707@usbmis.com>
Date: Wed, 12 Dec 2007 11:15:25 -0500
From: Jose Luna <jluna@usbmis.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Advice regarding fuzzy phrase searching
References: <475ED731.10801@usbmis.com> <475F160D.6070301@gmail.com>
In-Reply-To: <475F160D.6070301@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Antivirus: avast! (VPS 071211-0, 12/11/2007), Outbound message
X-Antivirus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Mark, Russ, thanks for the replies.

Mark, this looks great, I think it's exactly what I was looking for.  I 
think this should definitely be added to Lucene when it is stable 
enough.  I suspect there are others that would find it useful.

JLuna

Mark Miller wrote:
> Take a look at: https://issues.apache.org/jira/browse/LUCENE-794
>
> This is an extension to the Highlighter that highlights span and 
> proximity queries. If you rewrite the query it will also do fuzzy 
> queries. I am sure you can easily steal some of the code to do what 
> you want.
>
> Keep in mind, because of how Lucene's SpanQuery works, if you say to 
> find 'mark within 4 of ball', Lucene will not find all occurrences. 
> ie: 'mark close to ball ball' -- even if you say find mark within 20 
> of ball, a Span query will only find the first occurrence of ball even 
> though both occurrences are within 20. If ball was on both sides of 
> mark, both would match, but after finding the first ball with 20 of 
> mark, Span doesnt continue looking for another.
>
> - Mark
>
> Jose Luna wrote:
>> Hello,
>>
>> I am looking for some advice regarding which tools I might use to 
>> solve my problem.  I apologize ahead of time for the long explanation.
>>
>> Problem Description:  I would like to index a set of very large HTML 
>> documents.  I would then be able to run two different kinds of 
>> queries: proximity queries, and fuzzy phrase queries.   I would like 
>> to get the exact positions of the matching results from the query (I 
>> need to modify the original documents at these positions.)  I will 
>> only need to search one document at a time, i.e., I already know 
>> which document I'll be looking in, so what's important is finding the 
>> positions of the hits within that document.
>>
>> For example,  for a fuzzy search, I may want to search for "arterial 
>> oxygen saturation".   I would want this to match "arterial oxygen 
>> saturate", and I would want to get the position of where it matches.  
>> I would also like to do proximity searches, with these broken into 
>> separate terms.  So, I may be searching for "arterial", "oxygen", and 
>> "saturate" all within 10 terms of each other, and get the positions 
>> of the cases that match.
>>
>> To the best of my understanding, Lucene is not a good choice to solve 
>> this problem (please correct me if I'm wrong).   As far as I can 
>> tell, Lucene breaks up a document into a set of terms, and indexes 
>> these in some sort of structure.  My guess is a B+ tree, but I'm 
>> curious to learn more about it -- I couldn't find much in the 
>> documentation about the underlying index structure.   Anyway, this 
>> means that the keys->pointer pairs in the index are basically 
>> term->documenID pairs.  So this isn't very suitable for my problem. I 
>> already know which document I want to search, I'm interested in the 
>> position of hits.    If I were to search for the phrase "arterial 
>> oxygen saturation", this would be broken into terms and I could 
>> iterate through all of the TermPositions for a given term in the 
>> document, and try to find out where these terms are adjacent in the 
>> document.  Considering that my document is very large, the phrases 
>> can be 10+ terms, and I need to do this hundreds of times, this 
>> doesn't sound like a very good solution.  If we introduce the idea of 
>> fuzzy matches and proximity searches, it seems like this task of 
>> iterating through TermPositions becomes very complicated.
>> I've spent time reading the docs, creating a test program, and 
>> reading the mailing list.  As far as I can tell, Lucene is geared 
>> towards document based queries, and isn't the ideal tool for my 
>> problem.  I think an index based on a suffix tree (or variation of) 
>> would better meet my needs, but I'm not sure how well these perform 
>> with fuzzy and proximity searches.  I've looked around, and I can't 
>> seem to find a good opensource indexing framework like lucene that's 
>> based on a suffix tree.  Are there any suggestions for tools that 
>> would help with this problem?  Does anyone have any suggestions on 
>> how I might bend Lucene to meet my needs?
>>
>> Thanks in advance,
>>
>> JLuna
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 17:28:06 2007
Return-Path: <java-user-return-31457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55555 invoked from network); 12 Dec 2007 17:28:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 17:28:06 -0000
Received: (qmail 73468 invoked by uid 500); 12 Dec 2007 17:27:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73263 invoked by uid 500); 12 Dec 2007 17:27:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73252 invoked by uid 99); 12 Dec 2007 17:27:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 09:27:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of goodell@gmail.com designates 64.233.170.191 as permitted sender)
Received: from [64.233.170.191] (HELO rn-out-0102.google.com) (64.233.170.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 17:27:27 +0000
Received: by rn-out-0102.google.com with SMTP id a43so81755rne.5
        for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 09:27:27 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        bh=LTW72IpENAziisi2TQxRZlljsuxMh403nJ5W+W/ph44=;
        b=VrATefrOpAstdDnPGrszm37/kbYeiHSmU7CEeUntPP5kyoLg7oLTSYu3K17cmS5aIB+7iOtBHRGgqn8yXsOJznImDUvkvXPV9jnbBT3H1bKNpV0eM/KoYzt/+BTok30EcvU/s5oeP5RNFB7rRP2wg+qt37UAVr/94m+Jt7LddAY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references:x-google-sender-auth;
        b=TABtQ4DlxBu4/vI/ThP/zhzvsjsAA6ZJxXM+m2MDJJcwHZkQvsT+SJav17Xn1GcasbCm99HO2/7NKf2x0JxE4+Lcamqasnaae1AG20sKYuWRLhTSN21d0CUpuSQy1uOXsalEEfMDPYn7Lf8Miwvw/rpV0O8s+F/kKVuVs8JS72s=
Received: by 10.150.156.9 with SMTP id d9mr307881ybe.116.1197480446970;
        Wed, 12 Dec 2007 09:27:26 -0800 (PST)
Received: by 10.150.228.11 with HTTP; Wed, 12 Dec 2007 09:27:26 -0800 (PST)
Message-ID: <55b2c6b90712120927v5d7dbb8bxc67e24c9319eba64@mail.gmail.com>
Date: Wed, 12 Dec 2007 09:27:26 -0800
From: "Andy Goodell" <agoodell@discoverymining.com>
Sender: goodell@gmail.com
To: java-user@lucene.apache.org
Subject: Re: Indexing Wikipedia dumps
In-Reply-To: <547045.76613.qm@web50306.mail.re2.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <547045.76613.qm@web50306.mail.re2.yahoo.com>
X-Google-Sender-Auth: 124a537baa54f3ff
X-Virus-Checked: Checked by ClamAV on apache.org

My firm uses a parser based on javax.xml.stream.XMLStreamReader to
break (english and nonenglish) wikipedia xml dumps into lucene-style
"documents and fields."  We use wikipedia to test our
language-specific code, so we've probably indexed 20 wikipedia dumps.

- andy g

On Dec 11, 2007 9:35 PM, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hi,
>
> I need to index a Wikipedia dump.  I know there is code in contrib/benchmark for indexing *English* Wikipedia for benchmarking purposes.  However, I'd like to index a non-English dump, and I actually don't need it for benchmarking, I just want to end up with a Lucene index.
>
> Any suggestions where I should start?  That is, can anything in contrib/benchmark already do this, or is there anything there that I should use as a starting point?  As opposed to writing my own Wikipedia XML dump parser+indexer.
>
> Thanks,
> Otis
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 18:26:09 2007
Return-Path: <java-user-return-31458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89828 invoked from network); 12 Dec 2007 18:26:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 18:26:09 -0000
Received: (qmail 59361 invoked by uid 500); 12 Dec 2007 18:25:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58425 invoked by uid 500); 12 Dec 2007 18:25:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58414 invoked by uid 99); 12 Dec 2007 18:25:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 10:25:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucener@gmail.com designates 66.249.92.169 as permitted sender)
Received: from [66.249.92.169] (HELO ug-out-1314.google.com) (66.249.92.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 18:25:31 +0000
Received: by ug-out-1314.google.com with SMTP id u40so648247ugc.29
        for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 10:25:33 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=MLyVUG0IjOfZykv5FkHiaxWSAJIqmdebMK3Ynpd/Nc8=;
        b=T3deMPKE6tAzwCrMaOKwP6C3layzbzykp70hqPufy+FF7JBgb7RKdK0JyRat6E2dIUhs5E8QS30/6JtLHWIBTFAKjAZw6oGKkbZgBXizVKchaxb81TU264pfoi1hjJfD3wHNX+4CxIiQ2M2UJAglcNnW0OMt8D14LkZOC7Gp6to=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=Txuo/tbazkSpJe3YoKkEa+urPcBRfUxtcRE5tXgWCqgrzao8UQc++b4sA8xC6qT24mTRcsbj/0uFTmCigG5AhhQz2UlVkp3vo7mQrKbPdoDsqa4XpLyEExaOAaFIwwgm+RyHfU/7Dmv0XCOzXRjGdWPceREAhTgDIskUK/hF5bc=
Received: by 10.78.100.1 with SMTP id x1mr1174958hub.45.1197483932867;
        Wed, 12 Dec 2007 10:25:32 -0800 (PST)
Received: by 10.78.13.13 with HTTP; Wed, 12 Dec 2007 10:25:32 -0800 (PST)
Message-ID: <882004010712121025qd617931g85b100eeef6c7b12@mail.gmail.com>
Date: Wed, 12 Dec 2007 13:25:32 -0500
From: "Lucifer Hammer" <lucener@gmail.com>
To: java-user@lucene.apache.org
Subject: Searching on plurals and phrases in a single field
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_32660_10935012.1197483932860"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_32660_10935012.1197483932860
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

We've got a requirement that we need to give our users  the ability to
search on exact phrases within a field, or, if they prefer, they can match
on plurals(either via stems, or another plural algorithm).  However, the
cases are mutually exclusive, for example given the following field in the
index:

IndexField1: "The quick brown dog jumped over the lazy fox"

If the user chooses an exact phrase search such as "lazy dog jumped", then
it'll match, however, if they also choose an exact phrase  and search for:
"lazy dogs" it shouldn't match.

If the user chooses a plural search, then  both of the above searches should
match.

So... the question really is:  Can I do this all in one field, or will I
have to index the data twice, once in a field that has the exact text, and
in a second field in which I index the terms, and wordstack stems(or
plurals).

If it's possible to do this in a single field, that would be much
preferred...

Thanks for any help!
Lucifer

------=_Part_32660_10935012.1197483932860--

From java-user-return-31459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 19:34:49 2007
Return-Path: <java-user-return-31459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37117 invoked from network); 12 Dec 2007 19:34:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 19:34:48 -0000
Received: (qmail 48794 invoked by uid 500); 12 Dec 2007 19:34:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48764 invoked by uid 500); 12 Dec 2007 19:34:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48753 invoked by uid 99); 12 Dec 2007 19:34:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 11:34:30 -0800
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=FB_WORD1_END_DOLLAR,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.189 as permitted sender)
Received: from [209.85.134.189] (HELO mu-out-0910.google.com) (209.85.134.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 19:34:08 +0000
Received: by mu-out-0910.google.com with SMTP id i10so530160mue.5
        for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 11:34:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=+6xDBYRj5Zq2hKLnjKMQhhlVqaMF87a0L3vjYD8Awvg=;
        b=nNd7wYxQ6MsiO8roneURBaAAzt9HMgi9aE3UqgNMSqza/jxJ6BnLxXW7vrzVkolV1syhaLzwXCNqaeaotqiSqD4WrEiO4M83/9ZsRX7cZrqF23nkS89bp96Wf19VFNHxYaxGAlSKsku0wuG6OPXhqNEyDPFedtFBmfT1lL9V9Y4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=FQYIbxmR5syQ58MLwfA3LzzD8scYkll0RS7oLKQUNIwEe6Xmf/E7z4MjIRdVv4BuENOOSVvevYV+jgFBf1/dGMayLwRMll7iSK66sA8aZs/z3i/cYH2MpXXbDwm8w5pi1JgaiYVdsM3aTljxnmhqqCpqf8d6BuyqtR76L9SsBMg=
Received: by 10.82.150.20 with SMTP id x20mr2940607bud.5.1197488040171;
        Wed, 12 Dec 2007 11:34:00 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Wed, 12 Dec 2007 11:34:00 -0800 (PST)
Message-ID: <359a92830712121134y53d116f4gafe53424c8053046@mail.gmail.com>
Date: Wed, 12 Dec 2007 14:34:00 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching on plurals and phrases in a single field
In-Reply-To: <882004010712121025qd617931g85b100eeef6c7b12@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_28399_19347364.1197488040163"
References: <882004010712121025qd617931g85b100eeef6c7b12@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_28399_19347364.1197488040163
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I faced a very similar requirement and solved it by indexing multiple
tokens at the same place. For instance, say you're indexing
the word "foxes". Index something like fox$ and foxes at the same
position (see SynonymAnalyzer in Lucene In Action for an example).
You probably MUST index the multiple terms with an increment gap
of 0 (more later).

Example phrase "red foxes are plentiful"

Now you have the capability of distinguishing between a stemmed
and unstemmed version of the word and can search for exactly
"red foxes". But if instead you want to search for the stemmed
version, you can search for "red fox$". But "red fox" will NOT match.

The reason you need to index these with an increment gap of 0 is so
phrase queries work. If you let the gap increment for each token, and
indexed a phrase like "red foxes are plentiful", then did a
proximity search on "red plentiful"~2, it would fail because
you'd have fox$ and foxes each taking up one position. But if
fox$ and foxes both have the same position, it'll work.

And it's all in the same index, one field, etc.

Hope this helps
Erick

On Dec 12, 2007 1:25 PM, Lucifer Hammer <lucener@gmail.com> wrote:

> Hi,
>
> We've got a requirement that we need to give our users  the ability to
> search on exact phrases within a field, or, if they prefer, they can match
> on plurals(either via stems, or another plural algorithm).  However, the
> cases are mutually exclusive, for example given the following field in the
> index:
>
> IndexField1: "The quick brown dog jumped over the lazy fox"
>
> If the user chooses an exact phrase search such as "lazy dog jumped", then
> it'll match, however, if they also choose an exact phrase  and search for:
> "lazy dogs" it shouldn't match.
>
> If the user chooses a plural search, then  both of the above searches
> should
> match.
>
> So... the question really is:  Can I do this all in one field, or will I
> have to index the data twice, once in a field that has the exact text, and
> in a second field in which I index the terms, and wordstack stems(or
> plurals).
>
> If it's possible to do this in a single field, that would be much
> preferred...
>
> Thanks for any help!
> Lucifer
>

------=_Part_28399_19347364.1197488040163--

From java-user-return-31460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 19:47:38 2007
Return-Path: <java-user-return-31460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48126 invoked from network); 12 Dec 2007 19:47:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 19:47:38 -0000
Received: (qmail 65189 invoked by uid 500); 12 Dec 2007 19:47:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65157 invoked by uid 500); 12 Dec 2007 19:47:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65146 invoked by uid 99); 12 Dec 2007 19:47:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 11:47:21 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of spkingnc@gmail.com designates 209.85.198.188 as permitted sender)
Received: from [209.85.198.188] (HELO rv-out-0910.google.com) (209.85.198.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 19:47:00 +0000
Received: by rv-out-0910.google.com with SMTP id k20so268965rvb.5
        for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 11:47:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=D6DsV0NTS6BwxCzOFqY/2AJQ0/jVpKvWGJHjEHX6DNI=;
        b=vbdDyk8/FrHfx2YHgZgJpjiQSVBRwRc14PSaXxWlsw+L+j5rmuE/uqOFwBzlaKQg4bEsZyHDUt6rqnPXQP8usJlV0SVL5jjgK+lt0/nFXjwTCh1Ygiu7xiNv2MAoAikYxDOgl/UIaQUAXFL5qPtR3c9ICvwKggAAyJ7BNQQGKd0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=jy4jJN/MtStEB41Yc12so3vP5+2/kZDzIYDt1VyPITBGSrlKD0hTfmzgzdIX2WFKsnjWzT+D87eWKRg9CGoSs2bJTrpxJqnubtKOw6ngtsu8eMKNKaZ/xwK0ye3+lzm475ghH141UJ6XJ7FyPQuYI1SKdOoI2WpVUhNGaEwFklE=
Received: by 10.141.87.13 with SMTP id p13mr608577rvl.62.1197488822917;
        Wed, 12 Dec 2007 11:47:02 -0800 (PST)
Received: by 10.141.13.15 with HTTP; Wed, 12 Dec 2007 11:47:02 -0800 (PST)
Message-ID: <5ad122da0712121147y63f1c2c5jf1d2d6c6d3147223@mail.gmail.com>
Date: Wed, 12 Dec 2007 11:47:02 -0800
From: "spk spk" <spkingnc@gmail.com>
To: java-user@lucene.apache.org
Subject: extract info after indexing
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8864_23202681.1197488822927"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8864_23202681.1197488822927
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi! All,

I will like to extract some information regarding some word in a field.
below are info I will like to have:

1. frequency count of that word
2. word after been analyzed...


Any chance I can use Lucene to do that?


spking

------=_Part_8864_23202681.1197488822927--

From java-user-return-31461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 19:50:27 2007
Return-Path: <java-user-return-31461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49971 invoked from network); 12 Dec 2007 19:50:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 19:50:27 -0000
Received: (qmail 69462 invoked by uid 500); 12 Dec 2007 19:50:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69426 invoked by uid 500); 12 Dec 2007 19:50:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69415 invoked by uid 99); 12 Dec 2007 19:50:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 11:50:09 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rsivak@istandfor.com designates 72.32.36.243 as permitted sender)
Received: from [72.32.36.243] (HELO mx0.istandfor.com) (72.32.36.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 19:49:47 +0000
Received: from [192.168.1.42] (pool-70-18-194-158.ny325.east.verizon.net [70.18.194.158])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id lBCJnfbU032230
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 13:49:49 -0600
Message-ID: <47603B56.3090805@istandfor.com>
Date: Wed, 12 Dec 2007 14:49:42 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Refreshing RAMDirectory
References: <475F1134.6050402@istandfor.com>	 <AC726309-9A26-4DF7-804C-BE3D8E161D0B@mikemccandless.com>	 <475F6F5E.9040103@istandfor.com>	 <00707F08-B155-4066-83D1-65B57BA44136@mikemccandless.com> <359a92830712120633w4b29c892h8229b31ba868697a@mail.gmail.com>
In-Reply-To: <359a92830712120633w4b29c892h8229b31ba868697a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Thank you to everyone for your comments.  I didn't realize that readers 
need to be kept open and won't close exactly when you ask them too.  I 
have restructured my code to keep the RamDirectory cached, and to open a 
new reader for every method call.  This seems to be working fine.

Russ

Erick Erickson wrote:
> Even if you could tell a reader is closed, you'd wind up with
> unmaintainable code. I envision you have a bunch of places
> where you'd do something like
>
> if (reader.isClosed()) {
>      reader = create a new reader.
> }
>
> But practically, you'd be opening a new reader someplace,
> closing it someplace else, opening it in another place......
>
> This just leads to maintenance nightmares. For instance, how
> could you determine what the state of a particular reader was
> when trying to figure out why your searches didn't work if you don't
> have a clue where/when it was opened?
>
> Perhaps the easiest thing to do if you can't restructure your code
> as Michael suggested is just employ a singleton pattern to give you
> complete control over when/where a reader is opened.....
>
> Best
> Erick
>
> On Dec 12, 2007 5:36 AM, Michael McCandless <lucene@mikemccandless.com>
> wrote:
>
>   
>> Ruslan Sivak wrote:
>>
>>     
>>> Michael McCandless wrote:
>>>       
>>>> Ruslan Sivak wrote:
>>>>
>>>>         
>>>>> I have an index of about 10mb.  Since it's so small, I would like
>>>>> to keep it loaded in memory, and reload it about every minute or
>>>>> so, assuming that it has changed on disk.  I have the following
>>>>> code, which works, except it doesn't reload the changes.
>>>>> protected String indexName;
>>>>> protected IndexReader reader;
>>>>> private long lastCheck=0;
>>>>> ...
>>>>> protected IndexReader getReader() throws CorruptIndexException,
>>>>> IOException
>>>>>    {
>>>>>        if (reader==null || System.currentTimeMillis() > lastCheck
>>>>> +60000)
>>>>>        {
>>>>>            lastCheck=System.currentTimeMillis();
>>>>>            if (reader==null || !reader.isCurrent())
>>>>>            {
>>>>>                if (reader!=null)
>>>>>                    reader.close();
>>>>>                              Directory dir = new RAMDirectory
>>>>> (indexName);
>>>>>                reader = IndexReader.open(dir);
>>>>>                searcher = new IndexSearcher(reader);
>>>>>            }
>>>>>        }
>>>>>        return reader;
>>>>> }
>>>>>
>>>>>
>>>>> Apparently reader.isCurrent() won't tell you if the underlying
>>>>> FSDirectory has changed.
>>>>>           
>>>> That's right: your reader is only searching the RAMDirectory; it
>>>> has no idea that your RAMDirectory was copied from an FSDirectory
>>>> that has now changed.  (That ctor for RAMDirectory makes a full
>>>> copy of what's currently in the FSDirectory and thereafter
>>>> maintains no link to that FSDirectory).
>>>>
>>>>         
>>>>> I also had the following code before:
>>>>> instead of
>>>>> if (reader==null || !reader.isCurrent())
>>>>> I had
>>>>> if (reader==null || reader.getVersion() !=
>>>>> IndexReader.getCurrentVersion(indexName))
>>>>>           
>>>> That 2nd line seems like it should have worked.  What version of
>>>> Lucene are you using?  Are you really sure it's not showing the
>>>> changes?  Can you print the two versions?  Every commit to the
>>>> index (by IndexWriter) should increment that version number.
>>>>
>>>>         
>>> The 2nd line was working fine, however I was getting errors in
>>> other places saying that the indexReader is closed.
>>>       
>> Can you restructure your code, such that you open a new reader
>> without first closing the old one, and then only once the open is
>> complete, you swap the new reader in as "reader", wait for threads to
>> finish using the old reader, then call close on the old one?
>>
>>     
>>>>> I was getting a bunch of this indexreader is closed errors, and
>>>>> I'm not sure why there's no method like reader.isClosed().
>>>>>           
>>>> That's spooky: can you explain why you're accidentally using a
>>>> closed reader?  Your code above seems to replace reader after
>>>> closing it.  Are there other threads that are using the reader
>>>> while you are doing this re-opening?
>>>>
>>>>         
>>> There could be other threads using this, and there are other places
>>> in the code that open and close readers.  My main problem I guess
>>> is that I can't tell when a reader is closed.  Is there some method
>>> I can use?  I basically want to do something like this.
>>> if (reader==null || reader.isClosed || reader.getVersion() !=
>>> IndexReader.getCurrentVersion(indexName))
>>>       
>> There is currently no way to ask a reader if it's closed.  I suppose
>> you could do something like:
>>
>>   try {
>>     version = reader.getVersion();
>>     isClosed = false;
>>   } catch (AlreadyClosedException e) {
>>     isClosed = true;
>>   }
>>
>> However this is somewhat bad form.  It's better to restructure your
>> code such that it's not possible to accidentally use a reader you had
>> closed.
>>
>>     
>>> Is reader threadsafe?  Should each invocation open it's own reader?
>>>       
>> Reader is definitely thread safe, so you should share 1 reader across
>> all threads.  You just need to take care in your app to not close a
>> reader if other threads are still using it or will continue using it.
>>
>> Mike
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 20:24:44 2007
Return-Path: <java-user-return-31462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67818 invoked from network); 12 Dec 2007 20:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 20:24:44 -0000
Received: (qmail 31228 invoked by uid 500); 12 Dec 2007 20:24:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31199 invoked by uid 500); 12 Dec 2007 20:24:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31179 invoked by uid 99); 12 Dec 2007 20:24:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 12:24:26 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.162.239] (HELO nz-out-0506.google.com) (64.233.162.239)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 20:24:04 +0000
Received: by nz-out-0506.google.com with SMTP id i28so210843nzi.5
        for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 12:24:05 -0800 (PST)
Received: by 10.110.73.3 with SMTP id v3mr60710tia.27.1197491043997;
        Wed, 12 Dec 2007 12:24:03 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id i39sm1547081wxd.2007.12.12.12.24.02
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 12 Dec 2007 12:24:03 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <47603B56.3090805@istandfor.com>
References: <475F1134.6050402@istandfor.com>	 <AC726309-9A26-4DF7-804C-BE3D8E161D0B@mikemccandless.com>	 <475F6F5E.9040103@istandfor.com>	 <00707F08-B155-4066-83D1-65B57BA44136@mikemccandless.com> <359a92830712120633w4b29c892h8229b31ba868697a@mail.gmail.com> <47603B56.3090805@istandfor.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <414C78C5-8DDB-4372-9D9F-5227DDA93E9D@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Refreshing RAMDirectory
Date: Wed, 12 Dec 2007 15:23:02 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


You need to keep a reader open so long as you plan to use any of its  
methods from any thread.

The reader does close exactly when you ask it to (when you call  
reader.close()).

You should not have to "open a new reader for every method call" --  
you only need to open a new reader (and in your case, RAMDirectory)  
whenever the underlying index has changed.

Mike

Ruslan Sivak wrote:

> Thank you to everyone for your comments.  I didn't realize that  
> readers need to be kept open and won't close exactly when you ask  
> them too.  I have restructured my code to keep the RamDirectory  
> cached, and to open a new reader for every method call.  This seems  
> to be working fine.
>
> Russ
>
> Erick Erickson wrote:
>> Even if you could tell a reader is closed, you'd wind up with
>> unmaintainable code. I envision you have a bunch of places
>> where you'd do something like
>>
>> if (reader.isClosed()) {
>>      reader = create a new reader.
>> }
>>
>> But practically, you'd be opening a new reader someplace,
>> closing it someplace else, opening it in another place......
>>
>> This just leads to maintenance nightmares. For instance, how
>> could you determine what the state of a particular reader was
>> when trying to figure out why your searches didn't work if you don't
>> have a clue where/when it was opened?
>>
>> Perhaps the easiest thing to do if you can't restructure your code
>> as Michael suggested is just employ a singleton pattern to give you
>> complete control over when/where a reader is opened.....
>>
>> Best
>> Erick
>>
>> On Dec 12, 2007 5:36 AM, Michael McCandless  
>> <lucene@mikemccandless.com>
>> wrote:
>>
>>
>>> Ruslan Sivak wrote:
>>>
>>>
>>>> Michael McCandless wrote:
>>>>
>>>>> Ruslan Sivak wrote:
>>>>>
>>>>>
>>>>>> I have an index of about 10mb.  Since it's so small, I would like
>>>>>> to keep it loaded in memory, and reload it about every minute or
>>>>>> so, assuming that it has changed on disk.  I have the following
>>>>>> code, which works, except it doesn't reload the changes.
>>>>>> protected String indexName;
>>>>>> protected IndexReader reader;
>>>>>> private long lastCheck=0;
>>>>>> ...
>>>>>> protected IndexReader getReader() throws CorruptIndexException,
>>>>>> IOException
>>>>>>    {
>>>>>>        if (reader==null || System.currentTimeMillis() > lastCheck
>>>>>> +60000)
>>>>>>        {
>>>>>>            lastCheck=System.currentTimeMillis();
>>>>>>            if (reader==null || !reader.isCurrent())
>>>>>>            {
>>>>>>                if (reader!=null)
>>>>>>                    reader.close();
>>>>>>                              Directory dir = new RAMDirectory
>>>>>> (indexName);
>>>>>>                reader = IndexReader.open(dir);
>>>>>>                searcher = new IndexSearcher(reader);
>>>>>>            }
>>>>>>        }
>>>>>>        return reader;
>>>>>> }
>>>>>>
>>>>>>
>>>>>> Apparently reader.isCurrent() won't tell you if the underlying
>>>>>> FSDirectory has changed.
>>>>>>
>>>>> That's right: your reader is only searching the RAMDirectory; it
>>>>> has no idea that your RAMDirectory was copied from an FSDirectory
>>>>> that has now changed.  (That ctor for RAMDirectory makes a full
>>>>> copy of what's currently in the FSDirectory and thereafter
>>>>> maintains no link to that FSDirectory).
>>>>>
>>>>>
>>>>>> I also had the following code before:
>>>>>> instead of
>>>>>> if (reader==null || !reader.isCurrent())
>>>>>> I had
>>>>>> if (reader==null || reader.getVersion() !=
>>>>>> IndexReader.getCurrentVersion(indexName))
>>>>>>
>>>>> That 2nd line seems like it should have worked.  What version of
>>>>> Lucene are you using?  Are you really sure it's not showing the
>>>>> changes?  Can you print the two versions?  Every commit to the
>>>>> index (by IndexWriter) should increment that version number.
>>>>>
>>>>>
>>>> The 2nd line was working fine, however I was getting errors in
>>>> other places saying that the indexReader is closed.
>>>>
>>> Can you restructure your code, such that you open a new reader
>>> without first closing the old one, and then only once the open is
>>> complete, you swap the new reader in as "reader", wait for  
>>> threads to
>>> finish using the old reader, then call close on the old one?
>>>
>>>
>>>>>> I was getting a bunch of this indexreader is closed errors, and
>>>>>> I'm not sure why there's no method like reader.isClosed().
>>>>>>
>>>>> That's spooky: can you explain why you're accidentally using a
>>>>> closed reader?  Your code above seems to replace reader after
>>>>> closing it.  Are there other threads that are using the reader
>>>>> while you are doing this re-opening?
>>>>>
>>>>>
>>>> There could be other threads using this, and there are other places
>>>> in the code that open and close readers.  My main problem I guess
>>>> is that I can't tell when a reader is closed.  Is there some method
>>>> I can use?  I basically want to do something like this.
>>>> if (reader==null || reader.isClosed || reader.getVersion() !=
>>>> IndexReader.getCurrentVersion(indexName))
>>>>
>>> There is currently no way to ask a reader if it's closed.  I suppose
>>> you could do something like:
>>>
>>>   try {
>>>     version = reader.getVersion();
>>>     isClosed = false;
>>>   } catch (AlreadyClosedException e) {
>>>     isClosed = true;
>>>   }
>>>
>>> However this is somewhat bad form.  It's better to restructure your
>>> code such that it's not possible to accidentally use a reader you  
>>> had
>>> closed.
>>>
>>>
>>>> Is reader threadsafe?  Should each invocation open it's own reader?
>>>>
>>> Reader is definitely thread safe, so you should share 1 reader  
>>> across
>>> all threads.  You just need to take care in your app to not close a
>>> reader if other threads are still using it or will continue using  
>>> it.
>>>
>>> Mike
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 20:41:51 2007
Return-Path: <java-user-return-31463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9707 invoked from network); 12 Dec 2007 20:41:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 20:41:50 -0000
Received: (qmail 59740 invoked by uid 500); 12 Dec 2007 20:41:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59709 invoked by uid 500); 12 Dec 2007 20:41:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59698 invoked by uid 99); 12 Dec 2007 20:41:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 12:41:32 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 20:41:10 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J2YOH-0005ed-A1
	for java-user@lucene.apache.org; Wed, 12 Dec 2007 12:41:13 -0800
Message-ID: <14303464.post@talk.nabble.com>
Date: Wed, 12 Dec 2007 12:41:13 -0800 (PST)
From: ts01 <venkat@clearwellsystems.com>
To: java-user@lucene.apache.org
Subject: Handling Indexed, Stored and Tokenized fields
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: venkat@clearwellsystems.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

We have a requirement to index as well as store multiple fields in a
document, each with its own special tokenizer. The following seems to
provide a way to index multiple fields each with its own tokenizer:

Field(String name, Reader reader)

The following seems to provide a way to Index and Store, but using the
default tokenizer of the entire document, when index is set to
Index.TOKENIZED.

Field(String name, String value, Store store, Index index)

The following is what we need, with store.STORED and index.TOKENIZED with
specific reader.

Field(String name, String value, Store store, Index index, Reader reader)

Assuming that this capability does not exist, we added some code to the
Field class, IndexWriter class and to the AbstractField class to provide
this capability. We'd be happy to contribute this to the next Open Source
release.

Another possibility was to create two fields: field_indexed and field_stored
for each document, but that would be an inconvenient workaround.

Is this of interest to folks?

Thanks.

-- 
View this message in context: http://www.nabble.com/Handling-Indexed%2C-Stored-and-Tokenized-fields-tp14303464p14303464.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 21:16:47 2007
Return-Path: <java-user-return-31464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52087 invoked from network); 12 Dec 2007 21:16:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 21:16:47 -0000
Received: (qmail 22022 invoked by uid 500); 12 Dec 2007 21:16:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21990 invoked by uid 500); 12 Dec 2007 21:16:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21979 invoked by uid 99); 12 Dec 2007 21:16:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 13:16:29 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of devquestions@gmail.com designates 209.85.198.188 as permitted sender)
Received: from [209.85.198.188] (HELO rv-out-0910.google.com) (209.85.198.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 21:16:08 +0000
Received: by rv-out-0910.google.com with SMTP id k20so289065rvb.5
        for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 13:16:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=42WuR+PvhaAwC2Tlgy4lH1Kurjb6Qb/+9AIlwFoZPWc=;
        b=Ref29RUDWuMQkRPeT32o95yc6AQJuZJameVigS7syVtHf+RcgVZFSacByNgBhJdu+6PVuFFXjPw80fPapnyopFNKk/UEBSXF0/CZ09wi1ppEKohS5AE5AWFsbJwROjhGKtpzELOjBIAx2YcLkbZei8tdY6fTyYFJn/U9cW9+6mA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=iPrjrh4VoU6xixlavCZ7YJwEds/Hcu57RCV6bHmLWiuFi86XFUaHXsV5cMavCa0SomzGqtqkq5Opz5bPMzyrhW+gzPAdIDlpTnTyausLuF6HtF+ju13Dk1inhkANiup4UB5fSKrmhb3MK1SY8xfHCrD/FkNfqtzvCRNsW7QL3jk=
Received: by 10.140.132.8 with SMTP id f8mr658687rvd.206.1197494171382;
        Wed, 12 Dec 2007 13:16:11 -0800 (PST)
Received: by 10.141.177.5 with HTTP; Wed, 12 Dec 2007 13:16:11 -0800 (PST)
Message-ID: <c01704c90712121316yab30b06la579fe533adf364c@mail.gmail.com>
Date: Wed, 12 Dec 2007 16:16:11 -0500
From: "Developer Developer" <devquestions@gmail.com>
To: java-user@lucene.apache.org
Subject: Accessing parsed content in Nutch
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1350_30654953.1197494171385"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1350_30654953.1197494171385
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I believe nutch stores parsed content somewhere. Can you please let me know
how I can access the parsed content given a url ?

Thanks !

------=_Part_1350_30654953.1197494171385--

From java-user-return-31465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 21:37:43 2007
Return-Path: <java-user-return-31465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28839 invoked from network); 12 Dec 2007 21:37:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 21:37:43 -0000
Received: (qmail 51035 invoked by uid 500); 12 Dec 2007 21:37:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50284 invoked by uid 500); 12 Dec 2007 21:37:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50273 invoked by uid 99); 12 Dec 2007 21:37:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 13:37:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 209.85.132.244 as permitted sender)
Received: from [209.85.132.244] (HELO an-out-0708.google.com) (209.85.132.244)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 21:37:05 +0000
Received: by an-out-0708.google.com with SMTP id c5so115289anc.49
        for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 13:37:07 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=405GNpMrJ0lp7ayOBuoBKYDrxr6xP9YHvDQcUV6ILrU=;
        b=yA7aTpiygrke+0qxEW6TteaVWbxXHC4lK3qsRGzgAHudQmInX0MkZs0pzKMK+3XOZ2LAmO7QaNyoDequHw1E3qx3ndAQcm2wYmBPxCcx8Lqon3B54BNnDRS2podLTo/ZqIXDmHYkvV/sqZLxkrVGnpf9O9cbZf3qnKy4Y2zi62Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=tAUybyovUBOnQ/QLRONO8eJrV8Yv+b2IKL4jaU5NBJIxHmOLobS78de1yENzFxoCLmJXh1Z3HRGUEsR1msOpXE4p6nLZtdVTiEb933JpLV1hprZ53xYPcRz5Qu4x3XL4tnr39pYAEPig3m6AptqW2lY5Zz71YBMIahwMuMJQukE=
Received: by 10.150.206.1 with SMTP id d1mr429522ybg.4.1197495039807;
        Wed, 12 Dec 2007 13:30:39 -0800 (PST)
Received: by 10.150.157.12 with HTTP; Wed, 12 Dec 2007 13:30:39 -0800 (PST)
Message-ID: <e05f0fd10712121330h7cb9e37ej7edb187d0427f534@mail.gmail.com>
Date: Wed, 12 Dec 2007 23:30:39 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Accessing parsed content in Nutch
In-Reply-To: <c01704c90712121316yab30b06la579fe533adf364c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8775_9623194.1197495039705"
References: <c01704c90712121316yab30b06la579fe533adf364c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8775_9623194.1197495039705
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You would probably get better and quicker answer in
Nutch mailing lists:
  http://lucene.apache.org/nutch/mailing_lists.html

Doron

On Dec 12, 2007 11:16 PM, Developer Developer <devquestions@gmail.com>
wrote:

> I believe nutch stores parsed content somewhere. Can you please let me
> know
> how I can access the parsed content given a url ?
>
> Thanks !
>

------=_Part_8775_9623194.1197495039705--

From java-user-return-31466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 21:55:18 2007
Return-Path: <java-user-return-31466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34847 invoked from network); 12 Dec 2007 21:55:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 21:55:16 -0000
Received: (qmail 73887 invoked by uid 500); 12 Dec 2007 21:54:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73859 invoked by uid 500); 12 Dec 2007 21:54:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73848 invoked by uid 99); 12 Dec 2007 21:54:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 13:54:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rsivak@istandfor.com designates 72.32.36.243 as permitted sender)
Received: from [72.32.36.243] (HELO mx0.istandfor.com) (72.32.36.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 21:54:58 +0000
Received: from [192.168.1.42] (pool-70-18-194-158.ny325.east.verizon.net [70.18.194.158])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id lBCLsWIm007975
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 15:54:37 -0600
Message-ID: <47605899.4050204@istandfor.com>
Date: Wed, 12 Dec 2007 16:54:33 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Refreshing RAMDirectory
References: <475F1134.6050402@istandfor.com>	 <AC726309-9A26-4DF7-804C-BE3D8E161D0B@mikemccandless.com>	 <475F6F5E.9040103@istandfor.com>	 <00707F08-B155-4066-83D1-65B57BA44136@mikemccandless.com> <359a92830712120633w4b29c892h8229b31ba868697a@mail.gmail.com> <47603B56.3090805@istandfor.com> <414C78C5-8DDB-4372-9D9F-5227DDA93E9D@mikemccandless.com>
In-Reply-To: <414C78C5-8DDB-4372-9D9F-5227DDA93E9D@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

This seems to be problematic though.  There are other things that depend 
on the reader that is not so obvious.  For example,

IndexReader reader=getReader();
IndexSearcher searcher=new IndexSearcher(reader);
Hits hits=searcher.search(query);
searcher.close();
reader.close();
Iterator i=hits.iterator();
if (i.hasNext())
    Hit h=(Hit) i.next();

This, for example, would not work, as accessing the hits after the 
reader is closed will throw a "this reader is closed" exception.  You 
need to have the reader open for the hits to retrieve data.

Since my app would be multithreaded, there could be multiple threads 
accessing the reader, while i'm reloading it.  This means that if I 
close the reader, and another thread is using it, it might get an 
exception.  This forces me to use a new reader for every method 
invocation.  This shouldn't be that bad, since it's accessing a 
RAMDirectory, correct?  The overhead should be minimal.

Russ


Michael McCandless wrote:
>
> You need to keep a reader open so long as you plan to use any of its 
> methods from any thread.
>
> The reader does close exactly when you ask it to (when you call 
> reader.close()).
>
> You should not have to "open a new reader for every method call" -- 
> you only need to open a new reader (and in your case, RAMDirectory) 
> whenever the underlying index has changed.
>
> Mike
>
> Ruslan Sivak wrote:
>
>> Thank you to everyone for your comments.  I didn't realize that 
>> readers need to be kept open and won't close exactly when you ask 
>> them too.  I have restructured my code to keep the RamDirectory 
>> cached, and to open a new reader for every method call.  This seems 
>> to be working fine.
>>
>> Russ
>>
>> Erick Erickson wrote:
>>> Even if you could tell a reader is closed, you'd wind up with
>>> unmaintainable code. I envision you have a bunch of places
>>> where you'd do something like
>>>
>>> if (reader.isClosed()) {
>>>      reader = create a new reader.
>>> }
>>>
>>> But practically, you'd be opening a new reader someplace,
>>> closing it someplace else, opening it in another place......
>>>
>>> This just leads to maintenance nightmares. For instance, how
>>> could you determine what the state of a particular reader was
>>> when trying to figure out why your searches didn't work if you don't
>>> have a clue where/when it was opened?
>>>
>>> Perhaps the easiest thing to do if you can't restructure your code
>>> as Michael suggested is just employ a singleton pattern to give you
>>> complete control over when/where a reader is opened.....
>>>
>>> Best
>>> Erick
>>>
>>> On Dec 12, 2007 5:36 AM, Michael McCandless <lucene@mikemccandless.com>
>>> wrote:
>>>
>>>
>>>> Ruslan Sivak wrote:
>>>>
>>>>
>>>>> Michael McCandless wrote:
>>>>>
>>>>>> Ruslan Sivak wrote:
>>>>>>
>>>>>>
>>>>>>> I have an index of about 10mb.  Since it's so small, I would like
>>>>>>> to keep it loaded in memory, and reload it about every minute or
>>>>>>> so, assuming that it has changed on disk.  I have the following
>>>>>>> code, which works, except it doesn't reload the changes.
>>>>>>> protected String indexName;
>>>>>>> protected IndexReader reader;
>>>>>>> private long lastCheck=0;
>>>>>>> ...
>>>>>>> protected IndexReader getReader() throws CorruptIndexException,
>>>>>>> IOException
>>>>>>>    {
>>>>>>>        if (reader==null || System.currentTimeMillis() > lastCheck
>>>>>>> +60000)
>>>>>>>        {
>>>>>>>            lastCheck=System.currentTimeMillis();
>>>>>>>            if (reader==null || !reader.isCurrent())
>>>>>>>            {
>>>>>>>                if (reader!=null)
>>>>>>>                    reader.close();
>>>>>>>                              Directory dir = new RAMDirectory
>>>>>>> (indexName);
>>>>>>>                reader = IndexReader.open(dir);
>>>>>>>                searcher = new IndexSearcher(reader);
>>>>>>>            }
>>>>>>>        }
>>>>>>>        return reader;
>>>>>>> }
>>>>>>>
>>>>>>>
>>>>>>> Apparently reader.isCurrent() won't tell you if the underlying
>>>>>>> FSDirectory has changed.
>>>>>>>
>>>>>> That's right: your reader is only searching the RAMDirectory; it
>>>>>> has no idea that your RAMDirectory was copied from an FSDirectory
>>>>>> that has now changed.  (That ctor for RAMDirectory makes a full
>>>>>> copy of what's currently in the FSDirectory and thereafter
>>>>>> maintains no link to that FSDirectory).
>>>>>>
>>>>>>
>>>>>>> I also had the following code before:
>>>>>>> instead of
>>>>>>> if (reader==null || !reader.isCurrent())
>>>>>>> I had
>>>>>>> if (reader==null || reader.getVersion() !=
>>>>>>> IndexReader.getCurrentVersion(indexName))
>>>>>>>
>>>>>> That 2nd line seems like it should have worked.  What version of
>>>>>> Lucene are you using?  Are you really sure it's not showing the
>>>>>> changes?  Can you print the two versions?  Every commit to the
>>>>>> index (by IndexWriter) should increment that version number.
>>>>>>
>>>>>>
>>>>> The 2nd line was working fine, however I was getting errors in
>>>>> other places saying that the indexReader is closed.
>>>>>
>>>> Can you restructure your code, such that you open a new reader
>>>> without first closing the old one, and then only once the open is
>>>> complete, you swap the new reader in as "reader", wait for threads to
>>>> finish using the old reader, then call close on the old one?
>>>>
>>>>
>>>>>>> I was getting a bunch of this indexreader is closed errors, and
>>>>>>> I'm not sure why there's no method like reader.isClosed().
>>>>>>>
>>>>>> That's spooky: can you explain why you're accidentally using a
>>>>>> closed reader?  Your code above seems to replace reader after
>>>>>> closing it.  Are there other threads that are using the reader
>>>>>> while you are doing this re-opening?
>>>>>>
>>>>>>
>>>>> There could be other threads using this, and there are other places
>>>>> in the code that open and close readers.  My main problem I guess
>>>>> is that I can't tell when a reader is closed.  Is there some method
>>>>> I can use?  I basically want to do something like this.
>>>>> if (reader==null || reader.isClosed || reader.getVersion() !=
>>>>> IndexReader.getCurrentVersion(indexName))
>>>>>
>>>> There is currently no way to ask a reader if it's closed.  I suppose
>>>> you could do something like:
>>>>
>>>>   try {
>>>>     version = reader.getVersion();
>>>>     isClosed = false;
>>>>   } catch (AlreadyClosedException e) {
>>>>     isClosed = true;
>>>>   }
>>>>
>>>> However this is somewhat bad form.  It's better to restructure your
>>>> code such that it's not possible to accidentally use a reader you had
>>>> closed.
>>>>
>>>>
>>>>> Is reader threadsafe?  Should each invocation open it's own reader?
>>>>>
>>>> Reader is definitely thread safe, so you should share 1 reader across
>>>> all threads.  You just need to take care in your app to not close a
>>>> reader if other threads are still using it or will continue using it.
>>>>
>>>> Mike
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 22:21:58 2007
Return-Path: <java-user-return-31467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27862 invoked from network); 12 Dec 2007 22:21:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 22:21:58 -0000
Received: (qmail 30231 invoked by uid 500); 12 Dec 2007 22:21:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29930 invoked by uid 500); 12 Dec 2007 22:21:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29919 invoked by uid 99); 12 Dec 2007 22:21:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 14:21:39 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 22:21:17 +0000
Received: by an-out-0708.google.com with SMTP id c5so120092anc.49
        for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 14:21:18 -0800 (PST)
Received: by 10.100.248.9 with SMTP id v9mr2595657anh.19.1197498078214;
        Wed, 12 Dec 2007 14:21:18 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 23sm83029hsd.2007.12.12.14.21.17
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 12 Dec 2007 14:21:17 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <47605899.4050204@istandfor.com>
References: <475F1134.6050402@istandfor.com>	 <AC726309-9A26-4DF7-804C-BE3D8E161D0B@mikemccandless.com>	 <475F6F5E.9040103@istandfor.com>	 <00707F08-B155-4066-83D1-65B57BA44136@mikemccandless.com> <359a92830712120633w4b29c892h8229b31ba868697a@mail.gmail.com> <47603B56.3090805@istandfor.com> <414C78C5-8DDB-4372-9D9F-5227DDA93E9D@mikemccandless.com> <47605899.4050204@istandfor.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6E4EAA37-7332-4669-9D09-81E1A238779C@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Refreshing RAMDirectory
Date: Wed, 12 Dec 2007 17:20:17 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Ruslan Sivak wrote:

> This seems to be problematic though.  There are other things that  
> depend on the reader that is not so obvious.  For example,
>
> IndexReader reader=getReader();
> IndexSearcher searcher=new IndexSearcher(reader);
> Hits hits=searcher.search(query);
> searcher.close();
> reader.close();
> Iterator i=hits.iterator();
> if (i.hasNext())
>    Hit h=(Hit) i.next();
>
> This, for example, would not work, as accessing the hits after the  
> reader is closed will throw a "this reader is closed" exception.   
> You need to have the reader open for the hits to retrieve data.

Right.  Reader must remain open so long as it's in-use (and iterating  
through hits counts as using it).

> Since my app would be multithreaded, there could be multiple  
> threads accessing the reader, while i'm reloading it.  This means  
> that if I close the reader, and another thread is using it, it  
> might get an exception.

The normal approach here is open a new reader, start sending new  
searches to the new reader, and only once all existing searches (and,  
possibly, search sessions, if for example you want paginating through  
results to not suddenly change on the user)  are done with the old  
reader do you close the old one.

> This forces me to use a new reader for every method invocation.   
> This shouldn't be that bad, since it's accessing a RAMDirectory,  
> correct?  The overhead should be minimal.

Well ... every method = every search?  If so, you're probably going  
to slow down your search throughput & latency quite a bit, cause lots  
of extra GC load, etc., but maybe that's acceptable in your application.

Mike

>
> Russ
>
>
> Michael McCandless wrote:
>>
>> You need to keep a reader open so long as you plan to use any of  
>> its methods from any thread.
>>
>> The reader does close exactly when you ask it to (when you call  
>> reader.close()).
>>
>> You should not have to "open a new reader for every method call"  
>> -- you only need to open a new reader (and in your case,  
>> RAMDirectory) whenever the underlying index has changed.
>>
>> Mike
>>
>> Ruslan Sivak wrote:
>>
>>> Thank you to everyone for your comments.  I didn't realize that  
>>> readers need to be kept open and won't close exactly when you ask  
>>> them too.  I have restructured my code to keep the RamDirectory  
>>> cached, and to open a new reader for every method call.  This  
>>> seems to be working fine.
>>>
>>> Russ
>>>
>>> Erick Erickson wrote:
>>>> Even if you could tell a reader is closed, you'd wind up with
>>>> unmaintainable code. I envision you have a bunch of places
>>>> where you'd do something like
>>>>
>>>> if (reader.isClosed()) {
>>>>      reader = create a new reader.
>>>> }
>>>>
>>>> But practically, you'd be opening a new reader someplace,
>>>> closing it someplace else, opening it in another place......
>>>>
>>>> This just leads to maintenance nightmares. For instance, how
>>>> could you determine what the state of a particular reader was
>>>> when trying to figure out why your searches didn't work if you  
>>>> don't
>>>> have a clue where/when it was opened?
>>>>
>>>> Perhaps the easiest thing to do if you can't restructure your code
>>>> as Michael suggested is just employ a singleton pattern to give you
>>>> complete control over when/where a reader is opened.....
>>>>
>>>> Best
>>>> Erick
>>>>
>>>> On Dec 12, 2007 5:36 AM, Michael McCandless  
>>>> <lucene@mikemccandless.com>
>>>> wrote:
>>>>
>>>>
>>>>> Ruslan Sivak wrote:
>>>>>
>>>>>
>>>>>> Michael McCandless wrote:
>>>>>>
>>>>>>> Ruslan Sivak wrote:
>>>>>>>
>>>>>>>
>>>>>>>> I have an index of about 10mb.  Since it's so small, I would  
>>>>>>>> like
>>>>>>>> to keep it loaded in memory, and reload it about every  
>>>>>>>> minute or
>>>>>>>> so, assuming that it has changed on disk.  I have the following
>>>>>>>> code, which works, except it doesn't reload the changes.
>>>>>>>> protected String indexName;
>>>>>>>> protected IndexReader reader;
>>>>>>>> private long lastCheck=0;
>>>>>>>> ...
>>>>>>>> protected IndexReader getReader() throws CorruptIndexException,
>>>>>>>> IOException
>>>>>>>>    {
>>>>>>>>        if (reader==null || System.currentTimeMillis() >  
>>>>>>>> lastCheck
>>>>>>>> +60000)
>>>>>>>>        {
>>>>>>>>            lastCheck=System.currentTimeMillis();
>>>>>>>>            if (reader==null || !reader.isCurrent())
>>>>>>>>            {
>>>>>>>>                if (reader!=null)
>>>>>>>>                    reader.close();
>>>>>>>>                              Directory dir = new RAMDirectory
>>>>>>>> (indexName);
>>>>>>>>                reader = IndexReader.open(dir);
>>>>>>>>                searcher = new IndexSearcher(reader);
>>>>>>>>            }
>>>>>>>>        }
>>>>>>>>        return reader;
>>>>>>>> }
>>>>>>>>
>>>>>>>>
>>>>>>>> Apparently reader.isCurrent() won't tell you if the underlying
>>>>>>>> FSDirectory has changed.
>>>>>>>>
>>>>>>> That's right: your reader is only searching the RAMDirectory; it
>>>>>>> has no idea that your RAMDirectory was copied from an  
>>>>>>> FSDirectory
>>>>>>> that has now changed.  (That ctor for RAMDirectory makes a full
>>>>>>> copy of what's currently in the FSDirectory and thereafter
>>>>>>> maintains no link to that FSDirectory).
>>>>>>>
>>>>>>>
>>>>>>>> I also had the following code before:
>>>>>>>> instead of
>>>>>>>> if (reader==null || !reader.isCurrent())
>>>>>>>> I had
>>>>>>>> if (reader==null || reader.getVersion() !=
>>>>>>>> IndexReader.getCurrentVersion(indexName))
>>>>>>>>
>>>>>>> That 2nd line seems like it should have worked.  What version of
>>>>>>> Lucene are you using?  Are you really sure it's not showing the
>>>>>>> changes?  Can you print the two versions?  Every commit to the
>>>>>>> index (by IndexWriter) should increment that version number.
>>>>>>>
>>>>>>>
>>>>>> The 2nd line was working fine, however I was getting errors in
>>>>>> other places saying that the indexReader is closed.
>>>>>>
>>>>> Can you restructure your code, such that you open a new reader
>>>>> without first closing the old one, and then only once the open is
>>>>> complete, you swap the new reader in as "reader", wait for  
>>>>> threads to
>>>>> finish using the old reader, then call close on the old one?
>>>>>
>>>>>
>>>>>>>> I was getting a bunch of this indexreader is closed errors, and
>>>>>>>> I'm not sure why there's no method like reader.isClosed().
>>>>>>>>
>>>>>>> That's spooky: can you explain why you're accidentally using a
>>>>>>> closed reader?  Your code above seems to replace reader after
>>>>>>> closing it.  Are there other threads that are using the reader
>>>>>>> while you are doing this re-opening?
>>>>>>>
>>>>>>>
>>>>>> There could be other threads using this, and there are other  
>>>>>> places
>>>>>> in the code that open and close readers.  My main problem I guess
>>>>>> is that I can't tell when a reader is closed.  Is there some  
>>>>>> method
>>>>>> I can use?  I basically want to do something like this.
>>>>>> if (reader==null || reader.isClosed || reader.getVersion() !=
>>>>>> IndexReader.getCurrentVersion(indexName))
>>>>>>
>>>>> There is currently no way to ask a reader if it's closed.  I  
>>>>> suppose
>>>>> you could do something like:
>>>>>
>>>>>   try {
>>>>>     version = reader.getVersion();
>>>>>     isClosed = false;
>>>>>   } catch (AlreadyClosedException e) {
>>>>>     isClosed = true;
>>>>>   }
>>>>>
>>>>> However this is somewhat bad form.  It's better to restructure  
>>>>> your
>>>>> code such that it's not possible to accidentally use a reader  
>>>>> you had
>>>>> closed.
>>>>>
>>>>>
>>>>>> Is reader threadsafe?  Should each invocation open it's own  
>>>>>> reader?
>>>>>>
>>>>> Reader is definitely thread safe, so you should share 1 reader  
>>>>> across
>>>>> all threads.  You just need to take care in your app to not  
>>>>> close a
>>>>> reader if other threads are still using it or will continue  
>>>>> using it.
>>>>>
>>>>> Mike
>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> ---
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 22:22:47 2007
Return-Path: <java-user-return-31468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29756 invoked from network); 12 Dec 2007 22:22:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 22:22:47 -0000
Received: (qmail 33461 invoked by uid 500); 12 Dec 2007 22:22:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33431 invoked by uid 500); 12 Dec 2007 22:22:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33420 invoked by uid 99); 12 Dec 2007 22:22:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 14:22:29 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 209.85.132.241 as permitted sender)
Received: from [209.85.132.241] (HELO an-out-0708.google.com) (209.85.132.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 22:22:07 +0000
Received: by an-out-0708.google.com with SMTP id c5so120092anc.49
        for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 14:21:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=aQ0qxtWjg1j7fhCAmtINjU1/1qM2OJyaJrg2U1XTZ0M=;
        b=olPseTbb/sdaH0pkounaNNUv1RInuKhCE/hdXFXvuD7PD7W8SUiLzVwVRxEssqv9bSBIBinKD2azwtjw0vL342PvGWQk5sSrMkzpw6tFBOXV9iBRP4wssdtY0A4h0YEVPUOA8jJtIMlz0CWKmp01P3XzJxDKC3ubbgR8KeMe9pE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LkJUTwcJd3YHh1/ZrrRewE2BUjq0tMo1GYykozToMRCLZwJrTtqWho0Pq0+tjjnehKoeQ6Y3bGk/GAUe2QxsvW28edXdjiIi/aBt+/5VVdfRZXUy42Q4Ry6gChqWOAAxlS00sOnzx+RwkNygOmKDmMHxZpzxgoNfRJffnyoWY/Q=
Received: by 10.150.143.14 with SMTP id q14mr444330ybd.44.1197498118872;
        Wed, 12 Dec 2007 14:21:58 -0800 (PST)
Received: by 10.150.157.12 with HTTP; Wed, 12 Dec 2007 14:21:58 -0800 (PST)
Message-ID: <e05f0fd10712121421q15a60f91y38dcd2ffa8499f3@mail.gmail.com>
Date: Thu, 13 Dec 2007 00:21:58 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Handling Indexed, Stored and Tokenized fields
In-Reply-To: <14303464.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8860_1897083.1197498118868"
References: <14303464.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8860_1897083.1197498118868
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Seems that PerFieldAnalyzerWrapper would be convenient here?

Doron

On Dec 12, 2007 10:41 PM, ts01 <venkat@clearwellsystems.com> wrote:

>
> Hi,
>
> We have a requirement to index as well as store multiple fields in a
> document, each with its own special tokenizer. The following seems to
> provide a way to index multiple fields each with its own tokenizer:
>
> Field(String name, Reader reader)
>
> The following seems to provide a way to Index and Store, but using the
> default tokenizer of the entire document, when index is set to
> Index.TOKENIZED.
>
> Field(String name, String value, Store store, Index index)
>
> The following is what we need, with store.STORED and index.TOKENIZED with
> specific reader.
>
> Field(String name, String value, Store store, Index index, Reader reader)
>
> Assuming that this capability does not exist, we added some code to the
> Field class, IndexWriter class and to the AbstractField class to provide
> this capability. We'd be happy to contribute this to the next Open Source
> release.
>
> Another possibility was to create two fields: field_indexed and
> field_stored
> for each document, but that would be an inconvenient workaround.
>
> Is this of interest to folks?
>
> Thanks.
>
> --
> View this message in context:
> http://www.nabble.com/Handling-Indexed%2C-Stored-and-Tokenized-fields-tp14303464p14303464.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_8860_1897083.1197498118868--

From java-user-return-31469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 12 22:44:47 2007
Return-Path: <java-user-return-31469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73295 invoked from network); 12 Dec 2007 22:44:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 12 Dec 2007 22:44:47 -0000
Received: (qmail 66700 invoked by uid 500); 12 Dec 2007 22:44:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66662 invoked by uid 500); 12 Dec 2007 22:44:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66651 invoked by uid 99); 12 Dec 2007 22:44:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 14:44:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rsivak@istandfor.com designates 72.32.36.243 as permitted sender)
Received: from [72.32.36.243] (HELO mx0.istandfor.com) (72.32.36.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 22:44:30 +0000
Received: from [192.168.1.42] (pool-70-18-194-158.ny325.east.verizon.net [70.18.194.158])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id lBCMi8mj010739
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 16:44:09 -0600
Message-ID: <47606439.1040507@istandfor.com>
Date: Wed, 12 Dec 2007 17:44:09 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Refreshing RAMDirectory
References: <475F1134.6050402@istandfor.com>	 <AC726309-9A26-4DF7-804C-BE3D8E161D0B@mikemccandless.com>	 <475F6F5E.9040103@istandfor.com>	 <00707F08-B155-4066-83D1-65B57BA44136@mikemccandless.com> <359a92830712120633w4b29c892h8229b31ba868697a@mail.gmail.com> <47603B56.3090805@istandfor.com> <414C78C5-8DDB-4372-9D9F-5227DDA93E9D@mikemccandless.com> <47605899.4050204@istandfor.com> <6E4EAA37-7332-4669-9D09-81E1A238779C@mikemccandless.com>
In-Reply-To: <6E4EAA37-7332-4669-9D09-81E1A238779C@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
>
> Ruslan Sivak wrote:
>
>> This seems to be problematic though.  There are other things that 
>> depend on the reader that is not so obvious.  For example,
>>
>> IndexReader reader=getReader();
>> IndexSearcher searcher=new IndexSearcher(reader);
>> Hits hits=searcher.search(query);
>> searcher.close();
>> reader.close();
>> Iterator i=hits.iterator();
>> if (i.hasNext())
>>    Hit h=(Hit) i.next();
>>
>> This, for example, would not work, as accessing the hits after the 
>> reader is closed will throw a "this reader is closed" exception.  You 
>> need to have the reader open for the hits to retrieve data.
>
> Right.  Reader must remain open so long as it's in-use (and iterating 
> through hits counts as using it).
>
>> Since my app would be multithreaded, there could be multiple threads 
>> accessing the reader, while i'm reloading it.  This means that if I 
>> close the reader, and another thread is using it, it might get an 
>> exception.
>
> The normal approach here is open a new reader, start sending new 
> searches to the new reader, and only once all existing searches (and, 
> possibly, search sessions, if for example you want paginating through 
> results to not suddenly change on the user)  are done with the old 
> reader do you close the old one.
>
How exactly would I do something like this?   I'm not sure where to 
start.  From what I understand, the reader will be auto closed when 
there are no more references to it.  What if I did somehting like this

Private IndexReader reader;

public IndexReader getReader()
{
   if (we are reloading)
   {
      Directory dir = new RAMDirectory (indexName);
      reader = IndexReader.open(dir);
   }
   return reader;
}
public Results search(String searchTerms)
{
   IndexReader r=getReader()
   //Do search and return results
}

This should work, right?  The local variable will hold a reference to a 
reader that it's using, and once it goes out of use, it should auto 
close, correct?  Is closing the reader even necessary?  Won't it just 
get collected by the GC once there are no more references to it? 

Russ


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 13 00:41:46 2007
Return-Path: <java-user-return-31470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93844 invoked from network); 13 Dec 2007 00:41:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2007 00:41:46 -0000
Received: (qmail 11385 invoked by uid 500); 13 Dec 2007 00:41:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10852 invoked by uid 500); 13 Dec 2007 00:41:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10841 invoked by uid 99); 13 Dec 2007 00:41:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 16:41:29 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [193.145.55.10] (HELO iua-mail.upf.es) (193.145.55.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 00:41:07 +0000
Received: from [79.144.20.57] (helo=gato-preto.local)
	by iua-mail.upf.es with esmtpsa (TLS-1.0:DHE_RSA_AES_256_CBC_SHA1:32)
	(Exim 4.60)
	(envelope-from <j+lucene@grivolla.net>)
	id 1J2c46-0003fB-GW
	for java-user@lucene.apache.org; Thu, 13 Dec 2007 01:36:38 +0100
Message-ID: <47607E89.1080203@grivolla.net>
Date: Thu, 13 Dec 2007 01:36:25 +0100
From: Jens Grivolla <j+lucene@grivolla.net>
User-Agent: Thunderbird 2.0.0.9 (Macintosh/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Boost One Term Query
References: <14035572.post@talk.nabble.com>	 <Pine.LNX.4.62.0712041708500.14245@radix.cryptio.net>	 <14199255.post@talk.nabble.com>	 <c68e39170712061200i1420c48byd0f00e3a8e4115e9@mail.gmail.com>	 <14200211.post@talk.nabble.com> <359a92830712061648g6a7ed835y4157a8d4037f5047@mail.gmail.com>
In-Reply-To: <359a92830712061648g6a7ed835y4157a8d4037f5047@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-IUA-MailScanner: Found to be clean
X-IUA-MailScanner-SpamCheck: not spam, SpamAssassin (not cached,
	score=-4.399, required 5, autolearn=not spam, ALL_TRUSTED -1.80,
	BAYES_00 -2.60)
X-IUA-MailScanner-From: j+lucene@grivolla.net
X-Virus-Checked: Checked by ClamAV on apache.org

Erick Erickson wrote:
> I don't believe you can compare scores across queries in any meaningful
> way.

I actually investigated this to some degree in my thesis, comparing 
different participating systems from the TREC campaigns.  It turns out 
that some systems' scores (e.g. the top scores for a given query) 
correlate quite well with the quality of the result (relevance of the 
returned documents), whereas for others this is not at all the case.  I 
don't think there was a Lucene-based system in there, though.

So in some cases comparing scores across queries can be used (to a 
limited degree) as a confidence measure, an indicator of expected 
usefulness of the results for the user.

Jens

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 13 03:07:12 2007
Return-Path: <java-user-return-31471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91245 invoked from network); 13 Dec 2007 03:07:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2007 03:07:12 -0000
Received: (qmail 62572 invoked by uid 500); 13 Dec 2007 03:06:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62545 invoked by uid 500); 13 Dec 2007 03:06:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62534 invoked by uid 99); 13 Dec 2007 03:06:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 19:06:54 -0800
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=FB_WORD1_END_DOLLAR,HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucener@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 03:06:33 +0000
Received: by nf-out-0910.google.com with SMTP id d3so436536nfc.15
        for <java-user@lucene.apache.org>; Wed, 12 Dec 2007 19:06:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=/1pQTnrGKxF+YgNkd2/WOddoLlD2iMYdYg5hUEFGwrA=;
        b=OnWFAlHIh2JCxYQde3ijQS44aJuJoe2RJYRTrrdIp7wdS1imfYZBH9NIP6PDd0MdXX6Ee3d3W3pLm+65r/x3yrAIMMNSPDLNVuo5Ffmt18IhYR7R+1poNtI7ULbt6ThoLIGhGK+7SPxla9FUQGtijDe3R3pbA9I0qVYbqggB9rw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Tdj5iqHp9iCSaug6iagSV+1VUZEg/SlzKs4uGU79yfT9S1rTLICrH32zktgn9h+4JIHHFnLlv+GRmEhk7iVYw6BwiTSTwvgjaOl6abFoxceO2fcGDNf+QuPTn4Qk1OHspQOHSb77vu5P2gnm6aZ+S8NzHVz9iDqjD0pLGWGNpJQ=
Received: by 10.78.123.4 with SMTP id v4mr1702645huc.18.1197515194729;
        Wed, 12 Dec 2007 19:06:34 -0800 (PST)
Received: by 10.78.13.13 with HTTP; Wed, 12 Dec 2007 19:06:34 -0800 (PST)
Message-ID: <882004010712121906k4356fc8bu7467eefa43f093bb@mail.gmail.com>
Date: Wed, 12 Dec 2007 22:06:34 -0500
From: "Lucifer Hammer" <lucener@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Searching on plurals and phrases in a single field
In-Reply-To: <359a92830712121134y53d116f4gafe53424c8053046@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_34953_8010858.1197515194669"
References: <882004010712121025qd617931g85b100eeef6c7b12@mail.gmail.com>
	 <359a92830712121134y53d116f4gafe53424c8053046@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_34953_8010858.1197515194669
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick,

Thanks for the great idea, it's exactly the kind of suggestion I was looking
for!

Lucifer

On Dec 12, 2007 2:34 PM, Erick Erickson <erickerickson@gmail.com> wrote:

> I faced a very similar requirement and solved it by indexing multiple
> tokens at the same place. For instance, say you're indexing
> the word "foxes". Index something like fox$ and foxes at the same
> position (see SynonymAnalyzer in Lucene In Action for an example).
> You probably MUST index the multiple terms with an increment gap
> of 0 (more later).
>
> Example phrase "red foxes are plentiful"
>
> Now you have the capability of distinguishing between a stemmed
> and unstemmed version of the word and can search for exactly
> "red foxes". But if instead you want to search for the stemmed
> version, you can search for "red fox$". But "red fox" will NOT match.
>
> The reason you need to index these with an increment gap of 0 is so
> phrase queries work. If you let the gap increment for each token, and
> indexed a phrase like "red foxes are plentiful", then did a
> proximity search on "red plentiful"~2, it would fail because
> you'd have fox$ and foxes each taking up one position. But if
> fox$ and foxes both have the same position, it'll work.
>
> And it's all in the same index, one field, etc.
>
> Hope this helps
> Erick
>
> On Dec 12, 2007 1:25 PM, Lucifer Hammer <lucener@gmail.com> wrote:
>
> > Hi,
> >
> > We've got a requirement that we need to give our users  the ability to
> > search on exact phrases within a field, or, if they prefer, they can
> match
> > on plurals(either via stems, or another plural algorithm).  However, the
> > cases are mutually exclusive, for example given the following field in
> the
> > index:
> >
> > IndexField1: "The quick brown dog jumped over the lazy fox"
> >
> > If the user chooses an exact phrase search such as "lazy dog jumped",
> then
> > it'll match, however, if they also choose an exact phrase  and search
> for:
> > "lazy dogs" it shouldn't match.
> >
> > If the user chooses a plural search, then  both of the above searches
> > should
> > match.
> >
> > So... the question really is:  Can I do this all in one field, or will I
> > have to index the data twice, once in a field that has the exact text,
> and
> > in a second field in which I index the terms, and wordstack stems(or
> > plurals).
> >
> > If it's possible to do this in a single field, that would be much
> > preferred...
> >
> > Thanks for any help!
> > Lucifer
> >
>

------=_Part_34953_8010858.1197515194669--

From java-user-return-31472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 13 07:40:23 2007
Return-Path: <java-user-return-31472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6839 invoked from network); 13 Dec 2007 07:40:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2007 07:40:23 -0000
Received: (qmail 61689 invoked by uid 500); 13 Dec 2007 07:40:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61655 invoked by uid 500); 13 Dec 2007 07:40:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61644 invoked by uid 99); 13 Dec 2007 07:40:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 12 Dec 2007 23:40:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [150.254.30.30] (HELO libra.cs.put.poznan.pl) (150.254.30.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 07:39:44 +0000
Received: from kas30pipe.localhost (unknown [127.0.0.1])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id 57D54B9
	for <java-user@lucene.apache.org>; Thu, 13 Dec 2007 07:39:43 +0000 (UTC)
X-Virus-Scanned: amavisd-new at cs.put.poznan.pl
Received: from libra.cs.put.poznan.pl ([127.0.0.1])
	by localhost (libra.cs.put.poznan.pl [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id CS55pdzDBFCE for <java-user@lucene.apache.org>;
	Thu, 13 Dec 2007 08:39:43 +0100 (CET)
Received: from [150.254.130.25] (idss-dw-2.cs.put.poznan.pl [150.254.130.25])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id 1F186B8
	for <java-user@lucene.apache.org>; Thu, 13 Dec 2007 08:39:43 +0100 (CET)
Message-ID: <4760E1BC.10105@cs.put.poznan.pl>
Date: Thu, 13 Dec 2007 08:39:40 +0100
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing Wikipedia dumps
References: <547045.76613.qm@web50306.mail.re2.yahoo.com> <80EC5EE9-581A-46F5-B250-344DD164A158@mikemccandless.com> <C44CF8C3-3A5D-46FC-9094-7486874C3392@apache.org>
In-Reply-To: <C44CF8C3-3A5D-46FC-9094-7486874C3392@apache.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-SpamTest-Version: SMTP-Filter Version 3.0.0 [0278], KAS30/Release
X-SpamTest-Info: Not protected
X-Virus-Checked: Checked by ClamAV on apache.org


> Note that the current code doesn't actually do anything with the wiki 
> syntax, but I would think as long as the other language is in the same 
> format you should be fine.

Just incidentally -- do you know of something that would parse the wikipedia 
markup (to plain text, for example)?

D.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 13 10:53:08 2007
Return-Path: <java-user-return-31473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54966 invoked from network); 13 Dec 2007 10:53:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2007 10:53:08 -0000
Received: (qmail 83720 invoked by uid 500); 13 Dec 2007 10:52:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83353 invoked by uid 500); 13 Dec 2007 10:52:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83341 invoked by uid 99); 13 Dec 2007 10:52:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 02:52:50 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [72.14.246.247] (HELO ag-out-0708.google.com) (72.14.246.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 10:52:28 +0000
Received: by ag-out-0708.google.com with SMTP id 5so507150agb.11
        for <java-user@lucene.apache.org>; Thu, 13 Dec 2007 02:52:29 -0800 (PST)
Received: by 10.150.153.19 with SMTP id a19mr592458ybe.107.1197543149710;
        Thu, 13 Dec 2007 02:52:29 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id q30sm10466086wrq.2007.12.13.02.52.29
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 13 Dec 2007 02:52:29 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <47606439.1040507@istandfor.com>
References: <475F1134.6050402@istandfor.com>	 <AC726309-9A26-4DF7-804C-BE3D8E161D0B@mikemccandless.com>	 <475F6F5E.9040103@istandfor.com>	 <00707F08-B155-4066-83D1-65B57BA44136@mikemccandless.com> <359a92830712120633w4b29c892h8229b31ba868697a@mail.gmail.com> <47603B56.3090805@istandfor.com> <414C78C5-8DDB-4372-9D9F-5227DDA93E9D@mikemccandless.com> <47605899.4050204@istandfor.com> <6E4EAA37-7332-4669-9D09-81E1A238779C@mikemccandless.com> <47606439.1040507@istandfor.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6DC2F22A-DE1D-4591-8479-D7F5A9AC6262@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Refreshing RAMDirectory
Date: Thu, 13 Dec 2007 05:51:27 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Ruslan Sivak wrote:

> Michael McCandless wrote:
>>
>> Ruslan Sivak wrote:
>>> Since my app would be multithreaded, there could be multiple  
>>> threads accessing the reader, while i'm reloading it.  This means  
>>> that if I close the reader, and another thread is using it, it  
>>> might get an exception.
>>
>> The normal approach here is open a new reader, start sending new  
>> searches to the new reader, and only once all existing searches  
>> (and, possibly, search sessions, if for example you want  
>> paginating through results to not suddenly change on the user)   
>> are done with the old reader do you close the old one.
>>
> How exactly would I do something like this?   I'm not sure where to  
> start.  From what I understand, the reader will be auto closed when  
> there are no more references to it.  What if I did somehting like this
>
> Private IndexReader reader;
>
> public IndexReader getReader()
> {
>   if (we are reloading)
>   {
>      Directory dir = new RAMDirectory (indexName);
>      reader = IndexReader.open(dir);
>   }
>   return reader;
> }
> public Results search(String searchTerms)
> {
>   IndexReader r=getReader()
>   //Do search and return results
> }
>
> This should work, right?  The local variable will hold a reference  
> to a reader that it's using, and once it goes out of use, it should  
> auto close, correct?  Is closing the reader even necessary?  Won't  
> it just get collected by the GC once there are no more references  
> to it?

Well you could keep a counter of how many searches are presently  
using the previous reader, and then the final search to finish with  
the previous reader would close it?

GC doesn't actually "close" the reader, though since you're using  
RAMDirectory, you're not actually consuming any file descriptors so I  
think it might be OK for you to never close and simply replace your  
reader with the newly reopened one?  Normally this is not  
recommended, ie, a reader against an FSDirectory uses up precious  
file descriptors...

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 13 11:40:42 2007
Return-Path: <java-user-return-31474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68767 invoked from network); 13 Dec 2007 11:40:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2007 11:40:42 -0000
Received: (qmail 66802 invoked by uid 500); 13 Dec 2007 11:40:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66780 invoked by uid 500); 13 Dec 2007 11:40:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66769 invoked by uid 99); 13 Dec 2007 11:40:24 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 03:40:24 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [134.130.7.73] (HELO mta-2.ms.rz.rwth-aachen.de) (134.130.7.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 11:40:01 +0000
Received: from ironport-out-1.rz.rwth-aachen.de ([134.130.3.58])
 by mta-2.ms.rz.RWTH-Aachen.de
 (Sun Java System Messaging Server 6.2-8.04 (built Feb 28 2007))
 with ESMTP id <0JSZ00IYWKEP6D60@mta-2.ms.rz.RWTH-Aachen.de> for
 java-user@lucene.apache.org; Thu, 13 Dec 2007 12:40:01 +0100 (CET)
Received: from relay.rwth-aachen.de ([134.130.3.1])
 by ironport-in-1.rz.rwth-aachen.de with ESMTP; Thu, 13 Dec 2007 12:40:02 +0100
Received: from numa-i.igpm.rwth-aachen.de
 (numa-i.igpm.RWTH-Aachen.DE [134.130.161.252])
	by relay.rwth-aachen.de (8.13.7/8.13.3/1) with ESMTP id lBDBe1HX023062	for
 <java-user@lucene.apache.org>; Thu, 13 Dec 2007 12:40:01 +0100 (MET)
Received: by numa-i.igpm.rwth-aachen.de (Postfix, from userid 230)
	id 358D210677B; Thu, 13 Dec 2007 12:40:01 +0100 (CET)
Date: Thu, 13 Dec 2007 12:40:01 +0100 (CET)
From: Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
Subject: Query.rewrite - help me to understand it
To: java-user@lucene.apache.org
Reply-to: jarausch@igpm.rwth-aachen.de
Message-id: <tkrat.0946e48632677400@igpm.rwth-aachen.de>
MIME-version: 1.0
Content-type: TEXT/PLAIN; CHARSET=us-ascii
Content-transfer-encoding: 7BIT
Content-disposition: INLINE
X-IronPort-AV: E=Sophos;i="4.24,162,1196636400";   d="scan'208";a="39191370"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

since I need highlighting, I need to 'rewrite' a query.
Query.rewrite  takes an object of type IndexReader

But what for?

As I understand it, rewrite transforms a possibly complicated
query into an simplified (internal?) form which is (unfortunately)
needed by QueryScorer which is in turn need by Highlighter.

What does Query.rewrite do and why does it need access to the
index?

Many thanks for an explanation,
Helmut.

-- 
Helmut Jarausch

Lehrstuhl fuer Numerische Mathematik
RWTH - Aachen University
D 52056 Aachen, Germany

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 13 12:01:11 2007
Return-Path: <java-user-return-31475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77366 invoked from network); 13 Dec 2007 12:01:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2007 12:01:10 -0000
Received: (qmail 89798 invoked by uid 500); 13 Dec 2007 12:00:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89758 invoked by uid 500); 13 Dec 2007 12:00:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89705 invoked by uid 99); 13 Dec 2007 12:00:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 04:00:51 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.214] (HELO web26003.mail.ukl.yahoo.com) (217.12.10.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 13 Dec 2007 12:00:30 +0000
Received: (qmail 61754 invoked by uid 60001); 13 Dec 2007 12:00:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=3RnieoznhvOjezpR+zgQ78a/awQDoxkA0i/FRlFDbKlRTGmLo9RPSGEmMT8Akz/xZQZr0/1onIpMAFBnrNoJiYjM6aMHPI8Gtu7cOyLxWt9qvkL/0AFAbtKMQvBvzakykGmabAJeb0CqOxI35swXtdIrtDIDXPrtrfIpJBEIdwY=;
X-YMail-OSG: qJuKDy0VM1kbkUwwtAog9mSvC4RXNXSzPEN9vlok05RnDp_E0RWwcAT8_BlCmFKmw..8WqnnBVRYXOcKKaZ2BOeJYZ5NpcpTP_eU6buCSKqBbX85rmeykPzbdoo-
Received: from [193.36.230.96] by web26003.mail.ukl.yahoo.com via HTTP; Thu, 13 Dec 2007 12:00:31 GMT
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Thu, 13 Dec 2007 12:00:31 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Query.rewrite - help me to understand it
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <757940.41307.qm@web26003.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

rewrite turns=0A    foo*=0Ainto=0A   food  foot football ...=0A=0Aetc. Thos=
e variant terms are found by looking in the index, hence the need for the I=
ndexReader.=0ASearcher calls rewrite on queries to do this - the highlighte=
r just pre-empts this conversion and sneaks a peek at the terms generated s=
o it can do its job more efficiently.=0A=0A=0A=0A----- Original Message ---=
-=0AFrom: Helmut Jarausch <jarausch@igpm.rwth-aachen.de>=0ATo: java-user@lu=
cene.apache.org=0ASent: Thursday, 13 December, 2007 11:40:01 AM=0ASubject: =
Query.rewrite - help me to understand it=0A=0AHi,=0A=0Asince I need highlig=
hting, I need to 'rewrite' a query.=0AQuery.rewrite  takes an object of typ=
e IndexReader=0A=0ABut what for?=0A=0AAs I understand it, rewrite transform=
s a possibly complicated=0Aquery into an simplified (internal?) form which =
is (unfortunately)=0Aneeded by QueryScorer which is in turn need by Highlig=
hter.=0A=0AWhat does Query.rewrite do and why does it need access to the=0A=
index?=0A=0AMany thanks for an explanation,=0AHelmut.=0A=0A-- =0AHelmut Jar=
ausch=0A=0ALehrstuhl fuer Numerische Mathematik=0ARWTH - Aachen University=
=0AD 52056 Aachen, Germany=0A=0A-------------------------------------------=
--------------------------=0ATo unsubscribe, e-mail: java-user-unsubscribe@=
lucene.apache.org=0AFor additional commands, e-mail: java-user-help@lucene.=
apache.org=0A=0A=0A=0A=0A=0A=0A      ______________________________________=
____________________=0ASent from Yahoo! Mail - a smarter inbox http://uk.ma=
il.yahoo.com=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 13 12:08:25 2007
Return-Path: <java-user-return-31476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78677 invoked from network); 13 Dec 2007 12:08:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2007 12:08:25 -0000
Received: (qmail 97705 invoked by uid 500); 13 Dec 2007 12:08:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97675 invoked by uid 500); 13 Dec 2007 12:08:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97664 invoked by uid 99); 13 Dec 2007 12:08:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 04:08:08 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of supercooc@gmail.com designates 72.14.202.179 as permitted sender)
Received: from [72.14.202.179] (HELO ro-out-1112.google.com) (72.14.202.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 12:07:47 +0000
Received: by ro-out-1112.google.com with SMTP id m6so829693roe.7
        for <java-user@lucene.apache.org>; Thu, 13 Dec 2007 04:07:50 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=ULcLBTf1U4VvVnzAjb+RZIenI14/aYI/o1o6Oh8Q2s4=;
        b=vkQb06LvzNkXvkAQiHKFa50dEGfvBW6DFkqjAHQYPGi8bmUiqHO6yZbnIzYcYXnBiJR6p0s0slexXcm4s/D+GCOMz93Q2BOdTf1s1HljVndxb8IBDd884NxiAgYz/C46BZH2AgRQCU0kJaf0HVTHJKFtQezqnaEVNfNJNxxh69U=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=AV7qGx/nDHrT3vcbNYuZlAAy27i81S5wV2L5vpxxlNjAiAqB59Z5v5cYLsiWsxB2siThLKuu/J5QL/KfjY4uGeW4ABcd3YVerIUq2NU4+MxTAt+T89LJCDgh/3N8jGe523NYhZG4OpX0fu/6VaNaBJMe28/jCld73k2xdPCkOdM=
Received: by 10.140.208.14 with SMTP id f14mr1028264rvg.204.1197547669966;
        Thu, 13 Dec 2007 04:07:49 -0800 (PST)
Received: by 10.140.172.16 with HTTP; Thu, 13 Dec 2007 04:07:49 -0800 (PST)
Message-ID: <ee0c896c0712130407l75e9c522y497f48dd0dcf818a@mail.gmail.com>
Date: Thu, 13 Dec 2007 20:07:49 +0800
From: "=?GB2312?B?087TvrPYtcTT4w==?=" <supercooc@gmail.com>
To: java-user@lucene.apache.org, jarausch@igpm.rwth-aachen.de
Subject: Re: Query.rewrite - help me to understand it
In-Reply-To: <tkrat.0946e48632677400@igpm.rwth-aachen.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21925_23601133.1197547669933"
References: <tkrat.0946e48632677400@igpm.rwth-aachen.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21925_23601133.1197547669933
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hehe ,you can do a test with PrefixQuery rewrite method,and extract terms .
like this
  query = prefixQuery.rewrite(reader);
  query.extractTerms(set);
  for(String term : set){
     System.out.println(term);
 }

 It will give you a pleasant surprise.


2007/12/13, Helmut Jarausch <jarausch@igpm.rwth-aachen.de>:
>
> Hi,
>
> since I need highlighting, I need to 'rewrite' a query.
> Query.rewrite  takes an object of type IndexReader
>
> But what for?
>
> As I understand it, rewrite transforms a possibly complicated
> query into an simplified (internal?) form which is (unfortunately)
> needed by QueryScorer which is in turn need by Highlighter.
>
> What does Query.rewrite do and why does it need access to the
> index?
>
> Many thanks for an explanation,
> Helmut.
>
> --
> Helmut Jarausch
>
> Lehrstuhl fuer Numerische Mathematik
> RWTH - Aachen University
> D 52056 Aachen, Germany
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_21925_23601133.1197547669933--

From java-user-return-31477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 13 12:16:06 2007
Return-Path: <java-user-return-31477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80945 invoked from network); 13 Dec 2007 12:16:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2007 12:16:06 -0000
Received: (qmail 8236 invoked by uid 500); 13 Dec 2007 12:15:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8201 invoked by uid 500); 13 Dec 2007 12:15:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8190 invoked by uid 99); 13 Dec 2007 12:15:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 04:15:48 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of haroldo.araras@gmail.com designates 64.233.184.237 as permitted sender)
Received: from [64.233.184.237] (HELO wr-out-0506.google.com) (64.233.184.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 12:15:27 +0000
Received: by wr-out-0506.google.com with SMTP id c46so555307wra.14
        for <java-user@lucene.apache.org>; Thu, 13 Dec 2007 04:15:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=BB6u/1Vpoxo/GHaSgOZXDAGAuqyt/VnoK9JBGpc+C6o=;
        b=STZyDK2lMU4EV8HZ/OQMsQn/TS9tqGyWEkOVYJXT1ChNO1DezFEe4pWmZozCcAWZI6tMkqyI07nf8HmGd9HmVkwvb1MWW/ELHhyyXxWkdncw29/j4aSIoyGjUHUTWFebLkHACkPwmloFZP7CAf+y7RBaQWrspOWA0XurusQBwlw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=XPOKg6/Cg9u3dpB9sFxrBpo3zKfXCD8Tlg9uG2bAKXtwWWjheel2R9Rdnr1vz/8isloLCRVy9euRNPbN0Y4Ix4B5fo41wUpm5CvPcEaTDf4AsgGUYaznT/oTwWEqkuBxzeEYAHpTt3gE1vfYcUlV36uO9ntZuxnFal7fVnafzVA=
Received: by 10.150.181.11 with SMTP id d11mr637845ybf.3.1197548130296;
        Thu, 13 Dec 2007 04:15:30 -0800 (PST)
Received: by 10.150.220.13 with HTTP; Thu, 13 Dec 2007 04:15:30 -0800 (PST)
Message-ID: <718789d20712130415p4c993a0ey25d73dda445abe87@mail.gmail.com>
Date: Thu, 13 Dec 2007 09:15:30 -0300
From: "Haroldo Nascimento" <haroldo.araras@gmail.com>
To: java-user@lucene.apache.org
Subject: SpellChecker: Spanish Dictionary
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14214_12926695.1197548130278"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14214_12926695.1197548130278
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

  I am using the SpellCheck classes of Lucene for create  the "Did you Mean"
feature.
  I need load into memory all verbets of Spanish language (it wil be my
dictinary).

  Where I can get (download) this dictionary. Maybe .txt file.

  Thanks

------=_Part_14214_12926695.1197548130278--

From java-user-return-31478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 13 14:52:59 2007
Return-Path: <java-user-return-31478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74116 invoked from network); 13 Dec 2007 14:52:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2007 14:52:59 -0000
Received: (qmail 28583 invoked by uid 500); 13 Dec 2007 14:52:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28555 invoked by uid 500); 13 Dec 2007 14:52:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28544 invoked by uid 99); 13 Dec 2007 14:52:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 06:52:41 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rsivak@istandfor.com designates 72.32.36.243 as permitted sender)
Received: from [72.32.36.243] (HELO mx0.istandfor.com) (72.32.36.243)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 14:52:18 +0000
Received: from [192.168.0.108] (ool-457abb02.dyn.optonline.net [69.122.187.2])
	(authenticated bits=0)
	by mail.istandfor.com (8.12.11.20060308/8.12.11) with ESMTP id lBDEqJwe018939
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 13 Dec 2007 08:52:21 -0600
Message-ID: <47614724.1020004@istandfor.com>
Date: Thu, 13 Dec 2007 09:52:20 -0500
From: Ruslan Sivak <rsivak@istandfor.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Refreshing RAMDirectory
References: <475F1134.6050402@istandfor.com>	 <AC726309-9A26-4DF7-804C-BE3D8E161D0B@mikemccandless.com>	 <475F6F5E.9040103@istandfor.com>	 <00707F08-B155-4066-83D1-65B57BA44136@mikemccandless.com> <359a92830712120633w4b29c892h8229b31ba868697a@mail.gmail.com> <47603B56.3090805@istandfor.com> <414C78C5-8DDB-4372-9D9F-5227DDA93E9D@mikemccandless.com> <47605899.4050204@istandfor.com> <6E4EAA37-7332-4669-9D09-81E1A238779C@mikemccandless.com> <47606439.1040507@istandfor.com> <6DC2F22A-DE1D-4591-8479-D7F5A9AC6262@mikemccandless.com>
In-Reply-To: <6DC2F22A-DE1D-4591-8479-D7F5A9AC6262@mikemccandless.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Michael McCandless wrote:
>
> Ruslan Sivak wrote:
>
>> Michael McCandless wrote:
>>>
>>> Ruslan Sivak wrote:
>>>> Since my app would be multithreaded, there could be multiple 
>>>> threads accessing the reader, while i'm reloading it.  This means 
>>>> that if I close the reader, and another thread is using it, it 
>>>> might get an exception.
>>>
>>> The normal approach here is open a new reader, start sending new 
>>> searches to the new reader, and only once all existing searches 
>>> (and, possibly, search sessions, if for example you want paginating 
>>> through results to not suddenly change on the user)  are done with 
>>> the old reader do you close the old one.
>>>
>> How exactly would I do something like this?   I'm not sure where to 
>> start.  From what I understand, the reader will be auto closed when 
>> there are no more references to it.  What if I did somehting like this
>>
>> Private IndexReader reader;
>>
>> public IndexReader getReader()
>> {
>>   if (we are reloading)
>>   {
>>      Directory dir = new RAMDirectory (indexName);
>>      reader = IndexReader.open(dir);
>>   }
>>   return reader;
>> }
>> public Results search(String searchTerms)
>> {
>>   IndexReader r=getReader()
>>   //Do search and return results
>> }
>>
>> This should work, right?  The local variable will hold a reference to 
>> a reader that it's using, and once it goes out of use, it should auto 
>> close, correct?  Is closing the reader even necessary?  Won't it just 
>> get collected by the GC once there are no more references to it?
>
> Well you could keep a counter of how many searches are presently using 
> the previous reader, and then the final search to finish with the 
> previous reader would close it?
>
> GC doesn't actually "close" the reader, though since you're using 
> RAMDirectory, you're not actually consuming any file descriptors so I 
> think it might be OK for you to never close and simply replace your 
> reader with the newly reopened one?  Normally this is not recommended, 
> ie, a reader against an FSDirectory uses up precious file descriptors...
>
> Mike
>

What about using something like decref?  Does anyone know the proper way 
to use it?  From the docs:


      decRef

protected void *decRef*()

               throws IOException <http://java.sun.com/j2se/1.4/docs/api/java/io/IOException.html>

Decreases the refCount of this IndexReader instance. If the refCount 
drops to 0, then pending changes are committed to the index and this 
reader is closed.


Russ


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 13 17:27:24 2007
Return-Path: <java-user-return-31479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95961 invoked from network); 13 Dec 2007 17:27:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2007 17:27:22 -0000
Received: (qmail 44270 invoked by uid 500); 13 Dec 2007 17:27:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44203 invoked by uid 500); 13 Dec 2007 17:27:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43749 invoked by uid 99); 13 Dec 2007 17:27:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 09:27:03 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.132.242] (HELO an-out-0708.google.com) (209.85.132.242)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 17:26:41 +0000
Received: by an-out-0708.google.com with SMTP id c5so210887anc.49
        for <java-user@lucene.apache.org>; Thu, 13 Dec 2007 09:26:43 -0800 (PST)
Received: by 10.100.251.5 with SMTP id y5mr4679678anh.12.1197566803658;
        Thu, 13 Dec 2007 09:26:43 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id b45sm6205695hsa.2007.12.13.09.26.43
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 13 Dec 2007 09:26:43 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <47614724.1020004@istandfor.com>
References: <475F1134.6050402@istandfor.com>	 <AC726309-9A26-4DF7-804C-BE3D8E161D0B@mikemccandless.com>	 <475F6F5E.9040103@istandfor.com>	 <00707F08-B155-4066-83D1-65B57BA44136@mikemccandless.com> <359a92830712120633w4b29c892h8229b31ba868697a@mail.gmail.com> <47603B56.3090805@istandfor.com> <414C78C5-8DDB-4372-9D9F-5227DDA93E9D@mikemccandless.com> <47605899.4050204@istandfor.com> <6E4EAA37-7332-4669-9D09-81E1A238779C@mikemccandless.com> <47606439.1040507@istandfor.com> <6DC2F22A-DE1D-4591-8479-D7F5A9AC6262@mikemccandless.com> <47614724.1020004@istandfor.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8D273B32-043D-42A0-A4E3-9D13C64B4CC1@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: Refreshing RAMDirectory
Date: Thu, 13 Dec 2007 12:25:40 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org

Ruslan Sivak wrote:

> Michael McCandless wrote:
>>
>> Ruslan Sivak wrote:
>>
>>> Michael McCandless wrote:
>>>>
>>>> Ruslan Sivak wrote:
>>>>> Since my app would be multithreaded, there could be multiple  
>>>>> threads accessing the reader, while i'm reloading it.  This  
>>>>> means that if I close the reader, and another thread is using  
>>>>> it, it might get an exception.
>>>>
>>>> The normal approach here is open a new reader, start sending new  
>>>> searches to the new reader, and only once all existing searches  
>>>> (and, possibly, search sessions, if for example you want  
>>>> paginating through results to not suddenly change on the user)   
>>>> are done with the old reader do you close the old one.
>>>>
>>> How exactly would I do something like this?   I'm not sure where  
>>> to start.  From what I understand, the reader will be auto closed  
>>> when there are no more references to it.  What if I did somehting  
>>> like this
>>>
>>> Private IndexReader reader;
>>>
>>> public IndexReader getReader()
>>> {
>>>   if (we are reloading)
>>>   {
>>>      Directory dir = new RAMDirectory (indexName);
>>>      reader = IndexReader.open(dir);
>>>   }
>>>   return reader;
>>> }
>>> public Results search(String searchTerms)
>>> {
>>>   IndexReader r=getReader()
>>>   //Do search and return results
>>> }
>>>
>>> This should work, right?  The local variable will hold a  
>>> reference to a reader that it's using, and once it goes out of  
>>> use, it should auto close, correct?  Is closing the reader even  
>>> necessary?  Won't it just get collected by the GC once there are  
>>> no more references to it?
>>
>> Well you could keep a counter of how many searches are presently  
>> using the previous reader, and then the final search to finish  
>> with the previous reader would close it?
>>
>> GC doesn't actually "close" the reader, though since you're using  
>> RAMDirectory, you're not actually consuming any file descriptors  
>> so I think it might be OK for you to never close and simply  
>> replace your reader with the newly reopened one?  Normally this is  
>> not recommended, ie, a reader against an FSDirectory uses up  
>> precious file descriptors...
>>
>> Mike
>>
>
> What about using something like decref?  Does anyone know the  
> proper way to use it?  From the docs:
>
>
>      decRef
>
> protected void *decRef*()
>
>               throws IOException <http://java.sun.com/j2se/1.4/docs/ 
> api/java/io/IOException.html>
>
> Decreases the refCount of this IndexReader instance. If the  
> refCount drops to 0, then pending changes are committed to the  
> index and this reader is closed.


That's a very good question!

Well ... that's a protected method.  I think it would in fact work,
except, it would only handle closing the reader (not the searcher).
Though, IndexSearcher.close() currently does nothing besides closing
the reader; but in theory that may change some day.

You can do the same thing (reference counting) above your searcher and
that would work.

Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 13 17:56:55 2007
Return-Path: <java-user-return-31480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18347 invoked from network); 13 Dec 2007 17:56:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2007 17:56:55 -0000
Received: (qmail 82525 invoked by uid 500); 13 Dec 2007 17:56:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 82486 invoked by uid 500); 13 Dec 2007 17:56:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 82475 invoked by uid 99); 13 Dec 2007 17:56:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 09:56:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [17.148.16.81] (HELO smtpoutm.mac.com) (17.148.16.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 17:56:14 +0000
Received: from mac.com (asmtp002-s [10.150.69.65])
	by smtpoutm.mac.com (Xserve/smtpout018/MantshX 4.0) with ESMTP id lBDHuH5s027741
	for <java-user@lucene.apache.org>; Thu, 13 Dec 2007 09:56:17 -0800 (PST)
Received: from [192.168.1.3] (adsl-84-226-59-26.adslplus.ch [84.226.59.26])
	(authenticated bits=0)
	by mac.com (Xserve/asmtp002/MantshX 4.0) with ESMTP id lBDHu3TD015655
	(version=TLSv1/SSLv3 cipher=AES128-SHA bits=128 verify=NO)
	for <java-user@lucene.apache.org>; Thu, 13 Dec 2007 09:56:15 -0800 (PST)
Message-Id: <CF43AE77-406B-4575-8A09-AD784C536057@mac.com>
From: Petite Abeille <petite_abeille@mac.com>
To: java-user@lucene.apache.org
In-Reply-To: <4760E1BC.10105@cs.put.poznan.pl>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Indexing Wikipedia dumps
Date: Thu, 13 Dec 2007 18:56:02 +0100
References: <547045.76613.qm@web50306.mail.re2.yahoo.com> <80EC5EE9-581A-46F5-B250-344DD164A158@mikemccandless.com> <C44CF8C3-3A5D-46FC-9094-7486874C3392@apache.org> <4760E1BC.10105@cs.put.poznan.pl>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 13, 2007, at 8:39 AM, Dawid Weiss wrote:

> Just incidentally -- do you know of something that would parse the  
> wikipedia markup (to plain text, for example)?

If you find out, let us know :)

You may want to check the partial ANTLR grammar for Wikitext:

http://www.mediawiki.org/wiki/User:Stevage/ANTLR
http://lists.wikimedia.org/pipermail/wikitext-l/2007-December/000117.html

This also might be of interest:

http://www.softlab.ntua.gr/~ttsiod/buildWikipediaOffline.html

"the nice people over at woc.fslab.de have created a standalone wiki- 
markup parser which is ready for use"
http://fslab.de/svn/wpofflineclient/trunk/mediawiki_sa
There is also Text::MediawikiFormat:
http://search.cpan.org/~dprice/Text-MediawikiFormat-0.05/lib/Text/MediawikiFormat.pm
Perhaps you will be better off processing the Wikipedia static HTML  
dump, instead of the XML one:
http://static.wikipedia.org/
Not a piece of cake one way or another :(
Cheers,
PA.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 13 18:28:10 2007
Return-Path: <java-user-return-31481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42972 invoked from network); 13 Dec 2007 18:28:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2007 18:28:10 -0000
Received: (qmail 38582 invoked by uid 500); 13 Dec 2007 18:27:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38551 invoked by uid 500); 13 Dec 2007 18:27:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38540 invoked by uid 99); 13 Dec 2007 18:27:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 10:27:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.8 as permitted sender)
Received: from [80.67.29.8] (HELO smtprelay08.ispgateway.de) (80.67.29.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 18:27:28 +0000
Received: (qmail 16717 invoked from network); 13 Dec 2007 18:27:30 -0000
Received: from unknown (HELO p54bfd74e.dip.t-dialin.net) (695637@[84.191.215.78])
          (envelope-sender <lucenelist2007@danielnaber.de>)
          by smtprelay08.ispgateway.de (qmail-ldap-1.03) with AES256-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 13 Dec 2007 18:27:30 -0000
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: SpellChecker: Spanish Dictionary
Date: Thu, 13 Dec 2007 19:28:16 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <718789d20712130415p4c993a0ey25d73dda445abe87@mail.gmail.com>
In-Reply-To: <718789d20712130415p4c993a0ey25d73dda445abe87@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200712131928.16317@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Donnerstag, 13. Dezember 2007, Haroldo Nascimento wrote:

> =C2=A0 I am using the SpellCheck classes of Lucene for create =C2=A0the "=
Did you
> Mean" feature.
> =C2=A0 I need load into memory all verbets of Spanish language (it wil be=
 my
> dictinary).
>
> =C2=A0 Where I can get (download) this dictionary. Maybe .txt file.

The Lucene spellchecker is supposed to be fed with the terms from your own=
=20
index. This way suggestions will only contains words which actually appear=
=20
in your documents. If you still want to use a dictionary, see=20
http://wiki.services.openoffice.org/wiki/Dictionaries#Spanish_.28Spain.2C_.=
=2E..29

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 13 19:24:11 2007
Return-Path: <java-user-return-31482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71387 invoked from network); 13 Dec 2007 19:24:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2007 19:24:11 -0000
Received: (qmail 39707 invoked by uid 500); 13 Dec 2007 19:23:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39679 invoked by uid 500); 13 Dec 2007 19:23:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39668 invoked by uid 99); 13 Dec 2007 19:23:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 11:23:53 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 19:23:29 +0000
Received: by ug-out-1314.google.com with SMTP id u40so976321ugc.29
        for <java-user@lucene.apache.org>; Thu, 13 Dec 2007 11:23:31 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=RDTSqNTpUN2oTTvegmnCh9RLT9csjs2J5uAB4OoS9bM=;
        b=pLGlW5tRcyDSOmfBC3SAGAhDNfLmvC9F5RNoymPC3MNn2FOKvKsB0IwUaFWwYvtlP4FiwMqoGtzGHz1BkSRUk59qfqtsqDPzyYR8+GAgoVyxQkeX9CIkVA2CSfJm0NNmIXmBVrXgGXUucIzJHFXJoDtrxlFzAuonGRby+4XUXag=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=cVSC/sn5AnH2UsQ3m+7S6ZuXGAuq1u8CIkKYaxWEBq0nlh7Omhj15N4GsI+eRgaSWHnblbbKNeRiocW9rsr8SFa4qHDetjvanpgx2Bx3I60TH38tLfu4Z7YCW7n1bRcAXR9EcZ9anHkuvPsidN9Xmpd57XU6HYfojRX9gu3NitA=
Received: by 10.78.170.6 with SMTP id s6mr2944892hue.62.1197573811096;
        Thu, 13 Dec 2007 11:23:31 -0800 (PST)
Received: by 10.78.179.6 with HTTP; Thu, 13 Dec 2007 11:23:31 -0800 (PST)
Message-ID: <126142c0712131123q6c5a50cdkd12c81a18fa4d778@mail.gmail.com>
Date: Thu, 13 Dec 2007 16:23:31 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Fwd: Oracle-Lucene Domain Index (New Release)
In-Reply-To: <e6537db80712131047n586e34ebl482ee0396ef77d02@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <e6537db80712131047n586e34ebl482ee0396ef77d02@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

FYI.

From: J. Delgado <jdelgado@lendingclub.com>

Once again, LendingClub.com, a social lending network that today
announced nation-wide expansion (see Tech Crunch), is please to
contribute to the open source community a new release (2.2.0.2.0) of
the Oracle-Lucene Domain Index, a fast implementation of text indexing
and search using Lucene within the Oracle relational database. Many
thanks to Marcelo Ochoa, the developer that made it all happen!

Among the goodies you will find in the new release are:

* LuceneDomainIndex.countHits() function to replace select count from
.. where lcontains(..)>0 syntax.
* support inline pagination at lcontains(col,'rownum:[n TO m] AND ...") function
* rounding and padding support for columns date, timestamp, mumber,
float, varchar2 and char
* ODCI API array DML support
* BLOB parameter support
* sort by column passed at
lcontains(col,query_parser_str,sort_str,corr_id) syntax
* Logging support using Java Util Logging package
* JUnit test suites emulating middle tier environment
* Support for rebuild and optimize online for SyncMode:OnLine index
* XMLDB Export which allows inspecting the Lucene index using Luke or
other tools
* AutoTuneMemory parameter for replacing MaxBufferedDocs parameter
* Functional column support

Here are the pointers

Full Documentation:
http://docs.google.com/Doc?docid=ddgw7sjp_54fgj9kg&hl=en

New Binaries
http://sourceforge.net/project/showfiles.php?group_id=56183&package_id=255524

Release Notes:
http://sourceforge.net/project/shownotes.php?release_id=561159&group_id=56183

Cheers!

Joaquin Delgado, PhD
CTO, Lending Club

About Lending Club (TM)
LendingClub.com is an online social lending network where people can
borrow and lend money among themselves based upon their affinities
and/or social connections. Across
all 50 states, members can borrow money at a better interest rate than
they would get from a bank or credit card and invest in a diversified
portfolio of loans with higher rates of
return than those served by savings accounts, CDs or other online
lending services.
LendingMatch (TM) technology helps match lenders and borrowers by
using connections established through social networks, associations
and online communities,
and build diversified portfolios based on lender preferences. Lending
Club is headquartered in Sunnyvale, CA. More information is available
at www.lendingclub.com



-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 13 23:26:07 2007
Return-Path: <java-user-return-31483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26876 invoked from network); 13 Dec 2007 23:26:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2007 23:26:07 -0000
Received: (qmail 42429 invoked by uid 500); 13 Dec 2007 23:25:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42067 invoked by uid 500); 13 Dec 2007 23:25:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42056 invoked by uid 99); 13 Dec 2007 23:25:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 15:25:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [141.76.2.1] (HELO mail.inf.tu-dresden.de) (141.76.2.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 23:25:26 +0000
Received: from localhost (localhost [127.0.0.1])
	by mail.inf.tu-dresden.de (8.13.8/8.13.7) with ESMTP id lBDNPSus022216
	for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 00:25:28 +0100 (CET)
X-Virus-Scanned: amavisd-new at inf.tu-dresden.de
Received: from mail.inf.tu-dresden.de ([127.0.0.1])
	by localhost (mail.inf.tu-dresden.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id NVZPgoLFd7Wf for <java-user@lucene.apache.org>;
	Fri, 14 Dec 2007 00:25:28 +0100 (CET)
Received: from [192.168.1.10] (ANice-252-1-76-202.w83-201.abo.wanadoo.fr [83.201.158.202])
	(authenticated bits=0)
	by mail.inf.tu-dresden.de (8.13.8/8.13.8) with ESMTP id lBDNPPVh022195
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 00:25:26 +0100 (CET)
Message-ID: <4761BF8D.7080808@mail.inf.tu-dresden.de>
Date: Fri, 14 Dec 2007 00:26:05 +0100
From: Tobias Rothe <ir268155@mail.inf.tu-dresden.de>
User-Agent: foobar
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: index and access to lines of a CSV file
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I got a quick question.  I am handling hughe CSV files. They start with 
a key in the first column and are followed by data.
I need to retrieve randomly this data based on the key.  So it is kind 
of a search where I give a unique key and ideally access to the right line.
The file contains about 200.000 lines or more.  I am not sure if Lucene 
can handle things like that and I did not really find a hint on this  
topic.  So I hope to find help here.

Thank you,

Tobias

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 13 23:44:45 2007
Return-Path: <java-user-return-31484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35092 invoked from network); 13 Dec 2007 23:44:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 13 Dec 2007 23:44:45 -0000
Received: (qmail 58189 invoked by uid 500); 13 Dec 2007 23:44:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58161 invoked by uid 500); 13 Dec 2007 23:44:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58150 invoked by uid 99); 13 Dec 2007 23:44:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 15:44:27 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 13 Dec 2007 23:44:05 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1520880wah.11
        for <java-user@lucene.apache.org>; Thu, 13 Dec 2007 15:44:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        bh=T9xe/2gPVeSXz1sFJbiRVuCoyTB3q83Htl2tFo+7WR0=;
        b=q4xX5G1Nrtot0jhGufhIlWFYsXZW0XAa2qFoLqtrbs4mB3lxJTaCAxkFOtuDMm2mvuFNPXFVrfsNO7e7Ed8pMpyrDaWsroDY16SLfaRnHHsV19bCLSsbVyEl8Ml/Lyo0gI1Ag6pRqTckNbVTUI/kF/Edb4gC4XZASfatodong1k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=ih2Y061ORAV27O9xlDaPTizgFCX0ta1U/hsg15BlO9fWPNr1gMiHv7cQHYjae1HL/SBf968oVce9GGuUfuN6EeByImXsfubGhYB/PzdmJGlVVZZgwcyUxb4hE4/KeVsfyHwbSfh/yueF3qZiu87duWFh6r7ZCFDcxLDw+6lHpfY=
Received: by 10.114.173.15 with SMTP id v15mr2945347wae.63.1197589448023;
        Thu, 13 Dec 2007 15:44:08 -0800 (PST)
Received: from ?192.168.1.101? ( [24.82.155.191])
        by mx.google.com with ESMTPS id m26sm10948912pof.2007.12.13.15.44.07
        (version=TLSv1/SSLv3 cipher=OTHER);
        Thu, 13 Dec 2007 15:44:07 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <4761BF8D.7080808@mail.inf.tu-dresden.de>
References: <4761BF8D.7080808@mail.inf.tu-dresden.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AAE92113-E985-4BFD-B775-42369793F6D9@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: index and access to lines of a CSV file
Date: Thu, 13 Dec 2007 15:44:06 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On 13-Dec-07, at 3:26 PM, Tobias Rothe wrote:

> I got a quick question.  I am handling hughe CSV files. They start  
> with a key in the first column and are followed by data.
> I need to retrieve randomly this data based on the key.  So it is  
> kind of a search where I give a unique key and ideally access to  
> the right line.
> The file contains about 200.000 lines or more.  I am not sure if  
> Lucene can handle things like that and I did not really find a hint  
> on this  topic.  So I hope to find help here.

Is that all you're doing?  You could accomplish the above with Lucene  
but it isn't really needed for that.  You need some kind of on-disk  
key->value mapper.  Something like a berkeley db hashtable or btree  
should work (store each line as a key/value pair).

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 14 08:08:45 2007
Return-Path: <java-user-return-31485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10509 invoked from network); 14 Dec 2007 08:08:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2007 08:08:45 -0000
Received: (qmail 95890 invoked by uid 500); 14 Dec 2007 08:08:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95863 invoked by uid 500); 14 Dec 2007 08:08:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95852 invoked by uid 99); 14 Dec 2007 08:08:28 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 00:08:28 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [150.254.30.30] (HELO libra.cs.put.poznan.pl) (150.254.30.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 08:08:27 +0000
Received: from kas30pipe.localhost (unknown [127.0.0.1])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id AE3CCCD
	for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 08:08:05 +0000 (UTC)
X-Virus-Scanned: amavisd-new at cs.put.poznan.pl
Received: from libra.cs.put.poznan.pl ([127.0.0.1])
	by localhost (libra.cs.put.poznan.pl [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id LWeCoKtz0L5y for <java-user@lucene.apache.org>;
	Fri, 14 Dec 2007 09:08:05 +0100 (CET)
Received: from [150.254.130.25] (idss-dw-2.cs.put.poznan.pl [150.254.130.25])
	by libra.cs.put.poznan.pl (Postfix on VMS) with ESMTP id 731609D
	for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 09:08:05 +0100 (CET)
Message-ID: <47623A00.5060704@cs.put.poznan.pl>
Date: Fri, 14 Dec 2007 09:08:32 +0100
From: Dawid Weiss <dawid.weiss@cs.put.poznan.pl>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Indexing Wikipedia dumps
References: <547045.76613.qm@web50306.mail.re2.yahoo.com> <80EC5EE9-581A-46F5-B250-344DD164A158@mikemccandless.com> <C44CF8C3-3A5D-46FC-9094-7486874C3392@apache.org> <4760E1BC.10105@cs.put.poznan.pl> <CF43AE77-406B-4575-8A09-AD784C536057@mac.com>
In-Reply-To: <CF43AE77-406B-4575-8A09-AD784C536057@mac.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-SpamTest-Version: SMTP-Filter Version 3.0.0 [0278], KAS30/Release
X-SpamTest-Info: Not protected
X-Virus-Checked: Checked by ClamAV on apache.org


Good pointers, thanks. I asked because I did have a problem like this a few 
months ago -- none of the existing parsers solved it for me (back then).

D.

Petite Abeille wrote:
> 
> On Dec 13, 2007, at 8:39 AM, Dawid Weiss wrote:
> 
>> Just incidentally -- do you know of something that would parse the 
>> wikipedia markup (to plain text, for example)?
> 
> If you find out, let us know :)
> 
> You may want to check the partial ANTLR grammar for Wikitext:
> 
> http://www.mediawiki.org/wiki/User:Stevage/ANTLR
> http://lists.wikimedia.org/pipermail/wikitext-l/2007-December/000117.html
> 
> This also might be of interest:
> 
> http://www.softlab.ntua.gr/~ttsiod/buildWikipediaOffline.html
> 
> "the nice people over at woc.fslab.de have created a standalone 
> wiki-markup parser which is ready for use"
> http://fslab.de/svn/wpofflineclient/trunk/mediawiki_sa
> There is also Text::MediawikiFormat:
> http://search.cpan.org/~dprice/Text-MediawikiFormat-0.05/lib/Text/MediawikiFormat.pm 
> 
> Perhaps you will be better off processing the Wikipedia static HTML 
> dump, instead of the XML one:
> http://static.wikipedia.org/
> Not a piece of cake one way or another :(
> Cheers,
> PA.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 14 09:23:07 2007
Return-Path: <java-user-return-31486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42516 invoked from network); 14 Dec 2007 09:23:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2007 09:23:07 -0000
Received: (qmail 68233 invoked by uid 500); 14 Dec 2007 09:22:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68200 invoked by uid 500); 14 Dec 2007 09:22:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68189 invoked by uid 99); 14 Dec 2007 09:22:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 01:22:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of m.scott.tiger@gmail.com designates 64.233.178.240 as permitted sender)
Received: from [64.233.178.240] (HELO hs-out-2122.google.com) (64.233.178.240)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 09:22:29 +0000
Received: by hs-out-2122.google.com with SMTP id 54so1031460hsz.5
        for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 01:22:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=9wQVEAFJFgWqhY8TrbemdxJlLuUmWE9r6luBya3CEII=;
        b=Zz9NDbACPyG943RlstkZaEXHfelcn0FCRBMRFpaSWgyykZ8NW6VAvhdSrZA3nkrB5FGTQn5JcKb2lCsT3UCQX6HW6N5sJ3C/6leh5vkAcJ9BiHnRJ53tL3iUzBDl5NzhMLPK/PdCZGSTUfTbappp8BLOczwonnsHPfrcyi/Jvpo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=drzleio7tm3b8ciGLn6rcomsiM42oQnCh3YcBR2G4Osw6K5VjGkfpR0MgTejyKNp+KqdgqACGouUv8Q880cyVKM+RiE+KFnKgumNGgStqvnEd1uRAvgYo4FTDoIM9rN16zo9cB4luKPqzC8GFIQSWpeKhrRjcS1oD6qvsGYmmS4=
Received: by 10.151.9.1 with SMTP id m1mr1037957ybi.12.1197624152306;
        Fri, 14 Dec 2007 01:22:32 -0800 (PST)
Received: by 10.150.230.14 with HTTP; Fri, 14 Dec 2007 01:22:32 -0800 (PST)
Message-ID: <b5db44200712140122j6b5f6ebfs5432f8a41086b55d@mail.gmail.com>
Date: Fri, 14 Dec 2007 18:22:32 +0900
From: "Scott Tiger" <m.scott.tiger@gmail.com>
To: java-user@lucene.apache.org
Subject: bi-gram with wildcard on QueryParser
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

QueryParser ingnores tokenizing when query includes wildcard.

Here is an example using BigramAnalyzer.

Normally.
  query is : abcde
  parsed to : ab bc cd de

When query includes wildcard.
  query is : abcde*
  parsed to : abcde*

But I want below parsed result.
  query is : abcde*
  parsed to : ab bc cd de e*

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 14 09:41:40 2007
Return-Path: <java-user-return-31487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58082 invoked from network); 14 Dec 2007 09:41:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2007 09:41:40 -0000
Received: (qmail 97416 invoked by uid 500); 14 Dec 2007 09:41:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97160 invoked by uid 500); 14 Dec 2007 09:41:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97149 invoked by uid 99); 14 Dec 2007 09:41:23 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 01:41:23 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [134.130.7.73] (HELO mta-2.ms.rz.rwth-aachen.de) (134.130.7.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 09:41:23 +0000
Received: from ironport-out-2.rz.rwth-aachen.de ([134.130.3.59])
 by mta-2.ms.rz.RWTH-Aachen.de
 (Sun Java System Messaging Server 6.2-8.04 (built Feb 28 2007))
 with ESMTP id <0JT100D9Z9KDTIF0@mta-2.ms.rz.RWTH-Aachen.de> for
 java-user@lucene.apache.org; Fri, 14 Dec 2007 10:41:01 +0100 (CET)
Received: from relay.rwth-aachen.de ([134.130.3.1])
 by ironport-in-2.rz.rwth-aachen.de with ESMTP; Fri, 14 Dec 2007 10:41:01 +0100
Received: from numa-i.igpm.rwth-aachen.de
 (numa-i.igpm.RWTH-Aachen.DE [134.130.161.252])
	by relay.rwth-aachen.de (8.13.7/8.13.3/1) with ESMTP id lBE9f17f008455	for
 <java-user@lucene.apache.org>; Fri, 14 Dec 2007 10:41:01 +0100 (MET)
Received: by numa-i.igpm.rwth-aachen.de (Postfix, from userid 230)
	id C5E5910678B; Fri, 14 Dec 2007 10:41:00 +0100 (CET)
Date: Fri, 14 Dec 2007 10:41:00 +0100 (CET)
From: Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
Subject: highlighter with PhraseQuery = limitation?
To: java-user@lucene.apache.org
Reply-to: jarausch@igpm.rwth-aachen.de
Message-id: <tkrat.6e10f4742a2f45bc@igpm.rwth-aachen.de>
MIME-version: 1.0
Content-type: TEXT/PLAIN; CHARSET=us-ascii
Content-transfer-encoding: 7BIT
Content-disposition: INLINE
X-IronPort-AV: E=Sophos;i="4.24,166,1196636400";   d="scan'208";a="24494063"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

When highlighting a phrase query like
"Erik Hatcher"
all instances of "Eric" as well as all instances
of "Hatcher" are highlighted even if they are
not next to each other.

Is this a limitation of highlighting with Lucene?

Many thanks for an explanation,
Helmut.

-- 
Helmut Jarausch

Lehrstuhl fuer Numerische Mathematik
RWTH - Aachen University
D 52056 Aachen, Germany

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 14 10:59:46 2007
Return-Path: <java-user-return-31488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88371 invoked from network); 14 Dec 2007 10:59:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2007 10:59:46 -0000
Received: (qmail 96838 invoked by uid 500); 14 Dec 2007 10:59:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96813 invoked by uid 500); 14 Dec 2007 10:59:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96802 invoked by uid 99); 14 Dec 2007 10:59:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 02:59:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 10:59:29 +0000
Received: from [172.18.249.244] (PC990.sb.statsbiblioteket.dk [172.18.249.244])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JT1009GBD6L0C@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Fri, 14 Dec 2007 11:59:09 +0100 (MET)
Date: Fri, 14 Dec 2007 11:59:09 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Heads-up on SSD
To: java-user@lucene.apache.org
Reply-to: te@statsbiblioteket.dk
Message-id: <1197629949.3515.29.camel@PC990.sb.statsbiblioteket.dk>
Organization: Statsbiblioteket
MIME-version: 1.0
X-Mailer: Evolution 2.8.3 (2.8.3-2.fc6)
Content-type: text/plain
Content-transfer-encoding: 7BIT
X-Virus-Checked: Checked by ClamAV on apache.org

There's an interesting article on state-of-the-art setup with Mtron
Solid State Drives at 
http://www.nextlevelhardware.com/storage/battleship/
The concise version is that Mtron flash drives puts all traditional
harddrives to shame and seems especially well suited for applications
that performs a lot of seeks. No surprise there, but read the article
for some eye-opening numbers.

At The State and University Library in Denmark we've experimented with
two Samsung SSDs vs. two 15.000 RPM traditional harddisks in RAID setup
with our current Lucene index at about 30GB and logged queries from our
users.

For searches we can confirm that the SSDs are substantially faster,
especially when the available amount of RAM for caching relative to the
index size is small. A teaser-graph can be viewed at 
http://wiki.statsbiblioteket.dk/summa/Hardware

Our test should not be seen as authoritative or even even representative
for Lucene on SSDs in general, but it seems clear to us that users of
Lucene-systems ought to look into SSDs if they haven't already done so.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 14 12:38:13 2007
Return-Path: <java-user-return-31489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35388 invoked from network); 14 Dec 2007 12:38:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2007 12:38:13 -0000
Received: (qmail 5330 invoked by uid 500); 14 Dec 2007 12:37:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5251 invoked by uid 500); 14 Dec 2007 12:37:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5188 invoked by uid 99); 14 Dec 2007 12:37:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 04:37:56 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [134.130.7.73] (HELO mta-2.ms.rz.rwth-aachen.de) (134.130.7.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 12:30:43 +0000
Received: from ironport-out-2.rz.rwth-aachen.de ([134.130.3.59])
 by mta-2.ms.rz.RWTH-Aachen.de
 (Sun Java System Messaging Server 6.2-8.04 (built Feb 28 2007))
 with ESMTP id <0JT10091KHE5I510@mta-2.ms.rz.RWTH-Aachen.de> for
 java-user@lucene.apache.org; Fri, 14 Dec 2007 13:30:05 +0100 (CET)
Received: from relay.rwth-aachen.de ([134.130.3.1])
 by ironport-in-2.rz.rwth-aachen.de with ESMTP; Fri, 14 Dec 2007 13:28:20 +0100
Received: from numa-i.igpm.rwth-aachen.de
 (numa-i.igpm.RWTH-Aachen.DE [134.130.161.252])
	by relay.rwth-aachen.de (8.13.7/8.13.3/1) with ESMTP id lBECSJoF009057	for
 <java-user@lucene.apache.org>; Fri, 14 Dec 2007 13:28:19 +0100 (MET)
Received: by numa-i.igpm.rwth-aachen.de (Postfix, from userid 230)
	id 5790C1067C9; Fri, 14 Dec 2007 13:28:19 +0100 (CET)
Date: Fri, 14 Dec 2007 13:28:19 +0100 (CET)
From: Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
Subject: QueryParser: if key contains a colon
To: java-user@lucene.apache.org
Reply-to: jarausch@igpm.rwth-aachen.de
Message-id: <tkrat.b7b85d835477b2d7@igpm.rwth-aachen.de>
MIME-version: 1.0
Content-type: TEXT/PLAIN; CHARSET=us-ascii
Content-transfer-encoding: 7BIT
Content-disposition: INLINE
X-IronPort-AV: E=Sophos;i="4.24,166,1196636400";   d="scan'208";a="24518090"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

how can one search for a key containing a colon when
using QueryParser (with WhitespaceAnalyzer)

E.g.
searching for   'abc:def'

Giving this string to QueryParser's parse
method, abc: will be misinterpreted as the name
of a field. How can this be avoided?
Is there something like an escape technique?

Many thanks for a hint,
Helmut.

-- 
Helmut Jarausch

Lehrstuhl fuer Numerische Mathematik
RWTH - Aachen University
D 52056 Aachen, Germany


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 14 17:06:41 2007
Return-Path: <java-user-return-31490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65250 invoked from network); 14 Dec 2007 17:06:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2007 17:06:41 -0000
Received: (qmail 38339 invoked by uid 500); 14 Dec 2007 17:06:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38314 invoked by uid 500); 14 Dec 2007 17:06:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38303 invoked by uid 99); 14 Dec 2007 17:06:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 09:06:23 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.25 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.25] (HELO smtp-vbr5.xs4all.nl) (194.109.24.25)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 17:06:01 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr5.xs4all.nl (8.13.8/8.13.8) with ESMTP id lBEH62Z4034688
	for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 18:06:02 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <3891399D-C107-48C6-A72E-607A8EEB232C@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: "Field weights"
Date: Fri, 14 Dec 2007 18:06:01 +0100
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

I have an index that contains three sorts of documents:

Car brand
Tire brand
Tire pressure

(Please bear with me, the real index has nothing to do with cars. I  
just try to explain the problem in an alternative domain to avoid NDA  
conflicts.)

There is a heirarchial composite relationship between these sort of  
documents. A document describing "tire pressure" also contains "tire  
brand" and "car brand". A document describing "tire brand" also  
contains information about "car brand". A document describing "car  
brand" contains only that.

The requirement is that the consumer of the API should not have to  
specify what fields they are searching in. There is no time (nor  
training data) to implement a hidden markov model (HMM) tokenizer or  
something along that path in order to extract possible attributes from  
the query string. Instead the query string is tokenized once per field  
and assebled to one huge query. Normally this works fairly well.

Here are some example documents:

Volvo
Volvo, Michelin
Volvo, Nokian
Volvo, Nokian, 2.2 bars
Volvo, Firestone, 2.4 bars

Saab
Saab, Michelin
Saab, Nokian
Saab, Nokian, 2.1 bars
Saab, Firestone
Saab, Firestone, 2.4 bars
Saab, Firestone, 2.5 bars

If I search for Saab the top result will be the document  representing  
the car brand "Saab".  The query would look like this: "car:saab  
tire:saab preasure:saab"

But lets say Saab starts manufacturing tires too:

Saab
Saab, Saab tires
Saab, Saab tires, 1.9 bars
Saab, Saab tires, 1.8 bars

If I search for "Saab" I still want the top result to be Saab the car  
brand. But  it not longer is, the match for "Saab, Saab tires" now  
have a greater score than "Saab", of course.

My idea is to work along the line of indexing "Saab" in the tire brand  
and tire pressure field too. Now searching for Saab will yeild a  
result where the car brand "Saab" is the top result.

However, this will not work as I have different tokenization  
strategies for each field (stemming and what not). Tokenizing the  
query string Saab for the field "tire brand" in Swedish might end up  
as "saa" and will thus not find the token Saab inserted for the  
document describing the car brand Saab.

I have a couple of experiments in my head I need to try out, starting  
with tokezining query strings per field and using the tokens generated  
for the field car brand as query in the tire brand and tire pressure  
too. And vice versus.

Any brilliant ideas that might work? Hacky solutions are OK.


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 14 17:48:39 2007
Return-Path: <java-user-return-31491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79735 invoked from network); 14 Dec 2007 17:48:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2007 17:48:39 -0000
Received: (qmail 88410 invoked by uid 500); 14 Dec 2007 17:48:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88368 invoked by uid 500); 14 Dec 2007 17:48:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88357 invoked by uid 99); 14 Dec 2007 17:48:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 09:48:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chris.lu@gmail.com designates 72.14.214.230 as permitted sender)
Received: from [72.14.214.230] (HELO hu-out-0506.google.com) (72.14.214.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 17:47:57 +0000
Received: by hu-out-0506.google.com with SMTP id 27so546534hub.15
        for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 09:47:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=uRn6pyBYSVm1IWOU6dlKupewoDE0oC53psQivW75n7U=;
        b=a3+16fWENIXMFe1SKMdqzJDzZmKvAejFtHX3JFnZ760pBMSjZP6FPSBAGF9YJWZnjznrpPR45nfjF4ZePSyw6FkAzuURPzTxw1xMnmTBmtm1SCVSVRf81WGqZSFVSa6ESwczzvD7ZbZqCQ4hbd5IjLjupRwnhkl1jOkt4eDf5Ds=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=LaL3+zZp0hi3kOxdbIBsq9eNHVo2L0Uj2FsvYtkIOnJmzGWLkNCk2ByGkXvMYK2mz7jaQ6Bwc33dfTkkxIs3HIhj9R9UzqE+H0IOlb2ufh3VKSXecl7ZH/hWsobN91h0iYGuD6C2BUu8KlohEJQcq6g12VlF3sdfavN4OiiN+5E=
Received: by 10.78.122.16 with SMTP id u16mr228522huc.21.1197654479211;
        Fri, 14 Dec 2007 09:47:59 -0800 (PST)
Received: by 10.78.155.15 with HTTP; Fri, 14 Dec 2007 09:47:59 -0800 (PST)
Message-ID: <6e3ae6310712140947v5f17dbe8q88b4fe0b2e6836ed@mail.gmail.com>
Date: Fri, 14 Dec 2007 09:47:59 -0800
From: "Chris Lu" <chris.lu@gmail.com>
To: java-user@lucene.apache.org, te@statsbiblioteket.dk
Subject: Re: Heads-up on SSD
In-Reply-To: <1197629949.3515.29.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <1197629949.3515.29.camel@PC990.sb.statsbiblioteket.dk>
X-Virus-Checked: Checked by ClamAV on apache.org

Toke, This is fantastic stuff! I always wanted to convince (rich)
customers to try SSD. Now it's more convincing!

I think the results will be more interesting for indexing, which has a
lot of file merges.

-- 
Chris Lu
-------------------------
Instant Scalable Full-Text Search On Any Database/Application
site: http://www.dbsight.net
demo: http://search.dbsight.com
Lucene Database Search in 3 minutes:
http://wiki.dbsight.com/index.php?title=Create_Lucene_Database_Search_in_3_minutes
DBSight customer (remain anonymous per request) got 2.6 Million Euro funding!


On Dec 14, 2007 2:59 AM, Toke Eskildsen <te@statsbiblioteket.dk> wrote:
> There's an interesting article on state-of-the-art setup with Mtron
> Solid State Drives at
> http://www.nextlevelhardware.com/storage/battleship/
> The concise version is that Mtron flash drives puts all traditional
> harddrives to shame and seems especially well suited for applications
> that performs a lot of seeks. No surprise there, but read the article
> for some eye-opening numbers.
>
> At The State and University Library in Denmark we've experimented with
> two Samsung SSDs vs. two 15.000 RPM traditional harddisks in RAID setup
> with our current Lucene index at about 30GB and logged queries from our
> users.
>
> For searches we can confirm that the SSDs are substantially faster,
> especially when the available amount of RAM for caching relative to the
> index size is small. A teaser-graph can be viewed at
> http://wiki.statsbiblioteket.dk/summa/Hardware
>
> Our test should not be seen as authoritative or even even representative
> for Lucene on SSDs in general, but it seems clear to us that users of
> Lucene-systems ought to look into SSDs if they haven't already done so.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 14 18:04:32 2007
Return-Path: <java-user-return-31492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86726 invoked from network); 14 Dec 2007 18:04:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2007 18:04:32 -0000
Received: (qmail 23013 invoked by uid 500); 14 Dec 2007 18:04:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22987 invoked by uid 500); 14 Dec 2007 18:04:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22976 invoked by uid 99); 14 Dec 2007 18:04:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 10:04:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 18:03:52 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr4.xs4all.nl (8.13.8/8.13.8) with ESMTP id lBEI3sh3042865
	for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 19:03:54 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: "Field weights"
Date: Fri, 14 Dec 2007 19:03:55 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <3891399D-C107-48C6-A72E-607A8EEB232C@gmail.com>
In-Reply-To: <3891399D-C107-48C6-A72E-607A8EEB232C@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200712141903.55582.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Karl,

This might work for you:
https://issues.apache.org/jira/browse/LUCENE-293

Regards,
Paul Elschot

On Friday 14 December 2007 18:06:01 Karl Wettin wrote:
> I have an index that contains three sorts of documents:
> 
> Car brand
> Tire brand
> Tire pressure
> 
> (Please bear with me, the real index has nothing to do with cars. I  
> just try to explain the problem in an alternative domain to avoid NDA  
> conflicts.)
> 
> There is a heirarchial composite relationship between these sort of  
> documents. A document describing "tire pressure" also contains "tire  
> brand" and "car brand". A document describing "tire brand" also  
> contains information about "car brand". A document describing "car  
> brand" contains only that.
> 
> The requirement is that the consumer of the API should not have to  
> specify what fields they are searching in. There is no time (nor  
> training data) to implement a hidden markov model (HMM) tokenizer or  
> something along that path in order to extract possible attributes from  
> the query string. Instead the query string is tokenized once per field  
> and assebled to one huge query. Normally this works fairly well.
> 
> Here are some example documents:
> 
> Volvo
> Volvo, Michelin
> Volvo, Nokian
> Volvo, Nokian, 2.2 bars
> Volvo, Firestone, 2.4 bars
> 
> Saab
> Saab, Michelin
> Saab, Nokian
> Saab, Nokian, 2.1 bars
> Saab, Firestone
> Saab, Firestone, 2.4 bars
> Saab, Firestone, 2.5 bars
> 
> If I search for Saab the top result will be the document  representing  
> the car brand "Saab".  The query would look like this: "car:saab  
> tire:saab preasure:saab"
> 
> But lets say Saab starts manufacturing tires too:
> 
> Saab
> Saab, Saab tires
> Saab, Saab tires, 1.9 bars
> Saab, Saab tires, 1.8 bars
> 
> If I search for "Saab" I still want the top result to be Saab the car  
> brand. But  it not longer is, the match for "Saab, Saab tires" now  
> have a greater score than "Saab", of course.
> 
> My idea is to work along the line of indexing "Saab" in the tire brand  
> and tire pressure field too. Now searching for Saab will yeild a  
> result where the car brand "Saab" is the top result.
> 
> However, this will not work as I have different tokenization  
> strategies for each field (stemming and what not). Tokenizing the  
> query string Saab for the field "tire brand" in Swedish might end up  
> as "saa" and will thus not find the token Saab inserted for the  
> document describing the car brand Saab.
> 
> I have a couple of experiments in my head I need to try out, starting  
> with tokezining query strings per field and using the tokens generated  
> for the field car brand as query in the tire brand and tire pressure  
> too. And vice versus.
> 
> Any brilliant ideas that might work? Hacky solutions are OK.
> 
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 14 18:17:20 2007
Return-Path: <java-user-return-31493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91569 invoked from network); 14 Dec 2007 18:17:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2007 18:17:20 -0000
Received: (qmail 45644 invoked by uid 500); 14 Dec 2007 18:17:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45616 invoked by uid 500); 14 Dec 2007 18:17:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45605 invoked by uid 99); 14 Dec 2007 18:17:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 10:17:02 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 18:16:41 +0000
Received: by mu-out-0910.google.com with SMTP id i10so1738873mue.5
        for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 10:16:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=4kOHwzfYaagRK/XxgSAtho0NFffMFCBffz2n1JnOND0=;
        b=Ly+P2SRvYNRVFdxvtBhMJhNc1o/LER9XkcvbffPcnK8L2/ndw/+NhIJTKNRnKoCAyg531E34yXnruNa/kPkbTXKrqf5ckP2nzmY0lXXTpz/CauzmhDvP4shAffEU9BYg+XSDjeL2cO+wJDrtcXLTjlaWMdDdOKqapxlfPjTwKrs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aRTFpg1E1DjkHxcaSaMEFG3oO9zSagNEtCIdS0BSFmTYDp7sZBVrS/cQ6teYIopm4Q8tOJ9gMr+fpS85XFDojtcCkfTTE1KZ5IXyZWZrNwZ1707H3DJnEr6ZxEiBBiM2yx+IZGGoeOWx3/P5ogzBuMVkDrEtLiwwAUiMj4nifkk=
Received: by 10.82.123.16 with SMTP id v16mr9463354buc.18.1197656200422;
        Fri, 14 Dec 2007 10:16:40 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Fri, 14 Dec 2007 10:16:40 -0800 (PST)
Message-ID: <359a92830712141016o4ded84d8hf49115dc82687f4@mail.gmail.com>
Date: Fri, 14 Dec 2007 13:16:40 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, jarausch@igpm.rwth-aachen.de
Subject: Re: QueryParser: if key contains a colon
In-Reply-To: <tkrat.b7b85d835477b2d7@igpm.rwth-aachen.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1823_28654097.1197656200421"
References: <tkrat.b7b85d835477b2d7@igpm.rwth-aachen.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1823_28654097.1197656200421
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This should help

http://lucene.apache.org/java/docs/queryparsersyntax.html

Erick

On Dec 14, 2007 7:28 AM, Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
wrote:

> Hi,
>
> how can one search for a key containing a colon when
> using QueryParser (with WhitespaceAnalyzer)
>
> E.g.
> searching for   'abc:def'
>
> Giving this string to QueryParser's parse
> method, abc: will be misinterpreted as the name
> of a field. How can this be avoided?
> Is there something like an escape technique?
>
> Many thanks for a hint,
> Helmut.
>
> --
> Helmut Jarausch
>
> Lehrstuhl fuer Numerische Mathematik
> RWTH - Aachen University
> D 52056 Aachen, Germany
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1823_28654097.1197656200421--

From java-user-return-31494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 14 18:19:16 2007
Return-Path: <java-user-return-31494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98270 invoked from network); 14 Dec 2007 18:19:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2007 18:19:16 -0000
Received: (qmail 48145 invoked by uid 500); 14 Dec 2007 18:18:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48122 invoked by uid 500); 14 Dec 2007 18:18:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48111 invoked by uid 99); 14 Dec 2007 18:18:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 10:18:58 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 64.233.182.184 as permitted sender)
Received: from [64.233.182.184] (HELO nf-out-0910.google.com) (64.233.182.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 18:18:35 +0000
Received: by nf-out-0910.google.com with SMTP id d3so1043792nfc.15
        for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 10:18:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=8+l2/8ukCJ5A4xTcH4uY6NHdbN7w+5Sb1B7wmdES1HQ=;
        b=QkhnxKCRx/5/rmv9tcl+unSepYGtGnGSbD1zrdeL5u5cOtekhvEvufKNTCuMHQMnoxw8H4c4BN1J8bdCCaN7AQ+cvw5NK2M5KmOT8lHZeziZ2Kj6FgYl/fQhwUSUgHlVxmBDdUgGXNijpB0Ln+NWLd6TITy7TAGWwrEh9BFY500=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=rkXHUnteX5GVElUVoS3X+ixEG9UEEh2lhVcu0WSabzjSGenw2ztUy5Y8UIX5K2/ish/psp/Kv+yKnT74KBTIS3d2ke0vDyvNk78RrpSZG//iEFSedyAj4YyI5q590fe7HUYk5gh0ynh4CpL87eZAQHDkwWkEI30k/8HnW3xD540=
Received: by 10.82.149.8 with SMTP id w8mr9625587bud.24.1197656315471;
        Fri, 14 Dec 2007 10:18:35 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Fri, 14 Dec 2007 10:18:35 -0800 (PST)
Message-ID: <359a92830712141018y42af0c58ofbaca5cfffda05b9@mail.gmail.com>
Date: Fri, 14 Dec 2007 13:18:35 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org, te@statsbiblioteket.dk
Subject: Re: Heads-up on SSD
In-Reply-To: <1197629949.3515.29.camel@PC990.sb.statsbiblioteket.dk>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1836_31028050.1197656315467"
References: <1197629949.3515.29.camel@PC990.sb.statsbiblioteket.dk>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1836_31028050.1197656315467
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is great stuff, thanks for posting it.

Erick

On Dec 14, 2007 5:59 AM, Toke Eskildsen <te@statsbiblioteket.dk> wrote:

> There's an interesting article on state-of-the-art setup with Mtron
> Solid State Drives at
> http://www.nextlevelhardware.com/storage/battleship/
> The concise version is that Mtron flash drives puts all traditional
> harddrives to shame and seems especially well suited for applications
> that performs a lot of seeks. No surprise there, but read the article
> for some eye-opening numbers.
>
> At The State and University Library in Denmark we've experimented with
> two Samsung SSDs vs. two 15.000 RPM traditional harddisks in RAID setup
> with our current Lucene index at about 30GB and logged queries from our
> users.
>
> For searches we can confirm that the SSDs are substantially faster,
> especially when the available amount of RAM for caching relative to the
> index size is small. A teaser-graph can be viewed at
> http://wiki.statsbiblioteket.dk/summa/Hardware
>
> Our test should not be seen as authoritative or even even representative
> for Lucene on SSDs in general, but it seems clear to us that users of
> Lucene-systems ought to look into SSDs if they haven't already done so.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1836_31028050.1197656315467--

From java-user-return-31495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 14 18:25:10 2007
Return-Path: <java-user-return-31495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 793 invoked from network); 14 Dec 2007 18:25:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2007 18:25:08 -0000
Received: (qmail 57359 invoked by uid 500); 14 Dec 2007 18:24:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57344 invoked by uid 500); 14 Dec 2007 18:24:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56866 invoked by uid 99); 14 Dec 2007 18:24:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 10:24:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of cdoronc@gmail.com designates 64.233.182.189 as permitted sender)
Received: from [64.233.182.189] (HELO nf-out-0910.google.com) (64.233.182.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 18:24:32 +0000
Received: by nf-out-0910.google.com with SMTP id d3so1045352nfc.15
        for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 10:24:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=xilfaREf/TGV7E6es8J4K+ewHH2Ct9VzGxVgI8TeZWk=;
        b=clLJCE22VUPt/h6RAnVTgDU5D6TmDBkzpOdEpCkvcxPi/fa847+NKGJ4tbcCSDvd5GN/SnTJ/pfCQFXw1UMlivlSgwSQ3j2F4vdJ6uQDC8b3j78iIiSSEtNkHQ54qNe2gD/S6cuJZkrbkIhNtGNyegvP1yrr44ui55O3DHs2nbE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=IJjR+b9QOzL11SZxb9cRVQ81ptSLmGDJq10wbj/8LCko9iXD5geGPmLZIXaXJe104fjWeajjsx7UmtjYFlx+CxVIlI0ZArnsrXNhPIcZE9BHgFF8YIDzok9tlfn80p1Xby3+VemaCb20th8y9BR9y9+mE/1/yRvrA4Feq3GuZok=
Received: by 10.86.89.4 with SMTP id m4mr3282144fgb.45.1197656664788;
        Fri, 14 Dec 2007 10:24:24 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Fri, 14 Dec 2007 10:24:24 -0800 (PST)
Message-ID: <e05f0fd10712141024t41fb5504na15a1988a5f38a8e@mail.gmail.com>
Date: Fri, 14 Dec 2007 20:24:24 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: "Field weights"
In-Reply-To: <200712141903.55582.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1241_21765421.1197656664774"
References: <3891399D-C107-48C6-A72E-607A8EEB232C@gmail.com>
	 <200712141903.55582.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1241_21765421.1197656664774
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It seems that documents having less fields satisfying
the query worth more than those satisfying more fields
of the query, because the first ones are more "to
the point".

At least it seems like it in the example.

If this makes sense I would try to compose a top level
boolean query out of the one-field queries, and make it use
a similarity that implements this strange logic of coord.
(Strange, because usually coord punishes for under
matching, while here you want to reward for just that.)

A tricky part would be to make the sub-queries use
the "regular" coord logic, but first let's see if this is
a valid direction at all.

Doron

On Dec 14, 2007 8:03 PM, Paul Elschot <paul.elschot@xs4all.nl> wrote:

> Karl,
>
> This might work for you:
> https://issues.apache.org/jira/browse/LUCENE-293
>
> Regards,
> Paul Elschot
>
> On Friday 14 December 2007 18:06:01 Karl Wettin wrote:
> > I have an index that contains three sorts of documents:
> >
> > Car brand
> > Tire brand
> > Tire pressure
> >
> > (Please bear with me, the real index has nothing to do with cars. I
> > just try to explain the problem in an alternative domain to avoid NDA
> > conflicts.)
> >
> > There is a heirarchial composite relationship between these sort of
> > documents. A document describing "tire pressure" also contains "tire
> > brand" and "car brand". A document describing "tire brand" also
> > contains information about "car brand". A document describing "car
> > brand" contains only that.
> >
> > The requirement is that the consumer of the API should not have to
> > specify what fields they are searching in. There is no time (nor
> > training data) to implement a hidden markov model (HMM) tokenizer or
> > something along that path in order to extract possible attributes from
> > the query string. Instead the query string is tokenized once per field
> > and assebled to one huge query. Normally this works fairly well.
> >
> > Here are some example documents:
> >
> > Volvo
> > Volvo, Michelin
> > Volvo, Nokian
> > Volvo, Nokian, 2.2 bars
> > Volvo, Firestone, 2.4 bars
> >
> > Saab
> > Saab, Michelin
> > Saab, Nokian
> > Saab, Nokian, 2.1 bars
> > Saab, Firestone
> > Saab, Firestone, 2.4 bars
> > Saab, Firestone, 2.5 bars
> >
> > If I search for Saab the top result will be the document  representing
> > the car brand "Saab".  The query would look like this: "car:saab
> > tire:saab preasure:saab"
> >
> > But lets say Saab starts manufacturing tires too:
> >
> > Saab
> > Saab, Saab tires
> > Saab, Saab tires, 1.9 bars
> > Saab, Saab tires, 1.8 bars
> >
> > If I search for "Saab" I still want the top result to be Saab the car
> > brand. But  it not longer is, the match for "Saab, Saab tires" now
> > have a greater score than "Saab", of course.
> >
> > My idea is to work along the line of indexing "Saab" in the tire brand
> > and tire pressure field too. Now searching for Saab will yeild a
> > result where the car brand "Saab" is the top result.
> >
> > However, this will not work as I have different tokenization
> > strategies for each field (stemming and what not). Tokenizing the
> > query string Saab for the field "tire brand" in Swedish might end up
> > as "saa" and will thus not find the token Saab inserted for the
> > document describing the car brand Saab.
> >
> > I have a couple of experiments in my head I need to try out, starting
> > with tokezining query strings per field and using the tokens generated
> > for the field car brand as query in the tire brand and tire pressure
> > too. And vice versus.
> >
> > Any brilliant ideas that might work? Hacky solutions are OK.
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_1241_21765421.1197656664774--

From java-user-return-31496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 14 18:59:00 2007
Return-Path: <java-user-return-31496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18575 invoked from network); 14 Dec 2007 18:59:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2007 18:59:00 -0000
Received: (qmail 1686 invoked by uid 500); 14 Dec 2007 18:58:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1656 invoked by uid 500); 14 Dec 2007 18:58:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1645 invoked by uid 99); 14 Dec 2007 18:58:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 10:58:42 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 72.14.202.181 as permitted sender)
Received: from [72.14.202.181] (HELO ro-out-1112.google.com) (72.14.202.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 18:58:21 +0000
Received: by ro-out-1112.google.com with SMTP id m6so1715572roe.7
        for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 10:58:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=/5v9+xxzFlNWsMAEG9wlgPVWpKsv8M96VeEtMZN6CVc=;
        b=IwM0IPQCVhMvY4RAFeotJ5EG9eZa4xUhiVGtt7HlUbNNSKJb/toJOS7UcChP8D40bzU0KJ0oDqU5N68NW/FVq97PZhYKdovIEkQjoy15/OrmjqOB073XM24bJg0SqG2J+DQYT/wC3trv3su1dH8f7fmqlZ1N8b3zbdcrfTb5Mys=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lJ2p9TG2vW13W/+u7UssNFEK+ZZd5TW/pYefQueTYmGG8FIi1KQk+6qdKefZiL9QfAFHxNkjTernqEnQO9LDyMYpwqdreTaSuaxAXSRfEzSlGYMdxpdSX8LZ3P5/JSvsAjB82WFbiH9ntXFtdrSvlq1Hp0a7uR3kPp71n2GmdaI=
Received: by 10.140.82.2 with SMTP id f2mr2122898rvb.25.1197658701508;
        Fri, 14 Dec 2007 10:58:21 -0800 (PST)
Received: by 10.141.70.4 with HTTP; Fri, 14 Dec 2007 10:58:21 -0800 (PST)
Message-ID: <786fde50712141058j719f6a97l79b8ad5c3245d8bb@mail.gmail.com>
Date: Fri, 14 Dec 2007 20:58:21 +0200
From: "Shai Erera" <serera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: "Field weights"
In-Reply-To: <e05f0fd10712141024t41fb5504na15a1988a5f38a8e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1076_4851821.1197658701477"
References: <3891399D-C107-48C6-A72E-607A8EEB232C@gmail.com>
	 <200712141903.55582.paul.elschot@xs4all.nl>
	 <e05f0fd10712141024t41fb5504na15a1988a5f38a8e@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1076_4851821.1197658701477
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

What about boosting documents of the Brand type? You can statically boost
those documents with a log() function or something similar ...

On Dec 14, 2007 8:24 PM, Doron Cohen <cdoronc@gmail.com> wrote:

> It seems that documents having less fields satisfying
> the query worth more than those satisfying more fields
> of the query, because the first ones are more "to
> the point".
>
> At least it seems like it in the example.
>
> If this makes sense I would try to compose a top level
> boolean query out of the one-field queries, and make it use
> a similarity that implements this strange logic of coord.
> (Strange, because usually coord punishes for under
> matching, while here you want to reward for just that.)
>
> A tricky part would be to make the sub-queries use
> the "regular" coord logic, but first let's see if this is
> a valid direction at all.
>
> Doron
>
> On Dec 14, 2007 8:03 PM, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
> > Karl,
> >
> > This might work for you:
> > https://issues.apache.org/jira/browse/LUCENE-293
> >
> > Regards,
> > Paul Elschot
> >
> > On Friday 14 December 2007 18:06:01 Karl Wettin wrote:
> > > I have an index that contains three sorts of documents:
> > >
> > > Car brand
> > > Tire brand
> > > Tire pressure
> > >
> > > (Please bear with me, the real index has nothing to do with cars. I
> > > just try to explain the problem in an alternative domain to avoid NDA
> > > conflicts.)
> > >
> > > There is a heirarchial composite relationship between these sort of
> > > documents. A document describing "tire pressure" also contains "tire
> > > brand" and "car brand". A document describing "tire brand" also
> > > contains information about "car brand". A document describing "car
> > > brand" contains only that.
> > >
> > > The requirement is that the consumer of the API should not have to
> > > specify what fields they are searching in. There is no time (nor
> > > training data) to implement a hidden markov model (HMM) tokenizer or
> > > something along that path in order to extract possible attributes from
> > > the query string. Instead the query string is tokenized once per field
> > > and assebled to one huge query. Normally this works fairly well.
> > >
> > > Here are some example documents:
> > >
> > > Volvo
> > > Volvo, Michelin
> > > Volvo, Nokian
> > > Volvo, Nokian, 2.2 bars
> > > Volvo, Firestone, 2.4 bars
> > >
> > > Saab
> > > Saab, Michelin
> > > Saab, Nokian
> > > Saab, Nokian, 2.1 bars
> > > Saab, Firestone
> > > Saab, Firestone, 2.4 bars
> > > Saab, Firestone, 2.5 bars
> > >
> > > If I search for Saab the top result will be the document  representing
> > > the car brand "Saab".  The query would look like this: "car:saab
> > > tire:saab preasure:saab"
> > >
> > > But lets say Saab starts manufacturing tires too:
> > >
> > > Saab
> > > Saab, Saab tires
> > > Saab, Saab tires, 1.9 bars
> > > Saab, Saab tires, 1.8 bars
> > >
> > > If I search for "Saab" I still want the top result to be Saab the car
> > > brand. But  it not longer is, the match for "Saab, Saab tires" now
> > > have a greater score than "Saab", of course.
> > >
> > > My idea is to work along the line of indexing "Saab" in the tire brand
> > > and tire pressure field too. Now searching for Saab will yeild a
> > > result where the car brand "Saab" is the top result.
> > >
> > > However, this will not work as I have different tokenization
> > > strategies for each field (stemming and what not). Tokenizing the
> > > query string Saab for the field "tire brand" in Swedish might end up
> > > as "saa" and will thus not find the token Saab inserted for the
> > > document describing the car brand Saab.
> > >
> > > I have a couple of experiments in my head I need to try out, starting
> > > with tokezining query strings per field and using the tokens generated
> > > for the field car brand as query in the tire brand and tire pressure
> > > too. And vice versus.
> > >
> > > Any brilliant ideas that might work? Hacky solutions are OK.
> > >
> > >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>



-- 
Regards,

Shai Erera

------=_Part_1076_4851821.1197658701477--

From java-user-return-31497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 14 23:01:17 2007
Return-Path: <java-user-return-31497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7101 invoked from network); 14 Dec 2007 23:01:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2007 23:01:17 -0000
Received: (qmail 66544 invoked by uid 500); 14 Dec 2007 23:00:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66514 invoked by uid 500); 14 Dec 2007 23:00:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66503 invoked by uid 99); 14 Dec 2007 23:00:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 15:00:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 23:00:49 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 64AF571C0CE; Fri, 14 Dec 2007 15:00:40 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 50D1571C0C4
	for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 15:00:40 -0800 (PST)
Date: Fri, 14 Dec 2007 15:00:40 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Custom SynonymMap
In-Reply-To: <14201041.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0712141458260.541@radix.cryptio.net>
References: <14201041.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: Is there a way to add synonyms to the SynonymMap map?
: The HashMap that holds all the words is not visible (private) so extending
: it will not work. 
: 
: Has anyone added their own custom vocabulary?

I assume your question is in regards tothe SynonymMap that is part of the 
memory index contrib?  I'm not too familiar with it but i believe it is 
specificly designed for Dealing with WordNet ... if you want to bulk load 
your own synonyms just make sure they are in the file format expected (ie: 
match  the WordNet format)

(I think the reason it doesn't allow you to modify the synomyms once it is 
constructed is to ensure that it is thread safe ... i'm just guessing 
based on the documentation though)



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 14 23:27:31 2007
Return-Path: <java-user-return-31498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15163 invoked from network); 14 Dec 2007 23:27:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2007 23:27:31 -0000
Received: (qmail 87405 invoked by uid 500); 14 Dec 2007 23:27:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87379 invoked by uid 500); 14 Dec 2007 23:27:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87368 invoked by uid 99); 14 Dec 2007 23:27:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 15:27:14 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 23:26:53 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id A151071C272; Fri, 14 Dec 2007 15:26:56 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 9DA7871C26D
	for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 15:26:56 -0800 (PST)
Date: Fri, 14 Dec 2007 15:26:56 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: (~) opertor query....
In-Reply-To: <9312093579B72048B1E5659DC3EC7F39022E9330@hstmsg005.corp.satyam.ad>
Message-ID: <Pine.LNX.4.62.0712141523570.541@radix.cryptio.net>
References: <9312093579B72048B1E5659DC3EC7F39022E9330@hstmsg005.corp.satyam.ad>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


:           I am parsing this query:  "Auto*  machine"~4.
: 
:           Will it work? If yes then right now it's not working. Can
: anyone help on this?

Tt depends, what do you want it to do?  :)

If you are hoping it will match documents that contain a word that starts 
with "Auto" withing a distance of 4 words from the word "machine" then no, 
the query parser doesn't work that way.  phrase queries (aka: proximty 
queries) as supported by the QueryParser can only match simple words in 
the phrase, not other complex query types ... but you could build your own 
query parser that leveraged the SpanQuery family of queries to do 
something like this.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 14 23:40:51 2007
Return-Path: <java-user-return-31499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18412 invoked from network); 14 Dec 2007 23:40:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 14 Dec 2007 23:40:51 -0000
Received: (qmail 3735 invoked by uid 500); 14 Dec 2007 23:40:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3701 invoked by uid 500); 14 Dec 2007 23:40:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3682 invoked by uid 99); 14 Dec 2007 23:40:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 15:40:34 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 23:40:13 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id EAC9F71C0AA; Fri, 14 Dec 2007 15:40:16 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id E4FB971C074
	for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 15:40:16 -0800 (PST)
Date: Fri, 14 Dec 2007 15:40:16 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: Basic Named Entity Indexing
In-Reply-To: <14291880.post@talk.nabble.com>
Message-ID: <Pine.LNX.4.62.0712141529270.541@radix.cryptio.net>
References: <14291880.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: a) index the documents by wrapping the whitespace analyzer with
: ngramanalyzerwrapper and then retrieving only the words which have 3 or more
: characters and start with a capital, filtering the "garbage" manually.
: b) creating my own analyzer which will only index ngrams that start with
: capital letters and then retrieving the indexed words.

: how would i go about creating my own analyzer? (i've read lucene in action
: and it wasn't much help :s)

Start by writing yourself a "NamedEntityTokenFilter" ... look at the 
StopFilter to give yourself an idea what it should look like ... whenever 
someone calls "next()" on your filter, keep calling "next() on whatever 
TokenStream you've got, untill you get something you consider a "named 
entity" and then return it.

An Analyzer is any class which takes in an InputStream and outputs Tokens 
... typically they are really really simple and just delegate the hard 
work to a Tokenizer and 0 or more TokenFilters ... if you look at the 
source code for the "tokenStream" method of most analyzers in Lucene 
you'll see it can be really easy to write one by reusing an existing 
Tokenizer (it sounds like you want to tokenize on whitespace) and your new 
TokenFilter.




-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 15 04:40:54 2007
Return-Path: <java-user-return-31500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78462 invoked from network); 15 Dec 2007 04:40:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2007 04:40:54 -0000
Received: (qmail 43878 invoked by uid 500); 15 Dec 2007 04:40:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43852 invoked by uid 500); 15 Dec 2007 04:40:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 70636 invoked by uid 99); 14 Dec 2007 10:43:42 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
X-Virus-Scanned: amavisd-new at inf.tu-dresden.de
Message-ID: <19859.83.145.93.226.1197628999.squirrel@mail.inf.tu-dresden.de>
In-Reply-To: <AAE92113-E985-4BFD-B775-42369793F6D9@gmail.com>
References: <4761BF8D.7080808@mail.inf.tu-dresden.de>
    <AAE92113-E985-4BFD-B775-42369793F6D9@gmail.com>
Date: Fri, 14 Dec 2007 11:43:19 +0100 (CET)
Subject: Re: index and access to lines of a CSV file
From: "Ingolf Tobias Rothe" <ir268155@inf.tu-dresden.de>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.10a
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Hello Mike,

thank you for the answer.  Currently I hold this datastructure in a
HashTable in Memory but the ressource consumtion is very high.
Lucene looks easy in the way of usage and is suposed to be extremely
perfomant.  I though also to use later the abilities to lucene to attach
parameters to search results so I do not neccessarily need to process the
record.

I checked berkley db but it is not free for comercial use. What would be a
implementation for btree?

Thank you,

Tobias


> On 13-Dec-07, at 3:26 PM, Tobias Rothe wrote:
>
>> I got a quick question.  I am handling hughe CSV files. They start
>> with a key in the first column and are followed by data.
>> I need to retrieve randomly this data based on the key.  So it is
>> kind of a search where I give a unique key and ideally access to
>> the right line.
>> The file contains about 200.000 lines or more.  I am not sure if
>> Lucene can handle things like that and I did not really find a hint
>> on this  topic.  So I hope to find help here.
>
> Is that all you're doing?  You could accomplish the above with Lucene
> but it isn't really needed for that.  You need some kind of on-disk
> key->value mapper.  Something like a berkeley db hashtable or btree
> should work (store each line as a key/value pair).
>
> -Mike
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 15 05:04:44 2007
Return-Path: <java-user-return-31501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88276 invoked from network); 15 Dec 2007 05:04:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2007 05:04:44 -0000
Received: (qmail 49374 invoked by uid 500); 15 Dec 2007 05:04:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49343 invoked by uid 500); 15 Dec 2007 05:04:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49328 invoked by uid 99); 15 Dec 2007 05:04:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 21:04:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 72.14.202.177 as permitted sender)
Received: from [72.14.202.177] (HELO ro-out-1112.google.com) (72.14.202.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Dec 2007 05:04:05 +0000
Received: by ro-out-1112.google.com with SMTP id m6so1887940roe.7
        for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 21:04:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=NMf1cflAu4DQf1VrssSZnFASh8Ilza4MX0zqGJz7ZBk=;
        b=hkHSNvoQW+0Sa1Dt8bFgBG2Q5Mzl3F1J4FPPoSxPVAuoAKbenXpMh8b0eoOukjWjuoxbFZP6p0Gw1LkjVn/nqUxdUrZ7Z9DTLPMB8OUTnq6oPme8y+aTpT0FW7/4vIpUNV0BQB/Holn/0xihP3FVnM6H0pw3Hv2WAFKXBY4ZZYs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=hDZRaE+mCgUcDRvbLQe13FkVtUOfh/9xwiYfEIDOcPKm6alZXZXfS70tjFBfFdps+qPdfCj2aiqW7HJkNywav7WHY+rPboWvzy+O/OKYuw0nVqr/Tj4KI7h5QhvgEY0L+dsl5UNKXmQRkeT2h1t1IEAycgpY2WGXRWT6+Okne7k=
Received: by 10.141.113.6 with SMTP id q6mr2483283rvm.135.1197695047934;
        Fri, 14 Dec 2007 21:04:07 -0800 (PST)
Received: by 10.141.70.4 with HTTP; Fri, 14 Dec 2007 21:04:07 -0800 (PST)
Message-ID: <786fde50712142104k1ffd033bnd02a742134a09df@mail.gmail.com>
Date: Sat, 15 Dec 2007 07:04:07 +0200
From: "Shai Erera" <serera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: (~) opertor query....
In-Reply-To: <Pine.LNX.4.62.0712141523570.541@radix.cryptio.net>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1628_10959728.1197695047940"
References: <9312093579B72048B1E5659DC3EC7F39022E9330@hstmsg005.corp.satyam.ad>
	 <Pine.LNX.4.62.0712141523570.541@radix.cryptio.net>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1628_10959728.1197695047940
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can look at org.apache.lucene.search.MultiPhraseQuery which does
something similar to what you ask. From its javadoc:

 * To use this class, to search for the phrase "Microsoft app*" first use
 * add(Term) on the term "Microsoft", then find all terms that have "app" as
 * prefix using IndexReader.terms(Term), and use MultiPhraseQuery.add(Term[]
 * terms) to add them to the query.

It works for simple phrases and I don't know if it works for fuzzy phrases
as well ... however I believe it can be tweaked to work for fuzzy phrases
also.

On Dec 15, 2007 1:26 AM, Chris Hostetter <hossman_lucene@fucit.org> wrote:

>
> :           I am parsing this query:  "Auto*  machine"~4.
> :
> :           Will it work? If yes then right now it's not working. Can
> : anyone help on this?
>
> Tt depends, what do you want it to do?  :)
>
> If you are hoping it will match documents that contain a word that starts
> with "Auto" withing a distance of 4 words from the word "machine" then no,
> the query parser doesn't work that way.  phrase queries (aka: proximty
> queries) as supported by the QueryParser can only match simple words in
> the phrase, not other complex query types ... but you could build your own
> query parser that leveraged the SpanQuery family of queries to do
> something like this.
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,

Shai Erera

------=_Part_1628_10959728.1197695047940--

From java-user-return-31502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 15 05:08:04 2007
Return-Path: <java-user-return-31502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89333 invoked from network); 15 Dec 2007 05:08:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2007 05:08:04 -0000
Received: (qmail 52857 invoked by uid 500); 15 Dec 2007 05:07:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52667 invoked by uid 500); 15 Dec 2007 05:07:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52655 invoked by uid 99); 15 Dec 2007 05:07:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 21:07:47 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 72.14.204.233 as permitted sender)
Received: from [72.14.204.233] (HELO qb-out-0506.google.com) (72.14.204.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Dec 2007 05:07:26 +0000
Received: by qb-out-0506.google.com with SMTP id o21so321055qba.9
        for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 21:07:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=5jQZDQTdfn24J1Yx3/FTtc5xtiGCb9a3X53IcCGYT5w=;
        b=FGtoiKwYUIVEHnvOUOWQUE+Yz0C4XzPy+d5D9bkUf+5McRlF2/D7qGIA8Z8TsajDezFRN6jtV5ktc+gFgpq7yEH/LzqrSH6snX872/HGo7qWc+pO45IcVJ13gv7E4f7A6uDvEIKo3g/arDKyppG8XDQotJS6VEtIb+4JEU5siFg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dqFGvrJA7Ie0xybkkEh+ErzBxEBcHP6e60l8jmMBR18MiM1doRemX8skIE/ZNOofUB1VTygyKq93Bisqw8fJYY6q7DDZNZgF3vIoBtiuq5ZqqzVFe7MEkT7+vqTxEI3IHaZTvnMeHsqlOWxF4trdpHNl48/Jx1Y1w7/f5HVi7/w=
Received: by 10.140.169.6 with SMTP id r6mr2481319rve.210.1197695249200;
        Fri, 14 Dec 2007 21:07:29 -0800 (PST)
Received: by 10.141.70.4 with HTTP; Fri, 14 Dec 2007 21:07:29 -0800 (PST)
Message-ID: <786fde50712142107l3720041bhb130a71982045a92@mail.gmail.com>
Date: Sat, 15 Dec 2007 07:07:29 +0200
From: "Shai Erera" <serera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: index and access to lines of a CSV file
In-Reply-To: <19859.83.145.93.226.1197628999.squirrel@mail.inf.tu-dresden.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1632_19352183.1197695249211"
References: <4761BF8D.7080808@mail.inf.tu-dresden.de>
	 <AAE92113-E985-4BFD-B775-42369793F6D9@gmail.com>
	 <19859.83.145.93.226.1197628999.squirrel@mail.inf.tu-dresden.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1632_19352183.1197695249211
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You can also look up Apache Derby which is an open source DB which can be
integrated into your app (not needing an install, like MySQL which is also
free).

On Dec 14, 2007 12:43 PM, Ingolf Tobias Rothe <ir268155@inf.tu-dresden.de>
wrote:

> Hello Mike,
>
> thank you for the answer.  Currently I hold this datastructure in a
> HashTable in Memory but the ressource consumtion is very high.
> Lucene looks easy in the way of usage and is suposed to be extremely
> perfomant.  I though also to use later the abilities to lucene to attach
> parameters to search results so I do not neccessarily need to process the
> record.
>
> I checked berkley db but it is not free for comercial use. What would be a
> implementation for btree?
>
> Thank you,
>
> Tobias
>
>
> > On 13-Dec-07, at 3:26 PM, Tobias Rothe wrote:
> >
> >> I got a quick question.  I am handling hughe CSV files. They start
> >> with a key in the first column and are followed by data.
> >> I need to retrieve randomly this data based on the key.  So it is
> >> kind of a search where I give a unique key and ideally access to
> >> the right line.
> >> The file contains about 200.000 lines or more.  I am not sure if
> >> Lucene can handle things like that and I did not really find a hint
> >> on this  topic.  So I hope to find help here.
> >
> > Is that all you're doing?  You could accomplish the above with Lucene
> > but it isn't really needed for that.  You need some kind of on-disk
> > key->value mapper.  Something like a berkeley db hashtable or btree
> > should work (store each line as a key/value pair).
> >
> > -Mike
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


-- 
Regards,

Shai Erera

------=_Part_1632_19352183.1197695249211--

From java-user-return-31503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 15 05:18:28 2007
Return-Path: <java-user-return-31503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91282 invoked from network); 15 Dec 2007 05:18:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2007 05:18:28 -0000
Received: (qmail 56394 invoked by uid 500); 15 Dec 2007 05:18:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56358 invoked by uid 500); 15 Dec 2007 05:18:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56347 invoked by uid 99); 15 Dec 2007 05:18:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 14 Dec 2007 21:18:11 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of serera@gmail.com designates 72.14.202.176 as permitted sender)
Received: from [72.14.202.176] (HELO ro-out-1112.google.com) (72.14.202.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Dec 2007 05:17:49 +0000
Received: by ro-out-1112.google.com with SMTP id m6so1889155roe.7
        for <java-user@lucene.apache.org>; Fri, 14 Dec 2007 21:17:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=9/yRaV2T4oOk3WRY0NO2ABXXkBqFWGXB4ApT0/Df6QI=;
        b=Nmjj9bJWHSUZh8LmjVZVXtQBEn599CI+riBEkvEjHjJ8SXrmVXY4uYvzne2azf7I6/6jqRPw3rX6PQ5Oo/fhurXhTTX6s2jEnkvKqpGe83awyjX5RoDwGtzNru8CUK3zhiIJuZRBm8NV9++p7ktg0tdQkfvrlIq6xtuTZ6HFHIU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=xgWmzjms9CXvDtTn4un5vLpUMfNXI3BTBsgQQ78OQCXNGWqch+Pe5ZeQisxPtsdfevHyUNpJYqla6kddIrjmGhqjUGumF9+4nFp3TN9n3CIxsaGHU96UdqeQwvnI4o36ev3Hge07hdW54062JcJjvMIyhmayN2NOcvpektRWf8U=
Received: by 10.140.82.38 with SMTP id f38mr2504639rvb.30.1197695872311;
        Fri, 14 Dec 2007 21:17:52 -0800 (PST)
Received: by 10.141.70.4 with HTTP; Fri, 14 Dec 2007 21:17:52 -0800 (PST)
Message-ID: <786fde50712142117i1abee213ya999a3889aa93bfb@mail.gmail.com>
Date: Sat, 15 Dec 2007 07:17:52 +0200
From: "Shai Erera" <serera@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: (~) opertor query....
In-Reply-To: <786fde50712142104k1ffd033bnd02a742134a09df@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1634_21361124.1197695872316"
References: <9312093579B72048B1E5659DC3EC7F39022E9330@hstmsg005.corp.satyam.ad>
	 <Pine.LNX.4.62.0712141523570.541@radix.cryptio.net>
	 <786fde50712142104k1ffd033bnd02a742134a09df@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1634_21361124.1197695872316
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I just noticed MultiPhraseQuery has a setSlop method, so I think this Query
is what you're looking for.

On Dec 15, 2007 7:04 AM, Shai Erera <serera@gmail.com> wrote:

> You can look at org.apache.lucene.search.MultiPhraseQuery which does
> something similar to what you ask. From its javadoc:
>
>  * To use this class, to search for the phrase "Microsoft app*" first use
>  * add(Term) on the term "Microsoft", then find all terms that have "app"
> as
>  * prefix using IndexReader.terms(Term), and use MultiPhraseQuery.add
> (Term[]
>  * terms) to add them to the query.
>
> It works for simple phrases and I don't know if it works for fuzzy phrases
> as well ... however I believe it can be tweaked to work for fuzzy phrases
> also.
>
>
> On Dec 15, 2007 1:26 AM, Chris Hostetter <hossman_lucene@fucit.org> wrote:
>
> >
> > :           I am parsing this query:  "Auto*  machine"~4.
> > :
> > :           Will it work? If yes then right now it's not working. Can
> > : anyone help on this?
> >
> > Tt depends, what do you want it to do?  :)
> >
> > If you are hoping it will match documents that contain a word that
> > starts
> > with "Auto" withing a distance of 4 words from the word "machine" then
> > no,
> > the query parser doesn't work that way.  phrase queries (aka: proximty
> > queries) as supported by the QueryParser can only match simple words in
> > the phrase, not other complex query types ... but you could build your
> > own
> > query parser that leveraged the SpanQuery family of queries to do
> > something like this.
> >
> >
> >
> > -Hoss
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> --
> Regards,
>
> Shai Erera




-- 
Regards,

Shai Erera

------=_Part_1634_21361124.1197695872316--

From java-user-return-31504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 15 11:59:29 2007
Return-Path: <java-user-return-31504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73480 invoked from network); 15 Dec 2007 11:59:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2007 11:59:29 -0000
Received: (qmail 4057 invoked by uid 500); 15 Dec 2007 11:59:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4023 invoked by uid 500); 15 Dec 2007 11:59:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4012 invoked by uid 99); 15 Dec 2007 11:59:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Dec 2007 03:59:11 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [134.130.7.72] (HELO mta-1.ms.rz.rwth-aachen.de) (134.130.7.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Dec 2007 11:58:59 +0000
Received: from ironport-out-1.rz.rwth-aachen.de ([134.130.3.58])
 by mta-1.ms.rz.RWTH-Aachen.de
 (Sun Java System Messaging Server 6.2-8.04 (built Feb 28 2007))
 with ESMTP id <0JT300ELPAK63T30@mta-1.ms.rz.RWTH-Aachen.de> for
 java-user@lucene.apache.org; Sat, 15 Dec 2007 12:57:42 +0100 (CET)
Received: from relay.rwth-aachen.de ([134.130.3.1])
 by ironport-in-1.rz.rwth-aachen.de with ESMTP; Sat, 15 Dec 2007 12:57:41 +0100
Received: from numa-i.igpm.rwth-aachen.de
 (numa-i.igpm.RWTH-Aachen.DE [134.130.161.252])
	by relay.rwth-aachen.de (8.13.7/8.13.3/1) with ESMTP id lBFBvg7v020342	for
 <java-user@lucene.apache.org>; Sat, 15 Dec 2007 12:57:42 +0100 (MET)
Received: by numa-i.igpm.rwth-aachen.de (Postfix, from userid 230)
	id 7A03C1067C9; Sat, 15 Dec 2007 12:57:41 +0100 (CET)
Date: Sat, 15 Dec 2007 12:57:41 +0100 (CET)
From: Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
Subject: Luke - unknown format version: -4
To: java-user@lucene.apache.org
Reply-to: jarausch@igpm.rwth-aachen.de
Message-id: <tkrat.e40c0b275d3671ca@igpm.rwth-aachen.de>
MIME-version: 1.0
Content-type: TEXT/PLAIN; CHARSET=us-ascii
Content-transfer-encoding: 7BIT
Content-disposition: INLINE
X-IronPort-AV: E=Sophos;i="4.24,171,1196636400";   d="scan'208";a="39569883"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I've built an index with lucene-java-2.2.0-603782
which is work fine.

But when I try to use Luke-0.7.1 on that index directory
I get Unknown format version: -4

(although Luke-0.7.1 claims to build on Lucene 2.2.0)

What am I missing.
Is there a separate mailing list for Luke?

Is there a subversion repository for Luke?

Many thanks fopr any hints,
Helmut.

-- 
Helmut Jarausch

Lehrstuhl fuer Numerische Mathematik
RWTH - Aachen University
D 52056 Aachen, Germany

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 15 13:29:01 2007
Return-Path: <java-user-return-31505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90566 invoked from network); 15 Dec 2007 13:29:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2007 13:29:00 -0000
Received: (qmail 44003 invoked by uid 500); 15 Dec 2007 13:28:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43973 invoked by uid 500); 15 Dec 2007 13:28:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43962 invoked by uid 99); 15 Dec 2007 13:28:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Dec 2007 05:28:44 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Dec 2007 13:28:21 +0000
Received: by py-out-1112.google.com with SMTP id d32so7178324pye.12
        for <java-user@lucene.apache.org>; Sat, 15 Dec 2007 05:28:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=vClGL2XBpEiJPpPUxawyNU4W3Vgpsja+i03qByDhZjg=;
        b=eOe3n9ODbiqXhAVxg4g/5YMcWCpGjnsvSNDR4n0onpFwKACWeCD3ckygBdZEoyu0F49RrgTGZxKUIYkOdmnZVCfft069syg1VjDIKzjmfuCNOcE0MzfI8Hd8Bnt/cG48typkLBO2y9PNfcKzOP1+HR6VV2VkAbPurCPJVsOY6D4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=Tzm5l8Z/I4Vf18j54HrZ00/aisTmgUyHmWVUXtKUoyPcTPbNmxe5TQh4nsCqTepV4VCzpqewzScGXTrBg58TR4Xb+IFgu1Dbwb+YwnuSgC2P7kshunolPcQ+lLby1+kwU9mNqMT9O6a4bhxU8sjqOTn0+UeqcGRmzbQH6yaMC2Y=
Received: by 10.65.154.2 with SMTP id g2mr9863010qbo.55.1197725303082;
        Sat, 15 Dec 2007 05:28:23 -0800 (PST)
Received: from ?192.168.1.102? ( [69.124.234.183])
        by mx.google.com with ESMTPS id d12sm7660678qbc.2007.12.15.05.28.22
        (version=SSLv3 cipher=RC4-MD5);
        Sat, 15 Dec 2007 05:28:22 -0800 (PST)
Message-ID: <4763D5ED.1080907@gmail.com>
Date: Sat, 15 Dec 2007 08:26:05 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Luke - unknown format version: -4
References: <tkrat.e40c0b275d3671ca@igpm.rwth-aachen.de>
In-Reply-To: <tkrat.e40c0b275d3671ca@igpm.rwth-aachen.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Get the Luke jar and put it with the Lucene jar you used to build the 
index. Run Luke:

|java -classpath luke.jar;lucene.jar org.getopt.luke.Luke|

Helmut Jarausch wrote:
> Hi,
>
> I've built an index with lucene-java-2.2.0-603782
> which is work fine.
>
> But when I try to use Luke-0.7.1 on that index directory
> I get Unknown format version: -4
>
> (although Luke-0.7.1 claims to build on Lucene 2.2.0)
>
> What am I missing.
> Is there a separate mailing list for Luke?
>
> Is there a subversion repository for Luke?
>
> Many thanks fopr any hints,
> Helmut.
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 15 23:17:29 2007
Return-Path: <java-user-return-31506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7183 invoked from network); 15 Dec 2007 23:17:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 15 Dec 2007 23:17:29 -0000
Received: (qmail 73954 invoked by uid 500); 15 Dec 2007 23:17:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73908 invoked by uid 500); 15 Dec 2007 23:17:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73897 invoked by uid 99); 15 Dec 2007 23:17:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Dec 2007 15:17:12 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=HTML_MESSAGE,HTML_OBFUSCATE_05_10,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of NBEYER@cerner.com designates 159.140.213.229 as permitted sender)
Received: from [159.140.213.229] (HELO mail02.cerner.com) (159.140.213.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 15 Dec 2007 23:16:50 +0000
Received: from msbhwhq03.northamerica.cerner.net (msbhwhq03.cerner.com [10.160.16.183])
	by mail02.cerner.com (8.13.8/8.13.8) with ESMTP id lBFNGrrW028328
	for <java-user@lucene.apache.org>; Sat, 15 Dec 2007 17:16:53 -0600
Received: from MAIL05.northamerica.cerner.net ([10.160.16.178]) by msbhwhq03.northamerica.cerner.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Sat, 15 Dec 2007 17:16:53 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C83F70.4BCF8A75"
Subject: thoughts/suggestions for analyzing/tokenizing class names
Date: Sat, 15 Dec 2007 17:14:50 -0600
Message-ID: <99833356D526854CAF8ECF4D7C769D49C78B9D@MAIL05.northamerica.cerner.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: thoughts/suggestions for analyzing/tokenizing class names
Thread-Index: Acg/cErbaBaTofLzQaOne0tYvkCuXA==
From: "Beyer,Nathan" <NBEYER@CERNER.COM>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 15 Dec 2007 23:16:53.0480 (UTC) FILETIME=[942B1E80:01C83F70]
X-Proofpoint-Virus-Version: vendor=fsecure engine=4.65.5502:2.3.11,1.2.37,4.0.164 definitions=2007-12-14_07:2007-12-14,2007-12-14,2007-12-14 signatures=0
X-Virus-Checked: Checked by ClamAV on apache.org

------_=_NextPart_001_01C83F70.4BCF8A75
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have a few fields that use package names and class names and I've been
looking for some suggestions for analyzing these fields.

A few examples -

Text (class name)
- "org.apache.lucene.document.Document"
Queries that would match=20
- "org.apache" , "org.apache.lucene.document"

Text (class name + method signature)
-- "org.apache.lucene.document.Document#add(Fieldable)"
Queries that would match
-- "org.apache.lucene", "org.apache.lucene.document.Document#add"

Any thoughts on how to approach tokenizing these types of texts?

Thanks,
-Nathan

----------------------------------------------------------------------
CONFIDENTIALITY NOTICE This message and any included attachments are from C=
erner Corporation and are intended only for the addressee. The information =
contained in this message is confidential and may constitute inside or non-=
public information under international, federal, or state securities laws. =
Unauthorized forwarding, printing, copying, distribution, or use of such in=
formation is strictly prohibited and may be unlawful. If you are not the ad=
dressee, please promptly delete this message and notify the sender of the d=
elivery error by e-mail or you may call Cerner's corporate offices in Kansa=
s City, Missouri, U.S.A at (+1) (816)221-1024.
------_=_NextPart_001_01C83F70.4BCF8A75--

From java-user-return-31507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 16 15:49:09 2007
Return-Path: <java-user-return-31507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91907 invoked from network); 16 Dec 2007 15:49:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2007 15:49:08 -0000
Received: (qmail 29385 invoked by uid 500); 16 Dec 2007 15:48:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29339 invoked by uid 500); 16 Dec 2007 15:48:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29328 invoked by uid 99); 16 Dec 2007 15:48:51 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Dec 2007 07:48:51 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MIME_BASE64_BLANKS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of chee.wu@gmail.com designates 72.14.204.227 as permitted sender)
Received: from [72.14.204.227] (HELO qb-out-0506.google.com) (72.14.204.227)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Dec 2007 15:48:27 +0000
Received: by qb-out-0506.google.com with SMTP id o21so442351qba.9
        for <java-user@lucene.apache.org>; Sun, 16 Dec 2007 07:48:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        bh=wgHSK7K7UVXcyqrBb/MU34QRsSVfveDufn0ksiIYHF8=;
        b=Ov5dUM94S42GjnZZ8I6DIhXwh4t/IKQrRhkn+crnSwWDtjcctKlm5zrZfC0IKbL6kSGkx4EqOLhTXr8OeQq5BBtSMcfCPu+RoyUm3Wfba5TVL+RoHuZxG9Fkiap+HBJU/VfbfBZhtYCMPw1XnRXS2YCWBBblJcIY6IRhndyzfOo=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:from:to:references:subject:date:mime-version:content-type:content-transfer-encoding:x-priority:x-msmail-priority:x-mailer:x-mimeole;
        b=qhpYpbcXuSgDchhUr0paELgNNtwxaDD7annEn99Y3KGsZusHcNFipAtdLPessVCqJRWHdZ9zkxrr8+92Y1D3GOfkGkwR6uMB4rYKJ1b8LAMgXgz+MZvDTA/fhhDy5m/Tcal6+ZEa/aWegohSlF7GsBETmj6bkFE6uvRVQzusM5Q=
Received: by 10.114.184.7 with SMTP id h7mr1521125waf.28.1197820108998;
        Sun, 16 Dec 2007 07:48:28 -0800 (PST)
Received: from wuqi ( [125.33.122.221])
        by mx.google.com with ESMTPS id v37sm4840332wah.2007.12.16.07.48.24
        (version=SSLv3 cipher=RC4-MD5);
        Sun, 16 Dec 2007 07:48:27 -0800 (PST)
Message-ID: <035b01c83ffb$0f291170$7f00a8c0@wuqi>
From: "chee wu" <chee.wu@gmail.com>
To: <java-user@lucene.apache.org>
References: <cefddd100712071042u29973d92n75f16a5e8f6f799@mail.gmail.com> <11590226-BA59-484E-9224-490DFCB8418A@apache.org> <cefddd100712071303r7282284cx7953420d774e6d4c@mail.gmail.com>
Subject: Re: Boosting hits based on a value in a field, without that field contributing to the search
Date: Sun, 16 Dec 2007 23:48:02 +0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="UTF-8"
Content-Transfer-Encoding: base64
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.3138
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.3198
X-Virus-Checked: Checked by ClamAV on apache.org

SGkgIFRvbSwNCkkgaGF2ZSB0aGUgc2ltaWxhciByZXF1aXJlbWVudCwgYW5kICBoYXZlIGZvdW5k
IGEgd2F5IC4uDQpUZXJtUXVyeSBpcyBhbiBhdG9tIHF1ZXJ5LG90aGVyIHF1ZXJpZXMgbGlrZSBi
b29sZWFuIHF1ZXJ5ICB3aWxsIGJlIHNwaXR0ZWQgaW50byAgdGVybSBxdWVyaWVzIHJhbmcgcXVl
cnkgZXRjLllvdSBjYW4gY3VzdG9taXplIHlvdXIgb3duIFRlcm1TY29yZXIsIGFkZCBhIG5ldyAi
SW5kZXhSZWFkZXIiIG9iamVjdCAgaW4gVGVybVNjb3JlciwgYW5kIHJldHJpZXZlIHRoZSBmaWVs
ZCB2YWx1ZSBvZiB0aGUgZG9jIHRocm91Z2ggdGhpcyBJbmRleFJlYWRlciBvYmplY3QuIHRoZW4g
eW91IGNhbiBjaGFuZ2UgdGhlIHNjb3JlIG9mIHRoZSBkb2MgYmFzZWQgb24gdGhlIGZpZWxkIHZh
bHVlLiBUaGUgc2NvcmUgY2hhbmdpbmcgcHJvY2VzcyBjYW4gYmUgaW1wbGVtZW50ZWQgaW4gbWV0
aG9kICJwcm90ZWN0ZWQgYm9vbGVhbiBzY29yZShIaXRDb2xsZWN0b3IgYywgaW50IGVuZCkgIi4N
Cg0KT25lIHByb2JsZW0gaXMgdGhhdCBpZiAgdGhlcmUgYXJlIG1hbnkgaGl0cyBtZWV0IHlvdXIg
c2VhcmNoIHF1ZXJ5LCB5b3UgaGF2ZSB0b28gcmV0cmlldmUgdGhlIGZpZWxkIGluZm8gb2YgYWxs
IHRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB5b3VyIHF1ZXJ5LHRoaXMgaXMgdmVyeSBpbmVmZmlj
aWVudC4gDQoNCkkgYWxzbyB3YW50IHRvIGtub3cgd2hldGhlciB0aGVyZSBhcmUgYW55IGJldHRl
ciBzb2x1dGlvbnMgPw0KDQpUaGFua3MNCi1jaGVlDQogIA0KDQoNCi0tLS0tIE9yaWdpbmFsIE1l
c3NhZ2UgLS0tLS0gDQpGcm9tOiAiVG9tIEVtZXJzb24iIDx0cmVtZXJzb25AZ21haWwuY29tPg0K
VG86IDxqYXZhLXVzZXJAbHVjZW5lLmFwYWNoZS5vcmc+DQpTZW50OiBTYXR1cmRheSwgRGVjZW1i
ZXIgMDgsIDIwMDcgNTowMyBBTQ0KU3ViamVjdDogUmU6IEJvb3N0aW5nIGhpdHMgYmFzZWQgb24g
YSB2YWx1ZSBpbiBhIGZpZWxkLCB3aXRob3V0IHRoYXQgZmllbGQgY29udHJpYnV0aW5nIHRvIHRo
ZSBzZWFyY2gNCg0KDQo+IEhpIEdyYW50LA0KPiANCj4gSSB3YXMgdGhpbmtpbmcgdGhhdCBzb21l
dGhpbmcgaW4gby5hLmwuc2VhcmNoLmZ1bmN0aW9uIHdhcyBnb2luZyB0byBiZSB0aGUNCj4gcm91
dGUgdG8gdGFrZSwgYnV0IHdhbnRlZCB0byBoZWFyIGlmIHRoZXJlIHdlcmUgb3RoZXIgaWRlYXMg
ZnJvbSB0aGUNCj4gZXhwZXJ0cy4gVGhhbmtzIQ0KPiANCj4gQSBjdXN0b20gc29ydCB3b3VsZG4n
dCB3b3JrIGluIHRoaXMgY2FzZSBiZWNhdXNlIHdlIGRvbid0IHdhbnQgdGhlIGl0ZW1zIHRvDQo+
IG5lY2Vzc2FyaWx5IGJlIGJ1bmNoZWQgdG9nZXRoZXIsIHJhdGhlciBqdXN0IGhhdmUgdGhlaXIg
c2NvcmVzIGluY3JlYXNlZC4NCj4gDQo+IFRoYW5rcyBhZ2Fpbi4NCj4gDQo+ICAgIC10cmVlDQo+
IA0KPiBPbiBEZWMgNywgMjAwNyAzOjI2IFBNLCBHcmFudCBJbmdlcnNvbGwgPGdzaW5nZXJzQGFw
YWNoZS5vcmc+IHdyb3RlOg0KPiANCj4+IEhhdmUgYSBsb29rIGF0IHRoZSBvLmEubC5zZWFyY2gu
ZnVuY3Rpb24gcGFja2FnZSwgd2hpY2ggY2FuIGJlIHVzZWQgdG8NCj4+IGdpdmUgYm9vc3RzIHRv
IGRvY3VtZW50cyBiYXNlZCBvbiB0aGUgdmFsdWUgY29udGFpbmVkIGluIGEgZmllbGQuDQo+PiBB
bHNvLCB3b3VsZCBhIGN1c3RvbSBzb3J0IHdvcms/DQo+Pg0KPj4gLUdyYW50DQo+Pg0KPj4gT24g
RGVjIDcsIDIwMDcsIGF0IDE6NDIgUE0sIFRvbSBFbWVyc29uIHdyb3RlOg0KPj4NCj4+ID4gSGVs
bG8sDQo+PiA+DQo+PiA+IEknbSBsb29raW5nIGZvciBzdWdnZXN0aW9ucyBvbiBob3cgdG8gZGVh
bCB3aXRoIHRoZSBmb2xsb3dpbmcNCj4+ID4gKHNpbXBsaWZpZWQpDQo+PiA+IHNjZW5hcmlvIChM
dWNlbmUgMi4yLjApOg0KPj4gPg0KPj4gPiBEb2N1bWVudHMgaW4gbXkgaW5kZXggaGF2ZSBzb21l
IG51bWJlciBvZiBmaWVsZHMgdGhhdCBhcmUgc2VhcmNoZWQgaW4NCj4+ID4gdmFyaW91cyBjb21i
aW5hdGlvbnMgdmlhIGJvb2xlYW4gcXVlcmllcy4NCj4+ID4NCj4+ID4gRWFjaCBkb2N1bWVudCBh
bHNvIGNvbnRhaW5zIGEgZmllbGQgdGhhdCBjb250YWlucyBhIGZpZWxkIHRoYXQgaXNuJ3QNCj4+
ID4gc2VhcmNoZWQgdGhhdCBjb250YWlucyB2YWx1ZXMgIkZvbyIsICJCYXIiLCAiQmF6Iiwgb3Ig
bm8gdmFsdWUgYXQgYWxsLg0KPj4gPg0KPj4gPiBJIG5lZWQgdG8gYm9vc3QgdGhlIHNjb3JlIG9m
IGEgaGl0IGluIGEgRG9jdW1lbnQgYnkgZGlmZmVyZW50DQo+PiA+IGFtb3VudHMgYmFzZWQNCj4+
ID4gb24gd2hldGhlciB0aGUgZmllbGQgaW4gdGhlIG1hdGNoaW5nIGRvY3VtZW50IGNvbnRhaW5z
ICJGb28iLCAiQmFyIiwNCj4+ID4gb3INCj4+ID4gIkJheiIuDQo+PiA+DQo+PiA+IEhlcmV0b2Zv
cmUgSSBoYXZlIGJlZW4gYWRkaW5nIGEgZG9jdW1lbnQgYm9vc3QgYXQgaW5kZXhpbmcgdGltZQ0K
Pj4gPiBiYXNlZCBvbiB0aGUNCj4+ID4gc291cmNlIGRhdGEgdGhhdCBpcyBiZWluZyBpbmRleGVk
IGluIGVhY2ggZG9jdW1lbnQuIFRoaXMgbWFrZXMgdGhlDQo+PiA+IGJvb3N0DQo+PiA+IGFwcGx5
IGFjcm9zcyB0aGUgYm9hcmQgYW5kIGdpdmVzIHRoZSBkZXNpcmVkIHJlc3VsdHMuIEhvd2V2ZXIs
IG15DQo+PiA+IHVzZXJzIG5vdw0KPj4gPiB3YW50IHRvIHRoZSBhYmlsaXR5IHRvIHNlbGVjdGl2
ZWx5IGFwcGx5IHRoZSBib29zdCBvciBub3QsIHNvIGRvaW5nDQo+PiA+IHRoaXMgYXQNCj4+ID4g
aW5kZXhpbmcgdGltZSBpcyBubyBsb25nZXIgYW4gb3B0aW9uLg0KPj4gPg0KPj4gPiBNYW55IHRo
YW5rcyBpbiBhZHZhbmNlIGZvciB5b3VyIHRob3VnaHRzLA0KPj4gPg0KPj4gPiAgICAtdHJlZQ0K
Pj4gPg0KPj4gPiAtLQ0KPj4gPiBUb20gRW1lcnNvbg0KPj4gPiB0cmVtZXJzb25AZ21haWwuY29t
DQo+PiA+IGh0dHA6Ly93d3cuZHJlYW1lcnNyZWFsbS5uZXQvfnRyZWU8aHR0cDovL3d3dy5kcmVh
bWVyc3JlYWxtLm5ldC8lN0V0cmVlPg0KPj4NCj4+IC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
DQo+PiBHcmFudCBJbmdlcnNvbGwNCj4+IGh0dHA6Ly9sdWNlbmUuZ3JhbnRpbmdlcnNvbGwuY29t
DQo+Pg0KPj4gTHVjZW5lIEhlbHBmdWwgSGludHM6DQo+PiBodHRwOi8vd2lraS5hcGFjaGUub3Jn
L2x1Y2VuZS1qYXZhL0Jhc2ljc09mUGVyZm9ybWFuY2UNCj4+IGh0dHA6Ly93aWtpLmFwYWNoZS5v
cmcvbHVjZW5lLWphdmEvTHVjZW5lRkFRDQo+Pg0KPj4NCj4+DQo+Pg0KPj4gLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
DQo+PiBUbyB1bnN1YnNjcmliZSwgZS1tYWlsOiBqYXZhLXVzZXItdW5zdWJzY3JpYmVAbHVjZW5l
LmFwYWNoZS5vcmcNCj4+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNl
ci1oZWxwQGx1Y2VuZS5hcGFjaGUub3JnDQo+Pg0KPj4NCj4gDQo+IA0KPiAtLSANCj4gVG9tIEVt
ZXJzb24NCj4gdHJlbWVyc29uQGdtYWlsLmNvbQ0KPiBodHRwOi8vd3d3LmRyZWFtZXJzcmVhbG0u
bmV0L350cmVlDQo+



From java-user-return-31508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 16 18:50:19 2007
Return-Path: <java-user-return-31508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38016 invoked from network); 16 Dec 2007 18:50:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2007 18:50:19 -0000
Received: (qmail 24058 invoked by uid 500); 16 Dec 2007 18:50:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24019 invoked by uid 500); 16 Dec 2007 18:50:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24008 invoked by uid 99); 16 Dec 2007 18:50:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Dec 2007 10:50:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [130.225.24.87] (HELO luna.statsbiblioteket.dk) (130.225.24.87)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Dec 2007 18:49:39 +0000
Received: from statsbiblioteket.dk (localhost [127.0.0.1])
 by luna.statsbiblioteket.dk
 (iPlanet Messaging Server 5.2 HotFix 1.16 (built May 14 2003))
 with ESMTP id <0JT500LOSOASWM@luna.statsbiblioteket.dk> for
 java-user@lucene.apache.org; Sun, 16 Dec 2007 19:49:40 +0100 (MET)
Received: from [127.0.0.1] by luna.statsbiblioteket.dk (mshttpd); Sun,
 16 Dec 2007 19:49:40 +0100
Date: Sun, 16 Dec 2007 19:49:40 +0100
From: Toke Eskildsen <te@statsbiblioteket.dk>
Subject: Re: Heads-up on SSD
To: java-user@lucene.apache.org
Message-id: <6322563c3d.63c3d63225@statsbiblioteket.dk>
MIME-version: 1.0
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.16 (built May 14 2003)
Content-type: text/plain; charset=us-ascii
Content-language: en
Content-transfer-encoding: 7BIT
Content-disposition: inline
X-Accept-Language: en
Priority: normal
X-Virus-Checked: Checked by ClamAV on apache.org

Chris Lu <chris.lu@gmail.com> wrote:
> Toke, This is fantastic stuff! I always wanted to convince (rich)
> customers to try SSD. Now it's more convincing!

We expect to _save_ money by using SSDs. They cost more that conventional harddrives if you just look at them isolated, but when we look at performance, a solution based on conventional harddrives can very easy be more expensive, as more machines are needed to match the SSD-setup. All depending on requirements of course.

There's also the matter of dropping prices. Our expectations on savings are based on current prices and as things are going, SSD's double in capacity every year for the same price.

> I think the results will be more interesting for indexing, which 
> has a lot of file merges.

The area where SSDs don't perform that well is with bulk writes. We haven't made any tests with merges, so this is is just speculation, but I don't expect any speed-up here as there's a lot of bulk writing going on.

However, as the article from nextlevelhardware shows, near-linear speedup of bulk operations can be achieved by RAIDing SSD's. Instead of buing a SSD of size x, buy two at size x/2 and put them in RAID.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 16 22:15:15 2007
Return-Path: <java-user-return-31509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97014 invoked from network); 16 Dec 2007 22:15:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 16 Dec 2007 22:15:15 -0000
Received: (qmail 62007 invoked by uid 500); 16 Dec 2007 22:14:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61982 invoked by uid 500); 16 Dec 2007 22:14:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61971 invoked by uid 99); 16 Dec 2007 22:14:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Dec 2007 14:14:58 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [203.217.22.128] (HELO file1.syd.nuix.com.au) (203.217.22.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Dec 2007 22:14:37 +0000
Received: from host68.syd.nuix.com.au (host68.syd.nuix.com.au [192.168.222.68])
	by file1.syd.nuix.com.au (Postfix) with ESMTP id B45D14A80DD
	for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 09:12:34 +1100 (EST)
From: Daniel Noll <daniel@nuix.com>
Organization: Nuix Pty Ltd
To: java-user@lucene.apache.org
Subject: Re: Query.rewrite - help me to understand it
Date: Mon, 17 Dec 2007 09:15:05 +1100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <tkrat.0946e48632677400@igpm.rwth-aachen.de> <ee0c896c0712130407l75e9c522y497f48dd0dcf818a@mail.gmail.com>
In-Reply-To: <ee0c896c0712130407l75e9c522y497f48dd0dcf818a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200712170915.05666.daniel@nuix.com>
X-Virus-Checked: Checked by ClamAV on apache.org

On Thursday 13 December 2007 23:07:49 =E6=B8=B8=E6=B3=B3=E6=B1=A0=E7=9A=84=
=E9=B1=BC wrote:
> hehe ,you can do a test with PrefixQuery rewrite method,and extract terms=
 .
> like this
>   query =3D prefixQuery.rewrite(reader);
>   query.extractTerms(set);
>   for(String term : set){
>      System.out.println(term);
>  }
>
>  It will give you a pleasant surprise.

An OutOfMemoryError? ;-)

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 01:32:13 2007
Return-Path: <java-user-return-31510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50167 invoked from network); 17 Dec 2007 01:32:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 01:32:13 -0000
Received: (qmail 56539 invoked by uid 500); 17 Dec 2007 01:31:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56511 invoked by uid 500); 17 Dec 2007 01:31:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56500 invoked by uid 99); 17 Dec 2007 01:31:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 16 Dec 2007 17:31:56 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 194.109.24.30 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 01:31:44 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id lBH1VYUP043337
	for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 02:31:34 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <656BBE56-A279-4801-9E32-535C207EE06A@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <e05f0fd10712141024t41fb5504na15a1988a5f38a8e@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: "Field weights"
Date: Mon, 17 Dec 2007 02:31:34 +0100
References: <3891399D-C107-48C6-A72E-607A8EEB232C@gmail.com> <200712141903.55582.paul.elschot@xs4all.nl> <e05f0fd10712141024t41fb5504na15a1988a5f38a8e@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the replies.

I miserably failed to explain my problem. I focused too much on the  
content similarity between the fields and completely missed out on  
things such as that car brands and tire brands are not propotionally  
large compared to the data in my domain. I have tens of thousands  
more  "tire brands" than "car brands".

My quick and dirty solution (that fixes the problem with the quick and  
dirty solution that avoids implementing the query tokenizer mentioned  
in my original post) is based on what I wrote in the previous  
paragrah: there are so few "car brands" I can handle queries for them  
using a Map<String, CarBrand> and then merge the hit (if it was a hit)  
with the results from the Lucene index that now focus on "tire brand"  
and "tire preassure".

Quite ugly. But good enough for a couple of more weeks. I'll report  
back if I change my mind.


14 dec 2007 kl. 19.24 skrev Doron Cohen:

> It seems that documents having less fields satisfying
> the query worth more than those satisfying more fields
> of the query, because the first ones are more "to
> the point".
>
> At least it seems like it in the example.
>
> If this makes sense I would try to compose a top level
> boolean query out of the one-field queries, and make it use
> a similarity that implements this strange logic of coord.
> (Strange, because usually coord punishes for under
> matching, while here you want to reward for just that.)
>
> A tricky part would be to make the sub-queries use
> the "regular" coord logic, but first let's see if this is
> a valid direction at all.
>
> Doron
>
> On Dec 14, 2007 8:03 PM, Paul Elschot <paul.elschot@xs4all.nl> wrote:
>
>> Karl,
>>
>> This might work for you:
>> https://issues.apache.org/jira/browse/LUCENE-293
>>
>> Regards,
>> Paul Elschot
>>
>> On Friday 14 December 2007 18:06:01 Karl Wettin wrote:
>>> I have an index that contains three sorts of documents:
>>>
>>> Car brand
>>> Tire brand
>>> Tire pressure
>>>
>>> (Please bear with me, the real index has nothing to do with cars. I
>>> just try to explain the problem in an alternative domain to avoid  
>>> NDA
>>> conflicts.)
>>>
>>> There is a heirarchial composite relationship between these sort of
>>> documents. A document describing "tire pressure" also contains "tire
>>> brand" and "car brand". A document describing "tire brand" also
>>> contains information about "car brand". A document describing "car
>>> brand" contains only that.
>>>
>>> The requirement is that the consumer of the API should not have to
>>> specify what fields they are searching in. There is no time (nor
>>> training data) to implement a hidden markov model (HMM) tokenizer or
>>> something along that path in order to extract possible attributes  
>>> from
>>> the query string. Instead the query string is tokenized once per  
>>> field
>>> and assebled to one huge query. Normally this works fairly well.
>>>
>>> Here are some example documents:
>>>
>>> Volvo
>>> Volvo, Michelin
>>> Volvo, Nokian
>>> Volvo, Nokian, 2.2 bars
>>> Volvo, Firestone, 2.4 bars
>>>
>>> Saab
>>> Saab, Michelin
>>> Saab, Nokian
>>> Saab, Nokian, 2.1 bars
>>> Saab, Firestone
>>> Saab, Firestone, 2.4 bars
>>> Saab, Firestone, 2.5 bars
>>>
>>> If I search for Saab the top result will be the document   
>>> representing
>>> the car brand "Saab".  The query would look like this: "car:saab
>>> tire:saab preasure:saab"
>>>
>>> But lets say Saab starts manufacturing tires too:
>>>
>>> Saab
>>> Saab, Saab tires
>>> Saab, Saab tires, 1.9 bars
>>> Saab, Saab tires, 1.8 bars
>>>
>>> If I search for "Saab" I still want the top result to be Saab the  
>>> car
>>> brand. But  it not longer is, the match for "Saab, Saab tires" now
>>> have a greater score than "Saab", of course.
>>>
>>> My idea is to work along the line of indexing "Saab" in the tire  
>>> brand
>>> and tire pressure field too. Now searching for Saab will yeild a
>>> result where the car brand "Saab" is the top result.
>>>
>>> However, this will not work as I have different tokenization
>>> strategies for each field (stemming and what not). Tokenizing the
>>> query string Saab for the field "tire brand" in Swedish might end up
>>> as "saa" and will thus not find the token Saab inserted for the
>>> document describing the car brand Saab.
>>>
>>> I have a couple of experiments in my head I need to try out,  
>>> starting
>>> with tokezining query strings per field and using the tokens  
>>> generated
>>> for the field car brand as query in the tire brand and tire pressure
>>> too. And vice versus.
>>>
>>> Any brilliant ideas that might work? Hacky solutions are OK.
>>>
>>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 08:32:38 2007
Return-Path: <java-user-return-31511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12806 invoked from network); 17 Dec 2007 08:32:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 08:32:38 -0000
Received: (qmail 33448 invoked by uid 500); 17 Dec 2007 08:32:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33407 invoked by uid 500); 17 Dec 2007 08:32:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33396 invoked by uid 99); 17 Dec 2007 08:32:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 00:32:22 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [134.130.7.72] (HELO mta-1.ms.rz.rwth-aachen.de) (134.130.7.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 08:32:09 +0000
Received: from ironport-out-1.rz.rwth-aachen.de ([134.130.3.58])
 by mta-1.ms.rz.RWTH-Aachen.de
 (Sun Java System Messaging Server 6.2-8.04 (built Feb 28 2007))
 with ESMTP id <0JT600A7NQDC2200@mta-1.ms.rz.RWTH-Aachen.de> for
 java-user@lucene.apache.org; Mon, 17 Dec 2007 09:32:00 +0100 (CET)
Received: from relay.rwth-aachen.de ([134.130.3.1])
 by ironport-in-1.rz.rwth-aachen.de with ESMTP; Mon, 17 Dec 2007 09:32:01 +0100
Received: from numa-i.igpm.rwth-aachen.de
 (numa-i.igpm.RWTH-Aachen.DE [134.130.161.252])
	by relay.rwth-aachen.de (8.13.7/8.13.3/1) with ESMTP id lBH8W0VB024020	for
 <java-user@lucene.apache.org>; Mon, 17 Dec 2007 09:32:00 +0100 (MET)
Received: by numa-i.igpm.rwth-aachen.de (Postfix, from userid 230)
	id 0F2001067C9; Mon, 17 Dec 2007 09:32:00 +0100 (CET)
Date: Mon, 17 Dec 2007 09:31:59 +0100 (CET)
From: Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
Subject: FuzzyQuery - prefixLength - use with QueryParser?
To: java-user@lucene.apache.org
Reply-to: jarausch@igpm.rwth-aachen.de
Message-id: <tkrat.0ce38be40c6bf775@igpm.rwth-aachen.de>
MIME-version: 1.0
Content-type: TEXT/PLAIN; CHARSET=us-ascii
Content-transfer-encoding: 7BIT
Content-disposition: INLINE
X-IronPort-AV: E=Sophos;i="4.24,175,1196636400";   d="scan'208";a="39819786"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

FuzzyQuery (in the 2.2.0 API) may take 3 arguments,
term , minimumSimilarity and prefixLength

Is there any syntax to specify the 3rd argument
in a query term for QueryParser?
(I haven't found any the current docs)

Many thanks for a hint,

Helmut Jarausch

Lehrstuhl fuer Numerische Mathematik
RWTH - Aachen University
D 52056 Aachen, Germany

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 08:43:43 2007
Return-Path: <java-user-return-31512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15548 invoked from network); 17 Dec 2007 08:43:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 08:43:43 -0000
Received: (qmail 52247 invoked by uid 500); 17 Dec 2007 08:43:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51962 invoked by uid 500); 17 Dec 2007 08:43:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51951 invoked by uid 99); 17 Dec 2007 08:43:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 00:43:26 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [134.130.7.72] (HELO mta-1.ms.rz.rwth-aachen.de) (134.130.7.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 08:43:03 +0000
Received: from ironport-out-1.rz.rwth-aachen.de ([134.130.3.58])
 by mta-1.ms.rz.RWTH-Aachen.de
 (Sun Java System Messaging Server 6.2-8.04 (built Feb 28 2007))
 with ESMTP id <0JT600A78QTZ2210@mta-1.ms.rz.RWTH-Aachen.de> for
 java-user@lucene.apache.org; Mon, 17 Dec 2007 09:41:59 +0100 (CET)
Received: from relay.rwth-aachen.de ([134.130.3.1])
 by ironport-in-1.rz.rwth-aachen.de with ESMTP; Mon, 17 Dec 2007 09:42:00 +0100
Received: from numa-i.igpm.rwth-aachen.de
 (numa-i.igpm.RWTH-Aachen.DE [134.130.161.252])
	by relay.rwth-aachen.de (8.13.7/8.13.3/1) with ESMTP id lBH8fxWW025665	for
 <java-user@lucene.apache.org>; Mon, 17 Dec 2007 09:41:59 +0100 (MET)
Received: by numa-i.igpm.rwth-aachen.de (Postfix, from userid 230)
	id D588B1067C9; Mon, 17 Dec 2007 09:41:58 +0100 (CET)
Date: Mon, 17 Dec 2007 09:41:58 +0100 (CET)
From: Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
Subject: FuzzyQuery - rounding bug?
To: java-user@lucene.apache.org
Reply-to: jarausch@igpm.rwth-aachen.de
Message-id: <tkrat.a8424b17ea54a398@igpm.rwth-aachen.de>
MIME-version: 1.0
Content-type: TEXT/PLAIN; CHARSET=us-ascii
Content-transfer-encoding: 7BIT
Content-disposition: INLINE
X-IronPort-AV: E=Sophos;i="4.24,175,1196636400";   d="scan'208";a="39821716"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

according to the LiA book the FuzzyQuery distance is computed as

1- distance / min(textlen,targetlen)

Given
def addDoc(text, writer):
    doc = Document()
    doc.add(Field("field", text,
                  Field.Store.YES, Field.Index.TOKENIZED))
    writer.addDocument(doc)
    
addDoc("aaaaa", writer)
addDoc("aaaab", writer)
addDoc("aaabb", writer)
addDoc("aabbb", writer)
addDoc("abbbb", writer)
addDoc("bbbbb", writer)
addDoc("ddddd", writer)

query = FuzzyQuery(Term("field", "aaaaa"),0.8,0)

should find "aaaab' since we have
distance = 1
min(textlen,targetlen) = 5

It does find it with
query = FuzzyQuery(Term("field", "aaaaa"),0.79,0)
though.

Is there a rounding error bug?

(this is with lucene-java-2.2.0-603782)

Helmut Jarausch

Lehrstuhl fuer Numerische Mathematik
RWTH - Aachen University
D 52056 Aachen, Germany

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 09:28:57 2007
Return-Path: <java-user-return-31513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31594 invoked from network); 17 Dec 2007 09:28:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 09:28:57 -0000
Received: (qmail 13501 invoked by uid 500); 17 Dec 2007 09:28:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13457 invoked by uid 500); 17 Dec 2007 09:28:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13422 invoked by uid 99); 17 Dec 2007 09:28:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 01:28:21 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [134.130.7.73] (HELO mta-2.ms.rz.rwth-aachen.de) (134.130.7.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 09:28:09 +0000
Received: from ironport-out-1.rz.rwth-aachen.de ([134.130.3.58])
 by mta-2.ms.rz.RWTH-Aachen.de
 (Sun Java System Messaging Server 6.2-8.04 (built Feb 28 2007))
 with ESMTP id <0JT600FBWSYOYK50@mta-2.ms.rz.RWTH-Aachen.de> for
 java-user@lucene.apache.org; Mon, 17 Dec 2007 10:28:00 +0100 (CET)
Received: from relay.rwth-aachen.de ([134.130.3.1])
 by ironport-in-1.rz.rwth-aachen.de with ESMTP; Mon, 17 Dec 2007 10:28:00 +0100
Received: from numa-i.igpm.rwth-aachen.de
 (numa-i.igpm.RWTH-Aachen.DE [134.130.161.252])
	by relay.rwth-aachen.de (8.13.7/8.13.3/1) with ESMTP id lBH9S0vg004566	for
 <java-user@lucene.apache.org>; Mon, 17 Dec 2007 10:28:00 +0100 (MET)
Received: by numa-i.igpm.rwth-aachen.de (Postfix, from userid 230)
	id A33F11067C9; Mon, 17 Dec 2007 10:27:58 +0100 (CET)
Date: Mon, 17 Dec 2007 10:27:58 +0100 (CET)
From: Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
Subject: FuzzyQuery + QueryParser - I'm puzzled
To: java-user@lucene.apache.org
Reply-to: jarausch@igpm.rwth-aachen.de
Message-id: <tkrat.3404d8af68c495b0@igpm.rwth-aachen.de>
MIME-version: 1.0
Content-type: TEXT/PLAIN; CHARSET=us-ascii
Content-transfer-encoding: 7BIT
Content-disposition: INLINE
X-IronPort-AV: E=Sophos;i="4.24,175,1196636400";   d="scan'208";a="39831304"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

please help I am totally puzzled.

The same query, once with a direct call to FuzzyQuery
succeeds while the same query with QueryParser fails.

What am I missing?

Sorry, I'm using pylucene (with lucene-java-2.2.0-603782)

#!/usr/bin/python
import lucene
from lucene import *
lucene.initVM(lucene.CLASSPATH)

directory = RAMDirectory()
writer = IndexWriter(directory, WhitespaceAnalyzer(), True)
doc = Document()
doc.add(Field("field","Wolfgang Dahmen  Arnold Reusken",
              Field.Store.YES, Field.Index.TOKENIZED))
writer.addDocument(doc)

writer.optimize()
writer.close()

searcher = IndexSearcher(directory)

FQ= True
# FQ= False   # this case doesn't find anything  <+++++  WHY 

if  FQ :
  # this succeeds in finding the entry above
  query = FuzzyQuery(Term("field", "Damen"),0.79,0)
else :
  # this fails to find that entry
  parser= QueryParser("field",WhitespaceAnalyzer())
  query= parser.parse("Damen~0.79")

hits = searcher.search(query)
print "there are",hits.length(),"hits"
for k in range(0,hits.length()) :
  print hits.doc(k).get("field")

-- 
Helmut Jarausch

Lehrstuhl fuer Numerische Mathematik
RWTH - Aachen University
D 52056 Aachen, Germany

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 10:15:23 2007
Return-Path: <java-user-return-31514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46505 invoked from network); 17 Dec 2007 10:15:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 10:15:22 -0000
Received: (qmail 78894 invoked by uid 500); 17 Dec 2007 10:15:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78857 invoked by uid 500); 17 Dec 2007 10:15:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78846 invoked by uid 99); 17 Dec 2007 10:15:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 02:15:06 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 10:14:43 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J4Czm-0002QG-Kg
	for java-user@lucene.apache.org; Mon, 17 Dec 2007 02:14:46 -0800
Message-ID: <14370200.post@talk.nabble.com>
Date: Mon, 17 Dec 2007 02:14:46 -0800 (PST)
From: qvall <qvall@o2.pl>
To: java-user@lucene.apache.org
Subject: Re: Query.rewrite - help me to understand it
In-Reply-To: <ee0c896c0712130407l75e9c522y497f48dd0dcf818a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: qvall@o2.pl
References: <tkrat.0946e48632677400@igpm.rwth-aachen.de> <ee0c896c0712130407l75e9c522y497f48dd0dcf818a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


So does it mean that if I my query doesn't support prefix or wild-char
queries then I don't need to use rewrite() for highlighting?
-- 
View this message in context: http://www.nabble.com/Query.rewrite---help-me-to-understand-it-tp14314507p14370200.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 10:58:06 2007
Return-Path: <java-user-return-31515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65102 invoked from network); 17 Dec 2007 10:58:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 10:58:05 -0000
Received: (qmail 27084 invoked by uid 500); 17 Dec 2007 10:57:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27052 invoked by uid 500); 17 Dec 2007 10:57:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27041 invoked by uid 99); 17 Dec 2007 10:57:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 02:57:49 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of anjana.mprasad@gmail.com designates 72.14.202.177 as permitted sender)
Received: from [72.14.202.177] (HELO ro-out-1112.google.com) (72.14.202.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 10:57:27 +0000
Received: by ro-out-1112.google.com with SMTP id m6so619364roe.7
        for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 02:57:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=IPW05hy8oIgUWdJUAZTkqeFbuDNAIirYvm/Io8Z/eVI=;
        b=JEC4CCWfCf+u4DIndeOU/Z58MRLzDBk88iD9pUiav9CwXFBGmuYhk5e/nD0kgD/qoEgwYzIObnKS2fx7nJCE/cp4DAYZg/IP4FaghrT+HpxMefcx7/mYwEozO5F+gymatk2y/F0z3QwzV1qa2W5bvVE/FeXzqw9K7JRu8pjnk9k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JWp4krYy9Q3DdABUHDeVqniE9eZxz/XCYTRD5ZMRMaGtRd06bjUdYkG4XR/NeQZBLcBp5OHmFvvsbV6LlM1zC7SQ8GnBzVhOpZ5tcXupbdSRQYzbjLF1V1fe8Wu/GflYFVNQTjR6M3YmemPrfX/fzn7MJ0AYSB+6bRBcyfwQjdQ=
Received: by 10.143.162.8 with SMTP id p8mr492232wfo.49.1197889049252;
        Mon, 17 Dec 2007 02:57:29 -0800 (PST)
Received: by 10.142.199.6 with HTTP; Mon, 17 Dec 2007 02:57:29 -0800 (PST)
Message-ID: <3126751e0712170257k466d833bidf20087acdf9d354@mail.gmail.com>
Date: Mon, 17 Dec 2007 16:27:29 +0530
From: "anjana m" <anjana.mprasad@gmail.com>
To: java-user@lucene.apache.org, jarausch@igpm.rwth-aachen.de
Subject: Re: FuzzyQuery - rounding bug?
In-Reply-To: <tkrat.a8424b17ea54a398@igpm.rwth-aachen.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7207_28956314.1197889049269"
References: <tkrat.a8424b17ea54a398@igpm.rwth-aachen.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7207_28956314.1197889049269
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

how to i use lucene search to serach files of the local system

On Dec 17, 2007 2:11 PM, Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
wrote:

> Hi,
>
> according to the LiA book the FuzzyQuery distance is computed as
>
> 1- distance / min(textlen,targetlen)
>
> Given
> def addDoc(text, writer):
>    doc = Document()
>    doc.add(Field("field", text,
>                  Field.Store.YES, Field.Index.TOKENIZED))
>    writer.addDocument(doc)
>
> addDoc("aaaaa", writer)
> addDoc("aaaab", writer)
> addDoc("aaabb", writer)
> addDoc("aabbb", writer)
> addDoc("abbbb", writer)
> addDoc("bbbbb", writer)
> addDoc("ddddd", writer)
>
> query = FuzzyQuery(Term("field", "aaaaa"),0.8,0)
>
> should find "aaaab' since we have
> distance = 1
> min(textlen,targetlen) = 5
>
> It does find it with
> query = FuzzyQuery(Term("field", "aaaaa"),0.79,0)
> though.
>
> Is there a rounding error bug?
>
> (this is with lucene-java-2.2.0-603782)
>
> Helmut Jarausch
>
> Lehrstuhl fuer Numerische Mathematik
> RWTH - Aachen University
> D 52056 Aachen, Germany
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_7207_28956314.1197889049269--

From java-user-return-31516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 11:04:50 2007
Return-Path: <java-user-return-31516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68810 invoked from network); 17 Dec 2007 11:04:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 11:04:50 -0000
Received: (qmail 43147 invoked by uid 500); 17 Dec 2007 11:04:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43118 invoked by uid 500); 17 Dec 2007 11:04:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43107 invoked by uid 99); 17 Dec 2007 11:04:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 03:04:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 209.85.134.187 as permitted sender)
Received: from [209.85.134.187] (HELO mu-out-0910.google.com) (209.85.134.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 11:04:10 +0000
Received: by mu-out-0910.google.com with SMTP id i10so2837673mue.5
        for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 03:04:12 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=zVyADrzKe3fxANCAblG2w9KzZ8NHTDiWUD/Pbxdeos4=;
        b=SAkyi348mVqJ7kJgrMvLD8AXmwEDFs48TXkC3qAye6i4cgcJs08TZ9KCNanx3POkG6lfcvyFRgwgrFJOT7RivQ3CIYPk7sT6SrDyXa7eCJFdwbEYGO8CVeaZlpWAwg7yPOEZlU2mjRcFIOywEkvb2FUUlK//SUGK5xWvll8Em8g=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=lSW/9tGamSFyHc5vM9g9j4Mht8Y78CUNrSQXaCeKm6c0cTkue0nQcXoMe3kKdqTby1AY48YAx1QUNfIXNbQILrhaAyye7yT981V/dgJbnUkZOCnWj16tM2f/vaQVaghhVz/HH30FlXJkeWEXCBkMcvgVeYr5ydDzsgiijy/41Uw=
Received: by 10.86.70.8 with SMTP id s8mr6303425fga.29.1197889452155;
        Mon, 17 Dec 2007 03:04:12 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Mon, 17 Dec 2007 03:04:12 -0800 (PST)
Message-ID: <e05f0fd10712170304x32afb634y3ef5f8b4a2422fb1@mail.gmail.com>
Date: Mon, 17 Dec 2007 13:04:12 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org, jarausch@igpm.rwth-aachen.de
Subject: Re: FuzzyQuery + QueryParser - I'm puzzled
In-Reply-To: <tkrat.3404d8af68c495b0@igpm.rwth-aachen.de>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5788_24330975.1197889452117"
References: <tkrat.3404d8af68c495b0@igpm.rwth-aachen.de>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5788_24330975.1197889452117
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See in Lucene FAQ:
  "Are Wildcard, Prefix, and Fuzzy queries case sensitive?"

On Dec 17, 2007 11:27 AM, Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
wrote:

> Hi,
>
> please help I am totally puzzled.
>
> The same query, once with a direct call to FuzzyQuery
> succeeds while the same query with QueryParser fails.
>
> What am I missing?
>
> Sorry, I'm using pylucene (with lucene-java-2.2.0-603782)
>
> #!/usr/bin/python
> import lucene
> from lucene import *
> lucene.initVM(lucene.CLASSPATH)
>
> directory = RAMDirectory()
> writer = IndexWriter(directory, WhitespaceAnalyzer(), True)
> doc = Document()
> doc.add(Field("field","Wolfgang Dahmen  Arnold Reusken",
>              Field.Store.YES, Field.Index.TOKENIZED))
> writer.addDocument(doc)
>
> writer.optimize()
> writer.close()
>
> searcher = IndexSearcher(directory)
>
> FQ= True
> # FQ= False   # this case doesn't find anything  <+++++  WHY
>
> if  FQ :
>  # this succeeds in finding the entry above
>  query = FuzzyQuery(Term("field", "Damen"),0.79,0)
> else :
>  # this fails to find that entry
>  parser= QueryParser("field",WhitespaceAnalyzer())
>  query= parser.parse("Damen~0.79")
>
> hits = searcher.search(query)
> print "there are",hits.length(),"hits"
> for k in range(0,hits.length()) :
>  print hits.doc(k).get("field")
>
> --
> Helmut Jarausch
>
> Lehrstuhl fuer Numerische Mathematik
> RWTH - Aachen University
> D 52056 Aachen, Germany
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_5788_24330975.1197889452117--

From java-user-return-31517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 11:24:44 2007
Return-Path: <java-user-return-31517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74705 invoked from network); 17 Dec 2007 11:24:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 11:24:44 -0000
Received: (qmail 67277 invoked by uid 500); 17 Dec 2007 11:24:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66546 invoked by uid 500); 17 Dec 2007 11:24:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66535 invoked by uid 99); 17 Dec 2007 11:24:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 03:24:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of anjana.mprasad@gmail.com designates 72.14.202.181 as permitted sender)
Received: from [72.14.202.181] (HELO ro-out-1112.google.com) (72.14.202.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 11:24:15 +0000
Received: by ro-out-1112.google.com with SMTP id m6so630151roe.7
        for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 03:24:06 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=lXm6XhuDTXnyrdU4Q1pjyvRSyyVqpc98Q+b7wrrXK5k=;
        b=d2NARUJtXNXXQ0nv931zpewQKspoYxdef2yCj495CTDdZDihl494LryEWWqiquTn89/O/7bKcGg45i3OBGPSp7rEevej1xAe6jplIDBZ6XAPVXyG5Uhq40RLhPqZ6pEQ2sk/cvz9FuGp2GokiqXicd0iI18I8+e3/ZEnKYFx2Eg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=UrMDTjy/QC07DE82yXcTmR7irnwVfT6vUDlf+2l0MWrZ+q2iaLPw41WiQT0VZRJP2GJl5mfwQ2OZNon0nFb0jDvOq02g3IfvS1+a4BziDY++rRzgB7qUjkjGhGCd7rPAfn1yitzpCKLmzsT0DeCI8r16balE4z/koqyXgGljXe8=
Received: by 10.142.242.8 with SMTP id p8mr2654165wfh.70.1197890646036;
        Mon, 17 Dec 2007 03:24:06 -0800 (PST)
Received: by 10.142.199.6 with HTTP; Mon, 17 Dec 2007 03:24:05 -0800 (PST)
Message-ID: <3126751e0712170324h4d55d338gfd90ffb0683c2c3e@mail.gmail.com>
Date: Mon, 17 Dec 2007 16:54:05 +0530
From: "anjana m" <anjana.mprasad@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FuzzyQuery + QueryParser - I'm puzzled
In-Reply-To: <e05f0fd10712170304x32afb634y3ef5f8b4a2422fb1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_7239_15342733.1197890646014"
References: <tkrat.3404d8af68c495b0@igpm.rwth-aachen.de>
	 <e05f0fd10712170304x32afb634y3ef5f8b4a2422fb1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_7239_15342733.1197890646014
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

hey i amnot bale to comple packages are not found..
i download..the luncene package..
help me..
.lucene.search.Hits;
import org.apache.lucene.search.Query;
import org.apache.lucene.document.Field;
import org.apache.lucene.search.Searcher;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.document.Document;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.analysis.standard.StandardAnalyzer;

On Dec 17, 2007 4:34 PM, Doron Cohen <cdoronc@gmail.com> wrote:

> See in Lucene FAQ:
>  "Are Wildcard, Prefix, and Fuzzy queries case sensitive?"
>
> On Dec 17, 2007 11:27 AM, Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
> wrote:
>
> > Hi,
> >
> > please help I am totally puzzled.
> >
> > The same query, once with a direct call to FuzzyQuery
> > succeeds while the same query with QueryParser fails.
> >
> > What am I missing?
> >
> > Sorry, I'm using pylucene (with lucene-java-2.2.0-603782)
> >
> > #!/usr/bin/python
> > import lucene
> > from lucene import *
> > lucene.initVM(lucene.CLASSPATH)
> >
> > directory = RAMDirectory()
> > writer = IndexWriter(directory, WhitespaceAnalyzer(), True)
> > doc = Document()
> > doc.add(Field("field","Wolfgang Dahmen  Arnold Reusken",
> >              Field.Store.YES, Field.Index.TOKENIZED))
> > writer.addDocument(doc)
> >
> > writer.optimize()
> > writer.close()
> >
> > searcher = IndexSearcher(directory)
> >
> > FQ= True
> > # FQ= False   # this case doesn't find anything  <+++++  WHY
> >
> > if  FQ :
> >  # this succeeds in finding the entry above
> >  query = FuzzyQuery(Term("field", "Damen"),0.79,0)
> > else :
> >  # this fails to find that entry
> >  parser= QueryParser("field",WhitespaceAnalyzer())
> >  query= parser.parse("Damen~0.79")
> >
> > hits = searcher.search(query)
> > print "there are",hits.length(),"hits"
> > for k in range(0,hits.length()) :
> >  print hits.doc(k).get("field")
> >
> > --
> > Helmut Jarausch
> >
> > Lehrstuhl fuer Numerische Mathematik
> > RWTH - Aachen University
> > D 52056 Aachen, Germany
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_7239_15342733.1197890646014--

From java-user-return-31518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 11:25:34 2007
Return-Path: <java-user-return-31518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74943 invoked from network); 17 Dec 2007 11:25:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 11:25:33 -0000
Received: (qmail 68799 invoked by uid 500); 17 Dec 2007 11:25:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68518 invoked by uid 500); 17 Dec 2007 11:25:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68507 invoked by uid 99); 17 Dec 2007 11:25:16 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 03:25:16 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of d.reeja@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 11:24:55 +0000
Received: by py-out-1112.google.com with SMTP id d32so9819288pye.12
        for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 03:24:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=w4JPBDucUq9mFdnoVfEyRuoK3om3KfZ1tNzafqQu+lw=;
        b=OhjRG1pE60CjuGXQ1+/PvqgNhiz/p6wT84s+NI5m663Ms0rsfx923grUFZifXj0Hl+I3rLzkdAsT2QVDkHtriTmlPgtgvaJnd0ztbRMdquFCvGiHNxKBjaUjIFvuvfPhCtVKaw6rvFTkunzPlJpchA5KDOsLwg7OGpd3DuwRp/M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=W4RJ1pWP40GE5C6BrWt1a8vroLMbtPx/xp6RSHp5Zqpwhm0cpCaoXdP3+8sSwxqdsx9w0bcbzkxq7OSD2rvwH62on+Qq3j+bKHmRjgA+VRXFh7gaRJoz3tPYOqD6VuJfkhnJvu9aW/U633JT8hrzp+fIN0JXAyCBi3lzfBNi/HM=
Received: by 10.35.115.18 with SMTP id s18mr1326356pym.59.1197890697090;
        Mon, 17 Dec 2007 03:24:57 -0800 (PST)
Received: by 10.35.46.17 with HTTP; Mon, 17 Dec 2007 03:24:57 -0800 (PST)
Message-ID: <97e4e6700712170324g32c78c71ma2285edc994c02a6@mail.gmail.com>
Date: Mon, 17 Dec 2007 16:54:57 +0530
From: "reeja devadas" <d.reeja@gmail.com>
To: java-user@lucene.apache.org
Subject: Error with Remote Parallel MultiSearching
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9842_29037979.1197890697073"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9842_29037979.1197890697073
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,

We are working with a web server and 10 search servers, these 10 servers
have index fragments on it. All available fragments of these search servers
are binding at their start up time. Remote Parallel MultiSearcher is used
for searching on these indices. When a search request comes, first it
lookup(Naming.lookUp), requested fragments is available or not. Then create
a list of  Searchable objects for available requested fragments. Doing
further steps of Remote Parallel MultiSearching with this searchables
objects. And the searching works properly with our environment.

But getting the below error once in a while when the search request come,
but there is no error when the requested Index fragment lookup time. Due to
the problem of anyone of the Searcherable fragments, entire search request
goes to exception. Error might be of corrupted Index in a particular
fragments, or machine problem, or remote objects problems.

at first time the error is like this

ERROR [Main Thread] 13 Dec 2007 06:45:41,229 (SearchMaster.java:249) -
caught a class java.rmi.ServerError
 with message: Error occurred in server thread; nested exception is:
        java.lang.OutOfMemoryError: nativeGetNewTLA
Exception in thread "Main Thread" java.rmi.ServerError: Error occurred in
server thread; nested exception is:
        java.lang.OutOfMemoryError: nativeGetNewTLA
        at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java
:333)
        at sun.rmi.transport.Transport$1.run(Transport.java:159)
        at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
        at sun.rmi.transport.tcp.TCPTransport.handleMessages(
TCPTransport.java:535)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(
TCPTransport.java:790)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(
TCPTransport.java:649)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(
ThreadPoolExecutor.java:885)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(
ThreadPoolExecutor.java:907)
        at java.lang.Thread.run(Thread.java:619)
        at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(
StreamRemoteCall.java:255)
        at sun.rmi.transport.StreamRemoteCall.executeCall(
StreamRemoteCall.java:233)
        at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:142)
        at org.apache.lucene.search.RemoteSearchable_Stub.rewrite(Unknown
Source)
        at org.apache.lucene.search.MultiSearcher.rewrite(MultiSearcher.java
:261)
        at org.apache.lucene.search.ParallelMultiSearcher.rewrite(
ParallelMultiSearcher.java:187)
        at org.apache.lucene.search.Query.weight(Query.java:94)
        at org.apache.lucene.search.Hits.<init>(Hits.java:49)
        at org.apache.lucene.search.Searcher.search(Searcher.java:54)
        at com.sumobrain.search.SearchMaster.doSearch(SearchMaster.java:244)
        at com.sumobrain.search.SearchMaster.main(SearchMaster.java:672)
Caused by: java.lang.OutOfMemoryError: nativeGetNewTLA
        at sun.reflect.ByteVectorImpl.resize(ByteVectorImpl.java:66)
        at sun.reflect.ByteVectorImpl.add(ByteVectorImpl.java:45)
        at sun.reflect.ClassFileAssembler.emitByte(ClassFileAssembler.java
:56)
        at sun.reflect.ClassFileAssembler.emitConstantPoolUTF8(
ClassFileAssembler.java:89)
        at sun.reflect.AccessorGenerator.emitCommonConstantPoolEntries(
AccessorGenerator.java:123)
        at sun.reflect.MethodAccessorGenerator.generate(
MethodAccessorGenerator.java:333)
        at
sun.reflect.MethodAccessorGenerator.generateSerializationConstructor(
MethodAccessorGenerator.java:95)
        at sun.reflect.ReflectionFactory.newConstructorForSerialization(
ReflectionFactory.java:313)
        at java.io.ObjectStreamClass.getSerializableConstructor(
ObjectStreamClass.java:1327)
        at java.io.ObjectStreamClass.access$1500(ObjectStreamClass.java:52)
        at java.io.ObjectStreamClass$2.run(ObjectStreamClass.java:437)
        at java.io.ObjectStreamClass.<init>(ObjectStreamClass.java:413)
        at java.io.ObjectStreamClass.lookup0(ObjectStreamClass.java:310)
        at java.io.ObjectStreamClass.lookup(ObjectStreamClass.java)
        at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java
:547)
        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java
:1583)
        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java
:1496)
        at java.io.ObjectInputStream.readOrdinaryObject(
ObjectInputStream.java:1732)
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java
:1329)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:351)
        at sun.rmi.server.UnicastRef.unmarshalValue(UnicastRef.java:306)
        at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java
:290)
        at sun.rmi.transport.Transport$1.run(Transport.java:159)
        at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
        at sun.rmi.transport.tcp.TCPTransport.handleMessages(
TCPTransport.java:535)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(
TCPTransport.java:790)
        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(
TCPTransport.java:649)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(
ThreadPoolExecutor.java:885)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(
ThreadPoolExecutor.java:907)
        at java.lang.Thread.run(Thread.java:619)

but some times the error message is like this

17 Dec 2007 15:40:59,834 (SearchMaster.java:249) -  caught a class
java.lang.NullPointerException
 with message: null
Exception in thread "main" java.lang.NullPointerException
    at org.apache.lucene.index.TermInfosReader.ensureIndexIsRead(
TermInfosReader.java:100)
    at org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:133)
    at org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:358)
    at org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:79)
    at org.apache.lucene.search.RemoteSearchable.docFreq(
RemoteSearchable.java:57)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(
NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(
DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:294)
    at sun.rmi.transport.Transport$1.run(Transport.java:153)
    at java.security.AccessController.doPrivileged(Native Method)
    at sun.rmi.transport.Transport.serviceCall(Transport.java:149)
    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java
:460)
    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(
TCPTransport.java:701)
    at java.lang.Thread.run(Thread.java:595)
    at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(
StreamRemoteCall.java:247)
    at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java
:223)
    at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:126)
    at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(
RemoteObjectInvocationHandler.java:179)
    at java.rmi.server.RemoteObjectInvocationHandler.invoke(
RemoteObjectInvocationHandler.java:132)
    at $Proxy0.docFreq(Unknown Source)
    at org.apache.lucene.search.MultiSearcher.docFreq(MultiSearcher.java
:140)
    at org.apache.lucene.search.ParallelMultiSearcher.docFreq(
ParallelMultiSearcher.java:46)
    at org.apache.lucene.search.Similarity.idf(Similarity.java:457)
    at org.apache.lucene.search.TermQuery$TermWeight.<init>(TermQuery.java
:44)
    at org.apache.lucene.search.TermQuery.createWeight(TermQuery.java:145)
    at org.apache.lucene.search.BooleanQuery$BooleanWeight.<init>(
BooleanQuery.java:187)
    at org.apache.lucene.search.BooleanQuery$BooleanWeight2.<init>(
BooleanQuery.java:342)
    at org.apache.lucene.search.BooleanQuery.createWeight(BooleanQuery.java
:384)
    at org.apache.lucene.search.Query.weight(Query.java:95)
    at org.apache.lucene.search.Hits.<init>(Hits.java:49)
    at org.apache.lucene.search.Searcher.search(Searcher.java:54)
    at com.sumobrain.search.SearchMaster.doSearch(SearchMaster.java:244)
    at com.sumobrain.search.SearchMaster.main(SearchMaster.java:672)


on debugging to the code, error location was at
MultiSearcher : public int docFreq(Term term) throws IOException {
.....
}

in lucene this method is like this
public int docFreq(Term term) throws IOException {
                int docFreq = 0;
    for (int i = 0; i < searchables.length; i++)
      docFreq += searchables[i].docFreq(term);
    return docFreq;
}

with this code if anyone of searchebles[i].docFreq[] goes to error,
searching terminated unexpectedly.
Modified the method by removing erroneous Searchable object from Searchables
list, and updated the Searchable list, after removal of object. Modified
Searchables list is used for further search processing.

modified code :

public int docFreq(Term term) throws IOException {
        int docFreq = 0;
        boolean exceptionOccured = false;
        for (int i = 0; i < searchables.length; i++)
            if (searchables[i] != null ) {
                try {
                    docFreq += searchables[i].docFreq(term);
                } catch (Exception e ) {
                    // e.printStackTrace();
                    exceptionOccured = true;
                    searchables[i] = null;
                }
            }
        if (exceptionOccured) {
            List<Searchable> searchableList = new ArrayList<Searchable>();
            for (int j = 0; j < searchables.length; j++) {
                if (searchables[j] != null ) {
                    searchableList.add(searchables[j]);
                }
            }
            this.searchables = searchableList.toArray(new Searchable[0]);
        }
        return docFreq;
    }

Modified Searchable list by MultiSearcher is updated with
ParallelMultiSearcher, before starting MultiSearcherThreads.

Modification in ParallelMultiSearcher : TopDocs search(......) method,
updated Searchable list before starting the  MultiSearcherThreads

this.searchables = getSearchables(); // get updated Searchable list from
MultiSearcher

With these code modification, we could overcome the above error situation,
and can search with other index fragments without any other error.
Some time we could recover this error by restarting search servers, and can
search into the same fragments without any problem.

Is this problem is due to any lucene error or any of the problem with our
working enviornment.
Could you suggest about this, please.

Thanks
Reeja

------=_Part_9842_29037979.1197890697073--

From java-user-return-31519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 15:07:04 2007
Return-Path: <java-user-return-31519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86451 invoked from network); 17 Dec 2007 15:07:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 15:07:04 -0000
Received: (qmail 94760 invoked by uid 500); 17 Dec 2007 15:06:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94726 invoked by uid 500); 17 Dec 2007 15:06:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94714 invoked by uid 99); 17 Dec 2007 15:06:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 07:06:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 15:06:25 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3E91B30EFC21; Mon, 17 Dec 2007 08:06:28 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.199] (va-71-53-208-47.dyn.embarqhsd.net [71.53.208.47])
	by ehatchersolutions.com (Postfix) with ESMTP id 14D3330EFC1A
	for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 08:06:25 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <tkrat.0ce38be40c6bf775@igpm.rwth-aachen.de>
References: <tkrat.0ce38be40c6bf775@igpm.rwth-aachen.de>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B2EFE195-30B7-44A9-BF6B-DB38CC2B1AC7@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: FuzzyQuery - prefixLength - use with QueryParser?
Date: Mon, 17 Dec 2007 10:06:22 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.7 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Dec 17, 2007, at 3:31 AM, Helmut Jarausch wrote:
> FuzzyQuery (in the 2.2.0 API) may take 3 arguments,
> term , minimumSimilarity and prefixLength
>
> Is there any syntax to specify the 3rd argument
> in a query term for QueryParser?
> (I haven't found any the current docs)


No, there isn't.  But you can set it via the API, see  
QueryParser#setFuzzyPrefixLength(int)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 15:09:42 2007
Return-Path: <java-user-return-31520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3412 invoked from network); 17 Dec 2007 15:09:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 15:09:41 -0000
Received: (qmail 447 invoked by uid 500); 17 Dec 2007 15:09:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 416 invoked by uid 500); 17 Dec 2007 15:09:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 405 invoked by uid 99); 17 Dec 2007 15:09:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 07:09:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 15:09:13 +0000
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 82A8E30EFC21; Mon, 17 Dec 2007 08:09:04 -0700 (MST)
X-Spam-Checker-Version: SpamAssassin 3.1.1 (2006-03-10) on javelina
X-Spam-Level: 
Received: from [10.0.1.199] (va-71-53-208-47.dyn.embarqhsd.net [71.53.208.47])
	by ehatchersolutions.com (Postfix) with ESMTP id AD20130EFC1A
	for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 08:09:00 -0700 (MST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <14370200.post@talk.nabble.com>
References: <tkrat.0946e48632677400@igpm.rwth-aachen.de> <ee0c896c0712130407l75e9c522y497f48dd0dcf818a@mail.gmail.com> <14370200.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <70045656-A51D-4A81-B47E-9E4E967F1063@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query.rewrite - help me to understand it
Date: Mon, 17 Dec 2007 10:08:57 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-0.7 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_SORBS_DUL autolearn=no version=3.1.1


On Dec 17, 2007, at 5:14 AM, qvall wrote:
> So does it mean that if I my query doesn't support prefix or wild-char
> queries then I don't need to use rewrite() for highlighting?

As long as the terms you want highlighted are extractable from the  
Query instance, all is fine.

However, it wouldn't hurt to always rewrite.  Primitive queries short  
circuit the rewriting anyway, so its not as though you're burning  
much unnecessary time/IO in the rewrite call.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 16:04:40 2007
Return-Path: <java-user-return-31521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84140 invoked from network); 17 Dec 2007 16:04:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 16:04:40 -0000
Received: (qmail 85958 invoked by uid 500); 17 Dec 2007 16:04:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85928 invoked by uid 500); 17 Dec 2007 16:04:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85917 invoked by uid 99); 17 Dec 2007 16:04:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 08:04:23 -0800
X-ASF-Spam-Status: No, hits=-2.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [134.130.7.72] (HELO mta-1.ms.rz.rwth-aachen.de) (134.130.7.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 16:04:00 +0000
Received: from ironport-out-2.rz.rwth-aachen.de ([134.130.3.59])
 by mta-1.ms.rz.RWTH-Aachen.de
 (Sun Java System Messaging Server 6.2-8.04 (built Feb 28 2007))
 with ESMTP id <0JT700CHMBAREP10@mta-1.ms.rz.RWTH-Aachen.de> for
 java-user@lucene.apache.org; Mon, 17 Dec 2007 17:04:03 +0100 (CET)
Received: from relay.rwth-aachen.de ([134.130.3.1])
 by ironport-in-2.rz.rwth-aachen.de with ESMTP; Mon, 17 Dec 2007 17:04:03 +0100
Received: from numa-i.igpm.rwth-aachen.de
 (numa-i.igpm.RWTH-Aachen.DE [134.130.161.252])
	by relay.rwth-aachen.de (8.13.7/8.13.3/1) with ESMTP id lBHG42Aj021447	for
 <java-user@lucene.apache.org>; Mon, 17 Dec 2007 17:04:02 +0100 (MET)
Received: by numa-i.igpm.rwth-aachen.de (Postfix, from userid 230)
	id DFBD81067C9; Mon, 17 Dec 2007 17:04:01 +0100 (CET)
Date: Mon, 17 Dec 2007 17:04:01 +0100 (CET)
From: Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
Subject: How to say Thank You ?
To: java-user@lucene.apache.org
Reply-to: jarausch@igpm.rwth-aachen.de
Message-id: <tkrat.ac750a85156435f9@igpm.rwth-aachen.de>
MIME-version: 1.0
Content-type: TEXT/PLAIN; CHARSET=us-ascii
Content-transfer-encoding: 7BIT
Content-disposition: INLINE
X-IronPort-AV: E=Sophos;i="4.24,177,1196636400";   d="scan'208";a="24830185"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

I have got invaluable help from several people of this list.
Unfortunately I couldn't guess the email of some of you.

So, many thanks to all who have helped me.
Merry Christmas and a Hapy New Year to you all.

(Perhaps someone comes up with a means to say 'thank you'
without 'polluting' the list for that and without
sacrificing privacy of the email addresses.)

Helmut.

-- 
Helmut Jarausch

Lehrstuhl fuer Numerische Mathematik
RWTH - Aachen University
D 52056 Aachen, Germany

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 16:40:16 2007
Return-Path: <java-user-return-31522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95471 invoked from network); 17 Dec 2007 16:40:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 16:40:16 -0000
Received: (qmail 44409 invoked by uid 500); 17 Dec 2007 16:40:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43457 invoked by uid 500); 17 Dec 2007 16:39:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43446 invoked by uid 99); 17 Dec 2007 16:39:58 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 08:39:58 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.145] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 16:39:45 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 755902121D
	for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 08:39:36 -0800 (PST)
Message-Id: <0E4B45EA-E684-4AE8-A995-C2FF2618D1C3@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <tkrat.ac750a85156435f9@igpm.rwth-aachen.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: How to say Thank You ?
Date: Mon, 17 Dec 2007 11:39:35 -0500
References: <tkrat.ac750a85156435f9@igpm.rwth-aachen.de>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

I don't consider sending this kind of message to the list pollution.   
It's good to take a step back from time to time and remember that  
almost all of us volunteer here, even if we get paid to work w/  
Lucene.  I am constantly amazed at the Lucene community and what it  
has to offer in the way of ideas, support and for, lack of a better  
word, niceness.  The sentiment is definitely appreciated and it is  
good to know we have happy users.

FWIW, other ways to say thanks include:
1. Contributing docs, patches, help to others when possible.  See http://wiki.apache.org/lucene-java/HowToContribute
2.  The ASF gladly accepts donations, since it is a non-profit.  See http://www.apache.org/foundation/contributing.html

Of course, neither of these are requirements for participation, but  
since you asked, I thought I would offer.

Cheers,
Grant

On Dec 17, 2007, at 11:04 AM, Helmut Jarausch wrote:

> Hi,
>
> I have got invaluable help from several people of this list.
> Unfortunately I couldn't guess the email of some of you.
>
> So, many thanks to all who have helped me.
> Merry Christmas and a Hapy New Year to you all.
>
> (Perhaps someone comes up with a means to say 'thank you'
> without 'polluting' the list for that and without
> sacrificing privacy of the email addresses.)
>
> Helmut.
>
> -- 
> Helmut Jarausch
>
> Lehrstuhl fuer Numerische Mathematik
> RWTH - Aachen University
> D 52056 Aachen, Germany
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>




--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 17:29:35 2007
Return-Path: <java-user-return-31523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15358 invoked from network); 17 Dec 2007 17:29:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 17:29:35 -0000
Received: (qmail 12402 invoked by uid 500); 17 Dec 2007 17:29:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12366 invoked by uid 500); 17 Dec 2007 17:29:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12355 invoked by uid 99); 17 Dec 2007 17:29:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 09:29:18 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 64.233.166.181 as permitted sender)
Received: from [64.233.166.181] (HELO py-out-1112.google.com) (64.233.166.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 17:28:55 +0000
Received: by py-out-1112.google.com with SMTP id d32so10355331pye.12
        for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 09:28:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        bh=HFhTlQuCAkL43oBxhIgGYblB9rpskP40GKZd9CidlCU=;
        b=GhvAcP/NzRJY8b2oQ4kJxNzb5VQG96saEs70QZy7LfTvqaiIgXJkW4WXKiIx4pGpP2VgzPC9GqBRSbhOUkHA2FSyelIviZrvdt/1TRmA7MAAjVc7ypO6kuXAMhdhgc9n5ooAFLhrYTOqMOd4l25vNtBLLkGt/+RvQtD5mKnhOnQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=GjHGrFhlxGnnPEriMEjNm6pD5M/ZOixknGQSdabtLj7xyRnP8PRZxgNdXEnU3RWJLttC5gw0k3Gu/m2sv8QeZF+Za62BBuHvinTg7cpwjTwL5mPPWSjSPb8TanHHkyRQkLEozTFjIzpFAzseRUa1/NdM5G5qEKA2XBkvc52gEug=
Received: by 10.65.231.20 with SMTP id i20mr15328117qbr.78.1197912537550;
        Mon, 17 Dec 2007 09:28:57 -0800 (PST)
Received: from ?192.168.1.104? ( [24.215.75.34])
        by mx.google.com with ESMTPS id e19sm4805817qba.2007.12.17.09.28.52
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 17 Dec 2007 09:28:53 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <99833356D526854CAF8ECF4D7C769D49C78B9D@MAIL05.northamerica.cerner.net>
References: <99833356D526854CAF8ECF4D7C769D49C78B9D@MAIL05.northamerica.cerner.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2789FED1-21C0-4D38-941D-FE52DF4703B1@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: thoughts/suggestions for analyzing/tokenizing class names
Date: Mon, 17 Dec 2007 09:28:49 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

On 15-Dec-07, at 3:14 PM, Beyer,Nathan wrote:

> I have a few fields that use package names and class names and I've  
> been
> looking for some suggestions for analyzing these fields.
>
> A few examples -
>
> Text (class name)
> - "org.apache.lucene.document.Document"
> Queries that would match
> - "org.apache" , "org.apache.lucene.document"
>
> Text (class name + method signature)
> -- "org.apache.lucene.document.Document#add(Fieldable)"
> Queries that would match
> -- "org.apache.lucene", "org.apache.lucene.document.Document#add"
>
> Any thoughts on how to approach tokenizing these types of texts?

Perhaps it would help to include some examples of queries you _don't_  
want to match.  For all the examples above, simply tokenizing  
alphanumeric components would suffice.

-Mike

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 17:40:22 2007
Return-Path: <java-user-return-31524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18165 invoked from network); 17 Dec 2007 17:40:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 17:40:21 -0000
Received: (qmail 23934 invoked by uid 500); 17 Dec 2007 17:40:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23897 invoked by uid 500); 17 Dec 2007 17:40:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23886 invoked by uid 99); 17 Dec 2007 17:40:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 09:40:05 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of NBEYER@cerner.com designates 159.140.213.228 as permitted sender)
Received: from [159.140.213.228] (HELO mail01.cerner.com) (159.140.213.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 17:39:44 +0000
Received: from msbhwhq03.northamerica.cerner.net (msbhwhq03.cerner.com [10.160.16.183])
	by mail01.cerner.com (8.13.8/8.13.8) with ESMTP id lBHHdhqs026989
	for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 11:39:47 -0600
Received: from MAIL05.northamerica.cerner.net ([10.160.16.178]) by msbhwhq03.northamerica.cerner.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 17 Dec 2007 11:39:41 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: thoughts/suggestions for analyzing/tokenizing class names
Date: Mon, 17 Dec 2007 11:39:15 -0600
Message-ID: <99833356D526854CAF8ECF4D7C769D49C78EFA@MAIL05.northamerica.cerner.net>
In-Reply-To: <2789FED1-21C0-4D38-941D-FE52DF4703B1@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: thoughts/suggestions for analyzing/tokenizing class names
Thread-Index: AchA0mNt2XZwheB/SXWjaH2ca6b2nwAAROgg
References: <99833356D526854CAF8ECF4D7C769D49C78B9D@MAIL05.northamerica.cerner.net> <2789FED1-21C0-4D38-941D-FE52DF4703B1@gmail.com>
From: "Beyer,Nathan" <NBEYER@CERNER.COM>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 17 Dec 2007 17:39:41.0973 (UTC) FILETIME=[CE13A450:01C840D3]
X-Proofpoint-Virus-Version: vendor=fsecure engine=4.65.5502:2.3.11,1.2.37,4.0.164 definitions=2007-12-17_06:2007-12-17,2007-12-17,2007-12-17 signatures=0
X-Virus-Checked: Checked by ClamAV on apache.org

Good point.

I don't want the sub-package names on their own to match.

Text (class name)
 - "org.apache.lucene.document.Document"
Queries that would match
 - "org.apache", "org.apache.lucene.document"
Queries that DO NOT match
 - "apache", "lucene", "document"

-Nathan

-----Original Message-----
From: Mike Klaas [mailto:mike.klaas@gmail.com]=20
Sent: Monday, December 17, 2007 11:29 AM
To: java-user@lucene.apache.org
Subject: Re: thoughts/suggestions for analyzing/tokenizing class names

On 15-Dec-07, at 3:14 PM, Beyer,Nathan wrote:

> I have a few fields that use package names and class names and I've=20=20
> been
> looking for some suggestions for analyzing these fields.
>
> A few examples -
>
> Text (class name)
> - "org.apache.lucene.document.Document"
> Queries that would match
> - "org.apache" , "org.apache.lucene.document"
>
> Text (class name + method signature)
> -- "org.apache.lucene.document.Document#add(Fieldable)"
> Queries that would match
> -- "org.apache.lucene", "org.apache.lucene.document.Document#add"
>
> Any thoughts on how to approach tokenizing these types of texts?

Perhaps it would help to include some examples of queries you _don't_=20=20
want to match.  For all the examples above, simply tokenizing=20=20
alphanumeric components would suffice.

-Mike

----------------------------------------------------------------------
CONFIDENTIALITY NOTICE This message and any included attachments are from C=
erner Corporation and are intended only for the addressee. The information =
contained in this message is confidential and may constitute inside or non-=
public information under international, federal, or state securities laws. =
Unauthorized forwarding, printing, copying, distribution, or use of such in=
formation is strictly prohibited and may be unlawful. If you are not the ad=
dressee, please promptly delete this message and notify the sender of the d=
elivery error by e-mail or you may call Cerner's corporate offices in Kansa=
s City, Missouri, U.S.A at (+1) (816)221-1024.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 17:49:12 2007
Return-Path: <java-user-return-31525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21578 invoked from network); 17 Dec 2007 17:49:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 17:49:11 -0000
Received: (qmail 36404 invoked by uid 500); 17 Dec 2007 17:48:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36366 invoked by uid 500); 17 Dec 2007 17:48:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36355 invoked by uid 99); 17 Dec 2007 17:48:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 09:48:53 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 17:48:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J4K4v-0001Ab-1X
	for java-user@lucene.apache.org; Mon, 17 Dec 2007 09:48:33 -0800
Message-ID: <14373945.post@talk.nabble.com>
Date: Mon, 17 Dec 2007 09:48:33 -0800 (PST)
From: Sirish Vadala <vsirishreddy@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Phrase Query Problem
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vsirishreddy@yahoo.co.in
X-Virus-Checked: Checked by ClamAV on apache.org


I have the following code for search:

BooleanQuery bQuery = new BooleanQuery();
Query queryAuthor;
queryAuthor = new TermQuery(new Term(IFIELD_LEAD_AUTHOR,
author.trim().toLowerCase()));
bQuery.add(queryAuthor, BooleanClause.Occur.MUST);
....................................................................
....................................................................

PhraseQuery pQuery = new PhraseQuery();
String[] phrase = txtWithPhrase.toLowerCase().split(" ");
for (int i = 0; i < phrase.length; i++) {
	pQuery.add(new Term(IFIELD_TEXT, phrase[i]));
}
pQuery.setSlop(0);
bQuery.add(pQuery, BooleanClause.Occur.MUST);
....................................................................
....................................................................

String[] sortOrder = {IFIELD_LEAD_AUTHOR, IFIELD_TEXT};
Sort sort = new Sort(sortOrder);
hits = indexSearcher.search(bQuery, sort);

Now My problem here is: If I do a search on a phrase with text Health
Safety, it is fetching me all the records where in the text is Health
and/or/in Safety. It is fetching me these records even after setting the
slop of the phrase query to zero for exact match. I am using standard
analyzer while indexing my records.

Any help on this is greatly appreciated. 

Sirish Vadala
-- 
View this message in context: http://www.nabble.com/Phrase-Query-Problem-tp14373945p14373945.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 18:01:35 2007
Return-Path: <java-user-return-31526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25269 invoked from network); 17 Dec 2007 18:01:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 18:01:34 -0000
Received: (qmail 58241 invoked by uid 500); 17 Dec 2007 18:01:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58217 invoked by uid 500); 17 Dec 2007 18:01:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58206 invoked by uid 99); 17 Dec 2007 18:01:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 10:01:17 -0800
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.208] (HELO exprod6og107.obsmtp.com) (64.18.1.208)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 17 Dec 2007 18:01:04 +0000
Received: from source ([139.56.8.7]) by exprod6ob107.postini.com ([64.18.5.12]) with SMTP;
	Mon, 17 Dec 2007 10:00:52 PST
Received: from triangulum2.broadvision.com (triangulum2.broadvision.com [10.10.32.38])
	by nebula2.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id lBHI2VS11625
	for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 10:02:31 -0800 (PST)
Received: from rw-gw-02.BroadVision.com (localhost [127.0.0.1])
	by triangulum2.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id KAA17589
	for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 10:00:51 -0800 (PST)
Received: by rw-gw-02.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <Y0ZZ2A06>; Mon, 17 Dec 2007 10:00:51 -0800
Message-ID: <F1C79CDF8799D944A3156C40351731741809E7@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Phrase Query Problem
Date: Mon, 17 Dec 2007 10:00:50 -0800
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

Do you mean that your query phrase is "Health Safety",
but docs with "Health and Safety" returned?

If that is the case, the reason is that StandardAnalyzer
filters out "and" (also "or, "in" and others) as stop 
words during indexing, and the QueryParser filters those
words out also.

Best regards, Lisheng

-----Original Message-----
From: Sirish Vadala [mailto:vsirishreddy@yahoo.co.in]
Sent: Monday, December 17, 2007 9:49 AM
To: java-user@lucene.apache.org
Subject: Phrase Query Problem



I have the following code for search:

BooleanQuery bQuery = new BooleanQuery();
Query queryAuthor;
queryAuthor = new TermQuery(new Term(IFIELD_LEAD_AUTHOR,
author.trim().toLowerCase()));
bQuery.add(queryAuthor, BooleanClause.Occur.MUST);
....................................................................
....................................................................

PhraseQuery pQuery = new PhraseQuery();
String[] phrase = txtWithPhrase.toLowerCase().split(" ");
for (int i = 0; i < phrase.length; i++) {
	pQuery.add(new Term(IFIELD_TEXT, phrase[i]));
}
pQuery.setSlop(0);
bQuery.add(pQuery, BooleanClause.Occur.MUST);
....................................................................
....................................................................

String[] sortOrder = {IFIELD_LEAD_AUTHOR, IFIELD_TEXT};
Sort sort = new Sort(sortOrder);
hits = indexSearcher.search(bQuery, sort);

Now My problem here is: If I do a search on a phrase with text Health
Safety, it is fetching me all the records where in the text is Health
and/or/in Safety. It is fetching me these records even after setting the
slop of the phrase query to zero for exact match. I am using standard
analyzer while indexing my records.

Any help on this is greatly appreciated. 

Sirish Vadala
-- 
View this message in context:
http://www.nabble.com/Phrase-Query-Problem-tp14373945p14373945.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 18:01:52 2007
Return-Path: <java-user-return-31527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25453 invoked from network); 17 Dec 2007 18:01:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 18:01:51 -0000
Received: (qmail 60018 invoked by uid 500); 17 Dec 2007 18:01:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59986 invoked by uid 500); 17 Dec 2007 18:01:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59975 invoked by uid 99); 17 Dec 2007 18:01:34 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 10:01:34 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 18:01:12 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: FuzzyQuery + QueryParser - I'm puzzled
Date: Mon, 17 Dec 2007 13:00:46 -0500
Message-ID: <9294E20AED46934EA459020706463F9466429F@SUEXCL-02.ad.syr.edu>
In-Reply-To: <3126751e0712170324h4d55d338gfd90ffb0683c2c3e@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FuzzyQuery + QueryParser - I'm puzzled
Thread-Index: AchAn216dCdlJdxeTPKtAzPlIGgWowANm05A
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi anjana m,

You're going to have lots of trouble getting a response, for two =
reasons:

1. You are replying to an existing thread and changing the subject.  =
Don't do that.  When you have a question, start a new thread by creating =
a new email instead of replying.

2. You are not telling the list what you have done and what you want to =
do.  The information you provide tells us almost nothing, except that =
you have tried to use Lucene and failed.

We want to help - really.  But we can't unless you make your questions =
a) visible by not piggybacking on existing threads and b) clear by =
giving a full picture of what you want to do, what you have tried, and =
what happened.

Please, try again :).  Start by NOT replying to this message, but =
instead starting a new thread.

Steve

On 12/17/2007 at 6:24 AM, anjana m wrote:
> hey i amnot bale to comple packages are not found..
> i download..the luncene package..
> help me..
> .lucene.search.Hits;
> import org.apache.lucene.search.Query;
> import org.apache.lucene.document.Field;
> import org.apache.lucene.search.Searcher;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.document.Document;
> import org.apache.lucene.store.RAMDirectory;
> import org.apache.lucene.search.IndexSearcher;
> import org.apache.lucene.queryParser.QueryParser;
> import org.apache.lucene.queryParser.ParseException;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>=20
> On Dec 17, 2007 4:34 PM, Doron Cohen <cdoronc@gmail.com> wrote:
>=20
> > See in Lucene FAQ:
> >  "Are Wildcard, Prefix, and Fuzzy queries case sensitive?"
> >=20
> > On Dec 17, 2007 11:27 AM, Helmut Jarausch
> > <jarausch@igpm.rwth-aachen.de> wrote:
> >=20
> > > Hi,
> > >=20
> > > please help I am totally puzzled.
> > >=20
> > > The same query, once with a direct call to FuzzyQuery
> > > succeeds while the same query with QueryParser fails.
> > >=20
> > > What am I missing?
> > >=20
> > > Sorry, I'm using pylucene (with lucene-java-2.2.0-603782)
> > >=20
> > > #!/usr/bin/python
> > > import lucene
> > > from lucene import *
> > > lucene.initVM(lucene.CLASSPATH)
> > >=20
> > > directory =3D RAMDirectory()
> > > writer =3D IndexWriter(directory, WhitespaceAnalyzer(), True)
> > > doc =3D Document()
> > > doc.add(Field("field","Wolfgang Dahmen  Arnold Reusken",
> > >              Field.Store.YES, Field.Index.TOKENIZED))
> > > writer.addDocument(doc)
> > >=20
> > > writer.optimize()
> > > writer.close()
> > >=20
> > > searcher =3D IndexSearcher(directory)
> > >=20
> > > FQ=3D True
> > > # FQ=3D False   # this case doesn't find anything  <+++++  WHY
> > >=20
> > > if  FQ :
> > >  # this succeeds in finding the entry above query =3D
> > >  FuzzyQuery(Term("field", "Damen"),0.79,0) else : # this fails to =
find
> > >  that entry parser=3D QueryParser("field",WhitespaceAnalyzer()) =
query=3D
> > >  parser.parse("Damen~0.79")
> > >=20
> > > hits =3D searcher.search(query)
> > > print "there are",hits.length(),"hits"
> > > for k in range(0,hits.length()) :
> > >  print hits.doc(k).get("field")
> > >=20
> > > --
> > > Helmut Jarausch
> > >=20
> > > Lehrstuhl fuer Numerische Mathematik
> > > RWTH - Aachen University
> > > D 52056 Aachen, Germany
> > >=20
> > >=20
> > > =
---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org =
For
> > > additional commands, e-mail: java-user-help@lucene.apache.org
> > >=20
> > >=20
> >=20
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 18:38:58 2007
Return-Path: <java-user-return-31528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43681 invoked from network); 17 Dec 2007 18:38:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 18:38:58 -0000
Received: (qmail 9543 invoked by uid 500); 17 Dec 2007 18:38:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9505 invoked by uid 500); 17 Dec 2007 18:38:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9494 invoked by uid 99); 17 Dec 2007 18:38:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 10:38:41 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 18:38:19 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J4Kr8-0002t6-GT
	for java-user@lucene.apache.org; Mon, 17 Dec 2007 10:38:22 -0800
Message-ID: <14373945.post@talk.nabble.com>
Date: Mon, 17 Dec 2007 10:38:22 -0800 (PST)
From: Sirish Vadala <vsirishreddy@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: Phrase Query Problem
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vsirishreddy@yahoo.co.in
X-Virus-Checked: Checked by ClamAV on apache.org


I have the following code for search:

BooleanQuery bQuery = new BooleanQuery();
Query queryAuthor;
queryAuthor = new TermQuery(new Term(IFIELD_LEAD_AUTHOR,
author.trim().toLowerCase()));
bQuery.add(queryAuthor, BooleanClause.Occur.MUST);
....................................................................
....................................................................

PhraseQuery pQuery = new PhraseQuery();
String[] phrase = txtWithPhrase.toLowerCase().split(" ");
for (int i = 0; i < phrase.length; i++) {
	pQuery.add(new Term(IFIELD_TEXT, phrase[i]));
}
pQuery.setSlop(0);
bQuery.add(pQuery, BooleanClause.Occur.MUST);
....................................................................
....................................................................

String[] sortOrder = {IFIELD_LEAD_AUTHOR, IFIELD_TEXT};
Sort sort = new Sort(sortOrder);
hits = indexSearcher.search(bQuery, sort);

Now My problem here is: If I do a search on a phrase with text Health
Safety, it is fetching me all the records where in the text is Health
and/or/in Safety. It is fetching me these records even after setting the
slop of the phrase query to zero for exact match. I am using standard
analyzer while indexing my records.

Any help on this is greatly appreciated. 

Sirish Vadala
-- 
View this message in context: http://www.nabble.com/Phrase-Query-Problem-tp14373945p14373945.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 18:53:32 2007
Return-Path: <java-user-return-31529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48269 invoked from network); 17 Dec 2007 18:53:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 18:53:32 -0000
Received: (qmail 31549 invoked by uid 500); 17 Dec 2007 18:53:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31513 invoked by uid 500); 17 Dec 2007 18:53:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31502 invoked by uid 99); 17 Dec 2007 18:53:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 10:53:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of mike.klaas@gmail.com designates 64.233.166.178 as permitted sender)
Received: from [64.233.166.178] (HELO py-out-1112.google.com) (64.233.166.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 18:52:53 +0000
Received: by py-out-1112.google.com with SMTP id d32so10491160pye.12
        for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 10:52:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        bh=kgKhqf7y6NWoFqE1KAfpgIob6H9TpeVRFbJyMsftS0Q=;
        b=vtM4sfr5gR+3fwxvteWtuqx+NEZ7AHt2rMwUVemIDc4R9KLLWs2kh+kkvUNoH+2PgRJWj2IoHMR1i4nokFOpwtSFoEX4sUoEw9EAo4+i0lJQtIZxu0385X11XqgEmqCG1QEiPjn/r4+FkS1L2dtqqmnP0D1cP43Lcm8g2+0cGXk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=BVXeDBKcOqCrq7qazKVS+8Ly3wxXGEfbwP4wDrWBLV7OCEvdCc28hJIjnwv6x/20/Gx/qqbHu6jhiEWaBAAgZ42moeIpszGsJlDAo3C6IyrmukUI3L0kzstN6jJwKZ4JhcKZy5jYslKwrD6uFqtG5Ky+Go5ZzRH0LplM3VgeZQk=
Received: by 10.64.131.4 with SMTP id e4mr15556980qbd.68.1197917573184;
        Mon, 17 Dec 2007 10:52:53 -0800 (PST)
Received: from ?192.168.1.104? ( [24.215.75.34])
        by mx.google.com with ESMTPS id d12sm9188407qbc.2007.12.17.10.52.51
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 17 Dec 2007 10:52:51 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <99833356D526854CAF8ECF4D7C769D49C78EFA@MAIL05.northamerica.cerner.net>
References: <99833356D526854CAF8ECF4D7C769D49C78B9D@MAIL05.northamerica.cerner.net> <2789FED1-21C0-4D38-941D-FE52DF4703B1@gmail.com> <99833356D526854CAF8ECF4D7C769D49C78EFA@MAIL05.northamerica.cerner.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <43E84B8D-FCFC-4495-A56F-17EE6E7EA16E@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: thoughts/suggestions for analyzing/tokenizing class names
Date: Mon, 17 Dec 2007 10:52:48 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org

Either index them as a series of tokens:

org
org.apache
org.apache.lucene
org.apache.lucene.document
org.apache.lucene.document.Document

or index them as a single token, and use prefix queries (this is what  
I do for reverse domain names):

classname:(org.apache org.apache.*)

Note that "classname:org.apache*" would probably be wrong--you might  
not want to match

org.apache-fake.lucene.document

regards,
-Mike

On 17-Dec-07, at 9:39 AM, Beyer,Nathan wrote:

> Good point.
>
> I don't want the sub-package names on their own to match.
>
> Text (class name)
>  - "org.apache.lucene.document.Document"
> Queries that would match
>  - "org.apache", "org.apache.lucene.document"
> Queries that DO NOT match
>  - "apache", "lucene", "document"
>
> -Nathan
>
> -----Original Message-----
> From: Mike Klaas [mailto:mike.klaas@gmail.com]
> Sent: Monday, December 17, 2007 11:29 AM
> To: java-user@lucene.apache.org
> Subject: Re: thoughts/suggestions for analyzing/tokenizing class names
>
> On 15-Dec-07, at 3:14 PM, Beyer,Nathan wrote:
>
>> I have a few fields that use package names and class names and I've
>> been
>> looking for some suggestions for analyzing these fields.
>>
>> A few examples -
>>
>> Text (class name)
>> - "org.apache.lucene.document.Document"
>> Queries that would match
>> - "org.apache" , "org.apache.lucene.document"
>>
>> Text (class name + method signature)
>> -- "org.apache.lucene.document.Document#add(Fieldable)"
>> Queries that would match
>> -- "org.apache.lucene", "org.apache.lucene.document.Document#add"
>>
>> Any thoughts on how to approach tokenizing these types of texts?
>
> Perhaps it would help to include some examples of queries you _don't_
> want to match.  For all the examples above, simply tokenizing
> alphanumeric components would suffice.
>
> -Mike
>
> ----------------------------------------------------------------------
> CONFIDENTIALITY NOTICE This message and any included attachments  
> are from Cerner Corporation and are intended only for the  
> addressee. The information contained in this message is  
> confidential and may constitute inside or non-public information  
> under international, federal, or state securities laws.  
> Unauthorized forwarding, printing, copying, distribution, or use of  
> such information is strictly prohibited and may be unlawful. If you  
> are not the addressee, please promptly delete this message and  
> notify the sender of the delivery error by e-mail or you may call  
> Cerner's corporate offices in Kansas City, Missouri, U.S.A at (+1)  
> (816)221-1024.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 19:16:29 2007
Return-Path: <java-user-return-31530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57984 invoked from network); 17 Dec 2007 19:16:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 19:16:29 -0000
Received: (qmail 69448 invoked by uid 500); 17 Dec 2007 19:16:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69418 invoked by uid 500); 17 Dec 2007 19:16:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69407 invoked by uid 99); 17 Dec 2007 19:16:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 11:16:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 19:15:50 +0000
Received: by fk-out-0910.google.com with SMTP id z23so1603879fkz.5
        for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 11:15:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=O4xXupgL+kL4atkIOowcxWMo2v53M4AYxX4KKyplARk=;
        b=NPaco3o3miqcdYPgAhd3NIwrJfuL65u+U3nzip2wpGiD3MVStyBIL1kWzH85KLkZNTbVtAxo5hR4iZN/ZH5x5LqbKIybT8KvZRR7BYSd7OIp61G7+26SH9n20pTt7bGjptC14QbtTQt+IhwGUhFLKQYWvXxG+UgyEm71lfQNmbQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=EZe0bfQNDbCSWxxuVoepD4DEOom2DONisqXURZTxa91+n/pnGHx5YRZLAmLEzAzzkt+nGgYsLxhBCAFSNJvuyI+2sSRAglTzE2vGmWk9rznTgy1QWJzzmBuCUz70ngyEh9UwDen3SXCSr/CS+0Cfwn7PncpbS6r33QxRzBsC8P4=
Received: by 10.82.181.7 with SMTP id d7mr16700917buf.4.1197918952246;
        Mon, 17 Dec 2007 11:15:52 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Mon, 17 Dec 2007 11:15:52 -0800 (PST)
Message-ID: <359a92830712171115k69393429p4e8e14ebaf43a24b@mail.gmail.com>
Date: Mon, 17 Dec 2007 14:15:52 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: FuzzyQuery - rounding bug?
In-Reply-To: <3126751e0712170257k466d833bidf20087acdf9d354@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10007_17448991.1197918952245"
References: <tkrat.a8424b17ea54a398@igpm.rwth-aachen.de>
	 <3126751e0712170257k466d833bidf20087acdf9d354@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10007_17448991.1197918952245
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Please do not highack the thread. When starting a new topic, do NOT
use "reply to", start an entirely new e-mail. Otherwise your topic often
gets ignored by people who are uninterested in the original thread.

Best
Erick

On Dec 17, 2007 5:57 AM, anjana m <anjana.mprasad@gmail.com> wrote:

> how to i use lucene search to serach files of the local system
>
> On Dec 17, 2007 2:11 PM, Helmut Jarausch <jarausch@igpm.rwth-aachen.de>
> wrote:
>
> > Hi,
> >
> > according to the LiA book the FuzzyQuery distance is computed as
> >
> > 1- distance / min(textlen,targetlen)
> >
> > Given
> > def addDoc(text, writer):
> >    doc = Document()
> >    doc.add(Field("field", text,
> >                  Field.Store.YES, Field.Index.TOKENIZED))
> >    writer.addDocument(doc)
> >
> > addDoc("aaaaa", writer)
> > addDoc("aaaab", writer)
> > addDoc("aaabb", writer)
> > addDoc("aabbb", writer)
> > addDoc("abbbb", writer)
> > addDoc("bbbbb", writer)
> > addDoc("ddddd", writer)
> >
> > query = FuzzyQuery(Term("field", "aaaaa"),0.8,0)
> >
> > should find "aaaab' since we have
> > distance = 1
> > min(textlen,targetlen) = 5
> >
> > It does find it with
> > query = FuzzyQuery(Term("field", "aaaaa"),0.79,0)
> > though.
> >
> > Is there a rounding error bug?
> >
> > (this is with lucene-java-2.2.0-603782)
> >
> > Helmut Jarausch
> >
> > Lehrstuhl fuer Numerische Mathematik
> > RWTH - Aachen University
> > D 52056 Aachen, Germany
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

------=_Part_10007_17448991.1197918952245--

From java-user-return-31531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 19:41:15 2007
Return-Path: <java-user-return-31531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72419 invoked from network); 17 Dec 2007 19:41:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 19:41:15 -0000
Received: (qmail 23643 invoked by uid 500); 17 Dec 2007 19:40:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23619 invoked by uid 500); 17 Dec 2007 19:40:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23603 invoked by uid 99); 17 Dec 2007 19:40:48 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 11:40:48 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of NBEYER@cerner.com designates 159.140.213.229 as permitted sender)
Received: from [159.140.213.229] (HELO mail02.cerner.com) (159.140.213.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 19:40:37 +0000
Received: from msbhwhq03.northamerica.cerner.net (msbhwhq03.cerner.com [10.160.16.183])
	by mail02.cerner.com (8.13.8/8.13.8) with ESMTP id lBHJePc7021400
	for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 13:40:25 -0600
Received: from MAIL05.northamerica.cerner.net ([10.160.16.178]) by msbhwhq03.northamerica.cerner.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 17 Dec 2007 13:40:25 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: thoughts/suggestions for analyzing/tokenizing class names
Date: Mon, 17 Dec 2007 13:39:55 -0600
Message-ID: <99833356D526854CAF8ECF4D7C769D49C7906B@MAIL05.northamerica.cerner.net>
In-Reply-To: <43E84B8D-FCFC-4495-A56F-17EE6E7EA16E@gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: thoughts/suggestions for analyzing/tokenizing class names
Thread-Index: AchA3h25p+lA5MnfTFCoj/eLsFeLVAABju1g
References: <99833356D526854CAF8ECF4D7C769D49C78B9D@MAIL05.northamerica.cerner.net> <2789FED1-21C0-4D38-941D-FE52DF4703B1@gmail.com> <99833356D526854CAF8ECF4D7C769D49C78EFA@MAIL05.northamerica.cerner.net> <43E84B8D-FCFC-4495-A56F-17EE6E7EA16E@gmail.com>
From: "Beyer,Nathan" <NBEYER@CERNER.COM>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 17 Dec 2007 19:40:25.0021 (UTC) FILETIME=[AB450ED0:01C840E4]
X-Proofpoint-Virus-Version: vendor=fsecure engine=4.65.5502:2.3.11,1.2.37,4.0.164 definitions=2007-12-17_08:2007-12-17,2007-12-17,2007-12-17 signatures=0
X-Virus-Checked: Checked by ClamAV on apache.org

Would using Field.Index.UN_TOKENIZED be the same as tokenizing a field
into one token?

-----Original Message-----
From: Mike Klaas [mailto:mike.klaas@gmail.com]=20
Sent: Monday, December 17, 2007 12:53 PM
To: java-user@lucene.apache.org
Subject: Re: thoughts/suggestions for analyzing/tokenizing class names

Either index them as a series of tokens:

org
org.apache
org.apache.lucene
org.apache.lucene.document
org.apache.lucene.document.Document

or index them as a single token, and use prefix queries (this is what=20=20
I do for reverse domain names):

classname:(org.apache org.apache.*)

Note that "classname:org.apache*" would probably be wrong--you might=20=20
not want to match

org.apache-fake.lucene.document

regards,
-Mike

On 17-Dec-07, at 9:39 AM, Beyer,Nathan wrote:

> Good point.
>
> I don't want the sub-package names on their own to match.
>
> Text (class name)
>  - "org.apache.lucene.document.Document"
> Queries that would match
>  - "org.apache", "org.apache.lucene.document"
> Queries that DO NOT match
>  - "apache", "lucene", "document"
>
> -Nathan
>
> -----Original Message-----
> From: Mike Klaas [mailto:mike.klaas@gmail.com]
> Sent: Monday, December 17, 2007 11:29 AM
> To: java-user@lucene.apache.org
> Subject: Re: thoughts/suggestions for analyzing/tokenizing class names
>
> On 15-Dec-07, at 3:14 PM, Beyer,Nathan wrote:
>
>> I have a few fields that use package names and class names and I've
>> been
>> looking for some suggestions for analyzing these fields.
>>
>> A few examples -
>>
>> Text (class name)
>> - "org.apache.lucene.document.Document"
>> Queries that would match
>> - "org.apache" , "org.apache.lucene.document"
>>
>> Text (class name + method signature)
>> -- "org.apache.lucene.document.Document#add(Fieldable)"
>> Queries that would match
>> -- "org.apache.lucene", "org.apache.lucene.document.Document#add"
>>
>> Any thoughts on how to approach tokenizing these types of texts?
>
> Perhaps it would help to include some examples of queries you _don't_
> want to match.  For all the examples above, simply tokenizing
> alphanumeric components would suffice.
>
> -Mike
>
> ----------------------------------------------------------------------
> CONFIDENTIALITY NOTICE This message and any included attachments=20=20
> are from Cerner Corporation and are intended only for the=20=20
> addressee. The information contained in this message is=20=20
> confidential and may constitute inside or non-public information=20=20
> under international, federal, or state securities laws.=20=20
> Unauthorized forwarding, printing, copying, distribution, or use of=20=20
> such information is strictly prohibited and may be unlawful. If you=20=20
> are not the addressee, please promptly delete this message and=20=20
> notify the sender of the delivery error by e-mail or you may call=20=20
> Cerner's corporate offices in Kansas City, Missouri, U.S.A at (+1)=20=20
> (816)221-1024.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

----------------------------------------------------------------------
CONFIDENTIALITY NOTICE This message and any included attachments are from C=
erner Corporation and are intended only for the addressee. The information =
contained in this message is confidential and may constitute inside or non-=
public information under international, federal, or state securities laws. =
Unauthorized forwarding, printing, copying, distribution, or use of such in=
formation is strictly prohibited and may be unlawful. If you are not the ad=
dressee, please promptly delete this message and notify the sender of the d=
elivery error by e-mail or you may call Cerner's corporate offices in Kansa=
s City, Missouri, U.S.A at (+1) (816)221-1024.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 21:20:58 2007
Return-Path: <java-user-return-31532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23265 invoked from network); 17 Dec 2007 21:20:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 21:20:58 -0000
Received: (qmail 77384 invoked by uid 500); 17 Dec 2007 21:20:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77027 invoked by uid 500); 17 Dec 2007 21:20:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77016 invoked by uid 99); 17 Dec 2007 21:20:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 13:20:41 -0800
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.185] (HELO exprod6og103.obsmtp.com) (64.18.1.185)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 17 Dec 2007 21:20:16 +0000
Received: from source ([139.56.8.7]) by exprod6ob103.postini.com ([64.18.5.12]) with SMTP;
	Mon, 17 Dec 2007 13:20:18 PST
Received: from triangulum2.broadvision.com (triangulum2.broadvision.com [10.10.32.38])
	by nebula2.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id lBHLLvS14586
	for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 13:21:57 -0800 (PST)
Received: from rw-gw-02.BroadVision.com (localhost [127.0.0.1])
	by triangulum2.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id NAA19923
	for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 13:20:17 -0800 (PST)
Received: by rw-gw-02.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <Y0ZZ2BJV>; Mon, 17 Dec 2007 13:20:17 -0800
Message-ID: <F1C79CDF8799D944A3156C40351731741809E9@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Phrase Query Problem
Date: Mon, 17 Dec 2007 13:20:16 -0800
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Sirish,

A few hours ago I sent a reply to your message, if my
understanding is correct, you indexed a doc with text
as

Health and Safety

and you used phrase 

Health Safety

to create a phrase query. If that is the case, this is
normal since you used StandardAnalyzer to tokenize the
input text, so certain "stop words" are filtered out, the
complete list of filtered out words are (from lucene 20
source code StopAnalyzer):

###
  "a", "an", "and", "are", "as", "at", "be", "but", "by",
    "for", "if", "in", "into", "is", "it",
    "no", "not", "of", "on", "or", "s", "such",
    "t", "that", "the", "their", "then", "there", "these",
    "they", "this", "to", "was", "will", "with"
###

The end result is the same as your input text is 

Health Safety

Best regards, Lisheng


-----Original Message-----
From: Sirish Vadala [mailto:vsirishreddy@yahoo.co.in]
Sent: Monday, December 17, 2007 10:38 AM
To: java-user@lucene.apache.org
Subject: Phrase Query Problem



I have the following code for search:

BooleanQuery bQuery = new BooleanQuery();
Query queryAuthor;
queryAuthor = new TermQuery(new Term(IFIELD_LEAD_AUTHOR,
author.trim().toLowerCase()));
bQuery.add(queryAuthor, BooleanClause.Occur.MUST);
....................................................................
....................................................................

PhraseQuery pQuery = new PhraseQuery();
String[] phrase = txtWithPhrase.toLowerCase().split(" ");
for (int i = 0; i < phrase.length; i++) {
	pQuery.add(new Term(IFIELD_TEXT, phrase[i]));
}
pQuery.setSlop(0);
bQuery.add(pQuery, BooleanClause.Occur.MUST);
....................................................................
....................................................................

String[] sortOrder = {IFIELD_LEAD_AUTHOR, IFIELD_TEXT};
Sort sort = new Sort(sortOrder);
hits = indexSearcher.search(bQuery, sort);

Now My problem here is: If I do a search on a phrase with text Health
Safety, it is fetching me all the records where in the text is Health
and/or/in Safety. It is fetching me these records even after setting the
slop of the phrase query to zero for exact match. I am using standard
analyzer while indexing my records.

Any help on this is greatly appreciated. 

Sirish Vadala
-- 
View this message in context:
http://www.nabble.com/Phrase-Query-Problem-tp14373945p14373945.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 17 23:15:10 2007
Return-Path: <java-user-return-31533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68489 invoked from network); 17 Dec 2007 23:15:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 17 Dec 2007 23:15:10 -0000
Received: (qmail 24570 invoked by uid 500); 17 Dec 2007 23:14:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24542 invoked by uid 500); 17 Dec 2007 23:14:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24531 invoked by uid 99); 17 Dec 2007 23:14:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 15:14:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jayallenhill@gmail.com designates 209.85.146.182 as permitted sender)
Received: from [209.85.146.182] (HELO wa-out-1112.google.com) (209.85.146.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 23:14:31 +0000
Received: by wa-out-1112.google.com with SMTP id j40so3962519wah.11
        for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 15:14:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=ehcEPkySl0JtydYiXWwcgy5v6HNtbUoNxrICAztIniI=;
        b=k0XiIget/kphM6ilHu0GfXMDMLlO5/td6zokMwivz9DvwOB7PPVgj2aieTPzNP5NEnGiZUbxNoM9IVFc+cXwU/60YFFnh/pjIZUSWBA59Ip4VyKKh1oiRwtS3uUllDgksUvrRFq2oU9TcaR5ICG6foJvljLM5yzCrboZcf9JrOA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=GHe+ZcsunzNqE3katN0M5kt8BRIth7ISSMMLsBztjiUc58texmVCKV5KA4ph2cE5lj9CGuNWP9boDMIl2DQrLNjy+0Gma5IB1vjv9kcJe7AOagOR7Av5iE07TQC0IowWZ2+/p5qFVL5ylvKJWvSzdrtM881NpMAgzJNFcsUck6E=
Received: by 10.114.66.2 with SMTP id o2mr2320918waa.111.1197933272563;
        Mon, 17 Dec 2007 15:14:32 -0800 (PST)
Received: by 10.114.132.12 with HTTP; Mon, 17 Dec 2007 15:14:32 -0800 (PST)
Message-ID: <d0e6561a0712171514x600fe618ka539f02c3de9ecb4@mail.gmail.com>
Date: Mon, 17 Dec 2007 15:14:32 -0800
From: "Jay Hill" <jayallenhill@gmail.com>
To: java-user@lucene.apache.org
Subject: Analyzer to use with MultiSearcher using various indexes for multiple languages
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10332_16623616.1197933272551"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10332_16623616.1197933272551
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm working on a project where we are indexing content for several different
languages - English, Spanish, French and German. I have built separate
indexes for each language using the proper Analyzer for each
language(StandardAnalyzer for English, FrenchAnalyzer for French, etc.). We
have a requirement to search across multiple languages, so I'm planning to
use MultiSearcher, passing an array of all IndexSearchers for each language.
But I'm not sure how to set up an Analyzer for the IndexSearchers properly.
Any pointers about how to set up the MultiSearcher for use on indexes in
multiple languages would be appreciated.

-Jay

------=_Part_10332_16623616.1197933272551--

From java-user-return-31534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 04:54:38 2007
Return-Path: <java-user-return-31534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78727 invoked from network); 18 Dec 2007 04:54:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 04:54:38 -0000
Received: (qmail 67899 invoked by uid 500); 18 Dec 2007 04:54:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67875 invoked by uid 500); 18 Dec 2007 04:54:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67864 invoked by uid 99); 18 Dec 2007 04:54:21 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 20:54:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of mike.klaas@gmail.com designates 64.233.166.182 as permitted sender)
Received: from [64.233.166.182] (HELO py-out-1112.google.com) (64.233.166.182)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 04:54:09 +0000
Received: by py-out-1112.google.com with SMTP id d32so11367546pye.12
        for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 20:54:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        bh=au9st88XVhKfarT6yLeS5eVsL/HPufcsvNAYAyX8I6s=;
        b=Dfbj1rmPo35RpTwoJ+VlpbvJrG6vYGZPILjwR/4QVohJ17dtwvom2KnPvFDVmuO2gtDoOALumvFcYJqbzWinmfX5OEvtBnJtRi83nJsS0l4YBwnp0e0ZtKlF3Qi/1DlIUwDg3Tefc0YtzVRHZ+V6eTh5n+hONOVs3+Lk1vSmXHs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=mime-version:in-reply-to:references:content-type:message-id:content-transfer-encoding:from:subject:date:to:x-mailer;
        b=Y232iHluJAp/1IJdMCk+f1tT5I36ByIGBnBfewFr/vhNVFUTv3cvDikAx3ZQDk2OSesh2yWr/DPX7HLBrd2O5v7aGofhx8+rgDw+lnjU0UssxCkJ/86CyadQ/cuYMYG2fyK/LCmkTT9Z1a1Z6HdZ74g77jNQBUk7tOWant7wG6E=
Received: by 10.65.115.4 with SMTP id s4mr30861qbm.37.1197953639847;
        Mon, 17 Dec 2007 20:53:59 -0800 (PST)
Received: from ?192.168.1.104? ( [24.215.75.34])
        by mx.google.com with ESMTPS id e14sm2306734qbe.2007.12.17.20.53.58
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 17 Dec 2007 20:53:58 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.2)
In-Reply-To: <99833356D526854CAF8ECF4D7C769D49C7906B@MAIL05.northamerica.cerner.net>
References: <99833356D526854CAF8ECF4D7C769D49C78B9D@MAIL05.northamerica.cerner.net> <2789FED1-21C0-4D38-941D-FE52DF4703B1@gmail.com> <99833356D526854CAF8ECF4D7C769D49C78EFA@MAIL05.northamerica.cerner.net> <43E84B8D-FCFC-4495-A56F-17EE6E7EA16E@gmail.com> <99833356D526854CAF8ECF4D7C769D49C7906B@MAIL05.northamerica.cerner.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <44C5576F-5646-4CD9-8E63-8C1AF2044B79@gmail.com>
Content-Transfer-Encoding: 7bit
From: Mike Klaas <mike.klaas@gmail.com>
Subject: Re: thoughts/suggestions for analyzing/tokenizing class names
Date: Mon, 17 Dec 2007 20:53:54 -0800
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.2)
X-Virus-Checked: Checked by ClamAV on apache.org


On 17-Dec-07, at 11:39 AM, Beyer,Nathan wrote:

> Would using Field.Index.UN_TOKENIZED be the same as tokenizing a field
> into one token?

Indeed.

-Mike

>
> -----Original Message-----
> From: Mike Klaas [mailto:mike.klaas@gmail.com]
> Sent: Monday, December 17, 2007 12:53 PM
> To: java-user@lucene.apache.org
> Subject: Re: thoughts/suggestions for analyzing/tokenizing class names
>
> Either index them as a series of tokens:
>
> org
> org.apache
> org.apache.lucene
> org.apache.lucene.document
> org.apache.lucene.document.Document
>
> or index them as a single token, and use prefix queries (this is what
> I do for reverse domain names):
>
> classname:(org.apache org.apache.*)
>
> Note that "classname:org.apache*" would probably be wrong--you might
> not want to match
>
> org.apache-fake.lucene.document
>
> regards,
> -Mike
>
> On 17-Dec-07, at 9:39 AM, Beyer,Nathan wrote:
>
>> Good point.
>>
>> I don't want the sub-package names on their own to match.
>>
>> Text (class name)
>>  - "org.apache.lucene.document.Document"
>> Queries that would match
>>  - "org.apache", "org.apache.lucene.document"
>> Queries that DO NOT match
>>  - "apache", "lucene", "document"
>>
>> -Nathan
>>
>> -----Original Message-----
>> From: Mike Klaas [mailto:mike.klaas@gmail.com]
>> Sent: Monday, December 17, 2007 11:29 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: thoughts/suggestions for analyzing/tokenizing class  
>> names
>>
>> On 15-Dec-07, at 3:14 PM, Beyer,Nathan wrote:
>>
>>> I have a few fields that use package names and class names and I've
>>> been
>>> looking for some suggestions for analyzing these fields.
>>>
>>> A few examples -
>>>
>>> Text (class name)
>>> - "org.apache.lucene.document.Document"
>>> Queries that would match
>>> - "org.apache" , "org.apache.lucene.document"
>>>
>>> Text (class name + method signature)
>>> -- "org.apache.lucene.document.Document#add(Fieldable)"
>>> Queries that would match
>>> -- "org.apache.lucene", "org.apache.lucene.document.Document#add"
>>>
>>> Any thoughts on how to approach tokenizing these types of texts?
>>
>> Perhaps it would help to include some examples of queries you _don't_
>> want to match.  For all the examples above, simply tokenizing
>> alphanumeric components would suffice.
>>
>> -Mike
>>
>> --------------------------------------------------------------------- 
>> -
>> CONFIDENTIALITY NOTICE This message and any included attachments
>> are from Cerner Corporation and are intended only for the
>> addressee. The information contained in this message is
>> confidential and may constitute inside or non-public information
>> under international, federal, or state securities laws.
>> Unauthorized forwarding, printing, copying, distribution, or use of
>> such information is strictly prohibited and may be unlawful. If you
>> are not the addressee, please promptly delete this message and
>> notify the sender of the delivery error by e-mail or you may call
>> Cerner's corporate offices in Kansas City, Missouri, U.S.A at (+1)
>> (816)221-1024.
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ----------------------------------------------------------------------
> CONFIDENTIALITY NOTICE This message and any included attachments  
> are from Cerner Corporation and are intended only for the  
> addressee. The information contained in this message is  
> confidential and may constitute inside or non-public information  
> under international, federal, or state securities laws.  
> Unauthorized forwarding, printing, copying, distribution, or use of  
> such information is strictly prohibited and may be unlawful. If you  
> are not the addressee, please promptly delete this message and  
> notify the sender of the delivery error by e-mail or you may call  
> Cerner's corporate offices in Kansas City, Missouri, U.S.A at (+1)  
> (816)221-1024.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 05:03:56 2007
Return-Path: <java-user-return-31535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81159 invoked from network); 18 Dec 2007 05:03:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 05:03:56 -0000
Received: (qmail 73678 invoked by uid 500); 18 Dec 2007 05:03:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73644 invoked by uid 500); 18 Dec 2007 05:03:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73633 invoked by uid 99); 18 Dec 2007 05:03:39 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 17 Dec 2007 21:03:39 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vkblogger@gmail.com designates 64.233.162.233 as permitted sender)
Received: from [64.233.162.233] (HELO nz-out-0506.google.com) (64.233.162.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 05:03:18 +0000
Received: by nz-out-0506.google.com with SMTP id i28so1021219nzi.5
        for <java-user@lucene.apache.org>; Mon, 17 Dec 2007 21:03:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=Lmbz504GyWR6I2VxZ7uGrwYAetxKYm3RTpu4acUYI70=;
        b=F7Q0rUyOZ/WwbWFI7vjZUUOPBmfCE8Rgf0Y8zQvEIYx1M4Z4sThOXtsa4rruHzvGbj7jD55TLHP1xgPQmDgyjQ/oAN0IVLLOq2Y05hc/zv/OwnlGmK6qoOb4dMpDol+Guk+zJlWikbp3QxFofPa1N3TGLF0x/j5PBRV8E7AeodQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=L91C94ohNawaVuiPE1HnKq2kbsj3jUlnDrkO2iSKsI3EHKIZgbwPgS7eL8842+IW3ynQGyinhUQvrFFJvr8JyVJHX1gUENp1e4nUpKhUJ8BABErtojAnzXb/SV2qDVK4zBenP3gUT83SIz2R67AvHSS/cRCp5YbwXi/68FU6EU0=
Received: by 10.143.8.10 with SMTP id l10mr455506wfi.181.1197954201410;
        Mon, 17 Dec 2007 21:03:21 -0800 (PST)
Received: by 10.142.180.6 with HTTP; Mon, 17 Dec 2007 21:03:21 -0800 (PST)
Message-ID: <dd4e7dce0712172103j734ef561s7e420ccaddc218f3@mail.gmail.com>
Date: Tue, 18 Dec 2007 00:03:21 -0500
From: "v k" <vkblogger@gmail.com>
To: java-user@lucene.apache.org
Subject: Infrastructure question
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I am using Lucene to build an index from roughly  10 million documents
in number. The  documents are about 4 TB in total.

After some trial runs, indexing a subset of the documents I am trying
to figure out a hosting service configuration to create a full index
from the entire 10 TB of data. As I am still unsure how this project
will turn out I am not purchasing hardware/ram but considering a web
host.
for the purpose of :
1)  download the data and to start indexing it.
2) The web front end to access this index will be a python framework (
eg. Django  etc)

I am seriously contemplating signing up with Joyent for this plan:
AMD Opteron x64 multi-core servers with 4GiB RAM per core
1/16 (Burstable up to 95%)
1 TB	- Bandwidth/month, 1 GB RAM, + as such as NAS  storage as I can
afford to pay for.

My QUESTION is - Will this RAM and CPU be sufficient during
development of the search application and building the index, etc. or
is it so abysmal and under-equipped in terms of hardware that the
development version of my application will not work.
I understand that having more RAM is always good, but is 1GB as good as nothing?

This setup is NOT for production but for for development so I can get
my hands dirty with lucene which will require plenty of tweaks as the
project moves along.

What initial configuration would you recommend for a development
version given the corpus size. I am not even sure how large my index
will look like at this point.

I hope to build an my indexes this way and once the search
infrastructure is working and the web-front end complete, I plan to
worry about Redundancy, availability and scalability for the many
users I hope to provide this free service for :-)

Many of you in this forum have built successful products with Lucene.
To name a few I am aware of -  Ken Krugle, James Ryley, Dennis Kubes

Some of you must have started with small machines,test set-ups etc
where you built your initial search apps. I hope  to receive some
advise about my plan and approach to start building an infrastructure
to support my Lucene app.

Thank you.

Venkat

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 09:22:03 2007
Return-Path: <java-user-return-31536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71057 invoked from network); 18 Dec 2007 09:22:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 09:22:03 -0000
Received: (qmail 72945 invoked by uid 500); 18 Dec 2007 09:21:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72906 invoked by uid 500); 18 Dec 2007 09:21:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72895 invoked by uid 99); 18 Dec 2007 09:21:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 01:21:47 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [208.69.42.181] (HELO radix.cryptio.net) (208.69.42.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 09:21:25 +0000
Received: by radix.cryptio.net (Postfix, from userid 1007)
	id 0932C71C23E; Tue, 18 Dec 2007 01:21:29 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by radix.cryptio.net (Postfix) with ESMTP id 068AC71C1E7
	for <java-user@lucene.apache.org>; Tue, 18 Dec 2007 01:21:29 -0800 (PST)
Date: Tue, 18 Dec 2007 01:21:29 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
To: java-user@lucene.apache.org
Subject: Re: (~) opertor query....
In-Reply-To: <786fde50712142104k1ffd033bnd02a742134a09df@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0712180110210.16279@radix.cryptio.net>
References: <9312093579B72048B1E5659DC3EC7F39022E9330@hstmsg005.corp.satyam.ad>
  <Pine.LNX.4.62.0712141523570.541@radix.cryptio.net>
 <786fde50712142104k1ffd033bnd02a742134a09df@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org


: You can look at org.apache.lucene.search.MultiPhraseQuery which does
: something similar to what you ask. From its javadoc:

good call .. funny thing, i was just pointing out MultiPhraseQuery as a 
way to meat this need only a few days ago, but for some reason it didn't 
occur to me in the thread.

if you build a custom query parser, you can easily use the 
WildCardTermEnumerator to get the list of all matching terms to use to 
build up a MultiPhraseQuery.


: > :           I am parsing this query:  "Auto*  machine"~4.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 14:00:24 2007
Return-Path: <java-user-return-31537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91028 invoked from network); 18 Dec 2007 14:00:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 14:00:24 -0000
Received: (qmail 39693 invoked by uid 500); 18 Dec 2007 14:00:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39667 invoked by uid 500); 18 Dec 2007 14:00:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39656 invoked by uid 99); 18 Dec 2007 14:00:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 06:00:05 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of peterlkeegan@gmail.com designates 72.14.202.181 as permitted sender)
Received: from [72.14.202.181] (HELO ro-out-1112.google.com) (72.14.202.181)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 13:59:43 +0000
Received: by ro-out-1112.google.com with SMTP id k5so560396rog.7
        for <java-user@lucene.apache.org>; Tue, 18 Dec 2007 05:59:46 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=1Gic8yCTtOX+33w20EpA6HkaUH82t7ni26GrBaVvM90=;
        b=LvGT/QIYXOdSCuFokmfkhBMiiQ/+NAva+eeTp8jlB8VdfXE/iNP/kzG6IxwEXSBwAPBmLExHZi0x2aNDNRfgcsZXaBawEIy6nq/DYXF34WKkmkMh6xhoQUOr9RC4/BqcUSWBgZHYHS2STcqEnbwZ/a8exSufodZOltdkbEhV8E0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CwSnmTq0fVp+HOW36xWy76c77xj96ixeFDNp85rqLgaF9ONJso7JI8ngYDd57RHg+0cYTtB11Ncn5ywVlhjeEytggdjgQWSmDTW56K5dQCajgNae7wCr9SLR42MI9/b2Kt6zjdYWarYfPLmEsiLYPlyS1v3uXpDu7jpM+BAIw8w=
Received: by 10.141.79.12 with SMTP id g12mr4957653rvl.29.1197986385859;
        Tue, 18 Dec 2007 05:59:45 -0800 (PST)
Received: by 10.35.117.18 with HTTP; Tue, 18 Dec 2007 05:59:45 -0800 (PST)
Message-ID: <e994873a0712180559x7a05f879s5bb1a07ef57bfa13@mail.gmail.com>
Date: Tue, 18 Dec 2007 08:59:45 -0500
From: "Peter Keegan" <peterlkeegan@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Can I do boosting based on term postions?
In-Reply-To: <200708032111.42593.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11990_18837314.1197986385771"
References: <839ba01c0707312113p278da04bg636e2bfa853e6ff4@mail.gmail.com>
	 <200708031649.07438.paul.elschot@xs4all.nl>
	 <d27fa17e0708031135i5692e3c6laf4328a09992dd80@mail.gmail.com>
	 <200708032111.42593.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11990_18837314.1197986385771
Content-Type: text/plain; charset=ISO-2022-JP
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is a nice alternative to using payloads and BoostingTermQuery. Is there
any reason not to make this change to SpanFirstQuery, in particular:

>This modification to SpanFirstQuery would be that the Spans
>returned by SpanFirstQuery.getSpans() must always return 0
>from its start() method.

Should I open a Jira issue?

Thanks,
Peter


On Aug 3, 2007 2:11 PM, Paul Elschot <paul.elschot@xs4all.nl> wrote:

> On Friday 03 August 2007 20:35, Shailendra Sharma wrote:
> > Paul,
> >
> > If I understand Cedric right, he wants to have different boosting
> depending
> > on search term positions in the document. By using SpanFirstQuery he
> will
> > only be able to consider in terms till particular position;
>
>
> > but he won't be
> > able to do something like following:
> >   a) Give 100% boosting to matching in first 100 words.
> >   b) Give 80% boosting to matching in next 100 words.
> >   c) Give 60% boosting to matching in next 100 words.
>
> > Though it can be done by writing DisjunctionMaxQuery having multiple
> > SpanFirstQuery with different boosting - but I see it as a workaround
> only
> > and not the direct and efficient solution.
>
> You're right, but SpanFirstQuery needs only a minor modification
> for this to work.
>
> This modification to SpanFirstQuery would be that the Spans
> returned by SpanFirstQuery.getSpans() must always return 0
> from its start() method. Then the slop passed to sloppyFreq(slop)
> would be the distance from the beginning of the indexed field
> to the end of the Spans of the SpanQuery passed to SpanFirstQuery.
>
> Then the following should work:
>
> Term firstTerm = .... ;
>
> SpanFirstQuery sfq = new SpanFirstQuery(
>  new SpanTermQuery( firstTerm),
>  Integer.MAX_VALUE)) {
> ...
> public Similarity getSimilarity() {
> return new Similarity() {
> ...
> float sloppyFreq(slop) {
>  return (slop < 100)  ? 1.0f
>           : (slop < 200) ? 0.8f
>           : (slop < 300) ? 0.6f
>           : 0.4f ; // etc. etc.
> }}}}
>
>
> Actually, I'm a bit surprised that SpanFirstQuery does not work that
> way now.
>
> Regards,
> Paul Elschot
>
>
> >
> > Cedric,
> >
> > I am sending you the implementation of SpanTermQuery to your gmail
> > account (lucene
> > mailing list is bouncing email with attachment). I have named the class
> as
> > VSpanTermQuery (I have followed the same package hierarchy as lucene).
> You
> > also need to extend VSimilarity class - which would require
> implementation
> > of method scoreSpan(..).
> >
> > Let me know how it went. Though I did a testing for it, but before
> > submitting to contrib, I need to do extensive testing.
> >
> > Thanks,
> > Shailendra
> >
> > On 8/3/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > >
> > > Cedric,
> > >
> > > You can choose the end limit for SpanFirstQuery yourself.
> > >
> > > Regards,
> > > Paul Elschot
> > >
> > >
> > > On Friday 03 August 2007 05:38, Cedric Ho wrote:
> > > > Hi Paul,
> > > >
> > > > Isn't SpanFirstQuery only match those with position less than a
> > > > certain end position?
> > > >
> > > > I am rather looking for a query that would score a document higher
> for
> > > > terms appear near the start but not totally discard those with terms
> > > > appear near the end.
> > > >
> > > > Regards,
> > > > Cedric
> > > >
> > > > On 8/2/07, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> > > > > Cedric,
> > > > >
> > > > > SpanFirstQuery could be a solution without payloads.
> > > > > You may want to give it your own Similarity.sloppyFreq() .
> > > > >
> > > > > Regards,
> > > > > Paul Elschot
> > > > >
> > > > > On Thursday 02 August 2007 04:07, Cedric Ho wrote:
> > > > > > Thanks for the quick response =)
> > > > > >
> > > > > > On 8/1/07, Shailendra Sharma <shailendra.sharma@gmail.com>
> wrote:
> > > > > > > Yes, it is easily doable through "Payload" facility. During
> > > indexing
> > > > > process
> > > > > > > (mainly tokenization), you need to push this extra information
> in
> > > each
> > > > > > > token. And then you can use BoostingTermQuery for using
> Payload
> > > value
> > > to
> > > > > > > include Payload in the score. You also need to implement
> > > Similarity
> > > for
> > > > > this
> > > > > > > (mainly scorePayload method).
> > > > > >
> > > > > > If I store, say a custom boost factor as Payload, does it means
> that
> > > I
> > > > > > will store one more byte per term per document in the index
> file? So
> > > > > > the index file would be much larger?
> > > > > >
> > > > > > >
> > > > > > > Other way can be to extend SpanTermQuery, this already
> calculates
> > > the
> > > > > > > position of match. You just need to do something to use this
> > > position
> > > > > value
> > > > > > > in the score calculation.
> > > > > >
> > > > > > I see that SpanTermQuery takes a TermPositions from the
> indexReader
> > > > > > and I can get the term position from there. However I am not
> sure
> > > how
> > > > > > to incorporate it into the score calculation. Would you mind
> give a
> > > > > > little more detail on this?
> > > > > >
> > > > > > >
> > > > > > > One possible advantage of SpanTermQuery approach is that you
> can
> > > play
> > > > > > > around, without re-creating indices everytime.
> > > > > > >
> > > > > > > Thanks,
> > > > > > > Shailendra Sharma,
> > > > > > > CTO, Ver se' Innovation Pvt. Ltd.
> > > > > > > Bangalore, India
> > > > > > >
> > > > > > > On 8/1/07, Cedric Ho <cedric.ho@gmail.com> wrote:
> > > > > > > >
> > > > > > > > Hi all,
> > > > > > > >
> > > > > > > > I was wondering if it is possible to do boosting by search
> > > terms'
> > > > > > > > position in the document.
> > > > > > > >
> > > > > > > > for example:
> > > > > > > > search terms appear in the first 100 words, or first 10%
> words,
> > > or
> > > in
> > > > > > > > first two paragraphs would be given higher score.
> > > > > > > >
> > > > > > > > Is it achievable through using the new Payload function in
> > > lucene
> > > 2.2?
> > > > > > > > Or are there any easier ways to achieve these ?
> > > > > > > >
> > > > > > > >
> > > > > > > > Regards,
> > > > > > > > Cedric
> > > > > > > >
> > > > > > > >
> > > ---------------------------------------------------------------------
> > > > > > > > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > > > > > > For additional commands, e-mail:
> > > java-user-help@lucene.apache.org
> > > > > > > >
> > > > > > > >
> > > > > > >
> > > > > >
> > > > > > Thanks,
> > > > > > Cedric
> > > > > >
> > > > > >
> > > ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > > >
> > > > > >
> > > > > >
> > > > >
> > > > >
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > > >
> > > >
> > > >
> > > > --
> > > > $B0&(B@$B>e(B.Keyboard
> > > >
> > > >
> > > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11990_18837314.1197986385771--

From java-user-return-31538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 16:16:37 2007
Return-Path: <java-user-return-31538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45546 invoked from network); 18 Dec 2007 16:16:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 16:16:37 -0000
Received: (qmail 86567 invoked by uid 500); 18 Dec 2007 16:16:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86477 invoked by uid 500); 18 Dec 2007 16:16:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86466 invoked by uid 99); 18 Dec 2007 16:16:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 08:16:19 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a11.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 16:15:55 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a11.g.dreamhost.com (Postfix) with ESMTP id E7503B887B
	for <java-user@lucene.apache.org>; Tue, 18 Dec 2007 08:15:55 -0800 (PST)
Message-Id: <73ECE19D-123E-4D5C-9126-83553C8F2583@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <07Dec2.193755pst."58696"@synergy1.parc.xerox.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: lucene-core-2.2.0.jar broken? CorruptIndexException? 
Date: Tue, 18 Dec 2007 11:15:50 -0500
References: <1196280278.23481.1223752059@webmail.messagingengine.com> <1196284625.4114.1223763677@webmail.messagingengine.com> <1196331025.25608.1223860421@webmail.messagingengine.com> <262FD71B-41F1-4AB6-A0E0-38A785F8CA95@apache.org> <507AA1FE-18DB-4DC6-AF68-C31171FC9AE8@apache.org> <1196375823.32362.1223988889@webmail.messagingengine.com> <F47FD7DE-26AE-4C56-8BC1-A03CC11540EE@apache.org> <c68e39170712021832o340befdam4a4c4adb1beb7c9b@mail.gmail.com> <07Dec2.193755pst."58696"@synergy1.parc.xerox.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Hey Bill,

Any status on this?


On Dec 2, 2007, at 10:37 PM, Bill Janssen wrote:

>>> Hmmm, it still sounds like you are hitting a threading issue that is
>>> probably exacerbated by the multicore platform of the newer machine.
>>
>> Exactly what I was thinking.
>> What are the details of the CPUs of these two systems?
>
> Ah, good point.  The bad machine is a dual-processor 1GHz G4 "wind
> tunnel" model, and the good machine is a 1.5GH single-processor G4
> Powerbook.  I'm running the re-indexing in a daemon thread in a server
> which manages the repository.
>
> Bill
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 16:22:07 2007
Return-Path: <java-user-return-31539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47842 invoked from network); 18 Dec 2007 16:22:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 16:22:07 -0000
Received: (qmail 92326 invoked by uid 500); 18 Dec 2007 16:21:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92299 invoked by uid 500); 18 Dec 2007 16:21:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92288 invoked by uid 99); 18 Dec 2007 16:21:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 08:21:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vkblogger@gmail.com designates 64.233.170.188 as permitted sender)
Received: from [64.233.170.188] (HELO rn-out-0102.google.com) (64.233.170.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 16:21:27 +0000
Received: by rn-out-0102.google.com with SMTP id v46so411745rnb.14
        for <java-user@lucene.apache.org>; Tue, 18 Dec 2007 08:21:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=Lmbz504GyWR6I2VxZ7uGrwYAetxKYm3RTpu4acUYI70=;
        b=FX4w44YiAXfOVGjF9mkcpms6RiC7ZecqfcfTo3aqYL00CJMb+cEGI0AMw9kVSmTwAYRMrgetfVEEDcoFTA30YAjx/N3ympeaJIc1PjrpkuKAH80aJ99i1GZ6R/dBXQMHUy61iOsmnNgcSp+V8GZcePGY29i8FiUr3X2Wf/2wg/o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Dg/rYv5gpOOXTsAoXmYnozE7P6ltWvRtD5pmCxZJpgLGfFi7HTSooXPjzPF1cOSP15ux6/biVV3TyGp+H/bz7VizMxvLXYB/QPgkhaBPoFYCOTEqpqcQ2ll1c+qQUszCP0K7LsdIl+ZJ40R0yO4VyJDRW4bkVmr8JeDNfoNGQs8=
Received: by 10.142.108.14 with SMTP id g14mr1646755wfc.52.1197994888982;
        Tue, 18 Dec 2007 08:21:28 -0800 (PST)
Received: by 10.142.180.6 with HTTP; Tue, 18 Dec 2007 08:21:28 -0800 (PST)
Message-ID: <dd4e7dce0712180821v38db1ccar73006a0b8d7f14a0@mail.gmail.com>
Date: Tue, 18 Dec 2007 11:21:28 -0500
From: "v k" <vkblogger@gmail.com>
To: java-user@lucene.apache.org, nutch-user@lucene.apache.org
Subject: Infrastructure Question
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Hello,

I am using Lucene to build an index from roughly  10 million documents
in number. The  documents are about 4 TB in total.

After some trial runs, indexing a subset of the documents I am trying
to figure out a hosting service configuration to create a full index
from the entire 10 TB of data. As I am still unsure how this project
will turn out I am not purchasing hardware/ram but considering a web
host.
for the purpose of :
1)  download the data and to start indexing it.
2) The web front end to access this index will be a python framework (
eg. Django  etc)

I am seriously contemplating signing up with Joyent for this plan:
AMD Opteron x64 multi-core servers with 4GiB RAM per core
1/16 (Burstable up to 95%)
1 TB    - Bandwidth/month, 1 GB RAM, + as such as NAS  storage as I can
afford to pay for.

My QUESTION is - Will this RAM and CPU be sufficient during
development of the search application and building the index, etc. or
is it so abysmal and under-equipped in terms of hardware that the
development version of my application will not work.
I understand that having more RAM is always good, but is 1GB as good as nothing?

This setup is NOT for production but for for development so I can get
my hands dirty with lucene which will require plenty of tweaks as the
project moves along.

What initial configuration would you recommend for a development
version given the corpus size. I am not even sure how large my index
will look like at this point.

I hope to build an my indexes this way and once the search
infrastructure is working and the web-front end complete, I plan to
worry about Redundancy, availability and scalability for the many
users I hope to provide this free service for :-)

Many of you in this forum have built successful products with Lucene.
To name a few I am aware of -  Ken Krugle, James Ryley, Dennis Kubes

Some of you must have started with small machines,test set-ups etc
where you built your initial search apps. I hope  to receive some
advise about my plan and approach to start building an infrastructure
to support my Lucene app.

Thank you.

Venkat

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 16:44:23 2007
Return-Path: <java-user-return-31540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54482 invoked from network); 18 Dec 2007 16:44:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 16:44:23 -0000
Received: (qmail 40703 invoked by uid 500); 18 Dec 2007 16:44:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40676 invoked by uid 500); 18 Dec 2007 16:44:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40665 invoked by uid 99); 18 Dec 2007 16:44:05 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 08:44:05 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 16:43:42 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 2B4833BA42
	for <java-user@lucene.apache.org>; Tue, 18 Dec 2007 08:43:43 -0800 (PST)
Message-Id: <0342FFF3-0390-4822-9226-AC0AB377C124@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <dd4e7dce0712180821v38db1ccar73006a0b8d7f14a0@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Infrastructure Question
Date: Tue, 18 Dec 2007 11:43:43 -0500
References: <dd4e7dce0712180821v38db1ccar73006a0b8d7f14a0@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Venkat,

There is no need to post your question multiple times or cross-post.   
People are distributed all around the world on this list and aren't  
always available or capable to answer your question.  Having to wait  
11 hours for an answer on a free mailing list is not at all  
unreasonable.

If you are just looking to get your hands dirty with Lucene, why not  
just start w/ a subset on a machine you already own and work to scale  
up?  This way, you could start with what you have available and get a  
feel for your memory usage, etc.  Then you will be in a better  
position to decide what your needs are.

If there is one thing that is true about search it is the fact that  
everyone's situation is different.

Cheers,
Grant

On Dec 18, 2007, at 11:21 AM, v k wrote:

> Hello,
>
> I am using Lucene to build an index from roughly  10 million documents
> in number. The  documents are about 4 TB in total.
>
> After some trial runs, indexing a subset of the documents I am trying
> to figure out a hosting service configuration to create a full index
> from the entire 10 TB of data. As I am still unsure how this project
> will turn out I am not purchasing hardware/ram but considering a web
> host.
> for the purpose of :
> 1)  download the data and to start indexing it.
> 2) The web front end to access this index will be a python framework (
> eg. Django  etc)
>
> I am seriously contemplating signing up with Joyent for this plan:
> AMD Opteron x64 multi-core servers with 4GiB RAM per core
> 1/16 (Burstable up to 95%)
> 1 TB    - Bandwidth/month, 1 GB RAM, + as such as NAS  storage as I  
> can
> afford to pay for.
>
> My QUESTION is - Will this RAM and CPU be sufficient during
> development of the search application and building the index, etc. or
> is it so abysmal and under-equipped in terms of hardware that the
> development version of my application will not work.
> I understand that having more RAM is always good, but is 1GB as good  
> as nothing?
>
> This setup is NOT for production but for for development so I can get
> my hands dirty with lucene which will require plenty of tweaks as the
> project moves along.
>
> What initial configuration would you recommend for a development
> version given the corpus size. I am not even sure how large my index
> will look like at this point.
>
> I hope to build an my indexes this way and once the search
> infrastructure is working and the web-front end complete, I plan to
> worry about Redundancy, availability and scalability for the many
> users I hope to provide this free service for :-)
>
> Many of you in this forum have built successful products with Lucene.
> To name a few I am aware of -  Ken Krugle, James Ryley, Dennis Kubes
>
> Some of you must have started with small machines,test set-ups etc
> where you built your initial search apps. I hope  to receive some
> advise about my plan and approach to start building an infrastructure
> to support my Lucene app.
>
> Thank you.
>
> Venkat
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 16:49:54 2007
Return-Path: <java-user-return-31541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55503 invoked from network); 18 Dec 2007 16:49:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 16:49:54 -0000
Received: (qmail 45878 invoked by uid 500); 18 Dec 2007 16:49:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45844 invoked by uid 500); 18 Dec 2007 16:49:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45833 invoked by uid 99); 18 Dec 2007 16:49:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 08:49:35 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of vkblogger@gmail.com designates 72.14.202.177 as permitted sender)
Received: from [72.14.202.177] (HELO ro-out-1112.google.com) (72.14.202.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 16:49:10 +0000
Received: by ro-out-1112.google.com with SMTP id k5so676334rog.7
        for <java-user@lucene.apache.org>; Tue, 18 Dec 2007 08:49:13 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=oQoFG2wIoCr3KZXkNMqg9rWaXyfwU1rdo1D8XMn+eyg=;
        b=N3/REye3dURVNn+/brBZQrSyQNHBJOErBc7jLlYWI9z8oapo65IHG62yrplZfJl0bmlPXUFkJGJ8oN+SE6x2r/VuVUys7r0zYfcJbBA672k5W5jlzr3T3qRCTgnZdwgUgI30r8y1JHszVAaDk6clPStHlYMQTB3dka70g0qqNRY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=p87xGMsmPsyd0mgGYKhWwNE5GJIoYj7jbgIdhwfLXqYYaYclz3sHHm8NXBrJso9wgBlcxqKhPfs9Rjk7mgMD1HDWmiP5ZPQYO+zYpRwvSrcO1R1VVazAvfHO+xM53+ZVs6IHzOGHEsSm0TR0vf1JMOSPG+huKS0zBk7OVmEvqyA=
Received: by 10.142.191.2 with SMTP id o2mr1037080wff.209.1197996552062;
        Tue, 18 Dec 2007 08:49:12 -0800 (PST)
Received: by 10.142.180.6 with HTTP; Tue, 18 Dec 2007 08:49:12 -0800 (PST)
Message-ID: <dd4e7dce0712180849u4c3df0ceo3cac0b08eb4c2498@mail.gmail.com>
Date: Tue, 18 Dec 2007 11:49:12 -0500
From: "v k" <vkblogger@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Infrastructure Question
In-Reply-To: <0342FFF3-0390-4822-9226-AC0AB377C124@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <dd4e7dce0712180821v38db1ccar73006a0b8d7f14a0@mail.gmail.com>
	 <0342FFF3-0390-4822-9226-AC0AB377C124@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Sorry about that. For some reason, my post did not show up in the
mailing list and I still cannot see it  ( maybe a settings issue). I
don't mean to barrage the mailing  list with the same question. Thanks
for the advise.


On Dec 18, 2007 11:43 AM, Grant Ingersoll <gsingers@apache.org> wrote:
> Hi Venkat,
>
> There is no need to post your question multiple times or cross-post.
> People are distributed all around the world on this list and aren't
> always available or capable to answer your question.  Having to wait
> 11 hours for an answer on a free mailing list is not at all
> unreasonable.
>
> If you are just looking to get your hands dirty with Lucene, why not
> just start w/ a subset on a machine you already own and work to scale
> up?  This way, you could start with what you have available and get a
> feel for your memory usage, etc.  Then you will be in a better
> position to decide what your needs are.
>
> If there is one thing that is true about search it is the fact that
> everyone's situation is different.
>
> Cheers,
> Grant
>
>
> On Dec 18, 2007, at 11:21 AM, v k wrote:
>
> > Hello,
> >
> > I am using Lucene to build an index from roughly  10 million documents
> > in number. The  documents are about 4 TB in total.
> >
> > After some trial runs, indexing a subset of the documents I am trying
> > to figure out a hosting service configuration to create a full index
> > from the entire 10 TB of data. As I am still unsure how this project
> > will turn out I am not purchasing hardware/ram but considering a web
> > host.
> > for the purpose of :
> > 1)  download the data and to start indexing it.
> > 2) The web front end to access this index will be a python framework (
> > eg. Django  etc)
> >
> > I am seriously contemplating signing up with Joyent for this plan:
> > AMD Opteron x64 multi-core servers with 4GiB RAM per core
> > 1/16 (Burstable up to 95%)
> > 1 TB    - Bandwidth/month, 1 GB RAM, + as such as NAS  storage as I
> > can
> > afford to pay for.
> >
> > My QUESTION is - Will this RAM and CPU be sufficient during
> > development of the search application and building the index, etc. or
> > is it so abysmal and under-equipped in terms of hardware that the
> > development version of my application will not work.
> > I understand that having more RAM is always good, but is 1GB as good
> > as nothing?
> >
> > This setup is NOT for production but for for development so I can get
> > my hands dirty with lucene which will require plenty of tweaks as the
> > project moves along.
> >
> > What initial configuration would you recommend for a development
> > version given the corpus size. I am not even sure how large my index
> > will look like at this point.
> >
> > I hope to build an my indexes this way and once the search
> > infrastructure is working and the web-front end complete, I plan to
> > worry about Redundancy, availability and scalability for the many
> > users I hope to provide this free service for :-)
> >
> > Many of you in this forum have built successful products with Lucene.
> > To name a few I am aware of -  Ken Krugle, James Ryley, Dennis Kubes
> >
> > Some of you must have started with small machines,test set-ups etc
> > where you built your initial search apps. I hope  to receive some
> > advise about my plan and approach to start building an infrastructure
> > to support my Lucene app.
> >
> > Thank you.
> >
> > Venkat
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 17:10:56 2007
Return-Path: <java-user-return-31542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64121 invoked from network); 18 Dec 2007 17:10:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 17:10:55 -0000
Received: (qmail 81215 invoked by uid 500); 18 Dec 2007 17:10:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81191 invoked by uid 500); 18 Dec 2007 17:10:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81180 invoked by uid 99); 18 Dec 2007 17:10:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 09:10:38 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 17:10:15 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J4fxT-0003lt-6Q
	for java-user@lucene.apache.org; Tue, 18 Dec 2007 09:10:19 -0800
Message-ID: <14401354.post@talk.nabble.com>
Date: Tue, 18 Dec 2007 09:10:19 -0800 (PST)
From: Sirish Vadala <vsirishreddy@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: RE: Phrase Query Problem
In-Reply-To: <F1C79CDF8799D944A3156C40351731741809E7@rw-msg-02.broadvision.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vsirishreddy@yahoo.co.in
References: <14373945.post@talk.nabble.com> <F1C79CDF8799D944A3156C40351731741809E7@rw-msg-02.broadvision.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Yes... If my query phrase is "Health Safety", docs with "Health and Safety",
"Health or Safety" are being returned...

So... Is there any other way to handle this situation... Especially in the
above mentioned case, the user is expecting around 5 records and the query
is fetching more than 550 records.8-O

Thanks.


Zhang, Lisheng wrote:
> 
> Hi,
> 
> Do you mean that your query phrase is "Health Safety",
> but docs with "Health and Safety" returned?
> 
> If that is the case, the reason is that StandardAnalyzer
> filters out "and" (also "or, "in" and others) as stop 
> words during indexing, and the QueryParser filters those
> words out also.
> 
> Best regards, Lisheng
> 
> -----Original Message-----
> From: Sirish Vadala [mailto:vsirishreddy@yahoo.co.in]
> Sent: Monday, December 17, 2007 9:49 AM
> To: java-user@lucene.apache.org
> Subject: Phrase Query Problem
> 
> 
> 
> I have the following code for search:
> 
> BooleanQuery bQuery = new BooleanQuery();
> Query queryAuthor;
> queryAuthor = new TermQuery(new Term(IFIELD_LEAD_AUTHOR,
> author.trim().toLowerCase()));
> bQuery.add(queryAuthor, BooleanClause.Occur.MUST);
> ....................................................................
> ....................................................................
> 
> PhraseQuery pQuery = new PhraseQuery();
> String[] phrase = txtWithPhrase.toLowerCase().split(" ");
> for (int i = 0; i < phrase.length; i++) {
> 	pQuery.add(new Term(IFIELD_TEXT, phrase[i]));
> }
> pQuery.setSlop(0);
> bQuery.add(pQuery, BooleanClause.Occur.MUST);
> ....................................................................
> ....................................................................
> 
> String[] sortOrder = {IFIELD_LEAD_AUTHOR, IFIELD_TEXT};
> Sort sort = new Sort(sortOrder);
> hits = indexSearcher.search(bQuery, sort);
> 
> Now My problem here is: If I do a search on a phrase with text Health
> Safety, it is fetching me all the records where in the text is Health
> and/or/in Safety. It is fetching me these records even after setting the
> slop of the phrase query to zero for exact match. I am using standard
> analyzer while indexing my records.
> 
> Any help on this is greatly appreciated. 
> 
> Sirish Vadala
> -- 
> View this message in context:
> http://www.nabble.com/Phrase-Query-Problem-tp14373945p14373945.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Phrase-Query-Problem-tp14373945p14401354.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 17:19:38 2007
Return-Path: <java-user-return-31543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66823 invoked from network); 18 Dec 2007 17:19:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 17:19:38 -0000
Received: (qmail 98534 invoked by uid 500); 18 Dec 2007 17:19:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98509 invoked by uid 500); 18 Dec 2007 17:19:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98498 invoked by uid 99); 18 Dec 2007 17:19:21 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 09:19:21 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 17:18:58 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.8/8.13.8) with ESMTP id lBIHJ0bx084280
	for <java-user@lucene.apache.org>; Tue, 18 Dec 2007 18:19:00 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Can I do boosting based on term postions?
Date: Tue, 18 Dec 2007 18:19:07 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <839ba01c0707312113p278da04bg636e2bfa853e6ff4@mail.gmail.com> <200708032111.42593.paul.elschot@xs4all.nl> <e994873a0712180559x7a05f879s5bb1a07ef57bfa13@mail.gmail.com>
In-Reply-To: <e994873a0712180559x7a05f879s5bb1a07ef57bfa13@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200712181819.07910.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Tuesday 18 December 2007 14:59:45 Peter Keegan wrote:
> 
> Should I open a Jira issue?
> 

What shall I say?

http://www.apache.org/foundation/how-it-works.html

Regards,
Paul Elschot

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 17:42:30 2007
Return-Path: <java-user-return-31544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74532 invoked from network); 18 Dec 2007 17:42:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 17:42:30 -0000
Received: (qmail 20385 invoked by uid 500); 18 Dec 2007 17:42:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20352 invoked by uid 500); 18 Dec 2007 17:42:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20341 invoked by uid 99); 18 Dec 2007 17:42:13 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 09:42:13 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.87] (HELO web26013.mail.ukl.yahoo.com) (217.12.10.87)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Dec 2007 17:41:59 +0000
Received: (qmail 92710 invoked by uid 60001); 18 Dec 2007 17:41:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=q1fvJoTnE+Eko7Byhk7r8hgF0Mkj+/A5eCQhJi2msLNxgsp/9yn2rE+AOxnpY82iwH76YmblNxwXlNk9NL0F3c71j6cLeVEcFjsiriY45tnSpuuQYlN67Iwe3yAoDNhI0Fn8H4+LjU8A7xQjM5rJ43cpnYFnxB2ZGxYjtFLGlEE=;
X-YMail-OSG: 7UkgZ_QVM1keUIiuP2YnFQYp3Lg9gsYNvzghEFE6NucQJq_R0AxA5_DXvyBXqWEiVwzF2CaEEuHPE4p9suNfNXM9_DSF2cLF9TG6UAeH8sXviEtw9dRS2suAhjw-
Received: from [193.36.230.96] by web26013.mail.ukl.yahoo.com via HTTP; Tue, 18 Dec 2007 17:41:50 GMT
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Tue, 18 Dec 2007 17:41:50 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Phrase Query Problem
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <591741.91047.qm@web26013.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

You could write a custom analyzer that drops stopwords but adds an extra 1 =
to the "positionIncrement" property for the next valid Token after each omi=
ited stop word.=0A=0AThis would retain the benefit of removing stopwords fr=
om your index and yet prevent your example phrases matching (because the re=
maining words are not recorded as being directly next to each other)=0A=0AC=
heers=0AMark=0A=0A=0A----- Original Message ----=0AFrom: Sirish Vadala <vsi=
rishreddy@yahoo.co.in>=0ATo: java-user@lucene.apache.org=0ASent: Tuesday, 1=
8 December, 2007 5:10:19 PM=0ASubject: RE: Phrase Query Problem=0A=0A=0AYes=
... If my query phrase is "Health Safety", docs with "Health and=0A Safety"=
,=0A"Health or Safety" are being returned...=0A=0ASo... Is there any other =
way to handle this situation... Especially in=0A the=0Aabove mentioned case=
, the user is expecting around 5 records and the=0A query=0Ais fetching mor=
e than 550 records.8-O=0A=0AThanks.=0A=0A=0AZhang, Lisheng wrote:=0A> =0A> =
Hi,=0A> =0A> Do you mean that your query phrase is "Health Safety",=0A> but=
 docs with "Health and Safety" returned?=0A> =0A> If that is the case, the =
reason is that StandardAnalyzer=0A> filters out "and" (also "or, "in" and o=
thers) as stop =0A> words during indexing, and the QueryParser filters thos=
e=0A> words out also.=0A> =0A> Best regards, Lisheng=0A> =0A> -----Original=
 Message-----=0A> From: Sirish Vadala [mailto:vsirishreddy@yahoo.co.in]=0A>=
 Sent: Monday, December 17, 2007 9:49 AM=0A> To: java-user@lucene.apache.or=
g=0A> Subject: Phrase Query Problem=0A> =0A> =0A> =0A> I have the following=
 code for search:=0A> =0A> BooleanQuery bQuery =3D new BooleanQuery();=0A> =
Query queryAuthor;=0A> queryAuthor =3D new TermQuery(new Term(IFIELD_LEAD_A=
UTHOR,=0A> author.trim().toLowerCase()));=0A> bQuery.add(queryAuthor, Boole=
anClause.Occur.MUST);=0A> .................................................=
...................=0A> ...................................................=
.................=0A> =0A> PhraseQuery pQuery =3D new PhraseQuery();=0A> St=
ring[] phrase =3D txtWithPhrase.toLowerCase().split(" ");=0A> for (int i =
=3D 0; i < phrase.length; i++) {=0A>     pQuery.add(new Term(IFIELD_TEXT, p=
hrase[i]));=0A> }=0A> pQuery.setSlop(0);=0A> bQuery.add(pQuery, BooleanClau=
se.Occur.MUST);=0A> .......................................................=
.............=0A> .........................................................=
...........=0A> =0A> String[] sortOrder =3D {IFIELD_LEAD_AUTHOR, IFIELD_TEX=
T};=0A> Sort sort =3D new Sort(sortOrder);=0A> hits =3D indexSearcher.searc=
h(bQuery, sort);=0A> =0A> Now My problem here is: If I do a search on a phr=
ase with text Health=0A> Safety, it is fetching me all the records where in=
 the text is Health=0A> and/or/in Safety. It is fetching me these records e=
ven after setting=0A the=0A> slop of the phrase query to zero for exact mat=
ch. I am using standard=0A> analyzer while indexing my records.=0A> =0A> An=
y help on this is greatly appreciated. =0A> =0A> Sirish Vadala=0A> -- =0A> =
View this message in context:=0A> http://www.nabble.com/Phrase-Query-Proble=
m-tp14373945p14373945.html=0A> Sent from the Lucene - Java Users mailing li=
st archive at Nabble.com.=0A> =0A> =0A> -----------------------------------=
----------------------------------=0A> To unsubscribe, e-mail: java-user-un=
subscribe@lucene.apache.org=0A> For additional commands, e-mail: java-user-=
help@lucene.apache.org=0A> =0A> -------------------------------------------=
--------------------------=0A> To unsubscribe, e-mail: java-user-unsubscrib=
e@lucene.apache.org=0A> For additional commands, e-mail: java-user-help@luc=
ene.apache.org=0A> =0A> =0A> =0A=0A-- =0AView this message in context:=0A h=
ttp://www.nabble.com/Phrase-Query-Problem-tp14373945p14401354.html=0ASent f=
rom the Lucene - Java Users mailing list archive at Nabble.com.=0A=0A=0A---=
------------------------------------------------------------------=0ATo uns=
ubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional =
commands, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A    =
  __________________________________________________________=0ASent from Ya=
hoo! Mail - a smarter inbox http://uk.mail.yahoo.com=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 18:11:26 2007
Return-Path: <java-user-return-31545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83101 invoked from network); 18 Dec 2007 18:11:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 18:11:26 -0000
Received: (qmail 58533 invoked by uid 500); 18 Dec 2007 18:11:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58510 invoked by uid 500); 18 Dec 2007 18:11:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58499 invoked by uid 99); 18 Dec 2007 18:11:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 10:11:08 -0800
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.189] (HELO exprod6og105.obsmtp.com) (64.18.1.189)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Dec 2007 18:10:44 +0000
Received: from source ([139.56.8.7]) by exprod6ob105.postini.com ([64.18.5.12]) with SMTP;
	Tue, 18 Dec 2007 10:10:46 PST
Received: from triangulum2.broadvision.com (triangulum2.broadvision.com [10.10.32.38])
	by nebula2.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id lBIICQS00680
	for <java-user@lucene.apache.org>; Tue, 18 Dec 2007 10:12:26 -0800 (PST)
Received: from rw-gw-02.BroadVision.com (localhost [127.0.0.1])
	by triangulum2.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id KAA00223
	for <java-user@lucene.apache.org>; Tue, 18 Dec 2007 10:10:45 -0800 (PST)
Received: by rw-gw-02.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <Y0ZZ2C01>; Tue, 18 Dec 2007 10:10:45 -0800
Message-ID: <F1C79CDF8799D944A3156C40351731741809EC@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Phrase Query Problem
Date: Tue, 18 Dec 2007 10:10:40 -0800
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="utf-8"
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

In case you donot want to toss away any stop words and even
preserve case, WhiteSpaceAnalyzer can be used, also using
WhiteSpaceTokenizer would serve as a test (but need to reindex 
whole data set first), to make sure there is no other problems.

Best regards, Lisheng



-----Original Message-----
From: mark harwood [mailto:markharw00d@yahoo.co.uk]
Sent: Tuesday, December 18, 2007 9:42 AM
To: java-user@lucene.apache.org
Subject: Re: Phrase Query Problem


You could write a custom analyzer that drops stopwords but adds an extra 1
to the "positionIncrement" property for the next valid Token after each
omiited stop word.

This would retain the benefit of removing stopwords from your index and yet
prevent your example phrases matching (because the remaining words are not
recorded as being directly next to each other)

Cheers
Mark


----- Original Message ----
From: Sirish Vadala <vsirishreddy@yahoo.co.in>
To: java-user@lucene.apache.org
Sent: Tuesday, 18 December, 2007 5:10:19 PM
Subject: RE: Phrase Query Problem


Yes... If my query phrase is "Health Safety", docs with "Health and
 Safety",
"Health or Safety" are being returned...

So... Is there any other way to handle this situation... Especially in
 the
above mentioned case, the user is expecting around 5 records and the
 query
is fetching more than 550 records.8-O

Thanks.


Zhang, Lisheng wrote:
> 
> Hi,
> 
> Do you mean that your query phrase is "Health Safety",
> but docs with "Health and Safety" returned?
> 
> If that is the case, the reason is that StandardAnalyzer
> filters out "and" (also "or, "in" and others) as stop 
> words during indexing, and the QueryParser filters those
> words out also.
> 
> Best regards, Lisheng
> 
> -----Original Message-----
> From: Sirish Vadala [mailto:vsirishreddy@yahoo.co.in]
> Sent: Monday, December 17, 2007 9:49 AM
> To: java-user@lucene.apache.org
> Subject: Phrase Query Problem
> 
> 
> 
> I have the following code for search:
> 
> BooleanQuery bQuery = new BooleanQuery();
> Query queryAuthor;
> queryAuthor = new TermQuery(new Term(IFIELD_LEAD_AUTHOR,
> author.trim().toLowerCase()));
> bQuery.add(queryAuthor, BooleanClause.Occur.MUST);
> ....................................................................
> ....................................................................
> 
> PhraseQuery pQuery = new PhraseQuery();
> String[] phrase = txtWithPhrase.toLowerCase().split(" ");
> for (int i = 0; i < phrase.length; i++) {
>     pQuery.add(new Term(IFIELD_TEXT, phrase[i]));
> }
> pQuery.setSlop(0);
> bQuery.add(pQuery, BooleanClause.Occur.MUST);
> ....................................................................
> ....................................................................
> 
> String[] sortOrder = {IFIELD_LEAD_AUTHOR, IFIELD_TEXT};
> Sort sort = new Sort(sortOrder);
> hits = indexSearcher.search(bQuery, sort);
> 
> Now My problem here is: If I do a search on a phrase with text Health
> Safety, it is fetching me all the records where in the text is Health
> and/or/in Safety. It is fetching me these records even after setting
 the
> slop of the phrase query to zero for exact match. I am using standard
> analyzer while indexing my records.
> 
> Any help on this is greatly appreciated. 
> 
> Sirish Vadala
> -- 
> View this message in context:
> http://www.nabble.com/Phrase-Query-Problem-tp14373945p14373945.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context:
 http://www.nabble.com/Phrase-Query-Problem-tp14373945p14401354.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org






      __________________________________________________________
Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 18:22:50 2007
Return-Path: <java-user-return-31546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91507 invoked from network); 18 Dec 2007 18:22:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 18:22:50 -0000
Received: (qmail 78022 invoked by uid 500); 18 Dec 2007 18:22:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77980 invoked by uid 500); 18 Dec 2007 18:22:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77960 invoked by uid 99); 18 Dec 2007 18:22:33 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 10:22:33 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rakesh_shete@hotmail.com designates 65.54.246.216 as permitted sender)
Received: from [65.54.246.216] (HELO bay0-omc3-s16.bay0.hotmail.com) (65.54.246.216)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 18:22:18 +0000
Received: from BAY112-W14 ([64.4.26.114]) by bay0-omc3-s16.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 18 Dec 2007 10:22:10 -0800
Message-ID: <BAY112-W14C09CE696ECBB8629238DF9630@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_ea05411b-75c8-47dc-a4e5-2daa5b614e4e_"
X-Originating-IP: [220.225.70.2]
From: Rakesh Shete <rakesh_shete@hotmail.com>
To: <java-user-info@lucene.apache.org>, <java-user@lucene.apache.org>
Subject: Lucene multifield query problem
Date: Tue, 18 Dec 2007 23:52:10 +0530
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 18 Dec 2007 18:22:10.0330 (UTC) FILETIME=[E76DCFA0:01C841A2]
X-Virus-Checked: Checked by ClamAV on apache.org

--_ea05411b-75c8-47dc-a4e5-2daa5b614e4e_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi all,

I am facing problem with the following multifield query:

i_title:indoor* i_description:indoor* -i_published:false +i_topicsClasses.i=
d:1_1_*_*

The above query returns me even results which should not be there. Ideally =
I would like the query resullts as:

(i_title:indoor* i_description:indoor* -i_published:false) AND (i_topicsCla=
sses.id:1_1_*_*)

i.e. The intersection of the first part and second part.

But what is happening currently is that I get a union of the first part and=
 second part, i.e., whatever results are returned by "i_title:indoor* i_des=
cription:indoor* -i_published:false" are combined (union) with results retu=
rned by "+i_topicsClasses.id:1_1_*_*".

How do I write a query that returns me results which are an intersection of=
 the above 2 parts?

--Regards,
Rakesh S

_________________________________________________________________
Post ads for free - to sell, rent or even buy.www.yello.in
http://ss1.richmedia.in/recurl.asp?pid=3D186=

--_ea05411b-75c8-47dc-a4e5-2daa5b614e4e_--

From java-user-return-31547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 18:26:21 2007
Return-Path: <java-user-return-31547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92309 invoked from network); 18 Dec 2007 18:26:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 18:26:21 -0000
Received: (qmail 84566 invoked by uid 500); 18 Dec 2007 18:26:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83645 invoked by uid 500); 18 Dec 2007 18:26:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83634 invoked by uid 99); 18 Dec 2007 18:26:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 10:26:04 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 18:25:52 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J4h8R-0006SY-Ui
	for java-user@lucene.apache.org; Tue, 18 Dec 2007 10:25:43 -0800
Message-ID: <14402820.post@talk.nabble.com>
Date: Tue, 18 Dec 2007 10:25:43 -0800 (PST)
From: Sirish Vadala <vsirishreddy@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: RE: Phrase Query Problem
In-Reply-To: <F1C79CDF8799D944A3156C40351731741809EC@rw-msg-02.broadvision.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vsirishreddy@yahoo.co.in
References: <14373945.post@talk.nabble.com> <F1C79CDF8799D944A3156C40351731741809EC@rw-msg-02.broadvision.com>
X-Virus-Checked: Checked by ClamAV on apache.org


ok, thnx... I will implement using the WhiteSpaceAnalyzer... Let me check the
indexing speed... I mean time taken to index my data set... If that takes
too long then probably I will look into implementing a custom analyzer...


Zhang, Lisheng wrote:
> 
> Hi,
> 
> In case you donot want to toss away any stop words and even
> preserve case, WhiteSpaceAnalyzer can be used, also using
> WhiteSpaceTokenizer would serve as a test (but need to reindex 
> whole data set first), to make sure there is no other problems.
> 
> Best regards, Lisheng
> 
> 
> 
> -----Original Message-----
> From: mark harwood [mailto:markharw00d@yahoo.co.uk]
> Sent: Tuesday, December 18, 2007 9:42 AM
> To: java-user@lucene.apache.org
> Subject: Re: Phrase Query Problem
> 
> 
> You could write a custom analyzer that drops stopwords but adds an extra 1
> to the "positionIncrement" property for the next valid Token after each
> omiited stop word.
> 
> This would retain the benefit of removing stopwords from your index and
> yet
> prevent your example phrases matching (because the remaining words are not
> recorded as being directly next to each other)
> 
> Cheers
> Mark
> 
> 
> ----- Original Message ----
> From: Sirish Vadala <vsirishreddy@yahoo.co.in>
> To: java-user@lucene.apache.org
> Sent: Tuesday, 18 December, 2007 5:10:19 PM
> Subject: RE: Phrase Query Problem
> 
> 
> Yes... If my query phrase is "Health Safety", docs with "Health and
>  Safety",
> "Health or Safety" are being returned...
> 
> So... Is there any other way to handle this situation... Especially in
>  the
> above mentioned case, the user is expecting around 5 records and the
>  query
> is fetching more than 550 records.8-O
> 
> Thanks.
> 
> 
> Zhang, Lisheng wrote:
>> 
>> Hi,
>> 
>> Do you mean that your query phrase is "Health Safety",
>> but docs with "Health and Safety" returned?
>> 
>> If that is the case, the reason is that StandardAnalyzer
>> filters out "and" (also "or, "in" and others) as stop 
>> words during indexing, and the QueryParser filters those
>> words out also.
>> 
>> Best regards, Lisheng
>> 
>> -----Original Message-----
>> From: Sirish Vadala [mailto:vsirishreddy@yahoo.co.in]
>> Sent: Monday, December 17, 2007 9:49 AM
>> To: java-user@lucene.apache.org
>> Subject: Phrase Query Problem
>> 
>> 
>> 
>> I have the following code for search:
>> 
>> BooleanQuery bQuery = new BooleanQuery();
>> Query queryAuthor;
>> queryAuthor = new TermQuery(new Term(IFIELD_LEAD_AUTHOR,
>> author.trim().toLowerCase()));
>> bQuery.add(queryAuthor, BooleanClause.Occur.MUST);
>> ....................................................................
>> ....................................................................
>> 
>> PhraseQuery pQuery = new PhraseQuery();
>> String[] phrase = txtWithPhrase.toLowerCase().split(" ");
>> for (int i = 0; i < phrase.length; i++) {
>>     pQuery.add(new Term(IFIELD_TEXT, phrase[i]));
>> }
>> pQuery.setSlop(0);
>> bQuery.add(pQuery, BooleanClause.Occur.MUST);
>> ....................................................................
>> ....................................................................
>> 
>> String[] sortOrder = {IFIELD_LEAD_AUTHOR, IFIELD_TEXT};
>> Sort sort = new Sort(sortOrder);
>> hits = indexSearcher.search(bQuery, sort);
>> 
>> Now My problem here is: If I do a search on a phrase with text Health
>> Safety, it is fetching me all the records where in the text is Health
>> and/or/in Safety. It is fetching me these records even after setting
>  the
>> slop of the phrase query to zero for exact match. I am using standard
>> analyzer while indexing my records.
>> 
>> Any help on this is greatly appreciated. 
>> 
>> Sirish Vadala
>> -- 
>> View this message in context:
>> http://www.nabble.com/Phrase-Query-Problem-tp14373945p14373945.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> -- 
> View this message in context:
>  http://www.nabble.com/Phrase-Query-Problem-tp14373945p14401354.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> 
>       __________________________________________________________
> Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Phrase-Query-Problem-tp14373945p14402820.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 18:27:33 2007
Return-Path: <java-user-return-31548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92702 invoked from network); 18 Dec 2007 18:27:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 18:27:33 -0000
Received: (qmail 87985 invoked by uid 500); 18 Dec 2007 18:27:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87757 invoked by uid 500); 18 Dec 2007 18:27:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87745 invoked by uid 99); 18 Dec 2007 18:27:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 10:27:15 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 18:26:51 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene multifield query problem
Date: Tue, 18 Dec 2007 13:26:24 -0500
Message-ID: <9294E20AED46934EA459020706463F946642FE@SUEXCL-02.ad.syr.edu>
In-Reply-To: <BAY112-W14C09CE696ECBB8629238DF9630@phx.gbl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene multifield query problem
Thread-Index: AchBowLK1n6ij1NiSIGc68l6MgxGhAAAFL6Q
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Rakesh,

Set the default QueryParser operator to AND (default default operator :) =
is OR):

<http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/queryParser/Qu=
eryParser.html#setDefaultOperator(org.apache.lucene.queryParser.QueryPars=
er.Operator)>

Steve

On 12/18/2007 at 1:22 PM, Rakesh Shete wrote:
>=20
> Hi all,
>=20
> I am facing problem with the following multifield query:
>=20
> i_title:indoor* i_description:indoor* -i_published:false
> +i_topicsClasses.id:1_1_*_*
>=20
> The above query returns me even results which should not be
> there. Ideally I would like the query resullts as:
>=20
> (i_title:indoor* i_description:indoor* -i_published:false)
> AND (i_topicsClasses.id:1_1_*_*)
>=20
> i.e. The intersection of the first part and second part.
>=20
> But what is happening currently is that I get a union of the
> first part and second part, i.e., whatever results are
> returned by "i_title:indoor* i_description:indoor*
> -i_published:false" are combined (union) with results
> returned by "+i_topicsClasses.id:1_1_*_*".
>=20
> How do I write a query that returns me results which are an
> intersection of the above 2 parts?
>=20
> --Regards,
> Rakesh S
>=20
> _________________________________________________________________ Post
> ads for free - to sell, rent or even buy.www.yello.in
> http://ss1.richmedia.in/recurl.asp?pid=3D186
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 18:32:00 2007
Return-Path: <java-user-return-31549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93994 invoked from network); 18 Dec 2007 18:32:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 18:32:00 -0000
Received: (qmail 97525 invoked by uid 500); 18 Dec 2007 18:31:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97040 invoked by uid 500); 18 Dec 2007 18:31:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97029 invoked by uid 99); 18 Dec 2007 18:31:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 10:31:42 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of marcelo.ochoa@gmail.com designates 72.14.246.247 as permitted sender)
Received: from [72.14.246.247] (HELO ag-out-0708.google.com) (72.14.246.247)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 18:31:17 +0000
Received: by ag-out-0708.google.com with SMTP id 5so1924533agb.11
        for <java-user@lucene.apache.org>; Tue, 18 Dec 2007 10:31:20 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=3Yy9EozcJxO5f61+EIME8k/+qL91peK0iTZIzCqTRZE=;
        b=g0Y9/2ybslWY9ojI2/1GBH0nvepKPZJtR+f7q8k8actXPGeEry/B7TJzWIuXiF2Q2IKR63jXQ3Wl86MFVOgrOLIvprIhBGkdAz+CJX7+SMUpJy3Jt8x2kKtYwEiOzgFwe/aCk28rSxlT/uoPRRM6tJjw9oxRX9S8GFJNncMLtPM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=HDjyeC/w6YT2BzVp2kapZBzciymLQHfca8SYu18SPi4z6SkV+iwm634VemqqFQJ4LdTVcFO+v8QiPmy4G5X+F7uhqJfe24WTSzZtaQ90wBEnv+LFGNkxyExZ7la2LGhCMi0oBTHyJXoOjQz75KoLCo4sIXU45GcQ/M7pXCkP7QI=
Received: by 10.150.155.1 with SMTP id c1mr587053ybe.85.1198002680539;
        Tue, 18 Dec 2007 10:31:20 -0800 (PST)
Received: by 10.150.12.10 with HTTP; Tue, 18 Dec 2007 10:31:20 -0800 (PST)
Message-ID: <126142c0712181031o45fa19afxfa05399cb2602b91@mail.gmail.com>
Date: Tue, 18 Dec 2007 15:31:20 -0300
From: "Marcelo Ochoa" <marcelo.ochoa@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Indexing Wikipedia dumps
In-Reply-To: <47623A00.5060704@cs.put.poznan.pl>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <547045.76613.qm@web50306.mail.re2.yahoo.com>
	 <80EC5EE9-581A-46F5-B250-344DD164A158@mikemccandless.com>
	 <C44CF8C3-3A5D-46FC-9094-7486874C3392@apache.org>
	 <4760E1BC.10105@cs.put.poznan.pl>
	 <CF43AE77-406B-4575-8A09-AD784C536057@mac.com>
	 <47623A00.5060704@cs.put.poznan.pl>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi All:
  Just to add simple hack, I had posted at my Blog an entry named
"Uploading WikiPedia Dumps to Oracle databases":
http://marceloochoa.blogspot.com/2007_12_01_archive.html
  with instructions to upload WikiPedia Dumps to Oracle XMLDB, it
means transforming an XML file to an object-relational storage.
  Finally, I added instructions to index it with Lucene Domain Index.
  Best regards, Marcelo.

On Dec 14, 2007 5:08 AM, Dawid Weiss <dawid.weiss@cs.put.poznan.pl> wrote:
>
> Good pointers, thanks. I asked because I did have a problem like this a few
> months ago -- none of the existing parsers solved it for me (back then).
>
> D.
>
>
> Petite Abeille wrote:
> >
> > On Dec 13, 2007, at 8:39 AM, Dawid Weiss wrote:
> >
> >> Just incidentally -- do you know of something that would parse the
> >> wikipedia markup (to plain text, for example)?
> >
> > If you find out, let us know :)
> >
> > You may want to check the partial ANTLR grammar for Wikitext:
> >
> > http://www.mediawiki.org/wiki/User:Stevage/ANTLR
> > http://lists.wikimedia.org/pipermail/wikitext-l/2007-December/000117.html
> >
> > This also might be of interest:
> >
> > http://www.softlab.ntua.gr/~ttsiod/buildWikipediaOffline.html
> >
> > "the nice people over at woc.fslab.de have created a standalone
> > wiki-markup parser which is ready for use"
> > http://fslab.de/svn/wpofflineclient/trunk/mediawiki_sa
> > There is also Text::MediawikiFormat:
> > http://search.cpan.org/~dprice/Text-MediawikiFormat-0.05/lib/Text/MediawikiFormat.pm
> >
> > Perhaps you will be better off processing the Wikipedia static HTML
> > dump, instead of the XML one:
> > http://static.wikipedia.org/
> > Not a piece of cake one way or another :(
> > Cheers,
> > PA.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>



-- 
Marcelo F. Ochoa
http://marceloochoa.blogspot.com/
http://marcelo.ochoa.googlepages.com/home
______________
Do you Know DBPrism? Look @ DB Prism's Web Site
http://www.dbprism.com.ar/index.html
More info?
Chapter 17 of the book "Programming the Oracle Database using Java &
Web Services"
http://www.amazon.com/gp/product/1555583296/
Chapter 21 of the book "Professional XML Databases" - Wrox Press
http://www.amazon.com/gp/product/1861003587/
Chapter 8 of the book "Oracle & Open Source" - O'Reilly
http://www.oreilly.com/catalog/oracleopen/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 18:40:34 2007
Return-Path: <java-user-return-31550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97193 invoked from network); 18 Dec 2007 18:40:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 18:40:34 -0000
Received: (qmail 11720 invoked by uid 500); 18 Dec 2007 18:40:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11680 invoked by uid 500); 18 Dec 2007 18:40:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11669 invoked by uid 99); 18 Dec 2007 18:40:17 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 10:40:17 -0800
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.181] (HELO exprod6og101.obsmtp.com) (64.18.1.181)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 18 Dec 2007 18:40:03 +0000
Received: from source ([139.56.8.7]) by exprod6ob101.postini.com ([64.18.5.12]) with SMTP;
	Tue, 18 Dec 2007 10:39:50 PST
Received: from triangulum2.broadvision.com (triangulum2.broadvision.com [10.10.32.38])
	by nebula2.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id lBIIfUS01245
	for <java-user@lucene.apache.org>; Tue, 18 Dec 2007 10:41:30 -0800 (PST)
Received: from rw-gw-02.BroadVision.com (localhost [127.0.0.1])
	by triangulum2.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id KAA00696
	for <java-user@lucene.apache.org>; Tue, 18 Dec 2007 10:39:49 -0800 (PST)
Received: by rw-gw-02.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <Y0ZZ2DBP>; Tue, 18 Dec 2007 10:39:49 -0800
Message-ID: <F1C79CDF8799D944A3156C40351731741809EE@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Phrase Query Problem
Date: Tue, 18 Dec 2007 10:39:46 -0800
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org

Hi,

1) Whenever we change to a different analyzer, we need to reindex
   whole dataset, whether or not using WhiteSpaceAnalyzer.
2) Using WhiteSpaceAnalyzer may increase disk space and slow-down
   indexing because more tokens are indexed, how much can be slowed
   I donot know.
3) WhiteSpaceAnalyzer also keeps case, for example, if input text
   has "Health", query "health" may not return the doc, make sure
   if this is you need, also this analyzer will keep all symbols,
   like coma, period .... For example, if text has "Number ONE issue
   is health safety!", query "health safety" will not return the doc,
   because "safety!" is indexed as a token, not "safety".

I felt most important thing is to make sure the exact query requirement,
then picking up analyzer.

Best regards, Lisheng

-----Original Message-----
From: Sirish Vadala [mailto:vsirishreddy@yahoo.co.in]
Sent: Tuesday, December 18, 2007 10:26 AM
To: java-user@lucene.apache.org
Subject: RE: Phrase Query Problem



ok, thnx... I will implement using the WhiteSpaceAnalyzer... Let me check
the
indexing speed... I mean time taken to index my data set... If that takes
too long then probably I will look into implementing a custom analyzer...


Zhang, Lisheng wrote:
> 
> Hi,
> 
> In case you donot want to toss away any stop words and even
> preserve case, WhiteSpaceAnalyzer can be used, also using
> WhiteSpaceTokenizer would serve as a test (but need to reindex 
> whole data set first), to make sure there is no other problems.
> 
> Best regards, Lisheng
> 
> 
> 
> -----Original Message-----
> From: mark harwood [mailto:markharw00d@yahoo.co.uk]
> Sent: Tuesday, December 18, 2007 9:42 AM
> To: java-user@lucene.apache.org
> Subject: Re: Phrase Query Problem
> 
> 
> You could write a custom analyzer that drops stopwords but adds an extra 1
> to the "positionIncrement" property for the next valid Token after each
> omiited stop word.
> 
> This would retain the benefit of removing stopwords from your index and
> yet
> prevent your example phrases matching (because the remaining words are not
> recorded as being directly next to each other)
> 
> Cheers
> Mark
> 
> 
> ----- Original Message ----
> From: Sirish Vadala <vsirishreddy@yahoo.co.in>
> To: java-user@lucene.apache.org
> Sent: Tuesday, 18 December, 2007 5:10:19 PM
> Subject: RE: Phrase Query Problem
> 
> 
> Yes... If my query phrase is "Health Safety", docs with "Health and
>  Safety",
> "Health or Safety" are being returned...
> 
> So... Is there any other way to handle this situation... Especially in
>  the
> above mentioned case, the user is expecting around 5 records and the
>  query
> is fetching more than 550 records.8-O
> 
> Thanks.
> 
> 
> Zhang, Lisheng wrote:
>> 
>> Hi,
>> 
>> Do you mean that your query phrase is "Health Safety",
>> but docs with "Health and Safety" returned?
>> 
>> If that is the case, the reason is that StandardAnalyzer
>> filters out "and" (also "or, "in" and others) as stop 
>> words during indexing, and the QueryParser filters those
>> words out also.
>> 
>> Best regards, Lisheng
>> 
>> -----Original Message-----
>> From: Sirish Vadala [mailto:vsirishreddy@yahoo.co.in]
>> Sent: Monday, December 17, 2007 9:49 AM
>> To: java-user@lucene.apache.org
>> Subject: Phrase Query Problem
>> 
>> 
>> 
>> I have the following code for search:
>> 
>> BooleanQuery bQuery = new BooleanQuery();
>> Query queryAuthor;
>> queryAuthor = new TermQuery(new Term(IFIELD_LEAD_AUTHOR,
>> author.trim().toLowerCase()));
>> bQuery.add(queryAuthor, BooleanClause.Occur.MUST);
>> ....................................................................
>> ....................................................................
>> 
>> PhraseQuery pQuery = new PhraseQuery();
>> String[] phrase = txtWithPhrase.toLowerCase().split(" ");
>> for (int i = 0; i < phrase.length; i++) {
>>     pQuery.add(new Term(IFIELD_TEXT, phrase[i]));
>> }
>> pQuery.setSlop(0);
>> bQuery.add(pQuery, BooleanClause.Occur.MUST);
>> ....................................................................
>> ....................................................................
>> 
>> String[] sortOrder = {IFIELD_LEAD_AUTHOR, IFIELD_TEXT};
>> Sort sort = new Sort(sortOrder);
>> hits = indexSearcher.search(bQuery, sort);
>> 
>> Now My problem here is: If I do a search on a phrase with text Health
>> Safety, it is fetching me all the records where in the text is Health
>> and/or/in Safety. It is fetching me these records even after setting
>  the
>> slop of the phrase query to zero for exact match. I am using standard
>> analyzer while indexing my records.
>> 
>> Any help on this is greatly appreciated. 
>> 
>> Sirish Vadala
>> -- 
>> View this message in context:
>> http://www.nabble.com/Phrase-Query-Problem-tp14373945p14373945.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> -- 
> View this message in context:
>  http://www.nabble.com/Phrase-Query-Problem-tp14373945p14401354.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> 
>       __________________________________________________________
> Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context:
http://www.nabble.com/Phrase-Query-Problem-tp14373945p14402820.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 18:58:43 2007
Return-Path: <java-user-return-31551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2238 invoked from network); 18 Dec 2007 18:58:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 18:58:42 -0000
Received: (qmail 31232 invoked by uid 500); 18 Dec 2007 18:58:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31204 invoked by uid 500); 18 Dec 2007 18:58:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31193 invoked by uid 99); 18 Dec 2007 18:58:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 10:58:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rakesh_shete@hotmail.com designates 65.54.246.220 as permitted sender)
Received: from [65.54.246.220] (HELO bay0-omc3-s20.bay0.hotmail.com) (65.54.246.220)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 18:58:01 +0000
Received: from BAY112-W38 ([64.4.26.138]) by bay0-omc3-s20.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 18 Dec 2007 10:58:04 -0800
Message-ID: <BAY112-W38A467EC53ACDC15E9CDBBF9630@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_bac62f1d-69ca-4afe-85f5-f95e8e409d27_"
X-Originating-IP: [220.225.70.2]
From: Rakesh Shete <rakesh_shete@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene multifield query problem
Date: Wed, 19 Dec 2007 00:28:04 +0530
Importance: Normal
In-Reply-To: <9294E20AED46934EA459020706463F946642FE@SUEXCL-02.ad.syr.edu>
References: <BAY112-W14C09CE696ECBB8629238DF9630@phx.gbl>
 <9294E20AED46934EA459020706463F946642FE@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
X-OriginalArrivalTime: 18 Dec 2007 18:58:04.0969 (UTC) FILETIME=[EBB1A190:01C841A7]
X-Virus-Checked: Checked by ClamAV on apache.org

--_bac62f1d-69ca-4afe-85f5-f95e8e409d27_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Thanks for the suggestion Steve. My problem is with getting the correct res=
ults. Let me put in words the query :

Fetch all documents such that the search string "indoor*" is either part of=
 the 'i_title' field or 'i_description' field, eliminate if not published (=
-i_published:false) but should have topic id of the form "1_1_*_*" (i_topic=
sClasses.id:1_1_*_*)

i_title:indoor* i_description:indoor* -i_published:false  +i_topicsClasses.=
id:1_1_*_* returns me extra results which should not be fetched.

-- Regards,
Rakesh Shete

> Subject: RE: Lucene multifield query problem
> Date: Tue, 18 Dec 2007 13:26:24 -0500
> From: sarowe@syr.edu
> To: java-user@lucene.apache.org
>=20
> Hi Rakesh,
>=20
> Set the default QueryParser operator to AND (default default operator :) =
is OR):
>=20
> <http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/queryParser/Qu=
eryParser.html#setDefaultOperator(org.apache.lucene.queryParser.QueryParser=
.Operator)>
>=20
> Steve
>=20
> On 12/18/2007 at 1:22 PM, Rakesh Shete wrote:
> >=20
> > Hi all,
> >=20
> > I am facing problem with the following multifield query:
> >=20
> > i_title:indoor* i_description:indoor* -i_published:false
> > +i_topicsClasses.id:1_1_*_*
> >=20
> > The above query returns me even results which should not be
> > there. Ideally I would like the query resullts as:
> >=20
> > (i_title:indoor* i_description:indoor* -i_published:false)
> > AND (i_topicsClasses.id:1_1_*_*)
> >=20
> > i.e. The intersection of the first part and second part.
> >=20
> > But what is happening currently is that I get a union of the
> > first part and second part, i.e., whatever results are
> > returned by "i_title:indoor* i_description:indoor*
> > -i_published:false" are combined (union) with results
> > returned by "+i_topicsClasses.id:1_1_*_*".
> >=20
> > How do I write a query that returns me results which are an
> > intersection of the above 2 parts?
> >=20
> > --Regards,
> > Rakesh S
> >=20
> > _________________________________________________________________ Post
> > ads for free - to sell, rent or even buy.www.yello.in
> > http://ss1.richmedia.in/recurl.asp?pid=3D186
> >
>=20
> =20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20

_________________________________________________________________
Post ads for free - to sell, rent or even buy.www.yello.in
http://ss1.richmedia.in/recurl.asp?pid=3D186=

--_bac62f1d-69ca-4afe-85f5-f95e8e409d27_--

From java-user-return-31552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 19:29:59 2007
Return-Path: <java-user-return-31552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9379 invoked from network); 18 Dec 2007 19:29:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 19:29:59 -0000
Received: (qmail 77157 invoked by uid 500); 18 Dec 2007 19:29:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77122 invoked by uid 500); 18 Dec 2007 19:29:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77111 invoked by uid 99); 18 Dec 2007 19:29:42 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 11:29:42 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 19:29:29 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene multifield query problem
Date: Tue, 18 Dec 2007 14:28:51 -0500
Message-ID: <9294E20AED46934EA459020706463F94664304@SUEXCL-02.ad.syr.edu>
In-Reply-To: <BAY112-W38A467EC53ACDC15E9CDBBF9630@phx.gbl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene multifield query problem
Thread-Index: AchBqANsZmH3MXnATcq3BKCrtYT6+wAA1ePg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Rakesh,

This doesn't look like a user-generated query.  Have you considered =
building the Query via the API instead of using QueryParser?

With QueryParser, you should get the results you want with syntax like:

+(i_title:indoor* OR i_description:indoor*) -i_published:false =
+i_topicsClasses.id:1_1_*_*

Have you tried this yet?

Steve

On 12/18/2007 at 1:58 PM, Rakesh Shete wrote:
>=20
> Thanks for the suggestion Steve. My problem is with getting
> the correct results. Let me put in words the query :
>=20
> Fetch all documents such that the search string "indoor*" is
> either part of the 'i_title' field or 'i_description' field,
> eliminate if not published (-i_published:false) but should
> have topic id of the form "1_1_*_*" (i_topicsClasses.id:1_1_*_*)
>=20
> i_title:indoor* i_description:indoor* -i_published:false
> +i_topicsClasses.id:1_1_*_* returns me extra results which
> should not be fetched.
>=20
> -- Regards,
> Rakesh Shete
>=20
> > Subject: RE: Lucene multifield query problem
> > Date: Tue, 18 Dec 2007 13:26:24 -0500
> > From: sarowe@syr.edu
> > To: java-user@lucene.apache.org
> >=20
> > Hi Rakesh,
> >=20
> > Set the default QueryParser operator to AND (default default =
operator
> > :) is OR):
> >=20
> >=20
> <http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/que
> ryParser/QueryParser.html#setDefaultOperator(org.apache.lucene
> .queryParser.QueryParser.Operator)>
> >=20
> > Steve
> >=20
> > On 12/18/2007 at 1:22 PM, Rakesh Shete wrote:
> > >=20
> > > Hi all,
> > >=20
> > > I am facing problem with the following multifield query:
> > >=20
> > > i_title:indoor* i_description:indoor* -i_published:false
> > > +i_topicsClasses.id:1_1_*_*
> > >=20
> > > The above query returns me even results which should not be
> > > there. Ideally I would like the query resullts as:
> > >=20
> > > (i_title:indoor* i_description:indoor* -i_published:false)
> > > AND (i_topicsClasses.id:1_1_*_*)
> > >=20
> > > i.e. The intersection of the first part and second part.
> > >=20
> > > But what is happening currently is that I get a union of the
> > > first part and second part, i.e., whatever results are
> > > returned by "i_title:indoor* i_description:indoor*
> > > -i_published:false" are combined (union) with results
> > > returned by "+i_topicsClasses.id:1_1_*_*".
> > >=20
> > > How do I write a query that returns me results which are an
> > > intersection of the above 2 parts?
> > >=20
> > > --Regards,
> > > Rakesh S
> > >=20
> > >=20
> > > _________________________________________________________________ =
Post
> > > ads for free - to sell, rent or even buy.www.yello.in
> > > http://ss1.richmedia.in/recurl.asp?pid=3D186
> > >=20
> >=20
> >=20
> >=20
> >=20
> >=20
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> > additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
>=20
> _________________________________________________________________ Post
> ads for free - to sell, rent or even buy.www.yello.in
> http://ss1.richmedia.in/recurl.asp?pid=3D186
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 19:45:27 2007
Return-Path: <java-user-return-31553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12129 invoked from network); 18 Dec 2007 19:45:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 19:45:27 -0000
Received: (qmail 94524 invoked by uid 500); 18 Dec 2007 19:45:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94486 invoked by uid 500); 18 Dec 2007 19:45:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94475 invoked by uid 99); 18 Dec 2007 19:45:10 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 11:45:10 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 19:44:58 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J4iN0-0000mw-Bc
	for java-user@lucene.apache.org; Tue, 18 Dec 2007 11:44:50 -0800
Message-ID: <14404143.post@talk.nabble.com>
Date: Tue, 18 Dec 2007 11:44:50 -0800 (PST)
From: Sirish Vadala <vsirishreddy@yahoo.co.in>
To: java-user@lucene.apache.org
Subject: RE: Phrase Query Problem
In-Reply-To: <F1C79CDF8799D944A3156C40351731741809EE@rw-msg-02.broadvision.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: vsirishreddy@yahoo.co.in
References: <14373945.post@talk.nabble.com> <F1C79CDF8799D944A3156C40351731741809EE@rw-msg-02.broadvision.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hmmm... I had come up with a temporary solution for the time being. This is
how I am initializing the StandardAnalyzer to fix my problem.

String[] STOP_WORDS = {};
this.analyzer = new StandardAnalyzer(STOP_WORDS);

This now indexes all my stop words, and gladly it didn't increase my
indexing time remarkably, but only a small difference. Not sure if this is
the right solution. Will also do some research on custom analyzers.


Hi,

1) Whenever we change to a different analyzer, we need to reindex
   whole dataset, whether or not using WhiteSpaceAnalyzer.
2) Using WhiteSpaceAnalyzer may increase disk space and slow-down
   indexing because more tokens are indexed, how much can be slowed
   I donot know.
3) WhiteSpaceAnalyzer also keeps case, for example, if input text
   has "Health", query "health" may not return the doc, make sure
   if this is you need, also this analyzer will keep all symbols,
   like coma, period .... For example, if text has "Number ONE issue
   is health safety!", query "health safety" will not return the doc,
   because "safety!" is indexed as a token, not "safety".

I felt most important thing is to make sure the exact query requirement,
then picking up analyzer.

Best regards, Lisheng

-- 
View this message in context: http://www.nabble.com/Phrase-Query-Problem-tp14373945p14404143.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 20:38:16 2007
Return-Path: <java-user-return-31554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28675 invoked from network); 18 Dec 2007 20:38:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 20:38:16 -0000
Received: (qmail 37490 invoked by uid 500); 18 Dec 2007 20:37:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37459 invoked by uid 500); 18 Dec 2007 20:37:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37448 invoked by uid 99); 18 Dec 2007 20:37:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 12:37:59 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.29.8 as permitted sender)
Received: from [80.67.29.8] (HELO smtprelay08.ispgateway.de) (80.67.29.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 20:37:47 +0000
Received: (qmail 11456 invoked from network); 18 Dec 2007 20:37:38 -0000
Received: from unknown (HELO p54bfcfd1.dip.t-dialin.net) (695637@[84.191.207.209])
          (envelope-sender <lucenelist2007@danielnaber.de>)
          by smtprelay08.ispgateway.de (qmail-ldap-1.03) with AES256-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 18 Dec 2007 20:37:38 -0000
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Analyzer to use with MultiSearcher using various indexes for multiple languages
Date: Tue, 18 Dec 2007 21:39:02 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <d0e6561a0712171514x600fe618ka539f02c3de9ecb4@mail.gmail.com>
In-Reply-To: <d0e6561a0712171514x600fe618ka539f02c3de9ecb4@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200712182139.02357@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Dienstag, 18. Dezember 2007, Jay Hill wrote:

> We
> have a requirement to search across multiple languages, so I'm planning
> to use MultiSearcher, passing an array of all IndexSearchers for each
> language.

You will need to analyze the query once per language and then build a new 
BooleanQuery from those, e.g. analysis1 OR analyis2 OR analyis3.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 21:07:31 2007
Return-Path: <java-user-return-31555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42021 invoked from network); 18 Dec 2007 21:07:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 21:07:30 -0000
Received: (qmail 66089 invoked by uid 500); 18 Dec 2007 21:07:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66052 invoked by uid 500); 18 Dec 2007 21:07:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66039 invoked by uid 99); 18 Dec 2007 21:07:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 13:07:13 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.185 as permitted sender)
Received: from [209.85.128.185] (HELO fk-out-0910.google.com) (209.85.128.185)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 21:06:50 +0000
Received: by fk-out-0910.google.com with SMTP id z23so2241760fkz.5
        for <java-user@lucene.apache.org>; Tue, 18 Dec 2007 13:06:52 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=9BB1sjqTxRKbJdmxAoz3c41rMrOTAKCjGqLNg8IFsVU=;
        b=CyeQT+CKcnMPSVFaJnG+WoGVwxWNhKcOBVnEFzis91vmGowKawvxjs1TSVoFHQUoJqZD2bkyVqjbEqLlutI9q2l52EWkvQK7HN/Od1qTNuMR6oRz2KJyyTxgRcjIiHd2khFAVTwuHRNqEO5khzRo6eHB9wPnVQxvlB+Vw2Acwy4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=YDzYv6ff3gaQu3j8FlfR2416jNMSHdeaLKCPiSWu6fxX96smf/xhY4BEE9hzlUHLu+RSRyLuKD7iVjvHwKruL9TuCtvqjI3I9P3+rsiqF6hjWni8y/2KRZNEDU9uDuD4dvEC2+z9lvS7CBkMGR1R2lXCuxcmvW+AlaIazLac5AU=
Received: by 10.82.145.7 with SMTP id s7mr130452bud.6.1198012012500;
        Tue, 18 Dec 2007 13:06:52 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Tue, 18 Dec 2007 13:06:52 -0800 (PST)
Message-ID: <359a92830712181306nd1724a5ta7f02534cf729b90@mail.gmail.com>
Date: Tue, 18 Dec 2007 16:06:52 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Phrase Query Problem
In-Reply-To: <14404143.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14980_20042347.1198012012496"
References: <14373945.post@talk.nabble.com>
	 <F1C79CDF8799D944A3156C40351731741809EE@rw-msg-02.broadvision.com>
	 <14404143.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14980_20042347.1198012012496
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This will, indeed, NOT remove stop words. If that is all you need, you're
done.

But you will now have useless words in your index like the, is, etc. Making
your own analyzer by subclassing a suitable existing analyzer, or composing
one
will fix you right up if having the extra words in your index turns out not
to
be OK.

And it shouldn't change your indexing speed noticeably.

Best
Erick

On Dec 18, 2007 2:44 PM, Sirish Vadala <vsirishreddy@yahoo.co.in> wrote:

>
> Hmmm... I had come up with a temporary solution for the time being. This
> is
> how I am initializing the StandardAnalyzer to fix my problem.
>
> String[] STOP_WORDS = {};
> this.analyzer = new StandardAnalyzer(STOP_WORDS);
>
> This now indexes all my stop words, and gladly it didn't increase my
> indexing time remarkably, but only a small difference. Not sure if this is
> the right solution. Will also do some research on custom analyzers.
>
>
> Hi,
>
> 1) Whenever we change to a different analyzer, we need to reindex
>   whole dataset, whether or not using WhiteSpaceAnalyzer.
> 2) Using WhiteSpaceAnalyzer may increase disk space and slow-down
>   indexing because more tokens are indexed, how much can be slowed
>   I donot know.
> 3) WhiteSpaceAnalyzer also keeps case, for example, if input text
>   has "Health", query "health" may not return the doc, make sure
>   if this is you need, also this analyzer will keep all symbols,
>   like coma, period .... For example, if text has "Number ONE issue
>   is health safety!", query "health safety" will not return the doc,
>   because "safety!" is indexed as a token, not "safety".
>
> I felt most important thing is to make sure the exact query requirement,
> then picking up analyzer.
>
> Best regards, Lisheng
>
> --
> View this message in context:
> http://www.nabble.com/Phrase-Query-Problem-tp14373945p14404143.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14980_20042347.1198012012496--

From java-user-return-31556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 18 21:09:48 2007
Return-Path: <java-user-return-31556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42494 invoked from network); 18 Dec 2007 21:09:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 18 Dec 2007 21:09:48 -0000
Received: (qmail 69213 invoked by uid 500); 18 Dec 2007 21:09:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69181 invoked by uid 500); 18 Dec 2007 21:09:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69170 invoked by uid 99); 18 Dec 2007 21:09:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 13:09:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 21:09:07 +0000
Received: by fg-out-1718.google.com with SMTP id d23so460139fga.27
        for <java-user@lucene.apache.org>; Tue, 18 Dec 2007 13:09:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=jakkH59pGnwwJeloQ0cYiWjt/D0JMaqrrdYoQ4SvyDs=;
        b=Is5NIZphyhSdcnkcD5KvyRiHVWkDiDYMu+aN1yWOa+IeSfEx2g4b/AIK1oTOvYiBMDNBu8ZtmQizCKitFBpccaBuvjMNeq6V3YH0JqCo/yUJJt73ZZ/luaK7taXFVs+IEZWTr5j7ezN0N7N/Q0bKvP48OBoNbNFUzBMBgRpnpGw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=OFhQEmiNFLHqMknEvo7MB8wYa0eiHm62eeoVljq/nid4rD8rrF7LprM2j81PLvMHGjns3JzLPqJmxsAn76JNep/B6TsnBmPXF0oVW/9cDiQnG3ULfrRxd6ctnJcvFLC84Iok+tzsDTql9Tz85lVt98g6Z9l2nIjXr2EUeGQA6D8=
Received: by 10.86.26.11 with SMTP id 11mr8117682fgz.37.1198012149565;
        Tue, 18 Dec 2007 13:09:09 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Tue, 18 Dec 2007 13:09:09 -0800 (PST)
Message-ID: <e05f0fd10712181309u16c0c6d5gfc1fe9e2be15d9f5@mail.gmail.com>
Date: Tue, 18 Dec 2007 23:09:09 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene multifield query problem
In-Reply-To: <9294E20AED46934EA459020706463F94664304@SUEXCL-02.ad.syr.edu>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_743_25531143.1198012149555"
References: <BAY112-W38A467EC53ACDC15E9CDBBF9630@phx.gbl>
	 <9294E20AED46934EA459020706463F94664304@SUEXCL-02.ad.syr.edu>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_743_25531143.1198012149555
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Rakesh,

Perhaps the confusion comes from the asymmetry
between +X and -X.   I.e., for the query:
      A B -C +D
one might think that, similar to how -C only disqualifies docs
containing C (but not qualifying docs not containing C), also
+D only disqualifies docs not containing D. But this is
inaccurate, because +D, in addition to disqualifying
docs not containing D, also qualifies docs containing D.

The modified query that Steven suggested:
      +(A B) -C +D
removes this asymmetry, because specifying +(A B)  means
that D is not anymore sufficient to qualify a doc.

Hope this helps (otherwise let this reply be forever disqualified : - ) )
Doron

On Dec 18, 2007 9:28 PM, Steven A Rowe <sarowe@syr.edu> wrote:

> Hi Rakesh,
>
> This doesn't look like a user-generated query.  Have you considered
> building the Query via the API instead of using QueryParser?
>
> With QueryParser, you should get the results you want with syntax like:
>
> +(i_title:indoor* OR i_description:indoor*) -i_published:false
> +i_topicsClasses.id:1_1_*_*
>
> Have you tried this yet?
>
> Steve
>
> On 12/18/2007 at 1:58 PM, Rakesh Shete wrote:
> >
> > Thanks for the suggestion Steve. My problem is with getting
> > the correct results. Let me put in words the query :
> >
> > Fetch all documents such that the search string "indoor*" is
> > either part of the 'i_title' field or 'i_description' field,
> > eliminate if not published (-i_published:false) but should
> > have topic id of the form "1_1_*_*" (i_topicsClasses.id:1_1_*_*)
> >
> > i_title:indoor* i_description:indoor* -i_published:false
> > +i_topicsClasses.id:1_1_*_* returns me extra results which
> > should not be fetched.
> >
> > -- Regards,
> > Rakesh Shete
> >
> > > Subject: RE: Lucene multifield query problem
> > > Date: Tue, 18 Dec 2007 13:26:24 -0500
> > > From: sarowe@syr.edu
> > > To: java-user@lucene.apache.org
> > >
> > > Hi Rakesh,
> > >
> > > Set the default QueryParser operator to AND (default default operator
> > > :) is OR):
> > >
> > >
> > <http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/que
> > ryParser/QueryParser.html#setDefaultOperator(org.apache.lucene
> > .queryParser.QueryParser.Operator)>
> > >
> > > Steve
> > >
> > > On 12/18/2007 at 1:22 PM, Rakesh Shete wrote:
> > > >
> > > > Hi all,
> > > >
> > > > I am facing problem with the following multifield query:
> > > >
> > > > i_title:indoor* i_description:indoor* -i_published:false
> > > > +i_topicsClasses.id:1_1_*_*
> > > >
> > > > The above query returns me even results which should not be
> > > > there. Ideally I would like the query resullts as:
> > > >
> > > > (i_title:indoor* i_description:indoor* -i_published:false)
> > > > AND (i_topicsClasses.id:1_1_*_*)
> > > >
> > > > i.e. The intersection of the first part and second part.
> > > >
> > > > But what is happening currently is that I get a union of the
> > > > first part and second part, i.e., whatever results are
> > > > returned by "i_title:indoor* i_description:indoor*
> > > > -i_published:false" are combined (union) with results
> > > > returned by "+i_topicsClasses.id:1_1_*_*".
> > > >
> > > > How do I write a query that returns me results which are an
> > > > intersection of the above 2 parts?
> > > >
> > > > --Regards,
> > > > Rakesh S
> > > >
> > > >
> > > > _________________________________________________________________
> Post
> > > > ads for free - to sell, rent or even buy.www.yello.in
> > > > http://ss1.richmedia.in/recurl.asp?pid=186
> > > >
> > >
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> > > additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> >
> > _________________________________________________________________ Post
> > ads for free - to sell, rent or even buy.www.yello.in
> > http://ss1.richmedia.in/recurl.asp?pid=186
> >
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_743_25531143.1198012149555--

From java-user-return-31557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 04:44:22 2007
Return-Path: <java-user-return-31557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1670 invoked from network); 19 Dec 2007 04:44:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 04:44:22 -0000
Received: (qmail 62928 invoked by uid 500); 19 Dec 2007 04:44:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62897 invoked by uid 500); 19 Dec 2007 04:44:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62886 invoked by uid 99); 19 Dec 2007 04:44:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 20:44:04 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rakesh_shete@hotmail.com designates 65.54.246.228 as permitted sender)
Received: from [65.54.246.228] (HELO bay0-omc3-s28.bay0.hotmail.com) (65.54.246.228)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 04:43:48 +0000
Received: from BAY112-W25 ([64.4.26.125]) by bay0-omc3-s28.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Tue, 18 Dec 2007 20:43:40 -0800
Message-ID: <BAY112-W251C5B761737914AE3F1B3F95C0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_e12db2bd-e096-4839-8d88-a2c057aff0a1_"
X-Originating-IP: [220.225.70.2]
From: Rakesh Shete <rakesh_shete@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene multifield query problem
Date: Wed, 19 Dec 2007 10:13:40 +0530
Importance: Normal
In-Reply-To: <e05f0fd10712181309u16c0c6d5gfc1fe9e2be15d9f5@mail.gmail.com>
References: <BAY112-W38A467EC53ACDC15E9CDBBF9630@phx.gbl>
	 <9294E20AED46934EA459020706463F94664304@SUEXCL-02.ad.syr.edu> 
 <e05f0fd10712181309u16c0c6d5gfc1fe9e2be15d9f5@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 19 Dec 2007 04:43:40.0250 (UTC) FILETIME=[B9F40BA0:01C841F9]
X-Virus-Checked: Checked by ClamAV on apache.org

--_e12db2bd-e096-4839-8d88-a2c057aff0a1_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi Doren, Steve. Your suggestions make sense but dont give me the desired r=
esults. Here is the code how I generate the query:

String searchCriteria =3D "Indoor*";QueryParser queryparser =3D new QueryPa=
rser("i_title",                    new StandardAnalyzer());Query q1 =3D que=
ryparser.parse(searchCriteria);queryparser =3D new QueryParser("i_descripti=
on",                    new StandardAnalyzer());Query q2 =3D queryparser.pa=
rse(searchCriteria);queryparser =3D new QueryParser("i_published", new Stan=
dardAnalyzer());Query q3 =3D queryparser.parse("false");queryparser =3D new=
 QueryParser("i_topicsClasses.id",                    new StandardAnalyzer(=
));Query topicQuery =3D queryparser.parse("1_1_*_*");BooleanQuery booleanQu=
ery =3D new BooleanQuery();booleanQuery.add(q1, BooleanClause.Occur.SHOULD)=
;booleanQuery.add(q2, BooleanClause.Occur.SHOULD);booleanQuery.add(q3, Bool=
eanClause.Occur.MUST_NOT);booleanQuery.add(topicQuery, BooleanClause.Occur.=
MUST);


This produces the following query: i_title:indoor* i_description:indoor* -i=
_published:false +i_topicsClasses.id:1_1_*_*
This gives me extra unwanted results from "+i_topicsClasses.id:1_1_*_*".

I modified the above code in the foll. manner:

Term t =3D new Term("i_title", searchCriteria);TermQuery termQuery =3D new =
TermQuery(t);Term t1 =3D new Term("i_description", searchCriteria);TermQuer=
y termQuery1 =3D new TermQuery(t1);BooleanQuery booleanQuery1 =3D new Boole=
anQuery();booleanQuery1.add(termQuery, BooleanClause.Occur.SHOULD);booleanQ=
uery1.add(termQuery1, BooleanClause.Occur.SHOULD);BooleanQuery booleanQuery=
 =3D new BooleanQuery();booleanQuery.add(booleanQuery1, BooleanClause.Occur=
.MUST);booleanQuery.add(q3, BooleanClause.Occur.MUST_NOT);booleanQuery.add(=
topicQuery, BooleanClause.Occur.MUST);

This produces the following query:=20
+(i_title:Indoor* i_description:Indoor*) -i_published:false +i_topicsClasse=
s.id:1_1_*_*
But no results are fetched :(

Any hints if am I doing anything wrong?

--Regards,
Rakesh S



> Date: Tue, 18 Dec 2007 23:09:09 +0200
> From: cdoronc@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: Lucene multifield query problem
>=20
> Hi Rakesh,
>=20
> Perhaps the confusion comes from the asymmetry
> between +X and -X.   I.e., for the query:
>       A B -C +D
> one might think that, similar to how -C only disqualifies docs
> containing C (but not qualifying docs not containing C), also
> +D only disqualifies docs not containing D. But this is
> inaccurate, because +D, in addition to disqualifying
> docs not containing D, also qualifies docs containing D.
>=20
> The modified query that Steven suggested:
>       +(A B) -C +D
> removes this asymmetry, because specifying +(A B)  means
> that D is not anymore sufficient to qualify a doc.
>=20
> Hope this helps (otherwise let this reply be forever disqualified : - ) )
> Doron
>=20
> On Dec 18, 2007 9:28 PM, Steven A Rowe <sarowe@syr.edu> wrote:
>=20
> > Hi Rakesh,
> >
> > This doesn't look like a user-generated query.  Have you considered
> > building the Query via the API instead of using QueryParser?
> >
> > With QueryParser, you should get the results you want with syntax like:
> >
> > +(i_title:indoor* OR i_description:indoor*) -i_published:false
> > +i_topicsClasses.id:1_1_*_*
> >
> > Have you tried this yet?
> >
> > Steve
> >
> > On 12/18/2007 at 1:58 PM, Rakesh Shete wrote:
> > >
> > > Thanks for the suggestion Steve. My problem is with getting
> > > the correct results. Let me put in words the query :
> > >
> > > Fetch all documents such that the search string "indoor*" is
> > > either part of the 'i_title' field or 'i_description' field,
> > > eliminate if not published (-i_published:false) but should
> > > have topic id of the form "1_1_*_*" (i_topicsClasses.id:1_1_*_*)
> > >
> > > i_title:indoor* i_description:indoor* -i_published:false
> > > +i_topicsClasses.id:1_1_*_* returns me extra results which
> > > should not be fetched.
> > >
> > > -- Regards,
> > > Rakesh Shete
> > >
> > > > Subject: RE: Lucene multifield query problem
> > > > Date: Tue, 18 Dec 2007 13:26:24 -0500
> > > > From: sarowe@syr.edu
> > > > To: java-user@lucene.apache.org
> > > >
> > > > Hi Rakesh,
> > > >
> > > > Set the default QueryParser operator to AND (default default operat=
or
> > > > :) is OR):
> > > >
> > > >
> > > <http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/que
> > > ryParser/QueryParser.html#setDefaultOperator(org.apache.lucene
> > > .queryParser.QueryParser.Operator)>
> > > >
> > > > Steve
> > > >
> > > > On 12/18/2007 at 1:22 PM, Rakesh Shete wrote:
> > > > >
> > > > > Hi all,
> > > > >
> > > > > I am facing problem with the following multifield query:
> > > > >
> > > > > i_title:indoor* i_description:indoor* -i_published:false
> > > > > +i_topicsClasses.id:1_1_*_*
> > > > >
> > > > > The above query returns me even results which should not be
> > > > > there. Ideally I would like the query resullts as:
> > > > >
> > > > > (i_title:indoor* i_description:indoor* -i_published:false)
> > > > > AND (i_topicsClasses.id:1_1_*_*)
> > > > >
> > > > > i.e. The intersection of the first part and second part.
> > > > >
> > > > > But what is happening currently is that I get a union of the
> > > > > first part and second part, i.e., whatever results are
> > > > > returned by "i_title:indoor* i_description:indoor*
> > > > > -i_published:false" are combined (union) with results
> > > > > returned by "+i_topicsClasses.id:1_1_*_*".
> > > > >
> > > > > How do I write a query that returns me results which are an
> > > > > intersection of the above 2 parts?
> > > > >
> > > > > --Regards,
> > > > > Rakesh S
> > > > >
> > > > >
> > > > > _________________________________________________________________
> > Post
> > > > > ads for free - to sell, rent or even buy.www.yello.in
> > > > > http://ss1.richmedia.in/recurl.asp?pid=3D186
> > > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > -------------------------------------------------------------------=
--
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> > > > additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > >
> > > _________________________________________________________________ Pos=
t
> > > ads for free - to sell, rent or even buy.www.yello.in
> > > http://ss1.richmedia.in/recurl.asp?pid=3D186
> > >
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >

_________________________________________________________________
Post free property ads on Yello Classifieds now! www.yello.in
http://ss1.richmedia.in/recurl.asp?pid=3D220=

--_e12db2bd-e096-4839-8d88-a2c057aff0a1_--

From java-user-return-31558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 06:20:33 2007
Return-Path: <java-user-return-31558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16909 invoked from network); 19 Dec 2007 06:20:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 06:20:33 -0000
Received: (qmail 19421 invoked by uid 500); 19 Dec 2007 06:20:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19387 invoked by uid 500); 19 Dec 2007 06:20:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19376 invoked by uid 99); 19 Dec 2007 06:20:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 22:20:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 06:19:51 +0000
Received: by fg-out-1718.google.com with SMTP id d23so506480fga.27
        for <java-user@lucene.apache.org>; Tue, 18 Dec 2007 22:19:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=6FfeO4dki3asgAsCswerOGCYehDAF+m9+ynqm9I4IdY=;
        b=AmTkD0KJGxpB0sBQc1vuX91Lddl3ZcVcuSmg8yjqmbLNi6G8vM4EiS0cph+a/Qc7rwR1HZ8LGMoMWkt3W5D0eh24sBiBXMlLNDC6etGrInoqXdKFUMJiBfW+sl8xSdDEuQkPzoIVVXJc7HVHgQvnTF/LRfO58P3jJPa3WYHEhtw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZS6811AkThuvd0qzNuHXuJwTqwMFvbPm+ExuaHbQAtC5lgti3kZOkGCxwOmps627Sf/8AglABLTreY3D2HfjrXbrrrxbYM8/0bN1+rrZrymCCyZihZYcGHLL2AEtv3sl3G9F7OZmSkamMuEDDfLZ19oC3PAJAQq0WoyYquuqQTs=
Received: by 10.86.95.20 with SMTP id s20mr8536344fgb.46.1198045193719;
        Tue, 18 Dec 2007 22:19:53 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Tue, 18 Dec 2007 22:19:53 -0800 (PST)
Message-ID: <e05f0fd10712182219p62384fdejc74f3d4da1703e49@mail.gmail.com>
Date: Wed, 19 Dec 2007 08:19:53 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene multifield query problem
In-Reply-To: <BAY112-W251C5B761737914AE3F1B3F95C0@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1732_28213112.1198045193715"
References: <BAY112-W38A467EC53ACDC15E9CDBBF9630@phx.gbl>
	 <9294E20AED46934EA459020706463F94664304@SUEXCL-02.ad.syr.edu>
	 <e05f0fd10712181309u16c0c6d5gfc1fe9e2be15d9f5@mail.gmail.com>
	 <BAY112-W251C5B761737914AE3F1B3F95C0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_1732_28213112.1198045193715
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Rakseh,

It just occurred to me that your code has
     String searchCriteria = "Indoor*";

Assuming StandardAnalyzer used at indexing time, all text words were
lowercased. Now, QueryParser by default does not lowercase wildcard
queries. You can however instruct it to do so by calling:
     myQueryParser.setLowercaseExpandedTerms(true)

(The only reason the first query returned anything was that MUST part,
which, as already discussed, was also sufficient for qualifying a doc.)

So, you should be able to get the "correct" results with something like
this:
     QueryParser qp = new QueryParser("i_title", new StandardAnalyzer());
     qp.setLowercaseExpandedTerms(true);
     Query q = qp.parse("+(i_title:Indoor* i_description:Indoor*)
-i_published:false +i_topicsClasses.id:1_1_*_*");

Also, note that the printed query for the 2nd attempt, where you used
TermQueries,
is somewhat misleading. You may read that as if the query parser generated a

wildcard query, but actually it is not a wildcard query, just a termQuery,
expecting
to find this exact token 'i_title:Indoor*' with the asterisk character in
the index.

My additional recommendations to you are (1) also print the rewrite form of
the
query (q.rewrite(is.getIndexReader())) - there, for a wildcard query part,
you will see
how it was expanded with the terms that match the wildcard expression. You
will be able to see the lowercasing issue this way, and (2) If this still
doesn't
work for you, please post here a tiny simple standalone program that creates
an index and searches it and demonstrates the problem.

Regards,
Doron


On Dec 19, 2007 6:43 AM, Rakesh Shete <rakesh_shete@hotmail.com> wrote:

>
> Hi Doren, Steve. Your suggestions make sense but dont give me the desired
> results. Here is the code how I generate the query:
>
> String searchCriteria = "Indoor*";QueryParser queryparser = new
> QueryParser("i_title",                    new StandardAnalyzer());Query q1 =
> queryparser.parse(searchCriteria);queryparser = new
> QueryParser("i_description",                    new
> StandardAnalyzer());Query q2 = queryparser.parse(searchCriteria);queryparser
> = new QueryParser("i_published", new StandardAnalyzer());Query q3 =
> queryparser.parse("false");queryparser = new
> QueryParser("i_topicsClasses.id",                    new
> StandardAnalyzer());Query topicQuery = queryparser.parse("1_1_*_*");BooleanQuery
> booleanQuery = new BooleanQuery();booleanQuery.add(q1,
> BooleanClause.Occur.SHOULD);booleanQuery.add(q2,
> BooleanClause.Occur.SHOULD);booleanQuery.add(q3,
> BooleanClause.Occur.MUST_NOT);booleanQuery.add(topicQuery,
> BooleanClause.Occur.MUST);
>
>
> This produces the following query: i_title:indoor* i_description:indoor*
> -i_published:false +i_topicsClasses.id:1_1_*_*
> This gives me extra unwanted results from "+i_topicsClasses.id:1_1_*_*".
>
> I modified the above code in the foll. manner:
>
> Term t = new Term("i_title", searchCriteria);TermQuery termQuery = new
> TermQuery(t);Term t1 = new Term("i_description", searchCriteria);TermQuery
> termQuery1 = new TermQuery(t1);BooleanQuery booleanQuery1 = new
> BooleanQuery();booleanQuery1.add(termQuery, BooleanClause.Occur.SHOULD);booleanQuery1.add(termQuery1,
> BooleanClause.Occur.SHOULD);BooleanQuery booleanQuery = new
> BooleanQuery();booleanQuery.add(booleanQuery1, BooleanClause.Occur.MUST);booleanQuery.add(q3,
> BooleanClause.Occur.MUST_NOT);booleanQuery.add(topicQuery,
> BooleanClause.Occur.MUST);
>
> This produces the following query:
> +(i_title:Indoor* i_description:Indoor*) -i_published:false
> +i_topicsClasses.id:1_1_*_*
> But no results are fetched :(
>
> Any hints if am I doing anything wrong?
>
> --Regards,
> Rakesh S
>
>
>
> > Date: Tue, 18 Dec 2007 23:09:09 +0200
> > From: cdoronc@gmail.com
> > To: java-user@lucene.apache.org
> > Subject: Re: Lucene multifield query problem
> >
> > Hi Rakesh,
> >
> > Perhaps the confusion comes from the asymmetry
> > between +X and -X.   I.e., for the query:
> >       A B -C +D
> > one might think that, similar to how -C only disqualifies docs
> > containing C (but not qualifying docs not containing C), also
> > +D only disqualifies docs not containing D. But this is
> > inaccurate, because +D, in addition to disqualifying
> > docs not containing D, also qualifies docs containing D.
> >
> > The modified query that Steven suggested:
> >       +(A B) -C +D
> > removes this asymmetry, because specifying +(A B)  means
> > that D is not anymore sufficient to qualify a doc.
> >
> > Hope this helps (otherwise let this reply be forever disqualified : - )
> )
> > Doron
> >
> > On Dec 18, 2007 9:28 PM, Steven A Rowe <sarowe@syr.edu> wrote:
> >
> > > Hi Rakesh,
> > >
> > > This doesn't look like a user-generated query.  Have you considered
> > > building the Query via the API instead of using QueryParser?
> > >
> > > With QueryParser, you should get the results you want with syntax
> like:
> > >
> > > +(i_title:indoor* OR i_description:indoor*) -i_published:false
> > > +i_topicsClasses.id:1_1_*_*
> > >
> > > Have you tried this yet?
> > >
> > > Steve
> > >
> > > On 12/18/2007 at 1:58 PM, Rakesh Shete wrote:
> > > >
> > > > Thanks for the suggestion Steve. My problem is with getting
> > > > the correct results. Let me put in words the query :
> > > >
> > > > Fetch all documents such that the search string "indoor*" is
> > > > either part of the 'i_title' field or 'i_description' field,
> > > > eliminate if not published (-i_published:false) but should
> > > > have topic id of the form "1_1_*_*" (i_topicsClasses.id:1_1_*_*)
> > > >
> > > > i_title:indoor* i_description:indoor* -i_published:false
> > > > +i_topicsClasses.id:1_1_*_* returns me extra results which
> > > > should not be fetched.
> > > >
> > > > -- Regards,
> > > > Rakesh Shete
> > > >
> > > > > Subject: RE: Lucene multifield query problem
> > > > > Date: Tue, 18 Dec 2007 13:26:24 -0500
> > > > > From: sarowe@syr.edu
> > > > > To: java-user@lucene.apache.org
> > > > >
> > > > > Hi Rakesh,
> > > > >
> > > > > Set the default QueryParser operator to AND (default default
> operator
> > > > > :) is OR):
> > > > >
> > > > >
> > > > <http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/que
> > > > ryParser/QueryParser.html#setDefaultOperator(org.apache.lucene
> > > > .queryParser.QueryParser.Operator)>
> > > > >
> > > > > Steve
> > > > >
> > > > > On 12/18/2007 at 1:22 PM, Rakesh Shete wrote:
> > > > > >
> > > > > > Hi all,
> > > > > >
> > > > > > I am facing problem with the following multifield query:
> > > > > >
> > > > > > i_title:indoor* i_description:indoor* -i_published:false
> > > > > > +i_topicsClasses.id:1_1_*_*
> > > > > >
> > > > > > The above query returns me even results which should not be
> > > > > > there. Ideally I would like the query resullts as:
> > > > > >
> > > > > > (i_title:indoor* i_description:indoor* -i_published:false)
> > > > > > AND (i_topicsClasses.id:1_1_*_*)
> > > > > >
> > > > > > i.e. The intersection of the first part and second part.
> > > > > >
> > > > > > But what is happening currently is that I get a union of the
> > > > > > first part and second part, i.e., whatever results are
> > > > > > returned by "i_title:indoor* i_description:indoor*
> > > > > > -i_published:false" are combined (union) with results
> > > > > > returned by "+i_topicsClasses.id:1_1_*_*".
> > > > > >
> > > > > > How do I write a query that returns me results which are an
> > > > > > intersection of the above 2 parts?
> > > > > >
> > > > > > --Regards,
> > > > > > Rakesh S
> > > > > >
> > > > > >
> > > > > >
> _________________________________________________________________
> > > Post
> > > > > > ads for free - to sell, rent or even buy.www.yello.in
> > > > > > http://ss1.richmedia.in/recurl.asp?pid=186
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.orgFor
> > > > > additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > >
> > > > _________________________________________________________________
> Post
> > > > ads for free - to sell, rent or even buy.www.yello.in
> > > > http://ss1.richmedia.in/recurl.asp?pid=186
> > > >
> > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>
> _________________________________________________________________
> Post free property ads on Yello Classifieds now! www.yello.in
> http://ss1.richmedia.in/recurl.asp?pid=220

------=_Part_1732_28213112.1198045193715--

From java-user-return-31559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 06:20:49 2007
Return-Path: <java-user-return-31559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18198 invoked from network); 19 Dec 2007 06:20:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 06:20:48 -0000
Received: (qmail 20943 invoked by uid 500); 19 Dec 2007 06:20:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20919 invoked by uid 500); 19 Dec 2007 06:20:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20908 invoked by uid 99); 19 Dec 2007 06:20:31 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 18 Dec 2007 22:20:31 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 06:20:19 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene multifield query problem
Date: Wed, 19 Dec 2007 01:19:40 -0500
Message-ID: <9294E20AED46934EA459020706463F9466431C@SUEXCL-02.ad.syr.edu>
In-Reply-To: <BAY112-W251C5B761737914AE3F1B3F95C0@phx.gbl>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene multifield query problem
Thread-Index: AchB+dPtJwDvQ9R2SbSwK/R35mtM1QACjx7g
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Rakesh,

Here's a version that should work (warning: untested):


TermQuery notPublishedQuery
  =3D new TermQuery(new Term("i_published", "false"));
PrefixQuery topicQuery =3D new PrefixQuery
  (new Term("i_topicsClasses.id", "1_1_*_*"));

String searchCriteria =3D "Indoor*";
Term titleTerm =3D new Term
  ("i_title", searchCriteria.toLowerCase());
TermQuery titleQuery =3D new TermQuery(titleTerm);
Term descTerm =3D new Term
  ("i_description", searchCriteria.toLowerCase());
TermQuery descQuery =3D new TermQuery(descTerm);
BooleanQuery titleOrDescQuery =3D new BooleanQuery();
titleOrDescQuery.add
  (titleQuery, BooleanClause.Occur.SHOULD);
titleOrDescQuery.add
  (descQuery, BooleanClause.Occur.SHOULD);

BooleanQuery topLevelQuery =3D new BooleanQuery();
topLevelQuery.add
  (titleOrDescQuery, BooleanClause.Occur.MUST);
topLevelQuery.add
  (notPublishedQuery, BooleanClause.Occur.MUST_NOT);
topLevelQuery.add
  (topicQuery, BooleanClause.Occur.MUST);


Three points worthy of note concerning the above code:

1. In the second version of your code, TermQuery's for "Indoor*" were =
attempting to match the literal string "Indoor*", and never expanding =
the query to search for all index terms that begin with "Indoor".  I =
have substituted PrefixQuery's.

2. PrefixQuery's do NOT analyze their arguments, so the =
initial-uppercase "Indoor*" will expand to nothing in the index, because =
(I assume) the index was constructed with the StandardAnalyzer, which =
invokes a LowercaseFilter.  Hence: searchCriteria.toLowerCase().

3. Mixing QueryParser calls with manual Query construction is hard to =
follow - in the above code I do away with calls to QueryParser, instead =
manually calling constructors for the appropriate query types.

Hope it helps,
Steve

On 12/18/2007 at 11:44 PM, Rakesh Shete wrote:
> Hi Doren, Steve. Your suggestions make sense but dont give me=20
> the desired results. Here is the code how I generate the query:
>=20
> String searchCriteria =3D "Indoor*";QueryParser queryparser =3D=20
> new QueryParser("i_title",                    new=20
> StandardAnalyzer());Query q1 =3D=20
> queryparser.parse(searchCriteria);queryparser =3D new=20
> QueryParser("i_description",                    new=20
> StandardAnalyzer());Query q2 =3D=20
> queryparser.parse(searchCriteria);queryparser =3D new=20
> QueryParser("i_published", new StandardAnalyzer());Query q3 =3D=20
> queryparser.parse("false");queryparser =3D new=20
> QueryParser("i_topicsClasses.id",                    new=20
> StandardAnalyzer());Query topicQuery =3D=20
> queryparser.parse("1_1_*_*");BooleanQuery booleanQuery =3D new=20
> BooleanQuery();booleanQuery.add(q1,=20
> BooleanClause.Occur.SHOULD);booleanQuery.add(q2,=20
> BooleanClause.Occur.SHOULD);booleanQuery.add(q3,=20
> BooleanClause.Occur.MUST_NOT);booleanQuery.add(topicQuery,=20
> BooleanClause.Occur.MUST);
>=20
>=20
> This produces the following query: i_title:indoor*=20
> i_description:indoor* -i_published:false +i_topicsClasses.id:1_1_*_*
> This gives me extra unwanted results from=20
> "+i_topicsClasses.id:1_1_*_*".
>=20
> I modified the above code in the foll. manner:
>=20
> Term t =3D new Term("i_title", searchCriteria);TermQuery=20
> termQuery =3D new TermQuery(t);Term t1 =3D new=20
> Term("i_description", searchCriteria);TermQuery termQuery1 =3D=20
> new TermQuery(t1);BooleanQuery booleanQuery1 =3D new=20
> BooleanQuery();booleanQuery1.add(termQuery,=20
> BooleanClause.Occur.SHOULD);booleanQuery1.add(termQuery1,=20
> BooleanClause.Occur.SHOULD);BooleanQuery booleanQuery =3D new=20
> BooleanQuery();booleanQuery.add(booleanQuery1,=20
> BooleanClause.Occur.MUST);booleanQuery.add(q3,=20
> BooleanClause.Occur.MUST_NOT);booleanQuery.add(topicQuery,=20
> BooleanClause.Occur.MUST);
>=20
> This produces the following query:=20
> +(i_title:Indoor* i_description:Indoor*) -i_published:false=20
> +i_topicsClasses.id:1_1_*_*
> But no results are fetched :(
>=20
> Any hints if am I doing anything wrong?
>=20
> --Regards,
> Rakesh S
>=20
>=20
>=20
> > Date: Tue, 18 Dec 2007 23:09:09 +0200
> > From: cdoronc@gmail.com
> > To: java-user@lucene.apache.org
> > Subject: Re: Lucene multifield query problem
> >=20
> > Hi Rakesh,
> >=20
> > Perhaps the confusion comes from the asymmetry
> > between +X and -X.   I.e., for the query:
> >       A B -C +D
> > one might think that, similar to how -C only disqualifies docs
> > containing C (but not qualifying docs not containing C), also
> > +D only disqualifies docs not containing D. But this is
> > inaccurate, because +D, in addition to disqualifying
> > docs not containing D, also qualifies docs containing D.
> >=20
> > The modified query that Steven suggested:
> >       +(A B) -C +D
> > removes this asymmetry, because specifying +(A B)  means
> > that D is not anymore sufficient to qualify a doc.
> >=20
> > Hope this helps (otherwise let this reply be forever=20
> disqualified : - ) )
> > Doron
> >=20
> > On Dec 18, 2007 9:28 PM, Steven A Rowe <sarowe@syr.edu> wrote:
> >=20
> > > Hi Rakesh,
> > >
> > > This doesn't look like a user-generated query.  Have you=20
> considered
> > > building the Query via the API instead of using QueryParser?
> > >
> > > With QueryParser, you should get the results you want=20
> with syntax like:
> > >
> > > +(i_title:indoor* OR i_description:indoor*) -i_published:false
> > > +i_topicsClasses.id:1_1_*_*
> > >
> > > Have you tried this yet?
> > >
> > > Steve
> > >
> > > On 12/18/2007 at 1:58 PM, Rakesh Shete wrote:
> > > >
> > > > Thanks for the suggestion Steve. My problem is with getting
> > > > the correct results. Let me put in words the query :
> > > >
> > > > Fetch all documents such that the search string "indoor*" is
> > > > either part of the 'i_title' field or 'i_description' field,
> > > > eliminate if not published (-i_published:false) but should
> > > > have topic id of the form "1_1_*_*" (i_topicsClasses.id:1_1_*_*)
> > > >
> > > > i_title:indoor* i_description:indoor* -i_published:false
> > > > +i_topicsClasses.id:1_1_*_* returns me extra results which
> > > > should not be fetched.
> > > >
> > > > -- Regards,
> > > > Rakesh Shete
> > > >
> > > > > Subject: RE: Lucene multifield query problem
> > > > > Date: Tue, 18 Dec 2007 13:26:24 -0500
> > > > > From: sarowe@syr.edu
> > > > > To: java-user@lucene.apache.org
> > > > >
> > > > > Hi Rakesh,
> > > > >
> > > > > Set the default QueryParser operator to AND (default=20
> default operator
> > > > > :) is OR):
> > > > >
> > > > >
> > > > <http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/que
> > > > ryParser/QueryParser.html#setDefaultOperator(org.apache.lucene
> > > > .queryParser.QueryParser.Operator)>
> > > > >
> > > > > Steve
> > > > >
> > > > > On 12/18/2007 at 1:22 PM, Rakesh Shete wrote:
> > > > > >
> > > > > > Hi all,
> > > > > >
> > > > > > I am facing problem with the following multifield query:
> > > > > >
> > > > > > i_title:indoor* i_description:indoor* -i_published:false
> > > > > > +i_topicsClasses.id:1_1_*_*
> > > > > >
> > > > > > The above query returns me even results which should not be
> > > > > > there. Ideally I would like the query resullts as:
> > > > > >
> > > > > > (i_title:indoor* i_description:indoor* -i_published:false)
> > > > > > AND (i_topicsClasses.id:1_1_*_*)
> > > > > >
> > > > > > i.e. The intersection of the first part and second part.
> > > > > >
> > > > > > But what is happening currently is that I get a union of the
> > > > > > first part and second part, i.e., whatever results are
> > > > > > returned by "i_title:indoor* i_description:indoor*
> > > > > > -i_published:false" are combined (union) with results
> > > > > > returned by "+i_topicsClasses.id:1_1_*_*".
> > > > > >
> > > > > > How do I write a query that returns me results which are an
> > > > > > intersection of the above 2 parts?
> > > > > >
> > > > > > --Regards,
> > > > > > Rakesh S
> > > > > >
> > > > > >
> > > > > >=20
> _________________________________________________________________
> > > Post
> > > > > > ads for free - to sell, rent or even buy.www.yello.in
> > > > > > http://ss1.richmedia.in/recurl.asp?pid=3D186
> > > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >=20
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail:=20
> java-user-unsubscribe@lucene.apache.org For
> > > > > additional commands, e-mail: java-user-help@lucene.apache.org
> > > > >
> > > >
> > > >=20
> _________________________________________________________________ Post
> > > > ads for free - to sell, rent or even buy.www.yello.in
> > > > http://ss1.richmedia.in/recurl.asp?pid=3D186
> > > >
> > >
> > >
> > >
> > >
> > >=20
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
>=20
> _________________________________________________________________
> Post free property ads on Yello Classifieds now! www.yello.in
> http://ss1.richmedia.in/recurl.asp?pid=3D220
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 09:51:35 2007
Return-Path: <java-user-return-31560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91781 invoked from network); 19 Dec 2007 09:51:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 09:51:34 -0000
Received: (qmail 94587 invoked by uid 500); 19 Dec 2007 09:51:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94557 invoked by uid 500); 19 Dec 2007 09:51:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94546 invoked by uid 99); 19 Dec 2007 09:51:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 01:51:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 64.233.182.188 as permitted sender)
Received: from [64.233.182.188] (HELO nf-out-0910.google.com) (64.233.182.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 09:50:53 +0000
Received: by nf-out-0910.google.com with SMTP id d3so1602215nfc.15
        for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 01:50:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:cc:mime-version:content-type;
        bh=1+1TgpwFVYVqSfZne6Oi2ZoAWA9RrPnqV4egdcvd5sU=;
        b=F26pdj38bNkLD/teS22/TQ9vyUydYGnDRbKPWiEjE4mXly6lcSVvJhZoXTVGT5AKf8acGKoGpj0rxPeTcD42dqebX1e60yB3l6epHRYaIXxXMutslJRSmqhQzNKOFmYjyiT1rZ7bpM/RmLCYkN5vr6DAMQ1CPnN8hH3qCRrokMc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:mime-version:content-type;
        b=YuanJPEIc602Wo0DB4/l9BanuVTa/Yfs+/vJAum1Oul3gURh/RTAEDBLda5iAhK/lJGL7ooLi6HiOsEhoLwdGPQ2xfkkpJAxebhgA5aNCMZp3FOxw4cTL6eUc/kft8UmXDpXEGqSRwzFvk2YlilljE3Y2eTzKyTh14e5tqaBwF4=
Received: by 10.78.138.14 with SMTP id l14mr6632788hud.57.1198057855774;
        Wed, 19 Dec 2007 01:50:55 -0800 (PST)
Received: by 10.78.172.17 with HTTP; Wed, 19 Dec 2007 01:50:55 -0800 (PST)
Message-ID: <295da8fe0712190150j4e7b8532k426319d94eb315f3@mail.gmail.com>
Date: Wed, 19 Dec 2007 15:20:55 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Giving boost to a more recent item whiule searching
Cc: java-user-info@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10606_11855839.1198057855768"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10606_11855839.1198057855768
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
   I am trying to retreive documents from an index. Each document has a date
field and other fields.
while  making a seach i want to give some extra boost to the more recent
items (as per the date field)
How can I go about it?

Thanks in advance

Prabin

------=_Part_10606_11855839.1198057855768--

From java-user-return-31561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 10:10:58 2007
Return-Path: <java-user-return-31561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1481 invoked from network); 19 Dec 2007 10:10:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 10:10:56 -0000
Received: (qmail 19655 invoked by uid 500); 19 Dec 2007 10:10:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19618 invoked by uid 500); 19 Dec 2007 10:10:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19607 invoked by uid 99); 19 Dec 2007 10:10:39 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 02:10:39 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [69.147.85.111] (HELO web83824.mail.sp1.yahoo.com) (69.147.85.111)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Dec 2007 10:10:27 +0000
Received: (qmail 82470 invoked by uid 60001); 19 Dec 2007 10:10:17 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=sbcglobal.net;
  h=Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=4gi3hzn3/n6x3wdQNCDJp5fbWa1wMxVaWyUZkX6mOtADuJccWcgyCg3PGfktw0WZF7oF2Knfm3fYnGUFaPqtE/1RjSuOrhTtnm3+7L7uUZFzuWaZD2tsl0S5dj8ig6pd2YulZVsYoSGc/Uzw1Pqk1YCr0WTXCZZb5q+zmRP5CnA=;
Received: from [76.254.7.206] by web83824.mail.sp1.yahoo.com via HTTP; Wed, 19 Dec 2007 02:10:17 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Wed, 19 Dec 2007 02:10:17 -0800 (PST)
From: Tushar B <snowhow@sbcglobal.net>
Subject: document deletion problem
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <678762.77854.qm@web83824.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hello All, 

I am seeing this issue and would like to understand if its a bug or I am missing something and doing the wrong way: 

(Note that I am doing all exception handling - but deleted the exception handling code for sake of brevity below) 

Hits h = m_indexSearcher.search(q); // Returns 11475 documents 
for(int i = 0; i < h.length(); i++) 
{ 
int doc = h.id(i); 
m_indexSearcher.getIndexReader().deleteDocument(doc); 
} 

The above hits Vector::ArrayIndexOutOfBoundsException when i = 6400. The problem happens in Hits::getMoreDocs.

By the time 6400 docs are deleted, the majority is gone and  topDocs.totalHits becomes less than 6400 (In this case 5075) and finally causes exception in the last line of Hits::hitDoc.

I just took the example numbers which occured in my case but this happens for any hits > 200 (initial vector size is 100 I guess).

Any insight on the logic here will be very helpful (note: I have a workaround too)

thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 11:10:35 2007
Return-Path: <java-user-return-31562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22498 invoked from network); 19 Dec 2007 11:10:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 11:10:35 -0000
Received: (qmail 68109 invoked by uid 500); 19 Dec 2007 11:10:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68073 invoked by uid 500); 19 Dec 2007 11:10:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68062 invoked by uid 99); 19 Dec 2007 11:10:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 03:10:15 -0800
X-ASF-Spam-Status: No, hits=-1.0 required=10.0
	tests=RCVD_IN_DNSWL_LOW,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [80.67.64.10] (HELO smtp1.akamai.com) (80.67.64.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 11:09:53 +0000
Received: from smtp1.akamai.com (vwall.kendall.corp.akamai.com [172.17.4.35])
	by smtp1.akamai.com (8.13.8/8.12.10) with ESMTP id lBJB7TYx024868
	for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 06:07:29 -0500 (EST)
Received: from USMA1EX-GATE1.kendall.corp.akamai.com (usma1ex-gate1.kendall.corp.akamai.com [172.17.0.215])
	by smtp1.akamai.com (8.13.8/8.12.10) with ESMTP id lBJB7S4E024860
	for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 06:07:28 -0500 (EST)
Received: from MAVS1.kendall.corp.akamai.com ([172.17.33.15]) by USMA1EX-GATE1.kendall.corp.akamai.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 19 Dec 2007 06:09:54 -0500
Received: from INVS1.bangalore.corp.akamai.com ([172.21.20.14]) by MAVS1.kendall.corp.akamai.com with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 19 Dec 2007 06:09:53 -0500
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: document deletion problem
Date: Wed, 19 Dec 2007 16:39:50 +0530
Message-ID: <4FA8C6AEE609B644B38DE471A3657A62029CC16D@INVS1.bangalore.corp.akamai.com>
In-Reply-To: <678762.77854.qm@web83824.mail.sp1.yahoo.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: document deletion problem
Thread-Index: AchCJ5QWfH5vGLoATYyMfkhbK+cq+wAB/jTw
References: <678762.77854.qm@web83824.mail.sp1.yahoo.com>
From: "Chhabra, Kapil" <kchhabra@akamai.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 19 Dec 2007 11:09:53.0236 (UTC) FILETIME=[AE211940:01C8422F]
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Tushar,
If you refer to the Javadocs for IndexReader, you'll come across the
following line:

"For efficiency, in this API documents are often referred to via
document numbers, non-negative integers which each name a unique
document in the index. These document numbers are ephemeral--they may
change as documents are added to and deleted from an index. Clients
should thus not rely on a given document having the same number between
sessions."

If its a single term that you are searching on, then its better to you
IndexReader's deleteDocuments(Term term)

> (initial vector size is 100 I guess).
Yes.

Hope it helps.

Regards.
kapilChhabra


-----Original Message-----
From: Tushar B [mailto:snowhow@sbcglobal.net]=20
Sent: Wednesday, December 19, 2007 3:40 PM
To: java-user@lucene.apache.org
Subject: document deletion problem

Hello All,=20

I am seeing this issue and would like to understand if its a bug or I am
missing something and doing the wrong way:=20

(Note that I am doing all exception handling - but deleted the exception
handling code for sake of brevity below)=20

Hits h =3D m_indexSearcher.search(q); // Returns 11475 documents for(int =
i
=3D 0; i < h.length(); i++) { int doc =3D h.id(i);
m_indexSearcher.getIndexReader().deleteDocument(doc);
}=20

The above hits Vector::ArrayIndexOutOfBoundsException when i =3D 6400. =
The
problem happens in Hits::getMoreDocs.

By the time 6400 docs are deleted, the majority is gone and
topDocs.totalHits becomes less than 6400 (In this case 5075) and finally
causes exception in the last line of Hits::hitDoc.

I just took the example numbers which occured in my case but this
happens for any hits > 200 (initial vector size is 100 I guess).

Any insight on the logic here will be very helpful (note: I have a
workaround too)

thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

http://lucene-faq.blogspot.com/=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 11:15:58 2007
Return-Path: <java-user-return-31563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24783 invoked from network); 19 Dec 2007 11:15:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 11:15:58 -0000
Received: (qmail 75695 invoked by uid 500); 19 Dec 2007 11:15:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75659 invoked by uid 500); 19 Dec 2007 11:15:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75643 invoked by uid 99); 19 Dec 2007 11:15:40 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 03:15:40 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of supercooc@gmail.com designates 72.14.252.157 as permitted sender)
Received: from [72.14.252.157] (HELO po-out-1718.google.com) (72.14.252.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 11:15:19 +0000
Received: by po-out-1718.google.com with SMTP id c31so226711poi.0
        for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 03:15:22 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=pAyfA/6Z+rzfoEaV3YF7CIm8LGKbqxF4iwlvvtb8lQk=;
        b=mVnLEEqyy4kHbHn/Ua5V9YM0YHWeLY91y0Fd6Q45GL74KrQNpifjgnjkL3ZU4r7XuzarhlwsbxUe0ze//zvTX88jSE7gUd7LHUpOCp4n62UatkUVFfI2xQgF+QeZUnN4Zc7PUBWhTlUcT+vDy9EdKe8WvNKROdcB+TXAdcLcizQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=DLbsmbUVqaU68bTOB5Sx9ad5hIwlTxlcZqEZRwzd/oOLUUwObvKRuiCIY6HgzoER8gYdMck8PCeA3YEIww43SQSyO70h7zi+yiH5r9X5+KzOAAFS2QB8IsrQ6Ba69P1OmH/qPftHt3nIAc2vUlZaSJf1H+nZyhB8gusRwj6iwBw=
Received: by 10.141.26.18 with SMTP id d18mr5818359rvj.106.1198062922633;
        Wed, 19 Dec 2007 03:15:22 -0800 (PST)
Received: by 10.140.172.16 with HTTP; Wed, 19 Dec 2007 03:15:22 -0800 (PST)
Message-ID: <ee0c896c0712190315r56f99fb2g293c670f29b3c21c@mail.gmail.com>
Date: Wed, 19 Dec 2007 19:15:22 +0800
From: "=?GB2312?B?087TvrPYtcTT4w==?=" <supercooc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: document deletion problem
In-Reply-To: <678762.77854.qm@web83824.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13214_2662066.1198062922636"
References: <678762.77854.qm@web83824.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13214_2662066.1198062922636
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

we can iterator hits.id(i) but can't pass reader.deleteDocument(hits.id(i));
why?


2007/12/19, Tushar B <snowhow@sbcglobal.net>:
>
> Hello All,
>
> I am seeing this issue and would like to understand if its a bug or I am
> missing something and doing the wrong way:
>
> (Note that I am doing all exception handling - but deleted the exception
> handling code for sake of brevity below)
>
> Hits h = m_indexSearcher.search(q); // Returns 11475 documents
> for(int i = 0; i < h.length(); i++)
> {
> int doc = h.id(i);
> m_indexSearcher.getIndexReader().deleteDocument(doc);
> }
>
> The above hits Vector::ArrayIndexOutOfBoundsException when i = 6400. The
> problem happens in Hits::getMoreDocs.
>
> By the time 6400 docs are deleted, the majority is gone and
> topDocs.totalHits becomes less than 6400 (In this case 5075) and finally
> causes exception in the last line of Hits::hitDoc.
>
> I just took the example numbers which occured in my case but this happens
> for any hits > 200 (initial vector size is 100 I guess).
>
> Any insight on the logic here will be very helpful (note: I have a
> workaround too)
>
> thanks
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_13214_2662066.1198062922636--

From java-user-return-31564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 11:41:18 2007
Return-Path: <java-user-return-31564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33595 invoked from network); 19 Dec 2007 11:41:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 11:41:18 -0000
Received: (qmail 98307 invoked by uid 500); 19 Dec 2007 11:41:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98134 invoked by uid 500); 19 Dec 2007 11:41:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98123 invoked by uid 99); 19 Dec 2007 11:41:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 03:41:01 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of supercooc@gmail.com designates 72.14.252.158 as permitted sender)
Received: from [72.14.252.158] (HELO po-out-1718.google.com) (72.14.252.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 11:40:39 +0000
Received: by po-out-1718.google.com with SMTP id c31so239664poi.0
        for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 03:40:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=lQ2F+dxIBmNKMnbGNPzgl5Jgw90HKfGRFqmJLQfEkRE=;
        b=iAkeiBWduOntZq7kYCvyFSOhSfWaeoqQYQxE7ygQ0O0x2AzRN768lsJU/Z50oK2nc8ytGO+JwvAB/xzuoSguGzoeIVyzZKreuT4pefWY+CZk1Cg1HXade+6x6ksR/gAknCsCwOLuDqfq5rF+ZRVRQsEPkHUhdS063n+6mcnJEKQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jZGs4RaEKs7m5mSFzqhoGb9g9RPVgYg61Nxe0nc99ClFP0F0ENAPbHEWC4EC80nE8M7GWlIGcqr/23kRNuVHuH/Cxzeed3tHYjjHQTR6BGAIPIuJ6WralQqOaXIVE2LxLpKldoicYYxKBgCXj0mCAwTxOB3JbKUYeLd3od9nY1o=
Received: by 10.140.177.15 with SMTP id z15mr1723190rve.138.1198064442894;
        Wed, 19 Dec 2007 03:40:42 -0800 (PST)
Received: by 10.140.172.16 with HTTP; Wed, 19 Dec 2007 03:40:42 -0800 (PST)
Message-ID: <ee0c896c0712190340o38aace58g25372a619604955c@mail.gmail.com>
Date: Wed, 19 Dec 2007 19:40:42 +0800
From: "=?GB2312?B?087TvrPYtcTT4w==?=" <supercooc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: document deletion problem
In-Reply-To: <ee0c896c0712190315r56f99fb2g293c670f29b3c21c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13248_13465298.1198064442891"
References: <678762.77854.qm@web83824.mail.sp1.yahoo.com>
	 <ee0c896c0712190315r56f99fb2g293c670f29b3c21c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13248_13465298.1198064442891
Content-Type: text/plain; charset=GB2312
Content-Transfer-Encoding: base64
Content-Disposition: inline

SSB0aGluayBJIGtvd24gd2h5IGx1Y2VuZSBkbyBub3QgaW1wbGVtZW50IEluZGV4UmVhZGVyLmRl
bGV0ZURvY3VtZW50KFF1ZXJ5KQoKCndoZW4gdXNlIEluZGV4UmVhZGVyLmRlbGV0ZURvY3VtZW50
KGRvY0lkKSwgcmVhZGVyIHNldCB0aGlzIGRvY0lkIGluCkluZGV4UmVhZGVyIHdpdGggQml0Vmlj
dG9yLCBub3QgZGVsZXRlIHJlYWwgZG9jdW1lbnQKaW4gaW5kZXguIHNvIGl0IHdpbGwgaW5mbHVl
bmNlIHNlYXJjaCByZXN1bHQgaW4gcmVhbCB0aW1lLiBBbmQgbHVjZW5lCnJldHJpZXZlIDEwMCBI
aXQgaW4gZmlyc3QgdGltZSxpZiB5b3Ugd2FudCByZXRyaWV2ZSBhbm90aGVyIEhpdCwgbHVjZW5l
CndpbGwgIHNlYXJjaCBhZ2FpbiBhbmQgcmV0dXJuIHRoZSBIaXQgeW91IHdhbnQuIFRoYXQgaXMg
d2h5IHRoaXMgcHJvYmxlbQpoYXBwZW4uCgpwb29yIGVuZ2xpc2ggOiIpCgoKLS0tLS0tLS0tLSBG
b3J3YXJkZWQgbWVzc2FnZSAtLS0tLS0tLS0tCkZyb206INPO076z2LXE0+MgPHN1cGVyY29vY0Bn
bWFpbC5jb20+CkRhdGU6IDIwMDctMTItMTkgz8LO5zc6MTUKU3ViamVjdDogUmU6IGRvY3VtZW50
IGRlbGV0aW9uIHByb2JsZW0KVG86IGphdmEtdXNlckBsdWNlbmUuYXBhY2hlLm9yZwoKCndlIGNh
biBpdGVyYXRvciBoaXRzLmlkKGkpIGJ1dCBjYW4ndCBwYXNzIHJlYWRlci5kZWxldGVEb2N1bWVu
dChoaXRzLmlkKGkpKTsKd2h5PwoKCjIwMDcvMTIvMTksIFR1c2hhciBCIDxzbm93aG93QHNiY2ds
b2JhbC5uZXQ+Ogo+Cj4gSGVsbG8gQWxsLAo+Cj4gSSBhbSBzZWVpbmcgdGhpcyBpc3N1ZSBhbmQg
d291bGQgbGlrZSB0byB1bmRlcnN0YW5kIGlmIGl0cyBhIGJ1ZyBvciBJIGFtCj4gbWlzc2luZyBz
b21ldGhpbmcgYW5kIGRvaW5nIHRoZSB3cm9uZyB3YXk6Cj4KPiAoTm90ZSB0aGF0IEkgYW0gZG9p
bmcgYWxsIGV4Y2VwdGlvbiBoYW5kbGluZyAtIGJ1dCBkZWxldGVkIHRoZSBleGNlcHRpb24KPiBo
YW5kbGluZyBjb2RlIGZvciBzYWtlIG9mIGJyZXZpdHkgYmVsb3cpCj4KPiBIaXRzIGggPSBtX2lu
ZGV4U2VhcmNoZXIuc2VhcmNoKHEpOyAvLyBSZXR1cm5zIDExNDc1IGRvY3VtZW50cwo+IGZvcihp
bnQgaSA9IDA7IGkgPCBoLmxlbmd0aCAoKTsgaSsrKQo+IHsKPiBpbnQgZG9jID0gaC5pZChpKTsK
PiBtX2luZGV4U2VhcmNoZXIuZ2V0SW5kZXhSZWFkZXIoKS5kZWxldGVEb2N1bWVudChkb2MpOwo+
IH0KPgo+IFRoZSBhYm92ZSBoaXRzIFZlY3Rvcjo6QXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0
aW9uIHdoZW4gaSA9IDY0MDAuIFRoZQo+IHByb2JsZW0gaGFwcGVucyBpbiBIaXRzOjpnZXRNb3Jl
RG9jcy4KPgo+IEJ5IHRoZSB0aW1lIDY0MDAgZG9jcyBhcmUgZGVsZXRlZCwgdGhlIG1ham9yaXR5
IGlzIGdvbmUgYW5kCj4gdG9wRG9jcy50b3RhbEhpdHMgYmVjb21lcyBsZXNzIHRoYW4gNjQwMCAo
SW4gdGhpcyBjYXNlIDUwNzUpIGFuZCBmaW5hbGx5Cj4gY2F1c2VzIGV4Y2VwdGlvbiBpbiB0aGUg
bGFzdCBsaW5lIG9mIEhpdHM6OmhpdERvYy4KPgo+IEkganVzdCB0b29rIHRoZSBleGFtcGxlIG51
bWJlcnMgd2hpY2ggb2NjdXJlZCBpbiBteSBjYXNlIGJ1dCB0aGlzIGhhcHBlbnMKPiBmb3IgYW55
IGhpdHMgPiAyMDAgKGluaXRpYWwgdmVjdG9yIHNpemUgaXMgMTAwIEkgZ3Vlc3MpLgo+Cj4gQW55
IGluc2lnaHQgb24gdGhlIGxvZ2ljIGhlcmUgd2lsbCBiZSB2ZXJ5IGhlbHBmdWwgKG5vdGU6IEkg
aGF2ZSBhCj4gd29ya2Fyb3VuZCB0b28pCj4KPiB0aGFua3MKPgo+IC0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQo+IFRv
IHVuc3Vic2NyaWJlLCBlLW1haWw6IGphdmEtdXNlci11bnN1YnNjcmliZUBsdWNlbmUuYXBhY2hl
Lm9yZwo+IEZvciBhZGRpdGlvbmFsIGNvbW1hbmRzLCBlLW1haWw6IGphdmEtdXNlci1oZWxwQGx1
Y2VuZS5hcGFjaGUub3JnCj4KPgo=
------=_Part_13248_13465298.1198064442891--

From java-user-return-31565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 11:50:36 2007
Return-Path: <java-user-return-31565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39043 invoked from network); 19 Dec 2007 11:50:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 11:50:35 -0000
Received: (qmail 9979 invoked by uid 500); 19 Dec 2007 11:50:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9918 invoked by uid 500); 19 Dec 2007 11:50:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9907 invoked by uid 99); 19 Dec 2007 11:50:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 03:50:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 11:49:55 +0000
Received: by fg-out-1718.google.com with SMTP id d23so534308fga.27
        for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 03:49:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=FPyJy9JWjGHlLnbauveUvol4YLqBXJupAXQCTHu6Ph4=;
        b=pxJXuEN4HM3s+4VPBFoVExtaINx39+xYWlPue9haHwRC3ty/oNtHfUgPzTwVubPxP48Mg+HDHCBSoYO09NPE2LxeVC4n5MSJ3UBSWOOzfjvr8B3daIffpSYsZUVZkfHlh04KUhgjF6cLpehxEsJUn1P4f8PCg+WGSmnwHuS2bDY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=jHk6loi1yrbzy/7TBB3eEEZVkSnOR9aeqDjZwrnQSuVGdBuCX3guXuc0XSiWGXHDZr6WbS8ohJDwe/zH13HbEOodNBDvTKFl+mq3pX+NS2dbcy04bOgi2AvM28BftWoUDCWkTyYLzR+6FrypG+UF8FzyMHQS5OTVPSYpoXxaVxc=
Received: by 10.86.95.20 with SMTP id s20mr8815193fgb.10.1198064997618;
        Wed, 19 Dec 2007 03:49:57 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Wed, 19 Dec 2007 03:49:57 -0800 (PST)
Message-ID: <e05f0fd10712190349l35eb019ao8d9cc35ea404f6a2@mail.gmail.com>
Date: Wed, 19 Dec 2007 13:49:57 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: document deletion problem
In-Reply-To: <678762.77854.qm@web83824.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2430_28700474.1198064997609"
References: <678762.77854.qm@web83824.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2430_28700474.1198064997609
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Tushar,

This is an interesting scenario!

The problem arises from the way search() methods that return
Hits are working: for start only 100 matching documents are
collected, assuming that apps calling this method will not
be interested in more documents than this, and that apps
traversing all matching documents (like yours) will use the
HitCollector API and provide their HitCollector (your
HitCollector would then do the deletion).

Anyhow, if an application requests the 101 matching doc,
under the hoods, the query is resubmitted, this time fetching
200 docs, out of which first 100 are ignored and the rest are
provided as results. If more than 200 are needed the next
re-submission would bring 400, then 800, etc.

Now, in your interesting scenario, you deleted every retrieved
doc. The sequence of resubmission of queries is:
100, 200, 400, 800, 1,600, 3,200, 6,400, 12,800 (actually 11,475).
After first 6,400 were deleted and you ask for the result 6,401,
the query is re-submitted, but only 11,475 - 6,400 = 5075 matches
are found. Since you asked for the 6,401 match, Hits attempts to
skip the first 6,400 and fails of course, because there are not that
many docs.

This seems like a bug, because although Hits is not recommended
for this task, for performance considerations, and you should better
use a HitCollector for this - still, this should have worked correctly.

I tend to think that his should just be documented and not necessarily
fixed, not 100% sure which of the two.

Could you file a JIRA Lucene issue for this?

Regards,
Doron

On Dec 19, 2007 12:10 PM, Tushar B <snowhow@sbcglobal.net> wrote:

> Hello All,
>
> I am seeing this issue and would like to understand if its a bug or I am
> missing something and doing the wrong way:
>
> (Note that I am doing all exception handling - but deleted the exception
> handling code for sake of brevity below)
>
> Hits h = m_indexSearcher.search(q); // Returns 11475 documents
> for(int i = 0; i < h.length(); i++)
> {
> int doc = h.id(i);
> m_indexSearcher.getIndexReader().deleteDocument(doc);
> }
>
> The above hits Vector::ArrayIndexOutOfBoundsException when i = 6400. The
> problem happens in Hits::getMoreDocs.
>
> By the time 6400 docs are deleted, the majority is gone and
> topDocs.totalHits becomes less than 6400 (In this case 5075) and finally
> causes exception in the last line of Hits::hitDoc.
>
> I just took the example numbers which occured in my case but this happens
> for any hits > 200 (initial vector size is 100 I guess).
>
> Any insight on the logic here will be very helpful (note: I have a
> workaround too)
>
> thanks
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2430_28700474.1198064997609--

From java-user-return-31566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 12:34:19 2007
Return-Path: <java-user-return-31566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60133 invoked from network); 19 Dec 2007 12:34:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 12:34:19 -0000
Received: (qmail 43579 invoked by uid 500); 19 Dec 2007 12:34:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43531 invoked by uid 500); 19 Dec 2007 12:34:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43520 invoked by uid 99); 19 Dec 2007 12:34:02 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 04:34:02 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rakesh_shete@hotmail.com designates 65.54.246.224 as permitted sender)
Received: from [65.54.246.224] (HELO bay0-omc3-s24.bay0.hotmail.com) (65.54.246.224)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 12:33:46 +0000
Received: from BAY112-W24 ([64.4.26.124]) by bay0-omc3-s24.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 19 Dec 2007 04:33:32 -0800
Message-ID: <BAY112-W24F6B5980EC917B65A7BE6F95C0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_85cc95dd-d121-4ecb-ae3e-f79a968397d8_"
X-Originating-IP: [220.225.70.2]
From: Rakesh Shete <rakesh_shete@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Lucene multifield query problem
Date: Wed, 19 Dec 2007 18:03:31 +0530
Importance: Normal
In-Reply-To: <e05f0fd10712182219p62384fdejc74f3d4da1703e49@mail.gmail.com>
References: <BAY112-W38A467EC53ACDC15E9CDBBF9630@phx.gbl>
	 <9294E20AED46934EA459020706463F94664304@SUEXCL-02.ad.syr.edu>
 	 <e05f0fd10712181309u16c0c6d5gfc1fe9e2be15d9f5@mail.gmail.com>
 	 <BAY112-W251C5B761737914AE3F1B3F95C0@phx.gbl> 
 <e05f0fd10712182219p62384fdejc74f3d4da1703e49@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 19 Dec 2007 12:33:32.0244 (UTC) FILETIME=[5DB0F140:01C8423B]
X-Virus-Checked: Checked by ClamAV on apache.org

--_85cc95dd-d121-4ecb-ae3e-f79a968397d8_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hey Doron,

It worked!!!! It worked!!!!

Thanks a lot for the help along with some valuable information about the AP=
I for creating queries. Will keep this in mind going ahead.

--Regards,
Rakesh Shete



> Date: Wed, 19 Dec 2007 08:19:53 +0200
> From: cdoronc@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: Lucene multifield query problem
>=20
> Hi Rakseh,
>=20
> It just occurred to me that your code has
>      String searchCriteria =3D "Indoor*";
>=20
> Assuming StandardAnalyzer used at indexing time, all text words were
> lowercased. Now, QueryParser by default does not lowercase wildcard
> queries. You can however instruct it to do so by calling:
>      myQueryParser.setLowercaseExpandedTerms(true)
>=20
> (The only reason the first query returned anything was that MUST part,
> which, as already discussed, was also sufficient for qualifying a doc.)
>=20
> So, you should be able to get the "correct" results with something like
> this:
>      QueryParser qp =3D new QueryParser("i_title", new StandardAnalyzer()=
);
>      qp.setLowercaseExpandedTerms(true);
>      Query q =3D qp.parse("+(i_title:Indoor* i_description:Indoor*)
> -i_published:false +i_topicsClasses.id:1_1_*_*");
>=20
> Also, note that the printed query for the 2nd attempt, where you used
> TermQueries,
> is somewhat misleading. You may read that as if the query parser generate=
d a
>=20
> wildcard query, but actually it is not a wildcard query, just a termQuery=
,
> expecting
> to find this exact token 'i_title:Indoor*' with the asterisk character in
> the index.
>=20
> My additional recommendations to you are (1) also print the rewrite form =
of
> the
> query (q.rewrite(is.getIndexReader())) - there, for a wildcard query part=
,
> you will see
> how it was expanded with the terms that match the wildcard expression. Yo=
u
> will be able to see the lowercasing issue this way, and (2) If this still
> doesn't
> work for you, please post here a tiny simple standalone program that crea=
tes
> an index and searches it and demonstrates the problem.
>=20
> Regards,
> Doron
>=20
>=20
> On Dec 19, 2007 6:43 AM, Rakesh Shete <rakesh_shete@hotmail.com> wrote:
>=20
> >
> > Hi Doren, Steve. Your suggestions make sense but dont give me the desir=
ed
> > results. Here is the code how I generate the query:
> >
> > String searchCriteria =3D "Indoor*";QueryParser queryparser =3D new
> > QueryParser("i_title",                    new StandardAnalyzer());Query=
 q1 =3D
> > queryparser.parse(searchCriteria);queryparser =3D new
> > QueryParser("i_description",                    new
> > StandardAnalyzer());Query q2 =3D queryparser.parse(searchCriteria);quer=
yparser
> > =3D new QueryParser("i_published", new StandardAnalyzer());Query q3 =3D
> > queryparser.parse("false");queryparser =3D new
> > QueryParser("i_topicsClasses.id",                    new
> > StandardAnalyzer());Query topicQuery =3D queryparser.parse("1_1_*_*");B=
ooleanQuery
> > booleanQuery =3D new BooleanQuery();booleanQuery.add(q1,
> > BooleanClause.Occur.SHOULD);booleanQuery.add(q2,
> > BooleanClause.Occur.SHOULD);booleanQuery.add(q3,
> > BooleanClause.Occur.MUST_NOT);booleanQuery.add(topicQuery,
> > BooleanClause.Occur.MUST);
> >
> >
> > This produces the following query: i_title:indoor* i_description:indoor=
*
> > -i_published:false +i_topicsClasses.id:1_1_*_*
> > This gives me extra unwanted results from "+i_topicsClasses.id:1_1_*_*"=
.
> >
> > I modified the above code in the foll. manner:
> >
> > Term t =3D new Term("i_title", searchCriteria);TermQuery termQuery =3D =
new
> > TermQuery(t);Term t1 =3D new Term("i_description", searchCriteria);Term=
Query
> > termQuery1 =3D new TermQuery(t1);BooleanQuery booleanQuery1 =3D new
> > BooleanQuery();booleanQuery1.add(termQuery, BooleanClause.Occur.SHOULD)=
;booleanQuery1.add(termQuery1,
> > BooleanClause.Occur.SHOULD);BooleanQuery booleanQuery =3D new
> > BooleanQuery();booleanQuery.add(booleanQuery1, BooleanClause.Occur.MUST=
);booleanQuery.add(q3,
> > BooleanClause.Occur.MUST_NOT);booleanQuery.add(topicQuery,
> > BooleanClause.Occur.MUST);
> >
> > This produces the following query:
> > +(i_title:Indoor* i_description:Indoor*) -i_published:false
> > +i_topicsClasses.id:1_1_*_*
> > But no results are fetched :(
> >
> > Any hints if am I doing anything wrong?
> >
> > --Regards,
> > Rakesh S
> >
> >
> >
> > > Date: Tue, 18 Dec 2007 23:09:09 +0200
> > > From: cdoronc@gmail.com
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Lucene multifield query problem
> > >
> > > Hi Rakesh,
> > >
> > > Perhaps the confusion comes from the asymmetry
> > > between +X and -X.   I.e., for the query:
> > >       A B -C +D
> > > one might think that, similar to how -C only disqualifies docs
> > > containing C (but not qualifying docs not containing C), also
> > > +D only disqualifies docs not containing D. But this is
> > > inaccurate, because +D, in addition to disqualifying
> > > docs not containing D, also qualifies docs containing D.
> > >
> > > The modified query that Steven suggested:
> > >       +(A B) -C +D
> > > removes this asymmetry, because specifying +(A B)  means
> > > that D is not anymore sufficient to qualify a doc.
> > >
> > > Hope this helps (otherwise let this reply be forever disqualified : -=
 )
> > )
> > > Doron
> > >
> > > On Dec 18, 2007 9:28 PM, Steven A Rowe <sarowe@syr.edu> wrote:
> > >
> > > > Hi Rakesh,
> > > >
> > > > This doesn't look like a user-generated query.  Have you considered
> > > > building the Query via the API instead of using QueryParser?
> > > >
> > > > With QueryParser, you should get the results you want with syntax
> > like:
> > > >
> > > > +(i_title:indoor* OR i_description:indoor*) -i_published:false
> > > > +i_topicsClasses.id:1_1_*_*
> > > >
> > > > Have you tried this yet?
> > > >
> > > > Steve
> > > >
> > > > On 12/18/2007 at 1:58 PM, Rakesh Shete wrote:
> > > > >
> > > > > Thanks for the suggestion Steve. My problem is with getting
> > > > > the correct results. Let me put in words the query :
> > > > >
> > > > > Fetch all documents such that the search string "indoor*" is
> > > > > either part of the 'i_title' field or 'i_description' field,
> > > > > eliminate if not published (-i_published:false) but should
> > > > > have topic id of the form "1_1_*_*" (i_topicsClasses.id:1_1_*_*)
> > > > >
> > > > > i_title:indoor* i_description:indoor* -i_published:false
> > > > > +i_topicsClasses.id:1_1_*_* returns me extra results which
> > > > > should not be fetched.
> > > > >
> > > > > -- Regards,
> > > > > Rakesh Shete
> > > > >
> > > > > > Subject: RE: Lucene multifield query problem
> > > > > > Date: Tue, 18 Dec 2007 13:26:24 -0500
> > > > > > From: sarowe@syr.edu
> > > > > > To: java-user@lucene.apache.org
> > > > > >
> > > > > > Hi Rakesh,
> > > > > >
> > > > > > Set the default QueryParser operator to AND (default default
> > operator
> > > > > > :) is OR):
> > > > > >
> > > > > >
> > > > > <http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/que
> > > > > ryParser/QueryParser.html#setDefaultOperator(org.apache.lucene
> > > > > .queryParser.QueryParser.Operator)>
> > > > > >
> > > > > > Steve
> > > > > >
> > > > > > On 12/18/2007 at 1:22 PM, Rakesh Shete wrote:
> > > > > > >
> > > > > > > Hi all,
> > > > > > >
> > > > > > > I am facing problem with the following multifield query:
> > > > > > >
> > > > > > > i_title:indoor* i_description:indoor* -i_published:false
> > > > > > > +i_topicsClasses.id:1_1_*_*
> > > > > > >
> > > > > > > The above query returns me even results which should not be
> > > > > > > there. Ideally I would like the query resullts as:
> > > > > > >
> > > > > > > (i_title:indoor* i_description:indoor* -i_published:false)
> > > > > > > AND (i_topicsClasses.id:1_1_*_*)
> > > > > > >
> > > > > > > i.e. The intersection of the first part and second part.
> > > > > > >
> > > > > > > But what is happening currently is that I get a union of the
> > > > > > > first part and second part, i.e., whatever results are
> > > > > > > returned by "i_title:indoor* i_description:indoor*
> > > > > > > -i_published:false" are combined (union) with results
> > > > > > > returned by "+i_topicsClasses.id:1_1_*_*".
> > > > > > >
> > > > > > > How do I write a query that returns me results which are an
> > > > > > > intersection of the above 2 parts?
> > > > > > >
> > > > > > > --Regards,
> > > > > > > Rakesh S
> > > > > > >
> > > > > > >
> > > > > > >
> > _________________________________________________________________
> > > > Post
> > > > > > > ads for free - to sell, rent or even buy.www.yello.in
> > > > > > > http://ss1.richmedia.in/recurl.asp?pid=3D186
> > > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=
For
> > > > > > additional commands, e-mail: java-user-help@lucene.apache.org
> > > > > >
> > > > >
> > > > > _________________________________________________________________
> > Post
> > > > > ads for free - to sell, rent or even buy.www.yello.in
> > > > > http://ss1.richmedia.in/recurl.asp?pid=3D186
> > > > >
> > > >
> > > >
> > > >
> > > >
> > > > -------------------------------------------------------------------=
--
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> >
> > _________________________________________________________________
> > Post free property ads on Yello Classifieds now! www.yello.in
> > http://ss1.richmedia.in/recurl.asp?pid=3D220

_________________________________________________________________
Post free property ads on Yello Classifieds now! www.yello.in
http://ss1.richmedia.in/recurl.asp?pid=3D219=

--_85cc95dd-d121-4ecb-ae3e-f79a968397d8_--

From java-user-return-31567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 13:22:05 2007
Return-Path: <java-user-return-31567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71953 invoked from network); 19 Dec 2007 13:22:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 13:22:05 -0000
Received: (qmail 99243 invoked by uid 500); 19 Dec 2007 13:21:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99212 invoked by uid 500); 19 Dec 2007 13:21:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99201 invoked by uid 99); 19 Dec 2007 13:21:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 05:21:48 -0800
X-ASF-Spam-Status: No, hits=3.2 required=10.0
	tests=HTML_MESSAGE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [64.233.178.249] (HELO hs-out-2122.google.com) (64.233.178.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 13:21:26 +0000
Received: by hs-out-2122.google.com with SMTP id 54so2949625hsz.5
        for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 05:21:27 -0800 (PST)
Received: by 10.143.162.8 with SMTP id p8mr548318wfo.49.1198070484999;
        Wed, 19 Dec 2007 05:21:24 -0800 (PST)
Received: by 10.142.43.4 with HTTP; Wed, 19 Dec 2007 05:21:24 -0800 (PST)
Message-ID: <6a462b600712190521l3ed58e26lc203e23a58f8860c@mail.gmail.com>
Date: Wed, 19 Dec 2007 18:51:24 +0530
From: "Vipin Rakkanath" <vipin@qburst.com>
To: java-user@lucene.apache.org
Subject: Issue with multiple index search
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_908_12068338.1198070484965"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_908_12068338.1198070484965
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi folks,

I use to search within multiple indexes using  ParallelMultiSearcher.
All the indexes are remote. There are many index servers and each of
them contains multiple indexes.

While searching, I am getting exception when one of the indexes
has a problem. The exception is given.

I edited the following methods,

1.  MultiSearcher : public int docFreq(Term term) throws IOException
2.  ParallelMultiSearcher : TopDocs search

I deleted all problematic searchable objects from the list and did the
search again. Now its working ok.

Is this a feasible solution..?


please comment about this.




Thanks,

Vipin R



caught a class java.lang.NullPointerException with message: null Exception
in thread "main" java.lang.NullPointerException at
org.apache.lucene.index.TermInfosReader.ensureIndexIsRead(
TermInfosReader.java:100) at org.apache.lucene.index.TermInfosReader.get(
TermInfosReader.java:133) at org.apache.lucene.index.SegmentReader.docFreq (
SegmentReader.java:358) at org.apache.lucene.search.IndexSearcher.docFreq(
IndexSearcher.java:79) at org.apache.lucene.search.RemoteSearchable.docFreq(
RemoteSearchable.java:57) at
sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) at
sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(
DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(
Method.java:585) at sun.rmi.server.UnicastServerRef.dispatch(
UnicastServerRef.java:294) at sun.rmi.transport.Transport$1.run(
Transport.java:153) at java.security.AccessController.doPrivileged (Native
Method) at sun.rmi.transport.Transport.serviceCall(Transport.java:149) at
sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:460) at
sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run
(TCPTransport.java:701)
at java.lang.Thread.run(Thread.java:595) at
sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(
StreamRemoteCall.java:247) at sun.rmi.transport.StreamRemoteCall.executeCall(
StreamRemoteCall.java:223) at sun.rmi.server.UnicastRef.invoke(
UnicastRef.java:126) at
java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(
RemoteObjectInvocationHandler.java:179) at
java.rmi.server.RemoteObjectInvocationHandler.invoke (
RemoteObjectInvocationHandler.java:132) at $Proxy0.docFreq(Unknown Source)
at org.apache.lucene.search.MultiSearcher.docFreq(MultiSearcher.java:140) at
org.apache.lucene.search.ParallelMultiSearcher.docFreq (
ParallelMultiSearcher.java:46) at org.apache.lucene.search.Similarity.idf(
Similarity.java:457) at org.apache.lucene.search.TermQuery$TermWeight.(
TermQuery.java:44) at org.apache.lucene.search.TermQuery.createWeight (
TermQuery.java:145) at org.apache.lucene.search.BooleanQuery$BooleanWeight.(
BooleanQuery.java:187) at
org.apache.lucene.search.BooleanQuery$BooleanWeight2.(BooleanQuery.java:342)
at org.apache.lucene.search.BooleanQuery.createWeight(BooleanQuery.java:384)
at org.apache.lucene.search.Query.weight(Query.java :95) at
org.apache.lucene.search.Hits.(Hits.java:49) at
org.apache.lucene.search.Searcher.search(Searcher.java:54) at
com.sumobrain.search.SearchMaster.doSearch(SearchMaster.java:244) at
com.sumobrain.search.SearchMaster.main(SearchMaster.java:672)

------=_Part_908_12068338.1198070484965--

From java-user-return-31568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 15:46:20 2007
Return-Path: <java-user-return-31568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31396 invoked from network); 19 Dec 2007 15:46:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 15:46:20 -0000
Received: (qmail 22882 invoked by uid 500); 19 Dec 2007 15:46:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22842 invoked by uid 500); 19 Dec 2007 15:46:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22831 invoked by uid 99); 19 Dec 2007 15:46:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 07:46:02 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [69.147.85.111] (HELO web83824.mail.sp1.yahoo.com) (69.147.85.111)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 19 Dec 2007 15:45:39 +0000
Received: (qmail 21611 invoked by uid 60001); 19 Dec 2007 15:45:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=sbcglobal.net;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=Nje9s9IrK0aYVV9b3h+lqkgZ5cUPf5lGSSpMY0znyEsys5+zQWwXxEx+nIDmFvTtwq5EsVd0X/kLGa+fneXVLDbKpq9XCKaFtoW3UGsEh92unXV9jZrg8AgNNQzj0n1rQYDcfjNbalpkwLw9XExZ6h0tAEcsSZO91UbBO6dIoPk=;
X-YMail-OSG: WAEBN4IVM1mFpVWTMf.R22IXYBSi2PmQDVSdOqjvNsUFshnk
Received: from [63.82.71.142] by web83824.mail.sp1.yahoo.com via HTTP; Wed, 19 Dec 2007 07:45:34 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Wed, 19 Dec 2007 07:45:34 -0800 (PST)
From: Tushar B <snowhow@sbcglobal.net>
Subject: Re: document deletion problem
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <855648.21601.qm@web83824.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Doron, 

I was just playing around with deletion because I wanted to delete documents due to spurious entries in one particular field. Could you tell me how do I file a JIRA issue?

The two workarounds I was using are neither great in perfromance. Provided here just FYI:

1) Have the "for" loop in a "do while" loop, Handle the Array...Exception, resubmit query
2) Use HitCollector (as also suggested by you)

thanks

----- Original Message ----
> From: Doron Cohen <cdoronc@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, December 19, 2007 3:49:57 AM
> Subject: Re: document deletion problem
> 
> Hi Tushar,
> 
> This is an interesting scenario!
> 
> The problem arises from the way search() methods that return
> Hits are working: for start only 100 matching documents are
> collected, assuming that apps calling this method will not
> be interested in more documents than this, and that apps
> traversing all matching documents (like yours) will use the
> HitCollector API and provide their HitCollector (your
> HitCollector would then do the deletion).
> 
> Anyhow, if an application requests the 101 matching doc,
> under the hoods, the query is resubmitted, this time fetching
> 200 docs, out of which first 100 are ignored and the rest are
> provided as results. If more than 200 are needed the next
> re-submission would bring 400, then 800, etc.
> 
> Now, in your interesting scenario, you deleted every retrieved
> doc. The sequence of resubmission of queries is:
> 100, 200, 400, 800, 1,600, 3,200, 6,400, 12,800 (actually 11,475).
> After first 6,400 were deleted and you ask for the result 6,401,
> the query is re-submitted, but only 11,475 - 6,400 = 5075 matches
> are found. Since you asked for the 6,401 match, Hits attempts to
> skip the first 6,400 and fails of course, because there are not that
> many docs.
> 
> This seems like a bug, because although Hits is not recommended
> for this task, for performance considerations, and you should better
> use a HitCollector for this - still, this should have worked correctly.
> 
> I tend to think that his should just be documented and not necessarily
> fixed, not 100% sure which of the two.
> 
> Could you file a JIRA Lucene issue for this?
> 
> Regards,
> Doron
> 
> On Dec 19, 2007 12:10 PM, Tushar B wrote:
> 
> > Hello All,
> >
> > I am seeing this issue and would like to understand if its a bug or I am
> > missing something and doing the wrong way:
> >
> > (Note that I am doing all exception handling - but deleted the exception
> > handling code for sake of brevity below)
> >
> > Hits h = m_indexSearcher.search(q); // Returns 11475 documents
> > for(int i = 0; i < h.length(); i++)
> > {
> > int doc = h.id(i);
> > m_indexSearcher.getIndexReader().deleteDocument(doc);
> > }
> >
> > The above hits Vector::ArrayIndexOutOfBoundsException when i = 6400. The
> > problem happens in Hits::getMoreDocs.
> >
> > By the time 6400 docs are deleted, the majority is gone and
> > topDocs.totalHits becomes less than 6400 (In this case 5075) and finally
> > causes exception in the last line of Hits::hitDoc.
> >
> > I just took the example numbers which occured in my case but this happens
> > for any hits > 200 (initial vector size is 100 I guess).
> >
> > Any insight on the logic here will be very helpful (note: I have a
> > workaround too)
> >
> > thanks
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 16:24:31 2007
Return-Path: <java-user-return-31569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54445 invoked from network); 19 Dec 2007 16:24:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 16:24:31 -0000
Received: (qmail 94558 invoked by uid 500); 19 Dec 2007 16:24:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94536 invoked by uid 500); 19 Dec 2007 16:24:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94525 invoked by uid 99); 19 Dec 2007 16:24:13 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 08:24:13 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 16:23:52 +0000
Received: by fk-out-0910.google.com with SMTP id z23so2715836fkz.5
        for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 08:23:55 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Cp4kbmqUZweG6hBLESqztPw9+qdW1xO77+YxQ17gvqg=;
        b=HqT0K0lQOh5ve1tTCh7/Rg1MkCNDCe+WFYUBwF/3YX0pGbpV82E79ldTAhC7c+XWH94JvJEWCQsLZHiCbg3gBaD1Nj4X7KSK5HL3mm7oWV7rwIbRzQkSxv+6RQdDtMjvo+OhIaPFwXjK68D0tN7+7MSFYd7Bqv++c3QN/LVZWzM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=sZFKIJoIcCaBVz+ioyHOnFAGitytfTC+Rur6laM1IrscpeTGtP1DCt6d/r+bnsQRD9vL6YvWHUcbKx3Nfc7VdAjTHgeJBcOz7+q+EUqQNIWg21TP8/f4aRL2jNvY6TOlxMwSQ+rfjqvAp9pUZs6SH+4yZtTaHIaRWAj96QjllOk=
Received: by 10.82.105.13 with SMTP id d13mr10452689buc.30.1198081434774;
        Wed, 19 Dec 2007 08:23:54 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Wed, 19 Dec 2007 08:23:54 -0800 (PST)
Message-ID: <359a92830712190823h5fefffe8ud43e184d7d003aa2@mail.gmail.com>
Date: Wed, 19 Dec 2007 11:23:54 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Giving boost to a more recent item whiule searching
In-Reply-To: <295da8fe0712190150j4e7b8532k426319d94eb315f3@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_17739_418241.1198081434770"
References: <295da8fe0712190150j4e7b8532k426319d94eb315f3@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_17739_418241.1198081434770
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If you search the mail archives, you'll see this topic
discussed at some length. That'll give you a much faster
answer...

See http://wiki.apache.org/lucene-java/MailingListArchives

On Dec 19, 2007 4:50 AM, prabin meitei <prabin.meitei@gmail.com> wrote:

> Hi,
>   I am trying to retreive documents from an index. Each document has a
> date
> field and other fields.
> while  making a seach i want to give some extra boost to the more recent
> items (as per the date field)
> How can I go about it?
>
> Thanks in advance
>
> Prabin
>

------=_Part_17739_418241.1198081434770--

From java-user-return-31570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 19:01:44 2007
Return-Path: <java-user-return-31570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16155 invoked from network); 19 Dec 2007 19:01:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 19:01:44 -0000
Received: (qmail 47747 invoked by uid 500); 19 Dec 2007 19:01:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47640 invoked by uid 500); 19 Dec 2007 19:01:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47629 invoked by uid 99); 19 Dec 2007 19:01:27 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 11:01:27 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [214.3.16.235] (HELO mail2.transcom.mil) (214.3.16.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 19:01:04 +0000
Received: from beyla.ustranscom.mil (beyla.transcom.mil [214.3.17.236])
	by mail2.transcom.mil (8.13.8/8.13.8) with ESMTP id lBJJ16Jm015315
	for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 13:01:06 -0600 (CST)
Received: from ustcexfe02.hq.ds.transcom.mil (unknown [172.16.210.20])
	by beyla.ustranscom.mil (Postfix) with ESMTP id 469F0394E
	for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 13:00:59 -0600 (CST)
Received: from USTCVEX16.hq.ds.transcom.mil ([172.16.210.161]) by ustcexfe02.hq.ds.transcom.mil with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 19 Dec 2007 13:00:59 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C84271.7DE6A6A8"
Subject: anyone
Date: Wed, 19 Dec 2007 13:00:59 -0600
Message-ID: <612817A4FB97AE45ABEAE6D0EA8ADE8403BE2303@USTCVEX16.hq.ds.transcom.mil>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: anyone
Thread-Index: AchCcX3UJNPL6e5FQa2aKDx6TWhp/g==
From: "Hartrich, James CTR USTRANSCOM J6" <James.Hartrich.ctr@ustranscom.mil>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 19 Dec 2007 19:00:59.0184 (UTC) FILETIME=[7DF27B00:01C84271]
X-USTRANSCOM-MailScanner-Information: Please contact the ISP for more information
X-USTRANSCOM-MailScanner: Found to be clean
X-USTRANSCOM-MailScanner-SpamCheck: not spam (whitelisted),
	SpamAssassin (not cached, score=-1.999, required 5,
	autolearn=not spam, BAYES_00 -2.00, HTML_MESSAGE 0.00)
X-USTRANSCOM-MailScanner-From: james.hartrich.ctr@ustranscom.mil
X-USTRANSCOM-MailScanner-To: java-user@lucene.apache.org
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

------_=_NextPart_001_01C84271.7DE6A6A8
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Is this at least a semi-active list?

James


------_=_NextPart_001_01C84271.7DE6A6A8--

From java-user-return-31571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 19:13:39 2007
Return-Path: <java-user-return-31571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19736 invoked from network); 19 Dec 2007 19:13:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 19:13:39 -0000
Received: (qmail 66556 invoked by uid 500); 19 Dec 2007 19:13:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66520 invoked by uid 500); 19 Dec 2007 19:13:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66509 invoked by uid 99); 19 Dec 2007 19:13:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 11:13:22 -0800
X-ASF-Spam-Status: No, hits=-4.0 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 19:13:09 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: anyone
Date: Wed, 19 Dec 2007 14:12:28 -0500
Message-ID: <9294E20AED46934EA459020706463F9466433D@SUEXCL-02.ad.syr.edu>
In-Reply-To: <612817A4FB97AE45ABEAE6D0EA8ADE8403BE2303@USTCVEX16.hq.ds.transcom.mil>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: anyone
Thread-Index: AchCcX3UJNPL6e5FQa2aKDx6TWhp/gAAVtIg
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi James,

Over the last two months, it has averaged roughly 15 messages per day.  =
Feels like more than semi-active to me.

Steve

On 12/19/2007 at 2:00 PM, Hartrich, James CTR USTRANSCOM J6 wrote:
> Is this at least a semi-active list?
>=20
> James
>=20
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 19:15:26 2007
Return-Path: <java-user-return-31572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20121 invoked from network); 19 Dec 2007 19:15:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 19:15:26 -0000
Received: (qmail 71928 invoked by uid 500); 19 Dec 2007 19:15:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71899 invoked by uid 500); 19 Dec 2007 19:15:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71888 invoked by uid 99); 19 Dec 2007 19:15:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 11:15:09 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 19:14:47 +0000
Received: by rv-out-0910.google.com with SMTP id k20so2542418rvb.5
        for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 11:14:47 -0800 (PST)
Received: by 10.141.202.12 with SMTP id e12mr1203647rvq.91.1198091687075;
        Wed, 19 Dec 2007 11:14:47 -0800 (PST)
Received: from ?10.17.4.4? ( [71.174.108.74])
        by mx.google.com with ESMTPS id 5sm20410593wrh.2007.12.19.11.14.46
        (version=TLSv1/SSLv3 cipher=OTHER);
        Wed, 19 Dec 2007 11:14:46 -0800 (PST)
Mime-Version: 1.0 (Apple Message framework v752.3)
In-Reply-To: <612817A4FB97AE45ABEAE6D0EA8ADE8403BE2303@USTCVEX16.hq.ds.transcom.mil>
References: <612817A4FB97AE45ABEAE6D0EA8ADE8403BE2303@USTCVEX16.hq.ds.transcom.mil>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <7F369C49-534F-4311-A247-D352732A491C@mikemccandless.com>
Content-Transfer-Encoding: 7bit
From: Michael McCandless <lucene@mikemccandless.com>
Subject: Re: anyone
Date: Wed, 19 Dec 2007 14:14:44 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.752.3)
X-Virus-Checked: Checked by ClamAV on apache.org


Yes.

Mike

Hartrich, James CTR USTRANSCOM J6 wrote:

> Is this at least a semi-active list?
>
> James
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 19:15:39 2007
Return-Path: <java-user-return-31573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20205 invoked from network); 19 Dec 2007 19:15:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 19:15:39 -0000
Received: (qmail 73500 invoked by uid 500); 19 Dec 2007 19:15:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73474 invoked by uid 500); 19 Dec 2007 19:15:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73463 invoked by uid 99); 19 Dec 2007 19:15:22 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 11:15:22 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: 194.109.24.33 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.33] (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 19:15:10 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr13.xs4all.nl (8.13.8/8.13.8) with ESMTP id lBJJF27b076510
	for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 20:15:02 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <0526BF12-FCC1-48E7-82B0-D7926E2420C8@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <6a462b600712190521l3ed58e26lc203e23a58f8860c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Issue with multiple index search
Date: Wed, 19 Dec 2007 20:15:01 +0100
References: <6a462b600712190521l3ed58e26lc203e23a58f8860c@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


19 dec 2007 kl. 14.21 skrev Vipin Rakkanath:
> While searching, I am getting exception when one of the indexes
> has a problem. The exception is given.
>
> I edited the following methods,
>
> 1.  MultiSearcher : public int docFreq(Term term) throws IOException
> 2.  ParallelMultiSearcher : TopDocs search
>
> I deleted all problematic searchable objects from the list and did the
> search again. Now its working ok.
>
> Is this a feasible solution..?

If it works it works.

You might want to make sure it is a thread safe operation.

A possible solution that might require more work is to catching  
exceptions and return the results from the working indicies only. You  
would not have to replace the query and the application will keep  
trying to connect to that remote searcher that is temporarily out of  
reach.

-- 
karl



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 19:40:45 2007
Return-Path: <java-user-return-31574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30641 invoked from network); 19 Dec 2007 19:40:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 19:40:45 -0000
Received: (qmail 7018 invoked by uid 500); 19 Dec 2007 19:40:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6987 invoked by uid 500); 19 Dec 2007 19:40:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6975 invoked by uid 99); 19 Dec 2007 19:40:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 11:40:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jpsondag@gmail.com designates 72.14.202.177 as permitted sender)
Received: from [72.14.202.177] (HELO ro-out-1112.google.com) (72.14.202.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 19:40:06 +0000
Received: by ro-out-1112.google.com with SMTP id k5so447611rog.7
        for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 11:40:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        bh=xktZ3owNFyl79jVFefCyAQl2R2eVXmI+hyeaOc6A6GI=;
        b=iP+uvQznekADYGkg/fpyXDtsz5mZXUw3RlHc2upRZ6DhGctMEH6ouZ1vwQ+Wkk3soAWr+h78EFseYdjLgiclbkcUJoayakCbKulMgqzfYiphj68UBBgq5wE1O9UEwEDv+fXeU2SOvEAqUDvEzKFqOANluHSlWYGYg9CQqibK09Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:sender:to:subject:in-reply-to:mime-version:content-type:references:x-google-sender-auth;
        b=l7SuK0WgelmEwOWSm5944NWAvjfeVfQOQQaAhQDFkIR8aOJMdtSlEMPrQJTCU2c/gXvGsqFTLEVFMSUynPcFZ9mX00fP5LmJyd3Gno9RjQHBUvGRFGyXoPMuSxoJOVEUEVNgw9LOXFBt8F9BdrHOV2dY/rkDHSo8D24dSLgZjH0=
Received: by 10.142.194.1 with SMTP id r1mr3290022wff.176.1198093206356;
        Wed, 19 Dec 2007 11:40:06 -0800 (PST)
Received: by 10.142.193.14 with HTTP; Wed, 19 Dec 2007 11:40:06 -0800 (PST)
Message-ID: <bd67edef0712191140l4b55356oa2a54a80a250ed4d@mail.gmail.com>
Date: Wed, 19 Dec 2007 13:40:06 -0600
From: "John Paul Sondag" <jsondag2@uiuc.edu>
Sender: jpsondag@gmail.com
To: java-user@lucene.apache.org
Subject: Re: anyone
In-Reply-To: <7F369C49-534F-4311-A247-D352732A491C@mikemccandless.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_21024_24777889.1198093206277"
References: <612817A4FB97AE45ABEAE6D0EA8ADE8403BE2303@USTCVEX16.hq.ds.transcom.mil>
	 <7F369C49-534F-4311-A247-D352732A491C@mikemccandless.com>
X-Google-Sender-Auth: 1c6fd8c68c86a68c
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_21024_24777889.1198093206277
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Yup

--JP

On Dec 19, 2007 1:14 PM, Michael McCandless <lucene@mikemccandless.com>
wrote:

>
> Yes.
>
> Mike
>
> Hartrich, James CTR USTRANSCOM J6 wrote:
>
> > Is this at least a semi-active list?
> >
> > James
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_21024_24777889.1198093206277--

From java-user-return-31575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 20:10:10 2007
Return-Path: <java-user-return-31575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43973 invoked from network); 19 Dec 2007 20:10:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 20:10:10 -0000
Received: (qmail 48777 invoked by uid 500); 19 Dec 2007 20:09:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48750 invoked by uid 500); 19 Dec 2007 20:09:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48739 invoked by uid 99); 19 Dec 2007 20:09:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 12:09:52 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [214.3.16.235] (HELO mail2.transcom.mil) (214.3.16.235)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 20:09:30 +0000
Received: from beyla.ustranscom.mil (beyla.transcom.mil [214.3.17.236])
	by mail2.transcom.mil (8.13.8/8.13.8) with ESMTP id lBJK9Wbs022978
	for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 14:09:33 -0600 (CST)
Received: from ustcexfe02.hq.ds.transcom.mil (unknown [172.16.210.20])
	by beyla.ustranscom.mil (Postfix) with ESMTP id C6A0C393F
	for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 14:09:22 -0600 (CST)
Received: from USTCVEX16.hq.ds.transcom.mil ([172.16.210.161]) by ustcexfe02.hq.ds.transcom.mil with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 19 Dec 2007 14:09:22 -0600
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: anyone
Date: Wed, 19 Dec 2007 14:09:22 -0600
Message-ID: <612817A4FB97AE45ABEAE6D0EA8ADE8403BE2305@USTCVEX16.hq.ds.transcom.mil>
In-Reply-To: <bd67edef0712191140l4b55356oa2a54a80a250ed4d@mail.gmail.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: anyone
Thread-Index: AchCdx6l+gSKA0ylQ6u0S+MSXNpVEAAA44RA
References: <612817A4FB97AE45ABEAE6D0EA8ADE8403BE2303@USTCVEX16.hq.ds.transcom.mil> <7F369C49-534F-4311-A247-D352732A491C@mikemccandless.com> <bd67edef0712191140l4b55356oa2a54a80a250ed4d@mail.gmail.com>
From: "Hartrich, James CTR USTRANSCOM J6" <James.Hartrich.ctr@ustranscom.mil>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 19 Dec 2007 20:09:22.0710 (UTC) FILETIME=[0BD6DB60:01C8427B]
X-USTRANSCOM-MailScanner-Information: Please contact the ISP for more information
X-USTRANSCOM-MailScanner: Found to be clean
X-USTRANSCOM-MailScanner-SpamCheck: not spam (whitelisted),
	SpamAssassin (not cached, score=-2, required 5, autolearn=not spam,
	BAYES_00 -2.00)
X-USTRANSCOM-MailScanner-From: james.hartrich.ctr@ustranscom.mil
X-USTRANSCOM-MailScanner-To: java-user@lucene.apache.org
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No

Excellent, I'm happy to see we're alive; look forward to some friendly
banter :)

-----Original Message-----
From: jpsondag@gmail.com [mailto:jpsondag@gmail.com] On Behalf Of John
Paul Sondag
Sent: Wednesday, December 19, 2007 1:40 PM
To: java-user@lucene.apache.org
Subject: Re: anyone

Yup

--JP

On Dec 19, 2007 1:14 PM, Michael McCandless <lucene@mikemccandless.com>
wrote:

>
> Yes.
>
> Mike
>
> Hartrich, James CTR USTRANSCOM J6 wrote:
>
> > Is this at least a semi-active list?
> >
> > James
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 21:14:35 2007
Return-Path: <java-user-return-31576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66414 invoked from network); 19 Dec 2007 21:14:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 21:14:34 -0000
Received: (qmail 45654 invoked by uid 500); 19 Dec 2007 21:14:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45625 invoked by uid 500); 19 Dec 2007 21:14:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45614 invoked by uid 99); 19 Dec 2007 21:14:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 13:14:17 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 209.85.134.188 as permitted sender)
Received: from [209.85.134.188] (HELO mu-out-0910.google.com) (209.85.134.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 21:13:55 +0000
Received: by mu-out-0910.google.com with SMTP id i10so4409450mue.5
        for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 13:13:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=KHoHJ2C8MayGvcLttQhsgzKM6kT+5z2W63QoU0gbZuU=;
        b=NH4PIXTxSWv+LbK5CFe1PNFdqQ84qZygs3ZxE4DXwLSJpIg5A8m3zsoPV6sVk0hRpk+rteBeO+NprGAMxtLY+0CYad/0UCazjdeQ+2m/Z5+SvtoIEBWTj6mGGKtluDJ7xi+dcqyampnWQLTYrgV263+OkHRcNowstUTES2vXXos=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=t1n9YJkiNZSjMnJsFELdPyMWua6JWONycaK3gakhOU4SiZYIRrgdarBiWXzYJFRKN7IM9STdSi4Xk3VpunMX7YKhTZeDD4ZzGlMfFAgAFvHb4qAIwEt3k/8XSscwyO1mbS68zij0/grcBjzlBwEovXMkoOf1VBVfbjCApv/x2IE=
Received: by 10.86.79.19 with SMTP id c19mr9329757fgb.31.1198098836738;
        Wed, 19 Dec 2007 13:13:56 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Wed, 19 Dec 2007 13:13:56 -0800 (PST)
Message-ID: <e05f0fd10712191313n2c9757a8o4b7f8629ee12fbfb@mail.gmail.com>
Date: Wed, 19 Dec 2007 23:13:56 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: document deletion problem
In-Reply-To: <855648.21601.qm@web83824.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4188_7042329.1198098836750"
References: <855648.21601.qm@web83824.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4188_7042329.1198098836750
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Dec 19, 2007 5:45 PM, Tushar B <snowhow@sbcglobal.net> wrote:

> Hi Doron,
>
> I was just playing around with deletion because I wanted to delete
> documents due to spurious entries in one particular field. Could you tell me
> how do I file a JIRA issue?
>

See Lucene's wiki, at page "HowToContribute".


>
> The two workarounds I was using are neither great in perfromance. Provided
> here just FYI:
>
> 1) Have the "for" loop in a "do while" loop, Handle the Array...Exception,
> resubmit query
> 2) Use HitCollector (as also suggested by you)


The HitCollector should  work reasonably - can you tell us how many docs did
you delete, from how big an index, with what query, and how long did it
take?


>
> thanks
>

------=_Part_4188_7042329.1198098836750--

From java-user-return-31577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 22:07:54 2007
Return-Path: <java-user-return-31577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88438 invoked from network); 19 Dec 2007 22:07:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 22:07:54 -0000
Received: (qmail 13380 invoked by uid 500); 19 Dec 2007 22:07:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12848 invoked by uid 500); 19 Dec 2007 22:07:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12837 invoked by uid 99); 19 Dec 2007 22:07:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 14:07:36 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [142.58.101.21] (HELO rm-rstar.sfu.ca) (142.58.101.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 22:07:11 +0000
Received: from BaljeetPC (d142-058-189-048.surrey.sfu.ca [142.58.189.48])
	by rm-rstar.sfu.ca (8.13.6/8.13.4/SFU-5.0H) with ESMTP id lBJM7EwZ001736
	for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 14:07:14 -0800 (PST)
X-Spam-Level: Spam-Level 
From: "Baljeet Dhaliwal" <bsd@sfu.ca>
To: <java-user@lucene.apache.org>
Subject: Problem with Escape characters in lucene demo search
Date: Wed, 19 Dec 2007 14:07:10 -0800
Message-ID: <00e801c8428b$807d93e0$8178bba0$@ca>
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00E9_01C84248.725A53E0"
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AchCi4BGPheNvb+QRZeqnvxfqkLjyg==
Content-Language: en-ca
X-Virus-Checked: Checked by ClamAV on apache.org

------=_NextPart_000_00E9_01C84248.725A53E0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi there

 

I am having a problem in using escape characters with lucene demo code. I
used the following code for IndexFiles and SearchFiles. The code works fine
for regular searching and also with wildcard. However, when I try to use
escape characters, somehow it strips them off. For example: when i search
for  "login" through "\"login\"" or for that matter try to use any escape
character, lucene strips the escape characters and looks for the text only
(login as against "login")

 

Can someone help please.

 

Cheers

B

 

 

IndexFiles.java

 

package org.apache.lucene.demo;

 

/**

 * Licensed to the Apache Software Foundation (ASF) under one or more

 * contributor license agreements.  See the NOTICE file distributed with

 * this work for additional information regarding copyright ownership.

 * The ASF licenses this file to You under the Apache License, Version 2.0

 * (the "License"); you may not use this file except in compliance with

 * the License.  You may obtain a copy of the License at

 *

 *     http://www.apache.org/licenses/LICENSE-2.0

 *

 * Unless required by applicable law or agreed to in writing, software

 * distributed under the License is distributed on an "AS IS" BASIS,

 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.

 * See the License for the specific language governing permissions and

 * limitations under the License.

 */

 

import org.apache.lucene.analysis.standard.StandardAnalyzer;

import org.apache.lucene.document.Document;

import org.apache.lucene.index.IndexWriter;

 

import java.io.BufferedReader;

import java.io.File;

import java.io.FileNotFoundException;

import java.io.IOException;

import java.io.InputStreamReader;

import java.util.Date;

 

/** Index all text files under a directory. */

public class IndexFiles {

  

  private IndexFiles() {}

 

  static final File INDEX_DIR = new File("index");

  

  /** Index all text files under a directory. */

  public static void main(String[] args) {

    String usage = "java org.apache.lucene.demo.IndexFiles
<root_directory>";

    /*if (args.length == 0) {

      System.err.println("Usage: " + usage);

      System.exit(1);

    }*/

 

    /*if (INDEX_DIR.exists()) {

      System.out.println("Cannot save index to '" +INDEX_DIR+ "' directory,
please delete it first");

      System.exit(1);

    }*/

    

    //final File docDir = new File(args[0]);

    //File docDir = new File(args[0]);

    File docDir = new File("F:/bsd-logs/logs");

    if (!docDir.exists() || !docDir.canRead()) {

      System.out.println("Document directory '" +docDir.getAbsolutePath()+
"' does not exist or is not readable, please check the path");

      System.exit(1);

    }

    

    Date start = new Date();

    try {

      System.out.println("Indexing to directory '" +INDEX_DIR+ "'...");

      BufferedReader in = null;

      int i = 0;

      while (i==0){

          IndexWriter writer = new IndexWriter(INDEX_DIR, new
StandardAnalyzer(), true);

 

                      indexDocs(writer, docDir);

                      System.out.println("Optimizing...");

                      writer.optimize();

                      in = new BufferedReader(new
InputStreamReader(System.in, "UTF-8"));

                      i=1;

                      /*System.out.println("Enter another directory: ");

 

                        docDir = new File(in.readLine());

                        writer.close();

                        String args1[] =
{"\\users\\baljeet\\documents\\rees\\programs\\
<file:///\\users\baljeet\documents\rees\programs\> "};

                        DeleteFiles.main(args1);*/

     }

      

      

 

      Date end = new Date();

      System.out.println(end.getTime() - start.getTime() + " total
milliseconds");

 

    } catch (IOException e) {

      System.out.println(" caught a " + e.getClass() +

       "\n with message: " + e.getMessage());

    }

  }

 

  static void indexDocs(IndexWriter writer, File file)

    throws IOException {

    // do not try to index files that cannot be read

    if (file.canRead()) {

      if (file.isDirectory()) {

        String[] files = file.list();

        // an IO error could occur

        if (files != null) {

          for (int i = 0; i < files.length; i++) {

            indexDocs(writer, new File(file, files[i]));

          }

        }

      } else {

        System.out.println("adding " + file);

        try {

                Document doc = FileDocument.Document(file);

                System.out.println("Path = "+doc.getField("path"));

          writer.addDocument(FileDocument.Document(file));

          

        }

        // at least on windows, some temporary files raise this exception
with an "access denied" message

        // checking if the file can be read doesn't help

        catch (FileNotFoundException fnfe) {

          ;

        }

      }

    }

  }

  

}

 

 

 

SearchFiles.java

 

 

package org.apache.lucene.demo;

 

/**

 * Licensed to the Apache Software Foundation (ASF) under one or more

 * contributor license agreements.  See the NOTICE file distributed with

 * this work for additional information regarding copyright ownership.

 * The ASF licenses this file to You under the Apache License, Version 2.0

 * (the "License"); you may not use this file except in compliance with

 * the License.  You may obtain a copy of the License at

 *

 *     http://www.apache.org/licenses/LICENSE-2.0

 *

 * Unless required by applicable law or agreed to in writing, software

 * distributed under the License is distributed on an "AS IS" BASIS,

 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.

 * See the License for the specific language governing permissions and

 * limitations under the License.

 */

 

import org.apache.lucene.analysis.Analyzer;

import org.apache.lucene.analysis.standard.StandardAnalyzer;

import org.apache.lucene.document.Document;

import org.apache.lucene.index.FilterIndexReader;

import org.apache.lucene.index.IndexReader;

import org.apache.lucene.queryParser.QueryParser;

import org.apache.lucene.search.Hits;

import org.apache.lucene.search.IndexSearcher;

import org.apache.lucene.search.Query;

import org.apache.lucene.search.Searcher;

 

import java.io.BufferedReader;

import java.io.FileReader;

import java.io.IOException;

import java.io.InputStreamReader;

import java.util.Collection;

import java.util.Date;

import java.util.Hashtable;

import java.util.Iterator;

 

/** Simple command-line based search demo. */

public class SearchFiles {

 

  /** Use the norms from one field for all fields.  Norms are read into
memory,

   * using a byte of memory per document per searched field.  This can cause

   * search of large collections with a large number of fields to run out of

   * memory.  If all of the fields contain only a single token, then the
norms

   * are all identical, then single norm vector may be shared. */

  public static class OneNormsReader extends FilterIndexReader {

    private String field;

 

    public OneNormsReader(IndexReader in, String field) {

      super(in);

      this.field = field;

    }

 

    public byte[] norms(String field) throws IOException {

      return in.norms(this.field);

    }

  }

 

  private SearchFiles() {}

 

  /** Simple command-line based search demo. */

  public static void main(String[] args) throws Exception {

    String usage =

      "Usage: java org.apache.lucene.demo.SearchFiles [-index dir] [-field
f] [-repeat n] [-queries file] [-raw] [-norms field]";

    if (args.length > 0 && ("-h".equals(args[0]) ||
"-help".equals(args[0]))) {

      System.out.println(usage);

      System.exit(0);

    }

 

    String index = "index";

    String field = "contents";

    String queries = null;

    int repeat = 0;

    boolean raw = false;

    String normsField = null;

    

    for (int i = 0; i < args.length; i++) {

      if ("-index".equals(args[i])) {

        index = args[i+1];

        i++;

      } else if ("-field".equals(args[i])) {

        field = args[i+1];

        i++;

      } else if ("-queries".equals(args[i])) {

        queries = args[i+1];

        i++;

      } else if ("-repeat".equals(args[i])) {

        repeat = Integer.parseInt(args[i+1]);

        i++;

      } else if ("-raw".equals(args[i])) {

        raw = true;

      } else if ("-norms".equals(args[i])) {

        normsField = args[i+1];

        i++;

      }

    }

    

    IndexReader reader = IndexReader.open(index);

 

    if (normsField != null)

      reader = new OneNormsReader(reader, normsField);

    

    Collection<String> h =
reader.getFieldNames(IndexReader.FieldOption.INDEXED);

    Iterator<String> it = h.iterator();

    while (it.hasNext()){

                System.out.println("Iterator Value = "+it.next());

                

    }

    

    

 

    Searcher searcher = new IndexSearcher(reader);

    Analyzer analyzer = new StandardAnalyzer();

 

    BufferedReader in = null;

    if (queries != null) {

      in = new BufferedReader(new FileReader(queries));

    } else {

      in = new BufferedReader(new InputStreamReader(System.in, "UTF-8"));

    }

      QueryParser parser = new QueryParser(field, analyzer);

    while (true) {

      if (queries == null)                        // prompt the user

        System.out.println("Enter query: ");

 

      String line = in.readLine();

 

      if (line == null || line.length() == -1)

        break;

 

      line = line.trim();

      if (line.length() == 0)

        break;

      System.out.println("line 1= "+line);

     // line = QueryParser.escape(line);

      System.out.println("line 2= "+line);

      Query query = parser.parse(line);

      

      System.out.println("Searching for: " + query.toString(field));

 

      Hits hits = searcher.search(query);

      

      

      if (repeat > 0) {                           // repeat & time as
benchmark

        Date start = new Date();

        for (int i = 0; i < repeat; i++) {

          hits = searcher.search(query);

        }

        Date end = new Date();

        System.out.println("Time: "+(end.getTime()-start.getTime())+"ms");

      }

      

 

      System.out.println(hits.length() + " total matching documents");

 

      final int HITS_PER_PAGE = 10;

      for (int start = 0; start < hits.length(); start += HITS_PER_PAGE) {

        int end = Math.min(hits.length(), start + HITS_PER_PAGE);

        for (int i = start; i < end; i++) {

 

          if (raw) {                              // output raw format

            System.out.println("doc="+hits.id(i)+" score="+hits.score(i));

            continue;

          }

 

          Document doc = hits.doc(i);

          String path = doc.get("path");

          if (path != null) {

            System.out.println((i+1) + ". " + path);

            //getSearchedLine(path, "kvoll");

            String title = doc.get("title");

            if (title != null) {

              System.out.println("   Title: " + doc.get("title"));

            }

          } else {

            System.out.println((i+1) + ". " + "No path for this document");

          }

        }

 

        if (queries != null)                      // non-interactive

          break;

        

        if (hits.length() > end) {

          System.out.println("more (y/n) ? ");

          line = in.readLine();

          if (line.length() == 0 || line.charAt(0) == 'n')

            break;

        }

      }

    }

    reader.close();

  }

}

 


------=_NextPart_000_00E9_01C84248.725A53E0--


From java-user-return-31578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 19 22:34:18 2007
Return-Path: <java-user-return-31578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97622 invoked from network); 19 Dec 2007 22:34:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 19 Dec 2007 22:34:17 -0000
Received: (qmail 43493 invoked by uid 500); 19 Dec 2007 22:33:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43456 invoked by uid 500); 19 Dec 2007 22:33:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43444 invoked by uid 99); 19 Dec 2007 22:33:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 14:33:59 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [216.40.44.17] (HELO smtprelay.hostedemail.com) (216.40.44.17)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 22:33:37 +0000
Received: from emd2-omf02.hostedemail.com (ff-bigip1 [10.5.19.254])
	by smtprelay02.hostedemail.com (Postfix) with ESMTP id 60871AFB18
	for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 22:33:38 +0000 (UTC)
X-SpamScore: 2
X-Spamcatcher-Summary: 2,0,0,a864123eeeed846b,22bc02291a0823c3,marc@weeber.net,-,RULES_HIT:355:379:541:564:945:969:973:988:989:1260:1261:1277:1311:1313:1314:1345:1437:1515:1516:1518:1534:1542:1593:1594:1711:1730:1747:1766:1792:2194:2195:2198:2199:2200:2201:2378:2393:2559:2562:2731:2892:3354:3622:3740:3865:3866:3867:3868:3869:3870:3871:3872:3873:3874:4043:4250:4321:4362:4605:5007:7652:7774,0,RBL:none,CacheIP:none,Bayesian:0.5,0.5,0.5,Netcheck:none,DomainCache:0,MSF:not bulk,SPF:
	,MSBL:none,DNSBL:none
X-Spamcatcher-Explanation: 
Received: from [10.0.1.193] (cc1205628-a.groni1.gr.home.nl [82.73.148.199])
	(Authenticated sender: marc@weeber.net)
	by emd2-omf02.hostedemail.com (Postfix) with ESMTP
	for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 22:33:38 +0000 (UTC)
Message-Id: <AF9FA4D8-A48D-40DA-9356-3537F6DAAD34@weeber.net>
From: Marc Weeber <marc@weeber.net>
To: java-user@lucene.apache.org
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Sorting, Caching, and garbage collection
Date: Wed, 19 Dec 2007 23:33:37 +0100
References: <E4CF543A-FB59-4DEA-8A2A-89F4B1B3ECDF@weeber.net>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Dear all,

I have been using PyLucene for some time now (really loving it,  
actually), and I have now encountered an intriguing situation. I have  
a large inde file, 17Gb, 50M documents. I want to look for  
cooccurrences for terms in a certain field (a boolean query), and rank  
order the results on another field (date). In some situations this  
works like a charm. Sure, the sort needs lots of memory (around 500M),  
but once that's up and running, sorted queries are really fast. In  
other situations, however, memory use explodes. This occurs for a  
range of java and lucene versions

Let me show the python code (should be readable by all of you Java  
people):

===================
stable memory use code
===================

# initialize things
storeDir = 'LuceneData/PubmedSentenceIndex/'
store = lucene.FSDirectory.getDirectory(storeDir, False)
searcher = lucene.IndexSearcher(store)
sortObject = lucene.Sort('date', False)

# six example query term for cooccurrences
concepts = [
               ["umls/C0086418", "umls/C0003062"],
               ["umls/C0086418", "umls/C0870071"],
               ["umls/C0870071", "umls/C0003062"],
               ["umls/C0870071", "umls/C0449445"],
               ["umls/C0086418", "umls/C0449445"],
               ["umls/C0003062", "umls/C0449445"],
       ]

for cui1, cui2 in concepts:
       q = lucene.BooleanQuery()
       q.add(lucene.TermQuery(lucene.Term('profile', cui1)),  
lucene.BooleanClause.Occur.MUST)
       q.add(lucene.TermQuery(lucene.Term('profile', cui2)),  
lucene.BooleanClause.Occur.MUST)

       hits = searcher.search(q, sortObject)

=======

in the code above, the major objects are created before entering the  
loop. In the loop, the query is generated, and searcher executes the  
query, wit the addition of the sort object. After the first search,  
memory use is about 500M, and remains stable during all other loops

However, if I create the searcher object EACH time in the loop, (for  
instance, just before the actual search is done), each search adds  
300M to the memeory useage of the search. It seems that the garbage  
collection does not really work. I tried to invoke both the python  
(gc.collect()) and the java (lucene.System.gc()) garbage collector,  
but there is no such luck. adding sleep times, for instance, does not  
work either.

Does anyone of you have an inkling what is going on here?

Thanks in advance for any information,

best,

Marc







---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 00:41:45 2007
Return-Path: <java-user-return-31579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55057 invoked from network); 20 Dec 2007 00:41:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 00:41:45 -0000
Received: (qmail 49053 invoked by uid 500); 20 Dec 2007 00:41:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49014 invoked by uid 500); 20 Dec 2007 00:41:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49003 invoked by uid 99); 20 Dec 2007 00:41:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 16:41:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 00:41:02 +0000
Received: by fk-out-0910.google.com with SMTP id z23so2919657fkz.5
        for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 16:41:05 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=PiBgtIuKNWqUJ1MU4PuxOp5PM/f4ryfjEKX3PNQzuK4=;
        b=sBL972Np7ooh0CiJyz36HRqNLXeYuGPRHhCLFaRczSJRkEP+9qOeGvaPpatyGT71x8HWhcw9HhxlTKLpJolF9JjACsIM2RQfzkJxzNvmPscUtaL3l6lKXhpA//RDeKcCqwh+uWGxrjkkA+xlJyHWRg1gFSdXgVO7LfSXf54TSNk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Pvae+kAZ2XBjwJCVX9H2Dt1Z2Gg0HtaXRCeU+pPAZD87B9clXSUzuCfdxp/3L+EaXutChPw9fBeX++1PUOLXF4I5ii6wyMWOh06vIPb27zVWqfvGfC3A2TTv9AqwKM5vfrf7cMVTHPh2Gk99TEoebON5ovGvgswB9E58iVJ6lxs=
Received: by 10.82.171.16 with SMTP id t16mr10020549bue.11.1198111264431;
        Wed, 19 Dec 2007 16:41:04 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Wed, 19 Dec 2007 16:41:04 -0800 (PST)
Message-ID: <359a92830712191641g1c1983c6r2c1fc471a4b5247f@mail.gmail.com>
Date: Wed, 19 Dec 2007 19:41:04 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with Escape characters in lucene demo search
In-Reply-To: <00e801c8428b$807d93e0$8178bba0$@ca>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19278_19215208.1198111264423"
References: <00e801c8428b$807d93e0$8178bba0$@ca>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19278_19215208.1198111264423
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm pretty sure StandardAnalyzer is stripping these off. Have you looked
in your index to see if "longin" (with quotes) is even in there? I think
you'll find that it's not.

Best
Erick

On Dec 19, 2007 5:07 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:

> Hi there
>
>
>
> I am having a problem in using escape characters with lucene demo code. I
> used the following code for IndexFiles and SearchFiles. The code works
> fine
> for regular searching and also with wildcard. However, when I try to use
> escape characters, somehow it strips them off. For example: when i search
> for  "login" through "\"login\"" or for that matter try to use any escape
> character, lucene strips the escape characters and looks for the text only
> (login as against "login")
>
>
>
> Can someone help please.
>
>
>
> Cheers
>
> B
>
>
>
>
>
> IndexFiles.java
>
>
>
> package org.apache.lucene.demo;
>
>
>
> /**
>
>  * Licensed to the Apache Software Foundation (ASF) under one or more
>
>  * contributor license agreements.  See the NOTICE file distributed with
>
>  * this work for additional information regarding copyright ownership.
>
>  * The ASF licenses this file to You under the Apache License, Version 2.0
>
>  * (the "License"); you may not use this file except in compliance with
>
>  * the License.  You may obtain a copy of the License at
>
>  *
>
>  *     http://www.apache.org/licenses/LICENSE-2.0
>
>  *
>
>  * Unless required by applicable law or agreed to in writing, software
>
>  * distributed under the License is distributed on an "AS IS" BASIS,
>
>  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> implied.
>
>  * See the License for the specific language governing permissions and
>
>  * limitations under the License.
>
>  */
>
>
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>
> import org.apache.lucene.document.Document;
>
> import org.apache.lucene.index.IndexWriter;
>
>
>
> import java.io.BufferedReader;
>
> import java.io.File;
>
> import java.io.FileNotFoundException;
>
> import java.io.IOException;
>
> import java.io.InputStreamReader;
>
> import java.util.Date;
>
>
>
> /** Index all text files under a directory. */
>
> public class IndexFiles {
>
>
>
>  private IndexFiles() {}
>
>
>
>  static final File INDEX_DIR = new File("index");
>
>
>
>  /** Index all text files under a directory. */
>
>  public static void main(String[] args) {
>
>    String usage = "java org.apache.lucene.demo.IndexFiles
> <root_directory>";
>
>    /*if (args.length == 0) {
>
>      System.err.println("Usage: " + usage);
>
>      System.exit(1);
>
>    }*/
>
>
>
>    /*if (INDEX_DIR.exists()) {
>
>      System.out.println("Cannot save index to '" +INDEX_DIR+ "' directory,
> please delete it first");
>
>      System.exit(1);
>
>    }*/
>
>
>
>    //final File docDir = new File(args[0]);
>
>    //File docDir = new File(args[0]);
>
>    File docDir = new File("F:/bsd-logs/logs");
>
>    if (!docDir.exists() || !docDir.canRead()) {
>
>      System.out.println("Document directory '" +docDir.getAbsolutePath()+
> "' does not exist or is not readable, please check the path");
>
>      System.exit(1);
>
>    }
>
>
>
>    Date start = new Date();
>
>    try {
>
>      System.out.println("Indexing to directory '" +INDEX_DIR+ "'...");
>
>      BufferedReader in = null;
>
>      int i = 0;
>
>      while (i==0){
>
>          IndexWriter writer = new IndexWriter(INDEX_DIR, new
> StandardAnalyzer(), true);
>
>
>
>                      indexDocs(writer, docDir);
>
>                      System.out.println("Optimizing...");
>
>                      writer.optimize();
>
>                      in = new BufferedReader(new
> InputStreamReader(System.in, "UTF-8"));
>
>                      i=1;
>
>                      /*System.out.println("Enter another directory: ");
>
>
>
>                        docDir = new File(in.readLine());
>
>                        writer.close();
>
>                        String args1[] =
> {"\\users\\baljeet\\documents\\rees\\programs\\
> <file:///\\users\baljeet\documents\rees\programs\> "};
>
>                        DeleteFiles.main(args1);*/
>
>     }
>
>
>
>
>
>
>
>      Date end = new Date();
>
>      System.out.println(end.getTime() - start.getTime() + " total
> milliseconds");
>
>
>
>    } catch (IOException e) {
>
>      System.out.println(" caught a " + e.getClass() +
>
>       "\n with message: " + e.getMessage());
>
>    }
>
>  }
>
>
>
>  static void indexDocs(IndexWriter writer, File file)
>
>    throws IOException {
>
>    // do not try to index files that cannot be read
>
>    if (file.canRead()) {
>
>      if (file.isDirectory()) {
>
>        String[] files = file.list();
>
>        // an IO error could occur
>
>        if (files != null) {
>
>          for (int i = 0; i < files.length; i++) {
>
>            indexDocs(writer, new File(file, files[i]));
>
>          }
>
>        }
>
>      } else {
>
>        System.out.println("adding " + file);
>
>        try {
>
>                Document doc = FileDocument.Document(file);
>
>                System.out.println("Path = "+doc.getField("path"));
>
>          writer.addDocument(FileDocument.Document(file));
>
>
>
>        }
>
>        // at least on windows, some temporary files raise this exception
> with an "access denied" message
>
>        // checking if the file can be read doesn't help
>
>        catch (FileNotFoundException fnfe) {
>
>          ;
>
>        }
>
>      }
>
>    }
>
>  }
>
>
>
> }
>
>
>
>
>
>
>
> SearchFiles.java
>
>
>
>
>
> package org.apache.lucene.demo;
>
>
>
> /**
>
>  * Licensed to the Apache Software Foundation (ASF) under one or more
>
>  * contributor license agreements.  See the NOTICE file distributed with
>
>  * this work for additional information regarding copyright ownership.
>
>  * The ASF licenses this file to You under the Apache License, Version 2.0
>
>  * (the "License"); you may not use this file except in compliance with
>
>  * the License.  You may obtain a copy of the License at
>
>  *
>
>  *     http://www.apache.org/licenses/LICENSE-2.0
>
>  *
>
>  * Unless required by applicable law or agreed to in writing, software
>
>  * distributed under the License is distributed on an "AS IS" BASIS,
>
>  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> implied.
>
>  * See the License for the specific language governing permissions and
>
>  * limitations under the License.
>
>  */
>
>
>
> import org.apache.lucene.analysis.Analyzer;
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>
> import org.apache.lucene.document.Document;
>
> import org.apache.lucene.index.FilterIndexReader;
>
> import org.apache.lucene.index.IndexReader;
>
> import org.apache.lucene.queryParser.QueryParser;
>
> import org.apache.lucene.search.Hits;
>
> import org.apache.lucene.search.IndexSearcher;
>
> import org.apache.lucene.search.Query;
>
> import org.apache.lucene.search.Searcher;
>
>
>
> import java.io.BufferedReader;
>
> import java.io.FileReader;
>
> import java.io.IOException;
>
> import java.io.InputStreamReader;
>
> import java.util.Collection;
>
> import java.util.Date;
>
> import java.util.Hashtable;
>
> import java.util.Iterator;
>
>
>
> /** Simple command-line based search demo. */
>
> public class SearchFiles {
>
>
>
>  /** Use the norms from one field for all fields.  Norms are read into
> memory,
>
>   * using a byte of memory per document per searched field.  This can
> cause
>
>   * search of large collections with a large number of fields to run out
> of
>
>   * memory.  If all of the fields contain only a single token, then the
> norms
>
>   * are all identical, then single norm vector may be shared. */
>
>  public static class OneNormsReader extends FilterIndexReader {
>
>    private String field;
>
>
>
>    public OneNormsReader(IndexReader in, String field) {
>
>      super(in);
>
>      this.field = field;
>
>    }
>
>
>
>    public byte[] norms(String field) throws IOException {
>
>      return in.norms(this.field);
>
>    }
>
>  }
>
>
>
>  private SearchFiles() {}
>
>
>
>  /** Simple command-line based search demo. */
>
>  public static void main(String[] args) throws Exception {
>
>    String usage =
>
>      "Usage: java org.apache.lucene.demo.SearchFiles [-index dir] [-field
> f] [-repeat n] [-queries file] [-raw] [-norms field]";
>
>    if (args.length > 0 && ("-h".equals(args[0]) ||
> "-help".equals(args[0]))) {
>
>      System.out.println(usage);
>
>      System.exit(0);
>
>    }
>
>
>
>    String index = "index";
>
>    String field = "contents";
>
>    String queries = null;
>
>    int repeat = 0;
>
>    boolean raw = false;
>
>    String normsField = null;
>
>
>
>    for (int i = 0; i < args.length; i++) {
>
>      if ("-index".equals(args[i])) {
>
>        index = args[i+1];
>
>        i++;
>
>      } else if ("-field".equals(args[i])) {
>
>        field = args[i+1];
>
>        i++;
>
>      } else if ("-queries".equals(args[i])) {
>
>        queries = args[i+1];
>
>        i++;
>
>      } else if ("-repeat".equals(args[i])) {
>
>        repeat = Integer.parseInt(args[i+1]);
>
>        i++;
>
>      } else if ("-raw".equals(args[i])) {
>
>        raw = true;
>
>      } else if ("-norms".equals(args[i])) {
>
>        normsField = args[i+1];
>
>        i++;
>
>      }
>
>    }
>
>
>
>    IndexReader reader = IndexReader.open(index);
>
>
>
>    if (normsField != null)
>
>      reader = new OneNormsReader(reader, normsField);
>
>
>
>    Collection<String> h =
> reader.getFieldNames(IndexReader.FieldOption.INDEXED);
>
>    Iterator<String> it = h.iterator();
>
>    while (it.hasNext()){
>
>                System.out.println("Iterator Value = "+it.next());
>
>
>
>    }
>
>
>
>
>
>
>
>    Searcher searcher = new IndexSearcher(reader);
>
>    Analyzer analyzer = new StandardAnalyzer();
>
>
>
>    BufferedReader in = null;
>
>    if (queries != null) {
>
>      in = new BufferedReader(new FileReader(queries));
>
>    } else {
>
>      in = new BufferedReader(new InputStreamReader(System.in, "UTF-8"));
>
>    }
>
>      QueryParser parser = new QueryParser(field, analyzer);
>
>    while (true) {
>
>      if (queries == null)                        // prompt the user
>
>        System.out.println("Enter query: ");
>
>
>
>      String line = in.readLine();
>
>
>
>      if (line == null || line.length() == -1)
>
>        break;
>
>
>
>      line = line.trim();
>
>      if (line.length() == 0)
>
>        break;
>
>      System.out.println("line 1= "+line);
>
>     // line = QueryParser.escape(line);
>
>      System.out.println("line 2= "+line);
>
>      Query query = parser.parse(line);
>
>
>
>      System.out.println("Searching for: " + query.toString(field));
>
>
>
>      Hits hits = searcher.search(query);
>
>
>
>
>
>      if (repeat > 0) {                           // repeat & time as
> benchmark
>
>        Date start = new Date();
>
>        for (int i = 0; i < repeat; i++) {
>
>          hits = searcher.search(query);
>
>        }
>
>        Date end = new Date();
>
>        System.out.println("Time: "+(end.getTime()-start.getTime())+"ms");
>
>      }
>
>
>
>
>
>      System.out.println(hits.length() + " total matching documents");
>
>
>
>      final int HITS_PER_PAGE = 10;
>
>      for (int start = 0; start < hits.length(); start += HITS_PER_PAGE) {
>
>        int end = Math.min(hits.length(), start + HITS_PER_PAGE);
>
>        for (int i = start; i < end; i++) {
>
>
>
>          if (raw) {                              // output raw format
>
>            System.out.println("doc="+hits.id(i)+" score="+hits.score(i));
>
>            continue;
>
>          }
>
>
>
>          Document doc = hits.doc(i);
>
>          String path = doc.get("path");
>
>          if (path != null) {
>
>            System.out.println((i+1) + ". " + path);
>
>            //getSearchedLine(path, "kvoll");
>
>            String title = doc.get("title");
>
>            if (title != null) {
>
>              System.out.println("   Title: " + doc.get("title"));
>
>            }
>
>          } else {
>
>            System.out.println((i+1) + ". " + "No path for this document");
>
>          }
>
>        }
>
>
>
>        if (queries != null)                      // non-interactive
>
>          break;
>
>
>
>        if (hits.length() > end) {
>
>          System.out.println("more (y/n) ? ");
>
>          line = in.readLine();
>
>          if (line.length() == 0 || line.charAt(0) == 'n')
>
>            break;
>
>        }
>
>      }
>
>    }
>
>    reader.close();
>
>  }
>
> }
>
>
>
>

------=_Part_19278_19215208.1198111264423--

From java-user-return-31580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 03:50:25 2007
Return-Path: <java-user-return-31580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14802 invoked from network); 20 Dec 2007 03:50:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 03:50:23 -0000
Received: (qmail 72445 invoked by uid 500); 20 Dec 2007 03:50:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71916 invoked by uid 500); 20 Dec 2007 03:50:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71905 invoked by uid 99); 20 Dec 2007 03:50:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 19:50:03 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [24.71.223.10] (HELO pd3mo3so.prod.shaw.ca) (24.71.223.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 03:49:39 +0000
Received: from pd4mr4so.prod.shaw.ca
 (pd4mr4so-qfe3.prod.shaw.ca [10.0.141.215]) by l-daemon
 (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0JTB00M0PX9GBYE0@l-daemon> for java-user@lucene.apache.org;
 Wed, 19 Dec 2007 20:48:52 -0700 (MST)
Received: from pn2ml10so.prod.shaw.ca ([10.0.121.80])
 by pd4mr4so.prod.shaw.ca (Sun Java System Messaging Server 6.2-7.05 (built Sep
 5 2006)) with ESMTP id <0JTB003VQX9DXK60@pd4mr4so.prod.shaw.ca> for
 java-user@lucene.apache.org; Wed, 19 Dec 2007 20:48:52 -0700 (MST)
Received: from BaljeetPC ([70.70.96.249])
 by l-daemon (Sun ONE Messaging Server 6.0 HotFix 1.01 (built Mar 15 2004))
 with ESMTP id <0JTB00BL3X9A4A30@l-daemon> for java-user@lucene.apache.org;
 Wed, 19 Dec 2007 20:48:48 -0700 (MST)
Date: Wed, 19 Dec 2007 19:48:43 -0800
From: Baljeet Dhaliwal <bsd@sfu.ca>
Subject: RE: Problem with Escape characters in lucene demo search
In-reply-to: <359a92830712191641g1c1983c6r2c1fc471a4b5247f@mail.gmail.com>
To: java-user@lucene.apache.org
Message-id: <012101c842bb$37584b30$a608e190$@ca>
MIME-version: 1.0
X-Mailer: Microsoft Office Outlook 12.0
Content-type: text/plain; charset=us-ascii
Content-language: en-ca
Content-transfer-encoding: 7bit
Thread-index: AchCoSNUnluUTYAGTH68cNFvmfYMowAGWrqg
References: <00e801c8428b$807d93e0$8178bba0$@ca>
 <359a92830712191641g1c1983c6r2c1fc471a4b5247f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

How do i check in my index. It looks like bytecode to me. My searched file
does contain word "login" with quotes.

B

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: December-19-07 4:41 PM
To: java-user@lucene.apache.org
Subject: Re: Problem with Escape characters in lucene demo search

I'm pretty sure StandardAnalyzer is stripping these off. Have you looked
in your index to see if "longin" (with quotes) is even in there? I think
you'll find that it's not.

Best
Erick

On Dec 19, 2007 5:07 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:

> Hi there
>
>
>
> I am having a problem in using escape characters with lucene demo code. I
> used the following code for IndexFiles and SearchFiles. The code works
> fine
> for regular searching and also with wildcard. However, when I try to use
> escape characters, somehow it strips them off. For example: when i search
> for  "login" through "\"login\"" or for that matter try to use any escape
> character, lucene strips the escape characters and looks for the text only
> (login as against "login")
>
>
>
> Can someone help please.
>
>
>
> Cheers
>
> B
>
>
>
>
>
> IndexFiles.java
>
>
>
> package org.apache.lucene.demo;
>
>
>
> /**
>
>  * Licensed to the Apache Software Foundation (ASF) under one or more
>
>  * contributor license agreements.  See the NOTICE file distributed with
>
>  * this work for additional information regarding copyright ownership.
>
>  * The ASF licenses this file to You under the Apache License, Version 2.0
>
>  * (the "License"); you may not use this file except in compliance with
>
>  * the License.  You may obtain a copy of the License at
>
>  *
>
>  *     http://www.apache.org/licenses/LICENSE-2.0
>
>  *
>
>  * Unless required by applicable law or agreed to in writing, software
>
>  * distributed under the License is distributed on an "AS IS" BASIS,
>
>  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> implied.
>
>  * See the License for the specific language governing permissions and
>
>  * limitations under the License.
>
>  */
>
>
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>
> import org.apache.lucene.document.Document;
>
> import org.apache.lucene.index.IndexWriter;
>
>
>
> import java.io.BufferedReader;
>
> import java.io.File;
>
> import java.io.FileNotFoundException;
>
> import java.io.IOException;
>
> import java.io.InputStreamReader;
>
> import java.util.Date;
>
>
>
> /** Index all text files under a directory. */
>
> public class IndexFiles {
>
>
>
>  private IndexFiles() {}
>
>
>
>  static final File INDEX_DIR = new File("index");
>
>
>
>  /** Index all text files under a directory. */
>
>  public static void main(String[] args) {
>
>    String usage = "java org.apache.lucene.demo.IndexFiles
> <root_directory>";
>
>    /*if (args.length == 0) {
>
>      System.err.println("Usage: " + usage);
>
>      System.exit(1);
>
>    }*/
>
>
>
>    /*if (INDEX_DIR.exists()) {
>
>      System.out.println("Cannot save index to '" +INDEX_DIR+ "' directory,
> please delete it first");
>
>      System.exit(1);
>
>    }*/
>
>
>
>    //final File docDir = new File(args[0]);
>
>    //File docDir = new File(args[0]);
>
>    File docDir = new File("F:/bsd-logs/logs");
>
>    if (!docDir.exists() || !docDir.canRead()) {
>
>      System.out.println("Document directory '" +docDir.getAbsolutePath()+
> "' does not exist or is not readable, please check the path");
>
>      System.exit(1);
>
>    }
>
>
>
>    Date start = new Date();
>
>    try {
>
>      System.out.println("Indexing to directory '" +INDEX_DIR+ "'...");
>
>      BufferedReader in = null;
>
>      int i = 0;
>
>      while (i==0){
>
>          IndexWriter writer = new IndexWriter(INDEX_DIR, new
> StandardAnalyzer(), true);
>
>
>
>                      indexDocs(writer, docDir);
>
>                      System.out.println("Optimizing...");
>
>                      writer.optimize();
>
>                      in = new BufferedReader(new
> InputStreamReader(System.in, "UTF-8"));
>
>                      i=1;
>
>                      /*System.out.println("Enter another directory: ");
>
>
>
>                        docDir = new File(in.readLine());
>
>                        writer.close();
>
>                        String args1[] =
> {"\\users\\baljeet\\documents\\rees\\programs\\
> <file:///\\users\baljeet\documents\rees\programs\> "};
>
>                        DeleteFiles.main(args1);*/
>
>     }
>
>
>
>
>
>
>
>      Date end = new Date();
>
>      System.out.println(end.getTime() - start.getTime() + " total
> milliseconds");
>
>
>
>    } catch (IOException e) {
>
>      System.out.println(" caught a " + e.getClass() +
>
>       "\n with message: " + e.getMessage());
>
>    }
>
>  }
>
>
>
>  static void indexDocs(IndexWriter writer, File file)
>
>    throws IOException {
>
>    // do not try to index files that cannot be read
>
>    if (file.canRead()) {
>
>      if (file.isDirectory()) {
>
>        String[] files = file.list();
>
>        // an IO error could occur
>
>        if (files != null) {
>
>          for (int i = 0; i < files.length; i++) {
>
>            indexDocs(writer, new File(file, files[i]));
>
>          }
>
>        }
>
>      } else {
>
>        System.out.println("adding " + file);
>
>        try {
>
>                Document doc = FileDocument.Document(file);
>
>                System.out.println("Path = "+doc.getField("path"));
>
>          writer.addDocument(FileDocument.Document(file));
>
>
>
>        }
>
>        // at least on windows, some temporary files raise this exception
> with an "access denied" message
>
>        // checking if the file can be read doesn't help
>
>        catch (FileNotFoundException fnfe) {
>
>          ;
>
>        }
>
>      }
>
>    }
>
>  }
>
>
>
> }
>
>
>
>
>
>
>
> SearchFiles.java
>
>
>
>
>
> package org.apache.lucene.demo;
>
>
>
> /**
>
>  * Licensed to the Apache Software Foundation (ASF) under one or more
>
>  * contributor license agreements.  See the NOTICE file distributed with
>
>  * this work for additional information regarding copyright ownership.
>
>  * The ASF licenses this file to You under the Apache License, Version 2.0
>
>  * (the "License"); you may not use this file except in compliance with
>
>  * the License.  You may obtain a copy of the License at
>
>  *
>
>  *     http://www.apache.org/licenses/LICENSE-2.0
>
>  *
>
>  * Unless required by applicable law or agreed to in writing, software
>
>  * distributed under the License is distributed on an "AS IS" BASIS,
>
>  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> implied.
>
>  * See the License for the specific language governing permissions and
>
>  * limitations under the License.
>
>  */
>
>
>
> import org.apache.lucene.analysis.Analyzer;
>
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>
> import org.apache.lucene.document.Document;
>
> import org.apache.lucene.index.FilterIndexReader;
>
> import org.apache.lucene.index.IndexReader;
>
> import org.apache.lucene.queryParser.QueryParser;
>
> import org.apache.lucene.search.Hits;
>
> import org.apache.lucene.search.IndexSearcher;
>
> import org.apache.lucene.search.Query;
>
> import org.apache.lucene.search.Searcher;
>
>
>
> import java.io.BufferedReader;
>
> import java.io.FileReader;
>
> import java.io.IOException;
>
> import java.io.InputStreamReader;
>
> import java.util.Collection;
>
> import java.util.Date;
>
> import java.util.Hashtable;
>
> import java.util.Iterator;
>
>
>
> /** Simple command-line based search demo. */
>
> public class SearchFiles {
>
>
>
>  /** Use the norms from one field for all fields.  Norms are read into
> memory,
>
>   * using a byte of memory per document per searched field.  This can
> cause
>
>   * search of large collections with a large number of fields to run out
> of
>
>   * memory.  If all of the fields contain only a single token, then the
> norms
>
>   * are all identical, then single norm vector may be shared. */
>
>  public static class OneNormsReader extends FilterIndexReader {
>
>    private String field;
>
>
>
>    public OneNormsReader(IndexReader in, String field) {
>
>      super(in);
>
>      this.field = field;
>
>    }
>
>
>
>    public byte[] norms(String field) throws IOException {
>
>      return in.norms(this.field);
>
>    }
>
>  }
>
>
>
>  private SearchFiles() {}
>
>
>
>  /** Simple command-line based search demo. */
>
>  public static void main(String[] args) throws Exception {
>
>    String usage =
>
>      "Usage: java org.apache.lucene.demo.SearchFiles [-index dir] [-field
> f] [-repeat n] [-queries file] [-raw] [-norms field]";
>
>    if (args.length > 0 && ("-h".equals(args[0]) ||
> "-help".equals(args[0]))) {
>
>      System.out.println(usage);
>
>      System.exit(0);
>
>    }
>
>
>
>    String index = "index";
>
>    String field = "contents";
>
>    String queries = null;
>
>    int repeat = 0;
>
>    boolean raw = false;
>
>    String normsField = null;
>
>
>
>    for (int i = 0; i < args.length; i++) {
>
>      if ("-index".equals(args[i])) {
>
>        index = args[i+1];
>
>        i++;
>
>      } else if ("-field".equals(args[i])) {
>
>        field = args[i+1];
>
>        i++;
>
>      } else if ("-queries".equals(args[i])) {
>
>        queries = args[i+1];
>
>        i++;
>
>      } else if ("-repeat".equals(args[i])) {
>
>        repeat = Integer.parseInt(args[i+1]);
>
>        i++;
>
>      } else if ("-raw".equals(args[i])) {
>
>        raw = true;
>
>      } else if ("-norms".equals(args[i])) {
>
>        normsField = args[i+1];
>
>        i++;
>
>      }
>
>    }
>
>
>
>    IndexReader reader = IndexReader.open(index);
>
>
>
>    if (normsField != null)
>
>      reader = new OneNormsReader(reader, normsField);
>
>
>
>    Collection<String> h =
> reader.getFieldNames(IndexReader.FieldOption.INDEXED);
>
>    Iterator<String> it = h.iterator();
>
>    while (it.hasNext()){
>
>                System.out.println("Iterator Value = "+it.next());
>
>
>
>    }
>
>
>
>
>
>
>
>    Searcher searcher = new IndexSearcher(reader);
>
>    Analyzer analyzer = new StandardAnalyzer();
>
>
>
>    BufferedReader in = null;
>
>    if (queries != null) {
>
>      in = new BufferedReader(new FileReader(queries));
>
>    } else {
>
>      in = new BufferedReader(new InputStreamReader(System.in, "UTF-8"));
>
>    }
>
>      QueryParser parser = new QueryParser(field, analyzer);
>
>    while (true) {
>
>      if (queries == null)                        // prompt the user
>
>        System.out.println("Enter query: ");
>
>
>
>      String line = in.readLine();
>
>
>
>      if (line == null || line.length() == -1)
>
>        break;
>
>
>
>      line = line.trim();
>
>      if (line.length() == 0)
>
>        break;
>
>      System.out.println("line 1= "+line);
>
>     // line = QueryParser.escape(line);
>
>      System.out.println("line 2= "+line);
>
>      Query query = parser.parse(line);
>
>
>
>      System.out.println("Searching for: " + query.toString(field));
>
>
>
>      Hits hits = searcher.search(query);
>
>
>
>
>
>      if (repeat > 0) {                           // repeat & time as
> benchmark
>
>        Date start = new Date();
>
>        for (int i = 0; i < repeat; i++) {
>
>          hits = searcher.search(query);
>
>        }
>
>        Date end = new Date();
>
>        System.out.println("Time: "+(end.getTime()-start.getTime())+"ms");
>
>      }
>
>
>
>
>
>      System.out.println(hits.length() + " total matching documents");
>
>
>
>      final int HITS_PER_PAGE = 10;
>
>      for (int start = 0; start < hits.length(); start += HITS_PER_PAGE) {
>
>        int end = Math.min(hits.length(), start + HITS_PER_PAGE);
>
>        for (int i = start; i < end; i++) {
>
>
>
>          if (raw) {                              // output raw format
>
>            System.out.println("doc="+hits.id(i)+" score="+hits.score(i));
>
>            continue;
>
>          }
>
>
>
>          Document doc = hits.doc(i);
>
>          String path = doc.get("path");
>
>          if (path != null) {
>
>            System.out.println((i+1) + ". " + path);
>
>            //getSearchedLine(path, "kvoll");
>
>            String title = doc.get("title");
>
>            if (title != null) {
>
>              System.out.println("   Title: " + doc.get("title"));
>
>            }
>
>          } else {
>
>            System.out.println((i+1) + ". " + "No path for this document");
>
>          }
>
>        }
>
>
>
>        if (queries != null)                      // non-interactive
>
>          break;
>
>
>
>        if (hits.length() > end) {
>
>          System.out.println("more (y/n) ? ");
>
>          line = in.readLine();
>
>          if (line.length() == 0 || line.charAt(0) == 'n')
>
>            break;
>
>        }
>
>      }
>
>    }
>
>    reader.close();
>
>  }
>
> }
>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 05:24:00 2007
Return-Path: <java-user-return-31581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40698 invoked from network); 20 Dec 2007 05:24:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 05:24:00 -0000
Received: (qmail 28911 invoked by uid 500); 20 Dec 2007 05:23:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28877 invoked by uid 500); 20 Dec 2007 05:23:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28866 invoked by uid 99); 20 Dec 2007 05:23:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 21:23:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 72.14.214.225 as permitted sender)
Received: from [72.14.214.225] (HELO hu-out-0506.google.com) (72.14.214.225)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 05:23:21 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1175284hub.15
        for <java-user@lucene.apache.org>; Wed, 19 Dec 2007 21:23:23 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=IJs5HspQrRouAyjcMcU+7Ki4PH57Vnqe9mWzo2bxfVE=;
        b=YOPBwAQzXlr9wHU8UTl5+1w5KPoFzf3yeALaT/lAYvszyQwXUEKNM3DngrcV6VlL+sNTJRGGwbN89BZzpivyRBGs3kGy6AsQ69y24bzaXkDJ87gE8oIX/g+46jw3swvNAwQ9+9zvQirksNNpQkmBHN9nZWGtnpfwU5bHq7X0qrI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mU5GLYg3Cq+NqkMaiAqiTd6Ma4t2MspN7sQTCBy2FROBLRzuFxlDDzltb5RqNT9RWgUApHFstYuJrRaTeOjfNgz+hwjG6uGvdj9oPyXgydIRfRM5dfqNiNlQr+v8vdzW+b/frR5mbY8NYTvr8TLcm/7EGCeuUUUB1jnOekuSCIg=
Received: by 10.78.168.1 with SMTP id q1mr13366028hue.71.1198128203593;
        Wed, 19 Dec 2007 21:23:23 -0800 (PST)
Received: by 10.78.172.17 with HTTP; Wed, 19 Dec 2007 21:23:23 -0800 (PST)
Message-ID: <295da8fe0712192123l738340d9q74d92faf04940ef1@mail.gmail.com>
Date: Thu, 20 Dec 2007 10:53:23 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Giving boost to a more recent item whiule searching
In-Reply-To: <359a92830712190823h5fefffe8ud43e184d7d003aa2@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_13741_8893382.1198128203586"
References: <295da8fe0712190150j4e7b8532k426319d94eb315f3@mail.gmail.com>
	 <359a92830712190823h5fefffe8ud43e184d7d003aa2@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_13741_8893382.1198128203586
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Erick,
  Thanks for your response.  I have tried searching the archive. I could not
find andy relevant thread. that's why i posted the question here. May be I
am not using the right keywords. If you know any archive link which deals
with this problem please send me.
    I have seen the case study about theServerSide in the book "Lucene in
Action". But there also they haven't given how date boosting can be
implemented.

Prabin



On Dec 19, 2007 9:53 PM, Erick Erickson <erickerickson@gmail.com> wrote:

> If you search the mail archives, you'll see this topic
> discussed at some length. That'll give you a much faster
> answer...
>
> See http://wiki.apache.org/lucene-java/MailingListArchives
>
> On Dec 19, 2007 4:50 AM, prabin meitei <prabin.meitei@gmail.com> wrote:
>
> > Hi,
> >   I am trying to retreive documents from an index. Each document has a
> > date
> > field and other fields.
> > while  making a seach i want to give some extra boost to the more recent
> > items (as per the date field)
> > How can I go about it?
> >
> > Thanks in advance
> >
> > Prabin
> >
>

------=_Part_13741_8893382.1198128203586--

From java-user-return-31582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 06:31:58 2007
Return-Path: <java-user-return-31582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92954 invoked from network); 20 Dec 2007 06:31:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 06:31:58 -0000
Received: (qmail 80689 invoked by uid 500); 20 Dec 2007 06:31:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80666 invoked by uid 500); 20 Dec 2007 06:31:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80655 invoked by uid 99); 20 Dec 2007 06:31:41 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 19 Dec 2007 22:31:41 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [69.147.85.95] (HELO web83816.mail.sp1.yahoo.com) (69.147.85.95)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 20 Dec 2007 06:31:18 +0000
Received: (qmail 50393 invoked by uid 60001); 20 Dec 2007 06:31:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=sbcglobal.net;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Message-ID;
  b=0kLD9v6aVc6yYB8Y+/5/TIKxvaYx+1IJVypdPGzp4S5TN2QC9c7PKd8RM856oXCm5/jPINOFYXnR9779YVUVaum4pPbPY1r/7Qdu7qZsDTNMSbSbF/0IZCPSLGzhKrf94Ra1n4xUJTzSi4L3gkpGpdPQJW4IKVr4W8XUl+o5BDw=;
X-YMail-OSG: l6fDE4UVM1nAPS5KgIcSqwGhF6yPDCUNCcCvWlekiPwXiyBq
Received: from [63.82.71.142] by web83816.mail.sp1.yahoo.com via HTTP; Wed, 19 Dec 2007 22:31:19 PST
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Wed, 19 Dec 2007 22:31:19 -0800 (PST)
From: Tushar B <snowhow@sbcglobal.net>
Subject: Re: document deletion problem
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Message-ID: <454035.50386.qm@web83816.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Doron,

Just filed an issue in JIRA.

Here are the requested stats:
Index size-> around 11 million documents 
Query      -> fieldname:[009 TO 999] (using CSRQ)
Result      -> 11475 documents
Delete      -> All the returned documents (11475)

I can get the time statistics for you if that helps.

And, btw, I can still see the terms from the deleted documents when I do the top terms etc... when will they be gone?

thanks

----- Original Message ----
> From: Doron Cohen <cdoronc@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Wednesday, December 19, 2007 1:13:56 PM
> Subject: Re: document deletion problem
> 
> On Dec 19, 2007 5:45 PM, Tushar B wrote:
> 
> > Hi Doron,
> >
> > I was just playing around with deletion because I wanted to delete
> > documents due to spurious entries in one particular field. Could you tell me
> > how do I file a JIRA issue?
> >
> 
> See Lucene's wiki, at page "HowToContribute".
> 
> 
> >
> > The two workarounds I was using are neither great in perfromance. Provided
> > here just FYI:
> >
> > 1) Have the "for" loop in a "do while" loop, Handle the Array...Exception,
> > resubmit query
> > 2) Use HitCollector (as also suggested by you)
> 
> 
> The HitCollector should work reasonably - can you tell us how many docs did
> you delete, from how big an index, with what query, and how long did it
> take?
> 
> 
> >
> > thanks
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 09:42:30 2007
Return-Path: <java-user-return-31583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9427 invoked from network); 20 Dec 2007 09:42:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 09:42:30 -0000
Received: (qmail 46641 invoked by uid 500); 20 Dec 2007 09:42:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46613 invoked by uid 500); 20 Dec 2007 09:42:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46602 invoked by uid 99); 20 Dec 2007 09:42:11 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 01:42:11 -0800
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=MISSING_MID,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [207.218.209.114] (HELO velox.grimal.com) (207.218.209.114)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 09:41:59 +0000
Received: (qmail 4980 invoked from network); 20 Dec 2007 03:41:48 -0600
Received: from m040e36d0.tmodns.net (HELO Inbox) (208.54.14.4)
  by ev1s-207-218-209-114.ev1servers.net with SMTP; 20 Dec 2007 03:41:45 -0600
MIME-Version: 1.0
content-class:
From: Brian Grimal <brian@grimal.com>
Subject: RE: Giving boost to a more recent item whiule searching
Date: Thu, 20 Dec 2007 03:41:47 -0600
Importance: normal
X-Priority: 3
To: <java-user@lucene.apache.org>
Content-Transfer-Encoding: quoted-printable
Content-Type: text/plain; charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20071220094208.3F2874DA181@nike.apache.org>

I would love to revisit this one.  I implemented pseudo date boosting in an=
 overly simplistic manner in my app, which I know can be improved upon.  Mi=
ght it be useful to reopen a thread on the topic?

Brian=20

-----Original Message-----
From: prabin meitei <prabin.meitei@gmail.com>
Sent: Wednesday, December 19, 2007 11:23 PM
To: java-user@lucene.apache.org
Subject: Re: Giving boost to a more recent item whiule searching

Hi Erick,
  Thanks for your response.  I have tried searching the archive. I could no=
t
find andy relevant thread. that's why i posted the question here. May be I
am not using the right keywords. If you know any archive link which deals
with this problem please send me.
    I have seen the case study about theServerSide in the book "Lucene in
Action". But there also they haven't given how date boosting can be
implemented.

Prabin


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 12:08:56 2007
Return-Path: <java-user-return-31584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85013 invoked from network); 20 Dec 2007 12:08:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 12:08:56 -0000
Received: (qmail 58127 invoked by uid 500); 20 Dec 2007 12:08:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58094 invoked by uid 500); 20 Dec 2007 12:08:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58082 invoked by uid 99); 20 Dec 2007 12:08:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 04:08:38 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhouqi.jackson@gmail.com designates 72.14.214.229 as permitted sender)
Received: from [72.14.214.229] (HELO hu-out-0506.google.com) (72.14.214.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 12:08:16 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1203610hub.15
        for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 04:08:18 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=XU41D6p2XjF+brzgFJ4erFP1Pdye786u/VVrmvdad5k=;
        b=u9mmy4AFg7P4b5Lt4yrC+W41X2jNZsjx4DTN/5sEmt2pq3CZPQ3J/XlMc+7gfU1onW14cQvhKVvJA/N0/SjgO8QIzCUZfAntuiKr38BGjQUfvaPzMkL14PD9606Y4XzHl/UMXqg4lAS+ppQ32bbtXF7CeyFyAIrWZE/6dVfd18I=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=O0R0mwCm6ryia+AUESh6jtqfoGDjuVGVhbk0TDsfxutoYZizSoF4Y8NaevhqkoartQxif9+XWmPH/JjlKy4tryWmpV/aZkaLkcUJXBheCJn8csunlzMHyTv0L/IeJhbLYbN7jPIyLVPV1U3n1FLdHE43X2QncdSG+pCIcoCx4zs=
Received: by 10.82.138.6 with SMTP id l6mr2981375bud.13.1198152497686;
        Thu, 20 Dec 2007 04:08:17 -0800 (PST)
Received: by 10.82.151.11 with HTTP; Thu, 20 Dec 2007 04:08:17 -0800 (PST)
Message-ID: <72d748c20712200408tb5c4141q8a8a36db24bc899b@mail.gmail.com>
Date: Thu, 20 Dec 2007 20:08:17 +0800
From: "Zhou Qi" <zhouqi.jackson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Giving boost to a more recent item whiule searching
In-Reply-To: <20071220094208.3F2874DA181@nike.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_19629_10289397.1198152497678"
References: <20071220094208.3F2874DA181@nike.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_19629_10289397.1198152497678
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Brain,

  Can you simply describe the method you tried? I am very intertested in
that.

Jackson

2007/12/20, Brian Grimal <brian@grimal.com>:
>
> I would love to revisit this one.  I implemented pseudo date boosting in
> an overly simplistic manner in my app, which I know can be improved
> upon.  Might it be useful to reopen a thread on the topic?
>
> Brian
>
> -----Original Message-----
> From: prabin meitei <prabin.meitei@gmail.com>
> Sent: Wednesday, December 19, 2007 11:23 PM
> To: java-user@lucene.apache.org
> Subject: Re: Giving boost to a more recent item whiule searching
>
> Hi Erick,
>   Thanks for your response.  I have tried searching the archive. I could
> not
> find andy relevant thread. that's why i posted the question here. May be I
>
> am not using the right keywords. If you know any archive link which deals
> with this problem please send me.
>     I have seen the case study about theServerSide in the book "Lucene in
> Action". But there also they haven't given how date boosting can be
> implemented.
>
> Prabin
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_19629_10289397.1198152497678--

From java-user-return-31585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 12:57:48 2007
Return-Path: <java-user-return-31585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3260 invoked from network); 20 Dec 2007 12:57:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 12:57:48 -0000
Received: (qmail 4940 invoked by uid 500); 20 Dec 2007 12:57:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4663 invoked by uid 500); 20 Dec 2007 12:57:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4652 invoked by uid 99); 20 Dec 2007 12:57:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 04:57:30 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 209.85.134.184 as permitted sender)
Received: from [209.85.134.184] (HELO mu-out-0910.google.com) (209.85.134.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 12:57:09 +0000
Received: by mu-out-0910.google.com with SMTP id g7so4748206muf.0
        for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 04:57:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=ROhRNWnrp/BERCQWpXHM4cDLI9MIN204Bk2QB6AI7Ag=;
        b=r1qv6eMgAurrpwsilfuBe+CFRRkjH41lpMfmyLqP9xEuKPZIC7qjZZMroiWNlxl9c94cWFUvCsRDgFtrWieQL1S/sVeO+1VVlW00gFFww3qPuhqZMOnXRbzB2NckJq7AoI1nM5skXlom09EDz8mr0AGdDUJ8mstLnL1Sub22Z7s=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=D0jIh4umnMrirCFyvkGVzZfvh2HZFMcMsCh23G1SmTgY7y3ViHmfuxkYAcOwIBBeYVn1waVr8rv/RZ/n8Qkob75YDyfHVfemAtevdHJ8EngEuMVapBPjgtH30hOXYHkD265dQsCHc4kh6WnoSL1Fb2Bv2V1uOoKEmHxUCa3vG/M=
Received: by 10.86.73.17 with SMTP id v17mr10062019fga.74.1198155428935;
        Thu, 20 Dec 2007 04:57:08 -0800 (PST)
Received: by 10.86.87.18 with HTTP; Thu, 20 Dec 2007 04:57:08 -0800 (PST)
Message-ID: <e05f0fd10712200457t42855f35q26dd7ae836a3c7a3@mail.gmail.com>
Date: Thu, 20 Dec 2007 14:57:08 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: document deletion problem
In-Reply-To: <454035.50386.qm@web83816.mail.sp1.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_5617_13986620.1198155428918"
References: <454035.50386.qm@web83816.mail.sp1.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_5617_13986620.1198155428918
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Dec 20, 2007 8:31 AM, Tushar B <snowhow@sbcglobal.net> wrote:

> Hi Doron,
>
> Just filed an issue in JIRA.


Thanks!


>
>
> Here are the requested stats:
> Index size-> around 11 million documents
> Query      -> fieldname:[009 TO 999] (using CSRQ)


ConstantScoreRangeQuery, right?


>
> Result      -> 11475 documents
> Delete      -> All the returned documents (11475)
>
> I can get the time statistics for you if that helps.
>

Yes this would be interesting, thanks - especially, how
long does it take with the deletions, vs. how long it takes to
just traverse the ids. Also, if the range query expands to
huge number of terms this can affect performance, so
it is interesting to see your query.rewrite().toString(),
or, if you can't reveal the actual tokens, just share
how many terms are there in the rewritten query.


>
> And, btw, I can still see the terms from the deleted documents when I do
> the top terms etc... when will they be gone?
>
> thanks
>
> ----- Original Message ----
> > From: Doron Cohen <cdoronc@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Wednesday, December 19, 2007 1:13:56 PM
> > Subject: Re: document deletion problem
> >
> > On Dec 19, 2007 5:45 PM, Tushar B wrote:
> >
> > > Hi Doron,
> > >
> > > I was just playing around with deletion because I wanted to delete
> > > documents due to spurious entries in one particular field. Could you
> tell me
> > > how do I file a JIRA issue?
> > >
> >
> > See Lucene's wiki, at page "HowToContribute".
> >
> >
> > >
> > > The two workarounds I was using are neither great in perfromance.
> Provided
> > > here just FYI:
> > >
> > > 1) Have the "for" loop in a "do while" loop, Handle the
> Array...Exception,
> > > resubmit query
> > > 2) Use HitCollector (as also suggested by you)
> >
> >
> > The HitCollector should work reasonably - can you tell us how many docs
> did
> > you delete, from how big an index, with what query, and how long did it
> > take?
>

------=_Part_5617_13986620.1198155428918--

From java-user-return-31586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 13:03:53 2007
Return-Path: <java-user-return-31586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5094 invoked from network); 20 Dec 2007 13:03:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 13:03:53 -0000
Received: (qmail 14678 invoked by uid 500); 20 Dec 2007 13:03:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14651 invoked by uid 500); 20 Dec 2007 13:03:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14640 invoked by uid 99); 20 Dec 2007 13:03:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 05:03:35 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of prabin.meitei@gmail.com designates 72.14.214.236 as permitted sender)
Received: from [72.14.214.236] (HELO hu-out-0506.google.com) (72.14.214.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 13:03:13 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1207562hub.15
        for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 05:03:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=oE8lzGFAW45wHad6S2b8ZsgSQoNneaDOZncJnvO0Zdo=;
        b=x6E0SIh6M2lHmSen3YFshgSj0BFZUrYSQvYVU3NKszhgr2qbD1+4AIZIZ9A6IEwTQqCFhDDiup1e9BWIe8SBw06kJd5LbtykRBMvWsffI2jgGxthxg7Uv4J8KyqMCyj7j95xXxoCb8MPFiMp8qJtiAKoIwZxsA3CE8wlrKR1uL0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=MUpjFE6HY8KcMnqFFgCnhX5xAGyF7pVgeq5p4uuPtv222ApzRqSFSIgYRzYXoF+m0TtCEbE+co0iVG88b2EyZafqKEL5bhk424kaNVAlo0PfD2qLMf0CLzG7sFfsK60rz4Hhp+MMpjxGyS6KtEJ6uIb9ftQ9GVzRORiYuS6J4Bg=
Received: by 10.78.132.2 with SMTP id f2mr13974772hud.44.1198155795572;
        Thu, 20 Dec 2007 05:03:15 -0800 (PST)
Received: by 10.78.172.17 with HTTP; Thu, 20 Dec 2007 05:03:15 -0800 (PST)
Message-ID: <295da8fe0712200503v3733dc0fvba02a850313507b4@mail.gmail.com>
Date: Thu, 20 Dec 2007 18:33:15 +0530
From: "prabin meitei" <prabin.meitei@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Giving boost to a more recent item whiule searching
In-Reply-To: <20071220094208.3F2874DA181@nike.apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14855_3351637.1198155795568"
References: <20071220094208.3F2874DA181@nike.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14855_3351637.1198155795568
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi,
  Looking into older threads and some googling i came across some codes
where boosting is done at the time of indexing using time gap from 'epoch'
or a *base time*. With this approach what I am afraid of is that over a
period of time the boosting factor may go up and I may loose the relevence
factor of other fields.
    Any thoughts on this?

Prabin

On Dec 20, 2007 3:11 PM, Brian Grimal <brian@grimal.com> wrote:

> I would love to revisit this one.  I implemented pseudo date boosting in
> an overly simplistic manner in my app, which I know can be improved upon.
>  Might it be useful to reopen a thread on the topic?
>
> Brian
>
> -----Original Message-----
> From: prabin meitei <prabin.meitei@gmail.com>
> Sent: Wednesday, December 19, 2007 11:23 PM
> To: java-user@lucene.apache.org
> Subject: Re: Giving boost to a more recent item whiule searching
>
> Hi Erick,
>  Thanks for your response.  I have tried searching the archive. I could
> not
> find andy relevant thread. that's why i posted the question here. May be I
> am not using the right keywords. If you know any archive link which deals
> with this problem please send me.
>    I have seen the case study about theServerSide in the book "Lucene in
> Action". But there also they haven't given how date boosting can be
> implemented.
>
> Prabin
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_14855_3351637.1198155795568--

From java-user-return-31587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 13:57:12 2007
Return-Path: <java-user-return-31587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30135 invoked from network); 20 Dec 2007 13:57:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 13:57:12 -0000
Received: (qmail 93008 invoked by uid 500); 20 Dec 2007 13:56:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92985 invoked by uid 500); 20 Dec 2007 13:56:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92974 invoked by uid 99); 20 Dec 2007 13:56:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 05:56:54 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 13:56:40 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 5299387FEE
	for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 05:56:32 -0800 (PST)
Message-Id: <78802ACE-F7DE-4187-B2E7-C8811AA867F0@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <295da8fe0712200503v3733dc0fvba02a850313507b4@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Giving boost to a more recent item whiule searching
Date: Thu, 20 Dec 2007 08:56:25 -0500
References: <20071220094208.3F2874DA181@nike.apache.org> <295da8fe0712200503v3733dc0fvba02a850313507b4@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Have a look at the FunctionQuery capabilities in Lucene, whereby you  
can use the value of a Field as a scoring factor.  So, your  
FunctionQuery would just do a simple calculation between the current  
time and whatever date is in the document.

-Grant
On Dec 20, 2007, at 8:03 AM, prabin meitei wrote:

> Hi,
>  Looking into older threads and some googling i came across some codes
> where boosting is done at the time of indexing using time gap from  
> 'epoch'
> or a *base time*. With this approach what I am afraid of is that  
> over a
> period of time the boosting factor may go up and I may loose the  
> relevence
> factor of other fields.
>    Any thoughts on this?
>
> Prabin
>
> On Dec 20, 2007 3:11 PM, Brian Grimal <brian@grimal.com> wrote:
>
>> I would love to revisit this one.  I implemented pseudo date  
>> boosting in
>> an overly simplistic manner in my app, which I know can be improved  
>> upon.
>> Might it be useful to reopen a thread on the topic?
>>
>> Brian
>>
>> -----Original Message-----
>> From: prabin meitei <prabin.meitei@gmail.com>
>> Sent: Wednesday, December 19, 2007 11:23 PM
>> To: java-user@lucene.apache.org
>> Subject: Re: Giving boost to a more recent item whiule searching
>>
>> Hi Erick,
>> Thanks for your response.  I have tried searching the archive. I  
>> could
>> not
>> find andy relevant thread. that's why i posted the question here.  
>> May be I
>> am not using the right keywords. If you know any archive link which  
>> deals
>> with this problem please send me.
>>   I have seen the case study about theServerSide in the book  
>> "Lucene in
>> Action". But there also they haven't given how date boosting can be
>> implemented.
>>
>> Prabin
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 14:36:44 2007
Return-Path: <java-user-return-31588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50219 invoked from network); 20 Dec 2007 14:36:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 14:36:44 -0000
Received: (qmail 68547 invoked by uid 500); 20 Dec 2007 14:36:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68517 invoked by uid 500); 20 Dec 2007 14:36:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68506 invoked by uid 99); 20 Dec 2007 14:36:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 06:36:25 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 14:36:01 +0000
Received: by fk-out-0910.google.com with SMTP id z23so3268001fkz.5
        for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 06:36:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=ErHcy2l7nIixdNP9IZOLxUlkvoHUo9tbUyjUTf3YZMU=;
        b=smaRJjMsWBB7cgRXTHcPtetaWy+JJgeuNb+wcHZVWS5rpUWLYmuxYpXgOU6GMXQRdhrgV4KpThJLhCen6xMt/93oMofD1Q9o/KLIl1GCSPID9rs9B/YIvvGMCHfaqfUsXv1qrAOZJOEMQNtzihQlo521IKfhDQfTHBsW9xdHKGA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZiO8LAQzo7iipw7RrN1hsgynHW78Dh7GfdVcxpEn2yT0IXQMpwEw9sdQWOzC0HnxVzjAUODbgK+ePPXCXtqj9eRXbXvdhJLp5/RVXNu+ethaJxhlXtV+5FhU2pHZ0slbMQUjVgL85CENCoYEiTzGVxumZWYOv0cOgoKT2yvp7G4=
Received: by 10.82.107.15 with SMTP id f15mr93103buc.0.1198161362824;
        Thu, 20 Dec 2007 06:36:02 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Thu, 20 Dec 2007 06:36:02 -0800 (PST)
Message-ID: <359a92830712200636w26deccd8pbd68fdec1154ade8@mail.gmail.com>
Date: Thu, 20 Dec 2007 09:36:02 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with Escape characters in lucene demo search
In-Reply-To: <012101c842bb$37584b30$a608e190$@ca>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_20631_4372377.1198161362817"
References: <00e801c8428b$807d93e0$8178bba0$@ca>
	 <359a92830712191641g1c1983c6r2c1fc471a4b5247f@mail.gmail.com>
	 <012101c842bb$37584b30$a608e190$@ca>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_20631_4372377.1198161362817
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

use Luke. Google Lucene luke and you'll find it.....

You can use it to examine the contents of your index
in many different ways. It's invaluable when exploring
the different analyzers and making sure that your index
has what you *think* it has.

Erick

On Dec 19, 2007 10:48 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:

> How do i check in my index. It looks like bytecode to me. My searched file
> does contain word "login" with quotes.
>
> B
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: December-19-07 4:41 PM
> To: java-user@lucene.apache.org
> Subject: Re: Problem with Escape characters in lucene demo search
>
> I'm pretty sure StandardAnalyzer is stripping these off. Have you looked
> in your index to see if "longin" (with quotes) is even in there? I think
> you'll find that it's not.
>
> Best
> Erick
>
> On Dec 19, 2007 5:07 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:
>
> > Hi there
> >
> >
> >
> > I am having a problem in using escape characters with lucene demo code.
> I
> > used the following code for IndexFiles and SearchFiles. The code works
> > fine
> > for regular searching and also with wildcard. However, when I try to use
> > escape characters, somehow it strips them off. For example: when i
> search
> > for  "login" through "\"login\"" or for that matter try to use any
> escape
> > character, lucene strips the escape characters and looks for the text
> only
> > (login as against "login")
> >
> >
> >
> > Can someone help please.
> >
> >
> >
> > Cheers
> >
> > B
> >
> >
> >
> >
> >
> > IndexFiles.java
> >
> >
> >
> > package org.apache.lucene.demo;
> >
> >
> >
> > /**
> >
> >  * Licensed to the Apache Software Foundation (ASF) under one or more
> >
> >  * contributor license agreements.  See the NOTICE file distributed with
> >
> >  * this work for additional information regarding copyright ownership.
> >
> >  * The ASF licenses this file to You under the Apache License, Version
> 2.0
> >
> >  * (the "License"); you may not use this file except in compliance with
> >
> >  * the License.  You may obtain a copy of the License at
> >
> >  *
> >
> >  *     http://www.apache.org/licenses/LICENSE-2.0
> >
> >  *
> >
> >  * Unless required by applicable law or agreed to in writing, software
> >
> >  * distributed under the License is distributed on an "AS IS" BASIS,
> >
> >  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> > implied.
> >
> >  * See the License for the specific language governing permissions and
> >
> >  * limitations under the License.
> >
> >  */
> >
> >
> >
> > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> >
> > import org.apache.lucene.document.Document;
> >
> > import org.apache.lucene.index.IndexWriter;
> >
> >
> >
> > import java.io.BufferedReader;
> >
> > import java.io.File;
> >
> > import java.io.FileNotFoundException;
> >
> > import java.io.IOException;
> >
> > import java.io.InputStreamReader;
> >
> > import java.util.Date;
> >
> >
> >
> > /** Index all text files under a directory. */
> >
> > public class IndexFiles {
> >
> >
> >
> >  private IndexFiles() {}
> >
> >
> >
> >  static final File INDEX_DIR = new File("index");
> >
> >
> >
> >  /** Index all text files under a directory. */
> >
> >  public static void main(String[] args) {
> >
> >    String usage = "java org.apache.lucene.demo.IndexFiles
> > <root_directory>";
> >
> >    /*if (args.length == 0) {
> >
> >      System.err.println("Usage: " + usage);
> >
> >      System.exit(1);
> >
> >    }*/
> >
> >
> >
> >    /*if (INDEX_DIR.exists()) {
> >
> >      System.out.println("Cannot save index to '" +INDEX_DIR+ "'
> directory,
> > please delete it first");
> >
> >      System.exit(1);
> >
> >    }*/
> >
> >
> >
> >    //final File docDir = new File(args[0]);
> >
> >    //File docDir = new File(args[0]);
> >
> >    File docDir = new File("F:/bsd-logs/logs");
> >
> >    if (!docDir.exists() || !docDir.canRead()) {
> >
> >      System.out.println("Document directory '"
> +docDir.getAbsolutePath()+
> > "' does not exist or is not readable, please check the path");
> >
> >      System.exit(1);
> >
> >    }
> >
> >
> >
> >    Date start = new Date();
> >
> >    try {
> >
> >      System.out.println("Indexing to directory '" +INDEX_DIR+ "'...");
> >
> >      BufferedReader in = null;
> >
> >      int i = 0;
> >
> >      while (i==0){
> >
> >          IndexWriter writer = new IndexWriter(INDEX_DIR, new
> > StandardAnalyzer(), true);
> >
> >
> >
> >                      indexDocs(writer, docDir);
> >
> >                      System.out.println("Optimizing...");
> >
> >                      writer.optimize();
> >
> >                      in = new BufferedReader(new
> > InputStreamReader(System.in, "UTF-8"));
> >
> >                      i=1;
> >
> >                      /*System.out.println("Enter another directory: ");
> >
> >
> >
> >                        docDir = new File(in.readLine());
> >
> >                        writer.close();
> >
> >                        String args1[] =
> > {"\\users\\baljeet\\documents\\rees\\programs\\
> > <file:///\\users\baljeet\documents\rees\programs\> "};
> >
> >                        DeleteFiles.main(args1);*/
> >
> >     }
> >
> >
> >
> >
> >
> >
> >
> >      Date end = new Date();
> >
> >      System.out.println(end.getTime() - start.getTime() + " total
> > milliseconds");
> >
> >
> >
> >    } catch (IOException e) {
> >
> >      System.out.println(" caught a " + e.getClass() +
> >
> >       "\n with message: " + e.getMessage());
> >
> >    }
> >
> >  }
> >
> >
> >
> >  static void indexDocs(IndexWriter writer, File file)
> >
> >    throws IOException {
> >
> >    // do not try to index files that cannot be read
> >
> >    if (file.canRead()) {
> >
> >      if (file.isDirectory()) {
> >
> >        String[] files = file.list();
> >
> >        // an IO error could occur
> >
> >        if (files != null) {
> >
> >          for (int i = 0; i < files.length; i++) {
> >
> >            indexDocs(writer, new File(file, files[i]));
> >
> >          }
> >
> >        }
> >
> >      } else {
> >
> >        System.out.println("adding " + file);
> >
> >        try {
> >
> >                Document doc = FileDocument.Document(file);
> >
> >                System.out.println("Path = "+doc.getField("path"));
> >
> >          writer.addDocument(FileDocument.Document(file));
> >
> >
> >
> >        }
> >
> >        // at least on windows, some temporary files raise this exception
> > with an "access denied" message
> >
> >        // checking if the file can be read doesn't help
> >
> >        catch (FileNotFoundException fnfe) {
> >
> >          ;
> >
> >        }
> >
> >      }
> >
> >    }
> >
> >  }
> >
> >
> >
> > }
> >
> >
> >
> >
> >
> >
> >
> > SearchFiles.java
> >
> >
> >
> >
> >
> > package org.apache.lucene.demo;
> >
> >
> >
> > /**
> >
> >  * Licensed to the Apache Software Foundation (ASF) under one or more
> >
> >  * contributor license agreements.  See the NOTICE file distributed with
> >
> >  * this work for additional information regarding copyright ownership.
> >
> >  * The ASF licenses this file to You under the Apache License, Version
> 2.0
> >
> >  * (the "License"); you may not use this file except in compliance with
> >
> >  * the License.  You may obtain a copy of the License at
> >
> >  *
> >
> >  *     http://www.apache.org/licenses/LICENSE-2.0
> >
> >  *
> >
> >  * Unless required by applicable law or agreed to in writing, software
> >
> >  * distributed under the License is distributed on an "AS IS" BASIS,
> >
> >  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> > implied.
> >
> >  * See the License for the specific language governing permissions and
> >
> >  * limitations under the License.
> >
> >  */
> >
> >
> >
> > import org.apache.lucene.analysis.Analyzer;
> >
> > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> >
> > import org.apache.lucene.document.Document;
> >
> > import org.apache.lucene.index.FilterIndexReader;
> >
> > import org.apache.lucene.index.IndexReader;
> >
> > import org.apache.lucene.queryParser.QueryParser;
> >
> > import org.apache.lucene.search.Hits;
> >
> > import org.apache.lucene.search.IndexSearcher;
> >
> > import org.apache.lucene.search.Query;
> >
> > import org.apache.lucene.search.Searcher;
> >
> >
> >
> > import java.io.BufferedReader;
> >
> > import java.io.FileReader;
> >
> > import java.io.IOException;
> >
> > import java.io.InputStreamReader;
> >
> > import java.util.Collection;
> >
> > import java.util.Date;
> >
> > import java.util.Hashtable;
> >
> > import java.util.Iterator;
> >
> >
> >
> > /** Simple command-line based search demo. */
> >
> > public class SearchFiles {
> >
> >
> >
> >  /** Use the norms from one field for all fields.  Norms are read into
> > memory,
> >
> >   * using a byte of memory per document per searched field.  This can
> > cause
> >
> >   * search of large collections with a large number of fields to run out
> > of
> >
> >   * memory.  If all of the fields contain only a single token, then the
> > norms
> >
> >   * are all identical, then single norm vector may be shared. */
> >
> >  public static class OneNormsReader extends FilterIndexReader {
> >
> >    private String field;
> >
> >
> >
> >    public OneNormsReader(IndexReader in, String field) {
> >
> >      super(in);
> >
> >      this.field = field;
> >
> >    }
> >
> >
> >
> >    public byte[] norms(String field) throws IOException {
> >
> >      return in.norms(this.field);
> >
> >    }
> >
> >  }
> >
> >
> >
> >  private SearchFiles() {}
> >
> >
> >
> >  /** Simple command-line based search demo. */
> >
> >  public static void main(String[] args) throws Exception {
> >
> >    String usage =
> >
> >      "Usage: java org.apache.lucene.demo.SearchFiles [-index dir]
> [-field
> > f] [-repeat n] [-queries file] [-raw] [-norms field]";
> >
> >    if (args.length > 0 && ("-h".equals(args[0]) ||
> > "-help".equals(args[0]))) {
> >
> >      System.out.println(usage);
> >
> >      System.exit(0);
> >
> >    }
> >
> >
> >
> >    String index = "index";
> >
> >    String field = "contents";
> >
> >    String queries = null;
> >
> >    int repeat = 0;
> >
> >    boolean raw = false;
> >
> >    String normsField = null;
> >
> >
> >
> >    for (int i = 0; i < args.length; i++) {
> >
> >      if ("-index".equals(args[i])) {
> >
> >        index = args[i+1];
> >
> >        i++;
> >
> >      } else if ("-field".equals(args[i])) {
> >
> >        field = args[i+1];
> >
> >        i++;
> >
> >      } else if ("-queries".equals(args[i])) {
> >
> >        queries = args[i+1];
> >
> >        i++;
> >
> >      } else if ("-repeat".equals(args[i])) {
> >
> >        repeat = Integer.parseInt(args[i+1]);
> >
> >        i++;
> >
> >      } else if ("-raw".equals(args[i])) {
> >
> >        raw = true;
> >
> >      } else if ("-norms".equals(args[i])) {
> >
> >        normsField = args[i+1];
> >
> >        i++;
> >
> >      }
> >
> >    }
> >
> >
> >
> >    IndexReader reader = IndexReader.open(index);
> >
> >
> >
> >    if (normsField != null)
> >
> >      reader = new OneNormsReader(reader, normsField);
> >
> >
> >
> >    Collection<String> h =
> > reader.getFieldNames(IndexReader.FieldOption.INDEXED);
> >
> >    Iterator<String> it = h.iterator();
> >
> >    while (it.hasNext()){
> >
> >                System.out.println("Iterator Value = "+it.next());
> >
> >
> >
> >    }
> >
> >
> >
> >
> >
> >
> >
> >    Searcher searcher = new IndexSearcher(reader);
> >
> >    Analyzer analyzer = new StandardAnalyzer();
> >
> >
> >
> >    BufferedReader in = null;
> >
> >    if (queries != null) {
> >
> >      in = new BufferedReader(new FileReader(queries));
> >
> >    } else {
> >
> >      in = new BufferedReader(new InputStreamReader(System.in, "UTF-8"));
> >
> >    }
> >
> >      QueryParser parser = new QueryParser(field, analyzer);
> >
> >    while (true) {
> >
> >      if (queries == null)                        // prompt the user
> >
> >        System.out.println("Enter query: ");
> >
> >
> >
> >      String line = in.readLine();
> >
> >
> >
> >      if (line == null || line.length() == -1)
> >
> >        break;
> >
> >
> >
> >      line = line.trim();
> >
> >      if (line.length() == 0)
> >
> >        break;
> >
> >      System.out.println("line 1= "+line);
> >
> >     // line = QueryParser.escape(line);
> >
> >      System.out.println("line 2= "+line);
> >
> >      Query query = parser.parse(line);
> >
> >
> >
> >      System.out.println("Searching for: " + query.toString(field));
> >
> >
> >
> >      Hits hits = searcher.search(query);
> >
> >
> >
> >
> >
> >      if (repeat > 0) {                           // repeat & time as
> > benchmark
> >
> >        Date start = new Date();
> >
> >        for (int i = 0; i < repeat; i++) {
> >
> >          hits = searcher.search(query);
> >
> >        }
> >
> >        Date end = new Date();
> >
> >        System.out.println("Time: "+(end.getTime()-start.getTime
> ())+"ms");
> >
> >      }
> >
> >
> >
> >
> >
> >      System.out.println(hits.length() + " total matching documents");
> >
> >
> >
> >      final int HITS_PER_PAGE = 10;
> >
> >      for (int start = 0; start < hits.length(); start += HITS_PER_PAGE)
> {
> >
> >        int end = Math.min(hits.length(), start + HITS_PER_PAGE);
> >
> >        for (int i = start; i < end; i++) {
> >
> >
> >
> >          if (raw) {                              // output raw format
> >
> >            System.out.println("doc="+hits.id(i)+"
> score="+hits.score(i));
> >
> >            continue;
> >
> >          }
> >
> >
> >
> >          Document doc = hits.doc(i);
> >
> >          String path = doc.get("path");
> >
> >          if (path != null) {
> >
> >            System.out.println((i+1) + ". " + path);
> >
> >            //getSearchedLine(path, "kvoll");
> >
> >            String title = doc.get("title");
> >
> >            if (title != null) {
> >
> >              System.out.println("   Title: " + doc.get("title"));
> >
> >            }
> >
> >          } else {
> >
> >            System.out.println((i+1) + ". " + "No path for this
> document");
> >
> >          }
> >
> >        }
> >
> >
> >
> >        if (queries != null)                      // non-interactive
> >
> >          break;
> >
> >
> >
> >        if (hits.length() > end) {
> >
> >          System.out.println("more (y/n) ? ");
> >
> >          line = in.readLine();
> >
> >          if (line.length() == 0 || line.charAt(0) == 'n')
> >
> >            break;
> >
> >        }
> >
> >      }
> >
> >    }
> >
> >    reader.close();
> >
> >  }
> >
> > }
> >
> >
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_20631_4372377.1198161362817--

From java-user-return-31589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 17:44:27 2007
Return-Path: <java-user-return-31589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22693 invoked from network); 20 Dec 2007 17:44:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 17:44:26 -0000
Received: (qmail 89533 invoked by uid 500); 20 Dec 2007 17:43:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89501 invoked by uid 500); 20 Dec 2007 17:43:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89489 invoked by uid 99); 20 Dec 2007 17:43:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 09:43:37 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tareque@controldocs.com designates 65.117.150.145 as permitted sender)
Received: from [65.117.150.145] (HELO webmail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 17:43:16 +0000
Received: from webmail.controldocs.com (webmail.controldocs.com [127.0.0.1])
	by webmail.controldocs.com (8.13.4/8.13.4/Debian-3sarge3) with ESMTP id lBKHhDrF002118
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 11:43:18 -0600
Received: (from www-data@localhost)
	by webmail.controldocs.com (8.13.4/8.13.4/Submit) id lBKHh2gb002111;
	Thu, 20 Dec 2007 11:43:02 -0600
X-Authentication-Warning: webmail.controldocs.com: www-data set sender to tareque@controldocs.com using -f
Received: from 192.168.5.115
        (SquirrelMail authenticated user tareque)
        by webmail.controldocs.com with HTTP;
        Thu, 20 Dec 2007 11:43:02 -0600 (CST)
Message-ID: <19356.192.168.5.115.1198172582.squirrel@webmail.controldocs.com>
In-Reply-To: <47010619.4030909@propylon.com>
References: <4700F72B.1010609@propylon.com>	
    <0C09F3B2-8C01-4C61-970E-B4673971B526@gmail.com>	
    <4700FC1C.6010707@propylon.com>
    <48b038c60710010703u1370e6cu170d15fe1480f607@mail.gmail.com>
    <47010619.4030909@propylon.com>
Date: Thu, 20 Dec 2007 11:43:02 -0600 (CST)
Subject: Changing the Punctuation definition for StandardAnalyzer
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

I am using StandardAnalyzer for my indexes. Now I don't want to be able to
be search whole email addresses, and want to consider '@' as a punctuation
too. Because my users would rather be able to search for user id and/or
the host name to return all the email addresses than searching by the
whole address. And, that way, then can create a query that will return
email addresses anyway.

How do I let StandardAnalyzer consider '@' as a punctuation?

Thanks
Tareque

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 17:58:43 2007
Return-Path: <java-user-return-31590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27365 invoked from network); 20 Dec 2007 17:58:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 17:58:43 -0000
Received: (qmail 3150 invoked by uid 500); 20 Dec 2007 17:58:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3107 invoked by uid 500); 20 Dec 2007 17:58:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3094 invoked by uid 99); 20 Dec 2007 17:58:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 09:58:26 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.33 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.33] (HELO smtp-vbr13.xs4all.nl) (194.109.24.33)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 17:58:04 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr13.xs4all.nl (8.13.8/8.13.8) with ESMTP id lBKHw6ha075591
	for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 18:58:07 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <1D6E6CE2-0F5E-4E9B-A28D-BB6A8075BD63@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <19356.192.168.5.115.1198172582.squirrel@webmail.controldocs.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Changing the Punctuation definition for StandardAnalyzer
X-Priority: 3 (Normal)
Date: Thu, 20 Dec 2007 18:58:06 +0100
References: <4700F72B.1010609@propylon.com>	 <0C09F3B2-8C01-4C61-970E-B4673971B526@gmail.com>	 <4700FC1C.6010707@propylon.com> <48b038c60710010703u1370e6cu170d15fe1480f607@mail.gmail.com> <47010619.4030909@propylon.com> <19356.192.168.5.115.1198172582.squirrel@webmail.controldocs.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


20 dec 2007 kl. 18.43 skrev tareque@controldocs.com:

> I am using StandardAnalyzer for my indexes. Now I don't want to be  
> able to
> be search whole email addresses, and want to consider '@' as a  
> punctuation
> too. Because my users would rather be able to search for user id and/ 
> or
> the host name to return all the email addresses than searching by the
> whole address. And, that way, then can create a query that will return
> email addresses anyway.
>
> How do I let StandardAnalyzer consider '@' as a punctuation?

A quick and dirty solution is to introduce a TokenFilter that splits  
any token at @ and add it to the end of the chain of streams in  
StandardAnalyzer#tokenStream.

It would probably be much more efficient if you modified the lexer  
grammar StandardTokenzier is generated from.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 19:22:38 2007
Return-Path: <java-user-return-31591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57341 invoked from network); 20 Dec 2007 19:22:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 19:22:38 -0000
Received: (qmail 91477 invoked by uid 500); 20 Dec 2007 19:22:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90596 invoked by uid 500); 20 Dec 2007 19:22:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90585 invoked by uid 99); 20 Dec 2007 19:22:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 11:22:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of tareque@controldocs.com designates 65.117.150.145 as permitted sender)
Received: from [65.117.150.145] (HELO webmail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 19:22:10 +0000
Received: from webmail.controldocs.com (webmail.controldocs.com [127.0.0.1])
	by webmail.controldocs.com (8.13.4/8.13.4/Debian-3sarge3) with ESMTP id lBKJLtPv008248
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 13:22:00 -0600
Received: (from www-data@localhost)
	by webmail.controldocs.com (8.13.4/8.13.4/Submit) id lBKJLjln008244;
	Thu, 20 Dec 2007 13:21:45 -0600
X-Authentication-Warning: webmail.controldocs.com: www-data set sender to tareque@controldocs.com using -f
Received: from 192.168.5.115
        (SquirrelMail authenticated user tareque)
        by webmail.controldocs.com with HTTP;
        Thu, 20 Dec 2007 13:21:45 -0600 (CST)
Message-ID: <19410.192.168.5.115.1198178505.squirrel@webmail.controldocs.com>
In-Reply-To: <1D6E6CE2-0F5E-4E9B-A28D-BB6A8075BD63@gmail.com>
References: <4700F72B.1010609@propylon.com>	
    <0C09F3B2-8C01-4C61-970E-B4673971B526@gmail.com>	
    <4700FC1C.6010707@propylon.com>
    <48b038c60710010703u1370e6cu170d15fe1480f607@mail.gmail.com>
    <47010619.4030909@propylon.com>
    <19356.192.168.5.115.1198172582.squirrel@webmail.controldocs.com>
    <1D6E6CE2-0F5E-4E9B-A28D-BB6A8075BD63@gmail.com>
Date: Thu, 20 Dec 2007 13:21:45 -0600 (CST)
Subject: Re: Changing the Punctuation definition for StandardAnalyzer
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks Karl,

I would rather like to modify the lexer grammar. But exactly where it is
defined. After having a quick look, seems like
StandardTokenizerTokenManager.java may be where it is being done.
Ampersand having a decimal value of '38', I was assuming that the
following step is taken when faced with ampersand:

=============
              case 73:
                  if (curChar == 38)
                     jjstateSet[jjnewStateCnt++] = 74;
                  break;
=============

It's kind of complicated, so before I attempt to delve into I thought I
should ask if I am looking at the right place.

Thanks again!
Tareque



>
> 20 dec 2007 kl. 18.43 skrev tareque@controldocs.com:
>
>> I am using StandardAnalyzer for my indexes. Now I don't want to be
>> able to
>> be search whole email addresses, and want to consider '@' as a
>> punctuation
>> too. Because my users would rather be able to search for user id and/
>> or
>> the host name to return all the email addresses than searching by the
>> whole address. And, that way, then can create a query that will return
>> email addresses anyway.
>>
>> How do I let StandardAnalyzer consider '@' as a punctuation?
>
> A quick and dirty solution is to introduce a TokenFilter that splits
> any token at @ and add it to the end of the chain of streams in
> StandardAnalyzer#tokenStream.
>
> It would probably be much more efficient if you modified the lexer
> grammar StandardTokenzier is generated from.
>
> --
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 19:36:49 2007
Return-Path: <java-user-return-31592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62217 invoked from network); 20 Dec 2007 19:36:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 19:36:49 -0000
Received: (qmail 12828 invoked by uid 500); 20 Dec 2007 19:36:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12788 invoked by uid 500); 20 Dec 2007 19:36:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12777 invoked by uid 99); 20 Dec 2007 19:36:32 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 11:36:32 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.23 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 19:36:09 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr3.xs4all.nl (8.13.8/8.13.8) with ESMTP id lBKJaBQN062182
	for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 20:36:11 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <B4273DC6-352A-4978-BB49-35118F2390CA@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <19410.192.168.5.115.1198178505.squirrel@webmail.controldocs.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Changing the Punctuation definition for StandardAnalyzer
X-Priority: 3 (Normal)
Date: Thu, 20 Dec 2007 20:36:11 +0100
References: <4700F72B.1010609@propylon.com>	 <0C09F3B2-8C01-4C61-970E-B4673971B526@gmail.com>	 <4700FC1C.6010707@propylon.com> <48b038c60710010703u1370e6cu170d15fe1480f607@mail.gmail.com> <47010619.4030909@propylon.com> <19356.192.168.5.115.1198172582.squirrel@webmail.controldocs.com> <1D6E6CE2-0F5E-4E9B-A28D-BB6A8075BD63@gmail.com> <19410.192.168.5.115.1198178505.squirrel@webmail.controldocs.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org


20 dec 2007 kl. 20.21 skrev tareque@controldocs.com:

> I would rather like to modify the lexer grammar. But exactly where  
> it is
> defined. After having a quick look, seems like
> StandardTokenizerTokenManager.java may be where it is being done.

http://svn.apache.org/repos/asf/lucene/java/trunk/src/java/org/apache/lucene/analysis/standard/StandardTokenizerImpl.jflex

It can be generated with the Ant build.

-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 19:54:53 2007
Return-Path: <java-user-return-31593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66322 invoked from network); 20 Dec 2007 19:54:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 19:54:53 -0000
Received: (qmail 34514 invoked by uid 500); 20 Dec 2007 19:54:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34477 invoked by uid 500); 20 Dec 2007 19:54:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34466 invoked by uid 99); 20 Dec 2007 19:54:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 11:54:35 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jeff.lucene@gmail.com designates 66.249.82.237 as permitted sender)
Received: from [66.249.82.237] (HELO wx-out-0506.google.com) (66.249.82.237)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 19:54:13 +0000
Received: by wx-out-0506.google.com with SMTP id i28so8920wxd.20
        for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 11:54:15 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=BMwPlZ4+S5MZoVOvHKFR3Hn6Q4eihgqM/sHRbOf/H/I=;
        b=j5au38F4luxzFAQd3tHOb+29csHRxagfrkt/K1Mfx0CMQhVM3pJ2l+UznrQmS929YSDB18qLwcg+YqTuxrc0wrVz0OUEra3cGD28dTsSRaQ4hnVF3euNEaBiEfyTqA6C3fC5WEqZDwasnEvP4kfq2foZa1cq4Wbc2Wcu8vGNN+Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=JESTAVRlUIvsA1IB2a7qkCo1Lo46hlbIZTlIo8glNuOVoDU8Ss5a6F4eUBlar6/xShbBL71HdnGuz+9aoaz6wkM3H5iyPkK0xTP3f/kXazSglTpEgdOmy2FCSCyue0XlynsQsjuN75Zluu1MRSMn3kvga6VlDi7ba/1d/KrUsOI=
Received: by 10.143.34.11 with SMTP id m11mr293131wfj.222.1198180454695;
        Thu, 20 Dec 2007 11:54:14 -0800 (PST)
Received: by 10.142.86.15 with HTTP; Thu, 20 Dec 2007 11:54:14 -0800 (PST)
Message-ID: <cfc620660712201154j45585448wd5733be2e4e3f419@mail.gmail.com>
Date: Thu, 20 Dec 2007 14:54:14 -0500
From: Jeff <jeff.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Hit Count per Document
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_35519_31584562.1198180454690"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_35519_31584562.1198180454690
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't care about score, but I do care about the # of times a query was hit
within a document? example:

the quick brown fox jumped over the lazy dog
 the quick brown fox jumped over the lazy dog
 the quick brown fox jumped over the lazy dog
 the quick brown fox jumped over the lazy dog
the slow brown fox jumped over the lazy dog

If I searched for "quick brown", is there a way I could see that it was hit
4 times within the document?

Thanks,
Jeff

------=_Part_35519_31584562.1198180454690--

From java-user-return-31594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 20:04:15 2007
Return-Path: <java-user-return-31594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71129 invoked from network); 20 Dec 2007 20:04:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 20:04:14 -0000
Received: (qmail 47049 invoked by uid 500); 20 Dec 2007 20:03:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46967 invoked by uid 500); 20 Dec 2007 20:03:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46956 invoked by uid 99); 20 Dec 2007 20:03:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 12:03:57 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of markrmiller@gmail.com designates 64.233.166.183 as permitted sender)
Received: from [64.233.166.183] (HELO py-out-1112.google.com) (64.233.166.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 20:03:35 +0000
Received: by py-out-1112.google.com with SMTP id d32so60167pye.12
        for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 12:03:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=JErCU1pzzcDjfyAqrbl5SiwaAx2a5xY2V4/XBUx1P9Q=;
        b=nEE4vVdK3dlQr9cs5Oaq8aUapPtCqtwcw4PSJTacC3pcEOEnb6EtksdAU8qdaRfZq/uaDb3tC/TtlRHNiUUM706hE1EMeCY21VB2y86BB6+GvM0UruGYuyspRdtwUgfRiLdoxJibSElWiopF6TZHgHtWTeXexvLhhn5HisSLB3M=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=S03qSlRxsZuZz2xxY5rGED3zhcnyHPDf1xr6+Reokr2AmWuhJ0hfAQ+o7sp3oxWjtfzvZZ6931scBUbG72WKTbdv0aUuFmIalWeac7HgHR54OE177tdEAzjZRbFEvNHT8lIZsNtwdUc1y6G5XQE/rYbCbl57lpJwiNq0r+YjIYc=
Received: by 10.65.95.12 with SMTP id x12mr795488qbl.14.1198181018353;
        Thu, 20 Dec 2007 12:03:38 -0800 (PST)
Received: from ?192.168.1.102? ( [69.124.234.183])
        by mx.google.com with ESMTPS id f17sm126115qba.35.2007.12.20.12.03.37
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 20 Dec 2007 12:03:37 -0800 (PST)
Message-ID: <476ACA74.9040104@gmail.com>
Date: Thu, 20 Dec 2007 15:03:00 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Hit Count per Document
References: <cfc620660712201154j45585448wd5733be2e4e3f419@mail.gmail.com>
In-Reply-To: <cfc620660712201154j45585448wd5733be2e4e3f419@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

You can override the scoring system and only score by term frequency 
(use a 1 or whatever creates a no-op for the other factors). If you have 
indexed with norms than you will have to use a Reader that ignores them 
to do this.

- Mark

Jeff wrote:
> I don't care about score, but I do care about the # of times a query was hit
> within a document? example:
>
> the quick brown fox jumped over the lazy dog
>  the quick brown fox jumped over the lazy dog
>  the quick brown fox jumped over the lazy dog
>  the quick brown fox jumped over the lazy dog
> the slow brown fox jumped over the lazy dog
>
> If I searched for "quick brown", is there a way I could see that it was hit
> 4 times within the document?
>
> Thanks,
> Jeff
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 21:32:54 2007
Return-Path: <java-user-return-31595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2019 invoked from network); 20 Dec 2007 21:32:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 21:32:54 -0000
Received: (qmail 78584 invoked by uid 500); 20 Dec 2007 21:32:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78553 invoked by uid 500); 20 Dec 2007 21:32:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78542 invoked by uid 99); 20 Dec 2007 21:32:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 13:32:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tareque@controldocs.com designates 65.117.150.145 as permitted sender)
Received: from [65.117.150.145] (HELO webmail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 21:32:14 +0000
Received: from webmail.controldocs.com (webmail.controldocs.com [127.0.0.1])
	by webmail.controldocs.com (8.13.4/8.13.4/Debian-3sarge3) with ESMTP id lBKLWHEc016695
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 15:32:17 -0600
Received: (from www-data@localhost)
	by webmail.controldocs.com (8.13.4/8.13.4/Submit) id lBKLWGMu016694;
	Thu, 20 Dec 2007 15:32:16 -0600
X-Authentication-Warning: webmail.controldocs.com: www-data set sender to tareque@controldocs.com using -f
Received: from 192.168.5.115
        (SquirrelMail authenticated user tareque)
        by webmail.controldocs.com with HTTP;
        Thu, 20 Dec 2007 15:32:16 -0600 (CST)
Message-ID: <9639.192.168.5.115.1198186336.squirrel@webmail.controldocs.com>
In-Reply-To: <B4273DC6-352A-4978-BB49-35118F2390CA@gmail.com>
References: <4700F72B.1010609@propylon.com>	
    <0C09F3B2-8C01-4C61-970E-B4673971B526@gmail.com>	
    <4700FC1C.6010707@propylon.com>
    <48b038c60710010703u1370e6cu170d15fe1480f607@mail.gmail.com>
    <47010619.4030909@propylon.com>
    <19356.192.168.5.115.1198172582.squirrel@webmail.controldocs.com>
    <1D6E6CE2-0F5E-4E9B-A28D-BB6A8075BD63@gmail.com>
    <19410.192.168.5.115.1198178505.squirrel@webmail.controldocs.com>
    <B4273DC6-352A-4978-BB49-35118F2390CA@gmail.com>
Date: Thu, 20 Dec 2007 15:32:16 -0600 (CST)
Subject: Re: Changing the Punctuation definition for StandardAnalyzer
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

Karl,

I should have mentioned before, I have Lucene 1.9.1.

In fact I had previously located the grammar in StandardTokenizer.jj (just
wasn't sure if that was the one u were talking about) and had commented
out EMAIL entries from all the following files:

StandardTokenizer.java
StandardTokenizer.jj
StandardTokenizerConstants.java

But evidently the tokenizer was expecting the email addresses to be one of
the other TOKEN types. But since they were matching with none of them it
was throwing a ParseException.

Now what is puzzling to me is that though I don't see the '@' (unicode
value 0040) sign to be included in "LETTER" or any other definition, why
is it not  splitting the words? It certainly isn't, which is why Tokenizer
is expecting the email address to be defined as a TYPE. My understanding,
looking at the code, is that whichever characters were not defined in the
grammar, would be acting as splitter, since they are not contributing to
any TOKEN definition.

Please let me know what I am missing.

Thanks
Tareque

>
> 20 dec 2007 kl. 20.21 skrev tareque@controldocs.com:
>
>> I would rather like to modify the lexer grammar. But exactly where
>> it is
>> defined. After having a quick look, seems like
>> StandardTokenizerTokenManager.java may be where it is being done.
>
> http://svn.apache.org/repos/asf/lucene/java/trunk/src/java/org/apache/lucene/analysis/standard/StandardTokenizerImpl.jflex
>
> It can be generated with the Ant build.
>
> --
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 22:21:21 2007
Return-Path: <java-user-return-31596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23845 invoked from network); 20 Dec 2007 22:21:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 22:21:21 -0000
Received: (qmail 62204 invoked by uid 500); 20 Dec 2007 22:21:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62173 invoked by uid 500); 20 Dec 2007 22:21:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62161 invoked by uid 99); 20 Dec 2007 22:21:04 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 14:21:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [142.58.101.21] (HELO rm-rstar.sfu.ca) (142.58.101.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 22:20:40 +0000
Received: from BaljeetPC (d142-058-189-048.surrey.sfu.ca [142.58.189.48])
	by rm-rstar.sfu.ca (8.13.6/8.13.4/SFU-5.0H) with ESMTP id lBKMKgsi006434
	for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 14:20:42 -0800 (PST)
X-Spam-Level: Spam-Level 
From: "Baljeet Dhaliwal" <bsd@sfu.ca>
To: <java-user@lucene.apache.org>
References: <00e801c8428b$807d93e0$8178bba0$@ca>	 <359a92830712191641g1c1983c6r2c1fc471a4b5247f@mail.gmail.com>	 <012101c842bb$37584b30$a608e190$@ca> <359a92830712200636w26deccd8pbd68fdec1154ade8@mail.gmail.com>
In-Reply-To: <359a92830712200636w26deccd8pbd68fdec1154ade8@mail.gmail.com>
Subject: RE: Problem with Escape characters in lucene demo search
Date: Thu, 20 Dec 2007 14:20:38 -0800
Message-ID: <015801c84356$8cb94660$a62bd320$@ca>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AchDFc4HriizmwWISTeK9yr9FlTgxQAQG3jg
Content-Language: en-ca
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Erick

Thanks. I found something interesting. I was indexing huge text files (>2GB)
and the search was not returning escape characters. However, when I moved
the line to a smaller file (20MB), it works fine. Is there a limit on file
size search by Lucene or would you know how do escape characters search
performs when file is as big as mine.

B

-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: December-20-07 6:36 AM
To: java-user@lucene.apache.org
Subject: Re: Problem with Escape characters in lucene demo search

use Luke. Google Lucene luke and you'll find it.....

You can use it to examine the contents of your index
in many different ways. It's invaluable when exploring
the different analyzers and making sure that your index
has what you *think* it has.

Erick

On Dec 19, 2007 10:48 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:

> How do i check in my index. It looks like bytecode to me. My searched file
> does contain word "login" with quotes.
>
> B
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: December-19-07 4:41 PM
> To: java-user@lucene.apache.org
> Subject: Re: Problem with Escape characters in lucene demo search
>
> I'm pretty sure StandardAnalyzer is stripping these off. Have you looked
> in your index to see if "longin" (with quotes) is even in there? I think
> you'll find that it's not.
>
> Best
> Erick
>
> On Dec 19, 2007 5:07 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:
>
> > Hi there
> >
> >
> >
> > I am having a problem in using escape characters with lucene demo code.
> I
> > used the following code for IndexFiles and SearchFiles. The code works
> > fine
> > for regular searching and also with wildcard. However, when I try to use
> > escape characters, somehow it strips them off. For example: when i
> search
> > for  "login" through "\"login\"" or for that matter try to use any
> escape
> > character, lucene strips the escape characters and looks for the text
> only
> > (login as against "login")
> >
> >
> >
> > Can someone help please.
> >
> >
> >
> > Cheers
> >
> > B
> >
> >
> >
> >
> >
> > IndexFiles.java
> >
> >
> >
> > package org.apache.lucene.demo;
> >
> >
> >
> > /**
> >
> >  * Licensed to the Apache Software Foundation (ASF) under one or more
> >
> >  * contributor license agreements.  See the NOTICE file distributed with
> >
> >  * this work for additional information regarding copyright ownership.
> >
> >  * The ASF licenses this file to You under the Apache License, Version
> 2.0
> >
> >  * (the "License"); you may not use this file except in compliance with
> >
> >  * the License.  You may obtain a copy of the License at
> >
> >  *
> >
> >  *     http://www.apache.org/licenses/LICENSE-2.0
> >
> >  *
> >
> >  * Unless required by applicable law or agreed to in writing, software
> >
> >  * distributed under the License is distributed on an "AS IS" BASIS,
> >
> >  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> > implied.
> >
> >  * See the License for the specific language governing permissions and
> >
> >  * limitations under the License.
> >
> >  */
> >
> >
> >
> > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> >
> > import org.apache.lucene.document.Document;
> >
> > import org.apache.lucene.index.IndexWriter;
> >
> >
> >
> > import java.io.BufferedReader;
> >
> > import java.io.File;
> >
> > import java.io.FileNotFoundException;
> >
> > import java.io.IOException;
> >
> > import java.io.InputStreamReader;
> >
> > import java.util.Date;
> >
> >
> >
> > /** Index all text files under a directory. */
> >
> > public class IndexFiles {
> >
> >
> >
> >  private IndexFiles() {}
> >
> >
> >
> >  static final File INDEX_DIR = new File("index");
> >
> >
> >
> >  /** Index all text files under a directory. */
> >
> >  public static void main(String[] args) {
> >
> >    String usage = "java org.apache.lucene.demo.IndexFiles
> > <root_directory>";
> >
> >    /*if (args.length == 0) {
> >
> >      System.err.println("Usage: " + usage);
> >
> >      System.exit(1);
> >
> >    }*/
> >
> >
> >
> >    /*if (INDEX_DIR.exists()) {
> >
> >      System.out.println("Cannot save index to '" +INDEX_DIR+ "'
> directory,
> > please delete it first");
> >
> >      System.exit(1);
> >
> >    }*/
> >
> >
> >
> >    //final File docDir = new File(args[0]);
> >
> >    //File docDir = new File(args[0]);
> >
> >    File docDir = new File("F:/bsd-logs/logs");
> >
> >    if (!docDir.exists() || !docDir.canRead()) {
> >
> >      System.out.println("Document directory '"
> +docDir.getAbsolutePath()+
> > "' does not exist or is not readable, please check the path");
> >
> >      System.exit(1);
> >
> >    }
> >
> >
> >
> >    Date start = new Date();
> >
> >    try {
> >
> >      System.out.println("Indexing to directory '" +INDEX_DIR+ "'...");
> >
> >      BufferedReader in = null;
> >
> >      int i = 0;
> >
> >      while (i==0){
> >
> >          IndexWriter writer = new IndexWriter(INDEX_DIR, new
> > StandardAnalyzer(), true);
> >
> >
> >
> >                      indexDocs(writer, docDir);
> >
> >                      System.out.println("Optimizing...");
> >
> >                      writer.optimize();
> >
> >                      in = new BufferedReader(new
> > InputStreamReader(System.in, "UTF-8"));
> >
> >                      i=1;
> >
> >                      /*System.out.println("Enter another directory: ");
> >
> >
> >
> >                        docDir = new File(in.readLine());
> >
> >                        writer.close();
> >
> >                        String args1[] =
> > {"\\users\\baljeet\\documents\\rees\\programs\\
> > <file:///\\users\baljeet\documents\rees\programs\> "};
> >
> >                        DeleteFiles.main(args1);*/
> >
> >     }
> >
> >
> >
> >
> >
> >
> >
> >      Date end = new Date();
> >
> >      System.out.println(end.getTime() - start.getTime() + " total
> > milliseconds");
> >
> >
> >
> >    } catch (IOException e) {
> >
> >      System.out.println(" caught a " + e.getClass() +
> >
> >       "\n with message: " + e.getMessage());
> >
> >    }
> >
> >  }
> >
> >
> >
> >  static void indexDocs(IndexWriter writer, File file)
> >
> >    throws IOException {
> >
> >    // do not try to index files that cannot be read
> >
> >    if (file.canRead()) {
> >
> >      if (file.isDirectory()) {
> >
> >        String[] files = file.list();
> >
> >        // an IO error could occur
> >
> >        if (files != null) {
> >
> >          for (int i = 0; i < files.length; i++) {
> >
> >            indexDocs(writer, new File(file, files[i]));
> >
> >          }
> >
> >        }
> >
> >      } else {
> >
> >        System.out.println("adding " + file);
> >
> >        try {
> >
> >                Document doc = FileDocument.Document(file);
> >
> >                System.out.println("Path = "+doc.getField("path"));
> >
> >          writer.addDocument(FileDocument.Document(file));
> >
> >
> >
> >        }
> >
> >        // at least on windows, some temporary files raise this exception
> > with an "access denied" message
> >
> >        // checking if the file can be read doesn't help
> >
> >        catch (FileNotFoundException fnfe) {
> >
> >          ;
> >
> >        }
> >
> >      }
> >
> >    }
> >
> >  }
> >
> >
> >
> > }
> >
> >
> >
> >
> >
> >
> >
> > SearchFiles.java
> >
> >
> >
> >
> >
> > package org.apache.lucene.demo;
> >
> >
> >
> > /**
> >
> >  * Licensed to the Apache Software Foundation (ASF) under one or more
> >
> >  * contributor license agreements.  See the NOTICE file distributed with
> >
> >  * this work for additional information regarding copyright ownership.
> >
> >  * The ASF licenses this file to You under the Apache License, Version
> 2.0
> >
> >  * (the "License"); you may not use this file except in compliance with
> >
> >  * the License.  You may obtain a copy of the License at
> >
> >  *
> >
> >  *     http://www.apache.org/licenses/LICENSE-2.0
> >
> >  *
> >
> >  * Unless required by applicable law or agreed to in writing, software
> >
> >  * distributed under the License is distributed on an "AS IS" BASIS,
> >
> >  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> > implied.
> >
> >  * See the License for the specific language governing permissions and
> >
> >  * limitations under the License.
> >
> >  */
> >
> >
> >
> > import org.apache.lucene.analysis.Analyzer;
> >
> > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> >
> > import org.apache.lucene.document.Document;
> >
> > import org.apache.lucene.index.FilterIndexReader;
> >
> > import org.apache.lucene.index.IndexReader;
> >
> > import org.apache.lucene.queryParser.QueryParser;
> >
> > import org.apache.lucene.search.Hits;
> >
> > import org.apache.lucene.search.IndexSearcher;
> >
> > import org.apache.lucene.search.Query;
> >
> > import org.apache.lucene.search.Searcher;
> >
> >
> >
> > import java.io.BufferedReader;
> >
> > import java.io.FileReader;
> >
> > import java.io.IOException;
> >
> > import java.io.InputStreamReader;
> >
> > import java.util.Collection;
> >
> > import java.util.Date;
> >
> > import java.util.Hashtable;
> >
> > import java.util.Iterator;
> >
> >
> >
> > /** Simple command-line based search demo. */
> >
> > public class SearchFiles {
> >
> >
> >
> >  /** Use the norms from one field for all fields.  Norms are read into
> > memory,
> >
> >   * using a byte of memory per document per searched field.  This can
> > cause
> >
> >   * search of large collections with a large number of fields to run out
> > of
> >
> >   * memory.  If all of the fields contain only a single token, then the
> > norms
> >
> >   * are all identical, then single norm vector may be shared. */
> >
> >  public static class OneNormsReader extends FilterIndexReader {
> >
> >    private String field;
> >
> >
> >
> >    public OneNormsReader(IndexReader in, String field) {
> >
> >      super(in);
> >
> >      this.field = field;
> >
> >    }
> >
> >
> >
> >    public byte[] norms(String field) throws IOException {
> >
> >      return in.norms(this.field);
> >
> >    }
> >
> >  }
> >
> >
> >
> >  private SearchFiles() {}
> >
> >
> >
> >  /** Simple command-line based search demo. */
> >
> >  public static void main(String[] args) throws Exception {
> >
> >    String usage =
> >
> >      "Usage: java org.apache.lucene.demo.SearchFiles [-index dir]
> [-field
> > f] [-repeat n] [-queries file] [-raw] [-norms field]";
> >
> >    if (args.length > 0 && ("-h".equals(args[0]) ||
> > "-help".equals(args[0]))) {
> >
> >      System.out.println(usage);
> >
> >      System.exit(0);
> >
> >    }
> >
> >
> >
> >    String index = "index";
> >
> >    String field = "contents";
> >
> >    String queries = null;
> >
> >    int repeat = 0;
> >
> >    boolean raw = false;
> >
> >    String normsField = null;
> >
> >
> >
> >    for (int i = 0; i < args.length; i++) {
> >
> >      if ("-index".equals(args[i])) {
> >
> >        index = args[i+1];
> >
> >        i++;
> >
> >      } else if ("-field".equals(args[i])) {
> >
> >        field = args[i+1];
> >
> >        i++;
> >
> >      } else if ("-queries".equals(args[i])) {
> >
> >        queries = args[i+1];
> >
> >        i++;
> >
> >      } else if ("-repeat".equals(args[i])) {
> >
> >        repeat = Integer.parseInt(args[i+1]);
> >
> >        i++;
> >
> >      } else if ("-raw".equals(args[i])) {
> >
> >        raw = true;
> >
> >      } else if ("-norms".equals(args[i])) {
> >
> >        normsField = args[i+1];
> >
> >        i++;
> >
> >      }
> >
> >    }
> >
> >
> >
> >    IndexReader reader = IndexReader.open(index);
> >
> >
> >
> >    if (normsField != null)
> >
> >      reader = new OneNormsReader(reader, normsField);
> >
> >
> >
> >    Collection<String> h =
> > reader.getFieldNames(IndexReader.FieldOption.INDEXED);
> >
> >    Iterator<String> it = h.iterator();
> >
> >    while (it.hasNext()){
> >
> >                System.out.println("Iterator Value = "+it.next());
> >
> >
> >
> >    }
> >
> >
> >
> >
> >
> >
> >
> >    Searcher searcher = new IndexSearcher(reader);
> >
> >    Analyzer analyzer = new StandardAnalyzer();
> >
> >
> >
> >    BufferedReader in = null;
> >
> >    if (queries != null) {
> >
> >      in = new BufferedReader(new FileReader(queries));
> >
> >    } else {
> >
> >      in = new BufferedReader(new InputStreamReader(System.in, "UTF-8"));
> >
> >    }
> >
> >      QueryParser parser = new QueryParser(field, analyzer);
> >
> >    while (true) {
> >
> >      if (queries == null)                        // prompt the user
> >
> >        System.out.println("Enter query: ");
> >
> >
> >
> >      String line = in.readLine();
> >
> >
> >
> >      if (line == null || line.length() == -1)
> >
> >        break;
> >
> >
> >
> >      line = line.trim();
> >
> >      if (line.length() == 0)
> >
> >        break;
> >
> >      System.out.println("line 1= "+line);
> >
> >     // line = QueryParser.escape(line);
> >
> >      System.out.println("line 2= "+line);
> >
> >      Query query = parser.parse(line);
> >
> >
> >
> >      System.out.println("Searching for: " + query.toString(field));
> >
> >
> >
> >      Hits hits = searcher.search(query);
> >
> >
> >
> >
> >
> >      if (repeat > 0) {                           // repeat & time as
> > benchmark
> >
> >        Date start = new Date();
> >
> >        for (int i = 0; i < repeat; i++) {
> >
> >          hits = searcher.search(query);
> >
> >        }
> >
> >        Date end = new Date();
> >
> >        System.out.println("Time: "+(end.getTime()-start.getTime
> ())+"ms");
> >
> >      }
> >
> >
> >
> >
> >
> >      System.out.println(hits.length() + " total matching documents");
> >
> >
> >
> >      final int HITS_PER_PAGE = 10;
> >
> >      for (int start = 0; start < hits.length(); start += HITS_PER_PAGE)
> {
> >
> >        int end = Math.min(hits.length(), start + HITS_PER_PAGE);
> >
> >        for (int i = start; i < end; i++) {
> >
> >
> >
> >          if (raw) {                              // output raw format
> >
> >            System.out.println("doc="+hits.id(i)+"
> score="+hits.score(i));
> >
> >            continue;
> >
> >          }
> >
> >
> >
> >          Document doc = hits.doc(i);
> >
> >          String path = doc.get("path");
> >
> >          if (path != null) {
> >
> >            System.out.println((i+1) + ". " + path);
> >
> >            //getSearchedLine(path, "kvoll");
> >
> >            String title = doc.get("title");
> >
> >            if (title != null) {
> >
> >              System.out.println("   Title: " + doc.get("title"));
> >
> >            }
> >
> >          } else {
> >
> >            System.out.println((i+1) + ". " + "No path for this
> document");
> >
> >          }
> >
> >        }
> >
> >
> >
> >        if (queries != null)                      // non-interactive
> >
> >          break;
> >
> >
> >
> >        if (hits.length() > end) {
> >
> >          System.out.println("more (y/n) ? ");
> >
> >          line = in.readLine();
> >
> >          if (line.length() == 0 || line.charAt(0) == 'n')
> >
> >            break;
> >
> >        }
> >
> >      }
> >
> >    }
> >
> >    reader.close();
> >
> >  }
> >
> > }
> >
> >
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 23:26:01 2007
Return-Path: <java-user-return-31597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44842 invoked from network); 20 Dec 2007 23:26:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 23:26:01 -0000
Received: (qmail 50462 invoked by uid 500); 20 Dec 2007 23:25:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50438 invoked by uid 500); 20 Dec 2007 23:25:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50424 invoked by uid 99); 20 Dec 2007 23:25:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 15:25:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 23:25:19 +0000
Received: by fg-out-1718.google.com with SMTP id d23so34618fga.27
        for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 15:25:21 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=0CcZaYi7yOVe/j3IkAaZ3eB+s5oOaJp0z9dJu0SuZ7k=;
        b=UcH2TpLLDR5/lH+5Yo/lJ56594Rm2hnRImTOLxocCPNM0420FvEPCVBHnrDmlqNyRbuPPDW+ZwAezG3oMigcKxRABxd4NRsAFKN2+5pJ7XKap2cpRcXYlSvJT1ZVZknw1Z70z6QLJ6rOKycZpiNptCf/O7ghOPc0GIpv6HlWU/o=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=pgAO2P+sUZeKXlAW1STjih5GpObE9vx5qXoHLbtv6xy5gNgZZyFSsSz2lpQWjrlT4MOq8RBZPdsxH4ijn6yIHJ3a1Mq3F915stvPFhkVtI27nciBpTYB/P43dWl4a0Sg0ZCdGLGVzeAwY5o3f5coJEvwDdLVdhMDoXwjvcVb/Io=
Received: by 10.82.149.8 with SMTP id w8mr986033bud.24.1198193121604;
        Thu, 20 Dec 2007 15:25:21 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Thu, 20 Dec 2007 15:25:21 -0800 (PST)
Message-ID: <359a92830712201525g225801bbg2bfcda1e08caa126@mail.gmail.com>
Date: Thu, 20 Dec 2007 18:25:21 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with Escape characters in lucene demo search
In-Reply-To: <015801c84356$8cb94660$a62bd320$@ca>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22166_3261347.1198193121592"
References: <00e801c8428b$807d93e0$8178bba0$@ca>
	 <359a92830712191641g1c1983c6r2c1fc471a4b5247f@mail.gmail.com>
	 <012101c842bb$37584b30$a608e190$@ca>
	 <359a92830712200636w26deccd8pbd68fdec1154ade8@mail.gmail.com>
	 <015801c84356$8cb94660$a62bd320$@ca>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22166_3261347.1198193121592
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Lucene, by default, only indexes the first 10,000 tokens and throws
the rest away. You can change this via IndexWriter.SetMaxFieldLength.

2G is a huge file. Are you indexing all that or are you indexing only
portions?

Erick

On Dec 20, 2007 5:20 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:

> Hi Erick
>
> Thanks. I found something interesting. I was indexing huge text files
> (>2GB)
> and the search was not returning escape characters. However, when I moved
> the line to a smaller file (20MB), it works fine. Is there a limit on file
> size search by Lucene or would you know how do escape characters search
> performs when file is as big as mine.
>
> B
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: December-20-07 6:36 AM
> To: java-user@lucene.apache.org
> Subject: Re: Problem with Escape characters in lucene demo search
>
> use Luke. Google Lucene luke and you'll find it.....
>
> You can use it to examine the contents of your index
> in many different ways. It's invaluable when exploring
> the different analyzers and making sure that your index
> has what you *think* it has.
>
> Erick
>
> On Dec 19, 2007 10:48 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:
>
> > How do i check in my index. It looks like bytecode to me. My searched
> file
> > does contain word "login" with quotes.
> >
> > B
> >
> > -----Original Message-----
> > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > Sent: December-19-07 4:41 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Problem with Escape characters in lucene demo search
> >
> > I'm pretty sure StandardAnalyzer is stripping these off. Have you looked
> > in your index to see if "longin" (with quotes) is even in there? I think
> > you'll find that it's not.
> >
> > Best
> > Erick
> >
> > On Dec 19, 2007 5:07 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:
> >
> > > Hi there
> > >
> > >
> > >
> > > I am having a problem in using escape characters with lucene demo
> code.
> > I
> > > used the following code for IndexFiles and SearchFiles. The code works
> > > fine
> > > for regular searching and also with wildcard. However, when I try to
> use
> > > escape characters, somehow it strips them off. For example: when i
> > search
> > > for  "login" through "\"login\"" or for that matter try to use any
> > escape
> > > character, lucene strips the escape characters and looks for the text
> > only
> > > (login as against "login")
> > >
> > >
> > >
> > > Can someone help please.
> > >
> > >
> > >
> > > Cheers
> > >
> > > B
> > >
> > >
> > >
> > >
> > >
> > > IndexFiles.java
> > >
> > >
> > >
> > > package org.apache.lucene.demo;
> > >
> > >
> > >
> > > /**
> > >
> > >  * Licensed to the Apache Software Foundation (ASF) under one or more
> > >
> > >  * contributor license agreements.  See the NOTICE file distributed
> with
> > >
> > >  * this work for additional information regarding copyright ownership.
> > >
> > >  * The ASF licenses this file to You under the Apache License, Version
> > 2.0
> > >
> > >  * (the "License"); you may not use this file except in compliance
> with
> > >
> > >  * the License.  You may obtain a copy of the License at
> > >
> > >  *
> > >
> > >  *     http://www.apache.org/licenses/LICENSE-2.0
> > >
> > >  *
> > >
> > >  * Unless required by applicable law or agreed to in writing, software
> > >
> > >  * distributed under the License is distributed on an "AS IS" BASIS,
> > >
> > >  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> > > implied.
> > >
> > >  * See the License for the specific language governing permissions and
> > >
> > >  * limitations under the License.
> > >
> > >  */
> > >
> > >
> > >
> > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > >
> > > import org.apache.lucene.document.Document;
> > >
> > > import org.apache.lucene.index.IndexWriter;
> > >
> > >
> > >
> > > import java.io.BufferedReader;
> > >
> > > import java.io.File;
> > >
> > > import java.io.FileNotFoundException;
> > >
> > > import java.io.IOException;
> > >
> > > import java.io.InputStreamReader;
> > >
> > > import java.util.Date;
> > >
> > >
> > >
> > > /** Index all text files under a directory. */
> > >
> > > public class IndexFiles {
> > >
> > >
> > >
> > >  private IndexFiles() {}
> > >
> > >
> > >
> > >  static final File INDEX_DIR = new File("index");
> > >
> > >
> > >
> > >  /** Index all text files under a directory. */
> > >
> > >  public static void main(String[] args) {
> > >
> > >    String usage = "java org.apache.lucene.demo.IndexFiles
> > > <root_directory>";
> > >
> > >    /*if (args.length == 0) {
> > >
> > >      System.err.println("Usage: " + usage);
> > >
> > >      System.exit(1);
> > >
> > >    }*/
> > >
> > >
> > >
> > >    /*if (INDEX_DIR.exists()) {
> > >
> > >      System.out.println("Cannot save index to '" +INDEX_DIR+ "'
> > directory,
> > > please delete it first");
> > >
> > >      System.exit(1);
> > >
> > >    }*/
> > >
> > >
> > >
> > >    //final File docDir = new File(args[0]);
> > >
> > >    //File docDir = new File(args[0]);
> > >
> > >    File docDir = new File("F:/bsd-logs/logs");
> > >
> > >    if (!docDir.exists() || !docDir.canRead()) {
> > >
> > >      System.out.println("Document directory '"
> > +docDir.getAbsolutePath()+
> > > "' does not exist or is not readable, please check the path");
> > >
> > >      System.exit(1);
> > >
> > >    }
> > >
> > >
> > >
> > >    Date start = new Date();
> > >
> > >    try {
> > >
> > >      System.out.println("Indexing to directory '" +INDEX_DIR+ "'...");
> > >
> > >      BufferedReader in = null;
> > >
> > >      int i = 0;
> > >
> > >      while (i==0){
> > >
> > >          IndexWriter writer = new IndexWriter(INDEX_DIR, new
> > > StandardAnalyzer(), true);
> > >
> > >
> > >
> > >                      indexDocs(writer, docDir);
> > >
> > >                      System.out.println("Optimizing...");
> > >
> > >                      writer.optimize();
> > >
> > >                      in = new BufferedReader(new
> > > InputStreamReader(System.in, "UTF-8"));
> > >
> > >                      i=1;
> > >
> > >                      /*System.out.println("Enter another directory:
> ");
> > >
> > >
> > >
> > >                        docDir = new File(in.readLine());
> > >
> > >                        writer.close();
> > >
> > >                        String args1[] =
> > > {"\\users\\baljeet\\documents\\rees\\programs\\
> > > <file:///\\users\baljeet\documents\rees\programs\> "};
> > >
> > >                        DeleteFiles.main(args1);*/
> > >
> > >     }
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >      Date end = new Date();
> > >
> > >      System.out.println(end.getTime() - start.getTime() + " total
> > > milliseconds");
> > >
> > >
> > >
> > >    } catch (IOException e) {
> > >
> > >      System.out.println(" caught a " + e.getClass() +
> > >
> > >       "\n with message: " + e.getMessage());
> > >
> > >    }
> > >
> > >  }
> > >
> > >
> > >
> > >  static void indexDocs(IndexWriter writer, File file)
> > >
> > >    throws IOException {
> > >
> > >    // do not try to index files that cannot be read
> > >
> > >    if (file.canRead()) {
> > >
> > >      if (file.isDirectory()) {
> > >
> > >        String[] files = file.list();
> > >
> > >        // an IO error could occur
> > >
> > >        if (files != null) {
> > >
> > >          for (int i = 0; i < files.length; i++) {
> > >
> > >            indexDocs(writer, new File(file, files[i]));
> > >
> > >          }
> > >
> > >        }
> > >
> > >      } else {
> > >
> > >        System.out.println("adding " + file);
> > >
> > >        try {
> > >
> > >                Document doc = FileDocument.Document(file);
> > >
> > >                System.out.println("Path = "+doc.getField("path"));
> > >
> > >          writer.addDocument(FileDocument.Document(file));
> > >
> > >
> > >
> > >        }
> > >
> > >        // at least on windows, some temporary files raise this
> exception
> > > with an "access denied" message
> > >
> > >        // checking if the file can be read doesn't help
> > >
> > >        catch (FileNotFoundException fnfe) {
> > >
> > >          ;
> > >
> > >        }
> > >
> > >      }
> > >
> > >    }
> > >
> > >  }
> > >
> > >
> > >
> > > }
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > > SearchFiles.java
> > >
> > >
> > >
> > >
> > >
> > > package org.apache.lucene.demo;
> > >
> > >
> > >
> > > /**
> > >
> > >  * Licensed to the Apache Software Foundation (ASF) under one or more
> > >
> > >  * contributor license agreements.  See the NOTICE file distributed
> with
> > >
> > >  * this work for additional information regarding copyright ownership.
> > >
> > >  * The ASF licenses this file to You under the Apache License, Version
> > 2.0
> > >
> > >  * (the "License"); you may not use this file except in compliance
> with
> > >
> > >  * the License.  You may obtain a copy of the License at
> > >
> > >  *
> > >
> > >  *     http://www.apache.org/licenses/LICENSE-2.0
> > >
> > >  *
> > >
> > >  * Unless required by applicable law or agreed to in writing, software
> > >
> > >  * distributed under the License is distributed on an "AS IS" BASIS,
> > >
> > >  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> > > implied.
> > >
> > >  * See the License for the specific language governing permissions and
> > >
> > >  * limitations under the License.
> > >
> > >  */
> > >
> > >
> > >
> > > import org.apache.lucene.analysis.Analyzer;
> > >
> > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > >
> > > import org.apache.lucene.document.Document;
> > >
> > > import org.apache.lucene.index.FilterIndexReader;
> > >
> > > import org.apache.lucene.index.IndexReader;
> > >
> > > import org.apache.lucene.queryParser.QueryParser;
> > >
> > > import org.apache.lucene.search.Hits;
> > >
> > > import org.apache.lucene.search.IndexSearcher;
> > >
> > > import org.apache.lucene.search.Query;
> > >
> > > import org.apache.lucene.search.Searcher;
> > >
> > >
> > >
> > > import java.io.BufferedReader;
> > >
> > > import java.io.FileReader;
> > >
> > > import java.io.IOException;
> > >
> > > import java.io.InputStreamReader;
> > >
> > > import java.util.Collection;
> > >
> > > import java.util.Date;
> > >
> > > import java.util.Hashtable;
> > >
> > > import java.util.Iterator;
> > >
> > >
> > >
> > > /** Simple command-line based search demo. */
> > >
> > > public class SearchFiles {
> > >
> > >
> > >
> > >  /** Use the norms from one field for all fields.  Norms are read into
> > > memory,
> > >
> > >   * using a byte of memory per document per searched field.  This can
> > > cause
> > >
> > >   * search of large collections with a large number of fields to run
> out
> > > of
> > >
> > >   * memory.  If all of the fields contain only a single token, then
> the
> > > norms
> > >
> > >   * are all identical, then single norm vector may be shared. */
> > >
> > >  public static class OneNormsReader extends FilterIndexReader {
> > >
> > >    private String field;
> > >
> > >
> > >
> > >    public OneNormsReader(IndexReader in, String field) {
> > >
> > >      super(in);
> > >
> > >      this.field = field;
> > >
> > >    }
> > >
> > >
> > >
> > >    public byte[] norms(String field) throws IOException {
> > >
> > >      return in.norms(this.field);
> > >
> > >    }
> > >
> > >  }
> > >
> > >
> > >
> > >  private SearchFiles() {}
> > >
> > >
> > >
> > >  /** Simple command-line based search demo. */
> > >
> > >  public static void main(String[] args) throws Exception {
> > >
> > >    String usage =
> > >
> > >      "Usage: java org.apache.lucene.demo.SearchFiles [-index dir]
> > [-field
> > > f] [-repeat n] [-queries file] [-raw] [-norms field]";
> > >
> > >    if (args.length > 0 && ("-h".equals(args[0]) ||
> > > "-help".equals(args[0]))) {
> > >
> > >      System.out.println(usage);
> > >
> > >      System.exit(0);
> > >
> > >    }
> > >
> > >
> > >
> > >    String index = "index";
> > >
> > >    String field = "contents";
> > >
> > >    String queries = null;
> > >
> > >    int repeat = 0;
> > >
> > >    boolean raw = false;
> > >
> > >    String normsField = null;
> > >
> > >
> > >
> > >    for (int i = 0; i < args.length; i++) {
> > >
> > >      if ("-index".equals(args[i])) {
> > >
> > >        index = args[i+1];
> > >
> > >        i++;
> > >
> > >      } else if ("-field".equals(args[i])) {
> > >
> > >        field = args[i+1];
> > >
> > >        i++;
> > >
> > >      } else if ("-queries".equals(args[i])) {
> > >
> > >        queries = args[i+1];
> > >
> > >        i++;
> > >
> > >      } else if ("-repeat".equals(args[i])) {
> > >
> > >        repeat = Integer.parseInt(args[i+1]);
> > >
> > >        i++;
> > >
> > >      } else if ("-raw".equals(args[i])) {
> > >
> > >        raw = true;
> > >
> > >      } else if ("-norms".equals(args[i])) {
> > >
> > >        normsField = args[i+1];
> > >
> > >        i++;
> > >
> > >      }
> > >
> > >    }
> > >
> > >
> > >
> > >    IndexReader reader = IndexReader.open(index);
> > >
> > >
> > >
> > >    if (normsField != null)
> > >
> > >      reader = new OneNormsReader(reader, normsField);
> > >
> > >
> > >
> > >    Collection<String> h =
> > > reader.getFieldNames(IndexReader.FieldOption.INDEXED);
> > >
> > >    Iterator<String> it = h.iterator();
> > >
> > >    while (it.hasNext()){
> > >
> > >                System.out.println("Iterator Value = "+it.next());
> > >
> > >
> > >
> > >    }
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >    Searcher searcher = new IndexSearcher(reader);
> > >
> > >    Analyzer analyzer = new StandardAnalyzer();
> > >
> > >
> > >
> > >    BufferedReader in = null;
> > >
> > >    if (queries != null) {
> > >
> > >      in = new BufferedReader(new FileReader(queries));
> > >
> > >    } else {
> > >
> > >      in = new BufferedReader(new InputStreamReader(System.in,
> "UTF-8"));
> > >
> > >    }
> > >
> > >      QueryParser parser = new QueryParser(field, analyzer);
> > >
> > >    while (true) {
> > >
> > >      if (queries == null)                        // prompt the user
> > >
> > >        System.out.println("Enter query: ");
> > >
> > >
> > >
> > >      String line = in.readLine();
> > >
> > >
> > >
> > >      if (line == null || line.length() == -1)
> > >
> > >        break;
> > >
> > >
> > >
> > >      line = line.trim();
> > >
> > >      if (line.length() == 0)
> > >
> > >        break;
> > >
> > >      System.out.println("line 1= "+line);
> > >
> > >     // line = QueryParser.escape(line);
> > >
> > >      System.out.println("line 2= "+line);
> > >
> > >      Query query = parser.parse(line);
> > >
> > >
> > >
> > >      System.out.println("Searching for: " + query.toString(field));
> > >
> > >
> > >
> > >      Hits hits = searcher.search(query);
> > >
> > >
> > >
> > >
> > >
> > >      if (repeat > 0) {                           // repeat & time as
> > > benchmark
> > >
> > >        Date start = new Date();
> > >
> > >        for (int i = 0; i < repeat; i++) {
> > >
> > >          hits = searcher.search(query);
> > >
> > >        }
> > >
> > >        Date end = new Date();
> > >
> > >        System.out.println("Time: "+(end.getTime()-start.getTime
> > ())+"ms");
> > >
> > >      }
> > >
> > >
> > >
> > >
> > >
> > >      System.out.println(hits.length() + " total matching documents");
> > >
> > >
> > >
> > >      final int HITS_PER_PAGE = 10;
> > >
> > >      for (int start = 0; start < hits.length(); start +=
> HITS_PER_PAGE)
> > {
> > >
> > >        int end = Math.min(hits.length(), start + HITS_PER_PAGE);
> > >
> > >        for (int i = start; i < end; i++) {
> > >
> > >
> > >
> > >          if (raw) {                              // output raw format
> > >
> > >            System.out.println("doc="+hits.id(i)+"
> > score="+hits.score(i));
> > >
> > >            continue;
> > >
> > >          }
> > >
> > >
> > >
> > >          Document doc = hits.doc(i);
> > >
> > >          String path = doc.get("path");
> > >
> > >          if (path != null) {
> > >
> > >            System.out.println((i+1) + ". " + path);
> > >
> > >            //getSearchedLine(path, "kvoll");
> > >
> > >            String title = doc.get("title");
> > >
> > >            if (title != null) {
> > >
> > >              System.out.println("   Title: " + doc.get("title"));
> > >
> > >            }
> > >
> > >          } else {
> > >
> > >            System.out.println((i+1) + ". " + "No path for this
> > document");
> > >
> > >          }
> > >
> > >        }
> > >
> > >
> > >
> > >        if (queries != null)                      // non-interactive
> > >
> > >          break;
> > >
> > >
> > >
> > >        if (hits.length() > end) {
> > >
> > >          System.out.println("more (y/n) ? ");
> > >
> > >          line = in.readLine();
> > >
> > >          if (line.length() == 0 || line.charAt(0) == 'n')
> > >
> > >            break;
> > >
> > >        }
> > >
> > >      }
> > >
> > >    }
> > >
> > >    reader.close();
> > >
> > >  }
> > >
> > > }
> > >
> > >
> > >
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_22166_3261347.1198193121592--

From java-user-return-31598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 20 23:55:32 2007
Return-Path: <java-user-return-31598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50060 invoked from network); 20 Dec 2007 23:55:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 20 Dec 2007 23:55:32 -0000
Received: (qmail 73107 invoked by uid 500); 20 Dec 2007 23:55:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73075 invoked by uid 500); 20 Dec 2007 23:55:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73061 invoked by uid 99); 20 Dec 2007 23:55:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 15:55:15 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [142.58.101.21] (HELO rm-rstar.sfu.ca) (142.58.101.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 23:54:58 +0000
Received: from BaljeetPC (d142-058-189-048.surrey.sfu.ca [142.58.189.48])
	by rm-rstar.sfu.ca (8.13.6/8.13.4/SFU-5.0H) with ESMTP id lBKNsn1M028619
	for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 15:54:49 -0800 (PST)
X-Spam-Level: Spam-Level 
From: "Baljeet Dhaliwal" <bsd@sfu.ca>
To: <java-user@lucene.apache.org>
References: <00e801c8428b$807d93e0$8178bba0$@ca>	 <359a92830712191641g1c1983c6r2c1fc471a4b5247f@mail.gmail.com>	 <012101c842bb$37584b30$a608e190$@ca>	 <359a92830712200636w26deccd8pbd68fdec1154ade8@mail.gmail.com>	 <015801c84356$8cb94660$a62bd320$@ca> <359a92830712201525g225801bbg2bfcda1e08caa126@mail.gmail.com>
In-Reply-To: <359a92830712201525g225801bbg2bfcda1e08caa126@mail.gmail.com>
Subject: RE: Problem with Escape characters in lucene demo search
Date: Thu, 20 Dec 2007 15:54:45 -0800
Message-ID: <016201c84363$b255cd50$170167f0$@ca>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AchDX8EP7nltyqHaQkK2gUziZ6NLvwAARejA
Content-Language: en-ca
X-Virus-Checked: Checked by ClamAV on apache.org

Interesting!!!! I am trying to make our logs searchable and thought of
trying Lucene. I am talking of several (around 50-60) 2GB files to index.
Would it scale? How can I index portion of document? Also like with any log
, there is a pattern and most of the stuff in there is redundant. Can i
discard certain words to make the index small.

Cheers
B


-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: December-20-07 3:25 PM
To: java-user@lucene.apache.org
Subject: Re: Problem with Escape characters in lucene demo search

Lucene, by default, only indexes the first 10,000 tokens and throws
the rest away. You can change this via IndexWriter.SetMaxFieldLength.

2G is a huge file. Are you indexing all that or are you indexing only
portions?

Erick

On Dec 20, 2007 5:20 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:

> Hi Erick
>
> Thanks. I found something interesting. I was indexing huge text files
> (>2GB)
> and the search was not returning escape characters. However, when I moved
> the line to a smaller file (20MB), it works fine. Is there a limit on file
> size search by Lucene or would you know how do escape characters search
> performs when file is as big as mine.
>
> B
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: December-20-07 6:36 AM
> To: java-user@lucene.apache.org
> Subject: Re: Problem with Escape characters in lucene demo search
>
> use Luke. Google Lucene luke and you'll find it.....
>
> You can use it to examine the contents of your index
> in many different ways. It's invaluable when exploring
> the different analyzers and making sure that your index
> has what you *think* it has.
>
> Erick
>
> On Dec 19, 2007 10:48 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:
>
> > How do i check in my index. It looks like bytecode to me. My searched
> file
> > does contain word "login" with quotes.
> >
> > B
> >
> > -----Original Message-----
> > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > Sent: December-19-07 4:41 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: Problem with Escape characters in lucene demo search
> >
> > I'm pretty sure StandardAnalyzer is stripping these off. Have you looked
> > in your index to see if "longin" (with quotes) is even in there? I think
> > you'll find that it's not.
> >
> > Best
> > Erick
> >
> > On Dec 19, 2007 5:07 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:
> >
> > > Hi there
> > >
> > >
> > >
> > > I am having a problem in using escape characters with lucene demo
> code.
> > I
> > > used the following code for IndexFiles and SearchFiles. The code works
> > > fine
> > > for regular searching and also with wildcard. However, when I try to
> use
> > > escape characters, somehow it strips them off. For example: when i
> > search
> > > for  "login" through "\"login\"" or for that matter try to use any
> > escape
> > > character, lucene strips the escape characters and looks for the text
> > only
> > > (login as against "login")
> > >
> > >
> > >
> > > Can someone help please.
> > >
> > >
> > >
> > > Cheers
> > >
> > > B
> > >
> > >
> > >
> > >
> > >
> > > IndexFiles.java
> > >
> > >
> > >
> > > package org.apache.lucene.demo;
> > >
> > >
> > >
> > > /**
> > >
> > >  * Licensed to the Apache Software Foundation (ASF) under one or more
> > >
> > >  * contributor license agreements.  See the NOTICE file distributed
> with
> > >
> > >  * this work for additional information regarding copyright ownership.
> > >
> > >  * The ASF licenses this file to You under the Apache License, Version
> > 2.0
> > >
> > >  * (the "License"); you may not use this file except in compliance
> with
> > >
> > >  * the License.  You may obtain a copy of the License at
> > >
> > >  *
> > >
> > >  *     http://www.apache.org/licenses/LICENSE-2.0
> > >
> > >  *
> > >
> > >  * Unless required by applicable law or agreed to in writing, software
> > >
> > >  * distributed under the License is distributed on an "AS IS" BASIS,
> > >
> > >  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> > > implied.
> > >
> > >  * See the License for the specific language governing permissions and
> > >
> > >  * limitations under the License.
> > >
> > >  */
> > >
> > >
> > >
> > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > >
> > > import org.apache.lucene.document.Document;
> > >
> > > import org.apache.lucene.index.IndexWriter;
> > >
> > >
> > >
> > > import java.io.BufferedReader;
> > >
> > > import java.io.File;
> > >
> > > import java.io.FileNotFoundException;
> > >
> > > import java.io.IOException;
> > >
> > > import java.io.InputStreamReader;
> > >
> > > import java.util.Date;
> > >
> > >
> > >
> > > /** Index all text files under a directory. */
> > >
> > > public class IndexFiles {
> > >
> > >
> > >
> > >  private IndexFiles() {}
> > >
> > >
> > >
> > >  static final File INDEX_DIR = new File("index");
> > >
> > >
> > >
> > >  /** Index all text files under a directory. */
> > >
> > >  public static void main(String[] args) {
> > >
> > >    String usage = "java org.apache.lucene.demo.IndexFiles
> > > <root_directory>";
> > >
> > >    /*if (args.length == 0) {
> > >
> > >      System.err.println("Usage: " + usage);
> > >
> > >      System.exit(1);
> > >
> > >    }*/
> > >
> > >
> > >
> > >    /*if (INDEX_DIR.exists()) {
> > >
> > >      System.out.println("Cannot save index to '" +INDEX_DIR+ "'
> > directory,
> > > please delete it first");
> > >
> > >      System.exit(1);
> > >
> > >    }*/
> > >
> > >
> > >
> > >    //final File docDir = new File(args[0]);
> > >
> > >    //File docDir = new File(args[0]);
> > >
> > >    File docDir = new File("F:/bsd-logs/logs");
> > >
> > >    if (!docDir.exists() || !docDir.canRead()) {
> > >
> > >      System.out.println("Document directory '"
> > +docDir.getAbsolutePath()+
> > > "' does not exist or is not readable, please check the path");
> > >
> > >      System.exit(1);
> > >
> > >    }
> > >
> > >
> > >
> > >    Date start = new Date();
> > >
> > >    try {
> > >
> > >      System.out.println("Indexing to directory '" +INDEX_DIR+ "'...");
> > >
> > >      BufferedReader in = null;
> > >
> > >      int i = 0;
> > >
> > >      while (i==0){
> > >
> > >          IndexWriter writer = new IndexWriter(INDEX_DIR, new
> > > StandardAnalyzer(), true);
> > >
> > >
> > >
> > >                      indexDocs(writer, docDir);
> > >
> > >                      System.out.println("Optimizing...");
> > >
> > >                      writer.optimize();
> > >
> > >                      in = new BufferedReader(new
> > > InputStreamReader(System.in, "UTF-8"));
> > >
> > >                      i=1;
> > >
> > >                      /*System.out.println("Enter another directory:
> ");
> > >
> > >
> > >
> > >                        docDir = new File(in.readLine());
> > >
> > >                        writer.close();
> > >
> > >                        String args1[] =
> > > {"\\users\\baljeet\\documents\\rees\\programs\\
> > > <file:///\\users\baljeet\documents\rees\programs\> "};
> > >
> > >                        DeleteFiles.main(args1);*/
> > >
> > >     }
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >      Date end = new Date();
> > >
> > >      System.out.println(end.getTime() - start.getTime() + " total
> > > milliseconds");
> > >
> > >
> > >
> > >    } catch (IOException e) {
> > >
> > >      System.out.println(" caught a " + e.getClass() +
> > >
> > >       "\n with message: " + e.getMessage());
> > >
> > >    }
> > >
> > >  }
> > >
> > >
> > >
> > >  static void indexDocs(IndexWriter writer, File file)
> > >
> > >    throws IOException {
> > >
> > >    // do not try to index files that cannot be read
> > >
> > >    if (file.canRead()) {
> > >
> > >      if (file.isDirectory()) {
> > >
> > >        String[] files = file.list();
> > >
> > >        // an IO error could occur
> > >
> > >        if (files != null) {
> > >
> > >          for (int i = 0; i < files.length; i++) {
> > >
> > >            indexDocs(writer, new File(file, files[i]));
> > >
> > >          }
> > >
> > >        }
> > >
> > >      } else {
> > >
> > >        System.out.println("adding " + file);
> > >
> > >        try {
> > >
> > >                Document doc = FileDocument.Document(file);
> > >
> > >                System.out.println("Path = "+doc.getField("path"));
> > >
> > >          writer.addDocument(FileDocument.Document(file));
> > >
> > >
> > >
> > >        }
> > >
> > >        // at least on windows, some temporary files raise this
> exception
> > > with an "access denied" message
> > >
> > >        // checking if the file can be read doesn't help
> > >
> > >        catch (FileNotFoundException fnfe) {
> > >
> > >          ;
> > >
> > >        }
> > >
> > >      }
> > >
> > >    }
> > >
> > >  }
> > >
> > >
> > >
> > > }
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > > SearchFiles.java
> > >
> > >
> > >
> > >
> > >
> > > package org.apache.lucene.demo;
> > >
> > >
> > >
> > > /**
> > >
> > >  * Licensed to the Apache Software Foundation (ASF) under one or more
> > >
> > >  * contributor license agreements.  See the NOTICE file distributed
> with
> > >
> > >  * this work for additional information regarding copyright ownership.
> > >
> > >  * The ASF licenses this file to You under the Apache License, Version
> > 2.0
> > >
> > >  * (the "License"); you may not use this file except in compliance
> with
> > >
> > >  * the License.  You may obtain a copy of the License at
> > >
> > >  *
> > >
> > >  *     http://www.apache.org/licenses/LICENSE-2.0
> > >
> > >  *
> > >
> > >  * Unless required by applicable law or agreed to in writing, software
> > >
> > >  * distributed under the License is distributed on an "AS IS" BASIS,
> > >
> > >  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> > > implied.
> > >
> > >  * See the License for the specific language governing permissions and
> > >
> > >  * limitations under the License.
> > >
> > >  */
> > >
> > >
> > >
> > > import org.apache.lucene.analysis.Analyzer;
> > >
> > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > >
> > > import org.apache.lucene.document.Document;
> > >
> > > import org.apache.lucene.index.FilterIndexReader;
> > >
> > > import org.apache.lucene.index.IndexReader;
> > >
> > > import org.apache.lucene.queryParser.QueryParser;
> > >
> > > import org.apache.lucene.search.Hits;
> > >
> > > import org.apache.lucene.search.IndexSearcher;
> > >
> > > import org.apache.lucene.search.Query;
> > >
> > > import org.apache.lucene.search.Searcher;
> > >
> > >
> > >
> > > import java.io.BufferedReader;
> > >
> > > import java.io.FileReader;
> > >
> > > import java.io.IOException;
> > >
> > > import java.io.InputStreamReader;
> > >
> > > import java.util.Collection;
> > >
> > > import java.util.Date;
> > >
> > > import java.util.Hashtable;
> > >
> > > import java.util.Iterator;
> > >
> > >
> > >
> > > /** Simple command-line based search demo. */
> > >
> > > public class SearchFiles {
> > >
> > >
> > >
> > >  /** Use the norms from one field for all fields.  Norms are read into
> > > memory,
> > >
> > >   * using a byte of memory per document per searched field.  This can
> > > cause
> > >
> > >   * search of large collections with a large number of fields to run
> out
> > > of
> > >
> > >   * memory.  If all of the fields contain only a single token, then
> the
> > > norms
> > >
> > >   * are all identical, then single norm vector may be shared. */
> > >
> > >  public static class OneNormsReader extends FilterIndexReader {
> > >
> > >    private String field;
> > >
> > >
> > >
> > >    public OneNormsReader(IndexReader in, String field) {
> > >
> > >      super(in);
> > >
> > >      this.field = field;
> > >
> > >    }
> > >
> > >
> > >
> > >    public byte[] norms(String field) throws IOException {
> > >
> > >      return in.norms(this.field);
> > >
> > >    }
> > >
> > >  }
> > >
> > >
> > >
> > >  private SearchFiles() {}
> > >
> > >
> > >
> > >  /** Simple command-line based search demo. */
> > >
> > >  public static void main(String[] args) throws Exception {
> > >
> > >    String usage =
> > >
> > >      "Usage: java org.apache.lucene.demo.SearchFiles [-index dir]
> > [-field
> > > f] [-repeat n] [-queries file] [-raw] [-norms field]";
> > >
> > >    if (args.length > 0 && ("-h".equals(args[0]) ||
> > > "-help".equals(args[0]))) {
> > >
> > >      System.out.println(usage);
> > >
> > >      System.exit(0);
> > >
> > >    }
> > >
> > >
> > >
> > >    String index = "index";
> > >
> > >    String field = "contents";
> > >
> > >    String queries = null;
> > >
> > >    int repeat = 0;
> > >
> > >    boolean raw = false;
> > >
> > >    String normsField = null;
> > >
> > >
> > >
> > >    for (int i = 0; i < args.length; i++) {
> > >
> > >      if ("-index".equals(args[i])) {
> > >
> > >        index = args[i+1];
> > >
> > >        i++;
> > >
> > >      } else if ("-field".equals(args[i])) {
> > >
> > >        field = args[i+1];
> > >
> > >        i++;
> > >
> > >      } else if ("-queries".equals(args[i])) {
> > >
> > >        queries = args[i+1];
> > >
> > >        i++;
> > >
> > >      } else if ("-repeat".equals(args[i])) {
> > >
> > >        repeat = Integer.parseInt(args[i+1]);
> > >
> > >        i++;
> > >
> > >      } else if ("-raw".equals(args[i])) {
> > >
> > >        raw = true;
> > >
> > >      } else if ("-norms".equals(args[i])) {
> > >
> > >        normsField = args[i+1];
> > >
> > >        i++;
> > >
> > >      }
> > >
> > >    }
> > >
> > >
> > >
> > >    IndexReader reader = IndexReader.open(index);
> > >
> > >
> > >
> > >    if (normsField != null)
> > >
> > >      reader = new OneNormsReader(reader, normsField);
> > >
> > >
> > >
> > >    Collection<String> h =
> > > reader.getFieldNames(IndexReader.FieldOption.INDEXED);
> > >
> > >    Iterator<String> it = h.iterator();
> > >
> > >    while (it.hasNext()){
> > >
> > >                System.out.println("Iterator Value = "+it.next());
> > >
> > >
> > >
> > >    }
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >    Searcher searcher = new IndexSearcher(reader);
> > >
> > >    Analyzer analyzer = new StandardAnalyzer();
> > >
> > >
> > >
> > >    BufferedReader in = null;
> > >
> > >    if (queries != null) {
> > >
> > >      in = new BufferedReader(new FileReader(queries));
> > >
> > >    } else {
> > >
> > >      in = new BufferedReader(new InputStreamReader(System.in,
> "UTF-8"));
> > >
> > >    }
> > >
> > >      QueryParser parser = new QueryParser(field, analyzer);
> > >
> > >    while (true) {
> > >
> > >      if (queries == null)                        // prompt the user
> > >
> > >        System.out.println("Enter query: ");
> > >
> > >
> > >
> > >      String line = in.readLine();
> > >
> > >
> > >
> > >      if (line == null || line.length() == -1)
> > >
> > >        break;
> > >
> > >
> > >
> > >      line = line.trim();
> > >
> > >      if (line.length() == 0)
> > >
> > >        break;
> > >
> > >      System.out.println("line 1= "+line);
> > >
> > >     // line = QueryParser.escape(line);
> > >
> > >      System.out.println("line 2= "+line);
> > >
> > >      Query query = parser.parse(line);
> > >
> > >
> > >
> > >      System.out.println("Searching for: " + query.toString(field));
> > >
> > >
> > >
> > >      Hits hits = searcher.search(query);
> > >
> > >
> > >
> > >
> > >
> > >      if (repeat > 0) {                           // repeat & time as
> > > benchmark
> > >
> > >        Date start = new Date();
> > >
> > >        for (int i = 0; i < repeat; i++) {
> > >
> > >          hits = searcher.search(query);
> > >
> > >        }
> > >
> > >        Date end = new Date();
> > >
> > >        System.out.println("Time: "+(end.getTime()-start.getTime
> > ())+"ms");
> > >
> > >      }
> > >
> > >
> > >
> > >
> > >
> > >      System.out.println(hits.length() + " total matching documents");
> > >
> > >
> > >
> > >      final int HITS_PER_PAGE = 10;
> > >
> > >      for (int start = 0; start < hits.length(); start +=
> HITS_PER_PAGE)
> > {
> > >
> > >        int end = Math.min(hits.length(), start + HITS_PER_PAGE);
> > >
> > >        for (int i = start; i < end; i++) {
> > >
> > >
> > >
> > >          if (raw) {                              // output raw format
> > >
> > >            System.out.println("doc="+hits.id(i)+"
> > score="+hits.score(i));
> > >
> > >            continue;
> > >
> > >          }
> > >
> > >
> > >
> > >          Document doc = hits.doc(i);
> > >
> > >          String path = doc.get("path");
> > >
> > >          if (path != null) {
> > >
> > >            System.out.println((i+1) + ". " + path);
> > >
> > >            //getSearchedLine(path, "kvoll");
> > >
> > >            String title = doc.get("title");
> > >
> > >            if (title != null) {
> > >
> > >              System.out.println("   Title: " + doc.get("title"));
> > >
> > >            }
> > >
> > >          } else {
> > >
> > >            System.out.println((i+1) + ". " + "No path for this
> > document");
> > >
> > >          }
> > >
> > >        }
> > >
> > >
> > >
> > >        if (queries != null)                      // non-interactive
> > >
> > >          break;
> > >
> > >
> > >
> > >        if (hits.length() > end) {
> > >
> > >          System.out.println("more (y/n) ? ");
> > >
> > >          line = in.readLine();
> > >
> > >          if (line.length() == 0 || line.charAt(0) == 'n')
> > >
> > >            break;
> > >
> > >        }
> > >
> > >      }
> > >
> > >    }
> > >
> > >    reader.close();
> > >
> > >  }
> > >
> > > }
> > >
> > >
> > >
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 00:18:18 2007
Return-Path: <java-user-return-31599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56501 invoked from network); 21 Dec 2007 00:18:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 00:18:18 -0000
Received: (qmail 91880 invoked by uid 500); 21 Dec 2007 00:18:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91855 invoked by uid 500); 21 Dec 2007 00:18:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91844 invoked by uid 99); 21 Dec 2007 00:18:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 16:18:01 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jeff.lucene@gmail.com designates 64.233.162.230 as permitted sender)
Received: from [64.233.162.230] (HELO nz-out-0506.google.com) (64.233.162.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 00:17:39 +0000
Received: by nz-out-0506.google.com with SMTP id i28so70397nzi.5
        for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 16:17:42 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=KAbye5P0Gz2spnvt43yavSV5OIY4FgGUAAxjh6EO6ps=;
        b=HRIaV2i9KsarOZNcObMokSahZ7/EEDWp7H8hL1EtVHvXpVpaYKSQ+dieUKwjE1JM6I3PK6af04tv8di/tnqYRHiZu2YBgQk6NshtEkCreEVcW7NpaOJuD4A87K3Kzxdd6n/yeyzzS3zyBjeGc6Ryz4FQgkpkF/xDEuz9BgvuqA8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=CiK5MQV3LvSVTjU61uS4mO2jLKRpeTARrRfbwz815XELNbgkMXosbmoCiWYY97oDq8OLUORsRHj/+Qnr9Tcx6dZK2NJfZwd8uNV9GKyOWLWGckQbBwnyPAjAfhkdZjU0yajeWADZOnyf2Adub7E2S1MrX7b+7Uka114/3Ife5wM=
Received: by 10.142.226.2 with SMTP id y2mr440870wfg.137.1198196262175;
        Thu, 20 Dec 2007 16:17:42 -0800 (PST)
Received: by 10.142.86.15 with HTTP; Thu, 20 Dec 2007 16:17:42 -0800 (PST)
Message-ID: <cfc620660712201617r5541064chccdf40d838cec961@mail.gmail.com>
Date: Thu, 20 Dec 2007 19:17:42 -0500
From: Jeff <jeff.lucene@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Hit Count per Document
In-Reply-To: <476ACA74.9040104@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_36914_20389535.1198196262108"
References: <cfc620660712201154j45585448wd5733be2e4e3f419@mail.gmail.com>
	 <476ACA74.9040104@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_36914_20389535.1198196262108
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If I am not mistaken, that is for a term.. Is it possible for a query? In
the below example, I don't want to know how many times brown is in the
document I want to know how many times "quick brown" is in the document.

Thanks,
Jeff

On Dec 20, 2007 3:03 PM, Mark Miller <markrmiller@gmail.com> wrote:

> You can override the scoring system and only score by term frequency
> (use a 1 or whatever creates a no-op for the other factors). If you have
> indexed with norms than you will have to use a Reader that ignores them
> to do this.
>
> - Mark
>
> Jeff wrote:
> > I don't care about score, but I do care about the # of times a query was
> hit
> > within a document? example:
> >
> > the quick brown fox jumped over the lazy dog
> >  the quick brown fox jumped over the lazy dog
> >  the quick brown fox jumped over the lazy dog
> >  the quick brown fox jumped over the lazy dog
> > the slow brown fox jumped over the lazy dog
> >
> > If I searched for "quick brown", is there a way I could see that it was
> hit
> > 4 times within the document?
> >
> > Thanks,
> > Jeff
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_36914_20389535.1198196262108--

From java-user-return-31600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 00:18:27 2007
Return-Path: <java-user-return-31600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 56566 invoked from network); 21 Dec 2007 00:18:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 00:18:25 -0000
Received: (qmail 93411 invoked by uid 500); 21 Dec 2007 00:18:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93382 invoked by uid 500); 21 Dec 2007 00:18:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93371 invoked by uid 99); 21 Dec 2007 00:18:08 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 16:18:08 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: 194.109.24.21 is neither permitted nor denied by domain of karl.wettin@gmail.com)
Received: from [194.109.24.21] (HELO smtp-vbr1.xs4all.nl) (194.109.24.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 00:17:45 +0000
Received: from kodapan.lan (memnon.xs4all.nl [82.93.70.124])
	by smtp-vbr1.xs4all.nl (8.13.8/8.13.8) with ESMTP id lBL0Hmrb076700
	for <java-user@lucene.apache.org>; Fri, 21 Dec 2007 01:17:48 +0100 (CET)
	(envelope-from karl.wettin@gmail.com)
Message-Id: <4428E352-5C9E-4532-B3F8-9700BFD74F76@gmail.com>
From: Karl Wettin <karl.wettin@gmail.com>
To: java-user@lucene.apache.org
In-Reply-To: <9639.192.168.5.115.1198186336.squirrel@webmail.controldocs.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Changing the Punctuation definition for StandardAnalyzer
X-Priority: 3 (Normal)
Date: Fri, 21 Dec 2007 01:17:47 +0100
References: <4700F72B.1010609@propylon.com>	 <0C09F3B2-8C01-4C61-970E-B4673971B526@gmail.com>	 <4700FC1C.6010707@propylon.com> <48b038c60710010703u1370e6cu170d15fe1480f607@mail.gmail.com> <47010619.4030909@propylon.com> <19356.192.168.5.115.1198172582.squirrel@webmail.controldocs.com> <1D6E6CE2-0F5E-4E9B-A28D-BB6A8075BD63@gmail.com> <19410.192.168.5.115.1198178505.squirrel@webmail.controldocs.com> <B4273DC6-352A-4978-BB49-35118F2390CA@gmail.com> <9639.192.168.5.115.1198186336.squirrel@webmail.controldocs.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

20 dec 2007 kl. 22.32 skrev tareque@controldocs.com:

> In fact I had previously located the grammar in StandardTokenizer.jj  
> (just wasn't sure if that was the one u were talking about) and had  
> commented out EMAIL entries from all the following files:
>
> StandardTokenizer.java
> StandardTokenizer.jj
> StandardTokenizerConstants.java
>
> Now what is puzzling to me is that though I don't see the '@'

I think you'll find the JavaCC-list a much better forum for this  
question. You do however seem a bit confused about the fact that  
StandardTokenizer and StandardTokenierConstants are the generated  
artifacts via Ant build, based on StandardTokenizer.jj.

Why was the TokenFilter solution not good enough? What was the results  
from your benchmarks?


-- 
karl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 00:21:15 2007
Return-Path: <java-user-return-31601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63415 invoked from network); 21 Dec 2007 00:21:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 00:21:15 -0000
Received: (qmail 96702 invoked by uid 500); 21 Dec 2007 00:20:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96673 invoked by uid 500); 21 Dec 2007 00:20:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96662 invoked by uid 99); 21 Dec 2007 00:20:57 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 16:20:57 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 00:20:33 +0000
Received: by fk-out-0910.google.com with SMTP id z23so122056fkz.5
        for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 16:20:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=ip66D80zg7AzVFhJRdM5oioCIfWhyqVFGf4IHD+w2Qo=;
        b=ndzDx1CauKa2Qyd66UmAotmg96fwaqx94jjLMYU+HKjE5WHNfE2/bt41f96Prbtiwvff3GJZgfS0CfT8NpWVK0UdRdTvKtUfHJ1QL832VE5ygVpWCSoiZkeHX3wzZX800XSgdUqJwYiF7HQFLZ9UMm6uPGIdziNspg30VdSm2Mc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ZpKLh/loJvzAvvQMbbnfXCcNvFakR23gfepSNKQgbg+NwOcpJ5617cNxYUgeJBq2V4Q33kK+qIPoyoUBtjZxq4vSWAyxIid7YrttsDPdQXqXfISRTgxlgd7pCxIQC2LZQ2OMhUMaS0STBrOgDrGg8tlDXwutdVwCp+crBVSY5WM=
Received: by 10.82.149.8 with SMTP id w8mr1071833bud.24.1198196435455;
        Thu, 20 Dec 2007 16:20:35 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Thu, 20 Dec 2007 16:20:35 -0800 (PST)
Message-ID: <359a92830712201620k1b9fed2dga7e120837ae07ac9@mail.gmail.com>
Date: Thu, 20 Dec 2007 19:20:35 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with Escape characters in lucene demo search
In-Reply-To: <016201c84363$b255cd50$170167f0$@ca>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_22242_32295597.1198196435440"
References: <00e801c8428b$807d93e0$8178bba0$@ca>
	 <359a92830712191641g1c1983c6r2c1fc471a4b5247f@mail.gmail.com>
	 <012101c842bb$37584b30$a608e190$@ca>
	 <359a92830712200636w26deccd8pbd68fdec1154ade8@mail.gmail.com>
	 <015801c84356$8cb94660$a62bd320$@ca>
	 <359a92830712201525g225801bbg2bfcda1e08caa126@mail.gmail.com>
	 <016201c84363$b255cd50$170167f0$@ca>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_22242_32295597.1198196435440
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I think you need to back up and think about what you're trying to
accomplish. Just throwing the file into a single document in
your index doesn't seem very useful.

Of course you can pre-process the input and index only what
you want. The examples in the Lucene demo just show
you how to index entire files as a starting point. You can, instead,
read the file yourself and extract the relevant information for the
index, throwing away all of the uninteresting bits. You can break
up the file into as many documents as you want. You can massage
the data into a more reasonable form. Each document can have as
many fields as you care to have. You can......

The important thing is to decide what you want to accomplish.
That is, what the end users want out of the experience. And
create the index to support that. Just throwing all the files as-is
into an index is probably not a substantial improvement over
grep, so why bother? Your job is to use Lucene to impose
some structure on what is essentially unstructured data,
presumably to support some goal.

"Making the logs searchable"  doesn't really *mean* anything. They're
already searchable with grep. In fact, unless you can create a
use case that can't be accomplished with grep, don't use Lucene at all.

I love Lucene. But if the problem you're trying to solve is *already* solved
with tools that exist, you're just spending time solving an already-solved
problem. Without adding value.

All that said, there's certainly value in learning how to use a new tool.
Just be sure you've got a clear goal in mind, supported by use
cases. Or are just experimenting, which is a fine thing. But don't
confuse the two.

Best
Erick

On Dec 20, 2007 6:54 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:

> Interesting!!!! I am trying to make our logs searchable and thought of
> trying Lucene. I am talking of several (around 50-60) 2GB files to index.
> Would it scale? How can I index portion of document? Also like with any
> log
> , there is a pattern and most of the stuff in there is redundant. Can i
> discard certain words to make the index small.
>
> Cheers
> B
>
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: December-20-07 3:25 PM
> To: java-user@lucene.apache.org
> Subject: Re: Problem with Escape characters in lucene demo search
>
> Lucene, by default, only indexes the first 10,000 tokens and throws
> the rest away. You can change this via IndexWriter.SetMaxFieldLength.
>
> 2G is a huge file. Are you indexing all that or are you indexing only
> portions?
>
> Erick
>
> On Dec 20, 2007 5:20 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:
>
> > Hi Erick
> >
> > Thanks. I found something interesting. I was indexing huge text files
> > (>2GB)
> > and the search was not returning escape characters. However, when I
> moved
> > the line to a smaller file (20MB), it works fine. Is there a limit on
> file
> > size search by Lucene or would you know how do escape characters search
> > performs when file is as big as mine.
> >
> > B
> >
> > -----Original Message-----
> > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > Sent: December-20-07 6:36 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Problem with Escape characters in lucene demo search
> >
> > use Luke. Google Lucene luke and you'll find it.....
> >
> > You can use it to examine the contents of your index
> > in many different ways. It's invaluable when exploring
> > the different analyzers and making sure that your index
> > has what you *think* it has.
> >
> > Erick
> >
> > On Dec 19, 2007 10:48 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:
> >
> > > How do i check in my index. It looks like bytecode to me. My searched
> > file
> > > does contain word "login" with quotes.
> > >
> > > B
> > >
> > > -----Original Message-----
> > > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > > Sent: December-19-07 4:41 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Problem with Escape characters in lucene demo search
> > >
> > > I'm pretty sure StandardAnalyzer is stripping these off. Have you
> looked
> > > in your index to see if "longin" (with quotes) is even in there? I
> think
> > > you'll find that it's not.
> > >
> > > Best
> > > Erick
> > >
> > > On Dec 19, 2007 5:07 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:
> > >
> > > > Hi there
> > > >
> > > >
> > > >
> > > > I am having a problem in using escape characters with lucene demo
> > code.
> > > I
> > > > used the following code for IndexFiles and SearchFiles. The code
> works
> > > > fine
> > > > for regular searching and also with wildcard. However, when I try to
> > use
> > > > escape characters, somehow it strips them off. For example: when i
> > > search
> > > > for  "login" through "\"login\"" or for that matter try to use any
> > > escape
> > > > character, lucene strips the escape characters and looks for the
> text
> > > only
> > > > (login as against "login")
> > > >
> > > >
> > > >
> > > > Can someone help please.
> > > >
> > > >
> > > >
> > > > Cheers
> > > >
> > > > B
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > IndexFiles.java
> > > >
> > > >
> > > >
> > > > package org.apache.lucene.demo;
> > > >
> > > >
> > > >
> > > > /**
> > > >
> > > >  * Licensed to the Apache Software Foundation (ASF) under one or
> more
> > > >
> > > >  * contributor license agreements.  See the NOTICE file distributed
> > with
> > > >
> > > >  * this work for additional information regarding copyright
> ownership.
> > > >
> > > >  * The ASF licenses this file to You under the Apache License,
> Version
> > > 2.0
> > > >
> > > >  * (the "License"); you may not use this file except in compliance
> > with
> > > >
> > > >  * the License.  You may obtain a copy of the License at
> > > >
> > > >  *
> > > >
> > > >  *     http://www.apache.org/licenses/LICENSE-2.0
> > > >
> > > >  *
> > > >
> > > >  * Unless required by applicable law or agreed to in writing,
> software
> > > >
> > > >  * distributed under the License is distributed on an "AS IS" BASIS,
> > > >
> > > >  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> > > > implied.
> > > >
> > > >  * See the License for the specific language governing permissions
> and
> > > >
> > > >  * limitations under the License.
> > > >
> > > >  */
> > > >
> > > >
> > > >
> > > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > > >
> > > > import org.apache.lucene.document.Document;
> > > >
> > > > import org.apache.lucene.index.IndexWriter;
> > > >
> > > >
> > > >
> > > > import java.io.BufferedReader;
> > > >
> > > > import java.io.File;
> > > >
> > > > import java.io.FileNotFoundException;
> > > >
> > > > import java.io.IOException;
> > > >
> > > > import java.io.InputStreamReader;
> > > >
> > > > import java.util.Date;
> > > >
> > > >
> > > >
> > > > /** Index all text files under a directory. */
> > > >
> > > > public class IndexFiles {
> > > >
> > > >
> > > >
> > > >  private IndexFiles() {}
> > > >
> > > >
> > > >
> > > >  static final File INDEX_DIR = new File("index");
> > > >
> > > >
> > > >
> > > >  /** Index all text files under a directory. */
> > > >
> > > >  public static void main(String[] args) {
> > > >
> > > >    String usage = "java org.apache.lucene.demo.IndexFiles
> > > > <root_directory>";
> > > >
> > > >    /*if (args.length == 0) {
> > > >
> > > >      System.err.println("Usage: " + usage);
> > > >
> > > >      System.exit(1);
> > > >
> > > >    }*/
> > > >
> > > >
> > > >
> > > >    /*if (INDEX_DIR.exists()) {
> > > >
> > > >      System.out.println("Cannot save index to '" +INDEX_DIR+ "'
> > > directory,
> > > > please delete it first");
> > > >
> > > >      System.exit(1);
> > > >
> > > >    }*/
> > > >
> > > >
> > > >
> > > >    //final File docDir = new File(args[0]);
> > > >
> > > >    //File docDir = new File(args[0]);
> > > >
> > > >    File docDir = new File("F:/bsd-logs/logs");
> > > >
> > > >    if (!docDir.exists() || !docDir.canRead()) {
> > > >
> > > >      System.out.println("Document directory '"
> > > +docDir.getAbsolutePath()+
> > > > "' does not exist or is not readable, please check the path");
> > > >
> > > >      System.exit(1);
> > > >
> > > >    }
> > > >
> > > >
> > > >
> > > >    Date start = new Date();
> > > >
> > > >    try {
> > > >
> > > >      System.out.println("Indexing to directory '" +INDEX_DIR+
> "'...");
> > > >
> > > >      BufferedReader in = null;
> > > >
> > > >      int i = 0;
> > > >
> > > >      while (i==0){
> > > >
> > > >          IndexWriter writer = new IndexWriter(INDEX_DIR, new
> > > > StandardAnalyzer(), true);
> > > >
> > > >
> > > >
> > > >                      indexDocs(writer, docDir);
> > > >
> > > >                      System.out.println("Optimizing...");
> > > >
> > > >                      writer.optimize();
> > > >
> > > >                      in = new BufferedReader(new
> > > > InputStreamReader(System.in, "UTF-8"));
> > > >
> > > >                      i=1;
> > > >
> > > >                      /*System.out.println("Enter another directory:
> > ");
> > > >
> > > >
> > > >
> > > >                        docDir = new File(in.readLine());
> > > >
> > > >                        writer.close();
> > > >
> > > >                        String args1[] =
> > > > {"\\users\\baljeet\\documents\\rees\\programs\\
> > > > <file:///\\users\baljeet\documents\rees\programs\> "};
> > > >
> > > >                        DeleteFiles.main(args1);*/
> > > >
> > > >     }
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >      Date end = new Date();
> > > >
> > > >      System.out.println(end.getTime() - start.getTime() + " total
> > > > milliseconds");
> > > >
> > > >
> > > >
> > > >    } catch (IOException e) {
> > > >
> > > >      System.out.println(" caught a " + e.getClass() +
> > > >
> > > >       "\n with message: " + e.getMessage());
> > > >
> > > >    }
> > > >
> > > >  }
> > > >
> > > >
> > > >
> > > >  static void indexDocs(IndexWriter writer, File file)
> > > >
> > > >    throws IOException {
> > > >
> > > >    // do not try to index files that cannot be read
> > > >
> > > >    if (file.canRead()) {
> > > >
> > > >      if (file.isDirectory()) {
> > > >
> > > >        String[] files = file.list();
> > > >
> > > >        // an IO error could occur
> > > >
> > > >        if (files != null) {
> > > >
> > > >          for (int i = 0; i < files.length; i++) {
> > > >
> > > >            indexDocs(writer, new File(file, files[i]));
> > > >
> > > >          }
> > > >
> > > >        }
> > > >
> > > >      } else {
> > > >
> > > >        System.out.println("adding " + file);
> > > >
> > > >        try {
> > > >
> > > >                Document doc = FileDocument.Document(file);
> > > >
> > > >                System.out.println("Path = "+doc.getField("path"));
> > > >
> > > >          writer.addDocument(FileDocument.Document(file));
> > > >
> > > >
> > > >
> > > >        }
> > > >
> > > >        // at least on windows, some temporary files raise this
> > exception
> > > > with an "access denied" message
> > > >
> > > >        // checking if the file can be read doesn't help
> > > >
> > > >        catch (FileNotFoundException fnfe) {
> > > >
> > > >          ;
> > > >
> > > >        }
> > > >
> > > >      }
> > > >
> > > >    }
> > > >
> > > >  }
> > > >
> > > >
> > > >
> > > > }
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > SearchFiles.java
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > package org.apache.lucene.demo;
> > > >
> > > >
> > > >
> > > > /**
> > > >
> > > >  * Licensed to the Apache Software Foundation (ASF) under one or
> more
> > > >
> > > >  * contributor license agreements.  See the NOTICE file distributed
> > with
> > > >
> > > >  * this work for additional information regarding copyright
> ownership.
> > > >
> > > >  * The ASF licenses this file to You under the Apache License,
> Version
> > > 2.0
> > > >
> > > >  * (the "License"); you may not use this file except in compliance
> > with
> > > >
> > > >  * the License.  You may obtain a copy of the License at
> > > >
> > > >  *
> > > >
> > > >  *     http://www.apache.org/licenses/LICENSE-2.0
> > > >
> > > >  *
> > > >
> > > >  * Unless required by applicable law or agreed to in writing,
> software
> > > >
> > > >  * distributed under the License is distributed on an "AS IS" BASIS,
> > > >
> > > >  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> > > > implied.
> > > >
> > > >  * See the License for the specific language governing permissions
> and
> > > >
> > > >  * limitations under the License.
> > > >
> > > >  */
> > > >
> > > >
> > > >
> > > > import org.apache.lucene.analysis.Analyzer;
> > > >
> > > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > > >
> > > > import org.apache.lucene.document.Document;
> > > >
> > > > import org.apache.lucene.index.FilterIndexReader;
> > > >
> > > > import org.apache.lucene.index.IndexReader;
> > > >
> > > > import org.apache.lucene.queryParser.QueryParser;
> > > >
> > > > import org.apache.lucene.search.Hits;
> > > >
> > > > import org.apache.lucene.search.IndexSearcher;
> > > >
> > > > import org.apache.lucene.search.Query;
> > > >
> > > > import org.apache.lucene.search.Searcher;
> > > >
> > > >
> > > >
> > > > import java.io.BufferedReader;
> > > >
> > > > import java.io.FileReader;
> > > >
> > > > import java.io.IOException;
> > > >
> > > > import java.io.InputStreamReader;
> > > >
> > > > import java.util.Collection;
> > > >
> > > > import java.util.Date;
> > > >
> > > > import java.util.Hashtable;
> > > >
> > > > import java.util.Iterator;
> > > >
> > > >
> > > >
> > > > /** Simple command-line based search demo. */
> > > >
> > > > public class SearchFiles {
> > > >
> > > >
> > > >
> > > >  /** Use the norms from one field for all fields.  Norms are read
> into
> > > > memory,
> > > >
> > > >   * using a byte of memory per document per searched field.  This
> can
> > > > cause
> > > >
> > > >   * search of large collections with a large number of fields to run
> > out
> > > > of
> > > >
> > > >   * memory.  If all of the fields contain only a single token, then
> > the
> > > > norms
> > > >
> > > >   * are all identical, then single norm vector may be shared. */
> > > >
> > > >  public static class OneNormsReader extends FilterIndexReader {
> > > >
> > > >    private String field;
> > > >
> > > >
> > > >
> > > >    public OneNormsReader(IndexReader in, String field) {
> > > >
> > > >      super(in);
> > > >
> > > >      this.field = field;
> > > >
> > > >    }
> > > >
> > > >
> > > >
> > > >    public byte[] norms(String field) throws IOException {
> > > >
> > > >      return in.norms(this.field);
> > > >
> > > >    }
> > > >
> > > >  }
> > > >
> > > >
> > > >
> > > >  private SearchFiles() {}
> > > >
> > > >
> > > >
> > > >  /** Simple command-line based search demo. */
> > > >
> > > >  public static void main(String[] args) throws Exception {
> > > >
> > > >    String usage =
> > > >
> > > >      "Usage: java org.apache.lucene.demo.SearchFiles [-index dir]
> > > [-field
> > > > f] [-repeat n] [-queries file] [-raw] [-norms field]";
> > > >
> > > >    if (args.length > 0 && ("-h".equals(args[0]) ||
> > > > "-help".equals(args[0]))) {
> > > >
> > > >      System.out.println(usage);
> > > >
> > > >      System.exit(0);
> > > >
> > > >    }
> > > >
> > > >
> > > >
> > > >    String index = "index";
> > > >
> > > >    String field = "contents";
> > > >
> > > >    String queries = null;
> > > >
> > > >    int repeat = 0;
> > > >
> > > >    boolean raw = false;
> > > >
> > > >    String normsField = null;
> > > >
> > > >
> > > >
> > > >    for (int i = 0; i < args.length; i++) {
> > > >
> > > >      if ("-index".equals(args[i])) {
> > > >
> > > >        index = args[i+1];
> > > >
> > > >        i++;
> > > >
> > > >      } else if ("-field".equals(args[i])) {
> > > >
> > > >        field = args[i+1];
> > > >
> > > >        i++;
> > > >
> > > >      } else if ("-queries".equals(args[i])) {
> > > >
> > > >        queries = args[i+1];
> > > >
> > > >        i++;
> > > >
> > > >      } else if ("-repeat".equals(args[i])) {
> > > >
> > > >        repeat = Integer.parseInt(args[i+1]);
> > > >
> > > >        i++;
> > > >
> > > >      } else if ("-raw".equals(args[i])) {
> > > >
> > > >        raw = true;
> > > >
> > > >      } else if ("-norms".equals(args[i])) {
> > > >
> > > >        normsField = args[i+1];
> > > >
> > > >        i++;
> > > >
> > > >      }
> > > >
> > > >    }
> > > >
> > > >
> > > >
> > > >    IndexReader reader = IndexReader.open(index);
> > > >
> > > >
> > > >
> > > >    if (normsField != null)
> > > >
> > > >      reader = new OneNormsReader(reader, normsField);
> > > >
> > > >
> > > >
> > > >    Collection<String> h =
> > > > reader.getFieldNames(IndexReader.FieldOption.INDEXED);
> > > >
> > > >    Iterator<String> it = h.iterator();
> > > >
> > > >    while (it.hasNext()){
> > > >
> > > >                System.out.println("Iterator Value = "+it.next());
> > > >
> > > >
> > > >
> > > >    }
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >    Searcher searcher = new IndexSearcher(reader);
> > > >
> > > >    Analyzer analyzer = new StandardAnalyzer();
> > > >
> > > >
> > > >
> > > >    BufferedReader in = null;
> > > >
> > > >    if (queries != null) {
> > > >
> > > >      in = new BufferedReader(new FileReader(queries));
> > > >
> > > >    } else {
> > > >
> > > >      in = new BufferedReader(new InputStreamReader(System.in,
> > "UTF-8"));
> > > >
> > > >    }
> > > >
> > > >      QueryParser parser = new QueryParser(field, analyzer);
> > > >
> > > >    while (true) {
> > > >
> > > >      if (queries == null)                        // prompt the user
> > > >
> > > >        System.out.println("Enter query: ");
> > > >
> > > >
> > > >
> > > >      String line = in.readLine();
> > > >
> > > >
> > > >
> > > >      if (line == null || line.length() == -1)
> > > >
> > > >        break;
> > > >
> > > >
> > > >
> > > >      line = line.trim();
> > > >
> > > >      if (line.length() == 0)
> > > >
> > > >        break;
> > > >
> > > >      System.out.println("line 1= "+line);
> > > >
> > > >     // line = QueryParser.escape(line);
> > > >
> > > >      System.out.println("line 2= "+line);
> > > >
> > > >      Query query = parser.parse(line);
> > > >
> > > >
> > > >
> > > >      System.out.println("Searching for: " + query.toString(field));
> > > >
> > > >
> > > >
> > > >      Hits hits = searcher.search(query);
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >      if (repeat > 0) {                           // repeat & time as
> > > > benchmark
> > > >
> > > >        Date start = new Date();
> > > >
> > > >        for (int i = 0; i < repeat; i++) {
> > > >
> > > >          hits = searcher.search(query);
> > > >
> > > >        }
> > > >
> > > >        Date end = new Date();
> > > >
> > > >        System.out.println("Time: "+(end.getTime()-start.getTime
> > > ())+"ms");
> > > >
> > > >      }
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >      System.out.println(hits.length() + " total matching
> documents");
> > > >
> > > >
> > > >
> > > >      final int HITS_PER_PAGE = 10;
> > > >
> > > >      for (int start = 0; start < hits.length(); start +=
> > HITS_PER_PAGE)
> > > {
> > > >
> > > >        int end = Math.min(hits.length(), start + HITS_PER_PAGE);
> > > >
> > > >        for (int i = start; i < end; i++) {
> > > >
> > > >
> > > >
> > > >          if (raw) {                              // output raw
> format
> > > >
> > > >            System.out.println("doc="+hits.id(i)+"
> > > score="+hits.score(i));
> > > >
> > > >            continue;
> > > >
> > > >          }
> > > >
> > > >
> > > >
> > > >          Document doc = hits.doc(i);
> > > >
> > > >          String path = doc.get("path");
> > > >
> > > >          if (path != null) {
> > > >
> > > >            System.out.println((i+1) + ". " + path);
> > > >
> > > >            //getSearchedLine(path, "kvoll");
> > > >
> > > >            String title = doc.get("title");
> > > >
> > > >            if (title != null) {
> > > >
> > > >              System.out.println("   Title: " + doc.get("title"));
> > > >
> > > >            }
> > > >
> > > >          } else {
> > > >
> > > >            System.out.println((i+1) + ". " + "No path for this
> > > document");
> > > >
> > > >          }
> > > >
> > > >        }
> > > >
> > > >
> > > >
> > > >        if (queries != null)                      // non-interactive
> > > >
> > > >          break;
> > > >
> > > >
> > > >
> > > >        if (hits.length() > end) {
> > > >
> > > >          System.out.println("more (y/n) ? ");
> > > >
> > > >          line = in.readLine();
> > > >
> > > >          if (line.length() == 0 || line.charAt(0) == 'n')
> > > >
> > > >            break;
> > > >
> > > >        }
> > > >
> > > >      }
> > > >
> > > >    }
> > > >
> > > >    reader.close();
> > > >
> > > >  }
> > > >
> > > > }
> > > >
> > > >
> > > >
> > > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_22242_32295597.1198196435440--

From java-user-return-31602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 00:23:23 2007
Return-Path: <java-user-return-31602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63899 invoked from network); 21 Dec 2007 00:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 00:23:23 -0000
Received: (qmail 730 invoked by uid 500); 21 Dec 2007 00:23:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 695 invoked by uid 500); 21 Dec 2007 00:23:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 677 invoked by uid 99); 21 Dec 2007 00:23:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 16:23:06 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of tareque@controldocs.com designates 65.117.150.145 as permitted sender)
Received: from [65.117.150.145] (HELO webmail.controldocs.com) (65.117.150.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 00:22:44 +0000
Received: from webmail.controldocs.com (webmail.controldocs.com [127.0.0.1])
	by webmail.controldocs.com (8.13.4/8.13.4/Debian-3sarge3) with ESMTP id lBL0Mlmp027162
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NOT)
	for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 18:22:47 -0600
Received: (from www-data@localhost)
	by webmail.controldocs.com (8.13.4/8.13.4/Submit) id lBL0Ml3i027161;
	Thu, 20 Dec 2007 18:22:47 -0600
X-Authentication-Warning: webmail.controldocs.com: www-data set sender to tareque@controldocs.com using -f
Received: from 72.48.159.169
        (SquirrelMail authenticated user tareque)
        by webmail.controldocs.com with HTTP;
        Thu, 20 Dec 2007 18:22:47 -0600 (CST)
Message-ID: <1081.72.48.159.169.1198196567.squirrel@webmail.controldocs.com>
In-Reply-To: <4428E352-5C9E-4532-B3F8-9700BFD74F76@gmail.com>
References: <4700F72B.1010609@propylon.com>	
    <0C09F3B2-8C01-4C61-970E-B4673971B526@gmail.com>	
    <4700FC1C.6010707@propylon.com>
    <48b038c60710010703u1370e6cu170d15fe1480f607@mail.gmail.com>
    <47010619.4030909@propylon.com>
    <19356.192.168.5.115.1198172582.squirrel@webmail.controldocs.com>
    <1D6E6CE2-0F5E-4E9B-A28D-BB6A8075BD63@gmail.com>
    <19410.192.168.5.115.1198178505.squirrel@webmail.controldocs.com>
    <B4273DC6-352A-4978-BB49-35118F2390CA@gmail.com>
    <9639.192.168.5.115.1198186336.squirrel@webmail.controldocs.com>
    <4428E352-5C9E-4532-B3F8-9700BFD74F76@gmail.com>
Date: Thu, 20 Dec 2007 18:22:47 -0600 (CST)
Subject: Re: Changing the Punctuation definition for StandardAnalyzer
From: tareque@controldocs.com
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.4
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org

I actually hadn't implemented the TokenFilter solution before deciding not
to go with that solution, so didn't have any benchmark.

But eventually I have taken care of this problem with a different
variation of your quick and dirty solution. I have captured the character
'@' in FastCharStream.java, and replaced it with a blank space. That took
care of it.

Thanks for your help!
Tareque

> 20 dec 2007 kl. 22.32 skrev tareque@controldocs.com:
>
>> In fact I had previously located the grammar in StandardTokenizer.jj
>> (just wasn't sure if that was the one u were talking about) and had
>> commented out EMAIL entries from all the following files:
>>
>> StandardTokenizer.java
>> StandardTokenizer.jj
>> StandardTokenizerConstants.java
>>
>> Now what is puzzling to me is that though I don't see the '@'
>
> I think you'll find the JavaCC-list a much better forum for this
> question. You do however seem a bit confused about the fact that
> StandardTokenizer and StandardTokenierConstants are the generated
> artifacts via Ant build, based on StandardTokenizer.jj.
>
> Why was the TokenFilter solution not good enough? What was the results
> from your benchmarks?
>
>
> --
> karl
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 03:38:23 2007
Return-Path: <java-user-return-31603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39099 invoked from network); 21 Dec 2007 03:38:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 03:38:23 -0000
Received: (qmail 9219 invoked by uid 500); 21 Dec 2007 03:38:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9188 invoked by uid 500); 21 Dec 2007 03:38:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9177 invoked by uid 99); 21 Dec 2007 03:38:04 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 19:38:04 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of markrmiller@gmail.com designates 64.233.166.176 as permitted sender)
Received: from [64.233.166.176] (HELO py-out-1112.google.com) (64.233.166.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 03:37:52 +0000
Received: by py-out-1112.google.com with SMTP id d32so799058pye.12
        for <java-user@lucene.apache.org>; Thu, 20 Dec 2007 19:37:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=0sUBlEE0CPZ7aTqt+b10SPA3HJx3jIBjWDJn00V+lIM=;
        b=eIvnVFjbS/N+Qri5ydz9J1ClqRQvEapFroG01rMt5Ruqrgxkny6XcH0TrRFAotZcvnxMMVRJbWRy+X5hdYBlkBLk8g/7GipjMqVBdEvCenD36+pEW8NlVSELiI/6YsdtNus9RIsDw3FR2V7vqTw70Ov2acfjdB8RHXy8a2d37AU=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=C7sCEsaLBK9WNhmXWRr7tpx41UnSXR2eFLG8wJqsbzO5QUc0yM4wPePP7IusvbJTmgY+ozC6L0pszdnqxjqrg25gotQxtVVbK9OCcyJEiMoGOrMd+giuEl3rif1uCSl6SkT5r5YQ6zGKz7y81TGuGULTYX0ysF4w9/H9k4vNspI=
Received: by 10.64.210.3 with SMTP id i3mr1626062qbg.22.1198208262958;
        Thu, 20 Dec 2007 19:37:42 -0800 (PST)
Received: from ?192.168.1.102? ( [69.124.234.183])
        by mx.google.com with ESMTPS id q16sm4768227qbq.0.2007.12.20.19.37.42
        (version=SSLv3 cipher=RC4-MD5);
        Thu, 20 Dec 2007 19:37:42 -0800 (PST)
Message-ID: <476B34DE.5000000@gmail.com>
Date: Thu, 20 Dec 2007 22:37:02 -0500
From: Mark Miller <markrmiller@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Hit Count per Document
References: <cfc620660712201154j45585448wd5733be2e4e3f419@mail.gmail.com>	 <476ACA74.9040104@gmail.com> <cfc620660712201617r5541064chccdf40d838cec961@mail.gmail.com>
In-Reply-To: <cfc620660712201617r5541064chccdf40d838cec961@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Gotchya. Well, if you want to check a doc at a time you could use 
getSpans for a NearSpan query and just count how many you get. No ideas 
off the top of my head if you want the result like a score in that you 
get it for each hit in a search of a whole corpus.

- Mark

Jeff wrote:
> If I am not mistaken, that is for a term.. Is it possible for a query? In
> the below example, I don't want to know how many times brown is in the
> document I want to know how many times "quick brown" is in the document.
>
> Thanks,
> Jeff
>
> On Dec 20, 2007 3:03 PM, Mark Miller <markrmiller@gmail.com> wrote:
>
>   
>> You can override the scoring system and only score by term frequency
>> (use a 1 or whatever creates a no-op for the other factors). If you have
>> indexed with norms than you will have to use a Reader that ignores them
>> to do this.
>>
>> - Mark
>>
>> Jeff wrote:
>>     
>>> I don't care about score, but I do care about the # of times a query was
>>>       
>> hit
>>     
>>> within a document? example:
>>>
>>> the quick brown fox jumped over the lazy dog
>>>  the quick brown fox jumped over the lazy dog
>>>  the quick brown fox jumped over the lazy dog
>>>  the quick brown fox jumped over the lazy dog
>>> the slow brown fox jumped over the lazy dog
>>>
>>> If I searched for "quick brown", is there a way I could see that it was
>>>       
>> hit
>>     
>>> 4 times within the document?
>>>
>>> Thanks,
>>> Jeff
>>>
>>>
>>>       
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
>   

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 03:51:19 2007
Return-Path: <java-user-return-31604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43483 invoked from network); 21 Dec 2007 03:51:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 03:51:18 -0000
Received: (qmail 15683 invoked by uid 500); 21 Dec 2007 03:51:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15643 invoked by uid 500); 21 Dec 2007 03:51:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15630 invoked by uid 99); 21 Dec 2007 03:51:01 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 19:51:01 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rakesh_shete@hotmail.com designates 65.54.246.241 as permitted sender)
Received: from [65.54.246.241] (HELO bay0-omc3-s41.bay0.hotmail.com) (65.54.246.241)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 03:50:47 +0000
Received: from BAY112-W3 ([64.4.26.103]) by bay0-omc3-s41.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 20 Dec 2007 19:50:38 -0800
Message-ID: <BAY112-W3267D6CF8D3879E0546C2F95E0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_b2180b7e-f24b-42b4-90e7-83a889b6e1a4_"
X-Originating-IP: [220.225.70.2]
From: Rakesh Shete <rakesh_shete@hotmail.com>
To: Lucene Java User <java-user@lucene.apache.org>
Subject: Boosting Vs Sorting
Date: Fri, 21 Dec 2007 09:20:38 +0530
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 21 Dec 2007 03:50:38.0981 (UTC) FILETIME=[A6986B50:01C84384]
X-Virus-Checked: Checked by ClamAV on apache.org

--_b2180b7e-f24b-42b4-90e7-83a889b6e1a4_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi all,

I am using Hibernate Search (http://www.hibernate.org/410.html) which is a =
wrapper around Lucene for performing search over info stored in the DB. I h=
ave questions related to Lucene boosting Vs sorting:

Is index time boosting of documents and fields better than specifying sorti=
ng parameters at search time?

I have been browsing through the Lucene mail archives for an answer to this=
. Going through them and reading on stuff related to Lucene scoring, my und=
erstanding is that if I know upfront at index time that the relevance order=
 of results is based on certain fields, then, it is better to have index ti=
me boosting of documents and fields. Am I right here?

My requirements are like:=20
Results having an exact match to the input query string should have highest=
 preference followed by an exact match with field1, field2, field3 and then=
 followed by search query substring (or near match) match with field1, fiel=
d2, field3.

Any suggestions are most welcome.

--Rakesh S

_________________________________________________________________
Post free property ads on Yello Classifieds now! www.yello.in
http://ss1.richmedia.in/recurl.asp?pid=3D219=

--_b2180b7e-f24b-42b4-90e7-83a889b6e1a4_--

From java-user-return-31605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 04:51:46 2007
Return-Path: <java-user-return-31605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62956 invoked from network); 21 Dec 2007 04:51:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 04:51:46 -0000
Received: (qmail 43634 invoked by uid 500); 21 Dec 2007 04:51:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43588 invoked by uid 500); 21 Dec 2007 04:51:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43577 invoked by uid 99); 21 Dec 2007 04:51:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 20 Dec 2007 20:51:29 -0800
X-ASF-Spam-Status: No, hits=4.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 04:51:17 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J5Zqn-0001Ie-GY
	for java-user@lucene.apache.org; Thu, 20 Dec 2007 20:51:09 -0800
Message-ID: <14450335.post@talk.nabble.com>
Date: Thu, 20 Dec 2007 20:51:09 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Which file in the lucene package is used to manipulate results..
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_16901_11811310.1198212669507"
X-Nabble-From: ping.sumit@gmail.com
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_16901_11811310.1198212669507
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


hi, i am using lucene for the very first time and want to manipulate the
results, by adding some more factors to it, which file should i edit to
manipulate the search results....

Thanks 
Sumit Tyagi
-- 
View this message in context: http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14450335.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.

------=_Part_16901_11811310.1198212669507--


From java-user-return-31606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 09:43:11 2007
Return-Path: <java-user-return-31606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54591 invoked from network); 21 Dec 2007 09:43:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 09:43:11 -0000
Received: (qmail 24927 invoked by uid 500); 21 Dec 2007 09:42:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24887 invoked by uid 500); 21 Dec 2007 09:42:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24876 invoked by uid 99); 21 Dec 2007 09:42:54 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 01:42:54 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.87] (HELO web26013.mail.ukl.yahoo.com) (217.12.10.87)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Dec 2007 09:42:42 +0000
Received: (qmail 33098 invoked by uid 60001); 21 Dec 2007 09:42:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=eUzmmPcrNiEktgbIdFvaJcJDbO/EAyUDgorXiPKSXh3GSxY+OfrPle1S0FNQj3FLXhJ3D4/FJlW3rk78cPn2wWRyyG1v1gOCUaeLMuSUUiNUreJvop2OXAQHVifpkfRK1d9u9tclPJEp5kSO56ze/ay6O7SIIiV04C6oiU/ad+c=;
X-YMail-OSG: 4JAoa_UVM1kO7jXA95sCp8S7bmgyifTzvMW7NhOg5xlWbICis9WhMEPsLIAQKziTeA--
Received: from [193.36.230.96] by web26013.mail.ukl.yahoo.com via HTTP; Fri, 21 Dec 2007 09:42:32 GMT
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Fri, 21 Dec 2007 09:42:32 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Which file in the lucene package is used to manipulate results..
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <762026.33053.qm@web26013.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

I think you need to describe your "factors" in more detail. Exactly what do=
 you want to achieve for your users?=0AWe could be talking about any number=
 of Lucene functions here.=0A=0A----- Original Message ----=0AFrom: sumitty=
agi <ping.sumit@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Friday=
, 21 December, 2007 4:51:09 AM=0ASubject: Which file in the lucene package =
is used to manipulate results..=0A=0A=0Ahi, i am using lucene for the very =
first time and want to manipulate=0A the=0Aresults, by adding some more fac=
tors to it, which file should i edit to=0Amanipulate the search results....=
=0A=0AThanks =0ASumit Tyagi=0A-- =0AView this message in context:=0A http:/=
/www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-resu=
lts..-tp14450335p14450335.html=0ASent from the Lucene - Java Users mailing =
list archive at Nabble.com.=0A=0A=0A=0A=0A=0A      ________________________=
__________________________________=0ASent from Yahoo! Mail - a smarter inbo=
x http://uk.mail.yahoo.com=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 10:20:06 2007
Return-Path: <java-user-return-31607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64401 invoked from network); 21 Dec 2007 10:20:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 10:20:06 -0000
Received: (qmail 75693 invoked by uid 500); 21 Dec 2007 10:19:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75667 invoked by uid 500); 21 Dec 2007 10:19:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75644 invoked by uid 99); 21 Dec 2007 10:19:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 02:19:44 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhouqi.jackson@gmail.com designates 72.14.214.229 as permitted sender)
Received: from [72.14.214.229] (HELO hu-out-0506.google.com) (72.14.214.229)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 10:19:21 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1345418hub.15
        for <java-user@lucene.apache.org>; Fri, 21 Dec 2007 02:19:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Flq1tIHJj/ZmOV2YBsuVLu3SdVMrnaDpeQfS5M10ulI=;
        b=Ub08oae3j3MgOcwywNo5AeXRCHK4xhbCgR+s74l/6jnbS0YdqNWA9TkDPh8Xc1PXei2snvDI91ab2pcd5+XP609B9+ive2eXejiOC16VbKuMIDRoM5RrZkVAdvkXjw9ty+ANKnw1aWAWuKZM4wt5riiOkcF3ptPodnhN0HkyWC8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=LozUZagNdQ+Dgr3T6l2xf4ox5LYoWQ4rPbqHjhFq5+BLhC0QjDMWed2QWSWB11oGLpz/RVKAIPN07hdw1xpNFOHN6vMHPJuLYw0yw0IRRoqHM4o3c49nD8RxqPlOUlPT2qZ/6O2EsLFxhim7HchStofBT7elJafoFMUxmCJUwx4=
Received: by 10.82.152.16 with SMTP id z16mr1877485bud.17.1198232363645;
        Fri, 21 Dec 2007 02:19:23 -0800 (PST)
Received: by 10.82.151.11 with HTTP; Fri, 21 Dec 2007 02:19:23 -0800 (PST)
Message-ID: <72d748c20712210219g601806c5na7829df04852edda@mail.gmail.com>
Date: Fri, 21 Dec 2007 18:19:23 +0800
From: "Zhou Qi" <zhouqi.jackson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which file in the lucene package is used to manipulate results..
In-Reply-To: <762026.33053.qm@web26013.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23009_18339070.1198232363609"
References: <762026.33053.qm@web26013.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23009_18339070.1198232363609
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Sumittyagi,

     I think you can implement your factors in the scorer to obtain your
desired results.

2007/12/21, mark harwood <markharw00d@yahoo.co.uk>:
>
> I think you need to describe your "factors" in more detail. Exactly what
> do you want to achieve for your users?
> We could be talking about any number of Lucene functions here.
>
> ----- Original Message ----
> From: sumittyagi <ping.sumit@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, 21 December, 2007 4:51:09 AM
> Subject: Which file in the lucene package is used to manipulate results..
>
>
> hi, i am using lucene for the very first time and want to manipulate
> the
> results, by adding some more factors to it, which file should i edit to
> manipulate the search results....
>
> Thanks
> Sumit Tyagi
> --
> View this message in context:
>
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14450335.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
>
>
>
>       __________________________________________________________
> Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_23009_18339070.1198232363609--

From java-user-return-31608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 14:46:41 2007
Return-Path: <java-user-return-31608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46052 invoked from network); 21 Dec 2007 14:46:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 14:46:41 -0000
Received: (qmail 37284 invoked by uid 500); 21 Dec 2007 14:46:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37259 invoked by uid 500); 21 Dec 2007 14:46:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37248 invoked by uid 99); 21 Dec 2007 14:46:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 06:46:23 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.188 as permitted sender)
Received: from [209.85.128.188] (HELO fk-out-0910.google.com) (209.85.128.188)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 14:45:58 +0000
Received: by fk-out-0910.google.com with SMTP id z23so458849fkz.5
        for <java-user@lucene.apache.org>; Fri, 21 Dec 2007 06:46:01 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=CEKvRzgx/yHyvPwDXoBz8rmnrI8dtvai9xPcPkxUOdE=;
        b=ta7JKt0UWP8yCK4dtMBgQ3TuILes5PcIqReHY1Yvve8h78x5wXq8K5eXWnCkt6aEXwH+dwkR1ht/Wgbl3tBORpnVxIsgMKj1fXE7tRsezI4vA4Xoz/cnNnRXBnF67SSFBEpABLPvqtO/bRuj7MRuOIHCkgrlJlXus6CZVFPEqds=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=bRQO42tj+Bu+MmMMyMTnwTqn/CIZpeVnMPt44sSGZANcvSdRaMepX4WzrFROadB8v+1mnVPjVv1Wip8b64VXhWYIKDCb6rRuDkacDljDprrXnCpyyee5otYdQBs+teopnO0mV42JeSSIEIEyrGXQy98Is9k10+7bZ0+cGY4I7J4=
Received: by 10.82.123.16 with SMTP id v16mr965352buc.18.1198248361061;
        Fri, 21 Dec 2007 06:46:01 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Fri, 21 Dec 2007 06:46:01 -0800 (PST)
Message-ID: <359a92830712210646i2342952bjd0c7ea82e28a4d41@mail.gmail.com>
Date: Fri, 21 Dec 2007 09:46:01 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boosting Vs Sorting
In-Reply-To: <BAY112-W3267D6CF8D3879E0546C2F95E0@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23833_32855086.1198248361041"
References: <BAY112-W3267D6CF8D3879E0546C2F95E0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23833_32855086.1198248361041
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>From my perspective, index-time boosting and sorting are apples
and oranges.

According to a post from Hoss, index-time boosting is a way of
saying that "Field x in this document is more important than
field x in other documents". Query-time boosts are a way of
saying "I care about field X more than field Y across *all*
documents".

So index time boosting doesn't seem to relate to your problem since
you really want to compare field x across all documents. It seems
that query-time boosting is more relevant.

So, leaving aside how you form your "similar" q

On Dec 20, 2007 10:50 PM, Rakesh Shete <rakesh_shete@hotmail.com> wrote:

>
> Hi all,
>
> I am using Hibernate Search (http://www.hibernate.org/410.html) which is a
> wrapper around Lucene for performing search over info stored in the DB. I
> have questions related to Lucene boosting Vs sorting:
>
> Is index time boosting of documents and fields better than specifying
> sorting parameters at search time?
>
> I have been browsing through the Lucene mail archives for an answer to
> this. Going through them and reading on stuff related to Lucene scoring, my
> understanding is that if I know upfront at index time that the relevance
> order of results is based on certain fields, then, it is better to have
> index time boosting of documents and fields. Am I right here?
>
> My requirements are like:
> Results having an exact match to the input query string should have
> highest preference followed by an exact match with field1, field2, field3
> and then followed by search query substring (or near match) match with
> field1, field2, field3.
>
> Any suggestions are most welcome.
>
> --Rakesh S
>
> _________________________________________________________________
> Post free property ads on Yello Classifieds now! www.yello.in
> http://ss1.richmedia.in/recurl.asp?pid=219

------=_Part_23833_32855086.1198248361041--

From java-user-return-31609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 14:47:23 2007
Return-Path: <java-user-return-31609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46142 invoked from network); 21 Dec 2007 14:47:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 14:47:23 -0000
Received: (qmail 39048 invoked by uid 500); 21 Dec 2007 14:47:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38919 invoked by uid 500); 21 Dec 2007 14:47:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38908 invoked by uid 99); 21 Dec 2007 14:47:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 06:47:06 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 14:46:42 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id lBLEjSYN010379
	for <java-user@lucene.apache.org>; Fri, 21 Dec 2007 08:45:28 -0600
Received: (qmail 10957 invoked by uid 0); 21 Dec 2007 08:46:42 -0600
Date: 21 Dec 2007 08:46:42 -0600
Message-ID: <20071221144642.10956.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Boosting Vs Sorting
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 6.00] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 175415077 - 4818b94d5ac2 (trained as not-spam)
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=175415077&m=4818b94d5ac2&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=175415077&m=4818b94d5ac2&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=175415077&m=4818b94d5ac2&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

LUX is closed until 7th January 2008

most information about LUX is available at www.lux.org.uk



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 14:48:01 2007
Return-Path: <java-user-return-31610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46221 invoked from network); 21 Dec 2007 14:48:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 14:48:01 -0000
Received: (qmail 40555 invoked by uid 500); 21 Dec 2007 14:47:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40526 invoked by uid 500); 21 Dec 2007 14:47:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40515 invoked by uid 99); 21 Dec 2007 14:47:44 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 06:47:44 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [206.125.223.74] (HELO mx04.mailboxcop.com) (206.125.223.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 14:47:21 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx04.mailboxcop.com (8.13.8/8.13.8) with ESMTP id lBLEk9at011500
	for <java-user@lucene.apache.org>; Fri, 21 Dec 2007 08:46:10 -0600
Received: (qmail 11553 invoked by uid 0); 21 Dec 2007 08:47:24 -0600
Date: 21 Dec 2007 08:47:24 -0600
Message-ID: <20071221144724.11552.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: Boosting Vs Sorting
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.50
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 6.00] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 175415241 - 09740d8783be (trained as not-spam)
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=175415241&m=09740d8783be&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=175415241&m=09740d8783be&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=175415241&m=09740d8783be&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.6
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

LUX is closed until 7th January 2008

most information about LUX is available at www.lux.org.uk



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 14:53:43 2007
Return-Path: <java-user-return-31611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47655 invoked from network); 21 Dec 2007 14:53:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 14:53:43 -0000
Received: (qmail 48937 invoked by uid 500); 21 Dec 2007 14:53:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48903 invoked by uid 500); 21 Dec 2007 14:53:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48892 invoked by uid 99); 21 Dec 2007 14:53:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 06:53:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 14:53:11 +0000
Received: by fk-out-0910.google.com with SMTP id z23so461837fkz.5
        for <java-user@lucene.apache.org>; Fri, 21 Dec 2007 06:53:03 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=IU1MhHgf7f8HIhxKcimx9cl/bn7SLBeXSquKWzwfc1o=;
        b=V/7LduFzulVemTcNhW5yzqmzKY6XpLG8PuB/H0YmacA/MRi+BC+YX1U+WVa35r3ldSSrRzJvggIrJcZRyseA67q0Zodj3IvFde0N+7BgWC1nppZ2FiYUlTiQnDjDcr5M5NGrz7Av1bGKq1pHWyp7jVxfvURjMREAs/9Hyo4xwgk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KdvaA9rsESpxnZiT+gFibDzHw9pqan0K/zZQsiLgJA4/bd+WSZ3OlllWBOWuVphhFylGYzLig0YLX80jp9scCJA70d/fX9SurGt76Zy/XajT4Y01p20HYFGtfvuaQLa8IUpw4dglHwEXu//2yMIYGAwkQnNNePAzbORBz4VGE2s=
Received: by 10.82.145.7 with SMTP id s7mr2323034bud.6.1198248782322;
        Fri, 21 Dec 2007 06:53:02 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Fri, 21 Dec 2007 06:53:02 -0800 (PST)
Message-ID: <359a92830712210653q5df2a025nb827685ed7c643c3@mail.gmail.com>
Date: Fri, 21 Dec 2007 09:53:02 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boosting Vs Sorting
In-Reply-To: <359a92830712210646i2342952bjd0c7ea82e28a4d41@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_23890_12867792.1198248782306"
References: <BAY112-W3267D6CF8D3879E0546C2F95E0@phx.gbl>
	 <359a92830712210646i2342952bjd0c7ea82e28a4d41@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_23890_12867792.1198248782306
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

OK, I'm trying to adjust to a Mac and my keyboard shortcuts sometimes
lead me to send the mail when I didn't intend. Sorry about that...

So, leaving aside how you form your "similar" query, I *think* you
want to form two clauses, your "exact" and your "similar" and
boost them individually, combined in a boolean query.

This will still interleave the results I think. But it's also a valid
question whether this is good or bad. Is it *really* better for your
users to see a low-relevance query that happens to have the exact
words in it before a very-high ranking but not quite exact response?
That, of course it up to your product manager....

If it is really a requirement, it seems to me that you would be able to
just form the two queries independently, then just post-process them.
One query is the exact version, and the second query is the similar one.
Then just combine the results as you please by iterating the hits
object for the exact query then following it by the same for the similar.

I don't see how sorting relates to your problem at all....

Best
Erick

On Dec 21, 2007 9:46 AM, Erick Erickson <erickerickson@gmail.com> wrote:

> From my perspective, index-time boosting and sorting are apples
> and oranges.
>
> According to a post from Hoss, index-time boosting is a way of
> saying that "Field x in this document is more important than
> field x in other documents". Query-time boosts are a way of
> saying "I care about field X more than field Y across *all*
> documents".
>
> So index time boosting doesn't seem to relate to your problem since
> you really want to compare field x across all documents. It seems
> that query-time boosting is more relevant.
>
> So, leaving aside how you form your "similar" q
>
>
> On Dec 20, 2007 10:50 PM, Rakesh Shete < rakesh_shete@hotmail.com> wrote:
>
> >
> > Hi all,
> >
> > I am using Hibernate Search (http://www.hibernate.org/410.html) which is
> > a wrapper around Lucene for performing search over info stored in the DB. I
> > have questions related to Lucene boosting Vs sorting:
> >
> > Is index time boosting of documents and fields better than specifying
> > sorting parameters at search time?
> >
> > I have been browsing through the Lucene mail archives for an answer to
> > this. Going through them and reading on stuff related to Lucene scoring, my
> > understanding is that if I know upfront at index time that the relevance
> > order of results is based on certain fields, then, it is better to have
> > index time boosting of documents and fields. Am I right here?
> >
> > My requirements are like:
> > Results having an exact match to the input query string should have
> > highest preference followed by an exact match with field1, field2, field3
> > and then followed by search query substring (or near match) match with
> > field1, field2, field3.
> >
> > Any suggestions are most welcome.
> >
> > --Rakesh S
> >
> > _________________________________________________________________
> > Post free property ads on Yello Classifieds now! www.yello.in
> > http://ss1.richmedia.in/recurl.asp?pid=219
>
>
>

------=_Part_23890_12867792.1198248782306--

From java-user-return-31612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 15:10:25 2007
Return-Path: <java-user-return-31612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93170 invoked from network); 21 Dec 2007 15:10:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 15:10:24 -0000
Received: (qmail 90173 invoked by uid 500); 21 Dec 2007 15:10:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90136 invoked by uid 500); 21 Dec 2007 15:10:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90125 invoked by uid 99); 21 Dec 2007 15:10:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 07:10:07 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 15:09:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J5jVU-0001as-K1
	for java-user@lucene.apache.org; Fri, 21 Dec 2007 07:09:48 -0800
Message-ID: <14456938.post@talk.nabble.com>
Date: Fri, 21 Dec 2007 07:09:48 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which file in the lucene package is used to manipulate
 results..
In-Reply-To: <762026.33053.qm@web26013.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
References: <14450335.post@talk.nabble.com> <762026.33053.qm@web26013.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


actually i am writing a module to rerank the results, so i want to edit the
file which arrange the results and give them ranks,
or is there any other way i can use my module to rerank the results


markharw00d wrote:
> 
> I think you need to describe your "factors" in more detail. Exactly what
> do you want to achieve for your users?
> We could be talking about any number of Lucene functions here.
> 
> ----- Original Message ----
> From: sumittyagi <ping.sumit@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Friday, 21 December, 2007 4:51:09 AM
> Subject: Which file in the lucene package is used to manipulate results..
> 
> 
> hi, i am using lucene for the very first time and want to manipulate
>  the
> results, by adding some more factors to it, which file should i edit to
> manipulate the search results....
> 
> Thanks 
> Sumit Tyagi
> -- 
> View this message in context:
> 
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14450335.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> 
> 
> 
>       __________________________________________________________
> Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14456938.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 15:45:15 2007
Return-Path: <java-user-return-31613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47971 invoked from network); 21 Dec 2007 15:45:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 15:45:15 -0000
Received: (qmail 30345 invoked by uid 500); 21 Dec 2007 15:44:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30319 invoked by uid 500); 21 Dec 2007 15:44:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30305 invoked by uid 99); 21 Dec 2007 15:44:58 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 07:44:58 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.212] (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 21 Dec 2007 15:44:34 +0000
Received: (qmail 71119 invoked by uid 60001); 21 Dec 2007 15:44:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=U/mpTU1y+CpJahOejw+m4rK5ynztGPTE0GGhAr0nI8RNneZWRSI37+KFwLauI87vKvwtLQat0jxPauNLG3Gl+Mp8dm7UZaejP7UrwPKpGpsFvsZF3ScHnOdXwZWl5qpGJYBPgcSIy6txLxe0gWMzPzOtlni52JjuBckzCopBHvs=;
X-YMail-OSG: KS1TvFQVM1kC.M0x5JFIEaUD6TjtlJNr3TbC93iP49ephtAIJDJlCO4Z.3L5PTDMBPGtQoKK.oWXxmf_n_D3zvfLpsWua8F7BlVEzuBKTIDY3cG1sjsg7zLrS_0-
Received: from [193.36.230.96] by web26001.mail.ukl.yahoo.com via HTTP; Fri, 21 Dec 2007 15:44:35 GMT
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Fri, 21 Dec 2007 15:44:35 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Which file in the lucene package is used to manipulate results..
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <715279.70766.qm@web26001.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Again, if you could be precise about what factors will influence the rankin=
g that would help. Field names, what is wrong with existing ranking order a=
nd some of the thinking about your proposed re-rank logic would be useful c=
ontext.=0A=0AIn Lucene you have the options for individual query-clause boo=
sts, index-time document boosts, field-specific boosts on parsers, index-ti=
me length normalisation options, query result sorting, IndexSearcher "Simil=
arity" settings and custom scorers to name a  few. We can't recommend which=
 approach is most suited unless you can say more about what problem you're =
trying to address.=0A=0ACheers=0AMark=0A=0A=0A----- Original Message ----=
=0AFrom: sumittyagi <ping.sumit@gmail.com>=0ATo: java-user@lucene.apache.or=
g=0ASent: Friday, 21 December, 2007 3:09:48 PM=0ASubject: Re: Which file in=
 the lucene package is used to manipulate results..=0A=0A=0Aactually i am w=
riting a module to rerank the results, so i want to edit=0A the=0Afile whic=
h arrange the results and give them ranks,=0Aor is there any other way i ca=
n use my module to rerank the results=0A=0A=0Amarkharw00d wrote:=0A> =0A> I=
 think you need to describe your "factors" in more detail. Exactly=0A what=
=0A> do you want to achieve for your users?=0A> We could be talking about a=
ny number of Lucene functions here.=0A> =0A> ----- Original Message ----=0A=
> From: sumittyagi <ping.sumit@gmail.com>=0A> To: java-user@lucene.apache.o=
rg=0A> Sent: Friday, 21 December, 2007 4:51:09 AM=0A> Subject: Which file i=
n the lucene package is used to manipulate=0A results..=0A> =0A> =0A> hi, i=
 am using lucene for the very first time and want to manipulate=0A>  the=0A=
> results, by adding some more factors to it, which file should i edit=0A t=
o=0A> manipulate the search results....=0A> =0A> Thanks =0A> Sumit Tyagi=0A=
> -- =0A> View this message in context:=0A> =0A>=0A http://www.nabble.com/W=
hich-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p=
14450335.html=0A> Sent from the Lucene - Java Users mailing list archive at=
 Nabble.com.=0A> =0A> =0A> =0A> =0A> =0A>       ___________________________=
_______________________________=0A> Sent from Yahoo! Mail - a smarter inbox=
 http://uk.mail.yahoo.com=0A> =0A> =0A> -----------------------------------=
----------------------------------=0A> To unsubscribe, e-mail: java-user-un=
subscribe@lucene.apache.org=0A> For additional commands, e-mail: java-user-=
help@lucene.apache.org=0A> =0A> =0A> =0A=0A-- =0AView this message in conte=
xt:=0A http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-ma=
nipulate-results..-tp14450335p14456938.html=0ASent from the Lucene - Java U=
sers mailing list archive at Nabble.com.=0A=0A=0A--------------------------=
-------------------------------------------=0ATo unsubscribe, e-mail: java-=
user-unsubscribe@lucene.apache.org=0AFor additional commands, e-mail: java-=
user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A      _____________________=
_____________________________________=0ASent from Yahoo! Mail - a smarter i=
nbox http://uk.mail.yahoo.com=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 15:49:10 2007
Return-Path: <java-user-return-31614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53238 invoked from network); 21 Dec 2007 15:49:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 15:49:09 -0000
Received: (qmail 36258 invoked by uid 500); 21 Dec 2007 15:48:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36220 invoked by uid 500); 21 Dec 2007 15:48:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36209 invoked by uid 99); 21 Dec 2007 15:48:53 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 07:48:53 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 15:48:30 +0000
Received: by fk-out-0910.google.com with SMTP id z23so485240fkz.5
        for <java-user@lucene.apache.org>; Fri, 21 Dec 2007 07:48:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=4fGWKeOSmYxETtboouIdpdmJO97ScfC8xWFxMmbJjvg=;
        b=FwpHeDOUj5YgcWPR0/xr2vujiK+BSLnr2yl7e03uKZ04KUr8ZEt0TTcFxG12jbHtaZSS9uejcNnezvt9Iewx3stUGy0EMZ3Xh/UDKbdPEpkNdw7dpmavOds1h/7SBp2H1Vif3oPvE0bNERHTjL8Ivigg6w2PTA9r8II9ca0TTzs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=irq1d4+7dh/tnztSxqjXwDy0ZTlcT3QYzK/c0ceeCxy1tAyfmpilvHy10yRuPRfNbaqW73SIDp2qRY37Ag+0ZmvBYZcZgYkJVa6jTIb7nZVlTpjVMxs2lBVAm56E1J/g8nqe0VqyIyz0oJowsHEVboaWrl4qxrX1v1oHl3NMr7E=
Received: by 10.82.157.6 with SMTP id f6mr2419872bue.1.1198252111884;
        Fri, 21 Dec 2007 07:48:31 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Fri, 21 Dec 2007 07:48:31 -0800 (PST)
Message-ID: <359a92830712210748y575eb0bes2e27c5da0f7104df@mail.gmail.com>
Date: Fri, 21 Dec 2007 10:48:31 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which file in the lucene package is used to manipulate results..
In-Reply-To: <14456938.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_24044_23558847.1198252111857"
References: <14450335.post@talk.nabble.com>
	 <762026.33053.qm@web26013.mail.ukl.yahoo.com>
	 <14456938.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_24044_23558847.1198252111857
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You still haven't explained *why* you want to rerank results. What
is the use-case you're trying to implement? Quite often it's turned
out for me that when I let folks on the list know what the use
case I'm trying to support is, they come up with much more elegant
solutions than I was thinking about.

For instance, does the CustomScoreQuery class have any relevance
to your problem?

If you're thinking of modifying the core Lucene code for your
special purpose, I'd advise against it unless and until you'd exhausted
all the other options. It's always a maintenance headache to do this.

Best
Erick

On Dec 21, 2007 10:09 AM, sumittyagi <ping.sumit@gmail.com> wrote:

>
> actually i am writing a module to rerank the results, so i want to edit
> the
> file which arrange the results and give them ranks,
> or is there any other way i can use my module to rerank the results
>
>
> markharw00d wrote:
> >
> > I think you need to describe your "factors" in more detail. Exactly what
> > do you want to achieve for your users?
> > We could be talking about any number of Lucene functions here.
> >
> > ----- Original Message ----
> > From: sumittyagi <ping.sumit@gmail.com>
> > To: java-user@lucene.apache.org
> > Sent: Friday, 21 December, 2007 4:51:09 AM
> > Subject: Which file in the lucene package is used to manipulate
> results..
> >
> >
> > hi, i am using lucene for the very first time and want to manipulate
> >  the
> > results, by adding some more factors to it, which file should i edit to
> > manipulate the search results....
> >
> > Thanks
> > Sumit Tyagi
> > --
> > View this message in context:
> >
> >
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14450335.html
> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >
> >
> >
> >
> >
> >       __________________________________________________________
> > Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14456938.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_24044_23558847.1198252111857--

From java-user-return-31615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 17:51:31 2007
Return-Path: <java-user-return-31615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1981 invoked from network); 21 Dec 2007 17:51:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 17:51:31 -0000
Received: (qmail 87608 invoked by uid 500); 21 Dec 2007 17:51:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87578 invoked by uid 500); 21 Dec 2007 17:51:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87566 invoked by uid 99); 21 Dec 2007 17:51:14 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 09:51:14 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of rakesh_shete@hotmail.com designates 65.54.246.205 as permitted sender)
Received: from [65.54.246.205] (HELO bay0-omc3-s5.bay0.hotmail.com) (65.54.246.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 17:50:50 +0000
Received: from BAY112-W3 ([64.4.26.103]) by bay0-omc3-s5.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Fri, 21 Dec 2007 09:50:53 -0800
Message-ID: <BAY112-W3AEF174E7107D4A0E8487F95E0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_0008b05d-f562-4c12-a085-e46fa3a8c1c1_"
X-Originating-IP: [125.99.82.185]
From: Rakesh Shete <rakesh_shete@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Boosting Vs Sorting
Date: Fri, 21 Dec 2007 23:20:53 +0530
Importance: Normal
In-Reply-To: <359a92830712210653q5df2a025nb827685ed7c643c3@mail.gmail.com>
References: <BAY112-W3267D6CF8D3879E0546C2F95E0@phx.gbl>
	 <359a92830712210646i2342952bjd0c7ea82e28a4d41@mail.gmail.com> 
 <359a92830712210653q5df2a025nb827685ed7c643c3@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 21 Dec 2007 17:50:53.0573 (UTC) FILETIME=[0808AB50:01C843FA]
X-Virus-Checked: Checked by ClamAV on apache.org

--_0008b05d-f562-4c12-a085-e46fa3a8c1c1_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi Eric,

>> I don't see how sorting relates to your problem at all....

Could you just explain how is sorting different from boosting?=20

I have been trying to figure this out. Going through "Lucene In Action" my=
=20
understanding of  sorting is that it will kind of second level of ordering=
=20
after the query results have been scored (Not sure if the relevance establi=
shed
by scoring is lost in this process).


>> Is it *really* better for your users to see a low-relevance query=20
>> that happens to have the exact words in it before a very-high=20
>> ranking but not quite exact response?

Nopes. Thats the last thing my product manager will want.=20

Lets take an example to simplify this:

I have fields like title, description, tags. Now when I search for a term=20
"Indoor Photography" then I would like the results with exact match in titl=
e to be=20
more important than in description or tags. However, if there is an exact m=
atch in description
then it should be given more preference than the partial match in title.

Going by the points mentioned below and as per one of your posts=20
(http://mail-archives.apache.org/mod_mbox/lucene-java-user/200609.mbox/%3CP=
ine.LNX.4.58.0609271134380.32280@hal.rescomp.berkeley.edu%3E)
I understand that I need to specify query time boosting like this:

title:Indoor Photography^2.5 description:Indoor Photography^1.5 tags:
Indoor Photography^1.2

Let me know if this would help my cause.=20

Thnx for ur time n the valuable info.

--Rakesh S





> Date: Fri, 21 Dec 2007 09:53:02 -0500
> From: erickerickson@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: Boosting Vs Sorting
>=20
> OK, I'm trying to adjust to a Mac and my keyboard shortcuts sometimes
> lead me to send the mail when I didn't intend. Sorry about that...
>=20
> So, leaving aside how you form your "similar" query, I *think* you
> want to form two clauses, your "exact" and your "similar" and
> boost them individually, combined in a boolean query.
>=20
> This will still interleave the results I think. But it's also a valid
> question whether this is good or bad. Is it *really* better for your
> users to see a low-relevance query that happens to have the exact
> words in it before a very-high ranking but not quite exact response?
> That, of course it up to your product manager....
>=20
> If it is really a requirement, it seems to me that you would be able to
> just form the two queries independently, then just post-process them.
> One query is the exact version, and the second query is the similar one.
> Then just combine the results as you please by iterating the hits
> object for the exact query then following it by the same for the similar.
>=20
> I don't see how sorting relates to your problem at all....
>=20
> Best
> Erick
>=20
> On Dec 21, 2007 9:46 AM, Erick Erickson <erickerickson@gmail.com> wrote:
>=20
> > From my perspective, index-time boosting and sorting are apples
> > and oranges.
> >
> > According to a post from Hoss, index-time boosting is a way of
> > saying that "Field x in this document is more important than
> > field x in other documents". Query-time boosts are a way of
> > saying "I care about field X more than field Y across *all*
> > documents".
> >
> > So index time boosting doesn't seem to relate to your problem since
> > you really want to compare field x across all documents. It seems
> > that query-time boosting is more relevant.
> >
> > So, leaving aside how you form your "similar" q
> >
> >
> > On Dec 20, 2007 10:50 PM, Rakesh Shete < rakesh_shete@hotmail.com> wrot=
e:
> >
> > >
> > > Hi all,
> > >
> > > I am using Hibernate Search (http://www.hibernate.org/410.html) which=
 is
> > > a wrapper around Lucene for performing search over info stored in the=
 DB. I
> > > have questions related to Lucene boosting Vs sorting:
> > >
> > > Is index time boosting of documents and fields better than specifying
> > > sorting parameters at search time?
> > >
> > > I have been browsing through the Lucene mail archives for an answer t=
o
> > > this. Going through them and reading on stuff related to Lucene scori=
ng, my
> > > understanding is that if I know upfront at index time that the releva=
nce
> > > order of results is based on certain fields, then, it is better to ha=
ve
> > > index time boosting of documents and fields. Am I right here?
> > >
> > > My requirements are like:
> > > Results having an exact match to the input query string should have
> > > highest preference followed by an exact match with field1, field2, fi=
eld3
> > > and then followed by search query substring (or near match) match wit=
h
> > > field1, field2, field3.
> > >
> > > Any suggestions are most welcome.
> > >
> > > --Rakesh S
> > >
> > > _________________________________________________________________
> > > Post free property ads on Yello Classifieds now! www.yello.in
> > > http://ss1.richmedia.in/recurl.asp?pid=3D219
> >
> >
> >

_________________________________________________________________
Post free property ads on Yello Classifieds now! www.yello.in
http://ss1.richmedia.in/recurl.asp?pid=3D219=

--_0008b05d-f562-4c12-a085-e46fa3a8c1c1_--

From java-user-return-31616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 18:39:27 2007
Return-Path: <java-user-return-31616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24793 invoked from network); 21 Dec 2007 18:39:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 18:39:27 -0000
Received: (qmail 23183 invoked by uid 500); 21 Dec 2007 18:39:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23154 invoked by uid 500); 21 Dec 2007 18:39:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23142 invoked by uid 99); 21 Dec 2007 18:39:08 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 10:39:08 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy)
Received: from [142.58.101.21] (HELO rm-rstar.sfu.ca) (142.58.101.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 18:38:55 +0000
Received: from BaljeetPC (d142-058-189-048.surrey.sfu.ca [142.58.189.48])
	by rm-rstar.sfu.ca (8.13.6/8.13.4/SFU-5.0H) with ESMTP id lBLIcirI009579
	for <java-user@lucene.apache.org>; Fri, 21 Dec 2007 10:38:45 -0800 (PST)
X-Spam-Level: Spam-Level 
From: "Baljeet Dhaliwal" <bsd@sfu.ca>
To: <java-user@lucene.apache.org>
References: <00e801c8428b$807d93e0$8178bba0$@ca>	 <359a92830712191641g1c1983c6r2c1fc471a4b5247f@mail.gmail.com>	 <012101c842bb$37584b30$a608e190$@ca>	 <359a92830712200636w26deccd8pbd68fdec1154ade8@mail.gmail.com>	 <015801c84356$8cb94660$a62bd320$@ca>	 <359a92830712201525g225801bbg2bfcda1e08caa126@mail.gmail.com>	 <016201c84363$b255cd50$170167f0$@ca> <359a92830712201620k1b9fed2dga7e120837ae07ac9@mail.gmail.com>
In-Reply-To: <359a92830712201620k1b9fed2dga7e120837ae07ac9@mail.gmail.com>
Subject: RE: Problem with Escape characters in lucene demo search
Date: Fri, 21 Dec 2007 10:38:41 -0800
Message-ID: <018d01c84400$b5b70b60$21252220$@ca>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook 12.0
Thread-Index: AchDZ27R5QcQzEIzSmqUG92Ol6JvPAAPqC3w
Content-Language: en-ca
X-Virus-Checked: Checked by ClamAV on apache.org

I plan to develop a simple web interface for our log search and wanted
something that is handy. Thought Lucene would fit the bill. I don't
understand the purpose of creating lucene or a use case where lucene would
offer any advantage over already existing tools other than that it can be
integrated with a web interface. If I have to pre-process/structure data and
then index it using lucene, I could have used a db to store the information,
why bother learning new stuff which does not offer any advantage. grep also
fits the bill if only hardcore techies have to search info, google desktop
does the job for windows based system.

Not to be critical of lucene, can you please tell me a use case where lucene
would do a better job than other free alternatives (grep, google desktop
etc).

B




-----Original Message-----
From: Erick Erickson [mailto:erickerickson@gmail.com] 
Sent: December-20-07 4:21 PM
To: java-user@lucene.apache.org
Subject: Re: Problem with Escape characters in lucene demo search

I think you need to back up and think about what you're trying to
accomplish. Just throwing the file into a single document in
your index doesn't seem very useful.

Of course you can pre-process the input and index only what
you want. The examples in the Lucene demo just show
you how to index entire files as a starting point. You can, instead,
read the file yourself and extract the relevant information for the
index, throwing away all of the uninteresting bits. You can break
up the file into as many documents as you want. You can massage
the data into a more reasonable form. Each document can have as
many fields as you care to have. You can......

The important thing is to decide what you want to accomplish.
That is, what the end users want out of the experience. And
create the index to support that. Just throwing all the files as-is
into an index is probably not a substantial improvement over
grep, so why bother? Your job is to use Lucene to impose
some structure on what is essentially unstructured data,
presumably to support some goal.

"Making the logs searchable"  doesn't really *mean* anything. They're
already searchable with grep. In fact, unless you can create a
use case that can't be accomplished with grep, don't use Lucene at all.

I love Lucene. But if the problem you're trying to solve is *already* solved
with tools that exist, you're just spending time solving an already-solved
problem. Without adding value.

All that said, there's certainly value in learning how to use a new tool.
Just be sure you've got a clear goal in mind, supported by use
cases. Or are just experimenting, which is a fine thing. But don't
confuse the two.

Best
Erick

On Dec 20, 2007 6:54 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:

> Interesting!!!! I am trying to make our logs searchable and thought of
> trying Lucene. I am talking of several (around 50-60) 2GB files to index.
> Would it scale? How can I index portion of document? Also like with any
> log
> , there is a pattern and most of the stuff in there is redundant. Can i
> discard certain words to make the index small.
>
> Cheers
> B
>
>
> -----Original Message-----
> From: Erick Erickson [mailto:erickerickson@gmail.com]
> Sent: December-20-07 3:25 PM
> To: java-user@lucene.apache.org
> Subject: Re: Problem with Escape characters in lucene demo search
>
> Lucene, by default, only indexes the first 10,000 tokens and throws
> the rest away. You can change this via IndexWriter.SetMaxFieldLength.
>
> 2G is a huge file. Are you indexing all that or are you indexing only
> portions?
>
> Erick
>
> On Dec 20, 2007 5:20 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:
>
> > Hi Erick
> >
> > Thanks. I found something interesting. I was indexing huge text files
> > (>2GB)
> > and the search was not returning escape characters. However, when I
> moved
> > the line to a smaller file (20MB), it works fine. Is there a limit on
> file
> > size search by Lucene or would you know how do escape characters search
> > performs when file is as big as mine.
> >
> > B
> >
> > -----Original Message-----
> > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > Sent: December-20-07 6:36 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Problem with Escape characters in lucene demo search
> >
> > use Luke. Google Lucene luke and you'll find it.....
> >
> > You can use it to examine the contents of your index
> > in many different ways. It's invaluable when exploring
> > the different analyzers and making sure that your index
> > has what you *think* it has.
> >
> > Erick
> >
> > On Dec 19, 2007 10:48 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:
> >
> > > How do i check in my index. It looks like bytecode to me. My searched
> > file
> > > does contain word "login" with quotes.
> > >
> > > B
> > >
> > > -----Original Message-----
> > > From: Erick Erickson [mailto:erickerickson@gmail.com]
> > > Sent: December-19-07 4:41 PM
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Problem with Escape characters in lucene demo search
> > >
> > > I'm pretty sure StandardAnalyzer is stripping these off. Have you
> looked
> > > in your index to see if "longin" (with quotes) is even in there? I
> think
> > > you'll find that it's not.
> > >
> > > Best
> > > Erick
> > >
> > > On Dec 19, 2007 5:07 PM, Baljeet Dhaliwal <bsd@sfu.ca> wrote:
> > >
> > > > Hi there
> > > >
> > > >
> > > >
> > > > I am having a problem in using escape characters with lucene demo
> > code.
> > > I
> > > > used the following code for IndexFiles and SearchFiles. The code
> works
> > > > fine
> > > > for regular searching and also with wildcard. However, when I try to
> > use
> > > > escape characters, somehow it strips them off. For example: when i
> > > search
> > > > for  "login" through "\"login\"" or for that matter try to use any
> > > escape
> > > > character, lucene strips the escape characters and looks for the
> text
> > > only
> > > > (login as against "login")
> > > >
> > > >
> > > >
> > > > Can someone help please.
> > > >
> > > >
> > > >
> > > > Cheers
> > > >
> > > > B
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > IndexFiles.java
> > > >
> > > >
> > > >
> > > > package org.apache.lucene.demo;
> > > >
> > > >
> > > >
> > > > /**
> > > >
> > > >  * Licensed to the Apache Software Foundation (ASF) under one or
> more
> > > >
> > > >  * contributor license agreements.  See the NOTICE file distributed
> > with
> > > >
> > > >  * this work for additional information regarding copyright
> ownership.
> > > >
> > > >  * The ASF licenses this file to You under the Apache License,
> Version
> > > 2.0
> > > >
> > > >  * (the "License"); you may not use this file except in compliance
> > with
> > > >
> > > >  * the License.  You may obtain a copy of the License at
> > > >
> > > >  *
> > > >
> > > >  *     http://www.apache.org/licenses/LICENSE-2.0
> > > >
> > > >  *
> > > >
> > > >  * Unless required by applicable law or agreed to in writing,
> software
> > > >
> > > >  * distributed under the License is distributed on an "AS IS" BASIS,
> > > >
> > > >  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> > > > implied.
> > > >
> > > >  * See the License for the specific language governing permissions
> and
> > > >
> > > >  * limitations under the License.
> > > >
> > > >  */
> > > >
> > > >
> > > >
> > > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > > >
> > > > import org.apache.lucene.document.Document;
> > > >
> > > > import org.apache.lucene.index.IndexWriter;
> > > >
> > > >
> > > >
> > > > import java.io.BufferedReader;
> > > >
> > > > import java.io.File;
> > > >
> > > > import java.io.FileNotFoundException;
> > > >
> > > > import java.io.IOException;
> > > >
> > > > import java.io.InputStreamReader;
> > > >
> > > > import java.util.Date;
> > > >
> > > >
> > > >
> > > > /** Index all text files under a directory. */
> > > >
> > > > public class IndexFiles {
> > > >
> > > >
> > > >
> > > >  private IndexFiles() {}
> > > >
> > > >
> > > >
> > > >  static final File INDEX_DIR = new File("index");
> > > >
> > > >
> > > >
> > > >  /** Index all text files under a directory. */
> > > >
> > > >  public static void main(String[] args) {
> > > >
> > > >    String usage = "java org.apache.lucene.demo.IndexFiles
> > > > <root_directory>";
> > > >
> > > >    /*if (args.length == 0) {
> > > >
> > > >      System.err.println("Usage: " + usage);
> > > >
> > > >      System.exit(1);
> > > >
> > > >    }*/
> > > >
> > > >
> > > >
> > > >    /*if (INDEX_DIR.exists()) {
> > > >
> > > >      System.out.println("Cannot save index to '" +INDEX_DIR+ "'
> > > directory,
> > > > please delete it first");
> > > >
> > > >      System.exit(1);
> > > >
> > > >    }*/
> > > >
> > > >
> > > >
> > > >    //final File docDir = new File(args[0]);
> > > >
> > > >    //File docDir = new File(args[0]);
> > > >
> > > >    File docDir = new File("F:/bsd-logs/logs");
> > > >
> > > >    if (!docDir.exists() || !docDir.canRead()) {
> > > >
> > > >      System.out.println("Document directory '"
> > > +docDir.getAbsolutePath()+
> > > > "' does not exist or is not readable, please check the path");
> > > >
> > > >      System.exit(1);
> > > >
> > > >    }
> > > >
> > > >
> > > >
> > > >    Date start = new Date();
> > > >
> > > >    try {
> > > >
> > > >      System.out.println("Indexing to directory '" +INDEX_DIR+
> "'...");
> > > >
> > > >      BufferedReader in = null;
> > > >
> > > >      int i = 0;
> > > >
> > > >      while (i==0){
> > > >
> > > >          IndexWriter writer = new IndexWriter(INDEX_DIR, new
> > > > StandardAnalyzer(), true);
> > > >
> > > >
> > > >
> > > >                      indexDocs(writer, docDir);
> > > >
> > > >                      System.out.println("Optimizing...");
> > > >
> > > >                      writer.optimize();
> > > >
> > > >                      in = new BufferedReader(new
> > > > InputStreamReader(System.in, "UTF-8"));
> > > >
> > > >                      i=1;
> > > >
> > > >                      /*System.out.println("Enter another directory:
> > ");
> > > >
> > > >
> > > >
> > > >                        docDir = new File(in.readLine());
> > > >
> > > >                        writer.close();
> > > >
> > > >                        String args1[] =
> > > > {"\\users\\baljeet\\documents\\rees\\programs\\
> > > > <file:///\\users\baljeet\documents\rees\programs\> "};
> > > >
> > > >                        DeleteFiles.main(args1);*/
> > > >
> > > >     }
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >      Date end = new Date();
> > > >
> > > >      System.out.println(end.getTime() - start.getTime() + " total
> > > > milliseconds");
> > > >
> > > >
> > > >
> > > >    } catch (IOException e) {
> > > >
> > > >      System.out.println(" caught a " + e.getClass() +
> > > >
> > > >       "\n with message: " + e.getMessage());
> > > >
> > > >    }
> > > >
> > > >  }
> > > >
> > > >
> > > >
> > > >  static void indexDocs(IndexWriter writer, File file)
> > > >
> > > >    throws IOException {
> > > >
> > > >    // do not try to index files that cannot be read
> > > >
> > > >    if (file.canRead()) {
> > > >
> > > >      if (file.isDirectory()) {
> > > >
> > > >        String[] files = file.list();
> > > >
> > > >        // an IO error could occur
> > > >
> > > >        if (files != null) {
> > > >
> > > >          for (int i = 0; i < files.length; i++) {
> > > >
> > > >            indexDocs(writer, new File(file, files[i]));
> > > >
> > > >          }
> > > >
> > > >        }
> > > >
> > > >      } else {
> > > >
> > > >        System.out.println("adding " + file);
> > > >
> > > >        try {
> > > >
> > > >                Document doc = FileDocument.Document(file);
> > > >
> > > >                System.out.println("Path = "+doc.getField("path"));
> > > >
> > > >          writer.addDocument(FileDocument.Document(file));
> > > >
> > > >
> > > >
> > > >        }
> > > >
> > > >        // at least on windows, some temporary files raise this
> > exception
> > > > with an "access denied" message
> > > >
> > > >        // checking if the file can be read doesn't help
> > > >
> > > >        catch (FileNotFoundException fnfe) {
> > > >
> > > >          ;
> > > >
> > > >        }
> > > >
> > > >      }
> > > >
> > > >    }
> > > >
> > > >  }
> > > >
> > > >
> > > >
> > > > }
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > SearchFiles.java
> > > >
> > > >
> > > >
> > > >
> > > >
> > > > package org.apache.lucene.demo;
> > > >
> > > >
> > > >
> > > > /**
> > > >
> > > >  * Licensed to the Apache Software Foundation (ASF) under one or
> more
> > > >
> > > >  * contributor license agreements.  See the NOTICE file distributed
> > with
> > > >
> > > >  * this work for additional information regarding copyright
> ownership.
> > > >
> > > >  * The ASF licenses this file to You under the Apache License,
> Version
> > > 2.0
> > > >
> > > >  * (the "License"); you may not use this file except in compliance
> > with
> > > >
> > > >  * the License.  You may obtain a copy of the License at
> > > >
> > > >  *
> > > >
> > > >  *     http://www.apache.org/licenses/LICENSE-2.0
> > > >
> > > >  *
> > > >
> > > >  * Unless required by applicable law or agreed to in writing,
> software
> > > >
> > > >  * distributed under the License is distributed on an "AS IS" BASIS,
> > > >
> > > >  * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
> > > > implied.
> > > >
> > > >  * See the License for the specific language governing permissions
> and
> > > >
> > > >  * limitations under the License.
> > > >
> > > >  */
> > > >
> > > >
> > > >
> > > > import org.apache.lucene.analysis.Analyzer;
> > > >
> > > > import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > > >
> > > > import org.apache.lucene.document.Document;
> > > >
> > > > import org.apache.lucene.index.FilterIndexReader;
> > > >
> > > > import org.apache.lucene.index.IndexReader;
> > > >
> > > > import org.apache.lucene.queryParser.QueryParser;
> > > >
> > > > import org.apache.lucene.search.Hits;
> > > >
> > > > import org.apache.lucene.search.IndexSearcher;
> > > >
> > > > import org.apache.lucene.search.Query;
> > > >
> > > > import org.apache.lucene.search.Searcher;
> > > >
> > > >
> > > >
> > > > import java.io.BufferedReader;
> > > >
> > > > import java.io.FileReader;
> > > >
> > > > import java.io.IOException;
> > > >
> > > > import java.io.InputStreamReader;
> > > >
> > > > import java.util.Collection;
> > > >
> > > > import java.util.Date;
> > > >
> > > > import java.util.Hashtable;
> > > >
> > > > import java.util.Iterator;
> > > >
> > > >
> > > >
> > > > /** Simple command-line based search demo. */
> > > >
> > > > public class SearchFiles {
> > > >
> > > >
> > > >
> > > >  /** Use the norms from one field for all fields.  Norms are read
> into
> > > > memory,
> > > >
> > > >   * using a byte of memory per document per searched field.  This
> can
> > > > cause
> > > >
> > > >   * search of large collections with a large number of fields to run
> > out
> > > > of
> > > >
> > > >   * memory.  If all of the fields contain only a single token, then
> > the
> > > > norms
> > > >
> > > >   * are all identical, then single norm vector may be shared. */
> > > >
> > > >  public static class OneNormsReader extends FilterIndexReader {
> > > >
> > > >    private String field;
> > > >
> > > >
> > > >
> > > >    public OneNormsReader(IndexReader in, String field) {
> > > >
> > > >      super(in);
> > > >
> > > >      this.field = field;
> > > >
> > > >    }
> > > >
> > > >
> > > >
> > > >    public byte[] norms(String field) throws IOException {
> > > >
> > > >      return in.norms(this.field);
> > > >
> > > >    }
> > > >
> > > >  }
> > > >
> > > >
> > > >
> > > >  private SearchFiles() {}
> > > >
> > > >
> > > >
> > > >  /** Simple command-line based search demo. */
> > > >
> > > >  public static void main(String[] args) throws Exception {
> > > >
> > > >    String usage =
> > > >
> > > >      "Usage: java org.apache.lucene.demo.SearchFiles [-index dir]
> > > [-field
> > > > f] [-repeat n] [-queries file] [-raw] [-norms field]";
> > > >
> > > >    if (args.length > 0 && ("-h".equals(args[0]) ||
> > > > "-help".equals(args[0]))) {
> > > >
> > > >      System.out.println(usage);
> > > >
> > > >      System.exit(0);
> > > >
> > > >    }
> > > >
> > > >
> > > >
> > > >    String index = "index";
> > > >
> > > >    String field = "contents";
> > > >
> > > >    String queries = null;
> > > >
> > > >    int repeat = 0;
> > > >
> > > >    boolean raw = false;
> > > >
> > > >    String normsField = null;
> > > >
> > > >
> > > >
> > > >    for (int i = 0; i < args.length; i++) {
> > > >
> > > >      if ("-index".equals(args[i])) {
> > > >
> > > >        index = args[i+1];
> > > >
> > > >        i++;
> > > >
> > > >      } else if ("-field".equals(args[i])) {
> > > >
> > > >        field = args[i+1];
> > > >
> > > >        i++;
> > > >
> > > >      } else if ("-queries".equals(args[i])) {
> > > >
> > > >        queries = args[i+1];
> > > >
> > > >        i++;
> > > >
> > > >      } else if ("-repeat".equals(args[i])) {
> > > >
> > > >        repeat = Integer.parseInt(args[i+1]);
> > > >
> > > >        i++;
> > > >
> > > >      } else if ("-raw".equals(args[i])) {
> > > >
> > > >        raw = true;
> > > >
> > > >      } else if ("-norms".equals(args[i])) {
> > > >
> > > >        normsField = args[i+1];
> > > >
> > > >        i++;
> > > >
> > > >      }
> > > >
> > > >    }
> > > >
> > > >
> > > >
> > > >    IndexReader reader = IndexReader.open(index);
> > > >
> > > >
> > > >
> > > >    if (normsField != null)
> > > >
> > > >      reader = new OneNormsReader(reader, normsField);
> > > >
> > > >
> > > >
> > > >    Collection<String> h =
> > > > reader.getFieldNames(IndexReader.FieldOption.INDEXED);
> > > >
> > > >    Iterator<String> it = h.iterator();
> > > >
> > > >    while (it.hasNext()){
> > > >
> > > >                System.out.println("Iterator Value = "+it.next());
> > > >
> > > >
> > > >
> > > >    }
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >    Searcher searcher = new IndexSearcher(reader);
> > > >
> > > >    Analyzer analyzer = new StandardAnalyzer();
> > > >
> > > >
> > > >
> > > >    BufferedReader in = null;
> > > >
> > > >    if (queries != null) {
> > > >
> > > >      in = new BufferedReader(new FileReader(queries));
> > > >
> > > >    } else {
> > > >
> > > >      in = new BufferedReader(new InputStreamReader(System.in,
> > "UTF-8"));
> > > >
> > > >    }
> > > >
> > > >      QueryParser parser = new QueryParser(field, analyzer);
> > > >
> > > >    while (true) {
> > > >
> > > >      if (queries == null)                        // prompt the user
> > > >
> > > >        System.out.println("Enter query: ");
> > > >
> > > >
> > > >
> > > >      String line = in.readLine();
> > > >
> > > >
> > > >
> > > >      if (line == null || line.length() == -1)
> > > >
> > > >        break;
> > > >
> > > >
> > > >
> > > >      line = line.trim();
> > > >
> > > >      if (line.length() == 0)
> > > >
> > > >        break;
> > > >
> > > >      System.out.println("line 1= "+line);
> > > >
> > > >     // line = QueryParser.escape(line);
> > > >
> > > >      System.out.println("line 2= "+line);
> > > >
> > > >      Query query = parser.parse(line);
> > > >
> > > >
> > > >
> > > >      System.out.println("Searching for: " + query.toString(field));
> > > >
> > > >
> > > >
> > > >      Hits hits = searcher.search(query);
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >      if (repeat > 0) {                           // repeat & time as
> > > > benchmark
> > > >
> > > >        Date start = new Date();
> > > >
> > > >        for (int i = 0; i < repeat; i++) {
> > > >
> > > >          hits = searcher.search(query);
> > > >
> > > >        }
> > > >
> > > >        Date end = new Date();
> > > >
> > > >        System.out.println("Time: "+(end.getTime()-start.getTime
> > > ())+"ms");
> > > >
> > > >      }
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >      System.out.println(hits.length() + " total matching
> documents");
> > > >
> > > >
> > > >
> > > >      final int HITS_PER_PAGE = 10;
> > > >
> > > >      for (int start = 0; start < hits.length(); start +=
> > HITS_PER_PAGE)
> > > {
> > > >
> > > >        int end = Math.min(hits.length(), start + HITS_PER_PAGE);
> > > >
> > > >        for (int i = start; i < end; i++) {
> > > >
> > > >
> > > >
> > > >          if (raw) {                              // output raw
> format
> > > >
> > > >            System.out.println("doc="+hits.id(i)+"
> > > score="+hits.score(i));
> > > >
> > > >            continue;
> > > >
> > > >          }
> > > >
> > > >
> > > >
> > > >          Document doc = hits.doc(i);
> > > >
> > > >          String path = doc.get("path");
> > > >
> > > >          if (path != null) {
> > > >
> > > >            System.out.println((i+1) + ". " + path);
> > > >
> > > >            //getSearchedLine(path, "kvoll");
> > > >
> > > >            String title = doc.get("title");
> > > >
> > > >            if (title != null) {
> > > >
> > > >              System.out.println("   Title: " + doc.get("title"));
> > > >
> > > >            }
> > > >
> > > >          } else {
> > > >
> > > >            System.out.println((i+1) + ". " + "No path for this
> > > document");
> > > >
> > > >          }
> > > >
> > > >        }
> > > >
> > > >
> > > >
> > > >        if (queries != null)                      // non-interactive
> > > >
> > > >          break;
> > > >
> > > >
> > > >
> > > >        if (hits.length() > end) {
> > > >
> > > >          System.out.println("more (y/n) ? ");
> > > >
> > > >          line = in.readLine();
> > > >
> > > >          if (line.length() == 0 || line.charAt(0) == 'n')
> > > >
> > > >            break;
> > > >
> > > >        }
> > > >
> > > >      }
> > > >
> > > >    }
> > > >
> > > >    reader.close();
> > > >
> > > >  }
> > > >
> > > > }
> > > >
> > > >
> > > >
> > > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 18:42:49 2007
Return-Path: <java-user-return-31617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25639 invoked from network); 21 Dec 2007 18:42:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 18:42:49 -0000
Received: (qmail 27711 invoked by uid 500); 21 Dec 2007 18:42:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27669 invoked by uid 500); 21 Dec 2007 18:42:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27658 invoked by uid 99); 21 Dec 2007 18:42:32 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 10:42:32 -0800
X-ASF-Spam-Status: No, hits=-3.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (nike.apache.org: transitioning domain of cmpich@cs.uoregon.edu does not designate 128.223.142.54 as permitted sender)
Received: from [128.223.142.54] (HELO smtp.uoregon.edu) (128.223.142.54)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 18:42:20 +0000
Received: from [128.223.56.185] (d56-185.uoregon.edu [128.223.56.185])
	by smtp.uoregon.edu (8.13.8/8.13.8) with ESMTP id lBLIgBeC030673
	for <java-user@lucene.apache.org>; Fri, 21 Dec 2007 10:42:11 -0800
Message-ID: <476C08FF.6020603@cs.uoregon.edu>
Date: Fri, 21 Dec 2007 10:42:07 -0800
From: Christian Pich <cmpich@cs.uoregon.edu>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Unsupported Mime Type
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV 0.92/5209/Fri Dec 21 09:58:35 2007 on mserv4
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

I am getting the following exception when I run our indexer:

Unsupported MIME type (text/html;charset=US-ASCII) type so ignoring: 
http://zfin.org/...

It appears if a page Http header does not specify a charset then the 
indexer runs fine.
Any help is appreciated.
-- 
------------------------------------------------------------------------
Christian Pich, Ph.D.
University of Oregon
Zebrafish Information Network
Phone: 541-346-1581
Email: cmpich@cs.uoregon.edu
Web: http://zfin.org
------------------------------------------------------------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 20:06:20 2007
Return-Path: <java-user-return-31618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47686 invoked from network); 21 Dec 2007 20:06:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 20:06:20 -0000
Received: (qmail 6024 invoked by uid 500); 21 Dec 2007 20:06:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5990 invoked by uid 500); 21 Dec 2007 20:06:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5979 invoked by uid 99); 21 Dec 2007 20:06:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 12:06:03 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a8.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 20:05:39 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a8.g.dreamhost.com (Postfix) with ESMTP id F2E6E10BCDE
	for <java-user@lucene.apache.org>; Fri, 21 Dec 2007 12:05:43 -0800 (PST)
Message-Id: <037A5C45-A047-4377-8420-6B5492E2829C@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <476C08FF.6020603@cs.uoregon.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Unsupported Mime Type
Date: Fri, 21 Dec 2007 15:05:40 -0500
References: <476C08FF.6020603@cs.uoregon.edu>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Lucene knows nothing about mime types, so this is likely a problem  
somewhere else in the chain.  Have a look at the stack trace to see  
where the problem is.

-Grant

On Dec 21, 2007, at 1:42 PM, Christian Pich wrote:

> I am getting the following exception when I run our indexer:
>
> Unsupported MIME type (text/html;charset=US-ASCII) type so ignoring: http://zfin.org/ 
> ...
>
> It appears if a page Http header does not specify a charset then the  
> indexer runs fine.
> Any help is appreciated.
> -- 
> ------------------------------------------------------------------------
> Christian Pich, Ph.D.
> University of Oregon
> Zebrafish Information Network
> Phone: 541-346-1581
> Email: cmpich@cs.uoregon.edu
> Web: http://zfin.org
> ------------------------------------------------------------------------
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 21 22:16:09 2007
Return-Path: <java-user-return-31619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74688 invoked from network); 21 Dec 2007 22:16:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 21 Dec 2007 22:16:09 -0000
Received: (qmail 41238 invoked by uid 500); 21 Dec 2007 22:15:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41206 invoked by uid 500); 21 Dec 2007 22:15:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41195 invoked by uid 99); 21 Dec 2007 22:15:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 14:15:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 22:15:27 +0000
Received: by fk-out-0910.google.com with SMTP id z23so645930fkz.5
        for <java-user@lucene.apache.org>; Fri, 21 Dec 2007 14:15:30 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=3b2flzu+e/fafgJdkaIl0E5LQooLtXUBkAPZ7QgTcSE=;
        b=rIrWUS9fJIJf39B7kdazTvZk1rKAdDdCG0fkQ67xvODdDhTB4txIfhFQumA7c0n1SXnBnZqbTGKkq/JntRNUitbzzNNg4iDA6gda98W8EGo1gatfa3xz4YQdrPpYWAbIE3iXQlVIGIGzO12SAFGD1ekU13Y1PT/vNgH3ppsNm6E=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=in6RY55BmmOpxnYet8WqaDFxYG2F/bmQ1hcX3e1LyTnI6OfXOvYyvTpeWicV1bIeT5h/8T42mRKb5jgpHd6rpNH1+glLR254RODFHmgycrXduhBksP4CyBmcVlfsoEuPpFHDhHkkTzYlK/cQXPCu5jBKiDrP+o7UGCIV2FrDGWY=
Received: by 10.82.123.16 with SMTP id v16mr1716564buc.18.1198275329670;
        Fri, 21 Dec 2007 14:15:29 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Fri, 21 Dec 2007 14:15:29 -0800 (PST)
Message-ID: <359a92830712211415p7d1dc76dq964846195a5b4215@mail.gmail.com>
Date: Fri, 21 Dec 2007 17:15:29 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boosting Vs Sorting
In-Reply-To: <BAY112-W3AEF174E7107D4A0E8487F95E0@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_401_12068461.1198275329658"
References: <BAY112-W3267D6CF8D3879E0546C2F95E0@phx.gbl>
	 <359a92830712210646i2342952bjd0c7ea82e28a4d41@mail.gmail.com>
	 <359a92830712210653q5df2a025nb827685ed7c643c3@mail.gmail.com>
	 <BAY112-W3AEF174E7107D4A0E8487F95E0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_401_12068461.1198275329658
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

See below...

On Dec 21, 2007 12:50 PM, Rakesh Shete <rakesh_shete@hotmail.com> wrote:

>
> Hi Eric,
>
> >> I don't see how sorting relates to your problem at all....
>
> Could you just explain how is sorting different from boosting?
>
> I have been trying to figure this out. Going through "Lucene In Action" my
> understanding of  sorting is that it will kind of second level of ordering
> after the query results have been scored (Not sure if the relevance
> established
> by scoring is lost in this process).
>

I often think of sorting as being orthogonal to boosting. They're really
unrelated.
Boosting changes how the scoring of documents work. Sorting ignores scoring
and arranges the results lexically. You can *only* sort on fields that are a
single
token. I'm cheating a little here and you can implement your own
sorts, but that's another story.

Maybe this would help. Say you were indexing books and wanted the results
presented to the user by title. You could index a "titlesort" field that had
the
title lowercased and all spaces replaced with underscores. Then, you could
sort the result of all books containing "solar energy" by title. Where's the
score
here? The only relevance score has here is that no book in the result set
will
have a score of 0.

I did, at one point, have to sort by score then sub-sort by title. That is,
present the user with the top scoring documents sub-sorted by title.
This involved using relevancy as the primary sort and sub-sorting by
title. But the problem here is that scores of 0.98374 wouldn't be in the
same bucket as a score of 0.98375. Search the mail archive for
"bucket" and you should see that discussion.



>
>
> >> Is it *really* better for your users to see a low-relevance query
> >> that happens to have the exact words in it before a very-high
> >> ranking but not quite exact response?
>
> Nopes. Thats the last thing my product manager will want.
>
> Lets take an example to simplify this:
>
> I have fields like title, description, tags. Now when I search for a term
> "Indoor Photography" then I would like the results with exact match in
> title to be
> more important than in description or tags. However, if there is an exact
> match in description
> then it should be given more preference than the partial match in title.
>
> Going by the points mentioned below and as per one of your posts
> (
> http://mail-archives.apache.org/mod_mbox/lucene-java-user/200609.mbox/%3CPine.LNX.4.58.0609271134380.32280@hal.rescomp.berkeley.edu%3E
> )
> I understand that I need to specify query time boosting like this:
>
> title:Indoor Photography^2.5 description:Indoor Photography^1.5 tags:
> Indoor Photography^1.2
>

That would go some distance towards what you want, but watch the syntax.
You might be better off constructing your own BooleanQuery. The syntax above
would actually parse something like title:Indoor default_field:Photography^
2.5. You
need parentheses. Also think about phrase queries....

Hope this helps
Erick


>
> Let me know if this would help my cause.
>
> Thnx for ur time n the valuable info.
>
> --Rakesh S
>
>
>
>
>
> > Date: Fri, 21 Dec 2007 09:53:02 -0500
> > From: erickerickson@gmail.com
> > To: java-user@lucene.apache.org
> > Subject: Re: Boosting Vs Sorting
> >
> > OK, I'm trying to adjust to a Mac and my keyboard shortcuts sometimes
> > lead me to send the mail when I didn't intend. Sorry about that...
> >
> > So, leaving aside how you form your "similar" query, I *think* you
> > want to form two clauses, your "exact" and your "similar" and
> > boost them individually, combined in a boolean query.
> >
> > This will still interleave the results I think. But it's also a valid
> > question whether this is good or bad. Is it *really* better for your
> > users to see a low-relevance query that happens to have the exact
> > words in it before a very-high ranking but not quite exact response?
> > That, of course it up to your product manager....
> >
> > If it is really a requirement, it seems to me that you would be able to
> > just form the two queries independently, then just post-process them.
> > One query is the exact version, and the second query is the similar one.
> > Then just combine the results as you please by iterating the hits
> > object for the exact query then following it by the same for the
> similar.
> >
> > I don't see how sorting relates to your problem at all....
> >
> > Best
> > Erick
> >
> > On Dec 21, 2007 9:46 AM, Erick Erickson <erickerickson@gmail.com> wrote:
> >
> > > From my perspective, index-time boosting and sorting are apples
> > > and oranges.
> > >
> > > According to a post from Hoss, index-time boosting is a way of
> > > saying that "Field x in this document is more important than
> > > field x in other documents". Query-time boosts are a way of
> > > saying "I care about field X more than field Y across *all*
> > > documents".
> > >
> > > So index time boosting doesn't seem to relate to your problem since
> > > you really want to compare field x across all documents. It seems
> > > that query-time boosting is more relevant.
> > >
> > > So, leaving aside how you form your "similar" q
> > >
> > >
> > > On Dec 20, 2007 10:50 PM, Rakesh Shete < rakesh_shete@hotmail.com>
> wrote:
> > >
> > > >
> > > > Hi all,
> > > >
> > > > I am using Hibernate Search (http://www.hibernate.org/410.html)
> which is
> > > > a wrapper around Lucene for performing search over info stored in
> the DB. I
> > > > have questions related to Lucene boosting Vs sorting:
> > > >
> > > > Is index time boosting of documents and fields better than
> specifying
> > > > sorting parameters at search time?
> > > >
> > > > I have been browsing through the Lucene mail archives for an answer
> to
> > > > this. Going through them and reading on stuff related to Lucene
> scoring, my
> > > > understanding is that if I know upfront at index time that the
> relevance
> > > > order of results is based on certain fields, then, it is better to
> have
> > > > index time boosting of documents and fields. Am I right here?
> > > >
> > > > My requirements are like:
> > > > Results having an exact match to the input query string should have
> > > > highest preference followed by an exact match with field1, field2,
> field3
> > > > and then followed by search query substring (or near match) match
> with
> > > > field1, field2, field3.
> > > >
> > > > Any suggestions are most welcome.
> > > >
> > > > --Rakesh S
> > > >
> > > > _________________________________________________________________
> > > > Post free property ads on Yello Classifieds now! www.yello.in
> > > > http://ss1.richmedia.in/recurl.asp?pid=219
> > >
> > >
> > >
>
> _________________________________________________________________
> Post free property ads on Yello Classifieds now! www.yello.in
> http://ss1.richmedia.in/recurl.asp?pid=219
>

------=_Part_401_12068461.1198275329658--

From java-user-return-31620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 22 00:01:41 2007
Return-Path: <java-user-return-31620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96562 invoked from network); 22 Dec 2007 00:01:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2007 00:01:40 -0000
Received: (qmail 7887 invoked by uid 500); 22 Dec 2007 00:01:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7850 invoked by uid 500); 22 Dec 2007 00:01:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7825 invoked by uid 99); 22 Dec 2007 00:01:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 16:01:17 -0800
X-ASF-Spam-Status: No, hits=-3.3 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: softfail (athena.apache.org: transitioning domain of cmpich@cs.uoregon.edu does not designate 128.223.142.42 as permitted sender)
Received: from [128.223.142.42] (HELO smtp.uoregon.edu) (128.223.142.42)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Dec 2007 00:00:52 +0000
Received: from [128.223.56.185] (d56-185.uoregon.edu [128.223.56.185])
	by smtp.uoregon.edu (8.13.8/8.13.8) with ESMTP id lBM00t4s012303
	for <java-user@lucene.apache.org>; Fri, 21 Dec 2007 16:00:56 -0800
Message-ID: <476C53B3.9080508@cs.uoregon.edu>
Date: Fri, 21 Dec 2007 16:00:51 -0800
From: Christian Pich <cmpich@cs.uoregon.edu>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Unsupported Mime Type
References: <476C08FF.6020603@cs.uoregon.edu> <037A5C45-A047-4377-8420-6B5492E2829C@apache.org>
In-Reply-To: <037A5C45-A047-4377-8420-6B5492E2829C@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: ClamAV 0.92/5212/Fri Dec 21 15:30:45 2007 on mserv5
X-Virus-Status: Clean
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks. You were right, in a different spot of the code somebody 
hard-coded mime types without
including charsets in there.

Christian

Grant Ingersoll wrote:
> Lucene knows nothing about mime types, so this is likely a problem 
> somewhere else in the chain.  Have a look at the stack trace to see 
> where the problem is.
>
> -Grant
>
> On Dec 21, 2007, at 1:42 PM, Christian Pich wrote:
>
>> I am getting the following exception when I run our indexer:
>>
>> Unsupported MIME type (text/html;charset=US-ASCII) type so ignoring: 
>> http://zfin.org/...
>>
>> It appears if a page Http header does not specify a charset then the 
>> indexer runs fine.
>> Any help is appreciated.
>> -- 
>> ------------------------------------------------------------------------
>> Christian Pich, Ph.D.
>> University of Oregon
>> Zebrafish Information Network
>> Phone: 541-346-1581
>> Email: cmpich@cs.uoregon.edu
>> Web: http://zfin.org
>> ------------------------------------------------------------------------
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org

-- 
------------------------------------------------------------------------
Christian Pich, Ph.D.
University of Oregon
Zebrafish Information Network
Phone: 541-346-1581
Email: cmpich@cs.uoregon.edu
Web: http://zfin.org
------------------------------------------------------------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 22 05:22:17 2007
Return-Path: <java-user-return-31621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88800 invoked from network); 22 Dec 2007 05:22:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2007 05:22:17 -0000
Received: (qmail 77061 invoked by uid 500); 22 Dec 2007 05:22:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76246 invoked by uid 500); 22 Dec 2007 05:22:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76235 invoked by uid 99); 22 Dec 2007 05:22:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 21 Dec 2007 21:21:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhouqi.jackson@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Dec 2007 05:21:38 +0000
Received: by fg-out-1718.google.com with SMTP id d23so340643fga.27
        for <java-user@lucene.apache.org>; Fri, 21 Dec 2007 21:21:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=UcW608H76E188GZ4SL47QR87+ozlE01gnUiYrqdYQIY=;
        b=dqaZOfPmlfk3fkGxQQo6auOugus+JoAOYKTO+qymC9pRs7oAqOI2XkDnNo7Gmi4NREBxDvL2ov0sMQ3Jv0gkuWtYUdWAGg+ou6aIabKfuHvXmCgjkIHZCz+6wHKrk4H2MnGP1Z3RWrymWZNmVYPQrDzD5H9J8QApTEb82K3JbCg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=XOMYmQWHg/2PfydkoTm8rZeH1dEdBS6MkW2VWzlf/Xwf0rtZ1jnW7IcMgz7CrE4pDg/nyUD8EIjV83nuOqrI+DFx6Z7vIT/yMYnIJGBu2jbWl6rAs6EAKneW8KRgvNPZG4Q1i+MdimTewtpCxQDIRm37uLgn7EVlVcC6fLDaeZo=
Received: by 10.82.161.19 with SMTP id j19mr3689397bue.20.1198300901409;
        Fri, 21 Dec 2007 21:21:41 -0800 (PST)
Received: by 10.82.151.11 with HTTP; Fri, 21 Dec 2007 21:21:41 -0800 (PST)
Message-ID: <72d748c20712212121q9a38923na6184f2a2164a061@mail.gmail.com>
Date: Sat, 22 Dec 2007 13:21:41 +0800
From: "Zhou Qi" <zhouqi.jackson@gmail.com>
To: java-user@lucene.apache.org
Subject: optimize Index problem
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_947_27899217.1198300901404"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_947_27899217.1198300901404
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi guys,

  I met some trouble in optimizing the index. The index looks fine in Luke
and I can carry out the search in the index. However, when I try to merge
all these seperated files into a complete index. A java internal exception
indicates that the file are too large.The index size is about 40GB. Any one
know how I can carry out the index?  Or is there any parameters to adjust
the size of optimization.

Thanks in advance.

Qi Zhou

------=_Part_947_27899217.1198300901404--

From java-user-return-31622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 22 13:04:17 2007
Return-Path: <java-user-return-31622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78951 invoked from network); 22 Dec 2007 13:04:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2007 13:04:17 -0000
Received: (qmail 44287 invoked by uid 500); 22 Dec 2007 13:04:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44253 invoked by uid 500); 22 Dec 2007 13:04:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44242 invoked by uid 99); 22 Dec 2007 13:04:00 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Dec 2007 05:04:00 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a2.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Dec 2007 13:03:46 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a2.g.dreamhost.com (Postfix) with ESMTP id 491D487FC1
	for <java-user@lucene.apache.org>; Sat, 22 Dec 2007 05:03:36 -0800 (PST)
Message-Id: <E914F0B0-5386-4096-B082-4D9287343119@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <72d748c20712212121q9a38923na6184f2a2164a061@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: optimize Index problem
Date: Sat, 22 Dec 2007 08:03:26 -0500
References: <72d748c20712212121q9a38923na6184f2a2164a061@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

What is the exception you got?

-Grant

On Dec 22, 2007, at 12:21 AM, Zhou Qi wrote:

> Hi guys,
>
>  I met some trouble in optimizing the index. The index looks fine in  
> Luke
> and I can carry out the search in the index. However, when I try to  
> merge
> all these seperated files into a complete index. A java internal  
> exception
> indicates that the file are too large.The index size is about 40GB.  
> Any one
> know how I can carry out the index?  Or is there any parameters to  
> adjust
> the size of optimization.
>
> Thanks in advance.
>
> Qi Zhou

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 22 13:04:59 2007
Return-Path: <java-user-return-31623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79092 invoked from network); 22 Dec 2007 13:04:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2007 13:04:59 -0000
Received: (qmail 45891 invoked by uid 500); 22 Dec 2007 13:04:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45862 invoked by uid 500); 22 Dec 2007 13:04:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45851 invoked by uid 99); 22 Dec 2007 13:04:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Dec 2007 05:04:42 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Dec 2007 13:04:18 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id lBMD4K3Y018916
	for <java-user@lucene.apache.org>; Sat, 22 Dec 2007 07:04:20 -0600
Received: (qmail 25541 invoked by uid 0); 22 Dec 2007 07:04:20 -0600
Date: 22 Dec 2007 07:04:20 -0600
Message-ID: <20071222130420.25540.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: optimize Index problem
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.00
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 6.00] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 175717572 - 193a289addbd
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=175717572&m=193a289addbd&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=175717572&m=193a289addbd&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=175717572&m=193a289addbd&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

LUX is closed until 7th January 2008

most information about LUX is available at www.lux.org.uk



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 22 13:05:43 2007
Return-Path: <java-user-return-31624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79230 invoked from network); 22 Dec 2007 13:05:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2007 13:05:42 -0000
Received: (qmail 48430 invoked by uid 500); 22 Dec 2007 13:05:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47865 invoked by uid 500); 22 Dec 2007 13:05:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47854 invoked by uid 99); 22 Dec 2007 13:05:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Dec 2007 05:05:25 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Dec 2007 13:05:02 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id lBMD55WQ020130
	for <java-user@lucene.apache.org>; Sat, 22 Dec 2007 07:05:05 -0600
Received: (qmail 26174 invoked by uid 0); 22 Dec 2007 07:05:05 -0600
Date: 22 Dec 2007 07:05:05 -0600
Message-ID: <20071222130505.26173.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: optimize Index problem
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.00
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 6.00] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 175717655 - 4351c1d2e09e
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=175717655&m=4351c1d2e09e&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=175717655&m=4351c1d2e09e&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=175717655&m=4351c1d2e09e&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

LUX is closed until 7th January 2008

most information about LUX is available at www.lux.org.uk



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 22 15:20:09 2007
Return-Path: <java-user-return-31625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73120 invoked from network); 22 Dec 2007 15:20:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2007 15:20:09 -0000
Received: (qmail 10446 invoked by uid 500); 22 Dec 2007 15:19:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10418 invoked by uid 500); 22 Dec 2007 15:19:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10407 invoked by uid 99); 22 Dec 2007 15:19:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Dec 2007 07:19:52 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.162.145 as permitted sender)
Received: from [65.55.162.145] (HELO blu0-omc1-s2.bay6.hotmail.com) (65.55.162.145)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Dec 2007 15:19:27 +0000
Received: from BLU119-W27 ([65.55.162.183]) by blu0-omc1-s2.bay6.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Sat, 22 Dec 2007 07:19:30 -0800
Message-ID: <BLU119-W27708447588B9DD2485901B95F0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_d7326128-52c2-49ef-af88-b7add76054dd_"
X-Originating-IP: [71.10.235.86]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: Pagination ...
Date: Sat, 22 Dec 2007 10:19:30 -0500
Importance: Normal
MIME-Version: 1.0
X-OriginalArrivalTime: 22 Dec 2007 15:19:30.0838 (UTC) FILETIME=[0CB70B60:01C844AE]
X-Virus-Checked: Checked by ClamAV on apache.org

--_d7326128-52c2-49ef-af88-b7add76054dd_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi,

What is the most efficient way to do pagination in Lucene? I have always do=
ne the following because this "flavor" of the search call allows me to spec=
ify the top N hits (e.g. 1000) and a Sort object:

    TopFieldDocs topFieldDocs =3D searcher.search(query, null, 1000, SORT_B=
Y_DATE);

Is it the best way? Thank you.

_________________________________________________________________
Don't get caught with egg on your face. Play Chicktionary!
http://club.live.com/chicktionary.aspx?icid=3Dchick_wlhmtextlink1_dec=

--_d7326128-52c2-49ef-af88-b7add76054dd_--

From java-user-return-31626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 22 16:23:07 2007
Return-Path: <java-user-return-31626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2552 invoked from network); 22 Dec 2007 16:23:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 22 Dec 2007 16:23:07 -0000
Received: (qmail 53864 invoked by uid 500); 22 Dec 2007 16:22:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53834 invoked by uid 500); 22 Dec 2007 16:22:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53823 invoked by uid 99); 22 Dec 2007 16:22:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Dec 2007 08:22:50 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [63.133.162.107] (HELO mp-s01.dragonflymc.com) (63.133.162.107)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Dec 2007 16:22:37 +0000
Received: from [192.168.1.218] (footoo.visvo.com [192.168.1.218])
	by mp-s01.dragonflymc.com (Postfix) with ESMTP id 752B9F804B
	for <java-user@lucene.apache.org>; Sat, 22 Dec 2007 09:09:31 -0600 (CST)
Message-ID: <476D39C2.50702@apache.org>
Date: Sat, 22 Dec 2007 10:22:26 -0600
From: Dennis Kubes <kubes@apache.org>
User-Agent: Thunderbird 2.0.0.6 (X11/20071022)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Infrastructure Question
References: <dd4e7dce0712180821v38db1ccar73006a0b8d7f14a0@mail.gmail.com>	 <0342FFF3-0390-4822-9226-AC0AB377C124@apache.org> <dd4e7dce0712180849u4c3df0ceo3cac0b08eb4c2498@mail.gmail.com>
In-Reply-To: <dd4e7dce0712180849u4c3df0ceo3cac0b08eb4c2498@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

When we started we had 5 machines that were 800mghz and maybe 512M to 1G 
  of ram.  It was enough to get started and start testing things 
although I wouldn't recommend that setup because looking back I don't 
think it was enough.  And of course we started getting OutOfMemory 
errors pretty quickly as our data grew.

Remember that in search the serving is the hardware intensive part.  For 
getting your hands dirty and processing the data, the hardware you 
propose should be more than sufficient.  Amazon's EC2, especially the 
large and extra-large instances would also work very well for this and 
give you the opportunity to grow your serving computer if/when needed.

Dennis Kubes


v k wrote:
> Sorry about that. For some reason, my post did not show up in the
> mailing list and I still cannot see it  ( maybe a settings issue). I
> don't mean to barrage the mailing  list with the same question. Thanks
> for the advise.
> 
> 
> On Dec 18, 2007 11:43 AM, Grant Ingersoll <gsingers@apache.org> wrote:
>> Hi Venkat,
>>
>> There is no need to post your question multiple times or cross-post.
>> People are distributed all around the world on this list and aren't
>> always available or capable to answer your question.  Having to wait
>> 11 hours for an answer on a free mailing list is not at all
>> unreasonable.
>>
>> If you are just looking to get your hands dirty with Lucene, why not
>> just start w/ a subset on a machine you already own and work to scale
>> up?  This way, you could start with what you have available and get a
>> feel for your memory usage, etc.  Then you will be in a better
>> position to decide what your needs are.
>>
>> If there is one thing that is true about search it is the fact that
>> everyone's situation is different.
>>
>> Cheers,
>> Grant
>>
>>
>> On Dec 18, 2007, at 11:21 AM, v k wrote:
>>
>>> Hello,
>>>
>>> I am using Lucene to build an index from roughly  10 million documents
>>> in number. The  documents are about 4 TB in total.
>>>
>>> After some trial runs, indexing a subset of the documents I am trying
>>> to figure out a hosting service configuration to create a full index
>>> from the entire 10 TB of data. As I am still unsure how this project
>>> will turn out I am not purchasing hardware/ram but considering a web
>>> host.
>>> for the purpose of :
>>> 1)  download the data and to start indexing it.
>>> 2) The web front end to access this index will be a python framework (
>>> eg. Django  etc)
>>>
>>> I am seriously contemplating signing up with Joyent for this plan:
>>> AMD Opteron x64 multi-core servers with 4GiB RAM per core
>>> 1/16 (Burstable up to 95%)
>>> 1 TB    - Bandwidth/month, 1 GB RAM, + as such as NAS  storage as I
>>> can
>>> afford to pay for.
>>>
>>> My QUESTION is - Will this RAM and CPU be sufficient during
>>> development of the search application and building the index, etc. or
>>> is it so abysmal and under-equipped in terms of hardware that the
>>> development version of my application will not work.
>>> I understand that having more RAM is always good, but is 1GB as good
>>> as nothing?
>>>
>>> This setup is NOT for production but for for development so I can get
>>> my hands dirty with lucene which will require plenty of tweaks as the
>>> project moves along.
>>>
>>> What initial configuration would you recommend for a development
>>> version given the corpus size. I am not even sure how large my index
>>> will look like at this point.
>>>
>>> I hope to build an my indexes this way and once the search
>>> infrastructure is working and the web-front end complete, I plan to
>>> worry about Redundancy, availability and scalability for the many
>>> users I hope to provide this free service for :-)
>>>
>>> Many of you in this forum have built successful products with Lucene.
>>> To name a few I am aware of -  Ken Krugle, James Ryley, Dennis Kubes
>>>
>>> Some of you must have started with small machines,test set-ups etc
>>> where you built your initial search apps. I hope  to receive some
>>> advise about my plan and approach to start building an infrastructure
>>> to support my Lucene app.
>>>
>>> Thank you.
>>>
>>> Venkat
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>> --------------------------
>> Grant Ingersoll
>> http://lucene.grantingersoll.com
>>
>> Lucene Helpful Hints:
>> http://wiki.apache.org/lucene-java/BasicsOfPerformance
>> http://wiki.apache.org/lucene-java/LuceneFAQ
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 23 02:11:16 2007
Return-Path: <java-user-return-31627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98331 invoked from network); 23 Dec 2007 02:11:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2007 02:11:16 -0000
Received: (qmail 8829 invoked by uid 500); 23 Dec 2007 02:10:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8806 invoked by uid 500); 23 Dec 2007 02:10:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8794 invoked by uid 99); 23 Dec 2007 02:10:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Dec 2007 18:10:54 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of berlin.brown@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Dec 2007 02:10:31 +0000
Received: by wa-out-1112.google.com with SMTP id j40so1681710wah.11
        for <java-user@lucene.apache.org>; Sat, 22 Dec 2007 18:10:35 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        bh=bcBgr+JiCnxrigtBjkfQWvt/eZq84XV4riAaJL6jaxs=;
        b=OxESqN2nt65xe+Ie/0gq/4xaCM0BJTDGjuJSsROZ/gCFaioEdmxYSELo8KHTdey7OBZymuMeGJYtIq7iX0iEpI4RF6KBbIQGG4kI00ZSwrqRQsdBJSGc6OTM4BnxWAiZDuyoNrCER1lCrMQ20FX5k5z1x+mzdJhMBQLfXt+2BGE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Dar1/OcJQ4UQK70MQB8ITJ1TnEIiyriyq8TLzLDIkwWbv9vndCTNAEP/Pgl20Tsb0FyFyrVH/d4kXBkHmCTzWW2lbk56yhA5i4Y0Z4pavkc8TxxDq3Q5IWykRcGCPash/UsWdW7u6hf450WzUQKbGokXVUPHL9oElMVHVsxLbjk=
Received: by 10.114.14.1 with SMTP id 1mr599927wan.9.1198375835590;
        Sat, 22 Dec 2007 18:10:35 -0800 (PST)
Received: by 10.115.89.13 with HTTP; Sat, 22 Dec 2007 18:10:35 -0800 (PST)
Message-ID: <df27a55b0712221810r23eb2086lf644303e3b266ce1@mail.gmail.com>
Date: Sat, 22 Dec 2007 21:10:35 -0500
From: "Berlin Brown" <berlin.brown@gmail.com>
To: java-user@lucene.apache.org
Subject: Index lucene database details.
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

Do you guys have article links or other documents to describe the
lucene database.  Eg.  what is it composed of?

-- 
Berlin Brown
http://botspiritcompany.com/botlist/spring/help/about.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 23 02:43:20 2007
Return-Path: <java-user-return-31628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5375 invoked from network); 23 Dec 2007 02:43:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2007 02:43:20 -0000
Received: (qmail 16141 invoked by uid 500); 23 Dec 2007 02:43:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16112 invoked by uid 500); 23 Dec 2007 02:43:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16101 invoked by uid 99); 23 Dec 2007 02:43:03 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Dec 2007 18:43:03 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Dec 2007 02:42:40 +0000
Received: by fg-out-1718.google.com with SMTP id d23so565591fga.27
        for <java-user@lucene.apache.org>; Sat, 22 Dec 2007 18:42:43 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=vcCsKQ79SJx4o6cIcW4LMmUPda/sakavD/HZ58tqki4=;
        b=Fmlq2ypOun8CU+z4gjmwaOqexesogAWtSey95VgxATT716tyYRTmxvf+4BC6pgNbVQr8qfjC43wITbQ610YBc3YwA89IOA2no8x7++3sGry5DJaqFn68+eoCImY3AbW3+5PZ8YRKq3APiAQZsEeoIXyZewjQYsa6sR/Z30VA6Mw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=WCiQ2dwJ98+jgBPSlIja2CG3q19U3dw5G7xjDPQt6Qz7/WgNFC8gqWxM0J45vigPHuEiIO7jT5ZYqpwbQFtMqYDp17f0HSzneH+soYioZmAKKwGWyvBwBWEcc7V9JUpGy73JCS0X/OExh/HJXr+QGKTbquyObv7FzfBbgzTiuz4=
Received: by 10.82.105.13 with SMTP id d13mr5516135buc.30.1198377762972;
        Sat, 22 Dec 2007 18:42:42 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Sat, 22 Dec 2007 18:42:42 -0800 (PST)
Message-ID: <359a92830712221842w1fab21b6se82079c92bf048d5@mail.gmail.com>
Date: Sat, 22 Dec 2007 21:42:42 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index lucene database details.
In-Reply-To: <df27a55b0712221810r23eb2086lf644303e3b266ce1@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_2123_17256975.1198377762967"
References: <df27a55b0712221810r23eb2086lf644303e3b266ce1@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_2123_17256975.1198377762967
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

The usual response is "why to you care" <G>? What is
it that you want to know this information to accomplish? Perhaps
there's an easier way than trying to get into the guts of the
index....

Best
Erick

On Dec 22, 2007 9:10 PM, Berlin Brown <berlin.brown@gmail.com> wrote:

> Do you guys have article links or other documents to describe the
> lucene database.  Eg.  what is it composed of?
>
> --
> Berlin Brown
> http://botspiritcompany.com/botlist/spring/help/about.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_2123_17256975.1198377762967--

From java-user-return-31629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 23 05:31:33 2007
Return-Path: <java-user-return-31629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40757 invoked from network); 23 Dec 2007 05:31:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2007 05:31:32 -0000
Received: (qmail 64429 invoked by uid 500); 23 Dec 2007 05:31:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64394 invoked by uid 500); 23 Dec 2007 05:31:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64383 invoked by uid 99); 23 Dec 2007 05:31:15 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 22 Dec 2007 21:31:15 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Dec 2007 05:31:03 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J6JQN-0005tt-LQ
	for java-user@lucene.apache.org; Sat, 22 Dec 2007 21:30:55 -0800
Message-ID: <14476062.post@talk.nabble.com>
Date: Sat, 22 Dec 2007 21:30:55 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which file in the lucene package is used to manipulate
 results..
In-Reply-To: <359a92830712210748y575eb0bes2e27c5da0f7104df@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
References: <14450335.post@talk.nabble.com> <762026.33053.qm@web26013.mail.ukl.yahoo.com> <14456938.post@talk.nabble.com> <359a92830712210748y575eb0bes2e27c5da0f7104df@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Actually what i have to do is...
1.) for every query(keyword), among the results obtained, the keyword will
be mapped with the page clicked, along with the no. of clicks for that
keyword on that page
2.) next time for the same query(keyword), the mapped pages will be ranked
higher considering the no. of clicks too..
3.) for every new query these steps will be repeated...
this was a very high level view , i have made algorithms for these modules
and trying to incorporate with lucene but dont know , on which files i have
to do edition to make it work...
please help me regarding this, if you need some more explanation, please let
me know...
thanks 
Sumit Tyagi





Erick Erickson wrote:
> 
> You still haven't explained *why* you want to rerank results. What
> is the use-case you're trying to implement? Quite often it's turned
> out for me that when I let folks on the list know what the use
> case I'm trying to support is, they come up with much more elegant
> solutions than I was thinking about.
> 
> For instance, does the CustomScoreQuery class have any relevance
> to your problem?
> 
> If you're thinking of modifying the core Lucene code for your
> special purpose, I'd advise against it unless and until you'd exhausted
> all the other options. It's always a maintenance headache to do this.
> 
> Best
> Erick
> 
> On Dec 21, 2007 10:09 AM, sumittyagi <ping.sumit@gmail.com> wrote:
> 
>>
>> actually i am writing a module to rerank the results, so i want to edit
>> the
>> file which arrange the results and give them ranks,
>> or is there any other way i can use my module to rerank the results
>>
>>
>> markharw00d wrote:
>> >
>> > I think you need to describe your "factors" in more detail. Exactly
>> what
>> > do you want to achieve for your users?
>> > We could be talking about any number of Lucene functions here.
>> >
>> > ----- Original Message ----
>> > From: sumittyagi <ping.sumit@gmail.com>
>> > To: java-user@lucene.apache.org
>> > Sent: Friday, 21 December, 2007 4:51:09 AM
>> > Subject: Which file in the lucene package is used to manipulate
>> results..
>> >
>> >
>> > hi, i am using lucene for the very first time and want to manipulate
>> >  the
>> > results, by adding some more factors to it, which file should i edit to
>> > manipulate the search results....
>> >
>> > Thanks
>> > Sumit Tyagi
>> > --
>> > View this message in context:
>> >
>> >
>> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14450335.html
>> > Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> >
>> >
>> >
>> >
>> >
>> >       __________________________________________________________
>> > Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>> >
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14456938.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14476062.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 23 10:15:53 2007
Return-Path: <java-user-return-31630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85275 invoked from network); 23 Dec 2007 10:15:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2007 10:15:53 -0000
Received: (qmail 52117 invoked by uid 500); 23 Dec 2007 10:15:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52085 invoked by uid 500); 23 Dec 2007 10:15:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52074 invoked by uid 99); 23 Dec 2007 10:15:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Dec 2007 02:15:36 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.88] (HELO web26014.mail.ukl.yahoo.com) (217.12.10.88)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 23 Dec 2007 10:15:21 +0000
Received: (qmail 62168 invoked by uid 60001); 23 Dec 2007 10:15:11 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=X-YMail-OSG:Received:X-Mailer:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding:Message-ID;
  b=VqgU2jXDYo+yKWPh/w3PJI1RR6X/dDQO7dXcUgvsKV5BmGRP0qxLmfqU/DKkzc4zG9WCxKIPN3EYMyJ080kPbiwNdOsbJt4qCi0hfJUF/QgGwoL/dc5dYx650dcDTZwYBoIZ/2uHdy0BVnNy86bRSJp11K5dj91T9w/W2ZiA/Ek=;
X-YMail-OSG: S7Uu4J8VM1kXjrAkxil9Md_kD667frdyu3ZDBvXALTdKfpsTdJ3JisHAwLDKCiBlsvuoxnzPhXmE7f3SOL0LAVmp17T7pokfYnHxGVlAxqIEYzhD3VkYaANQtCs-
Received: from [194.106.34.5] by web26014.mail.ukl.yahoo.com via HTTP; Sun, 23 Dec 2007 10:15:11 GMT
X-Mailer: YahooMailRC/818.31 YahooMailWebService/0.7.158.1
Date: Sun, 23 Dec 2007 10:15:11 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Which file in the lucene package is used to manipulate results..
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
Message-ID: <329945.61466.qm@web26014.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Thanks for the context - much more useful.=0AThe challenge here is similar =
to that posed by offering end-user tagging of content (see here http://www.=
mail-archive.com/java-user@lucene.apache.org/msg17580.html ). The main diff=
erence here being that words are added to docs implicitly by search click-t=
hroughs rather than any explicit tagging action.=0A=0AIn both cases the cha=
llenge is that the user data around documents is likely to be updated very =
often while the documents remain relatively static. =0AI suspect some addit=
ional things to think about are:=0A1) Cancelling out the "human laziness" b=
ias that favours clicking results on page 1. Are clicks on page 2 worth mor=
e?=0A2) Spam clicks - detecting deliberate gaming of your re-ranking algori=
thm.=0A3) Lucene doc IDs are not stable - how will you associate query term=
s/click data with documents and join them at speed?=0A4) Are individual wor=
ds or phrases the unit of boost? "Paris" means different things in "Paris H=
ilton" and "Paris, France".=0A=0AA simple approach might be to re-index you=
r content with all of the additional search terms from clicks added to the =
associated document in a "searchClicks" field - the more clicks, the more r=
epetitions of the same search words in the document to help with tf (Term F=
requency). This additional content would need to be capped, to avoid huge d=
ocuments. This has the disadvantage of requiring a re-index though. =0AAnot=
her option to avoid reindexing everything is to wrap IndexReader (See Filte=
rIndexReader) and implement TermEnum/TermDocs for a fake field called "sear=
chClicks". The idea is Lucene looks after the usual, static document conten=
t while your implementation goes off to your more volatile storage (e.g. da=
tabase/parallel index, custom file structure) to retrieve lists of doc ids,=
 term frequencies etc. for this "searchClicks" field. All of the Lucene que=
ries you might want to throw at this e.g. PhraseQueries can then test both =
the static Lucene fields and your new volatile "click" fields without being=
 aware of this low-level trickery. =0A=0AI'm sure there will be other ways =
of doing this too but this seems like a conceptually clean way of modelling=
 it - just seeing search terms as extensions to the document content.=0A=0A=
Cheers=0AMark=0A=0A=0A----- Original Message ----=0AFrom: sumittyagi <ping.=
sumit@gmail.com>=0ATo: java-user@lucene.apache.org=0ASent: Sunday, 23 Decem=
ber, 2007 5:30:55 AM=0ASubject: Re: Which file in the lucene package is use=
d to manipulate results..=0A=0A=0AActually what i have to do is...=0A1.) fo=
r every query(keyword), among the results obtained, the keyword=0A will=0Ab=
e mapped with the page clicked, along with the no. of clicks for that=0Akey=
word on that page=0A2.) next time for the same query(keyword), the mapped p=
ages will be=0A ranked=0Ahigher considering the no. of clicks too..=0A3.) f=
or every new query these steps will be repeated...=0Athis was a very high l=
evel view , i have made algorithms for these=0A modules=0Aand trying to inc=
orporate with lucene but dont know , on which files i=0A have=0Ato do editi=
on to make it work...=0Aplease help me regarding this, if you need some mor=
e explanation,=0A please let=0Ame know...=0Athanks =0ASumit Tyagi=0A=0A=0A=
=0A=0A=0AErick Erickson wrote:=0A> =0A> You still haven't explained *why* y=
ou want to rerank results. What=0A> is the use-case you're trying to implem=
ent? Quite often it's turned=0A> out for me that when I let folks on the li=
st know what the use=0A> case I'm trying to support is, they come up with m=
uch more elegant=0A> solutions than I was thinking about.=0A> =0A> For inst=
ance, does the CustomScoreQuery class have any relevance=0A> to your proble=
m?=0A> =0A> If you're thinking of modifying the core Lucene code for your=
=0A> special purpose, I'd advise against it unless and until you'd=0A exhau=
sted=0A> all the other options. It's always a maintenance headache to do th=
is.=0A> =0A> Best=0A> Erick=0A> =0A> On Dec 21, 2007 10:09 AM, sumittyagi <=
ping.sumit@gmail.com> wrote:=0A> =0A>>=0A>> actually i am writing a module =
to rerank the results, so i want to=0A edit=0A>> the=0A>> file which arrang=
e the results and give them ranks,=0A>> or is there any other way i can use=
 my module to rerank the results=0A>>=0A>>=0A>> markharw00d wrote:=0A>> >=
=0A>> > I think you need to describe your "factors" in more detail.=0A Exac=
tly=0A>> what=0A>> > do you want to achieve for your users?=0A>> > We could=
 be talking about any number of Lucene functions here.=0A>> >=0A>> > ----- =
Original Message ----=0A>> > From: sumittyagi <ping.sumit@gmail.com>=0A>> >=
 To: java-user@lucene.apache.org=0A>> > Sent: Friday, 21 December, 2007 4:5=
1:09 AM=0A>> > Subject: Which file in the lucene package is used to manipul=
ate=0A>> results..=0A>> >=0A>> >=0A>> > hi, i am using lucene for the very =
first time and want to=0A manipulate=0A>> >  the=0A>> > results, by adding =
some more factors to it, which file should i=0A edit to=0A>> > manipulate t=
he search results....=0A>> >=0A>> > Thanks=0A>> > Sumit Tyagi=0A>> > --=0A>=
> > View this message in context:=0A>> >=0A>> >=0A>>=0A http://www.nabble.c=
om/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450=
335p14450335.html=0A>> > Sent from the Lucene - Java Users mailing list arc=
hive at=0A Nabble.com.=0A>> >=0A>> >=0A>> >=0A>> >=0A>> >=0A>> >       ____=
______________________________________________________=0A>> > Sent from Yah=
oo! Mail - a smarter inbox http://uk.mail.yahoo.com=0A>> >=0A>> >=0A>> >=0A=
 ---------------------------------------------------------------------=0A>>=
 > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org=0A>> > F=
or additional commands, e-mail: java-user-help@lucene.apache.org=0A>> >=0A>=
> >=0A>> >=0A>>=0A>> --=0A>> View this message in context:=0A>>=0A http://w=
ww.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-result=
s..-tp14450335p14456938.html=0A>> Sent from the Lucene - Java Users mailing=
 list archive at=0A Nabble.com.=0A>>=0A>>=0A>>=0A -------------------------=
--------------------------------------------=0A>> To unsubscribe, e-mail: j=
ava-user-unsubscribe@lucene.apache.org=0A>> For additional commands, e-mail=
: java-user-help@lucene.apache.org=0A>>=0A>>=0A> =0A> =0A=0A-- =0AView this=
 message in context:=0A http://www.nabble.com/Which-file-in-the-lucene-pack=
age-is-used-to-manipulate-results..-tp14450335p14476062.html=0ASent from th=
e Lucene - Java Users mailing list archive at Nabble.com.=0A=0A=0A---------=
------------------------------------------------------------=0ATo unsubscri=
be, e-mail: java-user-unsubscribe@lucene.apache.org=0AFor additional comman=
ds, e-mail: java-user-help@lucene.apache.org=0A=0A=0A=0A=0A=0A=0A      ____=
______________________________________________________=0ASent from Yahoo! M=
ail - a smarter inbox http://uk.mail.yahoo.com=0A

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 23 10:16:37 2007
Return-Path: <java-user-return-31631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85344 invoked from network); 23 Dec 2007 10:16:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2007 10:16:37 -0000
Received: (qmail 53693 invoked by uid 500); 23 Dec 2007 10:16:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53665 invoked by uid 500); 23 Dec 2007 10:16:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53654 invoked by uid 99); 23 Dec 2007 10:16:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Dec 2007 02:16:20 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [206.125.223.71] (HELO mx01.mailboxcop.com) (206.125.223.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Dec 2007 10:16:06 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx01.mailboxcop.com (8.13.8/8.13.8) with ESMTP id lBNAFsOv019359
	for <java-user@lucene.apache.org>; Sun, 23 Dec 2007 04:15:54 -0600
Received: (qmail 6460 invoked by uid 0); 23 Dec 2007 04:15:54 -0600
Date: 23 Dec 2007 04:15:54 -0600
Message-ID: <20071223101554.6459.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Which file in the lucene package is used to manipulate results..
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.00
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 6.00] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 175836934 - 8004f04791c3
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=175836934&m=8004f04791c3&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=175836934&m=8004f04791c3&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=175836934&m=8004f04791c3&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.3
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

LUX is closed until 7th January 2008

most information about LUX is available at www.lux.org.uk



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 23 10:17:25 2007
Return-Path: <java-user-return-31632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85426 invoked from network); 23 Dec 2007 10:17:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 23 Dec 2007 10:17:24 -0000
Received: (qmail 55290 invoked by uid 500); 23 Dec 2007 10:17:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55254 invoked by uid 500); 23 Dec 2007 10:17:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55243 invoked by uid 99); 23 Dec 2007 10:17:07 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Dec 2007 02:17:07 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [206.125.223.73] (HELO mx03.mailboxcop.com) (206.125.223.73)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Dec 2007 10:16:53 +0000
Received: from secure3.apollohosting.com (secure3.apollohosting.com [206.125.215.253])
	by mx03.mailboxcop.com (8.13.8/8.13.8) with ESMTP id lBNAGhtf030836
	for <java-user@lucene.apache.org>; Sun, 23 Dec 2007 04:16:43 -0600
Received: (qmail 7510 invoked by uid 0); 23 Dec 2007 04:16:43 -0600
Date: 23 Dec 2007 04:16:43 -0600
Message-ID: <20071223101643.7509.qmail@secure3.apollohosting.com>
From: tom@lux.org.uk
To: java-user@lucene.apache.org
CC: 
Subject: Re: Re: Re: Which file in the lucene package is used to manipulate results..
Content-Type: text/plain; charset="UTF-8"
Content-Transfer-Encoding: 8bit
Content-Disposition: inline
X-Canit-CHI2: 0.00
X-Bayes-Prob: 0.0001 (Score 0, tokens from: @@RPTN, outgoing)
X-Spam-Score: 0.00 () [Hold at 6.00] 
X-CanItPRO-Stream: outgoing (inherits from default)
X-Canit-Stats-ID: 175836996 - a9fd3c4a2576
X-Antispam-Training-Forget: http://mailboxcop.com/canit/b.php?i=175836996&m=a9fd3c4a2576&c=f
X-Antispam-Training-Nonspam: http://mailboxcop.com/canit/b.php?i=175836996&m=a9fd3c4a2576&c=n
X-Antispam-Training-Spam: http://mailboxcop.com/canit/b.php?i=175836996&m=a9fd3c4a2576&c=s
X-Scanned-By: CanIt (www . roaringpenguin . com) on 192.168.15.5
X-Virus-Checked: Checked by ClamAV on apache.org

AUTOMATIC REPLY

LUX is closed until 7th January 2008

most information about LUX is available at www.lux.org.uk



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 24 00:05:14 2007
Return-Path: <java-user-return-31633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93374 invoked from network); 24 Dec 2007 00:05:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2007 00:05:13 -0000
Received: (qmail 65594 invoked by uid 500); 24 Dec 2007 00:04:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65558 invoked by uid 500); 24 Dec 2007 00:04:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65547 invoked by uid 99); 24 Dec 2007 00:04:56 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Dec 2007 16:04:56 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of buschmic@gmail.com designates 209.85.132.249 as permitted sender)
Received: from [209.85.132.249] (HELO an-out-0708.google.com) (209.85.132.249)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Dec 2007 00:04:33 +0000
Received: by an-out-0708.google.com with SMTP id c5so268039anc.49
        for <java-user@lucene.apache.org>; Sun, 23 Dec 2007 16:04:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=mcjMrlKtTE2SpCTYay9uaxeR0Zx75ISUSQUwN1vKg0c=;
        b=xFODVpD49Lqz8G1ccdA7z4mdsi2PS+XNekgaxMoAlQR0x2r2tqnleh2o0p9qNb78+6WVwW6IjF2vM1olDq8HYYPpY6kjOUYU8Es06TsADlZfVTwtDg85mmbJMTvdOtPVm83Leogx6lnAs/MU6Cs0yKN0FxPN/AhmuYnMU3O5UoA=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=uTqe4RILo2E9Q2GoMUh6/To43wMh48zBsFGO87Bx5kHu1UsQlOxa5sbqMK1S3j1b+d62nvdEA6qgwMN113VHfscIyJfTOmA1BeJbz2k973aPUEfOUO4ZjnlUakMgCfWFKMwpTWDLIO4Z0vZ/5YqCzTgi2kHnbaKN+czDbs6tk60=
Received: by 10.101.66.14 with SMTP id t14mr8219328ank.48.1198454677112;
        Sun, 23 Dec 2007 16:04:37 -0800 (PST)
Received: from ?192.168.0.4? ( [217.225.189.192])
        by mx.google.com with ESMTPS id i52sm5070706rne.2.2007.12.23.16.04.34
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sun, 23 Dec 2007 16:04:35 -0800 (PST)
Message-ID: <476EF726.3040004@gmail.com>
Date: Mon, 24 Dec 2007 01:02:46 +0100
From: Michael Busch <buschmic@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Nightly Snapshots available in the Apache Maven Snapshot Repository
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Dear Lucene Users,

we are now publishing nightly artifacts to the Maven Snapshot Repository
[1]. The current version is '2.3-SNAPSHOT'.

The artifacts include
   * Binary jars
   * Sources
   * Javadocs

You can find separate artifacts for the core, demo, and the different
contrib modules.

Merry Christmas!
-Michael

[1] http://people.apache.org/maven-snapshot-repository/org/apache/lucene/

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 24 00:08:03 2007
Return-Path: <java-user-return-31634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93589 invoked from network); 24 Dec 2007 00:08:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2007 00:08:01 -0000
Received: (qmail 67378 invoked by uid 500); 24 Dec 2007 00:07:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67345 invoked by uid 500); 24 Dec 2007 00:07:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67334 invoked by uid 99); 24 Dec 2007 00:07:44 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Dec 2007 16:07:44 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of Henning.Rath@steria-mummert.de designates 193.26.252.39 as permitted sender)
Received: from [193.26.252.39] (HELO smtp01.steria-mummert.de) (193.26.252.39)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Dec 2007 00:07:32 +0000
X-IronPort-AV: E=Sophos;i="4.24,201,1196636400"; 
   d="scan'208,217";a="5631041"
Received: from www-connect.steria-mummert.de ([193.26.252.38])
  by smtp01.steria-mummert.de with ESMTP; 24 Dec 2007 01:07:22 +0100
Subject: Henning Rath is out of office.
From: Henning.Rath@steria-mummert.de
To: java-user@lucene.apache.org
Message-ID: <OFFB2BECE2.6F91810C-ONC12573BB.0000AC35-C12573BB.0000AC35@steria-mummert.de>
Date: Mon, 24 Dec 2007 01:07:20 +0100
MIME-Version: 1.0
Content-type: multipart/alternative; 
	Boundary="0__=4EBBF928DF932AA58f9e8a93df938690918c4EBBF928DF932AA5"
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org

--0__=4EBBF928DF932AA58f9e8a93df938690918c4EBBF928DF932AA5
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: quoted-printable



Ich werde ab dem 24.12.2007 nicht im B=FCro sein. Ich kehre zur=FCck am=

07.01.2008.
I will be out of the office starting 24.12.2007. I will be back on
07.01.2008.

Ihre Nachricht werde ich nach meiner R=FCckkehr beantworten.
I will answer your message after my return.

Mit freundlichen Gr=FC=DFen
Best regards

Henning Rath=

--0__=4EBBF928DF932AA58f9e8a93df938690918c4EBBF928DF932AA5--


From java-user-return-31635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 24 04:03:36 2007
Return-Path: <java-user-return-31635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54227 invoked from network); 24 Dec 2007 04:03:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2007 04:03:36 -0000
Received: (qmail 31354 invoked by uid 500); 24 Dec 2007 04:03:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31326 invoked by uid 500); 24 Dec 2007 04:03:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31315 invoked by uid 99); 24 Dec 2007 04:03:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Dec 2007 20:03:20 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of berlin.brown@gmail.com designates 209.85.146.177 as permitted sender)
Received: from [209.85.146.177] (HELO wa-out-1112.google.com) (209.85.146.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Dec 2007 04:02:55 +0000
Received: by wa-out-1112.google.com with SMTP id j40so2507266wah.11
        for <java-user@lucene.apache.org>; Sun, 23 Dec 2007 20:02:58 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        bh=kZFSUEZwhHSHwuUULXThHdjKOLnIfngYsBjFjYvHhBY=;
        b=OX6RnZJiIfV0QJEyuWmG2Kykfq0ef8Dz2iFuyGYXRLfME9afcG4y+Ee45+QT5bFIhc+Y4at4yUSn+9ej7Wv+EV34RQQug/uhCYSKEH9baDGFhjQryagJLWFBqNlYgzYhVOO5u6QqnCokfT95LMTOMDM5g58cogq3CrSgeM84Xgk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=xgTVFgMcrKTFYaK9NJl3xBwtQSti5jnwmSpcUZKdqRMnAqMz0Py7qcoBSU/6NFRiE1N629/UyY9MpeOnoGFXbNlr04YA5HVCYOMbGdX8qM8c1Eft66f5J3JbKL3edMBY+btg5i4ZeWHX1ZsLVdHI7gFdbVSuHVWFKSkW8uciU40=
Received: by 10.114.38.2 with SMTP id l2mr1446970wal.89.1198468978175;
        Sun, 23 Dec 2007 20:02:58 -0800 (PST)
Received: by 10.115.89.13 with HTTP; Sun, 23 Dec 2007 20:02:58 -0800 (PST)
Message-ID: <df27a55b0712232002j27e8f136v59caefe1dacbfd4d@mail.gmail.com>
Date: Sun, 23 Dec 2007 23:02:58 -0500
From: "Berlin Brown" <berlin.brown@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index lucene database details.
In-Reply-To: <359a92830712221842w1fab21b6se82079c92bf048d5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
References: <df27a55b0712221810r23eb2086lf644303e3b266ce1@mail.gmail.com>
	 <359a92830712221842w1fab21b6se82079c92bf048d5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

Purely for research.  I like the lucene database engine and would in
some respects like to model the approach.

On Dec 22, 2007 9:42 PM, Erick Erickson <erickerickson@gmail.com> wrote:
> The usual response is "why to you care" <G>? What is
> it that you want to know this information to accomplish? Perhaps
> there's an easier way than trying to get into the guts of the
> index....
>
> Best
> Erick
>
>
> On Dec 22, 2007 9:10 PM, Berlin Brown <berlin.brown@gmail.com> wrote:
>
> > Do you guys have article links or other documents to describe the
> > lucene database.  Eg.  what is it composed of?
> >
> > --
> > Berlin Brown
> > http://botspiritcompany.com/botlist/spring/help/about.html
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>



-- 
Berlin Brown
http://botspiritcompany.com/botlist/spring/help/about.html

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 24 04:04:01 2007
Return-Path: <java-user-return-31636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54309 invoked from network); 24 Dec 2007 04:04:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2007 04:04:00 -0000
Received: (qmail 32926 invoked by uid 500); 24 Dec 2007 04:03:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32899 invoked by uid 500); 24 Dec 2007 04:03:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32888 invoked by uid 99); 24 Dec 2007 04:03:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 23 Dec 2007 20:03:43 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhouqi.jackson@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Dec 2007 04:03:20 +0000
Received: by fg-out-1718.google.com with SMTP id d23so845394fga.27
        for <java-user@lucene.apache.org>; Sun, 23 Dec 2007 20:03:24 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=xXIO2Dp7Gb4ydHv+8bMYBlfd3uOy8PC9vzy4K9d9Dng=;
        b=gU8Nk1xbIID6ZJjBUGPF/pkU+xQBrOi5ApAeHxbA75lYWo0kT6Y9t654zP7yysCop9xUZ0yNvy2plzTyKPqNuovDdqLcZw9apZLfmt9yWKJA+GaCV7aI1NYoKocV3XyDNdzFHhkHZYihQG/Qc8BRKfJPVg+Xr9f+ravftnFo4hs=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mT5zqR6PUx8wVNRE6IBQMgykq0Q0rNpFG1EikQY+gfFHBS1CTLuFXcdyN9SeSQM80vduBndk0/5YJZoXfBLYeh5cuMjq0cCXqgPPwqcHBrs/gmJwe4MehxfPvW3dNyZPpV/aWqAyykJcCyUTLlOSGF/KIwQpuLoVf2Ac4OuuYE8=
Received: by 10.82.149.8 with SMTP id w8mr6211682bud.24.1198469003275;
        Sun, 23 Dec 2007 20:03:23 -0800 (PST)
Received: by 10.82.151.11 with HTTP; Sun, 23 Dec 2007 20:03:23 -0800 (PST)
Message-ID: <72d748c20712232003j439b069dk2cf75c956c71042f@mail.gmail.com>
Date: Mon, 24 Dec 2007 12:03:23 +0800
From: "Zhou Qi" <zhouqi.jackson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re: Re: optimize Index problem
In-Reply-To: <20071222130505.26173.qmail@secure3.apollohosting.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4518_16634227.1198469003267"
References: <20071222130505.26173.qmail@secure3.apollohosting.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4518_16634227.1198469003267
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi , Grant

  After I adjust the mergefactor of indexwriter from 1000 to 100, it worked.
Thank you.


22 Dec 2007 07:05:05 -0600, tom@lux.org.uk <tom@lux.org.uk>:
>
> AUTOMATIC REPLY
>
> LUX is closed until 7th January 2008
>
> most information about LUX is available at www.lux.org.uk
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_4518_16634227.1198469003267--

From java-user-return-31637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 24 13:29:43 2007
Return-Path: <java-user-return-31637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50293 invoked from network); 24 Dec 2007 13:29:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2007 13:29:43 -0000
Received: (qmail 65493 invoked by uid 500); 24 Dec 2007 13:29:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65469 invoked by uid 500); 24 Dec 2007 13:29:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65456 invoked by uid 99); 24 Dec 2007 13:29:26 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Dec 2007 05:29:26 -0800
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of rakesh_shete@hotmail.com designates 65.54.246.206 as permitted sender)
Received: from [65.54.246.206] (HELO bay0-omc3-s6.bay0.hotmail.com) (65.54.246.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Dec 2007 13:29:11 +0000
Received: from BAY112-W23 ([64.4.26.123]) by bay0-omc3-s6.bay0.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Mon, 24 Dec 2007 05:29:02 -0800
Message-ID: <BAY112-W237BF935ADA50C3DBAAB58F9590@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_a5c7383c-7fbc-4273-a5ef-b3258da7fc84_"
X-Originating-IP: [220.225.70.2]
From: Rakesh Shete <rakesh_shete@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Boosting Vs Sorting
Date: Mon, 24 Dec 2007 18:59:01 +0530
Importance: Normal
In-Reply-To: <359a92830712211415p7d1dc76dq964846195a5b4215@mail.gmail.com>
References: <BAY112-W3267D6CF8D3879E0546C2F95E0@phx.gbl>
	 <359a92830712210646i2342952bjd0c7ea82e28a4d41@mail.gmail.com>
 	 <359a92830712210653q5df2a025nb827685ed7c643c3@mail.gmail.com>
 	 <BAY112-W3AEF174E7107D4A0E8487F95E0@phx.gbl> 
 <359a92830712211415p7d1dc76dq964846195a5b4215@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 24 Dec 2007 13:29:02.0216 (UTC) FILETIME=[F2931880:01C84630]
X-Virus-Checked: Checked by ClamAV on apache.org

--_a5c7383c-7fbc-4273-a5ef-b3258da7fc84_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi Eric,

Thanks for the help. Most of it makes sense to me and I amgoing ahead with =
query boosting during search instead of index time boosting.

Could just tell me how do we arrive at the correct boost values for a query=
 with multiple fields? My understanding is that this will vary as per the d=
ata that is being searched.

My query after boosting would look something like this:

+(i_title:sorting*^6.0 i_description:sorting*^3.5 i_detailedInfo:sorting*^1=
.5 i_tags:sorting*^1.2) -i_published:false +i_topicsClasses.id:1*

The reason for using high values is that I want to make sure that multiple =
occurrences of the search string in say field 'i_description' should not be=
 treated as more relevant than a single match in the 'i_title' field.

Do you have some guideline using which I can arrive at the correct boost va=
lue in the above scenario?

--Rakesh S

> Date: Fri, 21 Dec 2007 17:15:29 -0500
> From: erickerickson@gmail.com
> To: java-user@lucene.apache.org
> Subject: Re: Boosting Vs Sorting
>=20
> See below...
>=20
> On Dec 21, 2007 12:50 PM, Rakesh Shete <rakesh_shete@hotmail.com> wrote:
>=20
> >
> > Hi Eric,
> >
> > >> I don't see how sorting relates to your problem at all....
> >
> > Could you just explain how is sorting different from boosting?
> >
> > I have been trying to figure this out. Going through "Lucene In Action"=
 my
> > understanding of  sorting is that it will kind of second level of order=
ing
> > after the query results have been scored (Not sure if the relevance
> > established
> > by scoring is lost in this process).
> >
>=20
> I often think of sorting as being orthogonal to boosting. They're really
> unrelated.
> Boosting changes how the scoring of documents work. Sorting ignores scori=
ng
> and arranges the results lexically. You can *only* sort on fields that ar=
e a
> single
> token. I'm cheating a little here and you can implement your own
> sorts, but that's another story.
>=20
> Maybe this would help. Say you were indexing books and wanted the results
> presented to the user by title. You could index a "titlesort" field that =
had
> the
> title lowercased and all spaces replaced with underscores. Then, you coul=
d
> sort the result of all books containing "solar energy" by title. Where's =
the
> score
> here? The only relevance score has here is that no book in the result set
> will
> have a score of 0.
>=20
> I did, at one point, have to sort by score then sub-sort by title. That i=
s,
> present the user with the top scoring documents sub-sorted by title.
> This involved using relevancy as the primary sort and sub-sorting by
> title. But the problem here is that scores of 0.98374 wouldn't be in the
> same bucket as a score of 0.98375. Search the mail archive for
> "bucket" and you should see that discussion.
>=20
>=20
>=20
> >
> >
> > >> Is it *really* better for your users to see a low-relevance query
> > >> that happens to have the exact words in it before a very-high
> > >> ranking but not quite exact response?
> >
> > Nopes. Thats the last thing my product manager will want.
> >
> > Lets take an example to simplify this:
> >
> > I have fields like title, description, tags. Now when I search for a te=
rm
> > "Indoor Photography" then I would like the results with exact match in
> > title to be
> > more important than in description or tags. However, if there is an exa=
ct
> > match in description
> > then it should be given more preference than the partial match in title=
.
> >
> > Going by the points mentioned below and as per one of your posts
> > (
> > http://mail-archives.apache.org/mod_mbox/lucene-java-user/200609.mbox/%=
3CPine.LNX.4.58.0609271134380.32280@hal.rescomp.berkeley.edu%3E
> > )
> > I understand that I need to specify query time boosting like this:
> >
> > title:Indoor Photography^2.5 description:Indoor Photography^1.5 tags:
> > Indoor Photography^1.2
> >
>=20
> That would go some distance towards what you want, but watch the syntax.
> You might be better off constructing your own BooleanQuery. The syntax ab=
ove
> would actually parse something like title:Indoor default_field:Photograph=
y^
> 2.5. You
> need parentheses. Also think about phrase queries....
>=20
> Hope this helps
> Erick
>=20
>=20
> >
> > Let me know if this would help my cause.
> >
> > Thnx for ur time n the valuable info.
> >
> > --Rakesh S
> >
> >
> >
> >
> >
> > > Date: Fri, 21 Dec 2007 09:53:02 -0500
> > > From: erickerickson@gmail.com
> > > To: java-user@lucene.apache.org
> > > Subject: Re: Boosting Vs Sorting
> > >
> > > OK, I'm trying to adjust to a Mac and my keyboard shortcuts sometimes
> > > lead me to send the mail when I didn't intend. Sorry about that...
> > >
> > > So, leaving aside how you form your "similar" query, I *think* you
> > > want to form two clauses, your "exact" and your "similar" and
> > > boost them individually, combined in a boolean query.
> > >
> > > This will still interleave the results I think. But it's also a valid
> > > question whether this is good or bad. Is it *really* better for your
> > > users to see a low-relevance query that happens to have the exact
> > > words in it before a very-high ranking but not quite exact response?
> > > That, of course it up to your product manager....
> > >
> > > If it is really a requirement, it seems to me that you would be able =
to
> > > just form the two queries independently, then just post-process them.
> > > One query is the exact version, and the second query is the similar o=
ne.
> > > Then just combine the results as you please by iterating the hits
> > > object for the exact query then following it by the same for the
> > similar.
> > >
> > > I don't see how sorting relates to your problem at all....
> > >
> > > Best
> > > Erick
> > >
> > > On Dec 21, 2007 9:46 AM, Erick Erickson <erickerickson@gmail.com> wro=
te:
> > >
> > > > From my perspective, index-time boosting and sorting are apples
> > > > and oranges.
> > > >
> > > > According to a post from Hoss, index-time boosting is a way of
> > > > saying that "Field x in this document is more important than
> > > > field x in other documents". Query-time boosts are a way of
> > > > saying "I care about field X more than field Y across *all*
> > > > documents".
> > > >
> > > > So index time boosting doesn't seem to relate to your problem since
> > > > you really want to compare field x across all documents. It seems
> > > > that query-time boosting is more relevant.
> > > >
> > > > So, leaving aside how you form your "similar" q
> > > >
> > > >
> > > > On Dec 20, 2007 10:50 PM, Rakesh Shete < rakesh_shete@hotmail.com>
> > wrote:
> > > >
> > > > >
> > > > > Hi all,
> > > > >
> > > > > I am using Hibernate Search (http://www.hibernate.org/410.html)
> > which is
> > > > > a wrapper around Lucene for performing search over info stored in
> > the DB. I
> > > > > have questions related to Lucene boosting Vs sorting:
> > > > >
> > > > > Is index time boosting of documents and fields better than
> > specifying
> > > > > sorting parameters at search time?
> > > > >
> > > > > I have been browsing through the Lucene mail archives for an answ=
er
> > to
> > > > > this. Going through them and reading on stuff related to Lucene
> > scoring, my
> > > > > understanding is that if I know upfront at index time that the
> > relevance
> > > > > order of results is based on certain fields, then, it is better t=
o
> > have
> > > > > index time boosting of documents and fields. Am I right here?
> > > > >
> > > > > My requirements are like:
> > > > > Results having an exact match to the input query string should ha=
ve
> > > > > highest preference followed by an exact match with field1, field2=
,
> > field3
> > > > > and then followed by search query substring (or near match) match
> > with
> > > > > field1, field2, field3.
> > > > >
> > > > > Any suggestions are most welcome.
> > > > >
> > > > > --Rakesh S
> > > > >
> > > > > _________________________________________________________________
> > > > > Post free property ads on Yello Classifieds now! www.yello.in
> > > > > http://ss1.richmedia.in/recurl.asp?pid=3D219
> > > >
> > > >
> > > >
> >
> > _________________________________________________________________
> > Post free property ads on Yello Classifieds now! www.yello.in
> > http://ss1.richmedia.in/recurl.asp?pid=3D219
> >

_________________________________________________________________
Post free property ads on Yello Classifieds now! www.yello.in
http://ss1.richmedia.in/recurl.asp?pid=3D219=

--_a5c7383c-7fbc-4273-a5ef-b3258da7fc84_--

From java-user-return-31638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 24 15:10:48 2007
Return-Path: <java-user-return-31638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7487 invoked from network); 24 Dec 2007 15:10:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2007 15:10:48 -0000
Received: (qmail 24122 invoked by uid 500); 24 Dec 2007 15:10:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24094 invoked by uid 500); 24 Dec 2007 15:10:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24083 invoked by uid 99); 24 Dec 2007 15:10:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Dec 2007 07:10:30 -0800
X-ASF-Spam-Status: No, hits=3.5 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WEIRD_PORT
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 72.14.220.155 as permitted sender)
Received: from [72.14.220.155] (HELO fg-out-1718.google.com) (72.14.220.155)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Dec 2007 15:10:06 +0000
Received: by fg-out-1718.google.com with SMTP id d23so967076fga.27
        for <java-user@lucene.apache.org>; Mon, 24 Dec 2007 07:10:08 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=woyozp82I9yIzhEg7Xjvfc2lbHT3/+y22p8XmOdZmjs=;
        b=NDYyKGhVsuydLa8uBVDbf/epHSE2idaElsUI3xyuly0EfIuSWh0MY7bpG0wik+E5FFGPVc6FwUc+xbsMuNchtQrMGYSHd3Gx4+bBMXK2JelAmdgtOvYeEfAbHWBiKDt0AuqktXbNNGYzGkiXP6rVPWsX8E3R+eFJkF1wka+9Ejg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=by80e5GR/9z6i3OWYhusSLbPDgH7c9xqcJ+NcX4mXwRqc1fVIwgsG3jmQou2zXevNMVH0bqNzKBMVXSz4C9q08317rEAm+d8BGKD+u9p1xxBpNPb6n/k9BueKsX7Yhon8E5LSvxcHf6UH+UUZFmStqUvMmz2vpUkjajE4OGUd5U=
Received: by 10.82.161.19 with SMTP id j19mr8532079bue.20.1198509008398;
        Mon, 24 Dec 2007 07:10:08 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Mon, 24 Dec 2007 07:10:08 -0800 (PST)
Message-ID: <359a92830712240710t40b964dmbec4c8367b00b19b@mail.gmail.com>
Date: Mon, 24 Dec 2007 10:10:08 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Boosting Vs Sorting
In-Reply-To: <BAY112-W237BF935ADA50C3DBAAB58F9590@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_4710_11320037.1198509008379"
References: <BAY112-W3267D6CF8D3879E0546C2F95E0@phx.gbl>
	 <359a92830712210646i2342952bjd0c7ea82e28a4d41@mail.gmail.com>
	 <359a92830712210653q5df2a025nb827685ed7c643c3@mail.gmail.com>
	 <BAY112-W3AEF174E7107D4A0E8487F95E0@phx.gbl>
	 <359a92830712211415p7d1dc76dq964846195a5b4215@mail.gmail.com>
	 <BAY112-W237BF935ADA50C3DBAAB58F9590@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_4710_11320037.1198509008379
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't think there's any real formula for the "correct" boosts, it's more a
matter of
experimentation.

I'd look at some of the raw scores that come back (not the normalized ones)
and
go from there. See HitCollector (?).

Best
Erick

On Dec 24, 2007 8:29 AM, Rakesh Shete <rakesh_shete@hotmail.com> wrote:

>
> Hi Eric,
>
> Thanks for the help. Most of it makes sense to me and I amgoing ahead with
> query boosting during search instead of index time boosting.
>
> Could just tell me how do we arrive at the correct boost values for a
> query with multiple fields? My understanding is that this will vary as per
> the data that is being searched.
>
> My query after boosting would look something like this:
>
> +(i_title:sorting*^6.0 i_description:sorting*^3.5 i_detailedInfo:sorting*^
> 1.5 i_tags:sorting*^1.2) -i_published:false +i_topicsClasses.id:1*
>
> The reason for using high values is that I want to make sure that multiple
> occurrences of the search string in say field 'i_description' should not be
> treated as more relevant than a single match in the 'i_title' field.
>
> Do you have some guideline using which I can arrive at the correct boost
> value in the above scenario?
>
> --Rakesh S
>
> > Date: Fri, 21 Dec 2007 17:15:29 -0500
> > From: erickerickson@gmail.com
> > To: java-user@lucene.apache.org
> > Subject: Re: Boosting Vs Sorting
> >
> > See below...
> >
> > On Dec 21, 2007 12:50 PM, Rakesh Shete <rakesh_shete@hotmail.com> wrote:
> >
> > >
> > > Hi Eric,
> > >
> > > >> I don't see how sorting relates to your problem at all....
> > >
> > > Could you just explain how is sorting different from boosting?
> > >
> > > I have been trying to figure this out. Going through "Lucene In
> Action" my
> > > understanding of  sorting is that it will kind of second level of
> ordering
> > > after the query results have been scored (Not sure if the relevance
> > > established
> > > by scoring is lost in this process).
> > >
> >
> > I often think of sorting as being orthogonal to boosting. They're really
> > unrelated.
> > Boosting changes how the scoring of documents work. Sorting ignores
> scoring
> > and arranges the results lexically. You can *only* sort on fields that
> are a
> > single
> > token. I'm cheating a little here and you can implement your own
> > sorts, but that's another story.
> >
> > Maybe this would help. Say you were indexing books and wanted the
> results
> > presented to the user by title. You could index a "titlesort" field that
> had
> > the
> > title lowercased and all spaces replaced with underscores. Then, you
> could
> > sort the result of all books containing "solar energy" by title. Where's
> the
> > score
> > here? The only relevance score has here is that no book in the result
> set
> > will
> > have a score of 0.
> >
> > I did, at one point, have to sort by score then sub-sort by title. That
> is,
> > present the user with the top scoring documents sub-sorted by title.
> > This involved using relevancy as the primary sort and sub-sorting by
> > title. But the problem here is that scores of 0.98374 wouldn't be in the
> > same bucket as a score of 0.98375. Search the mail archive for
> > "bucket" and you should see that discussion.
> >
> >
> >
> > >
> > >
> > > >> Is it *really* better for your users to see a low-relevance query
> > > >> that happens to have the exact words in it before a very-high
> > > >> ranking but not quite exact response?
> > >
> > > Nopes. Thats the last thing my product manager will want.
> > >
> > > Lets take an example to simplify this:
> > >
> > > I have fields like title, description, tags. Now when I search for a
> term
> > > "Indoor Photography" then I would like the results with exact match in
> > > title to be
> > > more important than in description or tags. However, if there is an
> exact
> > > match in description
> > > then it should be given more preference than the partial match in
> title.
> > >
> > > Going by the points mentioned below and as per one of your posts
> > > (
> > >
> http://mail-archives.apache.org/mod_mbox/lucene-java-user/200609.mbox/%3CPine.LNX.4.58.0609271134380.32280@hal.rescomp.berkeley.edu%3E
> > > )
> > > I understand that I need to specify query time boosting like this:
> > >
> > > title:Indoor Photography^2.5 description:Indoor Photography^1.5 tags:
> > > Indoor Photography^1.2
> > >
> >
> > That would go some distance towards what you want, but watch the syntax.
> > You might be better off constructing your own BooleanQuery. The syntax
> above
> > would actually parse something like title:Indoor
> default_field:Photography^
> > 2.5. You
> > need parentheses. Also think about phrase queries....
> >
> > Hope this helps
> > Erick
> >
> >
> > >
> > > Let me know if this would help my cause.
> > >
> > > Thnx for ur time n the valuable info.
> > >
> > > --Rakesh S
> > >
> > >
> > >
> > >
> > >
> > > > Date: Fri, 21 Dec 2007 09:53:02 -0500
> > > > From: erickerickson@gmail.com
> > > > To: java-user@lucene.apache.org
> > > > Subject: Re: Boosting Vs Sorting
> > > >
> > > > OK, I'm trying to adjust to a Mac and my keyboard shortcuts
> sometimes
> > > > lead me to send the mail when I didn't intend. Sorry about that...
> > > >
> > > > So, leaving aside how you form your "similar" query, I *think* you
> > > > want to form two clauses, your "exact" and your "similar" and
> > > > boost them individually, combined in a boolean query.
> > > >
> > > > This will still interleave the results I think. But it's also a
> valid
> > > > question whether this is good or bad. Is it *really* better for your
> > > > users to see a low-relevance query that happens to have the exact
> > > > words in it before a very-high ranking but not quite exact response?
> > > > That, of course it up to your product manager....
> > > >
> > > > If it is really a requirement, it seems to me that you would be able
> to
> > > > just form the two queries independently, then just post-process
> them.
> > > > One query is the exact version, and the second query is the similar
> one.
> > > > Then just combine the results as you please by iterating the hits
> > > > object for the exact query then following it by the same for the
> > > similar.
> > > >
> > > > I don't see how sorting relates to your problem at all....
> > > >
> > > > Best
> > > > Erick
> > > >
> > > > On Dec 21, 2007 9:46 AM, Erick Erickson <erickerickson@gmail.com>
> wrote:
> > > >
> > > > > From my perspective, index-time boosting and sorting are apples
> > > > > and oranges.
> > > > >
> > > > > According to a post from Hoss, index-time boosting is a way of
> > > > > saying that "Field x in this document is more important than
> > > > > field x in other documents". Query-time boosts are a way of
> > > > > saying "I care about field X more than field Y across *all*
> > > > > documents".
> > > > >
> > > > > So index time boosting doesn't seem to relate to your problem
> since
> > > > > you really want to compare field x across all documents. It seems
> > > > > that query-time boosting is more relevant.
> > > > >
> > > > > So, leaving aside how you form your "similar" q
> > > > >
> > > > >
> > > > > On Dec 20, 2007 10:50 PM, Rakesh Shete < rakesh_shete@hotmail.com>
> > > wrote:
> > > > >
> > > > > >
> > > > > > Hi all,
> > > > > >
> > > > > > I am using Hibernate Search (http://www.hibernate.org/410.html)
> > > which is
> > > > > > a wrapper around Lucene for performing search over info stored
> in
> > > the DB. I
> > > > > > have questions related to Lucene boosting Vs sorting:
> > > > > >
> > > > > > Is index time boosting of documents and fields better than
> > > specifying
> > > > > > sorting parameters at search time?
> > > > > >
> > > > > > I have been browsing through the Lucene mail archives for an
> answer
> > > to
> > > > > > this. Going through them and reading on stuff related to Lucene
> > > scoring, my
> > > > > > understanding is that if I know upfront at index time that the
> > > relevance
> > > > > > order of results is based on certain fields, then, it is better
> to
> > > have
> > > > > > index time boosting of documents and fields. Am I right here?
> > > > > >
> > > > > > My requirements are like:
> > > > > > Results having an exact match to the input query string should
> have
> > > > > > highest preference followed by an exact match with field1,
> field2,
> > > field3
> > > > > > and then followed by search query substring (or near match)
> match
> > > with
> > > > > > field1, field2, field3.
> > > > > >
> > > > > > Any suggestions are most welcome.
> > > > > >
> > > > > > --Rakesh S
> > > > > >
> > > > > >
> _________________________________________________________________
> > > > > > Post free property ads on Yello Classifieds now! www.yello.in
> > > > > > http://ss1.richmedia.in/recurl.asp?pid=219
> > > > >
> > > > >
> > > > >
> > >
> > > _________________________________________________________________
> > > Post free property ads on Yello Classifieds now! www.yello.in
> > > http://ss1.richmedia.in/recurl.asp?pid=219
> > >
>
> _________________________________________________________________
> Post free property ads on Yello Classifieds now! www.yello.in
> http://ss1.richmedia.in/recurl.asp?pid=219
>

------=_Part_4710_11320037.1198509008379--

From java-user-return-31639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 24 23:13:05 2007
Return-Path: <java-user-return-31639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40504 invoked from network); 24 Dec 2007 23:13:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2007 23:13:05 -0000
Received: (qmail 57872 invoked by uid 500); 24 Dec 2007 23:12:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57811 invoked by uid 500); 24 Dec 2007 23:12:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57799 invoked by uid 99); 24 Dec 2007 23:12:47 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Dec 2007 15:12:47 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Dec 2007 23:12:22 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J6wTC-0003eV-0F
	for java-user@lucene.apache.org; Mon, 24 Dec 2007 15:12:26 -0800
Message-ID: <14491981.post@talk.nabble.com>
Date: Mon, 24 Dec 2007 15:12:26 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which file in the lucene package is used to manipulate
 results..
In-Reply-To: <329945.61466.qm@web26014.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
References: <14450335.post@talk.nabble.com> <329945.61466.qm@web26014.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


hi..
thanks for the help
following your suggestions ..
i do not have the package org.apache.lucene.index  , from where can i
download it to start this project

markharw00d wrote:
> 
> Thanks for the context - much more useful.
> The challenge here is similar to that posed by offering end-user tagging
> of content (see here
> http://www.mail-archive.com/java-user@lucene.apache.org/msg17580.html ).
> The main difference here being that words are added to docs implicitly by
> search click-throughs rather than any explicit tagging action.
> 
> In both cases the challenge is that the user data around documents is
> likely to be updated very often while the documents remain relatively
> static. 
> I suspect some additional things to think about are:
> 1) Cancelling out the "human laziness" bias that favours clicking results
> on page 1. Are clicks on page 2 worth more?
> 2) Spam clicks - detecting deliberate gaming of your re-ranking algorithm.
> 3) Lucene doc IDs are not stable - how will you associate query
> terms/click data with documents and join them at speed?
> 4) Are individual words or phrases the unit of boost? "Paris" means
> different things in "Paris Hilton" and "Paris, France".
> 
> A simple approach might be to re-index your content with all of the
> additional search terms from clicks added to the associated document in a
> "searchClicks" field - the more clicks, the more repetitions of the same
> search words in the document to help with tf (Term Frequency). This
> additional content would need to be capped, to avoid huge documents. This
> has the disadvantage of requiring a re-index though. 
> Another option to avoid reindexing everything is to wrap IndexReader (See
> FilterIndexReader) and implement TermEnum/TermDocs for a fake field called
> "searchClicks". The idea is Lucene looks after the usual, static document
> content while your implementation goes off to your more volatile storage
> (e.g. database/parallel index, custom file structure) to retrieve lists of
> doc ids, term frequencies etc. for this "searchClicks" field. All of the
> Lucene queries you might want to throw at this e.g. PhraseQueries can then
> test both the static Lucene fields and your new volatile "click" fields
> without being aware of this low-level trickery. 
> 
> I'm sure there will be other ways of doing this too but this seems like a
> conceptually clean way of modelling it - just seeing search terms as
> extensions to the document content.
> 
> Cheers
> Mark
> 
> 
> ----- Original Message ----
> From: sumittyagi <ping.sumit@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Sunday, 23 December, 2007 5:30:55 AM
> Subject: Re: Which file in the lucene package is used to manipulate
> results..
> 
> 
> Actually what i have to do is...
> 1.) for every query(keyword), among the results obtained, the keyword
>  will
> be mapped with the page clicked, along with the no. of clicks for that
> keyword on that page
> 2.) next time for the same query(keyword), the mapped pages will be
>  ranked
> higher considering the no. of clicks too..
> 3.) for every new query these steps will be repeated...
> this was a very high level view , i have made algorithms for these
>  modules
> and trying to incorporate with lucene but dont know , on which files i
>  have
> to do edition to make it work...
> please help me regarding this, if you need some more explanation,
>  please let
> me know...
> thanks 
> Sumit Tyagi
> 
> 
> 
> 
> 
> Erick Erickson wrote:
>> 
>> You still haven't explained *why* you want to rerank results. What
>> is the use-case you're trying to implement? Quite often it's turned
>> out for me that when I let folks on the list know what the use
>> case I'm trying to support is, they come up with much more elegant
>> solutions than I was thinking about.
>> 
>> For instance, does the CustomScoreQuery class have any relevance
>> to your problem?
>> 
>> If you're thinking of modifying the core Lucene code for your
>> special purpose, I'd advise against it unless and until you'd
>  exhausted
>> all the other options. It's always a maintenance headache to do this.
>> 
>> Best
>> Erick
>> 
>> On Dec 21, 2007 10:09 AM, sumittyagi <ping.sumit@gmail.com> wrote:
>> 
>>>
>>> actually i am writing a module to rerank the results, so i want to
>  edit
>>> the
>>> file which arrange the results and give them ranks,
>>> or is there any other way i can use my module to rerank the results
>>>
>>>
>>> markharw00d wrote:
>>> >
>>> > I think you need to describe your "factors" in more detail.
>  Exactly
>>> what
>>> > do you want to achieve for your users?
>>> > We could be talking about any number of Lucene functions here.
>>> >
>>> > ----- Original Message ----
>>> > From: sumittyagi <ping.sumit@gmail.com>
>>> > To: java-user@lucene.apache.org
>>> > Sent: Friday, 21 December, 2007 4:51:09 AM
>>> > Subject: Which file in the lucene package is used to manipulate
>>> results..
>>> >
>>> >
>>> > hi, i am using lucene for the very first time and want to
>  manipulate
>>> >  the
>>> > results, by adding some more factors to it, which file should i
>  edit to
>>> > manipulate the search results....
>>> >
>>> > Thanks
>>> > Sumit Tyagi
>>> > --
>>> > View this message in context:
>>> >
>>> >
>>>
> 
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14450335.html
>>> > Sent from the Lucene - Java Users mailing list archive at
>  Nabble.com.
>>> >
>>> >
>>> >
>>> >
>>> >
>>> >       __________________________________________________________
>>> > Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
>>> >
>>> >
>>> >
>  ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >
>>> >
>>> >
>>>
>>> --
>>> View this message in context:
>>>
> 
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14456938.html
>>> Sent from the Lucene - Java Users mailing list archive at
>  Nabble.com.
>>>
>>>
>>>
>  ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> 
>> 
> 
> -- 
> View this message in context:
> 
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14476062.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> 
>       __________________________________________________________
> Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14491981.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Dec 24 23:15:36 2007
Return-Path: <java-user-return-31640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40892 invoked from network); 24 Dec 2007 23:15:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 24 Dec 2007 23:15:36 -0000
Received: (qmail 59498 invoked by uid 500); 24 Dec 2007 23:15:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59459 invoked by uid 500); 24 Dec 2007 23:15:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59448 invoked by uid 99); 24 Dec 2007 23:15:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Dec 2007 15:15:19 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 24 Dec 2007 23:14:54 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J6wVe-0003i7-65
	for java-user@lucene.apache.org; Mon, 24 Dec 2007 15:14:58 -0800
Message-ID: <14492040.post@talk.nabble.com>
Date: Mon, 24 Dec 2007 15:14:58 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which file in the lucene package is used to manipulate
 results..
In-Reply-To: <14491981.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
References: <14450335.post@talk.nabble.com> <329945.61466.qm@web26014.mail.ukl.yahoo.com> <14491981.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


ignore my previous msg... i got that package....

sumittyagi wrote:
> 
> hi..
> thanks for the help
> following your suggestions ..
> i do not have the package org.apache.lucene.index  , from where can i
> download it to start this project
> 
> markharw00d wrote:
>> 
>> Thanks for the context - much more useful.
>> The challenge here is similar to that posed by offering end-user tagging
>> of content (see here
>> http://www.mail-archive.com/java-user@lucene.apache.org/msg17580.html ).
>> The main difference here being that words are added to docs implicitly by
>> search click-throughs rather than any explicit tagging action.
>> 
>> In both cases the challenge is that the user data around documents is
>> likely to be updated very often while the documents remain relatively
>> static. 
>> I suspect some additional things to think about are:
>> 1) Cancelling out the "human laziness" bias that favours clicking results
>> on page 1. Are clicks on page 2 worth more?
>> 2) Spam clicks - detecting deliberate gaming of your re-ranking
>> algorithm.
>> 3) Lucene doc IDs are not stable - how will you associate query
>> terms/click data with documents and join them at speed?
>> 4) Are individual words or phrases the unit of boost? "Paris" means
>> different things in "Paris Hilton" and "Paris, France".
>> 
>> A simple approach might be to re-index your content with all of the
>> additional search terms from clicks added to the associated document in a
>> "searchClicks" field - the more clicks, the more repetitions of the same
>> search words in the document to help with tf (Term Frequency). This
>> additional content would need to be capped, to avoid huge documents. This
>> has the disadvantage of requiring a re-index though. 
>> Another option to avoid reindexing everything is to wrap IndexReader (See
>> FilterIndexReader) and implement TermEnum/TermDocs for a fake field
>> called "searchClicks". The idea is Lucene looks after the usual, static
>> document content while your implementation goes off to your more volatile
>> storage (e.g. database/parallel index, custom file structure) to retrieve
>> lists of doc ids, term frequencies etc. for this "searchClicks" field.
>> All of the Lucene queries you might want to throw at this e.g.
>> PhraseQueries can then test both the static Lucene fields and your new
>> volatile "click" fields without being aware of this low-level trickery. 
>> 
>> I'm sure there will be other ways of doing this too but this seems like a
>> conceptually clean way of modelling it - just seeing search terms as
>> extensions to the document content.
>> 
>> Cheers
>> Mark
>> 
>> 
>> ----- Original Message ----
>> From: sumittyagi <ping.sumit@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Sunday, 23 December, 2007 5:30:55 AM
>> Subject: Re: Which file in the lucene package is used to manipulate
>> results..
>> 
>> 
>> Actually what i have to do is...
>> 1.) for every query(keyword), among the results obtained, the keyword
>>  will
>> be mapped with the page clicked, along with the no. of clicks for that
>> keyword on that page
>> 2.) next time for the same query(keyword), the mapped pages will be
>>  ranked
>> higher considering the no. of clicks too..
>> 3.) for every new query these steps will be repeated...
>> this was a very high level view , i have made algorithms for these
>>  modules
>> and trying to incorporate with lucene but dont know , on which files i
>>  have
>> to do edition to make it work...
>> please help me regarding this, if you need some more explanation,
>>  please let
>> me know...
>> thanks 
>> Sumit Tyagi
>> 
>> 
>> 
>> 
>> 
>> Erick Erickson wrote:
>>> 
>>> You still haven't explained *why* you want to rerank results. What
>>> is the use-case you're trying to implement? Quite often it's turned
>>> out for me that when I let folks on the list know what the use
>>> case I'm trying to support is, they come up with much more elegant
>>> solutions than I was thinking about.
>>> 
>>> For instance, does the CustomScoreQuery class have any relevance
>>> to your problem?
>>> 
>>> If you're thinking of modifying the core Lucene code for your
>>> special purpose, I'd advise against it unless and until you'd
>>  exhausted
>>> all the other options. It's always a maintenance headache to do this.
>>> 
>>> Best
>>> Erick
>>> 
>>> On Dec 21, 2007 10:09 AM, sumittyagi <ping.sumit@gmail.com> wrote:
>>> 
>>>>
>>>> actually i am writing a module to rerank the results, so i want to
>>  edit
>>>> the
>>>> file which arrange the results and give them ranks,
>>>> or is there any other way i can use my module to rerank the results
>>>>
>>>>
>>>> markharw00d wrote:
>>>> >
>>>> > I think you need to describe your "factors" in more detail.
>>  Exactly
>>>> what
>>>> > do you want to achieve for your users?
>>>> > We could be talking about any number of Lucene functions here.
>>>> >
>>>> > ----- Original Message ----
>>>> > From: sumittyagi <ping.sumit@gmail.com>
>>>> > To: java-user@lucene.apache.org
>>>> > Sent: Friday, 21 December, 2007 4:51:09 AM
>>>> > Subject: Which file in the lucene package is used to manipulate
>>>> results..
>>>> >
>>>> >
>>>> > hi, i am using lucene for the very first time and want to
>>  manipulate
>>>> >  the
>>>> > results, by adding some more factors to it, which file should i
>>  edit to
>>>> > manipulate the search results....
>>>> >
>>>> > Thanks
>>>> > Sumit Tyagi
>>>> > --
>>>> > View this message in context:
>>>> >
>>>> >
>>>>
>> 
>> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14450335.html
>>>> > Sent from the Lucene - Java Users mailing list archive at
>>  Nabble.com.
>>>> >
>>>> >
>>>> >
>>>> >
>>>> >
>>>> >       __________________________________________________________
>>>> > Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
>>>> >
>>>> >
>>>> >
>>  ---------------------------------------------------------------------
>>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> >
>>>> >
>>>> >
>>>>
>>>> --
>>>> View this message in context:
>>>>
>> 
>> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14456938.html
>>>> Sent from the Lucene - Java Users mailing list archive at
>>  Nabble.com.
>>>>
>>>>
>>>>
>>  ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> 
>>> 
>> 
>> -- 
>> View this message in context:
>> 
>> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14476062.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
>> 
>> 
>> 
>>       __________________________________________________________
>> Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14492040.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 25 21:03:17 2007
Return-Path: <java-user-return-31641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27953 invoked from network); 25 Dec 2007 21:03:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2007 21:03:17 -0000
Received: (qmail 27608 invoked by uid 500); 25 Dec 2007 21:02:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27585 invoked by uid 500); 25 Dec 2007 21:02:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27574 invoked by uid 99); 25 Dec 2007 21:02:59 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Dec 2007 13:02:59 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Dec 2007 21:02:35 +0000
Received: by ug-out-1314.google.com with SMTP id u40so1352998ugc.29
        for <java-user@lucene.apache.org>; Tue, 25 Dec 2007 13:02:38 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=uZzi1Ff0RjaduXCLabfDHGoelKmyXJWDIMUUyiiViyU=;
        b=j6VenoqZcK3OVUlCItYiYUVKyiaYaIWR7uWsxUrLkfhl0y6U8vPDhH0KeK+e+cwoj0QFuhw3uxQGPlzBjFgQN/UL83qjaXpKFrn6TDPpZn54pT8VtVYgXqvloKyjlLmmj+47zcUgGNbL2KtsF5l1CqJL7rO+lePaoL07fowfi+Q=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=dd7nacAUfsMrb3ZRa3J4gTFzvVKCVeWoL4SW+jALA1HOgF0PIMZ4fsNyD0eykGgOy02rhdifR8dvjtpoZI21RkuVBhQ9o2r/iguxyaHhFQh4SgG6FCy1hHGs4N6Shm/W/sbOdcOXcKqpWbLABt2dh3v90m5CSWL445Bq5H9DFO8=
Received: by 10.66.248.5 with SMTP id v5mr4656635ugh.17.1198616558377;
        Tue, 25 Dec 2007 13:02:38 -0800 (PST)
Received: from ?10.0.43.124? ( [202.125.143.66])
        by mx.google.com with ESMTPS id h1sm8021847ugf.11.2007.12.25.13.02.32
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Tue, 25 Dec 2007 13:02:36 -0800 (PST)
Message-ID: <47716FD6.9020604@gmail.com>
Date: Wed, 26 Dec 2007 02:02:14 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: problem in indexing documents
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

hello,

I am try to make an index of 191 documents stored in 191 text files. I 
developed a program, which works well with files containing single line, 
but files with multiple lines posing a problem.So i added while loop to 
completely extract data from each document. But it has some logical 
error. Well the given code is an right approach to my problem? Kindly 
give some guidelines. 




StringBuffer sb = new StringBuffer();

Analyzer analyzer = new StandardAnalyzer();
            boolean createFlag = true;
        IndexWriter writer =
                    new IndexWriter(indexDir, analyzer, createFlag);

        for (int i=1;i<=191;i++)  {

            Reader file = new InputStreamReader(new 
FileInputStream("corpus\\doc" + i + ".txt"), "UTF-8");
    

            BufferedReader buff = new BufferedReader(file);

            while( (line = buff.readLine()) != null) {
                        sb.append(line);
                }

                Document document  = new Document();
            document.add(new Field("contents",sb.toString(), 
Field.Store.NO, Field.Index.TOKENIZED));
            writer.addDocument(document);
        
            buff.close();

        }


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Dec 25 22:37:53 2007
Return-Path: <java-user-return-31642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38336 invoked from network); 25 Dec 2007 22:37:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 25 Dec 2007 22:37:53 -0000
Received: (qmail 48577 invoked by uid 500); 25 Dec 2007 22:37:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48545 invoked by uid 500); 25 Dec 2007 22:37:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48534 invoked by uid 99); 25 Dec 2007 22:37:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Dec 2007 14:37:35 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.191 as permitted sender)
Received: from [209.85.128.191] (HELO fk-out-0910.google.com) (209.85.128.191)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Dec 2007 22:37:13 +0000
Received: by fk-out-0910.google.com with SMTP id z23so2484906fkz.5
        for <java-user@lucene.apache.org>; Tue, 25 Dec 2007 14:37:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=3F8boa12LFPO/1fJunlYKAGA2JayZNBSKS363w8s34c=;
        b=ltNt+5MiaZ2oxMSLVTZYyeGvMfoDqMjEx7MSbucpFu9jXFp6qsEg72ZMf9kqRN5q1Qe63Eh39OsUsDSs1nKz+jsgVWnOLBOLyqxpXvSCfqo6KqV42inUpnTUcPo5YoJfU4Oyo5B5vccO1VuoQ3xY5Q7f5J+CLrjVB7oxM1e4Kb0=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=RT7LXFH8TV07HXhwGB/qzm1vvTwkC/RGrYHyPPt2F59kw8dGLKjxQvusVMQ0E0IswCZHNsQwvrj8wsgnWddfVYoVkYOtCR3ee31K2LSY0RtYhhBm6ZlfJ/MQDtWxL9OOZF5znvPeXSU3vuhFYLn2abiiyb6BXrUjR0eyvVciaf8=
Received: by 10.82.145.7 with SMTP id s7mr11180928bud.6.1198622235928;
        Tue, 25 Dec 2007 14:37:15 -0800 (PST)
Received: by 10.82.191.6 with HTTP; Tue, 25 Dec 2007 14:37:15 -0800 (PST)
Message-ID: <359a92830712251437t212e427bvaf991bdcca2e2f6d@mail.gmail.com>
Date: Tue, 25 Dec 2007 17:37:15 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: problem in indexing documents
In-Reply-To: <47716FD6.9020604@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_6587_13653629.1198622235926"
References: <47716FD6.9020604@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_6587_13653629.1198622235926
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

It's more helpful to indicate what error you're receiving or
what your perceived problem is. Without that, we can only
guess...

But one thing wrong is that you keep appending to the
same StringBuffer forever, so your first writer.AddDocument
adds  document 1. Your second adds the text of BOTH doc
1 and doc 2. Your third AddDocument adds the contents of
docs 1, 2, 3. Etc.....

Just move the declaration for sb inside your for loop....

Note two things:
1> you can get the same effect by doing a
    document.add() for *each* line. That is,
    instead of the sb.append line, just do a
    document.add() for line. Then do your
    writer.addDocument outside the while loop as
    you do now.
2> there is a built-in default maximum of 10,000 terms that get
    indexed. You can change this, see SetMaxFieldLength on
    IndexWriter.

Best
Erick

On Dec 25, 2007 4:02 PM, Liaqat Ali <liaqatalimian@gmail.com> wrote:

> hello,
>
> I am try to make an index of 191 documents stored in 191 text files. I
> developed a program, which works well with files containing single line,
> but files with multiple lines posing a problem.So i added while loop to
> completely extract data from each document. But it has some logical
> error. Well the given code is an right approach to my problem? Kindly
> give some guidelines.
>
>
>
>
> StringBuffer sb = new StringBuffer();
>
> Analyzer analyzer = new StandardAnalyzer();
>            boolean createFlag = true;
>        IndexWriter writer =
>                    new IndexWriter(indexDir, analyzer, createFlag);
>
>        for (int i=1;i<=191;i++)  {
>
>            Reader file = new InputStreamReader(new
> FileInputStream("corpus\\doc" + i + ".txt"), "UTF-8");
>
>
>            BufferedReader buff = new BufferedReader(file);
>
>            while( (line = buff.readLine()) != null) {
>                        sb.append(line);
>                }
>
>                Document document  = new Document();
>            document.add(new Field("contents",sb.toString(),
> Field.Store.NO, Field.Index.TOKENIZED));
>            writer.addDocument(document);
>
>            buff.close();
>
>        }
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_6587_13653629.1198622235926--

From java-user-return-31643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 06:14:11 2007
Return-Path: <java-user-return-31643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63623 invoked from network); 26 Dec 2007 06:14:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 06:14:11 -0000
Received: (qmail 35009 invoked by uid 500); 26 Dec 2007 06:13:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34976 invoked by uid 500); 26 Dec 2007 06:13:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34965 invoked by uid 99); 26 Dec 2007 06:13:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 25 Dec 2007 22:13:54 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.154 as permitted sender)
Received: from [72.14.220.154] (HELO fg-out-1718.google.com) (72.14.220.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 06:13:31 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1417192fga.27
        for <java-user@lucene.apache.org>; Tue, 25 Dec 2007 22:13:34 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=IRhRe0PcNW2glG7Dt7+ErZ7uBtv7R83NRJ14VksjOvQ=;
        b=myKYDv4VZBPEP1zpDnptIVlRG7QauK4VE94n5l+zjYbYwWnINVctq2vHfmdRrc6sdax2UeSDKlnC+P/7G3TC27OzhLLGEPs+uhkrrdGvdeBgy3Te0b2qik2rR14GZnIeqwp8mWJm+QhZCaNKn4AHkWM+6M7yEWrAndVp5dlShJ4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=mlhx6oeBDdaVOW2LQ5629szDDho4KVYBOAHh7QbrwkYHnLLvlUwdWFAMF6l2NwlABp/Ojcq29rWbQZhKmIXhyyrv+wZGzDpX95OpoG66VIo5zfWmOsgBOOG6K+nVg0YcZllcNV+m+wTnRVq3UzIQz3uHFp9oUh2txjtjkH1luzA=
Received: by 10.86.71.1 with SMTP id t1mr6358134fga.33.1198649613532;
        Tue, 25 Dec 2007 22:13:33 -0800 (PST)
Received: by 10.86.50.1 with HTTP; Tue, 25 Dec 2007 22:13:33 -0800 (PST)
Message-ID: <e05f0fd10712252213n65633977he30a01b260c51cbd@mail.gmail.com>
Date: Wed, 26 Dec 2007 08:13:33 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: problem in indexing documents
In-Reply-To: <359a92830712251437t212e427bvaf991bdcca2e2f6d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8584_13277539.1198649613517"
References: <47716FD6.9020604@gmail.com>
	 <359a92830712251437t212e427bvaf991bdcca2e2f6d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8584_13277539.1198649613517
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

>
> >            document.add(new Field("contents",sb.toString(),
> > Field.Store.NO, Field.Index.TOKENIZED));
>

In addition, for tokenized but not stored like here, the Field()
constructor that takes a Reader param can be handy here.

Regards, Doron

------=_Part_8584_13277539.1198649613517--

From java-user-return-31644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 10:36:50 2007
Return-Path: <java-user-return-31644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57837 invoked from network); 26 Dec 2007 10:36:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 10:36:50 -0000
Received: (qmail 49763 invoked by uid 500); 26 Dec 2007 10:36:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49731 invoked by uid 500); 26 Dec 2007 10:36:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49720 invoked by uid 99); 26 Dec 2007 10:36:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 02:36:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 66.249.92.175 as permitted sender)
Received: from [66.249.92.175] (HELO ug-out-1314.google.com) (66.249.92.175)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 10:36:07 +0000
Received: by ug-out-1314.google.com with SMTP id u40so1441529ugc.29
        for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 02:36:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=Z08qgu4MQCjid8cCjAr1MbR2tJWW/32ilKwKniEpINI=;
        b=rcka68m1pBYCoigdq02WHuSRm60V5ZI/bvJl7kVECEBdVZKs7mrF+A4ocIDgC8GaeKzDVUc7ZGd5V5D4KuO79swO0fKKy+rNb0P6DU6tm+Pk/adEuA9cY7au6El9pa5G/kA2sQPw2yVhVxjHI1n9J3wPLI3q+9BOgZNjTMnHEUQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=fyWImI8y3j3phBPZ/92MWuSLFVhsmIh4D2zRytrady/D3VvSVtNoehI3l2C6aaEyAQIySCmSEec9L0ElUPFtMvlTOLTckGaokRUJBOtEQw3LRnB3m0M+3f8hu67WtmZX4bSxJYUwPJUKhWvPsjgSK3QuCaOXriNH5LsAkI+X3Sk=
Received: by 10.66.239.2 with SMTP id m2mr5240528ugh.26.1198665370369;
        Wed, 26 Dec 2007 02:36:10 -0800 (PST)
Received: from ?10.0.57.11? ( [202.125.143.67])
        by mx.google.com with ESMTPS id u7sm8478929uge.35.2007.12.26.02.36.06
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 26 Dec 2007 02:36:09 -0800 (PST)
Message-ID: <47722E88.6020804@gmail.com>
Date: Wed, 26 Dec 2007 15:35:52 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Modifying StopAnalyzer
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org


Hi, Erick

Thanks for your suggestion, putting the declaration of StringBuffer 
variable sb inside the for loop is working well. I want to ask another 
question, can we modify the StopyAnalyzer to insert Stop Words of 
another language, instead of English, like Urdu given below:




public static final String[] URDU_STOP_WORDS = { "", "", "", "" };



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 11:00:23 2007
Return-Path: <java-user-return-31645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66543 invoked from network); 26 Dec 2007 11:00:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 11:00:23 -0000
Received: (qmail 59624 invoked by uid 500); 26 Dec 2007 11:00:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59583 invoked by uid 500); 26 Dec 2007 11:00:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59572 invoked by uid 99); 26 Dec 2007 11:00:06 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 03:00:06 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.156 as permitted sender)
Received: from [72.14.220.156] (HELO fg-out-1718.google.com) (72.14.220.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 10:59:44 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1474679fga.27
        for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 02:59:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=M7uv1VxbaNj4DvJYTmg4XeHI7W4rEgdMzREdHVa2few=;
        b=Kv1ikAH0wBtK//BJEeuzmRThQGcqd/Zrv7g93IA1hcI3D8XvHvmWGBzUvb0JTv5PvGSS+yjdodppc965dFVBKJBFL5W6NEw2WKYTYoZzCD6p4lgCpMUy+LZlIeSTc+4YH2Nbhu5HhDcteoEhwLaAyreLpstXsH4ra+xlh4m+nrY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=kXb76b7x7iiqLQraxjR+9znD/VrkKy1IKkOr9JBcFfSaHXyaj7bwOkm3V5AwRDv+G+AfQrHvKy3rG5UvXjyk1ecCeenka8CfDrORFwMpEzoe2AR1UmwO8ll6P2W+pxOEkuFMk+Piic4ntkrIPvI+6uTIZ+5w3omiB1KMKoEhIKw=
Received: by 10.86.100.7 with SMTP id x7mr6560537fgb.78.1198666787351;
        Wed, 26 Dec 2007 02:59:47 -0800 (PST)
Received: by 10.86.50.1 with HTTP; Wed, 26 Dec 2007 02:59:47 -0800 (PST)
Message-ID: <e05f0fd10712260259r5d62b338r9689016ba25fd461@mail.gmail.com>
Date: Wed, 26 Dec 2007 12:59:47 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Modifying StopAnalyzer
In-Reply-To: <47722E88.6020804@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_8925_4883281.1198666787353"
References: <47722E88.6020804@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_8925_4883281.1198666787353
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

Pgo+ICBjYW4gd2UgbW9kaWZ5IHRoZSBTdG9weUFuYWx5emVyIHRvIGluc2VydCBTdG9wIFdvcmRz
IG9mCj4gYW5vdGhlciBsYW5ndWFnZSwgaW5zdGVhZCBvZiBFbmdsaXNoLCBsaWtlIFVyZHUgZ2l2
ZW4gYmVsb3c6Cj4gcHVibGljIHN0YXRpYyBmaW5hbCBTdHJpbmdbXSBVUkRVX1NUT1BfV09SRFMg
PSB7ICLZvtixIiwgItqp2KciLCAi2qnbjCIsICLaqdmIIiB9Owo+CgoibmV3IFN0YW5kYXJkQW5h
bHl6ZXIoVVJEVV9TVE9QX1dPUkRTKSIgc2hvdWxkIHdvcmsuCgpSZWdhcmRzLApEb3Jvbgo=
------=_Part_8925_4883281.1198666787353--

From java-user-return-31646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 13:14:04 2007
Return-Path: <java-user-return-31646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87088 invoked from network); 26 Dec 2007 13:14:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 13:14:04 -0000
Received: (qmail 18179 invoked by uid 500); 26 Dec 2007 13:13:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18142 invoked by uid 500); 26 Dec 2007 13:13:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18131 invoked by uid 99); 26 Dec 2007 13:13:47 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 05:13:47 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.5] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.5)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 13:13:33 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 06B313B9F6
	for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 05:13:24 -0800 (PST)
Message-Id: <C9CE3671-93E4-4BB6-8AB3-3C022BCD2270@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <df27a55b0712221810r23eb2086lf644303e3b266ce1@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Index lucene database details.
Date: Wed, 26 Dec 2007 08:13:23 -0500
References: <df27a55b0712221810r23eb2086lf644303e3b266ce1@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

I would start at the Lucene Java home page (http://lucene.apache.org/java 
) and dig in from there.  There are a number of good docs on Scoring  
and the IR model used (Boolean plus Vector.)  From there, I would dig  
into the javadocs and whip up some example code that indexes a set of  
tokens and documents with a controlled vocabulary.  From there, you  
can dig into the source itself, especially the new DocumentsWriter  
class.  And, of course, along the way, please feel free to submit  
documentation patches!

Also, this mailing list and the java-dev mailing list have a wealth of  
information about the internals of Lucene, so please dig through the  
archives and ask questions here as well.

-Grant

On Dec 22, 2007, at 9:10 PM, Berlin Brown wrote:

> Do you guys have article links or other documents to describe the
> lucene database.  Eg.  what is it composed of?
>
> -- 
> Berlin Brown
> http://botspiritcompany.com/botlist/spring/help/about.html
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 13:17:11 2007
Return-Path: <java-user-return-31647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87476 invoked from network); 26 Dec 2007 13:17:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 13:17:11 -0000
Received: (qmail 20119 invoked by uid 500); 26 Dec 2007 13:16:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20078 invoked by uid 500); 26 Dec 2007 13:16:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20067 invoked by uid 99); 26 Dec 2007 13:16:54 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 05:16:54 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 13:16:29 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 15CFD2122F
	for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 05:16:32 -0800 (PST)
Message-Id: <538D2465-2703-4056-B644-562EEEAE0B9D@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <72d748c20712232003j439b069dk2cf75c956c71042f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: optimize Index problem
Date: Wed, 26 Dec 2007 08:16:32 -0500
References: <20071222130505.26173.qmail@secure3.apollohosting.com> <72d748c20712232003j439b069dk2cf75c956c71042f@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Great, I think.  Except now I am really interested about the exception  
and what settings you had for heap size, Lucene version, etc.



On Dec 23, 2007, at 11:03 PM, Zhou Qi wrote:

> Hi , Grant
>
>  After I adjust the mergefactor of indexwriter from 1000 to 100, it  
> worked.
> Thank you.
>
>
> 22 Dec 2007 07:05:05 -0600, tom@lux.org.uk <tom@lux.org.uk>:
>>
>> AUTOMATIC REPLY
>>
>> LUX is closed until 7th January 2008
>>
>> most information about LUX is available at www.lux.org.uk
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 14:50:26 2007
Return-Path: <java-user-return-31648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5515 invoked from network); 26 Dec 2007 14:50:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 14:50:25 -0000
Received: (qmail 56815 invoked by uid 500); 26 Dec 2007 14:50:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56776 invoked by uid 500); 26 Dec 2007 14:50:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56765 invoked by uid 99); 26 Dec 2007 14:50:09 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 06:50:09 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.175.156 as permitted sender)
Received: from [65.55.175.156] (HELO blu139-omc1-s16.blu139.hotmail.com) (65.55.175.156)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 14:49:44 +0000
Received: from BLU119-W24 ([65.55.162.181]) by blu139-omc1-s16.blu139.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Wed, 26 Dec 2007 06:49:47 -0800
Message-ID: <BLU119-W24D17F1D898B3806289705B95B0@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_c4349b5b-0745-4f36-b399-8bd65a5b3ad3_"
X-Originating-IP: [71.10.235.86]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Pagination ...
Date: Wed, 26 Dec 2007 09:49:47 -0500
Importance: Normal
In-Reply-To: <BLU119-W27708447588B9DD2485901B95F0@phx.gbl>
References: <BLU119-W27708447588B9DD2485901B95F0@phx.gbl>
MIME-Version: 1.0
X-OriginalArrivalTime: 26 Dec 2007 14:49:47.0156 (UTC) FILETIME=[8F35C540:01C847CE]
X-Virus-Checked: Checked by ClamAV on apache.org

--_c4349b5b-0745-4f36-b399-8bd65a5b3ad3_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Any advice on this? Thanks.

> From: dragon-fly999@hotmail.com
> To: java-user@lucene.apache.org
> Subject: Pagination ...
> Date: Sat, 22 Dec 2007 10:19:30 -0500
>=20
>=20
> Hi,
>=20
> What is the most efficient way to do pagination in Lucene? I have always =
done the following because this "flavor" of the search call allows me to sp=
ecify the top N hits (e.g. 1000) and a Sort object:
>=20
>     TopFieldDocs topFieldDocs =3D searcher.search(query, null, 1000, SORT=
_BY_DATE);
>=20
> Is it the best way? Thank you.
>=20
> _________________________________________________________________
> Don't get caught with egg on your face. Play Chicktionary!
> http://club.live.com/chicktionary.aspx?icid=3Dchick_wlhmtextlink1_dec

_________________________________________________________________
Get the power of Windows + Web with the new Windows Live.
http://www.windowslive.com?ocid=3DTXT_TAGHM_Wave2_powerofwindows_122007=

--_c4349b5b-0745-4f36-b399-8bd65a5b3ad3_--

From java-user-return-31649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 17:13:37 2007
Return-Path: <java-user-return-31649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35766 invoked from network); 26 Dec 2007 17:13:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 17:13:37 -0000
Received: (qmail 30402 invoked by uid 500); 26 Dec 2007 17:13:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30369 invoked by uid 500); 26 Dec 2007 17:13:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30358 invoked by uid 99); 26 Dec 2007 17:13:20 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 09:13:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhouqi.jackson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 17:12:56 +0000
Received: by fk-out-0910.google.com with SMTP id z23so2866676fkz.5
        for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 09:12:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=WKhlm2z8f12nSImWl3coyOoQjw45ncU8mlxpxecim3o=;
        b=v4e2+E84LKB9gf3SU1rSqFDNPzEpz0ZdlQE47EpExfGi0dg2niLKrw9y5/82KvVjvXVel99Y/1ZWkRPF84FGtC70uQVGw0imz5KwOsH6lszRJ3X32UwAvnwHCq5LvLJRR7qxadXlCr7Lp69Tuy2z4hLcQ/OdsNt1jif7n2isZoc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KLGC6UaPbr9EM4Xbqm0PJH2MM4fYsbrH4WU8pwPJ56wG1I7wfmkeJAvNo0kqUohARN1EuS3FhlsarwP/2FBcSubQM2i1e7JT56kqa7eLOzmxZSSjIvPSBlrOi3Hw6RZvAvkQfKCRU2uwDL4wOMq/BA2P1sIW6WBNAWR/LvbT3lI=
Received: by 10.82.116.15 with SMTP id o15mr12812814buc.3.1198689179150;
        Wed, 26 Dec 2007 09:12:59 -0800 (PST)
Received: by 10.82.151.11 with HTTP; Wed, 26 Dec 2007 09:12:59 -0800 (PST)
Message-ID: <72d748c20712260912v5841764bp29bf37c73d69db69@mail.gmail.com>
Date: Thu, 27 Dec 2007 01:12:59 +0800
From: "Zhou Qi" <zhouqi.jackson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Pagination ...
In-Reply-To: <BLU119-W24D17F1D898B3806289705B95B0@phx.gbl>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9079_29901674.1198689179120"
References: <BLU119-W27708447588B9DD2485901B95F0@phx.gbl>
	 <BLU119-W24D17F1D898B3806289705B95B0@phx.gbl>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9079_29901674.1198689179120
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Using the search function for pagination will carry out unnecessary index
search when you are going previous or next. Generally, most of the
information need (e.g 80%) can be satisfied by the first 100 documents
(20%). In lucene, the returing documents is set to 100 for the sake of
speed.

I am not quite sure my way of pagination is best: but it works fine under
test preasure: Just keep the first search result in cache and fetch the
snippet when the document is presented in current page.

2007/12/26, Dragon Fly <dragon-fly999@hotmail.com>:
>
>
> Any advice on this? Thanks.
>
> > From: dragon-fly999@hotmail.com
> > To: java-user@lucene.apache.org
> > Subject: Pagination ...
> > Date: Sat, 22 Dec 2007 10:19:30 -0500
> >
> >
> > Hi,
> >
> > What is the most efficient way to do pagination in Lucene? I have always
> done the following because this "flavor" of the search call allows me to
> specify the top N hits ( e.g. 1000) and a Sort object:
> >
> >     TopFieldDocs topFieldDocs = searcher.search(query, null, 1000,
> SORT_BY_DATE);
> >
> > Is it the best way? Thank you.
> >
> > _________________________________________________________________
> > Don't get caught with egg on your face. Play Chicktionary!
> > http://club.live.com/chicktionary.aspx?icid=chick_wlhmtextlink1_dec
>
> _________________________________________________________________
> Get the power of Windows + Web with the new Windows Live.
> http://www.windowslive.com?ocid=TXT_TAGHM_Wave2_powerofwindows_122007

------=_Part_9079_29901674.1198689179120--

From java-user-return-31650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 17:18:57 2007
Return-Path: <java-user-return-31650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37025 invoked from network); 26 Dec 2007 17:18:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 17:18:57 -0000
Received: (qmail 35654 invoked by uid 500); 26 Dec 2007 17:18:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35612 invoked by uid 500); 26 Dec 2007 17:18:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35601 invoked by uid 99); 26 Dec 2007 17:18:37 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 09:18:37 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhouqi.jackson@gmail.com designates 72.14.214.234 as permitted sender)
Received: from [72.14.214.234] (HELO hu-out-0506.google.com) (72.14.214.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 17:18:11 +0000
Received: by hu-out-0506.google.com with SMTP id 27so1943526hub.15
        for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 09:18:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Ya69DptoveThu7yMQMKGuf5/vcul00oyoUGXcoL0NTM=;
        b=O7surTg8qInDrOtOhnAoHPNAlf0HCgsXixJ2PZue0gAUuZijkry8nsdx6YSmojYyPn+0LJMG27U4oNnWCvaNg7F9DVbkjcRNCsBlYFHSBpWDzaTqLwgRe8ZZBAKoe4/fV6i/kQ0MJm7Z7yds5P5WOqcNenKwJ4g+wO4cdCYkcCE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=L7koyCLY65e0pGgT6I4bOTshRCzALBUIZL+zY43OsFyeDdWyiaeA6WPELHb2Fi7WKdBvxvnJF0KLeHYQnlpEFm+oG3wafkMP49whoUexDwA/DHgcHidfyYcT3wCqyqxt9QK2+g61Afg4CoQoWM4/cBl9Ni/HimzAudO5Ww5jDok=
Received: by 10.82.112.3 with SMTP id k3mr12813858buc.31.1198689494536;
        Wed, 26 Dec 2007 09:18:14 -0800 (PST)
Received: by 10.82.151.11 with HTTP; Wed, 26 Dec 2007 09:18:14 -0800 (PST)
Message-ID: <72d748c20712260918m300ce768jae290de72b2b0204@mail.gmail.com>
Date: Thu, 27 Dec 2007 01:18:14 +0800
From: "Zhou Qi" <zhouqi.jackson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Index lucene database details.
In-Reply-To: <C9CE3671-93E4-4BB6-8AB3-3C022BCD2270@apache.org>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_9106_19266173.1198689494533"
References: <df27a55b0712221810r23eb2086lf644303e3b266ce1@mail.gmail.com>
	 <C9CE3671-93E4-4BB6-8AB3-3C022BCD2270@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_9106_19266173.1198689494533
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi Grant,

The exception is throw from java native method."Failed to merge indexes,
java.lang.OutOfMemoryError: Java heap space ". ( I have set the -Xmx1024m in
JVM.)
I guess it is similar as the problem appeared in previous thread before (
http://www.nabble.com/Index-merge-and-java-heap-space-tt505274.html#a505274).
But I don't know the detail reason. Anyone has answer?

2007/12/26, Grant Ingersoll <gsingers@apache.org>:
>
> I would start at the Lucene Java home page (http://lucene.apache.org/java
> ) and dig in from there.  There are a number of good docs on Scoring
> and the IR model used (Boolean plus Vector.)  From there, I would dig
> into the javadocs and whip up some example code that indexes a set of
> tokens and documents with a controlled vocabulary.  From there, you
> can dig into the source itself, especially the new DocumentsWriter
> class.  And, of course, along the way, please feel free to submit
> documentation patches!
>
> Also, this mailing list and the java-dev mailing list have a wealth of
> information about the internals of Lucene, so please dig through the
> archives and ask questions here as well.
>
> -Grant
>
> On Dec 22, 2007, at 9:10 PM, Berlin Brown wrote:
>
> > Do you guys have article links or other documents to describe the
> > lucene database.  Eg.  what is it composed of?
> >
> > --
> > Berlin Brown
> > http://botspiritcompany.com/botlist/spring/help/about.html
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_9106_19266173.1198689494533--

From java-user-return-31651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 18:07:41 2007
Return-Path: <java-user-return-31651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42312 invoked from network); 26 Dec 2007 18:07:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 18:07:41 -0000
Received: (qmail 55681 invoked by uid 500); 26 Dec 2007 18:07:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55651 invoked by uid 500); 26 Dec 2007 18:07:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55640 invoked by uid 99); 26 Dec 2007 18:07:25 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 10:07:25 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of richmondmike@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 18:07:01 +0000
Received: by wa-out-1112.google.com with SMTP id j40so4535477wah.11
        for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 10:07:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        bh=QrxaxXWdyW4eattyGMZpPsrEXskcIaX2+H6DUPrXeN0=;
        b=H0YZgQfuhi3zb9wsyxLbxyOwjdW+SRmhOQn+L2hLoljE0Em+G6ACC5V0hUx+1QY9cTUKfJZghjBucv80OWxGhUitOcqwsIXsiMOLFgiUq5e3KaViRDugN0TD9EyDvsrgoEZ2a/bx7kIrH3KaMkSRBtkjG98TXB9ViJjj11TlCI4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:cc:in-reply-to:mime-version:content-type:references;
        b=NrNDWDCJ+PGnOpyX2hP0LAXB7kmpiHY6i3xi5ZX74w+WQ1uLRd430P6ICGpDWwEM5SeTJSE/O4b1AJ5rSyAvQ2nqfKspqkR123ioSF2zoITXoz+QZQ7ESmNHowsSk1HeGRn/qr6cMHhlMxDZl+r8tGLNZYNQfxRHaUoU2GswE9k=
Received: by 10.114.121.1 with SMTP id t1mr129181wac.67.1198692423951;
        Wed, 26 Dec 2007 10:07:03 -0800 (PST)
Received: by 10.114.95.2 with HTTP; Wed, 26 Dec 2007 10:07:03 -0800 (PST)
Message-ID: <931ca11b0712261007k255d561kbef79725b71991f6@mail.gmail.com>
Date: Wed, 26 Dec 2007 13:07:03 -0500
From: "Mike Richmond" <richmondmike@gmail.com>
To: dragon-fly999@hotmail.com
Subject: Re: Pagination ...
Cc: java-user@lucene.apache.org
In-Reply-To: <72d748c20712260912v5841764bp29bf37c73d69db69@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14440_3826480.1198692423947"
References: <BLU119-W27708447588B9DD2485901B95F0@phx.gbl>
	 <BLU119-W24D17F1D898B3806289705B95B0@phx.gbl>
	 <72d748c20712260912v5841764bp29bf37c73d69db69@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14440_3826480.1198692423947
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

You might want to take a look at Solr (http://lucene.apache.org/solr/).  You
could either use Solr directly, or see how they implement paging.


--Mike


On Dec 26, 2007 12:12 PM, Zhou Qi <zhouqi.jackson@gmail.com> wrote:

> Using the search function for pagination will carry out unnecessary index
> search when you are going previous or next. Generally, most of the
> information need (e.g 80%) can be satisfied by the first 100 documents
> (20%). In lucene, the returing documents is set to 100 for the sake of
> speed.
>
> I am not quite sure my way of pagination is best: but it works fine under
> test preasure: Just keep the first search result in cache and fetch the
> snippet when the document is presented in current page.
>
> 2007/12/26, Dragon Fly <dragon-fly999@hotmail.com>:
> >
> >
> > Any advice on this? Thanks.
> >
> > > From: dragon-fly999@hotmail.com
> > > To: java-user@lucene.apache.org
> > > Subject: Pagination ...
> > > Date: Sat, 22 Dec 2007 10:19:30 -0500
> > >
> > >
> > > Hi,
> > >
> > > What is the most efficient way to do pagination in Lucene? I have
> always
> > done the following because this "flavor" of the search call allows me to
> > specify the top N hits ( e.g. 1000) and a Sort object:
> > >
> > >     TopFieldDocs topFieldDocs = searcher.search(query, null, 1000,
> > SORT_BY_DATE);
> > >
> > > Is it the best way? Thank you.
> > >
> > > _________________________________________________________________
> > > Don't get caught with egg on your face. Play Chicktionary!
> > > http://club.live.com/chicktionary.aspx?icid=chick_wlhmtextlink1_dec
> >
> > _________________________________________________________________
> > Get the power of Windows + Web with the new Windows Live.
> > http://www.windowslive.com?ocid=TXT_TAGHM_Wave2_powerofwindows_122007
>

------=_Part_14440_3826480.1198692423947--

From java-user-return-31652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 19:24:33 2007
Return-Path: <java-user-return-31652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64094 invoked from network); 26 Dec 2007 19:24:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 19:24:33 -0000
Received: (qmail 21751 invoked by uid 500); 26 Dec 2007 19:24:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21727 invoked by uid 500); 26 Dec 2007 19:24:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21716 invoked by uid 99); 26 Dec 2007 19:24:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 11:24:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of jayallenhill@gmail.com designates 209.85.146.179 as permitted sender)
Received: from [209.85.146.179] (HELO wa-out-1112.google.com) (209.85.146.179)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 19:23:53 +0000
Received: by wa-out-1112.google.com with SMTP id j40so4579640wah.11
        for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 11:23:57 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=UKWR0M2gp50RSBfvIRC5AXZQ6Z1JWV5GtNUZKYkagD4=;
        b=vy5RX3qoiHw7Ya0+7oL32LNHzVHobDKCSVGrGNZAzSAwh6zGp4RbwBhRWRI21btXv4WzpUt8z+dSximPhFL+DZkzSZgJIrTDA+NsheaB76znwIUvC8iOO4fANW6eEKjCQCQKeO/3o7HDNzKO3kMFg2Y4pkpt7yd/qzPKgEy9lnY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=poY2sczCWwUywmG3AMJ3ujThm62fMqi1rjBR83LUt/rMSv1/f+CcWYASu0O4rOkuP9nBSY0vgGRatxTeYmB7jhN3lZ/yxezASFK+GZPHiWHGXJlpIHNsSyH1b9CbEmLyj5K4j7/c1qpmV6lfKDfdAR81rg+jqL3ayo4mqxI3SiM=
Received: by 10.114.194.1 with SMTP id r1mr3802893waf.40.1198697036956;
        Wed, 26 Dec 2007 11:23:56 -0800 (PST)
Received: by 10.114.132.12 with HTTP; Wed, 26 Dec 2007 11:23:56 -0800 (PST)
Message-ID: <d0e6561a0712261123p3a7d4646l619fb5eeba83b8cb@mail.gmail.com>
Date: Wed, 26 Dec 2007 11:23:56 -0800
From: "Jay Hill" <jayallenhill@gmail.com>
To: java-user@lucene.apache.org
Subject: Analyzer choices for indexing and searching multiple languages
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_14115_18794668.1198697036952"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_14115_18794668.1198697036952
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I'm working on a project where we will be searching across several languages
with a single query. There will be different categories which will include
different groups of languages to search (i.e. category "a": English, French,
Spanish; category "b": Spanish, Portugese, Itailian, etc) Originally I began
indexing each language using a language-specific Analyzer, but I'm not sure
to handle the QueryParser at search time, not sure which Analyzer to pass to
it.

Does anyone have any experience with indexing all the languages using the
StandardAnalyzer? Right now we only have European languages to index, so I'm
wondering if anyone has had any experience using the StandardAnalyzer to
index European languages, and then using QueryParser with the
StandardAnalyzer at search time.

Or, would it be better to analyze each language at index time using a
language-specific Analyzer, and then still use the QueryParser with the
StandardAnalyzer at search time. I've considered building a BooleanQuery of
QueryParsers with each QueryParser built with a language-specific Analyzer,
but that seems like it would be bound to be very slow.

Any opinions or thoughts appreciated.

-Jay

------=_Part_14115_18794668.1198697036952--

From java-user-return-31653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 19:37:32 2007
Return-Path: <java-user-return-31653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70279 invoked from network); 26 Dec 2007 19:37:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 19:37:31 -0000
Received: (qmail 26019 invoked by uid 500); 26 Dec 2007 19:37:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25978 invoked by uid 500); 26 Dec 2007 19:37:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25967 invoked by uid 99); 26 Dec 2007 19:37:15 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 11:37:15 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 64.233.166.180 as permitted sender)
Received: from [64.233.166.180] (HELO py-out-1112.google.com) (64.233.166.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 19:36:52 +0000
Received: by py-out-1112.google.com with SMTP id d32so8606610pye.12
        for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 11:36:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=pw+VanNR57hovfyt9QPPmcXmQtr1yY67nXORuLrLZ80=;
        b=C195MTOWlEtcsGNIxPDOygpBDhjGx4EX0TdfZOKzUH5qyxVUO3Fo2hEv+Af5bueCEQDHhtal7hntSTbgiXfLQYV081rEfXZ+g4tefJPF/k3aR9FWaJ/6FLy4W0F4OY8S5lol0I50M8VWXz+3KEYx4mYrRI1RdWmhVr90+J1jJ/8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=fvqyrRoqtBaUcAHqzCyyQBq2wQIW8SdvpYPzMjWK2oXw0qmCDlmEcETjsBhPlDNvgHD69e7SeiDYPBewQdGpMfZjrFz9RStZEm+VPBMPPUpFN9U36c2J0BzZh3r4BZe09O9l6vP3NUaUnacsjD1txJH5C3U18OBrTdaW5DH9PJQ=
Received: by 10.35.131.13 with SMTP id i13mr8581391pyn.50.1198697815905;
        Wed, 26 Dec 2007 11:36:55 -0800 (PST)
Received: from ?10.0.111.21? ( [202.125.143.65])
        by mx.google.com with ESMTPS id w43sm12090205pyg.7.2007.12.26.11.36.52
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 26 Dec 2007 11:36:55 -0800 (PST)
Message-ID: <4772AD46.9050709@gmail.com>
Date: Thu, 27 Dec 2007 00:36:38 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: StopWords problem
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hi, Doro Cohen

Thanks for your reply, but I am facing a small problem over here. As I 
am using notepad for coding, then in which format the file should be saved.


public static final String[] URDU_STOP_WORDS = { "" ,"" ,"" ,"" 
,"" ,"" };

Analyzer analyzer = new StandardAnalyzer(URDU_STOP_WORDS);


If I save it in ANSI format it will lose the contents, I tried Unicode 
but it does not work and I also tried UTF-8, but it also generate two 
errors of identifying two illegal characters. What should be the 
solution. Kindly guide in this.

Thanks ..

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 19:55:55 2007
Return-Path: <java-user-return-31654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73183 invoked from network); 26 Dec 2007 19:55:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 19:55:54 -0000
Received: (qmail 33876 invoked by uid 500); 26 Dec 2007 19:55:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33840 invoked by uid 500); 26 Dec 2007 19:55:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33829 invoked by uid 99); 26 Dec 2007 19:55:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 11:55:38 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of enderwiggin.rimer@gmail.com designates 72.14.202.177 as permitted sender)
Received: from [72.14.202.177] (HELO ro-out-1112.google.com) (72.14.202.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 19:55:15 +0000
Received: by ro-out-1112.google.com with SMTP id k5so653538rog.7
        for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 11:55:19 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=3zbx3A7ApzwxIoRSHUPFs9IfuJeqPVshfFKK371hi5k=;
        b=phSNiUgyhbd707lLRo4HiO7SnQHMdm8/7mffiWIXTz47FYcQnGIwLY5ITgoY8hZ1TQ0441i6xWlMvri333LiyZV5oFTwvA/yjsEJHPek+ARkJh0Ia12/OpC2zC+sbHzCFDH4T9f2P4X7HtG3oA7HFwu1+LfB49W8j+eA3yzXG4A=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=SbNdQEHDp92f6JhGtGyLpPUbhSC6Frsw10c+aXrY6vl5daElw8iZxU867d552CAeIO+QVZyM9srkGFS+cg6S4+UEGtDno13Yye4ompe1DJuHsp5AB4qYbo7Ww1WM+bfeLc0rYNC3edJu4m1W8vEney8Ou7qrieeZfEXa5yNGDtA=
Received: by 10.110.47.17 with SMTP id u17mr1358970tiu.6.1198698917373;
        Wed, 26 Dec 2007 11:55:17 -0800 (PST)
Received: from ?192.168.1.186? ( [125.33.121.2])
        by mx.google.com with ESMTPS id i37sm27773726wxd.12.2007.12.26.11.55.09
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 26 Dec 2007 11:55:16 -0800 (PST)
Message-ID: <4772B174.9060404@gmail.com>
Date: Thu, 27 Dec 2007 03:54:28 +0800
From: =?UTF-8?B?5p2O5pmT5bOw?= <enderwiggin.rimer@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StopWords problem
References: <4772AD46.9050709@gmail.com>
In-Reply-To: <4772AD46.9050709@gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

"javac" has an option "-encoding", which tells the compiler the encoding 
the input source file is using, this will probably solve the problem.
or you can try the unicode escape: \uxxxx, then you can save it in ANSI, 
had for human to read though.
or use an IDE, eclipse is a good choice, you can set the source file 
encoding, and it will take care of the compiler for you.

regards.
> Hi, Doro Cohen
>
> Thanks for your reply, but I am facing a small problem over here. As I 
> am using notepad for coding, then in which format the file should be 
> saved.
>
>
> public static final String[] URDU_STOP_WORDS = { "" ,"" ,"" 
> ,"" ,"" ,"" };
>
> Analyzer analyzer = new StandardAnalyzer(URDU_STOP_WORDS);
>
>
> If I save it in ANSI format it will lose the contents, I tried Unicode 
> but it does not work and I also tried UTF-8, but it also generate two 
> errors of identifying two illegal characters. What should be the 
> solution. Kindly guide in this.
>
> Thanks ..
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 20:34:17 2007
Return-Path: <java-user-return-31655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78188 invoked from network); 26 Dec 2007 20:34:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 20:34:17 -0000
Received: (qmail 53585 invoked by uid 500); 26 Dec 2007 20:34:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53560 invoked by uid 500); 26 Dec 2007 20:34:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53549 invoked by uid 99); 26 Dec 2007 20:34:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 12:34:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 66.249.92.173 as permitted sender)
Received: from [66.249.92.173] (HELO ug-out-1314.google.com) (66.249.92.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 20:33:37 +0000
Received: by ug-out-1314.google.com with SMTP id u40so1515794ugc.29
        for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 12:33:40 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=on8pXCJebM+jw+Ees5U15uMijB3QiFyix4xrHwNEyEE=;
        b=FhsYDM9/a6g/AYA8T8NgvCl1TBUvZI1XaNxModaQF5EQmuKqVUpR83+baXKNr9NQ9T+Fbgcgc7ji5khjtPDK6BN6VJrAPLks9qECZY1/Jh1K3OM6slojMoAdferUxJvyNRNdNOaAZVZNzMMUhMcplwOqY9R5qEJNza+m7ttVjpg=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=kBRzOgQunc5GvvDIzvUOBjnIeDJ7N8ZBrTB1YW2gg9EtwkHawIKOy9LwzfsM1kCB1ECo/d1t+dwqKIa8/7JFyb6bPWvlp41m9oiBSPl3hawUh0ppUeDHnrCAw+cc6vLMOltL7kbzRlJgAsO6GFKvmbuKN/WVTDxT7I/B8OMk2ms=
Received: by 10.67.22.2 with SMTP id z2mr6027507ugi.1.1198701219602;
        Wed, 26 Dec 2007 12:33:39 -0800 (PST)
Received: from ?10.0.111.21? ( [202.125.143.65])
        by mx.google.com with ESMTPS id 18sm27498448ugk.18.2007.12.26.12.33.36
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 26 Dec 2007 12:33:39 -0800 (PST)
Message-ID: <4772BA98.5020403@gmail.com>
Date: Thu, 27 Dec 2007 01:33:28 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StopWords problem
References: <4772AD46.9050709@gmail.com> <4772B174.9060404@gmail.com>
In-Reply-To: <4772B174.9060404@gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

 wrote:
> "javac" has an option "-encoding", which tells the compiler the 
> encoding the input source file is using, this will probably solve the 
> problem.
> or you can try the unicode escape: \uxxxx, then you can save it in 
> ANSI, had for human to read though.
> or use an IDE, eclipse is a good choice, you can set the source file 
> encoding, and it will take care of the compiler for you.
>
> regards.
>> Hi, Doro Cohen
>>
>> Thanks for your reply, but I am facing a small problem over here. As 
>> I am using notepad for coding, then in which format the file should 
>> be saved.
>>
>>
>> public static final String[] URDU_STOP_WORDS = { "" ,"" ,"" 
>> ,"" ,"" ,"" };
>>
>> Analyzer analyzer = new StandardAnalyzer(URDU_STOP_WORDS);
>>
>>
>> If I save it in ANSI format it will lose the contents, I tried 
>> Unicode but it does not work and I also tried UTF-8, but it also 
>> generate two errors of identifying two illegal characters. What 
>> should be the solution. Kindly guide in this.
>>
>> Thanks ..
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
Hi,
Thanks alot for your suggestion.
Using javac -encoding UTF-8 still raises the following error.

urduIndexer.java : illegal character: \65279
?
^
1 error

What I am doing wrong?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 21:17:46 2007
Return-Path: <java-user-return-31656-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85942 invoked from network); 26 Dec 2007 21:17:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 21:17:46 -0000
Received: (qmail 85039 invoked by uid 500); 26 Dec 2007 21:17:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85000 invoked by uid 500); 26 Dec 2007 21:17:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84985 invoked by uid 99); 26 Dec 2007 21:17:29 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 13:17:29 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of enderwiggin.rimer@gmail.com designates 72.14.202.180 as permitted sender)
Received: from [72.14.202.180] (HELO ro-out-1112.google.com) (72.14.202.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 21:17:05 +0000
Received: by ro-out-1112.google.com with SMTP id k5so669894rog.7
        for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 13:17:09 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=s3q7XMA/4P7HiFOQiP74SxM3dDFrZ7GSXLQ452qqGMs=;
        b=TJOO/2pWms4y7UVdfI+brhi8YKjyDu5ez8rMT1pTnlpJ0YjfYR5KgVPEwIf+CEVutcjjwVOG7fA/yRNppSbQRtZySZspWn9tNJep34N14Sd7ZI77ocbsGI9oLe9eBdy3MNWrRMIqUaBl2Xh/zauFcr26KuLCly0GtkJWjNlMOwQ=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=LY8r1igtbhGpxaCEGHlmkUbqwq1SWQw9CqWG/87naxtHSPqWI8dpi3r2IevNzmmNaPX/TKGT23io6r1bbOxzuCCDVDQbXY8botLsz0QsTNMLKoFSUb630ATha9qHxyy0STikCUk6iG5BBTniwavPSpQdFSfjUOEXOI86QanAMC4=
Received: by 10.110.70.5 with SMTP id s5mr1409092tia.8.1198703828499;
        Wed, 26 Dec 2007 13:17:08 -0800 (PST)
Received: from ?192.168.1.186? ( [125.33.121.2])
        by mx.google.com with ESMTPS id i34sm28149885wxd.9.2007.12.26.13.17.06
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 26 Dec 2007 13:17:07 -0800 (PST)
Message-ID: <4772C4C2.5010800@gmail.com>
Date: Thu, 27 Dec 2007 05:16:50 +0800
From: =?UTF-8?B?5p2O5pmT5bOw?= <enderwiggin.rimer@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StopWords problem
References: <4772AD46.9050709@gmail.com> <4772B174.9060404@gmail.com> <4772BA98.5020403@gmail.com>
In-Reply-To: <4772BA98.5020403@gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

It's the notepad.
It adds byte-order-mark(BOM, in this case 65279, or 0xfeff.) in front of 
your file, which javac does not recognize for reasons not quite clear to me.
here is the bug: http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4508058
it won't be fixed, so try to eliminate BOM before compile your code.

Liaqat Ali wrote:
>  wrote:
>> "javac" has an option "-encoding", which tells the compiler the 
>> encoding the input source file is using, this will probably solve the 
>> problem.
>> or you can try the unicode escape: \uxxxx, then you can save it in 
>> ANSI, had for human to read though.
>> or use an IDE, eclipse is a good choice, you can set the source file 
>> encoding, and it will take care of the compiler for you.
>>
>> regards.
>>> Hi, Doro Cohen
>>>
>>> Thanks for your reply, but I am facing a small problem over here. As 
>>> I am using notepad for coding, then in which format the file should 
>>> be saved.
>>>
>>>
>>> public static final String[] URDU_STOP_WORDS = { "" ,"" ,"" 
>>> ,"" ,"" ,"" };
>>>
>>> Analyzer analyzer = new StandardAnalyzer(URDU_STOP_WORDS);
>>>
>>>
>>> If I save it in ANSI format it will lose the contents, I tried 
>>> Unicode but it does not work and I also tried UTF-8, but it also 
>>> generate two errors of identifying two illegal characters. What 
>>> should be the solution. Kindly guide in this.
>>>
>>> Thanks ..
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> Hi,
> Thanks alot for your suggestion.
> Using javac -encoding UTF-8 still raises the following error.
>
> urduIndexer.java : illegal character: \65279
> ?
> ^
> 1 error
>
> What I am doing wrong?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 21:23:23 2007
Return-Path: <java-user-return-31657-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86610 invoked from network); 26 Dec 2007 21:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 21:23:23 -0000
Received: (qmail 89780 invoked by uid 500); 26 Dec 2007 21:23:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89746 invoked by uid 500); 26 Dec 2007 21:23:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89735 invoked by uid 99); 26 Dec 2007 21:23:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 13:23:07 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of enderwiggin.rimer@gmail.com designates 72.14.202.178 as permitted sender)
Received: from [72.14.202.178] (HELO ro-out-1112.google.com) (72.14.202.178)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 21:22:44 +0000
Received: by ro-out-1112.google.com with SMTP id k5so670799rog.7
        for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 13:22:48 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=ki/PCmUuI8qT3eIHRb//iyM2jY5EHGuWxawhtMBWJDg=;
        b=qrvGYZ0yqwyJH7f4omXZS6Vx5f7JVh2rtzWEw9C2rYVWSe5qjeZ5GrGh+4ZjJLINTDn5WF3nt74O5QKIJEZqxLkBMXwb0NhDRKri9BsEPbdnjDdlThb18Ui3aEtAzCiH/3dqNd9eRvgHSirWCq3eYdNoRZl8LDSLo40XkQsiwbw=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=ZluKBBDxMY6jr0e+Wg3xEzAY1O6rNfQ70K3xHpmrMi0gFqwhuJgzFuUi28jBTblLHUuUE0h+5wZJVV2F9D1wFInjDQxaRC9xPoyKMsxOWC2OIpZwpci3+QSfTIF5CgQHRd7tDnTSu/e4G19quMZtYIXHojVB02ArooLP687EG6g=
Received: by 10.142.109.16 with SMTP id h16mr2150541wfc.117.1198704168182;
        Wed, 26 Dec 2007 13:22:48 -0800 (PST)
Received: from ?192.168.1.186? ( [125.33.121.2])
        by mx.google.com with ESMTPS id i15sm11265455wxd.17.2007.12.26.13.22.45
        (version=SSLv3 cipher=RC4-MD5);
        Wed, 26 Dec 2007 13:22:46 -0800 (PST)
Message-ID: <4772C615.4000804@gmail.com>
Date: Thu, 27 Dec 2007 05:22:29 +0800
From: =?UTF-8?B?5p2O5pmT5bOw?= <enderwiggin.rimer@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StopWords problem
References: <4772AD46.9050709@gmail.com> <4772B174.9060404@gmail.com> <4772BA98.5020403@gmail.com>
In-Reply-To: <4772BA98.5020403@gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

or you can save it as "Unicode" and javac -encoding Unicode

this way you can still use notepad.

Liaqat Ali :
>  wrote:
>> "javac" has an option "-encoding", which tells the compiler the 
>> encoding the input source file is using, this will probably solve the 
>> problem.
>> or you can try the unicode escape: \uxxxx, then you can save it in 
>> ANSI, had for human to read though.
>> or use an IDE, eclipse is a good choice, you can set the source file 
>> encoding, and it will take care of the compiler for you.
>>
>> regards.
>>> Hi, Doro Cohen
>>>
>>> Thanks for your reply, but I am facing a small problem over here. As 
>>> I am using notepad for coding, then in which format the file should 
>>> be saved.
>>>
>>>
>>> public static final String[] URDU_STOP_WORDS = { "" ,"" ,"" 
>>> ,"" ,"" ,"" };
>>>
>>> Analyzer analyzer = new StandardAnalyzer(URDU_STOP_WORDS);
>>>
>>>
>>> If I save it in ANSI format it will lose the contents, I tried 
>>> Unicode but it does not work and I also tried UTF-8, but it also 
>>> generate two errors of identifying two illegal characters. What 
>>> should be the solution. Kindly guide in this.
>>>
>>> Thanks ..
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> Hi,
> Thanks alot for your suggestion.
> Using javac -encoding UTF-8 still raises the following error.
>
> urduIndexer.java : illegal character: \65279
> ?
> ^
> 1 error
>
> What I am doing wrong?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 21:42:29 2007
Return-Path: <java-user-return-31658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89714 invoked from network); 26 Dec 2007 21:42:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 21:42:28 -0000
Received: (qmail 2924 invoked by uid 500); 26 Dec 2007 21:42:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2898 invoked by uid 500); 26 Dec 2007 21:42:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2887 invoked by uid 99); 26 Dec 2007 21:42:12 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 13:42:12 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.158 as permitted sender)
Received: from [72.14.220.158] (HELO fg-out-1718.google.com) (72.14.220.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 21:41:50 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1580932fga.27
        for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 13:41:53 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Xcw+Ws1tkwFx0P2gIZ9B3klPoBHZNTaHTNnlW2AtAZI=;
        b=gfEA1AvcmLsDbvarxgXs6FweC9ppw46XqD+9AwF5T7NXdx29roe+9lbtO5l0DaBYapHdQeWKDPUTFLwHPvuzcduq4P+eYRnwfV2kUlwka9l26sC4sCjXTLtAD5y+FtobbSCpbMQkICdPz9NJPwsszYWSb0OnKyZCguIvTLEBg+k=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=aqk1xY7EprfKSjwgToN7stte+jAEYLSk53RugMLoYuPGqQag/BO5foNF8QoH0exgVV4wOqqaYZeCuB10iCxhU4M71o3Nf3YWemLsfVYBzeunwikKlNWcIzfLSkkJER6UvnWETS/kvL2CUerU2kVT4xq6rV09Nf+LNBdQSK9VX88=
Received: by 10.86.90.2 with SMTP id n2mr7073913fgb.66.1198705313223;
        Wed, 26 Dec 2007 13:41:53 -0800 (PST)
Received: by 10.86.50.1 with HTTP; Wed, 26 Dec 2007 13:41:53 -0800 (PST)
Message-ID: <e05f0fd10712261341k1f533527hd882a2e5b3bd4711@mail.gmail.com>
Date: Wed, 26 Dec 2007 23:41:53 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StopWords problem
In-Reply-To: <4772BA98.5020403@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10223_27628161.1198705313210"
References: <4772AD46.9050709@gmail.com> <4772B174.9060404@gmail.com>
	 <4772BA98.5020403@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10223_27628161.1198705313210
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Dec 26, 2007 10:33 PM, Liaqat Ali <liaqatalimian@gmail.com> wrote:

> Using javac -encoding UTF-8 still raises the following error.
>
> urduIndexer.java : illegal character: \65279
> ?
> ^
> 1 error
>
> What I am doing wrong?
>

If you have the stop-words in a file, say one word in a line,
they can be read like this:

    BufferedReader r = new BufferedReader(new InputStreamReader(new
FileInputStream("Urdu.txt"),"UTF8"));
    String word = r.readLine();    // loop this line, you get the picture

(Make sure to specify encoding "UTF8" when saving the file from notepad).

Regards,
Doron

------=_Part_10223_27628161.1198705313210--

From java-user-return-31659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 22:09:17 2007
Return-Path: <java-user-return-31659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93412 invoked from network); 26 Dec 2007 22:09:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 22:09:17 -0000
Received: (qmail 14845 invoked by uid 500); 26 Dec 2007 22:09:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14818 invoked by uid 500); 26 Dec 2007 22:09:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14807 invoked by uid 99); 26 Dec 2007 22:09:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 14:09:00 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 209.85.146.180 as permitted sender)
Received: from [209.85.146.180] (HELO wa-out-1112.google.com) (209.85.146.180)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 22:08:37 +0000
Received: by wa-out-1112.google.com with SMTP id j40so4671569wah.11
        for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 14:08:41 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=MhZDAWOxlzHOFLMiPRNYo8YHH85ypHFpEzKlVSyu/sE=;
        b=IOZ41o/XxadErd1ct7GRD2GehRuw9HrvUaWenLkw78Ehzg5E6vcpiXwODzz1X9L/L9544mR28XevoKLKD83atd2p966T5P1CGWFCUkK3jhVtv7x7exynWOHRmAntaNYthJITswWdE8qUZF032MyKqRAWaXWp24hxvblEFNHYGo8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=jNeBNvcPqsGYmdxSGvkamULw6sVBPiiFajSw8IAI/cQ1MzH988KyTCiCcxVUfT0kV9IvpIwO71UwR6mZPpwAdvxrhifxNVqjR4fdVSBsQQ6Nq6IN1YUwq/FAN9j6mTFIT/0GBqagcjYt8HtIpKf9rriuunh+eH5bOH0JGOaL7Q8=
Received: by 10.114.209.1 with SMTP id h1mr7159224wag.115.1198706921402;
        Wed, 26 Dec 2007 14:08:41 -0800 (PST)
Received: from ?10.0.101.168? ( [202.125.143.66])
        by mx.google.com with ESMTPS id k26sm6477282waf.35.2007.12.26.14.08.37
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 26 Dec 2007 14:08:40 -0800 (PST)
Message-ID: <4772D0CC.4090006@gmail.com>
Date: Thu, 27 Dec 2007 03:08:12 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StopWords problem
References: <4772AD46.9050709@gmail.com> <4772B174.9060404@gmail.com>	 <4772BA98.5020403@gmail.com> <e05f0fd10712261341k1f533527hd882a2e5b3bd4711@mail.gmail.com>
In-Reply-To: <e05f0fd10712261341k1f533527hd882a2e5b3bd4711@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Doron Cohen wrote:
> On Dec 26, 2007 10:33 PM, Liaqat Ali <liaqatalimian@gmail.com> wrote:
>
>   
>> Using javac -encoding UTF-8 still raises the following error.
>>
>> urduIndexer.java : illegal character: \65279
>> ?
>> ^
>> 1 error
>>
>> What I am doing wrong?
>>
>>     
>
> If you have the stop-words in a file, say one word in a line,
> they can be read like this:
>
>     BufferedReader r = new BufferedReader(new InputStreamReader(new
> FileInputStream("Urdu.txt"),"UTF8"));
>     String word = r.readLine();    // loop this line, you get the picture
>
> (Make sure to specify encoding "UTF8" when saving the file from notepad).
>
> Regards,
> Doron
>
>   
Hi, Doron

The compilation problem is solved, but there is no change in the index.


public static final String[] URDU_STOP_WORDS = { "" ,"" ,"" ,"" 
,"" ,"" ,"" ,"" ,"","" ,""
,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" };
Analyzer analyzer = new StandardAnalyzer(URDU_STOP_WORDS);


Again these words are appeared in the index with high ranks.

Regards,
Liaqat

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 22:11:14 2007
Return-Path: <java-user-return-31660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93772 invoked from network); 26 Dec 2007 22:11:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 22:11:14 -0000
Received: (qmail 17164 invoked by uid 500); 26 Dec 2007 22:10:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17140 invoked by uid 500); 26 Dec 2007 22:10:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17129 invoked by uid 99); 26 Dec 2007 22:10:57 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 14:10:57 -0800
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.207] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 22:10:43 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id 199C1109F28
	for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 14:10:33 -0800 (PST)
Message-Id: <B1FFF2F8-B11F-493D-AAAC-E61C92A3215C@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <4772D0CC.4090006@gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: StopWords problem
Date: Wed, 26 Dec 2007 17:10:31 -0500
References: <4772AD46.9050709@gmail.com> <4772B174.9060404@gmail.com>	 <4772BA98.5020403@gmail.com> <e05f0fd10712261341k1f533527hd882a2e5b3bd4711@mail.gmail.com> <4772D0CC.4090006@gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Are you altering (stemming) the token before it gets to the StopFilter?

On Dec 26, 2007, at 5:08 PM, Liaqat Ali wrote:

> Doron Cohen wrote:
>> On Dec 26, 2007 10:33 PM, Liaqat Ali <liaqatalimian@gmail.com> wrote:
>>
>>
>>> Using javac -encoding UTF-8 still raises the following error.
>>>
>>> urduIndexer.java : illegal character: \65279
>>> ?
>>> ^
>>> 1 error
>>>
>>> What I am doing wrong?
>>>
>>>
>>
>> If you have the stop-words in a file, say one word in a line,
>> they can be read like this:
>>
>>    BufferedReader r =3D new BufferedReader(new InputStreamReader(new
>> FileInputStream("Urdu.txt"),"UTF8"));
>>    String word =3D r.readLine();    // loop this line, you get the =20=

>> picture
>>
>> (Make sure to specify encoding "UTF8" when saving the file from =20
>> notepad).
>>
>> Regards,
>> Doron
>>
>>
> Hi, Doron
>
> The compilation problem is solved, but there is no change in the =20
> index.
>
>
> public static final String[] URDU_STOP_WORDS =3D =20
> { "=DA=A9=DB=8C=20
> " ,"=DA=A9=D8=A7=20
> " ,"=DA=A9=D9=88=20
> " ,"=DB=81=DB=92" ,"=DA=A9=DB=92" ,"=D9=86=DB=92" ,"=D9=BE=D8=B1" =
,"=D8=A7=D9=88=D8=B1" ,"=D8=B3=DB=92","=D9=85=DB=8C=DA=BA" ,"=D8=A8=DA=BE=DB=
=8C"
> ,"=D8=A7=D9=86=20
> " ,"=D8=A7=DB=8C=DA=A9=20
> " ,"=D8=AA=DA=BE=D8=A7=20
> " ,"=D8=AA=DA=BE=DB=8C=20
> " ,"=DA=A9=DB=8C=D8=A7" ,"=DB=81=DB=8C=DA=BA" ,"=DA=A9=D8=B1" ,"=D9=88=DB=
=81" ,"=D8=AC=D8=B3" ,"=D9=86=DB=81=DA=BA" ,"=D8=AA=DA=A9" };
> Analyzer analyzer =3D new StandardAnalyzer(URDU_STOP_WORDS);
>
>
> Again these words are appeared in the index with high ranks.
>
> Regards,
> Liaqat
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 22:24:56 2007
Return-Path: <java-user-return-31661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96112 invoked from network); 26 Dec 2007 22:24:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 22:24:56 -0000
Received: (qmail 25078 invoked by uid 500); 26 Dec 2007 22:24:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25046 invoked by uid 500); 26 Dec 2007 22:24:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25035 invoked by uid 99); 26 Dec 2007 22:24:38 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 14:24:38 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 66.249.92.174 as permitted sender)
Received: from [66.249.92.174] (HELO ug-out-1314.google.com) (66.249.92.174)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 22:24:13 +0000
Received: by ug-out-1314.google.com with SMTP id u40so1528292ugc.29
        for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 14:24:16 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=KXRulCIPXy7WbxUoBZWEZa4F1/kUL9GWHanJg6xjN50=;
        b=jLbn4DwQzP/EKEexYV4PkniWY8EAn3gDbZqOxe8ZkUG+8z5JFZB1uht3krY2shbMYj/QK/dNqXV83qoG/5SK6hVNDNk4GZabWJNddAiRi2VxHL+KXXeQB4UlFF5ZVQ2Z8wIahLZhJR9SDxkI1I+CwAzJ0fdeyddlFZKZeArsJFY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=CmnhKIYgbtzgM5yP5QkA8dK/dixH1JuoeoEo2iQKWa+mnpJZrLnu3+sLe8puNlwBdm9p8k2yYC0HFG52I0VhjjtJvhxj9w7NEi5u0vGKmk20jm1gG5Dcw+7dYDXgk4vhvHtyH2w/6+2C3zIqW0PWxx8qR0PfhV0vP6HJoEt6sqg=
Received: by 10.67.115.1 with SMTP id s1mr6338570ugm.74.1198707856666;
        Wed, 26 Dec 2007 14:24:16 -0800 (PST)
Received: from ?10.0.101.168? ( [202.125.143.66])
        by mx.google.com with ESMTPS id 31sm27736807ugg.47.2007.12.26.14.24.13
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 26 Dec 2007 14:24:16 -0800 (PST)
Message-ID: <4772D485.6090605@gmail.com>
Date: Thu, 27 Dec 2007 03:24:05 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StopWords problem
References: <4772AD46.9050709@gmail.com> <4772B174.9060404@gmail.com>	 <4772BA98.5020403@gmail.com> <e05f0fd10712261341k1f533527hd882a2e5b3bd4711@mail.gmail.com> <4772D0CC.4090006@gmail.com> <B1FFF2F8-B11F-493D-AAAC-E61C92A3215C@apache.org>
In-Reply-To: <B1FFF2F8-B11F-493D-AAAC-E61C92A3215C@apache.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Grant Ingersoll wrote:
> Are you altering (stemming) the token before it gets to the StopFilter?
>
> On Dec 26, 2007, at 5:08 PM, Liaqat Ali wrote:
>
>> Doron Cohen wrote:
>>> On Dec 26, 2007 10:33 PM, Liaqat Ali <liaqatalimian@gmail.com> wrote:
>>>
>>>
>>>> Using javac -encoding UTF-8 still raises the following error.
>>>>
>>>> urduIndexer.java : illegal character: \65279
>>>> ?
>>>> ^
>>>> 1 error
>>>>
>>>> What I am doing wrong?
>>>>
>>>>
>>>
>>> If you have the stop-words in a file, say one word in a line,
>>> they can be read like this:
>>>
>>>    BufferedReader r = new BufferedReader(new InputStreamReader(new
>>> FileInputStream("Urdu.txt"),"UTF8"));
>>>    String word = r.readLine();    // loop this line, you get the 
>>> picture
>>>
>>> (Make sure to specify encoding "UTF8" when saving the file from 
>>> notepad).
>>>
>>> Regards,
>>> Doron
>>>
>>>
>> Hi, Doron
>>
>> The compilation problem is solved, but there is no change in the index.
>>
>>
>> public static final String[] URDU_STOP_WORDS = { "" ,"" ,"" 
>> ,"" ,"" ,"" ,"" ,"" ,"","" ,""
>> ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" 
>> ,"" };
>> Analyzer analyzer = new StandardAnalyzer(URDU_STOP_WORDS);
>>
>>
>> Again these words are appeared in the index with high ranks.
>>
>> Regards,
>> Liaqat
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
No, at this level I am not using any stemming technique. I am just 
trying to eliminate stop words.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Dec 26 22:56:46 2007
Return-Path: <java-user-return-31662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1204 invoked from network); 26 Dec 2007 22:56:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 26 Dec 2007 22:56:46 -0000
Received: (qmail 44165 invoked by uid 500); 26 Dec 2007 22:56:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44137 invoked by uid 500); 26 Dec 2007 22:56:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44126 invoked by uid 99); 26 Dec 2007 22:56:29 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 14:56:29 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.74] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 22:56:18 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 33D5721222
	for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 14:56:09 -0800 (PST)
Message-Id: <1B43DF61-1797-426A-AC14-B975888254DB@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <4772D485.6090605@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: StopWords problem
Date: Wed, 26 Dec 2007 17:56:07 -0500
References: <4772AD46.9050709@gmail.com> <4772B174.9060404@gmail.com>	 <4772BA98.5020403@gmail.com> <e05f0fd10712261341k1f533527hd882a2e5b3bd4711@mail.gmail.com> <4772D0CC.4090006@gmail.com> <B1FFF2F8-B11F-493D-AAAC-E61C92A3215C@apache.org> <4772D485.6090605@gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org


On Dec 26, 2007, at 5:24 PM, Liaqat Ali wrote:
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> No, at this level I am not using any stemming technique. I am just  
> trying to eliminate stop words.

Can you share your analyzer code?

-Grant

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 07:37:03 2007
Return-Path: <java-user-return-31663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78061 invoked from network); 27 Dec 2007 07:37:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 07:37:03 -0000
Received: (qmail 31119 invoked by uid 500); 27 Dec 2007 07:36:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31085 invoked by uid 500); 27 Dec 2007 07:36:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31072 invoked by uid 99); 27 Dec 2007 07:36:46 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 26 Dec 2007 23:36:46 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 66.249.92.170 as permitted sender)
Received: from [66.249.92.170] (HELO ug-out-1314.google.com) (66.249.92.170)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 07:36:23 +0000
Received: by ug-out-1314.google.com with SMTP id u40so1582871ugc.29
        for <java-user@lucene.apache.org>; Wed, 26 Dec 2007 23:36:26 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=4SBDoq6qI3JzSlmWDPvUAQrkXwUBLAabB5jC6N9plS4=;
        b=tOJUGts2e6+amj8k0hOAqJm3cg4TIthq9wgvj0fdyUUnEBpHX+lh1OjXndesog992ndcHSX1k4MbPBelymzO/VfP+joTykKBFJd2m8A7XEjIEGgrT97aLallCzlr+lfQxNfgQWow3F9JYYLROHvXCnQerzzdaCW6fd171JtB5zM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=J7W0HkI31+aweyQmIuXDeLnc7lRbROFlYQ7Zloq2CRORMFY2dIYfH2jR+wHYgYu8zLLSBvbWAhEYtQeE8Qharue8SgMDHaG/ewDgbJhc0kZegsg50Bx/3aS/gkdtxYME7o0ch8pgO3D60jQ35QVI7/4PSJiVpUPCvjE52WvrpAY=
Received: by 10.66.237.9 with SMTP id k9mr6363628ugh.13.1198740985894;
        Wed, 26 Dec 2007 23:36:25 -0800 (PST)
Received: from ?10.0.95.119? ( [202.125.143.67])
        by mx.google.com with ESMTPS id q1sm28843553uge.7.2007.12.26.23.36.22
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Wed, 26 Dec 2007 23:36:25 -0800 (PST)
Message-ID: <477355E7.6080601@gmail.com>
Date: Thu, 27 Dec 2007 12:36:07 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StopWords problem
References: <4772AD46.9050709@gmail.com> <4772B174.9060404@gmail.com>	 <4772BA98.5020403@gmail.com> <e05f0fd10712261341k1f533527hd882a2e5b3bd4711@mail.gmail.com> <4772D0CC.4090006@gmail.com> <B1FFF2F8-B11F-493D-AAAC-E61C92A3215C@apache.org> <4772D485.6090605@gmail.com> <1B43DF61-1797-426A-AC14-B975888254DB@apache.org>
In-Reply-To: <1B43DF61-1797-426A-AC14-B975888254DB@apache.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Grant Ingersoll wrote:
>
> On Dec 26, 2007, at 5:24 PM, Liaqat Ali wrote:
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> No, at this level I am not using any stemming technique. I am just 
>> trying to eliminate stop words.
>
> Can you share your analyzer code?
>
> -Grant
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
Hi, Grant

I think i did not make my self clear. I am trying to pass a list of Urdu 
Stop words as a argument to the Standard Analyzer. But it does work well 
for me..

public static final String[] URDU_STOP_WORDS = { "" ,"" ,"" ,"" 
,"" ,"" ,"" ,"" ,"","" ,""
,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" };
Analyzer analyzer = new StandardAnalyzer(URDU_STOP_WORDS);


Kindly give some guidelines.

Regards,
Liaqat

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 08:17:41 2007
Return-Path: <java-user-return-31664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83236 invoked from network); 27 Dec 2007 08:17:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 08:17:40 -0000
Received: (qmail 44334 invoked by uid 500); 27 Dec 2007 08:17:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44305 invoked by uid 500); 27 Dec 2007 08:17:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44294 invoked by uid 99); 27 Dec 2007 08:17:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 00:17:23 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 08:17:01 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1701261fga.27
        for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 00:17:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=+O6hSZPwEjbo60KCH5Nvnopq5XRYEdC//ku9Dbzw/X0=;
        b=hSyRifiApeWFgQ8QEArlux1wDsdV/HF6+9uD2xd0+bhwv1BDWEmmfltqGFTbjFHsOIiw6VdxHJbM1GNKhVgzCDazATv5SmmSD3R/+UKaH41GvP7+uKwYAtTqQ4JWKSdOKSSPiT5g9OIHkmmZaxTPdkMGQPlFL9uEJPoMuXbaWig=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=k+BbSkhQ+FKKwLaQim50SdL8p8zeh/o1Lk3JMIU25PcAR4803BP5gYNFC2c5qv1hhRYz0FzUIpXHoKVrwI10kCrVeJr7OnnLs6+VMuNYhh8jaNp3VqN2ujY5a2v5+tJQRl13xtPzo7RKQaW576X2jgsKqLPJjoSHTFlxoq0omrY=
Received: by 10.86.89.4 with SMTP id m4mr7562797fgb.14.1198743424661;
        Thu, 27 Dec 2007 00:17:04 -0800 (PST)
Received: by 10.86.50.1 with HTTP; Thu, 27 Dec 2007 00:17:04 -0800 (PST)
Message-ID: <e05f0fd10712270017o1ccd70b8me6f42c901a66bbf0@mail.gmail.com>
Date: Thu, 27 Dec 2007 10:17:04 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StopWords problem
In-Reply-To: <477355E7.6080601@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10949_18060420.1198743424641"
References: <4772AD46.9050709@gmail.com> <4772B174.9060404@gmail.com>
	 <4772BA98.5020403@gmail.com>
	 <e05f0fd10712261341k1f533527hd882a2e5b3bd4711@mail.gmail.com>
	 <4772D0CC.4090006@gmail.com>
	 <B1FFF2F8-B11F-493D-AAAC-E61C92A3215C@apache.org>
	 <4772D485.6090605@gmail.com>
	 <1B43DF61-1797-426A-AC14-B975888254DB@apache.org>
	 <477355E7.6080601@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10949_18060420.1198743424641
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: base64
Content-Disposition: inline

SGkgTGlhZ2F0LAoKVGhpcyBwYXJ0IG9mIHRoZSBjb2RlIHNlZW1zIGNvcnJlY3QgYW5kIHNob3Vs
ZCB3b3JrLCBzbyBwcm9ibGVtCm11c3QgYmUgZWxzZXdoZXJlLgoKQ2FuIHlvdSBwb3N0IGEgc2hv
cnQgcHJvZ3JhbSB0aGF0IGRlbW9uc3RyYXRlcyB0aGUgcHJvYmxlbT8KCllvdSBjYW4gc3RhcnQg
d2l0aCBzb21ldGhpbmcgbGlrZSB0aGlzOgogICAgICBEb2N1bWVudCBkb2MgPSBuZXcgRG9jdW1l
bnQoKTsKICAgICAgZG9jLmFkZChuZXcgRmllbGQoInRleHQiLFVSRFVfU1RPUF9XT1JEU1swXSAr
CiAgICAgICAgICAgICAgICAgICIgcmVndWxhciB0ZXh0IixTdG9yZS5ZRVMsIEluZGV4LlRPS0VO
SVpFRCkpOwogICAgICBpbmRleFdyaXRlci5hZGREb2N1bWVudChkb2MpOwoKTm93IFVSRFVfU1RP
UF9XT1JEU1swXSBzaG91bGQgbm90IGFwcGVhciB3aXRoaW4gdGhlIGluZGV4IHRlcm1zLgpZb3Ug
Y2FuIGVhc2lseSB2ZXJpZnkgdGhpcyBieSBpdGVyYXRpbmcgSW5kZXhSZWFkZXIudGVybXMoKTsK
ClJlZ2FyZHMsIERvcm9uCgpPbiBEZWMgMjcsIDIwMDcgOTozNiBBTSwgTGlhcWF0IEFsaSA8bGlh
cWF0YWxpbWlhbkBnbWFpbC5jb20+IHdyb3RlOgoKPiBIaSwgR3JhbnQKPgo+IEkgdGhpbmsgaSBk
aWQgbm90IG1ha2UgbXkgc2VsZiBjbGVhci4gSSBhbSB0cnlpbmcgdG8gcGFzcyBhIGxpc3Qgb2Yg
VXJkdQo+IFN0b3Agd29yZHMgYXMgYSBhcmd1bWVudCB0byB0aGUgU3RhbmRhcmQgQW5hbHl6ZXIu
IEJ1dCBpdCBkb2VzIHdvcmsgd2VsbAo+IGZvciBtZS4uCj4KPiBwdWJsaWMgc3RhdGljIGZpbmFs
IFN0cmluZ1tdIFVSRFVfU1RPUF9XT1JEUyA9IHsgItqp24wiICwi2qnYpyIgLCLaqdmIIiAsItuB
25IiCj4gLCLaqduSIiAsItmG25IiICwi2b7YsSIgLCLYp9mI2LEiICwi2LPbkiIsItmF24zauiIg
LCLYqNq+24wiCj4gLCLYp9mGIiAsItin24zaqSIgLCLYqtq+2KciICwi2KravtuMIiAsItqp24zY
pyIgLCLbgduM2roiICwi2qnYsSIgLCLZiNuBIiAsItis2LMiICwi2Ybbgdq6IiAsItiq2qkiIH07
Cj4gQW5hbHl6ZXIgYW5hbHl6ZXIgPSBuZXcgU3RhbmRhcmRBbmFseXplcihVUkRVX1NUT1BfV09S
RFMpOwo+Cj4KPiBLaW5kbHkgZ2l2ZSBzb21lIGd1aWRlbGluZXMuCj4KPiBSZWdhcmRzLAo+IExp
YXFhdAo+Cj4gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tCj4gVG8gdW5zdWJzY3JpYmUsIGUtbWFpbDogamF2YS11c2Vy
LXVuc3Vic2NyaWJlQGx1Y2VuZS5hcGFjaGUub3JnCj4gRm9yIGFkZGl0aW9uYWwgY29tbWFuZHMs
IGUtbWFpbDogamF2YS11c2VyLWhlbHBAbHVjZW5lLmFwYWNoZS5vcmcKPgo+Cg==
------=_Part_10949_18060420.1198743424641--

From java-user-return-31665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 08:23:24 2007
Return-Path: <java-user-return-31665-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83830 invoked from network); 27 Dec 2007 08:23:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 08:23:24 -0000
Received: (qmail 48700 invoked by uid 500); 27 Dec 2007 08:23:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48663 invoked by uid 500); 27 Dec 2007 08:23:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48652 invoked by uid 99); 27 Dec 2007 08:23:07 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 00:23:07 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 209.85.198.189 as permitted sender)
Received: from [209.85.198.189] (HELO rv-out-0910.google.com) (209.85.198.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 08:22:43 +0000
Received: by rv-out-0910.google.com with SMTP id k20so2338145rvb.5
        for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 00:22:47 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=XNFoC0QJQSps84TVWH8bTinptX3mm5W3ZvXiOyafANE=;
        b=ISdjpGAF3kutPhtKiE4u75ifqYpacdsAX6if+/qnBNos16ld8/rHTnwKEa9/b2DIAO+Yo/AaE3tB1Shyp5KBw0D9kZmWjJjCyoQQhfOnnw5/txsJ6V6wNS5JyuznIB3CLKEqKQ8TZu2POGcgb3eJtHL0AL7YWDDifyHLcls5uwE=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=o6OLj2+w8j+cKj2XACPKxYxOZKVlfrvqhkoTtnqlWujqEKL+5P8t1DirOqJR+O7hNNQiMJV4PW4rs2pOdHX9YZN8oaaW3ILM7vcxT1BiWPoQdSu5Sml3Fjhrk8XoPoz2sKNS8XWI20Vihmb1DDJcngHNh7alx3PF3MO3xhJv71M=
Received: by 10.140.177.15 with SMTP id z15mr3845135rve.138.1198743767448;
        Thu, 27 Dec 2007 00:22:47 -0800 (PST)
Received: from ?10.0.68.24? ( [202.125.143.65])
        by mx.google.com with ESMTPS id m28sm11970081poh.7.2007.12.27.00.22.42
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 27 Dec 2007 00:22:46 -0800 (PST)
Message-ID: <477360C4.7070004@gmail.com>
Date: Thu, 27 Dec 2007 13:22:28 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StopWords problem
References: <4772AD46.9050709@gmail.com> <4772B174.9060404@gmail.com>	 <4772BA98.5020403@gmail.com>	 <e05f0fd10712261341k1f533527hd882a2e5b3bd4711@mail.gmail.com>	 <4772D0CC.4090006@gmail.com>	 <B1FFF2F8-B11F-493D-AAAC-E61C92A3215C@apache.org>	 <4772D485.6090605@gmail.com>	 <1B43DF61-1797-426A-AC14-B975888254DB@apache.org>	 <477355E7.6080601@gmail.com> <e05f0fd10712270017o1ccd70b8me6f42c901a66bbf0@mail.gmail.com>
In-Reply-To: <e05f0fd10712270017o1ccd70b8me6f42c901a66bbf0@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Doron Cohen wrote:
> Hi Liagat,
>
> This part of the code seems correct and should work, so problem
> must be elsewhere.
>
> Can you post a short program that demonstrates the problem?
>
> You can start with something like this:
>       Document doc = new Document();
>       doc.add(new Field("text",URDU_STOP_WORDS[0] +
>                   " regular text",Store.YES, Index.TOKENIZED));
>       indexWriter.addDocument(doc);
>
> Now URDU_STOP_WORDS[0] should not appear within the index terms.
> You can easily verify this by iterating IndexReader.terms();
>
> Regards, Doron
>
> On Dec 27, 2007 9:36 AM, Liaqat Ali <liaqatalimian@gmail.com> wrote:
>
>   
>> Hi, Grant
>>
>> I think i did not make my self clear. I am trying to pass a list of Urdu
>> Stop words as a argument to the Standard Analyzer. But it does work well
>> for me..
>>
>> public static final String[] URDU_STOP_WORDS = { "" ,"" ,"" ,""
>> ,"" ,"" ,"" ,"" ,"","" ,""
>> ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" };
>> Analyzer analyzer = new StandardAnalyzer(URDU_STOP_WORDS);
>>
>>
>> Kindly give some guidelines.
>>
>> Regards,
>> Liaqat
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     

The whole program is given below. But it does not eliminate stop words 
from the index.


import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;

import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;

import java.io.*;


public class urduIndexer1  {

   

    Reader file;
    BufferedReader buff;
    String line;
    IndexWriter writer;
    String indexDir;
    Directory dir;

    public static final String[] URDU_STOP_WORDS = { "" ,"" ,"" 
,"" ,"" ,"" ,"" ,"" ,"","" ,""
,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,""  };


    public void index() throws IOException,
     UnsupportedEncodingException {

       
        indexDir = "D:\\UIR\\index";
        Analyzer analyzer = new StandardAnalyzer(URDU_STOP_WORDS);
            boolean createFlag = true;

        dir = FSDirectory.getDirectory(indexDir);
        writer = new IndexWriter(dir, analyzer, createFlag);

        for (int i=1;i<=201;i++)  {



            file = new InputStreamReader(new 
FileInputStream("corpus\\doc" + i + ".txt"), "UTF-8");

            StringBuffer sb = new StringBuffer();

            buff = new BufferedReader(file);

            //line = buff.readLine();


            while( (line = buff.readLine()) != null) {
                        sb.append(line);
                }



            boolean eof = false;

                Document document  = new Document();
            document.add(new Field("contents",sb.toString(), 
Field.Store.NO, Field.Index.TOKENIZED));
           

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 08:46:41 2007
Return-Path: <java-user-return-31666-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86880 invoked from network); 27 Dec 2007 08:46:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 08:46:41 -0000
Received: (qmail 57731 invoked by uid 500); 27 Dec 2007 08:46:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57694 invoked by uid 500); 27 Dec 2007 08:46:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57683 invoked by uid 99); 27 Dec 2007 08:46:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 00:46:24 -0800
X-ASF-Spam-Status: No, hits=3.0 required=10.0
	tests=MIME_QP_LONG_LINE,SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [209.191.106.159] (HELO smtp128.plus.mail.mud.yahoo.com) (209.191.106.159)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 27 Dec 2007 08:46:11 +0000
Received: (qmail 81534 invoked from network); 27 Dec 2007 08:46:01 -0000
Received: from unknown (HELO ?192.168.1.101?) (nhira@cognocys.com@75.168.21.119 with plain)
  by smtp128.plus.mail.mud.yahoo.com with SMTP; 27 Dec 2007 08:46:00 -0000
X-YMail-OSG: 7CAn4Z8VM1nQlpnX2mmFiabp8N6ulnlt5QUtjVwb7V7z4O9LqgGXEAAy6apN86PMzCli7Gg2IA--
Mime-Version: 1.0 (Apple Message framework v753)
In-Reply-To: <477360C4.7070004@gmail.com>
References: <4772AD46.9050709@gmail.com> <4772B174.9060404@gmail.com>	 <4772BA98.5020403@gmail.com>	 <e05f0fd10712261341k1f533527hd882a2e5b3bd4711@mail.gmail.com>	 <4772D0CC.4090006@gmail.com>	 <B1FFF2F8-B11F-493D-AAAC-E61C92A3215C@apache.org>	 <4772D485.6090605@gmail.com>	 <1B43DF61-1797-426A-AC14-B975888254DB@apache.org>	 <477355E7.6080601@gmail.com> <e05f0fd10712270017o1ccd70b8me6f42c901a66bbf0@mail.gmail.com> <477360C4.7070004@gmail.com>
Content-Type: text/plain; charset=UTF-8; delsp=yes; format=flowed
Message-Id: <0A277A99-73F1-4D6E-B0A1-C35C5CD23C53@cognocys.com>
Content-Transfer-Encoding: quoted-printable
From: "N. Hira" <nhira@cognocys.com>
Subject: Re: StopWords problem
Date: Thu, 27 Dec 2007 02:45:55 -0600
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.753)
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Liaqat,

Are you sure that the Urdu characters are being correctly interpreted =20=

by the JVM even during the file I/O operation?

I would expect Unicode characters to be encoded as multi-byte =20
sequences and so, the string-matching operations would fail (if the =20
literals are different from the file encoding).

Can you try out a simple indexOf() to confirm that this is not going on?
E.g., for a document where you know a stop word occurs, print out the =20=

value of:
	line.indexOf(URDU_STOP_WORDS[1])

Regards,

-h
----------------------------------------------------------------------
Hira, N.R.
Solutions Architect
Cognocys, Inc.

On 27-Dec-2007, at 2:22 AM, Liaqat Ali wrote:

> Doron Cohen wrote:
>> Hi Liagat,
>>
>> This part of the code seems correct and should work, so problem
>> must be elsewhere.
>>
>> Can you post a short program that demonstrates the problem?
>>
>> You can start with something like this:
>>       Document doc =3D new Document();
>>       doc.add(new Field("text",URDU_STOP_WORDS[0] +
>>                   " regular text",Store.YES, Index.TOKENIZED));
>>       indexWriter.addDocument(doc);
>>
>> Now URDU_STOP_WORDS[0] should not appear within the index terms.
>> You can easily verify this by iterating IndexReader.terms();
>>
>> Regards, Doron
>>
>> On Dec 27, 2007 9:36 AM, Liaqat Ali <liaqatalimian@gmail.com> wrote:
>>
>>
>>> Hi, Grant
>>>
>>> I think i did not make my self clear. I am trying to pass a list =20
>>> of Urdu
>>> Stop words as a argument to the Standard Analyzer. But it does =20
>>> work well
>>> for me..
>>>
>>> public static final String[] URDU_STOP_WORDS =3D =20
>>> { "=DA=A9=DB=8C" ,"=DA=A9=D8=A7" ,"=DA=A9=D9=88" ,"=DB=81=DB=92"
>>> ,"=DA=A9=DB=92" ,"=D9=86=DB=92" ,"=D9=BE=D8=B1" ,"=D8=A7=D9=88=D8=B1" =
,"=D8=B3=DB=92","=D9=85=DB=8C=DA=BA" ,"=D8=A8=DA=BE=DB=8C"
>>> ,"=D8=A7=D9=86" ,"=D8=A7=DB=8C=DA=A9" ,"=D8=AA=DA=BE=D8=A7" =
,"=D8=AA=DA=BE=DB=8C" ,"=DA=A9=DB=8C=D8=A7" ,"=DB=81=DB=8C=DA=BA" =
,"=DA=A9=D8=B1" ,"=20
>>> =D9=88=DB=81" ,"=D8=AC=D8=B3" ,"=D9=86=DB=81=DA=BA" ,"=D8=AA=DA=A9" =
};
>>> Analyzer analyzer =3D new StandardAnalyzer(URDU_STOP_WORDS);
>>>
>>>
>>> Kindly give some guidelines.
>>>
>>> Regards,
>>> Liaqat
>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>
> The whole program is given below. But it does not eliminate stop =20
> words from the index.
>
>
> import org.apache.lucene.store.Directory;
> import org.apache.lucene.store.FSDirectory;
> import org.apache.lucene.index.IndexWriter;
> import org.apache.lucene.analysis.Analyzer;
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
>
> import org.apache.lucene.document.Document;
> import org.apache.lucene.document.Field;
>
> import java.io.*;
>
>
> public class urduIndexer1  {
>
>
>    Reader file;
>    BufferedReader buff;
>    String line;
>    IndexWriter writer;
>    String indexDir;
>    Directory dir;
>
>    public static final String[] URDU_STOP_WORDS =3D =20
> { "=DA=A9=DB=8C" ,"=DA=A9=D8=A7" ,"=DA=A9=D9=88" ,"=DB=81=DB=92" =
,"=DA=A9=DB=92" ,"=D9=86=DB=92" ,"=D9=BE=D8=B1" ,"=D8=A7=D9=88=D8=B1" ,"=20=

> =D8=B3=DB=92","=D9=85=DB=8C=DA=BA" ,"=D8=A8=DA=BE=DB=8C"
> ,"=D8=A7=D9=86" ,"=D8=A7=DB=8C=DA=A9" ,"=D8=AA=DA=BE=D8=A7" ,"=D8=AA=DA=BE=
=DB=8C" ,"=DA=A9=DB=8C=D8=A7" ,"=DB=81=DB=8C=DA=BA" ,"=DA=A9=D8=B1" ,"=D9=88=
=20
> =DB=81" ,"=D8=AC=D8=B3" ,"=D9=86=DB=81=DA=BA" ,"=D8=AA=DA=A9"  };
>
>
>    public void index() throws IOException,
>     UnsupportedEncodingException {
>
>              indexDir =3D "D:\\UIR\\index";
>        Analyzer analyzer =3D new StandardAnalyzer(URDU_STOP_WORDS);
>            boolean createFlag =3D true;
>
>        dir =3D FSDirectory.getDirectory(indexDir);
>        writer =3D new IndexWriter(dir, analyzer, createFlag);
>
>        for (int i=3D1;i<=3D201;i++)  {
>
>
>
>            file =3D new InputStreamReader(new FileInputStream("corpus\=20=

> \doc" + i + ".txt"), "UTF-8");
>
>            StringBuffer sb =3D new StringBuffer();
>
>            buff =3D new BufferedReader(file);
>
>            //line =3D buff.readLine();
>
>
>            while( (line =3D buff.readLine()) !=3D null) {
>                        sb.append(line);
>                }
>
>
>
>            boolean eof =3D false;
>
>                Document document  =3D new Document();
>            document.add(new Field("contents",sb.toString(), =20
> Field.Store.NO, Field.Index.TOKENIZED));
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 08:56:28 2007
Return-Path: <java-user-return-31667-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88644 invoked from network); 27 Dec 2007 08:56:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 08:56:28 -0000
Received: (qmail 62602 invoked by uid 500); 27 Dec 2007 08:56:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62573 invoked by uid 500); 27 Dec 2007 08:56:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62562 invoked by uid 99); 27 Dec 2007 08:56:11 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 00:56:11 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 08:55:48 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1708517fga.27
        for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 00:55:51 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=QpU+ufnw229pqE09ooJty29CeIXoDBbfQ0viYJrDKrw=;
        b=b5zYQ29CZOi5VSw68/CI1fpTFyZ7CqtJ0WYq/uFuxQj41oYApzFUfleZ3gLSqmBUKpkbdwIH0Aa4aiPHJZ38Upe8v6Romt0PXxn1Wa7uFpQhUo/uTTmZCzpsUpDBllW5VC2ekeUfsngM9WLo6SUaHJhmKzcCMHHHuLc4AygWajY=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=uooZ6KgA4xDa2WjzjBZiYxu7t2iLixp8dcMu8qLl4l0pvgMDR/DV8YkOXEHFTHrqVpkvqoYvRkXdfiIqwnourEDgiLYVdphPBJIwq00z2zgm9+fy/cFNNHY1xZ3uSUd73HNvG0dFr3Y8sTIoCnNnZ6YiQgzh9NF2sTaB8AEfbEs=
Received: by 10.86.65.11 with SMTP id n11mr7598045fga.26.1198745751287;
        Thu, 27 Dec 2007 00:55:51 -0800 (PST)
Received: by 10.86.50.1 with HTTP; Thu, 27 Dec 2007 00:55:51 -0800 (PST)
Message-ID: <e05f0fd10712270055g7bac2974x9540970ba223babd@mail.gmail.com>
Date: Thu, 27 Dec 2007 10:55:51 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StopWords problem
In-Reply-To: <477360C4.7070004@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11007_9094775.1198745751268"
References: <4772AD46.9050709@gmail.com> <4772BA98.5020403@gmail.com>
	 <e05f0fd10712261341k1f533527hd882a2e5b3bd4711@mail.gmail.com>
	 <4772D0CC.4090006@gmail.com>
	 <B1FFF2F8-B11F-493D-AAAC-E61C92A3215C@apache.org>
	 <4772D485.6090605@gmail.com>
	 <1B43DF61-1797-426A-AC14-B975888254DB@apache.org>
	 <477355E7.6080601@gmail.com>
	 <e05f0fd10712270017o1ccd70b8me6f42c901a66bbf0@mail.gmail.com>
	 <477360C4.7070004@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11007_9094775.1198745751268
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

This is not a self contained program - it is incomplete, and it depends
on files on *your* disk...

Still, can you show why you're saying it indexes stopwords?
Can you print here few samples of IndexReader.terms().term()?

BR, Doron

On Dec 27, 2007 10:22 AM, Liaqat Ali <liaqatalimian@gmail.com> wrote:

>
> The whole program is given below. But it does not eliminate stop words
> from the index.
>
>                Document document  = new Document();
>            document.add(new Field("contents",sb.toString(),
> Field.Store.NO, Field.Index.TOKENIZED));
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11007_9094775.1198745751268--

From java-user-return-31668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 09:50:43 2007
Return-Path: <java-user-return-31668-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96676 invoked from network); 27 Dec 2007 09:50:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 09:50:43 -0000
Received: (qmail 85293 invoked by uid 500); 27 Dec 2007 09:50:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85262 invoked by uid 500); 27 Dec 2007 09:50:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85248 invoked by uid 99); 27 Dec 2007 09:50:26 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 01:50:26 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 72.14.202.183 as permitted sender)
Received: from [72.14.202.183] (HELO ro-out-1112.google.com) (72.14.202.183)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 09:50:01 +0000
Received: by ro-out-1112.google.com with SMTP id k5so791147rog.7
        for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 01:50:04 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=jAQcZ+BkSANHs0vT5ir/nRFv2CQArJu9ebr4D59Wf5U=;
        b=hm41QNHWYDMUXEoTxHdmGMpt1TnsyLJLunWbGdY3VWEj0Cx6K2boKMD3MxxF/uZM7VHuJypcdMlXgKU8MMVORnmTyGmzg0fWM5AtNT48q1me/RNJAZfSOkJxpEG+w5Nnpi7CYZvARp5+wTUO7xqmvvgE5PefyAgm+eYKFIvZnIk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=RD51ZC8O6H6YbOX9d8UJtFR1BZjCoI/tPKnxdHuDcrBRRN2mzEuIKLQbtBTfWJOE1FS9COGWpOKBEzFMyLoqJyXGgwLZaViiA17y0zZoYtgS5UpcqqknqWUNXAc2PgDhJ8GtAaTpIVlhJvt/KEKcPhE1gZoQAGZ3aLdm4aeeyT0=
Received: by 10.114.157.1 with SMTP id f1mr7978010wae.13.1198749001981;
        Thu, 27 Dec 2007 01:50:01 -0800 (PST)
Received: from ?10.0.108.85? ( [202.125.143.68])
        by mx.google.com with ESMTPS id m6sm13159255wag.11.2007.12.27.01.49.58
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 27 Dec 2007 01:50:01 -0800 (PST)
Message-ID: <47737540.6010609@gmail.com>
Date: Thu, 27 Dec 2007 14:49:52 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StopWords problem
References: <4772AD46.9050709@gmail.com> <4772BA98.5020403@gmail.com>	 <e05f0fd10712261341k1f533527hd882a2e5b3bd4711@mail.gmail.com>	 <4772D0CC.4090006@gmail.com>	 <B1FFF2F8-B11F-493D-AAAC-E61C92A3215C@apache.org>	 <4772D485.6090605@gmail.com>	 <1B43DF61-1797-426A-AC14-B975888254DB@apache.org>	 <477355E7.6080601@gmail.com>	 <e05f0fd10712270017o1ccd70b8me6f42c901a66bbf0@mail.gmail.com>	 <477360C4.7070004@gmail.com> <e05f0fd10712270055g7bac2974x9540970ba223babd@mail.gmail.com>
In-Reply-To: <e05f0fd10712270055g7bac2974x9540970ba223babd@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org

Doron Cohen wrote:
> This is not a self contained program - it is incomplete, and it depends
> on files on *your* disk...
>
> Still, can you show why you're saying it indexes stopwords?
> Can you print here few samples of IndexReader.terms().term()?
>
> BR, Doron
>
> On Dec 27, 2007 10:22 AM, Liaqat Ali <liaqatalimian@gmail.com> wrote:
>
>   
>> The whole program is given below. But it does not eliminate stop words
>> from the index.
>>
>>                Document document  = new Document();
>>            document.add(new Field("contents",sb.toString(),
>> Field.Store.NO, Field.Index.TOKENIZED));
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>     
>
> Hi, Doron
>   
I got your point. The program given does not give not any error during 
compilation and it is interpreted well. But the it does not create any 
index. when the StandardAnalyzer() is called without Stopwords list it 
works well, but when the list of stop words is passed as an argument, 
then it does not.



import org.apache.lucene.store.Directory;
import org.apache.lucene.store.FSDirectory;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.analysis.Analyzer;
import org.apache.lucene.analysis.standard.StandardAnalyzer;

import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;

import java.io.*;


public class urduIndexer1 {



Reader file;
BufferedReader buff;
String line;
IndexWriter writer;
String indexDir;
Directory dir;

public static final String[] URDU_STOP_WORDS = { "" ,"" ,"" ,"" 
,"" ,"" ,"" ,"" ,"","" ,""
,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" ,"" };


public void index() throws IOException,
UnsupportedEncodingException {


indexDir = "D:\\UIR\\in";
Analyzer analyzer = new StandardAnalyzer(URDU_STOP_WORDS);
boolean createFlag = true;

dir = FSDirectory.getDirectory(indexDir);
writer = new IndexWriter(dir, analyzer, createFlag);

for (int i=1;i<=201;i++) {



file = new InputStreamReader(new FileInputStream("corpus\\doc" + i + 
".txt"), "UTF-8");

StringBuffer sb = new StringBuffer();

buff = new BufferedReader(file);

//line = buff.readLine();


while( (line = buff.readLine()) != null) {
sb.append(line);
}



boolean eof = false;

Document document = new Document();
document.add(new Field("contents",sb.toString(), Field.Store.NO, 
Field.Index.TOKENIZED));

//document.add(new Field("Document","Doc" + 
i,Field.Store.YES,Field.Index.TOKENIZED));


writer.addDocument(document);

buff.close();



}
writer.optimize();
writer.close();



}


public static void main(String arg[]) throws Exception{


urduIndexer indx = new urduIndexer();
indx.index();





}




}


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 10:17:35 2007
Return-Path: <java-user-return-31669-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 278 invoked from network); 27 Dec 2007 10:17:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 10:17:35 -0000
Received: (qmail 4371 invoked by uid 500); 27 Dec 2007 10:17:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4338 invoked by uid 500); 27 Dec 2007 10:17:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4327 invoked by uid 99); 27 Dec 2007 10:17:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 02:17:18 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.153 as permitted sender)
Received: from [72.14.220.153] (HELO fg-out-1718.google.com) (72.14.220.153)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 10:16:56 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1724384fga.27
        for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 02:16:59 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=m6Cc6AGT/5MceyoTuS4D9ZD6ZExkRf8SejFqnR6Gai0=;
        b=Fh44Nop8goibX1gZzD7RdFxFq3fI2c3TMYaARUDuqNPvLwj69mfeoCQwjWjJquoi9VkZ45orzEZGTHGv34G7zyjIsHFr64UgqXn+SCFFdcYGWXsk2i/YgCjadv8WIzeIEWpw/IaBw7okOgzqXO3bHN+b6PlQuFVGrXBtmOKJNyk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=JQE5MDbdFmAMAwsrEgpQjbVhYJZE9Ent1QQSnH3U5fN7m/obcLCPLBH8OZw/Kggsc2Jj4REMT0fPgyxSIkU7WZG+RoqwPXuJ7ZoRbXDSJFgwd3tu4mrmDSelECD2p5oMft2siCCjH0snT+mxtMLolmLu5+kDgg9K0Q4rf9WdrQM=
Received: by 10.86.9.8 with SMTP id 8mr7652198fgi.70.1198750619107;
        Thu, 27 Dec 2007 02:16:59 -0800 (PST)
Received: by 10.86.50.1 with HTTP; Thu, 27 Dec 2007 02:16:59 -0800 (PST)
Message-ID: <e05f0fd10712270216i7ddb0aa3q8bfac6845b8f2c5c@mail.gmail.com>
Date: Thu, 27 Dec 2007 12:16:59 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StopWords problem
In-Reply-To: <47737540.6010609@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11143_17225550.1198750619096"
References: <4772AD46.9050709@gmail.com> <4772D0CC.4090006@gmail.com>
	 <B1FFF2F8-B11F-493D-AAAC-E61C92A3215C@apache.org>
	 <4772D485.6090605@gmail.com>
	 <1B43DF61-1797-426A-AC14-B975888254DB@apache.org>
	 <477355E7.6080601@gmail.com>
	 <e05f0fd10712270017o1ccd70b8me6f42c901a66bbf0@mail.gmail.com>
	 <477360C4.7070004@gmail.com>
	 <e05f0fd10712270055g7bac2974x9540970ba223babd@mail.gmail.com>
	 <47737540.6010609@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11143_17225550.1198750619096
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

On Dec 27, 2007 11:49 AM, Liaqat Ali <liaqatalimian@gmail.com> wrote:

> I got your point. The program given does not give not any error during
> compilation and it is interpreted well. But the it does not create any
> index. when the StandardAnalyzer() is called without Stopwords list it
> works well, but when the list of stop words is passed as an argument,
> then it does not.


Hi Liaqat, I am confused, are you saying that the program creates no
index when stopwords are used?

All this time I thought the problem you get is that stopwords are indexed
as if they were regular words, but now you say no index is created..

Is there any exception thrown?
Do you see that there is no index to be found on the file system?
Or do you mean after closing the IndexWriter and opening an
IndexReader or IndexSearcher its numDocs is 0?
Or perhaps the index contains documents but your query search
finds nothing?

Again, a stand-alone Java program that demonstrates the problem
would be best and save your time and others. Lucene's Junit
tests are good examples of short programs that demonstrate
a problem, and fails unless the problem is fixed.

Regards, Doron

------=_Part_11143_17225550.1198750619096--

From java-user-return-31670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 10:27:50 2007
Return-Path: <java-user-return-31670-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1492 invoked from network); 27 Dec 2007 10:27:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 10:27:50 -0000
Received: (qmail 11723 invoked by uid 500); 27 Dec 2007 10:27:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11696 invoked by uid 500); 27 Dec 2007 10:27:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11685 invoked by uid 99); 27 Dec 2007 10:27:31 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 02:27:31 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 66.249.92.168 as permitted sender)
Received: from [66.249.92.168] (HELO ug-out-1314.google.com) (66.249.92.168)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 10:27:08 +0000
Received: by ug-out-1314.google.com with SMTP id u40so1599462ugc.29
        for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 02:27:11 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=XPwewUankSetiw7B010HlUUoHSBuYw4vZI5k/tCOYSA=;
        b=c7yxqoxReiHRQbwHS82pW6kCbl3Y7W5NBf8BI4y3o8H5KpKBr45bwjDQjPzTv8PycG5RzRd0jRcxl6H9zAK3dJWToeYRr/+tPa9eNU+VjCU1X5Jo7GRnHXye1SPAWXJt+WIrrEt4k/dCyjh14eZRoRP8dI1TtJGo4yvBCKO9BHM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=NOeAJYFVsbBtki3DGgA2+3ENkW/viZzNa+Z5UsY2k8TEjLyY7dXdA0fjshjliD3MOr5xHKTi28BQJQtAMT5Z0BgGZYvpnoIZy1Zcl333CRVzmR2+a5n39UosfV2D463DAFOKphlb+QaXNwHTQwWloqQvkRGo82XQOpum84o+9LI=
Received: by 10.67.122.10 with SMTP id z10mr6507428ugm.44.1198751230927;
        Thu, 27 Dec 2007 02:27:10 -0800 (PST)
Received: from ?10.0.108.85? ( [202.125.143.68])
        by mx.google.com with ESMTPS id e5sm9498298ugf.8.2007.12.27.02.27.06
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Thu, 27 Dec 2007 02:27:10 -0800 (PST)
Message-ID: <47737DF1.9080707@gmail.com>
Date: Thu, 27 Dec 2007 15:26:57 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: StopWords problem
References: <4772AD46.9050709@gmail.com> <4772D0CC.4090006@gmail.com>	 <B1FFF2F8-B11F-493D-AAAC-E61C92A3215C@apache.org>	 <4772D485.6090605@gmail.com>	 <1B43DF61-1797-426A-AC14-B975888254DB@apache.org>	 <477355E7.6080601@gmail.com>	 <e05f0fd10712270017o1ccd70b8me6f42c901a66bbf0@mail.gmail.com>	 <477360C4.7070004@gmail.com>	 <e05f0fd10712270055g7bac2974x9540970ba223babd@mail.gmail.com>	 <47737540.6010609@gmail.com> <e05f0fd10712270216i7ddb0aa3q8bfac6845b8f2c5c@mail.gmail.com>
In-Reply-To: <e05f0fd10712270216i7ddb0aa3q8bfac6845b8f2c5c@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Doron Cohen wrote:
> On Dec 27, 2007 11:49 AM, Liaqat Ali <liaqatalimian@gmail.com> wrote:
>
>   
>> I got your point. The program given does not give not any error during
>> compilation and it is interpreted well. But the it does not create any
>> index. when the StandardAnalyzer() is called without Stopwords list it
>> works well, but when the list of stop words is passed as an argument,
>> then it does not.
>>     
>
>
> Hi Liaqat, I am confused, are you saying that the program creates no
> index when stopwords are used?
>
> All this time I thought the problem you get is that stopwords are indexed
> as if they were regular words, but now you say no index is created..
>
> Is there any exception thrown?
> Do you see that there is no index to be found on the file system?
> Or do you mean after closing the IndexWriter and opening an
> IndexReader or IndexSearcher its numDocs is 0?
> Or perhaps the index contains documents but your query search
> finds nothing?
>
> Again, a stand-alone Java program that demonstrates the problem
> would be best and save your time and others. Lucene's Junit
> tests are good examples of short programs that demonstrate
> a problem, and fails unless the problem is fixed.
>
> Regards, Doron
>
>   
Thanks alot Doron,  I was confused too, the index i thought was created 
by previous program. But this time when I run this program  (with 
stopwords as a argument), then it does not create index in the given 
directory, there is nothing inside the specified directory.
There is no error during compilation or during interpretation. And I am 
using LUKE for retrieval. So kindly suggest some guidelines.

Regards,
Liaqat

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 10:48:13 2007
Return-Path: <java-user-return-31671-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3057 invoked from network); 27 Dec 2007 10:48:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 10:48:13 -0000
Received: (qmail 27197 invoked by uid 500); 27 Dec 2007 10:47:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26935 invoked by uid 500); 27 Dec 2007 10:47:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26924 invoked by uid 99); 27 Dec 2007 10:47:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 02:47:55 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of cdoronc@gmail.com designates 72.14.220.152 as permitted sender)
Received: from [72.14.220.152] (HELO fg-out-1718.google.com) (72.14.220.152)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 10:47:34 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1730084fga.27
        for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 02:47:37 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Q2wBrQNHXISX1Xt9r8StfbxGZVqRnCQvZ84j42Vpkyg=;
        b=xOwmeD+ppOKKNwE1jGFQijjK4yjJNhBHhaE/11rOklyTOGTiVVen3QymLOJC9K0O7cqgSwDV+bOKmYIfSsvEyCY1iACXiXixfAv2EX7yDKTEtcWka6CqAoB6s5cRneKSk67gbvAatV8XiBKZUpzSN1kDFT88eshQSvtT6aZHDh4=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=Y9IqQaeViaFBud/31uMtWBUaeOMn798ny71nPl+djHhkbKrhEeR2jLpkVrmSjgx3295+EPDWobvd6fnK/kl9J7m9Lu1gxGeyrxVYAcctssPqa8+423mmq7lxfTIR/kEhcZb6sXQ02LIXrn1v8l6uTQ+aVQwrNjfEdPkhUlXMZo0=
Received: by 10.86.91.12 with SMTP id o12mr7669642fgb.55.1198752457694;
        Thu, 27 Dec 2007 02:47:37 -0800 (PST)
Received: by 10.86.50.1 with HTTP; Thu, 27 Dec 2007 02:47:37 -0800 (PST)
Message-ID: <e05f0fd10712270247q38d52ad8kd1da1ae269d7e31e@mail.gmail.com>
Date: Thu, 27 Dec 2007 12:47:37 +0200
From: "Doron Cohen" <cdoronc@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: StopWords problem
In-Reply-To: <47737DF1.9080707@gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11164_32455284.1198752457686"
References: <4772AD46.9050709@gmail.com> <4772D485.6090605@gmail.com>
	 <1B43DF61-1797-426A-AC14-B975888254DB@apache.org>
	 <477355E7.6080601@gmail.com>
	 <e05f0fd10712270017o1ccd70b8me6f42c901a66bbf0@mail.gmail.com>
	 <477360C4.7070004@gmail.com>
	 <e05f0fd10712270055g7bac2974x9540970ba223babd@mail.gmail.com>
	 <47737540.6010609@gmail.com>
	 <e05f0fd10712270216i7ddb0aa3q8bfac6845b8f2c5c@mail.gmail.com>
	 <47737DF1.9080707@gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11164_32455284.1198752457686
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Try printing all these after you close the writer:
- ((FSDirectory) dir).getFile().getAbsolutePath()
- dir.list().length  (n)
- dir.list()[0], .. , dir.list[n]

This should at least help you verify that an index was created and where.

Regards,
Doron

On Dec 27, 2007 12:26 PM, Liaqat Ali <liaqatalimian@gmail.com> wrote:

> Doron Cohen wrote:
> > On Dec 27, 2007 11:49 AM, Liaqat Ali <liaqatalimian@gmail.com> wrote:
> >
> >
> >> I got your point. The program given does not give not any error during
> >> compilation and it is interpreted well. But the it does not create any
> >> index. when the StandardAnalyzer() is called without Stopwords list it
> >> works well, but when the list of stop words is passed as an argument,
> >> then it does not.
> >>
> >
> >
> > Hi Liaqat, I am confused, are you saying that the program creates no
> > index when stopwords are used?
> >
> > All this time I thought the problem you get is that stopwords are
> indexed
> > as if they were regular words, but now you say no index is created..
> >
> > Is there any exception thrown?
> > Do you see that there is no index to be found on the file system?
> > Or do you mean after closing the IndexWriter and opening an
> > IndexReader or IndexSearcher its numDocs is 0?
> > Or perhaps the index contains documents but your query search
> > finds nothing?
> >
> > Again, a stand-alone Java program that demonstrates the problem
> > would be best and save your time and others. Lucene's Junit
> > tests are good examples of short programs that demonstrate
> > a problem, and fails unless the problem is fixed.
> >
> > Regards, Doron
> >
> >
> Thanks alot Doron,  I was confused too, the index i thought was created
> by previous program. But this time when I run this program  (with
> stopwords as a argument), then it does not create index in the given
> directory, there is nothing inside the specified directory.
> There is no error during compilation or during interpretation. And I am
> using LUKE for retrieval. So kindly suggest some guidelines.
>
> Regards,
> Liaqat
>

------=_Part_11164_32455284.1198752457686--

From java-user-return-31672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 13:59:36 2007
Return-Path: <java-user-return-31672-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35607 invoked from network); 27 Dec 2007 13:59:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 13:59:36 -0000
Received: (qmail 21060 invoked by uid 500); 27 Dec 2007 13:59:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21021 invoked by uid 500); 27 Dec 2007 13:59:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21010 invoked by uid 99); 27 Dec 2007 13:59:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 05:59:19 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of zhouqi.jackson@gmail.com designates 209.85.128.187 as permitted sender)
Received: from [209.85.128.187] (HELO fk-out-0910.google.com) (209.85.128.187)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 13:58:57 +0000
Received: by fk-out-0910.google.com with SMTP id z23so3330192fkz.5
        for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 05:59:00 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:mime-version:content-type;
        bh=jd6YbCGifIyX2TjiOaOQWnjd8JI8j5YokCY+5GZyoOw=;
        b=sOayprxIpOLxGPfrf9xYox5nZwUObKXH0HmRhQUqTLg4hXUuUpCFE8rMjiexrOBWNp42oS/5IlJNuFt0OKwBlU1QQd2uLGEKSIMUy4U591Kuyl5lox3qbwQZhouzcHthKrSQlHnxIYcLlqRs7iNwwA3hZ3TwWw/c0QEXEzIJiK8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:mime-version:content-type;
        b=R5UzIvTWS4m+QGE/cuOlwdRYY9AEMs+LhV1f7R6YYogxjPGD0Gi2trNgg6GfvzVWW+ZOoiAI57hfjrho1cEeQzvrvtcPPoAXdh5aK7cTv1jIC1Mvsii9cxYkw3yvMUC/yaj6jbersQKNry8hykCVRV56tWxFV/mOM2OzN9/SNFc=
Received: by 10.82.184.2 with SMTP id h2mr14555020buf.22.1198763940376;
        Thu, 27 Dec 2007 05:59:00 -0800 (PST)
Received: by 10.82.151.11 with HTTP; Thu, 27 Dec 2007 05:59:00 -0800 (PST)
Message-ID: <72d748c20712270559q644d34c4s35b25bedaf67c28f@mail.gmail.com>
Date: Thu, 27 Dec 2007 21:59:00 +0800
From: "Zhou Qi" <zhouqi.jackson@gmail.com>
To: java-user@lucene.apache.org
Subject: IndexReader open problem?
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11204_31017445.1198763940381"
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11204_31017445.1198763940381
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hi all,

  I encounter a strange probelm. To improve performance, I open the
indexreader at the start time and reuse it in later search. I have another
process running to do online indexing. The search service and indexing
service is accessing the same index folder. But I found out the search
service only returns old documents. That is to say, my index reader did not
refresh the index folder for up-to-date index. If it acutally works like
that in lucene, should I try to open the index to init the indexreader
everytime I do search?

Thanks

------=_Part_11204_31017445.1198763940381--

From java-user-return-31673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 14:06:44 2007
Return-Path: <java-user-return-31673-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37091 invoked from network); 27 Dec 2007 14:06:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 14:06:44 -0000
Received: (qmail 25893 invoked by uid 500); 27 Dec 2007 14:06:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25861 invoked by uid 500); 27 Dec 2007 14:06:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25850 invoked by uid 99); 27 Dec 2007 14:06:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 06:06:28 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.190 as permitted sender)
Received: from [209.85.128.190] (HELO fk-out-0910.google.com) (209.85.128.190)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 14:06:06 +0000
Received: by fk-out-0910.google.com with SMTP id z23so3333441fkz.5
        for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 06:06:10 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=Gut81yzM1tbybgbXcc28L4fCBQghHYnr69W+E35gDRI=;
        b=U25QPSSMHNLF115dzjBaN+nRVYhuxM7SiLO7TzCiMaSioVN00z61cfacf2X8up5CvCl/8jNrr1q3Or0ePLxUpc5dpVfBu4zSeA2CkWezcbXVosiycdUIecbisv3gttgWQZwxDEQaDX4mrAJ4uC+muAoaZ7JLg/bAz9dz0QZplWc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KbmRVpXdCIa085tH1YvMfN0ncRD6BKWJJPB6bqjV0azNx0fZZzU917kQ6xFAQuw0Ey4FLeDbdRJF1aSw/9zVD0espJoB6ypFzX85e5dIvEmxLgGCehF5vwzIRYa2/jLtT4gDgabiuQFL7Gxfbo8wpqvnRQpycASxL0Ktz3cZglI=
Received: by 10.82.160.19 with SMTP id i19mr14568378bue.19.1198764369709;
        Thu, 27 Dec 2007 06:06:09 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 27 Dec 2007 06:06:09 -0800 (PST)
Message-ID: <359a92830712270606t6bf45452x12fe6d22fa79f28d@mail.gmail.com>
Date: Thu, 27 Dec 2007 09:06:09 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader open problem?
In-Reply-To: <72d748c20712270559q644d34c4s35b25bedaf67c28f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10670_9919849.1198764369694"
References: <72d748c20712270559q644d34c4s35b25bedaf67c28f@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10670_9919849.1198764369694
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

If you search the mail archives, you'll find many discussions
of the fact that when you open an index reader, it takes a
snapshot of the index and subsequent modifications to the
index are not available until the searcher is closed and re-opened.

It is NOT a good idea to open a new reader every time you search,
as this is an expensive operation. You have to reach some
compromise between absolutely up-to-date results and how
much closing/opening of your readers you can afford.

A bunch of approaches are discussed in the archives, so one of
those discussions may parallel your situation. Otherwise, you
need to give us some idea of your constraints before anyone can
suggest an approach.

Best
Erick

On Dec 27, 2007 8:59 AM, Zhou Qi <zhouqi.jackson@gmail.com> wrote:

> Hi all,
>
>  I encounter a strange probelm. To improve performance, I open the
> indexreader at the start time and reuse it in later search. I have another
> process running to do online indexing. The search service and indexing
> service is accessing the same index folder. But I found out the search
> service only returns old documents. That is to say, my index reader did
> not
> refresh the index folder for up-to-date index. If it acutally works like
> that in lucene, should I try to open the index to init the indexreader
> everytime I do search?
>
> Thanks
>

------=_Part_10670_9919849.1198764369694--

From java-user-return-31674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 14:34:35 2007
Return-Path: <java-user-return-31674-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41683 invoked from network); 27 Dec 2007 14:34:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 14:34:35 -0000
Received: (qmail 53470 invoked by uid 500); 27 Dec 2007 14:34:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53431 invoked by uid 500); 27 Dec 2007 14:34:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53420 invoked by uid 99); 27 Dec 2007 14:34:18 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 06:34:18 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 14:33:55 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J7to7-0003Dy-4b
	for java-user@lucene.apache.org; Thu, 27 Dec 2007 06:33:59 -0800
Message-ID: <14513720.post@talk.nabble.com>
Date: Thu, 27 Dec 2007 06:33:59 -0800 (PST)
From: webspeak <webspeak@hotmail.com>
To: java-user@lucene.apache.org
Subject: Search by KeyWord, the best practice
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: webspeak@hotmail.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

I would like to search documents by "CUSTOMER".
So I search on the field "CUSTOMER" using a KeywordAnalyzer.

The CUSTOMER field is indexed with those params:
Field.Index.UN_TOKENIZED
Field.Index.Store

Is it the Best Practice ?

-- 
View this message in context: http://www.nabble.com/Search-by-KeyWord%2C-the-best-practice-tp14513720p14513720.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 14:36:37 2007
Return-Path: <java-user-return-31675-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41954 invoked from network); 27 Dec 2007 14:36:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 14:36:37 -0000
Received: (qmail 57927 invoked by uid 500); 27 Dec 2007 14:36:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57895 invoked by uid 500); 27 Dec 2007 14:36:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57880 invoked by uid 99); 27 Dec 2007 14:36:20 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 06:36:20 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of zhouqi.jackson@gmail.com designates 72.14.220.157 as permitted sender)
Received: from [72.14.220.157] (HELO fg-out-1718.google.com) (72.14.220.157)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 14:36:10 +0000
Received: by fg-out-1718.google.com with SMTP id d23so1771716fga.27
        for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 06:36:02 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=3JMGumg4vynaXPIC/7vlwURDHYYADwiF/85qujb2EFI=;
        b=MuY4jpmyPA26Xf+a5TwNT4+MTqVRvEyf1OgnKzqFAPjlhd9xVpm58YKpwttx0h8VxFJb9NYPiQD2aupvUTkV0gkE9rXJQj572izsEJg5DvDqP9045vtXUHK4HTy00ZqMvSUaIxF53CWSeUsjRD9JSCFRuFpmpy67ObXeVqxGJMk=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=KSKhsgRxebZ8y6mNEOAQqXjjQV9ze4TSxvmt5BqHWfBjRpb1aIETRH0eLNw/K4laRJXbB+5oU9lII56OuyCokuQc614grnSvauznCgJCbt8XNHVCZzhQjJpVyYyucrw8n2Z8N+3JY5X2gsajRg9qi3o2uQAElN9Q83D4megCKaE=
Received: by 10.82.121.15 with SMTP id t15mr14570427buc.26.1198766162546;
        Thu, 27 Dec 2007 06:36:02 -0800 (PST)
Received: by 10.82.151.11 with HTTP; Thu, 27 Dec 2007 06:36:02 -0800 (PST)
Message-ID: <72d748c20712270636m1292d3dcv8a7551309632d2@mail.gmail.com>
Date: Thu, 27 Dec 2007 22:36:02 +0800
From: "Zhou Qi" <zhouqi.jackson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: IndexReader open problem?
In-Reply-To: <359a92830712270606t6bf45452x12fe6d22fa79f28d@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11291_8440908.1198766162417"
References: <72d748c20712270559q644d34c4s35b25bedaf67c28f@mail.gmail.com>
	 <359a92830712270606t6bf45452x12fe6d22fa79f28d@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11291_8440908.1198766162417
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Eric,

Thanks for your advise. I implement a version count to sych the index and
search.

2007/12/27, Erick Erickson <erickerickson@gmail.com>:
>
> If you search the mail archives, you'll find many discussions
> of the fact that when you open an index reader, it takes a
> snapshot of the index and subsequent modifications to the
> index are not available until the searcher is closed and re-opened.
>
> It is NOT a good idea to open a new reader every time you search,
> as this is an expensive operation. You have to reach some
> compromise between absolutely up-to-date results and how
> much closing/opening of your readers you can afford.
>
> A bunch of approaches are discussed in the archives, so one of
> those discussions may parallel your situation. Otherwise, you
> need to give us some idea of your constraints before anyone can
> suggest an approach.
>
> Best
> Erick
>
> On Dec 27, 2007 8:59 AM, Zhou Qi <zhouqi.jackson@gmail.com> wrote:
>
> > Hi all,
> >
> >  I encounter a strange probelm. To improve performance, I open the
> > indexreader at the start time and reuse it in later search. I have
> another
> > process running to do online indexing. The search service and indexing
> > service is accessing the same index folder. But I found out the search
> > service only returns old documents. That is to say, my index reader did
> > not
> > refresh the index folder for up-to-date index. If it acutally works like
> > that in lucene, should I try to open the index to init the indexreader
> > everytime I do search?
> >
> > Thanks
> >
>

------=_Part_11291_8440908.1198766162417--

From java-user-return-31676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 15:19:13 2007
Return-Path: <java-user-return-31676-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20993 invoked from network); 27 Dec 2007 15:19:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 15:19:13 -0000
Received: (qmail 79039 invoked by uid 500); 27 Dec 2007 15:18:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79005 invoked by uid 500); 27 Dec 2007 15:18:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78994 invoked by uid 99); 27 Dec 2007 15:18:56 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 07:18:56 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a1.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 15:18:41 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a1.g.dreamhost.com (Postfix) with ESMTP id 61131FFE9B
	for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 07:18:23 -0800 (PST)
Message-Id: <200EBB34-5A12-4A71-B4A0-9AECC4D8076E@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <14513720.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Search by KeyWord, the best practice
Date: Thu, 27 Dec 2007 10:18:22 -0500
References: <14513720.post@talk.nabble.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Depends on whether you want fuzzy matches on Customer or not.   
Assuming this value contains things like first and last name, I would  
think you would want to tokenize so that you can search for those  
separately.  If it truly contains something that is a single token,  
then this should be fine.  You only need to Store items if you want to  
recover the value afterward for display or something like that.

-Grant

On Dec 27, 2007, at 9:33 AM, webspeak wrote:

>
> Hello,
>
> I would like to search documents by "CUSTOMER".
> So I search on the field "CUSTOMER" using a KeywordAnalyzer.
>
> The CUSTOMER field is indexed with those params:
> Field.Index.UN_TOKENIZED
> Field.Index.Store
>
> Is it the Best Practice ?
>
> -- 
> View this message in context: http://www.nabble.com/Search-by-KeyWord%2C-the-best-practice-tp14513720p14513720.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 15:22:08 2007
Return-Path: <java-user-return-31677-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32653 invoked from network); 27 Dec 2007 15:22:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 15:22:08 -0000
Received: (qmail 81712 invoked by uid 500); 27 Dec 2007 15:21:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81682 invoked by uid 500); 27 Dec 2007 15:21:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81671 invoked by uid 99); 27 Dec 2007 15:21:50 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 07:21:50 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 15:21:26 +0000
Received: by fk-out-0910.google.com with SMTP id z23so3365678fkz.5
        for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 07:21:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=YHUxRzO+BpvCdSvHrAv7DAOsieoPPijUSV9Y7c2/JNo=;
        b=mNi1DIRpZdIMiW6QRQtzKwngJRb2peIahXiVcRV2Hc/wevhu+QwSnUQJvg+66iOfmG12dOJiPuwxyYzAHmqTVOJoeLy3598zWvbPSD18z0q5jwEeK9YVpArXu7K5tBC+bP8IIdXnS3ZZhRwOA3twpO37aLV5gW4+0nA97SBtz24=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=a1FLedvqiv8/f5OCR3u9gI1Wi/rVKshYOlfP/qVDR5l4A/oV5CbM0x3xBnpyEOrIktpHl9f94AdalPZtugbuBt9JWfP0E0BD+YHqaLFcMlHLm8K7JOOmfuXKR5wa6e7RwDglrvqZRn0Kcn7o6cakW8Bs72gQEARyVuZ2eVSnXRo=
Received: by 10.82.140.20 with SMTP id n20mr14694659bud.27.1198768889229;
        Thu, 27 Dec 2007 07:21:29 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 27 Dec 2007 07:21:29 -0800 (PST)
Message-ID: <359a92830712270721t6d203983vdc6f9fe06507f6c5@mail.gmail.com>
Date: Thu, 27 Dec 2007 10:21:29 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search by KeyWord, the best practice
In-Reply-To: <14513720.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10827_3934766.1198768889219"
References: <14513720.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10827_3934766.1198768889219
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Well, it depends upon what you want to accomplish. By indexing
UN_TOKENIZED, the text is NOT broken up. So indexing
"some text" will not match if you search on "some". or "text" or
even "text some".

You really, really, really need to tell us what it is you want to
accomplish before anyone can suggest best practices. What's
the use case you're trying to support?

Best
Erick

On Dec 27, 2007 9:33 AM, webspeak <webspeak@hotmail.com> wrote:

>
> Hello,
>
> I would like to search documents by "CUSTOMER".
> So I search on the field "CUSTOMER" using a KeywordAnalyzer.
>
> The CUSTOMER field is indexed with those params:
> Field.Index.UN_TOKENIZED
> Field.Index.Store
>
> Is it the Best Practice ?
>
> --
> View this message in context:
> http://www.nabble.com/Search-by-KeyWord%2C-the-best-practice-tp14513720p14513720.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10827_3934766.1198768889219--

From java-user-return-31678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 15:31:36 2007
Return-Path: <java-user-return-31678-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72459 invoked from network); 27 Dec 2007 15:31:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 15:31:36 -0000
Received: (qmail 89453 invoked by uid 500); 27 Dec 2007 15:31:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89424 invoked by uid 500); 27 Dec 2007 15:31:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89413 invoked by uid 99); 27 Dec 2007 15:31:19 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 07:31:19 -0800
X-ASF-Spam-Status: No, hits=3.7 required=10.0
	tests=DNS_FROM_OPENWHOIS,FORGED_HOTMAIL_RCVD2,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 15:30:56 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J7uhI-0004sI-IO
	for java-user@lucene.apache.org; Thu, 27 Dec 2007 07:31:00 -0800
Message-ID: <14514446.post@talk.nabble.com>
Date: Thu, 27 Dec 2007 07:31:00 -0800 (PST)
From: webspeak <webspeak@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search by KeyWord, the best practice
In-Reply-To: <359a92830712270721t6d203983vdc6f9fe06507f6c5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: webspeak@hotmail.com
References: <14513720.post@talk.nabble.com> <359a92830712270721t6d203983vdc6f9fe06507f6c5@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hello,

Thank you for your reply :-)
The customer value will be choosed from a dropdown list.The value that it
will be selected must match the value in the CUSTOMER field.

I think I don't have to tokenized it... as it is exact match.




Erick Erickson wrote:
> 
> Well, it depends upon what you want to accomplish. By indexing
> UN_TOKENIZED, the text is NOT broken up. So indexing
> "some text" will not match if you search on "some". or "text" or
> even "text some".
> 
> You really, really, really need to tell us what it is you want to
> accomplish before anyone can suggest best practices. What's
> the use case you're trying to support?
> 
> Best
> Erick
> 
> On Dec 27, 2007 9:33 AM, webspeak <webspeak@hotmail.com> wrote:
> 
>>
>> Hello,
>>
>> I would like to search documents by "CUSTOMER".
>> So I search on the field "CUSTOMER" using a KeywordAnalyzer.
>>
>> The CUSTOMER field is indexed with those params:
>> Field.Index.UN_TOKENIZED
>> Field.Index.Store
>>
>> Is it the Best Practice ?
>>
>> --
>> View this message in context:
>> http://www.nabble.com/Search-by-KeyWord%2C-the-best-practice-tp14513720p14513720.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/Search-by-KeyWord%2C-the-best-practice-tp14513720p14514446.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 15:40:16 2007
Return-Path: <java-user-return-31679-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11869 invoked from network); 27 Dec 2007 15:40:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 15:40:16 -0000
Received: (qmail 99655 invoked by uid 500); 27 Dec 2007 15:39:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99623 invoked by uid 500); 27 Dec 2007 15:39:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99609 invoked by uid 99); 27 Dec 2007 15:39:59 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 07:39:59 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 15:39:47 +0000
Received: by fk-out-0910.google.com with SMTP id z23so3373440fkz.5
        for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 07:39:39 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=KiIO4vl7yy6da//1dWE2VBf+5Wp8YgfLuaZU1srTYcI=;
        b=CFyQkgMIPOhUtQ3jYf6R610St9ug26ZQZZpBvQ0cFYbs+9pJFTimCAva8zvKiWe4doPwHdLMY5YGWuil90KcSmAbVss8by2LeXRhkR3nz9g0iY8rKkeKoCQHkvFFaBwXtbdRJuryJ/bdVCzauZSqFM6ilgWpobPOGoBd2SiQjZM=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=F+cr/Nbs1a8FYllP3ZdvoryQa9yrvdrlgxlVpVoestiVRtcb/xztqe1oegpt0nHeD2zzqHfTigPzVXPYpiqbFzUP5AoanzFLB+ceTzIAls2Yl2gbk4u5M9X0C7CXzzr3DymaA5yMr2PRZNHbUhIiVSByF8NBU0MQy7KDaGQ1P8c=
Received: by 10.82.134.12 with SMTP id h12mr14736128bud.29.1198769979253;
        Thu, 27 Dec 2007 07:39:39 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 27 Dec 2007 07:39:39 -0800 (PST)
Message-ID: <359a92830712270739g7606721atb24445ac0728d91@mail.gmail.com>
Date: Thu, 27 Dec 2007 10:39:39 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Search by KeyWord, the best practice
In-Reply-To: <14514446.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_10911_1462171.1198769979244"
References: <14513720.post@talk.nabble.com>
	 <359a92830712270721t6d203983vdc6f9fe06507f6c5@mail.gmail.com>
	 <14514446.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_10911_1462171.1198769979244
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

As long as you control both ends (i.e. what's indexed and what's searched)
then UN_TOKENIZED is fine. Note that case has to match, etc.

As an added benefit, you can sort by the field too...

Best
Erick

On Dec 27, 2007 10:31 AM, webspeak <webspeak@hotmail.com> wrote:

>
> Hello,
>
> Thank you for your reply :-)
> The customer value will be choosed from a dropdown list.The value that it
> will be selected must match the value in the CUSTOMER field.
>
> I think I don't have to tokenized it... as it is exact match.
>
>
>
>
> Erick Erickson wrote:
> >
> > Well, it depends upon what you want to accomplish. By indexing
> > UN_TOKENIZED, the text is NOT broken up. So indexing
> > "some text" will not match if you search on "some". or "text" or
> > even "text some".
> >
> > You really, really, really need to tell us what it is you want to
> > accomplish before anyone can suggest best practices. What's
> > the use case you're trying to support?
> >
> > Best
> > Erick
> >
> > On Dec 27, 2007 9:33 AM, webspeak <webspeak@hotmail.com> wrote:
> >
> >>
> >> Hello,
> >>
> >> I would like to search documents by "CUSTOMER".
> >> So I search on the field "CUSTOMER" using a KeywordAnalyzer.
> >>
> >> The CUSTOMER field is indexed with those params:
> >> Field.Index.UN_TOKENIZED
> >> Field.Index.Store
> >>
> >> Is it the Best Practice ?
> >>
> >> --
> >> View this message in context:
> >>
> http://www.nabble.com/Search-by-KeyWord%2C-the-best-practice-tp14513720p14513720.html
> >> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
>
> --
> View this message in context:
> http://www.nabble.com/Search-by-KeyWord%2C-the-best-practice-tp14513720p14514446.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_10911_1462171.1198769979244--

From java-user-return-31680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 15:56:53 2007
Return-Path: <java-user-return-31680-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55834 invoked from network); 27 Dec 2007 15:56:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 15:56:53 -0000
Received: (qmail 12479 invoked by uid 500); 27 Dec 2007 15:56:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12453 invoked by uid 500); 27 Dec 2007 15:56:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12441 invoked by uid 99); 27 Dec 2007 15:56:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 07:56:36 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 15:56:13 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J7v5l-0005XL-Iy
	for java-user@lucene.apache.org; Thu, 27 Dec 2007 07:56:17 -0800
Message-ID: <14514848.post@talk.nabble.com>
Date: Thu, 27 Dec 2007 07:56:17 -0800 (PST)
From: Frank Schima <fjs@foraker.com>
To: java-user@lucene.apache.org
Subject: Synonyms in Lucene 2.2
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fjs@foraker.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hello all,


I'm trying to implement a synonym engine in Lucene 2.2 based on the code in
the Lucene In Action book. However, I'm getting compile errors:


My Synonym filter looks like this:

import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.TokenFilter;
import org.apache.lucene.analysis.Token;
import java.io.IOException;
import java.util.Stack;

public class SynonymFilter extends TokenFilter {
  public static final String TOKEN_TYPE_SYNONYM = "SYNONYM";

  private Stack synonymStack;
  private SynonymEngine engine;

  public SynonymFilter(TokenStream in, SynonymEngine engine) {
    super(in);
    synonymStack = new Stack();
    this.engine = engine;
  }
....

But "Stack" is not recognized. What am I doing wrong?

-- 
View this message in context: http://www.nabble.com/Synonyms-in-Lucene-2.2-tp14514848p14514848.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 17:18:54 2007
Return-Path: <java-user-return-31681-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68915 invoked from network); 27 Dec 2007 17:18:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 17:18:53 -0000
Received: (qmail 84514 invoked by uid 500); 27 Dec 2007 17:18:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84479 invoked by uid 500); 27 Dec 2007 17:18:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84468 invoked by uid 99); 27 Dec 2007 17:18:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 09:18:36 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.189 as permitted sender)
Received: from [209.85.128.189] (HELO fk-out-0910.google.com) (209.85.128.189)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 17:18:12 +0000
Received: by fk-out-0910.google.com with SMTP id z23so3416281fkz.5
        for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 09:18:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=EI/PJTVHSmbqd6FYrii5H1/CAh3epOOlAGJdqJHxTrY=;
        b=YvzC/LGrTF6jOeOhcI7LwbovJ/N7ATeRHeOhqm8bbnmzDheFUMYgkHBzg3Jg4Uc4uUiEbXqtCCToopfA1KSGR2sA421u+jaojSJjAiNtPipCtqygYHmDGamFAdezWax3VyZ6eRHkNGXPl1m/pLCIrU0NQXAiLUAzzOBFI9Ormsc=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=dAUVzS/WDKoaCruptW64eYIirX4Mf59+8CXZ8o4cG0a2mIldEAb7Jb4b49FGzqA2DXM3pCvPJjGfZw71+sG7ZIyosbsFjES791jGZ8OkZ81iHNAsEKS/WBpwMuxiERUaEB3Jugj449D3PVRzpDRN5C/VEi7+28fG1Vt2sivQfMY=
Received: by 10.82.145.7 with SMTP id s7mr14915775bud.7.1198775893376;
        Thu, 27 Dec 2007 09:18:13 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 27 Dec 2007 09:18:13 -0800 (PST)
Message-ID: <359a92830712270918r305ab52ek37e0aaa0b6aedb8a@mail.gmail.com>
Date: Thu, 27 Dec 2007 12:18:13 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Synonyms in Lucene 2.2
In-Reply-To: <14514848.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11266_20684889.1198775893370"
References: <14514848.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11266_20684889.1198775893370
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

I don't think this has anything to do with Lucene, the problem
seems to be that your compiler can't find the Java Stack
class.

You need to set your classpath to include wherever
java.utils is on your disk.


Erick


On Dec 27, 2007 10:56 AM, Frank Schima <fjs@foraker.com> wrote:

>
> Hello all,
>
>
> I'm trying to implement a synonym engine in Lucene 2.2 based on the code
> in
> the Lucene In Action book. However, I'm getting compile errors:
>
>
> My Synonym filter looks like this:
>
> import org.apache.lucene.analysis.TokenStream;
> import org.apache.lucene.analysis.TokenFilter;
> import org.apache.lucene.analysis.Token;
> import java.io.IOException;
> import java.util.Stack;
>
> public class SynonymFilter extends TokenFilter {
>  public static final String TOKEN_TYPE_SYNONYM = "SYNONYM";
>
>  private Stack synonymStack;
>  private SynonymEngine engine;
>
>  public SynonymFilter(TokenStream in, SynonymEngine engine) {
>    super(in);
>    synonymStack = new Stack();
>    this.engine = engine;
>  }
> ....
>
> But "Stack" is not recognized. What am I doing wrong?
>
> --
> View this message in context:
> http://www.nabble.com/Synonyms-in-Lucene-2.2-tp14514848p14514848.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11266_20684889.1198775893370--

From java-user-return-31682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 17:19:18 2007
Return-Path: <java-user-return-31682-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68980 invoked from network); 27 Dec 2007 17:19:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 17:19:18 -0000
Received: (qmail 86044 invoked by uid 500); 27 Dec 2007 17:19:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86016 invoked by uid 500); 27 Dec 2007 17:19:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86005 invoked by uid 99); 27 Dec 2007 17:19:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 09:19:01 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 17:18:39 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J7wNX-00085k-Rq
	for java-user@lucene.apache.org; Thu, 27 Dec 2007 09:18:43 -0800
Message-ID: <14515918.post@talk.nabble.com>
Date: Thu, 27 Dec 2007 09:18:43 -0800 (PST)
From: tgospodinov <spamme@gospodinov.net>
To: java-user@lucene.apache.org
Subject: JVM heap when indexing in memory
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spamme@gospodinov.net
X-Virus-Checked: Checked by ClamAV on apache.org


Does anyone know why JVM heap use almost doubles at the very end when
indexing in memory?

around  9 megs @ 1:03 min into indexing - around 18 megs @ 1:05 min when
indexing is complete -> heap use jumps about 9 megs in 2 sec!?
-- 
View this message in context: http://www.nabble.com/JVM-heap-when-indexing-in-memory-tp14515918p14515918.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 17:29:45 2007
Return-Path: <java-user-return-31683-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70187 invoked from network); 27 Dec 2007 17:29:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 17:29:44 -0000
Received: (qmail 93870 invoked by uid 500); 27 Dec 2007 17:29:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93826 invoked by uid 500); 27 Dec 2007 17:29:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93815 invoked by uid 99); 27 Dec 2007 17:29:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 09:29:28 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 17:29:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J7wXd-0008Mb-IV
	for java-user@lucene.apache.org; Thu, 27 Dec 2007 09:29:09 -0800
Message-ID: <14515933.post@talk.nabble.com>
Date: Thu, 27 Dec 2007 09:29:09 -0800 (PST)
From: Frank Schima <fjs@foraker.com>
To: java-user@lucene.apache.org
Subject: Re: Synonyms in Lucene 2.2
In-Reply-To: <359a92830712270918r305ab52ek37e0aaa0b6aedb8a@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fjs@foraker.com
References: <14514848.post@talk.nabble.com> <359a92830712270918r305ab52ek37e0aaa0b6aedb8a@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Erick,



Erick Erickson wrote:
> 
> I don't think this has anything to do with Lucene, the problem
> seems to be that your compiler can't find the Java Stack
> class.
> 
> You need to set your classpath to include wherever
> java.utils is on your disk.
> 

I agree it's a Java issue. I'm just using the standard Java 1.5 compiler. 

Thank the gods for Eclipse. It suggested the following fixes which compile
for me (note the "<token>" terms added):

import org.apache.lucene.analysis.TokenStream;
import org.apache.lucene.analysis.TokenFilter;
import org.apache.lucene.analysis.Token;
import java.io.IOException;
import java.util.Stack;

public class SynonymFilter extends TokenFilter {
  public static final String TOKEN_TYPE_SYNONYM = "SYNONYM";

  private Stack<Token> synonymStack;
  private SynonymEngine engine;

  public SynonymFilter(TokenStream in, SynonymEngine engine) {
    super(in);
    synonymStack = new Stack<Token>();
    this.engine = engine;
  }
...


Cheers!
Frank




-- 
View this message in context: http://www.nabble.com/Synonyms-in-Lucene-2.2-tp14514848p14515933.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 17:39:09 2007
Return-Path: <java-user-return-31684-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71152 invoked from network); 27 Dec 2007 17:39:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 17:39:09 -0000
Received: (qmail 97841 invoked by uid 500); 27 Dec 2007 17:38:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97800 invoked by uid 500); 27 Dec 2007 17:38:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97789 invoked by uid 99); 27 Dec 2007 17:38:52 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 09:38:52 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of erickerickson@gmail.com designates 209.85.128.186 as permitted sender)
Received: from [209.85.128.186] (HELO fk-out-0910.google.com) (209.85.128.186)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 17:38:29 +0000
Received: by fk-out-0910.google.com with SMTP id z23so3424812fkz.5
        for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 09:38:32 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=a6DBlVi0MVvyicL/+10lLGwMRUPP1GNOImAkH5SGkcw=;
        b=FFKMz+GNJqE6zEu63a8npna163ztUSJ/bQTUUrkMvPAFfDrXhsgV41DkgVjjU/xCB/l8L/qCTnvEdDIA9+y50QSLN0WSL5wTjPATROnERCQL0QSC+yTr2ITSERRAwT7fx8HS6zVCx75IpMzezeQBGAHhBOhFu64Y6wv4HsWLG3Y=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=BPQeMRjr57BxkZXO/N1DYCldhSSc+KJkSZqMGPpk3HyMvAz107Oe5C7oAiVwqTMN0UqgRi6yz2BYBwpYHojYU0jHCw25ctNuv/l5nYNP2xIROTglfW+w/7UDN5Jcjul/dnsVDqhNkJ7Px2910UOLCWVgAmo3620bgTgV4qgdc3Y=
Received: by 10.82.107.15 with SMTP id f15mr14944556buc.0.1198777112225;
        Thu, 27 Dec 2007 09:38:32 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 27 Dec 2007 09:38:32 -0800 (PST)
Message-ID: <359a92830712270938v6504c3b2y2ec3e2ac0562f726@mail.gmail.com>
Date: Thu, 27 Dec 2007 12:38:32 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: JVM heap when indexing in memory
In-Reply-To: <14515918.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11347_1189655.1198777112219"
References: <14515918.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11347_1189655.1198777112219
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Are you optimizing your index? I suspect that if you are, that's
the problem.

Why does it matter? Is this just a curiosity question or is there
some problem?

Best
Erick

On Dec 27, 2007 12:18 PM, tgospodinov <spamme@gospodinov.net> wrote:

>
> Does anyone know why JVM heap use almost doubles at the very end when
> indexing in memory?
>
> around  9 megs @ 1:03 min into indexing - around 18 megs @ 1:05 min when
> indexing is complete -> heap use jumps about 9 megs in 2 sec!?
> --
> View this message in context:
> http://www.nabble.com/JVM-heap-when-indexing-in-memory-tp14515918p14515918.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11347_1189655.1198777112219--

From java-user-return-31685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 17:44:31 2007
Return-Path: <java-user-return-31685-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71836 invoked from network); 27 Dec 2007 17:44:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 17:44:31 -0000
Received: (qmail 3366 invoked by uid 500); 27 Dec 2007 17:44:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3336 invoked by uid 500); 27 Dec 2007 17:44:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3325 invoked by uid 99); 27 Dec 2007 17:44:14 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 09:44:14 -0800
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=HTML_MESSAGE,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of erickerickson@gmail.com designates 209.85.128.184 as permitted sender)
Received: from [209.85.128.184] (HELO fk-out-0910.google.com) (209.85.128.184)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 17:44:03 +0000
Received: by fk-out-0910.google.com with SMTP id z23so3426994fkz.5
        for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 09:43:56 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        bh=zh64OuIduj3ejK0DuREtZ130+AJ0+MqsIQnB1jrxrAI=;
        b=weysovcMMG2ef65eaQmZKJVrwkWgbZa5ICnK6sMP7EiUnxNAkrz1Iofg3z0em+Atv67s3x4siZIu3+jtW8D2zsPuSCJZGXmyH5/yRreK3A/0Sf9hiIg8EVjZn6rHp2ZLnx5h/6Jur+Sv7X2Ocm2Vg3tY+l8gGssHoKsBAPbZKCI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:to:subject:in-reply-to:mime-version:content-type:references;
        b=ti9NyAVl68QDQQvxA/gZlCwS+tutmDBWRe6oz5s7sm9GJtUoaywQeoYijHC+xAGgjhORWrAnyn+C+H5agfGBc8zgk51+OaQHloK/jaOIFrZEGtdApI1yquSe7w/OrL0CtAquptynk423jD0riURMU+G9eONUEz6JdDvMo4/QyfE=
Received: by 10.82.181.7 with SMTP id d7mr6639278buf.8.1198777435928;
        Thu, 27 Dec 2007 09:43:55 -0800 (PST)
Received: by 10.82.151.7 with HTTP; Thu, 27 Dec 2007 09:43:55 -0800 (PST)
Message-ID: <359a92830712270943p20f45388t932c9363eb286e68@mail.gmail.com>
Date: Thu, 27 Dec 2007 12:43:55 -0500
From: "Erick Erickson" <erickerickson@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Synonyms in Lucene 2.2
In-Reply-To: <14515933.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_11360_16754553.1198777435922"
References: <14514848.post@talk.nabble.com>
	 <359a92830712270918r305ab52ek37e0aaa0b6aedb8a@mail.gmail.com>
	 <14515933.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org

------=_Part_11360_16754553.1198777435922
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Oh, now I get it <G>. While I thoroughly approve of the strong
typing in generics, I continually trip over code written for the 1.4
code base not being approved by the 1.5 compiler...

Best
Erick

On Dec 27, 2007 12:29 PM, Frank Schima <fjs@foraker.com> wrote:

>
> Hi Erick,
>
>
>
> Erick Erickson wrote:
> >
> > I don't think this has anything to do with Lucene, the problem
> > seems to be that your compiler can't find the Java Stack
> > class.
> >
> > You need to set your classpath to include wherever
> > java.utils is on your disk.
> >
>
> I agree it's a Java issue. I'm just using the standard Java 1.5 compiler.
>
> Thank the gods for Eclipse. It suggested the following fixes which compile
> for me (note the "<token>" terms added):
>
> import org.apache.lucene.analysis.TokenStream;
> import org.apache.lucene.analysis.TokenFilter;
> import org.apache.lucene.analysis.Token;
> import java.io.IOException;
> import java.util.Stack;
>
> public class SynonymFilter extends TokenFilter {
>  public static final String TOKEN_TYPE_SYNONYM = "SYNONYM";
>
>  private Stack<Token> synonymStack;
>  private SynonymEngine engine;
>
>  public SynonymFilter(TokenStream in, SynonymEngine engine) {
>    super(in);
>    synonymStack = new Stack<Token>();
>    this.engine = engine;
>  }
> ...
>
>
> Cheers!
> Frank
>
>
>
>
> --
> View this message in context:
> http://www.nabble.com/Synonyms-in-Lucene-2.2-tp14514848p14515933.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

------=_Part_11360_16754553.1198777435922--

From java-user-return-31686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 18:07:46 2007
Return-Path: <java-user-return-31686-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77199 invoked from network); 27 Dec 2007 18:07:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 18:07:46 -0000
Received: (qmail 24019 invoked by uid 500); 27 Dec 2007 18:07:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23959 invoked by uid 500); 27 Dec 2007 18:07:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23948 invoked by uid 99); 27 Dec 2007 18:07:28 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 10:07:28 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 18:07:05 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J7x8P-00017x-BG
	for java-user@lucene.apache.org; Thu, 27 Dec 2007 10:07:09 -0800
Message-ID: <14516428.post@talk.nabble.com>
Date: Thu, 27 Dec 2007 10:07:09 -0800 (PST)
From: tgospodinov <spamme@gospodinov.net>
To: java-user@lucene.apache.org
Subject: Re: JVM heap when indexing in memory
In-Reply-To: <359a92830712270938v6504c3b2y2ec3e2ac0562f726@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spamme@gospodinov.net
References: <14515918.post@talk.nabble.com> <359a92830712270938v6504c3b2y2ec3e2ac0562f726@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


Thanks for your reply, Erick. I am not optimizing my index. I am trying to
keep heap use to a minimum. The indexing service that I'm working on will be
part of a wizard in an RCP framework and heap use is crucial for
performance. Do you know why its doing that?


Erick Erickson wrote:
> 
> Are you optimizing your index? I suspect that if you are, that's
> the problem.
> 
> Why does it matter? Is this just a curiosity question or is there
> some problem?
> 
> Best
> Erick
> 
> On Dec 27, 2007 12:18 PM, tgospodinov <spamme@gospodinov.net> wrote:
> 
>>
>> Does anyone know why JVM heap use almost doubles at the very end when
>> indexing in memory?
>>
>> around  9 megs @ 1:03 min into indexing - around 18 megs @ 1:05 min when
>> indexing is complete -> heap use jumps about 9 megs in 2 sec!?
>> --
>> View this message in context:
>> http://www.nabble.com/JVM-heap-when-indexing-in-memory-tp14515918p14515918.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/JVM-heap-when-indexing-in-memory-tp14515918p14516428.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 18:14:10 2007
Return-Path: <java-user-return-31687-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77868 invoked from network); 27 Dec 2007 18:14:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 18:14:10 -0000
Received: (qmail 28409 invoked by uid 500); 27 Dec 2007 18:13:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28379 invoked by uid 500); 27 Dec 2007 18:13:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28368 invoked by uid 99); 27 Dec 2007 18:13:52 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 10:13:52 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 18:13:41 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J7xEb-0001GS-G1
	for java-user@lucene.apache.org; Thu, 27 Dec 2007 10:13:33 -0800
Message-ID: <14516597.post@talk.nabble.com>
Date: Thu, 27 Dec 2007 10:13:33 -0800 (PST)
From: tgospodinov <spamme@gospodinov.net>
To: java-user@lucene.apache.org
Subject: Re: JVM heap when indexing in memory
In-Reply-To: <359a92830712270938v6504c3b2y2ec3e2ac0562f726@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: spamme@gospodinov.net
References: <14515918.post@talk.nabble.com> <359a92830712270938v6504c3b2y2ec3e2ac0562f726@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org


You were right. I forgot I optimized the index at the end. Thanks for your
help.


Erick Erickson wrote:
> 
> Are you optimizing your index? I suspect that if you are, that's
> the problem.
> 
> Why does it matter? Is this just a curiosity question or is there
> some problem?
> 
> Best
> Erick
> 
> On Dec 27, 2007 12:18 PM, tgospodinov <spamme@gospodinov.net> wrote:
> 
>>
>> Does anyone know why JVM heap use almost doubles at the very end when
>> indexing in memory?
>>
>> around  9 megs @ 1:03 min into indexing - around 18 megs @ 1:05 min when
>> indexing is complete -> heap use jumps about 9 megs in 2 sec!?
>> --
>> View this message in context:
>> http://www.nabble.com/JVM-heap-when-indexing-in-memory-tp14515918p14515918.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
> 
> 

-- 
View this message in context: http://www.nabble.com/JVM-heap-when-indexing-in-memory-tp14515918p14516597.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 18:48:58 2007
Return-Path: <java-user-return-31688-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88024 invoked from network); 27 Dec 2007 18:48:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 18:48:58 -0000
Received: (qmail 43812 invoked by uid 500); 27 Dec 2007 18:48:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43783 invoked by uid 500); 27 Dec 2007 18:48:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43772 invoked by uid 99); 27 Dec 2007 18:48:41 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 10:48:41 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=HTML_MESSAGE,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dragon-fly999@hotmail.com designates 65.55.175.154 as permitted sender)
Received: from [65.55.175.154] (HELO blu139-omc1-s14.blu139.hotmail.com) (65.55.175.154)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 18:48:27 +0000
Received: from BLU119-W44 ([65.55.162.182]) by blu139-omc1-s14.blu139.hotmail.com with Microsoft SMTPSVC(6.0.3790.3959);
	 Thu, 27 Dec 2007 10:48:19 -0800
Message-ID: <BLU119-W44632A3CCBF0514B61C178B9540@phx.gbl>
Content-Type: multipart/alternative;
	boundary="_b6455699-df59-43dd-b85e-3f956eefda49_"
X-Originating-IP: [71.10.235.86]
From: Dragon Fly <dragon-fly999@hotmail.com>
To: <java-user@lucene.apache.org>
Subject: RE: Pagination ...
Date: Thu, 27 Dec 2007 13:48:19 -0500
Importance: Normal
In-Reply-To: <931ca11b0712261007k255d561kbef79725b71991f6@mail.gmail.com>
References: <BLU119-W27708447588B9DD2485901B95F0@phx.gbl>
	 <BLU119-W24D17F1D898B3806289705B95B0@phx.gbl>
 	 <72d748c20712260912v5841764bp29bf37c73d69db69@mail.gmail.com> 
 <931ca11b0712261007k255d561kbef79725b71991f6@mail.gmail.com>
MIME-Version: 1.0
X-OriginalArrivalTime: 27 Dec 2007 18:48:19.0145 (UTC) FILETIME=[0C3BBB90:01C848B9]
X-Virus-Checked: Checked by ClamAV on apache.org

--_b6455699-df59-43dd-b85e-3f956eefda49_
Content-Type: text/plain; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Thanks.

Date: Wed, 26 Dec 2007 13:07:03 -0500
From: richmondmike@gmail.com
To: dragon-fly999@hotmail.com
Subject: Re: Pagination ...
CC: java-user@lucene.apache.org

You might want to take a look at Solr (http://lucene.apache.org/solr/).  Yo=
u could either use Solr directly, or see how they implement paging.


--Mike



On Dec 26, 2007 12:12 PM, Zhou Qi <zhouqi.jackson@gmail.com> wrote:

Using the search function for pagination will carry out unnecessary index
search when you are going previous or next. Generally, most of the
information need (e.g 80%) can be satisfied by the first 100 documents

(20%). In lucene, the returing documents is set to 100 for the sake of
speed.

I am not quite sure my way of pagination is best: but it works fine under
test preasure: Just keep the first search result in cache and fetch the

snippet when the document is presented in current page.

2007/12/26, Dragon Fly <dragon-fly999@hotmail.com>:
>
>

> Any advice on this? Thanks.
>
> > From: dragon-fly999@hotmail.com
> > To: java-user@lucene.apache.org

> > Subject: Pagination ...
> > Date: Sat, 22 Dec 2007 10:19:30 -0500
> >
> >
> > Hi,
> >
> > What is the most efficient way to do pagination in Lucene? I have alway=
s

> done the following because this "flavor" of the search call allows me to
> specify the top N hits ( e.g. 1000) and a Sort object:
> >
> >     TopFieldDocs topFieldDocs =3D searcher.search
(query, null, 1000,
> SORT_BY_DATE);
> >
> > Is it the best way? Thank you.
> >
> > _________________________________________________________________
> > Don't get caught with egg on your face. Play Chicktionary!

> > http://club.live.com/chicktionary.aspx?icid=3Dchick_wlhmtextlink1_dec
>
> _________________________________________________________________

> Get the power of Windows + Web with the new Windows Live.
> http://www.windowslive.com?ocid=3DTXT_TAGHM_Wave2_powerofwindows_122007




_________________________________________________________________
The best games are on Xbox 360.  Click here for a special offer on an Xbox =
360 Console.
http://www.xbox.com/en-US/hardware/wheretobuy/=

--_b6455699-df59-43dd-b85e-3f956eefda49_--

From java-user-return-31689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 21:19:51 2007
Return-Path: <java-user-return-31689-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13430 invoked from network); 27 Dec 2007 21:19:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 21:19:47 -0000
Received: (qmail 80717 invoked by uid 500); 27 Dec 2007 21:19:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80681 invoked by uid 500); 27 Dec 2007 21:19:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80664 invoked by uid 99); 27 Dec 2007 21:19:30 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 13:19:30 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 21:19:07 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J808E-0006Uy-Ly
	for java-user@lucene.apache.org; Thu, 27 Dec 2007 13:19:10 -0800
Message-ID: <14518753.post@talk.nabble.com>
Date: Thu, 27 Dec 2007 13:19:10 -0800 (PST)
From: Frank Schima <fjs@foraker.com>
To: java-user@lucene.apache.org
Subject: Synonyms and Ranking
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: fjs@foraker.com
X-Virus-Checked: Checked by ClamAV on apache.org


Happy festivus everyone,


So I have my fancy new stemmed synonym based Lucene index. Let's say I have
the following synonym defined:

radiation -> radiotherapy (and the reverse)

The search results rank all results exactly the same. Is there a way to
Boost the actual search term a little higher than the synonym(s)?


TIA,
Frank


-- 
View this message in context: http://www.nabble.com/Synonyms-and-Ranking-tp14518753p14518753.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Dec 27 21:46:53 2007
Return-Path: <java-user-return-31690-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25125 invoked from network); 27 Dec 2007 21:46:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 27 Dec 2007 21:46:53 -0000
Received: (qmail 2750 invoked by uid 500); 27 Dec 2007 21:46:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 2714 invoked by uid 500); 27 Dec 2007 21:46:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 2697 invoked by uid 99); 27 Dec 2007 21:46:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 13:46:36 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a20.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 27 Dec 2007 21:46:11 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a20.g.dreamhost.com (Postfix) with ESMTP id 4E8BEE2512
	for <java-user@lucene.apache.org>; Thu, 27 Dec 2007 13:46:12 -0800 (PST)
Message-Id: <78F0C76E-1A1C-4237-AAA8-DDCCE676FC7E@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <14518753.post@talk.nabble.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Synonyms and Ranking
Date: Thu, 27 Dec 2007 16:46:12 -0500
References: <14518753.post@talk.nabble.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

You can use the payload functionality (have a look at  
BoostingTermQuery and Michael B. excellent ApacheCon talk at
http://people.apache.org/~buschmi/apachecon/).  Other option is to put  
the synonyms into a separate field and boost that less than the main  
field.

-Grant

On Dec 27, 2007, at 4:19 PM, Frank Schima wrote:

>
> Happy festivus everyone,
>
>
> So I have my fancy new stemmed synonym based Lucene index. Let's say  
> I have
> the following synonym defined:
>
> radiation -> radiotherapy (and the reverse)
>
> The search results rank all results exactly the same. Is there a way  
> to
> Boost the actual search term a little higher than the synonym(s)?
>
>
> TIA,
> Frank
>
>
> -- 
> View this message in context: http://www.nabble.com/Synonyms-and-Ranking-tp14518753p14518753.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 28 12:00:41 2007
Return-Path: <java-user-return-31691-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72787 invoked from network); 28 Dec 2007 12:00:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2007 12:00:41 -0000
Received: (qmail 86559 invoked by uid 500); 28 Dec 2007 12:00:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86523 invoked by uid 500); 28 Dec 2007 12:00:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86511 invoked by uid 99); 28 Dec 2007 12:00:24 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 04:00:24 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 12:00:11 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J8Dsh-00021U-8f
	for java-user@lucene.apache.org; Fri, 28 Dec 2007 04:00:03 -0800
Message-ID: <14525027.post@talk.nabble.com>
Date: Fri, 28 Dec 2007 04:00:03 -0800 (PST)
From: christophe blin <cblin@tennaxia.com>
To: java-user@lucene.apache.org
Subject: question on the implementation of a SetFilter
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: cblin@tennaxia.com
X-Virus-Checked: Checked by ClamAV on apache.org


Hi,

I'd like to implement a SetFilter like describe in
http://www.nabble.com/Re%3A-Too-many-clauses-p1145373.html

At the moment, I have a working implementation but there are some gotchas I
do not understand (i.e I take the code from RangeFilter and adapt it as
suggested by the post)

Could someone have a look at my implementation and do some suggestion about
the TODO flags (or about the code if it is not so good)

public class SetFilter extends org.apache.lucene.search.Filter {
    private String fieldName;
    private Set<String> fieldAuthorizedValues;

    public SetFilter(String fieldName, Set<String> fieldAuthorizedValues) {
        this.fieldName = fieldName;
        this.fieldAuthorizedValues = fieldAuthorizedValues;
    }

    @Override
    public BitSet bits(IndexReader reader) throws IOException {
        BitSet bits = new BitSet(reader.maxDoc());
        //builds an enum only on the inspected field
        TermEnum enumerator = reader.terms(new Term(fieldName,""));

        try {
            //TODO: why should this happen ?
            if (enumerator.term() == null) {
                return bits;
            }

            TermDocs termDocs = reader.termDocs();
            try {
                do {
                    Term term = enumerator.term();
                    //TODO: why the term can be null ? 
                    //TODO: why the term can have a field different from the
inspected one ?
                    if (term != null && term.field().equals(fieldName)) {
                        if
(this.fieldAuthorizedValues.contains(term.text())) {
                            /* we have a good term, find the docs */
                            termDocs.seek(enumerator.term());
                            while (termDocs.next()) {
                                bits.set(termDocs.doc());
                            }
                        }
                    } else {
                        break;
                    }
                }
                while (enumerator.next());

            } finally {
                termDocs.close();
            }
        } finally {
            enumerator.close();
        }

        return bits;
    }
}

-- 
View this message in context: http://www.nabble.com/question-on-the-implementation-of-a-SetFilter-tp14525027p14525027.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 28 15:55:10 2007
Return-Path: <java-user-return-31692-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52455 invoked from network); 28 Dec 2007 15:55:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2007 15:55:10 -0000
Received: (qmail 80636 invoked by uid 500); 28 Dec 2007 15:54:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80598 invoked by uid 500); 28 Dec 2007 15:54:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80584 invoked by uid 99); 28 Dec 2007 15:54:53 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 07:54:53 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 15:54:42 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J8HXc-0000D6-07
	for java-user@lucene.apache.org; Fri, 28 Dec 2007 07:54:32 -0800
Message-ID: <14527508.post@talk.nabble.com>
Date: Fri, 28 Dec 2007 07:54:31 -0800 (PST)
From: Frank Schima <fjs@foraker.com>
To: java-user@lucene.apache.org
Subject: Re: Synonyms and Ranking
In-Reply-To: <78F0C76E-1A1C-4237-AAA8-DDCCE676FC7E@apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: quoted-printable
X-Nabble-From: fjs@foraker.com
References: <14518753.post@talk.nabble.com> <78F0C76E-1A1C-4237-AAA8-DDCCE676FC7E@apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org


Hi Grant,



Grant Ingersoll-6 wrote:
>=20
> You can use the payload functionality (have a look at =20
> BoostingTermQuery and Michael B. excellent ApacheCon talk at
> http://people.apache.org/~buschmi/apachecon/).  Other option is to put =
=20
> the synonyms into a separate field and boost that less than the main =20
> field.
>=20
> On Dec 27, 2007, at 4:19 PM, Frank Schima wrote:
>=20
>> So I have my fancy new stemmed synonym based Lucene index. Let's say =20
>> I have
>> the following synonym defined:
>>
>> radiation -> radiotherapy (and the reverse)
>>
>> The search results rank all results exactly the same. Is there a way =20
>> to
>> Boost the actual search term a little higher than the synonym(s)?
>=20

To be clear, if someone searches for "radiation" I want content exactly wit=
h
"radiation" to rank higher than content with "radiotherapy". But if someone
searches for "radiotherapy", I want content with that to rank higher than
content with "radiation". Will Payloads do this for me?

I would try it but I'm having trouble figuring out how to do the search. Fo=
r
the search, I'm currently using a MultiFieldQueryParser, so like this:

    SnowballAnalyzer sba =3D new SnowballAnalyzer("English",
StopAnalyzer.ENGLISH_STOP_WORDS);
    QueryParser qp =3D new MultiFieldQueryParser( new String[] {"field1",
"field2", "field3"}, sba );
    try {
      Query query =3D qp.parse(strSearchTerms);
    } catch ( Throwable th) {
       ...
    }

However, the payload example in the presentation requires a
BoostingTermQuery, like this:

    Query query =3D new BoostingTermQuery( new Term(=E2=80=9Cfield=E2=80=9D=
, =E2=80=9Csearchterm=E2=80=9D));

Is there a way to make the two work together?


Thanks!
Frank


--=20
View this message in context: http://www.nabble.com/Synonyms-and-Ranking-tp=
14518753p14527508.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 28 16:39:06 2007
Return-Path: <java-user-return-31693-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63040 invoked from network); 28 Dec 2007 16:39:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2007 16:39:05 -0000
Received: (qmail 15566 invoked by uid 500); 28 Dec 2007 16:38:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15527 invoked by uid 500); 28 Dec 2007 16:38:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15516 invoked by uid 99); 28 Dec 2007 16:38:49 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 08:38:49 -0800
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [194.109.24.21] (HELO smtp-vbr1.xs4all.nl) (194.109.24.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 16:38:24 +0000
Received: from k8u.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr1.xs4all.nl (8.13.8/8.13.8) with ESMTP id lBSGcQ9w055160
	for <java-user@lucene.apache.org>; Fri, 28 Dec 2007 17:38:27 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: question on the implementation of a SetFilter
Date: Fri, 28 Dec 2007 17:38:34 +0100
User-Agent: KMail/1.9.6 (enterprise 0.20070907.709405)
References: <14525027.post@talk.nabble.com>
In-Reply-To: <14525027.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200712281738.34325.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org

On Friday 28 December 2007 13:00:03 christophe blin wrote:
> 
> Hi,
> 
> I'd like to implement a SetFilter like describe in
> http://www.nabble.com/Re%3A-Too-many-clauses-p1145373.html
> 
> At the moment, I have a working implementation but there are some gotchas I
> do not understand (i.e I take the code from RangeFilter and adapt it as
> suggested by the post)
> 
> Could someone have a look at my implementation and do some suggestion about
> the TODO flags (or about the code if it is not so good)

The code looks good to me. Call it classic Lucene style if you will.
A TermEnum can return null the first time term() is called, note that the next()
method is called after the first call to term().
That's the way the TermEnum is implemented iirc since the first days of Lucene.

Maybe it's time to replace it with a TermIterator, or add that on top of TermEnum.

The TermEnum starts at a given field/term and iterates through all indexed
terms after that, including terms with field names ordered later than
the given field. That's why the field name must be checked in the Term.

Perhaps that could be another bit functionality for a future TermIterator?

Regards,
Paul Elschot


> 
> public class SetFilter extends org.apache.lucene.search.Filter {
>     private String fieldName;
>     private Set<String> fieldAuthorizedValues;
> 
>     public SetFilter(String fieldName, Set<String> fieldAuthorizedValues) {
>         this.fieldName = fieldName;
>         this.fieldAuthorizedValues = fieldAuthorizedValues;
>     }
> 
>     @Override
>     public BitSet bits(IndexReader reader) throws IOException {
>         BitSet bits = new BitSet(reader.maxDoc());
>         //builds an enum only on the inspected field
>         TermEnum enumerator = reader.terms(new Term(fieldName,""));
> 
>         try {
>             //TODO: why should this happen ?
>             if (enumerator.term() == null) {
>                 return bits;
>             }
> 
>             TermDocs termDocs = reader.termDocs();
>             try {
>                 do {
>                     Term term = enumerator.term();
>                     //TODO: why the term can be null ? 
>                     //TODO: why the term can have a field different from the
> inspected one ?
>                     if (term != null && term.field().equals(fieldName)) {
>                         if
> (this.fieldAuthorizedValues.contains(term.text())) {
>                             /* we have a good term, find the docs */
>                             termDocs.seek(enumerator.term());
>                             while (termDocs.next()) {
>                                 bits.set(termDocs.doc());
>                             }
>                         }
>                     } else {
>                         break;
>                     }
>                 }
>                 while (enumerator.next());
> 
>             } finally {
>                 termDocs.close();
>             }
>         } finally {
>             enumerator.close();
>         }
> 
>         return bits;
>     }
> }
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 28 17:18:19 2007
Return-Path: <java-user-return-31694-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72462 invoked from network); 28 Dec 2007 17:18:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2007 17:18:19 -0000
Received: (qmail 62281 invoked by uid 500); 28 Dec 2007 17:18:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62259 invoked by uid 500); 28 Dec 2007 17:18:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62248 invoked by uid 99); 28 Dec 2007 17:18:01 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 09:18:01 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 17:17:36 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J8Iq4-0002qW-Lb
	for java-user@lucene.apache.org; Fri, 28 Dec 2007 09:17:40 -0800
Message-ID: <14528606.post@talk.nabble.com>
Date: Fri, 28 Dec 2007 09:17:40 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which file in the lucene package is used to manipulate
 results..
In-Reply-To: <329945.61466.qm@web26014.mail.ukl.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
References: <14450335.post@talk.nabble.com> <329945.61466.qm@web26014.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org


hi
which file can i edit to change the scoring factors in lucene results

markharw00d wrote:
> 
> Thanks for the context - much more useful.
> The challenge here is similar to that posed by offering end-user tagging
> of content (see here
> http://www.mail-archive.com/java-user@lucene.apache.org/msg17580.html ).
> The main difference here being that words are added to docs implicitly by
> search click-throughs rather than any explicit tagging action.
> 
> In both cases the challenge is that the user data around documents is
> likely to be updated very often while the documents remain relatively
> static. 
> I suspect some additional things to think about are:
> 1) Cancelling out the "human laziness" bias that favours clicking results
> on page 1. Are clicks on page 2 worth more?
> 2) Spam clicks - detecting deliberate gaming of your re-ranking algorithm.
> 3) Lucene doc IDs are not stable - how will you associate query
> terms/click data with documents and join them at speed?
> 4) Are individual words or phrases the unit of boost? "Paris" means
> different things in "Paris Hilton" and "Paris, France".
> 
> A simple approach might be to re-index your content with all of the
> additional search terms from clicks added to the associated document in a
> "searchClicks" field - the more clicks, the more repetitions of the same
> search words in the document to help with tf (Term Frequency). This
> additional content would need to be capped, to avoid huge documents. This
> has the disadvantage of requiring a re-index though. 
> Another option to avoid reindexing everything is to wrap IndexReader (See
> FilterIndexReader) and implement TermEnum/TermDocs for a fake field called
> "searchClicks". The idea is Lucene looks after the usual, static document
> content while your implementation goes off to your more volatile storage
> (e.g. database/parallel index, custom file structure) to retrieve lists of
> doc ids, term frequencies etc. for this "searchClicks" field. All of the
> Lucene queries you might want to throw at this e.g. PhraseQueries can then
> test both the static Lucene fields and your new volatile "click" fields
> without being aware of this low-level trickery. 
> 
> I'm sure there will be other ways of doing this too but this seems like a
> conceptually clean way of modelling it - just seeing search terms as
> extensions to the document content.
> 
> Cheers
> Mark
> 
> 
> ----- Original Message ----
> From: sumittyagi <ping.sumit@gmail.com>
> To: java-user@lucene.apache.org
> Sent: Sunday, 23 December, 2007 5:30:55 AM
> Subject: Re: Which file in the lucene package is used to manipulate
> results..
> 
> 
> Actually what i have to do is...
> 1.) for every query(keyword), among the results obtained, the keyword
>  will
> be mapped with the page clicked, along with the no. of clicks for that
> keyword on that page
> 2.) next time for the same query(keyword), the mapped pages will be
>  ranked
> higher considering the no. of clicks too..
> 3.) for every new query these steps will be repeated...
> this was a very high level view , i have made algorithms for these
>  modules
> and trying to incorporate with lucene but dont know , on which files i
>  have
> to do edition to make it work...
> please help me regarding this, if you need some more explanation,
>  please let
> me know...
> thanks 
> Sumit Tyagi
> 
> 
> 
> 
> 
> Erick Erickson wrote:
>> 
>> You still haven't explained *why* you want to rerank results. What
>> is the use-case you're trying to implement? Quite often it's turned
>> out for me that when I let folks on the list know what the use
>> case I'm trying to support is, they come up with much more elegant
>> solutions than I was thinking about.
>> 
>> For instance, does the CustomScoreQuery class have any relevance
>> to your problem?
>> 
>> If you're thinking of modifying the core Lucene code for your
>> special purpose, I'd advise against it unless and until you'd
>  exhausted
>> all the other options. It's always a maintenance headache to do this.
>> 
>> Best
>> Erick
>> 
>> On Dec 21, 2007 10:09 AM, sumittyagi <ping.sumit@gmail.com> wrote:
>> 
>>>
>>> actually i am writing a module to rerank the results, so i want to
>  edit
>>> the
>>> file which arrange the results and give them ranks,
>>> or is there any other way i can use my module to rerank the results
>>>
>>>
>>> markharw00d wrote:
>>> >
>>> > I think you need to describe your "factors" in more detail.
>  Exactly
>>> what
>>> > do you want to achieve for your users?
>>> > We could be talking about any number of Lucene functions here.
>>> >
>>> > ----- Original Message ----
>>> > From: sumittyagi <ping.sumit@gmail.com>
>>> > To: java-user@lucene.apache.org
>>> > Sent: Friday, 21 December, 2007 4:51:09 AM
>>> > Subject: Which file in the lucene package is used to manipulate
>>> results..
>>> >
>>> >
>>> > hi, i am using lucene for the very first time and want to
>  manipulate
>>> >  the
>>> > results, by adding some more factors to it, which file should i
>  edit to
>>> > manipulate the search results....
>>> >
>>> > Thanks
>>> > Sumit Tyagi
>>> > --
>>> > View this message in context:
>>> >
>>> >
>>>
> 
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14450335.html
>>> > Sent from the Lucene - Java Users mailing list archive at
>  Nabble.com.
>>> >
>>> >
>>> >
>>> >
>>> >
>>> >       __________________________________________________________
>>> > Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
>>> >
>>> >
>>> >
>  ---------------------------------------------------------------------
>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>> >
>>> >
>>> >
>>>
>>> --
>>> View this message in context:
>>>
> 
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14456938.html
>>> Sent from the Lucene - Java Users mailing list archive at
>  Nabble.com.
>>>
>>>
>>>
>  ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>> 
>> 
> 
> -- 
> View this message in context:
> 
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14476062.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> 
>       __________________________________________________________
> Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14528606.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 28 17:20:12 2007
Return-Path: <java-user-return-31695-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73029 invoked from network); 28 Dec 2007 17:20:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2007 17:20:12 -0000
Received: (qmail 65671 invoked by uid 500); 28 Dec 2007 17:19:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65054 invoked by uid 500); 28 Dec 2007 17:19:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65043 invoked by uid 99); 28 Dec 2007 17:19:55 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 09:19:55 -0800
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=SPF_NEUTRAL,URIBL_GREY
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.81] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.81)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 17:19:30 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 51CFD21234
	for <java-user@lucene.apache.org>; Fri, 28 Dec 2007 09:19:33 -0800 (PST)
Message-Id: <8CEFEF37-F785-49D0-A9B8-DB1608ADF352@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <126142c0712181031o45fa19afxfa05399cb2602b91@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Indexing Wikipedia dumps
Date: Fri, 28 Dec 2007 12:19:31 -0500
References: <547045.76613.qm@web50306.mail.re2.yahoo.com> <80EC5EE9-581A-46F5-B250-344DD164A158@mikemccandless.com> <C44CF8C3-3A5D-46FC-9094-7486874C3392@apache.org> <4760E1BC.10105@cs.put.poznan.pl> <CF43AE77-406B-4575-8A09-AD784C536057@mac.com> <47623A00.5060704@cs.put.poznan.pl> <126142c0712181031o45fa19afxfa05399cb2602b91@mail.gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

See https://issues.apache.org/jira/browse/LUCENE-1103


On Dec 18, 2007, at 1:31 PM, Marcelo Ochoa wrote:

> Hi All:
>  Just to add simple hack, I had posted at my Blog an entry named
> "Uploading WikiPedia Dumps to Oracle databases":
> http://marceloochoa.blogspot.com/2007_12_01_archive.html
>  with instructions to upload WikiPedia Dumps to Oracle XMLDB, it
> means transforming an XML file to an object-relational storage.
>  Finally, I added instructions to index it with Lucene Domain Index.
>  Best regards, Marcelo.
>
> On Dec 14, 2007 5:08 AM, Dawid Weiss <dawid.weiss@cs.put.poznan.pl>  
> wrote:
>>
>> Good pointers, thanks. I asked because I did have a problem like  
>> this a few
>> months ago -- none of the existing parsers solved it for me (back  
>> then).
>>
>> D.
>>
>>
>> Petite Abeille wrote:
>>>
>>> On Dec 13, 2007, at 8:39 AM, Dawid Weiss wrote:
>>>
>>>> Just incidentally -- do you know of something that would parse the
>>>> wikipedia markup (to plain text, for example)?
>>>
>>> If you find out, let us know :)
>>>
>>> You may want to check the partial ANTLR grammar for Wikitext:
>>>
>>> http://www.mediawiki.org/wiki/User:Stevage/ANTLR
>>> http://lists.wikimedia.org/pipermail/wikitext-l/2007-December/000117.html
>>>
>>> This also might be of interest:
>>>
>>> http://www.softlab.ntua.gr/~ttsiod/buildWikipediaOffline.html
>>>
>>> "the nice people over at woc.fslab.de have created a standalone
>>> wiki-markup parser which is ready for use"
>>> http://fslab.de/svn/wpofflineclient/trunk/mediawiki_sa
>>> There is also Text::MediawikiFormat:
>>> http://search.cpan.org/~dprice/Text-MediawikiFormat-0.05/lib/Text/MediawikiFormat.pm
>>>
>>> Perhaps you will be better off processing the Wikipedia static HTML
>>> dump, instead of the XML one:
>>> http://static.wikipedia.org/
>>> Not a piece of cake one way or another :(
>>> Cheers,
>>> PA.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
>
> -- 
> Marcelo F. Ochoa
> http://marceloochoa.blogspot.com/
> http://marcelo.ochoa.googlepages.com/home
> ______________
> Do you Know DBPrism? Look @ DB Prism's Web Site
> http://www.dbprism.com.ar/index.html
> More info?
> Chapter 17 of the book "Programming the Oracle Database using Java &
> Web Services"
> http://www.amazon.com/gp/product/1555583296/
> Chapter 21 of the book "Professional XML Databases" - Wrox Press
> http://www.amazon.com/gp/product/1861003587/
> Chapter 8 of the book "Oracle & Open Source" - O'Reilly
> http://www.oreilly.com/catalog/oracleopen/
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 28 17:30:41 2007
Return-Path: <java-user-return-31696-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76307 invoked from network); 28 Dec 2007 17:30:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2007 17:30:41 -0000
Received: (qmail 78064 invoked by uid 500); 28 Dec 2007 17:30:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77872 invoked by uid 500); 28 Dec 2007 17:30:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77861 invoked by uid 99); 28 Dec 2007 17:30:23 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 09:30:23 -0800
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=DNS_FROM_OPENWHOIS,SPF_HELO_PASS,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lists@nabble.com designates 216.139.236.158 as permitted sender)
Received: from [216.139.236.158] (HELO kuber.nabble.com) (216.139.236.158)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 17:29:58 +0000
Received: from isper.nabble.com ([192.168.236.156])
	by kuber.nabble.com with esmtp (Exim 4.63)
	(envelope-from <lists@nabble.com>)
	id 1J8J23-0003FR-0j
	for java-user@lucene.apache.org; Fri, 28 Dec 2007 09:30:03 -0800
Message-ID: <14528677.post@talk.nabble.com>
Date: Fri, 28 Dec 2007 09:30:03 -0800 (PST)
From: sumittyagi <ping.sumit@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Which file in the lucene package is used to manipulate
 results..
In-Reply-To: <14528606.post@talk.nabble.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Nabble-From: ping.sumit@gmail.com
References: <14450335.post@talk.nabble.com> <329945.61466.qm@web26014.mail.ukl.yahoo.com> <14528606.post@talk.nabble.com>
X-Virus-Checked: Checked by ClamAV on apache.org


also 
what is the lucene ranking (scoring documents) formula

sumittyagi wrote:
> 
> hi
> which file can i edit to change the scoring factors in lucene results
> 
> markharw00d wrote:
>> 
>> Thanks for the context - much more useful.
>> The challenge here is similar to that posed by offering end-user tagging
>> of content (see here
>> http://www.mail-archive.com/java-user@lucene.apache.org/msg17580.html ).
>> The main difference here being that words are added to docs implicitly by
>> search click-throughs rather than any explicit tagging action.
>> 
>> In both cases the challenge is that the user data around documents is
>> likely to be updated very often while the documents remain relatively
>> static. 
>> I suspect some additional things to think about are:
>> 1) Cancelling out the "human laziness" bias that favours clicking results
>> on page 1. Are clicks on page 2 worth more?
>> 2) Spam clicks - detecting deliberate gaming of your re-ranking
>> algorithm.
>> 3) Lucene doc IDs are not stable - how will you associate query
>> terms/click data with documents and join them at speed?
>> 4) Are individual words or phrases the unit of boost? "Paris" means
>> different things in "Paris Hilton" and "Paris, France".
>> 
>> A simple approach might be to re-index your content with all of the
>> additional search terms from clicks added to the associated document in a
>> "searchClicks" field - the more clicks, the more repetitions of the same
>> search words in the document to help with tf (Term Frequency). This
>> additional content would need to be capped, to avoid huge documents. This
>> has the disadvantage of requiring a re-index though. 
>> Another option to avoid reindexing everything is to wrap IndexReader (See
>> FilterIndexReader) and implement TermEnum/TermDocs for a fake field
>> called "searchClicks". The idea is Lucene looks after the usual, static
>> document content while your implementation goes off to your more volatile
>> storage (e.g. database/parallel index, custom file structure) to retrieve
>> lists of doc ids, term frequencies etc. for this "searchClicks" field.
>> All of the Lucene queries you might want to throw at this e.g.
>> PhraseQueries can then test both the static Lucene fields and your new
>> volatile "click" fields without being aware of this low-level trickery. 
>> 
>> I'm sure there will be other ways of doing this too but this seems like a
>> conceptually clean way of modelling it - just seeing search terms as
>> extensions to the document content.
>> 
>> Cheers
>> Mark
>> 
>> 
>> ----- Original Message ----
>> From: sumittyagi <ping.sumit@gmail.com>
>> To: java-user@lucene.apache.org
>> Sent: Sunday, 23 December, 2007 5:30:55 AM
>> Subject: Re: Which file in the lucene package is used to manipulate
>> results..
>> 
>> 
>> Actually what i have to do is...
>> 1.) for every query(keyword), among the results obtained, the keyword
>>  will
>> be mapped with the page clicked, along with the no. of clicks for that
>> keyword on that page
>> 2.) next time for the same query(keyword), the mapped pages will be
>>  ranked
>> higher considering the no. of clicks too..
>> 3.) for every new query these steps will be repeated...
>> this was a very high level view , i have made algorithms for these
>>  modules
>> and trying to incorporate with lucene but dont know , on which files i
>>  have
>> to do edition to make it work...
>> please help me regarding this, if you need some more explanation,
>>  please let
>> me know...
>> thanks 
>> Sumit Tyagi
>> 
>> 
>> 
>> 
>> 
>> Erick Erickson wrote:
>>> 
>>> You still haven't explained *why* you want to rerank results. What
>>> is the use-case you're trying to implement? Quite often it's turned
>>> out for me that when I let folks on the list know what the use
>>> case I'm trying to support is, they come up with much more elegant
>>> solutions than I was thinking about.
>>> 
>>> For instance, does the CustomScoreQuery class have any relevance
>>> to your problem?
>>> 
>>> If you're thinking of modifying the core Lucene code for your
>>> special purpose, I'd advise against it unless and until you'd
>>  exhausted
>>> all the other options. It's always a maintenance headache to do this.
>>> 
>>> Best
>>> Erick
>>> 
>>> On Dec 21, 2007 10:09 AM, sumittyagi <ping.sumit@gmail.com> wrote:
>>> 
>>>>
>>>> actually i am writing a module to rerank the results, so i want to
>>  edit
>>>> the
>>>> file which arrange the results and give them ranks,
>>>> or is there any other way i can use my module to rerank the results
>>>>
>>>>
>>>> markharw00d wrote:
>>>> >
>>>> > I think you need to describe your "factors" in more detail.
>>  Exactly
>>>> what
>>>> > do you want to achieve for your users?
>>>> > We could be talking about any number of Lucene functions here.
>>>> >
>>>> > ----- Original Message ----
>>>> > From: sumittyagi <ping.sumit@gmail.com>
>>>> > To: java-user@lucene.apache.org
>>>> > Sent: Friday, 21 December, 2007 4:51:09 AM
>>>> > Subject: Which file in the lucene package is used to manipulate
>>>> results..
>>>> >
>>>> >
>>>> > hi, i am using lucene for the very first time and want to
>>  manipulate
>>>> >  the
>>>> > results, by adding some more factors to it, which file should i
>>  edit to
>>>> > manipulate the search results....
>>>> >
>>>> > Thanks
>>>> > Sumit Tyagi
>>>> > --
>>>> > View this message in context:
>>>> >
>>>> >
>>>>
>> 
>> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14450335.html
>>>> > Sent from the Lucene - Java Users mailing list archive at
>>  Nabble.com.
>>>> >
>>>> >
>>>> >
>>>> >
>>>> >
>>>> >       __________________________________________________________
>>>> > Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
>>>> >
>>>> >
>>>> >
>>  ---------------------------------------------------------------------
>>>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>>>> >
>>>> >
>>>> >
>>>>
>>>> --
>>>> View this message in context:
>>>>
>> 
>> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14456938.html
>>>> Sent from the Lucene - Java Users mailing list archive at
>>  Nabble.com.
>>>>
>>>>
>>>>
>>  ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>> 
>>> 
>> 
>> -- 
>> View this message in context:
>> 
>> http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14476062.html
>> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
>> 
>> 
>> 
>>       __________________________________________________________
>> Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
>> 
>> 
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>> 
>> 
>> 
> 
> 

-- 
View this message in context: http://www.nabble.com/Which-file-in-the-lucene-package-is-used-to-manipulate-results..-tp14450335p14528677.html
Sent from the Lucene - Java Users mailing list archive at Nabble.com.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 28 18:17:35 2007
Return-Path: <java-user-return-31697-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 85674 invoked from network); 28 Dec 2007 18:17:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2007 18:17:35 -0000
Received: (qmail 15245 invoked by uid 500); 28 Dec 2007 18:17:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15218 invoked by uid 500); 28 Dec 2007 18:17:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15207 invoked by uid 99); 28 Dec 2007 18:17:17 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 10:17:17 -0800
X-ASF-Spam-Status: No, hits=-3.8 required=10.0
	tests=RCVD_IN_DNSWL_MED,SPF_PASS,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: local policy)
Received: from [128.230.108.46] (HELO SUEXCL-02.ad.syr.edu) (128.230.108.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 18:16:52 +0000
X-MimeOLE: Produced By Microsoft Exchange V6.5
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Which file in the lucene package is used to manipulate results..
Date: Fri, 28 Dec 2007 13:16:23 -0500
Message-ID: <9294E20AED46934EA459020706463F9466440F@SUEXCL-02.ad.syr.edu>
In-Reply-To: <14528677.post@talk.nabble.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Which file in the lucene package is used to manipulate results..
Thread-Index: AchJd1/IrJmWu3mFTHuklxultbfjcwABkM6g
From: "Steven A Rowe" <sarowe@syr.edu>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org

Hi Sumit,

Here's a good place to start:

   http://lucene.apache.org/java/docs/scoring.html

Steve

On 12/28/2007 at 12:30 PM, sumittyagi wrote:
>=20
> also
> what is the lucene ranking (scoring documents) formula
>=20
> sumittyagi wrote:
> >=20
> > hi which file can i edit to change the scoring factors in lucene =
results
> >=20
> > markharw00d wrote:
> > >=20
> > > Thanks for the context - much more useful. The challenge here is
> > > similar to that posed by offering end-user tagging of content (see =
here
> > >=20
> http://www.mail-archive.com/java-user@lucene.apache.org/msg175
> 80.html ).
> > > The main difference here being that words are added to docs =
implicitly
> > > by search click-throughs rather than any explicit tagging action.
> > >=20
> > > In both cases the challenge is that the user data around documents =
is
> > > likely to be updated very often while the documents remain =
relatively
> > > static. I suspect some additional things to think about are: 1)
> > > Cancelling out the "human laziness" bias that favours clicking =
results
> > > on page 1. Are clicks on page 2 worth more? 2) Spam clicks - =
detecting
> > > deliberate gaming of your re-ranking algorithm. 3) Lucene doc IDs =
are
> > > not stable - how will you associate query terms/click data with
> > > documents and join them at speed? 4) Are individual words or =
phrases
> > > the unit of boost? "Paris" means different things in "Paris =
Hilton"
> > > and "Paris, France".
> > >=20
> > > A simple approach might be to re-index your content with all of =
the
> > > additional search terms from clicks added to the associated =
document
> > > in a "searchClicks" field - the more clicks, the more repetitions =
of
> > > the same search words in the document to help with tf (Term
> > > Frequency). This additional content would need to be capped, to =
avoid
> > > huge documents. This has the disadvantage of requiring a re-index
> > > though. Another option to avoid reindexing everything is to wrap
> > > IndexReader (See FilterIndexReader) and implement =
TermEnum/TermDocs
> > > for a fake field called "searchClicks". The idea is Lucene looks =
after
> > > the usual, static document content while your implementation goes =
off
> > > to your more volatile storage (e.g. database/parallel index, =
custom
> > > file structure) to retrieve lists of doc ids, term frequencies =
etc.
> > > for this "searchClicks" field. All of the Lucene queries you might
> > > want to throw at this e.g. PhraseQueries can then test both the =
static
> > > Lucene fields and your new volatile "click" fields without being =
aware
> > > of this low-level trickery.
> > >=20
> > > I'm sure there will be other ways of doing this too but this seems
> > > like a conceptually clean way of modelling it - just seeing search
> > > terms as extensions to the document content.
> > >=20
> > > Cheers
> > > Mark
> > >=20
> > >=20
> > > ----- Original Message ----
> > > From: sumittyagi <ping.sumit@gmail.com>
> > > To: java-user@lucene.apache.org
> > > Sent: Sunday, 23 December, 2007 5:30:55 AM
> > > Subject: Re: Which file in the lucene package is used to =
manipulate
> > > results..
> > >=20
> > >=20
> > > Actually what i have to do is...
> > > 1.) for every query(keyword), among the results obtained,
> the keyword
> > >  will
> > > be mapped with the page clicked, along with the no. of clicks for =
that
> > > keyword on that page 2.) next time for the same query(keyword), =
the
> > > mapped pages will be
> > >  ranked
> > > higher considering the no. of clicks too..
> > > 3.) for every new query these steps will be repeated...
> > > this was a very high level view , i have made algorithms for these
> > >  modules
> > > and trying to incorporate with lucene but dont know , on
> which files i
> > >  have
> > > to do edition to make it work...
> > > please help me regarding this, if you need some more explanation,
> > >  please let
> > > me know...
> > > thanks
> > > Sumit Tyagi
> > >=20
> > >=20
> > >=20
> > >=20
> > >=20
> > > Erick Erickson wrote:
> > > >=20
> > > > You still haven't explained *why* you want to rerank results. =
What is
> > > > the use-case you're trying to implement? Quite often it's turned =
out
> > > > for me that when I let folks on the list know what the use case =
I'm
> > > > trying to support is, they come up with much more elegant =
solutions
> > > > than I was thinking about.
> > > >=20
> > > > For instance, does the CustomScoreQuery class have any relevance
> > > > to your problem?
> > > >=20
> > > > If you're thinking of modifying the core Lucene code for your =
special
> > > > purpose, I'd advise against it unless and until you'd exhausted =
all
> > > > the other options. It's always a maintenance headache to do =
this.
> > > >=20
> > > > Best
> > > > Erick
> > > >=20
> > > > On Dec 21, 2007 10:09 AM, sumittyagi <ping.sumit@gmail.com> =
wrote:
> > > >=20
> > > > >=20
> > > > > actually i am writing a module to rerank the results, so
> i want to
> > >  edit
> > > > > the file which arrange the results and give them ranks, or is =
there
> > > > > any other way i can use my module to rerank the results
> > > > >=20
> > > > >=20
> > > > > markharw00d wrote:
> > > > > >=20
> > > > > > I think you need to describe your "factors" in more detail.
> > >  Exactly
> > > > > what
> > > > > > do you want to achieve for your users?
> > > > > > We could be talking about any number of Lucene functions =
here.
> > > > > >=20
> > > > > > ----- Original Message ---- From: sumittyagi =
<ping.sumit@gmail.com>
> > > > > > To: java-user@lucene.apache.org Sent: Friday, 21 December, =
2007
> > > > > > 4:51:09 AM Subject: Which file in the lucene package is used =
to
> > > > > > manipulate results..
> > > > > >=20
> > > > > >=20
> > > > > > hi, i am using lucene for the very first time and want to
> > >  manipulate
> > > > > >  the
> > > > > > results, by adding some more factors to it, which file =
should i
> > > > > > edit to manipulate the search results....
> > > > > >=20
> > > > > > Thanks
> > > > > > Sumit Tyagi
> > > > > > --
> > > > > > View this message in context:
> > > > > >=20
> > > > > >=20
> > > > >=20
> > >=20
> > >=20
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used
> -to-manipulate-results..-tp14450335p14450335.html
> > > > > > Sent from the Lucene - Java Users mailing list archive at
> > > > > > Nabble.com.
> > > > > >=20
> > > > > >=20
> > > > > >=20
> > > > > >=20
> > > > > >=20
> > > > > >=20
> > > > > > __________________________________________________________ =
Sent
> > > > > > from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
> > > > > >=20
> > > > > >=20
> > > > > >=20
> > >=20
> ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail: =
java-user-unsubscribe@lucene.apache.org For
> > > > > > additional commands, e-mail: =
java-user-help@lucene.apache.org
> > > > > >=20
> > > > > >=20
> > > > > >=20
> > > > >=20
> > > > > --
> > > > > View this message in context:
> > > > >=20
> > >=20
> > >=20
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used
> -to-manipulate-results..-tp14450335p14456938.html
> > > > > Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
> > > > >=20
> > > > >=20
> > > > >=20
> > >=20
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail: =
java-user-unsubscribe@lucene.apache.org
> > > > > For additional commands, e-mail: =
java-user-help@lucene.apache.org
> > > > >=20
> > > > >=20
> > > >=20
> > > >=20
> > >=20
> > > --
> > > View this message in context:
> > >=20
> > >=20
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used
> -to-manipulate-results..-tp14450335p14476062.html
> > > Sent from the Lucene - Java Users mailing list archive at =
Nabble.com.
> > >=20
> > >=20
> > >=20
> > > =
---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org =
For
> > > additional commands, e-mail: java-user-help@lucene.apache.org
> > >=20
> > >=20
> > >=20
> > >=20
> > >=20
> > >=20
> > >       __________________________________________________________
> > > Sent from Yahoo! Mail - a smarter inbox http://uk.mail.yahoo.com
> > >=20
> > >=20
> > >=20
> > > =
---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org =
For
> > > additional commands, e-mail: java-user-help@lucene.apache.org
> > >=20
> > >=20
> > >=20
> >=20
> >=20
>=20
> -- View this message in context:
> http://www.nabble.com/Which-file-in-the-lucene-package-is-used
> -to-manipulate-results..-tp14450335p14528677.html Sent from the Lucene =
-
> Java Users mailing list archive at Nabble.com.
>=20
>=20
> --------------------------------------------------------------------- =
To
> unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org For
> additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Dec 28 18:39:59 2007
Return-Path: <java-user-return-31698-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97531 invoked from network); 28 Dec 2007 18:39:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 28 Dec 2007 18:39:59 -0000
Received: (qmail 35349 invoked by uid 500); 28 Dec 2007 18:39:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35313 invoked by uid 500); 28 Dec 2007 18:39:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35302 invoked by uid 99); 28 Dec 2007 18:39:42 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 10:39:42 -0800
X-ASF-Spam-Status: No, hits=1.4 required=10.0
	tests=SPF_NEUTRAL,WHOIS_MYPRIVREG
X-Spam-Check-By: apache.org
Received-SPF: neutral (athena.apache.org: local policy)
Received: from [208.97.132.177] (HELO spunkymail-a9.g.dreamhost.com) (208.97.132.177)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 28 Dec 2007 18:39:17 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a9.g.dreamhost.com (Postfix) with ESMTP id 24B552123E
	for <java-user@lucene.apache.org>; Fri, 28 Dec 2007 10:39:18 -0800 (PST)
Message-Id: <B82E3A7E-3447-471B-BF72-AFDDFF2C86C5@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <14527508.post@talk.nabble.com>
Content-Type: text/plain; charset=WINDOWS-1252; format=flowed; delsp=yes
Content-Transfer-Encoding: quoted-printable
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Synonyms and Ranking
Date: Fri, 28 Dec 2007 13:39:17 -0500
References: <14518753.post@talk.nabble.com> <78F0C76E-1A1C-4237-AAA8-DDCCE676FC7E@apache.org> <14527508.post@talk.nabble.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

Yes, the Payload stuff should work for this, but you will have to set =20=

it up during indexing.  The simpler approach is probably a separate =20
field for synonyms, but this means analyzing the same content twice =20
(or trying out the TeeTokenFilter, but this is advanced usage at this =20=

point, since it is unreleased.)

There is no support for payloads in the query parser, so you would =20
have to construct the queries on your own or at least add in queries =20
based on the clauses that the QueryParser outputs.



On Dec 28, 2007, at 10:54 AM, Frank Schima wrote:

>
> Hi Grant,
>
>
>
> Grant Ingersoll-6 wrote:
>>
>> You can use the payload functionality (have a look at
>> BoostingTermQuery and Michael B. excellent ApacheCon talk at
>> http://people.apache.org/~buschmi/apachecon/).  Other option is to =20=

>> put
>> the synonyms into a separate field and boost that less than the main
>> field.
>>
>> On Dec 27, 2007, at 4:19 PM, Frank Schima wrote:
>>
>>> So I have my fancy new stemmed synonym based Lucene index. Let's say
>>> I have
>>> the following synonym defined:
>>>
>>> radiation -> radiotherapy (and the reverse)
>>>
>>> The search results rank all results exactly the same. Is there a way
>>> to
>>> Boost the actual search term a little higher than the synonym(s)?
>>
>
> To be clear, if someone searches for "radiation" I want content =20
> exactly with
> "radiation" to rank higher than content with "radiotherapy". But if =20=

> someone
> searches for "radiotherapy", I want content with that to rank higher =20=

> than
> content with "radiation". Will Payloads do this for me?
>
> I would try it but I'm having trouble figuring out how to do the =20
> search. For
> the search, I'm currently using a MultiFieldQueryParser, so like this:
>
>    SnowballAnalyzer sba =3D new SnowballAnalyzer("English",
> StopAnalyzer.ENGLISH_STOP_WORDS);
>    QueryParser qp =3D new MultiFieldQueryParser( new String[] =
{"field1",
> "field2", "field3"}, sba );
>    try {
>      Query query =3D qp.parse(strSearchTerms);
>    } catch ( Throwable th) {
>       ...
>    }
>
> However, the payload example in the presentation requires a
> BoostingTermQuery, like this:
>
>    Query query =3D new BoostingTermQuery( new Term(=93field=94, =20
> =93searchterm=94));
>
> Is there a way to make the two work together?
>
>
> Thanks!
> Frank
>
>
> --=20
> View this message in context: =
http://www.nabble.com/Synonyms-and-Ranking-tp14518753p14527508.html
> Sent from the Lucene - Java Users mailing list archive at Nabble.com.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 29 10:45:06 2007
Return-Path: <java-user-return-31699-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92669 invoked from network); 29 Dec 2007 10:45:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2007 10:45:06 -0000
Received: (qmail 77199 invoked by uid 500); 29 Dec 2007 10:44:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77166 invoked by uid 500); 29 Dec 2007 10:44:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77153 invoked by uid 99); 29 Dec 2007 10:44:48 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Dec 2007 02:44:48 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 209.85.146.176 as permitted sender)
Received: from [209.85.146.176] (HELO wa-out-1112.google.com) (209.85.146.176)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Dec 2007 10:44:25 +0000
Received: by wa-out-1112.google.com with SMTP id j40so6612627wah.11
        for <java-user@lucene.apache.org>; Sat, 29 Dec 2007 02:44:29 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        bh=QmXpBnycrGl9Vi4iGCvjiIbFUgoOPUsfNpEN3WYy2O8=;
        b=O+RK86M5LNbuBI4VXcs7AkU2GCpaHQAaCxwzXN2X3xaCduj4RRN8GucxJd34cCe2SoUIX7syUMHogn41QscIu1j0MHwYTWY16lRFDDLypm/1kq4TtBGBVL34rqsiVF4p2/2i2p41t/vpw4BLdEZJUPsck1iig9RKFY60PmQ8LT8=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:content-type:content-transfer-encoding;
        b=d+V7lNuhxncVgQdd+vjPKUd8kmu3IBeLMuzizJjw7WoUpKQJUy45aH11jmvyUnD2f7JMPd4RIzgjPVO6pF89n1w73s2/L4dpOL//44lSAzrB4PypX7KsTz6JxWnT7vvC3uNhkZvNh4AzNGyFG7F/rTB0fEJmwg6/5oVAWrUHvyo=
Received: by 10.114.156.1 with SMTP id d1mr1313258wae.120.1198925069636;
        Sat, 29 Dec 2007 02:44:29 -0800 (PST)
Received: from ?10.0.77.17? ( [202.125.143.65])
        by mx.google.com with ESMTPS id m27sm15957584pof.10.2007.12.29.02.44.13
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 29 Dec 2007 02:44:29 -0800 (PST)
Message-ID: <477624E4.9070201@gmail.com>
Date: Sat, 29 Dec 2007 15:43:48 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Calculating Precision and Recall
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Hello All,

I want to calculate the Precision and Recall of the current system, 
based on Lucene. What should be the procedure and either there are some 
tools available for this purpose.

Kindly guide me.

Regards,
Liaqat

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Dec 29 13:37:00 2007
Return-Path: <java-user-return-31700-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16904 invoked from network); 29 Dec 2007 13:37:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 29 Dec 2007 13:37:00 -0000
Received: (qmail 40067 invoked by uid 500); 29 Dec 2007 13:36:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40030 invoked by uid 500); 29 Dec 2007 13:36:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40019 invoked by uid 99); 29 Dec 2007 13:36:43 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Dec 2007 05:36:43 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.202] (HELO spunkymail-a4.g.dreamhost.com) (208.97.132.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Dec 2007 13:36:29 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a4.g.dreamhost.com (Postfix) with ESMTP id 62F963B9E4
	for <java-user@lucene.apache.org>; Sat, 29 Dec 2007 05:36:19 -0800 (PST)
Message-Id: <E887FE66-DA73-479A-921B-CC4234D79858@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <477624E4.9070201@gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Calculating Precision and Recall
Date: Sat, 29 Dec 2007 08:36:17 -0500
References: <477624E4.9070201@gmail.com>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

http://trec.nist.gov/trec_eval/trec_eval.8.0.tar.gz is a program that  
takes in the a results file and a set of judgments and spits out  
precision and recall.  If you want more info, have a look at the TREC  
program.  Also, the Lucene contrib/benchmark section has some tools  
for doing Quality benchmarks.   My talk at http://people.apache.org/~gsingers/apachecon07/LucenePerformance.ppt 
  has a _little_ bit of info on precision/recall, but there is  
certainly more to be had out there than that.

Do you have relevance judgments?

-Grant


On Dec 29, 2007, at 5:43 AM, Liaqat Ali wrote:

> Hello All,
>
> I want to calculate the Precision and Recall of the current system,  
> based on Lucene. What should be the procedure and either there are  
> some tools available for this purpose.
>
> Kindly guide me.
>
> Regards,
> Liaqat
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 30 00:54:59 2007
Return-Path: <java-user-return-31701-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20299 invoked from network); 30 Dec 2007 00:54:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2007 00:54:59 -0000
Received: (qmail 62585 invoked by uid 500); 30 Dec 2007 00:54:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62552 invoked by uid 500); 30 Dec 2007 00:54:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62541 invoked by uid 99); 30 Dec 2007 00:54:43 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Dec 2007 16:54:42 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dominik@dbruhn.de designates 85.10.192.207 as permitted sender)
Received: from [85.10.192.207] (HELO pageserv2.de) (85.10.192.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 00:54:21 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by pageserv2.de (Postfix) with ESMTP id 816D51B57F7
	for <java-user@lucene.apache.org>; Sun, 30 Dec 2007 01:54:24 +0100 (CET)
X-Virus-Scanned: amavisd-new at pageserv2.de
Received: from pageserv2.de ([127.0.0.1])
	by localhost (pageserv2.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 5GnVQvJnD4S0 for <java-user@lucene.apache.org>;
	Sun, 30 Dec 2007 01:54:24 +0100 (CET)
Received: from localhost (unknown [10.1.20.49])
	by pageserv2.de (Postfix) with ESMTP id F40A51B4FD0
	for <java-user@lucene.apache.org>; Sun, 30 Dec 2007 01:54:23 +0100 (CET)
Date: Sun, 30 Dec 2007 01:54:59 +0100
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Subject: Prioiritze new documents
Message-ID: <20071230005459.GC2029@dbruhn.de>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="IpbVkmxF4tDyP/Kb"
Content-Disposition: inline
User-Agent: Mutt/1.5.17 (2007-11-01)
X-Virus-Checked: Checked by ClamAV on apache.org

--IpbVkmxF4tDyP/Kb
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Hy,
I got a large index and when searching for a term I want the newer
documents be at the begining of the result set. I dont need a real order
by time but lucene should prioritze the newer documents.
I got the time of the document creation as a index-field but it takes
very long if I would force lucene to sort by this field, so I want to
avoid this and instead use a less sharp priority based ordering.

Can anybody give me a hint?

Thanks
--=20
Dominik Bruhn
mailto: dominik@dbruhn.de

--IpbVkmxF4tDyP/Kb
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQFHduxjL62MPsbzkm0RAro/AJ4jrfsRpfx0fb4U8NgwIWJJI5vBEACglCz4
1ssb3J/PXPd9Q5wFufL+nfw=
=Rc4p
-----END PGP SIGNATURE-----

--IpbVkmxF4tDyP/Kb--

From java-user-return-31702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 30 01:00:04 2007
Return-Path: <java-user-return-31702-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21067 invoked from network); 30 Dec 2007 01:00:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2007 01:00:02 -0000
Received: (qmail 64393 invoked by uid 500); 30 Dec 2007 00:59:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64358 invoked by uid 500); 30 Dec 2007 00:59:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64347 invoked by uid 99); 30 Dec 2007 00:59:46 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Dec 2007 16:59:46 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dominik@dbruhn.de designates 85.10.192.207 as permitted sender)
Received: from [85.10.192.207] (HELO pageserv2.de) (85.10.192.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 00:59:35 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by pageserv2.de (Postfix) with ESMTP id 0B17D1B57F7
	for <java-user@lucene.apache.org>; Sun, 30 Dec 2007 01:59:28 +0100 (CET)
X-Virus-Scanned: amavisd-new at pageserv2.de
Received: from pageserv2.de ([127.0.0.1])
	by localhost (pageserv2.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id cktpusPErrGi for <java-user@lucene.apache.org>;
	Sun, 30 Dec 2007 01:59:25 +0100 (CET)
Received: from localhost (unknown [10.1.20.49])
	by pageserv2.de (Postfix) with ESMTP id C22011B4FD0
	for <java-user@lucene.apache.org>; Sun, 30 Dec 2007 01:59:22 +0100 (CET)
Date: Sun, 30 Dec 2007 01:59:57 +0100
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Subject: Simple Filter-Question
Message-ID: <20071230005957.GD2029@dbruhn.de>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="osDK9TLjxFScVI/L"
Content-Disposition: inline
User-Agent: Mutt/1.5.17 (2007-11-01)
X-Virus-Checked: Checked by ClamAV on apache.org

--osDK9TLjxFScVI/L
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Hy,
I got a Integerfield for each of my documents which tells me out of
which area of my documentbase this document is. So 1 is "Research Theme
1", 2 is "Research Theme 2", 3 is "Documentation Projekt 21" and so on.

Uppon searching I want to have only documents from areas the user is
allowed to look at in the resultset. Currently I'm doing this using a
second (internal constructed) Query which limits the area and combining
this to the user-query using a Boolean-Query.

I know this is the wrong approach and that the right solution should be
a Filter. But I dont know which filter to use and how. I saw a example
of a RangeFilter which seems quite simple but a range is not enough! I
dont need to check against a range but against a list of allowed ids.

Can anybody help me an give me a hint how I can accomplish this?=20

Thanks
--=20
Dominik Bruhn
mailto: dominik@dbruhn.de

--osDK9TLjxFScVI/L
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQFHdu2NL62MPsbzkm0RAmQKAJ96mVbYS3yQLeXADl8iwHeklP84OgCfZras
G9ZjrFifcmWEVoK4ZdlmVNY=
=tXgR
-----END PGP SIGNATURE-----

--osDK9TLjxFScVI/L--

From java-user-return-31703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 30 07:46:53 2007
Return-Path: <java-user-return-31703-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87812 invoked from network); 30 Dec 2007 07:46:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2007 07:46:52 -0000
Received: (qmail 43881 invoked by uid 500); 30 Dec 2007 07:46:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43845 invoked by uid 500); 30 Dec 2007 07:46:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43834 invoked by uid 99); 30 Dec 2007 07:46:35 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 29 Dec 2007 23:46:35 -0800
X-ASF-Spam-Status: No, hits=2.0 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of liaqatalimian@gmail.com designates 72.14.214.233 as permitted sender)
Received: from [72.14.214.233] (HELO hu-out-0506.google.com) (72.14.214.233)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 07:46:11 +0000
Received: by hu-out-0506.google.com with SMTP id 27so360960hub.15
        for <java-user@lucene.apache.org>; Sat, 29 Dec 2007 23:46:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=gmail.com; s=gamma;
        h=domainkey-signature:received:received:message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        bh=CZrHoK1jN2KnLpy0fd0mlqLdvgrCdQyT/I9wJ+Eaolc=;
        b=xlx8QIOr9tN8VAA8R21Lpe1yYp5PVnkOt9UTgMAgBmJr23eZIs40srmTFwVeU81kRytJQ28N+RG0MsW619KvgAicgUy2SyvRvDLWGFL8Bd8ss+x8EZj2lqZ0GipuJZ+Zz3tjP3m9+5um3vGa03hkeMMsviPtYBSoP2jyFDmjSGI=
DomainKey-Signature: a=rsa-sha1; c=nofws;
        d=gmail.com; s=gamma;
        h=message-id:date:from:user-agent:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=YoKWpxjqb0s6qOnT0sPx/WHWu7oEHAOtW6NY5BhsSEI5EKvHrR7CsZHVoIkWQJtkKLLVP2JNoIoPnJ5wnvm1J0nJi2u2b1yQg8z9EWftMJDxW0V/zHqJP0m8d1hecP0MFiXhJip11AN9bNIYcEdWHFzAj3Xe4IqXQJ4Ke9eYHqw=
Received: by 10.67.15.6 with SMTP id s6mr10271990ugi.82.1199000772433;
        Sat, 29 Dec 2007 23:46:12 -0800 (PST)
Received: from ?10.0.50.215? ( [202.125.143.68])
        by mx.google.com with ESMTPS id l33sm12539764ugc.67.2007.12.29.23.46.07
        (version=TLSv1/SSLv3 cipher=RC4-MD5);
        Sat, 29 Dec 2007 23:46:11 -0800 (PST)
Message-ID: <47774C90.2080200@gmail.com>
Date: Sun, 30 Dec 2007 12:45:20 +0500
From: Liaqat Ali <liaqatalimian@gmail.com>
User-Agent: Thunderbird 2.0.0.9 (Windows/20071031)
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Calculating Precision and Recall
References: <477624E4.9070201@gmail.com> <E887FE66-DA73-479A-921B-CC4234D79858@apache.org>
In-Reply-To: <E887FE66-DA73-479A-921B-CC4234D79858@apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org

Grant Ingersoll wrote:
> http://trec.nist.gov/trec_eval/trec_eval.8.0.tar.gz is a program that 
> takes in the a results file and a set of judgments and spits out 
> precision and recall.  If you want more info, have a look at the TREC 
> program.  Also, the Lucene contrib/benchmark section has some tools 
> for doing Quality benchmarks.   My talk at 
> http://people.apache.org/~gsingers/apachecon07/LucenePerformance.ppt has 
> a _little_ bit of info on precision/recall, but there is certainly 
> more to be had out there than that.
>
> Do you have relevance judgments?
>
> -Grant
>
>
> On Dec 29, 2007, at 5:43 AM, Liaqat Ali wrote:
>
>> Hello All,
>>
>> I want to calculate the Precision and Recall of the current system, 
>> based on Lucene. What should be the procedure and either there are 
>> some tools available for this purpose.
>>
>> Kindly guide me.
>>
>> Regards,
>> Liaqat
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
> --------------------------
> Grant Ingersoll
> http://lucene.grantingersoll.com
> http://www.lucenebootcamp.com
>
> Lucene Helpful Hints:
> http://wiki.apache.org/lucene-java/BasicsOfPerformance
> http://wiki.apache.org/lucene-java/LuceneFAQ
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
Thanks Grant for the suggestion, I have relevance judgments. As treceval 
is concerned, I have a little bit problem with understanding of  Relfile 
of TREC format. the first field is Doc id , second Iter, Third Doc name 
and what is the fourth field (which is either 0 or 1).Can you explain 
that to me.  And how I can calculate things manually, because I have 
small number of documents.

Regards,
Liaqat

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 30 10:41:53 2007
Return-Path: <java-user-return-31704-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5191 invoked from network); 30 Dec 2007 10:41:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2007 10:41:53 -0000
Received: (qmail 87817 invoked by uid 500); 30 Dec 2007 10:41:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 87782 invoked by uid 500); 30 Dec 2007 10:41:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 87771 invoked by uid 99); 30 Dec 2007 10:41:36 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 02:41:36 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.18.15 as permitted sender)
Received: from [80.67.18.15] (HELO smtprelay03.ispgateway.de) (80.67.18.15)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 10:41:12 +0000
Received: (qmail 20930 invoked from network); 30 Dec 2007 10:41:13 -0000
Received: from unknown (HELO p54bfeecb.dip.t-dialin.net) (695637@[84.191.238.203])
          (envelope-sender <lucenelist2007@danielnaber.de>)
          by smtprelay03.ispgateway.de (qmail-ldap-1.03) with AES256-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 30 Dec 2007 10:41:13 -0000
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Simple Filter-Question
Date: Sun, 30 Dec 2007 11:41:21 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <20071230005957.GD2029@dbruhn.de>
In-Reply-To: <20071230005957.GD2029@dbruhn.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200712301141.21213@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Sonntag, 30. Dezember 2007, Dominik Bruhn wrote:

> I know this is the wrong approach and that the right solution should be
> a Filter. But I dont know which filter to use and how.

The simplest approach is probably to wrap your limiting query with this 
class: 
http://lucene.apache.org/java/2_2_0/api/org/apache/lucene/search/QueryWrapperFilter.html

Then use that filter by calling an IndexSearcher.search() method that also 
takes a filter.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 30 12:38:20 2007
Return-Path: <java-user-return-31705-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33081 invoked from network); 30 Dec 2007 12:38:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2007 12:38:20 -0000
Received: (qmail 31589 invoked by uid 500); 30 Dec 2007 12:38:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31552 invoked by uid 500); 30 Dec 2007 12:38:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31541 invoked by uid 99); 30 Dec 2007 12:38:02 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 04:38:02 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dominik@dbruhn.de designates 85.10.192.207 as permitted sender)
Received: from [85.10.192.207] (HELO pageserv2.de) (85.10.192.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 12:37:40 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by pageserv2.de (Postfix) with ESMTP id 09AFC1B55F5
	for <java-user@lucene.apache.org>; Sun, 30 Dec 2007 13:37:44 +0100 (CET)
X-Virus-Scanned: amavisd-new at pageserv2.de
Received: from pageserv2.de ([127.0.0.1])
	by localhost (pageserv2.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id OTvjoJn+dMUd for <java-user@lucene.apache.org>;
	Sun, 30 Dec 2007 13:37:41 +0100 (CET)
Received: from localhost (unknown [10.1.20.49])
	by pageserv2.de (Postfix) with ESMTP id 93CC31B55EA
	for <java-user@lucene.apache.org>; Sun, 30 Dec 2007 13:37:41 +0100 (CET)
Date: Sun, 30 Dec 2007 13:38:25 +0100
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Subject: Re: Prioiritze new documents
Message-ID: <20071230123825.GA16137@dbruhn.de>
References: <20071230005459.GC2029@dbruhn.de>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="45Z9DzgjV8m4Oswq"
Content-Disposition: inline
In-Reply-To: <20071230005459.GC2029@dbruhn.de>
User-Agent: Mutt/1.5.17 (2007-11-01)
X-Virus-Checked: Checked by ClamAV on apache.org

--45Z9DzgjV8m4Oswq
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

Hy,
a solution came into my mind:=20
Every document gets boosted by a integer which I increment each time I
add a new document to the index. So the newer documents should get a
bigger boost than the older ones.=20

I tried it out and ran into a problem:=20
Although I set the Boost via doc.setBoost(value) for each document before w=
riting it to the index it doesnt change anything. Even worse if I look at t=
he index using Luke (Version 0.7.1) each document got a boost of 1 not of t=
he value supplied.

Who can help me?

Thanks
--=20
Dominik Bruhn
mailto: dominik@dbruhn.de

--45Z9DzgjV8m4Oswq
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQFHd5FBL62MPsbzkm0RAsutAJ0UY+/Wumfy+cprDD8p5j8B4oczjACgjJwE
RNyVE7OaRMO5TRCAYKerERk=
=vEGx
-----END PGP SIGNATURE-----

--45Z9DzgjV8m4Oswq--

From java-user-return-31706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 30 13:09:07 2007
Return-Path: <java-user-return-31706-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35677 invoked from network); 30 Dec 2007 13:09:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2007 13:09:06 -0000
Received: (qmail 43676 invoked by uid 500); 30 Dec 2007 13:08:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43632 invoked by uid 500); 30 Dec 2007 13:08:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43621 invoked by uid 99); 30 Dec 2007 13:08:50 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 05:08:50 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 13:08:37 +0000
Received: (qmail 17894 invoked from network); 30 Dec 2007 13:08:29 -0000
Received: from unknown (HELO p54bfe6b3.dip.t-dialin.net) (695637@[84.191.230.179])
          (envelope-sender <lucenelist2007@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 30 Dec 2007 13:08:29 -0000
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Prioiritze new documents
Date: Sun, 30 Dec 2007 14:08:37 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <20071230005459.GC2029@dbruhn.de> <20071230123825.GA16137@dbruhn.de>
In-Reply-To: <20071230123825.GA16137@dbruhn.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200712301408.37498@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Sonntag, 30. Dezember 2007, Dominik Bruhn wrote:

> Although I set the Boost via doc.setBoost(value) for each document
> before writing it to the index it doesnt change anything. Even worse if
> I look at the index using Luke (Version 0.7.1) each document got a boost
> of 1 not of the value supplied.

=46rom the Javadoc of getBoost():

Note: This value is not stored directly with the document in the index.=20
Documents returned from IndexReader.document(int) and Hits.doc(int) may=20
thus not have the same value present as when this document was indexed.

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 30 13:15:16 2007
Return-Path: <java-user-return-31707-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36187 invoked from network); 30 Dec 2007 13:15:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2007 13:15:16 -0000
Received: (qmail 47218 invoked by uid 500); 30 Dec 2007 13:15:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47183 invoked by uid 500); 30 Dec 2007 13:15:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47172 invoked by uid 99); 30 Dec 2007 13:15:00 -0000
Received: from athena.apache.org (HELO athena.apache.org) (140.211.11.136)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 05:15:00 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (athena.apache.org: domain of dominik@dbruhn.de designates 85.10.192.207 as permitted sender)
Received: from [85.10.192.207] (HELO pageserv2.de) (85.10.192.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 13:14:38 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by pageserv2.de (Postfix) with ESMTP id AA53C1B5628
	for <java-user@lucene.apache.org>; Sun, 30 Dec 2007 14:14:41 +0100 (CET)
X-Virus-Scanned: amavisd-new at pageserv2.de
Received: from pageserv2.de ([127.0.0.1])
	by localhost (pageserv2.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id o7MnYtKYrrCu for <java-user@lucene.apache.org>;
	Sun, 30 Dec 2007 14:14:40 +0100 (CET)
Received: from localhost (unknown [10.1.20.49])
	by pageserv2.de (Postfix) with ESMTP id 484191B55E4
	for <java-user@lucene.apache.org>; Sun, 30 Dec 2007 14:14:40 +0100 (CET)
Date: Sun, 30 Dec 2007 14:15:23 +0100
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Subject: Re: Prioiritze new documents
Message-ID: <20071230131523.GA19109@dbruhn.de>
References: <20071230005459.GC2029@dbruhn.de> <20071230123825.GA16137@dbruhn.de> <200712301408.37498@danielnaber.de>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="ibTvN161/egqYuK8"
Content-Disposition: inline
In-Reply-To: <200712301408.37498@danielnaber.de>
User-Agent: Mutt/1.5.17 (2007-11-01)
X-Virus-Checked: Checked by ClamAV on apache.org

--ibTvN161/egqYuK8
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

On Sun, Dec 30, 2007 at 02:08:37PM +0100, Daniel Naber wrote:
> From the Javadoc of getBoost():
>=20
> Note: This value is not stored directly with the document in the index.=
=20
> Documents returned from IndexReader.document(int) and Hits.doc(int) may=
=20
> thus not have the same value present as when this document was indexed.
I already know this, but ALL documents got a bost of 1. The values
should a least differ some how, shouldnt they?

Thanks!
--=20
Dominik Bruhn
mailto: dominik@dbruhn.de

--ibTvN161/egqYuK8
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQFHd5nrL62MPsbzkm0RAqq2AKCdYSFyi7lYOuqt+8NR8eLgd4ZtAwCfRaTg
gDWWEtPXvlZdPgGPDNVon7A=
=Pq2S
-----END PGP SIGNATURE-----

--ibTvN161/egqYuK8--

From java-user-return-31708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 30 13:32:42 2007
Return-Path: <java-user-return-31708-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37768 invoked from network); 30 Dec 2007 13:32:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2007 13:32:42 -0000
Received: (qmail 52362 invoked by uid 500); 30 Dec 2007 13:32:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52333 invoked by uid 500); 30 Dec 2007 13:32:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52322 invoked by uid 99); 30 Dec 2007 13:32:25 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 05:32:25 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of lucenelist2007@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 13:32:13 +0000
Received: (qmail 29060 invoked from network); 30 Dec 2007 13:32:05 -0000
Received: from unknown (HELO p54bfe6b3.dip.t-dialin.net) (695637@[84.191.230.179])
          (envelope-sender <lucenelist2007@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with AES256-SHA encrypted SMTP
          for <java-user@lucene.apache.org>; 30 Dec 2007 13:32:05 -0000
From: Daniel Naber <lucenelist2007@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Prioiritze new documents
Date: Sun, 30 Dec 2007 14:32:14 +0100
User-Agent: KMail/1.9.6 (enterprise 20070904.708012)
References: <20071230005459.GC2029@dbruhn.de> <200712301408.37498@danielnaber.de> <20071230131523.GA19109@dbruhn.de>
In-Reply-To: <20071230131523.GA19109@dbruhn.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200712301432.14155@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org

On Sonntag, 30. Dezember 2007, Dominik Bruhn wrote:

> I already know this, but ALL documents got a bost of 1. The values
> should a least differ some how, shouldnt they?

Yes, it looks like a bug, at least in the javadoc. In FieldsReader, the 
document is created but setBoost() is never called. So calling getBoost is 
like calling get("field") on a field that isn't stored. Could you open an 
issue for this?

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-31709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 30 14:22:06 2007
Return-Path: <java-user-return-31709-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42533 invoked from network); 30 Dec 2007 14:22:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2007 14:22:06 -0000
Received: (qmail 64412 invoked by uid 500); 30 Dec 2007 14:21:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64380 invoked by uid 500); 30 Dec 2007 14:21:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64369 invoked by uid 99); 30 Dec 2007 14:21:49 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 06:21:49 -0800
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (nike.apache.org: domain of dominik@dbruhn.de designates 85.10.192.207 as permitted sender)
Received: from [85.10.192.207] (HELO pageserv2.de) (85.10.192.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 14:21:39 +0000
Received: from localhost (localhost.localdomain [127.0.0.1])
	by pageserv2.de (Postfix) with ESMTP id 6FD301B56F0
	for <java-user@lucene.apache.org>; Sun, 30 Dec 2007 15:21:31 +0100 (CET)
X-Virus-Scanned: amavisd-new at pageserv2.de
Received: from pageserv2.de ([127.0.0.1])
	by localhost (pageserv2.de [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id Q2DF0v55fNLW for <java-user@lucene.apache.org>;
	Sun, 30 Dec 2007 15:21:30 +0100 (CET)
Received: from localhost (unknown [10.1.20.49])
	by pageserv2.de (Postfix) with ESMTP id 4C80E1B56AB
	for <java-user@lucene.apache.org>; Sun, 30 Dec 2007 15:21:28 +0100 (CET)
Date: Sun, 30 Dec 2007 15:22:10 +0100
From: Dominik Bruhn <dominik@dbruhn.de>
To: java-user@lucene.apache.org
Subject: Re: Prioiritze new documents
Message-ID: <20071230142210.GA23811@dbruhn.de>
References: <20071230005459.GC2029@dbruhn.de> <200712301408.37498@danielnaber.de> <20071230131523.GA19109@dbruhn.de> <200712301432.14155@danielnaber.de>
MIME-Version: 1.0
Content-Type: multipart/signed; micalg=pgp-sha1;
	protocol="application/pgp-signature"; boundary="jI8keyz6grp/JLjh"
Content-Disposition: inline
In-Reply-To: <200712301432.14155@danielnaber.de>
User-Agent: Mutt/1.5.17 (2007-11-01)
X-Virus-Checked: Checked by ClamAV on apache.org

--jI8keyz6grp/JLjh
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable

On Sun, Dec 30, 2007 at 02:32:14PM +0100, Daniel Naber wrote:
> Yes, it looks like a bug, at least in the javadoc. In FieldsReader, the=
=20
> document is created but setBoost() is never called. So calling getBoost i=
s=20
> like calling get("field") on a field that isn't stored. Could you open an=
=20
> issue for this?
As I dont understand the bug or the problem you are pointing at I dont thin=
k I can ope a bugreport.=20

Regards
--=20
Dominik Bruhn
mailto: dominik@dbruhn.de

--jI8keyz6grp/JLjh
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: Digital signature
Content-Disposition: inline

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.6 (GNU/Linux)

iD8DBQFHd6mSL62MPsbzkm0RAt7ZAJ9foIM2gEA72ra6Ix+64N8n33/YRgCfaBwu
DwAzAalSJAJi0BCwJhS7uMc=
=G35f
-----END PGP SIGNATURE-----

--jI8keyz6grp/JLjh--

From java-user-return-31710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Dec 30 15:10:54 2007
Return-Path: <java-user-return-31710-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87916 invoked from network); 30 Dec 2007 15:10:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (140.211.11.2)
  by minotaur.apache.org with SMTP; 30 Dec 2007 15:10:53 -0000
Received: (qmail 75637 invoked by uid 500); 30 Dec 2007 15:10:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75604 invoked by uid 500); 30 Dec 2007 15:10:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75593 invoked by uid 99); 30 Dec 2007 15:10:36 -0000
Received: from nike.apache.org (HELO nike.apache.org) (192.87.106.230)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 07:10:36 -0800
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=SPF_NEUTRAL
X-Spam-Check-By: apache.org
Received-SPF: neutral (nike.apache.org: local policy)
Received: from [208.97.132.119] (HELO spunkymail-a6.g.dreamhost.com) (208.97.132.119)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 30 Dec 2007 15:10:22 +0000
Received: from [192.168.0.3] (adsl-074-229-189-244.sip.rmo.bellsouth.net [74.229.189.244])
	by spunkymail-a6.g.dreamhost.com (Postfix) with ESMTP id A1072109F28
	for <java-user@lucene.apache.org>; Sun, 30 Dec 2007 07:10:11 -0800 (PST)
Message-Id: <11AD0FC4-A4A4-42DC-A7E0-3B7B64802D0A@apache.org>
From: Grant Ingersoll <gsingers@apache.org>
To: java-user@lucene.apache.org
In-Reply-To: <20071230123825.GA16137@dbruhn.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed; delsp=yes
Content-Transfer-Encoding: 7bit
Mime-Version: 1.0 (Apple Message framework v915)
Subject: Re: Prioiritze new documents
Date: Sun, 30 Dec 2007 10:10:12 -0500
References: <20071230005459.GC2029@dbruhn.de> <20071230123825.GA16137@dbruhn.de>
X-Mailer: Apple Mail (2.915)
X-Virus-Checked: Checked by ClamAV on apache.org

I think it is the case that Luke doesn't show the boosts, see http://www.gossamer-threads.com/lists/lucene/java-user/32020?search_string=Luke%20boost%201;#32020


On Dec 30, 2007, at 7:38 AM, Dominik Bruhn wrote:

> Hy,
> a solution came into my mind:
> Every document gets boosted by a integer which I increment each time I
> add a new document to the index. So the newer documents should get a
> bigger boost than the older ones.
>
> I tried it out and ran into a problem:
> Although I set the Boost via doc.setBoost(value) for each document  
> before writing it to the index it doesnt change anything. Even worse  
> if I look at the index using Luke (Version 0.7.1) each document got  
> a boost of 1 not of the value supplied.
>
> Who can help me?
>
> Thanks
> -- 
> Dominik Bruhn
> mailto: dominik@dbruhn.de

--------------------------
Grant Ingersoll
http://lucene.grantingersoll.com
http://www.lucenebootcamp.com

Lucene Helpful Hints:
http://wiki.apache.org/lucene-java/BasicsOfPerformance
http://wiki.apache.org/lucene-java/LuceneFAQ





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


