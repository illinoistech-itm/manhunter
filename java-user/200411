From lucene-user-return-10965-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 01 15:29:54 2004
Return-Path: <lucene-user-return-10965-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91015 invoked from network); 1 Nov 2004 15:29:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Nov 2004 15:29:54 -0000
Received: (qmail 44986 invoked by uid 500); 1 Nov 2004 15:29:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44877 invoked by uid 500); 1 Nov 2004 15:29:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44851 invoked by uid 99); 1 Nov 2004 15:29:42 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [149.235.31.98] (HELO mucmx01.ixos.de) (149.235.31.98)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 01 Nov 2004 07:29:41 -0800
Received: from MUCXGC1.opentext.net (localhost [127.0.0.1])
	by mucmx01.ixos.de (8.12.10+Sun/8.12.10) with ESMTP id iA1FTbYL002253
	for <lucene-user@jakarta.apache.org>; Mon, 1 Nov 2004 16:29:37 +0100 (MET)
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: jaspq: dashed numerical values tokenized differently  
Date: Mon, 1 Nov 2004 16:29:35 +0100
Message-ID: <39230AE0C9B96945A501EB8598971D6F04A570@MUCXGC1.opentext.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: jaspq: dashed numerical values tokenized differently  
Thread-Index: AcTAJ5ajAq7eJjIWRrC5oGnq3q7x3A==
From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
I have just another stupid parser question:
There seems to be a special handling of the dash sign "-" different from
Lucene 1.2 at least in Lucene 1.4.RC3
StandardAnalyzer.

Examples (1.4RC3):

A document containing the string "dash-test" is matched by the following
search expressions:
dash
test
dash*
dash-test
It is _not_ matched by the following search expressions:
dash-*
dash-t*

If the string after the dash consists of digits, the behavior is
different.
E.g., a document containing the string "dash-123" is matched by:
dash*
dash-*
dash-123
It is not matched by:
dash
123

Question:
Is this, esp. the different behavior when parsing digits and characters,
intentional and how can it be explained?
Regards,

Daniel





---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10966-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 01 16:55:24 2004
Return-Path: <lucene-user-return-10966-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46761 invoked from network); 1 Nov 2004 16:55:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Nov 2004 16:55:24 -0000
Received: (qmail 77600 invoked by uid 500); 1 Nov 2004 16:55:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77524 invoked by uid 500); 1 Nov 2004 16:55:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77511 invoked by uid 99); 1 Nov 2004 16:55:12 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [195.130.132.56] (HELO adicia.telenet-ops.be) (195.130.132.56)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 01 Nov 2004 08:55:12 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by adicia.telenet-ops.be (Postfix) with SMTP
	id B0FE34445B; Mon,  1 Nov 2004 17:55:09 +0100 (MET)
Received: from pc01 (d51A55317.kabel.telenet.be [81.165.83.23])
	by adicia.telenet-ops.be (Postfix) with ESMTP
	id 354CE4422D; Mon,  1 Nov 2004 17:55:09 +0100 (MET)
Reply-To: <willydw@pandora.be>
From: "Willy De Waele" <willydw@pandora.be>
To: "'Erik Hatcher'" <erik@ehatchersolutions.com>,
	"- Lucene" <lucene-user@jakarta.apache.org>
Subject: RE: Search.jhtml ? (ok!)
Date: Mon, 1 Nov 2004 17:55:01 +0100
Organization: N/A
Message-ID: <001701c4c033$8a8abdf0$1753a551@pc01>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
In-Reply-To: <7AAD6F2C-2B1A-11D9-B3EE-000393A564E6@ehatchersolutions.com>
X-FID: PLAINTXT-NONE-0000-0000-000000000000
X-ImMailer: IncrediMail (3001509)
IMItemGuid: {20CD6690-82ED-416F-AF9A-E700384D9849}
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


	The lucene-demo is now working fine outside the tomcat/webapps dir.
	I created a folder, lets say 'c:/Test'. Copied the lucene-doxs to
that folder.=20
	Afterwards I deployed the war file to this folder.
	I created an index to 'c:/test/index' and modified the
configuration.jsp
	Last I added an application to tomcat (lucene.xml in the conf
folder).
	And ... lucene is working fine!

	Thanks a lot for your help
	Regards
	Willy
=20
-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: zondag 31 oktober 2004 09:55
To: Lucene User
Subject: Fwd: Search.jhtml ?




Begin forwarded message:

> From: Erik Hatcher <erik@ehatchersolutions.com>
> Date: October 31, 2004 3:53:39 AM EST
> To: <willydw@pandora.be>
> Subject: Re: Search.jhtml ?
>
> On Oct 30, 2004, at 9:07 AM, Willy De Waele wrote:
>> 	Indeed, when I follow the procedure it is working fine ...
>> 	I created an index with following statement:
>> 		java org.apache.lucene.demo.IndexHTML -create=20
>> "E:/Java/lucene-1.4.2/docs"
>> 		default index-dir: index
>> 		all references absolute
>> 	Why can't I search an index of files somewhere on the harddisk, in=20
>> other words why
>> 	should the 'docs' folder in de webapps/luceneweb folder ?
>

That's just what makes the demo work.  Again, the demo application is=20
merely that (and relatively weakly done, as you can tell).  Feel free=20
to borrow parts of it or adapt it for other purposes than its basic=20
purpose of showing how to index and search.

I have had strong intentions to improve the Lucene demo application. =20
The Lucene book is now done (final typesetting corrections are now=20
being made), and I've got a few more speaking commitments (Reston and=20
Denver NFJS as well as ApacheCon).  I plan on taking a bit of a=20
breather after that in November, and then in December I plan on ramping=20
up my involvement with the Lucene community, and improving the demo=20
application is going to be part of those efforts.

If you have improvements to contribute or suggest, send them our way! =20
:)

	Erik
>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: vrijdag 29 oktober 2004 22:22
>> To: Lucene Users List
>> Subject: Re: Search.jhtml ?
>>
>>
>> On Oct 29, 2004, at 12:12 PM, Willy De Waele wrote:
>>>
>>> 	First at all, thanks for you answer.
>>> 	Now I get some results with the jsp's, but the url's in de result=20
>>> is
>>
>>> not clickeable ...
>>> 	Is this normal? (should I modify the template?)
>>
>> It's a known issue that the Lucene web demo is quite shabby.
>>
>> I created detailed instructions for running it as an appendix to
>> Lucene
>> in Action.  I'm pasting the relevant sections below:
>>
>>
>> Running the web application demo The web demo is slightly involved to =

>> set up and run properly. You need a web container; our instructions=20
>> are for Tomcat 5.  The docs/demo.html documentation provides detailed =

>> instructions for setting
>> up and running the web application, but you can also follow the steps
>> provided here.  The index used by the web application differs =
slightly
>> from that in the command-line demo. First, it restricts itself to
>> indexing only .html, .htm, and .txt files. Each file it processes
>> (including .txt files) is parsed using a custom rudimentary HTML
>> parser. To build the index initially, execute IndexHTML:
>>
>> java -cp lucene-1.4.2.jar;lucene-demos-1.4.2.jar
>> org.apache.lucene.demo.IndexHTML -create -index webindex docs
>>
>> ...
>> adding docs/resources.html
>> adding docs/systemproperties.html
>> adding docs/whoweare.html
>> Optimizing index... 7220 total milliseconds
>>
>> The -index webindex switch sets the location of the index directory.
>> In
>> a moment, you=92ll need the full path to this directory to configure =
the
>> web application. The final docs argument to IndexHTML is the =
directory
>> tree to index. The =96create switch creates an index from scratch.=20
>> Remove
>> this switch to update the index with files that have been added or
>> changed since the last time the index was built.  Next, deploy
>> luceneweb.war (from the root directory of the extracted distribution)
>> into CATALINA_HOME/webapps. Start Tomcat, wait for the container to
>> complete the startup routine, and then edit
>> CATALINA_HOME/webapps/luceneweb/configuration.jsp using a text editor
>> (Tomcat should have expanded the .war file into a luceneweb directory
>> automatically). Change the value of indexLocation appropriately, as =
in
>> this example, specifying the absolute path to the index you built =
with
>> IndexHTML:
>>
>> String indexLocation =3D=20
>> "/dev/LuceneInAction/install/lucene-1.4.1/webindex";
>>
>> Now you=92re ready to try the web application. Visit=20
>> http://localhost:8080/luceneweb in your web browser, and you should=20
>> see =93Welcome to the Lucene Template application...=94 (you can also =

>> change the header and footer text in configuration.jsp). If all is=20
>> well with your configuration, searching for Lucene-specific words=20
>> such as "QueryParser AND Analyzer" should list valid results based on =

>> Lucene=92s documentation.  You may try to click on one of the search=20
>> results links
>> and receive an error. IndexHTML indexes a url field, which in this=20
>> case
>> is a relative path of docs/.... To make the result links work=20
>> properly,
>> copy the docs directory from the Lucene distribution to
>> CATALINA_HOME/webapps/luceneweb.   Yes, these steps are a bit more
>> manual than they should be. Rest assured that improvements to =
Lucene=92s
>> example applications are on our to-do list as soon as we=92re =
finished
>> writing this book!
>>
>> (sorry about the formatting of the above - it was pasted straight=20
>> from a PDF)
>>
>> 	Erik
>>
>>
>>>
>>> 	TIA & Regards
>>> 	Willy
>>>
>>> -----Original Message-----
>>> From: Daniel Naber [mailto:daniel.naber@t-online.de]
>>> Sent: donderdag 28 oktober 2004 20:21
>>> To: Lucene Users List
>>> Subject: Re: Search.jhtml ?
>>>
>>>
>>> On Thursday 28 October 2004 15:01, Willy De Waele wrote:
>>>
>>>> =A0=A0=A0=A0=A0=A0=A0=A0Executing the demos as a bat file (Windows) =
is working=20
>>>> fine, but using lucene as a web 'application' is not working ...
>>>
>>> I think that Search.jhtml is totally outdated, please try src/jsp=20
>>> instead.
>>>
>>> Regards
>>>  Daniel
>>>
>>> --
>>> http://www.danielnaber.de
>>>
>>>
>>>
>>> --------------------------------------------------------------------
>>> -
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10967-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 01 20:02:50 2004
Return-Path: <lucene-user-return-10967-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60173 invoked from network); 1 Nov 2004 20:02:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Nov 2004 20:02:49 -0000
Received: (qmail 96673 invoked by uid 500); 1 Nov 2004 20:02:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96640 invoked by uid 500); 1 Nov 2004 20:02:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96623 invoked by uid 99); 1 Nov 2004 20:02:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.230.66.155] (HELO exchange.newspaperarchive.com) (206.230.66.155)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 01 Nov 2004 12:02:39 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Search speed
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Mon, 1 Nov 2004 14:02:30 -0600
Message-ID: <A8E4FBE7AC96D4468E223B0050CBE1F10A2CE5@exchange.newspaperarchive.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search speed
Thread-Index: AcTATbe7OWHGI9/lQeaNFiBNP/NWcw==
From: "Jeff Munson" <jmunson@newspaperarchive.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm looking for tips on speeding up searches since I am a relatively new
user of Lucene. =20

I've created a single index with 4.5 million documents.  The index has
about 22 fields and one of those fields is the contents of the body tag
which can range from 5K to 35K.  When I create the field (named
"contents") that houses the contents of the body tag, the field is
stored, indexed, and tokenized.  The term position vectors are not
stored. =20

Single word searches return pretty fast, but when I try phrases,
searching seems to slow considerably.  When constructing the query I am
using the standard query object where analyzer is the StandardAnalyzer:

Code Example:
Query objQuery =3D QueryParser.parse(sSearchString, "contents", =
analyzer);

For example, the following query,  contents:Zanesville, it returns over
163,000 hits in 78 milliseconds. =20

However, if I use this query, contents:"all parts including picture tube
guaranteed", it returns hits in 2890 millseconds.  Other phrases take
longer as well. =20

My question is, are there any indexing tips (storing term vectors?) or
query tips that I can use to speed up the searching of phrases?

Thanks in advance for any tips.....


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10968-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 02 03:11:35 2004
Return-Path: <lucene-user-return-10968-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59880 invoked from network); 2 Nov 2004 03:11:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Nov 2004 03:11:35 -0000
Received: (qmail 54293 invoked by uid 500); 2 Nov 2004 03:11:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54143 invoked by uid 500); 2 Nov 2004 03:10:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54126 invoked by uid 99); 2 Nov 2004 03:10:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jackson.earnst@gmail.com designates 64.233.184.199 as permitted sender)
Received: from [64.233.184.199] (HELO wproxy.gmail.com) (64.233.184.199)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 01 Nov 2004 19:10:47 -0800
Received: by wproxy.gmail.com with SMTP id 44so165696wri
        for <lucene-user@jakarta.apache.org>; Mon, 01 Nov 2004 19:10:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=O9V34eIyIR+m/r0q9HvfoQDHabc5e4k1z+Hb55rIlitx7IDcTbgmu9mwHJTtBpi321MXQMCzIw/ZHHFSlVYZNT/fhOFTjfDiYd3WXZVHagUX3RCKwiWeTqxlldBxUiq3B2qbZ84by+vZehpkj7ZAJiunleMZgNsfB3XnWoRjBsA=
Received: by 10.54.36.47 with SMTP id j47mr64199wrj;
        Mon, 01 Nov 2004 19:10:45 -0800 (PST)
Received: by 10.54.35.61 with HTTP; Mon, 1 Nov 2004 19:10:45 -0800 (PST)
Message-ID: <b0441625041101191019b55869@mail.gmail.com>
Date: Mon, 1 Nov 2004 22:10:45 -0500
From: Jackson Earnst <jackson.earnst@gmail.com>
Reply-To: Jackson Earnst <jackson.earnst@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: commit lock, graceful handler
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm testing fault tollerance aspects of an application using Lucene. 
Consider if power is pulled form the server/workstation and it
immediately shuts down hard or crashes.

I'm faced with a situation of a commit.lock file exising in the temp
directory.  Lucene is throwing an exception when a writer is first
created against this index.  An IOexception comes about and "Lock
obtained timed out" error occurs.

REading some docs anf FAQs I see that this could be deleted and the
index will be in a usable state.

Any advice/comments/thoughts?

Is there a graceful way to handle this?  

Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10969-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 02 06:57:01 2004
Return-Path: <lucene-user-return-10969-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33456 invoked from network); 2 Nov 2004 06:57:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Nov 2004 06:57:00 -0000
Received: (qmail 31326 invoked by uid 500); 2 Nov 2004 06:56:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 31275 invoked by uid 500); 2 Nov 2004 06:56:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 31252 invoked by uid 99); 2 Nov 2004 06:56:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 01 Nov 2004 22:56:31 -0800
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 2 Nov 2004 07:56:20 +0100
Message-ID: <41872F94.6060305@ifit.uni-klu.ac.at>
Date: Tue, 02 Nov 2004 07:56:20 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: jaspq: dashed numerical values tokenized differently
References: <39230AE0C9B96945A501EB8598971D6F04A570@MUCXGC1.opentext.net>
In-Reply-To: <39230AE0C9B96945A501EB8598971D6F04A570@MUCXGC1.opentext.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 02 Nov 2004 06:56:20.0997 (UTC) FILETIME=[0F2F2350:01C4C0A9]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Daniel Taurat wrote:

>Hi,
>I have just another stupid parser question:
>There seems to be a special handling of the dash sign "-" different from
>Lucene 1.2 at least in Lucene 1.4.RC3
>StandardAnalyzer.
>  
>
 From the behaviour you describe I think that the dash sign is removed 
from the text by the analyzer.
This is quite correct because dash is used to separate two words. 
Without its elimination you won't be able to
get the "dash-test" in results if you search for: dash or/and test

I suggest you to use LUKE ... see contributors page in order to see what 
exactly you have in the index, then you will understand
why search is working like that.

 Sergiu

>Examples (1.4RC3):
>
>A document containing the string "dash-test" is matched by the following
>search expressions:
>dash
>test
>dash*
>dash-test
>It is _not_ matched by the following search expressions:
>dash-*
>dash-t*
>
>If the string after the dash consists of digits, the behavior is
>different.
>E.g., a document containing the string "dash-123" is matched by:
>dash*
>dash-*
>dash-123
>It is not matched by:
>dash
>123
>
>Question:
>Is this, esp. the different behavior when parsing digits and characters,
>intentional and how can it be explained?
>Regards,
>
>Daniel
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10970-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 02 07:18:12 2004
Return-Path: <lucene-user-return-10970-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41572 invoked from network); 2 Nov 2004 07:18:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Nov 2004 07:18:11 -0000
Received: (qmail 50522 invoked by uid 500); 2 Nov 2004 07:18:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50447 invoked by uid 500); 2 Nov 2004 07:18:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50428 invoked by uid 99); 2 Nov 2004 07:18:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 01 Nov 2004 23:18:02 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 4EA4123B94
	for <lucene-user@jakarta.apache.org>; Tue,  2 Nov 2004 08:18:09 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 05914-04 for <lucene-user@jakarta.apache.org>;
 Tue,  2 Nov 2004 08:18:09 +0100 (CET)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 2B76D23B8F
	for <lucene-user@jakarta.apache.org>; Tue,  2 Nov 2004 08:18:09 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id iA27HrmA020146
	for <lucene-user@jakarta.apache.org>; Tue, 2 Nov 2004 08:17:53 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id iA27HrNX020142;
	Tue, 2 Nov 2004 08:17:53 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16775.13473.620539.435908@tanto-xipolis.de>
Date: Tue, 2 Nov 2004 08:17:53 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Locks and Readers and Writers
In-Reply-To: <1099066061.500934973.3620.sendItem@bloglines.com>
References: <1099066061.500934973.3620.sendItem@bloglines.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

yahootintin.1247688@bloglines.com writes:
> Hi Christoph,
> 
> Thats what I thought.  But what I'm seeing is this:
> - open
> reader for searching
> (the reader is opening an index on a remote machine
> (via UNC) which takes a couple seconds)
> - meanwhile the other service opens
> an IndexWriter and adds a document
> (the index writer determines that it needs
> to merge so it tries to get a lock.  since the reader is still opening, the
> IO exception is thrown)
> 
> I believe that increasing the merge factor will
> reduce the opportunity for this to occur.  But it will still occur at some
> point.
> 
I'm not sure what you mean by `opening an index on a remote machine (via 
UNC)' but have you made sure that lock files are put in the same directory
for both processes (see the mailing list archive for details)?
Also note, that lucene's locking is known not to work on NFS (also see the
list archive). I don't know if it works on SMB mounts.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10971-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 02 08:05:03 2004
Return-Path: <lucene-user-return-10971-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59555 invoked from network); 2 Nov 2004 08:05:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Nov 2004 08:05:03 -0000
Received: (qmail 4146 invoked by uid 500); 2 Nov 2004 08:04:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4083 invoked by uid 500); 2 Nov 2004 08:04:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4068 invoked by uid 99); 2 Nov 2004 08:04:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 02 Nov 2004 00:04:47 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.12.11/8.12.11) with ESMTP id iA284i86024697
	for <lucene-user@jakarta.apache.org>; Tue, 2 Nov 2004 09:04:44 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Search speed
Date: Tue, 2 Nov 2004 09:04:44 +0100
User-Agent: KMail/1.5.4
References: <A8E4FBE7AC96D4468E223B0050CBE1F10A2CE5@exchange.newspaperarchive.com>
In-Reply-To: <A8E4FBE7AC96D4468E223B0050CBE1F10A2CE5@exchange.newspaperarchive.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411020904.44216.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 01 November 2004 21:02, Jeff Munson wrote:
> I'm looking for tips on speeding up searches since I am a relatively new
> user of Lucene.  
> 
> I've created a single index with 4.5 million documents.  The index has
> about 22 fields and one of those fields is the contents of the body tag
> which can range from 5K to 35K.  When I create the field (named
> "contents") that houses the contents of the body tag, the field is
> stored, indexed, and tokenized.  The term position vectors are not
> stored.  
> 
> Single word searches return pretty fast, but when I try phrases,
> searching seems to slow considerably.  When constructing the query I am
> using the standard query object where analyzer is the StandardAnalyzer:
> 
> Code Example:
> Query objQuery = QueryParser.parse(sSearchString, "contents", analyzer);
> 
> For example, the following query,  contents:Zanesville, it returns over
> 163,000 hits in 78 milliseconds.  
> 
> However, if I use this query, contents:"all parts including picture tube
> guaranteed", it returns hits in 2890 millseconds.  Other phrases take
> longer as well.  
> 
> My question is, are there any indexing tips (storing term vectors?) or
> query tips that I can use to speed up the searching of phrases?

Term vectors should not influence search times for phrases.

What you're seeing is this: for each term in your query Lucene
has to walk all the documents containing the term. For a single
term there is no speed problem because the document set for the term
is stored in a compact way on disk.
For multiple terms with large document sets the disk head needs to
move between the document sets of the terms because all sets
need to be walked synchronously over the documents to compute
the document scores.
For phrases even more disk accesses are needed to access the
term positions within the documents.
Normally the disk head seeks are degrading the performance.

One way to avoid the disk head seeks is to use fewer terms in the phrases.
Another way is to avoid using the term positions by querying for words
instead of phrases.

In case you have hardware/resources there are more options
like using faster disks and/or using RAM for critical parts of the index.
Lucene can use extra RAM in various ways. To configure that one may have
to do some java coding. Profiling can guide you there.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10972-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 02 08:22:17 2004
Return-Path: <lucene-user-return-10972-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72022 invoked from network); 2 Nov 2004 08:22:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Nov 2004 08:22:17 -0000
Received: (qmail 25509 invoked by uid 500); 2 Nov 2004 08:22:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25451 invoked by uid 500); 2 Nov 2004 08:22:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25433 invoked by uid 99); 2 Nov 2004 08:22:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 02 Nov 2004 00:22:05 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 0A2FF23B94
	for <lucene-user@jakarta.apache.org>; Tue,  2 Nov 2004 09:21:31 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 07369-07 for <lucene-user@jakarta.apache.org>;
 Tue,  2 Nov 2004 09:21:30 +0100 (CET)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id D14D523B8F
	for <lucene-user@jakarta.apache.org>; Tue,  2 Nov 2004 09:21:30 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id iA28LFmA020599
	for <lucene-user@jakarta.apache.org>; Tue, 2 Nov 2004 09:21:15 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id iA28LF0S020595;
	Tue, 2 Nov 2004 09:21:15 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16775.17275.308337.306020@tanto-xipolis.de>
Date: Tue, 2 Nov 2004 09:21:15 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: jaspq: dashed numerical values tokenized differently  
In-Reply-To: <39230AE0C9B96945A501EB8598971D6F04A570@MUCXGC1.opentext.net>
References: <39230AE0C9B96945A501EB8598971D6F04A570@MUCXGC1.opentext.net>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Daniel Taurat writes:
> Hi,
> I have just another stupid parser question:
> There seems to be a special handling of the dash sign "-" different from
> Lucene 1.2 at least in Lucene 1.4.RC3
> StandardAnalyzer.
> 
> Examples (1.4RC3):
> 
> A document containing the string "dash-test" is matched by the following
> search expressions:
> dash
> test
> dash*
> dash-test
> It is _not_ matched by the following search expressions:
> dash-*
> dash-t*
> 
> If the string after the dash consists of digits, the behavior is
> different.
> E.g., a document containing the string "dash-123" is matched by:
> dash*
> dash-*
> dash-123
> It is not matched by:
> dash
> 123
> 
> Question:
> Is this, esp. the different behavior when parsing digits and characters,
> intentional and how can it be explained?
> Regards,
> 
Query parser was changed to treat '-' within words as part of the word.
Before that change a query 'dash-test' was parsed as 'dash AND NOT test'.
Now QP reads one word 'dash-test' which is analyzed. If the analyzer
splits that to more than one token (standard analyzer does) a phrase
query is created.
The difference you see comes from standard analyzer which tokenizes
dash-test dash-123 to tokens dash, test and dash-123.
Prefix queries aren't analyzed.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10973-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 02 09:58:31 2004
Return-Path: <lucene-user-return-10973-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23764 invoked from network); 2 Nov 2004 09:58:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Nov 2004 09:58:31 -0000
Received: (qmail 61824 invoked by uid 500); 2 Nov 2004 09:58:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61661 invoked by uid 500); 2 Nov 2004 09:58:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61616 invoked by uid 99); 2 Nov 2004 09:58:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 02 Nov 2004 01:58:11 -0800
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.13) id AC0945BB00DA; Tue, 02 Nov 2004 05:06:01 -0500
Message-ID: <41875A2E.9080700@bayt.net>
Date: Tue, 02 Nov 2004 13:58:06 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: commit lock, graceful handler
References: <b0441625041101191019b55869@mail.gmail.com>
In-Reply-To: <b0441625041101191019b55869@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Graceful, no, I started a discussion on this about two years ago, what 
I'm doing is a batched indexing so if a crash occurs the next time the 
application starts up I have an  LuceneInit class that goes and ensures 
that all indecies have no locks on them by simply deleting the lock file 
and optimizing the index, this has worked for us well for the past two 
years in a production environment and the next indexing run will pick up 
the same batch and re-index it, which doesn't hurt the index because 
every time I add a document to the index, I actually delete it first to 
ensure that there are no repetitions, we've never had an index go 
corrupt on us but we do have six indecies being updated in parallel in 
addition to nightly backups by our hosting facility during a one hour 
window where we do no updates/deletes on the index to ensure that the 
backup is kosher.

It may not be graceful as Oracle Rollback Tables but it's functional and 
a lot less complicated.

Nader

Jackson Earnst wrote:

>I'm testing fault tollerance aspects of an application using Lucene. 
>Consider if power is pulled form the server/workstation and it
>immediately shuts down hard or crashes.
>
>I'm faced with a situation of a commit.lock file exising in the temp
>directory.  Lucene is throwing an exception when a writer is first
>created against this index.  An IOexception comes about and "Lock
>obtained timed out" error occurs.
>
>REading some docs anf FAQs I see that this could be deleted and the
>index will be in a usable state.
>
>Any advice/comments/thoughts?
>
>Is there a graceful way to handle this?  
>
>Thanks
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10974-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 02 15:19:12 2004
Return-Path: <lucene-user-return-10974-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3266 invoked from network); 2 Nov 2004 15:19:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Nov 2004 15:19:12 -0000
Received: (qmail 3030 invoked by uid 500); 2 Nov 2004 15:19:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2930 invoked by uid 500); 2 Nov 2004 15:19:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2900 invoked by uid 99); 2 Nov 2004 15:18:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [217.72.192.225] (HELO smtp07.web.de) (217.72.192.225)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 02 Nov 2004 07:18:58 -0800
Received: from [80.185.6.98] (helo=[127.0.0.1])
	by smtp07.web.de with asmtp (TLSv1:RC4-MD5:128)
	(WEB.DE 4.101 #44)
	id 1CP0Qx-00071V-00
	for lucene-user@jakarta.apache.org; Tue, 02 Nov 2004 16:18:56 +0100
Message-ID: <4187A55E.5050102@web.de>
Date: Tue, 02 Nov 2004 16:18:54 +0100
From: Marcel Hofmann <Marcel.Hofmann@web.de>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  lucene-user@jakarta.apache.org
Subject: Content-based similarity search in vector-space for Lucene
Content-Type: multipart/mixed;
 boundary="------------010704070702040005010008"
Sender: Marcel.Hofmann@web.de
X-Sender: Marcel.Hofmann@web.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------010704070702040005010008
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Hello!

For my diploma (available in german), i have written a similarity
search, that for an given document (query) returns documents, which
content is gradual similar to the query-document. With this
functionality, e.g. different versions from an document, plagiats of a
publication or related articels in the archiv of an scientific magazin
can be found.

The documents where indexed with lucene 1.4 and represented as
termvectors inside the lucene-index. For searching, an real
vectorspace-retrievalmodell (not an advanced boolean model) based on the
SMART-Retrievalsystem from Gerard Salton was implemented, including
tf-idf weighting and cosine-similarity-function. The whole search-space
is explored, no heuristical methods are used at time, but can be retrofited.

I have deployed an shortened version of the diploma-prototype, which
includes a GUI, one sample document-collection (CIA Factbook) but not
the sources of the project:

http://www.informatik.htw-dresden.de/~s4328/pub/diploma_Marcel_Hofmann.zip

The prototype can be started with the prototype/deploy/diploma.bat
(sorry to all non Windows users). The included readme.txt lists the
original content of the prototype, not the shortened version.

I would like to deploy an library to the lucene-project, which contains 
the core of the implementation (vector-space, cosine-similarity,...).
All you have to do is answer this mail, ask for this library and givee 
my some hints...

Greetings from Saxony, Germany
Marcel Hofmann
Marcel.Hofmann@web.de




--------------010704070702040005010008
Content-Type: text/plain;
 name="file:///C|/DOKUME%7E1/MARCEL/LOKALE%7E1/TEMP/nsmail-1.txt"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="file:///C|/DOKUME%7E1/MARCEL/LOKALE%7E1/TEMP/nsmail-1.txt"

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-dev-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-dev-help@jakarta.apache.org


--------------010704070702040005010008
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--------------010704070702040005010008--

From lucene-user-return-10975-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 02 16:50:57 2004
Return-Path: <lucene-user-return-10975-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48757 invoked from network); 2 Nov 2004 16:50:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Nov 2004 16:50:57 -0000
Received: (qmail 75806 invoked by uid 500); 2 Nov 2004 16:50:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 75713 invoked by uid 500); 2 Nov 2004 16:50:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 75681 invoked by uid 99); 2 Nov 2004 16:50:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.230.66.155] (HELO exchange.newspaperarchive.com) (206.230.66.155)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 02 Nov 2004 08:50:27 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Search speed
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Tue, 2 Nov 2004 10:50:21 -0600
Message-ID: <A8E4FBE7AC96D4468E223B0050CBE1F10A2CE9@exchange.newspaperarchive.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search speed
Thread-Index: AcTAsqgNnzvBEcV5R/KUOezfPg2LpQASOqcA
From: "Jeff Munson" <jmunson@newspaperarchive.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks for the info Paul.  The requirements of my search engine are that
I need to search for phrases like "death notice" or "world war ii".  You
suggested that I break the phrases into words.  Is there a way to break
the phrases into words, do the search, and just return the documents
with the phrase?  I'm just looking for a way to speed up the phrase
searches.

-----Original Message-----
From: Paul Elschot [mailto:paul.elschot@xs4all.nl]=20
Sent: Tuesday, November 02, 2004 2:05 AM
To: lucene-user@jakarta.apache.org
Subject: Re: Search speed

On Monday 01 November 2004 21:02, Jeff Munson wrote:
> I'm looking for tips on speeding up searches since I am a relatively
new
> user of Lucene. =20
>=20
> I've created a single index with 4.5 million documents.  The index has
> about 22 fields and one of those fields is the contents of the body
tag
> which can range from 5K to 35K.  When I create the field (named
> "contents") that houses the contents of the body tag, the field is
> stored, indexed, and tokenized.  The term position vectors are not
> stored. =20
>=20
> Single word searches return pretty fast, but when I try phrases,
> searching seems to slow considerably.  When constructing the query I
am
> using the standard query object where analyzer is the
StandardAnalyzer:
>=20
> Code Example:
> Query objQuery =3D QueryParser.parse(sSearchString, "contents",
analyzer);
>=20
> For example, the following query,  contents:Zanesville, it returns
over
> 163,000 hits in 78 milliseconds. =20
>=20
> However, if I use this query, contents:"all parts including picture
tube
> guaranteed", it returns hits in 2890 millseconds.  Other phrases take
> longer as well. =20
>=20
> My question is, are there any indexing tips (storing term vectors?) or
> query tips that I can use to speed up the searching of phrases?

Term vectors should not influence search times for phrases.

What you're seeing is this: for each term in your query Lucene
has to walk all the documents containing the term. For a single
term there is no speed problem because the document set for the term
is stored in a compact way on disk.
For multiple terms with large document sets the disk head needs to
move between the document sets of the terms because all sets
need to be walked synchronously over the documents to compute
the document scores.
For phrases even more disk accesses are needed to access the
term positions within the documents.
Normally the disk head seeks are degrading the performance.

One way to avoid the disk head seeks is to use fewer terms in the
phrases.
Another way is to avoid using the term positions by querying for words
instead of phrases.

In case you have hardware/resources there are more options
like using faster disks and/or using RAM for critical parts of the
index.
Lucene can use extra RAM in various ways. To configure that one may have
to do some java coding. Profiling can guide you there.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10976-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 02 17:07:47 2004
Return-Path: <lucene-user-return-10976-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58680 invoked from network); 2 Nov 2004 17:07:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Nov 2004 17:07:47 -0000
Received: (qmail 10519 invoked by uid 500); 2 Nov 2004 17:07:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10479 invoked by uid 500); 2 Nov 2004 17:07:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10445 invoked by uid 99); 2 Nov 2004 17:07:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 02 Nov 2004 09:07:30 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.12.11/8.12.11) with ESMTP id iA2H7QeG089283
	for <lucene-user@jakarta.apache.org>; Tue, 2 Nov 2004 18:07:26 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Search speed
Date: Tue, 2 Nov 2004 18:07:26 +0100
User-Agent: KMail/1.5.4
References: <A8E4FBE7AC96D4468E223B0050CBE1F10A2CE9@exchange.newspaperarchive.com>
In-Reply-To: <A8E4FBE7AC96D4468E223B0050CBE1F10A2CE9@exchange.newspaperarchive.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411021807.26282.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tuesday 02 November 2004 17:50, Jeff Munson wrote:
> Thanks for the info Paul.  The requirements of my search engine are that
> I need to search for phrases like "death notice" or "world war ii".  You
> suggested that I break the phrases into words.  Is there a way to break
> the phrases into words, do the search, and just return the documents
> with the phrase?  I'm just looking for a way to speed up the phrase
> searches.

If you know the phrases in advance, ie. before indexing, you can index
and search them as terms with a special purpose analyzer.
It's an unusual solution, though.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10977-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 02 18:32:32 2004
Return-Path: <lucene-user-return-10977-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1279 invoked from network); 2 Nov 2004 18:32:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Nov 2004 18:32:32 -0000
Received: (qmail 48998 invoked by uid 500); 2 Nov 2004 18:32:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48875 invoked by uid 500); 2 Nov 2004 18:32:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48857 invoked by uid 99); 2 Nov 2004 18:32:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.204 as permitted sender)
Received: from [64.233.170.204] (HELO rproxy.gmail.com) (64.233.170.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 02 Nov 2004 10:32:05 -0800
Received: by rproxy.gmail.com with SMTP id 80so129901rnl
        for <lucene-user@jakarta.apache.org>; Tue, 02 Nov 2004 10:32:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=YsEgAxYsZ5qKU39+zpN6Cq3OpkQHkxausfQQKHnlwG/l6u5PvYo66bULhQ3hHiLTLgGQ8f+QS2lpSmI4qs1MV2RyqmwjojnDhb3Eeg7iD9UZ79hPGR0HZMttvW7HBvoUjbQg2+x/YoFYnYm82c4cLN44Sq9WngkArvdi34Y/E9Y=
Received: by 10.38.206.40 with SMTP id d40mr643285rng;
        Tue, 02 Nov 2004 10:32:00 -0800 (PST)
Received: by 10.38.179.13 with HTTP; Tue, 2 Nov 2004 10:32:00 -0800 (PST)
Message-ID: <dd2db8d00411021032486827c8@mail.gmail.com>
Date: Tue, 2 Nov 2004 11:32:00 -0700
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Search speed
In-Reply-To: <200411021807.26282.paul.elschot@xs4all.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <A8E4FBE7AC96D4468E223B0050CBE1F10A2CE9@exchange.newspaperarchive.com>
	 <200411021807.26282.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If you know all the phrases your are going to search for, you could
modify an analyzer to make those phrases into whole terms when you are
analyzing.

Other than that, you can test the speed of breaking the phrase query
up into term queries.  You would have to do an AND on all the words in
the phrase.  You would then need to
get the documents that match all the terms, then do a substring search
for your exact phrase.  Any documents that match you would then
return.

search: death && notice
for each hit
  if contents contains "death notice"
    add hit to final result list
loop

On Tue, 2 Nov 2004 18:07:26 +0100, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> On Tuesday 02 November 2004 17:50, Jeff Munson wrote:
> > Thanks for the info Paul.  The requirements of my search engine are that
> > I need to search for phrases like "death notice" or "world war ii".  You
> > suggested that I break the phrases into words.  Is there a way to break
> > the phrases into words, do the search, and just return the documents
> > with the phrase?  I'm just looking for a way to speed up the phrase
> > searches.
> 
> If you know the phrases in advance, ie. before indexing, you can index
> and search them as terms with a special purpose analyzer.
> It's an unusual solution, though.
> 
> 
> 
> Regards,
> Paul Elschot
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10978-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 02 18:34:54 2004
Return-Path: <lucene-user-return-10978-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2276 invoked from network); 2 Nov 2004 18:34:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 2 Nov 2004 18:34:54 -0000
Received: (qmail 52540 invoked by uid 500); 2 Nov 2004 18:34:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52513 invoked by uid 500); 2 Nov 2004 18:34:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52500 invoked by uid 99); 2 Nov 2004 18:34:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 02 Nov 2004 10:34:45 -0800
Received: (qmail 31505 invoked by uid 89); 2 Nov 2004 18:34:41 -0000
Received: from unknown (HELO ?192.168.168.81?) (postmaster@cottrell-cutting.net@24.5.163.156)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 2 Nov 2004 18:34:41 -0000
Message-ID: <4187D262.1050303@apache.org>
Date: Tue, 02 Nov 2004 10:30:58 -0800
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7.2) Gecko/20040806
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Search speed
References: <A8E4FBE7AC96D4468E223B0050CBE1F10A2CE5@exchange.newspaperarchive.com>
In-Reply-To: <A8E4FBE7AC96D4468E223B0050CBE1F10A2CE5@exchange.newspaperarchive.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Jeff Munson wrote:
> Single word searches return pretty fast, but when I try phrases,
> searching seems to slow considerably. [ ... ]
> 
> However, if I use this query, contents:"all parts including picture tube
> guaranteed", it returns hits in 2890 millseconds.  Other phrases take
> longer as well.  

You could use an analyzer that inserts bigrams for common terms.  Nutch 
does this.  So, if you declare that "all" and "including" are common 
terms, then this could be tokenized as the following tokens:

0 - all all.parts
1 - parts parts.including
2 - including including.picture
3 - picture
4 - tube
5 - guaranteed

Two tokens at a position indicate where the second has position 
increment of zero.

Then your phrase search could be converted to:

   "all.parts parts.including including.picture picture tube guaranteed"

which should be much faster, since it has replaced common terms with 
rare terms.

This approach does make the index larger, and hence makes indexing 
somewhat slower.  So you don't want to declare too many words as common, 
but a handful can make a big difference if they're used frequently in 
queries.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10979-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 00:54:59 2004
Return-Path: <lucene-user-return-10979-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90649 invoked from network); 3 Nov 2004 00:54:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 00:54:58 -0000
Received: (qmail 14791 invoked by uid 500); 3 Nov 2004 00:54:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14649 invoked by uid 500); 3 Nov 2004 00:54:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14636 invoked by uid 99); 3 Nov 2004 00:54:48 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 02 Nov 2004 16:54:48 -0800
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <174379(1)>; Tue, 2 Nov 2004 16:54:39 PST
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58617>; Tue, 2 Nov 2004 16:54:33 PST
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: How do Lucene applications deal with API changes?
In-Reply-To: Your message of "Fri, 29 Oct 2004 11:46:02 PDT."
             <04Oct29.114606pdt."58617"@synergy1.parc.xerox.com> 
Date: Tue, 2 Nov 2004 16:54:31 PST
From: Bill Janssen <janssen@parc.com>
Message-Id: <04Nov2.165433pst."58617"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks to Bill Tschumy, who points out that Lucene 1.4.21 *breaks* the
API exported by 1.4 by removing a parameter from
QueryParser.getFieldQuery().  That means that my
NewMultiFieldQueryParser also breaks, since it overrides that method.
To fix, just remove the Analyzer parameter from the getFieldQuery()
method in NewMultiFieldQueryParser.

More generally, how is an application developer that wants to use
Lucene supposed to deal with these kinds of things?  It's a micro
release, the change isn't noted in the CHANGES.txt file, and as far as
I can see, there are no version numbers in the jar file you could look
at during an application "configure".

Does anyone have any successful ways of dealing with these kinds of
things?  The only thing I can think of is to put a specific Lucene jar
in my app source code.

Bill

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10980-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 01:52:40 2004
Return-Path: <lucene-user-return-10980-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6661 invoked from network); 3 Nov 2004 01:52:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 01:52:40 -0000
Received: (qmail 76881 invoked by uid 500); 3 Nov 2004 01:52:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76675 invoked by uid 500); 3 Nov 2004 01:52:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76660 invoked by uid 99); 3 Nov 2004 01:52:24 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 02 Nov 2004 17:52:23 -0800
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <174394(1)>; Tue, 2 Nov 2004 17:52:09 PST
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58617>; Tue, 2 Nov 2004 17:52:08 PST
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: How do Lucene applications deal with API changes? 
In-Reply-To: Your message of "Tue, 02 Nov 2004 16:54:31 PST."
             <04Nov2.165433pst."58617"@synergy1.parc.xerox.com> 
Date: Tue, 2 Nov 2004 17:51:59 PST
From: Bill Janssen <janssen@parc.com>
Message-Id: <04Nov2.175208pst."58617"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I know, I know, it's bad form to answer your own question.  But here's
a test program to distinguish between Lucene 1.4.1 and 1.4.2.

Bill

import java.io.*;

import java.lang.Class;
import java.lang.reflect.Method;

class testLucene {

    private static boolean compareArgs (Class[] args1, Class[] args2) throws Exception {
        if (args1.length != args2.length)
            return false;
        for (int i = 0;  i < args1.length;  i++) {
            if (args1[i] != args2[i])
                return false;
        }
        return true;
    }

    public static void main(String[] args) {

        try {
            Class queryparser = Class.forName("org.apache.lucene.queryParser.QueryParser");
            Method[] methods = queryparser.getDeclaredMethods();
            // check to see if the getFieldQuery() method in QueryParser has 
            // two args (1.4.2), or three (1.4.1)

            Class[] args1_4_1 = new Class[] { Class.forName("java.lang.String"),
                                              Class.forName("org.apache.lucene.analysis.Analyzer"),
                                              Class.forName("java.lang.String") };

            Class[] args1_4_2 = new Class[] { Class.forName("java.lang.String"),
                                              Class.forName("java.lang.String") };

            for (int i = 0;  i < methods.length;  i++) {
                if (methods[i].getName().equals("getFieldQuery")) {
                    Class[] parmTypes = methods[i].getParameterTypes();
                    if (compareArgs(args1_4_1, parmTypes)) {
                        System.out.println("1.4.1");
                        Runtime.getRuntime().exit(0);
                    }
                    if (compareArgs(args1_4_2, parmTypes)) {
                        System.out.println("1.4.2");
                        Runtime.getRuntime().exit(0);
                    }
                }
            }

            System.out.println("unknown");
            Runtime.getRuntime().exit(0);
        } catch (Exception x) {
            System.out.println("unknown");
            Runtime.getRuntime().exit(1);
        }
    };
}


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10981-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 04:17:37 2004
Return-Path: <lucene-user-return-10981-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61244 invoked from network); 3 Nov 2004 04:17:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 04:17:37 -0000
Received: (qmail 16255 invoked by uid 500); 3 Nov 2004 04:17:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16167 invoked by uid 500); 3 Nov 2004 04:17:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16154 invoked by uid 99); 3 Nov 2004 04:17:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 02 Nov 2004 20:16:59 -0800
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I6L5FC00.E04 for <lucene-user@jakarta.apache.org>; Wed,
          3 Nov 2004 09:51:12 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: FW: Searchable Solutions Please
Date: Wed, 3 Nov 2004 09:45:19 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIGELOCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

Guy's

Apologies.........


        I am little Confused with the Search Factor.


        If the Search Word  'kid'  is suppose to return me   kid ,  kid's ,
kidoos, children

       1) Do I need to use Combination of more then one Analysers ??? , If
so How.
       2) Any Alternate modification to be done for the simple Searcher
methods. ??




Thx in advance.



-----Original Message-----
From: gwithers@connected.com [mailto:gwithers@connected.com]
Sent: Thursday, October 28, 2004 8:55 PM
To: lucene-user@jakarta.apache.org
Subject: RE: Searchable Solutions Please


A quick pointer..

What you want to look at is using a stemming implementation.  Look, for
example, at the FAQ and docs related to the PorterStemFilter and writing
A customer analyzer
(http://lucene.sourceforge.net/cgi-bin/faq/faqmanager.cgi?file=chapter.index
ing&toc=faq#q17).

There is a lot of information regarding this but you'll need the same
analyzer for index and query and this would be more or less English only.

-George

> -----Original Message-----
> From: Karthik N S [mailto:karthik@controlnet.co.in]
> Sent: Thursday, October 28, 2004 1:47 AM
> To: LUCENE
> Subject: Searchable Solutions Please
>
>
> Hi Guys
>
>
> Aplologies....................
>
>
> On a Using the  Lucene Search , If returned hits for the following is to
be
> aquired
>
> Search Word =' kids watches '
> Hits on docs  returned should have =    kid's , kid watch , junior watches
>
>
> Solution's Please
>
>
> Thx in advance
>
>
>
>
>
>
>       WITH WARM REGARDS
>       HAVE A NICE DAY
>       [ N.S.KARTHIK]
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10982-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 08:25:21 2004
Return-Path: <lucene-user-return-10982-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57665 invoked from network); 3 Nov 2004 08:25:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 08:25:20 -0000
Received: (qmail 45509 invoked by uid 500); 3 Nov 2004 08:25:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45464 invoked by uid 500); 3 Nov 2004 08:25:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45449 invoked by uid 99); 3 Nov 2004 08:25:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 00:25:08 -0800
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Wed, 3 Nov 2004 09:25:05 +0100
Message-ID: <418895E1.6050201@ifit.uni-klu.ac.at>
Date: Wed, 03 Nov 2004 09:25:05 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: How do Lucene applications deal with API changes?
References: <04Nov2.165433pst."58617"@synergy1.parc.xerox.com>
In-Reply-To: <04Nov2.165433pst."58617"@synergy1.parc.xerox.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 03 Nov 2004 08:25:05.0938 (UTC) FILETIME=[9F826720:01C4C17E]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Bill Janssen wrote:

>Thanks to Bill Tschumy, who points out that Lucene 1.4.21 *breaks* the
>API exported by 1.4 by removing a parameter from
>QueryParser.getFieldQuery().  That means that my
>NewMultiFieldQueryParser also breaks, since it overrides that method.
>To fix, just remove the Analyzer parameter from the getFieldQuery()
>method in NewMultiFieldQueryParser.
>
>More generally, how is an application developer that wants to use
>Lucene supposed to deal with these kinds of things?  It's a micro
>release, the change isn't noted in the CHANGES.txt file, and as far as
>I can see, there are no version numbers in the jar file you could look
>at during an application "configure".
>
>Does anyone have any successful ways of dealing with these kinds of
>things?  The only thing I can think of is to put a specific Lucene jar
>in my app source code.
>  
>
what about writing a JUnit test?
It can show when the code is broken. It's not too much improvement but 
it can be an improvement.
I have a testcase ... for my parser .. maybe I can adapt it share the code.

Sergiu

>Bill
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10983-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 09:55:32 2004
Return-Path: <lucene-user-return-10983-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6460 invoked from network); 3 Nov 2004 09:55:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 09:55:31 -0000
Received: (qmail 61695 invoked by uid 500); 3 Nov 2004 09:55:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61665 invoked by uid 500); 3 Nov 2004 09:55:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61634 invoked by uid 99); 3 Nov 2004 09:55:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 01:55:15 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id ECBD413E200B; Wed,  3 Nov 2004 04:55:11 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 47CC313E200A
	for <lucene-user@jakarta.apache.org>; Wed,  3 Nov 2004 04:55:04 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIGELOCCAA.karthik@controlnet.co.in>
References: <LOEGLEEGOAKBOLAJCCKIGELOCCAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <782EC6D8-2D7E-11D9-A5EA-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Searchable Solutions Please
Date: Wed, 3 Nov 2004 04:55:18 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Nov 2, 2004, at 11:15 PM, Karthik N S wrote:
>         If the Search Word  'kid'  is suppose to return me   kid ,  
> kid's ,
> kidoos, children
>
>        1) Do I need to use Combination of more then one Analysers ??? 
> , If
> so How.
>        2) Any Alternate modification to be done for the simple Searcher
> methods. ??

<marketing>We cover this very scenario in Lucene in Action</marketing> 
:)

You may need a combination of Analyzers, depending on what type of 
analysis makes sense for each field.

However, let's not concern ourselves with multiple analyzers for the 
sake of this issue.  Suppose you have the following documents (all in a 
single "contents" field):

Doc 1: "My kid beat me in chess" [yes, it's true]
Doc 2: "The kid's brilliant"
Doc 3: "Hey kidoos, it's time to get ready for bed"
Doc 4: "Children are our most precious resource"

There are two approaches - expansion of synonyms at indexing time, or 
query expansion.

Expansion at indexing time will increase the size of the index, of 
course, but with the benefit of simpler and faster queries.  An 
analyzer would inject the synonyms into the same virtual position as 
the original word (using position offset of 0 for the injected words).  
Here's what the heart of the Lucene in Action SynonymAnalyzer looks 
like:

   public TokenStream tokenStream(String fieldName, Reader reader) {
     TokenStream result = new SynonymFilter(
                           new StopFilter(
                             new LowerCaseFilter(
                               new StandardFilter(
                                 new StandardTokenizer(reader))),
                             StandardAnalyzer.STOP_WORDS),
                           engine
                          );
     return result;
   }

This is the StandardAnalyzer wrapped with a custom SynonymFilter.  The 
SynonymFilter is driven by a SynonymEngine:

     public interface SynonymEngine {
       String[] getSynonyms(String s) throws IOException;
     }

The implementations of the SynonymEngine are up to your imagination.  I 
created a mock one for unit testing, and a real one using the WordNet 
database.

In my examples, I show the SynonymAnalyzer used during indexing, but 
during searching I use the StandardAnalyzer.  Since the synonyms have 
already been injected during indexing, it is unnecessary to be 
concerned with them during querying.  (it gets tricky using analyzers 
that stack tokens into the same position when using QueryParser and 
PhraseQuery)

Taking Doc 1 as an example, with a hypothetical SynonymEngine, the 
tokens emitted from a SynonymAnalyzer could be:

1: my
2: kid kids children kidoos
3: beat
4: me
5: in
6: chess

In the 2nd position, all the synonyms appear for "kid".  Now phrase 
queries such as "my kidoos" work just fine.

Hopefully this gives you some ideas on where to go from here.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10984-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 10:04:02 2004
Return-Path: <lucene-user-return-10984-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10602 invoked from network); 3 Nov 2004 10:04:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 10:04:02 -0000
Received: (qmail 76524 invoked by uid 500); 3 Nov 2004 10:03:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76502 invoked by uid 500); 3 Nov 2004 10:03:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76487 invoked by uid 99); 3 Nov 2004 10:03:52 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [149.235.31.97] (HELO mucmx02.ixos.de) (149.235.31.97)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 02:03:50 -0800
Received: from MUCXGC1.opentext.net (localhost [127.0.0.1])
	by mucmx02.ixos.de (8.12.10+Sun/8.12.10) with ESMTP id iA3A3kPn016454
	for <lucene-user@jakarta.apache.org>; Wed, 3 Nov 2004 11:03:46 +0100 (MET)
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: jaspq: dashed numerical values tokenized differently  
Date: Wed, 3 Nov 2004 11:03:33 +0100
Message-ID: <39230AE0C9B96945A501EB8598971D6F04A68F@MUCXGC1.opentext.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: jaspq: dashed numerical values tokenized differently  
Thread-Index: AcTAuRK51tIXWLVZT8Ct9IZ7xjm4WwA0fTXQ
From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



-----Original Message-----
From: Morus Walter [mailto:morus.walter@tanto.de]=20
Sent: Dienstag, 2. November 2004 09:21
To: Lucene Users List
Subject: Re: jaspq: dashed numerical values tokenized differently=20

>Daniel Taurat writes:
>> Hi,
>> I have just another stupid parser question:
>> There seems to be a special handling of the dash sign "-" different
from
>> Lucene 1.2 at least in Lucene 1.4.RC3
>> StandardAnalyzer.
>>=20
>> Examples (1.4RC3):
>>=20
>> A document containing the string "dash-test" is matched by the
following
>> search expressions:
>> dash
>> test
>> dash*
>> dash-test
>> It is _not_ matched by the following search expressions:
>> dash-*
>> dash-t*
>>=20
>> If the string after the dash consists of digits, the behavior is
>> different.
>> E.g., a document containing the string "dash-123" is matched by:
>> dash*
>> dash-*
>> dash-123
>> It is not matched by:
>> dash
>> 123
>>=20
>> Question:
>> Is this, esp. the different behavior when parsing digits and
characters,
>> intentional and how can it be explained?
>> Regards,
>>=20
>Query parser was changed to treat '-' within words as part of the word.
>Before that change a query 'dash-test' was parsed as 'dash AND NOT
test'.
>Now QP reads one word 'dash-test' which is analyzed. If the analyzer
>splits that to more than one token (standard analyzer does) a phrase
>query is created.
>The difference you see comes from standard analyzer which tokenizes
>dash-test dash-123 to tokens dash, test and dash-123.
>Prefix queries aren't analyzed.



So you say that dash-123 is a prefix query whereas dash-test is not?
I found also (with Luke) that dash-anystring123 is not tokenized as
well.
What exactly are the criteria for Lucene to decide what a prefix is and
what not?

Daniel=20


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10985-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 12:39:11 2004
Return-Path: <lucene-user-return-10985-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 80974 invoked from network); 3 Nov 2004 12:39:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 12:39:11 -0000
Received: (qmail 54850 invoked by uid 500); 3 Nov 2004 12:38:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54802 invoked by uid 500); 3 Nov 2004 12:38:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54783 invoked by uid 99); 3 Nov 2004 12:38:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 04:38:33 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1B8F713E200A; Wed,  3 Nov 2004 07:38:28 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 1FDF813E200A
	for <lucene-user@jakarta.apache.org>; Wed,  3 Nov 2004 07:38:25 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <39230AE0C9B96945A501EB8598971D6F04A68F@MUCXGC1.opentext.net>
References: <39230AE0C9B96945A501EB8598971D6F04A68F@MUCXGC1.opentext.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <458E966D-2D95-11D9-83B7-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: jaspq: dashed numerical values tokenized differently  
Date: Wed, 3 Nov 2004 07:38:32 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Nov 3, 2004, at 5:03 AM, Daniel Taurat wrote:
>> Query parser was changed to treat '-' within words as part of the 
>> word.
>> Before that change a query 'dash-test' was parsed as 'dash AND NOT
> test'.
>> Now QP reads one word 'dash-test' which is analyzed. If the analyzer
>> splits that to more than one token (standard analyzer does) a phrase
>> query is created.
>> The difference you see comes from standard analyzer which tokenizes
>> dash-test dash-123 to tokens dash, test and dash-123.
>> Prefix queries aren't analyzed.
>
> So you say that dash-123 is a prefix query whereas dash-test is not?
> I found also (with Luke) that dash-anystring123 is not tokenized as
> well.
> What exactly are the criteria for Lucene to decide what a prefix is and
> what not?

Anything that ends with an asterisk is parsed as a PrefixQuery, as long 
as it does not have other wildcard characters.  If it has other 
wildcard characters or the asterisk is not at the end, then it is 
parsed as a WildcardQuery.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10986-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 13:52:17 2004
Return-Path: <lucene-user-return-10986-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21931 invoked from network); 3 Nov 2004 13:52:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 13:52:17 -0000
Received: (qmail 79891 invoked by uid 500); 3 Nov 2004 13:51:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 79840 invoked by uid 500); 3 Nov 2004 13:51:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 79823 invoked by uid 99); 3 Nov 2004 13:51:50 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [149.235.31.98] (HELO mucmx01.ixos.de) (149.235.31.98)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 05:51:50 -0800
Received: from MUCXGC1.opentext.net (localhost [127.0.0.1])
	by mucmx01.ixos.de (8.12.10+Sun/8.12.10) with ESMTP id iA3DpjwM023792
	for <lucene-user@jakarta.apache.org>; Wed, 3 Nov 2004 14:51:45 +0100 (MET)
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: jaspq: dashed numerical values tokenized differently  
Date: Wed, 3 Nov 2004 14:51:43 +0100
Message-ID: <39230AE0C9B96945A501EB8598971D6F04A6D4@MUCXGC1.opentext.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: jaspq: dashed numerical values tokenized differently  
Thread-Index: AcTBoh5eQ35DvHrVRb2LdFbVUBMoyAACUwwA
From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N





> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Mittwoch, 3. November 2004 13:39
> To: Lucene Users List
> Subject: Re: jaspq: dashed numerical values tokenized differently
>=20
>=20
> On Nov 3, 2004, at 5:03 AM, Daniel Taurat wrote:
> >> Query parser was changed to treat '-' within words as part of the
> >> word.
> >> Before that change a query 'dash-test' was parsed as 'dash AND NOT
> > test'.
> >> Now QP reads one word 'dash-test' which is analyzed. If the
analyzer
> >> splits that to more than one token (standard analyzer does) a
phrase
> >> query is created.
> >> The difference you see comes from standard analyzer which tokenizes
> >> dash-test dash-123 to tokens dash, test and dash-123.
> >> Prefix queries aren't analyzed.
> >
> > So you say that dash-123 is a prefix query whereas dash-test is not?
> > I found also (with Luke) that dash-anystring123 is not tokenized as
> > well.
> > What exactly are the criteria for Lucene to decide what a prefix is
and
> > what not?
>=20
> Anything that ends with an asterisk is parsed as a PrefixQuery, as
long
> as it does not have other wildcard characters.  If it has other
> wildcard characters or the asterisk is not at the end, then it is
> parsed as a WildcardQuery.
>=20
> 	Erik
>=20


Okay, got that.=20
Now my only question is, why the tokenizing works differently for
strings with numerical components, or if there is a way to make the
standardAnalyzer treat those dashed mixed-characters strings similar to
plain letter-strings.

Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10987-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 14:30:57 2004
Return-Path: <lucene-user-return-10987-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52572 invoked from network); 3 Nov 2004 14:30:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 14:30:56 -0000
Received: (qmail 58220 invoked by uid 500); 3 Nov 2004 14:30:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58143 invoked by uid 500); 3 Nov 2004 14:30:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58117 invoked by uid 99); 3 Nov 2004 14:30:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 06:30:43 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8C61613E200B; Wed,  3 Nov 2004 09:30:40 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 1180013E200A
	for <lucene-user@jakarta.apache.org>; Wed,  3 Nov 2004 09:30:29 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <39230AE0C9B96945A501EB8598971D6F04A6D4@MUCXGC1.opentext.net>
References: <39230AE0C9B96945A501EB8598971D6F04A6D4@MUCXGC1.opentext.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <E888DE6B-2DA4-11D9-9208-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: jaspq: dashed numerical values tokenized differently  
Date: Wed, 3 Nov 2004 09:30:28 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.3 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Nov 3, 2004, at 8:51 AM, Daniel Taurat wrote:
> Now my only question is, why the tokenizing works differently for
> strings with numerical components, or if there is a way to make the
> standardAnalyzer treat those dashed mixed-characters strings similar to
> plain letter-strings.

Give me an example of a string and how you'd like it to be tokenized.  
But first, give the AnalyzerUtils (from my java.net article) a try and 
get a feel for what different analyzers do.

Keep in mind that it can be tricky (see the AnalysisParalysis page on 
the wiki and my java.net article on QueryParser) to make sense out of a 
combination of QueryParser and an Analyzer - so its best to work with 
them independently to get what you want and then put things together.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10988-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 14:33:13 2004
Return-Path: <lucene-user-return-10988-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53852 invoked from network); 3 Nov 2004 14:33:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 14:33:13 -0000
Received: (qmail 61852 invoked by uid 500); 3 Nov 2004 14:33:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61833 invoked by uid 500); 3 Nov 2004 14:33:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61818 invoked by uid 99); 3 Nov 2004 14:33:05 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.80.239.198] (HELO outbound1.sopragroup.com) (81.80.239.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 06:33:04 -0800
Received: by outbound1.sopragroup.com (8.12.10/8.12.10/outbound-A02) with ESMTP id iA3EX0Kp009725
          for <lucene-user@jakarta.apache.org>; Wed, 3 Nov 2004 15:33:01 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4C1B2.0497341A"
Subject: Question about multi-searching
Date: Wed, 3 Nov 2004 15:32:59 +0100
Message-ID: <5933531F07A5144E9E53E1AA45257E4B011D0039@wexchbe03.ancy.fr.sopra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Question about multi-searching
Thread-Index: AcTBsgQPU769j9WtQfig++sohhwEHg==
From: "Cocula Remi" <rcocula@sopragroup.com>
To: "lucene-user" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 03 Nov 2004 14:34:19.0781 (UTC) FILETIME=[343A9350:01C4C1B2]
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4C1B2.0497341A
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable


Hi,

(First of all : what is the plurial of index in english ; indexes or =
indices ?)


I want to search into several indexes (indices ?).
For that, I parse a new query using QueryParser or =
MultiFieldQueryParser.
Then I search my indexes using the MultiSearcher class.

Ok, but the problem comes when different analyzer are used for each =
index.
QueryParser requires an analyzer to parse the query but a query parsed =
with an analyzer is not suitable for searching into an index that uses =
another analyzer.=20

Does anyone know a trick to cope this problem.

Eventually I could run a different query on each index to obtain several =
Hits objects.=20
Then I could write some collector that collects Hits in the order of =
highest scores.
I wonder if this could work and if it would be as efficient as the =
MultiSearcher . In this situation does it make sense to compare  the =
scores of two differents Hits.

------_=_NextPart_001_01C4C1B2.0497341A--

From lucene-user-return-10989-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 15:22:44 2004
Return-Path: <lucene-user-return-10989-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83405 invoked from network); 3 Nov 2004 15:22:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 15:22:44 -0000
Received: (qmail 48052 invoked by uid 500); 3 Nov 2004 15:21:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47947 invoked by uid 500); 3 Nov 2004 15:21:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47751 invoked by uid 99); 3 Nov 2004 15:21:09 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [149.235.31.97] (HELO mucmx02.ixos.de) (149.235.31.97)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 07:21:08 -0800
Received: from MUCXGC1.opentext.net (localhost [127.0.0.1])
	by mucmx02.ixos.de (8.12.10+Sun/8.12.10) with ESMTP id iA3FL3Pn019505
	for <lucene-user@jakarta.apache.org>; Wed, 3 Nov 2004 16:21:03 +0100 (MET)
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: jaspq: dashed numerical values tokenized differently  
Date: Wed, 3 Nov 2004 16:21:01 +0100
Message-ID: <39230AE0C9B96945A501EB8598971D6F088745@MUCXGC1.opentext.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: jaspq: dashed numerical values tokenized differently  
Thread-Index: AcTBsgCYp9wS4XsoRtWRqc+4Qew1FwAAyLPg
From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



> Give me an example of a string and how you'd like it to be tokenized.
> But first, give the AnalyzerUtils (from my java.net article) a try and
> get a feel for what different analyzers do.
>=20
> Keep in mind that it can be tricky (see the AnalysisParalysis page on
> the wiki and my java.net article on QueryParser) to make sense out of
a
> combination of QueryParser and an Analyzer - so its best to work with
> them independently to get what you want and then put things together.

I already used Luke:=20
This is what I found (making sense to me even :)))
String dash-123-01
Was tokenized with 1.2 StandardAnalyzer=20
dash
123
01

and is tokenized (1.4RC4) with any other than RussianAnalyser,
simpleAnalyzer and StopAnalyzer (which just got dash and omitted all
numbers)

dash-123-01

On the other hand

dash-my-string

is tokenized=20

dash
my
string

by all of them except whitespaceAnalyser, of course.

I guess this is what happens: numerical components turn the meaning of
the preceding dash into a minus. With that, it is part of the token with
the digits in it and no longer a separator. This is even for mixed terms
like 123a-01. So -1andAnyOtherCharacters-evenWithDashes is an
non-separable numerical expression for Lucene.

Checked with Luke on the string
dash\-123\-01=20

and got

dash
123
01

with germanAnalyzer and standardAnalyzer
and

dash

with all the other, except for whitespaceAnalyser, of course.


This makes me think that an escaped dash is never a minus, somehow.

Daniel





---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10990-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 15:49:30 2004
Return-Path: <lucene-user-return-10990-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98783 invoked from network); 3 Nov 2004 15:49:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 15:49:29 -0000
Received: (qmail 16044 invoked by uid 500); 3 Nov 2004 15:49:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15956 invoked by uid 500); 3 Nov 2004 15:49:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15930 invoked by uid 99); 3 Nov 2004 15:49:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 07:49:14 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AF8F813E200B; Wed,  3 Nov 2004 10:49:10 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 841C013E200A
	for <lucene-user@jakarta.apache.org>; Wed,  3 Nov 2004 10:49:01 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <39230AE0C9B96945A501EB8598971D6F088745@MUCXGC1.opentext.net>
References: <39230AE0C9B96945A501EB8598971D6F088745@MUCXGC1.opentext.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <E19579C2-2DAF-11D9-9208-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: jaspq: dashed numerical values tokenized differently  
Date: Wed, 3 Nov 2004 10:49:01 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.3 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 3, 2004, at 10:21 AM, Daniel Taurat wrote:
> Checked with Luke on the string
> dash\-123\-01
>
> and got
>
> dash
> 123
> 01
>
> with germanAnalyzer and standardAnalyzer
> and
>
> dash
>
> with all the other, except for whitespaceAnalyser, of course.
>
>
> This makes me think that an escaped dash is never a minus, somehow.

No builtin Analyzer considers backslash an escape character - and most 
consider it a delimiter between tokens and throws it away as you've 
seen.  Only QueryParser has the escape character feature.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10991-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 16:27:59 2004
Return-Path: <lucene-user-return-10991-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20178 invoked from network); 3 Nov 2004 16:27:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 16:27:59 -0000
Received: (qmail 93069 invoked by uid 500); 3 Nov 2004 16:27:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93046 invoked by uid 500); 3 Nov 2004 16:27:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93033 invoked by uid 99); 3 Nov 2004 16:27:50 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [149.235.31.98] (HELO mucmx01.ixos.de) (149.235.31.98)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 08:27:50 -0800
Received: from MUCXGC1.opentext.net (localhost [127.0.0.1])
	by mucmx01.ixos.de (8.12.10+Sun/8.12.10) with ESMTP id iA3GRk7G002364
	for <lucene-user@jakarta.apache.org>; Wed, 3 Nov 2004 17:27:46 +0100 (MET)
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: jaspq: dashed numerical values tokenized differently  
Date: Wed, 3 Nov 2004 17:27:43 +0100
Message-ID: <39230AE0C9B96945A501EB8598971D6F08875B@MUCXGC1.opentext.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: jaspq: dashed numerical values tokenized differently  
Thread-Index: AcTBvMmD97EDCit+T5CHdSSd/wQIfwAAUbRw
From: "Daniel Taurat" <daniel.taurat@gaussvip.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



Mit freundlichen Gr=FC=DFen
    Dr. Daniel Taurat
    Senior Consultant
--------------------------------------------------------------------
VIP ENTERPRISE 8 | THE POWER OF CONTENT AT WORK
--------------------------------------------------------------------

Gauss Interprise AG		 Phone:    +49-40-3250-1508
Weidestr. 120 a 		Mobile:    +49-173-2418472
D-22083 Hamburg  Germany	     Fax:    +49-40-3250-191508
                   =20
E-Mail: daniel.taurat@gaussvip.com
Web:    http://www.gaussvip.com


> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Mittwoch, 3. November 2004 16:49
> To: Lucene Users List
> Subject: Re: jaspq: dashed numerical values tokenized differently
>=20
> On Nov 3, 2004, at 10:21 AM, Daniel Taurat wrote:
> > Checked with Luke on the string
> > dash\-123\-01
> >
> > and got
> >
> > dash
> > 123
> > 01
> >
> > with germanAnalyzer and standardAnalyzer
> > and
> >
> > dash
> >
> > with all the other, except for whitespaceAnalyser, of course.
> >
> >
> > This makes me think that an escaped dash is never a minus, somehow.
>=20
> No builtin Analyzer considers backslash an escape character - and most
> consider it a delimiter between tokens and throws it away as you've
> seen.  Only QueryParser has the escape character feature.
>=20
> 	Erik

Okay, that I understand...

But then, where do the dashes, I mean, the minuses,(**sigh**) anyway, =
where do they go?

-123 becomes 123 for some (german and standard) and is completely =
discarded for others (russian, simple, stop) and whitespace does its own =
thing, again=20
(-123).

Ahhahh!! now I've got it:
 since
-123go=20
becomes=20
go for Russian, stop and simple=20
but
123go for german and standard
I guess the first group just completely omits numbers, effectively being =
separators (that I checked as well), while the latter only omits the =
leading minus(dash?).
Grouping is caused by inheritance.

Daniel


=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10992-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 17:14:59 2004
Return-Path: <lucene-user-return-10992-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48035 invoked from network); 3 Nov 2004 17:14:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 17:14:59 -0000
Received: (qmail 91673 invoked by uid 500); 3 Nov 2004 17:14:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91647 invoked by uid 500); 3 Nov 2004 17:14:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91634 invoked by uid 99); 3 Nov 2004 17:14:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jeankst@gmail.com designates 64.233.170.192 as permitted sender)
Received: from [64.233.170.192] (HELO rproxy.gmail.com) (64.233.170.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 09:14:47 -0800
Received: by rproxy.gmail.com with SMTP id q1so117769rnf
        for <lucene-user@jakarta.apache.org>; Wed, 03 Nov 2004 09:14:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=QpoC37AfbTAOtdzGgIoISyjhShKIZAfQONUovp39aOLLymroQl/lTkttKvG90Q50qvkGu/SCN/HW7OntPdLegne2GceF+6U1zLnigbleYp0SbripxFqmaQqS4/qp6+MSpcPcGCUS1TD8cvTdQTbBeKRsc/quLpEyokNU5FbNEAI=
Received: by 10.38.77.25 with SMTP id z25mr1156787rna;
        Wed, 03 Nov 2004 09:14:45 -0800 (PST)
Received: by 10.38.163.56 with HTTP; Wed, 3 Nov 2004 09:14:45 -0800 (PST)
Message-ID: <d4bb095504110309144087166d@mail.gmail.com>
Date: Wed, 3 Nov 2004 18:14:45 +0100
From: jean kon-sun-tack <jeankst@gmail.com>
Reply-To: jean kon-sun-tack <jeankst@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: IndexReader.close() do not flush deletions
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

1) Open index with IndexReader.open()
2) Check that (for example) numDocs = 10, hasDeletions = false
3) Delete one document
4) Close IndexReader with IndexReader.close()

5) Open index with IndexReader.open()
6) Check that (for example) numDocs = 9, hasDeletions = true
7) Iterate with IndexReader.terms() and find 10 docs
8) Say "Uh???"
...

Plz, I need a clear confirmation of that : http://java2.5341.com/msg/79675.html

Thanks.
Jean.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10993-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 18:40:26 2004
Return-Path: <lucene-user-return-10993-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4807 invoked from network); 3 Nov 2004 18:40:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 18:40:26 -0000
Received: (qmail 29284 invoked by uid 500); 3 Nov 2004 18:39:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29154 invoked by uid 500); 3 Nov 2004 18:39:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28973 invoked by uid 99); 3 Nov 2004 18:39:15 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of aurora00@gmail.com designates 64.233.170.200 as permitted sender)
Received: from [64.233.170.200] (HELO rproxy.gmail.com) (64.233.170.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 10:39:14 -0800
Received: by rproxy.gmail.com with SMTP id a41so141825rng
        for <lucene-user@jakarta.apache.org>; Wed, 03 Nov 2004 10:39:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=oE6ximQd3m5Ci/AtFPLO4A6IBS4x9WcWEd8evn3qMtG0BJqWixXMEHGpBwDPgpLvhO0qd0F9HiBCJ8AlEV4qDSgn+MPfoOPCE/adzbpDuWLo6BoeD6qoVu3XwpOlr4Q0jpJxSNm7V6hndWNw42BvGF7cuIscm1E4ogWTyfbFQwE=
Received: by 10.38.208.46 with SMTP id f46mr417585rng;
        Wed, 03 Nov 2004 10:39:09 -0800 (PST)
Received: by 10.38.125.72 with HTTP; Wed, 3 Nov 2004 10:39:09 -0800 (PST)
Message-ID: <cbd1775104110310395fa5956e@mail.gmail.com>
Date: Wed, 3 Nov 2004 10:39:09 -0800
From: aurora <aurora00@gmail.com>
Reply-To: aurora <aurora00@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: using lucene as a dictionary database?
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Besides full text indexing, I need a database that represent a large
dictionary like:

  (key1, key2) -> docid

I am considering between building a home grown solution and using
Berkeley DB. Then I think I was using Lucene anyway, wouldn't it make
sense use it as my database too? Just make key1 and key2 two keyword
fields and an UnIndexed field for docid?

I need to do something like

  get(key1, key2) -> docid
  get(key1) -> list of docid

This need to be fast

  add( list of (key1,key2,docid) )

This would be done perhaps once a day in a batch.

My experience with Lucene is its very efficient in terms of speed and
storage size. Would this be a right usage with Lucene?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10994-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 21:05:45 2004
Return-Path: <lucene-user-return-10994-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 92092 invoked from network); 3 Nov 2004 21:05:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 21:05:45 -0000
Received: (qmail 26598 invoked by uid 500); 3 Nov 2004 21:05:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26575 invoked by uid 500); 3 Nov 2004 21:05:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26561 invoked by uid 99); 3 Nov 2004 21:05:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [141.156.69.115] (HELO mail.infosciences.com) (141.156.69.115)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 13:05:34 -0800
Received: from Aviran (unknown [141.156.69.109])
	by mail.infosciences.com (Postfix) with ESMTP id BDF26118308
	for <lucene-user@jakarta.apache.org>; Wed,  3 Nov 2004 16:05:16 -0500 (EST)
From: "Aviran" <amordo@infosciences.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Faster highlighting with TermPositionVectors
Date: Wed, 3 Nov 2004 16:10:47 -0500
Message-ID: <006b01c4c1e9$99a86ff0$6a00a8c0@Aviran>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
In-Reply-To: <05D268F5BC611F48A3986D837938309AB5580C@EX-001.mail.navisite.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Did anyone tried this class ?

I tried this class but I can't make it to work I indexed a field as new
Field("description", description,true,true,true,true); but when I call 
TokenSources.getTokenStream(_indexReader,i,"description"); I get
ClassCastException

In this class the line TermPositionVector tpv=(TermPositionVector)
reader.getTermFreqVector(docId,field); is trying to cast SegmentTermVector
to TermPositionVector. 
Is there anything I'm doing wrong. Should I have indexed the field some
other way to store TermPositionVector ?

BTW: I'm using the latest lucene source from CVS.

Thanks,
Aviran

-----Original Message-----
From: Bruce Ritchie [mailto:bruce@jivesoftware.com] 
Sent: Friday, October 29, 2004 1:15 AM
To: Lucene Users List
Subject: RE: Faster highlighting with TermPositionVectors


Mark,

> Thanks to the recent changes (see CVS) in TermFreqVector
> support we can now make use of term offset information held 
> in the Lucene index rather than incurring the cost of 
> re-analyzing text to highlight it.
> 
> I have created a  class ( see
> http://www.inperspective.com/lucene/TokenSources.java ) which 
> handles creating a TokenStream from the TermPositionVector 
> stored in the database which can then be passed to the highlighter.
> This approach is significantly faster than re-parsing the 
> original text.
> If people are happy with this class I'll add it to the 
> Highlighter sandbox but it may sit better elsewhere in the 
> Lucene code base as a more general purpose utility.
> 
> BTW as part of putting this together I found that the
> TermFreq code throws a null pointer when indexing fields that 
> produce no tokens (ie empty or all stopwords). Otherwise 
> things work very well.

This is great news! While I won't have the time to test this until probably
mid November I do look forward to the speed improvements as the current
highlighting mechanisms (reparsing the text) was just not performant enough
under heavy loads.


Regards,

Bruce Ritchie
http://www.jivesoftware.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10995-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 03 22:56:33 2004
Return-Path: <lucene-user-return-10995-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47206 invoked from network); 3 Nov 2004 22:56:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 3 Nov 2004 22:56:32 -0000
Received: (qmail 23675 invoked by uid 500); 3 Nov 2004 22:56:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23643 invoked by uid 500); 3 Nov 2004 22:56:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23630 invoked by uid 99); 3 Nov 2004 22:56:25 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.62] (HELO web25202.mail.ukl.yahoo.com) (217.12.10.62)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 03 Nov 2004 14:56:22 -0800
Message-ID: <20041103225619.47211.qmail@web25202.mail.ukl.yahoo.com>
Received: from [141.99.131.134] by web25202.mail.ukl.yahoo.com via HTTP; Wed, 03 Nov 2004 23:56:19 CET
Date: Wed, 3 Nov 2004 23:56:19 +0100 (CET)
From: Miro Max <kikiriki2k@yahoo.de>
Subject: searchbean example + servlet
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

where can i find the servlet for the searchbean
classes?
th directory on cvs is now empty

ciao

miro


	

	
		
___________________________________________________________
Gesendet von Yahoo! Mail - Jetzt mit 100MB Speicher kostenlos - Hier anmelden: http://mail.yahoo.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10996-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 02:20:51 2004
Return-Path: <lucene-user-return-10996-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40823 invoked from network); 4 Nov 2004 02:20:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 02:20:51 -0000
Received: (qmail 39291 invoked by uid 500); 4 Nov 2004 02:20:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39268 invoked by uid 500); 4 Nov 2004 02:20:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39240 invoked by uid 99); 4 Nov 2004 02:20:38 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [216.235.80.39] (HELO mailadmin.live365.com) (216.235.80.39)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 18:20:37 -0800
Received: from [193.248.90.157] (account rgabillet@live365.com HELO remisvaio)
  by mailadmin.live365.com (CommuniGate Pro SMTP 4.1.5)
  with ESMTP id 10637275 for lucene-user@jakarta.apache.org; Wed, 03 Nov 2004 18:20:31 -0800
Message-ID: <000b01c4c214$b635f360$9d5af8c1@remisvaio>
From: "Nicolas Maisonneuve" <nico.maisonneuve@free.fr>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: hasFieldFilter contribution
Date: Thu, 4 Nov 2004 03:19:24 +0100
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0007_01C4C21D.1598C4B0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0007_01C4C21D.1598C4B0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0008_01C4C21D.1598C4B0"


------=_NextPart_001_0008_01C4C21D.1598C4B0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I developed a Filter that restricts search results to documents that has =
terms in specific fields

(because currently  we can't search with lucene documents with this kind =
of feature (a document with present/absent of values in specific fields)

nicolas=20

------=_NextPart_001_0008_01C4C21D.1598C4B0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<META content=3D"MSHTML 6.00.2800.1476" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT face=3DArial size=3D2>I developed&nbsp;a</FONT><FONT =
face=3DArial size=3D2>=20
Filter that restricts search results to documents that has terms in =
specific=20
fields<BR></FONT><FONT face=3DArial size=3D2></FONT></DIV>
<DIV><FONT face=3DArial size=3D2>(because currently&nbsp; we can't =
search with=20
lucene documents with this kind of feature (a document with =
present/absent of=20
values in specific fields)</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>nicolas </DIV></FONT>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV></BODY></HTML>

------=_NextPart_001_0008_01C4C21D.1598C4B0--

------=_NextPart_000_0007_01C4C21D.1598C4B0
Content-Type: text/x-java;
	name="HasFieldFilter.java"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: attachment;
	filename="HasFieldFilter.java"

package org.apache.lucene.search;


import java.io.IOException;
import org.apache.lucene.index.IndexReader;
import java.util.BitSet;
import org.apache.lucene.index.Term;
import org.apache.lucene.index.TermEnum;
import org.apache.lucene.index.TermDocs;
import java.util.*;


/**
 * A Filter that restricts search results to documents that has terms in =
specific fields
 * (OR operator: the documents that has terms in field1 or in field2)
 * @author Nicolas Maisonneuve
 */
public class HasFieldFilter
extends Filter {

    private Set fieldnames;


    /**
     * a array of the  field's names
     * @param fieldname String[] a array of field's names
     */
    public HasFieldFilter (String[] fieldnames) {
        this.fieldnames=3Dnew HashSet();
        for (int i=3D0; i<fieldnames.length; i++) {
            this.fieldnames.add(fieldnames[i].intern());
        }
    }


    public BitSet bits (IndexReader reader) throws IOException {

        final BitSet bits=3Dnew BitSet(reader.maxDoc());
        TermEnum enumerator=3Dreader.terms();
        TermDocs termDocs=3Dreader.termDocs();

        Iterator iter=3Dreader.getFieldNames().iterator();
        try {
            // for each field
            while (iter.hasNext()) {
                String field=3D(String) iter.next();

                //if is not in the list of specific fields
                if (!fieldnames.contains(field)) {
                    continue;
                }
                enumerator.skipTo(new Term(field, ""));

                if (enumerator.term()=3D=3Dnull) {
                    continue;
                }
                // restrict doc to the field
                while (enumerator.term().field()=3D=3Dfield) {
                    termDocs.seek(enumerator.term());
                    while (termDocs.next()) {
                        bits.set(termDocs.doc());
                    }
                    if (!enumerator.next()) {
                        break;
                    }
                }
            }
        }
        finally {
            enumerator.close();
            termDocs.close();
        }

        return bits;
    }
}


------=_NextPart_000_0007_01C4C21D.1598C4B0
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
------=_NextPart_000_0007_01C4C21D.1598C4B0--


From lucene-user-return-10997-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 02:53:15 2004
Return-Path: <lucene-user-return-10997-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52813 invoked from network); 4 Nov 2004 02:53:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 02:53:15 -0000
Received: (qmail 69080 invoked by uid 500); 4 Nov 2004 02:53:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69048 invoked by uid 500); 4 Nov 2004 02:53:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69032 invoked by uid 99); 4 Nov 2004 02:53:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.200 as permitted sender)
Received: from [64.233.170.200] (HELO rproxy.gmail.com) (64.233.170.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 18:53:01 -0800
Received: by rproxy.gmail.com with SMTP id a41so198485rng
        for <lucene-user@jakarta.apache.org>; Wed, 03 Nov 2004 18:52:59 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=mJZplGf44GPkRYF9B1vJg9PnoOkeA4ILcHs7cYvLfUBolrCSbYnUvk+hLJzD9R98r33ldlTBXoIJMWletbO0SIRMwCB29uUwr3NKUag+MiUgxVjV4STVAt5uUy4y8UE6DOXjkVpj/ws9bInACkB0w0z8d3tVsYeDyB+w2g7JMnw=
Received: by 10.38.181.31 with SMTP id d31mr265832rnf;
        Wed, 03 Nov 2004 18:52:58 -0800 (PST)
Received: by 10.38.72.80 with HTTP; Wed, 3 Nov 2004 18:52:58 -0800 (PST)
Message-ID: <cbdebdf8041103185276236503@mail.gmail.com>
Date: Wed, 3 Nov 2004 18:52:58 -0800
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: sorting by score and an additional field
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I mailed on this a while back, but am still at a loss.

Has anyone had any luck using lucene's built in sort functions to sort
first by the lucene hit score and secondarily by a Field in each
document indexed as Keyword and in integer form?

I can only get it to sort by one or the other... but when it does one,
it does sort correctly, but together in {score, custom_field} only the
first sort seems to apply.

Any ideas?

Thanks in advance!

-Chris Fraschetti

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10998-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 03:00:58 2004
Return-Path: <lucene-user-return-10998-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56092 invoked from network); 4 Nov 2004 03:00:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 03:00:58 -0000
Received: (qmail 78009 invoked by uid 500); 4 Nov 2004 03:00:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77982 invoked by uid 500); 4 Nov 2004 03:00:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77968 invoked by uid 99); 4 Nov 2004 03:00:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 03 Nov 2004 19:00:37 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 32FC813E200A; Wed,  3 Nov 2004 22:00:34 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id A20BC13E2005
	for <lucene-user@jakarta.apache.org>; Wed,  3 Nov 2004 22:00:20 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <20041103225619.47211.qmail@web25202.mail.ukl.yahoo.com>
References: <20041103225619.47211.qmail@web25202.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <B3FB7F84-2E0D-11D9-B8CF-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: searchbean example + servlet
Date: Wed, 3 Nov 2004 22:00:37 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

As far as I know, there was no servlet that came with SearchBean. =20
SearchBean is basically deprecated at this point - the new sorting=20
features do sorting much nicer.

SearchBean is still in the jakarta-lucene-sandbox CVS under=20
contributions/searchbean directory.

	Erik

On Nov 3, 2004, at 5:56 PM, Miro Max wrote:

> Hi all,
>
> where can i find the servlet for the searchbean
> classes?
> th=E9 directory on cvs is now empty
>
> ciao
>
> miro
>
>
> =09
>
> =09
> 	=09
> ___________________________________________________________
> Gesendet von Yahoo! Mail - Jetzt mit 100MB Speicher kostenlos - Hier=20=

> anmelden: http://mail.yahoo.de
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-10999-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 08:34:35 2004
Return-Path: <lucene-user-return-10999-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85451 invoked from network); 4 Nov 2004 08:34:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 08:34:34 -0000
Received: (qmail 3020 invoked by uid 500); 4 Nov 2004 08:34:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2989 invoked by uid 500); 4 Nov 2004 08:34:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2964 invoked by uid 99); 4 Nov 2004 08:34:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.20] (HELO mailout08.sul.t-online.com) (194.25.134.20)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 00:34:13 -0800
Received: from fwd01.aul.t-online.de 
	by mailout08.sul.t-online.com with smtp 
	id 1CPd4J-0001sJ-0A; Thu, 04 Nov 2004 09:34:07 +0100
Received: from pD9EBFBF1.dip.t-dialin.net (r1hTt8ZXYeqka9UWnPV-oCXrMYTIku2rOc6aY0MdKpic9UqeGA7EcH@[217.235.251.241]) by fmrl01.sul.t-online.com
	with esmtp id 1CPd4F-0iqtbE0; Thu, 4 Nov 2004 09:34:03 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: sorting by score and an additional field
Date: Thu, 4 Nov 2004 09:34:10 +0100
User-Agent: KMail/1.7.1
References: <cbdebdf8041103185276236503@mail.gmail.com>
In-Reply-To: <cbdebdf8041103185276236503@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411040934.10758@danielnaber.de>
X-ID: r1hTt8ZXYeqka9UWnPV-oCXrMYTIku2rOc6aY0MdKpic9UqeGA7EcH@t-dialin.net
X-TOI-MSGID: 70bdcdc9-cd7e-495f-94c3-3efdb3849f7f
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thursday 04 November 2004 03:52, Chris Fraschetti wrote:

> I can only get it to sort by one or the other... but when it does one,
> it does sort correctly, but together in {score, custom_field} only the
> first sort seems to apply.

Do you use real documents for that test? The score is a float value and 
it's hardly ever the same for two documents (unless you use very short 
test documents), so that's why the second field may not be used for 
sorting.

regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11000-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 09:10:57 2004
Return-Path: <lucene-user-return-11000-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16832 invoked from network); 4 Nov 2004 09:10:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 09:10:56 -0000
Received: (qmail 52580 invoked by uid 500); 4 Nov 2004 09:09:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52536 invoked by uid 500); 4 Nov 2004 09:09:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52521 invoked by uid 99); 4 Nov 2004 09:09:57 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.212] (HELO web26001.mail.ukl.yahoo.com) (217.12.10.212)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 04 Nov 2004 01:09:57 -0800
Received: (qmail 80725 invoked by uid 60001); 4 Nov 2004 09:09:54 -0000
Message-ID: <20041104090954.80723.qmail@web26001.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26001.mail.ukl.yahoo.com via HTTP; Thu, 04 Nov 2004 09:09:54 GMT
Date: Thu, 4 Nov 2004 09:09:54 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: RE: Faster highlighting with TermPositionVectors
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-861986643-1099559394=:79802"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-861986643-1099559394=:79802
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi Aviran,
The code you are calling assumes that you have indexed with TermVector support for offsets (and optionally positions) ie code like this:
 
doc.add(new Field("contents", content, 
               Field.Store.COMPRESS, Field.Index.TOKENIZED, 
               Field.TermVector.WITH_POSITIONS_OFFSETS));
 
If you haven't stored offsets then the getTermFreqVector method returns a TermFreqVector rather than the TermPositionVector subclass, hence the class cast exception. I should tighten up that section of code to check for this situation and throw an exception with a suitable message. 
 
By the way, the "getAnyTokenStream" method is coded a little more defensively and will silently drop back to re-analyzing (parsing) the original content if it is asked to get a TokenStream for a field that doesnt have offset data stored. This is probably the safest way to code your app and the cost of the logic which checks the field storage type is minimal.
 
Cheers 
Mark

		
---------------------------------
 ALL-NEW Yahoo! Messenger - all new features - even more fun!  
--0-861986643-1099559394=:79802--

From lucene-user-return-11001-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 09:33:46 2004
Return-Path: <lucene-user-return-11001-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46903 invoked from network); 4 Nov 2004 09:33:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 09:33:46 -0000
Received: (qmail 75035 invoked by uid 500); 4 Nov 2004 09:33:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74861 invoked by uid 500); 4 Nov 2004 09:33:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74843 invoked by uid 99); 4 Nov 2004 09:33:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 01:33:35 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D7D5D13E2005; Thu,  4 Nov 2004 04:33:07 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 3096A13E2005
	for <lucene-user@jakarta.apache.org>; Thu,  4 Nov 2004 04:33:00 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <cbdebdf8041103185276236503@mail.gmail.com>
References: <cbdebdf8041103185276236503@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <8BD3133C-2E44-11D9-8F25-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: sorting by score and an additional field
Date: Thu, 4 Nov 2004 04:33:12 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 3, 2004, at 9:52 PM, Chris Fraschetti wrote:
> Has anyone had any luck using lucene's built in sort functions to sort
> first by the lucene hit score and secondarily by a Field in each
> document indexed as Keyword and in integer form?

I get multiple sort fields to work, here's two examples:

         new Sort(new SortField[]{
           new SortField("category"),
           SortField.FIELD_SCORE,
           new SortField("pubmonth", SortField.INT, true)
         });

        new Sort(new SortField[] {SortField.FIELD_SCORE, new 
SortField("category")})

Both of these, on a tiny dataset of only 10 documents, works exactly as 
expected.

> I can only get it to sort by one or the other... but when it does one,
> it does sort correctly, but together in {score, custom_field} only the
> first sort seems to apply.
>
> Any ideas?

Are you using Lucene 1.4.2?  How did you index your integer field?  Are 
you simply using the .toString() of an Integer?  Or zero padding the 
field somehow?  You can use the .toString method, but you have to be 
sure that the sorting code does the right parsing of it - so you might 
need to specify SortField.INT as its type.  It will do automatic 
detection if the type is not specified, but that assumes that the first 
document it encounters parses properly, otherwise it will fall back to 
using a String sort.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11002-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 10:15:10 2004
Return-Path: <lucene-user-return-11002-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65059 invoked from network); 4 Nov 2004 10:15:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 10:15:10 -0000
Received: (qmail 15512 invoked by uid 500); 4 Nov 2004 10:14:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15440 invoked by uid 500); 4 Nov 2004 10:13:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15412 invoked by uid 99); 4 Nov 2004 10:13:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 02:13:59 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 65D5113E200A; Thu,  4 Nov 2004 05:13:54 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 4C16813E2005
	for <lucene-user@jakarta.apache.org>; Thu,  4 Nov 2004 05:13:32 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <200410282316.i9SNGBnF015176@outmail.freedom2surf.net>
References: <200410282316.i9SNGBnF015176@outmail.freedom2surf.net>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <37CC577A-2E4A-11D9-8F25-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Faster highlighting with TermPositionVectors
Date: Thu, 4 Nov 2004 05:13:48 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Mark,

This is great stuff!

One quick comment just at my look at the code (I haven't tried it yet). 
  Shouldn't the tpv variable be used in this method?

     public static TokenStream getAnyTokenStream(IndexReader reader,int 
docId, String field,Analyzer analyzer) throws IOException
     {
		TokenStream ts=null;

		TermFreqVector tfv=(TermFreqVector) 
reader.getTermFreqVector(docId,field);
		if(tfv!=null)
		{
		    if(tfv instanceof TermPositionVector)
		    {
		        //the most efficient choice..
 >>>		        TermPositionVector tpv=(TermPositionVector) 
reader.getTermFreqVector(docId,field);
		        ts=getTokenStream(reader,docId,field);
		    }
		}
		//No token info stored so fall back to analyzing raw content
		if(ts==null)
		{
		    ts=getTokenStream(reader,docId,field,analyzer);
		}
		return ts;
     }

Erik


On Oct 28, 2004, at 7:16 PM, markharw00d@yahoo.co.uk wrote:

> Thanks to the recent changes (see CVS) in TermFreqVector support we 
> can now make use of term offset information held
> in the Lucene index rather than incurring the cost of re-analyzing 
> text to highlight it.
>
> I have created a  class ( see 
> http://www.inperspective.com/lucene/TokenSources.java ) which handles 
> creating
> a TokenStream from the TermPositionVector stored in the database which 
> can then be passed to the highlighter.
> This approach is significantly faster than re-parsing the original 
> text.
> If people are happy with this class I'll add it to the Highlighter 
> sandbox but it may sit better elsewhere in the Lucene code base
> as a more general purpose utility.
>
> BTW as part of putting this together I found that the TermFreq code 
> throws a null pointer when indexing fields
> that produce no tokens (ie empty or all stopwords). Otherwise things 
> work very well.
>
>
> Cheers
> Mark
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11003-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 11:16:11 2004
Return-Path: <lucene-user-return-11003-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98964 invoked from network); 4 Nov 2004 11:16:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 11:16:11 -0000
Received: (qmail 95174 invoked by uid 500); 4 Nov 2004 11:16:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95046 invoked by uid 500); 4 Nov 2004 11:16:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95005 invoked by uid 99); 4 Nov 2004 11:15:59 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.213] (HELO web26002.mail.ukl.yahoo.com) (217.12.10.213)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 04 Nov 2004 03:15:59 -0800
Received: (qmail 95805 invoked by uid 60001); 4 Nov 2004 11:14:54 -0000
Message-ID: <20041104111454.95803.qmail@web26002.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26002.mail.ukl.yahoo.com via HTTP; Thu, 04 Nov 2004 11:14:54 GMT
Date: Thu, 4 Nov 2004 11:14:54 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: Faster highlighting with TermPositionVectors
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

>>Shouldn't the tpv variable be used in this method?

Well spotted. The code works fine (just needs
tidying!) It delegates to another method that gets the
TPV object again. I've changed it to avoid this extra
lookup and will post another version up on my site
tonight. 
The interface andfunctionality of the
"getAnyTokenStream" method will not change as a
result.

Cheers
Mark










	
	
		
___________________________________________________________ALL-NEW Yahoo! Messenger - all new features - even more fun! http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11004-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 11:24:30 2004
Return-Path: <lucene-user-return-11004-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4029 invoked from network); 4 Nov 2004 11:24:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 11:24:24 -0000
Received: (qmail 12393 invoked by uid 500); 4 Nov 2004 11:24:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12292 invoked by uid 500); 4 Nov 2004 11:24:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12278 invoked by uid 99); 4 Nov 2004 11:24:06 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [62.181.227.99] (HELO mail.pricerunner.com) (62.181.227.99)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 04 Nov 2004 03:24:05 -0800
Received: (qmail 23324 invoked by uid 525); 4 Nov 2004 11:24:28 -0000
Received: from william.sporrong@pricerunner.com by drno.pricerunner.com
	 by uid 522 with qmail-scanner-1.10 (. Clear:0. Processed in 0.144538 secs); 04 Nov 2004 11:24:28 -0000
Received: from unknown (HELO ARNOR) (unknown)
  by unknown with SMTP; 4 Nov 2004 11:24:27 -0000
From: "william.sporrong" <william.sporrong@pricerunner.com>
To: <lucene-user@jakarta.apache.org>
Subject: A TokenFilter to split words and numbers
Date: Thu, 4 Nov 2004 12:24:03 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_003F_01C4C269.2BB9AD80"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcTCYMlVipUibBlpTHCyw9G3+VTJhw==
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_003F_01C4C269.2BB9AD80
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I=92m trying to implement a TokenFilter that splits words that contains
numbers into a phrase with separate words and numbers. For example I =
want to
turn v70 into a phrase =93v 70=94. I=92ve implemented a filter that does =
the
actual split with a regular expression. Then I use this filter in my
analyzer which is passed to the QueryParser. The resulting Query looks =
fine
+(+words:=94v 70=94) but I does not return any Hits. If I instead pass =
in the
input string =93v 70=94 (ignored by the filter) the resulting query =
looks the
same but I get Hits. Why is this? Does it have something to do with the
QueryParser guessing what kind of query it is by examining the string =
and
thus presumes that the first string should not be parsed into a =
PhraseQuery?

=20

Anyways if there is a correct way to accomplish what I want could anyone
please give me a hint? One way I thought about is preparsining the query =
and
construct several subqueries i.e PhraseQuerys and so on and then combine
them in a BooleanQuery but I guess there is a nicer solution?

=20

I have a similar problem with another Filter I=E4m trying to implement =
that
should remove certain suffixes and replace them with a wildcard (
bilar->bil*).

=20

/William


------=_NextPart_000_003F_01C4C269.2BB9AD80--


From lucene-user-return-11005-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 12:01:07 2004
Return-Path: <lucene-user-return-11005-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22023 invoked from network); 4 Nov 2004 12:01:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 12:01:06 -0000
Received: (qmail 65774 invoked by uid 500); 4 Nov 2004 12:00:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 65725 invoked by uid 500); 4 Nov 2004 12:00:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 65712 invoked by uid 99); 4 Nov 2004 12:00:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 04:00:55 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id D8A4623BEF
	for <lucene-user@jakarta.apache.org>; Thu,  4 Nov 2004 13:01:11 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 03691-06 for <lucene-user@jakarta.apache.org>;
 Thu,  4 Nov 2004 13:01:11 +0100 (CET)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id B697023B94
	for <lucene-user@jakarta.apache.org>; Thu,  4 Nov 2004 13:01:11 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id iA4C0pmA021210
	for <lucene-user@jakarta.apache.org>; Thu, 4 Nov 2004 13:00:51 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id iA4C0oJM021203;
	Thu, 4 Nov 2004 13:00:50 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Message-ID: <16778.6642.7731.823542@tanto-xipolis.de>
Date: Thu, 4 Nov 2004 13:00:50 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: A TokenFilter to split words and numbers
In-Reply-To: <20041104112433.AE54923B8F@mail.tanto.de>
References: <20041104112433.AE54923B8F@mail.tanto.de>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

william.sporrong writes:

> Does it have something to do with the
> QueryParser guessing what kind of query it is by examining the string=
 and
> thus presumes that the first string should not be parsed into a Phras=
eQuery?
>
QueryParser creates a PhraseQuery for "words" that are tokenized to mor=
e
than one token.
You should see that in the serialized query.
> =20
>=20
> Anyways if there is a correct way to accomplish what I want could any=
one
> please give me a hint? One way I thought about is preparsining the qu=
ery and
> construct several subqueries i.e PhraseQuerys and so on and then comb=
ine
> them in a BooleanQuery but I guess there is a nicer solution?
>=20
I guess you could overwrite the getFieldQuery method of query parser
and change the way queries are generated.
> =20
>=20
> I have a similar problem with another Filter I=E4m trying to implemen=
t that
> should remove certain suffixes and replace them with a wildcard (
> bilar->bil*).
>=20
If you expect bil* to be executed as a wildcard/prefix query, this
cannot work. The query parser parses the query, not the analyzer output=
.
Again you might introduce such behaviour in getFieldQuery.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11006-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 14:54:47 2004
Return-Path: <lucene-user-return-11006-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 42370 invoked from network); 4 Nov 2004 14:54:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 14:54:47 -0000
Received: (qmail 944 invoked by uid 500); 4 Nov 2004 14:54:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 853 invoked by uid 500); 4 Nov 2004 14:54:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 838 invoked by uid 99); 4 Nov 2004 14:54:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [149.77.160.1] (HELO master.hyd.deshaw.com) (149.77.160.1)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 06:54:26 -0800
Received: from mshyd2.hyd.deshaw.com (mshyd2.hyd.deshaw.com [149.77.160.27])
 by master.hyd.deshaw.com (8.12.7/8.9.3/2.0.kim) with ESMTP id iA4EsKUL028224
 for <lucene-user@jakarta.apache.org>; Thu, 4 Nov 2004 20:24:21 +0530 (IST)
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6556.0
Subject: RE: Efficient search on lucene mailing archives
Date: Thu, 4 Nov 2004 20:24:20 +0530
Message-ID: <7837FAA857FF274AAE32F4AFA03272924D8DC8@mshyd2.hyd.deshaw.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Efficient search on lucene mailing archives
Thread-Index: AcSyLygl1irFsvrRSHOhzxbrW3qXoAQTuvQQ
From: "Sreedhar, Dantam" <dantam@deshaw.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

When I want to search for any thing I use the following URL.=20

http://marc.theaimsgroup.com/

-Sreedhar

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Friday, October 15, 2004 2:18 AM
To: Lucene Users List
Subject: Re: Efficient search on lucene mailing archives



On Oct 14, 2004, at 4:27 PM, David Spencer wrote:

> sam s wrote:
>
>> Hi Folks,
>> Is there any place where I can do a better search on lucene mailing=20
>> archives?
>> I tried JGuru and looks like their search is paid.
>> Apache maintained archives lags efficient searching.
>
> Of course one of the ironies is, shouldn't we be able to use Lucene to

> search the mailing list archives and even apache.org?

Eyebrowse uses Lucene and is set up for the Apache e-mail lists:

	http://nagoya.apache.org/eyebrowse/SummarizeList?listId=3D30

It seems clunky to navigate though and would be nice to have more=20
recent e-mails ranked higher than older mails.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11007-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 16:01:05 2004
Return-Path: <lucene-user-return-11007-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81232 invoked from network); 4 Nov 2004 16:01:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 16:01:05 -0000
Received: (qmail 48434 invoked by uid 500); 4 Nov 2004 16:00:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48305 invoked by uid 500); 4 Nov 2004 16:00:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48258 invoked by uid 99); 4 Nov 2004 16:00:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jmuguruza@gmail.com designates 216.239.56.242 as permitted sender)
Received: from [216.239.56.242] (HELO mproxy.gmail.com) (216.239.56.242)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 08:00:37 -0800
Received: by mproxy.gmail.com with SMTP id u33so198260cwc
        for <lucene-user@jakarta.apache.org>; Thu, 04 Nov 2004 08:00:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=Wl6xO67O4vDyAx1RixUd1JXK1a5eBvrzwfqX1ww57c14tqbJ5uKy/G4vnadkFMX35KyRkQnHh2U+e2gLDvdv2gSJyWpwmjlYFcqNQw+oo1yF3qBncZVShnRUKkBRxC+Wvr/xtMTn2bmRHOFjoJD2nzDpPZj8SZ4MXTRvQ2y5Gsw=
Received: by 10.11.98.76 with SMTP id v76mr108968cwb;
        Thu, 04 Nov 2004 08:00:35 -0800 (PST)
Received: by 10.11.120.69 with HTTP; Thu, 4 Nov 2004 08:00:35 -0800 (PST)
Message-ID: <f071061b04110408005cdbafbd@mail.gmail.com>
Date: Thu, 4 Nov 2004 17:00:35 +0100
From: javier muguruza <jmuguruza@gmail.com>
Reply-To: javier muguruza <jmuguruza@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: one huge index or many small ones?
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

We are going to move from a just-in-time perl based search to using
lucene in our project. I have to index emails (bodies and also
attachements). I keep in the filesystem all the bodies and attachments
for a long period of time. I have to find emails that fullfil certain
conditions, some of the conditions are take care of at a different
level, so in the end I have a SUBSET of emails I have to run through
lucene.

I was assuming that the best way would be to create an index for each
email. Having an unique index for a group of emails (say a day worth
of email) seems too coarse grained, imagine a day has 10000 emails,
and some queries will like to look in only a handful of the
emails...But the problem with having one index per emails is the
massive number of emails...imagine having 100000 indexes

Anyway, any idea about that? I just wanted to check wether someones
feels I am wrong.

Thanks

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11008-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 16:21:16 2004
Return-Path: <lucene-user-return-11008-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91977 invoked from network); 4 Nov 2004 16:21:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 16:21:16 -0000
Received: (qmail 91523 invoked by uid 500); 4 Nov 2004 16:20:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91444 invoked by uid 500); 4 Nov 2004 16:20:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91336 invoked by uid 99); 4 Nov 2004 16:20:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 08:20:33 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2883F13E200A; Thu,  4 Nov 2004 11:20:30 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id A0BF413E2005
	for <lucene-user@jakarta.apache.org>; Thu,  4 Nov 2004 11:20:20 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <f071061b04110408005cdbafbd@mail.gmail.com>
References: <f071061b04110408005cdbafbd@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <6C2BEC3F-2E7D-11D9-B01C-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: one huge index or many small ones?
Date: Thu, 4 Nov 2004 11:20:20 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.3 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

One index per e-mail is way overkill and probably not even feasible 
resource-wise.  Take advantage of fields in Lucene documents and use 
BooleanQuery to AND in other criteria for filtering, or use a Filter if 
the filtering criteria is relatively static.

	Erik

On Nov 4, 2004, at 11:00 AM, javier muguruza wrote:

> Hi,
>
> We are going to move from a just-in-time perl based search to using
> lucene in our project. I have to index emails (bodies and also
> attachements). I keep in the filesystem all the bodies and attachments
> for a long period of time. I have to find emails that fullfil certain
> conditions, some of the conditions are take care of at a different
> level, so in the end I have a SUBSET of emails I have to run through
> lucene.
>
> I was assuming that the best way would be to create an index for each
> email. Having an unique index for a group of emails (say a day worth
> of email) seems too coarse grained, imagine a day has 10000 emails,
> and some queries will like to look in only a handful of the
> emails...But the problem with having one index per emails is the
> massive number of emails...imagine having 100000 indexes
>
> Anyway, any idea about that? I just wanted to check wether someones
> feels I am wrong.
>
> Thanks
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11009-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 16:27:13 2004
Return-Path: <lucene-user-return-11009-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95751 invoked from network); 4 Nov 2004 16:27:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 16:27:13 -0000
Received: (qmail 6549 invoked by uid 500); 4 Nov 2004 16:26:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6482 invoked by uid 500); 4 Nov 2004 16:26:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6414 invoked by uid 99); 4 Nov 2004 16:26:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of giulio.cesare@gmail.com designates 64.233.170.198 as permitted sender)
Received: from [64.233.170.198] (HELO rproxy.gmail.com) (64.233.170.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 08:26:24 -0800
Received: by rproxy.gmail.com with SMTP id a41so276786rng
        for <lucene-user@jakarta.apache.org>; Thu, 04 Nov 2004 08:26:21 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=Jt/wKoknGGbpSRlgr6xe9BAQePPvE7dHyTL0Yxi2JWxe3VtPz6vTM5VUHkPbYobz9aZUOujXIYMBATqWJBlh5G/BlEgwGfc2hab3c6gjoTQoyHkDNYX/4hzaDwBZJaXnXCTcsfFzAKa5zjfG6RWjx0vRyruArn/wuvB7VgVSdXg=
Received: by 10.38.181.31 with SMTP id d31mr644781rnf;
        Thu, 04 Nov 2004 08:26:21 -0800 (PST)
Received: by 10.38.86.80 with HTTP; Thu, 4 Nov 2004 08:26:21 -0800 (PST)
Message-ID: <ff737ac3041104082673d3e96@mail.gmail.com>
Date: Thu, 4 Nov 2004 17:26:21 +0100
From: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
Reply-To: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
To: javier muguruza <jmuguruza@gmail.com>
Subject: Re: one huge index or many small ones?
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <f071061b04110408005cdbafbd@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <f071061b04110408005cdbafbd@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Javier,

I suggest you to build a single index, with all the information you
need to find the right mail you are looking for. You than can use
Lucene alone to find you messages.

Giulio Cesare


On Thu, 4 Nov 2004 17:00:35 +0100, javier muguruza <jmuguruza@gmail.com> wrote:
> Hi,
> 
> We are going to move from a just-in-time perl based search to using
> lucene in our project. I have to index emails (bodies and also
> attachements). I keep in the filesystem all the bodies and attachments
> for a long period of time. I have to find emails that fullfil certain
> conditions, some of the conditions are take care of at a different
> level, so in the end I have a SUBSET of emails I have to run through
> lucene.
> 
> I was assuming that the best way would be to create an index for each
> email. Having an unique index for a group of emails (say a day worth
> of email) seems too coarse grained, imagine a day has 10000 emails,
> and some queries will like to look in only a handful of the
> emails...But the problem with having one index per emails is the
> massive number of emails...imagine having 100000 indexes
> 
> Anyway, any idea about that? I just wanted to check wether someones
> feels I am wrong.
> 
> Thanks
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11010-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 17:04:01 2004
Return-Path: <lucene-user-return-11010-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19729 invoked from network); 4 Nov 2004 17:04:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 17:04:01 -0000
Received: (qmail 1716 invoked by uid 500); 4 Nov 2004 17:03:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1605 invoked by uid 500); 4 Nov 2004 17:03:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1591 invoked by uid 99); 4 Nov 2004 17:03:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jmuguruza@gmail.com designates 216.239.56.243 as permitted sender)
Received: from [216.239.56.243] (HELO mproxy.gmail.com) (216.239.56.243)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 09:03:50 -0800
Received: by mproxy.gmail.com with SMTP id u33so201587cwc
        for <lucene-user@jakarta.apache.org>; Thu, 04 Nov 2004 09:03:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=Fy7Ng0msUkdIyvLzi3bJg/1Wv8zXpojtIKHZIDKq2FAtmQlZ2EOZc/c6PHA4FyosSyDlN5vnbHSeuIAqHmYcAK/rbM+mL8AZ26lVYXd9mkX/FLwDt7CfP0C2/+ABd/eodrI4Yauc3PP9hqXvGF4Up+iQ5b6ykpPa3eirk9R8SLE=
Received: by 10.11.122.28 with SMTP id u28mr213904cwc;
        Thu, 04 Nov 2004 09:03:49 -0800 (PST)
Received: by 10.11.120.69 with HTTP; Thu, 4 Nov 2004 09:03:49 -0800 (PST)
Message-ID: <f071061b0411040903401eb574@mail.gmail.com>
Date: Thu, 4 Nov 2004 18:03:49 +0100
From: javier muguruza <jmuguruza@gmail.com>
Reply-To: javier muguruza <jmuguruza@gmail.com>
To: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
Subject: Re: one huge index or many small ones?
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <ff737ac3041104082673d3e96@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <f071061b04110408005cdbafbd@mail.gmail.com>
	 <ff737ac3041104082673d3e96@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Erik and Giulio for the fast reply.

I am just starting to look at lucene so forgive me if I got some ideas
wrong. I understand your concerns about one index per email. But
having one index only is also (I guess) out of question.

I am building an email archive. Email will be kept indefinitely
available for search, adding new email every day. Imagine a company
with millions of emails per day (been there), keep it growing for
years, adding stuff to the index while using it for searches
continuously...

That's why my idea is to decide on a time frame (a day, a month...an
extreme would be an instant, that is a single email, my original idea)
and build the index for all the email in that timeframe. After the
timeframe is finished no more stuff will be ever added.

Before the lucene search emails are selected based on other conditions
(we store the from, to, date etc in database as well, and these
conditions are enforced with a sql query first, so I would not need to
enforce them in the lucene search again, also that query can be quite
sophisticated and I guess would not be easyly possible to do it in
lucene by itself). That first db step gives me a group of emails that
maybe I have to further narrow down based on a lucene search (of body
and attachment contents). Having an index for more than one emails
means that after the search I would have to get only the overlaping
emails from the two searches...Maybe this is better than keeping the
same info I have in the db in lucene fields as well.

An example: I want all the email from john.doe@something.com from Jan
to Dec containing the word 'money'. I run the db query that returns a
list with john's email for that period of time, then (lets assume I
have one index per day) I iterate on every day, looking for emails
that contain 'money', from the results returned by lucene I keep only
these that are also in the first list.

Does that sound better? 


On Thu, 4 Nov 2004 17:26:21 +0100, Giulio Cesare Solaroli
<giulio.cesare@gmail.com> wrote:
> Hi Javier,
> 
> I suggest you to build a single index, with all the information you
> need to find the right mail you are looking for. You than can use
> Lucene alone to find you messages.
> 
> Giulio Cesare
> 
> 
> 
> 
> On Thu, 4 Nov 2004 17:00:35 +0100, javier muguruza <jmuguruza@gmail.com> wrote:
> > Hi,
> >
> > We are going to move from a just-in-time perl based search to using
> > lucene in our project. I have to index emails (bodies and also
> > attachements). I keep in the filesystem all the bodies and attachments
> > for a long period of time. I have to find emails that fullfil certain
> > conditions, some of the conditions are take care of at a different
> > level, so in the end I have a SUBSET of emails I have to run through
> > lucene.
> >
> > I was assuming that the best way would be to create an index for each
> > email. Having an unique index for a group of emails (say a day worth
> > of email) seems too coarse grained, imagine a day has 10000 emails,
> > and some queries will like to look in only a handful of the
> > emails...But the problem with having one index per emails is the
> > massive number of emails...imagine having 100000 indexes
> >
> > Anyway, any idea about that? I just wanted to check wether someones
> > feels I am wrong.
> >
> > Thanks
> > 
> > ---------------------------------------------------------------------
> 
> 
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11011-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 17:29:08 2004
Return-Path: <lucene-user-return-11011-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34855 invoked from network); 4 Nov 2004 17:29:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 17:29:08 -0000
Received: (qmail 51146 invoked by uid 500); 4 Nov 2004 17:28:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51031 invoked by uid 500); 4 Nov 2004 17:28:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50907 invoked by uid 99); 4 Nov 2004 17:28:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.196 as permitted sender)
Received: from [64.233.170.196] (HELO rproxy.gmail.com) (64.233.170.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 09:28:26 -0800
Received: by rproxy.gmail.com with SMTP id 34so39613rns
        for <lucene-user@jakarta.apache.org>; Thu, 04 Nov 2004 09:28:18 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=RyfWsHH4uhYm8MBV+Rx6x9cWI+UK9EifZJiwIj01ewbgi3FGvt9wCPQWhjW0TdPGNeT5njH2EUGxTkWvkDfRlfpPoRS774Co/UMPwBALUhTycsTQgf/tQ1AmCru7lQHngYjdLmKE7x2gIYeYsQc7/aaSOh5x2vDOKFa7fRfnAhQ=
Received: by 10.38.8.34 with SMTP id 34mr389866rnh;
        Thu, 04 Nov 2004 09:28:18 -0800 (PST)
Received: by 10.38.179.13 with HTTP; Thu, 4 Nov 2004 09:28:18 -0800 (PST)
Message-ID: <dd2db8d004110409281c52da5@mail.gmail.com>
Date: Thu, 4 Nov 2004 10:28:18 -0700
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>, 
	javier muguruza <jmuguruza@gmail.com>
Subject: Re: one huge index or many small ones?
In-Reply-To: <f071061b0411040903401eb574@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <f071061b04110408005cdbafbd@mail.gmail.com>
	 <ff737ac3041104082673d3e96@mail.gmail.com>
	 <f071061b0411040903401eb574@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

First off, I think you should make a decision about what you want to
store in your index and how you go about searching it.

The less information you store in your index, the better, for
performance reasons.  If you can store the messages in an external
database you probably should.  I would create a table that contains a
clob and an associated id that can be used to get the message at any
time.

Assuming mail is in SMTP RFC format:

I would suggest:
Unstored: Subject
Keyword: From
Keyword: To
Stored,Unindexed: ID  <-- this would be the ID to the message in your database
Unstored: Body 
Keyword: Month
Keyword: Day
Keyword: Year
(and any other keywords you might use)

Your lucene query would then look something like:
+From:john.doe@something.com +(Subject:money Body:money) +Year:2004

Use the stored ID field to get the message contents from your database.

If you want to break your index down into multiple indexes, based on
some criteria such as time frame you could do that too.  You would
then use a MultiSearcher or ParallelMultiSearcher to process the
multiple indexes.


On Thu, 4 Nov 2004 18:03:49 +0100, javier muguruza <jmuguruza@gmail.com> wrote:
> Thanks Erik and Giulio for the fast reply.
> 
> I am just starting to look at lucene so forgive me if I got some ideas
> wrong. I understand your concerns about one index per email. But
> having one index only is also (I guess) out of question.
> 
> I am building an email archive. Email will be kept indefinitely
> available for search, adding new email every day. Imagine a company
> with millions of emails per day (been there), keep it growing for
> years, adding stuff to the index while using it for searches
> continuously...
> 
> That's why my idea is to decide on a time frame (a day, a month...an
> extreme would be an instant, that is a single email, my original idea)
> and build the index for all the email in that timeframe. After the
> timeframe is finished no more stuff will be ever added.
> 
> Before the lucene search emails are selected based on other conditions
> (we store the from, to, date etc in database as well, and these
> conditions are enforced with a sql query first, so I would not need to
> enforce them in the lucene search again, also that query can be quite
> sophisticated and I guess would not be easyly possible to do it in
> lucene by itself). That first db step gives me a group of emails that
> maybe I have to further narrow down based on a lucene search (of body
> and attachment contents). Having an index for more than one emails
> means that after the search I would have to get only the overlaping
> emails from the two searches...Maybe this is better than keeping the
> same info I have in the db in lucene fields as well.
> 
> An example: I want all the email from john.doe@something.com from Jan
> to Dec containing the word 'money'. I run the db query that returns a
> list with john's email for that period of time, then (lets assume I
> have one index per day) I iterate on every day, looking for emails
> that contain 'money', from the results returned by lucene I keep only
> these that are also in the first list.
> 
> Does that sound better?
> 
> On Thu, 4 Nov 2004 17:26:21 +0100, Giulio Cesare Solaroli
> 
> 
> <giulio.cesare@gmail.com> wrote:
> > Hi Javier,
> >
> > I suggest you to build a single index, with all the information you
> > need to find the right mail you are looking for. You than can use
> > Lucene alone to find you messages.
> >
> > Giulio Cesare
> >
> >
> >
> >
> > On Thu, 4 Nov 2004 17:00:35 +0100, javier muguruza <jmuguruza@gmail.com> wrote:
> > > Hi,
> > >
> > > We are going to move from a just-in-time perl based search to using
> > > lucene in our project. I have to index emails (bodies and also
> > > attachements). I keep in the filesystem all the bodies and attachments
> > > for a long period of time. I have to find emails that fullfil certain
> > > conditions, some of the conditions are take care of at a different
> > > level, so in the end I have a SUBSET of emails I have to run through
> > > lucene.
> > >
> > > I was assuming that the best way would be to create an index for each
> > > email. Having an unique index for a group of emails (say a day worth
> > > of email) seems too coarse grained, imagine a day has 10000 emails,
> > > and some queries will like to look in only a handful of the
> > > emails...But the problem with having one index per emails is the
> > > massive number of emails...imagine having 100000 indexes
> > >
> > > Anyway, any idea about that? I just wanted to check wether someones
> > > feels I am wrong.
> > >
> > > Thanks
> > >
> > > ---------------------------------------------------------------------
> >
> >
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >
> > >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11012-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 17:52:31 2004
Return-Path: <lucene-user-return-11012-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46935 invoked from network); 4 Nov 2004 17:52:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 17:52:31 -0000
Received: (qmail 97630 invoked by uid 500); 4 Nov 2004 17:52:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97556 invoked by uid 500); 4 Nov 2004 17:52:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97540 invoked by uid 99); 4 Nov 2004 17:52:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.198 as permitted sender)
Received: from [64.233.170.198] (HELO rproxy.gmail.com) (64.233.170.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 09:52:23 -0800
Received: by rproxy.gmail.com with SMTP id 40so44618rnz
        for <lucene-user@jakarta.apache.org>; Thu, 04 Nov 2004 09:52:21 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=bRdM/MZ5HIwd+Jx6cYXo4gbI6/9qYjBRxK3fS6qNnhpfLVoha4nFuVMxwkbkyYTUhTtNiLLOYU0/jH/13Uh6CJaNtTZPxDtxKU+HBIKZC2/Wt2/gPz4bVwqZpoLHUR+D/dgmGtvJs83f0fCrN4kB2hPIctTgW9as8jOSkYvAGUc=
Received: by 10.38.8.9 with SMTP id 9mr387216rnh;
        Thu, 04 Nov 2004 09:52:21 -0800 (PST)
Received: by 10.38.179.13 with HTTP; Thu, 4 Nov 2004 09:52:21 -0800 (PST)
Message-ID: <dd2db8d0041104095239a16a9e@mail.gmail.com>
Date: Thu, 4 Nov 2004 10:52:21 -0700
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: prefix wildcard matching options (*blah)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm thinking about making a seperate field in my index for prefix
wildcard searches.
I would chop off x characters from the front to create "subtokens" for
the prefix matches.

For the term: republican
terms created: republican epublican publican ublican blican

My query parser would then intelligently decide if their is a term
that has a wildcard as the first character of the term.  Instead of
searching the normal field, it would then remove the wildcard from the
start of the term and search on the prefix field instead.

A search for "*pub*" would be converted to "pub*" in the prefix field.  
A search for "*blican" would be converted to "blican"

Does this sound like an intelligent way to create fast prefix querying ability?

Can I index the prefix field with a seperate analyzer that makes the
prefix tokens, or should I just do the index-time expansion manually? 
I wouldn't need to search with this analyzer, just index with it,
because the searching doesn't have to expand all those terms.

If using a seperate analyzer for the prefix field makes more sense how
do I make a tokenizer that returns multiple tokens for one word?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11013-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 18:00:15 2004
Return-Path: <lucene-user-return-11013-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50145 invoked from network); 4 Nov 2004 18:00:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 18:00:14 -0000
Received: (qmail 18452 invoked by uid 500); 4 Nov 2004 18:00:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18390 invoked by uid 500); 4 Nov 2004 18:00:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18377 invoked by uid 99); 4 Nov 2004 18:00:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 10:00:00 -0800
Received: from ifit.uni-klu.ac.at ([143.205.246.239]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Thu, 4 Nov 2004 18:59:55 +0100
Message-ID: <418A6E91.2060103@ifit.uni-klu.ac.at>
Date: Thu, 04 Nov 2004 19:01:53 +0100
From: Sergiu Gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.5) Gecko/20031007
X-Accept-Language: de-at, en, ro, it, en-us
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: one huge index or many small ones?
References: <f071061b04110408005cdbafbd@mail.gmail.com>	 <ff737ac3041104082673d3e96@mail.gmail.com> <f071061b0411040903401eb574@mail.gmail.com>
In-Reply-To: <f071061b0411040903401eb574@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 04 Nov 2004 17:59:56.0165 (UTC) FILETIME=[17B32350:01C4C298]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

javier muguruza wrote:

 Hi Javier,

 I think the your optimization should take care of the response time of  
search queries. I asume that this is the
variable  you need to optimize. Probably it will be a good thing to read 
first the lucene benchmarks:
http://jakarta.apache.org/lucene/docs/benchmarks.html. 
<http://jakarta.apache.org/lucene/docs/benchmarks.html>

 If you have a mandatory date constraint for each of your indexes you 
can split the index on time basis, I asume that
one index per month will be enough I think ... 10.000 emails I think it 
will be fast enough if you will search in only one index afterwards.
But I think this is not such a good Idea?

What about creating one index per user? If your search require a user or 
a sender, and you can get its name from database, and apply only
the other constrains on an index dedicated to that user .. I think the 
lucene search will be much more faster.

Also the database search will be fast .. I don'T think you will have 
more then 1.000-10.000 user names.

or maybe 1 index/user/year

or 1 index/receiver/year + 1index/sender/year

 What about this solution is it feasible for your system?

 All the best,

  Sergiu

>Thanks Erik and Giulio for the fast reply.
>
>I am just starting to look at lucene so forgive me if I got some ideas
>wrong. I understand your concerns about one index per email. But
>having one index only is also (I guess) out of question.
>
>I am building an email archive. Email will be kept indefinitely
>available for search, adding new email every day. Imagine a company
>with millions of emails per day (been there), keep it growing for
>years, adding stuff to the index while using it for searches
>continuously...
>
>That's why my idea is to decide on a time frame (a day, a month...an
>extreme would be an instant, that is a single email, my original idea)
>and build the index for all the email in that timeframe. After the
>timeframe is finished no more stuff will be ever added.
>
>Before the lucene search emails are selected based on other conditions
>(we store the from, to, date etc in database as well, and these
>conditions are enforced with a sql query first, so I would not need to
>enforce them in the lucene search again, also that query can be quite
>sophisticated and I guess would not be easyly possible to do it in
>lucene by itself). That first db step gives me a group of emails that
>maybe I have to further narrow down based on a lucene search (of body
>and attachment contents). Having an index for more than one emails
>means that after the search I would have to get only the overlaping
>emails from the two searches...Maybe this is better than keeping the
>same info I have in the db in lucene fields as well.
>
>An example: I want all the email from john.doe@something.com from Jan
>to Dec containing the word 'money'. I run the db query that returns a
>list with john's email for that period of time, then (lets assume I
>have one index per day) I iterate on every day, looking for emails
>that contain 'money', from the results returned by lucene I keep only
>these that are also in the first list.
>
>Does that sound better? 
>
>
>On Thu, 4 Nov 2004 17:26:21 +0100, Giulio Cesare Solaroli
><giulio.cesare@gmail.com> wrote:
>  
>
>>Hi Javier,
>>
>>I suggest you to build a single index, with all the information you
>>need to find the right mail you are looking for. You than can use
>>Lucene alone to find you messages.
>>
>>Giulio Cesare
>>
>>
>>
>>
>>On Thu, 4 Nov 2004 17:00:35 +0100, javier muguruza <jmuguruza@gmail.com> wrote:
>>    
>>
>>>Hi,
>>>
>>>We are going to move from a just-in-time perl based search to using
>>>lucene in our project. I have to index emails (bodies and also
>>>attachements). I keep in the filesystem all the bodies and attachments
>>>for a long period of time. I have to find emails that fullfil certain
>>>conditions, some of the conditions are take care of at a different
>>>level, so in the end I have a SUBSET of emails I have to run through
>>>lucene.
>>>
>>>I was assuming that the best way would be to create an index for each
>>>email. Having an unique index for a group of emails (say a day worth
>>>of email) seems too coarse grained, imagine a day has 10000 emails,
>>>and some queries will like to look in only a handful of the
>>>emails...But the problem with having one index per emails is the
>>>massive number of emails...imagine having 100000 indexes
>>>
>>>Anyway, any idea about that? I just wanted to check wether someones
>>>feels I am wrong.
>>>
>>>Thanks
>>>
>>>---------------------------------------------------------------------
>>>      
>>>
>>    
>>
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>>      
>>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11014-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 18:37:27 2004
Return-Path: <lucene-user-return-11014-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72310 invoked from network); 4 Nov 2004 18:37:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 18:37:27 -0000
Received: (qmail 15193 invoked by uid 500); 4 Nov 2004 18:36:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14897 invoked by uid 500); 4 Nov 2004 18:36:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14699 invoked by uid 99); 4 Nov 2004 18:36:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.202 as permitted sender)
Received: from [64.233.170.202] (HELO rproxy.gmail.com) (64.233.170.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 10:36:21 -0800
Received: by rproxy.gmail.com with SMTP id a41so299414rng
        for <lucene-user@jakarta.apache.org>; Thu, 04 Nov 2004 10:36:19 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=QuE6TXj22VowpO4wAi30AtHaCYzTEYTzypMn7RahKcAUxkTAxEmxW+6ZFXaaMRsKO62uytR+FQnzhxdJzA7SQUCItUnuiz9Uv6UxjwfjGLQTtMd8ChB6Ecs7jpLg+QEoAyv/ZIJe+6KOPj8ApnlDa7GcHxcojtgueewpKsztsZE=
Received: by 10.38.208.46 with SMTP id f46mr1167892rng;
        Thu, 04 Nov 2004 10:36:19 -0800 (PST)
Received: by 10.38.72.80 with HTTP; Thu, 4 Nov 2004 10:36:19 -0800 (PST)
Message-ID: <cbdebdf80411041036676b7490@mail.gmail.com>
Date: Thu, 4 Nov 2004 10:36:19 -0800
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: updating documents in the index
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

So I've read that the only way to change a field in an already indexed
document is to simple remove it and readd it... but that can be costly
if I need to go back to where the data origionally came from and
reparse and reindex it all.

Is there a way to keep the document around after the delete call to
the indexreader so that I can modify a field and add it again with a
writer?

I would simple rip out all the fields and then create a new document,
but the 'content' field isn't stored due to the fact that my index
would be much larger if i kept the content around.

Anyone have any good solutions to do this short of keeping around the
content in the index or going back to the origional document source?

Does 'luke' rebuild a document so that it can be updated? If so, how
do they go about it.

Thanks is advance everyone!

-Chris Fraschetti

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11015-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 18:41:29 2004
Return-Path: <lucene-user-return-11015-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74692 invoked from network); 4 Nov 2004 18:41:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 18:41:28 -0000
Received: (qmail 21982 invoked by uid 500); 4 Nov 2004 18:41:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21871 invoked by uid 500); 4 Nov 2004 18:41:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21857 invoked by uid 99); 4 Nov 2004 18:41:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.194 as permitted sender)
Received: from [64.233.170.194] (HELO rproxy.gmail.com) (64.233.170.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 10:41:14 -0800
Received: by rproxy.gmail.com with SMTP id a41so300216rng
        for <lucene-user@jakarta.apache.org>; Thu, 04 Nov 2004 10:41:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=BjNlc/dIXmBdT3Q98+AKnzp4fyFhAJrlLKwEkI0ZdDHsz3+D1Xs104xv1so0vGLzEe4zreDamQuDmR1CqufANhAdspzo8dQTbzwYJmp3lZUEdgahjZUNvoaSWUB7rgZxgMwT87yI/uNVEJPyJmhdYj9dV4+2b57Cw+UR5QD7I5U=
Received: by 10.38.161.53 with SMTP id j53mr232306rne;
        Thu, 04 Nov 2004 10:41:12 -0800 (PST)
Received: by 10.38.72.80 with HTTP; Thu, 4 Nov 2004 10:41:12 -0800 (PST)
Message-ID: <cbdebdf8041104104133b68c6b@mail.gmail.com>
Date: Thu, 4 Nov 2004 10:41:12 -0800
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: sorting by score and an additional field
In-Reply-To: <8BD3133C-2E44-11D9-8F25-000393A564E6@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <cbdebdf8041103185276236503@mail.gmail.com>
	 <8BD3133C-2E44-11D9-8F25-000393A564E6@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik:

doc.add(Field.Keyword("rank_field", rank_value));

is what I use to build my customized rank field.


Considering the rank_value is an integer, should it be zero padded?
Currently I have it padded because the rest of lucene needs it that
way, should it be the same here?

If I specify INT or STRING, the sort of rank works just fine... but
its when I combine the two that I have issues. I'm using 1.4.2... but
I'll see how my code differs from yours and give it a try.. can you
tell me how you indexed your secondary rank field? as a keyword or
what have you?

Thanks,
Chris Fraschetti


On Thu, 4 Nov 2004 04:33:12 -0500, Erik Hatcher
<erik@ehatchersolutions.com> wrote:
> On Nov 3, 2004, at 9:52 PM, Chris Fraschetti wrote:
> > Has anyone had any luck using lucene's built in sort functions to sort
> > first by the lucene hit score and secondarily by a Field in each
> > document indexed as Keyword and in integer form?
> 
> I get multiple sort fields to work, here's two examples:
> 
>         new Sort(new SortField[]{
>           new SortField("category"),
>           SortField.FIELD_SCORE,
>           new SortField("pubmonth", SortField.INT, true)
>         });
> 
>        new Sort(new SortField[] {SortField.FIELD_SCORE, new
> SortField("category")})
> 
> Both of these, on a tiny dataset of only 10 documents, works exactly as
> expected.
> 
> > I can only get it to sort by one or the other... but when it does one,
> > it does sort correctly, but together in {score, custom_field} only the
> > first sort seems to apply.
> >
> > Any ideas?
> 
> Are you using Lucene 1.4.2?  How did you index your integer field?  Are
> you simply using the .toString() of an Integer?  Or zero padding the
> field somehow?  You can use the .toString method, but you have to be
> sure that the sorting code does the right parsing of it - so you might
> need to specify SortField.INT as its type.  It will do automatic
> detection if the type is not specified, but that assumes that the first
> document it encounters parses properly, otherwise it will fall back to
> using a String sort.
> 
>        Erik
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


-- 
___________________________________________________
Chris Fraschetti, Student CompSci System Admin
University of San Francisco
e fraschetti@gmail.com | http://meteora.cs.usfca.edu

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11016-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 18:55:19 2004
Return-Path: <lucene-user-return-11016-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81407 invoked from network); 4 Nov 2004 18:55:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 18:55:19 -0000
Received: (qmail 44310 invoked by uid 500); 4 Nov 2004 18:55:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44285 invoked by uid 500); 4 Nov 2004 18:55:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44271 invoked by uid 99); 4 Nov 2004 18:55:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 10:55:08 -0800
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id iA4It7I23118
	for <lucene-user@jakarta.apache.org>; Thu, 4 Nov 2004 12:55:08 -0600
Message-ID: <418A7B07.3060404@getopt.org>
Date: Thu, 04 Nov 2004 19:55:03 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: updating documents in the index
References: <cbdebdf80411041036676b7490@mail.gmail.com>
In-Reply-To: <cbdebdf80411041036676b7490@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Chris Fraschetti wrote:

> So I've read that the only way to change a field in an already indexed
> document is to simple remove it and readd it... but that can be costly
> if I need to go back to where the data origionally came from and
> reparse and reindex it all.

Yes.

> 
> Is there a way to keep the document around after the delete call to
> the indexreader so that I can modify a field and add it again with a
> writer?

Lucene does not provide this functionality (yet?). If you try to read 
from index a document that contains "unstored" fields, you will get 
nulls instead of their values. In other words, you cannot read the 
Document instance, modify it, and then add it - because you will lose 
all information from "unstored" fields. Also, when you re-add the 
document all fields need to be analyzed once again.

> 
> I would simple rip out all the fields and then create a new document,
> but the 'content' field isn't stored due to the fact that my index
> would be much larger if i kept the content around.
> 
> Anyone have any good solutions to do this short of keeping around the
> content in the index or going back to the origional document source?
> 
> Does 'luke' rebuild a document so that it can be updated? If so, how
> do they go about it.

"They" (me and Luke :) do it the hard way - we iterate over all terms in 
the index, and then iterate over all documents which contain that term. 
If the enumeration contains the selected doc number, terms and their 
positions are put in the target term array. After going through the 
whole index, we end up with an array containing all terms and every 
position of each term in the document. This array is then concatenated 
using spaces. That's it - not really a solution, rather a hack.

This could be sped up using term vectors (Lucene 1.4.x), but you first 
need to build your index with term vectors.

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11017-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 19:09:58 2004
Return-Path: <lucene-user-return-11017-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88066 invoked from network); 4 Nov 2004 19:09:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 19:09:58 -0000
Received: (qmail 65278 invoked by uid 500); 4 Nov 2004 19:09:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 65105 invoked by uid 500); 4 Nov 2004 19:09:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 65087 invoked by uid 99); 4 Nov 2004 19:09:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jmuguruza@gmail.com designates 216.239.56.242 as permitted sender)
Received: from [216.239.56.242] (HELO mproxy.gmail.com) (216.239.56.242)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 11:09:45 -0800
Received: by mproxy.gmail.com with SMTP id u33so2300cwc
        for <lucene-user@jakarta.apache.org>; Thu, 04 Nov 2004 11:09:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=PdTNgWFEw3Cmw0Qdx+SokknE4VGc0TWqxi/ZvpVMd84P+wbfsKJNqEhBlIsGUEvFbWmefb5bkHqJWVty2mrn7njhnPWEX1EmUGk67L/e91i/EUq37ek255WZnLKRVjHBQSYr7m7Buw8XXu1kovnMkAxgXCJ5R/D7kHNv0yb10bk=
Received: by 10.11.100.71 with SMTP id x71mr1235cwb;
        Thu, 04 Nov 2004 11:09:44 -0800 (PST)
Received: by 10.11.120.69 with HTTP; Thu, 4 Nov 2004 11:09:44 -0800 (PST)
Message-ID: <f071061b0411041109bf72ad1@mail.gmail.com>
Date: Thu, 4 Nov 2004 20:09:44 +0100
From: javier muguruza <jmuguruza@gmail.com>
Reply-To: javier muguruza <jmuguruza@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: one huge index or many small ones?
In-Reply-To: <418A6E91.2060103@ifit.uni-klu.ac.at>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <f071061b04110408005cdbafbd@mail.gmail.com>
	 <ff737ac3041104082673d3e96@mail.gmail.com>
	 <f071061b0411040903401eb574@mail.gmail.com>
	 <418A6E91.2060103@ifit.uni-klu.ac.at>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sergiu,

A month could have tens of millions of emails in the worst case, but
maybe I could discard such bad assumption for our current project.
Lets say 10000 emails per day max, that makes 300k emails a month.
Either I would choose one index per day or per month (or week or
whatever).

Your suggestion about index per user is not valid, my searches do not
require a user desafortunately. They can maybe say 'all email from
department C from last week' etc. So, if I choose one index per day(or
month) I already know that I will have to search in many indexes
depending on the timeframe (the time frame is the only required value
for the search)

thanks for the suggestions!


On Thu, 04 Nov 2004 19:01:53 +0100, Sergiu Gordea
<gsergiu@ifit.uni-klu.ac.at> wrote:
> javier muguruza wrote:
> 
> Hi Javier,
> 
> I think the your optimization should take care of the response time of
> search queries. I asume that this is the
> variable  you need to optimize. Probably it will be a good thing to read
> first the lucene benchmarks:
> http://jakarta.apache.org/lucene/docs/benchmarks.html.
> <http://jakarta.apache.org/lucene/docs/benchmarks.html>
> 
> If you have a mandatory date constraint for each of your indexes you
> can split the index on time basis, I asume that
> one index per month will be enough I think ... 10.000 emails I think it
> will be fast enough if you will search in only one index afterwards.
> But I think this is not such a good Idea?
> 
> What about creating one index per user? If your search require a user or
> a sender, and you can get its name from database, and apply only
> the other constrains on an index dedicated to that user .. I think the
> lucene search will be much more faster.
> 
> Also the database search will be fast .. I don'T think you will have
> more then 1.000-10.000 user names.
> 
> or maybe 1 index/user/year
> 
> or 1 index/receiver/year + 1index/sender/year
> 
> What about this solution is it feasible for your system?
> 
> All the best,
> 
>  Sergiu
> 
> 
> 
> >Thanks Erik and Giulio for the fast reply.
> >
> >I am just starting to look at lucene so forgive me if I got some ideas
> >wrong. I understand your concerns about one index per email. But
> >having one index only is also (I guess) out of question.
> >
> >I am building an email archive. Email will be kept indefinitely
> >available for search, adding new email every day. Imagine a company
> >with millions of emails per day (been there), keep it growing for
> >years, adding stuff to the index while using it for searches
> >continuously...
> >
> >That's why my idea is to decide on a time frame (a day, a month...an
> >extreme would be an instant, that is a single email, my original idea)
> >and build the index for all the email in that timeframe. After the
> >timeframe is finished no more stuff will be ever added.
> >
> >Before the lucene search emails are selected based on other conditions
> >(we store the from, to, date etc in database as well, and these
> >conditions are enforced with a sql query first, so I would not need to
> >enforce them in the lucene search again, also that query can be quite
> >sophisticated and I guess would not be easyly possible to do it in
> >lucene by itself). That first db step gives me a group of emails that
> >maybe I have to further narrow down based on a lucene search (of body
> >and attachment contents). Having an index for more than one emails
> >means that after the search I would have to get only the overlaping
> >emails from the two searches...Maybe this is better than keeping the
> >same info I have in the db in lucene fields as well.
> >
> >An example: I want all the email from john.doe@something.com from Jan
> >to Dec containing the word 'money'. I run the db query that returns a
> >list with john's email for that period of time, then (lets assume I
> >have one index per day) I iterate on every day, looking for emails
> >that contain 'money', from the results returned by lucene I keep only
> >these that are also in the first list.
> >
> >Does that sound better?
> >
> >
> >On Thu, 4 Nov 2004 17:26:21 +0100, Giulio Cesare Solaroli
> ><giulio.cesare@gmail.com> wrote:
> >
> >
> >>Hi Javier,
> >>
> >>I suggest you to build a single index, with all the information you
> >>need to find the right mail you are looking for. You than can use
> >>Lucene alone to find you messages.
> >>
> >>Giulio Cesare
> >>
> >>
> >>
> >>
> >>On Thu, 4 Nov 2004 17:00:35 +0100, javier muguruza <jmuguruza@gmail.com> wrote:
> >>
> >>
> >>>Hi,
> >>>
> >>>We are going to move from a just-in-time perl based search to using
> >>>lucene in our project. I have to index emails (bodies and also
> >>>attachements). I keep in the filesystem all the bodies and attachments
> >>>for a long period of time. I have to find emails that fullfil certain
> >>>conditions, some of the conditions are take care of at a different
> >>>level, so in the end I have a SUBSET of emails I have to run through
> >>>lucene.
> >>>
> >>>I was assuming that the best way would be to create an index for each
> >>>email. Having an unique index for a group of emails (say a day worth
> >>>of email) seems too coarse grained, imagine a day has 10000 emails,
> >>>and some queries will like to look in only a handful of the
> >>>emails...But the problem with having one index per emails is the
> >>>massive number of emails...imagine having 100000 indexes
> >>>
> >>>Anyway, any idea about that? I just wanted to check wether someones
> >>>feels I am wrong.
> >>>
> >>>Thanks
> >>>
> >>>---------------------------------------------------------------------
> >>>
> >>>
> >>
> >>
> >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>>
> >>>
> >>>
> >>>
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >
> 
> 
> ---------------------------------------------------------------------
> 
> 
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11018-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 19:15:13 2004
Return-Path: <lucene-user-return-11018-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90587 invoked from network); 4 Nov 2004 19:15:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 19:15:12 -0000
Received: (qmail 80252 invoked by uid 500); 4 Nov 2004 19:15:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 80213 invoked by uid 500); 4 Nov 2004 19:15:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 80197 invoked by uid 99); 4 Nov 2004 19:15:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jmuguruza@gmail.com designates 216.239.56.250 as permitted sender)
Received: from [216.239.56.250] (HELO mproxy.gmail.com) (216.239.56.250)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 11:15:00 -0800
Received: by mproxy.gmail.com with SMTP id u33so2511cwc
        for <lucene-user@jakarta.apache.org>; Thu, 04 Nov 2004 11:14:56 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=Pss2L5dB/VxhZ5TgclLMI9VKcUz0+Mcavb6CTq27vjOdHwmm6b/gWrrNE+vTVM3eyVbBeh77RmvPCFaadaDTOfVcaeur7jJrGJuvlPfM7XSZfMpznTxHRBoo2tjobqg6mzojuEGtIxhlaHXU7PO3azoVgJxe4q8vAi0gCeY1vko=
Received: by 10.11.98.68 with SMTP id v68mr300cwb;
        Thu, 04 Nov 2004 11:08:15 -0800 (PST)
Received: by 10.11.120.69 with HTTP; Thu, 4 Nov 2004 11:08:15 -0800 (PST)
Message-ID: <f071061b04110411083779d34c@mail.gmail.com>
Date: Thu, 4 Nov 2004 20:08:15 +0100
From: javier muguruza <jmuguruza@gmail.com>
Reply-To: javier muguruza <jmuguruza@gmail.com>
Subject: Re: one huge index or many small ones?
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <dd2db8d004110409281c52da5@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <f071061b04110408005cdbafbd@mail.gmail.com>
	 <ff737ac3041104082673d3e96@mail.gmail.com>
	 <f071061b0411040903401eb574@mail.gmail.com>
	 <dd2db8d004110409281c52da5@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Justin, 

Yes, I wanted as less info as possible in the index. The body and
atachemntes will be stored outside lucene. As I mentioned,  I only
need to deal with the body/attachments contents with lucene, from, to,
subject, dates etc are deal with before. My idea was:

Unstored: Body + attachment (after extracting text)

I dont need to know in with attchment the word I am looking for are,
it's enough to know there are in the email. I will have a look at
MultiSearcher or ParallelMultiSearcher,

thanks!


On Thu, 4 Nov 2004 10:28:18 -0700, Justin Swanhart <greenlion@gmail.com> wrote:
> First off, I think you should make a decision about what you want to
> store in your index and how you go about searching it.
> 
> The less information you store in your index, the better, for
> performance reasons.  If you can store the messages in an external
> database you probably should.  I would create a table that contains a
> clob and an associated id that can be used to get the message at any
> time.
> 
> Assuming mail is in SMTP RFC format:
> 
> I would suggest:
> Unstored: Subject
> Keyword: From
> Keyword: To
> Stored,Unindexed: ID  <-- this would be the ID to the message in your database
> Unstored: Body
> Keyword: Month
> Keyword: Day
> Keyword: Year
> (and any other keywords you might use)
> 
> Your lucene query would then look something like:
> +From:john.doe@something.com +(Subject:money Body:money) +Year:2004
> 
> Use the stored ID field to get the message contents from your database.
> 
> If you want to break your index down into multiple indexes, based on
> some criteria such as time frame you could do that too.  You would
> then use a MultiSearcher or ParallelMultiSearcher to process the
> multiple indexes.
> 
> 
> 
> 
> On Thu, 4 Nov 2004 18:03:49 +0100, javier muguruza <jmuguruza@gmail.com> wrote:
> > Thanks Erik and Giulio for the fast reply.
> >
> > I am just starting to look at lucene so forgive me if I got some ideas
> > wrong. I understand your concerns about one index per email. But
> > having one index only is also (I guess) out of question.
> >
> > I am building an email archive. Email will be kept indefinitely
> > available for search, adding new email every day. Imagine a company
> > with millions of emails per day (been there), keep it growing for
> > years, adding stuff to the index while using it for searches
> > continuously...
> >
> > That's why my idea is to decide on a time frame (a day, a month...an
> > extreme would be an instant, that is a single email, my original idea)
> > and build the index for all the email in that timeframe. After the
> > timeframe is finished no more stuff will be ever added.
> >
> > Before the lucene search emails are selected based on other conditions
> > (we store the from, to, date etc in database as well, and these
> > conditions are enforced with a sql query first, so I would not need to
> > enforce them in the lucene search again, also that query can be quite
> > sophisticated and I guess would not be easyly possible to do it in
> > lucene by itself). That first db step gives me a group of emails that
> > maybe I have to further narrow down based on a lucene search (of body
> > and attachment contents). Having an index for more than one emails
> > means that after the search I would have to get only the overlaping
> > emails from the two searches...Maybe this is better than keeping the
> > same info I have in the db in lucene fields as well.
> >
> > An example: I want all the email from john.doe@something.com from Jan
> > to Dec containing the word 'money'. I run the db query that returns a
> > list with john's email for that period of time, then (lets assume I
> > have one index per day) I iterate on every day, looking for emails
> > that contain 'money', from the results returned by lucene I keep only
> > these that are also in the first list.
> >
> > Does that sound better?
> >
> > On Thu, 4 Nov 2004 17:26:21 +0100, Giulio Cesare Solaroli
> >
> >
> > <giulio.cesare@gmail.com> wrote:
> > > Hi Javier,
> > >
> > > I suggest you to build a single index, with all the information you
> > > need to find the right mail you are looking for. You than can use
> > > Lucene alone to find you messages.
> > >
> > > Giulio Cesare
> > >
> > >
> > >
> > >
> > > On Thu, 4 Nov 2004 17:00:35 +0100, javier muguruza <jmuguruza@gmail.com> wrote:
> > > > Hi,
> > > >
> > > > We are going to move from a just-in-time perl based search to using
> > > > lucene in our project. I have to index emails (bodies and also
> > > > attachements). I keep in the filesystem all the bodies and attachments
> > > > for a long period of time. I have to find emails that fullfil certain
> > > > conditions, some of the conditions are take care of at a different
> > > > level, so in the end I have a SUBSET of emails I have to run through
> > > > lucene.
> > > >
> > > > I was assuming that the best way would be to create an index for each
> > > > email. Having an unique index for a group of emails (say a day worth
> > > > of email) seems too coarse grained, imagine a day has 10000 emails,
> > > > and some queries will like to look in only a handful of the
> > > > emails...But the problem with having one index per emails is the
> > > > massive number of emails...imagine having 100000 indexes
> > > >
> > > > Anyway, any idea about that? I just wanted to check wether someones
> > > > feels I am wrong.
> > > >
> > > > Thanks
> > > >
> > > > ---------------------------------------------------------------------
> > >
> > >
> > > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > > >
> > > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11019-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 20:11:14 2004
Return-Path: <lucene-user-return-11019-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17191 invoked from network); 4 Nov 2004 20:11:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 20:11:14 -0000
Received: (qmail 88579 invoked by uid 500); 4 Nov 2004 20:11:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 88491 invoked by uid 500); 4 Nov 2004 20:11:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 88478 invoked by uid 99); 4 Nov 2004 20:11:05 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=HTML_60_70,HTML_MESSAGE,SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 12:11:04 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4C2A9.B5450D10"
Subject: Is there an easy way to have indexing ignore a CVS subdirectory in the index directory?
Date: Thu, 4 Nov 2004 12:06:00 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C02789A55@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Is there an easy way to have indexing ignore a CVS subdirectory in the index directory?
Thread-Index: AcTCqeCpp7HKEPEuRASSSfRmiLNfiw==
From: "Chuck Williams" <chuck@manawiz.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4C2A9.B5450D10
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I have a Tomcat web module being developed with Netbeans 4.0 ide using
CVS.  One CVS repository holds the sources of my various web files in a
directory structure that directly parallels the standard Tomcat webapp
directory structure.  This is well supported in a fully automated way
within Netbeans.  I have my search index directory as a subdirectory of
WEB-INF, which seemed the natural place to put it.  The index files
themselves are not in the repository.  I want to be able to do CVS
Update for the web module directory tree as a whole.  However, this
places a CVS subdirectory within the index directory, which in turn
causes Lucene indexing to blow up the next time I run it since this is
an unexpected entry in the index directory.  To make things works, to
work around the problem I both need to delete the CVS subdirectory and
find and delete the pointers to it in the Entries file and Netbeans
cache file within the CVS subdirectory of the parent directory.  This is
annoying to say the least.

=20

I've asked the Netbeans users if there is a way to avoid creation of the
index's CVS subdirectory, but the same thing happened using WinCVS and I
so I expect this is not a Netbeans issue.  It could be my relative
ignorance of CVS.

=20

How do others avoid this problem?

=20

Any advice or suggestions would be appreciated.

=20

Thanks,

=20

Chuck

=20


------_=_NextPart_001_01C4C2A9.B5450D10--

From lucene-user-return-11020-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 20:31:35 2004
Return-Path: <lucene-user-return-11020-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37842 invoked from network); 4 Nov 2004 20:31:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 20:31:35 -0000
Received: (qmail 15204 invoked by uid 500); 4 Nov 2004 20:31:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15160 invoked by uid 500); 4 Nov 2004 20:31:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15146 invoked by uid 99); 4 Nov 2004 20:31:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of giulio.cesare@gmail.com designates 64.233.184.197 as permitted sender)
Received: from [64.233.184.197] (HELO wproxy.gmail.com) (64.233.184.197)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 12:31:25 -0800
Received: by wproxy.gmail.com with SMTP id 66so137470wri
        for <lucene-user@jakarta.apache.org>; Thu, 04 Nov 2004 12:31:22 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=usJ462rtJ0P/pthKW5Va6Sfxq64NitO8h5mIJrZREVdwQAJqTRkYo3SCDAnnZ1SElVt0iHn82Y/lKoeAwDW9+SOERLx33qyMbEGHtdrhoNHqz/xs0etQnZCHrjgddwdKjKD8dpV2/nQScVZRxcJimMj1UVdryJO78elwpuEzQ98=
Received: by 10.54.30.8 with SMTP id d8mr246981wrd;
        Thu, 04 Nov 2004 12:31:22 -0800 (PST)
Received: by 10.54.24.26 with HTTP; Thu, 4 Nov 2004 12:31:22 -0800 (PST)
Message-ID: <ff737ac30411041231b2d728c@mail.gmail.com>
Date: Thu, 4 Nov 2004 21:31:22 +0100
From: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
Reply-To: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>, 
	javier muguruza <jmuguruza@gmail.com>
Subject: Re: one huge index or many small ones?
In-Reply-To: <f071061b04110411083779d34c@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <f071061b04110408005cdbafbd@mail.gmail.com>
	 <ff737ac3041104082673d3e96@mail.gmail.com>
	 <f071061b0411040903401eb574@mail.gmail.com>
	 <dd2db8d004110409281c52da5@mail.gmail.com>
	 <f071061b04110411083779d34c@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Javier,


On Thu, 4 Nov 2004 20:08:15 +0100, javier muguruza <jmuguruza@gmail.com> wrote:
> Justin,
> 
> Yes, I wanted as less info as possible in the index. The body and
> atachemntes will be stored outside lucene. As I mentioned,  I only
> need to deal with the body/attachments contents with lucene, from, to,
> subject, dates etc are deal with before.

You probably can get away with this solution as well, but I would like
to suggest you to test Lucene performance before starting optimizing.

If your query on the text of the body/attachments are not huge (my
user end up with rewritten query whose lengths are up to
600KBytes!!!!!!), Lucene will be probably able to return your the
right result much faster than looking in different places for the same
query.

Don't be afraid of the number of documents either; not before testing
on some real data. You could easily find that a simpler architecture
can perform fast enough, and be much more easy to set up and tune.

[...]


Giulio Cesare

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11021-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 20:41:07 2004
Return-Path: <lucene-user-return-11021-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 44445 invoked from network); 4 Nov 2004 20:41:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 20:41:07 -0000
Received: (qmail 26165 invoked by uid 500); 4 Nov 2004 20:40:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26142 invoked by uid 500); 4 Nov 2004 20:40:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26128 invoked by uid 99); 4 Nov 2004 20:40:59 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=HTML_90_100,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.235.234.121] (HELO taurus.lunarpages.com) (64.235.234.121)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 12:40:58 -0800
Received: from adsl-68-121-27-153.dsl.irvnca.pacbell.net ([68.121.27.153] helo=ramonlaptop)
	by taurus.lunarpages.com with esmtpa (Exim 4.43)
	id 1CPoRm-0004VJ-Sj
	for lucene-user@jakarta.apache.org; Thu, 04 Nov 2004 12:43:10 -0800
From: "Ramon Aseniero" <ramon.aseniero@tryarc.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: Highlighting in Lucene
Date: Thu, 4 Nov 2004 12:40:19 -0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0038_01C4C26B.7AD95850"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcTCrn9yVROJnkIuRpS62206MI3a8w==
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - taurus.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - tryarc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0038_01C4C26B.7AD95850
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi All,

 

I would like to know if Lucene support highlighting on the searched text?

 

Thanks in advance.

 

Thanks,

Ramon Aseniero


------=_NextPart_000_0038_01C4C26B.7AD95850--


From lucene-user-return-11022-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 20:45:23 2004
Return-Path: <lucene-user-return-11022-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47321 invoked from network); 4 Nov 2004 20:45:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 20:45:23 -0000
Received: (qmail 34526 invoked by uid 500); 4 Nov 2004 20:45:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34473 invoked by uid 500); 4 Nov 2004 20:45:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34460 invoked by uid 99); 4 Nov 2004 20:45:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 12:45:12 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Highlighting in Lucene
Date: Thu, 4 Nov 2004 15:45:10 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA5BFC04@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Highlighting in Lucene
Thread-Index: AcTCrn9yVROJnkIuRpS62206MI3a8wAAKKbA
From: "Will Allen" <wallen@Cyveillance.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

There is a highlighting tool in the sandbox (3/4 of the way down):

http://jakarta.apache.org/lucene/docs/lucene-sandbox/

-----Original Message-----
From: Ramon Aseniero [mailto:ramon.aseniero@tryarc.com]
Sent: Thursday, November 04, 2004 3:40 PM
To: 'Lucene Users List'
Subject: Highlighting in Lucene


Hi All,

=20

I would like to know if Lucene support highlighting on the searched =
text?

=20

Thanks in advance.

=20

Thanks,

Ramon Aseniero


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11023-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 20:52:12 2004
Return-Path: <lucene-user-return-11023-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50588 invoked from network); 4 Nov 2004 20:52:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 20:52:12 -0000
Received: (qmail 47586 invoked by uid 500); 4 Nov 2004 20:52:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47505 invoked by uid 500); 4 Nov 2004 20:51:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47490 invoked by uid 99); 4 Nov 2004 20:51:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.235.234.121] (HELO taurus.lunarpages.com) (64.235.234.121)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 12:51:57 -0800
Received: from adsl-68-121-27-153.dsl.irvnca.pacbell.net ([68.121.27.153] helo=ramonlaptop)
	by taurus.lunarpages.com with esmtpa (Exim 4.43)
	id 1CPocS-0006fY-Jn
	for lucene-user@jakarta.apache.org; Thu, 04 Nov 2004 12:54:08 -0800
From: "Ramon Aseniero" <ramon.aseniero@tryarc.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Highlighting in Lucene
Date: Thu, 4 Nov 2004 12:51:34 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA5BFC04@hermes.corp.cyveillance.com>
Thread-Index: AcTCrn9yVROJnkIuRpS62206MI3a8wAAKKbAAAA1lfA=
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - taurus.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - tryarc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Will,

Thanks a lot that really helps.

Thanks,
Ramon

-----Original Message-----
From: Will Allen [mailto:wallen@Cyveillance.com] 
Sent: Thursday, November 04, 2004 12:45 PM
To: Lucene Users List
Subject: RE: Highlighting in Lucene

There is a highlighting tool in the sandbox (3/4 of the way down):

http://jakarta.apache.org/lucene/docs/lucene-sandbox/

-----Original Message-----
From: Ramon Aseniero [mailto:ramon.aseniero@tryarc.com]
Sent: Thursday, November 04, 2004 3:40 PM
To: 'Lucene Users List'
Subject: Highlighting in Lucene


Hi All,

 

I would like to know if Lucene support highlighting on the searched text?

 

Thanks in advance.

 

Thanks,

Ramon Aseniero


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11024-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 21:54:42 2004
Return-Path: <lucene-user-return-11024-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78991 invoked from network); 4 Nov 2004 21:54:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 21:54:41 -0000
Received: (qmail 49946 invoked by uid 500); 4 Nov 2004 21:54:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49885 invoked by uid 500); 4 Nov 2004 21:54:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49872 invoked by uid 99); 4 Nov 2004 21:54:33 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.238] (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 04 Nov 2004 13:54:30 -0800
Received: (qmail 23888 invoked by uid 60001); 4 Nov 2004 21:54:29 -0000
Message-ID: <20041104215429.23886.qmail@web12701.mail.yahoo.com>
Received: from [216.194.17.194] by web12701.mail.yahoo.com via HTTP; Thu, 04 Nov 2004 13:54:29 PST
Date: Thu, 4 Nov 2004 13:54:29 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Is there an easy way to have indexing ignore a CVS subdirectory in the index directory?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <E3381E0825F1954D953A4E347017BB1C02789A55@reh001-1.REX001.ExchangeByRegister.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hm, as far as I know, a CVS sub-directory in an index directory should
not bother Lucene.  As a matter of fact, I tested this (I used a file,
not a directory) for Lucene in Action.  What error are you getting?

I know there is -I CVS option for ignoring files; perhaps it works with
directories, too.

Otis


--- Chuck Williams <chuck@manawiz.com> wrote:

> I have a Tomcat web module being developed with Netbeans 4.0 ide
> using
> CVS.  One CVS repository holds the sources of my various web files in
> a
> directory structure that directly parallels the standard Tomcat
> webapp
> directory structure.  This is well supported in a fully automated way
> within Netbeans.  I have my search index directory as a subdirectory
> of
> WEB-INF, which seemed the natural place to put it.  The index files
> themselves are not in the repository.  I want to be able to do CVS
> Update for the web module directory tree as a whole.  However, this
> places a CVS subdirectory within the index directory, which in turn
> causes Lucene indexing to blow up the next time I run it since this
> is
> an unexpected entry in the index directory.  To make things works, to
> work around the problem I both need to delete the CVS subdirectory
> and
> find and delete the pointers to it in the Entries file and Netbeans
> cache file within the CVS subdirectory of the parent directory.  This
> is
> annoying to say the least.
> 
>  
> 
> I've asked the Netbeans users if there is a way to avoid creation of
> the
> index's CVS subdirectory, but the same thing happened using WinCVS
> and I
> so I expect this is not a Netbeans issue.  It could be my relative
> ignorance of CVS.
> 
>  
> 
> How do others avoid this problem?
> 
>  
> 
> Any advice or suggestions would be appreciated.
> 
>  
> 
> Thanks,
> 
>  
> 
> Chuck
> 
>  
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11025-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 22:26:18 2004
Return-Path: <lucene-user-return-11025-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 93779 invoked from network); 4 Nov 2004 22:26:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 22:26:18 -0000
Received: (qmail 599 invoked by uid 500); 4 Nov 2004 22:25:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 519 invoked by uid 500); 4 Nov 2004 22:25:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 480 invoked by uid 99); 4 Nov 2004 22:25:56 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [217.12.11.36] (HELO smtp005.mail.ukl.yahoo.com) (217.12.11.36)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 04 Nov 2004 14:25:54 -0800
Received: from unknown (HELO ?10.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp005.mail.ukl.yahoo.com with SMTP; 4 Nov 2004 22:25:52 -0000
Message-ID: <418AAC49.3040103@yahoo.co.uk>
Date: Thu, 04 Nov 2004 22:25:13 +0000
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Faster highlighting with TermPositionVectors (update)
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Having revisited the original TokenSources code it looks like one of the 
optimisations I put in will fail if fields are stored with 
non-contiguous position info (ie the analyzer has messed with token 
position numbers so they overlap or have gaps like ..3,3,7,8,9,..).
I've now made the TokenSources code safe by default by assuming token 
position values are not contiguous and should not be used for sorting.
For those who know what they are doing  I have added a parameter to one 
of the methods to turn the optimisation back on if they can guarantee 
positions are contigous.

New code is at the same place:
http://www.inperspective.com/lucene/TokenSources.java

Cheers
Mark



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11026-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 04 22:41:58 2004
Return-Path: <lucene-user-return-11026-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 688 invoked from network); 4 Nov 2004 22:41:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 4 Nov 2004 22:41:58 -0000
Received: (qmail 27158 invoked by uid 500); 4 Nov 2004 22:41:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26961 invoked by uid 500); 4 Nov 2004 22:41:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26947 invoked by uid 99); 4 Nov 2004 22:41:49 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 14:41:49 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Is there an easy way to have indexing ignore a CVS subdirectory in the index directory?
Date: Thu, 4 Nov 2004 14:36:45 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C02789B47@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Is there an easy way to have indexing ignore a CVS subdirectory in the index directory?
Thread-Index: AcTCuC9nB1WTaCVmTM2BnwRgtC7BNAABZJuw
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis, thanks for looking at this.  The stack trace of the exception is
below.  I looked at the code.  It wants to delete every file in the
index directory, but fails to delete the CVS subdirectory entry
(presumably because it is marked read-only; the specific exception is
swallowed).  Even if it could delete the CVS subdirectory, this would
just cause another problem with Netbeans/CVS, since it wouldn't know how
to fix up the pointers in the parent CVS subdirectory.  Is there a
change I could make that would cause it to safely leave this alone?

This problem only arises on a full index (incremental =3D=3D false <=3D>
create =3D=3D true).  Incremental indexes work fine in my app.

Chuck

java.io.IOException: Cannot delete CVS
    at org.apache.lucene.store.FSDirectory.create(FSDirectory.java:144)
    at org.apache.lucene.store.FSDirectory.<init>(FSDirectory.java:128)
    at
org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:102)
    at
org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:83)
    at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:173)
    at [my app]...

  > -----Original Message-----
  > From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
  > Sent: Thursday, November 04, 2004 1:54 PM
  > To: Lucene Users List
  > Subject: Re: Is there an easy way to have indexing ignore a CVS
  > subdirectory in the index directory?
  >=20
  > Hm, as far as I know, a CVS sub-directory in an index directory
should
  > not bother Lucene.  As a matter of fact, I tested this (I used a
file,
  > not a directory) for Lucene in Action.  What error are you getting?
  >=20
  > I know there is -I CVS option for ignoring files; perhaps it works
with
  > directories, too.
  >=20
  > Otis
  >=20
  >=20
  > --- Chuck Williams <chuck@manawiz.com> wrote:
  >=20
  > > I have a Tomcat web module being developed with Netbeans 4.0 ide
  > > using
  > > CVS.  One CVS repository holds the sources of my various web files
in
  > > a
  > > directory structure that directly parallels the standard Tomcat
  > > webapp
  > > directory structure.  This is well supported in a fully automated
way
  > > within Netbeans.  I have my search index directory as a
subdirectory
  > > of
  > > WEB-INF, which seemed the natural place to put it.  The index
files
  > > themselves are not in the repository.  I want to be able to do CVS
  > > Update for the web module directory tree as a whole.  However,
this
  > > places a CVS subdirectory within the index directory, which in
turn
  > > causes Lucene indexing to blow up the next time I run it since
this
  > > is
  > > an unexpected entry in the index directory.  To make things works,
to
  > > work around the problem I both need to delete the CVS subdirectory
  > > and
  > > find and delete the pointers to it in the Entries file and
Netbeans
  > > cache file within the CVS subdirectory of the parent directory.
This
  > > is
  > > annoying to say the least.
  > >
  > >
  > >
  > > I've asked the Netbeans users if there is a way to avoid creation
of
  > > the
  > > index's CVS subdirectory, but the same thing happened using WinCVS
  > > and I
  > > so I expect this is not a Netbeans issue.  It could be my relative
  > > ignorance of CVS.
  > >
  > >
  > >
  > > How do others avoid this problem?
  > >
  > >
  > >
  > > Any advice or suggestions would be appreciated.
  > >
  > >
  > >
  > > Thanks,
  > >
  > >
  > >
  > > Chuck
  > >
  > >
  > >
  > >
  >=20
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11027-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 02:13:42 2004
Return-Path: <lucene-user-return-11027-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77804 invoked from network); 5 Nov 2004 02:13:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 02:13:42 -0000
Received: (qmail 77241 invoked by uid 500); 5 Nov 2004 02:13:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77141 invoked by uid 500); 5 Nov 2004 02:13:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77113 invoked by uid 99); 5 Nov 2004 02:13:19 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [68.142.225.162] (HELO web54406.mail.yahoo.com) (68.142.225.162)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 04 Nov 2004 18:13:17 -0800
Message-ID: <20041105021246.88906.qmail@web54406.mail.yahoo.com>
Received: from [64.170.159.34] by web54406.mail.yahoo.com via HTTP; Thu, 04 Nov 2004 18:12:45 PST
Date: Thu, 4 Nov 2004 18:12:45 -0800 (PST)
From: Yousef Ourabi <yousef_ourabi@yahoo.com>
Subject: PorterStemmer /  Levenshtein Distance
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20041104215429.23886.qmail@web12701.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hey,
On the site It says Lucence Uses Levenshtein distance
algorithm for fuzzy matching, where is this in the
source code? Also I would like to use the porter
stemming algorithm for somethign else, Are there any
documents on the Lucence implementation of Porter
Stemmer.

Best,
Yousef

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11028-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 02:21:41 2004
Return-Path: <lucene-user-return-11028-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88818 invoked from network); 5 Nov 2004 02:21:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 02:21:41 -0000
Received: (qmail 82630 invoked by uid 500); 5 Nov 2004 02:21:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82595 invoked by uid 500); 5 Nov 2004 02:21:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82576 invoked by uid 99); 5 Nov 2004 02:21:28 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=HTML_90_100,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.235.234.121] (HELO taurus.lunarpages.com) (64.235.234.121)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 18:21:26 -0800
Received: from adsl-68-121-27-153.dsl.irvnca.pacbell.net ([68.121.27.153] helo=ramonlaptop)
	by taurus.lunarpages.com with esmtpa (Exim 4.43)
	id 1CPtlK-0004Od-MS
	for lucene-user@jakarta.apache.org; Thu, 04 Nov 2004 18:23:40 -0800
From: "Ramon Aseniero" <ramon.aseniero@tryarc.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: Sorting in Lucene.
Date: Thu, 4 Nov 2004 18:21:14 -0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0069_01C4C29B.17250CC0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcTC3h++s9y355c7QIupQ+DJxM0esw==
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - taurus.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - tryarc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0069_01C4C29B.17250CC0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi All,

 

Does Lucene supports sorting on the search results?

 

Thanks in advance.

Ramon


------=_NextPart_000_0069_01C4C29B.17250CC0--


From lucene-user-return-11029-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 05:49:12 2004
Return-Path: <lucene-user-return-11029-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66155 invoked from network); 5 Nov 2004 05:49:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 05:49:12 -0000
Received: (qmail 90869 invoked by uid 500); 5 Nov 2004 05:49:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90845 invoked by uid 500); 5 Nov 2004 05:49:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90831 invoked by uid 99); 5 Nov 2004 05:49:03 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 21:49:02 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Sorting in Lucene.
Date: Thu, 4 Nov 2004 21:43:57 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C0282922B@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sorting in Lucene.
Thread-Index: AcTC3h++s9y355c7QIupQ+DJxM0eswAHHFXg
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yes, by one or multiple criteria.

Chuck

  > -----Original Message-----
  > From: Ramon Aseniero [mailto:ramon.aseniero@tryarc.com]
  > Sent: Thursday, November 04, 2004 6:21 PM
  > To: 'Lucene Users List'
  > Subject: Sorting in Lucene.
  >=20
  > Hi All,
  >=20
  >=20
  >=20
  > Does Lucene supports sorting on the search results?
  >=20
  >=20
  >=20
  > Thanks in advance.
  >=20
  > Ramon


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11030-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 05:53:04 2004
Return-Path: <lucene-user-return-11030-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67491 invoked from network); 5 Nov 2004 05:53:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 05:53:03 -0000
Received: (qmail 97096 invoked by uid 500); 5 Nov 2004 05:52:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97069 invoked by uid 500); 5 Nov 2004 05:52:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97056 invoked by uid 99); 5 Nov 2004 05:52:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.235.234.121] (HELO taurus.lunarpages.com) (64.235.234.121)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 21:52:53 -0800
Received: from adsl-68-121-27-153.dsl.irvnca.pacbell.net ([68.121.27.153] helo=ramonlaptop)
	by taurus.lunarpages.com with esmtpa (Exim 4.43)
	id 1CPx3z-0000SV-Gq
	for lucene-user@jakarta.apache.org; Thu, 04 Nov 2004 21:55:09 -0800
From: "Ramon Aseniero" <ramon.aseniero@tryarc.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Sorting in Lucene.
Date: Thu, 4 Nov 2004 21:52:40 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <E3381E0825F1954D953A4E347017BB1C0282922B@reh001-1.REX001.ExchangeByRegister.com>
Thread-Index: AcTC3h++s9y355c7QIupQ+DJxM0eswAHHFXgAAA9v+A=
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - taurus.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - tryarc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Chuck,

Can you please point me to some articles or FAQ about Sorting in Lucene?

Thanks a lot for your reply.

Thanks,
Ramon

-----Original Message-----
From: Chuck Williams [mailto:chuck@manawiz.com] 
Sent: Thursday, November 04, 2004 9:44 PM
To: Lucene Users List
Subject: RE: Sorting in Lucene.

Yes, by one or multiple criteria.

Chuck

  > -----Original Message-----
  > From: Ramon Aseniero [mailto:ramon.aseniero@tryarc.com]
  > Sent: Thursday, November 04, 2004 6:21 PM
  > To: 'Lucene Users List'
  > Subject: Sorting in Lucene.
  > 
  > Hi All,
  > 
  > 
  > 
  > Does Lucene supports sorting on the search results?
  > 
  > 
  > 
  > Thanks in advance.
  > 
  > Ramon


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11031-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 06:09:51 2004
Return-Path: <lucene-user-return-11031-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76764 invoked from network); 5 Nov 2004 06:09:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 06:09:51 -0000
Received: (qmail 20988 invoked by uid 500); 5 Nov 2004 06:09:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 20961 invoked by uid 500); 5 Nov 2004 06:09:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 20947 invoked by uid 99); 5 Nov 2004 06:09:41 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 22:09:41 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Sorting in Lucene.
Date: Thu, 4 Nov 2004 22:04:36 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C0282922F@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sorting in Lucene.
Thread-Index: AcTC3h++s9y355c7QIupQ+DJxM0eswAHHFXgAAA9v+AAAC6woA==
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ramon,

I'm not sure where a guide or tutorial might be, but you should be able
to see how to do it from the javadoc.  Look at classes Sort, SortField,
SortComparator.  I've also included a recent message from this group
below concerning sorting with multiple fields.  FYI, a number of people
have wanted to first sort by score and secondarily by another field.
This is tricky since scores are frequently different in low-order
decimal positions.

Good luck,

Chuck

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Thursday, November 04, 2004 1:33 AM
To: Lucene Users List
Subject: Re: sorting by score and an additional field

On Nov 3, 2004, at 9:52 PM, Chris Fraschetti wrote:
> Has anyone had any luck using lucene's built in sort functions to sort
> first by the lucene hit score and secondarily by a Field in each
> document indexed as Keyword and in integer form?

I get multiple sort fields to work, here's two examples:

         new Sort(new SortField[]{
           new SortField("category"),
           SortField.FIELD_SCORE,
           new SortField("pubmonth", SortField.INT, true)
         });

        new Sort(new SortField[] {SortField.FIELD_SCORE, new=20
SortField("category")})

Both of these, on a tiny dataset of only 10 documents, works exactly as=20
expected.

> I can only get it to sort by one or the other... but when it does one,
> it does sort correctly, but together in {score, custom_field} only the
> first sort seems to apply.
>
> Any ideas?

Are you using Lucene 1.4.2?  How did you index your integer field?  Are=20
you simply using the .toString() of an Integer?  Or zero padding the=20
field somehow?  You can use the .toString method, but you have to be=20
sure that the sorting code does the right parsing of it - so you might=20
need to specify SortField.INT as its type.  It will do automatic=20
detection if the type is not specified, but that assumes that the first=20
document it encounters parses properly, otherwise it will fall back to=20
using a String sort.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org





  > -----Original Message-----
  > From: Ramon Aseniero [mailto:ramon.aseniero@tryarc.com]
  > Sent: Thursday, November 04, 2004 9:53 PM
  > To: 'Lucene Users List'
  > Subject: RE: Sorting in Lucene.
  >=20
  > Hi Chuck,
  >=20
  > Can you please point me to some articles or FAQ about Sorting in
Lucene?
  >=20
  > Thanks a lot for your reply.
  >=20
  > Thanks,
  > Ramon
  >=20
  > -----Original Message-----
  > From: Chuck Williams [mailto:chuck@manawiz.com]
  > Sent: Thursday, November 04, 2004 9:44 PM
  > To: Lucene Users List
  > Subject: RE: Sorting in Lucene.
  >=20
  > Yes, by one or multiple criteria.
  >=20
  > Chuck
  >=20
  >   > -----Original Message-----
  >   > From: Ramon Aseniero [mailto:ramon.aseniero@tryarc.com]
  >   > Sent: Thursday, November 04, 2004 6:21 PM
  >   > To: 'Lucene Users List'
  >   > Subject: Sorting in Lucene.
  >   >
  >   > Hi All,
  >   >
  >   >
  >   >
  >   > Does Lucene supports sorting on the search results?
  >   >
  >   >
  >   >
  >   > Thanks in advance.
  >   >
  >   > Ramon
  >=20
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
  >=20
  >=20
  >=20
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11032-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 07:07:15 2004
Return-Path: <lucene-user-return-11032-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99056 invoked from network); 5 Nov 2004 07:07:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 07:07:14 -0000
Received: (qmail 80752 invoked by uid 500); 5 Nov 2004 07:07:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 80732 invoked by uid 500); 5 Nov 2004 07:07:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 80716 invoked by uid 99); 5 Nov 2004 07:07:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.235.234.121] (HELO taurus.lunarpages.com) (64.235.234.121)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 04 Nov 2004 23:07:02 -0800
Received: from adsl-68-121-27-153.dsl.irvnca.pacbell.net ([68.121.27.153] helo=ramonlaptop)
	by taurus.lunarpages.com with esmtpa (Exim 4.43)
	id 1CPyDj-0002Zy-H6
	for lucene-user@jakarta.apache.org; Thu, 04 Nov 2004 23:09:18 -0800
From: "Ramon Aseniero" <ramon.aseniero@tryarc.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Sorting in Lucene.
Date: Thu, 4 Nov 2004 23:06:41 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <E3381E0825F1954D953A4E347017BB1C0282922F@reh001-1.REX001.ExchangeByRegister.com>
Thread-Index: AcTC3h++s9y355c7QIupQ+DJxM0eswAHHFXgAAA9v+AAAC6woAACa/Rg
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - taurus.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - tryarc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi chuck,

Thanks a lot this is really helpful.

Thanks,
Ramon

-----Original Message-----
From: Chuck Williams [mailto:chuck@manawiz.com] 
Sent: Thursday, November 04, 2004 10:05 PM
To: Lucene Users List
Subject: RE: Sorting in Lucene.

Ramon,

I'm not sure where a guide or tutorial might be, but you should be able
to see how to do it from the javadoc.  Look at classes Sort, SortField,
SortComparator.  I've also included a recent message from this group
below concerning sorting with multiple fields.  FYI, a number of people
have wanted to first sort by score and secondarily by another field.
This is tricky since scores are frequently different in low-order
decimal positions.

Good luck,

Chuck

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Thursday, November 04, 2004 1:33 AM
To: Lucene Users List
Subject: Re: sorting by score and an additional field

On Nov 3, 2004, at 9:52 PM, Chris Fraschetti wrote:
> Has anyone had any luck using lucene's built in sort functions to sort
> first by the lucene hit score and secondarily by a Field in each
> document indexed as Keyword and in integer form?

I get multiple sort fields to work, here's two examples:

         new Sort(new SortField[]{
           new SortField("category"),
           SortField.FIELD_SCORE,
           new SortField("pubmonth", SortField.INT, true)
         });

        new Sort(new SortField[] {SortField.FIELD_SCORE, new 
SortField("category")})

Both of these, on a tiny dataset of only 10 documents, works exactly as 
expected.

> I can only get it to sort by one or the other... but when it does one,
> it does sort correctly, but together in {score, custom_field} only the
> first sort seems to apply.
>
> Any ideas?

Are you using Lucene 1.4.2?  How did you index your integer field?  Are 
you simply using the .toString() of an Integer?  Or zero padding the 
field somehow?  You can use the .toString method, but you have to be 
sure that the sorting code does the right parsing of it - so you might 
need to specify SortField.INT as its type.  It will do automatic 
detection if the type is not specified, but that assumes that the first 
document it encounters parses properly, otherwise it will fall back to 
using a String sort.

	Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org





  > -----Original Message-----
  > From: Ramon Aseniero [mailto:ramon.aseniero@tryarc.com]
  > Sent: Thursday, November 04, 2004 9:53 PM
  > To: 'Lucene Users List'
  > Subject: RE: Sorting in Lucene.
  > 
  > Hi Chuck,
  > 
  > Can you please point me to some articles or FAQ about Sorting in
Lucene?
  > 
  > Thanks a lot for your reply.
  > 
  > Thanks,
  > Ramon
  > 
  > -----Original Message-----
  > From: Chuck Williams [mailto:chuck@manawiz.com]
  > Sent: Thursday, November 04, 2004 9:44 PM
  > To: Lucene Users List
  > Subject: RE: Sorting in Lucene.
  > 
  > Yes, by one or multiple criteria.
  > 
  > Chuck
  > 
  >   > -----Original Message-----
  >   > From: Ramon Aseniero [mailto:ramon.aseniero@tryarc.com]
  >   > Sent: Thursday, November 04, 2004 6:21 PM
  >   > To: 'Lucene Users List'
  >   > Subject: Sorting in Lucene.
  >   >
  >   > Hi All,
  >   >
  >   >
  >   >
  >   > Does Lucene supports sorting on the search results?
  >   >
  >   >
  >   >
  >   > Thanks in advance.
  >   >
  >   > Ramon
  > 
  > 
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
  > 
  > 
  > 
  > 
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11033-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 07:38:07 2004
Return-Path: <lucene-user-return-11033-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9569 invoked from network); 5 Nov 2004 07:38:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 07:38:07 -0000
Received: (qmail 17376 invoked by uid 500); 5 Nov 2004 07:37:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17322 invoked by uid 500); 5 Nov 2004 07:37:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17306 invoked by uid 99); 5 Nov 2004 07:37:59 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=LINES_OF_YELLING,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 04 Nov 2004 23:37:58 -0800
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I6P4JR00.7JO for <lucene-user@jakarta.apache.org>; Fri,
          5 Nov 2004 13:22:39 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: INDEXREADER + DELETE + LUCENE1.4.1
Date: Fri, 5 Nov 2004 13:16:48 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIGEMKCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 5 (Lowest)
X-MSMail-Priority: Low
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Low
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N




Hi Guy's

Apologies............



There seems to be a bug unresolved [ Or may I be may be doing something
wrong ] in IndexReader.delete(int docNum)

Here is the Code

indexSearcher = null;
indexDirectory = null;
indexReader = null;
indexDirectory
=FSDirectory.getDirectory("/root/MERGEDINDEX/MERGER_1",false);
indexReader = IndexReader.open(indexDirectory);

IndexReader.unlock(indexDirectory);
indexSearcher = new IndexSearcher(indexReader);
query = new TermQuery(new Term(fieldName, FiledValue));
hits = indexSearcher.search(query);


if ( hits.length() > 0 ) {

for(int k=0;k<=hits.length();k++) {
PRINTDBG_.append("QUERY : " + query.toString() + "\n" +
                                    "FIELD NAME : " + fieldName + "\n" +
                                    "FIELD VALUE: " + FiledValue + "\n" +
                                    "TOTAL HITS : " + hits.length() + "\n" +
                                    "DELETING : " + k);

    indexReader.delete(k);

    }
}

indexReader.close();
indexSearcher.close();
indexDirectory.close();

System.out.printl(" Debugger : " +PRINTDBG_);
indexReader = null;
indexSearcher = null;
indexDirectory = null;

//optimization
indexDirectory = FSDirectory.getDirectory(pathMergeIndex,false);
IndexWriter writer = new IndexWriter(indexDirectory, analyzer, false);
writer.mergeFactor = mergeFactorVal_;
writer.maxMergeDocs = maxMergeDocsVal_;
writer.optimize();
writer.close();

indexDirectory = null;
writer = null;

In spite of Using a new IndexReader for every Deletion of documents and
Optimization's
The 'indexReader.delete(k)' does not seems to work

Configuration History

a) 1 MergerIndex = 1000 subIndexes [ fieldName = KeyWord Field Type]

b) O/s Windows

c) Amd Processor

e) Lucene 1.4.1

f) Jdk 1.4.2

Please Some body Suggest me For Alternates ........



      WITH WARM REGARDS
      HAVE A NICE DAY
      [ N.S.KARTHIK]




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11034-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 08:44:25 2004
Return-Path: <lucene-user-return-11034-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46373 invoked from network); 5 Nov 2004 08:44:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 08:44:25 -0000
Received: (qmail 85312 invoked by uid 500); 5 Nov 2004 08:44:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85236 invoked by uid 500); 5 Nov 2004 08:44:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85223 invoked by uid 99); 5 Nov 2004 08:44:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 00:44:14 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A12D713E200A; Fri,  5 Nov 2004 03:44:11 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id A2DD213E2005
	for <lucene-user@jakarta.apache.org>; Fri,  5 Nov 2004 03:44:01 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <20041105021246.88906.qmail@web54406.mail.yahoo.com>
References: <20041105021246.88906.qmail@web54406.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <DFB728BA-2F06-11D9-8AAD-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: PorterStemmer /  Levenshtein Distance
Date: Fri, 5 Nov 2004 03:44:15 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

For the distance algorithm, check out FuzzyQuery and its dependent code.

Within Lucene's codebase is also a PorterStemFilter.  However, we'd 
like to deprecate this in favor of the Snowball stemming code that 
currently lives in the Lucene Sandbox repository.

	Erik


On Nov 4, 2004, at 9:12 PM, Yousef Ourabi wrote:

> Hey,
> On the site It says Lucence Uses Levenshtein distance
> algorithm for fuzzy matching, where is this in the
> source code? Also I would like to use the porter
> stemming algorithm for somethign else, Are there any
> documents on the Lucence implementation of Porter
> Stemmer.
>
> Best,
> Yousef
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11035-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 08:46:50 2004
Return-Path: <lucene-user-return-11035-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47620 invoked from network); 5 Nov 2004 08:46:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 08:46:50 -0000
Received: (qmail 90028 invoked by uid 500); 5 Nov 2004 08:46:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90006 invoked by uid 500); 5 Nov 2004 08:46:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 89991 invoked by uid 99); 5 Nov 2004 08:46:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 00:46:35 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4B03213E2005; Fri,  5 Nov 2004 03:46:32 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id D2F0513E2005
	for <lucene-user@jakarta.apache.org>; Fri,  5 Nov 2004 03:46:29 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <20041105070711.C115213E200A@ehatchersolutions.com>
References: <20041105070711.C115213E200A@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <3A876C37-2F07-11D9-8AAD-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Sorting in Lucene.
Date: Fri, 5 Nov 2004 03:46:47 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Also, <more-marketing>I covered sorting pretty extensively in the 
upcoming Lucene in Action book</more-marketing>.  The source code for 
the book will be freely available from http://www.manning.com/hatcher2 
in the near future.  The electronic book should be available in the 
next few weeks or less and the physical book will start printing very 
shortly also.

	Erik


On Nov 5, 2004, at 2:06 AM, Ramon Aseniero wrote:

> Hi chuck,
>
> Thanks a lot this is really helpful.
>
> Thanks,
> Ramon
>
> -----Original Message-----
> From: Chuck Williams [mailto:chuck@manawiz.com]
> Sent: Thursday, November 04, 2004 10:05 PM
> To: Lucene Users List
> Subject: RE: Sorting in Lucene.
>
> Ramon,
>
> I'm not sure where a guide or tutorial might be, but you should be able
> to see how to do it from the javadoc.  Look at classes Sort, SortField,
> SortComparator.  I've also included a recent message from this group
> below concerning sorting with multiple fields.  FYI, a number of people
> have wanted to first sort by score and secondarily by another field.
> This is tricky since scores are frequently different in low-order
> decimal positions.
>
> Good luck,
>
> Chuck
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Thursday, November 04, 2004 1:33 AM
> To: Lucene Users List
> Subject: Re: sorting by score and an additional field
>
> On Nov 3, 2004, at 9:52 PM, Chris Fraschetti wrote:
>> Has anyone had any luck using lucene's built in sort functions to sort
>> first by the lucene hit score and secondarily by a Field in each
>> document indexed as Keyword and in integer form?
>
> I get multiple sort fields to work, here's two examples:
>
>          new Sort(new SortField[]{
>            new SortField("category"),
>            SortField.FIELD_SCORE,
>            new SortField("pubmonth", SortField.INT, true)
>          });
>
>         new Sort(new SortField[] {SortField.FIELD_SCORE, new
> SortField("category")})
>
> Both of these, on a tiny dataset of only 10 documents, works exactly as
> expected.
>
>> I can only get it to sort by one or the other... but when it does one,
>> it does sort correctly, but together in {score, custom_field} only the
>> first sort seems to apply.
>>
>> Any ideas?
>
> Are you using Lucene 1.4.2?  How did you index your integer field?  Are
> you simply using the .toString() of an Integer?  Or zero padding the
> field somehow?  You can use the .toString method, but you have to be
> sure that the sorting code does the right parsing of it - so you might
> need to specify SortField.INT as its type.  It will do automatic
> detection if the type is not specified, but that assumes that the first
> document it encounters parses properly, otherwise it will fall back to
> using a String sort.
>
> 	Erik
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
>
>> -----Original Message-----
>> From: Ramon Aseniero [mailto:ramon.aseniero@tryarc.com]
>> Sent: Thursday, November 04, 2004 9:53 PM
>> To: 'Lucene Users List'
>> Subject: RE: Sorting in Lucene.
>>
>> Hi Chuck,
>>
>> Can you please point me to some articles or FAQ about Sorting in
> Lucene?
>>
>> Thanks a lot for your reply.
>>
>> Thanks,
>> Ramon
>>
>> -----Original Message-----
>> From: Chuck Williams [mailto:chuck@manawiz.com]
>> Sent: Thursday, November 04, 2004 9:44 PM
>> To: Lucene Users List
>> Subject: RE: Sorting in Lucene.
>>
>> Yes, by one or multiple criteria.
>>
>> Chuck
>>
>>> -----Original Message-----
>>> From: Ramon Aseniero [mailto:ramon.aseniero@tryarc.com]
>>> Sent: Thursday, November 04, 2004 6:21 PM
>>> To: 'Lucene Users List'
>>> Subject: Sorting in Lucene.
>>>
>>> Hi All,
>>>
>>>
>>>
>>> Does Lucene supports sorting on the search results?
>>>
>>>
>>>
>>> Thanks in advance.
>>>
>>> Ramon
>>
>>
>>
> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>
>>
>>
> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11036-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 09:22:13 2004
Return-Path: <lucene-user-return-11036-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64687 invoked from network); 5 Nov 2004 09:22:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 09:22:13 -0000
Received: (qmail 27694 invoked by uid 500); 5 Nov 2004 09:21:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27599 invoked by uid 500); 5 Nov 2004 09:21:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27556 invoked by uid 99); 5 Nov 2004 09:21:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [212.159.14.213] (HELO ptb-relay02.plus.net) (212.159.14.213)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 01:21:50 -0800
Received: from [80.229.194.52] (helo=joseph)
	 by ptb-relay02.plus.net with smtp (Exim) id 1CQ0Hu-0002dp-Up
	for lucene-user@jakarta.apache.org; Fri, 05 Nov 2004 09:21:43 +0000
Message-ID: <040a01c4c318$60643d70$34c2e550@joseph>
From: "Pete Lewis" <pete@uptima.co.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041105021246.88906.qmail@web54406.mail.yahoo.com>
Subject: Re: PorterStemmer /  Levenshtein Distance
Date: Fri, 5 Nov 2004 09:18:13 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Yousef

If you want to use it for something else then go direct for the Snowball
stemmers, for details go to the site:

http://snowball.tartarus.org/

Cheers

Pete

----- Original Message ----- 
From: "Yousef Ourabi" <yousef_ourabi@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Friday, November 05, 2004 2:12 AM
Subject: PorterStemmer / Levenshtein Distance


> Hey,
> On the site It says Lucence Uses Levenshtein distance
> algorithm for fuzzy matching, where is this in the
> source code? Also I would like to use the porter
> stemming algorithm for somethign else, Are there any
> documents on the Lucence implementation of Porter
> Stemmer.
>
> Best,
> Yousef
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11037-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 09:32:33 2004
Return-Path: <lucene-user-return-11037-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68580 invoked from network); 5 Nov 2004 09:32:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 09:32:33 -0000
Received: (qmail 44344 invoked by uid 500); 5 Nov 2004 09:32:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44228 invoked by uid 500); 5 Nov 2004 09:32:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44214 invoked by uid 99); 5 Nov 2004 09:32:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 01:32:19 -0800
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 5 Nov 2004 10:32:14 +0100
Message-ID: <418B489D.3090907@ifit.uni-klu.ac.at>
Date: Fri, 05 Nov 2004 10:32:13 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: one huge index or many small ones?
References: <f071061b04110408005cdbafbd@mail.gmail.com>	 <ff737ac3041104082673d3e96@mail.gmail.com>	 <f071061b0411040903401eb574@mail.gmail.com>	 <418A6E91.2060103@ifit.uni-klu.ac.at> <f071061b0411041109bf72ad1@mail.gmail.com>
In-Reply-To: <f071061b0411041109bf72ad1@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 05 Nov 2004 09:32:14.0278 (UTC) FILETIME=[5569CE60:01C4C31A]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

javier muguruza wrote:

>Sergiu,
>
>A month could have tens of millions of emails in the worst case, but
>maybe I could discard such bad assumption for our current project.
>Lets say 10000 emails per day max, that makes 300k emails a month.
>Either I would choose one index per day or per month (or week or
>whatever).
>
>Your suggestion about index per user is not valid, my searches do not
>require a user desafortunately. They can maybe say 'all email from
>department C from last week' etc. So, if I choose one index per day(or
>month) I already know that I will have to search in many indexes
>depending on the timeframe (the time frame is the only required value
>for the search)
>
>thanks for the suggestions!
>  
>
If you have time frame and department constraints,  and this repartition 
will result in a 10-30 k emails, probably it will
be a good Idea to create 1 index /dep/month.

Anyway .. changing the structure of the index is no problem in your case 
since you display the infromation from external sources
(database, filesystem...). 
My advice is to create  a function that will build/rebuild the indexes 
for the biging, work with that indexing, test if it fulfils your 
requirements,
and then you can refactor your code in the future. So ... chose one 
solution and implement the first prototype, and keep in mind that your
information is managed by the database, and lucene is just your search 
module.

 Sergiu

>
>On Thu, 04 Nov 2004 19:01:53 +0100, Sergiu Gordea
><gsergiu@ifit.uni-klu.ac.at> wrote:
>  
>
>>javier muguruza wrote:
>>
>>Hi Javier,
>>
>>I think the your optimization should take care of the response time of
>>search queries. I asume that this is the
>>variable  you need to optimize. Probably it will be a good thing to read
>>first the lucene benchmarks:
>>http://jakarta.apache.org/lucene/docs/benchmarks.html.
>><http://jakarta.apache.org/lucene/docs/benchmarks.html>
>>
>>If you have a mandatory date constraint for each of your indexes you
>>can split the index on time basis, I asume that
>>one index per month will be enough I think ... 10.000 emails I think it
>>will be fast enough if you will search in only one index afterwards.
>>But I think this is not such a good Idea?
>>
>>What about creating one index per user? If your search require a user or
>>a sender, and you can get its name from database, and apply only
>>the other constrains on an index dedicated to that user .. I think the
>>lucene search will be much more faster.
>>
>>Also the database search will be fast .. I don'T think you will have
>>more then 1.000-10.000 user names.
>>
>>or maybe 1 index/user/year
>>
>>or 1 index/receiver/year + 1index/sender/year
>>
>>What about this solution is it feasible for your system?
>>
>>All the best,
>>
>> Sergiu
>>
>>
>>
>>    
>>
>>>Thanks Erik and Giulio for the fast reply.
>>>
>>>I am just starting to look at lucene so forgive me if I got some ideas
>>>wrong. I understand your concerns about one index per email. But
>>>having one index only is also (I guess) out of question.
>>>
>>>I am building an email archive. Email will be kept indefinitely
>>>available for search, adding new email every day. Imagine a company
>>>with millions of emails per day (been there), keep it growing for
>>>years, adding stuff to the index while using it for searches
>>>continuously...
>>>
>>>That's why my idea is to decide on a time frame (a day, a month...an
>>>extreme would be an instant, that is a single email, my original idea)
>>>and build the index for all the email in that timeframe. After the
>>>timeframe is finished no more stuff will be ever added.
>>>
>>>Before the lucene search emails are selected based on other conditions
>>>(we store the from, to, date etc in database as well, and these
>>>conditions are enforced with a sql query first, so I would not need to
>>>enforce them in the lucene search again, also that query can be quite
>>>sophisticated and I guess would not be easyly possible to do it in
>>>lucene by itself). That first db step gives me a group of emails that
>>>maybe I have to further narrow down based on a lucene search (of body
>>>and attachment contents). Having an index for more than one emails
>>>means that after the search I would have to get only the overlaping
>>>emails from the two searches...Maybe this is better than keeping the
>>>same info I have in the db in lucene fields as well.
>>>
>>>An example: I want all the email from john.doe@something.com from Jan
>>>to Dec containing the word 'money'. I run the db query that returns a
>>>list with john's email for that period of time, then (lets assume I
>>>have one index per day) I iterate on every day, looking for emails
>>>that contain 'money', from the results returned by lucene I keep only
>>>these that are also in the first list.
>>>
>>>Does that sound better?
>>>
>>>
>>>On Thu, 4 Nov 2004 17:26:21 +0100, Giulio Cesare Solaroli
>>><giulio.cesare@gmail.com> wrote:
>>>
>>>
>>>      
>>>
>>>>Hi Javier,
>>>>
>>>>I suggest you to build a single index, with all the information you
>>>>need to find the right mail you are looking for. You than can use
>>>>Lucene alone to find you messages.
>>>>
>>>>Giulio Cesare
>>>>
>>>>
>>>>
>>>>
>>>>On Thu, 4 Nov 2004 17:00:35 +0100, javier muguruza <jmuguruza@gmail.com> wrote:
>>>>
>>>>
>>>>        
>>>>
>>>>>Hi,
>>>>>
>>>>>We are going to move from a just-in-time perl based search to using
>>>>>lucene in our project. I have to index emails (bodies and also
>>>>>attachements). I keep in the filesystem all the bodies and attachments
>>>>>for a long period of time. I have to find emails that fullfil certain
>>>>>conditions, some of the conditions are take care of at a different
>>>>>level, so in the end I have a SUBSET of emails I have to run through
>>>>>lucene.
>>>>>
>>>>>I was assuming that the best way would be to create an index for each
>>>>>email. Having an unique index for a group of emails (say a day worth
>>>>>of email) seems too coarse grained, imagine a day has 10000 emails,
>>>>>and some queries will like to look in only a handful of the
>>>>>emails...But the problem with having one index per emails is the
>>>>>massive number of emails...imagine having 100000 indexes
>>>>>
>>>>>Anyway, any idea about that? I just wanted to check wether someones
>>>>>feels I am wrong.
>>>>>
>>>>>Thanks
>>>>>
>>>>>---------------------------------------------------------------------
>>>>>
>>>>>
>>>>>          
>>>>>
>>>>        
>>>>
>>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>          
>>>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>>
>>>      
>>>
>>---------------------------------------------------------------------
>>
>>
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11038-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 09:42:51 2004
Return-Path: <lucene-user-return-11038-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72879 invoked from network); 5 Nov 2004 09:42:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 09:42:51 -0000
Received: (qmail 58273 invoked by uid 500); 5 Nov 2004 09:42:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58186 invoked by uid 500); 5 Nov 2004 09:42:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58171 invoked by uid 99); 5 Nov 2004 09:42:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 01:42:39 -0800
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 5 Nov 2004 10:42:34 +0100
Message-ID: <418B4B09.1040508@ifit.uni-klu.ac.at>
Date: Fri, 05 Nov 2004 10:42:33 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Is there an easy way to have indexing ignore a CVS subdirectory
 in the index directory?
References: <E3381E0825F1954D953A4E347017BB1C02789B47@reh001-1.REX001.ExchangeByRegister.com>
In-Reply-To: <E3381E0825F1954D953A4E347017BB1C02789B47@reh001-1.REX001.ExchangeByRegister.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 05 Nov 2004 09:42:34.0103 (UTC) FILETIME=[C6DB9870:01C4C31B]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Chuck Williams wrote:

>Otis, thanks for looking at this.  The stack trace of the exception is
>below.  I looked at the code.  It wants to delete every file in the
>index directory, but fails to delete the CVS subdirectory entry
>(presumably because it is marked read-only; the specific exception is
>swallowed).  Even if it could delete the CVS subdirectory, this would
>just cause another problem with Netbeans/CVS, since it wouldn't know how
>to fix up the pointers in the parent CVS subdirectory.  Is there a
>change I could make that would cause it to safely leave this alone?
>  
>
Why do you have the lucene index in CVS? From what I know the lucene 
index folder shouldn't contain any other folder,
just the lucene files.  I think it won't be any problem to delete CVS 
folder from lucene index and to remove the index from CVS.
If you are affraid to do that .. you can move the CVS subfolder from 
lucene index into another folder ... and restore if you have any
problems. I'm sure you will have no problem ... but this is just for 
your trust...

 Sergiu

>This problem only arises on a full index (incremental == false <=>
>create == true).  Incremental indexes work fine in my app.
>
>Chuck
>
>java.io.IOException: Cannot delete CVS
>    at org.apache.lucene.store.FSDirectory.create(FSDirectory.java:144)
>    at org.apache.lucene.store.FSDirectory.<init>(FSDirectory.java:128)
>    at
>org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:102)
>    at
>org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:83)
>    at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:173)
>    at [my app]...
>
>  > -----Original Message-----
>  > From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
>  > Sent: Thursday, November 04, 2004 1:54 PM
>  > To: Lucene Users List
>  > Subject: Re: Is there an easy way to have indexing ignore a CVS
>  > subdirectory in the index directory?
>  > 
>  > Hm, as far as I know, a CVS sub-directory in an index directory
>should
>  > not bother Lucene.  As a matter of fact, I tested this (I used a
>file,
>  > not a directory) for Lucene in Action.  What error are you getting?
>  > 
>  > I know there is -I CVS option for ignoring files; perhaps it works
>with
>  > directories, too.
>  > 
>  > Otis
>  > 
>  > 
>  > --- Chuck Williams <chuck@manawiz.com> wrote:
>  > 
>  > > I have a Tomcat web module being developed with Netbeans 4.0 ide
>  > > using
>  > > CVS.  One CVS repository holds the sources of my various web files
>in
>  > > a
>  > > directory structure that directly parallels the standard Tomcat
>  > > webapp
>  > > directory structure.  This is well supported in a fully automated
>way
>  > > within Netbeans.  I have my search index directory as a
>subdirectory
>  > > of
>  > > WEB-INF, which seemed the natural place to put it.  The index
>files
>  > > themselves are not in the repository.  I want to be able to do CVS
>  > > Update for the web module directory tree as a whole.  However,
>this
>  > > places a CVS subdirectory within the index directory, which in
>turn
>  > > causes Lucene indexing to blow up the next time I run it since
>this
>  > > is
>  > > an unexpected entry in the index directory.  To make things works,
>to
>  > > work around the problem I both need to delete the CVS subdirectory
>  > > and
>  > > find and delete the pointers to it in the Entries file and
>Netbeans
>  > > cache file within the CVS subdirectory of the parent directory.
>This
>  > > is
>  > > annoying to say the least.
>  > >
>  > >
>  > >
>  > > I've asked the Netbeans users if there is a way to avoid creation
>of
>  > > the
>  > > index's CVS subdirectory, but the same thing happened using WinCVS
>  > > and I
>  > > so I expect this is not a Netbeans issue.  It could be my relative
>  > > ignorance of CVS.
>  > >
>  > >
>  > >
>  > > How do others avoid this problem?
>  > >
>  > >
>  > >
>  > > Any advice or suggestions would be appreciated.
>  > >
>  > >
>  > >
>  > > Thanks,
>  > >
>  > >
>  > >
>  > > Chuck
>  > >
>  > >
>  > >
>  > >
>  > 
>  > 
>  >
>---------------------------------------------------------------------
>  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11039-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 14:54:16 2004
Return-Path: <lucene-user-return-11039-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23375 invoked from network); 5 Nov 2004 14:54:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 14:54:16 -0000
Received: (qmail 42449 invoked by uid 500); 5 Nov 2004 14:53:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42289 invoked by uid 500); 5 Nov 2004 14:53:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42169 invoked by uid 99); 5 Nov 2004 14:53:18 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO main.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 06:53:17 -0800
Received: from root by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1CQ5Sk-0008TA-00
	for <lucene-user@jakarta.apache.org>; Fri, 05 Nov 2004 15:53:14 +0100
Received: from adsl-65-71-252-179.dsl.rcsntx.swbell.net ([65.71.252.179])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Fri, 05 Nov 2004 15:53:14 +0100
Received: from vin by adsl-65-71-252-179.dsl.rcsntx.swbell.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Fri, 05 Nov 2004 15:53:14 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: "Vic (Vinny) Cekvenich" <vin@friendVU.com>
Subject: Re: Sorting in Lucene.
Date: Fri, 05 Nov 2004 08:45:44 -0600
Lines: 13
Message-ID: <cmg3mm$hsk$1@sea.gmane.org>
References: <20041105070711.C115213E200A@ehatchersolutions.com> <3A876C37-2F07-11D9-8AAD-000393A564E6@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: adsl-65-71-252-179.dsl.rcsntx.swbell.net
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
In-Reply-To: <3A876C37-2F07-11D9-8AAD-000393A564E6@ehatchersolutions.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
>  <more-marketing>I covered sorting pretty extensively in the 
> upcoming Lucene in Action book</more-marketing>.  The source code for 
> the book will be freely available from http://www.manning.com/hatcher2 
> in the near future.  The electronic book should be available in the next 
> few weeks or less and the physical book will start printing very shortly 
> also.
> 

I can't wait!!!! I went on site so I can sign up to be notified when it 
ships.

.V


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11040-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 16:31:11 2004
Return-Path: <lucene-user-return-11040-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76247 invoked from network); 5 Nov 2004 16:31:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 16:31:11 -0000
Received: (qmail 68105 invoked by uid 500); 5 Nov 2004 16:31:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68034 invoked by uid 500); 5 Nov 2004 16:31:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68020 invoked by uid 99); 5 Nov 2004 16:31:01 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.244] (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 05 Nov 2004 08:31:01 -0800
Received: (qmail 96621 invoked by uid 60001); 5 Nov 2004 16:31:00 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=etO+aKaO5Uz7rcXt+WyWU89WQK523+vElLfL1G4fG8cByHdjPsY/bul4rK80l3AP24H2uSOaplvnkhu6IVl/gub4AXFTbNj3j2PK55pEyFua2f0D3XHPCcKWKc75+DCZInZbSuXPGLposdfVc9Z+Su7jqvvwOPAiaZue5nMoYj0=  ;
Message-ID: <20041105163058.96617.qmail@web12707.mail.yahoo.com>
Received: from [216.194.17.194] by web12707.mail.yahoo.com via HTTP; Fri, 05 Nov 2004 08:30:58 PST
Date: Fri, 5 Nov 2004 08:30:58 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: Is there an easy way to have indexing ignore a CVS subdirectory in the index directory?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <E3381E0825F1954D953A4E347017BB1C02789B47@reh001-1.REX001.ExchangeByRegister.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Chuck,

You could modify FSDirectory to skip any directories and delete only
files (file.isDirectory() type of check).  Since FSDirectory
implementation doesn't create any sub-directories in an index dir, this
should be safe to do.  If you do this, please add a patch to Bugzilla.

Otis


--- Chuck Williams <chuck@manawiz.com> wrote:

> Otis, thanks for looking at this.  The stack trace of the exception
> is
> below.  I looked at the code.  It wants to delete every file in the
> index directory, but fails to delete the CVS subdirectory entry
> (presumably because it is marked read-only; the specific exception is
> swallowed).  Even if it could delete the CVS subdirectory, this would
> just cause another problem with Netbeans/CVS, since it wouldn't know
> how
> to fix up the pointers in the parent CVS subdirectory.  Is there a
> change I could make that would cause it to safely leave this alone?
> 
> This problem only arises on a full index (incremental == false <=>
> create == true).  Incremental indexes work fine in my app.
> 
> Chuck
> 
> java.io.IOException: Cannot delete CVS
>     at
> org.apache.lucene.store.FSDirectory.create(FSDirectory.java:144)
>     at
> org.apache.lucene.store.FSDirectory.<init>(FSDirectory.java:128)
>     at
>
org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:102)
>     at
> org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:83)
>     at
> org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:173)
>     at [my app]...
> 
>   > -----Original Message-----
>   > From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
>   > Sent: Thursday, November 04, 2004 1:54 PM
>   > To: Lucene Users List
>   > Subject: Re: Is there an easy way to have indexing ignore a CVS
>   > subdirectory in the index directory?
>   > 
>   > Hm, as far as I know, a CVS sub-directory in an index directory
> should
>   > not bother Lucene.  As a matter of fact, I tested this (I used a
> file,
>   > not a directory) for Lucene in Action.  What error are you
> getting?
>   > 
>   > I know there is -I CVS option for ignoring files; perhaps it
> works
> with
>   > directories, too.
>   > 
>   > Otis
>   > 
>   > 
>   > --- Chuck Williams <chuck@manawiz.com> wrote:
>   > 
>   > > I have a Tomcat web module being developed with Netbeans 4.0
> ide
>   > > using
>   > > CVS.  One CVS repository holds the sources of my various web
> files
> in
>   > > a
>   > > directory structure that directly parallels the standard Tomcat
>   > > webapp
>   > > directory structure.  This is well supported in a fully
> automated
> way
>   > > within Netbeans.  I have my search index directory as a
> subdirectory
>   > > of
>   > > WEB-INF, which seemed the natural place to put it.  The index
> files
>   > > themselves are not in the repository.  I want to be able to do
> CVS
>   > > Update for the web module directory tree as a whole.  However,
> this
>   > > places a CVS subdirectory within the index directory, which in
> turn
>   > > causes Lucene indexing to blow up the next time I run it since
> this
>   > > is
>   > > an unexpected entry in the index directory.  To make things
> works,
> to
>   > > work around the problem I both need to delete the CVS
> subdirectory
>   > > and
>   > > find and delete the pointers to it in the Entries file and
> Netbeans
>   > > cache file within the CVS subdirectory of the parent directory.
> This
>   > > is
>   > > annoying to say the least.
>   > >
>   > >
>   > >
>   > > I've asked the Netbeans users if there is a way to avoid
> creation
> of
>   > > the
>   > > index's CVS subdirectory, but the same thing happened using
> WinCVS
>   > > and I
>   > > so I expect this is not a Netbeans issue.  It could be my
> relative
>   > > ignorance of CVS.
>   > >
>   > >
>   > >
>   > > How do others avoid this problem?
>   > >
>   > >
>   > >
>   > > Any advice or suggestions would be appreciated.
>   > >
>   > >
>   > >
>   > > Thanks,
>   > >
>   > >
>   > >
>   > > Chuck
>   > >
>   > >
>   > >
>   > >
>   > 
>   > 
>   >
> ---------------------------------------------------------------------
>   > To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
>   > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11041-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 17:08:21 2004
Return-Path: <lucene-user-return-11041-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 93058 invoked from network); 5 Nov 2004 17:08:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 17:08:21 -0000
Received: (qmail 56310 invoked by uid 500); 5 Nov 2004 17:08:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 56231 invoked by uid 500); 5 Nov 2004 17:08:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 56190 invoked by uid 99); 5 Nov 2004 17:08:08 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 09:08:05 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Is there an easy way to have indexing ignore a CVS subdirectory in the index directory?
Date: Fri, 5 Nov 2004 09:03:00 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C028292FC@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Is there an easy way to have indexing ignore a CVS subdirectory in the index directory?
Thread-Index: AcTDGxy5bC3antD/T8WhFl+ff7Fh+wAPQCRQ
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sergiu,

The Lucene index is not in CVS -- neither the directory nor the files.
But it is a subdirectory of a directory that is in CVS, and it needs to
be structured that way due to the directory structure constraints of
Tomcat and the way Netbeans automates Tomcat app development and
deployment (which uses a development directory layout that directly
parallels the Tomcat runtime layout).  I want to be able to Update the
entire repository to make sure I've got all of the latest changes, which
means doing CVS Update on an ancestor directory of the Lucene index
directory.  Even though the index directory is not in CVS, doing the
update on the ancestor directory consistently causes CVS to insert a CVS
subdirectory into the index directory, causing the problem.  Both WinCVS
and the Netbeans CVS client have this same behavior.  I have not been
able to find any option to stop this -- do you know of one?

Also, I can't just move the CVS directory out of the index directory,
unless I'm very careful to move it back before every CVS Update.  For
similar reasons I can't just delete it either.  CVS (and Netbeans) get
very upset if there are points to this directory but it isn't there.
The pointer exists in the CVS Entries file (and another for Netbeans in
a cache file) in the CVS subdirectory of the parent directory of the
index directory.  So, I have to manually eliminate those if I want to
delete the index directory's CVS directory.  And then they come back
after the next update!  All in all very frustrating.

I'm going to try the code patch that Otis suggested.  If anybody knows
some way in CVS to avoid this problem, I'd love to hear about it.

Thanks,

Chuck

  > -----Original Message-----
  > From: sergiu gordea [mailto:gsergiu@ifit.uni-klu.ac.at]
  > Sent: Friday, November 05, 2004 1:43 AM
  > To: Lucene Users List
  > Subject: Re: Is there an easy way to have indexing ignore a CVS
  > subdirectory in the index directory?
  >=20
  > Chuck Williams wrote:
  >=20
  > >Otis, thanks for looking at this.  The stack trace of the exception
is
  > >below.  I looked at the code.  It wants to delete every file in the
  > >index directory, but fails to delete the CVS subdirectory entry
  > >(presumably because it is marked read-only; the specific exception
is
  > >swallowed).  Even if it could delete the CVS subdirectory, this
would
  > >just cause another problem with Netbeans/CVS, since it wouldn't
know
  > how
  > >to fix up the pointers in the parent CVS subdirectory.  Is there a
  > >change I could make that would cause it to safely leave this alone?
  > >
  > >
  > Why do you have the lucene index in CVS? From what I know the lucene
  > index folder shouldn't contain any other folder,
  > just the lucene files.  I think it won't be any problem to delete
CVS
  > folder from lucene index and to remove the index from CVS.
  > If you are affraid to do that .. you can move the CVS subfolder from
  > lucene index into another folder ... and restore if you have any
  > problems. I'm sure you will have no problem ... but this is just for
  > your trust...
  >=20
  >  Sergiu
  >=20
  > >This problem only arises on a full index (incremental =3D=3D false =
<=3D>
  > >create =3D=3D true).  Incremental indexes work fine in my app.
  > >
  > >Chuck
  > >
  > >java.io.IOException: Cannot delete CVS
  > >    at
org.apache.lucene.store.FSDirectory.create(FSDirectory.java:144)
  > >    at
org.apache.lucene.store.FSDirectory.<init>(FSDirectory.java:128)
  > >    at
  >
>org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:102)
  > >    at
  >
>org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:83)
  > >    at
org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:173)
  > >    at [my app]...
  > >
  > >  > -----Original Message-----
  > >  > From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
  > >  > Sent: Thursday, November 04, 2004 1:54 PM
  > >  > To: Lucene Users List
  > >  > Subject: Re: Is there an easy way to have indexing ignore a CVS
  > >  > subdirectory in the index directory?
  > >  >
  > >  > Hm, as far as I know, a CVS sub-directory in an index directory
  > >should
  > >  > not bother Lucene.  As a matter of fact, I tested this (I used
a
  > >file,
  > >  > not a directory) for Lucene in Action.  What error are you
getting?
  > >  >
  > >  > I know there is -I CVS option for ignoring files; perhaps it
works
  > >with
  > >  > directories, too.
  > >  >
  > >  > Otis
  > >  >
  > >  >
  > >  > --- Chuck Williams <chuck@manawiz.com> wrote:
  > >  >
  > >  > > I have a Tomcat web module being developed with Netbeans 4.0
ide
  > >  > > using
  > >  > > CVS.  One CVS repository holds the sources of my various web
  > files
  > >in
  > >  > > a
  > >  > > directory structure that directly parallels the standard
Tomcat
  > >  > > webapp
  > >  > > directory structure.  This is well supported in a fully
automated
  > >way
  > >  > > within Netbeans.  I have my search index directory as a
  > >subdirectory
  > >  > > of
  > >  > > WEB-INF, which seemed the natural place to put it.  The index
  > >files
  > >  > > themselves are not in the repository.  I want to be able to
do
  > CVS
  > >  > > Update for the web module directory tree as a whole.
However,
  > >this
  > >  > > places a CVS subdirectory within the index directory, which
in
  > >turn
  > >  > > causes Lucene indexing to blow up the next time I run it
since
  > >this
  > >  > > is
  > >  > > an unexpected entry in the index directory.  To make things
works,
  > >to
  > >  > > work around the problem I both need to delete the CVS
  > subdirectory
  > >  > > and
  > >  > > find and delete the pointers to it in the Entries file and
  > >Netbeans
  > >  > > cache file within the CVS subdirectory of the parent
directory.
  > >This
  > >  > > is
  > >  > > annoying to say the least.
  > >  > >
  > >  > >
  > >  > >
  > >  > > I've asked the Netbeans users if there is a way to avoid
creation
  > >of
  > >  > > the
  > >  > > index's CVS subdirectory, but the same thing happened using
  > WinCVS
  > >  > > and I
  > >  > > so I expect this is not a Netbeans issue.  It could be my
  > relative
  > >  > > ignorance of CVS.
  > >  > >
  > >  > >
  > >  > >
  > >  > > How do others avoid this problem?
  > >  > >
  > >  > >
  > >  > >
  > >  > > Any advice or suggestions would be appreciated.
  > >  > >
  > >  > >
  > >  > >
  > >  > > Thanks,
  > >  > >
  > >  > >
  > >  > >
  > >  > > Chuck
  > >  > >
  > >  > >
  > >  > >
  > >  > >
  > >  >
  > >  >
  > >  >
  >
>---------------------------------------------------------------------
  > >  > To unsubscribe, e-mail:
lucene-user-unsubscribe@jakarta.apache.org
  > >  > For additional commands, e-mail: lucene-user-
  > help@jakarta.apache.org
  > >
  > >
  >
>---------------------------------------------------------------------
  > >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > >For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
  > >
  > >
  > >
  >=20
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11042-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 17:16:41 2004
Return-Path: <lucene-user-return-11042-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96502 invoked from network); 5 Nov 2004 17:16:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 17:16:41 -0000
Received: (qmail 73339 invoked by uid 500); 5 Nov 2004 17:16:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 73158 invoked by uid 500); 5 Nov 2004 17:16:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73144 invoked by uid 99); 5 Nov 2004 17:16:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [212.74.15.68] (HELO semantico.com) (212.74.15.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 09:16:32 -0800
Received: from spampd.localdomain (localhost [127.0.0.1])
	by localhost.semantico.com (Postfix) with ESMTP id EE3333200C5
	for <lucene-user@jakarta.apache.org>; Fri,  5 Nov 2004 17:16:29 +0000 (GMT)
Received: from [192.168.1.210] (Annatto.dyn.rp.lan [192.168.1.210])
	by semantico.com (Postfix) with ESMTP id 9B1FB3200C5
	for <lucene-user@jakarta.apache.org>; Fri,  5 Nov 2004 17:16:29 +0000 (GMT)
Message-ID: <418BB56A.3040709@semantico.com>
Date: Fri, 05 Nov 2004 17:16:26 +0000
From: Peter Pimley <ppimley@semantico.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: LetterTokenizer to allow digits
References: <20041105163058.96617.qmail@web12707.mail.yahoo.com>
In-Reply-To: <20041105163058.96617.qmail@web12707.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on paprika.rp.lan
X-Spam-Status: No, hits=-100.0 required=5.0 tests=USER_IN_WHITELIST 
	autolearn=no version=2.63
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi everybody,

I have just found myself in the situation of having to subclass 
CharTokenizer with a class that tests against 
Character.isLetterOrDigit.  I would use a LetterTokenizer, but it's 
important for me to allow numbers through, as the documents I'm indexing 
often have dates such as '2000' or '1945'.

Obviously it's only a few lines to do this, but I'm sure I'm not the 
first person to have had to do it.  May I make the feature request that 
LetterTokenizer should have an 'AllowDigits' property?

Apologies if this has been discussed earlier.  I googled for the 
relevant terms and found nothing.

Thanks,
Peter Pimley,
Semantico.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11043-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 17:23:00 2004
Return-Path: <lucene-user-return-11043-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99236 invoked from network); 5 Nov 2004 17:23:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 17:23:00 -0000
Received: (qmail 86553 invoked by uid 500); 5 Nov 2004 17:22:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86512 invoked by uid 500); 5 Nov 2004 17:22:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86487 invoked by uid 99); 5 Nov 2004 17:22:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.193 as permitted sender)
Received: from [64.233.170.193] (HELO rproxy.gmail.com) (64.233.170.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 09:22:35 -0800
Received: by rproxy.gmail.com with SMTP id 40so78334rnz
        for <lucene-user@jakarta.apache.org>; Fri, 05 Nov 2004 09:22:29 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=S6kuVme18TBHZi30jS+YnNXLxpiCbmZLLuOjEom/sXstLL/0Tgzzrjd2a7a1NpCQVtKt84FycP/1QheYHO34ycCFwkHEtVSol0rV63lEmiwkNoshRoEpgkdVx+7s/82OPTVtbHkuEW4XlD58NQLQL1XwFbBosIY+ycG5YcZ88qU=
Received: by 10.38.10.71 with SMTP id 71mr264526rnj;
        Fri, 05 Nov 2004 09:22:29 -0800 (PST)
Received: by 10.38.179.13 with HTTP; Fri, 5 Nov 2004 09:22:29 -0800 (PST)
Message-ID: <dd2db8d004110509227ce00309@mail.gmail.com>
Date: Fri, 5 Nov 2004 10:22:29 -0700
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Is there an easy way to have indexing ignore a CVS subdirectory in the index directory?
In-Reply-To: <E3381E0825F1954D953A4E347017BB1C028292FC@reh001-1.REX001.ExchangeByRegister.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <E3381E0825F1954D953A4E347017BB1C028292FC@reh001-1.REX001.ExchangeByRegister.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You should exclude your lucene index from the CVS repository.  This is
the same thing you would do if you had a process that generated files
in your source tree from other files.  The generated files wouldn't
have any meaning in the repository, and can be regenerated at any
time, so you would want to exclude them.

You should be able to do this in your CVS modules file.  Check the CVS
manual for details, but I think you can just add !/path/to/exclude to
the list of paths in the module file.

for example:
modulename -a !/exclude/this/path /include/this/path


On Fri, 5 Nov 2004 09:03:00 -0800, Chuck Williams <chuck@manawiz.com> wrote:
> Sergiu,
> 
> The Lucene index is not in CVS -- neither the directory nor the files.
> But it is a subdirectory of a directory that is in CVS, and it needs to
> be structured that way due to the directory structure constraints of
> Tomcat and the way Netbeans automates Tomcat app development and
> deployment (which uses a development directory layout that directly
> parallels the Tomcat runtime layout).  I want to be able to Update the
> entire repository to make sure I've got all of the latest changes, which
> means doing CVS Update on an ancestor directory of the Lucene index
> directory.  Even though the index directory is not in CVS, doing the
> update on the ancestor directory consistently causes CVS to insert a CVS
> subdirectory into the index directory, causing the problem.  Both WinCVS
> and the Netbeans CVS client have this same behavior.  I have not been
> able to find any option to stop this -- do you know of one?
> 
> Also, I can't just move the CVS directory out of the index directory,
> unless I'm very careful to move it back before every CVS Update.  For
> similar reasons I can't just delete it either.  CVS (and Netbeans) get
> very upset if there are points to this directory but it isn't there.
> The pointer exists in the CVS Entries file (and another for Netbeans in
> a cache file) in the CVS subdirectory of the parent directory of the
> index directory.  So, I have to manually eliminate those if I want to
> delete the index directory's CVS directory.  And then they come back
> after the next update!  All in all very frustrating.
> 
> I'm going to try the code patch that Otis suggested.  If anybody knows
> some way in CVS to avoid this problem, I'd love to hear about it.
> 
> Thanks,
> 
> Chuck
> 
> 
> 
>   > -----Original Message-----
>   > From: sergiu gordea [mailto:gsergiu@ifit.uni-klu.ac.at]
>   > Sent: Friday, November 05, 2004 1:43 AM
>   > To: Lucene Users List
>   > Subject: Re: Is there an easy way to have indexing ignore a CVS
>   > subdirectory in the index directory?
>   >
>   > Chuck Williams wrote:
>   >
>   > >Otis, thanks for looking at this.  The stack trace of the exception
> is
>   > >below.  I looked at the code.  It wants to delete every file in the
>   > >index directory, but fails to delete the CVS subdirectory entry
>   > >(presumably because it is marked read-only; the specific exception
> is
>   > >swallowed).  Even if it could delete the CVS subdirectory, this
> would
>   > >just cause another problem with Netbeans/CVS, since it wouldn't
> know
>   > how
>   > >to fix up the pointers in the parent CVS subdirectory.  Is there a
>   > >change I could make that would cause it to safely leave this alone?
>   > >
>   > >
>   > Why do you have the lucene index in CVS? From what I know the lucene
>   > index folder shouldn't contain any other folder,
>   > just the lucene files.  I think it won't be any problem to delete
> CVS
>   > folder from lucene index and to remove the index from CVS.
>   > If you are affraid to do that .. you can move the CVS subfolder from
>   > lucene index into another folder ... and restore if you have any
>   > problems. I'm sure you will have no problem ... but this is just for
>   > your trust...
>   >
>   >  Sergiu
>   >
>   > >This problem only arises on a full index (incremental == false <=>
>   > >create == true).  Incremental indexes work fine in my app.
>   > >
>   > >Chuck
>   > >
>   > >java.io.IOException: Cannot delete CVS
>   > >    at
> org.apache.lucene.store.FSDirectory.create(FSDirectory.java:144)
>   > >    at
> org.apache.lucene.store.FSDirectory.<init>(FSDirectory.java:128)
>   > >    at
>   >
> >org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:102)
>   > >    at
>   >
> >org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:83)
>   > >    at
> org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:173)
>   > >    at [my app]...
>   > >
>   > >  > -----Original Message-----
>   > >  > From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
>   > >  > Sent: Thursday, November 04, 2004 1:54 PM
>   > >  > To: Lucene Users List
>   > >  > Subject: Re: Is there an easy way to have indexing ignore a CVS
>   > >  > subdirectory in the index directory?
>   > >  >
>   > >  > Hm, as far as I know, a CVS sub-directory in an index directory
>   > >should
>   > >  > not bother Lucene.  As a matter of fact, I tested this (I used
> a
>   > >file,
>   > >  > not a directory) for Lucene in Action.  What error are you
> getting?
>   > >  >
>   > >  > I know there is -I CVS option for ignoring files; perhaps it
> works
>   > >with
>   > >  > directories, too.
>   > >  >
>   > >  > Otis
>   > >  >
>   > >  >
>   > >  > --- Chuck Williams <chuck@manawiz.com> wrote:
>   > >  >
>   > >  > > I have a Tomcat web module being developed with Netbeans 4.0
> ide
>   > >  > > using
>   > >  > > CVS.  One CVS repository holds the sources of my various web
>   > files
>   > >in
>   > >  > > a
>   > >  > > directory structure that directly parallels the standard
> Tomcat
>   > >  > > webapp
>   > >  > > directory structure.  This is well supported in a fully
> automated
>   > >way
>   > >  > > within Netbeans.  I have my search index directory as a
>   > >subdirectory
>   > >  > > of
>   > >  > > WEB-INF, which seemed the natural place to put it.  The index
>   > >files
>   > >  > > themselves are not in the repository.  I want to be able to
> do
>   > CVS
>   > >  > > Update for the web module directory tree as a whole.
> However,
>   > >this
>   > >  > > places a CVS subdirectory within the index directory, which
> in
>   > >turn
>   > >  > > causes Lucene indexing to blow up the next time I run it
> since
>   > >this
>   > >  > > is
>   > >  > > an unexpected entry in the index directory.  To make things
> works,
>   > >to
>   > >  > > work around the problem I both need to delete the CVS
>   > subdirectory
>   > >  > > and
>   > >  > > find and delete the pointers to it in the Entries file and
>   > >Netbeans
>   > >  > > cache file within the CVS subdirectory of the parent
> directory.
>   > >This
>   > >  > > is
>   > >  > > annoying to say the least.
>   > >  > >
>   > >  > >
>   > >  > >
>   > >  > > I've asked the Netbeans users if there is a way to avoid
> creation
>   > >of
>   > >  > > the
>   > >  > > index's CVS subdirectory, but the same thing happened using
>   > WinCVS
>   > >  > > and I
>   > >  > > so I expect this is not a Netbeans issue.  It could be my
>   > relative
>   > >  > > ignorance of CVS.
>   > >  > >
>   > >  > >
>   > >  > >
>   > >  > > How do others avoid this problem?
>   > >  > >
>   > >  > >
>   > >  > >
>   > >  > > Any advice or suggestions would be appreciated.
>   > >  > >
>   > >  > >
>   > >  > >
>   > >  > > Thanks,
>   > >  > >
>   > >  > >
>   > >  > >
>   > >  > > Chuck
>   > >  > >
>   > >  > >
>   > >  > >
>   > >  > >
>   > >  >
>   > >  >
>   > >  >
>   >
> >---------------------------------------------------------------------
>   > >  > To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
>   > >  > For additional commands, e-mail: lucene-user-
>   > help@jakarta.apache.org
>   > >
>   > >
>   >
> >---------------------------------------------------------------------
>   > >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>   > >For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
>   > >
>   > >
>   > >
>   >
>   >
>   >
> ---------------------------------------------------------------------
>   > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>   > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11044-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 17:32:17 2004
Return-Path: <lucene-user-return-11044-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3571 invoked from network); 5 Nov 2004 17:32:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 17:32:17 -0000
Received: (qmail 2530 invoked by uid 500); 5 Nov 2004 17:32:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2508 invoked by uid 500); 5 Nov 2004 17:32:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2493 invoked by uid 99); 5 Nov 2004 17:32:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.162.161.114] (HELO exmtl01.nstein.com) (206.162.161.114)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 09:32:06 -0800
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Subject: RE: PorterStemmer /  Levenshtein Distance
Content-Transfer-Encoding: quoted-printable
X-MimeOLE: Produced By Microsoft Exchange V6.0.6556.0
Date: Fri, 5 Nov 2004 12:32:04 -0500
Message-ID: <CB6D77A564237E43B4C7EF9A6132CD435CCA61@exmtl01.nstein.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: PorterStemmer /  Levenshtein Distance
Thread-Index: AcTDE6Lq2/eQqDjSQ/OlCt/0GXdavAASUKJw
From: "Tate Avery" <tate.avery@nstein.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yousef,

If you are interested in using the Levenshtein algorithm outside of =
Lucene, it is available in the Jakarta StringUtils class...

<http://jakarta.apache.org/commons/lang/api/org/apache/commons/lang/Strin=
gUtils.html#getLevenshteinDistance(java.lang.String,%20java.lang.String)>=


T

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Friday, November 05, 2004 3:44 AM
To: Lucene Users List
Subject: Re: PorterStemmer / Levenshtein Distance


For the distance algorithm, check out FuzzyQuery and its dependent code.

Within Lucene's codebase is also a PorterStemFilter.  However, we'd=20
like to deprecate this in favor of the Snowball stemming code that=20
currently lives in the Lucene Sandbox repository.

	Erik


On Nov 4, 2004, at 9:12 PM, Yousef Ourabi wrote:

> Hey,
> On the site It says Lucence Uses Levenshtein distance
> algorithm for fuzzy matching, where is this in the
> source code? Also I would like to use the porter
> stemming algorithm for somethign else, Are there any
> documents on the Lucence implementation of Porter
> Stemmer.
>
> Best,
> Yousef
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11045-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 17:40:26 2004
Return-Path: <lucene-user-return-11045-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6197 invoked from network); 5 Nov 2004 17:40:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 17:40:25 -0000
Received: (qmail 10464 invoked by uid 500); 5 Nov 2004 17:40:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10447 invoked by uid 500); 5 Nov 2004 17:40:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10429 invoked by uid 99); 5 Nov 2004 17:40:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.203 as permitted sender)
Received: from [64.233.170.203] (HELO rproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 09:40:16 -0800
Received: by rproxy.gmail.com with SMTP id 34so78996rns
        for <lucene-user@jakarta.apache.org>; Fri, 05 Nov 2004 09:40:14 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=bBQ+hEltkVBFyo17zY6PWRxzPEg0myMcxCDrbUBcQndVmFdrVqcxwTqCzh51kGpirF0RTHvKZokz445F0DdDSrwcAwj7z0E0dIfF1epvpfVm4ns7y7EBvt3kRLtQrW82QR6QlTTeSWdH1XVvxWTPjG9Y91CoEmUfbB9EqlBfCyc=
Received: by 10.38.179.47 with SMTP id b47mr283987rnf;
        Fri, 05 Nov 2004 09:33:34 -0800 (PST)
Received: by 10.38.179.13 with HTTP; Fri, 5 Nov 2004 09:33:34 -0800 (PST)
Message-ID: <dd2db8d004110509334a5cb01f@mail.gmail.com>
Date: Fri, 5 Nov 2004 10:33:34 -0700
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Is there an easy way to have indexing ignore a CVS subdirectory in the index directory?
In-Reply-To: <E3381E0825F1954D953A4E347017BB1C028292FC@reh001-1.REX001.ExchangeByRegister.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <E3381E0825F1954D953A4E347017BB1C028292FC@reh001-1.REX001.ExchangeByRegister.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You may also want to investigate the CVSIGNORE environment variable. 
You can tell CVS to ignore any files and directories specified in this
variable (it is space seperated)

So you could tell CVS to ignore all directories named lucene with:
export CVSIGNORE=lucene



On Fri, 5 Nov 2004 09:03:00 -0800, Chuck Williams <chuck@manawiz.com> wrote:
> Sergiu,
> 
> The Lucene index is not in CVS -- neither the directory nor the files.
> But it is a subdirectory of a directory that is in CVS, and it needs to
> be structured that way due to the directory structure constraints of
> Tomcat and the way Netbeans automates Tomcat app development and
> deployment (which uses a development directory layout that directly
> parallels the Tomcat runtime layout).  I want to be able to Update the
> entire repository to make sure I've got all of the latest changes, which
> means doing CVS Update on an ancestor directory of the Lucene index
> directory.  Even though the index directory is not in CVS, doing the
> update on the ancestor directory consistently causes CVS to insert a CVS
> subdirectory into the index directory, causing the problem.  Both WinCVS
> and the Netbeans CVS client have this same behavior.  I have not been
> able to find any option to stop this -- do you know of one?
> 
> Also, I can't just move the CVS directory out of the index directory,
> unless I'm very careful to move it back before every CVS Update.  For
> similar reasons I can't just delete it either.  CVS (and Netbeans) get
> very upset if there are points to this directory but it isn't there.
> The pointer exists in the CVS Entries file (and another for Netbeans in
> a cache file) in the CVS subdirectory of the parent directory of the
> index directory.  So, I have to manually eliminate those if I want to
> delete the index directory's CVS directory.  And then they come back
> after the next update!  All in all very frustrating.
> 
> I'm going to try the code patch that Otis suggested.  If anybody knows
> some way in CVS to avoid this problem, I'd love to hear about it.
> 
> Thanks,
> 
> Chuck
> 
> 
> 
>   > -----Original Message-----
>   > From: sergiu gordea [mailto:gsergiu@ifit.uni-klu.ac.at]
>   > Sent: Friday, November 05, 2004 1:43 AM
>   > To: Lucene Users List
>   > Subject: Re: Is there an easy way to have indexing ignore a CVS
>   > subdirectory in the index directory?
>   >
>   > Chuck Williams wrote:
>   >
>   > >Otis, thanks for looking at this.  The stack trace of the exception
> is
>   > >below.  I looked at the code.  It wants to delete every file in the
>   > >index directory, but fails to delete the CVS subdirectory entry
>   > >(presumably because it is marked read-only; the specific exception
> is
>   > >swallowed).  Even if it could delete the CVS subdirectory, this
> would
>   > >just cause another problem with Netbeans/CVS, since it wouldn't
> know
>   > how
>   > >to fix up the pointers in the parent CVS subdirectory.  Is there a
>   > >change I could make that would cause it to safely leave this alone?
>   > >
>   > >
>   > Why do you have the lucene index in CVS? From what I know the lucene
>   > index folder shouldn't contain any other folder,
>   > just the lucene files.  I think it won't be any problem to delete
> CVS
>   > folder from lucene index and to remove the index from CVS.
>   > If you are affraid to do that .. you can move the CVS subfolder from
>   > lucene index into another folder ... and restore if you have any
>   > problems. I'm sure you will have no problem ... but this is just for
>   > your trust...
>   >
>   >  Sergiu
>   >
>   > >This problem only arises on a full index (incremental == false <=>
>   > >create == true).  Incremental indexes work fine in my app.
>   > >
>   > >Chuck
>   > >
>   > >java.io.IOException: Cannot delete CVS
>   > >    at
> org.apache.lucene.store.FSDirectory.create(FSDirectory.java:144)
>   > >    at
> org.apache.lucene.store.FSDirectory.<init>(FSDirectory.java:128)
>   > >    at
>   >
> >org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:102)
>   > >    at
>   >
> >org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:83)
>   > >    at
> org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:173)
>   > >    at [my app]...
>   > >
>   > >  > -----Original Message-----
>   > >  > From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
>   > >  > Sent: Thursday, November 04, 2004 1:54 PM
>   > >  > To: Lucene Users List
>   > >  > Subject: Re: Is there an easy way to have indexing ignore a CVS
>   > >  > subdirectory in the index directory?
>   > >  >
>   > >  > Hm, as far as I know, a CVS sub-directory in an index directory
>   > >should
>   > >  > not bother Lucene.  As a matter of fact, I tested this (I used
> a
>   > >file,
>   > >  > not a directory) for Lucene in Action.  What error are you
> getting?
>   > >  >
>   > >  > I know there is -I CVS option for ignoring files; perhaps it
> works
>   > >with
>   > >  > directories, too.
>   > >  >
>   > >  > Otis
>   > >  >
>   > >  >
>   > >  > --- Chuck Williams <chuck@manawiz.com> wrote:
>   > >  >
>   > >  > > I have a Tomcat web module being developed with Netbeans 4.0
> ide
>   > >  > > using
>   > >  > > CVS.  One CVS repository holds the sources of my various web
>   > files
>   > >in
>   > >  > > a
>   > >  > > directory structure that directly parallels the standard
> Tomcat
>   > >  > > webapp
>   > >  > > directory structure.  This is well supported in a fully
> automated
>   > >way
>   > >  > > within Netbeans.  I have my search index directory as a
>   > >subdirectory
>   > >  > > of
>   > >  > > WEB-INF, which seemed the natural place to put it.  The index
>   > >files
>   > >  > > themselves are not in the repository.  I want to be able to
> do
>   > CVS
>   > >  > > Update for the web module directory tree as a whole.
> However,
>   > >this
>   > >  > > places a CVS subdirectory within the index directory, which
> in
>   > >turn
>   > >  > > causes Lucene indexing to blow up the next time I run it
> since
>   > >this
>   > >  > > is
>   > >  > > an unexpected entry in the index directory.  To make things
> works,
>   > >to
>   > >  > > work around the problem I both need to delete the CVS
>   > subdirectory
>   > >  > > and
>   > >  > > find and delete the pointers to it in the Entries file and
>   > >Netbeans
>   > >  > > cache file within the CVS subdirectory of the parent
> directory.
>   > >This
>   > >  > > is
>   > >  > > annoying to say the least.
>   > >  > >
>   > >  > >
>   > >  > >
>   > >  > > I've asked the Netbeans users if there is a way to avoid
> creation
>   > >of
>   > >  > > the
>   > >  > > index's CVS subdirectory, but the same thing happened using
>   > WinCVS
>   > >  > > and I
>   > >  > > so I expect this is not a Netbeans issue.  It could be my
>   > relative
>   > >  > > ignorance of CVS.
>   > >  > >
>   > >  > >
>   > >  > >
>   > >  > > How do others avoid this problem?
>   > >  > >
>   > >  > >
>   > >  > >
>   > >  > > Any advice or suggestions would be appreciated.
>   > >  > >
>   > >  > >
>   > >  > >
>   > >  > > Thanks,
>   > >  > >
>   > >  > >
>   > >  > >
>   > >  > > Chuck
>   > >  > >
>   > >  > >
>   > >  > >
>   > >  > >
>   > >  >
>   > >  >
>   > >  >
>   >
> >---------------------------------------------------------------------
>   > >  > To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
>   > >  > For additional commands, e-mail: lucene-user-
>   > help@jakarta.apache.org
>   > >
>   > >
>   >
> >---------------------------------------------------------------------
>   > >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>   > >For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
>   > >
>   > >
>   > >
>   >
>   >
>   >
> ---------------------------------------------------------------------
>   > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>   > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11046-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 17:48:34 2004
Return-Path: <lucene-user-return-11046-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9325 invoked from network); 5 Nov 2004 17:48:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 17:48:34 -0000
Received: (qmail 17375 invoked by uid 500); 5 Nov 2004 17:48:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17331 invoked by uid 500); 5 Nov 2004 17:48:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17299 invoked by uid 99); 5 Nov 2004 17:48:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 09:48:18 -0800
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id iA5HmHt14957
	for <lucene-user@jakarta.apache.org>; Fri, 5 Nov 2004 11:48:17 -0600
Message-ID: <418BBCDD.8030003@getopt.org>
Date: Fri, 05 Nov 2004 18:48:13 +0100
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.2) Gecko/20040803
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: LetterTokenizer to allow digits
References: <20041105163058.96617.qmail@web12707.mail.yahoo.com> <418BB56A.3040709@semantico.com>
In-Reply-To: <418BB56A.3040709@semantico.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Peter Pimley wrote:

> 
> Hi everybody,
> 
> I have just found myself in the situation of having to subclass 
> CharTokenizer with a class that tests against 
> Character.isLetterOrDigit.  I would use a LetterTokenizer, but it's 
> important for me to allow numbers through, as the documents I'm indexing 
> often have dates such as '2000' or '1945'.
> 
> Obviously it's only a few lines to do this, but I'm sure I'm not the 
> first person to have had to do it.  May I make the feature request that 
> LetterTokenizer should have an 'AllowDigits' property?

I found myself in exactly the same situation, so I support your request.

-- 
Best regards,
Andrzej Bialecki

-------------------------------------------------
Software Architect, System Integration Specialist
CEN/ISSS EC Workshop, ECIMF project chair
EU FP6 E-Commerce Expert/Evaluator
-------------------------------------------------
FreeBSD developer (http://www.freebsd.org)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11047-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 18:00:10 2004
Return-Path: <lucene-user-return-11047-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 14260 invoked from network); 5 Nov 2004 18:00:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 18:00:10 -0000
Received: (qmail 46748 invoked by uid 500); 5 Nov 2004 18:00:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46685 invoked by uid 500); 5 Nov 2004 18:00:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46672 invoked by uid 99); 5 Nov 2004 18:00:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.81] (HELO mailout03.sul.t-online.com) (194.25.134.81)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 09:59:59 -0800
Received: from fwd02.aul.t-online.de 
	by mailout03.sul.t-online.com with smtp 
	id 1CQ8NQ-0002AE-00; Fri, 05 Nov 2004 18:59:56 +0100
Received: from pD9EBF6C0.dip.t-dialin.net (STkQCwZHreRuXuqgaZcOzc3wjYKQKMswSxhYpa2UF95CYKKxovVjrw@[217.235.246.192]) by fmrl02.sul.t-online.com
	with esmtp id 1CQ8NB-0ZUPM80; Fri, 5 Nov 2004 18:59:41 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Is there an easy way to have indexing ignore a CVS subdirectory in the index directory?
Date: Fri, 5 Nov 2004 18:59:51 +0100
User-Agent: KMail/1.7.1
References: <E3381E0825F1954D953A4E347017BB1C028292FC@reh001-1.REX001.ExchangeByRegister.com>
In-Reply-To: <E3381E0825F1954D953A4E347017BB1C028292FC@reh001-1.REX001.ExchangeByRegister.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411051859.51568@danielnaber.de>
X-ID: STkQCwZHreRuXuqgaZcOzc3wjYKQKMswSxhYpa2UF95CYKKxovVjrw@t-dialin.net
X-TOI-MSGID: 6a4dc1ae-1f9f-47bd-9937-846cc4602905
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Friday 05 November 2004 18:03, Chuck Williams wrote:

> The Lucene index is not in CVS -- neither the directory nor the files.
> But it is a subdirectory of a directory that is in CVS,

Does this patch help? 
http://issues.apache.org/bugzilla/show_bug.cgi?id=31747

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11048-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 18:02:20 2004
Return-Path: <lucene-user-return-11048-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 14962 invoked from network); 5 Nov 2004 18:02:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 18:02:20 -0000
Received: (qmail 49843 invoked by uid 500); 5 Nov 2004 18:02:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49793 invoked by uid 500); 5 Nov 2004 18:02:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49776 invoked by uid 99); 5 Nov 2004 18:02:11 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=LINES_OF_YELLING,SPF_HELO_PASS,SPF_PASS,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of dcliman@keepmedia.com designates 63.82.1.162 as permitted sender)
Received: from [63.82.1.162] (HELO mx1.keepmedia.com) (63.82.1.162)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 10:02:10 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by mx1.keepmedia.com (Postfix) with ESMTP
	id 8A77D23331E; Fri,  5 Nov 2004 09:52:27 -0800 (PST)
Received: from mx1.keepmedia.com ([127.0.0.1])
 by localhost (lucky.corp.keepmedia.int [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 27294-04; Fri,  5 Nov 2004 09:52:27 -0800 (PST)
Received: from sgm26 (unknown [192.168.1.150])
	by mx1.keepmedia.com (Postfix) with ESMTP
	id 65BF2233318; Fri,  5 Nov 2004 09:52:27 -0800 (PST)
From: "Dan Climan" <dcliman@keepmedia.com>
To: "'Karthik N S'" <karthik@controlnet.co.in>,
	"'LUCENE'" <lucene-user@jakarta.apache.org>
Subject: RE: INDEXREADER + DELETE + LUCENE1.4.1
Date: Fri, 5 Nov 2004 10:02:09 -0800
Organization: KeepMedia, Inc.
Message-ID: <000a01c4c361$9157c930$7201a8c0@corp.keepmedia.int>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
Importance: Normal
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIGEMKCCAA.karthik@controlnet.co.in>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Scanned: by amavisd-new at keepmedia.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I think you need to change
indexReader.delete(k);
to=20
indexReader.delete(hits.id(k));

Dan
-----Original Message-----
From: Karthik N S [mailto:karthik@controlnet.co.in]=20
Sent: Thursday, November 04, 2004 11:47 PM
To: LUCENE
Subject: INDEXREADER + DELETE + LUCENE1.4.1





Hi Guy's

Apologies............



There seems to be a bug unresolved [ Or may I be may be doing something
wrong ] in IndexReader.delete(int docNum)

Here is the Code

indexSearcher =3D null;
indexDirectory =3D null;
indexReader =3D null;
indexDirectory
=3DFSDirectory.getDirectory("/root/MERGEDINDEX/MERGER_1",false);
indexReader =3D IndexReader.open(indexDirectory);

IndexReader.unlock(indexDirectory);
indexSearcher =3D new IndexSearcher(indexReader);
query =3D new TermQuery(new Term(fieldName, FiledValue));
hits =3D indexSearcher.search(query);


if ( hits.length() > 0 ) {

for(int k=3D0;k<=3Dhits.length();k++) {
PRINTDBG_.append("QUERY : " + query.toString() + "\n" +
                                    "FIELD NAME : " + fieldName + "\n" +
                                    "FIELD VALUE: " + FiledValue + "\n" =
+
                                    "TOTAL HITS : " + hits.length() + =
"\n" +
                                    "DELETING : " + k);

    indexReader.delete(k);

    }
}

indexReader.close();
indexSearcher.close();
indexDirectory.close();

System.out.printl(" Debugger : " +PRINTDBG_);
indexReader =3D null;
indexSearcher =3D null;
indexDirectory =3D null;

//optimization
indexDirectory =3D FSDirectory.getDirectory(pathMergeIndex,false);
IndexWriter writer =3D new IndexWriter(indexDirectory, analyzer, false);
writer.mergeFactor =3D mergeFactorVal_; writer.maxMergeDocs =3D
maxMergeDocsVal_; writer.optimize(); writer.close();

indexDirectory =3D null;
writer =3D null;

In spite of Using a new IndexReader for every Deletion of documents and
Optimization's The 'indexReader.delete(k)' does not seems to work

Configuration History

a) 1 MergerIndex =3D 1000 subIndexes [ fieldName =3D KeyWord Field Type]

b) O/s Windows

c) Amd Processor

e) Lucene 1.4.1

f) Jdk 1.4.2

Please Some body Suggest me For Alternates ........



      WITH WARM REGARDS
      HAVE A NICE DAY
      [ N.S.KARTHIK]





---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11049-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 19:38:21 2004
Return-Path: <lucene-user-return-11049-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51532 invoked from network); 5 Nov 2004 19:38:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 19:38:21 -0000
Received: (qmail 26615 invoked by uid 500); 5 Nov 2004 19:37:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26543 invoked by uid 500); 5 Nov 2004 19:37:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26490 invoked by uid 99); 5 Nov 2004 19:37:50 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 11:37:49 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Is there an easy way to have indexing ignore a CVS subdirectory in the index directory?
Date: Fri, 5 Nov 2004 11:32:41 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C0282939A@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Is there an easy way to have indexing ignore a CVS subdirectory in the index directory?
Thread-Index: AcTDYJXOTIl9AYIlTh+bbzO7TRp+jAADM1rA
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Daniel and Justin for the suggestions!  I have a fix and will
record my experience here for the benefit of anybody else facing this
problem:

1.  .cvsignore did not work.  CVS may ignore the Lucene index directory,
but it still insists on creating the CVS subdirectory of the index
directory.

2.  I didn't try the suggestion of defining an alias module with a CVS
directory exclude (!) restriction.  This might have worked had I limited
all my CVS operations to just work with the alias module, but this would
limit flexibility and remove a lot of the nice CVS integration features
in the Netbeans ide.

3.  Bernhard's patch solves the problem!  I had a couple minor glitches
installing it.  First, there is a missing "throws IOException"
declaration on the list(FileFilter) method he has added.  Second, the
patch is based on a newer version of FSDirectory than the version in
1.4.2, so my attempt to apply the patch automatically failed.  Applying
the patch manually and adding the throws declaration fixed all problems.

I would like to suggest that Bernhard's patch be integrated into the
next version of Lucene.

Chuck

  > -----Original Message-----
  > From: Daniel Naber [mailto:daniel.naber@t-online.de]
  > Sent: Friday, November 05, 2004 10:00 AM
  > To: Lucene Users List
  > Subject: Re: Is there an easy way to have indexing ignore a CVS
  > subdirectory in the index directory?
  >=20
  > On Friday 05 November 2004 18:03, Chuck Williams wrote:
  >=20
  > > The Lucene index is not in CVS -- neither the directory nor the
files.
  > > But it is a subdirectory of a directory that is in CVS,
  >=20
  > Does this patch help?
  > http://issues.apache.org/bugzilla/show_bug.cgi?id=3D31747
  >=20
  > --
  > http://www.danielnaber.de
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11050-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 19:59:13 2004
Return-Path: <lucene-user-return-11050-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59220 invoked from network); 5 Nov 2004 19:59:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 19:59:13 -0000
Received: (qmail 62123 invoked by uid 500); 5 Nov 2004 19:59:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62095 invoked by uid 500); 5 Nov 2004 19:59:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62081 invoked by uid 99); 5 Nov 2004 19:59:04 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FROM_ENDS_IN_NUMS,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of abdo1234@msn.com designates 64.4.39.16 as permitted sender)
Received: from [64.4.39.16] (HELO hotmail.com) (64.4.39.16)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 11:59:02 -0800
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 5 Nov 2004 11:59:01 -0800
Received: from 81.10.82.140 by by11fd.bay11.hotmail.msn.com with HTTP;
	Fri, 05 Nov 2004 19:58:45 GMT
X-Originating-IP: [81.10.82.140]
X-Originating-Email: [abdo1234@msn.com]
X-Sender: abdo1234@msn.com
From: "abdulrahman galal" <abdo1234@msn.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: Does lucene makes any compression
Date: Fri, 05 Nov 2004 21:58:45 +0200
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY11-F16CWO6hm8Ua8000192c2@hotmail.com>
X-OriginalArrivalTime: 05 Nov 2004 19:59:01.0435 (UTC) FILETIME=[E50690B0:01C4C371]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



does lucene makes any compression ?

and if it does , does it compress text files and its indecies ...

IS there any benchmarks for boolean query performance compared with other 
open source full text retirvial engines ?


thanks alot

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today it's FREE! 
http://messenger.msn.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11051-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 20:03:38 2004
Return-Path: <lucene-user-return-11051-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61731 invoked from network); 5 Nov 2004 20:03:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 20:03:38 -0000
Received: (qmail 72537 invoked by uid 500); 5 Nov 2004 20:03:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72487 invoked by uid 500); 5 Nov 2004 20:03:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72473 invoked by uid 99); 5 Nov 2004 20:03:29 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.144.52.34] (HELO midtown.ny.ipicorp.com) (64.144.52.34)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 12:03:29 -0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4C372.A2053A9A"
Subject: problem with demo
Date: Fri, 5 Nov 2004 15:04:09 -0500
Message-ID: <403AA231BD71694FBA089C60B10EBBA6112065@midtown.ny.ipicorp.com>
From: "Anantha Padmanabhan" <Anantha.Padmanabhan@scrittura.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4C372.A2053A9A
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
Trying to run the demo, I get: Exception in thread "main" =
java.lang.NoClassDefFoundError": org/apache/lucene/demo/IndexFiles.  I =
have both the .jar files in my classpath.  Appreciate help.
=20
Anantha=20

------_=_NextPart_001_01C4C372.A2053A9A--

From lucene-user-return-11052-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 20:11:55 2004
Return-Path: <lucene-user-return-11052-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64747 invoked from network); 5 Nov 2004 20:11:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 20:11:55 -0000
Received: (qmail 83069 invoked by uid 500); 5 Nov 2004 20:11:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 83043 invoked by uid 500); 5 Nov 2004 20:11:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 83029 invoked by uid 99); 5 Nov 2004 20:11:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.235.234.121] (HELO taurus.lunarpages.com) (64.235.234.121)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 12:11:46 -0800
Received: from h-66-134-211-122.lsanca54.covad.net ([66.134.211.122] helo=ramonlaptop)
	by taurus.lunarpages.com with esmtpa (Exim 4.43)
	id 1CQATJ-0000AF-Jp
	for lucene-user@jakarta.apache.org; Fri, 05 Nov 2004 12:14:09 -0800
From: "Ramon Aseniero" <ramon.aseniero@tryarc.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: problem with demo
Date: Fri, 5 Nov 2004 12:11:40 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcTDcty4bL4RNslmT46uOsqJWTOB5QAAGQeg
In-Reply-To: <403AA231BD71694FBA089C60B10EBBA6112065@midtown.ny.ipicorp.com>
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - taurus.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - tryarc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Anantha,

Put it on your jre\lib\ext folder. That's what I did when I got the same
problem.

In my case, the Lucene jars are on my C:\Program Files\Java\jre1.5.0\lib\ext
folder.

Let me know if that works.

Thanks,
Ramon

-----Original Message-----
From: Anantha Padmanabhan [mailto:Anantha.Padmanabhan@scrittura.com] 
Sent: Friday, November 05, 2004 12:04 PM
To: lucene-user@jakarta.apache.org
Subject: problem with demo

Hi,
 
Trying to run the demo, I get: Exception in thread "main"
java.lang.NoClassDefFoundError": org/apache/lucene/demo/IndexFiles.  I have
both the .jar files in my classpath.  Appreciate help.
 
Anantha 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11053-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 21:56:20 2004
Return-Path: <lucene-user-return-11053-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12630 invoked from network); 5 Nov 2004 21:56:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 21:56:20 -0000
Received: (qmail 46177 invoked by uid 500); 5 Nov 2004 21:56:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46109 invoked by uid 500); 5 Nov 2004 21:56:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46095 invoked by uid 99); 5 Nov 2004 21:56:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.144.52.34] (HELO midtown.ny.ipicorp.com) (64.144.52.34)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 05 Nov 2004 13:56:10 -0800
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C4C382.5FFE2EF8"
Subject: RE: problem with demo
Date: Fri, 5 Nov 2004 16:54:46 -0500
Message-ID: <403AA231BD71694FBA089C60B10EBBA6112066@midtown.ny.ipicorp.com>
From: "Anantha Padmanabhan" <Anantha.Padmanabhan@scrittura.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4C382.5FFE2EF8
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi Ramon,
=20
It worked.  Thanks for the help.  Oh, one more:  I want to run the demo =
against a set of txt files on a different directory.  Would the index =
files be created under lucene_home/index or would it create a new =
directory /index in the same directory where the txt files are located?
=20
Anyhow, thanks for the help.....
=20
Anantha=20

________________________________

From: Ramon Aseniero [mailto:ramon.aseniero@tryarc.com]
Sent: Fri 11/5/2004 3:11 PM
To: 'Lucene Users List'
Subject: RE: problem with demo



Hi Anantha,

Put it on your jre\lib\ext folder. That's what I did when I got the same
problem.

In my case, the Lucene jars are on my C:\Program =
Files\Java\jre1.5.0\lib\ext
folder.

Let me know if that works.

Thanks,
Ramon

-----Original Message-----
From: Anantha Padmanabhan [mailto:Anantha.Padmanabhan@scrittura.com]
Sent: Friday, November 05, 2004 12:04 PM
To: lucene-user@jakarta.apache.org
Subject: problem with demo

Hi,

Trying to run the demo, I get: Exception in thread "main"
java.lang.NoClassDefFoundError": org/apache/lucene/demo/IndexFiles.  I =
have
both the .jar files in my classpath.  Appreciate help.

Anantha


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org





------_=_NextPart_001_01C4C382.5FFE2EF8
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
------_=_NextPart_001_01C4C382.5FFE2EF8--

From lucene-user-return-11054-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 21:57:44 2004
Return-Path: <lucene-user-return-11054-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13111 invoked from network); 5 Nov 2004 21:57:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 21:57:43 -0000
Received: (qmail 51210 invoked by uid 500); 5 Nov 2004 21:57:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51100 invoked by uid 500); 5 Nov 2004 21:57:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51014 invoked by uid 99); 5 Nov 2004 21:57:21 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.243] (HELO web12706.mail.yahoo.com) (216.136.173.243)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 05 Nov 2004 13:57:19 -0800
Received: (qmail 50697 invoked by uid 60001); 5 Nov 2004 21:57:17 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=Zg9RDk08eTHBJPnTaPRXvHr+iNve62m86c7V7hkiZq+mgzEsgbfHIlh2JR2AOid7eXy5Fuo9O8cAxmj0uiRL7pJ3BwEUllYelknrlBu2COivl7XYX1ZXK9Vjgtj8c3VtkAKjFzp+LSNO1tIorPsMy31rmnlXj4op50if/9/fX1M=  ;
Message-ID: <20041105215716.50694.qmail@web12706.mail.yahoo.com>
Received: from [216.194.17.194] by web12706.mail.yahoo.com via HTTP; Fri, 05 Nov 2004 13:57:16 PST
Date: Fri, 5 Nov 2004 13:57:16 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Does lucene makes any compression
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <BAY11-F16CWO6hm8Ua8000192c2@hotmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yes, some compression (gzip) was recently added to Lucene.
Some benchmarks are on Lucene site.  No comparisons with other IR
libraries.

Otis


--- abdulrahman galal <abdo1234@msn.com> wrote:

> 
> 
> does lucene makes any compression ?
> 
> and if it does , does it compress text files and its indecies ...
> 
> IS there any benchmarks for boolean query performance compared with
> other 
> open source full text retirvial engines ?
> 
> 
> thanks alot
> 
> _________________________________________________________________
> Express yourself instantly with MSN Messenger! Download today it's
> FREE! 
> http://messenger.msn.com/
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11055-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 05 22:01:54 2004
Return-Path: <lucene-user-return-11055-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15316 invoked from network); 5 Nov 2004 22:01:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 5 Nov 2004 22:01:54 -0000
Received: (qmail 64365 invoked by uid 500); 5 Nov 2004 22:01:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 64331 invoked by uid 500); 5 Nov 2004 22:01:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 64315 invoked by uid 99); 5 Nov 2004 22:01:43 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.243] (HELO web12706.mail.yahoo.com) (216.136.173.243)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 05 Nov 2004 14:01:43 -0800
Received: (qmail 51182 invoked by uid 60001); 5 Nov 2004 22:01:41 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=B+7JFQfJTC3rjhMXaCLPys9AbALo2xShwh6PvN2sTjC/+HfmeiMNiytXAqaNS6KEfx/rnf40Z7HkMUK2Rm0uHH1phoG+Ff+t4R+TTZezErnM2fS2jLJAP0GIY6b+EwyKlMqerBBi6e2EWPud5U+W1UwTwj2emCoPJ3gdROtZU4E=  ;
Message-ID: <20041105220140.51180.qmail@web12706.mail.yahoo.com>
Received: from [216.194.17.194] by web12706.mail.yahoo.com via HTTP; Fri, 05 Nov 2004 14:01:40 PST
Date: Fri, 5 Nov 2004 14:01:40 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: using lucene as a dictionary database?
To: Lucene Users List <lucene-user@jakarta.apache.org>,
  aurora <aurora00@gmail.com>
In-Reply-To: <cbd1775104110310395fa5956e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yes, you could certainly use Lucene for that.  If public APIs don't do
it for you, there is certainly some nice code under the hood that you
can reuse or borrow.

Otis


--- aurora <aurora00@gmail.com> wrote:

> Besides full text indexing, I need a database that represent a large
> dictionary like:
> 
>   (key1, key2) -> docid
> 
> I am considering between building a home grown solution and using
> Berkeley DB. Then I think I was using Lucene anyway, wouldn't it make
> sense use it as my database too? Just make key1 and key2 two keyword
> fields and an UnIndexed field for docid?
> 
> I need to do something like
> 
>   get(key1, key2) -> docid
>   get(key1) -> list of docid
> 
> This need to be fast
> 
>   add( list of (key1,key2,docid) )
> 
> This would be done perhaps once a day in a batch.
> 
> My experience with Lucene is its very efficient in terms of speed and
> storage size. Would this be a right usage with Lucene?
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11056-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 06 00:35:36 2004
Return-Path: <lucene-user-return-11056-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66101 invoked from network); 6 Nov 2004 00:35:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Nov 2004 00:35:36 -0000
Received: (qmail 45365 invoked by uid 500); 6 Nov 2004 00:35:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45336 invoked by uid 500); 6 Nov 2004 00:35:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45321 invoked by uid 99); 6 Nov 2004 00:35:28 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.148.212.186] (HELO w04.bloglines.com) (216.148.212.186)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 05 Nov 2004 16:35:27 -0800
Received: (qmail 4433 invoked by uid 99); 6 Nov 2004 00:35:26 -0000
Message-ID: <1099701326.1163493923.4432.sendItem@bloglines.com>
Date: 6 Nov 2004 00:35:26 -0000
From: yahootintin.1247688@bloglines.com
To: lucene-user@jakarta.apache.org
Subject: Re: Locks and Readers and Writers
MIME-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ok, I simplified my test case a little...  I removed the UNC share which is
a remote file share that Windows supports.

I have two processes running
on the same Windows XP machine.
1) The first process uses an IndexWriter
to writes to the index and then closes the IndexWriter.  
2) The first process
sends a multicast event to the other process.
3) The other process opens
an IndexReader.
4) Meanwhile, the first process tries to open the index again
to do a write.
5) Often the IndexWriter gets an error: Lock obtain timed
out

Any advice?  Is this only a problem on Windows?

Here's the stack
trace:
java.io.IOException: Lock obtain timed out: Lock@C:\WINDOWS\TEMP\lucene-9906f192fb41cc8775cf839213997b7e-commit.lock

	at org.apache.lucene.store.Lock.obtain(Lock.java:58)
	at org.apache.lucene.store.Lock$With.run(Lock.java:108)

	at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:501)

	at org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:458)

	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:310)


--- Lucene Users List" <lucene-user@jakarta.apache.org wrote:
yahootintin.1247688@bloglines.com
writes:
> > Hi Christoph,
> > 
> > Thats what I thought.  But what I'm
seeing is this:
> > - open
> > reader for searching
> > (the reader is
opening an index on a remote machine
> > (via UNC) which takes a couple seconds)

> > - meanwhile the other service opens
> > an IndexWriter and adds a document

> > (the index writer determines that it needs
> > to merge so it tries
to get a lock.  since the reader is still opening, the
> > IO exception is
thrown)
> > 
> > I believe that increasing the merge factor will
> > reduce
the opportunity for this to occur.  But it will still occur at some
> > point.

> > 
> I'm not sure what you mean by `opening an index on a remote machine
(via 
> UNC)' but have you made sure that lock files are put in the same
directory
> for both processes (see the mailing list archive for details)?

> Also note, that lucene's locking is known not to work on NFS (also see
the
> list archive). I don't know if it works on SMB mounts.
> 
> Morus

> 
> ---------------------------------------------------------------------

> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For
additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11057-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 06 00:40:33 2004
Return-Path: <lucene-user-return-11057-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67151 invoked from network); 6 Nov 2004 00:40:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Nov 2004 00:40:33 -0000
Received: (qmail 48806 invoked by uid 500); 6 Nov 2004 00:39:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48662 invoked by uid 500); 6 Nov 2004 00:39:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48642 invoked by uid 99); 6 Nov 2004 00:39:58 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.148.212.186] (HELO w04.bloglines.com) (216.148.212.186)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 05 Nov 2004 16:39:57 -0800
Received: (qmail 6961 invoked by uid 99); 6 Nov 2004 00:39:56 -0000
Message-ID: <1099701596.2795100608.6960.sendItem@bloglines.com>
Date: 6 Nov 2004 00:39:56 -0000
From: yahootintin.1247688@bloglines.com
To: lucene-user@jakarta.apache.org
Subject: Re: Locks and Readers and Writers
MIME-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

CORRECTION:

Ok, I simplified my test case a little...  I removed the UNC
share which is
a remote file share that Windows supports.

I have two processes
running
on the same Windows XP machine.
1) The first process uses an IndexWriter

to writes to the index and then closes the IndexWriter.  
2) The first process

sends a multicast event to the other process.
3) The other process receives
the multicast event opens an IndexReader.
4) Meanwhile, the first process
opens an IndexReader and performs a delete.  The IndexReader is then closed.

5) The first process opens an IndexWriter to add more documents.  At this
point the IndexWriter often gets an error: Lock obtain timed out

Any advice?
 Is this only a problem on Windows?

Here's the stack
trace:
java.io.IOException:
Lock obtain timed out: Lock@C:\WINDOWS\TEMP\lucene-9906f192fb41cc8775cf839213997b7e-commit.lock


    at org.apache.lucene.store.Lock.obtain(Lock.java:58)
    at org.apache.lucene.store.Lock$With.run(Lock.java:108)


    at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:501)


    at org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:458)


    at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:310)


--- Lucene Users List" <lucene-user@jakarta.apache.org wrote:
Ok, I simplified
my test case a little...  I removed the UNC share which is
> a remote file
share that Windows supports.
> 
> I have two processes running
> on the
same Windows XP machine.
> 1) The first process uses an IndexWriter
> to
writes to the index and then closes the IndexWriter.  
> 2) The first process

> sends a multicast event to the other process.
> 3) The other process opens

> an IndexReader.
> 4) Meanwhile, the first process tries to open the index
again
> to do a write.
> 5) Often the IndexWriter gets an error: Lock obtain
timed
> out
> 
> Any advice?  Is this only a problem on Windows?
> 
>
Here's the stack
> trace:
> java.io.IOException: Lock obtain timed out:
Lock@C:\WINDOWS\TEMP\lucene-9906f192fb41cc8775cf839213997b7e-commit.lock
> 
> 	at org.apache.lucene.store.Lock.obtain(Lock.java:58)
> 	at org.apache.lucene.store.Lock$With.run(Lock.java:108)

> 
> 	at org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:501)

> 
> 	at org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:458)

> 
> 	at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:310)

> 
> 
> --- Lucene Users List" <lucene-user@jakarta.apache.org wrote:
> yahootintin.1247688@bloglines.com
> writes:
> > > Hi Christoph,
> > >

> > > Thats what I thought.  But what I'm
> seeing is this:
> > > - open

> > > reader for searching
> > > (the reader is
> opening an index on a
remote machine
> > > (via UNC) which takes a couple seconds)
> 
> > > -
meanwhile the other service opens
> > > an IndexWriter and adds a document

> 
> > > (the index writer determines that it needs
> > > to merge so it
tries
> to get a lock.  since the reader is still opening, the
> > > IO
exception is
> thrown)
> > > 
> > > I believe that increasing the merge
factor will
> > > reduce
> the opportunity for this to occur.  But it will
still occur at some
> > > point.
> 
> > > 
> > I'm not sure what you mean
by `opening an index on a remote machine
> (via 
> > UNC)' but have you
made sure that lock files are put in the same
> directory
> > for both processes
(see the mailing list archive for details)?
> 
> > Also note, that lucene's
locking is known not to work on NFS (also see
> the
> > list archive). I
don't know if it works on SMB mounts.
> > 
> > Morus
> 
> > 
> > ---------------------------------------------------------------------

> 
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org

> > For
> additional commands, e-mail: lucene-user-help@jakarta.apache.org

> > 
> > 
> 
> ---------------------------------------------------------------------

> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For
additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11058-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 06 01:13:49 2004
Return-Path: <lucene-user-return-11058-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74521 invoked from network); 6 Nov 2004 01:13:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Nov 2004 01:13:49 -0000
Received: (qmail 77458 invoked by uid 500); 6 Nov 2004 01:13:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77429 invoked by uid 500); 6 Nov 2004 01:13:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77416 invoked by uid 99); 6 Nov 2004 01:13:41 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [68.142.225.157] (HELO web54401.mail.yahoo.com) (68.142.225.157)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 05 Nov 2004 17:13:41 -0800
Message-ID: <20041106011339.16067.qmail@web54401.mail.yahoo.com>
Received: from [64.170.159.34] by web54401.mail.yahoo.com via HTTP; Fri, 05 Nov 2004 17:13:39 PST
Date: Fri, 5 Nov 2004 17:13:39 -0800 (PST)
From: Yousef Ourabi <yousef_ourabi@yahoo.com>
Subject: Stemming Oddness
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <CB6D77A564237E43B4C7EF9A6132CD435CCA61@exmtl01.nstein.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hey,
Thanks for everyone's reply to my last post, I have
some quesiton. I imported the PorterStemmer and when I
did the following

PorterStemmer ps = new PorterStemmer();
string r1 = ps.stem("elephant");
r1 is 'eleph'

also buying stems to bui, is this normal? Am I doing
something wrong.

I am calling reset inbetween function calls.

Thanks,
Yousef

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11059-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 06 10:14:55 2004
Return-Path: <lucene-user-return-11059-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 198 invoked from network); 6 Nov 2004 10:14:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Nov 2004 10:14:55 -0000
Received: (qmail 91322 invoked by uid 500); 6 Nov 2004 10:13:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91190 invoked by uid 500); 6 Nov 2004 10:13:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91177 invoked by uid 99); 6 Nov 2004 10:13:39 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [212.159.14.214] (HELO ptb-relay03.plus.net) (212.159.14.214)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 06 Nov 2004 02:13:38 -0800
Received: from [80.229.194.52] (helo=joseph)
	 by ptb-relay03.plus.net with smtp (Exim) id 1CQNZf-000ONd-3J
	for lucene-user@jakarta.apache.org; Sat, 06 Nov 2004 10:13:35 +0000
Message-ID: <057001c4c3e8$c9a06ea0$34c2e550@joseph>
From: "Pete Lewis" <pete@uptima.co.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041106011339.16067.qmail@web54401.mail.yahoo.com>
Subject: Re: Stemming Oddness
Date: Sat, 6 Nov 2004 10:10:04 -0000
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_056D_01C4C3E8.C92DFDC0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_056D_01C4C3E8.C92DFDC0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi Yousef

You are not doing anything wrong - its just how the Porter stemmer =
works!

The problem with Porter is that it tries to do everything in a purely =
algorithmic way - which doesn't cater for irregular conjugations etc.

Don't worry too much though, as long as you do the same stemming on the =
query string as you did while indexing - you should be able to find what =
you are looking for but can have some issues with trailing =
wildcards.....

If you want a better stemmer, look for something that has a dictionary =
as well as algorithmic rules - a quick one that is readily available is =
Kstem which while not perfect I think is quite a bit better than Porter.

You can get the source code (Kstem.jar) from the floowing website:

http://ciir.cs.umass.edu/downloads/

For more info on Kstem see the paper by its designer Bob Krovetz at:

http://ciir.cs.umass.edu/pubfiles/ir-35.pdf

Cheers

Pete


----- Original Message -----=20
From: "Yousef Ourabi" <yousef_ourabi@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Saturday, November 06, 2004 1:13 AM
Subject: Stemming Oddness


> Hey,
> Thanks for everyone's reply to my last post, I have
> some quesiton. I imported the PorterStemmer and when I
> did the following
>=20
> PorterStemmer ps =3D new PorterStemmer();
> string r1 =3D ps.stem("elephant");
> r1 is 'eleph'
>=20
> also buying stems to bui, is this normal? Am I doing
> something wrong.
>=20
> I am calling reset inbetween function calls.
>=20
> Thanks,
> Yousef
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>=20
> 
------=_NextPart_000_056D_01C4C3E8.C92DFDC0--


From lucene-user-return-11060-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 06 12:24:07 2004
Return-Path: <lucene-user-return-11060-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43217 invoked from network); 6 Nov 2004 12:24:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Nov 2004 12:24:07 -0000
Received: (qmail 342 invoked by uid 500); 6 Nov 2004 12:23:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 218 invoked by uid 500); 6 Nov 2004 12:23:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 164 invoked by uid 99); 6 Nov 2004 12:23:42 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of mark@weballistics.com designates 82.68.192.116 as permitted sender)
Received: from [82.68.192.116] (HELO mail.weballistics.co.uk) (82.68.192.116)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 06 Nov 2004 04:23:41 -0800
Received: (qmail 17238 invoked from network); 6 Nov 2004 12:22:57 -0000
Received: from dev.weballistics.co.uk (HELO ?192.168.4.37?) (192.168.4.37)
  by mail.weballistics.co.uk with SMTP; 6 Nov 2004 12:22:57 -0000
Subject: query boosting using a word list.
From: Mark Page <mark@weballistics.com>
To: lucene-user@jakarta.apache.org
Content-Type: text/plain
Organization: WEBallistics
Message-Id: <1099743773.6724.42.camel@dev.weballistics.co.uk>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.5 (1.4.5-7) 
Date: Sat, 06 Nov 2004 12:22:54 +0000
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I have a database table of text flattend out and indexed.

Although searching with fuzzy query works well in most instances, on
occasions however the target record appears way down the list of
matching records.

This is because the query text may contain lots of irrelevant terms (in
the context of the app) because the data is pulled from another source.

To solve this I need to create a word list, so that the terms that are
important to the app are boosted in the search. as an example...

word list contains car manufacturers and models:-
...
volkswagon
golf
polo
...

query text = "gleaming white 2-door volkswagon golf"

search = "gleaming white 2 door volkswagon^9 golf^9"

I can use regexes to massage the raw query text, but was wondering if
there is a more elegant solution available within the Lucene API.

As a Lucene newbie any pointers or suggestion to solve what must be
quite a common scenario appreciated. 

Regards, -Mark. 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11061-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 06 13:30:04 2004
Return-Path: <lucene-user-return-11061-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68218 invoked from network); 6 Nov 2004 13:30:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Nov 2004 13:30:04 -0000
Received: (qmail 67939 invoked by uid 500); 6 Nov 2004 13:29:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67900 invoked by uid 500); 6 Nov 2004 13:29:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67866 invoked by uid 99); 6 Nov 2004 13:29:48 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=DATE_IN_PAST_96_XX
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [194.159.73.192] (HELO post-22.mail.nl.demon.net) (194.159.73.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 06 Nov 2004 05:29:47 -0800
Received: from tijink.demon.nl ([82.161.62.129]:61847 helo=pc)
	by post-22.mail.nl.demon.net with esmtp (Exim 4.34)
	id 1CQQdT-000I2p-I3
	for lucene-user@jakarta.apache.org; Sat, 06 Nov 2004 13:29:44 +0000
From: "Harald Tijink" <harald@marktplaats.nl>
To: <lucene-user@jakarta.apache.org>
Subject: Lucene web demo problems
Date: Thu, 6 Nov 2003 14:30:56 +0100
Message-ID: <000101c3a46a$3563afc0$0300a8c0@pc>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2616
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

I was wondering if anyone has had the following problem before and knows
how to solve it.

I have a Debian Linux server on which I have running:
- Tomcat 4 as standalone server
- Java version "1.4.2_06"
- Java(TM) 2 Runtime Environment, Standard Edition (build 1.4.2_06-b03)
- Java HotSpot(TM) Client VM (build 1.4.2_06-b03, mixed mode)
- Lucene: lucene-1.4.2.jar

Tested the Tomcat 4 examples, no problems here.

Then I created an index in /opt/lucene/index with the command:
  java org.apache.lucene.demo.IndexHTML -create -index /opt/lucene/index
..

Still no problems, the files are created fine...but then I tried the web
interface. The first page shown fine (index.jsp). Then I entered some
keywords and hit "Search".

Now, the error on the bottom of this email is given and I can't get rid
of it.

I tried several things:
- tested if the lucene classes could be imported. At default no
compilation errors are given for results.jsp, but when I insert a
non-existing class in the import an error is given. My conclusion was:
the classes are imported ok
- tested if a simple java class could be compiled and the output shown
in Tomcat. No problems at all
- tested only the line <% IndexReader ir =
IndexReader.open("/opt/lucene/index"); %> between the header and footer
inclusion.
YES, the error occured. But now I completely stuck.

Anyone any idea how I can remove this problem?

Cheers,

Harald Tijink


THE ERROR:
------------------------------------------------------------------------
type Exception report

message 

description The server encountered an internal error () that prevented
it from fulfilling this request.

exception 

org.apache.jasper.JasperException
	at
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.ja
va:254)
	at
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:295)
	at
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
	at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applica
tionFilterChain.java:247)
	at
org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFi
lterChain.java:98)
	at
org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterC
hain.java:176)
	at java.security.AccessController.doPrivileged(Native Method)
	at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilt
erChain.java:172)
	at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValv
e.java:256)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.i
nvokeNext(StandardPipeline.java:643)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:4
80)
	at
org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValv
e.java:191)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.i
nvokeNext(StandardPipeline.java:643)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:4
80)
	at
org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at
org.apache.catalina.core.StandardContext.invoke(StandardContext.java:242
2)
	at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java
:180)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.i
nvokeNext(StandardPipeline.java:643)
	at
org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherVa
lve.java:171)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.i
nvokeNext(StandardPipeline.java:641)
	at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java
:163)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.i
nvokeNext(StandardPipeline.java:641)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:4
80)
	at
org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.
java:174)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.i
nvokeNext(StandardPipeline.java:643)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:4
80)
	at
org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at
org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:199)
	at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:82
8)
	at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processC
onnection(Http11Protocol.java:700)
	at
org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:58
4)
	at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool
.java:683)
	at java.lang.Thread.run(Thread.java:534)


root cause 

javax.servlet.ServletException
	at
org.apache.jasper.runtime.PageContextImpl.handlePageException(PageContex
tImpl.java:536)
	at org.apache.jsp.results_jsp._jspService(results_jsp.java:134)
	at
org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:137)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
	at
org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.ja
va:210)
	at
org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:295)
	at
org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
	at
org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applica
tionFilterChain.java:247)
	at
org.apache.catalina.core.ApplicationFilterChain.access$000(ApplicationFi
lterChain.java:98)
	at
org.apache.catalina.core.ApplicationFilterChain$1.run(ApplicationFilterC
hain.java:176)
	at java.security.AccessController.doPrivileged(Native Method)
	at
org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilt
erChain.java:172)
	at
org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValv
e.java:256)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.i
nvokeNext(StandardPipeline.java:643)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:4
80)
	at
org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at
org.apache.catalina.core.StandardContextValve.invoke(StandardContextValv
e.java:191)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.i
nvokeNext(StandardPipeline.java:643)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:4
80)
	at
org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at
org.apache.catalina.core.StandardContext.invoke(StandardContext.java:242
2)
	at
org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java
:180)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.i
nvokeNext(StandardPipeline.java:643)
	at
org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherVa
lve.java:171)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.i
nvokeNext(StandardPipeline.java:641)
	at
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java
:163)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.i
nvokeNext(StandardPipeline.java:641)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:4
80)
	at
org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at
org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.
java:174)
	at
org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.i
nvokeNext(StandardPipeline.java:643)
	at
org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:4
80)
	at
org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at
org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:199)
	at
org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:82
8)
	at
org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processC
onnection(Http11Protocol.java:700)
	at
org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:58
4)
	at
org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool
.java:683)
	at java.lang.Thread.run(Thread.java:534)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11062-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 06 17:53:07 2004
Return-Path: <lucene-user-return-11062-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68273 invoked from network); 6 Nov 2004 17:53:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Nov 2004 17:53:06 -0000
Received: (qmail 56753 invoked by uid 500); 6 Nov 2004 17:52:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 56640 invoked by uid 500); 6 Nov 2004 17:52:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 56492 invoked by uid 99); 6 Nov 2004 17:52:28 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.238] (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 06 Nov 2004 09:52:27 -0800
Received: (qmail 79713 invoked by uid 60001); 6 Nov 2004 17:52:25 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=ed6wKoWv5+zxfWmI/6Vy7h7OB8DizUbRldP7gWw+1H3aolQUZ2LM/dQiebwOqNA2prBCeYEDr7pP1VnBi3V4VQmqOg5l70TOTVqD523Qkv+cI8HSuSBay5fBcMy9myBb28Ym9kV5ub1m90A2xEqiu/H8HWOXYMmiNCF8znf7bNw=  ;
Message-ID: <20041106175225.79711.qmail@web12701.mail.yahoo.com>
Received: from [69.112.173.7] by web12701.mail.yahoo.com via HTTP; Sat, 06 Nov 2004 09:52:25 PST
Date: Sat, 6 Nov 2004 09:52:25 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: query boosting using a word list.
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <1099743773.6724.42.camel@dev.weballistics.co.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Mark,

It sounds like you could extend QueryParser and override one of the
Query get***Query methods (getFieldQuery?), perhaps first calling the
super method, and then adding a boost based on the words, which you
would look up in your implementation of the getFieldQuery method.

Otis


--- Mark Page <mark@weballistics.com> wrote:

> Hi,
> 
> I have a database table of text flattend out and indexed.
> 
> Although searching with fuzzy query works well in most instances, on
> occasions however the target record appears way down the list of
> matching records.
> 
> This is because the query text may contain lots of irrelevant terms
> (in
> the context of the app) because the data is pulled from another
> source.
> 
> To solve this I need to create a word list, so that the terms that
> are
> important to the app are boosted in the search. as an example...
> 
> word list contains car manufacturers and models:-
> ...
> volkswagon
> golf
> polo
> ...
> 
> query text = "gleaming white 2-door volkswagon golf"
> 
> search = "gleaming white 2 door volkswagon^9 golf^9"
> 
> I can use regexes to massage the raw query text, but was wondering if
> there is a more elegant solution available within the Lucene API.
> 
> As a Lucene newbie any pointers or suggestion to solve what must be
> quite a common scenario appreciated. 
> 
> Regards, -Mark. 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11063-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 06 19:51:56 2004
Return-Path: <lucene-user-return-11063-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99774 invoked from network); 6 Nov 2004 19:51:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Nov 2004 19:51:56 -0000
Received: (qmail 31615 invoked by uid 500); 6 Nov 2004 19:51:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 31500 invoked by uid 500); 6 Nov 2004 19:51:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 31484 invoked by uid 99); 6 Nov 2004 19:51:41 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of mark@weballistics.com designates 82.68.192.116 as permitted sender)
Received: from [82.68.192.116] (HELO mail.weballistics.co.uk) (82.68.192.116)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 06 Nov 2004 11:51:39 -0800
Received: (qmail 17653 invoked from network); 6 Nov 2004 19:51:01 -0000
Received: from dev.weballistics.co.uk (HELO ?192.168.4.37?) (192.168.4.37)
  by mail.weballistics.co.uk with SMTP; 6 Nov 2004 19:51:01 -0000
Subject: Re: query boosting using a word list.
From: Mark Page <mark@weballistics.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20041106175225.79711.qmail@web12701.mail.yahoo.com>
References: <20041106175225.79711.qmail@web12701.mail.yahoo.com>
Content-Type: text/plain
Organization: WEBallistics
Message-Id: <1099770657.6724.59.camel@dev.weballistics.co.uk>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.5 (1.4.5-7) 
Date: Sat, 06 Nov 2004 19:50:58 +0000
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Otis,

thanks for the reply. I'll have to read up the javadocs a bit more
before I fully understand your answer. ;)

One thing I had noticed in the docs (and was half expecting to get
pointed towards) is the WordlistLoader class. I was thinking that I
could maybe use this and create a kind of 'reverse' of the stop-word
list (boosting instead of removing), or am I barking up the wrong tree?

regards, -Mark.

On Sat, 2004-11-06 at 17:52, Otis Gospodnetic wrote:
> Hello Mark,
> 
> It sounds like you could extend QueryParser and override one of the
> Query get***Query methods (getFieldQuery?), perhaps first calling the
> super method, and then adding a boost based on the words, which you
> would look up in your implementation of the getFieldQuery method.
> 
> Otis
> 
> 
> --- Mark Page <mark@weballistics.com> wrote:
> 
> > Hi,
> > 
> > I have a database table of text flattend out and indexed.
> > 
> > Although searching with fuzzy query works well in most instances, on
> > occasions however the target record appears way down the list of
> > matching records.
> > 
> > This is because the query text may contain lots of irrelevant terms
> > (in
> > the context of the app) because the data is pulled from another
> > source.
> > 
> > To solve this I need to create a word list, so that the terms that
> > are
> > important to the app are boosted in the search. as an example...
> > 
> > word list contains car manufacturers and models:-
> > ...
> > volkswagon
> > golf
> > polo
> > ...
> > 
> > query text = "gleaming white 2-door volkswagon golf"
> > 
> > search = "gleaming white 2 door volkswagon^9 golf^9"
> > 
> > I can use regexes to massage the raw query text, but was wondering if
> > there is a more elegant solution available within the Lucene API.
> > 
> > As a Lucene newbie any pointers or suggestion to solve what must be
> > quite a common scenario appreciated. 
> > 
> > Regards, -Mark. 
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
-- 
Mark Page
WEBallistics
tel/fax: +44(0)20 7704 9885


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11064-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 06 20:42:04 2004
Return-Path: <lucene-user-return-11064-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19818 invoked from network); 6 Nov 2004 20:42:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 6 Nov 2004 20:42:04 -0000
Received: (qmail 82748 invoked by uid 500); 6 Nov 2004 20:41:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82620 invoked by uid 500); 6 Nov 2004 20:41:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82576 invoked by uid 99); 6 Nov 2004 20:41:26 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.240] (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 06 Nov 2004 12:41:22 -0800
Received: (qmail 12694 invoked by uid 60001); 6 Nov 2004 20:41:20 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=iFT/Y2EvOquIYtLjEnGtptG5ZFKSedjAFt+W3jAxIIyFqcXCt5LLIwit9QFTskktXiGOWXv0wRaRP/P4sbAxSd3+tK/T6bY8R2Y1Rne+3IJ9/hpsnYcRsU4o0Vz8Hd2k5oLTy/rkQrK/TSUM23M7DMtk2Zcv5+EsaaFuLCBQqJE=  ;
Message-ID: <20041106204119.12692.qmail@web12703.mail.yahoo.com>
Received: from [69.112.173.7] by web12703.mail.yahoo.com via HTTP; Sat, 06 Nov 2004 12:41:19 PST
Date: Sat, 6 Nov 2004 12:41:19 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: query boosting using a word list.
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <1099770657.6724.59.camel@dev.weballistics.co.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sure, you can use that class - that is just a utility class for reading
in words from a file, nothing really Lucene-specific.

Otis

--- Mark Page <mark@weballistics.com> wrote:

> Hi Otis,
> 
> thanks for the reply. I'll have to read up the javadocs a bit more
> before I fully understand your answer. ;)
> 
> One thing I had noticed in the docs (and was half expecting to get
> pointed towards) is the WordlistLoader class. I was thinking that I
> could maybe use this and create a kind of 'reverse' of the stop-word
> list (boosting instead of removing), or am I barking up the wrong
> tree?
> 
> regards, -Mark.
> 
> On Sat, 2004-11-06 at 17:52, Otis Gospodnetic wrote:
> > Hello Mark,
> > 
> > It sounds like you could extend QueryParser and override one of the
> > Query get***Query methods (getFieldQuery?), perhaps first calling
> the
> > super method, and then adding a boost based on the words, which you
> > would look up in your implementation of the getFieldQuery method.
> > 
> > Otis
> > 
> > 
> > --- Mark Page <mark@weballistics.com> wrote:
> > 
> > > Hi,
> > > 
> > > I have a database table of text flattend out and indexed.
> > > 
> > > Although searching with fuzzy query works well in most instances,
> on
> > > occasions however the target record appears way down the list of
> > > matching records.
> > > 
> > > This is because the query text may contain lots of irrelevant
> terms
> > > (in
> > > the context of the app) because the data is pulled from another
> > > source.
> > > 
> > > To solve this I need to create a word list, so that the terms
> that
> > > are
> > > important to the app are boosted in the search. as an example...
> > > 
> > > word list contains car manufacturers and models:-
> > > ...
> > > volkswagon
> > > golf
> > > polo
> > > ...
> > > 
> > > query text = "gleaming white 2-door volkswagon golf"
> > > 
> > > search = "gleaming white 2 door volkswagon^9 golf^9"
> > > 
> > > I can use regexes to massage the raw query text, but was
> wondering if
> > > there is a more elegant solution available within the Lucene API.
> > > 
> > > As a Lucene newbie any pointers or suggestion to solve what must
> be
> > > quite a common scenario appreciated. 
> > > 
> > > Regards, -Mark. 
> > > 
> > > 
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > > 
> > > 
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > 
> -- 
> Mark Page
> WEBallistics
> tel/fax: +44(0)20 7704 9885
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11065-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 07 12:09:21 2004
Return-Path: <lucene-user-return-11065-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36714 invoked from network); 7 Nov 2004 12:09:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Nov 2004 12:09:20 -0000
Received: (qmail 87897 invoked by uid 500); 7 Nov 2004 12:09:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87782 invoked by uid 500); 7 Nov 2004 12:09:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87650 invoked by uid 99); 7 Nov 2004 12:09:12 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of commandor@inbox.ru designates 194.67.57.46 as permitted sender)
Received: from [194.67.57.46] (HELO f16.mail.ru) (194.67.57.46)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 07 Nov 2004 04:09:12 -0800
Received: from mail by f16.mail.ru with local 
	id 1CQlr3-000Dr4-00
	for lucene-user@jakarta.apache.org; Sun, 07 Nov 2004 15:09:09 +0300
Received: from [213.184.241.38] by win.mail.ru with HTTP;
	Sun, 07 Nov 2004 15:09:09 +0300
From: commandor <commandor@inbox.ru>
To: lucene-user@jakarta.apache.org
Subject: Transaction in Lucene
Mime-Version: 1.0
X-Mailer: mPOP Web-Mail 2.19
X-Originating-IP: [213.184.241.38]
Date: Sun, 07 Nov 2004 15:09:09 +0300
Reply-To: commandor <commandor@inbox.ru>
Content-Type: text/plain; charset=koi8-r
Content-Transfer-Encoding: 8bit
Message-Id: <E1CQlr3-000Dr4-00.commandor-inbox-ru@f16.mail.ru>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

I came across the following problem with "No tvx file". 

How could I manage to get it?
I like to have transaction processes in Lucene.
After my reading dev-lucene and user-lucene lists and analysing what people suggested
I made up my own.

The problem in my case is that I had to make several changes and only than make commit.
That's why I did the following:

1. Turn off Lucene lock (setting the corresponding system variable = false)

2. Start the loop (from the first document to the last one to change in the index)

2.1. Open IndexReader 
2.2. Get a document by its id
2.3. Store it as local variable
2.4. IndexReader.delete(document id)
2.5. IndexReader.close()
2.6. Merge new Terms (changes) and old ones in the document I retrieved
2.6. Open IndexWriter
2.7. Add a new made document

3. end of loop

4. Waiting for other action ends in my programm I close IndexWriter.

The Result:
Everything works fine but I had "No tvx file"
I really worried about it cause I read what for tvx file...

Might anybody explain me what I did wrong?

In spite of your answer I did like the following: the way of logging messages

This message appeared with the help of System.out.println()

Investigating the code of Lucene I found a lot of places of using System.out 

I guess it is not a very good solution espessially in so beautiful search/indexing API. 
I guess Lucene must have a normal log to write its messages.

Thanks in advance...



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11066-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 07 14:09:54 2004
Return-Path: <lucene-user-return-11066-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64772 invoked from network); 7 Nov 2004 14:09:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Nov 2004 14:09:54 -0000
Received: (qmail 69237 invoked by uid 500); 7 Nov 2004 14:09:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69213 invoked by uid 500); 7 Nov 2004 14:09:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69198 invoked by uid 99); 7 Nov 2004 14:09:43 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.241] (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by apache.org (qpsmtpd/0.28) with SMTP; Sun, 07 Nov 2004 06:09:43 -0800
Received: (qmail 32711 invoked by uid 60001); 7 Nov 2004 14:09:42 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=1DMwu9qqU/D45ECO2zLlKsYPHDx+c5fT+423P5Qa+bF7yNLuJWf8tZ4YeoNhub71VYbxZaM3yxeVSpTYFlP4IQj6aUxbaoyxkY90vU/A4I5BS9kgRBKrZtCEFRvKHbmeqaLadzVvUGoERRfsHO1ctwipP2dnNliqzekoBTtQeI4=  ;
Message-ID: <20041107140941.32709.qmail@web12704.mail.yahoo.com>
Received: from [69.112.173.7] by web12704.mail.yahoo.com via HTTP; Sun, 07 Nov 2004 06:09:41 PST
Date: Sun, 7 Nov 2004 06:09:41 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Transaction in Lucene
To: Lucene Users List <lucene-user@jakarta.apache.org>,
  commandor <commandor@inbox.ru>
In-Reply-To: <E1CQlr3-000Dr4-00.commandor-inbox-ru@f16.mail.ru>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm not sure about the tvx error, but I think I recall somebody
changing some code around it a month or two ago.  I also believe
System.out.println is on the TODO list for elimination.

Otis

--- commandor <commandor@inbox.ru> wrote:

> Hello,
> 
> I came across the following problem with "No tvx file". 
> 
> How could I manage to get it?
> I like to have transaction processes in Lucene.
> After my reading dev-lucene and user-lucene lists and analysing what
> people suggested
> I made up my own.
> 
> The problem in my case is that I had to make several changes and only
> than make commit.
> That's why I did the following:
> 
> 1. Turn off Lucene lock (setting the corresponding system variable =
> false)
> 
> 2. Start the loop (from the first document to the last one to change
> in the index)
> 
> 2.1. Open IndexReader 
> 2.2. Get a document by its id
> 2.3. Store it as local variable
> 2.4. IndexReader.delete(document id)
> 2.5. IndexReader.close()
> 2.6. Merge new Terms (changes) and old ones in the document I
> retrieved
> 2.6. Open IndexWriter
> 2.7. Add a new made document
> 
> 3. end of loop
> 
> 4. Waiting for other action ends in my programm I close IndexWriter.
> 
> The Result:
> Everything works fine but I had "No tvx file"
> I really worried about it cause I read what for tvx file...
> 
> Might anybody explain me what I did wrong?
> 
> In spite of your answer I did like the following: the way of logging
> messages
> 
> This message appeared with the help of System.out.println()
> 
> Investigating the code of Lucene I found a lot of places of using
> System.out 
> 
> I guess it is not a very good solution espessially in so beautiful
> search/indexing API. 
> I guess Lucene must have a normal log to write its messages.
> 
> Thanks in advance...
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11067-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 07 21:51:26 2004
Return-Path: <lucene-user-return-11067-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4734 invoked from network); 7 Nov 2004 21:51:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 7 Nov 2004 21:51:26 -0000
Received: (qmail 34242 invoked by uid 500); 7 Nov 2004 21:51:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34191 invoked by uid 500); 7 Nov 2004 21:51:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34178 invoked by uid 99); 7 Nov 2004 21:51:18 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_50_60,HTML_MESSAGE,HTML_TITLE_EMPTY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 07 Nov 2004 13:51:17 -0800
Received: from [192.168.0.14] (dsl027-183-034.sfo1.dsl.speakeasy.net [216.27.183.34])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id iA7LlJvp012101
	for <lucene-user@jakarta.apache.org>; Sun, 7 Nov 2004 13:47:20 -0800
Message-ID: <418E97DE.5010608@newsmonster.org>
Date: Sun, 07 Nov 2004 13:47:10 -0800
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Lucene external field storage contribution.
Content-Type: multipart/alternative;
 boundary="------------000203050802040408080004"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------000203050802040408080004
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

About 3 months ago I developed a external storage engine which ties into 
lucene. 

I'd like to discuss making a contribution so that this is integrated 
into a future version of Lucene.

I'm going to paste my original PROPOSAL in this email. 

There wasn't a ton of feedback first time around but I figure squeaky 
wheel gets the grease...


>>
>>
>> I created this proposal because we need this fixed at work. I want to 
>> go ahead and work on a vertical fix for our version of lucene and then 
>> submit this back to Jakarta.
>> There seems to be a lot of interest here and I wanted to get feedback 
>> from the list before moving forward ...
>>
>> Should I put this in the wiki?!
>>
>> Kevin
>>
>> ** OVERVIEW **
>>
>> Currently Lucene supports 'stored fields; where the content of these 
>> fields are
>> kept within the lucene index for use in the future.
>>
>> While acceptable for small indexes, larger amounts of stored fields 
>> prevent:
>>
>> - Fast index merges since the full content has to be continually merged.
>>
>> - Storing the indexes in memory (since a LOT of memory would be 
>> required and
>> this is cost prohibitive)
>>
>> - Fast queries since block caching can't be used on the index data.
>>
>> For example in our current setup our index size is 20G.  Nearly 90% of 
>> this is
>> content.  If we could store the content outside of Lucene our merges and
>> searches would be MUCH faster.  If we could store the index in MEMORY 
>> this could
>> be orders of magnitude faster.
>>
>> ** PROPOSAL **
>>
>> Provide an external field storage mechanism which supports legacy indexes
>> without modification.  Content is stored in a "content segment". The only
>> changes would be a field with 3(or 4 if checksum enabled) values.
>>
>> - CS_SEGMENT
>>
>>       Logical ID of the content segment.  This is an integer value.  
>> There is
>>       a global Lucene property named CS_ROOT which stores all the 
>> content.
>>       The segments are just flat files with pointers.  Segments are 
>> broken
>>       into logical pieces by time and size.  Usually 100M of content 
>> would be
>>       in one segment.
>>
>> - CS_OFFSET
>>
>>       The byte offset of the field.
>>
>> - CS_LENGTH
>>
>>       The length of the field.
>>
>> - CS_CHECKSUM
>>
>>       Optional checksum to verify that the content is correct when 
>> fetched
>>       from the index.
>>
>> - The field value here would be exactly 'N:O:L' where N is the segment 
>> number,
>>   O is the offset, and L is the length.  O and L are 64bit values.  N 
>> is a 32
>>   bit value (though 64bit wouldn't really hurt).
>>
>> This mechanism allows for the external storage of any named field.
>>  
>> CS_OFFSET, and CS_LENGTH allow use with RandomAccessFile and new NIO 
>> code for
>> efficient content lookup.  (Though filehandle caching should probably 
>> be used).
>>
>> Since content is broken into logical 100M segments the underlying 
>> filesystem can
>> orgnize the file into contiguous blocks for efficient non-fragmented 
>> lookup.
>>
>> File manipulation is easy and indexes can be merged by simply 
>> concatenating the
>> second file to the end of the first.  (Though the segment, offset, and 
>> length
>> need to be updated).  (FIXME: I think I need to think about this more 
>> since I
>> will have < 100M per syncs)
>>
>> Supporting full unicode is important.  Full java.lang.String storage 
>> is used
>> with String.getBytes() so we should be able to avoid unicode issues.  
>> If Java
>> has a correct java.lang.String representation it's possible easily add 
>> unicode
>> support just by serializing the byte representation. (Note that the 
>> JDK says
>> that the DEFAULT system char encoding is used so if this is ever 
>> changed it
>> might break the index)
>>
>> While Linux and modern versions of Windows (not sure about OSX) 
>> support 64bit
>> filesystems the 4G storage boundary of 32bit filesystems (ext2 is an 
>> example)
>> are an issue.  Using smaller indexes can prevent this but eventually 
>> segment
>> lookup in the filesystem will be slow.  This will only happen within 
>> terabyte
>> storage systems so hopefully the developer has migrated to another 
>> (modern)
>> filesystem such as XFS.
>>
>> ** FEATURES **
>>
>>   - Must be able to replicate indexes easily to other hosts.
>>
>>   - Adding content to the index must be CHEAP
>>
>>   - Deletes need to be cheap (these are cheap for older content.  Just 
>> discard
>>     older indexes)
>>
>>   - Filesystem needs to be able to optimize storage
>>
>>   - Must support UNICODE and binary content (images, blobs, byte arrays,
>>     serialized objects, etc)
>>
>>   - Filesystem metadata operations should be fast.  Since content is 
>> kept in
>>     LARGE indexes this is easy to avoid.
>>
>>   - Migration to the new system from legacy indexes should be fast and
>>     painless for future developers
>>  
>  
>


-- 

Use Rojo (RSS/Atom aggregator).  Visit http://rojo.com. Ask me for an 
invite!  Also see irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

If you're interested in RSS, Weblogs, Social Networking, etc... then you 
should work for Rojo!  If you recommend someone and we hire them you'll 
get a free iPod!
    
Kevin A. Burton, Location - San Francisco, CA
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412


--------------000203050802040408080004--

From lucene-user-return-11068-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 02:58:11 2004
Return-Path: <lucene-user-return-11068-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98931 invoked from network); 8 Nov 2004 02:58:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 02:58:11 -0000
Received: (qmail 52817 invoked by uid 500); 8 Nov 2004 02:58:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52710 invoked by uid 500); 8 Nov 2004 02:58:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52690 invoked by uid 99); 8 Nov 2004 02:58:02 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FROM_ENDS_IN_NUMS,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of abdo1234@msn.com designates 64.4.39.2 as permitted sender)
Received: from [64.4.39.2] (HELO hotmail.com) (64.4.39.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 07 Nov 2004 18:58:02 -0800
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Sun, 7 Nov 2004 18:58:00 -0800
Received: from 81.10.82.140 by by11fd.bay11.hotmail.msn.com with HTTP;
	Mon, 08 Nov 2004 02:57:14 GMT
X-Originating-IP: [81.10.82.140]
X-Originating-Email: [abdo1234@msn.com]
X-Sender: abdo1234@msn.com
From: "abdulrahman galal" <abdo1234@msn.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: Re: Does lucene makes any compression
Date: Mon, 08 Nov 2004 04:57:14 +0200
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY11-F2aVI9Lr1tnVN00020e0a@hotmail.com>
X-OriginalArrivalTime: 08 Nov 2004 02:58:00.0526 (UTC) FILETIME=[C1EAEEE0:01C4C53E]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


i got the c# of lucene thanks god @ http://sourceforge.net/projects/nlucene

what about the new version that include the compression facility ?

you did n't replay on my qustion does it compress original text files and 
its indexs like Great MG ....

thanks alot

_________________________________________________________________
FREE pop-up blocking with the new MSN Toolbar - get it now! 
http://toolbar.msn.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11069-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 04:37:28 2004
Return-Path: <lucene-user-return-11069-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24546 invoked from network); 8 Nov 2004 04:37:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 04:37:28 -0000
Received: (qmail 29210 invoked by uid 500); 8 Nov 2004 04:37:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29137 invoked by uid 500); 8 Nov 2004 04:37:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29121 invoked by uid 99); 8 Nov 2004 04:37:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.200 as permitted sender)
Received: from [64.233.170.200] (HELO rproxy.gmail.com) (64.233.170.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 07 Nov 2004 20:37:06 -0800
Received: by rproxy.gmail.com with SMTP id a41so290232rng
        for <lucene-user@jakarta.apache.org>; Sun, 07 Nov 2004 20:36:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=fhTseCNnVfoTl1zjpIv6xqC6SlVEPGvKxtvbPdZXKF2+7EVsZdYMR8eSSWG6QdLb2oJQ3f+G6Mnl/J8/tTsuPx/ICu6MeL6g+wDZOMpWClbF+6YyDmz7+FwCOdFr+VbJABSYH3DAcfIAsB7sHZDvUefroLZAnZu5Jw3Nsj8Ocqs=
Received: by 10.38.67.12 with SMTP id p12mr1336908rna;
        Sun, 07 Nov 2004 20:36:57 -0800 (PST)
Received: by 10.38.72.80 with HTTP; Sun, 7 Nov 2004 20:36:55 -0800 (PST)
Message-ID: <cbdebdf8041107203626db0f12@mail.gmail.com>
Date: Sun, 7 Nov 2004 20:36:55 -0800
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: deleting with an open writer.
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

part of my indexing process is determining if an older instance of the
current document bring indexed exists.. and if it does, delete it.

which required me to have an IndexWriter open .. and then an
IndexReader... when I call the delete of a document, I of course get
an io exception caused by the lucene lock.

Is there any way around this? I've tried to simply close the writer,
delete, and then reopen, but that seems to not have much of an affect.

anyone have any luck with deleting and writing at the same time?

-- 
___________________________________________________
Chris Fraschetti
e fraschetti@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11070-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 04:47:46 2004
Return-Path: <lucene-user-return-11070-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26991 invoked from network); 8 Nov 2004 04:47:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 04:47:46 -0000
Received: (qmail 45743 invoked by uid 500); 8 Nov 2004 04:47:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45638 invoked by uid 500); 8 Nov 2004 04:47:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45625 invoked by uid 99); 8 Nov 2004 04:47:39 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=LINES_OF_YELLING,LINES_OF_YELLING_2,UPPERCASE_75_100
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Sun, 07 Nov 2004 20:47:38 -0800
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I6UGKW00.H01 for <lucene-user@jakarta.apache.org>; Mon,
          8 Nov 2004 10:30:32 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: UPDATION+MERGERINDEX
Date: Mon, 8 Nov 2004 10:24:43 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIIENCCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi Guys


Apologies.............


a) 

1) SEARCH FOR SUBINDEX IN A  OPTIMISED MERGED INDEX
2) DELETE THE FOUND SUBINDEX FROM THE OPTIMISED MERGERINDEX
3) OPTIMISE THE MERGERINDEX
4) ADD A NEW VERSION OF THE SUBINDEX TO THE MERGER INDEX
5) OPTIMISE THE MERGERINDEX



b)

1) SEARCH FOR SUBINDEX IN A  OPTIMISED MERGED INDEX
2) DELETE THE FOUND SUBINDEX FROM THE OPTIMISED MERGERINDEX
3) ADD A NEW VERSION OF THE SUBINDEX TO THE MERGER INDEX
4) OPTIMISE THE MERGERINDEX


 a  OR  b      WHICH IS BETTER CHOICE 



THX IN ADVANCE

        
      WITH WARM REGARDS 
      HAVE A NICE DAY 
      [ N.S.KARTHIK] 
     



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11071-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 05:00:10 2004
Return-Path: <lucene-user-return-11071-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32318 invoked from network); 8 Nov 2004 05:00:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 05:00:10 -0000
Received: (qmail 69377 invoked by uid 500); 8 Nov 2004 05:00:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69318 invoked by uid 500); 8 Nov 2004 05:00:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69269 invoked by uid 99); 8 Nov 2004 05:00:02 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=UPPERCASE_50_75
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 07 Nov 2004 21:00:00 -0800
Received: from [192.168.0.3] [217.165.89.127] by mail.bayt.net with ESMTP
  (SMTPD32-8.13) id AF2B56AB013C; Mon, 08 Nov 2004 00:07:55 -0500
Message-ID: <418EFD46.2040505@bayt.net>
Date: Mon, 08 Nov 2004 08:59:50 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: UPDATION+MERGERINDEX
References: <LOEGLEEGOAKBOLAJCCKIIENCCCAA.karthik@controlnet.co.in>
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIIENCCCAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Well if you do all the steps in one run, I guess optimizing once at the 
end would be faster overall, but all you have to do is test it out and 
time it, performance wise, I don't think that step 3 (OPTIMIZE) in 
scenario (a) will really improve the performance of the new index merge.

my 2 cents

Nader Henein

Karthik N S wrote:

>Hi Guys
>
>
>Apologies.............
>
>
>a) 
>
>1) SEARCH FOR SUBINDEX IN A  OPTIMISED MERGED INDEX
>2) DELETE THE FOUND SUBINDEX FROM THE OPTIMISED MERGERINDEX
>3) OPTIMISE THE MERGERINDEX
>4) ADD A NEW VERSION OF THE SUBINDEX TO THE MERGER INDEX
>5) OPTIMISE THE MERGERINDEX
>
>
>
>b)
>
>1) SEARCH FOR SUBINDEX IN A  OPTIMISED MERGED INDEX
>2) DELETE THE FOUND SUBINDEX FROM THE OPTIMISED MERGERINDEX
>3) ADD A NEW VERSION OF THE SUBINDEX TO THE MERGER INDEX
>4) OPTIMISE THE MERGERINDEX
>
>
> a  OR  b      WHICH IS BETTER CHOICE 
>
>
>
>THX IN ADVANCE
>
>        
>      WITH WARM REGARDS 
>      HAVE A NICE DAY 
>      [ N.S.KARTHIK] 
>     
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11072-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 06:02:44 2004
Return-Path: <lucene-user-return-11072-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52896 invoked from network); 8 Nov 2004 06:02:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 06:02:43 -0000
Received: (qmail 33285 invoked by uid 500); 8 Nov 2004 06:02:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33250 invoked by uid 500); 8 Nov 2004 06:02:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33224 invoked by uid 99); 8 Nov 2004 06:02:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of giulio.cesare@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 07 Nov 2004 22:02:35 -0800
Received: by wproxy.gmail.com with SMTP id 44so335291wri
        for <lucene-user@jakarta.apache.org>; Sun, 07 Nov 2004 22:02:30 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=ZFqxzKUKDlOAIgCdKGlVUAv9sQBO+6aRMf/cnCHgCprkatRHs7SVVj77AbhmQv2xEiyGz65DcXh2fGqLImpmr7yl8aKqbkGPfJ1r+G1TuUo0zZHjIJ/JjmBJtAHK2QiK7wu3tUFJNljLSmeIHNG5LMO7diG+pgukQDa4RB5U5mE=
Received: by 10.54.13.48 with SMTP id 48mr155700wrm;
        Sun, 07 Nov 2004 22:02:30 -0800 (PST)
Received: by 10.54.41.42 with HTTP; Sun, 7 Nov 2004 22:02:30 -0800 (PST)
Message-ID: <ff737ac3041107220224adbf8a@mail.gmail.com>
Date: Mon, 8 Nov 2004 07:02:30 +0100
From: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
Reply-To: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
To: Chris Fraschetti <fraschetti@gmail.com>
Subject: Re: deleting with an open writer.
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <cbdebdf8041107203626db0f12@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <cbdebdf8041107203626db0f12@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Chris,

we had the same problem and we have "fixed" it changing our indexing procedure.

The basic idea is to have a stored/not tokenized/indexed unique
primary key for each document (let's call it simply ID, even if it not
the docID managed by lucene itself).
With this ID, you can insert all you new documents into the index;
this may cause some duplicated (according to you ID) but lucene won't
complain.

After adding all you new/updated documents (and having your index
writer close), you can use the list of the just indexed documents to
search on the lucene index if any of the new inserted IDs match with
multiple documents; this later condition should happen only when a
document have been re-inserted having been updated.

If any of the ID has multiple match, you can delete the old versions
of the document on the lucene index. You can find out the old versions
comparing the lucene docID of the matching documents, being the latest
version the one with the greatest docID.

Hope this helps.

Giulio Cesare Solaroli

On Sun, 7 Nov 2004 20:36:55 -0800, Chris Fraschetti
<fraschetti@gmail.com> wrote:
> part of my indexing process is determining if an older instance of the
> current document bring indexed exists.. and if it does, delete it.
> 
> which required me to have an IndexWriter open .. and then an
> IndexReader... when I call the delete of a document, I of course get
> an io exception caused by the lucene lock.
> 
> Is there any way around this? I've tried to simply close the writer,
> delete, and then reopen, but that seems to not have much of an affect.
> 
> anyone have any luck with deleting and writing at the same time?
> 
> --
> ___________________________________________________
> Chris Fraschetti
> e fraschetti@gmail.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11073-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 06:12:07 2004
Return-Path: <lucene-user-return-11073-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55613 invoked from network); 8 Nov 2004 06:12:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 06:12:06 -0000
Received: (qmail 41785 invoked by uid 500); 8 Nov 2004 06:11:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41741 invoked by uid 500); 8 Nov 2004 06:11:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41727 invoked by uid 99); 8 Nov 2004 06:11:55 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_BY_IP,RCVD_IN_BL_SPAMCOP_NET,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of giulio.cesare@gmail.com designates 64.233.184.197 as permitted sender)
Received: from [64.233.184.197] (HELO wproxy.gmail.com) (64.233.184.197)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 07 Nov 2004 22:11:53 -0800
Received: by wproxy.gmail.com with SMTP id 66so194265wri
        for <lucene-user@jakarta.apache.org>; Sun, 07 Nov 2004 22:11:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=RahPCEVDWnnMG+9+GhX9HYTIpV1gfNgc1XDJZgdlpItWf7WHWG7hANF/AikM5n6ubbU9680YxVGvwd6zv4XeLU7M3H3vw6TZphsurO+pFLHpUcKgFTaPB21E/L8UEDWUgm86CZFRELtkK6IS692MICTaSEKk8qrvynYdv5w0iT0=
Received: by 10.54.10.44 with SMTP id 44mr110949wrj;
        Sun, 07 Nov 2004 22:11:48 -0800 (PST)
Received: by 10.54.41.42 with HTTP; Sun, 7 Nov 2004 22:11:48 -0800 (PST)
Message-ID: <ff737ac30411072211aaf29ed@mail.gmail.com>
Date: Mon, 8 Nov 2004 07:11:48 +0100
From: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
Reply-To: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
To: "Kevin A. Burton" <burton@newsmonster.org>
Subject: Re: Lucene external field storage contribution.
Cc: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <418E97DE.5010608@newsmonster.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <418E97DE.5010608@newsmonster.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Kevin


On Sun, 07 Nov 2004 13:47:10 -0800, Kevin A. Burton
<burton@newsmonster.org> wrote:
> About 3 months ago I developed a external storage engine which ties into
> lucene.
> 
> I'd like to discuss making a contribution so that this is integrated
> into a future version of Lucene.
> 
> I'm going to paste my original PROPOSAL in this email.
> 
> There wasn't a ton of feedback first time around but I figure squeaky
> wheel gets the grease...

You should probably better post this kind of message to the developer
list to get more feedback.

Anyway your suggestion makes a lot of sense.

I would like to suggest a further extensions: storing TermVectors on
their own separate segment(s).

The rationale for this feature is a carbon copy of your original post. :-]

Hope to see your patch in one of the next release.

Giulio Cesare Solaroli

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11074-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 08:43:41 2004
Return-Path: <lucene-user-return-11074-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23424 invoked from network); 8 Nov 2004 08:43:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 08:43:41 -0000
Received: (qmail 1954 invoked by uid 500); 8 Nov 2004 08:43:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1931 invoked by uid 500); 8 Nov 2004 08:43:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1909 invoked by uid 99); 8 Nov 2004 08:43:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 08 Nov 2004 00:43:28 -0800
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 8 Nov 2004 09:43:23 +0100
Message-ID: <418F31AB.5080501@ifit.uni-klu.ac.at>
Date: Mon, 08 Nov 2004 09:43:23 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Is there an easy way to have indexing ignore a CVS subdirectory
 in the index directory?
References: <E3381E0825F1954D953A4E347017BB1C028292FC@reh001-1.REX001.ExchangeByRegister.com>
In-Reply-To: <E3381E0825F1954D953A4E347017BB1C028292FC@reh001-1.REX001.ExchangeByRegister.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 08 Nov 2004 08:43:23.0409 (UTC) FILETIME=[01B7F010:01C4C56F]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Chuck Williams wrote:

>Sergiu,
>
>The Lucene index is not in CVS -- neither the directory nor the files.
>  
>
In this case you shouldn't have a CVS subfolder in the index folder

>But it is a subdirectory of a directory that is in CVS, and it needs to
>be structured that way due to the directory structure constraints of
>Tomcat and the way Netbeans automates Tomcat app development and
>deployment (which uses a development directory layout that directly
>parallels the Tomcat runtime layout).
>
It's not problem ...

>  I want to be able to Update the
>entire repository to make sure I've got all of the latest changes, which
>means doing CVS Update on an ancestor directory of the Lucene index
>directory.  Even though the index directory is not in CVS, doing the
>update on the ancestor directory consistently causes CVS to insert a CVS
>subdirectory into the index directory, causing the problem.  Both WinCVS
>and the Netbeans CVS client have this same behavior.  I have not been
>able to find any option to stop this -- do you know of one?
>  
>
?? Strange .. It shouldn't be. Try to add the index folder in the cvsignore.

>Also, I can't just move the CVS directory out of the index directory,
>unless I'm very careful to move it back before every CVS Update.  For
>similar reasons I can't just delete it either.  CVS (and Netbeans) get
>very upset if there are points to this directory but it isn't there.
>The pointer exists in the CVS Entries file (and another for Netbeans in
>a cache file) in the CVS subdirectory of the parent directory of the
>index directory.  So, I have to manually eliminate those if I want to
>delete the index directory's CVS directory.  And then they come back
>after the next update!  All in all very frustrating.
>  
>
>I'm going to try the code patch that Otis suggested.  If anybody knows
>some way in CVS to avoid this problem, I'd love to hear about it.
>  
>
I hope cvsignore works. I work with ant tasks and also with Eclipse and 
I don't have this kind of problems.
 Sergiu

>Thanks,
>
>Chuck
>
>  > -----Original Message-----
>  > From: sergiu gordea [mailto:gsergiu@ifit.uni-klu.ac.at]
>  > Sent: Friday, November 05, 2004 1:43 AM
>  > To: Lucene Users List
>  > Subject: Re: Is there an easy way to have indexing ignore a CVS
>  > subdirectory in the index directory?
>  > 
>  > Chuck Williams wrote:
>  > 
>  > >Otis, thanks for looking at this.  The stack trace of the exception
>is
>  > >below.  I looked at the code.  It wants to delete every file in the
>  > >index directory, but fails to delete the CVS subdirectory entry
>  > >(presumably because it is marked read-only; the specific exception
>is
>  > >swallowed).  Even if it could delete the CVS subdirectory, this
>would
>  > >just cause another problem with Netbeans/CVS, since it wouldn't
>know
>  > how
>  > >to fix up the pointers in the parent CVS subdirectory.  Is there a
>  > >change I could make that would cause it to safely leave this alone?
>  > >
>  > >
>  > Why do you have the lucene index in CVS? From what I know the lucene
>  > index folder shouldn't contain any other folder,
>  > just the lucene files.  I think it won't be any problem to delete
>CVS
>  > folder from lucene index and to remove the index from CVS.
>  > If you are affraid to do that .. you can move the CVS subfolder from
>  > lucene index into another folder ... and restore if you have any
>  > problems. I'm sure you will have no problem ... but this is just for
>  > your trust...
>  > 
>  >  Sergiu
>  > 
>  > >This problem only arises on a full index (incremental == false <=>
>  > >create == true).  Incremental indexes work fine in my app.
>  > >
>  > >Chuck
>  > >
>  > >java.io.IOException: Cannot delete CVS
>  > >    at
>org.apache.lucene.store.FSDirectory.create(FSDirectory.java:144)
>  > >    at
>org.apache.lucene.store.FSDirectory.<init>(FSDirectory.java:128)
>  > >    at
>  >
>  
>
>>org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:102)
>>    
>>
>  > >    at
>  >
>  
>
>>org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:83)
>>    
>>
>  > >    at
>org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:173)
>  > >    at [my app]...
>  > >
>  > >  > -----Original Message-----
>  > >  > From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
>  > >  > Sent: Thursday, November 04, 2004 1:54 PM
>  > >  > To: Lucene Users List
>  > >  > Subject: Re: Is there an easy way to have indexing ignore a CVS
>  > >  > subdirectory in the index directory?
>  > >  >
>  > >  > Hm, as far as I know, a CVS sub-directory in an index directory
>  > >should
>  > >  > not bother Lucene.  As a matter of fact, I tested this (I used
>a
>  > >file,
>  > >  > not a directory) for Lucene in Action.  What error are you
>getting?
>  > >  >
>  > >  > I know there is -I CVS option for ignoring files; perhaps it
>works
>  > >with
>  > >  > directories, too.
>  > >  >
>  > >  > Otis
>  > >  >
>  > >  >
>  > >  > --- Chuck Williams <chuck@manawiz.com> wrote:
>  > >  >
>  > >  > > I have a Tomcat web module being developed with Netbeans 4.0
>ide
>  > >  > > using
>  > >  > > CVS.  One CVS repository holds the sources of my various web
>  > files
>  > >in
>  > >  > > a
>  > >  > > directory structure that directly parallels the standard
>Tomcat
>  > >  > > webapp
>  > >  > > directory structure.  This is well supported in a fully
>automated
>  > >way
>  > >  > > within Netbeans.  I have my search index directory as a
>  > >subdirectory
>  > >  > > of
>  > >  > > WEB-INF, which seemed the natural place to put it.  The index
>  > >files
>  > >  > > themselves are not in the repository.  I want to be able to
>do
>  > CVS
>  > >  > > Update for the web module directory tree as a whole.
>However,
>  > >this
>  > >  > > places a CVS subdirectory within the index directory, which
>in
>  > >turn
>  > >  > > causes Lucene indexing to blow up the next time I run it
>since
>  > >this
>  > >  > > is
>  > >  > > an unexpected entry in the index directory.  To make things
>works,
>  > >to
>  > >  > > work around the problem I both need to delete the CVS
>  > subdirectory
>  > >  > > and
>  > >  > > find and delete the pointers to it in the Entries file and
>  > >Netbeans
>  > >  > > cache file within the CVS subdirectory of the parent
>directory.
>  > >This
>  > >  > > is
>  > >  > > annoying to say the least.
>  > >  > >
>  > >  > >
>  > >  > >
>  > >  > > I've asked the Netbeans users if there is a way to avoid
>creation
>  > >of
>  > >  > > the
>  > >  > > index's CVS subdirectory, but the same thing happened using
>  > WinCVS
>  > >  > > and I
>  > >  > > so I expect this is not a Netbeans issue.  It could be my
>  > relative
>  > >  > > ignorance of CVS.
>  > >  > >
>  > >  > >
>  > >  > >
>  > >  > > How do others avoid this problem?
>  > >  > >
>  > >  > >
>  > >  > >
>  > >  > > Any advice or suggestions would be appreciated.
>  > >  > >
>  > >  > >
>  > >  > >
>  > >  > > Thanks,
>  > >  > >
>  > >  > >
>  > >  > >
>  > >  > > Chuck
>  > >  > >
>  > >  > >
>  > >  > >
>  > >  > >
>  > >  >
>  > >  >
>  > >  >
>  >
>  
>
>>---------------------------------------------------------------------
>>    
>>
>  > >  > To unsubscribe, e-mail:
>lucene-user-unsubscribe@jakarta.apache.org
>  > >  > For additional commands, e-mail: lucene-user-
>  > help@jakarta.apache.org
>  > >
>  > >
>  >
>  
>
>>---------------------------------------------------------------------
>>    
>>
>  > >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>  > >For additional commands, e-mail:
>lucene-user-help@jakarta.apache.org
>  > >
>  > >
>  > >
>  > 
>  > 
>  >
>---------------------------------------------------------------------
>  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11075-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 10:01:51 2004
Return-Path: <lucene-user-return-11075-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68548 invoked from network); 8 Nov 2004 10:01:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 10:01:51 -0000
Received: (qmail 10989 invoked by uid 500); 8 Nov 2004 10:01:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10958 invoked by uid 500); 8 Nov 2004 10:01:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10943 invoked by uid 99); 8 Nov 2004 10:01:42 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_20_30,HTML_MESSAGE,HTML_TITLE_EMPTY
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [217.160.91.29] (HELO p15112568.pureserver.info) (217.160.91.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 08 Nov 2004 02:01:42 -0800
Received: from [192.168.10.103] (ppp-62-245-161-176.mnet-online.de [62.245.161.176])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by p15112568.pureserver.info (Postfix) with ESMTP id 5015314010F
	for <lucene-user@jakarta.apache.org>; Mon,  8 Nov 2004 11:01:34 +0100 (CET)
Message-ID: <418F43F1.1080102@intrafind.de>
Date: Mon, 08 Nov 2004 11:01:21 +0100
From: Bernhard Messer <bernhard.messer@intrafind.de>
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Transaction in Lucene
References: <20041107140941.32709.qmail@web12704.mail.yahoo.com>
In-Reply-To: <20041107140941.32709.qmail@web12704.mail.yahoo.com>
Content-Type: multipart/alternative;
 boundary="------------030902080302050800010400"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------030902080302050800010400
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

The message "No tvx file" can appear, if you have term vectors enabled during index and the documents you are adding have empty fields. As an example, if you try to index html documents, where many of them don't have a valid html title, the message will raise up. Looking at the term vector relevant code, this is nothing you have to worry about, it is just a status message. Otis is right, it is planned for future releases to avoid System.out.println() statements within lucene.

regards
Bernhard 


Otis Gospodnetic schrieb:

>I'm not sure about the tvx error, but I think I recall somebody
>changing some code around it a month or two ago.  I also believe
>System.out.println is on the TODO list for elimination.
>
>Otis
>
>--- commandor <commandor@inbox.ru> wrote:
>
>  
>
>>Hello,
>>
>>I came across the following problem with "No tvx file". 
>>
>>How could I manage to get it?
>>I like to have transaction processes in Lucene.
>>After my reading dev-lucene and user-lucene lists and analysing what
>>people suggested
>>I made up my own.
>>
>>The problem in my case is that I had to make several changes and only
>>than make commit.
>>That's why I did the following:
>>
>>1. Turn off Lucene lock (setting the corresponding system variable =
>>false)
>>
>>2. Start the loop (from the first document to the last one to change
>>in the index)
>>
>>2.1. Open IndexReader 
>>2.2. Get a document by its id
>>2.3. Store it as local variable
>>2.4. IndexReader.delete(document id)
>>2.5. IndexReader.close()
>>2.6. Merge new Terms (changes) and old ones in the document I
>>retrieved
>>2.6. Open IndexWriter
>>2.7. Add a new made document
>>
>>3. end of loop
>>
>>4. Waiting for other action ends in my programm I close IndexWriter.
>>
>>The Result:
>>Everything works fine but I had "No tvx file"
>>I really worried about it cause I read what for tvx file...
>>
>>Might anybody explain me what I did wrong?
>>
>>In spite of your answer I did like the following: the way of logging
>>messages
>>
>>This message appeared with the help of System.out.println()
>>
>>Investigating the code of Lucene I found a lot of places of using
>>System.out 
>>
>>I guess it is not a very good solution espessially in so beautiful
>>search/indexing API. 
>>I guess Lucene must have a normal log to write its messages.
>>
>>Thanks in advance...
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


--------------030902080302050800010400--

From lucene-user-return-11076-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 10:11:06 2004
Return-Path: <lucene-user-return-11076-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 73145 invoked from network); 8 Nov 2004 10:11:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 10:11:05 -0000
Received: (qmail 19526 invoked by uid 500); 8 Nov 2004 10:10:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19506 invoked by uid 500); 8 Nov 2004 10:10:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19484 invoked by uid 99); 8 Nov 2004 10:10:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [217.160.91.29] (HELO p15112568.pureserver.info) (217.160.91.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 08 Nov 2004 02:10:42 -0800
Received: from [192.168.10.103] (ppp-62-245-161-176.mnet-online.de [62.245.161.176])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by p15112568.pureserver.info (Postfix) with ESMTP id B4C0114010F
	for <lucene-user@jakarta.apache.org>; Mon,  8 Nov 2004 11:10:38 +0100 (CET)
Message-ID: <418F4617.30203@intrafind.de>
Date: Mon, 08 Nov 2004 11:10:31 +0100
From: Bernhard Messer <bernhard.messer@intrafind.de>
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Does lucene makes any compression
References: <BAY11-F2aVI9Lr1tnVN00020e0a@hotmail.com>
In-Reply-To: <BAY11-F2aVI9Lr1tnVN00020e0a@hotmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The lucene version from CVS head does now have a option to store and 
compress whole text files (binary fields within a lucene document) thru 
GZip. The index itself is not GZip compressed. Due to the nature of how 
the index is created and stored, it is very effectiv regarding to 
diskspace without the need of additional compression.

I have no idea if the new functionality is already adapted within the c# 
port.

regards
Bernhard

abdulrahman galal schrieb:

>
> i got the c# of lucene thanks god @ 
> http://sourceforge.net/projects/nlucene
>
> what about the new version that include the compression facility ?
>
> you did n't replay on my qustion does it compress original text files 
> and its indexs like Great MG ....
>
> thanks alot
>
> _________________________________________________________________
> FREE pop-up blocking with the new MSN Toolbar - get it now! 
> http://toolbar.msn.com/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11077-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 10:30:33 2004
Return-Path: <lucene-user-return-11077-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85294 invoked from network); 8 Nov 2004 10:30:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 10:30:33 -0000
Received: (qmail 52719 invoked by uid 500); 8 Nov 2004 10:30:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52694 invoked by uid 500); 8 Nov 2004 10:30:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52678 invoked by uid 99); 8 Nov 2004 10:30:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [212.227.126.201] (HELO mxintern.schlund.de) (212.227.126.201)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 08 Nov 2004 02:30:23 -0800
Received: from [172.17.12.10] (helo=[172.17.12.10])
	by mxintern.kundenserver.de with esmtp (Exim 4.34)
	id 1CR6my-0000lN-Ln
	for lucene-user@jakarta.apache.org; Mon, 08 Nov 2004 11:30:20 +0100
Message-ID: <418F4AAF.6060400@arrasz.de>
Date: Mon, 08 Nov 2004 11:30:07 +0100
From: Joachim Arrasz <info@arrasz.de>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  lucene-user@jakarta.apache.org
Subject: Filters for Openoffice File Indexing available (Java)
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Scanned: Symantec AntiVirus Scan Engine
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello List.

we have written an application which includes OpenOffice Integration 
into an OpenSource CMS (OpenCms).

For this CMS there is a Lucene Integration available under sourceforge.

So now we are looking for search and index Filters for Lucene, that 
were able to integrate out OpenOffice Files also into search result.

Is there any project or code available for doing this, or must we write 
everything by ourself? Do anybody know good beginner Tutorials for doing 
things like this?

Best Regards

Joachim Arrasz


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11078-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 11:58:02 2004
Return-Path: <lucene-user-return-11078-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37627 invoked from network); 8 Nov 2004 11:58:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 11:58:02 -0000
Received: (qmail 52582 invoked by uid 500); 8 Nov 2004 11:57:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52544 invoked by uid 500); 8 Nov 2004 11:57:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52530 invoked by uid 99); 8 Nov 2004 11:57:53 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.150.190] (HELO envoy.cybage.com) (203.199.150.190)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 08 Nov 2004 03:57:51 -0800
Received: from chandrasekhard ([192.168.11.236]) by envoy.cybage.com with Microsoft SMTPSVC(6.0.3790.0);
	 Mon, 8 Nov 2004 17:26:18 +0530
Message-ID: <020101c4c589$f351c3f0$ec0ba8c0@cybage.com>
From: "Chandrashekhar" <chandrashekhard@cybage.com>
To: <lucene-user@jakarta.apache.org>
Cc: "Anurag Priya" <anuragp@cybage.com>
Subject: Need Help
Date: Mon, 8 Nov 2004 17:26:15 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_01FE_01C4C5B8.0D006300"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 08 Nov 2004 11:56:18.0628 (UTC) FILETIME=[F5163040:01C4C589]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_01FE_01C4C5B8.0D006300
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,
I have query regarding index file portability of lucene 1.4 and clucene =
0.8.12.
I have created index file in Java  - lucene 1.4  and now want to search =
some term in the same index file by using clucene.
I am not getting results if i do that.=20
So just wanted to make sure, does it support such kind of =
interportability?


 =20
With Regards,
Chandrashekhar V Deshmukh
Sr. System Analyst
Cybage Software Pvt. Ltd. (a CMM Level 3 company)
Phone(O) : 91-20-4041700, 91-20-4044700 Ext: 804
Cell : 91-9822749239
Fax : 91-20-4041701 , 4041702
chandrashekhard@cybage.com
www.cybage.com
------=_NextPart_000_01FE_01C4C5B8.0D006300--


From lucene-user-return-11079-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 15:39:07 2004
Return-Path: <lucene-user-return-11079-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71092 invoked from network); 8 Nov 2004 15:39:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 15:39:07 -0000
Received: (qmail 53870 invoked by uid 500); 8 Nov 2004 15:38:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 53765 invoked by uid 500); 8 Nov 2004 15:38:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 53750 invoked by uid 99); 8 Nov 2004 15:38:54 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 08 Nov 2004 07:38:54 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Mon, 8 Nov 2004 10:39:44 -0500
Message-ID: <004f01c4c5a9$2baa9140$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: <lucene-user@jakarta.apache.org>
Subject: Lock Issues
Date: Mon, 8 Nov 2004 10:39:44 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_004C_01C4C57F.42C65870"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 08 Nov 2004 15:39:44.0734 (UTC) FILETIME=[2BBF9FE0:01C4C5A9]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_004C_01C4C57F.42C65870
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi;

I am working to integrate lucene into a internal site. The site contains =
.pdf, .doc and .xml files. I need to index all of them.

My indexer runs in the do get method of a servlet for now (I am trying =
to make a demo for my boss).

Once I get this working I will move all the logic into a class that can =
be instantiated by the application.

Things we working ok until I integrated the pdfbox. Now I get:

java.io.IOException: Lock obtain timed out: Lock@C:\Program Files\Apache =
Software Foundation\Tomcat =
5.0\temp\lucene-b826e0c22cbd003cd1a6f908eda9894f-write.lock

I think there might be a conflict between the reader I have open already =
and what ever happens in here:

LucenePDFDocument.getDocument(file);

Has anyone done something like this before? Anyone have any ideas what I =
can do?

Thanks,

Luke
------=_NextPart_000_004C_01C4C57F.42C65870--



From lucene-user-return-11080-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 16:36:00 2004
Return-Path: <lucene-user-return-11080-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9368 invoked from network); 8 Nov 2004 16:36:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 16:36:00 -0000
Received: (qmail 74439 invoked by uid 500); 8 Nov 2004 16:35:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74413 invoked by uid 500); 8 Nov 2004 16:35:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74400 invoked by uid 99); 8 Nov 2004 16:35:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [212.42.171.82] (HELO mail.runtime-collective.com) (212.42.171.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 08 Nov 2004 08:35:51 -0800
Received: from [10.0.1.2] (helo=[10.0.0.124])
	by mail.runtime-collective.com with esmtp (Exim 3.35 #1 (Debian))
	id 1CRCUZ-0006xn-00
	for <lucene-user@jakarta.apache.org>; Mon, 08 Nov 2004 16:35:43 +0000
Subject: Re: Lucene external field storage contribution
From: Miles Barr <miles@runtime-collective.com>
To: lucene-user@jakarta.apache.org
Content-Type: text/plain
Organization: Runtime Collective
Message-Id: <1099931626.13493.47.camel@goose.milesbarr.com>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Mon, 08 Nov 2004 16:33:47 +0000
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> On Sun, 07 Nov 2004 13:51:23, Kevin A. Burton wrote:
> About 3 months ago I developed a external storage engine which ties
> into lucene. 
>  
> I'd like to discuss making a contribution so that this is integrated
> into a future version of Lucene.
>  
> I'm going to paste my original PROPOSAL in this email. 
>  
> There wasn't a ton of feedback first time around but I figure squeaky
> wheel gets the grease...

I'd be interested in this type of functionality. Could you raise an
issue in bugzilla so it's easier to track?


Cheers,
-- 
Miles Barr <miles@runtime-collective.com>
Runtime Collective


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11081-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 17:31:50 2004
Return-Path: <lucene-user-return-11081-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39814 invoked from network); 8 Nov 2004 17:31:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 17:31:50 -0000
Received: (qmail 56169 invoked by uid 500); 8 Nov 2004 17:31:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 56043 invoked by uid 500); 8 Nov 2004 17:31:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 56028 invoked by uid 99); 8 Nov 2004 17:31:40 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.240] (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 08 Nov 2004 09:31:39 -0800
Received: (qmail 24060 invoked by uid 60001); 8 Nov 2004 17:31:38 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=C7cwjKPvEe1f9e9YtNyltIlqVXHAliMNWUwddu4plZgk3wAQjaB7y0keV4GGNM7ncAlzPK7csfwvpwEK5RguZgp9h/fhqtzCK7Vh2c55THHiKQdINGecq42pFjDVc7lMNil3hXYx1RmgoRv9Cjkxbk3X/JOGwW2iJYRp22z2thc=  ;
Message-ID: <20041108173137.24058.qmail@web12703.mail.yahoo.com>
Received: from [216.194.17.194] by web12703.mail.yahoo.com via HTTP; Mon, 08 Nov 2004 09:31:37 PST
Date: Mon, 8 Nov 2004 09:31:37 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Need Help
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <020101c4c589$f351c3f0$ec0ba8c0@cybage.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

You should double-check with CLucene community, but from my research
for Lucene in Action CLucene's index is not compatible with that of
Lucene 1.4, so you will not be able to use the same index with both
Lucene and CLucene.

Otis

--- Chandrashekhar <chandrashekhard@cybage.com> wrote:

> Hi,
> I have query regarding index file portability of lucene 1.4 and
> clucene 0.8.12.
> I have created index file in Java  - lucene 1.4  and now want to
> search some term in the same index file by using clucene.
> I am not getting results if i do that. 
> So just wanted to make sure, does it support such kind of
> interportability?
> 
> 
>   
> With Regards,
> Chandrashekhar V Deshmukh
> Sr. System Analyst
> Cybage Software Pvt. Ltd. (a CMM Level 3 company)
> Phone(O) : 91-20-4041700, 91-20-4044700 Ext: 804
> Cell : 91-9822749239
> Fax : 91-20-4041701 , 4041702
> chandrashekhard@cybage.com
> www.cybage.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11082-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 17:35:20 2004
Return-Path: <lucene-user-return-11082-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41798 invoked from network); 8 Nov 2004 17:35:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 17:35:20 -0000
Received: (qmail 63639 invoked by uid 500); 8 Nov 2004 17:35:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63454 invoked by uid 500); 8 Nov 2004 17:35:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63440 invoked by uid 99); 8 Nov 2004 17:35:11 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=HTML_90_100,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.235.234.121] (HELO taurus.lunarpages.com) (64.235.234.121)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 08 Nov 2004 09:35:10 -0800
Received: from adsl-68-121-27-153.dsl.irvnca.pacbell.net ([68.121.27.153] helo=ramonlaptop)
	by taurus.lunarpages.com with esmtpa (Exim 4.43)
	id 1CRDSo-0007oY-5h
	for lucene-user@jakarta.apache.org; Mon, 08 Nov 2004 09:37:58 -0800
From: "Ramon Aseniero" <ramon.aseniero@tryarc.com>
To: <lucene-user@jakarta.apache.org>
Subject: Thread Safe Lucene
Date: Mon, 8 Nov 2004 09:34:37 -0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_007D_01C4C576.2BC52650"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcTFuTgehzc4GH0OS5K9nAkHv++YKw==
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - taurus.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - tryarc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_007D_01C4C576.2BC52650
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi All,

 

Is Lucene thread safe? What happens to searches already in progress while
the index is being updated?

 

Thanks,

Ramon


------=_NextPart_000_007D_01C4C576.2BC52650--


From lucene-user-return-11083-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 18:13:06 2004
Return-Path: <lucene-user-return-11083-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61181 invoked from network); 8 Nov 2004 18:13:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 18:13:06 -0000
Received: (qmail 14321 invoked by uid 500); 8 Nov 2004 18:12:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14231 invoked by uid 500); 8 Nov 2004 18:12:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14088 invoked by uid 99); 8 Nov 2004 18:12:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 08 Nov 2004 10:12:47 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8ED2513E28F8; Mon,  8 Nov 2004 13:12:41 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id EA60313E28F7
	for <lucene-user@jakarta.apache.org>; Mon,  8 Nov 2004 13:12:38 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <20041108173515.E033553646@spf6-2.us4.outblaze.com>
References: <20041108173515.E033553646@spf6-2.us4.outblaze.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <C9DD2B64-31B1-11D9-A2A0-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Thread Safe Lucene
Date: Mon, 8 Nov 2004 13:12:44 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.0 required=5.0
	tests=AWL,BAYES_10,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Nov 8, 2004, at 12:34 PM, Ramon Aseniero wrote:
> Is Lucene thread safe? What happens to searches already in progress 
> while
> the index is being updated?

Searches work fine while another process is indexing.  An already 
instantiated IndexSearcher will only see the documents in the index at 
the time it was instantiated, not new ones.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11084-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 18:27:32 2004
Return-Path: <lucene-user-return-11084-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71915 invoked from network); 8 Nov 2004 18:27:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 18:27:32 -0000
Received: (qmail 49810 invoked by uid 500); 8 Nov 2004 18:27:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49781 invoked by uid 500); 8 Nov 2004 18:27:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49767 invoked by uid 99); 8 Nov 2004 18:27:24 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.148.212.189] (HELO w05.bloglines.com) (216.148.212.189)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 08 Nov 2004 10:27:21 -0800
Received: (qmail 5563 invoked by uid 99); 8 Nov 2004 18:27:12 -0000
Message-ID: <1099938432.1245511725.5561.sendItem@bloglines.com>
Date: 8 Nov 2004 18:27:12 -0000
From: yahootintin.1247688@bloglines.com
To: lucene-user@jakarta.apache.org
Subject: Windows Bug?
MIME-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

My understanding is that I can have an IndexReader open for searching
(as long as it doesn't delete) while an IndexWriter is updating the index.
 

I wrote a simple test app to prove this and it works great on Mac OS
X, Java 1.4.2 and Lucene 1.4.2.  It fails on Windows XP, Java 1.4.2 and Lucene
1.4.2.  I tried other versions of Lucene and it failed in those too.

This
is the app that fails on Windows:

public static void main(String[] args)

throws Exception {
  String indexFolder = "/TestIndex";
     
  // add
a document to the index
  IndexWriter indexWriter = new IndexWriter
   
(indexFolder, 
     new StandardAnalyzer(), true);
  Document document =
new Document();
  Field field = new Field("foo", "bar", 
              
           true, true, true)
  document.add(field);
  indexWriter.addDocument(document);

  indexWriter.close();

  // open an index reader but don't close it

 IndexReader indexReader =
    IndexReader.open(indexFolder);

  // open
an index writer
  indexWriter = new IndexWriter
    (indexFolder, 
   
 new StandardAnalyzer(), true);
  indexWriter.close();
}

On Windows XP
this throws an Exception as soon as it tries to open the IndexWriter after
the IndexReader has been opened.

Here's the stack trace:
Exception in
thread "main" java.io.IOException: Cannot delete _1.cfs
  at org.apache.lucene.store.FSDirectory.create(FSDirectory.java:144)

  at org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:105)

  at org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:83)

  at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:173)
 
at scratch.TestLuceneLocks.main(TestLuceneLocks.java:17)

Is this a bug?


Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11085-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 18:42:37 2004
Return-Path: <lucene-user-return-11085-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 79277 invoked from network); 8 Nov 2004 18:42:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 18:42:36 -0000
Received: (qmail 74200 invoked by uid 500); 8 Nov 2004 18:42:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74170 invoked by uid 500); 8 Nov 2004 18:42:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74157 invoked by uid 99); 8 Nov 2004 18:42:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.194 as permitted sender)
Received: from [64.233.170.194] (HELO rproxy.gmail.com) (64.233.170.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 08 Nov 2004 10:42:27 -0800
Received: by rproxy.gmail.com with SMTP id 34so181661rns
        for <lucene-user@jakarta.apache.org>; Mon, 08 Nov 2004 10:42:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=n7YR42Rc0ufZoZHY8QEdLlvqW52q2KFge2Bzct1KxBib5XeLsnafPnxnVb+4g8rNlKGzIbWHNB6DpVtriwH8M1kkU5ZZxLByd/namIB8w+vHmWkMcpuXrfzTkfoidQSAghtiydDyKe96jK9HJAUa1zZSva9Ybpe6RaMZQUGMlb0=
Received: by 10.38.10.71 with SMTP id 71mr187300rnj;
        Mon, 08 Nov 2004 10:42:25 -0800 (PST)
Received: by 10.38.179.13 with HTTP; Mon, 8 Nov 2004 10:42:25 -0800 (PST)
Message-ID: <dd2db8d004110810426c4f1799@mail.gmail.com>
Date: Mon, 8 Nov 2004 11:42:25 -0700
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Windows Bug?
In-Reply-To: <1099938432.1245511725.5561.sendItem@bloglines.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <1099938432.1245511725.5561.sendItem@bloglines.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The reason this is failing is because you are trying to create a new
index in the directory.  It works on *nix file systems because you can
delete an open file on those operating systems, something you can't do
under Windows.

If you change the create parameter to false on your second call
everything should work as you expect it to.


On 8 Nov 2004 18:27:12 -0000, yahootintin.1247688@bloglines.com
<yahootintin.1247688@bloglines.com> wrote:
> Hi,
> 
> My understanding is that I can have an IndexReader open for searching
> (as long as it doesn't delete) while an IndexWriter is updating the index.
> 
> I wrote a simple test app to prove this and it works great on Mac OS
> X, Java 1.4.2 and Lucene 1.4.2.  It fails on Windows XP, Java 1.4.2 and Lucene
> 1.4.2.  I tried other versions of Lucene and it failed in those too.
> 
> This
> is the app that fails on Windows:
> 
> public static void main(String[] args)
> 
> throws Exception {
> 
>   String indexFolder = "/TestIndex";
> 
>   // add
> a document to the index
> 
>   IndexWriter indexWriter = new IndexWriter
> 
> (indexFolder,
> 
>      new StandardAnalyzer(), true);
> 
>   Document document =
> new Document();
> 
>   Field field = new Field("foo", "bar",
> 
>            true, true, true)
> 
>   document.add(field);
> 
>   indexWriter.addDocument(document);
> 
>   indexWriter.close();
> 
>   // open an index reader but don't close it
> 
>  IndexReader indexReader =
> 
>     IndexReader.open(indexFolder);
> 
>   // open
> an index writer
> 
>   indexWriter = new IndexWriter
> 
>     (indexFolder,
> 
>  new StandardAnalyzer(), true);
> 
>   indexWriter.close();
> 
> }
> 
> On Windows XP
> this throws an Exception as soon as it tries to open the IndexWriter after
> the IndexReader has been opened.
> 
> Here's the stack trace:
> 
> Exception in
> thread "main" java.io.IOException: Cannot delete _1.cfs
> 
>   at org.apache.lucene.store.FSDirectory.create(FSDirectory.java:144)
> 
>   at org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:105)
> 
>   at org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:83)
> 
>   at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:173)
> 
> at scratch.TestLuceneLocks.main(TestLuceneLocks.java:17)
> 
> Is this a bug?
> 
> Thanks.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11086-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 18:46:44 2004
Return-Path: <lucene-user-return-11086-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81087 invoked from network); 8 Nov 2004 18:46:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 18:46:44 -0000
Received: (qmail 84205 invoked by uid 500); 8 Nov 2004 18:46:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84178 invoked by uid 500); 8 Nov 2004 18:46:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84161 invoked by uid 99); 8 Nov 2004 18:46:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.235.234.121] (HELO taurus.lunarpages.com) (64.235.234.121)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 08 Nov 2004 10:46:33 -0800
Received: from adsl-68-121-27-153.dsl.irvnca.pacbell.net ([68.121.27.153] helo=ramonlaptop)
	by taurus.lunarpages.com with esmtpa (Exim 4.43)
	id 1CREa6-0006U0-ID
	for lucene-user@jakarta.apache.org; Mon, 08 Nov 2004 10:49:34 -0800
From: "Ramon Aseniero" <ramon.aseniero@tryarc.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Thread Safe Lucene
Date: Mon, 8 Nov 2004 10:46:13 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcTFvv6mPXnJBWmPSk6iStGOlH88hAABCqbQ
In-Reply-To: <C9DD2B64-31B1-11D9-A2A0-000A95BC61B6@ehatchersolutions.com>
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - taurus.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - tryarc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Erik, the info is really helpful.

Ramon

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: Monday, November 08, 2004 10:13 AM
To: Lucene Users List
Subject: Re: Thread Safe Lucene


On Nov 8, 2004, at 12:34 PM, Ramon Aseniero wrote:
> Is Lucene thread safe? What happens to searches already in progress 
> while
> the index is being updated?

Searches work fine while another process is indexing.  An already 
instantiated IndexSearcher will only see the documents in the index at 
the time it was instantiated, not new ones.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11087-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 18:51:14 2004
Return-Path: <lucene-user-return-11087-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 82430 invoked from network); 8 Nov 2004 18:51:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 18:51:13 -0000
Received: (qmail 87653 invoked by uid 500); 8 Nov 2004 18:50:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87584 invoked by uid 500); 8 Nov 2004 18:50:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87571 invoked by uid 99); 8 Nov 2004 18:50:47 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.148.212.189] (HELO w05.bloglines.com) (216.148.212.189)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 08 Nov 2004 10:50:47 -0800
Received: (qmail 22005 invoked by uid 99); 8 Nov 2004 18:50:45 -0000
Message-ID: <1099939845.2425793197.22004.sendItem@bloglines.com>
Date: 8 Nov 2004 18:50:45 -0000
From: yahootintin.1247688@bloglines.com
To: lucene-user@jakarta.apache.org
Subject: Re: Windows Bug?
MIME-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks!  I just figured that out.  I was passing true by mistake.

--- Lucene
Users List" <lucene-user@jakarta.apache.org wrote:
The reason this is failing
is because you are trying to create a new
> index in the directory.  It works
on *nix file systems because you can
> delete an open file on those operating
systems, something you can't do
> under Windows.
> 
> If you change the
create parameter to false on your second call
> everything should work as
you expect it to.
> 
> 
> On 8 Nov 2004 18:27:12 -0000, yahootintin.1247688@bloglines.com

> <yahootintin.1247688@bloglines.com> wrote:
> > Hi,
> > 
> > My understanding
is that I can have an IndexReader open for searching
> > (as long as it doesn't
delete) while an IndexWriter is updating the index.
> > 
> > I wrote a simple
test app to prove this and it works great on Mac OS
> > X, Java 1.4.2 and
Lucene 1.4.2.  It fails on Windows XP, Java 1.4.2 and Lucene
> > 1.4.2. 
I tried other versions of Lucene and it failed in those too.
> > 
> > This

> > is the app that fails on Windows:
> > 
> > public static void main(String[]
args)
> > 
> > throws Exception {
> > 
> >   String indexFolder = "/TestIndex";

> > 
> >   // add
> > a document to the index
> > 
> >   IndexWriter
indexWriter = new IndexWriter
> > 
> > (indexFolder,
> > 
> >      new
StandardAnalyzer(), true);
> > 
> >   Document document =
> > new Document();

> > 
> >   Field field = new Field("foo", "bar",
> > 
> >            true,
true, true)
> > 
> >   document.add(field);
> > 
> >   indexWriter.addDocument(document);

> > 
> >   indexWriter.close();
> > 
> >   // open an index reader but
don't close it
> > 
> >  IndexReader indexReader =
> > 
> >     IndexReader.open(indexFolder);

> > 
> >   // open
> > an index writer
> > 
> >   indexWriter = new IndexWriter

> > 
> >     (indexFolder,
> > 
> >  new StandardAnalyzer(), true);
>
> 
> >   indexWriter.close();
> > 
> > }
> > 
> > On Windows XP
> >
this throws an Exception as soon as it tries to open the IndexWriter after

> > the IndexReader has been opened.
> > 
> > Here's the stack trace:
> > 
> > Exception in
> > thread "main" java.io.IOException: Cannot delete
_1.cfs
> > 
> >   at org.apache.lucene.store.FSDirectory.create(FSDirectory.java:144)

> > 
> >   at org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:105)

> > 
> >   at org.apache.lucene.store.FSDirectory.getDirectory(FSDirectory.java:83)

> > 
> >   at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:173)

> > 
> > at scratch.TestLuceneLocks.main(TestLuceneLocks.java:17)
> > 

> > Is this a bug?
> > 
> > Thanks.
> > 
> > ---------------------------------------------------------------------

> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
> 
> >
> 
> ---------------------------------------------------------------------

> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For
additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11088-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 22:27:01 2004
Return-Path: <lucene-user-return-11088-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12284 invoked from network); 8 Nov 2004 22:27:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 22:27:01 -0000
Received: (qmail 99861 invoked by uid 500); 8 Nov 2004 22:26:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99820 invoked by uid 500); 8 Nov 2004 22:26:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99797 invoked by uid 99); 8 Nov 2004 22:26:51 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=HTML_90_100,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.235.234.121] (HELO taurus.lunarpages.com) (64.235.234.121)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 08 Nov 2004 14:26:49 -0800
Received: from adsl-68-121-27-153.dsl.irvnca.pacbell.net ([68.121.27.153] helo=ramonlaptop)
	by taurus.lunarpages.com with esmtpa (Exim 4.43)
	id 1CRI1H-0004s2-Q2
	for lucene-user@jakarta.apache.org; Mon, 08 Nov 2004 14:29:52 -0800
From: "Ramon Aseniero" <ramon.aseniero@tryarc.com>
To: <lucene-user@jakarta.apache.org>
Subject: IndexSearch
Date: Mon, 8 Nov 2004 14:26:40 -0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0017_01C4C59E.F8094C00"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcTF4gRGTXwYmFmhR6iiXXvfapju/g==
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - taurus.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - tryarc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0017_01C4C59E.F8094C00
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi All,

 

Can IndexSearcher be persisted? Are there any limitations on index updates
while searches are in progress? Any file locking issues?

 

Thanks,

Ramon


------=_NextPart_000_0017_01C4C59E.F8094C00--


From lucene-user-return-11089-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 22:44:22 2004
Return-Path: <lucene-user-return-11089-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20742 invoked from network); 8 Nov 2004 22:44:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 22:44:22 -0000
Received: (qmail 39383 invoked by uid 500); 8 Nov 2004 22:44:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39323 invoked by uid 500); 8 Nov 2004 22:44:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39308 invoked by uid 99); 8 Nov 2004 22:44:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.204 as permitted sender)
Received: from [64.233.170.204] (HELO rproxy.gmail.com) (64.233.170.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 08 Nov 2004 14:44:09 -0800
Received: by rproxy.gmail.com with SMTP id 34so196534rns
        for <lucene-user@jakarta.apache.org>; Mon, 08 Nov 2004 14:44:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=rHDrhnsOmYMSArZQWCOjgl9QgVbnb/rIez2wS894xjP+I+WgiIJklA1UbWlXDtUNVlKiyB6M7i8KqCyPt/LJS0uQZKEVcJhZnJjAE4ennU/h1lSOgy+e1LWY4BVoGf6m2NVkvzONcpB7G5+65EttitctuCNslmmlHe6uYrKQl1k=
Received: by 10.38.10.71 with SMTP id 71mr296349rnj;
        Mon, 08 Nov 2004 14:44:07 -0800 (PST)
Received: by 10.38.179.13 with HTTP; Mon, 8 Nov 2004 14:44:07 -0800 (PST)
Message-ID: <dd2db8d004110814443346bc11@mail.gmail.com>
Date: Mon, 8 Nov 2004 15:44:07 -0700
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: IndexSearch
In-Reply-To: <-7985776128116348264@unknownmsgid>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <-7985776128116348264@unknownmsgid>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You can write to the index and read from it at the same time. You can
only have one IndexWriter open at any one time.

IndexSearchers will only see documents that were created before they
were instantiated, so you need to create new ones periodically to see
new documents.


On Mon, 8 Nov 2004 14:26:40 -0800, Ramon Aseniero
<ramon.aseniero@tryarc.com> wrote:
> Hi All,
> 
> Can IndexSearcher be persisted? Are there any limitations on index updates
> while searches are in progress? Any file locking issues?
> 
> Thanks,
> 
> Ramon
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11090-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 23:28:09 2004
Return-Path: <lucene-user-return-11090-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50672 invoked from network); 8 Nov 2004 23:28:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 23:28:09 -0000
Received: (qmail 36032 invoked by uid 500); 8 Nov 2004 23:27:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 35991 invoked by uid 500); 8 Nov 2004 23:27:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35943 invoked by uid 99); 8 Nov 2004 23:27:56 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.218.93.14] (HELO web41015.mail.yahoo.com) (66.218.93.14)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 08 Nov 2004 15:27:56 -0800
Received: (qmail 62440 invoked by uid 60001); 8 Nov 2004 23:27:52 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=USIsOpwfQQSZPj5xQNg7EQg9oFAZE58vyzPu1tvJZSOp9q6TQnQSgGCwuBxJmaW/95NtTa6DlBOHePQfq20RRQc/4MPTOFaKFSOsfX+yO7dswZ7/cL+QWa4exRACWfzXKGCzVuw26jWvd5PbzwRiub+Xg4yhDLhrDdReG3R4TrA=  ;
Message-ID: <20041108232752.62438.qmail@web41015.mail.yahoo.com>
Received: from [199.181.134.220] by web41015.mail.yahoo.com via HTTP; Mon, 08 Nov 2004 15:27:52 PST
Date: Mon, 8 Nov 2004 15:27:52 -0800 (PST)
From: <yahootintin-lucene@yahoo.com>
Reply-To: yahootintin-lucene@yahoo.com
Subject: Locking issue
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="0-28575962-1099956472=:61529"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-28575962-1099956472=:61529
Content-Type: text/plain; charset=us-ascii
Content-Id: 
Content-Disposition: inline

The attached Java file shows a locking issue that occurs with
Lucene.

One thread opens and closes an IndexReader.  The other thread
opens an IndexWriter, adds a document and then closes the
IndexWriter.  I would expect that this app should be able to
happily run without an issues.

It fails with:
  java.io.IOException: Lock obtain timed out

Is this expected?  I thought a Reader could be opened while a
Writer is adding a document.

Any help is appreciated.

--0-28575962-1099956472=:61529
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--0-28575962-1099956472=:61529--

From lucene-user-return-11091-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 08 23:31:35 2004
Return-Path: <lucene-user-return-11091-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52171 invoked from network); 8 Nov 2004 23:31:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 8 Nov 2004 23:31:35 -0000
Received: (qmail 43079 invoked by uid 500); 8 Nov 2004 23:31:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42919 invoked by uid 500); 8 Nov 2004 23:31:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42904 invoked by uid 99); 8 Nov 2004 23:31:25 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.240] (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 08 Nov 2004 15:31:25 -0800
Received: (qmail 79344 invoked by uid 60001); 8 Nov 2004 23:31:23 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=4Y5zMDAc+dop8mlQN3/YTgPj7/6cRO5e6xMHaCU3OkoMe7+yLobZsYp/8Gk8XkEn8tznuvK1RnLHsLKsU6nrzsTXmFozZs8xk6dFaPvZeFCDAfzurIEMFGy5GKTTE6wxTT5BdfzeVl4FlDVIEQUwdo1fN+R1RLJxait+lpHZdRA=  ;
Message-ID: <20041108233123.79342.qmail@web12703.mail.yahoo.com>
Received: from [216.194.17.194] by web12703.mail.yahoo.com via HTTP; Mon, 08 Nov 2004 15:31:23 PST
Date: Mon, 8 Nov 2004 15:31:23 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Does lucene makes any compression
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <BAY11-F2aVI9Lr1tnVN00020e0a@hotmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

nlucene is dead, use dotlucene - also on SF.net

Otis

--- abdulrahman galal <abdo1234@msn.com> wrote:

> 
> i got the c# of lucene thanks god @
> http://sourceforge.net/projects/nlucene
> 
> what about the new version that include the compression facility ?
> 
> you did n't replay on my qustion does it compress original text files
> and 
> its indexs like Great MG ....
> 
> thanks alot
> 
> _________________________________________________________________
> FREE pop-up blocking with the new MSN Toolbar - get it now! 
> http://toolbar.msn.com/
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11092-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 09 14:20:22 2004
Return-Path: <lucene-user-return-11092-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8638 invoked from network); 9 Nov 2004 14:20:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Nov 2004 14:20:20 -0000
Received: (qmail 34258 invoked by uid 500); 9 Nov 2004 14:20:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34152 invoked by uid 500); 9 Nov 2004 14:20:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34137 invoked by uid 99); 9 Nov 2004 14:20:07 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,HTML_20_30,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.225.195] (HELO web14824.mail.yahoo.com) (216.136.225.195)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 09 Nov 2004 06:20:06 -0800
Received: (qmail 97514 invoked by uid 60001); 9 Nov 2004 14:20:05 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=ltLGHG52zsqzKU/VmRdsga5nzz44ScVs1mLK78rVeVzI3fen1o2bvu8SLy7w9W7mrG82Jt2pTFrqUDlANMRbCByqswc2Uc7L857F6NZWhkjusjxJd6d2dfoixEfCRAdP45iDeVkBSUYIWsujCJNbquOAFqvCm+RNfhRW6g5UqTE=  ;
Message-ID: <20041109142005.97512.qmail@web14824.mail.yahoo.com>
Received: from [203.210.212.89] by web14824.mail.yahoo.com via HTTP; Tue, 09 Nov 2004 06:20:05 PST
Date: Tue, 9 Nov 2004 06:20:05 -0800 (PST)
From: Nhan Nguyen Dang <ndnhan2003@yahoo.com>
Subject: Using Lucene to store document
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-230010453-1100010005=:97110"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-230010453-1100010005=:97110
Content-Type: text/plain; charset=us-ascii

Hi all,
I'm using Lucene to index XML document/ file (may be millions of documents in future, each about 5-10KB)
Beside the index for searching, I want to use Lucene to store whole document content with UnIndexed fields -content field(instead of store each document in a XML file). All the document content will be stored on a separate index. Each time I want to get access to a document, I will let Lucene retrieve it.
 
I am consider this issue with another one "Use file system to store document content in separate XML document" means, 400K document ill be stored in 400K XML file in file system.
 
Purpose of this is that I can access each document rapidly. Can any body who has experience with this problem before give me advise which method is suitable ? Is this better to collect all documents to an Lucene index or store them separately in file system ?
 
Thanks,
Dang Nhan




			
---------------------------------
Do you Yahoo!?
 Check out the new Yahoo! Front Page. www.yahoo.com
--0-230010453-1100010005=:97110--

From lucene-user-return-11093-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 09 15:19:12 2004
Return-Path: <lucene-user-return-11093-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57267 invoked from network); 9 Nov 2004 15:19:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Nov 2004 15:19:12 -0000
Received: (qmail 67753 invoked by uid 500); 9 Nov 2004 15:19:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67567 invoked by uid 500); 9 Nov 2004 15:19:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67553 invoked by uid 99); 9 Nov 2004 15:19:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.150.190] (HELO envoy.cybage.com) (203.199.150.190)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 09 Nov 2004 07:19:01 -0800
Received: from chandrasekhard ([192.168.11.236]) by envoy.cybage.com with Microsoft SMTPSVC(6.0.3790.0);
	 Tue, 9 Nov 2004 20:47:28 +0530
Message-ID: <008c01c4c66f$35e70aa0$ec0ba8c0@cybage.com>
From: "Chandrashekhar" <chandrashekhard@cybage.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041108173137.24058.qmail@web12703.mail.yahoo.com>
Subject: Re: Need Help
Date: Tue, 9 Nov 2004 20:47:21 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 09 Nov 2004 15:17:28.0363 (UTC) FILETIME=[399F57B0:01C4C66F]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi,
Thank you for help.
I got solution for this. lucene 1.3 index works with clucene 0.8.12


----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, November 08, 2004 11:01 PM
Subject: Re: Need Help


> Hello,
> 
> You should double-check with CLucene community, but from my research
> for Lucene in Action CLucene's index is not compatible with that of
> Lucene 1.4, so you will not be able to use the same index with both
> Lucene and CLucene.
> 
> Otis
> 
> --- Chandrashekhar <chandrashekhard@cybage.com> wrote:
> 
> > Hi,
> > I have query regarding index file portability of lucene 1.4 and
> > clucene 0.8.12.
> > I have created index file in Java  - lucene 1.4  and now want to
> > search some term in the same index file by using clucene.
> > I am not getting results if i do that. 
> > So just wanted to make sure, does it support such kind of
> > interportability?
> > 
> > 
> >   
> > With Regards,
> > Chandrashekhar V Deshmukh
> > Sr. System Analyst
> > Cybage Software Pvt. Ltd. (a CMM Level 3 company)
> > Phone(O) : 91-20-4041700, 91-20-4044700 Ext: 804
> > Cell : 91-9822749239
> > Fax : 91-20-4041701 , 4041702
> > chandrashekhard@cybage.com
> > www.cybage.com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11094-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 09 16:18:49 2004
Return-Path: <lucene-user-return-11094-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2668 invoked from network); 9 Nov 2004 16:18:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Nov 2004 16:18:48 -0000
Received: (qmail 26640 invoked by uid 500); 9 Nov 2004 16:18:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26555 invoked by uid 500); 9 Nov 2004 16:18:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26524 invoked by uid 99); 9 Nov 2004 16:18:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.255.81.93] (HELO serveur1.itldev.info) (81.255.81.93)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 09 Nov 2004 08:18:30 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by serveur1.itldev.info (Postfix) with ESMTP id 342F027E19
	for <lucene-user@jakarta.apache.org>; Tue,  9 Nov 2004 17:18:24 +0100 (CET)
Received: from serveur1.itldev.info ([127.0.0.1])
 by localhost (serveur1.itldev.info [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 15763-01 for <lucene-user@jakarta.apache.org>;
 Tue,  9 Nov 2004 17:18:24 +0100 (CET)
Received: from thierry (unknown [192.168.2.1])
	by serveur1.itldev.info (Postfix) with ESMTP id 07DAE27B27
	for <lucene-user@jakarta.apache.org>; Tue,  9 Nov 2004 17:18:24 +0100 (CET)
Message-ID: <008e01c4c677$ba2d37f0$0102a8c0@thierry>
From: "Thierry Ferrero (Itldev.info)" <ferrero@itldev.info>
To: <lucene-user@jakarta.apache.org>
Subject: Searching in keyword field ?
Date: Tue, 9 Nov 2004 17:18:19 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Scanned: by amavisd-new at itldev.info
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi All,

Can i search only one word in a keyword field which contains few words.
I know keyword field isn't tokenized. After many tests, i think is
impossible.
Someone can confirm me ?

Why don't i use a text field? because the users know the category from a
list (ex: category ABC, category DEF GHI, category  JKL ...) and the keyword
field 'category' can contains severals terms (ABC, DEF GHI, OPQ RST).
I use a SnowBallAnalyzer for text field in indexing.
Perhaps the better way for me, is to use a text field with the value "ABC
DEF_GHI  JKL_NOPQ" where categorys are concatinated with a "_".
Thanks for your reply !

Thierry.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11095-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 09 18:42:13 2004
Return-Path: <lucene-user-return-11095-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95984 invoked from network); 9 Nov 2004 18:42:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Nov 2004 18:42:13 -0000
Received: (qmail 44180 invoked by uid 500); 9 Nov 2004 18:41:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44094 invoked by uid 500); 9 Nov 2004 18:41:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44060 invoked by uid 99); 9 Nov 2004 18:41:47 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=INFO_TLD,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.206 as permitted sender)
Received: from [64.233.170.206] (HELO rproxy.gmail.com) (64.233.170.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 09 Nov 2004 10:41:47 -0800
Received: by rproxy.gmail.com with SMTP id 1so265289rny
        for <lucene-user@jakarta.apache.org>; Tue, 09 Nov 2004 10:41:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=I2lCJq5ZLdkEQRGCYBfSFMFUqdenD9j5Oy5myyGFp7dVLS2R0IphykmexFYU1pCH2sQT6dghyg9qEla9IkPdaI0b799HmwnBVYadff38IN/FD+2vQJCtbZa5fx7ZvTIu76/nbs8bYgBGDFPbCHyCwQLo8Z3vmewrpAIYzyJgp3k=
Received: by 10.38.10.71 with SMTP id 71mr347511rnj;
        Tue, 09 Nov 2004 10:41:45 -0800 (PST)
Received: by 10.38.179.13 with HTTP; Tue, 9 Nov 2004 10:41:45 -0800 (PST)
Message-ID: <dd2db8d0041109104156ceac98@mail.gmail.com>
Date: Tue, 9 Nov 2004 11:41:45 -0700
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Searching in keyword field ?
In-Reply-To: <008e01c4c677$ba2d37f0$0102a8c0@thierry>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <008e01c4c677$ba2d37f0$0102a8c0@thierry>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You can add the category keyword multiple times to a document.

Instead of seperating your categories with a delimiter, just add the
keyword multiple times.

doc.add(Field.Keyword("category", "ABC");
doc.add(Field.Keyword("category", "DEF GHI");

On Tue, 9 Nov 2004 17:18:19 +0100, Thierry Ferrero (Itldev.info)
<ferrero@itldev.info> wrote:
> Hi All,
> 
> Can i search only one word in a keyword field which contains few words.
> I know keyword field isn't tokenized. After many tests, i think is
> impossible.
> Someone can confirm me ?
> 
> Why don't i use a text field? because the users know the category from a
> list (ex: category ABC, category DEF GHI, category  JKL ...) and the keyword
> field 'category' can contains severals terms (ABC, DEF GHI, OPQ RST).
> I use a SnowBallAnalyzer for text field in indexing.
> Perhaps the better way for me, is to use a text field with the value "ABC
> DEF_GHI  JKL_NOPQ" where categorys are concatinated with a "_".
> Thanks for your reply !
> 
> Thierry.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11096-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 09 18:59:07 2004
Return-Path: <lucene-user-return-11096-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6166 invoked from network); 9 Nov 2004 18:59:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Nov 2004 18:59:06 -0000
Received: (qmail 92075 invoked by uid 500); 9 Nov 2004 18:58:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91926 invoked by uid 500); 9 Nov 2004 18:58:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91913 invoked by uid 99); 9 Nov 2004 18:58:57 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.238] (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 09 Nov 2004 10:58:57 -0800
Received: (qmail 11391 invoked by uid 60001); 9 Nov 2004 18:58:55 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=igjfusoAiNk/Gmdlu6quD0f/xzib6VdyiFFC+ZNLqYBc2XR2whXx1eDsu+YjoIFZ1Ay9f6xqiJUWhEKJb9BokOhAKWyOBuiJUzB4hUDNRxQo4cfRS+ag4pbPUSKqlpdaJYdQEJhu4pORu7Y1viuFiweT9+0nVAWsIF0it3ZE5fE=  ;
Message-ID: <20041109185854.11385.qmail@web12701.mail.yahoo.com>
Received: from [216.194.17.194] by web12701.mail.yahoo.com via HTTP; Tue, 09 Nov 2004 10:58:54 PST
Date: Tue, 9 Nov 2004 10:58:54 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Using Lucene to store document
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20041109142005.97512.qmail@web14824.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It is difficult to give a general answer.  You can certainly store the
whole XML in the Lucene index, just don't tokenize it.  The HEAD
version of Lucene even has some compression that you may find handy. 
On the other hand, storing XML in the FS would allow you to store XML
files wherever you wanted, even on separate disk(s).  If these are lots
of parallel searches/reads, this can be handy.  If you want to be able
to see XML files without going through the index, this can also be
handy.  So, it depends on how you like it, but both approaches are
doable.

Otis


--- Nhan Nguyen Dang <ndnhan2003@yahoo.com> wrote:

> Hi all,
> I'm using Lucene to index XML document/ file (may be millions of
> documents in future, each about 5-10KB)
> Beside the index for searching, I want to use Lucene to store whole
> document content with UnIndexed fields -content field(instead of
> store each document in a XML file). All the document content will be
> stored on a separate index. Each time I want to get access to a
> document, I will let Lucene retrieve it.
>  
> I am consider this issue with another one "Use file system to store
> document content in separate XML document" means, 400K document ill
> be stored in 400K XML file in file system.
>  
> Purpose of this is that I can access each document rapidly. Can any
> body who has experience with this problem before give me advise which
> method is suitable ? Is this better to collect all documents to an
> Lucene index or store them separately in file system ?
>  
> Thanks,
> Dang Nhan
> 
> 
> 
> 
> 			
> ---------------------------------
> Do you Yahoo!?
>  Check out the new Yahoo! Front Page. www.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11097-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 09 19:59:09 2004
Return-Path: <lucene-user-return-11097-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54905 invoked from network); 9 Nov 2004 19:59:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Nov 2004 19:59:09 -0000
Received: (qmail 20861 invoked by uid 500); 9 Nov 2004 19:59:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 20830 invoked by uid 500); 9 Nov 2004 19:59:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 20816 invoked by uid 99); 9 Nov 2004 19:59:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 09 Nov 2004 11:59:01 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iA9JwwJ21917
	for <lucene-user@jakarta.apache.org>; Tue, 9 Nov 2004 13:58:58 -0600 (CST)
Subject: What is the difference between these searches?
From: Luke Francl <luke.francl@stellent.com>
To: lucene-user@jakarta.apache.org
Content-Type: text/plain
Message-Id: <1100030325.22903.106.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Tue, 09 Nov 2004 13:58:45 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I've implemented a converter to translate our system's internal Query
objects to Lucene's Query model.

I recently realized that my implementation of "OR NOT" was not working
as I would expect and I was wondering if anyone on this list could give
me some advice.

I am converting a query that means "foo or not bar" into the following:

+item_type:xyz +(field_name:foo -field_name:bar)

This returns only Documents where field_name contains foo. I would
expect it to return all the Documents where field_name contains foo or
field_name doesn't contain bar.

Fiddling around with the Lucene Index Toolbox, I think that this query
does what I want:

+item_type:xyz field_name:foo -field_name:bar

Can someone explain to me why these queries return different results?

Thanks,
Luke Francl


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11098-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 09 21:48:50 2004
Return-Path: <lucene-user-return-11098-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29757 invoked from network); 9 Nov 2004 21:48:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Nov 2004 21:48:50 -0000
Received: (qmail 40495 invoked by uid 500); 9 Nov 2004 21:48:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40461 invoked by uid 500); 9 Nov 2004 21:48:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40446 invoked by uid 99); 9 Nov 2004 21:48:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 09 Nov 2004 13:48:40 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 69BF313E28F9; Tue,  9 Nov 2004 16:48:37 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 2EC6013E28F8
	for <lucene-user@jakarta.apache.org>; Tue,  9 Nov 2004 16:48:28 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <1100030325.22903.106.camel@localhost>
References: <1100030325.22903.106.camel@localhost>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <164F7776-3299-11D9-BA83-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: What is the difference between these searches?
Date: Tue, 9 Nov 2004 16:48:26 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.3 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Nov 9, 2004, at 2:58 PM, Luke Francl wrote:
> I recently realized that my implementation of "OR NOT" was not working
> as I would expect and I was wondering if anyone on this list could give
> me some advice.

Lucene's BooleanQuery does not really have the concept of OR NOT.  It's 
really an AND NOT.

> I am converting a query that means "foo or not bar" into the following:
>
> +item_type:xyz +(field_name:foo -field_name:bar)
>
> This returns only Documents where field_name contains foo. I would
> expect it to return all the Documents where field_name contains foo or
> field_name doesn't contain bar.

What you experienced is how Lucene operates.  It's more of a fail-safe 
mode because doing pure NOT queries is more likely to get out of 
control.

> Fiddling around with the Lucene Index Toolbox, I think that this query
> does what I want:
>
> +item_type:xyz field_name:foo -field_name:bar
>
> Can someone explain to me why these queries return different results?

This last query has a required clause, which is what BooleanQuery 
requires when there is a NOT clause.  You're getting what you want here 
because you've got an item_type:xyz clause as required.  In your first 
example, you're requiring field_name:foo, whereas in this one it is not 
mandatory.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11099-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 09 21:54:55 2004
Return-Path: <lucene-user-return-11099-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33538 invoked from network); 9 Nov 2004 21:54:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Nov 2004 21:54:54 -0000
Received: (qmail 53769 invoked by uid 500); 9 Nov 2004 21:54:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 53729 invoked by uid 500); 9 Nov 2004 21:54:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 53709 invoked by uid 99); 9 Nov 2004 21:54:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of fraschetti@gmail.com designates 64.233.170.193 as permitted sender)
Received: from [64.233.170.193] (HELO rproxy.gmail.com) (64.233.170.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 09 Nov 2004 13:54:46 -0800
Received: by rproxy.gmail.com with SMTP id f1so172707rne
        for <lucene-user@jakarta.apache.org>; Tue, 09 Nov 2004 13:54:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=tz0ZQlbv01H2wwqarXOgzRJFOSCcopmFuXl+FHk8KpOt2ta/x34Zh4DGsdQoyNfwRjjXXsuj0lT58UajFdJziCM4vxyW1+M604vqSKXIQoGDmITThABhqaWU4+TuZS2KTHrfdqS0w4b9ZrrMenuwRQnR4FYgmYlegL9mX9ik+Fk=
Received: by 10.38.165.3 with SMTP id n3mr655165rne;
        Tue, 09 Nov 2004 13:54:44 -0800 (PST)
Received: by 10.38.72.80 with HTTP; Tue, 9 Nov 2004 13:54:44 -0800 (PST)
Message-ID: <cbdebdf80411091354d0c774f@mail.gmail.com>
Date: Tue, 9 Nov 2004 13:54:44 -0800
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: can lucene be backed to have an update field
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Is it possible to modify the lucene source to create an
updateDocument(doc#, FIELD, value)  function ? ....

I know there's a lot of work that goes on being the scene when an
.add(doc) is called, but can some of that functionality be adapter to
make the update a reality?

-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11100-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 09 22:00:37 2004
Return-Path: <lucene-user-return-11100-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36250 invoked from network); 9 Nov 2004 22:00:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Nov 2004 22:00:37 -0000
Received: (qmail 65803 invoked by uid 500); 9 Nov 2004 22:00:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 65664 invoked by uid 500); 9 Nov 2004 22:00:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 65646 invoked by uid 99); 9 Nov 2004 22:00:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.29] (HELO smtp-vbr9.xs4all.nl) (194.109.24.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 09 Nov 2004 14:00:26 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr9.xs4all.nl (8.12.11/8.12.11) with ESMTP id iA9M0Nwb034251
	for <lucene-user@jakarta.apache.org>; Tue, 9 Nov 2004 23:00:23 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: What is the difference between these searches?
Date: Tue, 9 Nov 2004 23:00:23 +0100
User-Agent: KMail/1.5.4
References: <1100030325.22903.106.camel@localhost>
In-Reply-To: <1100030325.22903.106.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411092300.23462.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Luke,

On Tuesday 09 November 2004 20:58, you wrote:
> Hi,
> 
> I've implemented a converter to translate our system's internal Query
> objects to Lucene's Query model.
> 
> I recently realized that my implementation of "OR NOT" was not working
> as I would expect and I was wondering if anyone on this list could give
> me some advice.

Could you explain "OR NOT" ? 

Lucene has no provision for matching by being prohibited only. This can
be achieved by indexing something for each document that can be
used in queries to match always, combined with something prohibited
in a query.
But doing this is bad for performance for querying larger nrs of docs.

Lucene's - prefix in queries means AND NOT, ie. the term with the - prefix
prohibits the matching of a document.
 
> I am converting a query that means "foo or not bar" into the following:
> 
> +item_type:xyz +(field_name:foo -field_name:bar)
> 
> This returns only Documents where field_name contains foo. I would
> expect it to return all the Documents where field_name contains foo or
> field_name doesn't contain bar.
> 
> Fiddling around with the Lucene Index Toolbox, I think that this query
> does what I want:
> 
> +item_type:xyz field_name:foo -field_name:bar
> 
> Can someone explain to me why these queries return different results?

A bit dense, but anyway:

Anything prefixed with + is required.
Anything not having + or - prefix is optional and only influences the score.
In case there is nothing required by a + prefix, at least one of the things
without prefix is required.

Regards,
Paul Elschot.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11101-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 09 22:02:07 2004
Return-Path: <lucene-user-return-11101-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37171 invoked from network); 9 Nov 2004 22:02:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Nov 2004 22:02:07 -0000
Received: (qmail 69013 invoked by uid 500); 9 Nov 2004 22:01:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68925 invoked by uid 500); 9 Nov 2004 22:01:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68802 invoked by uid 99); 9 Nov 2004 22:01:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 09 Nov 2004 14:01:37 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iA9M1ZJ25595
	for <lucene-user@jakarta.apache.org>; Tue, 9 Nov 2004 16:01:35 -0600 (CST)
Subject: Re: What is the difference between these searches?
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <164F7776-3299-11D9-BA83-000A95BC61B6@ehatchersolutions.com>
References: <1100030325.22903.106.camel@localhost>
	 <164F7776-3299-11D9-BA83-000A95BC61B6@ehatchersolutions.com>
Content-Type: text/plain
Message-Id: <1100037685.22903.111.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Tue, 09 Nov 2004 16:01:25 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tue, 2004-11-09 at 15:48, Erik Hatcher wrote:

> This last query has a required clause, which is what BooleanQuery 
> requires when there is a NOT clause.  You're getting what you want here 
> because you've got an item_type:xyz clause as required.  In your first 
> example, you're requiring field_name:foo, whereas in this one it is not 
> mandatory.

So, essentially, my query:

+item_type:xyz +(field_name:foo -field_name:bar)

Gets translated to:

+item_type:xyz +field_name:foo -field_name:bar

Whereas the more lenient one does not require field_name:foo and returns
what I expect.

Is that right?

Now, to decide whether to try to make this work the way I thought it
would, or just document that it doesn't. ;)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11102-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 09 22:16:04 2004
Return-Path: <lucene-user-return-11102-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 44516 invoked from network); 9 Nov 2004 22:16:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Nov 2004 22:16:04 -0000
Received: (qmail 90513 invoked by uid 500); 9 Nov 2004 22:15:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90451 invoked by uid 500); 9 Nov 2004 22:15:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90392 invoked by uid 99); 9 Nov 2004 22:15:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 09 Nov 2004 14:14:57 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iA9MErJ25935
	for <lucene-user@jakarta.apache.org>; Tue, 9 Nov 2004 16:14:53 -0600 (CST)
Subject: Re: What is the difference between these searches?
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200411092300.23462.paul.elschot@xs4all.nl>
References: <1100030325.22903.106.camel@localhost>
	 <200411092300.23462.paul.elschot@xs4all.nl>
Content-Type: text/plain
Message-Id: <1100038480.22903.124.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Tue, 09 Nov 2004 16:14:40 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tue, 2004-11-09 at 16:00, Paul Elschot wrote:

> Lucene has no provision for matching by being prohibited only. This can
> be achieved by indexing something for each document that can be
> used in queries to match always, combined with something prohibited
> in a query.
> But doing this is bad for performance for querying larger nrs of docs.

I'm familiar with Lucene's restrictions on prohibited queries, and I
have a required clause for a field that will always be part of the query
(it's not a nonsense value, it's the item type of the object in a CMS). 

My problem is that I have been considering the whole query object that
I've generated. Every BooleanQuery that's a part of my finished query
must also have a required clause if it has a prohibited clause.

I'm thinking of refactoring my code so that instead of joining together
Query objects into a large BooleanQuery, it passes around BooleanClauses
and assembles them into a single BooleanQuery.

Thanks for your help,
Luke


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11103-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 09 22:17:07 2004
Return-Path: <lucene-user-return-11103-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45168 invoked from network); 9 Nov 2004 22:17:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Nov 2004 22:17:07 -0000
Received: (qmail 92693 invoked by uid 500); 9 Nov 2004 22:16:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92671 invoked by uid 500); 9 Nov 2004 22:16:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92658 invoked by uid 99); 9 Nov 2004 22:16:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 09 Nov 2004 14:16:58 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.12.11/8.12.11) with ESMTP id iA9MGu1J093769
	for <lucene-user@jakarta.apache.org>; Tue, 9 Nov 2004 23:16:56 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: can lucene be backed to have an update field
Date: Tue, 9 Nov 2004 23:16:55 +0100
User-Agent: KMail/1.5.4
References: <cbdebdf80411091354d0c774f@mail.gmail.com>
In-Reply-To: <cbdebdf80411091354d0c774f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411092316.55625.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Chris,

On Tuesday 09 November 2004 22:54, Chris Fraschetti wrote:
> Is it possible to modify the lucene source to create an
> updateDocument(doc#, FIELD, value)  function ? ....

It's possible, but an implementation would not be efficient
when the field is indexed. The current index structure
has no room to spare for insertions, and no provision for
deleted terms.

Some time ago an extra level was added in the index
for skipping ahead more efficiently. Perhaps that could
be combined with a gap for insertions. But when such a gap
would fill up there would again be no choice but to delete and add 
the changed document.
Also adding a document without optimizing is quite efficient
already, so there is probably not much interest in adding
such gaps.

In case the field is stored only and the value would have the
same length as the currently stored value it would be possible
to replace the value efficiently.

The only updates available are on the field norms.
 
Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11104-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 09 22:48:12 2004
Return-Path: <lucene-user-return-11104-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61791 invoked from network); 9 Nov 2004 22:48:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 9 Nov 2004 22:48:12 -0000
Received: (qmail 47631 invoked by uid 500); 9 Nov 2004 22:47:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47596 invoked by uid 500); 9 Nov 2004 22:47:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47569 invoked by uid 99); 9 Nov 2004 22:47:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 09 Nov 2004 14:47:39 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.12.11/8.12.11) with ESMTP id iA9MlDJU059551
	for <lucene-user@jakarta.apache.org>; Tue, 9 Nov 2004 23:47:13 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: What is the difference between these searches?
Date: Tue, 9 Nov 2004 23:47:13 +0100
User-Agent: KMail/1.5.4
References: <1100030325.22903.106.camel@localhost> <200411092300.23462.paul.elschot@xs4all.nl> <1100038480.22903.124.camel@localhost>
In-Reply-To: <1100038480.22903.124.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411092347.13537.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tuesday 09 November 2004 23:14, Luke Francl wrote:
> On Tue, 2004-11-09 at 16:00, Paul Elschot wrote:
> 
> > Lucene has no provision for matching by being prohibited only. This can
> > be achieved by indexing something for each document that can be
> > used in queries to match always, combined with something prohibited
> > in a query.
> > But doing this is bad for performance for querying larger nrs of docs.
> 
> I'm familiar with Lucene's restrictions on prohibited queries, and I
> have a required clause for a field that will always be part of the query
> (it's not a nonsense value, it's the item type of the object in a CMS). 

That might also be mapped  to a filter.
 
> My problem is that I have been considering the whole query object that
> I've generated. Every BooleanQuery that's a part of my finished query
> must also have a required clause if it has a prohibited clause.
> 
> I'm thinking of refactoring my code so that instead of joining together
> Query objects into a large BooleanQuery, it passes around BooleanClauses
> and assembles them into a single BooleanQuery.

It may not be possible to flatten a boolean query to a single level, eg:
(+aa +bb) (+cc +dd)
+(a1 a2) +(b1 b2)

These will generate nested BooleanQuery's iirc.

Regards,
Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11105-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 01:48:45 2004
Return-Path: <lucene-user-return-11105-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64078 invoked from network); 10 Nov 2004 01:48:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 01:48:45 -0000
Received: (qmail 15005 invoked by uid 500); 10 Nov 2004 01:48:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14979 invoked by uid 500); 10 Nov 2004 01:48:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14965 invoked by uid 99); 10 Nov 2004 01:48:35 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_40_50,HTML_MESSAGE,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [69.59.192.42] (HELO b.mail.peak.org) (69.59.192.42)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 09 Nov 2004 17:48:33 -0800
Received: from POWERPACK (dsl-95-28.peak.org [206.163.95.28])
	by b.mail.peak.org (8.12.10/8.12.8) with SMTP id iAA1mT7K050993
	for <lucene-user@jakarta.apache.org>; Tue, 9 Nov 2004 17:48:29 -0800 (PST)
Message-ID: <00c201c4c6c7$61d1afa0$140aa8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <418E97DE.5010608@newsmonster.org>
Subject: Re: Lucene external field storage contribution.
Date: Tue, 9 Nov 2004 20:48:30 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00BF_01C4C69D.78568E00"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Spam-Score: 0.475 () HTML_20_30,HTML_MESSAGE
X-Scanned-By: MIMEDefang 2.39
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00BF_01C4C69D.78568E00
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Kevin,

Sorry for the delay in replying.  I think your idea for an external =
field storage mechanism is excellent.  I'd love to see it, and if I can, =
will be willing to help make that happen.

Regards,

Terry
  ----- Original Message -----=20
  From: Kevin A. Burton=20
  To: Lucene Users List=20
  Sent: Sunday, November 07, 2004 4:47 PM
  Subject: Lucene external field storage contribution.


  About 3 months ago I developed a external storage engine which ties =
into=20
  lucene.=20

  I'd like to discuss making a contribution so that this is integrated=20
  into a future version of Lucene.

  I'm going to paste my original PROPOSAL in this email.=20

  There wasn't a ton of feedback first time around but I figure squeaky=20
  wheel gets the grease...


  >>
  >>
  >> I created this proposal because we need this fixed at work. I want =
to=20
  >> go ahead and work on a vertical fix for our version of lucene and =
then=20
  >> submit this back to Jakarta.
  >> There seems to be a lot of interest here and I wanted to get =
feedback=20
  >> from the list before moving forward ...
  >>
  >> Should I put this in the wiki?!
  >>
  >> Kevin
  >>
  >> ** OVERVIEW **
  >>
  >> Currently Lucene supports 'stored fields; where the content of =
these=20
  >> fields are
  >> kept within the lucene index for use in the future.
  >>
  >> While acceptable for small indexes, larger amounts of stored fields =

  >> prevent:
  >>
  >> - Fast index merges since the full content has to be continually =
merged.
  >>
  >> - Storing the indexes in memory (since a LOT of memory would be=20
  >> required and
  >> this is cost prohibitive)
  >>
  >> - Fast queries since block caching can't be used on the index data.
  >>
  >> For example in our current setup our index size is 20G.  Nearly 90% =
of=20
  >> this is
  >> content.  If we could store the content outside of Lucene our =
merges and
  >> searches would be MUCH faster.  If we could store the index in =
MEMORY=20
  >> this could
  >> be orders of magnitude faster.
  >>
  >> ** PROPOSAL **
  >>
  >> Provide an external field storage mechanism which supports legacy =
indexes
  >> without modification.  Content is stored in a "content segment". =
The only
  >> changes would be a field with 3(or 4 if checksum enabled) values.
  >>
  >> - CS_SEGMENT
  >>
  >>       Logical ID of the content segment.  This is an integer value. =
=20
  >> There is
  >>       a global Lucene property named CS_ROOT which stores all the=20
  >> content.
  >>       The segments are just flat files with pointers.  Segments are =

  >> broken
  >>       into logical pieces by time and size.  Usually 100M of =
content=20
  >> would be
  >>       in one segment.
  >>
  >> - CS_OFFSET
  >>
  >>       The byte offset of the field.
  >>
  >> - CS_LENGTH
  >>
  >>       The length of the field.
  >>
  >> - CS_CHECKSUM
  >>
  >>       Optional checksum to verify that the content is correct when=20
  >> fetched
  >>       from the index.
  >>
  >> - The field value here would be exactly 'N:O:L' where N is the =
segment=20
  >> number,
  >>   O is the offset, and L is the length.  O and L are 64bit values.  =
N=20
  >> is a 32
  >>   bit value (though 64bit wouldn't really hurt).
  >>
  >> This mechanism allows for the external storage of any named field.
  >> =20
  >> CS_OFFSET, and CS_LENGTH allow use with RandomAccessFile and new =
NIO=20
  >> code for
  >> efficient content lookup.  (Though filehandle caching should =
probably=20
  >> be used).
  >>
  >> Since content is broken into logical 100M segments the underlying=20
  >> filesystem can
  >> orgnize the file into contiguous blocks for efficient =
non-fragmented=20
  >> lookup.
  >>
  >> File manipulation is easy and indexes can be merged by simply=20
  >> concatenating the
  >> second file to the end of the first.  (Though the segment, offset, =
and=20
  >> length
  >> need to be updated).  (FIXME: I think I need to think about this =
more=20
  >> since I
  >> will have < 100M per syncs)
  >>
  >> Supporting full unicode is important.  Full java.lang.String =
storage=20
  >> is used
  >> with String.getBytes() so we should be able to avoid unicode =
issues. =20
  >> If Java
  >> has a correct java.lang.String representation it's possible easily =
add=20
  >> unicode
  >> support just by serializing the byte representation. (Note that the =

  >> JDK says
  >> that the DEFAULT system char encoding is used so if this is ever=20
  >> changed it
  >> might break the index)
  >>
  >> While Linux and modern versions of Windows (not sure about OSX)=20
  >> support 64bit
  >> filesystems the 4G storage boundary of 32bit filesystems (ext2 is =
an=20
  >> example)
  >> are an issue.  Using smaller indexes can prevent this but =
eventually=20
  >> segment
  >> lookup in the filesystem will be slow.  This will only happen =
within=20
  >> terabyte
  >> storage systems so hopefully the developer has migrated to another=20
  >> (modern)
  >> filesystem such as XFS.
  >>
  >> ** FEATURES **
  >>
  >>   - Must be able to replicate indexes easily to other hosts.
  >>
  >>   - Adding content to the index must be CHEAP
  >>
  >>   - Deletes need to be cheap (these are cheap for older content.  =
Just=20
  >> discard
  >>     older indexes)
  >>
  >>   - Filesystem needs to be able to optimize storage
  >>
  >>   - Must support UNICODE and binary content (images, blobs, byte =
arrays,
  >>     serialized objects, etc)
  >>
  >>   - Filesystem metadata operations should be fast.  Since content =
is=20
  >> kept in
  >>     LARGE indexes this is easy to avoid.
  >>
  >>   - Migration to the new system from legacy indexes should be fast =
and
  >>     painless for future developers
  >> =20
  > =20
  >


  --=20

  Use Rojo (RSS/Atom aggregator).  Visit http://rojo.com. Ask me for an=20
  invite!  Also see irc.freenode.net #rojo if you want to chat.

  Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

  If you're interested in RSS, Weblogs, Social Networking, etc... then =
you=20
  should work for Rojo!  If you recommend someone and we hire them =
you'll=20
  get a free iPod!
     =20
  Kevin A. Burton, Location - San Francisco, CA
         AIM/YIM - sfburtonator,  Web - http://peerfear.org/
  GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412


------=_NextPart_000_00BF_01C4C69D.78568E00--


From lucene-user-return-11106-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 03:44:47 2004
Return-Path: <lucene-user-return-11106-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33780 invoked from network); 10 Nov 2004 03:44:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 03:44:46 -0000
Received: (qmail 52929 invoked by uid 500); 10 Nov 2004 03:44:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52888 invoked by uid 500); 10 Nov 2004 03:44:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52874 invoked by uid 99); 10 Nov 2004 03:44:37 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=LINES_OF_YELLING,SUBJ_ALL_CAPS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 09 Nov 2004 19:44:36 -0800
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I6Y2ZC00.TE7 for <lucene-user@jakarta.apache.org>; Wed,
          10 Nov 2004 09:27:12 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: LUCENE + DATA RETRIVAL
Date: Wed, 10 Nov 2004 09:21:25 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIAENJCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi guys,


Apologies...............


Has any one on the form attempted to retrieved data and Indexed
"Macromedia FLASH based Files"
If there is some example please distrubute ,it may be usefull for
developer's.


Thx in advance






      WITH WARM REGARDS
      HAVE A NICE DAY
      [ N.S.KARTHIK]




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11107-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 06:46:50 2004
Return-Path: <lucene-user-return-11107-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15969 invoked from network); 10 Nov 2004 06:46:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 06:46:50 -0000
Received: (qmail 69193 invoked by uid 500); 10 Nov 2004 06:46:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69022 invoked by uid 500); 10 Nov 2004 06:46:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68992 invoked by uid 99); 10 Nov 2004 06:46:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 09 Nov 2004 22:46:25 -0800
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I6YBI700.HEO for <lucene-user@jakarta.apache.org>; Wed,
          10 Nov 2004 12:31:19 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: Lucene1.4.1 + OutOf Memory
Date: Wed, 10 Nov 2004 12:25:32 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIMENJCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi
Guys

Apologies..........



History

Ist type :  40000  subindexes   +  MultiSearcher  + Search on Content Field
Only  for 2000 hits

                                                                          =
Exception  [ Too many Files Open ]





IInd type :  40 Mergerd Indexes [1000 subindexes each]   +  MultiSearcher
/ParallelSearcher +  Search on Content Field Only for 20000 hits

                                                                          =
Exception  [ OutOf Memeory  ]



System Config  [same for both type]

Amd Processor [High End Single]
RAM  1GB
O/s Linux  ( jantoo type )
Appserver Tomcat 5.05
Jdk [ IBM  Blackdown-1.4.1-01  ( == Jdk1.4.1) ]

Index contains 15 Fields
Search
Done only on 1 field
Retrieve 11 corrosponding fields
3 Fields  are for debug details


Switched from Ist type to IInd Type

Can some body suggest me Why is this Happening

Thx in advance




      WITH WARM REGARDS
      HAVE A NICE DAY
      [ N.S.KARTHIK]




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11108-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 07:16:44 2004
Return-Path: <lucene-user-return-11108-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31189 invoked from network); 10 Nov 2004 07:16:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 07:16:43 -0000
Received: (qmail 4145 invoked by uid 500); 10 Nov 2004 07:16:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4105 invoked by uid 500); 10 Nov 2004 07:16:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4079 invoked by uid 99); 10 Nov 2004 07:16:10 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.218.93.8] (HELO web41009.mail.yahoo.com) (66.218.93.8)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 09 Nov 2004 23:16:09 -0800
Received: (qmail 47841 invoked by uid 60001); 10 Nov 2004 07:16:04 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=SmQef8O6BWDncVqTJOyRqvClal3TChFeA0QVEVcO66KK1FwgtIzLWZ6aIEJ5/QRSZkKH6GMbhE/U2b63ooI2mkRGIXeQIFvhIwyo2e6xEpJrBtWkdHkmTvEHPVqoy7I5yxH3dZvrwKkwunQm6u+BU/uytstWynDRAir3oye9TEw=  ;
Message-ID: <20041110071604.47838.qmail@web41009.mail.yahoo.com>
Received: from [67.171.39.159] by web41009.mail.yahoo.com via HTTP; Tue, 09 Nov 2004 23:16:04 PST
Date: Tue, 9 Nov 2004 23:16:04 -0800 (PST)
From: <yahootintin-lucene@yahoo.com>
Reply-To: yahootintin-lucene@yahoo.com
Subject: Re: Lucene1.4.1 + OutOf Memory
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIMENJCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

There is a memory leak in the sorting code of Lucene 1.4.1. 
1.4.2 has the fix!

--- Karthik N S <karthik@controlnet.co.in> wrote:

> 
> Hi
> Guys
> 
> Apologies..........
> 
> 
> 
> History
> 
> Ist type :  40000  subindexes   +  MultiSearcher  + Search on
> Content Field
> Only  for 2000 hits
> 
>                                                               
>            =
> Exception  [ Too many Files Open ]
> 
> 
> 
> 
> 
> IInd type :  40 Mergerd Indexes [1000 subindexes each]   + 
> MultiSearcher
> /ParallelSearcher +  Search on Content Field Only for 20000
> hits
> 
>                                                               
>            =
> Exception  [ OutOf Memeory  ]
> 
> 
> 
> System Config  [same for both type]
> 
> Amd Processor [High End Single]
> RAM  1GB
> O/s Linux  ( jantoo type )
> Appserver Tomcat 5.05
> Jdk [ IBM  Blackdown-1.4.1-01  ( == Jdk1.4.1) ]
> 
> Index contains 15 Fields
> Search
> Done only on 1 field
> Retrieve 11 corrosponding fields
> 3 Fields  are for debug details
> 
> 
> Switched from Ist type to IInd Type
> 
> Can some body suggest me Why is this Happening
> 
> Thx in advance
> 
> 
> 
> 
>       WITH WARM REGARDS
>       HAVE A NICE DAY
>       [ N.S.KARTHIK]
> 
> 
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11109-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 07:18:29 2004
Return-Path: <lucene-user-return-11109-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32208 invoked from network); 10 Nov 2004 07:18:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 07:18:29 -0000
Received: (qmail 8402 invoked by uid 500); 10 Nov 2004 07:18:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8377 invoked by uid 500); 10 Nov 2004 07:18:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8363 invoked by uid 99); 10 Nov 2004 07:18:22 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.148.212.186] (HELO w04.bloglines.com) (216.148.212.186)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 09 Nov 2004 23:18:19 -0800
Received: (qmail 26520 invoked by uid 99); 10 Nov 2004 07:17:53 -0000
Message-ID: <1100071073.3496437624.26519.sendItem@bloglines.com>
Date: 10 Nov 2004 07:17:53 -0000
From: yahootintin.1247688@bloglines.com
To: lucene-user@jakarta.apache.org
Subject: Re: Locking issue
MIME-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis or Erik, do you know if a Reader continously opening should cause the
Writer to fail with a "Lock obtain timed out" error?

--- Lucene Users List"
<lucene-user@jakarta.apache.org wrote:
The attached Java file shows a locking
issue that occurs with
> Lucene.
> 
> One thread opens and closes an IndexReader.
 The other thread
> opens an IndexWriter, adds a document and then closes
the
> IndexWriter.  I would expect that this app should be able to
> happily
run without an issues.
> 
> It fails with:
>   java.io.IOException: Lock
obtain timed out
> 
> Is this expected?  I thought a Reader could be opened
while a
> Writer is adding a document.
> 
> Any help is appreciated.
>

> 
> ---------------------------------------------------------------------

> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For
additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11110-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 08:32:27 2004
Return-Path: <lucene-user-return-11110-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 79242 invoked from network); 10 Nov 2004 08:32:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 08:32:27 -0000
Received: (qmail 94759 invoked by uid 500); 10 Nov 2004 08:32:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94649 invoked by uid 500); 10 Nov 2004 08:32:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94608 invoked by uid 99); 10 Nov 2004 08:32:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 00:32:04 -0800
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I6YGEA00.GGZ; Wed, 10 Nov 2004 14:16:58 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	 <yahootintin-lucene@yahoo.com>
Subject: RE: Lucene1.4.1 + OutOf Memory
Date: Wed, 10 Nov 2004 14:11:11 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIMENKCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
In-Reply-To: <20041110071604.47838.qmail@web41009.mail.yahoo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Guy's

Apologies .........


  I am NOT Using "sorting code"

  hits = multiSearcher.search(query, new Sort(new SortField("filename",
SortField.STRING)));

 but using multiSearcher.search(query)

 in Core Files setup and still getting the Error.



 More Advises Required..........


Karthik



-----Original Message-----
From: yahootintin-lucene@yahoo.com [mailto:yahootintin-lucene@yahoo.com]
Sent: Wednesday, November 10, 2004 12:46 PM
To: Lucene Users List
Subject: Re: Lucene1.4.1 + OutOf Memory


There is a memory leak in the sorting code of Lucene 1.4.1.
1.4.2 has the fix!

--- Karthik N S <karthik@controlnet.co.in> wrote:

>
> Hi
> Guys
>
> Apologies..........
>
>
>
> History
>
> Ist type :  40000  subindexes   +  MultiSearcher  + Search on
> Content Field
> Only  for 2000 hits
>
>
>            =
> Exception  [ Too many Files Open ]
>
>
>
>
>
> IInd type :  40 Mergerd Indexes [1000 subindexes each]   +
> MultiSearcher
> /ParallelSearcher +  Search on Content Field Only for 20000
> hits
>
>
>            =
> Exception  [ OutOf Memeory  ]
>
>
>
> System Config  [same for both type]
>
> Amd Processor [High End Single]
> RAM  1GB
> O/s Linux  ( jantoo type )
> Appserver Tomcat 5.05
> Jdk [ IBM  Blackdown-1.4.1-01  ( == Jdk1.4.1) ]
>
> Index contains 15 Fields
> Search
> Done only on 1 field
> Retrieve 11 corrosponding fields
> 3 Fields  are for debug details
>
>
> Switched from Ist type to IInd Type
>
> Can some body suggest me Why is this Happening
>
> Thx in advance
>
>
>
>
>       WITH WARM REGARDS
>       HAVE A NICE DAY
>       [ N.S.KARTHIK]
>
>
>
>
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11111-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 08:47:13 2004
Return-Path: <lucene-user-return-11111-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85435 invoked from network); 10 Nov 2004 08:47:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 08:47:13 -0000
Received: (qmail 18178 invoked by uid 500); 10 Nov 2004 08:47:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18034 invoked by uid 500); 10 Nov 2004 08:47:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18020 invoked by uid 99); 10 Nov 2004 08:47:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [195.245.231.99] (HELO mail84.messagelabs.com) (195.245.231.99)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 00:47:03 -0800
X-VirusChecked: Checked
X-Env-Sender: iouli.golovatyi@group.novartis.com
X-Msg-Ref: server-9.tower-84.messagelabs.com!1100076369!1224508
X-StarScan-Version: 5.2.10; banners=-,-,-
X-Originating-IP: [160.62.1.169]
Received: (qmail 29936 invoked from network); 10 Nov 2004 08:46:09 -0000
Received: from fw-mail12.novartis.com (160.62.1.169)
  by server-9.tower-84.messagelabs.com with DES-CBC3-SHA encrypted SMTP; 10 Nov 2004 08:46:09 -0000
Received: from mtap1.is.chbs ([192.37.33.20])
	by fw-mail12.novartis.com (Switch-3.1.6/Switch-3.1.6) with ESMTP id iAA8k9mn21979284
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 09:46:09 +0100
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap1.is.chbs (Switch-3.1.6/Switch-3.1.0) with ESMTP id iAA8k9vl15630510
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 09:46:09 +0100
Subject: RE: Lucene1.4.1 + OutOf Memory
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Message-ID: <OF4044C6A7.9CC3982E-ONC1256F48.002FC9FA-C1256F48.00302ABF@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Wed, 10 Nov 2004 09:46:06 +0100
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Exception "too many files open means":
- searcher object is nor closed after query execution
- too little file handlers

Regards
J.


                                                                                                                             
                      "Karthik N S"                                                                                          
                      <karthik@controln        To:       "Lucene Users List" <lucene-user@jakarta.apache.org>,               
                      et.co.in>                 <yahootintin-lucene@yahoo.com>                                               
                                               cc:       (bcc: Iouli Golovatyi/X/GP/Novartis)                                
                      10.11.2004 09:41         Subject:  RE: Lucene1.4.1 + OutOf Memory                                      
                      Please respond to                                                                                      
                      "Lucene Users            Category:       |-------------------------|                                   
                      List"                                    | ( ) Action needed       |                                   
                                                               | ( ) Decision needed     |                                   
                                                               | ( ) General Information |                                   
                                                               |-------------------------|                                   
                                                                                                                             
                                                                                                                             




Hi Guy's

Apologies .........


  I am NOT Using "sorting code"

  hits = multiSearcher.search(query, new Sort(new SortField("filename",
SortField.STRING)));

 but using multiSearcher.search(query)

 in Core Files setup and still getting the Error.



 More Advises Required..........


Karthik



-----Original Message-----
From: yahootintin-lucene@yahoo.com [mailto:yahootintin-lucene@yahoo.com]
Sent: Wednesday, November 10, 2004 12:46 PM
To: Lucene Users List
Subject: Re: Lucene1.4.1 + OutOf Memory


There is a memory leak in the sorting code of Lucene 1.4.1.
1.4.2 has the fix!

--- Karthik N S <karthik@controlnet.co.in> wrote:

>
> Hi
> Guys
>
> Apologies..........
>
>
>
> History
>
> Ist type :  40000  subindexes   +  MultiSearcher  + Search on
> Content Field
> Only  for 2000 hits
>
>
>            =
> Exception  [ Too many Files Open ]
>
>
>
>
>
> IInd type :  40 Mergerd Indexes [1000 subindexes each]   +
> MultiSearcher
> /ParallelSearcher +  Search on Content Field Only for 20000
> hits
>
>
>            =
> Exception  [ OutOf Memeory  ]
>
>
>
> System Config  [same for both type]
>
> Amd Processor [High End Single]
> RAM  1GB
> O/s Linux  ( jantoo type )
> Appserver Tomcat 5.05
> Jdk [ IBM  Blackdown-1.4.1-01  ( == Jdk1.4.1) ]
>
> Index contains 15 Fields
> Search
> Done only on 1 field
> Retrieve 11 corrosponding fields
> 3 Fields  are for debug details
>
>
> Switched from Ist type to IInd Type
>
> Can some body suggest me Why is this Happening
>
> Thx in advance
>
>
>
>
>       WITH WARM REGARDS
>       HAVE A NICE DAY
>       [ N.S.KARTHIK]
>
>
>
>
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org







---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11112-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 09:28:56 2004
Return-Path: <lucene-user-return-11112-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3382 invoked from network); 10 Nov 2004 09:28:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 09:28:56 -0000
Received: (qmail 84026 invoked by uid 500); 10 Nov 2004 09:28:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84001 invoked by uid 500); 10 Nov 2004 09:28:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 83986 invoked by uid 99); 10 Nov 2004 09:28:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 01:28:42 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C64A013E28FB; Wed, 10 Nov 2004 04:28:38 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id A803B13E28FA
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 04:28:37 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <1100071073.3496437624.26519.sendItem@bloglines.com>
References: <1100071073.3496437624.26519.sendItem@bloglines.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <F6FDA049-32FA-11D9-BAF6-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Locking issue
Date: Wed, 10 Nov 2004 04:29:05 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 10, 2004, at 2:17 AM, yahootintin.1247688@bloglines.com wrote:
> Otis or Erik, do you know if a Reader continously opening should cause 
> the
> Writer to fail with a "Lock obtain timed out" error?

No need to address individuals here.

With the information provided, I have no idea what the issue may be.  
There certainly is no issue reading and writing to an index at the same 
time, but only one process can be writing/deleting from the index at a 
time.

	Erik

>
> --- Lucene Users List"
> <lucene-user@jakarta.apache.org wrote:
> The attached Java file shows a locking
> issue that occurs with
>> Lucene.
>>
>> One thread opens and closes an IndexReader.
>  The other thread
>> opens an IndexWriter, adds a document and then closes
> the
>> IndexWriter.  I would expect that this app should be able to
>> happily
> run without an issues.
>>
>> It fails with:
>>   java.io.IOException: Lock
> obtain timed out
>>
>> Is this expected?  I thought a Reader could be opened
> while a
>> Writer is adding a document.
>>
>> Any help is appreciated.
>>
>
>>
>> ---------------------------------------------------------------------
>
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For
> additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11113-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 09:34:14 2004
Return-Path: <lucene-user-return-11113-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5268 invoked from network); 10 Nov 2004 09:34:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 09:34:13 -0000
Received: (qmail 91503 invoked by uid 500); 10 Nov 2004 09:34:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91337 invoked by uid 500); 10 Nov 2004 09:34:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91320 invoked by uid 99); 10 Nov 2004 09:34:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 01:34:02 -0800
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I6YIB000.EFM for <lucene-user@jakarta.apache.org>; Wed,
          10 Nov 2004 14:58:12 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: Lucene1.4.1 + OutOf Memory
Date: Wed, 10 Nov 2004 14:52:25 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIKENLCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
In-Reply-To: <OF4044C6A7.9CC3982E-ONC1256F48.002FC9FA-C1256F48.00302ABF@EU.novartis.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Guy's


Apologies.........


  That's Why  Somebody on the form asked me to Switch to


 : 40 Mergerd Indexes [1000 subindexes each]   +  MultiSearcher /
ParallelSearcher +  Search on Content Field Only for 20000

  the problem of to many Files open was solved since now there were only 40
MergerIndexes - [1 MergerIndex has 1000 sub indexes]

  instead of  40000 subindexes.

 Now I am gettinf Out of Memory Exception.........


  Any Idea On how to Solve this problem.



Thx in Advance






-----Original Message-----
From: iouli.golovatyi@group.novartis.com
[mailto:iouli.golovatyi@group.novartis.com]
Sent: Wednesday, November 10, 2004 2:16 PM
To: Lucene Users List
Subject: RE: Lucene1.4.1 + OutOf Memory



Exception "too many files open means":
- searcher object is nor closed after query execution
- too little file handlers

Regards
J.



                      "Karthik N S"
                      <karthik@controln        To:       "Lucene Users List"
<lucene-user@jakarta.apache.org>,
                      et.co.in>
<yahootintin-lucene@yahoo.com>
                                               cc:       (bcc: Iouli
Golovatyi/X/GP/Novartis)
                      10.11.2004 09:41         Subject:  RE: Lucene1.4.1 +
OutOf Memory
                      Please respond to
                      "Lucene Users            Category:
|-------------------------|
                      List"                                    | ( ) Action
needed       |
                                                               | ( )
Decision needed     |
                                                               | ( ) General
Information |

|-------------------------|






Hi Guy's

Apologies .........


  I am NOT Using "sorting code"

  hits = multiSearcher.search(query, new Sort(new SortField("filename",
SortField.STRING)));

 but using multiSearcher.search(query)

 in Core Files setup and still getting the Error.



 More Advises Required..........


Karthik



-----Original Message-----
From: yahootintin-lucene@yahoo.com [mailto:yahootintin-lucene@yahoo.com]
Sent: Wednesday, November 10, 2004 12:46 PM
To: Lucene Users List
Subject: Re: Lucene1.4.1 + OutOf Memory


There is a memory leak in the sorting code of Lucene 1.4.1.
1.4.2 has the fix!

--- Karthik N S <karthik@controlnet.co.in> wrote:

>
> Hi
> Guys
>
> Apologies..........
>
>
>
> History
>
> Ist type :  40000  subindexes   +  MultiSearcher  + Search on
> Content Field
> Only  for 2000 hits
>
>
>            =
> Exception  [ Too many Files Open ]
>
>
>
>
>
> IInd type :  40 Mergerd Indexes [1000 subindexes each]   +
> MultiSearcher
> /ParallelSearcher +  Search on Content Field Only for 20000
> hits
>
>
>            =
> Exception  [ OutOf Memeory  ]
>
>
>
> System Config  [same for both type]
>
> Amd Processor [High End Single]
> RAM  1GB
> O/s Linux  ( jantoo type )
> Appserver Tomcat 5.05
> Jdk [ IBM  Blackdown-1.4.1-01  ( == Jdk1.4.1) ]
>
> Index contains 15 Fields
> Search
> Done only on 1 field
> Retrieve 11 corrosponding fields
> 3 Fields  are for debug details
>
>
> Switched from Ist type to IInd Type
>
> Can some body suggest me Why is this Happening
>
> Thx in advance
>
>
>
>
>       WITH WARM REGARDS
>       HAVE A NICE DAY
>       [ N.S.KARTHIK]
>
>
>
>
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org







---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11114-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 09:34:51 2004
Return-Path: <lucene-user-return-11114-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5596 invoked from network); 10 Nov 2004 09:34:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 09:34:50 -0000
Received: (qmail 93749 invoked by uid 500); 10 Nov 2004 09:34:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93691 invoked by uid 500); 10 Nov 2004 09:34:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93668 invoked by uid 99); 10 Nov 2004 09:34:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 01:34:37 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7209913E28FB; Wed, 10 Nov 2004 04:34:32 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id A102613E28FC
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 04:34:28 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIMENJCCAA.karthik@controlnet.co.in>
References: <LOEGLEEGOAKBOLAJCCKIMENJCCAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <C814AE4B-32FB-11D9-BAF6-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Lucene1.4.1 + OutOf Memory
Date: Wed, 10 Nov 2004 04:34:55 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 10, 2004, at 1:55 AM, Karthik N S wrote:
>
> Hi
> Guys
>
> Apologies..........

No need to apologize for asking questions.

> History
>
> Ist type :  40000  subindexes   +  MultiSearcher  + Search on Content 
> Field

You've got 40,000 indexes aggregated under a MultiSearcher and you're 
wondering why you're running out of memory?!  :O

> Exception  [ Too many Files Open ]

Are you using the compound file format?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11115-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 09:39:23 2004
Return-Path: <lucene-user-return-11115-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8060 invoked from network); 10 Nov 2004 09:39:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 09:39:22 -0000
Received: (qmail 2632 invoked by uid 500); 10 Nov 2004 09:39:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2598 invoked by uid 500); 10 Nov 2004 09:39:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2585 invoked by uid 99); 10 Nov 2004 09:39:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.62.196.100] (HELO maui.ebi.ac.uk) (193.62.196.100)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 01:39:09 -0800
Received: from SILK (silk.dhcp.ebi.ac.uk [172.22.69.6])
	by maui.ebi.ac.uk (8.11.7+Sun/8.11.7) with SMTP id iAA9clF05615
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 09:38:48 GMT
From: "Rupinder Singh Mazara" <rsmazara@ebi.ac.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: Lucene1.4.1 + OutOf Memory
Date: Wed, 10 Nov 2004 09:39:30 -0000
Message-ID: <CFEHIPOIEGKAJJPJENCEOEJDCDAA.rsmazara@ebi.ac.uk>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0002_01C4C709.2DA52FD0"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.6604 (9.0.2911.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Importance: Normal
In-Reply-To: <C814AE4B-32FB-11D9-BAF6-000393A564E6@ehatchersolutions.com>
X-EBI-Information: This email is scanned using www.mailscanner.info.
X-EBI: Found to be clean
X-EBI-SpamCheck: not spam, SpamAssassin (score=0, required 5)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0002_01C4C709.2DA52FD0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

hi all

 I had a similar problem with jdk1.4.1, Doug had sent me a patch which I am
attaching following is the mail from Doug

 It sounds like the ThreadLocal in TermInfosReader is not getting
correctly garbage collected when the TermInfosReader is collected.
Researching a bit, this was a bug in JVMs prior to 1.4.2, so my guess is
that you're running in an older JVM.  Is that right?

I've attached a patch which should fix this.  Please tell me if it works
for you.

Doug

Daniel Taurat wrote:
> Okay, that (1.4rc3)worked fine, too!
> Got only 257 SegmentTermEnums for 1900 objects.
>
> Now I will go for the final test on the production server with the
> 1.4rc3 version  and about 40.000 objects.
>
> Daniel
>
> Daniel Taurat schrieb:
>
>> Hi all,
>> here is some update for you:
>> I switched back to Lucene 1.3-final and now the  number of the
>> SegmentTermEnum objects is controlled by gc again:
>> it goes up to about 1000 and then it is down again to 254 after
>> indexing my 1900 test-objects.
>> Stay tuned, I will try 1.4RC3 now, the last version before FieldCache
>> was introduced...
>>
>> Daniel
>>
>>
>> Rupinder Singh Mazara schrieb:
>>
>>> hi all
>>>  I had a similar problem, i have  database of documents with 24
>>> fields, and a average content of 7K, with  16M+ records
>>>
>>>  i had to split the jobs into slabs of 1M each and merging the
>>> resulting indexes, submissions to our job queue looked like
>>>
>>>  java -Xms100M -Xcompactexplicitgc -cp $CLASSPATH lucene.Indexer 22
>>>
>>> and i still had outofmemory exception , the solution that i created
>>> was to after every 200K, documents create a temp directory, and merge
>>> them together, this was done to do the first production run, updates
>>> are now being handled incrementally
>>>
>>>
>>>
>>> Exception in thread "main" java.lang.OutOfMemoryError
>>> at
>>>
org.apache.lucene.store.RAMOutputStream.flushBuffer(RAMOutputStream.java(Com
piled
>>> Code))
>>>     at
>>> org.apache.lucene.store.OutputStream.flush(OutputStream.java(Inlined
>>> Compiled Code))
>>>     at
>>> org.apache.lucene.store.OutputStream.writeByte(OutputStream.java(Inlined
>>> Compiled Code))
>>>     at
>>>
org.apache.lucene.store.OutputStream.writeBytes(OutputStream.java(Compiled
>>> Code))
>>>     at
>>>
org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java(
Compiled
>>> Code))
>>>     at
>>>
org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java(Com
piled
>>> Code))
>>>     at
>>>
org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java(
Compiled
>>> Code))
>>>     at
>>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java(Compiled
>>> Code))
>>>     at
>>>
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java(Compiled
>>> Code))
>>>     at
>>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
>>>     at lucene.Indexer.doIndex(CDBIndexer.java(Compiled Code))
>>>     at lucene.Indexer.main(CDBIndexer.java:168)
>>>
>>>
>>>
>>>> -----Original Message-----
>>>> From: Daniel Taurat [mailto:daniel.taurat@gaussvip.com]
>>>> Sent: 10 September 2004 14:42
>>>> To: Lucene Users List
>>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large
>>>> number
>>>> of documents
>>>>
>>>>
>>>> Hi Pete,
>>>> good hint, but we actually do have physical memory of  4Gb on the
>>>> system. But then: we also have experienced that the gc of ibm
>>>> jdk1.3.1 that we use is sometimes
>>>> behaving strangely with too large heap space anyway. (Limit seems to
>>>> be 1.2 Gb)
>>>> I can say that gc is not collecting these objects since I  forced gc
>>>> runs when indexing every now and then (when parsing pdf-type
>>>> objects, that is): No effect.
>>>>
>>>> regards,
>>>>
>>>> Daniel
>>>>
>>>>
>>>> Pete Lewis wrote:
>>>>
>>>>
>>>>
>>>>> Hi all
>>>>>
>>>>> Reading the thread with interest, there is another way I've come
>>>>
>>>>
>>>> across out
>>>>
>>>>
>>>>> of memory errors when indexing large batches of documents.
>>>>>
>>>>> If you have your heap space settings too high, then you get
>>>>
>>>>
>>>> swapping (which
>>>>
>>>>
>>>>> impacts performance) plus you never reach the trigger for garbage
>>>>> collection, hence you don't garbage collect and hence you run out
>>>>
>>>>
>>>> of memory.
>>>>
>>>>
>>>>> Can you check whether or not your garbage collection is being
>>>>> triggered?
>>>>>
>>>>> Anomalously therefore if this is the case, by reducing the heap
>>>>> space you
>>>>> can improve performance get rid of the out of memory errors.
>>>>>
>>>>> Cheers
>>>>> Pete Lewis
>>>>>
>>>>> ----- Original Message ----- From: "Daniel Taurat"
>>>>> <daniel.taurat@gaussvip.com>
>>>>> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>> Sent: Friday, September 10, 2004 1:10 PM
>>>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large
>>>>
>>>>
>>>> number of
>>>>
>>>>
>>>>> documents
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> Daniel Aber schrieb:
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> On Thursday 09 September 2004 19:47, Daniel Taurat wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> I am facing an out of memory problem using  Lucene 1.4.1.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Could you try with a recent CVS version? There has been a fix
>>>>>>>
>>>>>>
>>>>>>
>>>> about files
>>>>
>>>>
>>>>>>> not being deleted after 1.4.1. Not sure if that could cause the
>>>>>>> problems
>>>>>>> you're experiencing.
>>>>>>>
>>>>>>> Regards
>>>>>>> Daniel
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>> Well, it seems not to be files, it looks more like those
>>>>>> SegmentTermEnum
>>>>>> objects accumulating in memory.
>>>>>> #I've seen some discussion on these objects in the
>>>>>> developer-newsgroup
>>>>>> that had taken place some time ago.
>>>>>> I am afraid this is some kind of runaway caching I have to deal with.
>>>>>> Maybe not  correctly addressed in this newsgroup, after all...
>>>>>>
>>>>>> Anyway: any idea if there is an API command to re-init caches?
>>>>>>
>>>>>> Thanks,
>>>>>>
>>>>>> Daniel
>>>>>>
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>>
>>>
>>
>>
>
>

>-----Original Message-----
>From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>Sent: 10 November 2004 09:35
>To: Lucene Users List
>Subject: Re: Lucene1.4.1 + OutOf Memory
>
>
>On Nov 10, 2004, at 1:55 AM, Karthik N S wrote:
>>
>> Hi
>> Guys
>>
>> Apologies..........
>
>No need to apologize for asking questions.
>
>> History
>>
>> Ist type :  40000  subindexes   +  MultiSearcher  + Search on Content
>> Field
>
>You've got 40,000 indexes aggregated under a MultiSearcher and you're
>wondering why you're running out of memory?!  :O
>
>> Exception  [ Too many Files Open ]
>
>Are you using the compound file format?
>
>	Erik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


------=_NextPart_000_0002_01C4C709.2DA52FD0
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
------=_NextPart_000_0002_01C4C709.2DA52FD0--


From lucene-user-return-11116-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 09:46:51 2004
Return-Path: <lucene-user-return-11116-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11330 invoked from network); 10 Nov 2004 09:46:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 09:46:51 -0000
Received: (qmail 12302 invoked by uid 500); 10 Nov 2004 09:46:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12209 invoked by uid 500); 10 Nov 2004 09:46:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12196 invoked by uid 99); 10 Nov 2004 09:46:43 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.216] (HELO web21327.mail.yahoo.com) (216.136.175.216)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 01:46:43 -0800
Received: (qmail 32831 invoked by uid 60001); 10 Nov 2004 09:46:41 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=j56A7Wi+yzYdoiujuxar+OiKbWjblEyJfZijlC2Cmdaspto+1PAoZkmNqlbt0qIcm7LIswl/Jowpt1uC0CtQQ2IVn0pjrVBhqOdPxo4SsFifQl2morJYYtWIqUfqxImCAMUbVzv+JhXAGUypCggF08PhtdhMUjJ4aT5cY6MMN+I=  ;
Message-ID: <20041110094641.32829.qmail@web21327.mail.yahoo.com>
Received: from [193.226.211.176] by web21327.mail.yahoo.com via HTTP; Wed, 10 Nov 2004 01:46:41 PST
Date: Wed, 10 Nov 2004 01:46:41 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: stopword AND validword throws exception
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

I've left out custom stopwords from my index using the StopAnalyzer(customstopwords).
Now, when I try to searh the index the same way (StopAnalyzer(customstopwords)), it seems to act
strange:

This query works as expected:
validword AND stopword
(throws out the stopword part and searches for validword)

This query seems to crash:
stopword AND validword
(java.lang.ArrayIndexOutOfBoundsException: -1)

Maybe it can't handle the case if it had to remove the very first part of the query?!
Can anyone else test this for me? How can I overcome this problem?

(lucene-1.4-final.jar)

Thanks for your time!

Sanyi


		
__________________________________ 
Do you Yahoo!? 
Check out the new Yahoo! Front Page. 
www.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11117-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 10:47:05 2004
Return-Path: <lucene-user-return-11117-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38263 invoked from network); 10 Nov 2004 10:47:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 10:47:05 -0000
Received: (qmail 92260 invoked by uid 500); 10 Nov 2004 10:46:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92231 invoked by uid 500); 10 Nov 2004 10:46:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92214 invoked by uid 99); 10 Nov 2004 10:46:55 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.255.81.93] (HELO serveur1.itldev.info) (81.255.81.93)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 02:46:54 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by serveur1.itldev.info (Postfix) with ESMTP
	id 6993527E19; Wed, 10 Nov 2004 11:46:51 +0100 (CET)
Received: from serveur1.itldev.info ([127.0.0.1])
 by localhost (serveur1.itldev.info [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 21425-04; Wed, 10 Nov 2004 11:46:51 +0100 (CET)
Received: from thierry (unknown [192.168.2.1])
	by serveur1.itldev.info (Postfix) with ESMTP
	id 4456427B27; Wed, 10 Nov 2004 11:46:51 +0100 (CET)
Message-ID: <008401c4c712$91b714d0$0102a8c0@thierry>
From: "Thierry Ferrero" <ferrero@itldev.info>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"Justin Swanhart" <greenlion@gmail.com>
References: <008e01c4c677$ba2d37f0$0102a8c0@thierry> <dd2db8d0041109104156ceac98@mail.gmail.com>
Subject: Re: Searching in keyword field ?
Date: Wed, 10 Nov 2004 11:46:43 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Scanned: by amavisd-new at itldev.info
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Justin, it works fine !!!!

----- Original Message ----- 
From: "Justin Swanhart" <greenlion@gmail.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, November 09, 2004 7:41 PM
Subject: Re: Searching in keyword field ?


> You can add the category keyword multiple times to a document.
>
> Instead of seperating your categories with a delimiter, just add the
> keyword multiple times.
>
> doc.add(Field.Keyword("category", "ABC");
> doc.add(Field.Keyword("category", "DEF GHI");
>
> On Tue, 9 Nov 2004 17:18:19 +0100, Thierry Ferrero (Itldev.info)
> <ferrero@itldev.info> wrote:
> > Hi All,
> >
> > Can i search only one word in a keyword field which contains few words.
> > I know keyword field isn't tokenized. After many tests, i think is
> > impossible.
> > Someone can confirm me ?
> >
> > Why don't i use a text field? because the users know the category from a
> > list (ex: category ABC, category DEF GHI, category  JKL ...) and the
keyword
> > field 'category' can contains severals terms (ABC, DEF GHI, OPQ RST).
> > I use a SnowBallAnalyzer for text field in indexing.
> > Perhaps the better way for me, is to use a text field with the value
"ABC
> > DEF_GHI  JKL_NOPQ" where categorys are concatinated with a "_".
> > Thanks for your reply !
> >
> > Thierry.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11118-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 10:51:12 2004
Return-Path: <lucene-user-return-11118-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40531 invoked from network); 10 Nov 2004 10:51:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 10:51:12 -0000
Received: (qmail 98511 invoked by uid 500); 10 Nov 2004 10:51:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98268 invoked by uid 500); 10 Nov 2004 10:50:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98255 invoked by uid 99); 10 Nov 2004 10:50:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.83] (HELO mailout07.sul.t-online.com) (194.25.134.83)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 02:50:56 -0800
Received: from fwd04.aul.t-online.de 
	by mailout07.sul.t-online.com with smtp 
	id 1CRq3y-0001ux-06; Wed, 10 Nov 2004 11:50:54 +0100
Received: from pD9EBF73B.dip.t-dialin.net (SsQos6ZYZeeqG3q9mv-msuGtZYAMkWfSzHgqu8BkG9JejETz90crEB@[217.235.247.59]) by fmrl04.sul.t-online.com
	with esmtp id 1CRq3s-23gk2i0; Wed, 10 Nov 2004 11:50:48 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: stopword AND validword throws exception
Date: Wed, 10 Nov 2004 11:51:08 +0100
User-Agent: KMail/1.7.1
References: <20041110094641.32829.qmail@web21327.mail.yahoo.com>
In-Reply-To: <20041110094641.32829.qmail@web21327.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411101151.08886@danielnaber.de>
X-ID: SsQos6ZYZeeqG3q9mv-msuGtZYAMkWfSzHgqu8BkG9JejETz90crEB@t-dialin.net
X-TOI-MSGID: 4133516b-c186-415d-82cd-7a546be3b649
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 10 November 2004 10:46, Sanyi wrote:

> This query seems to crash:
> stopword AND validword
> (java.lang.ArrayIndexOutOfBoundsException: -1)

I think this has been fixed in the development version (which will become 
Lucene 1.9).

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11119-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 10:58:59 2004
Return-Path: <lucene-user-return-11119-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 44589 invoked from network); 10 Nov 2004 10:58:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 10:58:59 -0000
Received: (qmail 6363 invoked by uid 500); 10 Nov 2004 10:58:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6331 invoked by uid 500); 10 Nov 2004 10:58:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6313 invoked by uid 99); 10 Nov 2004 10:58:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 02:58:50 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 3DC9323BF4
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 11:59:19 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 10139-01 for <lucene-user@jakarta.apache.org>;
 Wed, 10 Nov 2004 11:59:19 +0100 (CET)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 1395D23BF1
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 11:59:19 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id iAAAwlmA023756
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 11:58:47 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id iAAAwlG3023752;
	Wed, 10 Nov 2004 11:58:47 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16785.62567.191874.743194@tanto-xipolis.de>
Date: Wed, 10 Nov 2004 11:58:47 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: stopword AND validword throws exception
In-Reply-To: <20041110094641.32829.qmail@web21327.mail.yahoo.com>
References: <20041110094641.32829.qmail@web21327.mail.yahoo.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sanyi writes:
> 
> This query works as expected:
> validword AND stopword
> (throws out the stopword part and searches for validword)
> 
> This query seems to crash:
> stopword AND validword
> (java.lang.ArrayIndexOutOfBoundsException: -1)
> 
> Maybe it can't handle the case if it had to remove the very first part of the query?!
> Can anyone else test this for me? How can I overcome this problem?
> 
see bug:
http://issues.apache.org/bugzilla/show_bug.cgi?id=9110

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11120-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 11:17:54 2004
Return-Path: <lucene-user-return-11120-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52863 invoked from network); 10 Nov 2004 11:17:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 11:17:54 -0000
Received: (qmail 38485 invoked by uid 500); 10 Nov 2004 11:17:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38443 invoked by uid 500); 10 Nov 2004 11:17:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38422 invoked by uid 99); 10 Nov 2004 11:17:43 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.215] (HELO web21326.mail.yahoo.com) (216.136.175.215)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 03:17:42 -0800
Received: (qmail 7658 invoked by uid 60001); 10 Nov 2004 11:17:40 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=dKwhgXrpKexDcmpS7vIsYISFa4yp75zXTjU1/395vFFXmnWePQWaFkDYibgd30W3YmJraw5qv9FofLJLQwzkhZBDi10uRMpjppOYxQGxRtByeF58MUNmS9kDNeZuEm5O0AA2/455k3aVxmz/qhuntftSKO2XclFvimnADmlSWKc=  ;
Message-ID: <20041110111740.7656.qmail@web21326.mail.yahoo.com>
Received: from [193.226.211.176] by web21326.mail.yahoo.com via HTTP; Wed, 10 Nov 2004 03:17:40 PST
Date: Wed, 10 Nov 2004 03:17:40 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Re: stopword AND validword throws exception
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <16785.62567.191874.743194@tanto-xipolis.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanx for your replies guys.

Now, I was trying to locate the latest patch for this "problem group", and the last thread I've
read about this is:
http://issues.apache.org/bugzilla/show_bug.cgi?id=25820
It ends with an open question from Morus:
"If you want me to change the patch, let me know. That no big deal."

Did you change the patch since then?

In other words: What is the latest development in this topic?
Can I simply download the latest compiled development version of lucene.jar and will it fix my
problem?

The lastest builds I could find are these:
http://cvs.apache.org/builds/jakarta-lucene/nightly/2003-09-09/

It seems to be quite old, so please help me out!

Thanx,
Sanyi

--- Morus Walter <morus.walter@tanto.de> wrote:

> Sanyi writes:
> > 
> > This query works as expected:
> > validword AND stopword
> > (throws out the stopword part and searches for validword)
> > 
> > This query seems to crash:
> > stopword AND validword
> > (java.lang.ArrayIndexOutOfBoundsException: -1)
> > 
> > Maybe it can't handle the case if it had to remove the very first part of the query?!
> > Can anyone else test this for me? How can I overcome this problem?
> > 
> see bug:
> http://issues.apache.org/bugzilla/show_bug.cgi?id=9110
> 
> Morus
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 



		
__________________________________ 
Do you Yahoo!? 
Check out the new Yahoo! Front Page. 
www.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11121-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 11:30:11 2004
Return-Path: <lucene-user-return-11121-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57453 invoked from network); 10 Nov 2004 11:30:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 11:30:11 -0000
Received: (qmail 59748 invoked by uid 500); 10 Nov 2004 11:30:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59720 invoked by uid 500); 10 Nov 2004 11:30:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 59707 invoked by uid 99); 10 Nov 2004 11:30:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 03:29:58 -0800
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I6YOMQ00.GIA for <lucene-user@jakarta.apache.org>; Wed,
          10 Nov 2004 17:14:50 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: Lucene1.4.1 + OutOf Memory
Date: Wed, 10 Nov 2004 17:09:03 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIEENNCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <C814AE4B-32FB-11D9-BAF6-000393A564E6@ehatchersolutions.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Guy's


Apologies......


 Yes  Erik

  The Day I switched from Lucene1.3.1 to Lucene1.4.1  We  are using  the
CompoundFile format to


    writer.setUseCompoundFile(true);


Some More Advises Please.


Thx in advance

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Wednesday, November 10, 2004 3:05 PM
To: Lucene Users List
Subject: Re: Lucene1.4.1 + OutOf Memory


On Nov 10, 2004, at 1:55 AM, Karthik N S wrote:
>
> Hi
> Guys
>
> Apologies..........

No need to apologize for asking questions.

> History
>
> Ist type :  40000  subindexes   +  MultiSearcher  + Search on Content
> Field

You've got 40,000 indexes aggregated under a MultiSearcher and you're
wondering why you're running out of memory?!  :O

> Exception  [ Too many Files Open ]

Are you using the compound file format?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11122-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 11:32:15 2004
Return-Path: <lucene-user-return-11122-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58269 invoked from network); 10 Nov 2004 11:32:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 11:32:15 -0000
Received: (qmail 62519 invoked by uid 500); 10 Nov 2004 11:32:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62490 invoked by uid 500); 10 Nov 2004 11:32:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62476 invoked by uid 99); 10 Nov 2004 11:32:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 03:32:03 -0800
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I6YOQ800.NIY for <lucene-user@jakarta.apache.org>; Wed,
          10 Nov 2004 17:16:56 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: Lucene1.4.1 + OutOf Memory
Date: Wed, 10 Nov 2004 17:11:09 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIKENNCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <CFEHIPOIEGKAJJPJENCEOEJDCDAA.rsmazara@ebi.ac.uk>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

  Rupinder Singh Mazara

Apologies............



  Can u Past the code on to the Mail instead of Attachement...

  [ Cause I am not bale to get the Attachement  on the Company's mail ]


 Thx in advance
Karthik


-----Original Message-----
From: Rupinder Singh Mazara [mailto:rsmazara@ebi.ac.uk]
Sent: Wednesday, November 10, 2004 3:10 PM
To: Lucene Users List
Subject: RE: Lucene1.4.1 + OutOf Memory


hi all

 I had a similar problem with jdk1.4.1, Doug had sent me a patch which I am
attaching following is the mail from Doug

 It sounds like the ThreadLocal in TermInfosReader is not getting
correctly garbage collected when the TermInfosReader is collected.
Researching a bit, this was a bug in JVMs prior to 1.4.2, so my guess is
that you're running in an older JVM.  Is that right?

I've attached a patch which should fix this.  Please tell me if it works
for you.

Doug

Daniel Taurat wrote:
> Okay, that (1.4rc3)worked fine, too!
> Got only 257 SegmentTermEnums for 1900 objects.
>
> Now I will go for the final test on the production server with the
> 1.4rc3 version  and about 40.000 objects.
>
> Daniel
>
> Daniel Taurat schrieb:
>
>> Hi all,
>> here is some update for you:
>> I switched back to Lucene 1.3-final and now the  number of the
>> SegmentTermEnum objects is controlled by gc again:
>> it goes up to about 1000 and then it is down again to 254 after
>> indexing my 1900 test-objects.
>> Stay tuned, I will try 1.4RC3 now, the last version before FieldCache
>> was introduced...
>>
>> Daniel
>>
>>
>> Rupinder Singh Mazara schrieb:
>>
>>> hi all
>>>  I had a similar problem, i have  database of documents with 24
>>> fields, and a average content of 7K, with  16M+ records
>>>
>>>  i had to split the jobs into slabs of 1M each and merging the
>>> resulting indexes, submissions to our job queue looked like
>>>
>>>  java -Xms100M -Xcompactexplicitgc -cp $CLASSPATH lucene.Indexer 22
>>>
>>> and i still had outofmemory exception , the solution that i created
>>> was to after every 200K, documents create a temp directory, and merge
>>> them together, this was done to do the first production run, updates
>>> are now being handled incrementally
>>>
>>>
>>>
>>> Exception in thread "main" java.lang.OutOfMemoryError
>>> at
>>>
org.apache.lucene.store.RAMOutputStream.flushBuffer(RAMOutputStream.java(Com
piled
>>> Code))
>>>     at
>>> org.apache.lucene.store.OutputStream.flush(OutputStream.java(Inlined
>>> Compiled Code))
>>>     at
>>> org.apache.lucene.store.OutputStream.writeByte(OutputStream.java(Inlined
>>> Compiled Code))
>>>     at
>>>
org.apache.lucene.store.OutputStream.writeBytes(OutputStream.java(Compiled
>>> Code))
>>>     at
>>>
org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWriter.java(
Compiled
>>> Code))
>>>     at
>>>
org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter.java(Com
piled
>>> Code))
>>>     at
>>>
org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMerger.java(
Compiled
>>> Code))
>>>     at
>>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java(Compiled
>>> Code))
>>>     at
>>>
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java(Compiled
>>> Code))
>>>     at
>>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
>>>     at lucene.Indexer.doIndex(CDBIndexer.java(Compiled Code))
>>>     at lucene.Indexer.main(CDBIndexer.java:168)
>>>
>>>
>>>
>>>> -----Original Message-----
>>>> From: Daniel Taurat [mailto:daniel.taurat@gaussvip.com]
>>>> Sent: 10 September 2004 14:42
>>>> To: Lucene Users List
>>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large
>>>> number
>>>> of documents
>>>>
>>>>
>>>> Hi Pete,
>>>> good hint, but we actually do have physical memory of  4Gb on the
>>>> system. But then: we also have experienced that the gc of ibm
>>>> jdk1.3.1 that we use is sometimes
>>>> behaving strangely with too large heap space anyway. (Limit seems to
>>>> be 1.2 Gb)
>>>> I can say that gc is not collecting these objects since I  forced gc
>>>> runs when indexing every now and then (when parsing pdf-type
>>>> objects, that is): No effect.
>>>>
>>>> regards,
>>>>
>>>> Daniel
>>>>
>>>>
>>>> Pete Lewis wrote:
>>>>
>>>>
>>>>
>>>>> Hi all
>>>>>
>>>>> Reading the thread with interest, there is another way I've come
>>>>
>>>>
>>>> across out
>>>>
>>>>
>>>>> of memory errors when indexing large batches of documents.
>>>>>
>>>>> If you have your heap space settings too high, then you get
>>>>
>>>>
>>>> swapping (which
>>>>
>>>>
>>>>> impacts performance) plus you never reach the trigger for garbage
>>>>> collection, hence you don't garbage collect and hence you run out
>>>>
>>>>
>>>> of memory.
>>>>
>>>>
>>>>> Can you check whether or not your garbage collection is being
>>>>> triggered?
>>>>>
>>>>> Anomalously therefore if this is the case, by reducing the heap
>>>>> space you
>>>>> can improve performance get rid of the out of memory errors.
>>>>>
>>>>> Cheers
>>>>> Pete Lewis
>>>>>
>>>>> ----- Original Message ----- From: "Daniel Taurat"
>>>>> <daniel.taurat@gaussvip.com>
>>>>> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>> Sent: Friday, September 10, 2004 1:10 PM
>>>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large
>>>>
>>>>
>>>> number of
>>>>
>>>>
>>>>> documents
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> Daniel Aber schrieb:
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> On Thursday 09 September 2004 19:47, Daniel Taurat wrote:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> I am facing an out of memory problem using  Lucene 1.4.1.
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Could you try with a recent CVS version? There has been a fix
>>>>>>>
>>>>>>
>>>>>>
>>>> about files
>>>>
>>>>
>>>>>>> not being deleted after 1.4.1. Not sure if that could cause the
>>>>>>> problems
>>>>>>> you're experiencing.
>>>>>>>
>>>>>>> Regards
>>>>>>> Daniel
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>> Well, it seems not to be files, it looks more like those
>>>>>> SegmentTermEnum
>>>>>> objects accumulating in memory.
>>>>>> #I've seen some discussion on these objects in the
>>>>>> developer-newsgroup
>>>>>> that had taken place some time ago.
>>>>>> I am afraid this is some kind of runaway caching I have to deal with.
>>>>>> Maybe not  correctly addressed in this newsgroup, after all...
>>>>>>
>>>>>> Anyway: any idea if there is an API command to re-init caches?
>>>>>>
>>>>>> Thanks,
>>>>>>
>>>>>> Daniel
>>>>>>
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>>
>>>
>>>
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>>
>>>
>>
>>
>
>

>-----Original Message-----
>From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>Sent: 10 November 2004 09:35
>To: Lucene Users List
>Subject: Re: Lucene1.4.1 + OutOf Memory
>
>
>On Nov 10, 2004, at 1:55 AM, Karthik N S wrote:
>>
>> Hi
>> Guys
>>
>> Apologies..........
>
>No need to apologize for asking questions.
>
>> History
>>
>> Ist type :  40000  subindexes   +  MultiSearcher  + Search on Content
>> Field
>
>You've got 40,000 indexes aggregated under a MultiSearcher and you're
>wondering why you're running out of memory?!  :O
>
>> Exception  [ Too many Files Open ]
>
>Are you using the compound file format?
>
>	Erik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11123-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 11:43:35 2004
Return-Path: <lucene-user-return-11123-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62846 invoked from network); 10 Nov 2004 11:43:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 11:43:35 -0000
Received: (qmail 77706 invoked by uid 500); 10 Nov 2004 11:43:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77679 invoked by uid 500); 10 Nov 2004 11:43:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77660 invoked by uid 99); 10 Nov 2004 11:43:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.62.196.100] (HELO maui.ebi.ac.uk) (193.62.196.100)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 03:43:18 -0800
Received: from SILK (silk.dhcp.ebi.ac.uk [172.22.69.6])
	by maui.ebi.ac.uk (8.11.7+Sun/8.11.7) with SMTP id iAABhDF04275
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 11:43:13 GMT
From: "Rupinder Singh Mazara" <rsmazara@ebi.ac.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: Lucene1.4.1 + OutOf Memory
Date: Wed, 10 Nov 2004 11:43:58 -0000
Message-ID: <CFEHIPOIEGKAJJPJENCEIEJECDAA.rsmazara@ebi.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.6604 (9.0.2911.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Importance: Normal
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIKENNCCAA.karthik@controlnet.co.in>
X-EBI-Information: This email is scanned using www.mailscanner.info.
X-EBI: Found to be clean
X-EBI-SpamCheck: not spam, SpamAssassin (score=0, required 5)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

karthik

 i think the core problem in your case is the use of compound files, i would
be best to switch it off
 or alternatively issue a optimize as soon as the indexing is over.

  i am copying the file contents between <file> tags, the patch is to be
applied on TermInfosReader.java, this
 was done to help out of memory exceptions while doing indexing
  <file>
Index: src/java/org/apache/lucene/index/TermInfosReader.java
===================================================================
RCS file:
/home/cvs/jakarta-lucene/src/java/org/apache/lucene/index/TermInfosReader.ja
va,v
retrieving revision 1.9
diff -u -r1.9 TermInfosReader.java
--- src/java/org/apache/lucene/index/TermInfosReader.java	6 Aug 2004
20:50:29 -0000	1.9
+++ src/java/org/apache/lucene/index/TermInfosReader.java	10 Sep 2004
17:46:47 -0000
@@ -45,6 +45,11 @@
     readIndex();
   }

+  protected final void finalize() {
+    // patch for pre-1.4.2 JVMs, whose ThreadLocals leak
+    enumerators.set(null);
+  }
+
   public int getSkipInterval() {
     return origEnum.skipInterval;
   }
</file>



 however tomcat does react in strange ways to to-many open files,
 try to restrict the number of IndexReader or Searchable objects
  that you create while  doing searches,
I  usually keep one object to handle all my user requests

 public static Searcher fetchCitationSearcher(HttpServletRequest request)
throws Exception {
        Searcher rval = (Searcher)
request.getSession().getServletContext().getAttribute(
                "luceneSearchable");
        if (rval == null) {
          rval = new IndexSearcher( fetchCitationReader(request) );

request.getSession().getServletContext().setAttribute("luceneSearchable",
rval);
        }
        return rval;
    }




>-----Original Message-----
>From: Karthik N S [mailto:karthik@controlnet.co.in]
>Sent: 10 November 2004 11:41
>To: Lucene Users List
>Subject: RE: Lucene1.4.1 + OutOf Memory
>
>
>Hi
>
>  Rupinder Singh Mazara
>
>Apologies............
>
>
>
>  Can u Past the code on to the Mail instead of Attachement...
>
>  [ Cause I am not bale to get the Attachement  on the Company's mail ]
>
>
> Thx in advance
>Karthik
>
>
>-----Original Message-----
>From: Rupinder Singh Mazara [mailto:rsmazara@ebi.ac.uk]
>Sent: Wednesday, November 10, 2004 3:10 PM
>To: Lucene Users List
>Subject: RE: Lucene1.4.1 + OutOf Memory
>
>
>hi all
>
> I had a similar problem with jdk1.4.1, Doug had sent me a patch which I am
>attaching following is the mail from Doug
>
> It sounds like the ThreadLocal in TermInfosReader is not getting
>correctly garbage collected when the TermInfosReader is collected.
>Researching a bit, this was a bug in JVMs prior to 1.4.2, so my guess is
>that you're running in an older JVM.  Is that right?
>
>I've attached a patch which should fix this.  Please tell me if it works
>for you.
>
>Doug
>
>Daniel Taurat wrote:
>> Okay, that (1.4rc3)worked fine, too!
>> Got only 257 SegmentTermEnums for 1900 objects.
>>
>> Now I will go for the final test on the production server with the
>> 1.4rc3 version  and about 40.000 objects.
>>
>> Daniel
>>
>> Daniel Taurat schrieb:
>>
>>> Hi all,
>>> here is some update for you:
>>> I switched back to Lucene 1.3-final and now the  number of the
>>> SegmentTermEnum objects is controlled by gc again:
>>> it goes up to about 1000 and then it is down again to 254 after
>>> indexing my 1900 test-objects.
>>> Stay tuned, I will try 1.4RC3 now, the last version before FieldCache
>>> was introduced...
>>>
>>> Daniel
>>>
>>>
>>> Rupinder Singh Mazara schrieb:
>>>
>>>> hi all
>>>>  I had a similar problem, i have  database of documents with 24
>>>> fields, and a average content of 7K, with  16M+ records
>>>>
>>>>  i had to split the jobs into slabs of 1M each and merging the
>>>> resulting indexes, submissions to our job queue looked like
>>>>
>>>>  java -Xms100M -Xcompactexplicitgc -cp $CLASSPATH lucene.Indexer 22
>>>>
>>>> and i still had outofmemory exception , the solution that i created
>>>> was to after every 200K, documents create a temp directory, and merge
>>>> them together, this was done to do the first production run, updates
>>>> are now being handled incrementally
>>>>
>>>>
>>>>
>>>> Exception in thread "main" java.lang.OutOfMemoryError
>>>> at
>>>>
>org.apache.lucene.store.RAMOutputStream.flushBuffer(RAMOutputStream
>.java(Com
>piled
>>>> Code))
>>>>     at
>>>> org.apache.lucene.store.OutputStream.flush(OutputStream.java(Inlined
>>>> Compiled Code))
>>>>     at
>>>>
>org.apache.lucene.store.OutputStream.writeByte(OutputStream.java(Inlined
>>>> Compiled Code))
>>>>     at
>>>>
>org.apache.lucene.store.OutputStream.writeBytes(OutputStream.java(Compiled
>>>> Code))
>>>>     at
>>>>
>org.apache.lucene.index.CompoundFileWriter.copyFile(CompoundFileWri
>ter.java(
>Compiled
>>>> Code))
>>>>     at
>>>>
>org.apache.lucene.index.CompoundFileWriter.close(CompoundFileWriter
>.java(Com
>piled
>>>> Code))
>>>>     at
>>>>
>org.apache.lucene.index.SegmentMerger.createCompoundFile(SegmentMer
>ger.java(
>Compiled
>>>> Code))
>>>>     at
>>>> org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java(Compiled
>>>> Code))
>>>>     at
>>>>
>org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java(Compiled
>>>> Code))
>>>>     at
>>>> org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
>>>>     at lucene.Indexer.doIndex(CDBIndexer.java(Compiled Code))
>>>>     at lucene.Indexer.main(CDBIndexer.java:168)
>>>>
>>>>
>>>>
>>>>> -----Original Message-----
>>>>> From: Daniel Taurat [mailto:daniel.taurat@gaussvip.com]
>>>>> Sent: 10 September 2004 14:42
>>>>> To: Lucene Users List
>>>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large
>>>>> number
>>>>> of documents
>>>>>
>>>>>
>>>>> Hi Pete,
>>>>> good hint, but we actually do have physical memory of  4Gb on the
>>>>> system. But then: we also have experienced that the gc of ibm
>>>>> jdk1.3.1 that we use is sometimes
>>>>> behaving strangely with too large heap space anyway. (Limit seems to
>>>>> be 1.2 Gb)
>>>>> I can say that gc is not collecting these objects since I  forced gc
>>>>> runs when indexing every now and then (when parsing pdf-type
>>>>> objects, that is): No effect.
>>>>>
>>>>> regards,
>>>>>
>>>>> Daniel
>>>>>
>>>>>
>>>>> Pete Lewis wrote:
>>>>>
>>>>>
>>>>>
>>>>>> Hi all
>>>>>>
>>>>>> Reading the thread with interest, there is another way I've come
>>>>>
>>>>>
>>>>> across out
>>>>>
>>>>>
>>>>>> of memory errors when indexing large batches of documents.
>>>>>>
>>>>>> If you have your heap space settings too high, then you get
>>>>>
>>>>>
>>>>> swapping (which
>>>>>
>>>>>
>>>>>> impacts performance) plus you never reach the trigger for garbage
>>>>>> collection, hence you don't garbage collect and hence you run out
>>>>>
>>>>>
>>>>> of memory.
>>>>>
>>>>>
>>>>>> Can you check whether or not your garbage collection is being
>>>>>> triggered?
>>>>>>
>>>>>> Anomalously therefore if this is the case, by reducing the heap
>>>>>> space you
>>>>>> can improve performance get rid of the out of memory errors.
>>>>>>
>>>>>> Cheers
>>>>>> Pete Lewis
>>>>>>
>>>>>> ----- Original Message ----- From: "Daniel Taurat"
>>>>>> <daniel.taurat@gaussvip.com>
>>>>>> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>>>> Sent: Friday, September 10, 2004 1:10 PM
>>>>>> Subject: Re: Out of memory in lucene 1.4.1 when re-indexing large
>>>>>
>>>>>
>>>>> number of
>>>>>
>>>>>
>>>>>> documents
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> Daniel Aber schrieb:
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>> On Thursday 09 September 2004 19:47, Daniel Taurat wrote:
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>> I am facing an out of memory problem using  Lucene 1.4.1.
>>>>>>>>>
>>>>>>>>>
>>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>> Could you try with a recent CVS version? There has been a fix
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>> about files
>>>>>
>>>>>
>>>>>>>> not being deleted after 1.4.1. Not sure if that could cause the
>>>>>>>> problems
>>>>>>>> you're experiencing.
>>>>>>>>
>>>>>>>> Regards
>>>>>>>> Daniel
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Well, it seems not to be files, it looks more like those
>>>>>>> SegmentTermEnum
>>>>>>> objects accumulating in memory.
>>>>>>> #I've seen some discussion on these objects in the
>>>>>>> developer-newsgroup
>>>>>>> that had taken place some time ago.
>>>>>>> I am afraid this is some kind of runaway caching I have to
>deal with.
>>>>>>> Maybe not  correctly addressed in this newsgroup, after all...
>>>>>>>
>>>>>>> Anyway: any idea if there is an API command to re-init caches?
>>>>>>>
>>>>>>> Thanks,
>>>>>>>
>>>>>>> Daniel
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>---------------------------------------------------------------------
>>>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>> ---------------------------------------------------------------------
>>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ---------------------------------------------------------------------
>>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>
>>
>
>>-----Original Message-----
>>From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>>Sent: 10 November 2004 09:35
>>To: Lucene Users List
>>Subject: Re: Lucene1.4.1 + OutOf Memory
>>
>>
>>On Nov 10, 2004, at 1:55 AM, Karthik N S wrote:
>>>
>>> Hi
>>> Guys
>>>
>>> Apologies..........
>>
>>No need to apologize for asking questions.
>>
>>> History
>>>
>>> Ist type :  40000  subindexes   +  MultiSearcher  + Search on Content
>>> Field
>>
>>You've got 40,000 indexes aggregated under a MultiSearcher and you're
>>wondering why you're running out of memory?!  :O
>>
>>> Exception  [ Too many Files Open ]
>>
>>Are you using the compound file format?
>>
>>	Erik
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11124-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 12:07:45 2004
Return-Path: <lucene-user-return-11124-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72159 invoked from network); 10 Nov 2004 12:07:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 12:07:45 -0000
Received: (qmail 21224 invoked by uid 500); 10 Nov 2004 12:07:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21183 invoked by uid 500); 10 Nov 2004 12:07:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21161 invoked by uid 99); 10 Nov 2004 12:07:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 04:07:23 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 1625923BF4
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 13:07:50 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 11535-08 for <lucene-user@jakarta.apache.org>;
 Wed, 10 Nov 2004 13:07:50 +0100 (CET)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id EDFD123BF1
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 13:07:49 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id iAAC7ImA024237
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 13:07:18 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id iAAC7HND024233;
	Wed, 10 Nov 2004 13:07:17 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16786.1141.894076.861391@tanto-xipolis.de>
Date: Wed, 10 Nov 2004 13:07:17 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: stopword AND validword throws exception
In-Reply-To: <20041110111740.7656.qmail@web21326.mail.yahoo.com>
References: <16785.62567.191874.743194@tanto-xipolis.de>
	<20041110111740.7656.qmail@web21326.mail.yahoo.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sanyi writes:
> Thanx for your replies guys.
> 
> Now, I was trying to locate the latest patch for this "problem group", and the last thread I've
> read about this is:
> http://issues.apache.org/bugzilla/show_bug.cgi?id=25820
> It ends with an open question from Morus:
> "If you want me to change the patch, let me know. That no big deal."
> 
> Did you change the patch since then?
> 
No. But this is an independent issue from the `stopword AND word' problem.
The `stopword AND word' problem just has to be taken care of in that context
also.
Bug 25820 basically is about better handling of AND and OR in a query.
Currently `a AND b OR c AND d'  equals  `a AND b AND c AND d' in query 
parser.

> Can I simply download the latest compiled development version of lucene.jar and will it fix my
> problem?
> 
If there are no current nightly builds, I guess you will have to get the
sources it from cvs directly.

But the fix seems to be included in 1.4.2.
see 
http://cvs.apache.org/viewcvs.cgi/*checkout*/jakarta-lucene/CHANGES.txt?rev=1.96.2.4
item 5

Morus


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11125-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 12:15:27 2004
Return-Path: <lucene-user-return-11125-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 75628 invoked from network); 10 Nov 2004 12:15:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 12:15:27 -0000
Received: (qmail 34859 invoked by uid 500); 10 Nov 2004 12:15:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34835 invoked by uid 500); 10 Nov 2004 12:15:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34811 invoked by uid 99); 10 Nov 2004 12:15:10 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.216] (HELO web21327.mail.yahoo.com) (216.136.175.216)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 04:15:09 -0800
Received: (qmail 60374 invoked by uid 60001); 10 Nov 2004 12:15:08 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=g4HhvvmfD1ufcJA+N20ZmwYGjBWch3HuA0uz3/lEmQyPZtdSUjATYOgM0nM5M4P1egcMxmaILxVqwz+Go4kqwYXjetp8nf9XXo8ipyMd4S/SOpEmr1WNzhBmYvcqBElNw8AGXgSUA7vRfPuvEnUzfcsmQrurvWxYl7ULb19MsHs=  ;
Message-ID: <20041110121508.60372.qmail@web21327.mail.yahoo.com>
Received: from [193.226.211.176] by web21327.mail.yahoo.com via HTTP; Wed, 10 Nov 2004 04:15:08 PST
Date: Wed, 10 Nov 2004 04:15:08 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Re: stopword AND validword throws exception
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <16786.1141.894076.861391@tanto-xipolis.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> But the fix seems to be included in 1.4.2.
> see 
> http://cvs.apache.org/viewcvs.cgi/*checkout*/jakarta-lucene/CHANGES.txt?rev=1.96.2.4
> item 5

Thank you! I'm just downloading 1.4.2.
I hope it'll work ;)

Sanyi



		
__________________________________ 
Do you Yahoo!? 
Check out the new Yahoo! Front Page. 
www.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11126-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 14:05:58 2004
Return-Path: <lucene-user-return-11126-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33670 invoked from network); 10 Nov 2004 14:05:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 14:05:58 -0000
Received: (qmail 88985 invoked by uid 500); 10 Nov 2004 14:05:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 88884 invoked by uid 500); 10 Nov 2004 14:05:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 88860 invoked by uid 99); 10 Nov 2004 14:05:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.82] (HELO mailout05.sul.t-online.com) (194.25.134.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 06:05:43 -0800
Received: from fwd05.aul.t-online.de 
	by mailout05.sul.t-online.com with smtp 
	id 1CRt6R-00020v-02; Wed, 10 Nov 2004 15:05:39 +0100
Received: from pD9EBEFD9.dip.t-dialin.net (Tt0zYqZEoewXL+946GJ6euvru6ehyHaq3Qvt8acw7lmuRQ7sRM2cZH@[217.235.239.217]) by fmrl05.sul.t-online.com
	with esmtp id 1CRt6B-0MkvwW0; Wed, 10 Nov 2004 15:05:23 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Filters for Openoffice File Indexing available (Java)
Date: Wed, 10 Nov 2004 15:05:43 +0100
User-Agent: KMail/1.7.1
References: <418F4AAF.6060400@arrasz.de>
In-Reply-To: <418F4AAF.6060400@arrasz.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="utf-8"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200411101505.44040@danielnaber.de>
X-ID: Tt0zYqZEoewXL+946GJ6euvru6ehyHaq3Qvt8acw7lmuRQ7sRM2cZH@t-dialin.net
X-TOI-MSGID: a88cc375-4053-4f2c-be0a-82b3d913e315
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 08 November 2004 11:30, Joachim Arrasz wrote:

> So now we are looking for search and index Filters for Lucene, that
> we=C3=82=C5=BDre able to integrate out OpenOffice Files also into search =
result.

I don't know of any existing solutions, but it's not so difficult to write=
=20
one: Extract the ZIP file using Java's built-in ZIP classes and parse=20
content.xml and meta.xml. I'm not sure if whitespace issues might become=20
tricky, e.g. two paragraphs could be in the file as=20
"<p>one</p><p>two</p>", but for indexing a whitespace needs to be inserted=
=20
between them ("<p>" was just an example, I don't know what OpenOffice.org=20
actually uses).

Regards
 Daniel

=2D-=20
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11127-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 14:19:08 2004
Return-Path: <lucene-user-return-11127-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43340 invoked from network); 10 Nov 2004 14:19:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 14:19:07 -0000
Received: (qmail 16454 invoked by uid 500); 10 Nov 2004 14:18:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16353 invoked by uid 500); 10 Nov 2004 14:18:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16318 invoked by uid 99); 10 Nov 2004 14:18:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [212.227.126.201] (HELO mxintern.schlund.de) (212.227.126.201)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 06:18:54 -0800
Received: from [172.17.12.10] (helo=[172.17.12.10])
	by mxintern.kundenserver.de with esmtp (Exim 4.34)
	id 1CRtJB-0005EA-4Z
	for lucene-user@jakarta.apache.org; Wed, 10 Nov 2004 15:18:49 +0100
Message-ID: <41922338.5010307@arrasz.de>
Date: Wed, 10 Nov 2004 15:18:32 +0100
From: Joachim Arrasz <info@arrasz.de>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Filters for Openoffice File Indexing available (Java)
References: <418F4AAF.6060400@arrasz.de> <200411101505.44040@danielnaber.de>
In-Reply-To: <200411101505.44040@danielnaber.de>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Scanned: Symantec AntiVirus Scan Engine
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Daniel,

>I don't know of any existing solutions, but it's not so difficult to write 
>one: Extract the ZIP file using Java's built-in ZIP classes and parse 
>content.xml and meta.xml. I'm not sure if whitespace issues might become 
>tricky, e.g. two paragraphs could be in the file as 
>"<p>one</p><p>two</p>", but for indexing a whitespace needs to be inserted 
>between them ("<p>" was just an example, I don't know what OpenOffice.org 
>actually uses).
>  
>
that seems to be not so hard, but i never have developed something like 
that, so i think i need a tutorial doing this. Why should i parse 
meta.xml? I thaught content.xml should be enough.

Thanks a lot

Bye Achim


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11128-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 14:47:26 2004
Return-Path: <lucene-user-return-11128-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64019 invoked from network); 10 Nov 2004 14:47:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 14:47:26 -0000
Received: (qmail 85025 invoked by uid 500); 10 Nov 2004 14:47:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84901 invoked by uid 500); 10 Nov 2004 14:47:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84630 invoked by uid 99); 10 Nov 2004 14:46:58 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.238] (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 06:46:53 -0800
Received: (qmail 68117 invoked by uid 60001); 10 Nov 2004 14:46:52 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=Nz0PRFOXAPiXNkJp9YyuoSb7amvdWS3TPlZpS//rTaZAn3lDnUddvm5IV1m5GZycLoc6OjULwAlGOCdX33wMwj2F0uM98W8jM31TUFHLFepugSvWfgcvOLnJI0m4B0kT0xkC659La4GRDox1cx/VsRhY5bcOLfLKmjgupqPe1dI=  ;
Message-ID: <20041110144651.68115.qmail@web12701.mail.yahoo.com>
Received: from [216.194.17.194] by web12701.mail.yahoo.com via HTTP; Wed, 10 Nov 2004 06:46:51 PST
Date: Wed, 10 Nov 2004 06:46:51 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing within an XML document
To: lucene-user@jakarta.apache.org
Cc: m.altheim@open.ac.uk
In-Reply-To: <418F60BD.6040609@open.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Redirecting to lucene-user, which is more appropriate.

I'm not sure what exactly the question is here, but:

Parse your XML document and for each <p> element you encounter create a
new Document instance, and then populate its fields with some data,
like the URI data you mentioned.
If you parse with DOM - just walk the node tree and make new Document
whenever you encounter an element you want as a separate Document.  If
you are using the SAX API you'll probably want some logic in
start/endElement and characters methods. When you reach the end of the
element you are done with your Document instance, so add it to the
IndexWriter instance that you opened once, before the parser.
When you are done with the whole XML document close the IndexWriter.

Otis


--- Murray Altheim <m.altheim@open.ac.uk> wrote:

> Hi,
> 
> I'm trying to develop a class to handle an XML document, where
> the contents aren't so much indexed on a per-document basis,
> rather on an element basis. Each element has a unique ID, so
> I'm looking to create a class/method similar to Lucene's
> Document.Document(). By way of example, I'll use some XHTML
> markup to illustrate what I'm trying to do:
> 
>    <html>
>     <base href="http://purl.org/ceryle/blat.xml"/>
>     [...]
>     <body>
>       <p id="p1">
>          some text to index...
>       </p>
>       <p id="p2">
>          some more text to index...
>       </p>
>       <p id="p3">
>          even more text to index...
>       </p>
>     </body>
>    </html>
> 
> I'd very much appreciate any help in explaining how I'd go about
> creating a method to return a Lucene Document to index this via
> ID. Would I want a separate Document per <p>? (There are many
> thousands of such elements.) Everything in my system, both at the
> document and the individual element level is done via URL, so
> the method should create URLs for each <p> element like
> 
>     http://purl.org/ceryle/blat.xml#p1
>     http://purl.org/ceryle/blat.xml#p2
>     http://purl.org/ceryle/blat.xml#p3
>     etc.
> 
> I don't need anyone to go to the trouble of coding this, just point
> me to how it might be done, or to any existing examples that do this
> kind of thing.
> 
> Thanks very much!
> 
> Murray
> 
>
......................................................................
> Murray Altheim                   
> http://kmi.open.ac.uk/people/murray/
> Knowledge Media Institute
> The Open University, Milton Keynes, Bucks, MK7 6AA, UK              
> .
> 
>    "If we can just get the people that can reconcile themselves
>     to the new dispensation out of the way and then kill the few
>     thousand people who can't reconcile themselves, then we can
>     let the remaining 98 percent come back and live out their
>     lives," Pike said. "If we bomb the place to the ground, those
>     peace-loving people won't have a home to live in. [...] If we
>     simply pulverize the city, it would look bad on TV." -- John Pike
> 
>    U.S., Iraqi troops mass for assault on Fallujah
>    STRATEGY: U.S. to employ snipers, robots to cut down casualties
>      Matthew B. Stannard, San Francisco Chronicle
>   
>
http://www.sfgate.com/cgi-bin/article.cgi?file=/c/a/2004/11/06/MNGHL9NBU11.DTL
> 
>    "We have a growing, maturing insurgency group. We see larger
>     and more coordinated military attacks. They are getting better
>     and they can self-regenerate. The idea there are x number of
>     insurgents, and that when they're all dead we can get out is
>     wrong. The insurgency has shown an ability to regenerate itself
>     because there are people willing to fill the ranks of those who
>     are killed. The political culture is more hostile to the US
>     presence. The longer we stay, the more they are confirmed in
>     that view." -- W Andrew Terrill
> 
>    Far Graver Than Vietnam, Sidney Blumenthal, The Guardian
>    http://www.guardian.co.uk/comment/story/0,,1305360,00.html
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-dev-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-dev-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11129-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 15:12:05 2004
Return-Path: <lucene-user-return-11129-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78438 invoked from network); 10 Nov 2004 15:12:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 15:12:04 -0000
Received: (qmail 51756 invoked by uid 500); 10 Nov 2004 15:11:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51637 invoked by uid 500); 10 Nov 2004 15:11:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51498 invoked by uid 99); 10 Nov 2004 15:11:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.81] (HELO mailout03.sul.t-online.com) (194.25.134.81)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 07:11:42 -0800
Received: from fwd11.aul.t-online.de 
	by mailout03.sul.t-online.com with smtp 
	id 1CRu8K-0005iF-00; Wed, 10 Nov 2004 16:11:40 +0100
Received: from p5480294E.dip.t-dialin.net (E48E5rZOoeHvF-rK6u6fepbN5DFHM9bFVunuPrqWGwJjDemzxlScEg@[84.128.41.78]) by fmrl11.sul.t-online.com
	with esmtp id 1CRu8G-0XAJjE0; Wed, 10 Nov 2004 16:11:36 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Filters for Openoffice File Indexing available (Java)
Date: Wed, 10 Nov 2004 16:11:57 +0100
User-Agent: KMail/1.7.1
References: <418F4AAF.6060400@arrasz.de> <200411101505.44040@danielnaber.de> <41922338.5010307@arrasz.de>
In-Reply-To: <41922338.5010307@arrasz.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411101611.57531@danielnaber.de>
X-ID: E48E5rZOoeHvF-rK6u6fepbN5DFHM9bFVunuPrqWGwJjDemzxlScEg@t-dialin.net
X-TOI-MSGID: 77d02f56-eb99-4861-9514-7b3e8c4c22ed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 10 November 2004 15:18, Joachim Arrasz wrote:

>  Why should i parse
> meta.xml? I thaught content.xml should be enough.

It contains the file's title, keywords, and author etc (those are not in 
content.xml).

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11130-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 16:32:06 2004
Return-Path: <lucene-user-return-11130-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23352 invoked from network); 10 Nov 2004 16:32:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 16:32:06 -0000
Received: (qmail 12973 invoked by uid 500); 10 Nov 2004 16:31:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12913 invoked by uid 500); 10 Nov 2004 16:31:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12893 invoked by uid 99); 10 Nov 2004 16:31:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 08:31:46 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Wed, 10 Nov 2004 11:32:31 -0500
Message-ID: <02ff01c4c742$e0393130$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: <lucene-user@jakarta.apache.org>
Subject: Indexing MS Files
Date: Wed, 10 Nov 2004 11:32:31 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_02FC_01C4C718.F7574250"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 10 Nov 2004 16:32:31.0746 (UTC) FILETIME=[E042CE20:01C4C742]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_02FC_01C4C718.F7574250
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I need to index Word, Excel and Power Point files.

Is this the place to start?

http://jakarta.apache.org/poi/

Is there something better?

Thanks,

Luke
------=_NextPart_000_02FC_01C4C718.F7574250--



From lucene-user-return-11131-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 16:55:44 2004
Return-Path: <lucene-user-return-11131-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 42684 invoked from network); 10 Nov 2004 16:55:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 16:55:44 -0000
Received: (qmail 77354 invoked by uid 500); 10 Nov 2004 16:54:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77257 invoked by uid 500); 10 Nov 2004 16:54:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77161 invoked by uid 99); 10 Nov 2004 16:54:15 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.241] (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 08:54:11 -0800
Received: (qmail 41445 invoked by uid 60001); 10 Nov 2004 16:54:07 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=M8pcp/Q6oa+PcY0MJgSc48f3jitxSWo8vQv+C06SCXSfdP82QaqszkGWjQVh0jkzXKOD8hx+kge66hN1sE1RaZ7yMVfOi0h0iYy04wSCPGFPQ7sjghLVZT0IfDfGVJRhTDsDn78IMBN3ZGAfwMbVETKWVI6uabvT5M1qA+mD5lM=  ;
Message-ID: <20041110165406.41443.qmail@web12704.mail.yahoo.com>
Received: from [216.194.17.194] by web12704.mail.yahoo.com via HTTP; Wed, 10 Nov 2004 08:54:06 PST
Date: Wed, 10 Nov 2004 08:54:06 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing MS Files
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <02ff01c4c742$e0393130$7703d00a@hypermedia.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

That's one place to start.  The other one would be textmining.org, at
least for Word files.
I used both POI and Textmining API in Lucene in Action, and the latter
was much simpler to use.  You can also find some comments about both
libs in lucene-user archives.  People tend to like Textmining API
better.

Otis

--- Luke Shannon <lshannon@hypermedia.com> wrote:

> I need to index Word, Excel and Power Point files.
> 
> Is this the place to start?
> 
> http://jakarta.apache.org/poi/
> 
> Is there something better?
> 
> Thanks,
> 
> Luke


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11132-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 16:58:38 2004
Return-Path: <lucene-user-return-11132-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 44779 invoked from network); 10 Nov 2004 16:58:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 16:58:37 -0000
Received: (qmail 93185 invoked by uid 500); 10 Nov 2004 16:58:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93140 invoked by uid 500); 10 Nov 2004 16:58:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93127 invoked by uid 99); 10 Nov 2004 16:58:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 08:58:27 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Wed, 10 Nov 2004 11:59:13 -0500
Message-ID: <031e01c4c746$9abca930$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041110165406.41443.qmail@web12704.mail.yahoo.com>
Subject: Re: Indexing MS Files
Date: Wed, 10 Nov 2004 11:59:13 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 10 Nov 2004 16:59:13.0139 (UTC) FILETIME=[9AC3FC30:01C4C746]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Otis. I am looking forward to this book. Any idea when it may be
released?

----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, November 10, 2004 11:54 AM
Subject: Re: Indexing MS Files


> That's one place to start.  The other one would be textmining.org, at
> least for Word files.
> I used both POI and Textmining API in Lucene in Action, and the latter
> was much simpler to use.  You can also find some comments about both
> libs in lucene-user archives.  People tend to like Textmining API
> better.
>
> Otis
>
> --- Luke Shannon <lshannon@hypermedia.com> wrote:
>
> > I need to index Word, Excel and Power Point files.
> >
> > Is this the place to start?
> >
> > http://jakarta.apache.org/poi/
> >
> > Is there something better?
> >
> > Thanks,
> >
> > Luke
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11133-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 17:00:32 2004
Return-Path: <lucene-user-return-11133-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46408 invoked from network); 10 Nov 2004 17:00:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 17:00:30 -0000
Received: (qmail 98712 invoked by uid 500); 10 Nov 2004 17:00:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98603 invoked by uid 500); 10 Nov 2004 17:00:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98583 invoked by uid 99); 10 Nov 2004 17:00:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [216.54.180.10] (HELO htexc.hq.htinc.com) (216.54.180.10)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 09:00:14 -0800
X-MIMEOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Merging multiple indexes
Date: Wed, 10 Nov 2004 12:00:09 -0500
Message-ID: <4568BE33B520DD43B7B24DE0B609B215440238@htexc.hq.htinc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Merging multiple indexes
Thread-Index: AcTHRh4fh3jnNGgLSBKko1VTkTKKNwAAHJ3w
From: "Ravi" <ravi@htinc.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Whats's the simplest way to merge 2 or more indexes into one large
index.=20

Thanks in advance,
Ravi. =20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11134-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 17:13:54 2004
Return-Path: <lucene-user-return-11134-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54966 invoked from network); 10 Nov 2004 17:13:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 17:13:54 -0000
Received: (qmail 24640 invoked by uid 500); 10 Nov 2004 17:13:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24535 invoked by uid 500); 10 Nov 2004 17:13:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24453 invoked by uid 99); 10 Nov 2004 17:13:30 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.148.212.184] (HELO w02.bloglines.com) (216.148.212.184)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 09:13:29 -0800
Received: (qmail 30637 invoked by uid 99); 10 Nov 2004 17:13:27 -0000
Message-ID: <1100106807.2382336164.30635.sendItem@bloglines.com>
Date: 10 Nov 2004 17:13:27 -0000
From: yahootintin.1247688@bloglines.com
To: lucene-user@jakarta.apache.org
Subject: Re: Locking issue
MIME-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> No need to address individuals here.
Sorry about that.  I just respect
the knowledge that you and Otis have about Lucene so that's why I was asking
you specifically.

> With the information provided, I have no idea what
the issue may be.  
Running the small sample file that is attached to the
original message shows how the issue is generated.  It takes less than 5 minutes
to occur on both Windows XP and Mac OS X.


> There certainly is no issue
reading and writing to an index at the same 
> time, but only one process
can be writing/deleting from the index at a 
> time.
That's what I thought.
 I'm seeing otherwise though.

--- Lucene Users List" <lucene-user@jakarta.apache.org
wrote:
On Nov 10, 2004, at 2:17 AM, yahootintin.1247688@bloglines.com wrote:

> > Otis or Erik, do you know if a Reader continously opening should cause

> > the
> > Writer to fail with a "Lock obtain timed out" error?
> 
>
No need to address individuals here.
> 
> With the information provided,
I have no idea what the issue may be.  
> There certainly is no issue reading
and writing to an index at the same 
> time, but only one process can be
writing/deleting from the index at a 
> time.
> 
> 	Erik
> 
> >
> >
--- Lucene Users List"
> > <lucene-user@jakarta.apache.org wrote:
> > The
attached Java file shows a locking
> > issue that occurs with
> >> Lucene.

> >>
> >> One thread opens and closes an IndexReader.
> >  The other thread

> >> opens an IndexWriter, adds a document and then closes
> > the
> >>
IndexWriter.  I would expect that this app should be able to
> >> happily

> > run without an issues.
> >>
> >> It fails with:
> >>   java.io.IOException:
Lock
> > obtain timed out
> >>
> >> Is this expected?  I thought a Reader
could be opened
> > while a
> >> Writer is adding a document.
> >>
> >>
Any help is appreciated.
> >>
> >
> >>
> >> ---------------------------------------------------------------------

> >
> >> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org

> >> For
> > additional commands, e-mail: lucene-user-help@jakarta.apache.org

> >>
> >>
> >
> > ---------------------------------------------------------------------

> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

> 
> ---------------------------------------------------------------------

> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For
additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11135-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 17:18:24 2004
Return-Path: <lucene-user-return-11135-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58473 invoked from network); 10 Nov 2004 17:18:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 17:18:24 -0000
Received: (qmail 37994 invoked by uid 500); 10 Nov 2004 17:18:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37896 invoked by uid 500); 10 Nov 2004 17:18:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37774 invoked by uid 99); 10 Nov 2004 17:18:09 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.245] (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 09:18:07 -0800
Received: (qmail 12710 invoked by uid 60001); 10 Nov 2004 17:18:04 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=HsxmSz13rAFw2gaaUxQIqlM1Uc5yLSUe+jbcvtT/WFysm1lTf1XSJmYEu2acnSEIAKEkoDK23j/HlXi7a9Z+U8j3JRdFm4oeZQwA4uryshUx6/EYX89lDSGhy831PE2DqAxgBqh/+Oo8zFDZ2aFjUTCjNVmPCSUXxnaIAtsS2nw=  ;
Message-ID: <20041110171801.12687.qmail@web12708.mail.yahoo.com>
Received: from [216.194.17.194] by web12708.mail.yahoo.com via HTTP; Wed, 10 Nov 2004 09:18:01 PST
Date: Wed, 10 Nov 2004 09:18:01 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Indexing MS Files
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <031e01c4c746$9abca930$7703d00a@hypermedia.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

As Manning publications said, you should be able to get it for your
grandma this Christmas.

Otis

--- Luke Shannon <lshannon@hypermedia.com> wrote:

> Thanks Otis. I am looking forward to this book. Any idea when it may
> be
> released?
> 
> ----- Original Message ----- 
> From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Wednesday, November 10, 2004 11:54 AM
> Subject: Re: Indexing MS Files
> 
> 
> > That's one place to start.  The other one would be textmining.org,
> at
> > least for Word files.
> > I used both POI and Textmining API in Lucene in Action, and the
> latter
> > was much simpler to use.  You can also find some comments about
> both
> > libs in lucene-user archives.  People tend to like Textmining API
> > better.
> >
> > Otis
> >
> > --- Luke Shannon <lshannon@hypermedia.com> wrote:
> >
> > > I need to index Word, Excel and Power Point files.
> > >
> > > Is this the place to start?
> > >
> > > http://jakarta.apache.org/poi/
> > >
> > > Is there something better?
> > >
> > > Thanks,
> > >
> > > Luke
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >
> >
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11136-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 17:19:03 2004
Return-Path: <lucene-user-return-11136-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58928 invoked from network); 10 Nov 2004 17:19:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 17:19:02 -0000
Received: (qmail 39476 invoked by uid 500); 10 Nov 2004 17:18:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39334 invoked by uid 500); 10 Nov 2004 17:18:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39319 invoked by uid 99); 10 Nov 2004 17:18:54 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.238] (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 09:18:54 -0800
Received: (qmail 91593 invoked by uid 60001); 10 Nov 2004 17:18:52 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=RDyvW19kZyCNTij09xcwruaqH5vWqN+GQdkNT7hrnZn8dm4YbALWzoOZjHhUONyqDWBLGZ0wqQRFjnaCy8ly0E5lX1wFnuL+CvD55OltPKmdnAxPqKyORAHvYwavJKDVYI5uHoluDFB3hr1ovxgnqnSqxxh35xun/xD+MBbt3xM=  ;
Message-ID: <20041110171852.91591.qmail@web12701.mail.yahoo.com>
Received: from [216.194.17.194] by web12701.mail.yahoo.com via HTTP; Wed, 10 Nov 2004 09:18:52 PST
Date: Wed, 10 Nov 2004 09:18:52 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Merging multiple indexes
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <4568BE33B520DD43B7B24DE0B609B215440238@htexc.hq.htinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Use IndexWriter's addIndexes(Directory[]) call.

Otis

--- Ravi <ravi@htinc.com> wrote:

> Whats's the simplest way to merge 2 or more indexes into one large
> index. 
> 
> Thanks in advance,
> Ravi.  
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11137-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 17:24:32 2004
Return-Path: <lucene-user-return-11137-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63224 invoked from network); 10 Nov 2004 17:24:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 17:24:32 -0000
Received: (qmail 51861 invoked by uid 500); 10 Nov 2004 17:24:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51833 invoked by uid 500); 10 Nov 2004 17:24:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51785 invoked by uid 99); 10 Nov 2004 17:24:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.255.81.93] (HELO serveur1.itldev.info) (81.255.81.93)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 09:24:02 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by serveur1.itldev.info (Postfix) with ESMTP id AFFD527E1B
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 18:23:52 +0100 (CET)
Received: from serveur1.itldev.info ([127.0.0.1])
 by localhost (serveur1.itldev.info [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 23843-05 for <lucene-user@jakarta.apache.org>;
 Wed, 10 Nov 2004 18:23:52 +0100 (CET)
Received: from thierry (unknown [192.168.2.1])
	by serveur1.itldev.info (Postfix) with ESMTP id 788E627E19
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 18:23:52 +0100 (CET)
Message-ID: <00b101c4c74a$099259b0$0102a8c0@thierry>
From: "Thierry Ferrero" <ferrero@itldev.info>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041110165406.41443.qmail@web12704.mail.yahoo.com> <031e01c4c746$9abca930$7703d00a@hypermedia.com>
Subject: Re: Indexing MS Files
Date: Wed, 10 Nov 2004 18:23:47 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Scanned: by amavisd-new at itldev.info
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I used OpenOffice API to convert all Word and Excel version.
For me it's "the solution" for complex Word and Excel document.
http://api.openoffice.org/
Good luck !

// UNO API
import com.sun.star.bridge.XUnoUrlResolver;
import com.sun.star.uno.XComponentContext;
import com.sun.star.uno.UnoRuntime;
import com.sun.star.frame.XComponentLoader;
import com.sun.star.frame.XStorable;
import com.sun.star.beans.PropertyValue;
import com.sun.star.beans.XPropertySet;
import com.sun.star.lang.XComponent;
import com.sun.star.lang.XMultiComponentFactory;
import com.sun.star.connection.NoConnectException;
import com.sun.star.io.IOException;


/** This class implements a http servlet in order to convert an incoming
document
 * with help of a running OpenOffice.org and to push the converted file back
 * to the client.
 */
public class DocConverter {

 private String stringHost;
 private String stringPort;
 private Xcontext xcontext;
 private Xbase xbase;

 public DocConverter(Xbase xbase,Xcontext xcontext,ServletContext sc) {

  this.xbase=xbase;
  this.xcontext=xcontext;
    stringHost=ApplicationUtil.getParameter(sc,"openoffice.oohost");
    stringPort=ApplicationUtil.getParameter(sc,"openoffice.ooport");
   }

 public synchronized String convertToTxt(String namedoc, String pathdoc,
String stringConvertType, String stringExtension) {

        String stringConvertedFile = this.convertDocument(namedoc, pathdoc,
stringConvertType, stringExtension);
  return stringConvertedFile;
 }


 /** This method converts a document to a given type by using a running
 * OpenOffice.org and saves the converted document to the specified
 * working directory.
 * @param stringDocumentName The full path name of the file on the server to
be converted.
 * @param stringConvertType Type to convert to.
 * @param stringExtension This string will be appended to the file name of
the converted file.
 * @return The full path name of the converted file will be returned.
 * @see stringWorkingDirectory
 */
 private String convertDocument(String namedoc, String pathdoc, String
stringConvertType, String stringExtension ) {

 String tagerr="";
    String stringUrl="";
    String stringConvertedFile = "";
    // Converting the document to the favoured type
    try {
      tagerr="0";
      // Composing the URL - suppression de l'extension
      stringUrl = pathdoc+"/"+namedoc;
     stringUrl=stringUrl.replace( '\\', '/' );
      /* Bootstraps a component context with the jurt base components
         registered. Component context to be granted to a component for
running.
         Arbitrary values can be retrieved from the context. */
      XComponentContext xcomponentcontext =
      com.sun.star.comp.helper.Bootstrap.createInitialComponentContext(
null );

      /* Gets the service manager instance to be used (or null). This method
has
         been added for convenience, because the service manager is a often
used
         object. */
      XMultiComponentFactory xmulticomponentfactory =
      xcomponentcontext.getServiceManager();
   tagerr="2";
      /* Creates an instance of the component UnoUrlResolver which
         supports the services specified by the factory. */
      Object objectUrlResolver =
      xmulticomponentfactory.createInstanceWithContext(
      "com.sun.star.bridge.UnoUrlResolver", xcomponentcontext );
       // Create a new url resolver
      XUnoUrlResolver xurlresolver = ( XUnoUrlResolver )
      UnoRuntime.queryInterface( XUnoUrlResolver.class,
      objectUrlResolver );
        // Resolves an object that is specified as follow:
      // uno:<connection description>;<protocol description>;<initial object
name>
      Object objectInitial = xurlresolver.resolve(
      "uno:socket,host=" + stringHost + ",port=" + stringPort +
";urp;StarOffice.ServiceManager" );

      // Create a service manager from the initial object
      xmulticomponentfactory = ( XMultiComponentFactory )
      UnoRuntime.queryInterface( XMultiComponentFactory.class,
objectInitial );
      // Query for the XPropertySet interface.
      XPropertySet xpropertysetMultiComponentFactory = ( XPropertySet )
      UnoRuntime.queryInterface( XPropertySet.class,
xmulticomponentfactory );
       // Get the default context from the office server.
      Object objectDefaultContext =
      xpropertysetMultiComponentFactory.getPropertyValue(
"DefaultContext" );

      // Query for the interface XComponentContext.
      xcomponentcontext = ( XComponentContext ) UnoRuntime.queryInterface(
      XComponentContext.class, objectDefaultContext );

      /* A desktop environment contains tasks with one or more
         frames in which components can be loaded. Desktop is the
         environment for components which can instanciate within
         frames. */
      XComponentLoader xcomponentloader = ( XComponentLoader )
      UnoRuntime.queryInterface( XComponentLoader.class,
      xmulticomponentfactory.createInstanceWithContext(
      "com.sun.star.frame.Desktop", xcomponentcontext ) );

      // Preparing properties for loading the document
      PropertyValue propertyvalue[] = new PropertyValue[ 1 ];
      // Setting the flag for hidding the open document
      propertyvalue[ 0 ] = new PropertyValue();
      propertyvalue[ 0 ].Name = "Hidden";
      propertyvalue[ 0 ].Value = new Boolean(true);


      // Loading the wanted document
      Object objectDocumentToStore =
      xcomponentloader.loadComponentFromURL(
      stringUrl, "_blank", 0, propertyvalue );

      // Getting an object that will offer a simple way to store a document
to a URL.
      XStorable xstorable =
      ( XStorable ) UnoRuntime.queryInterface( XStorable.class,
      objectDocumentToStore );

      // Preparing properties for converting the document
      propertyvalue = new PropertyValue[2];
      // Setting the flag for overwriting
      propertyvalue[0] = new PropertyValue();
      propertyvalue[0].Name = "Overwrite";
      propertyvalue[0].Value = new Boolean(true);

      // Setting the filter name
      propertyvalue[1] = new PropertyValue();
      propertyvalue[1].Name = "FilterName";
      propertyvalue[1].Value = stringConvertType;

        // Appending the favoured extension to the origin document name
        //if(stringUrl.lastIndexOf(".")!=0){
   //stringUrl=stringUrl.substring(0,stringUrl.lastIndexOf("."));
  //}

        if(namedoc.lastIndexOf(".")!=-1){
   namedoc=namedoc.substring(0,namedoc.lastIndexOf("."));
  }

  //stringConvertedFile = stringUrl + "." + stringExtension;



stringConvertedFile=xbase.getAlias("local")+"/oo_tmp/"+namedoc+"."+stringExt
ension;

    stringConvertedFile=stringConvertedFile.replace( '\\', '/' );

      // Storing and converting the document
    xstorable.storeToURL( stringConvertedFile, propertyvalue );

      // Getting the method dispose() for closing the document
      XComponent xcomponent =
      ( XComponent ) UnoRuntime.queryInterface( XComponent.class,
      xstorable );

      // Closing the converted document
      xcomponent.dispose();
    }

     catch(NoConnectException ex ) {
      return( "" );
    }
 catch( IOException ex ) {
     return( "" );
 }
    catch( Exception ex ) {
        return( "" );
    }


    // Returning the name of the converted file
    return( stringConvertedFile );
  }


----- Original Message ----- 
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, November 10, 2004 5:59 PM
Subject: Re: Indexing MS Files


> Thanks Otis. I am looking forward to this book. Any idea when it may be
> released?
>
> ----- Original Message ----- 
> From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Wednesday, November 10, 2004 11:54 AM
> Subject: Re: Indexing MS Files
>
>
> > That's one place to start.  The other one would be textmining.org, at
> > least for Word files.
> > I used both POI and Textmining API in Lucene in Action, and the latter
> > was much simpler to use.  You can also find some comments about both
> > libs in lucene-user archives.  People tend to like Textmining API
> > better.
> >
> > Otis
> >
> > --- Luke Shannon <lshannon@hypermedia.com> wrote:
> >
> > > I need to index Word, Excel and Power Point files.
> > >
> > > Is this the place to start?
> > >
> > > http://jakarta.apache.org/poi/
> > >
> > > Is there something better?
> > >
> > > Thanks,
> > >
> > > Luke
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11138-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 17:24:56 2004
Return-Path: <lucene-user-return-11138-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63422 invoked from network); 10 Nov 2004 17:24:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 17:24:56 -0000
Received: (qmail 53374 invoked by uid 500); 10 Nov 2004 17:24:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 53312 invoked by uid 500); 10 Nov 2004 17:24:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 53266 invoked by uid 99); 10 Nov 2004 17:24:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 09:24:27 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Wed, 10 Nov 2004 12:25:12 -0500
Message-ID: <034201c4c74a$3c3a2f50$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041110171801.12687.qmail@web12708.mail.yahoo.com>
Subject: Re: Indexing MS Files
Date: Wed, 10 Nov 2004 12:25:12 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 10 Nov 2004 17:25:12.0596 (UTC) FILETIME=[3C463D40:01C4C74A]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks. Grandmas around the world will certainly be surprised this
Christmas.

----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, November 10, 2004 12:18 PM
Subject: Re: Indexing MS Files


> As Manning publications said, you should be able to get it for your
> grandma this Christmas.
>
> Otis
>
> --- Luke Shannon <lshannon@hypermedia.com> wrote:
>
> > Thanks Otis. I am looking forward to this book. Any idea when it may
> > be
> > released?
> >
> > ----- Original Message ----- 
> > From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Wednesday, November 10, 2004 11:54 AM
> > Subject: Re: Indexing MS Files
> >
> >
> > > That's one place to start.  The other one would be textmining.org,
> > at
> > > least for Word files.
> > > I used both POI and Textmining API in Lucene in Action, and the
> > latter
> > > was much simpler to use.  You can also find some comments about
> > both
> > > libs in lucene-user archives.  People tend to like Textmining API
> > > better.
> > >
> > > Otis
> > >
> > > --- Luke Shannon <lshannon@hypermedia.com> wrote:
> > >
> > > > I need to index Word, Excel and Power Point files.
> > > >
> > > > Is this the place to start?
> > > >
> > > > http://jakarta.apache.org/poi/
> > > >
> > > > Is there something better?
> > > >
> > > > Thanks,
> > > >
> > > > Luke
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > >
> > >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11139-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 17:41:48 2004
Return-Path: <lucene-user-return-11139-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 73895 invoked from network); 10 Nov 2004 17:41:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 17:41:48 -0000
Received: (qmail 93952 invoked by uid 500); 10 Nov 2004 17:41:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93869 invoked by uid 500); 10 Nov 2004 17:41:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93815 invoked by uid 99); 10 Nov 2004 17:41:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 09:41:34 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Wed, 10 Nov 2004 12:42:19 -0500
Message-ID: <034901c4c74c$a078a6c0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041110171852.91591.qmail@web12701.mail.yahoo.com>
Subject: Acedemic Question About Indexing
Date: Wed, 10 Nov 2004 12:42:19 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 10 Nov 2004 17:42:19.0724 (UTC) FILETIME=[A07D88C0:01C4C74C]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am working on debugging an existing Lucene implementation.

Before I started, I built a demo to understand Lucene. In my demo I indexed
the entire content hierarhcy all at once, and than optimize this index and
used it for queries. It was time consuming but very simply.

The code I am currently trying to fix indexes the content hierarchy by
folder creating a seperate index for each one. Thus it ends up with a bunch
of indexes. I still don't understand how this works (I am assuming they get
merged someone that I have tracked down yet) but I have noticed it doesn't
always index the right folder. This results in the users reporting
"inconsistant" behavior in searching after they make a change to a document.
To keep things simiple I would like to remove all the logic that figures out
which folder to index and just do them all (usually less than 1000 files) so
I end up with one index.

Would indexing time be the only area I would be losing out in, or is there
something more to the approach of creating multiple indexes and merging
them.

What is a good approach I can take to indexing a content hierarchy composed
primarily of pdf, xsl, doc and xml where any of these documents can be
changed several times a day?

Thanks,

Luke



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11140-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 17:42:54 2004
Return-Path: <lucene-user-return-11140-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74555 invoked from network); 10 Nov 2004 17:42:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 17:42:53 -0000
Received: (qmail 96217 invoked by uid 500); 10 Nov 2004 17:42:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96081 invoked by uid 500); 10 Nov 2004 17:42:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96068 invoked by uid 99); 10 Nov 2004 17:42:41 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=INFO_TLD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 09:42:37 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Wed, 10 Nov 2004 12:43:23 -0500
Message-ID: <034d01c4c74c$c6399180$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041110165406.41443.qmail@web12704.mail.yahoo.com> <031e01c4c746$9abca930$7703d00a@hypermedia.com> <00b101c4c74a$099259b0$0102a8c0@thierry>
Subject: Re: Indexing MS Files
Date: Wed, 10 Nov 2004 12:43:22 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 10 Nov 2004 17:43:23.0142 (UTC) FILETIME=[C64A5A60:01C4C74C]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This looks great. Thank you Thierry!

----- Original Message ----- 
From: "Thierry Ferrero" <ferrero@itldev.info>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, November 10, 2004 12:23 PM
Subject: Re: Indexing MS Files


> I used OpenOffice API to convert all Word and Excel version.
> For me it's "the solution" for complex Word and Excel document.
> http://api.openoffice.org/
> Good luck !
>
> // UNO API
> import com.sun.star.bridge.XUnoUrlResolver;
> import com.sun.star.uno.XComponentContext;
> import com.sun.star.uno.UnoRuntime;
> import com.sun.star.frame.XComponentLoader;
> import com.sun.star.frame.XStorable;
> import com.sun.star.beans.PropertyValue;
> import com.sun.star.beans.XPropertySet;
> import com.sun.star.lang.XComponent;
> import com.sun.star.lang.XMultiComponentFactory;
> import com.sun.star.connection.NoConnectException;
> import com.sun.star.io.IOException;
>
>
> /** This class implements a http servlet in order to convert an incoming
> document
>  * with help of a running OpenOffice.org and to push the converted file
back
>  * to the client.
>  */
> public class DocConverter {
>
>  private String stringHost;
>  private String stringPort;
>  private Xcontext xcontext;
>  private Xbase xbase;
>
>  public DocConverter(Xbase xbase,Xcontext xcontext,ServletContext sc) {
>
>   this.xbase=xbase;
>   this.xcontext=xcontext;
>     stringHost=ApplicationUtil.getParameter(sc,"openoffice.oohost");
>     stringPort=ApplicationUtil.getParameter(sc,"openoffice.ooport");
>    }
>
>  public synchronized String convertToTxt(String namedoc, String pathdoc,
> String stringConvertType, String stringExtension) {
>
>         String stringConvertedFile = this.convertDocument(namedoc,
pathdoc,
> stringConvertType, stringExtension);
>   return stringConvertedFile;
>  }
>
>
>  /** This method converts a document to a given type by using a running
>  * OpenOffice.org and saves the converted document to the specified
>  * working directory.
>  * @param stringDocumentName The full path name of the file on the server
to
> be converted.
>  * @param stringConvertType Type to convert to.
>  * @param stringExtension This string will be appended to the file name of
> the converted file.
>  * @return The full path name of the converted file will be returned.
>  * @see stringWorkingDirectory
>  */
>  private String convertDocument(String namedoc, String pathdoc, String
> stringConvertType, String stringExtension ) {
>
>  String tagerr="";
>     String stringUrl="";
>     String stringConvertedFile = "";
>     // Converting the document to the favoured type
>     try {
>       tagerr="0";
>       // Composing the URL - suppression de l'extension
>       stringUrl = pathdoc+"/"+namedoc;
>      stringUrl=stringUrl.replace( '\\', '/' );
>       /* Bootstraps a component context with the jurt base components
>          registered. Component context to be granted to a component for
> running.
>          Arbitrary values can be retrieved from the context. */
>       XComponentContext xcomponentcontext =
>       com.sun.star.comp.helper.Bootstrap.createInitialComponentContext(
> null );
>
>       /* Gets the service manager instance to be used (or null). This
method
> has
>          been added for convenience, because the service manager is a
often
> used
>          object. */
>       XMultiComponentFactory xmulticomponentfactory =
>       xcomponentcontext.getServiceManager();
>    tagerr="2";
>       /* Creates an instance of the component UnoUrlResolver which
>          supports the services specified by the factory. */
>       Object objectUrlResolver =
>       xmulticomponentfactory.createInstanceWithContext(
>       "com.sun.star.bridge.UnoUrlResolver", xcomponentcontext );
>        // Create a new url resolver
>       XUnoUrlResolver xurlresolver = ( XUnoUrlResolver )
>       UnoRuntime.queryInterface( XUnoUrlResolver.class,
>       objectUrlResolver );
>         // Resolves an object that is specified as follow:
>       // uno:<connection description>;<protocol description>;<initial
object
> name>
>       Object objectInitial = xurlresolver.resolve(
>       "uno:socket,host=" + stringHost + ",port=" + stringPort +
> ";urp;StarOffice.ServiceManager" );
>
>       // Create a service manager from the initial object
>       xmulticomponentfactory = ( XMultiComponentFactory )
>       UnoRuntime.queryInterface( XMultiComponentFactory.class,
> objectInitial );
>       // Query for the XPropertySet interface.
>       XPropertySet xpropertysetMultiComponentFactory = ( XPropertySet )
>       UnoRuntime.queryInterface( XPropertySet.class,
> xmulticomponentfactory );
>        // Get the default context from the office server.
>       Object objectDefaultContext =
>       xpropertysetMultiComponentFactory.getPropertyValue(
> "DefaultContext" );
>
>       // Query for the interface XComponentContext.
>       xcomponentcontext = ( XComponentContext ) UnoRuntime.queryInterface(
>       XComponentContext.class, objectDefaultContext );
>
>       /* A desktop environment contains tasks with one or more
>          frames in which components can be loaded. Desktop is the
>          environment for components which can instanciate within
>          frames. */
>       XComponentLoader xcomponentloader = ( XComponentLoader )
>       UnoRuntime.queryInterface( XComponentLoader.class,
>       xmulticomponentfactory.createInstanceWithContext(
>       "com.sun.star.frame.Desktop", xcomponentcontext ) );
>
>       // Preparing properties for loading the document
>       PropertyValue propertyvalue[] = new PropertyValue[ 1 ];
>       // Setting the flag for hidding the open document
>       propertyvalue[ 0 ] = new PropertyValue();
>       propertyvalue[ 0 ].Name = "Hidden";
>       propertyvalue[ 0 ].Value = new Boolean(true);
>
>
>       // Loading the wanted document
>       Object objectDocumentToStore =
>       xcomponentloader.loadComponentFromURL(
>       stringUrl, "_blank", 0, propertyvalue );
>
>       // Getting an object that will offer a simple way to store a
document
> to a URL.
>       XStorable xstorable =
>       ( XStorable ) UnoRuntime.queryInterface( XStorable.class,
>       objectDocumentToStore );
>
>       // Preparing properties for converting the document
>       propertyvalue = new PropertyValue[2];
>       // Setting the flag for overwriting
>       propertyvalue[0] = new PropertyValue();
>       propertyvalue[0].Name = "Overwrite";
>       propertyvalue[0].Value = new Boolean(true);
>
>       // Setting the filter name
>       propertyvalue[1] = new PropertyValue();
>       propertyvalue[1].Name = "FilterName";
>       propertyvalue[1].Value = stringConvertType;
>
>         // Appending the favoured extension to the origin document name
>         //if(stringUrl.lastIndexOf(".")!=0){
>    //stringUrl=stringUrl.substring(0,stringUrl.lastIndexOf("."));
>   //}
>
>         if(namedoc.lastIndexOf(".")!=-1){
>    namedoc=namedoc.substring(0,namedoc.lastIndexOf("."));
>   }
>
>   //stringConvertedFile = stringUrl + "." + stringExtension;
>
>
>
>
stringConvertedFile=xbase.getAlias("local")+"/oo_tmp/"+namedoc+"."+stringExt
> ension;
>
>     stringConvertedFile=stringConvertedFile.replace( '\\', '/' );
>
>       // Storing and converting the document
>     xstorable.storeToURL( stringConvertedFile, propertyvalue );
>
>       // Getting the method dispose() for closing the document
>       XComponent xcomponent =
>       ( XComponent ) UnoRuntime.queryInterface( XComponent.class,
>       xstorable );
>
>       // Closing the converted document
>       xcomponent.dispose();
>     }
>
>      catch(NoConnectException ex ) {
>       return( "" );
>     }
>  catch( IOException ex ) {
>      return( "" );
>  }
>     catch( Exception ex ) {
>         return( "" );
>     }
>
>
>     // Returning the name of the converted file
>     return( stringConvertedFile );
>   }
>
>
> ----- Original Message ----- 
> From: "Luke Shannon" <lshannon@hypermedia.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Wednesday, November 10, 2004 5:59 PM
> Subject: Re: Indexing MS Files
>
>
> > Thanks Otis. I am looking forward to this book. Any idea when it may be
> > released?
> >
> > ----- Original Message ----- 
> > From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Wednesday, November 10, 2004 11:54 AM
> > Subject: Re: Indexing MS Files
> >
> >
> > > That's one place to start.  The other one would be textmining.org, at
> > > least for Word files.
> > > I used both POI and Textmining API in Lucene in Action, and the latter
> > > was much simpler to use.  You can also find some comments about both
> > > libs in lucene-user archives.  People tend to like Textmining API
> > > better.
> > >
> > > Otis
> > >
> > > --- Luke Shannon <lshannon@hypermedia.com> wrote:
> > >
> > > > I need to index Word, Excel and Power Point files.
> > > >
> > > > Is this the place to start?
> > > >
> > > > http://jakarta.apache.org/poi/
> > > >
> > > > Is there something better?
> > > >
> > > > Thanks,
> > > >
> > > > Luke
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >
> > >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11141-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 19:08:42 2004
Return-Path: <lucene-user-return-11141-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23209 invoked from network); 10 Nov 2004 19:08:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 19:08:42 -0000
Received: (qmail 14421 invoked by uid 500); 10 Nov 2004 19:08:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14303 invoked by uid 500); 10 Nov 2004 19:08:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14289 invoked by uid 99); 10 Nov 2004 19:08:29 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.243] (HELO web12706.mail.yahoo.com) (216.136.173.243)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 11:08:28 -0800
Received: (qmail 34394 invoked by uid 60001); 10 Nov 2004 19:08:27 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=PLREYLzVRuO6KMsKzppDoI4P7UtbUD2HA5Xi5xwpPgDGVVXFCWhOyp8O8cEbB01uVAEGko0CrYQ0h8pDwiziqdxL62IbJ/v8uX2v0nZpR4VXRJYrmDV1P4lX9vFZWOzbz/+lgm+ujVEmcDjgZRnRW/hJTh30wneNIGWe3+aCVo0=  ;
Message-ID: <20041110190827.34392.qmail@web12706.mail.yahoo.com>
Received: from [216.194.17.194] by web12706.mail.yahoo.com via HTTP; Wed, 10 Nov 2004 11:08:27 PST
Date: Wed, 10 Nov 2004 11:08:27 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Acedemic Question About Indexing
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <034901c4c74c$a078a6c0$7703d00a@hypermedia.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Uh, I hate to market it, but.... it's in the book.  But you don't have
to wait for it, as there already is a Lucene demo that does what you
described.  I am not sure if the demo always recreates the index or
whether it deletes and re-adds only the new and modified files, but if
it's the former, you would only need to modify the demo a little bit to
check the timestamps of File objects and compare them to those stored
in the index (if they are being stored - if not, you should add a field
to hold that data)

Otis

--- Luke Shannon <lshannon@hypermedia.com> wrote:

> I am working on debugging an existing Lucene implementation.
> 
> Before I started, I built a demo to understand Lucene. In my demo I
> indexed
> the entire content hierarhcy all at once, and than optimize this
> index and
> used it for queries. It was time consuming but very simply.
> 
> The code I am currently trying to fix indexes the content hierarchy
> by
> folder creating a seperate index for each one. Thus it ends up with a
> bunch
> of indexes. I still don't understand how this works (I am assuming
> they get
> merged someone that I have tracked down yet) but I have noticed it
> doesn't
> always index the right folder. This results in the users reporting
> "inconsistant" behavior in searching after they make a change to a
> document.
> To keep things simiple I would like to remove all the logic that
> figures out
> which folder to index and just do them all (usually less than 1000
> files) so
> I end up with one index.
> 
> Would indexing time be the only area I would be losing out in, or is
> there
> something more to the approach of creating multiple indexes and
> merging
> them.
> 
> What is a good approach I can take to indexing a content hierarchy
> composed
> primarily of pdf, xsl, doc and xml where any of these documents can
> be
> changed several times a day?
> 
> Thanks,
> 
> Luke
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11142-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 19:44:40 2004
Return-Path: <lucene-user-return-11142-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77422 invoked from network); 10 Nov 2004 19:44:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 19:44:40 -0000
Received: (qmail 17867 invoked by uid 500); 10 Nov 2004 19:38:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17670 invoked by uid 500); 10 Nov 2004 19:38:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17631 invoked by uid 99); 10 Nov 2004 19:38:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 11:38:20 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Wed, 10 Nov 2004 14:39:00 -0500
Message-ID: <036501c4c75c$ece55e30$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041110190827.34392.qmail@web12706.mail.yahoo.com>
Subject: Re: Acedemic Question About Indexing
Date: Wed, 10 Nov 2004 14:38:59 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 10 Nov 2004 19:39:00.0071 (UTC) FILETIME=[ED05B770:01C4C75C]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Don't worry, regardless of what I learn in this forum I am telling my
company to get me a copy of that bad boy when it comes out (which as far as
I am concerned can't be soon enough). I will pay for grama's myself.

I think I have reviewed the code you are referring to and have something
similar working in my own indexer (using the "uid"). All is well.

My stupid question for the day is why would you ever want multiple indexes
running if you can build one smart indexer that does everything as
efficiently as possible? Does the answer to this question move me to multi
threaded indexing territory?

Thanks,

Luke


----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, November 10, 2004 2:08 PM
Subject: Re: Acedemic Question About Indexing


> Uh, I hate to market it, but.... it's in the book.  But you don't have
> to wait for it, as there already is a Lucene demo that does what you
> described.  I am not sure if the demo always recreates the index or
> whether it deletes and re-adds only the new and modified files, but if
> it's the former, you would only need to modify the demo a little bit to
> check the timestamps of File objects and compare them to those stored
> in the index (if they are being stored - if not, you should add a field
> to hold that data)
>
> Otis
>
> --- Luke Shannon <lshannon@hypermedia.com> wrote:
>
> > I am working on debugging an existing Lucene implementation.
> >
> > Before I started, I built a demo to understand Lucene. In my demo I
> > indexed
> > the entire content hierarhcy all at once, and than optimize this
> > index and
> > used it for queries. It was time consuming but very simply.
> >
> > The code I am currently trying to fix indexes the content hierarchy
> > by
> > folder creating a seperate index for each one. Thus it ends up with a
> > bunch
> > of indexes. I still don't understand how this works (I am assuming
> > they get
> > merged someone that I have tracked down yet) but I have noticed it
> > doesn't
> > always index the right folder. This results in the users reporting
> > "inconsistant" behavior in searching after they make a change to a
> > document.
> > To keep things simiple I would like to remove all the logic that
> > figures out
> > which folder to index and just do them all (usually less than 1000
> > files) so
> > I end up with one index.
> >
> > Would indexing time be the only area I would be losing out in, or is
> > there
> > something more to the approach of creating multiple indexes and
> > merging
> > them.
> >
> > What is a good approach I can take to indexing a content hierarchy
> > composed
> > primarily of pdf, xsl, doc and xml where any of these documents can
> > be
> > changed several times a day?
> >
> > Thanks,
> >
> > Luke
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11143-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 10 22:49:03 2004
Return-Path: <lucene-user-return-11143-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97002 invoked from network); 10 Nov 2004 22:49:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 10 Nov 2004 22:49:03 -0000
Received: (qmail 51589 invoked by uid 500); 10 Nov 2004 22:48:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51513 invoked by uid 500); 10 Nov 2004 22:48:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51499 invoked by uid 99); 10 Nov 2004 22:48:53 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.148.212.189] (HELO w05.bloglines.com) (216.148.212.189)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 14:48:51 -0800
Received: (qmail 9348 invoked by uid 99); 10 Nov 2004 22:48:47 -0000
Message-ID: <1100126927.3418676588.9347.sendItem@bloglines.com>
Date: 10 Nov 2004 22:48:47 -0000
From: yahootintin.1247688@bloglines.com
To: lucene-user@jakarta.apache.org
Subject: Re: Locking issue
MIME-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

> With the information provided, I have no 
> idea what the issue
may be.  

Is there some information that I should post that will help determine
why Lucene is giving me this error?

Thanks.

--- Lucene Users List" <lucene-user@jakarta.apache.org
wrote:
On Nov 10, 2004, at 2:17 AM, yahootintin.1247688@bloglines.com wrote:

> > Otis or Erik, do you know if a Reader continously opening should cause

> > the
> > Writer to fail with a "Lock obtain timed out" error?
> 
>
No need to address individuals here.
> 
> With the information provided,
I have no idea what the issue may be.  
> There certainly is no issue reading
and writing to an index at the same 
> time, but only one process can be
writing/deleting from the index at a 
> time.
> 
> 	Erik
> 
> >
> >
--- Lucene Users List"
> > <lucene-user@jakarta.apache.org wrote:
> > The
attached Java file shows a locking
> > issue that occurs with
> >> Lucene.

> >>
> >> One thread opens and closes an IndexReader.
> >  The other thread

> >> opens an IndexWriter, adds a document and then closes
> > the
> >>
IndexWriter.  I would expect that this app should be able to
> >> happily

> > run without an issues.
> >>
> >> It fails with:
> >>   java.io.IOException:
Lock
> > obtain timed out
> >>
> >> Is this expected?  I thought a Reader
could be opened
> > while a
> >> Writer is adding a document.
> >>
> >>
Any help is appreciated.
> >>
> >
> >>
> >> ---------------------------------------------------------------------

> >
> >> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org

> >> For
> > additional commands, e-mail: lucene-user-help@jakarta.apache.org

> >>
> >>
> >
> > ---------------------------------------------------------------------

> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>

> 
> ---------------------------------------------------------------------

> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For
additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11144-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 00:11:48 2004
Return-Path: <lucene-user-return-11144-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26183 invoked from network); 11 Nov 2004 00:11:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 00:11:48 -0000
Received: (qmail 84278 invoked by uid 500); 11 Nov 2004 00:11:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84179 invoked by uid 500); 11 Nov 2004 00:11:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84164 invoked by uid 99); 11 Nov 2004 00:11:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 16:11:38 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A310B13E28FD; Wed, 10 Nov 2004 19:11:34 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 0A5D513E28FB
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 19:11:12 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <1100126927.3418676588.9347.sendItem@bloglines.com>
References: <1100126927.3418676588.9347.sendItem@bloglines.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <41A27606-3376-11D9-AE45-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Locking issue
Date: Wed, 10 Nov 2004 19:11:38 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 10, 2004, at 5:48 PM, yahootintin.1247688@bloglines.com wrote:
> Hi,
>
>> With the information provided, I have no
>> idea what the issue
> may be.
>
> Is there some information that I should post that will help determine
> why Lucene is giving me this error?

You mentioned posting code - though I don't recall getting an 
attachment.  If you could post it as a Bugzilla issue with your code 
attached, it would be preserved outside of our mailboxes.  If the code 
is self-contained enough for me to try it, I will at some point in the 
near future.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11145-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 00:23:23 2004
Return-Path: <lucene-user-return-11145-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29061 invoked from network); 11 Nov 2004 00:23:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 00:23:23 -0000
Received: (qmail 93106 invoked by uid 500); 11 Nov 2004 00:23:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93089 invoked by uid 500); 11 Nov 2004 00:23:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93076 invoked by uid 99); 11 Nov 2004 00:23:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 16:23:11 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Acedemic Question About Indexing
Date: Wed, 10 Nov 2004 19:23:08 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA5BFC53@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Acedemic Question About Indexing
Thread-Index: AcTHXao0ofYfpgcYRK+kmz5Oh9rwxwAJbsxw
From: "Will Allen" <wallen@Cyveillance.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have an application that I run monthly that indexes 40 million =
documents into 6 indexes, then uses a multisearcher.  The advantage for =
me is that I can have multiple writers indexing 1/6 of that total data =
reducing the time it takes to index by about 5X.

-----Original Message-----
From: Luke Shannon [mailto:lshannon@hypermedia.com]
Sent: Wednesday, November 10, 2004 2:39 PM
To: Lucene Users List
Subject: Re: Acedemic Question About Indexing


Don't worry, regardless of what I learn in this forum I am telling my
company to get me a copy of that bad boy when it comes out (which as far =
as
I am concerned can't be soon enough). I will pay for grama's myself.

I think I have reviewed the code you are referring to and have something
similar working in my own indexer (using the "uid"). All is well.

My stupid question for the day is why would you ever want multiple =
indexes
running if you can build one smart indexer that does everything as
efficiently as possible? Does the answer to this question move me to =
multi
threaded indexing territory?

Thanks,

Luke


----- Original Message -----=20
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, November 10, 2004 2:08 PM
Subject: Re: Acedemic Question About Indexing


> Uh, I hate to market it, but.... it's in the book.  But you don't have
> to wait for it, as there already is a Lucene demo that does what you
> described.  I am not sure if the demo always recreates the index or
> whether it deletes and re-adds only the new and modified files, but if
> it's the former, you would only need to modify the demo a little bit =
to
> check the timestamps of File objects and compare them to those stored
> in the index (if they are being stored - if not, you should add a =
field
> to hold that data)
>
> Otis
>
> --- Luke Shannon <lshannon@hypermedia.com> wrote:
>
> > I am working on debugging an existing Lucene implementation.
> >
> > Before I started, I built a demo to understand Lucene. In my demo I
> > indexed
> > the entire content hierarhcy all at once, and than optimize this
> > index and
> > used it for queries. It was time consuming but very simply.
> >
> > The code I am currently trying to fix indexes the content hierarchy
> > by
> > folder creating a seperate index for each one. Thus it ends up with =
a
> > bunch
> > of indexes. I still don't understand how this works (I am assuming
> > they get
> > merged someone that I have tracked down yet) but I have noticed it
> > doesn't
> > always index the right folder. This results in the users reporting
> > "inconsistant" behavior in searching after they make a change to a
> > document.
> > To keep things simiple I would like to remove all the logic that
> > figures out
> > which folder to index and just do them all (usually less than 1000
> > files) so
> > I end up with one index.
> >
> > Would indexing time be the only area I would be losing out in, or is
> > there
> > something more to the approach of creating multiple indexes and
> > merging
> > them.
> >
> > What is a good approach I can take to indexing a content hierarchy
> > composed
> > primarily of pdf, xsl, doc and xml where any of these documents can
> > be
> > changed several times a day?
> >
> > Thanks,
> >
> > Luke
> >
> >
> >
> > =
---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11146-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 00:51:52 2004
Return-Path: <lucene-user-return-11146-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37099 invoked from network); 11 Nov 2004 00:51:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 00:51:52 -0000
Received: (qmail 23565 invoked by uid 500); 11 Nov 2004 00:51:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23531 invoked by uid 500); 11 Nov 2004 00:51:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23513 invoked by uid 99); 11 Nov 2004 00:51:42 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.218.93.5] (HELO web41006.mail.yahoo.com) (66.218.93.5)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 16:51:41 -0800
Received: (qmail 33235 invoked by uid 60001); 11 Nov 2004 00:51:40 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=ibauGk8fIjw+B0WiR8cISZTZMxUZn4BduNIlrdDEKyOfivno/QBWXCb1AQnGTLSVFu4U4MLLG96Ca33zw5uacOy2Nk/bURtsxSvux0In7m9xfzu3aon2yAQ7vEu0JJjHZoa2ozOF+7uZbHKXmWGG5myF7nfeIPclgMU8AxopzHg=  ;
Message-ID: <20041111005140.33233.qmail@web41006.mail.yahoo.com>
Received: from [199.181.134.220] by web41006.mail.yahoo.com via HTTP; Wed, 10 Nov 2004 16:51:40 PST
Date: Wed, 10 Nov 2004 16:51:40 -0800 (PST)
From: <yahootintin-lucene@yahoo.com>
Reply-To: yahootintin-lucene@yahoo.com
Subject: Re: Locking issue
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <41A27606-3376-11D9-AE45-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="0-173484988-1100134300=:32865"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-173484988-1100134300=:32865
Content-Type: text/plain; charset=us-ascii
Content-Id: 
Content-Disposition: inline

Whoops!  Looks like my attachment didn't make it through.  I'm
re-attaching my simple test app.

Thanks.

--- Erik Hatcher <erik@ehatchersolutions.com> wrote:

> On Nov 10, 2004, at 5:48 PM, yahootintin.1247688@bloglines.com
> wrote:
> > Hi,
> >
> >> With the information provided, I have no
> >> idea what the issue
> > may be.
> >
> > Is there some information that I should post that will help
> determine
> > why Lucene is giving me this error?
> 
> You mentioned posting code - though I don't recall getting an 
> attachment.  If you could post it as a Bugzilla issue with
> your code 
> attached, it would be preserved outside of our mailboxes.  If
> the code 
> is self-contained enough for me to try it, I will at some
> point in the 
> near future.
> 
> 	Erik
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 

--0-173484988-1100134300=:32865
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--0-173484988-1100134300=:32865--

From lucene-user-return-11147-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 01:03:45 2004
Return-Path: <lucene-user-return-11147-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41057 invoked from network); 11 Nov 2004 01:03:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 01:03:45 -0000
Received: (qmail 60250 invoked by uid 500); 11 Nov 2004 01:03:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60189 invoked by uid 500); 11 Nov 2004 01:03:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60135 invoked by uid 99); 11 Nov 2004 01:02:58 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.148.212.185] (HELO w03.bloglines.com) (216.148.212.185)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 17:02:57 -0800
Received: (qmail 28432 invoked by uid 99); 11 Nov 2004 01:02:53 -0000
Message-ID: <1100134973.2314762772.28428.sendItem@bloglines.com>
Date: 11 Nov 2004 01:02:53 -0000
From: yahootintin.1247688@bloglines.com
To: lucene-user@jakarta.apache.org
Subject: Re: Locking issue
MIME-Version: 1.0
Content-Type: text/plain
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I added it to Bugzilla like you suggested:
http://issues.apache.org/bugzilla/show_bug.cgi?id=32171


Let me know if you see any way to get around this issue.

--- Lucene
Users List" <lucene-user@jakarta.apache.org wrote:
Whoops!  Looks like my
attachment didn't make it through.  I'm
> re-attaching my simple test app.

> 
> Thanks.
> 
> --- Erik Hatcher <erik@ehatchersolutions.com> wrote:

> 
> > On Nov 10, 2004, at 5:48 PM, yahootintin.1247688@bloglines.com
>
> wrote:
> > > Hi,
> > >
> > >> With the information provided, I have no

> > >> idea what the issue
> > > may be.
> > >
> > > Is there some information
that I should post that will help
> > determine
> > > why Lucene is giving
me this error?
> > 
> > You mentioned posting code - though I don't recall
getting an 
> > attachment.  If you could post it as a Bugzilla issue with

> > your code 
> > attached, it would be preserved outside of our mailboxes.
 If
> > the code 
> > is self-contained enough for me to try it, I will
at some
> > point in the 
> > near future.
> > 
> > 	Erik
> > 
> > 

> >
> ---------------------------------------------------------------------

> > To unsubscribe, e-mail:
> > lucene-user-unsubscribe@jakarta.apache.org

> > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org

> > 
> > 
> 
> 
> ---------------------------------------------------------------------

> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For
additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11148-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 02:17:26 2004
Return-Path: <lucene-user-return-11148-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67530 invoked from network); 11 Nov 2004 02:17:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 02:17:26 -0000
Received: (qmail 84427 invoked by uid 500); 11 Nov 2004 02:17:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84404 invoked by uid 500); 11 Nov 2004 02:17:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84389 invoked by uid 99); 11 Nov 2004 02:17:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 18:17:14 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4282D13E2005; Wed, 10 Nov 2004 21:17:11 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 267DE13E2005
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 21:16:56 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <1100134973.2314762772.28428.sendItem@bloglines.com>
References: <1100134973.2314762772.28428.sendItem@bloglines.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <D262A61C-3387-11D9-AE45-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Locking issue
Date: Wed, 10 Nov 2004 21:17:22 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I just ran the code you provided.  On my puny PowerBook (Mac OS X 
10.3.5) it dies in much less than 5 minutes.

I do not know what the issue is, but certainly the actions the program 
is taking are atypical.  Opening and closing an IndexWriter repeatedly 
is certainly expensive on large indexes.  Indexing documents in batches 
is more typical, I presume.

Also, maybe you need to put some sleep into the code to give the JVM a 
chance to catch its breath?  Does that alleviate the issue?

	Erik


On Nov 10, 2004, at 8:02 PM, yahootintin.1247688@bloglines.com wrote:

> I added it to Bugzilla like you suggested:
> http://issues.apache.org/bugzilla/show_bug.cgi?id=32171
>
>
> Let me know if you see any way to get around this issue.
>
> --- Lucene
> Users List" <lucene-user@jakarta.apache.org wrote:
> Whoops!  Looks like my
> attachment didn't make it through.  I'm
>> re-attaching my simple test app.
>
>>
>> Thanks.
>>
>> --- Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>>
>>> On Nov 10, 2004, at 5:48 PM, yahootintin.1247688@bloglines.com
>>
>> wrote:
>>>> Hi,
>>>>
>>>>> With the information provided, I have no
>
>>>>> idea what the issue
>>>> may be.
>>>>
>>>> Is there some information
> that I should post that will help
>>> determine
>>>> why Lucene is giving
> me this error?
>>>
>>> You mentioned posting code - though I don't recall
> getting an
>>> attachment.  If you could post it as a Bugzilla issue with
>
>>> your code
>>> attached, it would be preserved outside of our mailboxes.
>  If
>>> the code
>>> is self-contained enough for me to try it, I will
> at some
>>> point in the
>>> near future.
>>>
>>> 	Erik
>>>
>>>
>
>>>
>> ---------------------------------------------------------------------
>
>>> To unsubscribe, e-mail:
>>> lucene-user-unsubscribe@jakarta.apache.org
>
>>> For additional commands, e-mail:
>>> lucene-user-help@jakarta.apache.org
>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For
> additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11149-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 02:23:34 2004
Return-Path: <lucene-user-return-11149-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 75459 invoked from network); 11 Nov 2004 02:23:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 02:23:34 -0000
Received: (qmail 89038 invoked by uid 500); 11 Nov 2004 02:23:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 89021 invoked by uid 500); 11 Nov 2004 02:23:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 89001 invoked by uid 99); 11 Nov 2004 02:23:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 18:23:24 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 59E6A13E200A; Wed, 10 Nov 2004 21:23:22 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 4CD7C13E2005
	for <lucene-user@jakarta.apache.org>; Wed, 10 Nov 2004 21:23:08 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <1100134973.2314762772.28428.sendItem@bloglines.com>
References: <1100134973.2314762772.28428.sendItem@bloglines.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <B08232ED-3388-11D9-AE45-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Locking issue
Date: Wed, 10 Nov 2004 21:23:35 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I just added a Thread.sleep(1000) in the writer thread and it has run 
for quite some time, and is still running as I send this.

	Erik

On Nov 10, 2004, at 8:02 PM, yahootintin.1247688@bloglines.com wrote:

> I added it to Bugzilla like you suggested:
> http://issues.apache.org/bugzilla/show_bug.cgi?id=32171
>
>
> Let me know if you see any way to get around this issue.
>
> --- Lucene
> Users List" <lucene-user@jakarta.apache.org wrote:
> Whoops!  Looks like my
> attachment didn't make it through.  I'm
>> re-attaching my simple test app.
>
>>
>> Thanks.
>>
>> --- Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>>
>>> On Nov 10, 2004, at 5:48 PM, yahootintin.1247688@bloglines.com
>>
>> wrote:
>>>> Hi,
>>>>
>>>>> With the information provided, I have no
>
>>>>> idea what the issue
>>>> may be.
>>>>
>>>> Is there some information
> that I should post that will help
>>> determine
>>>> why Lucene is giving
> me this error?
>>>
>>> You mentioned posting code - though I don't recall
> getting an
>>> attachment.  If you could post it as a Bugzilla issue with
>
>>> your code
>>> attached, it would be preserved outside of our mailboxes.
>  If
>>> the code
>>> is self-contained enough for me to try it, I will
> at some
>>> point in the
>>> near future.
>>>
>>> 	Erik
>>>
>>>
>
>>>
>> ---------------------------------------------------------------------
>
>>> To unsubscribe, e-mail:
>>> lucene-user-unsubscribe@jakarta.apache.org
>
>>> For additional commands, e-mail:
>>> lucene-user-help@jakarta.apache.org
>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For
> additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11150-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 02:52:09 2004
Return-Path: <lucene-user-return-11150-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84098 invoked from network); 11 Nov 2004 02:52:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 02:52:09 -0000
Received: (qmail 36717 invoked by uid 500); 11 Nov 2004 02:51:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36684 invoked by uid 500); 11 Nov 2004 02:51:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36668 invoked by uid 99); 11 Nov 2004 02:51:55 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.141.132.41] (HELO ml.worldsoftware.co.jp) (203.141.132.41)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 18:51:55 -0800
Received: from satoshiobtu4n6 (zaku.worldsoftware.co.jp [192.168.55.6])
	by ml.worldsoftware.co.jp (Postfix) with SMTP id CC4D57672A
	for <lucene-user@jakarta.apache.org>; Thu, 11 Nov 2004 11:51:52 +0900 (JST)
Message-ID: <005b01c4c799$674e1270$32e0fcca@satoshiobtu4n6>
From: "Satoshi Hasegawa" <hasegawa@p03.worldsoftware.co.jp>
To: <lucene-user@jakarta.apache.org>
Subject: Query#rewrite Question
Date: Thu, 11 Nov 2004 11:51:54 +0900
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0057_01C4C7E4.D704E670"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0057_01C4C7E4.D704E670
Content-Type: text/plain;
	charset="iso-2022-jp"
Content-Transfer-Encoding: 7bit

Hello,

Our program accepts input in the form of Lucene query syntax from the user, 
but we wish to perform additional tasks such as thesaurus expansion. So I 
want to manipulate the Query object that results from parsing.

My question is, is the result of the Query#rewrite method guaranteed to be 
either a TermQuery, a PhraseQuery, or a BooleanQuery, and if it is a 
BooleanQuery, do all the constituent clauses also reduce to one of the above 
three classes? If not, what if the original Query object was the one that 
was obtained from QueryParser#parse method? Can I assume the above in this 
restricted case?

I experimented with the current version, and the above seems to be positive 
in this version; I'm asking if this could change in the future. Thank you. 

------=_NextPart_000_0057_01C4C7E4.D704E670--


From lucene-user-return-11151-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 04:07:39 2004
Return-Path: <lucene-user-return-11151-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5598 invoked from network); 11 Nov 2004 04:07:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 04:07:39 -0000
Received: (qmail 27688 invoked by uid 500); 11 Nov 2004 04:07:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27649 invoked by uid 500); 11 Nov 2004 04:07:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27630 invoked by uid 99); 11 Nov 2004 04:07:34 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.225.172] (HELO web14822.mail.yahoo.com) (216.136.225.172)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 20:07:34 -0800
Received: (qmail 35749 invoked by uid 60001); 11 Nov 2004 04:07:28 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=do9PZWBdYxu+D5d+KiTy6Y3ge2fEiILXpNrpi9dzmXTuGhLCsNtfGNZVWHZ/aZ4QG7bnGgUcdAhJqCsS0K0VVG+g5uadpOlfGUOAggaB1FSqRsK4OJtI/ssc9389rjYo7wFGuNnWFjCm/ew4ApMyVG9QkWpGv8p6tdj75RNK7rc=  ;
Message-ID: <20041111040728.35747.qmail@web14822.mail.yahoo.com>
Received: from [203.162.3.147] by web14822.mail.yahoo.com via HTTP; Wed, 10 Nov 2004 20:07:28 PST
Date: Wed, 10 Nov 2004 20:07:28 -0800 (PST)
From: Nhan Nguyen Dang <ndnhan2003@yahoo.com>
Subject: Re: Using Lucene to store document
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20041109185854.11385.qmail@web12701.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-388564723-1100146048=:35724"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-388564723-1100146048=:35724
Content-Type: text/plain; charset=us-ascii

Hi Otis,
Please let me know what HEAD version of Lucene is?
Actually, I'm consider the advantages of storing document using Lucene Stored field - For  my Search engine.
I've tested with thousands of documents and see that retrieve document (in this case XML file) with Lucene is a little bit faster than using FS. But I cannot test with a large number of data to hava an accurate comparision. 
So whether Lucene can support millions of document, still balance and retrieve the with approriate speed.
Nhan


---------------------------------
FREE Spam Protection! Click Here.
SpamExtract Blocks Spam.
			
---------------------------------
Do you Yahoo!?
 Check out the new Yahoo! Front Page. www.yahoo.com
--0-388564723-1100146048=:35724--

From lucene-user-return-11152-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 04:24:40 2004
Return-Path: <lucene-user-return-11152-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11547 invoked from network); 11 Nov 2004 04:24:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 04:24:40 -0000
Received: (qmail 47796 invoked by uid 500); 11 Nov 2004 04:24:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47769 invoked by uid 500); 11 Nov 2004 04:24:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47754 invoked by uid 99); 11 Nov 2004 04:24:37 -0000
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [216.54.180.10] (HELO htexc.hq.htinc.com) (216.54.180.10)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 10 Nov 2004 20:24:37 -0800
X-MIMEOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Search scalability
Date: Wed, 10 Nov 2004 23:24:23 -0500
Message-ID: <4568BE33B520DD43B7B24DE0B609B215440263@htexc.hq.htinc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search scalability
Thread-Index: AcTHo/0PmUENgm6AS56fiJWkuz+FmQAAV+gA
From: "Ravi" <ravi@htinc.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

 We have one large index for a document repository of 800,000 documents.
The size of the index is 800MB. When we do searches against the index,
it takes 300-500ms for a single search. We wanted to test the
scalability and tried 100 parallel searches against the index with the
same query and the average response time was 13 seconds. We used a
simple IndexSearcher. Same searcher object was shared by all the
searches. I'm sure people have success in configuring lucene for better
scalability. Can somebody share their approach?

Thanks=20
Ravi.=20

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11153-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 05:36:26 2004
Return-Path: <lucene-user-return-11153-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37480 invoked from network); 11 Nov 2004 05:36:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 05:36:26 -0000
Received: (qmail 36163 invoked by uid 500); 11 Nov 2004 05:36:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36146 invoked by uid 500); 11 Nov 2004 05:36:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36131 invoked by uid 99); 11 Nov 2004 05:36:22 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.244] (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 21:36:22 -0800
Received: (qmail 79865 invoked by uid 60001); 11 Nov 2004 05:36:16 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=6P3LGN1BM7asZovU6cwftnRF534Jw+ocEpd/1VK97s75ngRX29dqGTr7f7UlKtENDsFTIlsC/cYz/g5yzX3dSq4FjLyK7327lBo0UdgKpjZmsfRyM5RbHtMTpxTjbpSWF7ffa0vmJ1gC7Yw3gHl3TS4aMk96m8RPSi2Z4jW6HHY=  ;
Message-ID: <20041111053616.79863.qmail@web12707.mail.yahoo.com>
Received: from [69.112.2.199] by web12707.mail.yahoo.com via HTTP; Wed, 10 Nov 2004 21:36:16 PST
Date: Wed, 10 Nov 2004 21:36:16 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Search scalability
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <4568BE33B520DD43B7B24DE0B609B215440263@htexc.hq.htinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

100 parallel searches going against a single index on a single disk
means a lot of disk seeks all happening at once.  One simple way of
working around this is to load your FSDirectory into RAMDirectory. 
This should be faster (could you report your
observations/comparisons?).  You can also try using ramfs if you are
using Linux.

Otis

--- Ravi <ravi@htinc.com> wrote:

>  We have one large index for a document repository of 800,000
> documents.
> The size of the index is 800MB. When we do searches against the
> index,
> it takes 300-500ms for a single search. We wanted to test the
> scalability and tried 100 parallel searches against the index with
> the
> same query and the average response time was 13 seconds. We used a
> simple IndexSearcher. Same searcher object was shared by all the
> searches. I'm sure people have success in configuring lucene for
> better
> scalability. Can somebody share their approach?
> 
> Thanks 
> Ravi. 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11154-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 05:39:11 2004
Return-Path: <lucene-user-return-11154-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38283 invoked from network); 11 Nov 2004 05:39:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 05:39:11 -0000
Received: (qmail 39533 invoked by uid 500); 11 Nov 2004 05:39:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38714 invoked by uid 500); 11 Nov 2004 05:39:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38697 invoked by uid 99); 11 Nov 2004 05:39:08 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.238] (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 21:39:08 -0800
Received: (qmail 92913 invoked by uid 60001); 11 Nov 2004 05:39:02 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=M9G/n2/xlxCDu+SLBadA2u9kF4vZsZgGqB+iBtmhD5PUSwj6AVg6oXNzGcfgsjvIwJK0d+9waQAB3cRl6x86p7ibG2ou6e62pQz8yMYosNRG4vIaAMg2xKySP8JzLPjH+EuWch5PgvBbYii04FPBLDxgYKBCcE4vNEtEx97gI+A=  ;
Message-ID: <20041111053902.92911.qmail@web12701.mail.yahoo.com>
Received: from [69.112.2.199] by web12701.mail.yahoo.com via HTTP; Wed, 10 Nov 2004 21:39:02 PST
Date: Wed, 10 Nov 2004 21:39:02 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Using Lucene to store document
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20041111040728.35747.qmail@web14822.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

HEAD version means that you should check out Lucene straight out of
CVS.  How to work with CVS is another story, probably described
somewhere on jakarta.apache.org site.

Otis

--- Nhan Nguyen Dang <ndnhan2003@yahoo.com> wrote:

> Hi Otis,
> Please let me know what HEAD version of Lucene is?
> Actually, I'm consider the advantages of storing document using
> Lucene Stored field - For  my Search engine.
> I've tested with thousands of documents and see that retrieve
> document (in this case XML file) with Lucene is a little bit faster
> than using FS. But I cannot test with a large number of data to hava
> an accurate comparision. 
> So whether Lucene can support millions of document, still balance and
> retrieve the with approriate speed.
> Nhan
> 
> 
> ---------------------------------
> FREE Spam Protection! Click Here.
> SpamExtract Blocks Spam.
> 			
> ---------------------------------
> Do you Yahoo!?
>  Check out the new Yahoo! Front Page. www.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11155-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 06:47:47 2004
Return-Path: <lucene-user-return-11155-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58769 invoked from network); 11 Nov 2004 06:47:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 06:47:47 -0000
Received: (qmail 94277 invoked by uid 500); 11 Nov 2004 06:47:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94251 invoked by uid 500); 11 Nov 2004 06:47:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94228 invoked by uid 99); 11 Nov 2004 06:47:43 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.218.93.5] (HELO web41006.mail.yahoo.com) (66.218.93.5)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 22:47:42 -0800
Received: (qmail 91427 invoked by uid 60001); 11 Nov 2004 06:47:37 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=AlOcotd5XK8+i+Ab5wPdJvRZDCmLyx28A0Yzhrm3M/2gmEuzfgD3bFxW5QtkKGAHRffWLWMNwOvWw5/Tm4RFqBOijFkku8mwHeas1Qf/DLck2mnetpcJpDKLywUiVvbNMHtFTluKEyF0lncSmYKko3CJTWT1kESo9J+QB3a5NkM=  ;
Message-ID: <20041111064737.91424.qmail@web41006.mail.yahoo.com>
Received: from [67.171.39.159] by web41006.mail.yahoo.com via HTTP; Wed, 10 Nov 2004 22:47:37 PST
Date: Wed, 10 Nov 2004 22:47:37 -0800 (PST)
From: <yahootintin-lucene@yahoo.com>
Reply-To: yahootintin-lucene@yahoo.com
Subject: Re: Locking issue
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <B08232ED-3388-11D9-AE45-000393A564E6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yes, I tried that too and it worked.  The issue is that our
Operations folks plan to install this on a pretty busy box and I
was hoping that Lucene wouldn't cause issues if it only had a
small slice of the CPU.

Guess I'll tell them to buy a bigger box!  Unless you have any
other ideas.  I'm running some tests with a larger timeout to
see if that helps.

--- Erik Hatcher <erik@ehatchersolutions.com> wrote:

> I just added a Thread.sleep(1000) in the writer thread and it
> has run 
> for quite some time, and is still running as I send this.
> 
> 	Erik
> 
> On Nov 10, 2004, at 8:02 PM, yahootintin.1247688@bloglines.com
> wrote:
> 
> > I added it to Bugzilla like you suggested:
> > http://issues.apache.org/bugzilla/show_bug.cgi?id=32171
> >
> >
> > Let me know if you see any way to get around this issue.
> >
> > --- Lucene
> > Users List" <lucene-user@jakarta.apache.org wrote:
> > Whoops!  Looks like my
> > attachment didn't make it through.  I'm
> >> re-attaching my simple test app.
> >
> >>
> >> Thanks.
> >>
> >> --- Erik Hatcher <erik@ehatchersolutions.com> wrote:
> >
> >>
> >>> On Nov 10, 2004, at 5:48 PM,
> yahootintin.1247688@bloglines.com
> >>
> >> wrote:
> >>>> Hi,
> >>>>
> >>>>> With the information provided, I have no
> >
> >>>>> idea what the issue
> >>>> may be.
> >>>>
> >>>> Is there some information
> > that I should post that will help
> >>> determine
> >>>> why Lucene is giving
> > me this error?
> >>>
> >>> You mentioned posting code - though I don't recall
> > getting an
> >>> attachment.  If you could post it as a Bugzilla issue with
> >
> >>> your code
> >>> attached, it would be preserved outside of our mailboxes.
> >  If
> >>> the code
> >>> is self-contained enough for me to try it, I will
> > at some
> >>> point in the
> >>> near future.
> >>>
> >>> 	Erik
> >>>
> >>>
> >
> >>>
> >>
>
---------------------------------------------------------------------
> >
> >>> To unsubscribe, e-mail:
> >>> lucene-user-unsubscribe@jakarta.apache.org
> >
> >>> For additional commands, e-mail:
> >>> lucene-user-help@jakarta.apache.org
> >
> >>>
> >>>
> >>
> >>
> >>
>
---------------------------------------------------------------------
> >
> >> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> >> For
> > additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >>
> >>
> >
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11156-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 06:52:09 2004
Return-Path: <lucene-user-return-11156-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60448 invoked from network); 11 Nov 2004 06:52:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 06:52:08 -0000
Received: (qmail 98595 invoked by uid 500); 11 Nov 2004 06:52:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98558 invoked by uid 500); 11 Nov 2004 06:52:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98543 invoked by uid 99); 11 Nov 2004 06:52:04 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.218.93.13] (HELO web41014.mail.yahoo.com) (66.218.93.13)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 22:52:04 -0800
Received: (qmail 73567 invoked by uid 60001); 11 Nov 2004 06:52:01 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=TdrYzzkoy0XLwKScraLJncEp9KCaGHSHVj9BAKZwZRKwKTppjN79GBDNlMcI2vEbKslJ20JItGx8FjszU13dZuY52KKqRh6eYvgv1kesLJBMIXgWmXLxfrSe4vp9+ck0ioG1kNQ2K1fRarTQYY6f2m9s4gIg61U67ZSeJnGlRWI=  ;
Message-ID: <20041111065200.73552.qmail@web41014.mail.yahoo.com>
Received: from [67.171.39.159] by web41014.mail.yahoo.com via HTTP; Wed, 10 Nov 2004 22:52:00 PST
Date: Wed, 10 Nov 2004 22:52:00 -0800 (PST)
From: <yahootintin-lucene@yahoo.com>
Reply-To: yahootintin-lucene@yahoo.com
Subject: Re: Search scalability
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20041111053616.79863.qmail@web12707.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Does it take 800MB of RAM to load that index into a
RAMDirectory?  Or are only some of the files loaded into RAM?

--- Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:

> Hello,
> 
> 100 parallel searches going against a single index on a single
> disk
> means a lot of disk seeks all happening at once.  One simple
> way of
> working around this is to load your FSDirectory into
> RAMDirectory. 
> This should be faster (could you report your
> observations/comparisons?).  You can also try using ramfs if
> you are
> using Linux.
> 
> Otis
> 
> --- Ravi <ravi@htinc.com> wrote:
> 
> >  We have one large index for a document repository of
> 800,000
> > documents.
> > The size of the index is 800MB. When we do searches against
> the
> > index,
> > it takes 300-500ms for a single search. We wanted to test
> the
> > scalability and tried 100 parallel searches against the
> index with
> > the
> > same query and the average response time was 13 seconds. We
> used a
> > simple IndexSearcher. Same searcher object was shared by all
> the
> > searches. I'm sure people have success in configuring lucene
> for
> > better
> > scalability. Can somebody share their approach?
> > 
> > Thanks 
> > Ravi. 
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > 
> > 
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11157-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 07:11:43 2004
Return-Path: <lucene-user-return-11157-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67379 invoked from network); 11 Nov 2004 07:11:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 07:11:43 -0000
Received: (qmail 24617 invoked by uid 500); 11 Nov 2004 07:11:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24588 invoked by uid 500); 11 Nov 2004 07:11:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24575 invoked by uid 99); 11 Nov 2004 07:11:39 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.209] (HELO web21323.mail.yahoo.com) (216.136.175.209)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 10 Nov 2004 23:11:39 -0800
Received: (qmail 49787 invoked by uid 60001); 11 Nov 2004 07:11:33 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=Z9tQGwlBT75p8EiMMMFaBhKTWfImDNT2/p4QR3whVogWcwDJy/yjbNiGFsjVQnNc2EBwNNIBtfe7QSGEtg6T/R92UosDJBCPJTkTYlavg5DfwDdh0zaRiY9sv1GCbIIUnoaBctrYkWmw2zSywNquU3LVqqMhjaxPCBbVjXdAoHU=  ;
Message-ID: <20041111071133.49785.qmail@web21323.mail.yahoo.com>
Received: from [81.182.58.251] by web21323.mail.yahoo.com via HTTP; Wed, 10 Nov 2004 23:11:33 PST
Date: Wed, 10 Nov 2004 23:11:33 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Bug in the BooleanQuery optimizer? ..TooManyClauses
To: lucene-user@jakarta.apache.org
In-Reply-To: <20041111065200.73552.qmail@web41014.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

First of all, I've read about BooleanQuery$TooManyClauses, so I know that it has a 1024 Clauses
limit by default which is good enough for me, but I still think it works strange.

Example:
I have an index with about 20Million documents.
Let's say that there is about 3000 variants in the entire document set of this word mask: cab*
Let's say that about 500 documents are containing the word: spectrum
Now, when I search for "cab* AND spectrum", I don't expect it to throw an exception.
It should first restrict the search for the 500 documents containing the word "spectrum", then it
should collect the variants of "cab*" withing these documents, which turns out in two or three
variants of "cab*" (cable, cables, maybe some more) and the search should return let's say 10
documents.

Similar example: When I search for "cab* AND nonexistingword" it still throws a TooManyClauses
exception instead of saying "No results", since there is no "nonexistingword" in my document set,
so it doesn't even have to start collecting the variations of "cab*".

Is there any path for this issue?
Thank you for your time!

Sanyi
(I'm using: lucene 1.4.2)


		
__________________________________ 
Do you Yahoo!? 
Check out the new Yahoo! Front Page. 
www.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11158-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 10:06:09 2004
Return-Path: <lucene-user-return-11158-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50734 invoked from network); 11 Nov 2004 10:06:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 10:06:09 -0000
Received: (qmail 45177 invoked by uid 500); 11 Nov 2004 10:06:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44844 invoked by uid 500); 11 Nov 2004 10:06:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44829 invoked by uid 99); 11 Nov 2004 10:06:04 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 02:06:04 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 2382B13E28FB; Thu, 11 Nov 2004 05:05:54 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id CA04113E200B
	for <lucene-user@jakarta.apache.org>; Thu, 11 Nov 2004 05:05:42 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <005b01c4c799$674e1270$32e0fcca@satoshiobtu4n6>
References: <005b01c4c799$674e1270$32e0fcca@satoshiobtu4n6>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <4FF070AE-33C9-11D9-B46A-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query#rewrite Question
Date: Thu, 11 Nov 2004 05:06:10 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Nov 10, 2004, at 9:51 PM, Satoshi Hasegawa wrote:
> Our program accepts input in the form of Lucene query syntax from the 
> user,
> but we wish to perform additional tasks such as thesaurus expansion. 
> So I
> want to manipulate the Query object that results from parsing.

You may want to consider using an Analyzer to expand queries rather 
than manipulating the query object itself.

> My question is, is the result of the Query#rewrite method guaranteed 
> to be
> either a TermQuery, a PhraseQuery, or a BooleanQuery, and if it is a
> BooleanQuery, do all the constituent clauses also reduce to one of the 
> above
> three classes?

No.  For example, look at the SpanQuery family.  These do no explicit 
rewriting and thus are left as themselves.

>  If not, what if the original Query object was the one that
> was obtained from QueryParser#parse method? Can I assume the above in 
> this
> restricted case?
>
> I experimented with the current version, and the above seems to be 
> positive
> in this version; I'm asking if this could change in the future. Thank 
> you.

I think we'll see QueryParser, or at least more sophisticated versions 
of it, emerge that support SpanQuery's.  In fact, in our book, I 
created a subclas of QueryParser that overrides getFieldQuery and 
returns a SpanNearQuery in order to achieve ordered phrase searching.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11159-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 10:09:59 2004
Return-Path: <lucene-user-return-11159-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52208 invoked from network); 11 Nov 2004 10:09:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 10:09:58 -0000
Received: (qmail 51665 invoked by uid 500); 11 Nov 2004 10:09:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51646 invoked by uid 500); 11 Nov 2004 10:09:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51632 invoked by uid 99); 11 Nov 2004 10:09:55 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 02:09:55 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D36F013E28FB; Thu, 11 Nov 2004 05:09:46 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id B0DEA13E200B
	for <lucene-user@jakarta.apache.org>; Thu, 11 Nov 2004 05:09:35 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <20041111064737.91424.qmail@web41006.mail.yahoo.com>
References: <20041111064737.91424.qmail@web41006.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <DAEA7126-33C9-11D9-B46A-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Locking issue
Date: Thu, 11 Nov 2004 05:10:03 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Nov 11, 2004, at 1:47 AM, <yahootintin-lucene@yahoo.com> wrote:
> Yes, I tried that too and it worked.  The issue is that our
> Operations folks plan to install this on a pretty busy box and I
> was hoping that Lucene wouldn't cause issues if it only had a
> small slice of the CPU.

I don't think that Lucene is causing the issue.  I'd like to wait and 
see if others have opinions/suggestions on this issue.  Again, what 
your example program is doing is unrealistic - you're hammering the 
filesystem and CPU by having infinite loops that do not sleep.  If a 
minimal sleep works then I don't think you'll have to concern the 
operations folks with a bigger box.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11160-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 11:46:07 2004
Return-Path: <lucene-user-return-11160-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97449 invoked from network); 11 Nov 2004 11:46:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 11:46:07 -0000
Received: (qmail 25399 invoked by uid 500); 11 Nov 2004 11:46:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25376 invoked by uid 500); 11 Nov 2004 11:46:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25363 invoked by uid 99); 11 Nov 2004 11:46:01 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.211] (HELO web21325.mail.yahoo.com) (216.136.175.211)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 11 Nov 2004 03:46:01 -0800
Received: (qmail 45485 invoked by uid 60001); 11 Nov 2004 11:45:57 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=AOBZMP9XGQSUjUfjKUBUeoIG5LOUwLjHQffJLwTux9p6k19JyClro6Fg7xBxQLwm9KX19SRTBOn4k+rLbEB76Ns0XtPe4hYttxckBAbTt+mBxmV1OHycf0Jr/BsiDUl6VohK9Uek5q2xHfJVCBBugEDFLOxi32jGMO21RbkaFE0=  ;
Message-ID: <20041111114557.45483.qmail@web21325.mail.yahoo.com>
Received: from [81.182.58.251] by web21325.mail.yahoo.com via HTTP; Thu, 11 Nov 2004 03:45:57 PST
Date: Thu, 11 Nov 2004 03:45:57 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Bug in the BooleanQuery optimizer? ..TooManyClauses
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

First of all, I've read about BooleanQuery$TooManyClauses, so I know that it has a 1024 Clauses
limit by default which is good enough for me, but I still think it works strange.

Example:
I have an index with about 20Million documents.
Let's say that there is about 3000 variants in the entire document set of this word mask: cab*
Let's say that about 500 documents are containing the word: spectrum
Now, when I search for "cab* AND spectrum", I don't expect it to throw an exception.
It should first restrict the search for the 500 documents containing the word "spectrum", then it
should collect the variants of "cab*" withing these documents, which turns out in two or three
variants of "cab*" (cable, cables, maybe some more) and the search should return let's say 10
documents.

Similar example: When I search for "cab* AND nonexistingword" it still throws a TooManyClauses
exception instead of saying "No results", since there is no "nonexistingword" in my document set,
so it doesn't even have to start collecting the variations of "cab*".

Is there any path for this issue?
Thank you for your time!

Sanyi
(I'm using: lucene 1.4.2)

p.s.: Sorry for re-sending this message, I was first sending it as an accidental reply to a wrong thread..


		
__________________________________ 
Do you Yahoo!? 
Check out the new Yahoo! Front Page. 
www.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11161-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 11:52:48 2004
Return-Path: <lucene-user-return-11161-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 207 invoked from network); 11 Nov 2004 11:52:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 11:52:48 -0000
Received: (qmail 37295 invoked by uid 500); 11 Nov 2004 11:52:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36992 invoked by uid 500); 11 Nov 2004 11:52:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36974 invoked by uid 99); 11 Nov 2004 11:52:43 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [217.160.131.136] (HELO p15105029.pureserver.info) (217.160.131.136)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 11 Nov 2004 03:52:43 -0800
Received: (qmail 13566 invoked by uid 89); 11 Nov 2004 12:52:38 +0100
Received: from unknown (HELO max.osuatech.local) (max%osua.de@217.25.196.25)
  by 0 with SMTP; 11 Nov 2004 12:52:38 +0100
Date: Thu, 11 Nov 2004 13:55:00 +0200
From: Maxim Patramanskij <max@osua.de>
X-Mailer: The Bat! (v1.62i) Business
Reply-To: Maxim Patramanskij <max@osua.de>
Organization: OSUA technology
X-Priority: 3 (Normal)
Message-ID: <12415245343.20041111135500@osua.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re[2]: Faster highlighting with TermPositionVectors (update)
In-Reply-To: <418AAC49.3040103@yahoo.co.uk>
References: <418AAC49.3040103@yahoo.co.uk>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Mark.

I'm just wondered about the following piece of code from your latest
TokenSources class:

 public static TokenStream getAnyTokenStream(IndexReader reader,int docId, String field,Analyzer analyzer) throws IOException
    {
                TokenStream ts=null;

                TermFreqVector tfv=(TermFreqVector) reader.getTermFreqVector(docId,field);
                if(tfv!=null)
                {
                    if(tfv instanceof TermPositionVector)
                    {
                        //read pre-parsed token position info stored on disk
                        TermPositionVector tpv=(TermPositionVector) reader.getTermFreqVector(docId,field);
                         ts=getTokenStream(tpv);
                    }
                }
                //No token info stored so fall back to analyzing raw content
                if(ts==null)
                {
                    ts=getTokenStream(reader,docId,field,analyzer);
                }
                return ts;
    }

Isn't you called getTermFreqVector(docId,field) twice?

 Why not just call:

                    if(tfv instanceof TermPositionVector)
                    {
                       ts=getTokenStream((TermPositionVector) tvf);
                    } 


Max

Friday, November 5, 2004, 12:25:13 AM, you wrote:

m> Having revisited the original TokenSources code it looks like one of the 
m> optimisations I put in will fail if fields are stored with 
m> non-contiguous position info (ie the analyzer has messed with token 
m> position numbers so they overlap or have gaps like ..3,3,7,8,9,..).
m> I've now made the TokenSources code safe by default by assuming token 
m> position values are not contiguous and should not be used for sorting.
m> For those who know what they are doing  I have added a parameter to one 
m> of the methods to turn the optimisation back on if they can guarantee 
m> positions are contigous.

m> New code is at the same place:
m> http://www.inperspective.com/lucene/TokenSources.java

m> Cheers
m> Mark



m> ---------------------------------------------------------------------
m> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
m> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11162-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 13:24:59 2004
Return-Path: <lucene-user-return-11162-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49879 invoked from network); 11 Nov 2004 13:24:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 13:24:59 -0000
Received: (qmail 9332 invoked by uid 500); 11 Nov 2004 13:24:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 9294 invoked by uid 500); 11 Nov 2004 13:24:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9280 invoked by uid 99); 11 Nov 2004 13:24:55 -0000
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.215] (HELO web26004.mail.ukl.yahoo.com) (217.12.10.215)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 11 Nov 2004 05:24:55 -0800
Received: (qmail 59211 invoked by uid 60001); 11 Nov 2004 13:24:51 -0000
Message-ID: <20041111132451.59209.qmail@web26004.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26004.mail.ukl.yahoo.com via HTTP; Thu, 11 Nov 2004 13:24:51 GMT
Date: Thu, 11 Nov 2004 13:24:51 +0000 (GMT)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re[2]: Faster highlighting with TermPositionVectors (update)
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks, Max.
Another schoolboy error in TokenSources.java :) 
More haste, less speed required on my part.

I have updated my code and will post to website
tonight. This change doesn't appear to have made a
noticeable difference in performance but the code is
cleaner.

Cheers
Mark


	
	
		
___________________________________________________________ 
ALL-NEW Yahoo! Messenger - all new features - even more fun! http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11163-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 14:08:52 2004
Return-Path: <lucene-user-return-11163-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 70886 invoked from network); 11 Nov 2004 14:08:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 14:08:52 -0000
Received: (qmail 93379 invoked by uid 500); 11 Nov 2004 14:08:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92877 invoked by uid 500); 11 Nov 2004 14:08:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92864 invoked by uid 99); 11 Nov 2004 14:08:48 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.243] (HELO web12706.mail.yahoo.com) (216.136.173.243)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 11 Nov 2004 06:08:48 -0800
Received: (qmail 81610 invoked by uid 60001); 11 Nov 2004 14:08:44 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=oQREImguVRKqAeZwAotdhEJKm9vug5Ezu6yzXohKOigJUu57s93tgZmeF9xxAPvCbJRJX4helh/Fu4Vituu5MVhrXPPocwzIvBY376GRdeHykopNKCPzpzUjh868+7E4l4DKLnDHFJs064/oRK0JgkFURC238VOQ47HUVFSPoho=  ;
Message-ID: <20041111140844.81608.qmail@web12706.mail.yahoo.com>
Received: from [216.194.17.194] by web12706.mail.yahoo.com via HTTP; Thu, 11 Nov 2004 06:08:44 PST
Date: Thu, 11 Nov 2004 06:08:44 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Search scalability
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20041111065200.73552.qmail@web41014.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If you load it explicitly, then all 800 MB will make it into RAM.
It's easy to try, the API for this is super simple.

Otis

--- yahootintin-lucene@yahoo.com wrote:

> Does it take 800MB of RAM to load that index into a
> RAMDirectory?  Or are only some of the files loaded into RAM?
> 
> --- Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> 
> > Hello,
> > 
> > 100 parallel searches going against a single index on a single
> > disk
> > means a lot of disk seeks all happening at once.  One simple
> > way of
> > working around this is to load your FSDirectory into
> > RAMDirectory. 
> > This should be faster (could you report your
> > observations/comparisons?).  You can also try using ramfs if
> > you are
> > using Linux.
> > 
> > Otis
> > 
> > --- Ravi <ravi@htinc.com> wrote:
> > 
> > >  We have one large index for a document repository of
> > 800,000
> > > documents.
> > > The size of the index is 800MB. When we do searches against
> > the
> > > index,
> > > it takes 300-500ms for a single search. We wanted to test
> > the
> > > scalability and tried 100 parallel searches against the
> > index with
> > > the
> > > same query and the average response time was 13 seconds. We
> > used a
> > > simple IndexSearcher. Same searcher object was shared by all
> > the
> > > searches. I'm sure people have success in configuring lucene
> > for
> > > better
> > > scalability. Can somebody share their approach?
> > > 
> > > Thanks 
> > > Ravi. 
> > > 
> > >
> >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > > 
> > > 
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11164-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 14:25:01 2004
Return-Path: <lucene-user-return-11164-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88252 invoked from network); 11 Nov 2004 14:25:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 14:25:01 -0000
Received: (qmail 29142 invoked by uid 500); 11 Nov 2004 14:24:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29113 invoked by uid 500); 11 Nov 2004 14:24:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29087 invoked by uid 99); 11 Nov 2004 14:24:57 -0000
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [216.54.180.10] (HELO htexc.hq.htinc.com) (216.54.180.10)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 06:24:57 -0800
X-MIMEOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Search scalability
Date: Thu, 11 Nov 2004 09:24:46 -0500
Message-ID: <4568BE33B520DD43B7B24DE0B609B21544026B@htexc.hq.htinc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search scalability
Thread-Index: AcTH9/mMUVHBJ9aLQiOUS4DMrWYdugAAfvQg
From: "Ravi" <ravi@htinc.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks a lot. I'll use RAMDirectory and post my results. =20

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Thursday, November 11, 2004 9:09 AM
To: Lucene Users List
Subject: Re: Search scalability

If you load it explicitly, then all 800 MB will make it into RAM.
It's easy to try, the API for this is super simple.

Otis

--- yahootintin-lucene@yahoo.com wrote:

> Does it take 800MB of RAM to load that index into a RAMDirectory?  Or=20
> are only some of the files loaded into RAM?
>=20
> --- Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>=20
> > Hello,
> >=20
> > 100 parallel searches going against a single index on a single disk=20
> > means a lot of disk seeks all happening at once.  One simple way of=20
> > working around this is to load your FSDirectory into RAMDirectory.
> > This should be faster (could you report your=20
> > observations/comparisons?).  You can also try using ramfs if you are

> > using Linux.
> >=20
> > Otis
> >=20
> > --- Ravi <ravi@htinc.com> wrote:
> >=20
> > >  We have one large index for a document repository of
> > 800,000
> > > documents.
> > > The size of the index is 800MB. When we do searches against
> > the
> > > index,
> > > it takes 300-500ms for a single search. We wanted to test
> > the
> > > scalability and tried 100 parallel searches against the
> > index with
> > > the
> > > same query and the average response time was 13 seconds. We
> > used a
> > > simple IndexSearcher. Same searcher object was shared by all
> > the
> > > searches. I'm sure people have success in configuring lucene
> > for
> > > better
> > > scalability. Can somebody share their approach?
> > >=20
> > > Thanks
> > > Ravi.=20
> > >=20
> > >
> >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > >=20
> > >=20
> >=20
> >=20
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> >=20
> >=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11165-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 16:12:16 2004
Return-Path: <lucene-user-return-11165-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55528 invoked from network); 11 Nov 2004 16:12:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 16:12:16 -0000
Received: (qmail 99840 invoked by uid 500); 11 Nov 2004 16:12:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99809 invoked by uid 500); 11 Nov 2004 16:12:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99795 invoked by uid 99); 11 Nov 2004 16:12:11 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 08:12:11 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Thu, 11 Nov 2004 11:12:52 -0500
Message-ID: <03b301c4c809$4ba8a1a0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <63434C14F9A6F74CB36B85033E4C30CA5BFC53@hermes.corp.cyveillance.com>
Subject: Re: Acedemic Question About Indexing
Date: Thu, 11 Nov 2004 11:12:52 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 11 Nov 2004 16:12:52.0494 (UTC) FILETIME=[4BC8FAE0:01C4C809]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

40 Million! Wow. Ok this is the kind of answer I was looking for. The site I
am working on indexes maybe 1000 at any given time. I think I am ok with a
single index.

Thanks.

----- Original Message ----- 
From: "Will Allen" <wallen@Cyveillance.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, November 10, 2004 7:23 PM
Subject: RE: Acedemic Question About Indexing


I have an application that I run monthly that indexes 40 million documents
into 6 indexes, then uses a multisearcher.  The advantage for me is that I
can have multiple writers indexing 1/6 of that total data reducing the time
it takes to index by about 5X.

-----Original Message-----
From: Luke Shannon [mailto:lshannon@hypermedia.com]
Sent: Wednesday, November 10, 2004 2:39 PM
To: Lucene Users List
Subject: Re: Acedemic Question About Indexing


Don't worry, regardless of what I learn in this forum I am telling my
company to get me a copy of that bad boy when it comes out (which as far as
I am concerned can't be soon enough). I will pay for grama's myself.

I think I have reviewed the code you are referring to and have something
similar working in my own indexer (using the "uid"). All is well.

My stupid question for the day is why would you ever want multiple indexes
running if you can build one smart indexer that does everything as
efficiently as possible? Does the answer to this question move me to multi
threaded indexing territory?

Thanks,

Luke


----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, November 10, 2004 2:08 PM
Subject: Re: Acedemic Question About Indexing


> Uh, I hate to market it, but.... it's in the book.  But you don't have
> to wait for it, as there already is a Lucene demo that does what you
> described.  I am not sure if the demo always recreates the index or
> whether it deletes and re-adds only the new and modified files, but if
> it's the former, you would only need to modify the demo a little bit to
> check the timestamps of File objects and compare them to those stored
> in the index (if they are being stored - if not, you should add a field
> to hold that data)
>
> Otis
>
> --- Luke Shannon <lshannon@hypermedia.com> wrote:
>
> > I am working on debugging an existing Lucene implementation.
> >
> > Before I started, I built a demo to understand Lucene. In my demo I
> > indexed
> > the entire content hierarhcy all at once, and than optimize this
> > index and
> > used it for queries. It was time consuming but very simply.
> >
> > The code I am currently trying to fix indexes the content hierarchy
> > by
> > folder creating a seperate index for each one. Thus it ends up with a
> > bunch
> > of indexes. I still don't understand how this works (I am assuming
> > they get
> > merged someone that I have tracked down yet) but I have noticed it
> > doesn't
> > always index the right folder. This results in the users reporting
> > "inconsistant" behavior in searching after they make a change to a
> > document.
> > To keep things simiple I would like to remove all the logic that
> > figures out
> > which folder to index and just do them all (usually less than 1000
> > files) so
> > I end up with one index.
> >
> > Would indexing time be the only area I would be losing out in, or is
> > there
> > something more to the approach of creating multiple indexes and
> > merging
> > them.
> >
> > What is a good approach I can take to indexing a content hierarchy
> > composed
> > primarily of pdf, xsl, doc and xml where any of these documents can
> > be
> > changed several times a day?
> >
> > Thanks,
> >
> > Luke
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11166-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 16:54:52 2004
Return-Path: <lucene-user-return-11166-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89859 invoked from network); 11 Nov 2004 16:54:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 16:54:52 -0000
Received: (qmail 18289 invoked by uid 500); 11 Nov 2004 16:54:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18264 invoked by uid 500); 11 Nov 2004 16:54:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18250 invoked by uid 99); 11 Nov 2004 16:54:48 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [195.159.128.98] (HELO gard.biz) (195.159.128.98)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 11 Nov 2004 08:54:48 -0800
Received: (qmail 20095 invoked by uid 0); 11 Nov 2004 16:54:37 -0000
Received: from unknown (HELO ?127.0.0.1?) (gard@magentanews.com@195.159.128.110)
  by bundy with SMTP; 11 Nov 2004 16:54:37 -0000
Message-ID: <4193994B.4030300@magentanews.com>
Date: Thu, 11 Nov 2004 17:54:35 +0100
From: Gard Arneson Haugen <gard@magentanews.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Acedemic Question About Indexing
References: <63434C14F9A6F74CB36B85033E4C30CA5BFC53@hermes.corp.cyveillance.com>
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA5BFC53@hermes.corp.cyveillance.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Could I ask how  fast the search goes against this index, both for 
simple words and more advanced phrase and boolean searches?
And is there something smart you have done to make this go fast, both on 
the infrastructure or the system it selves?

Best regards,
Gard Arneson Haugen

Email : gard@magentanews.com
Mobile: +47 93 05 01 91 
Fax   : +47 21 95 51 99
Magenta News AS - Mllergata 8, 0179 Oslo



Will Allen wrote:

>I have an application that I run monthly that indexes 40 million documents into 6 indexes, then uses a multisearcher.  The advantage for me is that I can have multiple writers indexing 1/6 of that total data reducing the time it takes to index by about 5X.
>
>-----Original Message-----
>From: Luke Shannon [mailto:lshannon@hypermedia.com]
>Sent: Wednesday, November 10, 2004 2:39 PM
>To: Lucene Users List
>Subject: Re: Acedemic Question About Indexing
>
>
>Don't worry, regardless of what I learn in this forum I am telling my
>company to get me a copy of that bad boy when it comes out (which as far as
>I am concerned can't be soon enough). I will pay for grama's myself.
>
>I think I have reviewed the code you are referring to and have something
>similar working in my own indexer (using the "uid"). All is well.
>
>My stupid question for the day is why would you ever want multiple indexes
>running if you can build one smart indexer that does everything as
>efficiently as possible? Does the answer to this question move me to multi
>threaded indexing territory?
>
>Thanks,
>
>Luke
>
>
>----- Original Message ----- 
>From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>Sent: Wednesday, November 10, 2004 2:08 PM
>Subject: Re: Acedemic Question About Indexing
>
>
>  
>
>>Uh, I hate to market it, but.... it's in the book.  But you don't have
>>to wait for it, as there already is a Lucene demo that does what you
>>described.  I am not sure if the demo always recreates the index or
>>whether it deletes and re-adds only the new and modified files, but if
>>it's the former, you would only need to modify the demo a little bit to
>>check the timestamps of File objects and compare them to those stored
>>in the index (if they are being stored - if not, you should add a field
>>to hold that data)
>>
>>Otis
>>
>>--- Luke Shannon <lshannon@hypermedia.com> wrote:
>>
>>    
>>
>>>I am working on debugging an existing Lucene implementation.
>>>
>>>Before I started, I built a demo to understand Lucene. In my demo I
>>>indexed
>>>the entire content hierarhcy all at once, and than optimize this
>>>index and
>>>used it for queries. It was time consuming but very simply.
>>>
>>>The code I am currently trying to fix indexes the content hierarchy
>>>by
>>>folder creating a seperate index for each one. Thus it ends up with a
>>>bunch
>>>of indexes. I still don't understand how this works (I am assuming
>>>they get
>>>merged someone that I have tracked down yet) but I have noticed it
>>>doesn't
>>>always index the right folder. This results in the users reporting
>>>"inconsistant" behavior in searching after they make a change to a
>>>document.
>>>To keep things simiple I would like to remove all the logic that
>>>figures out
>>>which folder to index and just do them all (usually less than 1000
>>>files) so
>>>I end up with one index.
>>>
>>>Would indexing time be the only area I would be losing out in, or is
>>>there
>>>something more to the approach of creating multiple indexes and
>>>merging
>>>them.
>>>
>>>What is a good approach I can take to indexing a content hierarchy
>>>composed
>>>primarily of pdf, xsl, doc and xml where any of these documents can
>>>be
>>>changed several times a day?
>>>
>>>Thanks,
>>>
>>>Luke
>>>
>>>
>>>
>>>---------------------------------------------------------------------
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>>      
>>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>    
>>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11167-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 18:59:33 2004
Return-Path: <lucene-user-return-11167-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60238 invoked from network); 11 Nov 2004 18:59:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 18:59:33 -0000
Received: (qmail 69847 invoked by uid 500); 11 Nov 2004 18:59:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69823 invoked by uid 500); 11 Nov 2004 18:59:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69808 invoked by uid 99); 11 Nov 2004 18:59:29 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 10:59:29 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Bug in the BooleanQuery optimizer? ..TooManyClauses
Date: Thu, 11 Nov 2004 13:59:42 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA5BFC58@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Bug in the BooleanQuery optimizer? ..TooManyClauses
Thread-Index: AcTH5AVVyvW98iPLRQygcuf9XF+KsAAPCN5A
From: "Will Allen" <wallen@Cyveillance.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Any wildcard search will automatically expand your query to the number =
of terms it find in the index that suit the wildcard.

For example:

wild*, would become wild OR wilderness OR wildman etc for each of the =
terms that exist in your index.

It is because of this, that you quickly reach the 1024 limit of clauses. =
 I automatically set it to max int with the following line:

BooleanQuery.setMaxClauseCount( Integer.MAX_VALUE );


-----Original Message-----
From: Sanyi [mailto:need4sid@yahoo.com]
Sent: Thursday, November 11, 2004 6:46 AM
To: lucene-user@jakarta.apache.org
Subject: Bug in the BooleanQuery optimizer? ..TooManyClauses


Hi!

First of all, I've read about BooleanQuery$TooManyClauses, so I know =
that it has a 1024 Clauses
limit by default which is good enough for me, but I still think it works =
strange.

Example:
I have an index with about 20Million documents.
Let's say that there is about 3000 variants in the entire document set =
of this word mask: cab*
Let's say that about 500 documents are containing the word: spectrum
Now, when I search for "cab* AND spectrum", I don't expect it to throw =
an exception.
It should first restrict the search for the 500 documents containing the =
word "spectrum", then it
should collect the variants of "cab*" withing these documents, which =
turns out in two or three
variants of "cab*" (cable, cables, maybe some more) and the search =
should return let's say 10
documents.

Similar example: When I search for "cab* AND nonexistingword" it still =
throws a TooManyClauses
exception instead of saying "No results", since there is no =
"nonexistingword" in my document set,
so it doesn't even have to start collecting the variations of "cab*".

Is there any path for this issue?
Thank you for your time!

Sanyi
(I'm using: lucene 1.4.2)

p.s.: Sorry for re-sending this message, I was first sending it as an =
accidental reply to a wrong thread..


	=09
__________________________________=20
Do you Yahoo!?=20
Check out the new Yahoo! Front Page.=20
www.yahoo.com=20
=20


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11168-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 19:16:55 2004
Return-Path: <lucene-user-return-11168-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 69792 invoked from network); 11 Nov 2004 19:16:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 19:16:54 -0000
Received: (qmail 14406 invoked by uid 500); 11 Nov 2004 19:16:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14317 invoked by uid 500); 11 Nov 2004 19:16:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14261 invoked by uid 99); 11 Nov 2004 19:16:33 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 11:16:33 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Thu, 11 Nov 2004 14:17:13 -0500
Message-ID: <048c01c4c823$0c9e7ba0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <63434C14F9A6F74CB36B85033E4C30CA5BFC58@hermes.corp.cyveillance.com>
Subject: HTMLParser.getReader returning null
Date: Thu, 11 Nov 2004 14:17:13 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 11 Nov 2004 19:17:13.0935 (UTC) FILETIME=[0CEAEDF0:01C4C823]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello;

Things were working fine. I have been re-organizing my code to drop into QA
when I noticed I was no longer getting search results for my HTML files.
When I checked things out I confirmed I was still creating the Documents but
realized no content was being indexed.

 HTMLParser parser = new HTMLParser(f);

    // Add the tag-stripped contents as a Reader-valued Text field so it
will
    // get tokenized and indexed.
    doc.add(Field.Text("contents", parser.getReader()));
    System.out.println("The content is " + doc.get("contents"));

The SOP line above outputs a null where the contents used to be. Any seen
this before?

Thanks,

Luke

----- Original Message ----- 
From: "Will Allen" <wallen@Cyveillance.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, November 11, 2004 1:59 PM
Subject: RE: Bug in the BooleanQuery optimizer? ..TooManyClauses


Any wildcard search will automatically expand your query to the number of
terms it find in the index that suit the wildcard.

For example:

wild*, would become wild OR wilderness OR wildman etc for each of the terms
that exist in your index.

It is because of this, that you quickly reach the 1024 limit of clauses.  I
automatically set it to max int with the following line:

BooleanQuery.setMaxClauseCount( Integer.MAX_VALUE );


-----Original Message-----
From: Sanyi [mailto:need4sid@yahoo.com]
Sent: Thursday, November 11, 2004 6:46 AM
To: lucene-user@jakarta.apache.org
Subject: Bug in the BooleanQuery optimizer? ..TooManyClauses


Hi!

First of all, I've read about BooleanQuery$TooManyClauses, so I know that it
has a 1024 Clauses
limit by default which is good enough for me, but I still think it works
strange.

Example:
I have an index with about 20Million documents.
Let's say that there is about 3000 variants in the entire document set of
this word mask: cab*
Let's say that about 500 documents are containing the word: spectrum
Now, when I search for "cab* AND spectrum", I don't expect it to throw an
exception.
It should first restrict the search for the 500 documents containing the
word "spectrum", then it
should collect the variants of "cab*" withing these documents, which turns
out in two or three
variants of "cab*" (cable, cables, maybe some more) and the search should
return let's say 10
documents.

Similar example: When I search for "cab* AND nonexistingword" it still
throws a TooManyClauses
exception instead of saying "No results", since there is no
"nonexistingword" in my document set,
so it doesn't even have to start collecting the variations of "cab*".

Is there any path for this issue?
Thank you for your time!

Sanyi
(I'm using: lucene 1.4.2)

p.s.: Sorry for re-sending this message, I was first sending it as an
accidental reply to a wrong thread..



__________________________________
Do you Yahoo!?
Check out the new Yahoo! Front Page.
www.yahoo.com



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11169-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 19:21:37 2004
Return-Path: <lucene-user-return-11169-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71675 invoked from network); 11 Nov 2004 19:21:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 19:21:37 -0000
Received: (qmail 30900 invoked by uid 500); 11 Nov 2004 19:21:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30877 invoked by uid 500); 11 Nov 2004 19:21:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30864 invoked by uid 99); 11 Nov 2004 19:21:32 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 11:21:32 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Acedemic Question About Indexing
Date: Thu, 11 Nov 2004 14:21:49 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA5BFC59@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Acedemic Question About Indexing
Thread-Index: AcTIDKA0Fm3DWe4yRgy5NHuxCUGrgAAFDpXA
From: "Will Allen" <wallen@Cyveillance.com>
To: "Sodel Vazquez-Reyes" <S.Vazquez-reyes@postgrad.manchester.ac.uk>,
	"Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have a servlet that instanciates a multisearcher on 6 indexes:
(du -h)
7.2G    ./0
7.2G    ./1
7.2G    ./2
7.2G    ./3
7.2G    ./4
7.2G    ./5
43G     .

I recreate the index from scratch each month based upon a 50gig zip file =
with all of the 40 million documents.  I wanted to keep my indexing =
speed as low as possible, without hurting search performace too much, as =
each searcher allocates a certain amount of memory proportional to the =
number of terms it has.  A single large index has a lot of overlap in =
terms, so it needs less memory than multiple indexes.

Anyway, for indexing, I am able to index ~100 documents per second.  The =
total indexing process takes 2.5 days.  I have a powerful machine with 2 =
hyperthreaded processors (linux sees 4 processors) and 1GB ram.  I also =
have pretty fast SCSI disks.

I perform no updates or deletes on my indexes.

The indexing process equally divides the work amongst the indexers.  The =
bottleneck of the indexing process is not memory or CPU, rather disk IO =
of 6 writers.  If I had faster disks, I could create more indexers.

-----Original Message-----
From: Sodel Vazquez-Reyes
[mailto:S.Vazquez-reyes@postgrad.manchester.ac.uk]
Sent: Thursday, November 11, 2004 11:37 AM
To: Lucene Users List
Cc: Will Allen
Subject: Re: Acedemic Question About Indexing


Will,
could you give more details about your architecture?
-each time update o create new indexes
-data stored at each index
etc.

because it is quite interesting, and I would like to test it.

Sodel



Quoting Luke Shannon <lshannon@hypermedia.com>:

> 40 Million! Wow. Ok this is the kind of answer I was looking for. The =
site I
> am working on indexes maybe 1000 at any given time. I think I am ok =
with a
> single index.
>
> Thanks.
>
> ----- Original Message -----
> From: "Will Allen" <wallen@Cyveillance.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Wednesday, November 10, 2004 7:23 PM
> Subject: RE: Acedemic Question About Indexing
>
>
> I have an application that I run monthly that indexes 40 million =
documents
> into 6 indexes, then uses a multisearcher.  The advantage for me is =
that I
> can have multiple writers indexing 1/6 of that total data reducing the =
time
> it takes to index by about 5X.
>
> -----Original Message-----
> From: Luke Shannon [mailto:lshannon@hypermedia.com]
> Sent: Wednesday, November 10, 2004 2:39 PM
> To: Lucene Users List
> Subject: Re: Acedemic Question About Indexing
>
>
> Don't worry, regardless of what I learn in this forum I am telling my
> company to get me a copy of that bad boy when it comes out (which as =
far as
> I am concerned can't be soon enough). I will pay for grama's myself.
>
> I think I have reviewed the code you are referring to and have =
something
> similar working in my own indexer (using the "uid"). All is well.
>
> My stupid question for the day is why would you ever want multiple =
indexes
> running if you can build one smart indexer that does everything as
> efficiently as possible? Does the answer to this question move me to =
multi
> threaded indexing territory?
>
> Thanks,
>
> Luke
>
>
> ----- Original Message -----
> From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Wednesday, November 10, 2004 2:08 PM
> Subject: Re: Acedemic Question About Indexing
>
>
>> Uh, I hate to market it, but.... it's in the book.  But you don't =
have
>> to wait for it, as there already is a Lucene demo that does what you
>> described.  I am not sure if the demo always recreates the index or
>> whether it deletes and re-adds only the new and modified files, but =
if
>> it's the former, you would only need to modify the demo a little bit =
to
>> check the timestamps of File objects and compare them to those stored
>> in the index (if they are being stored - if not, you should add a =
field
>> to hold that data)
>>
>> Otis
>>
>> --- Luke Shannon <lshannon@hypermedia.com> wrote:
>>
>> > I am working on debugging an existing Lucene implementation.
>> >
>> > Before I started, I built a demo to understand Lucene. In my demo I
>> > indexed
>> > the entire content hierarhcy all at once, and than optimize this
>> > index and
>> > used it for queries. It was time consuming but very simply.
>> >
>> > The code I am currently trying to fix indexes the content hierarchy
>> > by
>> > folder creating a seperate index for each one. Thus it ends up with =
a
>> > bunch
>> > of indexes. I still don't understand how this works (I am assuming
>> > they get
>> > merged someone that I have tracked down yet) but I have noticed it
>> > doesn't
>> > always index the right folder. This results in the users reporting
>> > "inconsistant" behavior in searching after they make a change to a
>> > document.
>> > To keep things simiple I would like to remove all the logic that
>> > figures out
>> > which folder to index and just do them all (usually less than 1000
>> > files) so
>> > I end up with one index.
>> >
>> > Would indexing time be the only area I would be losing out in, or =
is
>> > there
>> > something more to the approach of creating multiple indexes and
>> > merging
>> > them.
>> >
>> > What is a good approach I can take to indexing a content hierarchy
>> > composed
>> > primarily of pdf, xsl, doc and xml where any of these documents can
>> > be
>> > changed several times a day?
>> >
>> > Thanks,
>> >
>> > Luke
>> >
>> >
>> >


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11170-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 19:57:40 2004
Return-Path: <lucene-user-return-11170-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84754 invoked from network); 11 Nov 2004 19:57:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 19:57:40 -0000
Received: (qmail 80757 invoked by uid 500); 11 Nov 2004 19:57:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 80727 invoked by uid 500); 11 Nov 2004 19:57:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 80712 invoked by uid 99); 11 Nov 2004 19:57:35 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.211] (HELO web21325.mail.yahoo.com) (216.136.175.211)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 11 Nov 2004 11:57:35 -0800
Received: (qmail 70525 invoked by uid 60001); 11 Nov 2004 19:57:32 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=49NXVKXTDGrof1318Vyp0ziWolS2Q40UJe4pBDRAOuN/43sV3O5H0J/xV6PlA/hg/gVzlMCvgDtO5ZbZwksOvLdXWFMhsy5CuOPwmJNtcwCPTldwk4KCPQ7FBJNy+LJvRfRK6hHSiIjQm83UXAQzQiG5PqtCHSRo8iEMZdmElLk=  ;
Message-ID: <20041111195732.70523.qmail@web21325.mail.yahoo.com>
Received: from [81.182.58.251] by web21325.mail.yahoo.com via HTTP; Thu, 11 Nov 2004 11:57:32 PST
Date: Thu, 11 Nov 2004 11:57:32 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: RE: Bug in the BooleanQuery optimizer? ..TooManyClauses
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA5BFC58@hermes.corp.cyveillance.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yes, I understand all of this, but I don't want to set it to MaxInt, since it can easily lead to
(even accidental) DoS attacks.

What I'm saying is that there is no reason for the optimizer to expand wild* to more than 1024
variations when I search for "somerareword AND wild*", since somerareword is only present in let's
say 100 documents, so wild* should only expand to words beginning with "wild" in those 100
documents, then it should work fine with the default 1024 clause limit.

But it doesn't, so I can choose between unuseable queries or accidental DoS attacks.

--- Will Allen <wallen@Cyveillance.com> wrote:

> Any wildcard search will automatically expand your query to the number of terms it find in the
> index that suit the wildcard.
> 
> For example:
> 
> wild*, would become wild OR wilderness OR wildman etc for each of the terms that exist in your
> index.
> 
> It is because of this, that you quickly reach the 1024 limit of clauses.  I automatically set it
> to max int with the following line:
> 
> BooleanQuery.setMaxClauseCount( Integer.MAX_VALUE );
> 
> 
> -----Original Message-----
> From: Sanyi [mailto:need4sid@yahoo.com]
> Sent: Thursday, November 11, 2004 6:46 AM
> To: lucene-user@jakarta.apache.org
> Subject: Bug in the BooleanQuery optimizer? ..TooManyClauses
> 
> 
> Hi!
> 
> First of all, I've read about BooleanQuery$TooManyClauses, so I know that it has a 1024 Clauses
> limit by default which is good enough for me, but I still think it works strange.
> 
> Example:
> I have an index with about 20Million documents.
> Let's say that there is about 3000 variants in the entire document set of this word mask: cab*
> Let's say that about 500 documents are containing the word: spectrum
> Now, when I search for "cab* AND spectrum", I don't expect it to throw an exception.
> It should first restrict the search for the 500 documents containing the word "spectrum", then
> it
> should collect the variants of "cab*" withing these documents, which turns out in two or three
> variants of "cab*" (cable, cables, maybe some more) and the search should return let's say 10
> documents.
> 
> Similar example: When I search for "cab* AND nonexistingword" it still throws a TooManyClauses
> exception instead of saying "No results", since there is no "nonexistingword" in my document
> set,
> so it doesn't even have to start collecting the variations of "cab*".
> 
> Is there any path for this issue?
> Thank you for your time!
> 
> Sanyi
> (I'm using: lucene 1.4.2)
> 
> p.s.: Sorry for re-sending this message, I was first sending it as an accidental reply to a
> wrong thread..
> 
> 
> 		
> __________________________________ 
> Do you Yahoo!? 
> Check out the new Yahoo! Front Page. 
> www.yahoo.com 
>  
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 



		
__________________________________ 
Do you Yahoo!? 
Check out the new Yahoo! Front Page. 
www.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11171-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 20:16:42 2004
Return-Path: <lucene-user-return-11171-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98770 invoked from network); 11 Nov 2004 20:16:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 20:16:42 -0000
Received: (qmail 22445 invoked by uid 500); 11 Nov 2004 20:16:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22413 invoked by uid 500); 11 Nov 2004 20:16:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22400 invoked by uid 99); 11 Nov 2004 20:16:36 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.22] (HELO smtp-vbr2.xs4all.nl) (194.109.24.22)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 12:16:36 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr2.xs4all.nl (8.12.11/8.12.11) with ESMTP id iABKGVss042998
	for <lucene-user@jakarta.apache.org>; Thu, 11 Nov 2004 21:16:31 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Query#rewrite Question
Date: Thu, 11 Nov 2004 09:10:32 +0100
User-Agent: KMail/1.5.4
References: <005b01c4c799$674e1270$32e0fcca@satoshiobtu4n6>
In-Reply-To: <005b01c4c799$674e1270$32e0fcca@satoshiobtu4n6>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411110910.32745.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Thursday 11 November 2004 03:51, Satoshi Hasegawa wrote:
> Hello,
> 
> Our program accepts input in the form of Lucene query syntax from the user, 
> but we wish to perform additional tasks such as thesaurus expansion. So I 
> want to manipulate the Query object that results from parsing.
> 
> My question is, is the result of the Query#rewrite method guaranteed to be 
> either a TermQuery, a PhraseQuery, or a BooleanQuery, and if it is a 
> BooleanQuery, do all the constituent clauses also reduce to one of the above 
> three classes? If not, what if the original Query object was the one that 
> was obtained from QueryParser#parse method? Can I assume the above in this 
> restricted case?
>
> I experimented with the current version, and the above seems to be positive 
> in this version; I'm asking if this could change in the future. Thank you. 
 
In general, a Query should either rewrite to another query, or provide a
Weight. During search, the Weight then provides a Scorer to score the docs.

The only other type of query currently available is SpanQuery, which is
a generalization of PhraseQuery. It does not rewrite and provides a Weight.

However, the current QueryParser does not have support for SpanQuery.
So, as long as the QueryParser does not support more than the current types
of queries, and you only use the QueryParser to obtain queries, all the
constituent clauses will reduce as you indicate above.

SpanQuery could be useful for thesaurus expansion. The generalization
it provides is that it allows nested distance queries. For example, in:
"word1 word2"~2
word2 can expanded to:
word2 or "word3 word4"~4
leading to a query that is not supported by the current QueryParser:
"word1 (word 2 or "word3 word4"~4)"~2

SpanQueries can also enforce an order on the matching subqueries,
but that is difficult to express in the current query syntax.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11172-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 20:48:37 2004
Return-Path: <lucene-user-return-11172-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24361 invoked from network); 11 Nov 2004 20:48:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 20:48:36 -0000
Received: (qmail 74040 invoked by uid 500); 11 Nov 2004 20:48:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 73999 invoked by uid 500); 11 Nov 2004 20:48:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73962 invoked by uid 99); 11 Nov 2004 20:48:30 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.21] (HELO mailout10.sul.t-online.com) (194.25.134.21)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 12:48:30 -0800
Received: from fwd06.aul.t-online.de 
	by mailout10.sul.t-online.com with smtp 
	id 1CSLrl-0001Xf-02; Thu, 11 Nov 2004 21:48:25 +0100
Received: from pD9EBF5D1.dip.t-dialin.net (bN-0jvZJQe15wdkGP0yYlK9RwT3+dj8+R66d7VFxQqpK5+gAtp-z4v@[217.235.245.209]) by fmrl06.sul.t-online.com
	with esmtp id 1CSLre-0m1VZI0; Thu, 11 Nov 2004 21:48:18 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Bug in the BooleanQuery optimizer? ..TooManyClauses
Date: Thu, 11 Nov 2004 21:48:42 +0100
User-Agent: KMail/1.7.1
References: <20041111195732.70523.qmail@web21325.mail.yahoo.com>
In-Reply-To: <20041111195732.70523.qmail@web21325.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411112148.42529@danielnaber.de>
X-ID: bN-0jvZJQe15wdkGP0yYlK9RwT3+dj8+R66d7VFxQqpK5+gAtp-z4v@t-dialin.net
X-TOI-MSGID: 8b1d5645-9988-4bf4-a9a7-6316a2c9770b
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thursday 11 November 2004 20:57, Sanyi wrote:

> What I'm saying is that there is no reason for the optimizer to expand
> wild* to more than 1024 variations

That's the point: there is no query optimizer in Lucene.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11173-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 23:16:19 2004
Return-Path: <lucene-user-return-11173-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95443 invoked from network); 11 Nov 2004 23:16:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 23:16:19 -0000
Received: (qmail 19203 invoked by uid 500); 11 Nov 2004 23:16:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19176 invoked by uid 500); 11 Nov 2004 23:16:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19159 invoked by uid 99); 11 Nov 2004 23:16:15 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [192.18.42.14] (HELO nwkea-mail-2.sun.com) (192.18.42.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 15:16:15 -0800
Received: from phys-d3-ha21sca-1 ([129.145.155.163])
	by nwkea-mail-2.sun.com (8.12.10/8.12.9) with ESMTP id iABNGC7q012623
	for <lucene-user@jakarta.apache.org>; Thu, 11 Nov 2004 15:16:12 -0800 (PST)
Received: from conversion-daemon.ha21sca-mail1.sfbay.sun.com by
 ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 id <0I7100K01F9QSQ@ha21sca-mail1.sfbay.sun.com>
 (original mail from Hetan.Shah@Sun.COM) for lucene-user@jakarta.apache.org;
 Thu, 11 Nov 2004 15:16:12 -0800 (PST)
Received: from [127.0.0.1] (d-mpk24-41-88.SFBay.Sun.COM [129.146.41.88])
 by ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 with ESMTP id <0I71008BPFATR7@ha21sca-mail1.sfbay.sun.com> for
 lucene-user@jakarta.apache.org; Thu, 11 Nov 2004 15:16:12 -0800 (PST)
Date: Thu, 11 Nov 2004 15:15:58 -0800
From: Hetan Shah <Hetan.Shah@Sun.COM>
Subject: weird things in 1.4.2 build
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id: <4193F2AE.70603@sun.com>
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7)
 Gecko/20040616
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi guys,

Thanks for the fantastic mailing list. Where all the questions get 
answered.
Guys I have upgraded my installation from 1.3.final to 1.4.2 and now 
when I try to index the files using IndexHTML the commnad just hangs on 
the prompt or would parse some 4 - 5 files and would simply hang. Any 
idea what could be the issue?

TIA,
-H


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11174-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 23:35:07 2004
Return-Path: <lucene-user-return-11174-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2397 invoked from network); 11 Nov 2004 23:35:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 23:35:06 -0000
Received: (qmail 41954 invoked by uid 500); 11 Nov 2004 23:35:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41928 invoked by uid 500); 11 Nov 2004 23:35:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41915 invoked by uid 99); 11 Nov 2004 23:35:02 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [192.18.98.36] (HELO brmea-mail-4.sun.com) (192.18.98.36)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 15:35:02 -0800
Received: from phys-d3-ha21sca-1 ([129.145.155.163])
	by brmea-mail-4.sun.com (8.12.10/8.12.9) with ESMTP id iABNYXNP007743
	for <lucene-user@jakarta.apache.org>; Thu, 11 Nov 2004 16:34:58 -0700 (MST)
Received: from conversion-daemon.ha21sca-mail1.sfbay.sun.com by
 ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 id <0I7100501G1S79@ha21sca-mail1.sfbay.sun.com>
 (original mail from Hetan.Shah@Sun.COM) for lucene-user@jakarta.apache.org;
 Thu, 11 Nov 2004 15:34:39 -0800 (PST)
Received: from [127.0.0.1] (d-mpk24-41-88.SFBay.Sun.COM [129.146.41.88])
 by ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 with ESMTP id <0I71008XHG5NR7@ha21sca-mail1.sfbay.sun.com> for
 lucene-user@jakarta.apache.org; Thu, 11 Nov 2004 15:34:39 -0800 (PST)
Date: Thu, 11 Nov 2004 15:34:29 -0800
From: Hetan Shah <Hetan.Shah@Sun.COM>
Subject: getting error message
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id: <4193F705.3030103@sun.com>
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7)
 Gecko/20040616
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Does anyone know what does the following error message mean?


TIA.
-H

root cause

java.lang.NullPointerException
	at org.apache.jsp.searchResults_jsp._jspService(searchResults_jsp.java:627)
	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:137)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
	at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:210)
	at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:295)
	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:247)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:193)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:256)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at org.apache.catalina.core.StandardContext.invoke(StandardContext.java:2417)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:180)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherValve.java:171)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:172)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:641)
	at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:174)
	at org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext.invokeNext(StandardPipeline.java:643)
	at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:480)
	at org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
	at org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java:193)
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:781)
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.processConnection(Http11Protocol.java:549)
	at org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java:589)
	at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:666)
	at java.lang.Thread.run(Thread.java:534)



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11175-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 23:53:14 2004
Return-Path: <lucene-user-return-11175-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8315 invoked from network); 11 Nov 2004 23:53:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 23:53:14 -0000
Received: (qmail 66366 invoked by uid 500); 11 Nov 2004 23:53:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66339 invoked by uid 500); 11 Nov 2004 23:53:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66326 invoked by uid 99); 11 Nov 2004 23:53:08 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 15:53:08 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Thu, 11 Nov 2004 18:53:49 -0500
Message-ID: <054001c4c849$b0b02c40$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Lucene : avoiding locking
Date: Thu, 11 Nov 2004 18:53:49 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 11 Nov 2004 23:53:49.0541 (UTC) FILETIME=[B0AB7150:01C4C849]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi All;

I have hit a snag in my Lucene integration and don't know what to do.

 My company has a content management product. Each time someone changes the
 directory structure or a file with in it that portion of the site needs to
 be re-indexed so the changes are reflected in future searches (indexing
must
 happen during run time).

 I have written a Indexer class with a static Index() method. The idea is
too
 call the method every time something changes and the index needs to be
 re-examined. I am hoping the logic put in by Doug Cutting surrounding the
 UID will make indexing efficient enough to be called so frequently.

 This class works great when I tested it on my own little site (I have about
 2000 file). But when I drop the functionality into the QA environment I get
 a locking error.

 I can't access the stack trace, all I can get at is a log file the
 application writes too. Here is the section my class wrote. It was right in
 the middle of indexing and bang lock issue.

 I don't know if the problem is in my code or something in the existing
 application.

 Error Message:
 ENTER|SearchEventProcessor.visit(ContentNodeDeleteEvent)
 |INFO|INDEXING INFO: Start Indexing new content.
 |INFO|INDEXING INFO: Index Folder Did Not Exist. Start Creation Of New
Index
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING INFO: Beginnging Incremental update comparisions
 |INFO|INDEXING ERROR: Unable to index new content Lock obtain timed out:

Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
 10f7fe8-write.lock
 |ENTER|UpdateCacheEventProcessor.visit(ContentNodeDeleteEvent)

 Here is my code. You will recognize it pretty much as the IndexHTML class
 from the Lucene demo written by Doug Cutting. I have put a ton of comments
 in a attempt to understand what is going on.

 Any help would be appreciated.

 Luke

 package com.fbhm.bolt.search;

 /*
  * Created on Nov 11, 2004
  *
  * This class will create a single index file for the Content
  * Management System (CMS). It contains logic to ensure
  * indexing is done "intelligently". Based on IndexHTML.java
  * from the demo folder that ships with Lucene
  */

 import java.io.File;
 import java.io.IOException;
 import java.util.Arrays;
 import java.util.Date;

 import org.apache.lucene.analysis.standard.StandardAnalyzer;
 import org.apache.lucene.document.Document;
 import org.apache.lucene.index.IndexReader;
 import org.apache.lucene.index.IndexWriter;
 import org.apache.lucene.index.Term;
 import org.apache.lucene.index.TermEnum;
 import org.pdfbox.searchengine.lucene.LucenePDFDocument;
 import org.apache.lucene.demo.HTMLDocument;

 import com.alaia.common.debug.Trace;
 import com.alaia.common.util.AppProperties;

 /**
  * @author lshannon Description: <br
  *   This class is used to index a content folder. It contains logic to
  *   ensure only new or documents that have been modified since the last
  *   search are indexed. <br
  *   Based on code writen by Doug Cutting in the IndexHTML class found in
  *   the Lucene demo
  */
 public class Indexer {
  //true during deletion pass, this is when the index already exists
  private static boolean deleting = false;

  //object to read existing indexes
  private static IndexReader reader;

  //object to write to the index folder
  private static IndexWriter writer;

  //this will be used to write the index file
  private static TermEnum uidIter;

  /*
   * This static method does all the work, the end result is an up-to-date
 index folder
  */
  public static void Index() {
   //we will assume to start the index has been created
   boolean create = true;
   //set the name of the index file
   String indexFileLocation =
 AppProperties.getPropertyAsString("bolt.search.siteIndex.index.root");
   //set the name of the content folder
   String contentFolderLocation =
 AppProperties.getPropertyAsString("site.root");
   //manage whether the index needs to be created or not
   File index = new File(indexFileLocation);
   File root = new File(contentFolderLocation);
   //the index file indicated exists, we need an incremental update of the
   // index
   if (index.exists()) {
    Trace.TRACE("INDEXING INFO: An index folder exists at: " +
 indexFileLocation);
    deleting = true;
    create = false;
    try {
     //this version of index docs is able to execute the incremental
     // update
     indexDocs(root, indexFileLocation, create);
    } catch (Exception e) {
     //we were unable to do the incremental update
     Trace.TRACE("INDEXING ERROR: Unable to execute incremental update "
         + e.getMessage());
    }
    //after exiting this loop the index should be current with content
    Trace.TRACE("INDEXING INFO: Incremental update completed.");
   }
   try {
    //create the writer
    writer = new IndexWriter(index, new StandardAnalyzer(), create);
    //configure the writer
    writer.mergeFactor = 10000;
    writer.maxFieldLength = 100000;
    try {
     //get the start date
     Date start = new Date();
     //call the indexDocs method, this time we will add new
     // documents
     Trace.TRACE("INDEXING INFO: Start Indexing new content.");
     indexDocs(root, indexFileLocation, create);
     Trace.TRACE("INDEXING INFO: Indexing new content complete.");
     //optimize the index
     writer.optimize();
     //close the writer
     writer.close();
     //get the end date
     Date end = new Date();
     long totalTime = end.getTime() - start.getTime();
     Trace.TRACE("INDEXING INFO: All Indexing Operations Completed in "
         + totalTime + " milliseconds");
    } catch (Exception e1) {
     //unable to add new documents
     Trace.TRACE("INDEXING ERROR: Unable to index new content "
         + e1.getMessage());
    }
   } catch (IOException e) {
    Trace.TRACE("INDEXING ERROR: Unable to create IndexWriter "
      + e.getMessage());
   }
  }

  /*
   * Walk directory hierarchy in uid order, while keeping uid iterator from
 /*
   * existing index in sync. Mismatches indicate one of: (a) old documents
to
 /*
   * be deleted; (b) unchanged documents, to be left alone; or (c) new /*
   * documents, to be indexed.
   */

  private static void indexDocs(File file, String index, boolean create)
    throws Exception {
   //the index already exists we do an incremental update
   if (!create) {
    Trace.TRACE("INDEXING INFO: Incremental Update Request Confirmed");
    //open existing index
    reader = IndexReader.open(index);
    //this gets an enummeration of uid terms
    uidIter = reader.terms(new Term("uid", ""));
    //jump to the index method that does the work
    //this will use the Iteration above and does
    //all the "smart" indexing
    indexDocs(file);
    //this will be true everytime the index already existed
    //we are not going to delete documents that are old
    if (deleting) {
     Trace.TRACE("INDEXING INFO: Deleting Old Content Phase Started. All
 Deleted Docs will be listed.");
     while (uidIter.term() != null
       && uidIter.term().field() == "uid") {
      //basically we are deleting all the document we have
      // indexed before
      Trace.TRACE("INDEXING INFO: Deleting document "
        + HTMLDocument.uid2url(uidIter.term().text()));
      //delete the term from the reader
      reader.delete(uidIter.term());
      //go to the nextfield
      uidIter.next();
     }
     Trace.TRACE("INDEXING INFO: Deleting Old Content Phase Completed");
     //turn off the deleting flag
     deleting = false;
    }//close the deleting branch
    //close the enummeration
    uidIter.close(); // close uid iterator
    //close the reader
    reader.close(); // close existing index

   }
   //we go here is the index already existed
   else {
    Trace.TRACE("INDEXING INFO: Index Folder Did Not Exist. Start Creation
Of
 New Index");
    // don't have exisiting
    indexDocs(file);
   }
  }

  private static void indexDocs(File file) throws Exception {
   //check if we are at the top of a directory
   if (file.isDirectory()) {
    //get a list of the files
    String[] files = file.list();
    //sort them
    Arrays.sort(files);
    //index each file in the directory recursively
    //we keep repeating this logic until we hit a
    //file
    for (int i = 0; i < files.length; i++)
     //pass in the parent directory and the current file
     //into the file constructor and index
     indexDocs(new File(file, files[i]));

   }
   //we have an actual file, so we need to consider the
   //file extensions so the correct Document is created
   else if (file.getPath().endsWith(".html")
     || file.getPath().endsWith(".htm")
     || file.getPath().endsWith(".txt")
     || file.getPath().endsWith(".doc")
     || file.getPath().endsWith(".xml")
     || file.getPath().endsWith(".pdf")) {

    //if this is reached it means we were in the midst
    //of an incremental update
    if (uidIter != null) {
     //get the uid for the document we are on
     String uid = HTMLDocument.uid(file);
     //now compare this document to the one we have in the
     //enummeration of terms.
     //if the term in the enummeration is less than the
     //term we are on it must be deleted (if we are indeed
     //doing an incrementatal update)
     Trace.TRACE("INDEXING INFO: Beginnging Incremental update
 comparisions");
     while (uidIter.term() != null
       && uidIter.term().field() == "uid"
       && uidIter.term().text().compareTo(uid) < 0) {
      //delete stale docs
      if (deleting) {
       reader.delete(uidIter.term());
      }
      uidIter.next();
     }
     //if the terms are equal there is no change with this document
     //we keep it as is
     if (uidIter.term() != null && uidIter.term().field() == "uid"
       && uidIter.term().text().compareTo(uid) == 0) {
      uidIter.next();
     }
     //if we are not deleting and the document was not there
     //it means we didn't have this document on the last index
     //and we should add it
     else if (!deleting) {
      if (file.getPath().endsWith(".pdf")) {
       Document doc = LucenePDFDocument.getDocument(file);
       Trace.TRACE("INDEXING INFO: Adding new document to the existing
index:
 "
           + doc.get("url"));
       writer.addDocument(doc);
      } else if (file.getPath().endsWith(".xml")) {
       Document doc = XMLDocument.Document(file);
       Trace.TRACE("INDEXING INFO: Adding new document to the existing
index:
 "
           + doc.get("url"));
       writer.addDocument(doc);
      } else {
       Document doc = HTMLDocument.Document(file);
       Trace.TRACE("INDEXING INFO: Adding new document to the existing
index:
 "
           + doc.get("url"));
       writer.addDocument(doc);
      }
     }
    }//end the if for an incremental update
    //we are creating a new index, add all document types
    else {
     if (file.getPath().endsWith(".pdf")) {
      Document doc = LucenePDFDocument.getDocument(file);
      Trace.TRACE("INDEXING INFO: Adding a new document to the new index: "
          + doc.get("url"));
      writer.addDocument(doc);
     } else if (file.getPath().endsWith(".xml")) {
      Document doc = XMLDocument.Document(file);
      Trace.TRACE("INDEXING INFO: Adding a new document to the new index: "
          + doc.get("url"));
      writer.addDocument(doc);
     } else {
      Document doc = HTMLDocument.Document(file);
      Trace.TRACE("INDEXING INFO: Adding a new document to the new index: "
          + doc.get("url"));
      writer.addDocument(doc);
     }//close the else
    }//close the else for a new index
   }//close the else if to handle file types
  }//close the indexDocs method

 }


 ----- Original Message ----- 
 From: "Craig McClanahan" <craigmcc@gmail.com
 To: "Jakarta Commons Users List" <commons-user@jakarta.apache.org
 Sent: Thursday, November 11, 2004 6:13 PM
 Subject: Re: avoiding locking


  In order to get any useful help, it would be nice to know what you are
  trying to do, and (most importantly) what commons component is giving
  you the problem :-).  The traditional approach is to put a prefix on
  your subject line -- for commons package "foo" it would be:

    [foo] avoiding locking

  It's also generally helpful to see the entire stack trace, not just
  the exception message itself.

  Craig


  On Thu, 11 Nov 2004 17:27:19 -0500, Luke Shannon
  <lshannon@hypermedia.com wrote:
   What can I do to avoid locking issues?

   Unable to execute incremental update Lock obtain timed out:

Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
 10f7fe8-write.lock

   Thanks,

   Luke


  ---------------------------------------------------------------------
  To unsubscribe, e-mail: commons-user-unsubscribe@jakarta.apache.org
  For additional commands, e-mail: commons-user-help@jakarta.apache.org





 ---------------------------------------------------------------------
 To unsubscribe, e-mail: commons-user-unsubscribe@jakarta.apache.org
 For additional commands, e-mail: commons-user-help@jakarta.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11176-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 23:57:03 2004
Return-Path: <lucene-user-return-11176-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9845 invoked from network); 11 Nov 2004 23:57:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 23:57:03 -0000
Received: (qmail 71759 invoked by uid 500); 11 Nov 2004 23:56:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71738 invoked by uid 500); 11 Nov 2004 23:56:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71724 invoked by uid 99); 11 Nov 2004 23:56:58 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.218.93.5] (HELO web41006.mail.yahoo.com) (66.218.93.5)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 11 Nov 2004 15:56:58 -0800
Received: (qmail 83808 invoked by uid 60001); 11 Nov 2004 23:56:55 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=BGwFhqvtVPFTPC+1s6trt4kgQ6mx19n4TU/WwfgL0FvcpFvppfjlzJKF+w2jW9pdK9qbv0wr4f6SQ/BGVUZIu5/roTXgFG9xJ8Fs6NPTDhRNxHi3hMCchoP9fC+eO5yYj73bXs4KjePm5rsH86QZ4bDnTVMHloEI0AfLX5yIIII=  ;
Message-ID: <20041111235654.83806.qmail@web41006.mail.yahoo.com>
Received: from [199.181.134.220] by web41006.mail.yahoo.com via HTTP; Thu, 11 Nov 2004 15:56:54 PST
Date: Thu, 11 Nov 2004 15:56:54 -0800 (PST)
From: <yahootintin-lucene@yahoo.com>
Reply-To: yahootintin-lucene@yahoo.com
Subject: Re: Lucene : avoiding locking
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <054001c4c849$b0b02c40$7703d00a@hypermedia.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm working on a similar project...
Make sure that only one call to the index method is occuring at
a time.  Synchronizing that method should do it.

--- Luke Shannon <lshannon@hypermedia.com> wrote:

> Hi All;
> 
> I have hit a snag in my Lucene integration and don't know what
> to do.
> 
>  My company has a content management product. Each time
> someone changes the
>  directory structure or a file with in it that portion of the
> site needs to
>  be re-indexed so the changes are reflected in future searches
> (indexing
> must
>  happen during run time).
> 
>  I have written a Indexer class with a static Index() method.
> The idea is
> too
>  call the method every time something changes and the index
> needs to be
>  re-examined. I am hoping the logic put in by Doug Cutting
> surrounding the
>  UID will make indexing efficient enough to be called so
> frequently.
> 
>  This class works great when I tested it on my own little site
> (I have about
>  2000 file). But when I drop the functionality into the QA
> environment I get
>  a locking error.
> 
>  I can't access the stack trace, all I can get at is a log
> file the
>  application writes too. Here is the section my class wrote.
> It was right in
>  the middle of indexing and bang lock issue.
> 
>  I don't know if the problem is in my code or something in the
> existing
>  application.
> 
>  Error Message:
>  ENTER|SearchEventProcessor.visit(ContentNodeDeleteEvent)
>  |INFO|INDEXING INFO: Start Indexing new content.
>  |INFO|INDEXING INFO: Index Folder Did Not Exist. Start
> Creation Of New
> Index
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING INFO: Beginnging Incremental update
> comparisions
>  |INFO|INDEXING ERROR: Unable to index new content Lock obtain
> timed out:
> 
>
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
>  10f7fe8-write.lock
> 
> |ENTER|UpdateCacheEventProcessor.visit(ContentNodeDeleteEvent)
> 
>  Here is my code. You will recognize it pretty much as the
> IndexHTML class
>  from the Lucene demo written by Doug Cutting. I have put a
> ton of comments
>  in a attempt to understand what is going on.
> 
>  Any help would be appreciated.
> 
>  Luke
> 
>  package com.fbhm.bolt.search;
> 
>  /*
>   * Created on Nov 11, 2004
>   *
>   * This class will create a single index file for the Content
>   * Management System (CMS). It contains logic to ensure
>   * indexing is done "intelligently". Based on IndexHTML.java
>   * from the demo folder that ships with Lucene
>   */
> 
>  import java.io.File;
>  import java.io.IOException;
>  import java.util.Arrays;
>  import java.util.Date;
> 
>  import org.apache.lucene.analysis.standard.StandardAnalyzer;
>  import org.apache.lucene.document.Document;
>  import org.apache.lucene.index.IndexReader;
>  import org.apache.lucene.index.IndexWriter;
>  import org.apache.lucene.index.Term;
>  import org.apache.lucene.index.TermEnum;
>  import org.pdfbox.searchengine.lucene.LucenePDFDocument;
>  import org.apache.lucene.demo.HTMLDocument;
> 
>  import com.alaia.common.debug.Trace;
>  import com.alaia.common.util.AppProperties;
> 
>  /**
>   * @author lshannon Description: <br
>   *   This class is used to index a content folder. It
> contains logic to
>   *   ensure only new or documents that have been modified
> since the last
>   *   search are indexed. <br
>   *   Based on code writen by Doug Cutting in the IndexHTML
> class found in
>   *   the Lucene demo
>   */
>  public class Indexer {
>   //true during deletion pass, this is when the index already
> exists
>   private static boolean deleting = false;
> 
>   //object to read existing indexes
>   private static IndexReader reader;
> 
>   //object to write to the index folder
>   private static IndexWriter writer;
> 
>   //this will be used to write the index file
>   private static TermEnum uidIter;
> 
>   /*
>    * This static method does all the work, the end result is
> an up-to-date
>  index folder
>   */
>   public static void Index() {
>    //we will assume to start the index has been created
>    boolean create = true;
>    //set the name of the index file
>    String indexFileLocation =
> 
>
AppProperties.getPropertyAsString("bolt.search.siteIndex.index.root");
>    //set the name of the content folder
>    String contentFolderLocation =
>  AppProperties.getPropertyAsString("site.root");
>    //manage whether the index needs to be created or not
>    File index = new File(indexFileLocation);
>    File root = new File(contentFolderLocation);
>    //the index file indicated exists, we need an incremental
> update of the
>    // index
>    if (index.exists()) {
>     Trace.TRACE("INDEXING INFO: An index folder exists at: " +
>  indexFileLocation);
>     deleting = true;
>     create = false;
>     try {
>      //this version of index docs is able to execute the
> incremental
>      // update
>      indexDocs(root, indexFileLocation, create);
>     } catch (Exception e) {
>      //we were unable to do the incremental update
>      Trace.TRACE("INDEXING ERROR: Unable to execute
> incremental update "
>          + e.getMessage());
>     }
>     //after exiting this loop the index should be current with
> content
>     Trace.TRACE("INDEXING INFO: Incremental update
> completed.");
>    }
>    try {
>     //create the writer
>     writer = new IndexWriter(index, new StandardAnalyzer(),
> create);
>     //configure the writer
>     writer.mergeFactor = 10000;
>     writer.maxFieldLength = 100000;
>     try {
>      //get the start date
>      Date start = new Date();
>      //call the indexDocs method, this time we will add new
>      // documents
>      Trace.TRACE("INDEXING INFO: Start Indexing new
> content.");
>      indexDocs(root, indexFileLocation, create);
>      Trace.TRACE("INDEXING INFO: Indexing new content
> complete.");
>      //optimize the index
>      writer.optimize();
>      //close the writer
>      writer.close();
>      //get the end date
>      Date end = new Date();
>      long totalTime = end.getTime() - start.getTime();
>      Trace.TRACE("INDEXING INFO: All Indexing Operations
> Completed in "
>          + totalTime + " milliseconds");
>     } catch (Exception e1) {
>      //unable to add new documents
>      Trace.TRACE("INDEXING ERROR: Unable to index new content
> "
>          + e1.getMessage());
>     }
>    } catch (IOException e) {
>     Trace.TRACE("INDEXING ERROR: Unable to create IndexWriter
> "
>       + e.getMessage());
>    }
>   }
> 
>   /*
>    * Walk directory hierarchy in uid order, while keeping uid
> iterator from
>  /*
>    * existing index in sync. Mismatches indicate one of: (a)
> old documents
> to
>  /*
>    * be deleted; (b) unchanged documents, to be left alone; or
> (c) new /*
>    * documents, to be indexed.
>    */
> 
>   private static void indexDocs(File file, String index,
> boolean create)
>     throws Exception {
>    //the index already exists we do an incremental update
>    if (!create) {
>     Trace.TRACE("INDEXING INFO: Incremental Update Request
> Confirmed");
>     //open existing index
>     reader = IndexReader.open(index);
>     //this gets an enummeration of uid terms
>     uidIter = reader.terms(new Term("uid", ""));
>     //jump to the index method that does the work
>     //this will use the Iteration above and does
>     //all the "smart" indexing
>     indexDocs(file);
>     //this will be true everytime the index already existed
>     //we are not going to delete documents that are old
>     if (deleting) {
>      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> Started. All
>  Deleted Docs will be listed.");
>      while (uidIter.term() != null
>        && uidIter.term().field() == "uid") {
>       //basically we are deleting all the document we have
>       // indexed before
>       Trace.TRACE("INDEXING INFO: Deleting document "
>         + HTMLDocument.uid2url(uidIter.term().text()));
>       //delete the term from the reader
>       reader.delete(uidIter.term());
>       //go to the nextfield
>       uidIter.next();
>      }
>      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> Completed");
>      //turn off the deleting flag
>      deleting = false;
>     }//close the deleting branch
>     //close the enummeration
>     uidIter.close(); // close uid iterator
>     //close the reader
>     reader.close(); // close existing index
> 
>    }
>    //we go here is the index already existed
>    else {
>     Trace.TRACE("INDEXING INFO: Index Folder Did Not Exist.
> Start Creation
> Of
>  New Index");
>     // don't have exisiting
>     indexDocs(file);
>    }
>   }
> 
>   private static void indexDocs(File file) throws Exception {
>    //check if we are at the top of a directory
>    if (file.isDirectory()) {
>     //get a list of the files
>     String[] files = file.list();
>     //sort them
>     Arrays.sort(files);
>     //index each file in the directory recursively
>     //we keep repeating this logic until we hit a
>     //file
>     for (int i = 0; i < files.length; i++)
>      //pass in the parent directory and the current file
>      //into the file constructor and index
>      indexDocs(new File(file, files[i]));
> 
>    }
>    //we have an actual file, so we need to consider the
>    //file extensions so the correct Document is created
>    else if (file.getPath().endsWith(".html")
>      || file.getPath().endsWith(".htm")
>      || file.getPath().endsWith(".txt")
>      || file.getPath().endsWith(".doc")
>      || file.getPath().endsWith(".xml")
>      || file.getPath().endsWith(".pdf")) {
> 
>     //if this is reached it means we were in the midst
>     //of an incremental update
>     if (uidIter != null) {
>      //get the uid for the document we are on
>      String uid = HTMLDocument.uid(file);
>      //now compare this document to the one we have in the
>      //enummeration of terms.
>      //if the term in the enummeration is less than the
>      //term we are on it must be deleted (if we are indeed
>      //doing an incrementatal update)
>      Trace.TRACE("INDEXING INFO: Beginnging Incremental update
>  comparisions");
>      while (uidIter.term() != null
>        && uidIter.term().field() == "uid"
>        && uidIter.term().text().compareTo(uid) < 0) {
>       //delete stale docs
>       if (deleting) {
>        reader.delete(uidIter.term());
>       }
>       uidIter.next();
>      }
>      //if the terms are equal there is no change with this
> document
>      //we keep it as is
>      if (uidIter.term() != null && uidIter.term().field() ==
> "uid"
>        && uidIter.term().text().compareTo(uid) == 0) {
>       uidIter.next();
>      }
>      //if we are not deleting and the document was not there
>      //it means we didn't have this document on the last index
>      //and we should add it
>      else if (!deleting) {
>       if (file.getPath().endsWith(".pdf")) {
>        Document doc = LucenePDFDocument.getDocument(file);
>        Trace.TRACE("INDEXING INFO: Adding new document to the
> existing
> index:
>  "
>            + doc.get("url"));
>        writer.addDocument(doc);
>       } else if (file.getPath().endsWith(".xml")) {
>        Document doc = XMLDocument.Document(file);
>        Trace.TRACE("INDEXING INFO: Adding new document to the
> existing
> index:
>  "
>            + doc.get("url"));
>        writer.addDocument(doc);
>       } else {
>        Document doc = HTMLDocument.Document(file);
>        Trace.TRACE("INDEXING INFO: Adding new document to the
> existing
> index:
>  "
>            + doc.get("url"));
>        writer.addDocument(doc);
>       }
>      }
>     }//end the if for an incremental update
>     //we are creating a new index, add all document types
>     else {
>      if (file.getPath().endsWith(".pdf")) {
>       Document doc = LucenePDFDocument.getDocument(file);
>       Trace.TRACE("INDEXING INFO: Adding a new document to the
> new index: "
>           + doc.get("url"));
>       writer.addDocument(doc);
>      } else if (file.getPath().endsWith(".xml")) {
>       Document doc = XMLDocument.Document(file);
>       Trace.TRACE("INDEXING INFO: Adding a new document to the
> new index: "
>           + doc.get("url"));
>       writer.addDocument(doc);
>      } else {
>       Document doc = HTMLDocument.Document(file);
>       Trace.TRACE("INDEXING INFO: Adding a new document to the
> new index: "
>           + doc.get("url"));
>       writer.addDocument(doc);
>      }//close the else
>     }//close the else for a new index
>    }//close the else if to handle file types
>   }//close the indexDocs method
> 
>  }
> 
> 
>  ----- Original Message ----- 
>  From: "Craig McClanahan" <craigmcc@gmail.com
>  To: "Jakarta Commons Users List"
> <commons-user@jakarta.apache.org
>  Sent: Thursday, November 11, 2004 6:13 PM
>  Subject: Re: avoiding locking
> 
> 
>   In order to get any useful help, it would be nice to know
> what you are
>   trying to do, and (most importantly) what commons component
> is giving
>   you the problem :-).  The traditional approach is to put a
> prefix on
>   your subject line -- for commons package "foo" it would be:
> 
>     [foo] avoiding locking
> 
>   It's also generally helpful to see the entire stack trace,
> not just
>   the exception message itself.
> 
>   Craig
> 
> 
>   On Thu, 11 Nov 2004 17:27:19 -0500, Luke Shannon
>   <lshannon@hypermedia.com wrote:
>    What can I do to avoid locking issues?
> 
>    Unable to execute incremental update Lock obtain timed out:
> 
>
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
>  10f7fe8-write.lock
> 
>    Thanks,
> 
>    Luke
> 
> 
>  
>
---------------------------------------------------------------------
>   To unsubscribe, e-mail:
> commons-user-unsubscribe@jakarta.apache.org
>   For additional commands, e-mail:
> commons-user-help@jakarta.apache.org
> 
> 
> 
> 
> 
> 
>
---------------------------------------------------------------------
>  To unsubscribe, e-mail:
> commons-user-unsubscribe@jakarta.apache.org
>  For additional commands, e-mail:
> commons-user-help@jakarta.apache.org
> 
> 
> 
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11177-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 11 23:57:45 2004
Return-Path: <lucene-user-return-11177-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 10176 invoked from network); 11 Nov 2004 23:57:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 11 Nov 2004 23:57:45 -0000
Received: (qmail 73372 invoked by uid 500); 11 Nov 2004 23:57:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 73353 invoked by uid 500); 11 Nov 2004 23:57:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73333 invoked by uid 99); 11 Nov 2004 23:57:41 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 15:57:41 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Thu, 11 Nov 2004 18:58:23 -0500
Message-ID: <054a01c4c84a$5443ef90$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	<yahootintin-lucene@yahoo.com>
References: <20041111235654.83806.qmail@web41006.mail.yahoo.com>
Subject: Re: Lucene : avoiding locking
Date: Thu, 11 Nov 2004 18:58:23 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 11 Nov 2004 23:58:23.0947 (UTC) FILETIME=[543A79B0:01C4C84A]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I will try that now.
Thank you.

----- Original Message ----- 
From: <yahootintin-lucene@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, November 11, 2004 6:56 PM
Subject: Re: Lucene : avoiding locking


> I'm working on a similar project...
> Make sure that only one call to the index method is occuring at
> a time.  Synchronizing that method should do it.
>
> --- Luke Shannon <lshannon@hypermedia.com> wrote:
>
> > Hi All;
> >
> > I have hit a snag in my Lucene integration and don't know what
> > to do.
> >
> >  My company has a content management product. Each time
> > someone changes the
> >  directory structure or a file with in it that portion of the
> > site needs to
> >  be re-indexed so the changes are reflected in future searches
> > (indexing
> > must
> >  happen during run time).
> >
> >  I have written a Indexer class with a static Index() method.
> > The idea is
> > too
> >  call the method every time something changes and the index
> > needs to be
> >  re-examined. I am hoping the logic put in by Doug Cutting
> > surrounding the
> >  UID will make indexing efficient enough to be called so
> > frequently.
> >
> >  This class works great when I tested it on my own little site
> > (I have about
> >  2000 file). But when I drop the functionality into the QA
> > environment I get
> >  a locking error.
> >
> >  I can't access the stack trace, all I can get at is a log
> > file the
> >  application writes too. Here is the section my class wrote.
> > It was right in
> >  the middle of indexing and bang lock issue.
> >
> >  I don't know if the problem is in my code or something in the
> > existing
> >  application.
> >
> >  Error Message:
> >  ENTER|SearchEventProcessor.visit(ContentNodeDeleteEvent)
> >  |INFO|INDEXING INFO: Start Indexing new content.
> >  |INFO|INDEXING INFO: Index Folder Did Not Exist. Start
> > Creation Of New
> > Index
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING ERROR: Unable to index new content Lock obtain
> > timed out:
> >
> >
>
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
> >  10f7fe8-write.lock
> >
> > |ENTER|UpdateCacheEventProcessor.visit(ContentNodeDeleteEvent)
> >
> >  Here is my code. You will recognize it pretty much as the
> > IndexHTML class
> >  from the Lucene demo written by Doug Cutting. I have put a
> > ton of comments
> >  in a attempt to understand what is going on.
> >
> >  Any help would be appreciated.
> >
> >  Luke
> >
> >  package com.fbhm.bolt.search;
> >
> >  /*
> >   * Created on Nov 11, 2004
> >   *
> >   * This class will create a single index file for the Content
> >   * Management System (CMS). It contains logic to ensure
> >   * indexing is done "intelligently". Based on IndexHTML.java
> >   * from the demo folder that ships with Lucene
> >   */
> >
> >  import java.io.File;
> >  import java.io.IOException;
> >  import java.util.Arrays;
> >  import java.util.Date;
> >
> >  import org.apache.lucene.analysis.standard.StandardAnalyzer;
> >  import org.apache.lucene.document.Document;
> >  import org.apache.lucene.index.IndexReader;
> >  import org.apache.lucene.index.IndexWriter;
> >  import org.apache.lucene.index.Term;
> >  import org.apache.lucene.index.TermEnum;
> >  import org.pdfbox.searchengine.lucene.LucenePDFDocument;
> >  import org.apache.lucene.demo.HTMLDocument;
> >
> >  import com.alaia.common.debug.Trace;
> >  import com.alaia.common.util.AppProperties;
> >
> >  /**
> >   * @author lshannon Description: <br
> >   *   This class is used to index a content folder. It
> > contains logic to
> >   *   ensure only new or documents that have been modified
> > since the last
> >   *   search are indexed. <br
> >   *   Based on code writen by Doug Cutting in the IndexHTML
> > class found in
> >   *   the Lucene demo
> >   */
> >  public class Indexer {
> >   //true during deletion pass, this is when the index already
> > exists
> >   private static boolean deleting = false;
> >
> >   //object to read existing indexes
> >   private static IndexReader reader;
> >
> >   //object to write to the index folder
> >   private static IndexWriter writer;
> >
> >   //this will be used to write the index file
> >   private static TermEnum uidIter;
> >
> >   /*
> >    * This static method does all the work, the end result is
> > an up-to-date
> >  index folder
> >   */
> >   public static void Index() {
> >    //we will assume to start the index has been created
> >    boolean create = true;
> >    //set the name of the index file
> >    String indexFileLocation =
> >
> >
> AppProperties.getPropertyAsString("bolt.search.siteIndex.index.root");
> >    //set the name of the content folder
> >    String contentFolderLocation =
> >  AppProperties.getPropertyAsString("site.root");
> >    //manage whether the index needs to be created or not
> >    File index = new File(indexFileLocation);
> >    File root = new File(contentFolderLocation);
> >    //the index file indicated exists, we need an incremental
> > update of the
> >    // index
> >    if (index.exists()) {
> >     Trace.TRACE("INDEXING INFO: An index folder exists at: " +
> >  indexFileLocation);
> >     deleting = true;
> >     create = false;
> >     try {
> >      //this version of index docs is able to execute the
> > incremental
> >      // update
> >      indexDocs(root, indexFileLocation, create);
> >     } catch (Exception e) {
> >      //we were unable to do the incremental update
> >      Trace.TRACE("INDEXING ERROR: Unable to execute
> > incremental update "
> >          + e.getMessage());
> >     }
> >     //after exiting this loop the index should be current with
> > content
> >     Trace.TRACE("INDEXING INFO: Incremental update
> > completed.");
> >    }
> >    try {
> >     //create the writer
> >     writer = new IndexWriter(index, new StandardAnalyzer(),
> > create);
> >     //configure the writer
> >     writer.mergeFactor = 10000;
> >     writer.maxFieldLength = 100000;
> >     try {
> >      //get the start date
> >      Date start = new Date();
> >      //call the indexDocs method, this time we will add new
> >      // documents
> >      Trace.TRACE("INDEXING INFO: Start Indexing new
> > content.");
> >      indexDocs(root, indexFileLocation, create);
> >      Trace.TRACE("INDEXING INFO: Indexing new content
> > complete.");
> >      //optimize the index
> >      writer.optimize();
> >      //close the writer
> >      writer.close();
> >      //get the end date
> >      Date end = new Date();
> >      long totalTime = end.getTime() - start.getTime();
> >      Trace.TRACE("INDEXING INFO: All Indexing Operations
> > Completed in "
> >          + totalTime + " milliseconds");
> >     } catch (Exception e1) {
> >      //unable to add new documents
> >      Trace.TRACE("INDEXING ERROR: Unable to index new content
> > "
> >          + e1.getMessage());
> >     }
> >    } catch (IOException e) {
> >     Trace.TRACE("INDEXING ERROR: Unable to create IndexWriter
> > "
> >       + e.getMessage());
> >    }
> >   }
> >
> >   /*
> >    * Walk directory hierarchy in uid order, while keeping uid
> > iterator from
> >  /*
> >    * existing index in sync. Mismatches indicate one of: (a)
> > old documents
> > to
> >  /*
> >    * be deleted; (b) unchanged documents, to be left alone; or
> > (c) new /*
> >    * documents, to be indexed.
> >    */
> >
> >   private static void indexDocs(File file, String index,
> > boolean create)
> >     throws Exception {
> >    //the index already exists we do an incremental update
> >    if (!create) {
> >     Trace.TRACE("INDEXING INFO: Incremental Update Request
> > Confirmed");
> >     //open existing index
> >     reader = IndexReader.open(index);
> >     //this gets an enummeration of uid terms
> >     uidIter = reader.terms(new Term("uid", ""));
> >     //jump to the index method that does the work
> >     //this will use the Iteration above and does
> >     //all the "smart" indexing
> >     indexDocs(file);
> >     //this will be true everytime the index already existed
> >     //we are not going to delete documents that are old
> >     if (deleting) {
> >      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> > Started. All
> >  Deleted Docs will be listed.");
> >      while (uidIter.term() != null
> >        && uidIter.term().field() == "uid") {
> >       //basically we are deleting all the document we have
> >       // indexed before
> >       Trace.TRACE("INDEXING INFO: Deleting document "
> >         + HTMLDocument.uid2url(uidIter.term().text()));
> >       //delete the term from the reader
> >       reader.delete(uidIter.term());
> >       //go to the nextfield
> >       uidIter.next();
> >      }
> >      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> > Completed");
> >      //turn off the deleting flag
> >      deleting = false;
> >     }//close the deleting branch
> >     //close the enummeration
> >     uidIter.close(); // close uid iterator
> >     //close the reader
> >     reader.close(); // close existing index
> >
> >    }
> >    //we go here is the index already existed
> >    else {
> >     Trace.TRACE("INDEXING INFO: Index Folder Did Not Exist.
> > Start Creation
> > Of
> >  New Index");
> >     // don't have exisiting
> >     indexDocs(file);
> >    }
> >   }
> >
> >   private static void indexDocs(File file) throws Exception {
> >    //check if we are at the top of a directory
> >    if (file.isDirectory()) {
> >     //get a list of the files
> >     String[] files = file.list();
> >     //sort them
> >     Arrays.sort(files);
> >     //index each file in the directory recursively
> >     //we keep repeating this logic until we hit a
> >     //file
> >     for (int i = 0; i < files.length; i++)
> >      //pass in the parent directory and the current file
> >      //into the file constructor and index
> >      indexDocs(new File(file, files[i]));
> >
> >    }
> >    //we have an actual file, so we need to consider the
> >    //file extensions so the correct Document is created
> >    else if (file.getPath().endsWith(".html")
> >      || file.getPath().endsWith(".htm")
> >      || file.getPath().endsWith(".txt")
> >      || file.getPath().endsWith(".doc")
> >      || file.getPath().endsWith(".xml")
> >      || file.getPath().endsWith(".pdf")) {
> >
> >     //if this is reached it means we were in the midst
> >     //of an incremental update
> >     if (uidIter != null) {
> >      //get the uid for the document we are on
> >      String uid = HTMLDocument.uid(file);
> >      //now compare this document to the one we have in the
> >      //enummeration of terms.
> >      //if the term in the enummeration is less than the
> >      //term we are on it must be deleted (if we are indeed
> >      //doing an incrementatal update)
> >      Trace.TRACE("INDEXING INFO: Beginnging Incremental update
> >  comparisions");
> >      while (uidIter.term() != null
> >        && uidIter.term().field() == "uid"
> >        && uidIter.term().text().compareTo(uid) < 0) {
> >       //delete stale docs
> >       if (deleting) {
> >        reader.delete(uidIter.term());
> >       }
> >       uidIter.next();
> >      }
> >      //if the terms are equal there is no change with this
> > document
> >      //we keep it as is
> >      if (uidIter.term() != null && uidIter.term().field() ==
> > "uid"
> >        && uidIter.term().text().compareTo(uid) == 0) {
> >       uidIter.next();
> >      }
> >      //if we are not deleting and the document was not there
> >      //it means we didn't have this document on the last index
> >      //and we should add it
> >      else if (!deleting) {
> >       if (file.getPath().endsWith(".pdf")) {
> >        Document doc = LucenePDFDocument.getDocument(file);
> >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > existing
> > index:
> >  "
> >            + doc.get("url"));
> >        writer.addDocument(doc);
> >       } else if (file.getPath().endsWith(".xml")) {
> >        Document doc = XMLDocument.Document(file);
> >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > existing
> > index:
> >  "
> >            + doc.get("url"));
> >        writer.addDocument(doc);
> >       } else {
> >        Document doc = HTMLDocument.Document(file);
> >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > existing
> > index:
> >  "
> >            + doc.get("url"));
> >        writer.addDocument(doc);
> >       }
> >      }
> >     }//end the if for an incremental update
> >     //we are creating a new index, add all document types
> >     else {
> >      if (file.getPath().endsWith(".pdf")) {
> >       Document doc = LucenePDFDocument.getDocument(file);
> >       Trace.TRACE("INDEXING INFO: Adding a new document to the
> > new index: "
> >           + doc.get("url"));
> >       writer.addDocument(doc);
> >      } else if (file.getPath().endsWith(".xml")) {
> >       Document doc = XMLDocument.Document(file);
> >       Trace.TRACE("INDEXING INFO: Adding a new document to the
> > new index: "
> >           + doc.get("url"));
> >       writer.addDocument(doc);
> >      } else {
> >       Document doc = HTMLDocument.Document(file);
> >       Trace.TRACE("INDEXING INFO: Adding a new document to the
> > new index: "
> >           + doc.get("url"));
> >       writer.addDocument(doc);
> >      }//close the else
> >     }//close the else for a new index
> >    }//close the else if to handle file types
> >   }//close the indexDocs method
> >
> >  }
> >
> >
> >  ----- Original Message ----- 
> >  From: "Craig McClanahan" <craigmcc@gmail.com
> >  To: "Jakarta Commons Users List"
> > <commons-user@jakarta.apache.org
> >  Sent: Thursday, November 11, 2004 6:13 PM
> >  Subject: Re: avoiding locking
> >
> >
> >   In order to get any useful help, it would be nice to know
> > what you are
> >   trying to do, and (most importantly) what commons component
> > is giving
> >   you the problem :-).  The traditional approach is to put a
> > prefix on
> >   your subject line -- for commons package "foo" it would be:
> >
> >     [foo] avoiding locking
> >
> >   It's also generally helpful to see the entire stack trace,
> > not just
> >   the exception message itself.
> >
> >   Craig
> >
> >
> >   On Thu, 11 Nov 2004 17:27:19 -0500, Luke Shannon
> >   <lshannon@hypermedia.com wrote:
> >    What can I do to avoid locking issues?
> >
> >    Unable to execute incremental update Lock obtain timed out:
> >
> >
>
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
> >  10f7fe8-write.lock
> >
> >    Thanks,
> >
> >    Luke
> >
> >
> >
> >
> ---------------------------------------------------------------------
> >   To unsubscribe, e-mail:
> > commons-user-unsubscribe@jakarta.apache.org
> >   For additional commands, e-mail:
> > commons-user-help@jakarta.apache.org
> >
> >
> >
> >
> >
> >
> >
> ---------------------------------------------------------------------
> >  To unsubscribe, e-mail:
> > commons-user-unsubscribe@jakarta.apache.org
> >  For additional commands, e-mail:
> > commons-user-help@jakarta.apache.org
> >
> >
> >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11178-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 00:32:35 2004
Return-Path: <lucene-user-return-11178-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26136 invoked from network); 12 Nov 2004 00:32:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 00:32:35 -0000
Received: (qmail 17871 invoked by uid 500); 12 Nov 2004 00:32:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17847 invoked by uid 500); 12 Nov 2004 00:32:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17829 invoked by uid 99); 12 Nov 2004 00:32:31 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 16:32:31 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Thu, 11 Nov 2004 19:33:11 -0500
Message-ID: <055201c4c84f$30c1df00$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	<yahootintin-lucene@yahoo.com>
References: <20041111235654.83806.qmail@web41006.mail.yahoo.com>
Subject: Re: Lucene : avoiding locking
Date: Thu, 11 Nov 2004 19:33:11 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 12 Nov 2004 00:33:11.0780 (UTC) FILETIME=[30AC8240:01C4C84F]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Syncronizing the method didn't seem to help. The lock is being detected
right here in the code:

while (uidIter.term() != null
      && uidIter.term().field() == "uid"
      && uidIter.term().text().compareTo(uid) < 0) {
     //delete stale docs
     if (deleting) {
      reader.delete(uidIter.term());
     }
     uidIter.next();
    }

This runs fine on my own site so I am confused. For now I think I am going
to remove the deleting of "stale" files etc and just rebuild the index each
time to see what happens.

----- Original Message ----- 
From: <yahootintin-lucene@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, November 11, 2004 6:56 PM
Subject: Re: Lucene : avoiding locking


> I'm working on a similar project...
> Make sure that only one call to the index method is occuring at
> a time.  Synchronizing that method should do it.
>
> --- Luke Shannon <lshannon@hypermedia.com> wrote:
>
> > Hi All;
> >
> > I have hit a snag in my Lucene integration and don't know what
> > to do.
> >
> >  My company has a content management product. Each time
> > someone changes the
> >  directory structure or a file with in it that portion of the
> > site needs to
> >  be re-indexed so the changes are reflected in future searches
> > (indexing
> > must
> >  happen during run time).
> >
> >  I have written a Indexer class with a static Index() method.
> > The idea is
> > too
> >  call the method every time something changes and the index
> > needs to be
> >  re-examined. I am hoping the logic put in by Doug Cutting
> > surrounding the
> >  UID will make indexing efficient enough to be called so
> > frequently.
> >
> >  This class works great when I tested it on my own little site
> > (I have about
> >  2000 file). But when I drop the functionality into the QA
> > environment I get
> >  a locking error.
> >
> >  I can't access the stack trace, all I can get at is a log
> > file the
> >  application writes too. Here is the section my class wrote.
> > It was right in
> >  the middle of indexing and bang lock issue.
> >
> >  I don't know if the problem is in my code or something in the
> > existing
> >  application.
> >
> >  Error Message:
> >  ENTER|SearchEventProcessor.visit(ContentNodeDeleteEvent)
> >  |INFO|INDEXING INFO: Start Indexing new content.
> >  |INFO|INDEXING INFO: Index Folder Did Not Exist. Start
> > Creation Of New
> > Index
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING INFO: Beginnging Incremental update
> > comparisions
> >  |INFO|INDEXING ERROR: Unable to index new content Lock obtain
> > timed out:
> >
> >
>
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
> >  10f7fe8-write.lock
> >
> > |ENTER|UpdateCacheEventProcessor.visit(ContentNodeDeleteEvent)
> >
> >  Here is my code. You will recognize it pretty much as the
> > IndexHTML class
> >  from the Lucene demo written by Doug Cutting. I have put a
> > ton of comments
> >  in a attempt to understand what is going on.
> >
> >  Any help would be appreciated.
> >
> >  Luke
> >
> >  package com.fbhm.bolt.search;
> >
> >  /*
> >   * Created on Nov 11, 2004
> >   *
> >   * This class will create a single index file for the Content
> >   * Management System (CMS). It contains logic to ensure
> >   * indexing is done "intelligently". Based on IndexHTML.java
> >   * from the demo folder that ships with Lucene
> >   */
> >
> >  import java.io.File;
> >  import java.io.IOException;
> >  import java.util.Arrays;
> >  import java.util.Date;
> >
> >  import org.apache.lucene.analysis.standard.StandardAnalyzer;
> >  import org.apache.lucene.document.Document;
> >  import org.apache.lucene.index.IndexReader;
> >  import org.apache.lucene.index.IndexWriter;
> >  import org.apache.lucene.index.Term;
> >  import org.apache.lucene.index.TermEnum;
> >  import org.pdfbox.searchengine.lucene.LucenePDFDocument;
> >  import org.apache.lucene.demo.HTMLDocument;
> >
> >  import com.alaia.common.debug.Trace;
> >  import com.alaia.common.util.AppProperties;
> >
> >  /**
> >   * @author lshannon Description: <br
> >   *   This class is used to index a content folder. It
> > contains logic to
> >   *   ensure only new or documents that have been modified
> > since the last
> >   *   search are indexed. <br
> >   *   Based on code writen by Doug Cutting in the IndexHTML
> > class found in
> >   *   the Lucene demo
> >   */
> >  public class Indexer {
> >   //true during deletion pass, this is when the index already
> > exists
> >   private static boolean deleting = false;
> >
> >   //object to read existing indexes
> >   private static IndexReader reader;
> >
> >   //object to write to the index folder
> >   private static IndexWriter writer;
> >
> >   //this will be used to write the index file
> >   private static TermEnum uidIter;
> >
> >   /*
> >    * This static method does all the work, the end result is
> > an up-to-date
> >  index folder
> >   */
> >   public static void Index() {
> >    //we will assume to start the index has been created
> >    boolean create = true;
> >    //set the name of the index file
> >    String indexFileLocation =
> >
> >
> AppProperties.getPropertyAsString("bolt.search.siteIndex.index.root");
> >    //set the name of the content folder
> >    String contentFolderLocation =
> >  AppProperties.getPropertyAsString("site.root");
> >    //manage whether the index needs to be created or not
> >    File index = new File(indexFileLocation);
> >    File root = new File(contentFolderLocation);
> >    //the index file indicated exists, we need an incremental
> > update of the
> >    // index
> >    if (index.exists()) {
> >     Trace.TRACE("INDEXING INFO: An index folder exists at: " +
> >  indexFileLocation);
> >     deleting = true;
> >     create = false;
> >     try {
> >      //this version of index docs is able to execute the
> > incremental
> >      // update
> >      indexDocs(root, indexFileLocation, create);
> >     } catch (Exception e) {
> >      //we were unable to do the incremental update
> >      Trace.TRACE("INDEXING ERROR: Unable to execute
> > incremental update "
> >          + e.getMessage());
> >     }
> >     //after exiting this loop the index should be current with
> > content
> >     Trace.TRACE("INDEXING INFO: Incremental update
> > completed.");
> >    }
> >    try {
> >     //create the writer
> >     writer = new IndexWriter(index, new StandardAnalyzer(),
> > create);
> >     //configure the writer
> >     writer.mergeFactor = 10000;
> >     writer.maxFieldLength = 100000;
> >     try {
> >      //get the start date
> >      Date start = new Date();
> >      //call the indexDocs method, this time we will add new
> >      // documents
> >      Trace.TRACE("INDEXING INFO: Start Indexing new
> > content.");
> >      indexDocs(root, indexFileLocation, create);
> >      Trace.TRACE("INDEXING INFO: Indexing new content
> > complete.");
> >      //optimize the index
> >      writer.optimize();
> >      //close the writer
> >      writer.close();
> >      //get the end date
> >      Date end = new Date();
> >      long totalTime = end.getTime() - start.getTime();
> >      Trace.TRACE("INDEXING INFO: All Indexing Operations
> > Completed in "
> >          + totalTime + " milliseconds");
> >     } catch (Exception e1) {
> >      //unable to add new documents
> >      Trace.TRACE("INDEXING ERROR: Unable to index new content
> > "
> >          + e1.getMessage());
> >     }
> >    } catch (IOException e) {
> >     Trace.TRACE("INDEXING ERROR: Unable to create IndexWriter
> > "
> >       + e.getMessage());
> >    }
> >   }
> >
> >   /*
> >    * Walk directory hierarchy in uid order, while keeping uid
> > iterator from
> >  /*
> >    * existing index in sync. Mismatches indicate one of: (a)
> > old documents
> > to
> >  /*
> >    * be deleted; (b) unchanged documents, to be left alone; or
> > (c) new /*
> >    * documents, to be indexed.
> >    */
> >
> >   private static void indexDocs(File file, String index,
> > boolean create)
> >     throws Exception {
> >    //the index already exists we do an incremental update
> >    if (!create) {
> >     Trace.TRACE("INDEXING INFO: Incremental Update Request
> > Confirmed");
> >     //open existing index
> >     reader = IndexReader.open(index);
> >     //this gets an enummeration of uid terms
> >     uidIter = reader.terms(new Term("uid", ""));
> >     //jump to the index method that does the work
> >     //this will use the Iteration above and does
> >     //all the "smart" indexing
> >     indexDocs(file);
> >     //this will be true everytime the index already existed
> >     //we are not going to delete documents that are old
> >     if (deleting) {
> >      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> > Started. All
> >  Deleted Docs will be listed.");
> >      while (uidIter.term() != null
> >        && uidIter.term().field() == "uid") {
> >       //basically we are deleting all the document we have
> >       // indexed before
> >       Trace.TRACE("INDEXING INFO: Deleting document "
> >         + HTMLDocument.uid2url(uidIter.term().text()));
> >       //delete the term from the reader
> >       reader.delete(uidIter.term());
> >       //go to the nextfield
> >       uidIter.next();
> >      }
> >      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> > Completed");
> >      //turn off the deleting flag
> >      deleting = false;
> >     }//close the deleting branch
> >     //close the enummeration
> >     uidIter.close(); // close uid iterator
> >     //close the reader
> >     reader.close(); // close existing index
> >
> >    }
> >    //we go here is the index already existed
> >    else {
> >     Trace.TRACE("INDEXING INFO: Index Folder Did Not Exist.
> > Start Creation
> > Of
> >  New Index");
> >     // don't have exisiting
> >     indexDocs(file);
> >    }
> >   }
> >
> >   private static void indexDocs(File file) throws Exception {
> >    //check if we are at the top of a directory
> >    if (file.isDirectory()) {
> >     //get a list of the files
> >     String[] files = file.list();
> >     //sort them
> >     Arrays.sort(files);
> >     //index each file in the directory recursively
> >     //we keep repeating this logic until we hit a
> >     //file
> >     for (int i = 0; i < files.length; i++)
> >      //pass in the parent directory and the current file
> >      //into the file constructor and index
> >      indexDocs(new File(file, files[i]));
> >
> >    }
> >    //we have an actual file, so we need to consider the
> >    //file extensions so the correct Document is created
> >    else if (file.getPath().endsWith(".html")
> >      || file.getPath().endsWith(".htm")
> >      || file.getPath().endsWith(".txt")
> >      || file.getPath().endsWith(".doc")
> >      || file.getPath().endsWith(".xml")
> >      || file.getPath().endsWith(".pdf")) {
> >
> >     //if this is reached it means we were in the midst
> >     //of an incremental update
> >     if (uidIter != null) {
> >      //get the uid for the document we are on
> >      String uid = HTMLDocument.uid(file);
> >      //now compare this document to the one we have in the
> >      //enummeration of terms.
> >      //if the term in the enummeration is less than the
> >      //term we are on it must be deleted (if we are indeed
> >      //doing an incrementatal update)
> >      Trace.TRACE("INDEXING INFO: Beginnging Incremental update
> >  comparisions");
> >      while (uidIter.term() != null
> >        && uidIter.term().field() == "uid"
> >        && uidIter.term().text().compareTo(uid) < 0) {
> >       //delete stale docs
> >       if (deleting) {
> >        reader.delete(uidIter.term());
> >       }
> >       uidIter.next();
> >      }
> >      //if the terms are equal there is no change with this
> > document
> >      //we keep it as is
> >      if (uidIter.term() != null && uidIter.term().field() ==
> > "uid"
> >        && uidIter.term().text().compareTo(uid) == 0) {
> >       uidIter.next();
> >      }
> >      //if we are not deleting and the document was not there
> >      //it means we didn't have this document on the last index
> >      //and we should add it
> >      else if (!deleting) {
> >       if (file.getPath().endsWith(".pdf")) {
> >        Document doc = LucenePDFDocument.getDocument(file);
> >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > existing
> > index:
> >  "
> >            + doc.get("url"));
> >        writer.addDocument(doc);
> >       } else if (file.getPath().endsWith(".xml")) {
> >        Document doc = XMLDocument.Document(file);
> >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > existing
> > index:
> >  "
> >            + doc.get("url"));
> >        writer.addDocument(doc);
> >       } else {
> >        Document doc = HTMLDocument.Document(file);
> >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > existing
> > index:
> >  "
> >            + doc.get("url"));
> >        writer.addDocument(doc);
> >       }
> >      }
> >     }//end the if for an incremental update
> >     //we are creating a new index, add all document types
> >     else {
> >      if (file.getPath().endsWith(".pdf")) {
> >       Document doc = LucenePDFDocument.getDocument(file);
> >       Trace.TRACE("INDEXING INFO: Adding a new document to the
> > new index: "
> >           + doc.get("url"));
> >       writer.addDocument(doc);
> >      } else if (file.getPath().endsWith(".xml")) {
> >       Document doc = XMLDocument.Document(file);
> >       Trace.TRACE("INDEXING INFO: Adding a new document to the
> > new index: "
> >           + doc.get("url"));
> >       writer.addDocument(doc);
> >      } else {
> >       Document doc = HTMLDocument.Document(file);
> >       Trace.TRACE("INDEXING INFO: Adding a new document to the
> > new index: "
> >           + doc.get("url"));
> >       writer.addDocument(doc);
> >      }//close the else
> >     }//close the else for a new index
> >    }//close the else if to handle file types
> >   }//close the indexDocs method
> >
> >  }
> >
> >
> >  ----- Original Message ----- 
> >  From: "Craig McClanahan" <craigmcc@gmail.com
> >  To: "Jakarta Commons Users List"
> > <commons-user@jakarta.apache.org
> >  Sent: Thursday, November 11, 2004 6:13 PM
> >  Subject: Re: avoiding locking
> >
> >
> >   In order to get any useful help, it would be nice to know
> > what you are
> >   trying to do, and (most importantly) what commons component
> > is giving
> >   you the problem :-).  The traditional approach is to put a
> > prefix on
> >   your subject line -- for commons package "foo" it would be:
> >
> >     [foo] avoiding locking
> >
> >   It's also generally helpful to see the entire stack trace,
> > not just
> >   the exception message itself.
> >
> >   Craig
> >
> >
> >   On Thu, 11 Nov 2004 17:27:19 -0500, Luke Shannon
> >   <lshannon@hypermedia.com wrote:
> >    What can I do to avoid locking issues?
> >
> >    Unable to execute incremental update Lock obtain timed out:
> >
> >
>
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
> >  10f7fe8-write.lock
> >
> >    Thanks,
> >
> >    Luke
> >
> >
> >
> >
> ---------------------------------------------------------------------
> >   To unsubscribe, e-mail:
> > commons-user-unsubscribe@jakarta.apache.org
> >   For additional commands, e-mail:
> > commons-user-help@jakarta.apache.org
> >
> >
> >
> >
> >
> >
> >
> ---------------------------------------------------------------------
> >  To unsubscribe, e-mail:
> > commons-user-unsubscribe@jakarta.apache.org
> >  For additional commands, e-mail:
> > commons-user-help@jakarta.apache.org
> >
> >
> >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11179-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 02:06:50 2004
Return-Path: <lucene-user-return-11179-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59249 invoked from network); 12 Nov 2004 02:06:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 02:06:50 -0000
Received: (qmail 16122 invoked by uid 500); 12 Nov 2004 02:06:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16102 invoked by uid 500); 12 Nov 2004 02:06:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16086 invoked by uid 99); 12 Nov 2004 02:06:46 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.141.132.41] (HELO ml.worldsoftware.co.jp) (203.141.132.41)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 18:06:46 -0800
Received: from satoshiobtu4n6 (zaku.worldsoftware.co.jp [192.168.55.6])
	by ml.worldsoftware.co.jp (Postfix) with SMTP id 03D767672A
	for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 11:06:32 +0900 (JST)
Message-ID: <003e01c4c85c$3d0e24a0$32e0fcca@satoshiobtu4n6>
From: "Satoshi Hasegawa" <hasegawa@p03.worldsoftware.co.jp>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <005b01c4c799$674e1270$32e0fcca@satoshiobtu4n6> <200411110910.32745.paul.elschot@xs4all.nl>
Subject: Re: Query#rewrite Question
Date: Fri, 12 Nov 2004 11:06:35 +0900
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you, Erik and Paul. I'm not sure what SpanQuery is, but anyway we've 
decided to freeze the version of Lucene we use. 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11180-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 02:22:04 2004
Return-Path: <lucene-user-return-11180-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72458 invoked from network); 12 Nov 2004 02:22:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 02:22:04 -0000
Received: (qmail 28615 invoked by uid 500); 12 Nov 2004 02:22:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28569 invoked by uid 500); 12 Nov 2004 02:22:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28546 invoked by uid 99); 12 Nov 2004 02:22:00 -0000
Received-SPF: pass (hermes.apache.org: domain of john.wang@gmail.com designates 64.233.170.195 as permitted sender)
Received: from [64.233.170.195] (HELO rproxy.gmail.com) (64.233.170.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 18:22:00 -0800
Received: by rproxy.gmail.com with SMTP id a36so385701rnf
        for <lucene-user@jakarta.apache.org>; Thu, 11 Nov 2004 18:21:55 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=DOWbrPr+5GnDZ5Y45nTvlGexkN0Tu7boCr0qyGnoWrStwmpv0rWnj9dnb+NBpKwkuXEjlNRcO+8Y9T2LyE3lq0tSrdbmLm0vbPh1xWaCil41ibyqUumpNg0tmDTC/NeB7ZYkmUKd5GXJK8TJNTJhQ08vudDNpVeKQZi+ueC2iUQ=
Received: by 10.38.97.22 with SMTP id u22mr567694rnb;
        Thu, 11 Nov 2004 18:21:55 -0800 (PST)
Received: by 10.38.75.60 with HTTP; Thu, 11 Nov 2004 18:21:55 -0800 (PST)
Message-ID: <8837fb7704111118211b8d866@mail.gmail.com>
Date: Thu, 11 Nov 2004 18:21:55 -0800
From: John Wang <john.wang@gmail.com>
Reply-To: John Wang <john.wang@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: lucene file locking question
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi folks:

      My application builds a super-index around the lucene index,
e.g. stores some additional information outside of lucene.

       I am using my own locking outside of the lucene index via
FileLock object in the jdk1.4 nio package.

       My code does the following:

FileLock lock=null;
try{
        lock=myLockFileChannel.lock();

        indexing into lucene;

        indexing additional information;

}

finally{
      try{
          commit lucene index by closing the IndexWriter instance.
      }
      finally{
        if (lock!=null){
           lock.release();
        }
      }
}


Now here is the weird thing, say I terminate the process in the middle
of indexing, and run the program again, I would get a "Lock obtain
time out" exception, as long as you delete the stale lock file, the
index remains uncorrupted.

However, if I turn lucene file lock off since I have a lock outside it anyways, 
(by doing: 
static{
    System.setProperty("disableLuceneLocks","true");
  }
)

and do the same thing. Instead I get an unrecoverable corrupted index.

Does lucene lock really guarentee index integrity under this kind of
abuse or am I just getting lucky?
If so, can someone shine some light on how?

Thanks in advance

-John

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11181-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 05:56:57 2004
Return-Path: <lucene-user-return-11181-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38215 invoked from network); 12 Nov 2004 05:56:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 05:56:57 -0000
Received: (qmail 18173 invoked by uid 500); 12 Nov 2004 05:56:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18146 invoked by uid 500); 12 Nov 2004 05:56:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18130 invoked by uid 99); 12 Nov 2004 05:56:53 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.218.93.5] (HELO web41006.mail.yahoo.com) (66.218.93.5)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 11 Nov 2004 21:56:53 -0800
Received: (qmail 43145 invoked by uid 60001); 12 Nov 2004 05:56:47 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=AZeFzBEjzhmD5ycR1Vdkhd9JP7Blh7NpyKjvqSZG+ZNpYhms75LRaOwr8ZWkm4Q07kyebAnp4uSPPUODQmst6RXHGE8cBD1Oc21nTTZPRReJv6ZrIYS7BIvX5+Pp0zZTPQTjicRh6R9+X7Wh6GW7guXoOjiww8b6XZeJOU0Mxe8=  ;
Message-ID: <20041112055646.43137.qmail@web41006.mail.yahoo.com>
Received: from [67.171.39.159] by web41006.mail.yahoo.com via HTTP; Thu, 11 Nov 2004 21:56:46 PST
Date: Thu, 11 Nov 2004 21:56:46 -0800 (PST)
From: <yahootintin-lucene@yahoo.com>
Reply-To: yahootintin-lucene@yahoo.com
Subject: Re: lucene file locking question
To: Lucene Users List <lucene-user@jakarta.apache.org>,
  John Wang <john.wang@gmail.com>
In-Reply-To: <8837fb7704111118211b8d866@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Disabling locking is only recommended for read-only indexes that
aren't being modified.  I think there is a comment in the code
about a good example of this being an index you read off of a
CD-ROM.

--- John Wang <john.wang@gmail.com> wrote:

> Hi folks:
> 
>       My application builds a super-index around the lucene
> index,
> e.g. stores some additional information outside of lucene.
> 
>        I am using my own locking outside of the lucene index
> via
> FileLock object in the jdk1.4 nio package.
> 
>        My code does the following:
> 
> FileLock lock=null;
> try{
>         lock=myLockFileChannel.lock();
> 
>         indexing into lucene;
> 
>         indexing additional information;
> 
> }
> 
> finally{
>       try{
>           commit lucene index by closing the IndexWriter
> instance.
>       }
>       finally{
>         if (lock!=null){
>            lock.release();
>         }
>       }
> }
> 
> 
> Now here is the weird thing, say I terminate the process in
> the middle
> of indexing, and run the program again, I would get a "Lock
> obtain
> time out" exception, as long as you delete the stale lock
> file, the
> index remains uncorrupted.
> 
> However, if I turn lucene file lock off since I have a lock
> outside it anyways, 
> (by doing: 
> static{
>     System.setProperty("disableLuceneLocks","true");
>   }
> )
> 
> and do the same thing. Instead I get an unrecoverable
> corrupted index.
> 
> Does lucene lock really guarentee index integrity under this
> kind of
> abuse or am I just getting lucky?
> If so, can someone shine some light on how?
> 
> Thanks in advance
> 
> -John
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11182-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 06:57:31 2004
Return-Path: <lucene-user-return-11182-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67026 invoked from network); 12 Nov 2004 06:57:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 06:57:30 -0000
Received: (qmail 99433 invoked by uid 500); 12 Nov 2004 06:57:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99203 invoked by uid 500); 12 Nov 2004 06:57:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99187 invoked by uid 99); 12 Nov 2004 06:57:26 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.209] (HELO web21323.mail.yahoo.com) (216.136.175.209)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 11 Nov 2004 22:57:26 -0800
Received: (qmail 82033 invoked by uid 60001); 12 Nov 2004 06:57:22 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=FnFT+oZIvH9C5SNIfMBbvSp0RV1il+3TNCwxbxp4m7YKV+LezcQfc1XJk6Qhg+c/BDUSTXcV1WrgN7kNho9Q6wiWT1BEDQ2Nbw9SHJxtCYZdcZ6+BXnSk+D7TIYTxHdQfnJ4Qcy4A/HOk9i58ZNFaQsQ1fgq+c00mPX87BjG0Sg=  ;
Message-ID: <20041112065722.82031.qmail@web21323.mail.yahoo.com>
Received: from [81.182.59.28] by web21323.mail.yahoo.com via HTTP; Thu, 11 Nov 2004 22:57:22 PST
Date: Thu, 11 Nov 2004 22:57:22 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Re: Bug in the BooleanQuery optimizer? ..TooManyClauses
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200411112148.42529@danielnaber.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> That's the point: there is no query optimizer in Lucene.

Sorry, I'm not very much into Lucene's internal Classes, I'm just telling your the viewpoint of a
user. You know my users aren't technicians, so answers like yours won't make them happy.
They will only see that I randomly don't allow them to search (with the 1024 limit). They won't
understand why am I displaying "Please restrict your search a bit more.." when they've just
searched for "dodge AND vip*" and there are only a few documents mathcing this criteria.

So, is the only way to make them able to search happily by setting the max. clause limit to
MaxInt?!



		
__________________________________ 
Do you Yahoo!? 
Check out the new Yahoo! Front Page. 
www.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11183-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 07:10:10 2004
Return-Path: <lucene-user-return-11183-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 73609 invoked from network); 12 Nov 2004 07:10:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 07:10:10 -0000
Received: (qmail 12003 invoked by uid 500); 12 Nov 2004 07:10:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11766 invoked by uid 500); 12 Nov 2004 07:10:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11751 invoked by uid 99); 12 Nov 2004 07:10:05 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.210] (HELO web21324.mail.yahoo.com) (216.136.175.210)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 11 Nov 2004 23:10:05 -0800
Received: (qmail 53641 invoked by uid 60001); 12 Nov 2004 07:09:59 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=VrIgsYMIqVgCDonBZ9zk0XL3mgc9htCUj0bkqvk324Uf0zwdtzjE4xUnqRk/wRFWbsMfBMXYzn6SxllVHFCid/ph7PDUDw+fIFExPIS59Rr7znGIxL0Qyv/3Hv+/lo1Vqyyig45UuUzlx13JEexFnypJWOMAau3nfkhdXodwfDk=  ;
Message-ID: <20041112070959.53639.qmail@web21324.mail.yahoo.com>
Received: from [81.182.59.28] by web21324.mail.yahoo.com via HTTP; Thu, 11 Nov 2004 23:09:59 PST
Date: Thu, 11 Nov 2004 23:09:59 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Phrase search for more than 4 words throws exception in QueryParser
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

How to perform phrase searches for more than four words?

This works well with 1.4.2:
"aa bb cc dd"
I pass the query as a command line parameter on XP: "\"aa bb cc dd\""
QueryParser translates it to: text:aa text:bb text:cc text:dd
Runs, searches, finds proper matches.

This throws exeption in QueryParser:
"aa bb cc dd ee"
I pass the query as a command line parameter on XP: "\"aa bb cc dd ee\""
The exception's text is:
: org.apache.lucene.queryParser.ParseException: Lexical error at line 1, column
13.  Encountered: <EOF> after : "\"aa bb cc dd"

It doesn't matter what words I enter, the only thing that matters is the number of words which can
be four at max.

Regards,
Sanyi


		
__________________________________ 
Do you Yahoo!? 
Check out the new Yahoo! Front Page. 
www.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11184-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 07:44:57 2004
Return-Path: <lucene-user-return-11184-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88342 invoked from network); 12 Nov 2004 07:44:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 07:44:56 -0000
Received: (qmail 42338 invoked by uid 500); 12 Nov 2004 07:44:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42194 invoked by uid 500); 12 Nov 2004 07:44:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42180 invoked by uid 99); 12 Nov 2004 07:44:51 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 11 Nov 2004 23:44:51 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 1097023BC5
	for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 08:45:14 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 03023-01 for <lucene-user@jakarta.apache.org>;
 Fri, 12 Nov 2004 08:45:13 +0100 (CET)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id E2D5D23B8E
	for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 08:45:13 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id iAC7icmA011805
	for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 08:44:38 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id iAC7ic5V011801;
	Fri, 12 Nov 2004 08:44:38 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16788.27109.757558.90893@tanto-xipolis.de>
Date: Fri, 12 Nov 2004 08:44:37 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Phrase search for more than 4 words throws exception in QueryParser
In-Reply-To: <20041112070959.53639.qmail@web21324.mail.yahoo.com>
References: <20041112070959.53639.qmail@web21324.mail.yahoo.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sanyi writes:
> 
> How to perform phrase searches for more than four words?
> 
> This works well with 1.4.2:
> "aa bb cc dd"
> I pass the query as a command line parameter on XP: "\"aa bb cc dd\""
> QueryParser translates it to: text:aa text:bb text:cc text:dd
> Runs, searches, finds proper matches.
> 
> This throws exeption in QueryParser:
> "aa bb cc dd ee"
> I pass the query as a command line parameter on XP: "\"aa bb cc dd ee\""
> The exception's text is:
> : org.apache.lucene.queryParser.ParseException: Lexical error at line 1, column
> 13.  Encountered: <EOF> after : "\"aa bb cc dd"
> 
Works for me on linux:
java -cp lucene.jar org.apache.lucene.queryParser.QueryParser '"a b c d e f g h i j k l m n o p q r s t u v w x y z"'
"a b c d e f g h i j k l m n o p q r s t u v w x y z"

Must be an XP command line problem.

HTH
	Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11185-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 08:41:39 2004
Return-Path: <lucene-user-return-11185-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32816 invoked from network); 12 Nov 2004 08:41:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 08:41:39 -0000
Received: (qmail 16932 invoked by uid 500); 12 Nov 2004 08:41:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16910 invoked by uid 500); 12 Nov 2004 08:41:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16883 invoked by uid 99); 12 Nov 2004 08:41:34 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.24] (HELO smtp-vbr4.xs4all.nl) (194.109.24.24)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 00:41:34 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr4.xs4all.nl (8.12.11/8.12.11) with ESMTP id iAC8fORv042872
	for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 09:41:24 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Bug in the BooleanQuery optimizer? ..TooManyClauses
Date: Fri, 12 Nov 2004 09:41:24 +0100
User-Agent: KMail/1.5.4
References: <20041112065722.82031.qmail@web21323.mail.yahoo.com>
In-Reply-To: <20041112065722.82031.qmail@web21323.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411120941.24180.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Friday 12 November 2004 07:57, Sanyi wrote:
> > That's the point: there is no query optimizer in Lucene.
> 
> Sorry, I'm not very much into Lucene's internal Classes, I'm just telling 
your the viewpoint of a
> user. You know my users aren't technicians, so answers like yours won't make 
them happy.
> They will only see that I randomly don't allow them to search (with the 1024 
limit). They won't
> understand why am I displaying "Please restrict your search a bit more.." 
when they've just
> searched for "dodge AND vip*" and there are only a few documents mathcing 
this criteria.
> 
> So, is the only way to make them able to search happily by setting the max. 
clause limit to
> MaxInt?!

The problem is that there is a lot of freedom in choosing a query, but there
is a limited amount of resources available to search each query.

It is normally possible to reduce the numbers of such complaints a lot 
by imposing a minimum prefix length and eg. doubling or tripling the max. nr.
of clauses.

This reduces the freedom of the users because their queries
must be (a bit) more specific. The actual tradeoff depends on the user
requirements and the time and memory available on the server,
so the users get what they pay for.

Imposing a minimum prefix length can be done by overriding the method
in QueryParser that provides a prefix query.

Regards,
Paul Elschot



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11186-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 09:46:48 2004
Return-Path: <lucene-user-return-11186-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72185 invoked from network); 12 Nov 2004 09:46:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 09:46:48 -0000
Received: (qmail 981 invoked by uid 500); 12 Nov 2004 09:46:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 957 invoked by uid 500); 12 Nov 2004 09:46:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 939 invoked by uid 99); 12 Nov 2004 09:46:43 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.211] (HELO web21325.mail.yahoo.com) (216.136.175.211)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 12 Nov 2004 01:46:43 -0800
Received: (qmail 57213 invoked by uid 60001); 12 Nov 2004 09:46:32 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=tzwkrxyz+STEH3Pq26RAH38yf6Mv5Elvmok221jbhs+3UjYoQVRD/Ci478tr4L3zYgsnY1HjPTCXGTWWPZARh60XIDbkI82MnSjCe98W3jwbzmm0lKdbicyN8rq7Cj8IZGFVTe0IbMyhFS6HseLTJv1tt8eFk/4rXe8CHpDeSRU=  ;
Message-ID: <20041112094632.57211.qmail@web21325.mail.yahoo.com>
Received: from [81.182.59.28] by web21325.mail.yahoo.com via HTTP; Fri, 12 Nov 2004 01:46:32 PST
Date: Fri, 12 Nov 2004 01:46:32 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Re: Phrase search for more than 4 words throws exception in QueryParser
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <16788.27109.757558.90893@tanto-xipolis.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It works for me too on linux. Thanks for the test!

--- Morus Walter <morus.walter@tanto.de> wrote:

> Sanyi writes:
> > 
> > How to perform phrase searches for more than four words?
> > 
> > This works well with 1.4.2:
> > "aa bb cc dd"
> > I pass the query as a command line parameter on XP: "\"aa bb cc dd\""
> > QueryParser translates it to: text:aa text:bb text:cc text:dd
> > Runs, searches, finds proper matches.
> > 
> > This throws exeption in QueryParser:
> > "aa bb cc dd ee"
> > I pass the query as a command line parameter on XP: "\"aa bb cc dd ee\""
> > The exception's text is:
> > : org.apache.lucene.queryParser.ParseException: Lexical error at line 1, column
> > 13.  Encountered: <EOF> after : "\"aa bb cc dd"
> > 
> Works for me on linux:
> java -cp lucene.jar org.apache.lucene.queryParser.QueryParser '"a b c d e f g h i j k l m n o p
> q r s t u v w x y z"'
> "a b c d e f g h i j k l m n o p q r s t u v w x y z"
> 
> Must be an XP command line problem.
> 
> HTH
> 	Morus
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 



		
__________________________________ 
Do you Yahoo!? 
Check out the new Yahoo! Front Page. 
www.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11187-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 10:14:02 2004
Return-Path: <lucene-user-return-11187-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88690 invoked from network); 12 Nov 2004 10:14:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 10:14:02 -0000
Received: (qmail 54903 invoked by uid 500); 12 Nov 2004 10:13:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54609 invoked by uid 500); 12 Nov 2004 10:13:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54596 invoked by uid 99); 12 Nov 2004 10:13:58 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.210] (HELO web21324.mail.yahoo.com) (216.136.175.210)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 12 Nov 2004 02:13:58 -0800
Received: (qmail 88444 invoked by uid 60001); 12 Nov 2004 10:13:53 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=JpJINC9zsT+8UPhhJDw+L0YQ7pLKHYmVd1PtQwiG6EF2oKYQhTeua4DBGeij1F6cjSsP4DNQ01Vd6qBIl6zaEeCL3YOb4rQv6t4X9MFjCpXR6GFaP+8vlycSVrilT5yMYkrtv7G23kJ5nIwkpLrvdQnfy04uh/z1KXjwOEM6lIs=  ;
Message-ID: <20041112101352.88440.qmail@web21324.mail.yahoo.com>
Received: from [81.182.59.28] by web21324.mail.yahoo.com via HTTP; Fri, 12 Nov 2004 02:13:52 PST
Date: Fri, 12 Nov 2004 02:13:52 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Re: Bug in the BooleanQuery optimizer? ..TooManyClauses
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200411120941.24180.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> It is normally possible to reduce the numbers of such complaints a lot 
> by imposing a minimum prefix length

I've alread limited it to a minimum of 5 characters (abcde*).
I can still easily find (for the first try) situations where it starts to search for minutes.
While another 5 char. partial words are searching for a second.
So, this is not a solution at all.

> and eg. doubling or tripling the max. nr. of clauses.

This is the only useful thing I could do and the other way I've found is similar: Unlimiting the
number of clauses, but limiting the memory given for java.
It'll the throw an exception if things are getting too hard for the searcher.

Anyway, this avoids DoS attacks, but results in very poor user interface and search abiliy.
For example: "rareword AND commonfragment*" would still refuse to work.
I won't be able to explain it to my users, since they don't need my technical reasons. They'll
only notice that "dodge AND vip*" fails to search instead of returning 1000 documents.

If I unlimit everything and don't care about possible DoS attacks, it is still poor.
It'll search for "dodge AND vip*" for two minutes, just because "vip*" is too common in the entire
document set.
It doesn't matter that "dodge" is pretty rare and we're AND-ing it with "vip*".



		
__________________________________ 
Do you Yahoo!? 
Check out the new Yahoo! Front Page. 
www.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11188-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 10:41:45 2004
Return-Path: <lucene-user-return-11188-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12743 invoked from network); 12 Nov 2004 10:41:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 10:41:45 -0000
Received: (qmail 7555 invoked by uid 500); 12 Nov 2004 10:41:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7531 invoked by uid 500); 12 Nov 2004 10:41:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7517 invoked by uid 99); 12 Nov 2004 10:41:39 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.194.158.19] (HELO exchange.bvdep.com) (193.194.158.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 02:41:39 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Content-Class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: HTMLParser.getReader returning null
Date: Fri, 12 Nov 2004 11:41:34 +0100
Message-ID: <950FF7DE40C2B64CAF80B564732927E10AB33A@exchange.be.bvd>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: HTMLParser.getReader returning null
Thread-Index: AcTIIwaEQqgarKmQTZaVg9CgTH7k1gAeoSZA
From: "Vanlerberghe, Luc" <Luc.Vanlerberghe@bvdep.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If you use the Field.Text(String name, Reader value) version of the
Field.Text constructor, the field is tokenized and indexed but *not*
stored.  This means you will be able to search and find that document,
but to know the original contents you will have to store a copy of it
elsewhere.

The Field.Text(String name, String value) version does store the
document String itself, so that's probably the origin of the confusion.

> -----Original Message-----
> From: Luke Shannon [mailto:lshannon@hypermedia.com]=20
> Sent: donderdag 11 november 2004 20:17
> To: Lucene Users List
> Subject: HTMLParser.getReader returning null
>=20
> Hello;
>=20
> Things were working fine. I have been re-organizing my code=20
> to drop into QA when I noticed I was no longer getting search=20
> results for my HTML files.
> When I checked things out I confirmed I was still creating=20
> the Documents but realized no content was being indexed.
>=20
>  HTMLParser parser =3D new HTMLParser(f);
>=20
>     // Add the tag-stripped contents as a Reader-valued Text=20
> field so it will
>     // get tokenized and indexed.
>     doc.add(Field.Text("contents", parser.getReader()));
>     System.out.println("The content is " + doc.get("contents"));
>=20
> The SOP line above outputs a null where the contents used to=20
> be. Any seen this before?
>=20
> Thanks,
>=20
> Luke
>=20
> ----- Original Message -----
> From: "Will Allen" <wallen@Cyveillance.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Thursday, November 11, 2004 1:59 PM
> Subject: RE: Bug in the BooleanQuery optimizer? ..TooManyClauses
>=20
>=20
> Any wildcard search will automatically expand your query to=20
> the number of
> terms it find in the index that suit the wildcard.
>=20
> For example:
>=20
> wild*, would become wild OR wilderness OR wildman etc for=20
> each of the terms
> that exist in your index.
>=20
> It is because of this, that you quickly reach the 1024 limit=20
> of clauses.  I
> automatically set it to max int with the following line:
>=20
> BooleanQuery.setMaxClauseCount( Integer.MAX_VALUE );
>=20
>=20
> -----Original Message-----
> From: Sanyi [mailto:need4sid@yahoo.com]
> Sent: Thursday, November 11, 2004 6:46 AM
> To: lucene-user@jakarta.apache.org
> Subject: Bug in the BooleanQuery optimizer? ..TooManyClauses
>=20
>=20
> Hi!
>=20
> First of all, I've read about BooleanQuery$TooManyClauses, so=20
> I know that it
> has a 1024 Clauses
> limit by default which is good enough for me, but I still=20
> think it works
> strange.
>=20
> Example:
> I have an index with about 20Million documents.
> Let's say that there is about 3000 variants in the entire=20
> document set of
> this word mask: cab*
> Let's say that about 500 documents are containing the word: spectrum
> Now, when I search for "cab* AND spectrum", I don't expect it=20
> to throw an
> exception.
> It should first restrict the search for the 500 documents=20
> containing the
> word "spectrum", then it
> should collect the variants of "cab*" withing these=20
> documents, which turns
> out in two or three
> variants of "cab*" (cable, cables, maybe some more) and the=20
> search should
> return let's say 10
> documents.
>=20
> Similar example: When I search for "cab* AND nonexistingword" it still
> throws a TooManyClauses
> exception instead of saying "No results", since there is no
> "nonexistingword" in my document set,
> so it doesn't even have to start collecting the variations of "cab*".
>=20
> Is there any path for this issue?
> Thank you for your time!
>=20
> Sanyi
> (I'm using: lucene 1.4.2)
>=20
> p.s.: Sorry for re-sending this message, I was first sending it as an
> accidental reply to a wrong thread..
>=20
>=20
>=20
> __________________________________
> Do you Yahoo!?
> Check out the new Yahoo! Front Page.
> www.yahoo.com
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>=20
>=20

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11189-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 12:20:14 2004
Return-Path: <lucene-user-return-11189-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67906 invoked from network); 12 Nov 2004 12:20:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 12:20:14 -0000
Received: (qmail 59611 invoked by uid 500); 12 Nov 2004 12:20:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59573 invoked by uid 500); 12 Nov 2004 12:20:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 59556 invoked by uid 99); 12 Nov 2004 12:20:10 -0000
Received-SPF: pass (hermes.apache.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.189] (HELO web25804.mail.ukl.yahoo.com) (217.12.10.189)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 12 Nov 2004 04:20:10 -0800
Received: (qmail 4835 invoked by uid 60001); 12 Nov 2004 12:20:01 -0000
Message-ID: <20041112122001.4826.qmail@web25804.mail.ukl.yahoo.com>
Received: from [141.99.131.134] by web25804.mail.ukl.yahoo.com via HTTP; Fri, 12 Nov 2004 13:20:01 CET
Date: Fri, 12 Nov 2004 13:20:01 +0100 (CET)
From: Miro Max <kikiriki2k@yahoo.de>
Subject: Faster highlighting with TermPositionVectors PROBLEM
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

i'm trying to implement this Method and i need some
help.

i've downloaded the new lucene-cvs version, compiled
it with ant and i get the following error message:

The method getOffsets(int) is undefined for the type
Object.

Can anyone tell me why?

thx

miro


	

	
		
___________________________________________________________
Gesendet von Yahoo! Mail - Jetzt mit 100MB Speicher kostenlos - Hier anmelden: http://mail.yahoo.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11190-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 14:11:36 2004
Return-Path: <lucene-user-return-11190-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22437 invoked from network); 12 Nov 2004 14:11:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 14:11:35 -0000
Received: (qmail 26743 invoked by uid 500); 12 Nov 2004 14:11:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26712 invoked by uid 500); 12 Nov 2004 14:11:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26693 invoked by uid 99); 12 Nov 2004 14:11:30 -0000
Received-SPF: pass (hermes.apache.org: domain of giulio.cesare@gmail.com designates 64.233.184.194 as permitted sender)
Received: from [64.233.184.194] (HELO wproxy.gmail.com) (64.233.184.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 06:11:30 -0800
Received: by wproxy.gmail.com with SMTP id 71so269643wri
        for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 06:11:26 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=OOmL7nra5Ygm/ek5a2TLwhkv94eCOS1dEhNyQAyCMJ2+LUCIwGIBo/ephRnKcAf6sVoRRmAE44udeCzl2VmrKpbsfEqWxZsor7CqIcGzL0Z4oM6GFKVDpm+T8lw25y8loagIEzeCmXc4fmLuWWHZ9zcKYtlCJw7xtubi0+WkCY4=
Received: by 10.54.18.78 with SMTP id 78mr275138wrr;
        Fri, 12 Nov 2004 06:11:26 -0800 (PST)
Received: by 10.54.41.42 with HTTP; Fri, 12 Nov 2004 06:11:26 -0800 (PST)
Message-ID: <ff737ac30411120611c1a5fc@mail.gmail.com>
Date: Fri, 12 Nov 2004 15:11:26 +0100
From: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
Reply-To: Giulio Cesare Solaroli <giulio.cesare@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Bug in the BooleanQuery optimizer? ..TooManyClauses
Cc: Lucene Developers List <lucene-dev@jakarta.apache.org>
In-Reply-To: <20041111195732.70523.qmail@web21325.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <63434C14F9A6F74CB36B85033E4C30CA5BFC58@hermes.corp.cyveillance.com>
	 <20041111195732.70523.qmail@web21325.mail.yahoo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

I am cross-posting my reply also to developer list because I think some of
my arguments belong there.

I was thinking about extending somehow the PhraseQuery analyzer in
order to better handle wild character expansion.

Sanyi idea to "optimize" the expansion of the terms to include just the ones
meaningful for the subset of documents found by other part of the
query is intriguing, but probably very difficult to implement.

My idea will probably more easy to implement, even if the final result
could be not 100% exact, it could probably be good enough. The idea is
to let the developer handle the boolean query limit in the following
way:
- leave the current implementation, raising an exception;
- handle the exception and limit the boolean query to the first 1024
(or what ever the limit is) terms;
- select, between the possible terms, only the first 1024 (or what
ever the limit is) more meaningful ones, leaving out all the others.

I had this idea watching how some terms where expanded against our
index. Many of them where clearly wrong words, filenames, or any other
kind of irrelevant info that was not easy to remove before indexing.

This solution changes the return results in a subtle way (even if only
when the current implementation is throwing an exception) and so the
developer should be very careful to report to her users that the query
could have left out some documents.

The "most meaningful", in this context, could be proportionate to the
number of documents having that term in the whole index, as a first
approximation.

Does this idea sounds interesting to any of you?

Regards,

Giulio Cesare Solaroli



On Thu, 11 Nov 2004 11:57:32 -0800 (PST), Sanyi <need4sid@yahoo.com> wrote:
> Yes, I understand all of this, but I don't want to set it to MaxInt, since it can easily lead to
> (even accidental) DoS attacks.
> 
> What I'm saying is that there is no reason for the optimizer to expand wild* to more than 1024
> variations when I search for "somerareword AND wild*", since somerareword is only present in let's
> say 100 documents, so wild* should only expand to words beginning with "wild" in those 100
> documents, then it should work fine with the default 1024 clause limit.
> 
> But it doesn't, so I can choose between unuseable queries or accidental DoS attacks.
> 
> 
> 
> --- Will Allen <wallen@Cyveillance.com> wrote:
> 
> > Any wildcard search will automatically expand your query to the number of terms it find in the
> > index that suit the wildcard.
> >
> > For example:
> >
> > wild*, would become wild OR wilderness OR wildman etc for each of the terms that exist in your
> > index.
> >
> > It is because of this, that you quickly reach the 1024 limit of clauses.  I automatically set it
> > to max int with the following line:
> >
> > BooleanQuery.setMaxClauseCount( Integer.MAX_VALUE );
> >
> >
> > -----Original Message-----
> > From: Sanyi [mailto:need4sid@yahoo.com]
> > Sent: Thursday, November 11, 2004 6:46 AM
> > To: lucene-user@jakarta.apache.org
> > Subject: Bug in the BooleanQuery optimizer? ..TooManyClauses
> >
> >
> > Hi!
> >
> > First of all, I've read about BooleanQuery$TooManyClauses, so I know that it has a 1024 Clauses
> > limit by default which is good enough for me, but I still think it works strange.
> >
> > Example:
> > I have an index with about 20Million documents.
> > Let's say that there is about 3000 variants in the entire document set of this word mask: cab*
> > Let's say that about 500 documents are containing the word: spectrum
> > Now, when I search for "cab* AND spectrum", I don't expect it to throw an exception.
> > It should first restrict the search for the 500 documents containing the word "spectrum", then
> > it
> > should collect the variants of "cab*" withing these documents, which turns out in two or three
> > variants of "cab*" (cable, cables, maybe some more) and the search should return let's say 10
> > documents.
> >
> > Similar example: When I search for "cab* AND nonexistingword" it still throws a TooManyClauses
> > exception instead of saying "No results", since there is no "nonexistingword" in my document
> > set,
> > so it doesn't even have to start collecting the variations of "cab*".
> >
> > Is there any path for this issue?
> > Thank you for your time!
> >
> > Sanyi
> > (I'm using: lucene 1.4.2)
> >
> > p.s.: Sorry for re-sending this message, I was first sending it as an accidental reply to a
> > wrong thread..
> >
> >
> >
> > __________________________________
> > Do you Yahoo!?
> > Check out the new Yahoo! Front Page.
> > www.yahoo.com
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> 
> __________________________________
> Do you Yahoo!?
> Check out the new Yahoo! Front Page.
> www.yahoo.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11191-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 14:33:35 2004
Return-Path: <lucene-user-return-11191-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43750 invoked from network); 12 Nov 2004 14:33:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 14:33:35 -0000
Received: (qmail 62214 invoked by uid 500); 12 Nov 2004 14:33:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62192 invoked by uid 500); 12 Nov 2004 14:33:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62177 invoked by uid 99); 12 Nov 2004 14:33:30 -0000
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [207.14.217.166] (HELO server) (207.14.217.166)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 06:33:30 -0800
Received: from [10.0.0.108] ([64.140.1.226])
	by server (8.12.8/8.12.8) with SMTP id iACCQSCV009947
	for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 07:26:29 -0500
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <4193F705.3030103@sun.com>
References: <4193F705.3030103@sun.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CFA37756-34B7-11D9-AF6B-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: getting error message
Date: Fri, 12 Nov 2004 07:33:25 -0700
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Nov 11, 2004, at 4:34 PM, Hetan Shah wrote:
> Does anyone know what does the following error message mean?

Yeah, it means an object you're trying to access is null.  :))

You'll have to look at the JSP and see what object that is to  
troubleshoot.

	Erik

>
>
> TIA.
> -H
>
> root cause
>
> java.lang.NullPointerException
> 	at  
> org.apache.jsp.searchResults_jsp._jspService(searchResults_jsp.java: 
> 627)
> 	at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:137)
> 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
> 	at  
> org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.j 
> ava:210)
> 	at  
> org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java: 
> 295)
> 	at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:241)
> 	at javax.servlet.http.HttpServlet.service(HttpServlet.java:853)
> 	at  
> org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Applic 
> ationFilterChain.java:247)
> 	at  
> org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFil 
> terChain.java:193)
> 	at  
> org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperVal 
> ve.java:256)
> 	at  
> org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext. 
> invokeNext(StandardPipeline.java:643)
> 	at  
> org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java: 
> 480)
> 	at  
> org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
> 	at  
> org.apache.catalina.core.StandardContextValve.invoke(StandardContextVal 
> ve.java:191)
> 	at  
> org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext. 
> invokeNext(StandardPipeline.java:643)
> 	at  
> org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java: 
> 480)
> 	at  
> org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
> 	at  
> org.apache.catalina.core.StandardContext.invoke(StandardContext.java: 
> 2417)
> 	at  
> org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.jav 
> a:180)
> 	at  
> org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext. 
> invokeNext(StandardPipeline.java:643)
> 	at  
> org.apache.catalina.valves.ErrorDispatcherValve.invoke(ErrorDispatcherV 
> alve.java:171)
> 	at  
> org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext. 
> invokeNext(StandardPipeline.java:641)
> 	at  
> org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.jav 
> a:172)
> 	at  
> org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext. 
> invokeNext(StandardPipeline.java:641)
> 	at  
> org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java: 
> 480)
> 	at  
> org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
> 	at  
> org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve 
> .java:174)
> 	at  
> org.apache.catalina.core.StandardPipeline$StandardPipelineValveContext. 
> invokeNext(StandardPipeline.java:643)
> 	at  
> org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java: 
> 480)
> 	at  
> org.apache.catalina.core.ContainerBase.invoke(ContainerBase.java:995)
> 	at  
> org.apache.coyote.tomcat4.CoyoteAdapter.service(CoyoteAdapter.java: 
> 193)
> 	at  
> org.apache.coyote.http11.Http11Processor.process(Http11Processor.java: 
> 781)
> 	at  
> org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process 
> Connection(Http11Protocol.java:549)
> 	at  
> org.apache.tomcat.util.net.TcpWorkerThread.runIt(PoolTcpEndpoint.java: 
> 589)
> 	at  
> org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPoo 
> l.java:666)
> 	at java.lang.Thread.run(Thread.java:534)
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11192-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 14:50:41 2004
Return-Path: <lucene-user-return-11192-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 52941 invoked from network); 12 Nov 2004 14:50:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 14:50:41 -0000
Received: (qmail 2411 invoked by uid 500); 12 Nov 2004 14:50:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2349 invoked by uid 500); 12 Nov 2004 14:50:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2335 invoked by uid 99); 12 Nov 2004 14:50:37 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 06:50:37 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Fri, 12 Nov 2004 09:51:17 -0500
Message-ID: <059401c4c8c7$10306270$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "sergiu gordea" <gsergiu@ifit.uni-klu.ac.at>,
	"Lucene Users List" <lucene-user@jakarta.apache.org>
References: <63434C14F9A6F74CB36B85033E4C30CA5BFC58@hermes.corp.cyveillance.com> <048c01c4c823$0c9e7ba0$7703d00a@hypermedia.com> <419476B8.3050108@ifit.uni-klu.ac.at>
Subject: Re: HTMLParser.getReader returning null
Date: Fri, 12 Nov 2004 09:51:16 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 12 Nov 2004 14:51:17.0064 (UTC) FILETIME=[104B6480:01C4C8C7]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi;

I am using the HTMLParser that comes with the latest version of Lucene (in
the demo).

Here is the import line:

import org.apache.lucene.demo.html.HTMLParser;

If you have lucene-demos-1.4-final.jar in your class path the system will
find the Parser Class.

I am happy with the results.

Let me know if you need anything else.

L


----- Original Message ----- 
From: "sergiu gordea" <gsergiu@ifit.uni-klu.ac.at>
To: <lshannon@hypermedia.com>
Sent: Friday, November 12, 2004 3:39 AM
Subject: Re: HTMLParser.getReader returning null


> Luke Shannon wrote:
>
>  Hi,
>
>  May I ask you which library you are using for parsing html pages?
>   I need to index html pages and I want to use a good parser to
> eliminate the html tags.
>   Can you recomend me a simple parser that has a demo?
>
>  Thanks,
>
>   Sergiu
>
> >Hello;
> >
> >Things were working fine. I have been re-organizing my code to drop into
QA
> >when I noticed I was no longer getting search results for my HTML files.
> >When I checked things out I confirmed I was still creating the Documents
but
> >realized no content was being indexed.
> >
> > HTMLParser parser = new HTMLParser(f);
> >
> >    // Add the tag-stripped contents as a Reader-valued Text field so it
> >will
> >    // get tokenized and indexed.
> >    doc.add(Field.Text("contents", parser.getReader()));
> >    System.out.println("The content is " + doc.get("contents"));
> >
> >The SOP line above outputs a null where the contents used to be. Any seen
> >this before?
> >
> >Thanks,
> >
> >Luke
> >
> >----- Original Message ----- 
> >From: "Will Allen" <wallen@Cyveillance.com>
> >To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >Sent: Thursday, November 11, 2004 1:59 PM
> >Subject: RE: Bug in the BooleanQuery optimizer? ..TooManyClauses
> >
> >
> >Any wildcard search will automatically expand your query to the number of
> >terms it find in the index that suit the wildcard.
> >
> >For example:
> >
> >wild*, would become wild OR wilderness OR wildman etc for each of the
terms
> >that exist in your index.
> >
> >It is because of this, that you quickly reach the 1024 limit of clauses.
I
> >automatically set it to max int with the following line:
> >
> >BooleanQuery.setMaxClauseCount( Integer.MAX_VALUE );
> >
> >
> >-----Original Message-----
> >From: Sanyi [mailto:need4sid@yahoo.com]
> >Sent: Thursday, November 11, 2004 6:46 AM
> >To: lucene-user@jakarta.apache.org
> >Subject: Bug in the BooleanQuery optimizer? ..TooManyClauses
> >
> >
> >Hi!
> >
> >First of all, I've read about BooleanQuery$TooManyClauses, so I know that
it
> >has a 1024 Clauses
> >limit by default which is good enough for me, but I still think it works
> >strange.
> >
> >Example:
> >I have an index with about 20Million documents.
> >Let's say that there is about 3000 variants in the entire document set of
> >this word mask: cab*
> >Let's say that about 500 documents are containing the word: spectrum
> >Now, when I search for "cab* AND spectrum", I don't expect it to throw an
> >exception.
> >It should first restrict the search for the 500 documents containing the
> >word "spectrum", then it
> >should collect the variants of "cab*" withing these documents, which
turns
> >out in two or three
> >variants of "cab*" (cable, cables, maybe some more) and the search should
> >return let's say 10
> >documents.
> >
> >Similar example: When I search for "cab* AND nonexistingword" it still
> >throws a TooManyClauses
> >exception instead of saying "No results", since there is no
> >"nonexistingword" in my document set,
> >so it doesn't even have to start collecting the variations of "cab*".
> >
> >Is there any path for this issue?
> >Thank you for your time!
> >
> >Sanyi
> >(I'm using: lucene 1.4.2)
> >
> >p.s.: Sorry for re-sending this message, I was first sending it as an
> >accidental reply to a wrong thread..
> >
> >
> >
> >__________________________________
> >Do you Yahoo!?
> >Check out the new Yahoo! Front Page.
> >www.yahoo.com
> >
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11193-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 14:52:54 2004
Return-Path: <lucene-user-return-11193-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 53964 invoked from network); 12 Nov 2004 14:52:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 14:52:54 -0000
Received: (qmail 5015 invoked by uid 500); 12 Nov 2004 14:52:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4987 invoked by uid 500); 12 Nov 2004 14:52:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4971 invoked by uid 99); 12 Nov 2004 14:52:49 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 06:52:49 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Fri, 12 Nov 2004 09:53:31 -0500
Message-ID: <05a201c4c8c7$602856c0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <950FF7DE40C2B64CAF80B564732927E10AB33A@exchange.be.bvd>
Subject: Re: HTMLParser.getReader returning null
Date: Fri, 12 Nov 2004 09:53:30 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 12 Nov 2004 14:53:31.0213 (UTC) FILETIME=[6040E7D0:01C4C8C7]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ah. That would explain it. Thank you Luc.

----- Original Message ----- 
From: "Vanlerberghe, Luc" <Luc.Vanlerberghe@bvdep.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Friday, November 12, 2004 5:41 AM
Subject: RE: HTMLParser.getReader returning null


If you use the Field.Text(String name, Reader value) version of the
Field.Text constructor, the field is tokenized and indexed but *not*
stored.  This means you will be able to search and find that document,
but to know the original contents you will have to store a copy of it
elsewhere.

The Field.Text(String name, String value) version does store the
document String itself, so that's probably the origin of the confusion.

> -----Original Message-----
> From: Luke Shannon [mailto:lshannon@hypermedia.com] 
> Sent: donderdag 11 november 2004 20:17
> To: Lucene Users List
> Subject: HTMLParser.getReader returning null
> 
> Hello;
> 
> Things were working fine. I have been re-organizing my code 
> to drop into QA when I noticed I was no longer getting search 
> results for my HTML files.
> When I checked things out I confirmed I was still creating 
> the Documents but realized no content was being indexed.
> 
>  HTMLParser parser = new HTMLParser(f);
> 
>     // Add the tag-stripped contents as a Reader-valued Text 
> field so it will
>     // get tokenized and indexed.
>     doc.add(Field.Text("contents", parser.getReader()));
>     System.out.println("The content is " + doc.get("contents"));
> 
> The SOP line above outputs a null where the contents used to 
> be. Any seen this before?
> 
> Thanks,
> 
> Luke
> 
> ----- Original Message -----
> From: "Will Allen" <wallen@Cyveillance.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Thursday, November 11, 2004 1:59 PM
> Subject: RE: Bug in the BooleanQuery optimizer? ..TooManyClauses
> 
> 
> Any wildcard search will automatically expand your query to 
> the number of
> terms it find in the index that suit the wildcard.
> 
> For example:
> 
> wild*, would become wild OR wilderness OR wildman etc for 
> each of the terms
> that exist in your index.
> 
> It is because of this, that you quickly reach the 1024 limit 
> of clauses.  I
> automatically set it to max int with the following line:
> 
> BooleanQuery.setMaxClauseCount( Integer.MAX_VALUE );
> 
> 
> -----Original Message-----
> From: Sanyi [mailto:need4sid@yahoo.com]
> Sent: Thursday, November 11, 2004 6:46 AM
> To: lucene-user@jakarta.apache.org
> Subject: Bug in the BooleanQuery optimizer? ..TooManyClauses
> 
> 
> Hi!
> 
> First of all, I've read about BooleanQuery$TooManyClauses, so 
> I know that it
> has a 1024 Clauses
> limit by default which is good enough for me, but I still 
> think it works
> strange.
> 
> Example:
> I have an index with about 20Million documents.
> Let's say that there is about 3000 variants in the entire 
> document set of
> this word mask: cab*
> Let's say that about 500 documents are containing the word: spectrum
> Now, when I search for "cab* AND spectrum", I don't expect it 
> to throw an
> exception.
> It should first restrict the search for the 500 documents 
> containing the
> word "spectrum", then it
> should collect the variants of "cab*" withing these 
> documents, which turns
> out in two or three
> variants of "cab*" (cable, cables, maybe some more) and the 
> search should
> return let's say 10
> documents.
> 
> Similar example: When I search for "cab* AND nonexistingword" it still
> throws a TooManyClauses
> exception instead of saying "No results", since there is no
> "nonexistingword" in my document set,
> so it doesn't even have to start collecting the variations of "cab*".
> 
> Is there any path for this issue?
> Thank you for your time!
> 
> Sanyi
> (I'm using: lucene 1.4.2)
> 
> p.s.: Sorry for re-sending this message, I was first sending it as an
> accidental reply to a wrong thread..
> 
> 
> 
> __________________________________
> Do you Yahoo!?
> Check out the new Yahoo! Front Page.
> www.yahoo.com
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11194-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 15:38:43 2004
Return-Path: <lucene-user-return-11194-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84419 invoked from network); 12 Nov 2004 15:38:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 15:38:43 -0000
Received: (qmail 4324 invoked by uid 500); 12 Nov 2004 15:38:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4305 invoked by uid 500); 12 Nov 2004 15:38:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4288 invoked by uid 99); 12 Nov 2004 15:38:39 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 07:38:38 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iACFcYJ13575
	for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 09:38:34 -0600 (CST)
Subject: Re: Lucene : avoiding locking
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <055201c4c84f$30c1df00$7703d00a@hypermedia.com>
References: <20041111235654.83806.qmail@web41006.mail.yahoo.com>
	 <055201c4c84f$30c1df00$7703d00a@hypermedia.com>
Content-Type: text/plain
Message-Id: <1100273901.2886.4.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Fri, 12 Nov 2004 09:38:21 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Luke,

I also integrated Lucene into a content management application with
incremental updates and ran into the same problem you did.

You need to make sure only one process (which means, no multiple copies
of the application writing to the index simultaneously) or thread ever
writes to the index. That includes deletes as in your code below, so
make sure that is synchronized, too.

Also, you will find that opening and closing the index for writing is
very costly, especially on a large index, so it pays to batch up all
changes in a transaction (inserts and deletes) together in one go at the
Lucene index. If this still isn't enough, you can batch up 5 minutes
worth of changes and apply them at once. We haven't got to that point
yet.

I am curious, though, how many people on this list are using Lucene in
the incremental update case. Most examples I've seen all assume batch
indexing.

Regards,

Luke Francl



On Thu, 2004-11-11 at 18:33, Luke Shannon wrote:
> Syncronizing the method didn't seem to help. The lock is being detected
> right here in the code:
> 
> while (uidIter.term() != null
>       && uidIter.term().field() == "uid"
>       && uidIter.term().text().compareTo(uid) < 0) {
>      //delete stale docs
>      if (deleting) {
>       reader.delete(uidIter.term());
>      }
>      uidIter.next();
>     }
> 
> This runs fine on my own site so I am confused. For now I think I am going
> to remove the deleting of "stale" files etc and just rebuild the index each
> time to see what happens.
> 
> ----- Original Message ----- 
> From: <yahootintin-lucene@yahoo.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Thursday, November 11, 2004 6:56 PM
> Subject: Re: Lucene : avoiding locking
> 
> 
> > I'm working on a similar project...
> > Make sure that only one call to the index method is occuring at
> > a time.  Synchronizing that method should do it.
> >
> > --- Luke Shannon <lshannon@hypermedia.com> wrote:
> >
> > > Hi All;
> > >
> > > I have hit a snag in my Lucene integration and don't know what
> > > to do.
> > >
> > >  My company has a content management product. Each time
> > > someone changes the
> > >  directory structure or a file with in it that portion of the
> > > site needs to
> > >  be re-indexed so the changes are reflected in future searches
> > > (indexing
> > > must
> > >  happen during run time).
> > >
> > >  I have written a Indexer class with a static Index() method.
> > > The idea is
> > > too
> > >  call the method every time something changes and the index
> > > needs to be
> > >  re-examined. I am hoping the logic put in by Doug Cutting
> > > surrounding the
> > >  UID will make indexing efficient enough to be called so
> > > frequently.
> > >
> > >  This class works great when I tested it on my own little site
> > > (I have about
> > >  2000 file). But when I drop the functionality into the QA
> > > environment I get
> > >  a locking error.
> > >
> > >  I can't access the stack trace, all I can get at is a log
> > > file the
> > >  application writes too. Here is the section my class wrote.
> > > It was right in
> > >  the middle of indexing and bang lock issue.
> > >
> > >  I don't know if the problem is in my code or something in the
> > > existing
> > >  application.
> > >
> > >  Error Message:
> > >  ENTER|SearchEventProcessor.visit(ContentNodeDeleteEvent)
> > >  |INFO|INDEXING INFO: Start Indexing new content.
> > >  |INFO|INDEXING INFO: Index Folder Did Not Exist. Start
> > > Creation Of New
> > > Index
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > comparisions
> > >  |INFO|INDEXING ERROR: Unable to index new content Lock obtain
> > > timed out:
> > >
> > >
> >
> Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
> > >  10f7fe8-write.lock
> > >
> > > |ENTER|UpdateCacheEventProcessor.visit(ContentNodeDeleteEvent)
> > >
> > >  Here is my code. You will recognize it pretty much as the
> > > IndexHTML class
> > >  from the Lucene demo written by Doug Cutting. I have put a
> > > ton of comments
> > >  in a attempt to understand what is going on.
> > >
> > >  Any help would be appreciated.
> > >
> > >  Luke
> > >
> > >  package com.fbhm.bolt.search;
> > >
> > >  /*
> > >   * Created on Nov 11, 2004
> > >   *
> > >   * This class will create a single index file for the Content
> > >   * Management System (CMS). It contains logic to ensure
> > >   * indexing is done "intelligently". Based on IndexHTML.java
> > >   * from the demo folder that ships with Lucene
> > >   */
> > >
> > >  import java.io.File;
> > >  import java.io.IOException;
> > >  import java.util.Arrays;
> > >  import java.util.Date;
> > >
> > >  import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > >  import org.apache.lucene.document.Document;
> > >  import org.apache.lucene.index.IndexReader;
> > >  import org.apache.lucene.index.IndexWriter;
> > >  import org.apache.lucene.index.Term;
> > >  import org.apache.lucene.index.TermEnum;
> > >  import org.pdfbox.searchengine.lucene.LucenePDFDocument;
> > >  import org.apache.lucene.demo.HTMLDocument;
> > >
> > >  import com.alaia.common.debug.Trace;
> > >  import com.alaia.common.util.AppProperties;
> > >
> > >  /**
> > >   * @author lshannon Description: <br
> > >   *   This class is used to index a content folder. It
> > > contains logic to
> > >   *   ensure only new or documents that have been modified
> > > since the last
> > >   *   search are indexed. <br
> > >   *   Based on code writen by Doug Cutting in the IndexHTML
> > > class found in
> > >   *   the Lucene demo
> > >   */
> > >  public class Indexer {
> > >   //true during deletion pass, this is when the index already
> > > exists
> > >   private static boolean deleting = false;
> > >
> > >   //object to read existing indexes
> > >   private static IndexReader reader;
> > >
> > >   //object to write to the index folder
> > >   private static IndexWriter writer;
> > >
> > >   //this will be used to write the index file
> > >   private static TermEnum uidIter;
> > >
> > >   /*
> > >    * This static method does all the work, the end result is
> > > an up-to-date
> > >  index folder
> > >   */
> > >   public static void Index() {
> > >    //we will assume to start the index has been created
> > >    boolean create = true;
> > >    //set the name of the index file
> > >    String indexFileLocation =
> > >
> > >
> > AppProperties.getPropertyAsString("bolt.search.siteIndex.index.root");
> > >    //set the name of the content folder
> > >    String contentFolderLocation =
> > >  AppProperties.getPropertyAsString("site.root");
> > >    //manage whether the index needs to be created or not
> > >    File index = new File(indexFileLocation);
> > >    File root = new File(contentFolderLocation);
> > >    //the index file indicated exists, we need an incremental
> > > update of the
> > >    // index
> > >    if (index.exists()) {
> > >     Trace.TRACE("INDEXING INFO: An index folder exists at: " +
> > >  indexFileLocation);
> > >     deleting = true;
> > >     create = false;
> > >     try {
> > >      //this version of index docs is able to execute the
> > > incremental
> > >      // update
> > >      indexDocs(root, indexFileLocation, create);
> > >     } catch (Exception e) {
> > >      //we were unable to do the incremental update
> > >      Trace.TRACE("INDEXING ERROR: Unable to execute
> > > incremental update "
> > >          + e.getMessage());
> > >     }
> > >     //after exiting this loop the index should be current with
> > > content
> > >     Trace.TRACE("INDEXING INFO: Incremental update
> > > completed.");
> > >    }
> > >    try {
> > >     //create the writer
> > >     writer = new IndexWriter(index, new StandardAnalyzer(),
> > > create);
> > >     //configure the writer
> > >     writer.mergeFactor = 10000;
> > >     writer.maxFieldLength = 100000;
> > >     try {
> > >      //get the start date
> > >      Date start = new Date();
> > >      //call the indexDocs method, this time we will add new
> > >      // documents
> > >      Trace.TRACE("INDEXING INFO: Start Indexing new
> > > content.");
> > >      indexDocs(root, indexFileLocation, create);
> > >      Trace.TRACE("INDEXING INFO: Indexing new content
> > > complete.");
> > >      //optimize the index
> > >      writer.optimize();
> > >      //close the writer
> > >      writer.close();
> > >      //get the end date
> > >      Date end = new Date();
> > >      long totalTime = end.getTime() - start.getTime();
> > >      Trace.TRACE("INDEXING INFO: All Indexing Operations
> > > Completed in "
> > >          + totalTime + " milliseconds");
> > >     } catch (Exception e1) {
> > >      //unable to add new documents
> > >      Trace.TRACE("INDEXING ERROR: Unable to index new content
> > > "
> > >          + e1.getMessage());
> > >     }
> > >    } catch (IOException e) {
> > >     Trace.TRACE("INDEXING ERROR: Unable to create IndexWriter
> > > "
> > >       + e.getMessage());
> > >    }
> > >   }
> > >
> > >   /*
> > >    * Walk directory hierarchy in uid order, while keeping uid
> > > iterator from
> > >  /*
> > >    * existing index in sync. Mismatches indicate one of: (a)
> > > old documents
> > > to
> > >  /*
> > >    * be deleted; (b) unchanged documents, to be left alone; or
> > > (c) new /*
> > >    * documents, to be indexed.
> > >    */
> > >
> > >   private static void indexDocs(File file, String index,
> > > boolean create)
> > >     throws Exception {
> > >    //the index already exists we do an incremental update
> > >    if (!create) {
> > >     Trace.TRACE("INDEXING INFO: Incremental Update Request
> > > Confirmed");
> > >     //open existing index
> > >     reader = IndexReader.open(index);
> > >     //this gets an enummeration of uid terms
> > >     uidIter = reader.terms(new Term("uid", ""));
> > >     //jump to the index method that does the work
> > >     //this will use the Iteration above and does
> > >     //all the "smart" indexing
> > >     indexDocs(file);
> > >     //this will be true everytime the index already existed
> > >     //we are not going to delete documents that are old
> > >     if (deleting) {
> > >      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> > > Started. All
> > >  Deleted Docs will be listed.");
> > >      while (uidIter.term() != null
> > >        && uidIter.term().field() == "uid") {
> > >       //basically we are deleting all the document we have
> > >       // indexed before
> > >       Trace.TRACE("INDEXING INFO: Deleting document "
> > >         + HTMLDocument.uid2url(uidIter.term().text()));
> > >       //delete the term from the reader
> > >       reader.delete(uidIter.term());
> > >       //go to the nextfield
> > >       uidIter.next();
> > >      }
> > >      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> > > Completed");
> > >      //turn off the deleting flag
> > >      deleting = false;
> > >     }//close the deleting branch
> > >     //close the enummeration
> > >     uidIter.close(); // close uid iterator
> > >     //close the reader
> > >     reader.close(); // close existing index
> > >
> > >    }
> > >    //we go here is the index already existed
> > >    else {
> > >     Trace.TRACE("INDEXING INFO: Index Folder Did Not Exist.
> > > Start Creation
> > > Of
> > >  New Index");
> > >     // don't have exisiting
> > >     indexDocs(file);
> > >    }
> > >   }
> > >
> > >   private static void indexDocs(File file) throws Exception {
> > >    //check if we are at the top of a directory
> > >    if (file.isDirectory()) {
> > >     //get a list of the files
> > >     String[] files = file.list();
> > >     //sort them
> > >     Arrays.sort(files);
> > >     //index each file in the directory recursively
> > >     //we keep repeating this logic until we hit a
> > >     //file
> > >     for (int i = 0; i < files.length; i++)
> > >      //pass in the parent directory and the current file
> > >      //into the file constructor and index
> > >      indexDocs(new File(file, files[i]));
> > >
> > >    }
> > >    //we have an actual file, so we need to consider the
> > >    //file extensions so the correct Document is created
> > >    else if (file.getPath().endsWith(".html")
> > >      || file.getPath().endsWith(".htm")
> > >      || file.getPath().endsWith(".txt")
> > >      || file.getPath().endsWith(".doc")
> > >      || file.getPath().endsWith(".xml")
> > >      || file.getPath().endsWith(".pdf")) {
> > >
> > >     //if this is reached it means we were in the midst
> > >     //of an incremental update
> > >     if (uidIter != null) {
> > >      //get the uid for the document we are on
> > >      String uid = HTMLDocument.uid(file);
> > >      //now compare this document to the one we have in the
> > >      //enummeration of terms.
> > >      //if the term in the enummeration is less than the
> > >      //term we are on it must be deleted (if we are indeed
> > >      //doing an incrementatal update)
> > >      Trace.TRACE("INDEXING INFO: Beginnging Incremental update
> > >  comparisions");
> > >      while (uidIter.term() != null
> > >        && uidIter.term().field() == "uid"
> > >        && uidIter.term().text().compareTo(uid) < 0) {
> > >       //delete stale docs
> > >       if (deleting) {
> > >        reader.delete(uidIter.term());
> > >       }
> > >       uidIter.next();
> > >      }
> > >      //if the terms are equal there is no change with this
> > > document
> > >      //we keep it as is
> > >      if (uidIter.term() != null && uidIter.term().field() ==
> > > "uid"
> > >        && uidIter.term().text().compareTo(uid) == 0) {
> > >       uidIter.next();
> > >      }
> > >      //if we are not deleting and the document was not there
> > >      //it means we didn't have this document on the last index
> > >      //and we should add it
> > >      else if (!deleting) {
> > >       if (file.getPath().endsWith(".pdf")) {
> > >        Document doc = LucenePDFDocument.getDocument(file);
> > >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > > existing
> > > index:
> > >  "
> > >            + doc.get("url"));
> > >        writer.addDocument(doc);
> > >       } else if (file.getPath().endsWith(".xml")) {
> > >        Document doc = XMLDocument.Document(file);
> > >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > > existing
> > > index:
> > >  "
> > >            + doc.get("url"));
> > >        writer.addDocument(doc);
> > >       } else {
> > >        Document doc = HTMLDocument.Document(file);
> > >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > > existing
> > > index:
> > >  "
> > >            + doc.get("url"));
> > >        writer.addDocument(doc);
> > >       }
> > >      }
> > >     }//end the if for an incremental update
> > >     //we are creating a new index, add all document types
> > >     else {
> > >      if (file.getPath().endsWith(".pdf")) {
> > >       Document doc = LucenePDFDocument.getDocument(file);
> > >       Trace.TRACE("INDEXING INFO: Adding a new document to the
> > > new index: "
> > >           + doc.get("url"));
> > >       writer.addDocument(doc);
> > >      } else if (file.getPath().endsWith(".xml")) {
> > >       Document doc = XMLDocument.Document(file);
> > >       Trace.TRACE("INDEXING INFO: Adding a new document to the
> > > new index: "
> > >           + doc.get("url"));
> > >       writer.addDocument(doc);
> > >      } else {
> > >       Document doc = HTMLDocument.Document(file);
> > >       Trace.TRACE("INDEXING INFO: Adding a new document to the
> > > new index: "
> > >           + doc.get("url"));
> > >       writer.addDocument(doc);
> > >      }//close the else
> > >     }//close the else for a new index
> > >    }//close the else if to handle file types
> > >   }//close the indexDocs method
> > >
> > >  }
> > >
> > >
> > >  ----- Original Message ----- 
> > >  From: "Craig McClanahan" <craigmcc@gmail.com
> > >  To: "Jakarta Commons Users List"
> > > <commons-user@jakarta.apache.org
> > >  Sent: Thursday, November 11, 2004 6:13 PM
> > >  Subject: Re: avoiding locking
> > >
> > >
> > >   In order to get any useful help, it would be nice to know
> > > what you are
> > >   trying to do, and (most importantly) what commons component
> > > is giving
> > >   you the problem :-).  The traditional approach is to put a
> > > prefix on
> > >   your subject line -- for commons package "foo" it would be:
> > >
> > >     [foo] avoiding locking
> > >
> > >   It's also generally helpful to see the entire stack trace,
> > > not just
> > >   the exception message itself.
> > >
> > >   Craig
> > >
> > >
> > >   On Thu, 11 Nov 2004 17:27:19 -0500, Luke Shannon
> > >   <lshannon@hypermedia.com wrote:
> > >    What can I do to avoid locking issues?
> > >
> > >    Unable to execute incremental update Lock obtain timed out:
> > >
> > >
> >
> Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
> > >  10f7fe8-write.lock
> > >
> > >    Thanks,
> > >
> > >    Luke
> > >
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > >   To unsubscribe, e-mail:
> > > commons-user-unsubscribe@jakarta.apache.org
> > >   For additional commands, e-mail:
> > > commons-user-help@jakarta.apache.org
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > >  To unsubscribe, e-mail:
> > > commons-user-unsubscribe@jakarta.apache.org
> > >  For additional commands, e-mail:
> > > commons-user-help@jakarta.apache.org
> > >
> > >
> > >
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > > lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> > > lucene-user-help@jakarta.apache.org
> > >
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11195-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 15:50:35 2004
Return-Path: <lucene-user-return-11195-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90700 invoked from network); 12 Nov 2004 15:50:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 15:50:35 -0000
Received: (qmail 24005 invoked by uid 500); 12 Nov 2004 15:50:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23975 invoked by uid 500); 12 Nov 2004 15:50:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23953 invoked by uid 99); 12 Nov 2004 15:50:30 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 07:50:30 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Fri, 12 Nov 2004 10:51:08 -0500
Message-ID: <063c01c4c8cf$6d024fb0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041111235654.83806.qmail@web41006.mail.yahoo.com> <055201c4c84f$30c1df00$7703d00a@hypermedia.com> <1100273901.2886.4.camel@localhost>
Subject: Re: Lucene : avoiding locking
Date: Fri, 12 Nov 2004 10:51:08 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 12 Nov 2004 15:51:08.0717 (UTC) FILETIME=[6D1625D0:01C4C8CF]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Luke;

Currently I am experimenting with checking if the index is lock using
IndexReader.locked before creating a writer. If this turns out to be the
case I was thinking of just unlocking the file.

Do you think this is a good strategy?

Thanks,

Luke

----- Original Message ----- 
From: "Luke Francl" <luke.francl@stellent.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Friday, November 12, 2004 10:38 AM
Subject: Re: Lucene : avoiding locking


> Luke,
>
> I also integrated Lucene into a content management application with
> incremental updates and ran into the same problem you did.
>
> You need to make sure only one process (which means, no multiple copies
> of the application writing to the index simultaneously) or thread ever
> writes to the index. That includes deletes as in your code below, so
> make sure that is synchronized, too.
>
> Also, you will find that opening and closing the index for writing is
> very costly, especially on a large index, so it pays to batch up all
> changes in a transaction (inserts and deletes) together in one go at the
> Lucene index. If this still isn't enough, you can batch up 5 minutes
> worth of changes and apply them at once. We haven't got to that point
> yet.
>
> I am curious, though, how many people on this list are using Lucene in
> the incremental update case. Most examples I've seen all assume batch
> indexing.
>
> Regards,
>
> Luke Francl
>
>
>
> On Thu, 2004-11-11 at 18:33, Luke Shannon wrote:
> > Syncronizing the method didn't seem to help. The lock is being detected
> > right here in the code:
> >
> > while (uidIter.term() != null
> >       && uidIter.term().field() == "uid"
> >       && uidIter.term().text().compareTo(uid) < 0) {
> >      //delete stale docs
> >      if (deleting) {
> >       reader.delete(uidIter.term());
> >      }
> >      uidIter.next();
> >     }
> >
> > This runs fine on my own site so I am confused. For now I think I am
going
> > to remove the deleting of "stale" files etc and just rebuild the index
each
> > time to see what happens.
> >
> > ----- Original Message ----- 
> > From: <yahootintin-lucene@yahoo.com>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Thursday, November 11, 2004 6:56 PM
> > Subject: Re: Lucene : avoiding locking
> >
> >
> > > I'm working on a similar project...
> > > Make sure that only one call to the index method is occuring at
> > > a time.  Synchronizing that method should do it.
> > >
> > > --- Luke Shannon <lshannon@hypermedia.com> wrote:
> > >
> > > > Hi All;
> > > >
> > > > I have hit a snag in my Lucene integration and don't know what
> > > > to do.
> > > >
> > > >  My company has a content management product. Each time
> > > > someone changes the
> > > >  directory structure or a file with in it that portion of the
> > > > site needs to
> > > >  be re-indexed so the changes are reflected in future searches
> > > > (indexing
> > > > must
> > > >  happen during run time).
> > > >
> > > >  I have written a Indexer class with a static Index() method.
> > > > The idea is
> > > > too
> > > >  call the method every time something changes and the index
> > > > needs to be
> > > >  re-examined. I am hoping the logic put in by Doug Cutting
> > > > surrounding the
> > > >  UID will make indexing efficient enough to be called so
> > > > frequently.
> > > >
> > > >  This class works great when I tested it on my own little site
> > > > (I have about
> > > >  2000 file). But when I drop the functionality into the QA
> > > > environment I get
> > > >  a locking error.
> > > >
> > > >  I can't access the stack trace, all I can get at is a log
> > > > file the
> > > >  application writes too. Here is the section my class wrote.
> > > > It was right in
> > > >  the middle of indexing and bang lock issue.
> > > >
> > > >  I don't know if the problem is in my code or something in the
> > > > existing
> > > >  application.
> > > >
> > > >  Error Message:
> > > >  ENTER|SearchEventProcessor.visit(ContentNodeDeleteEvent)
> > > >  |INFO|INDEXING INFO: Start Indexing new content.
> > > >  |INFO|INDEXING INFO: Index Folder Did Not Exist. Start
> > > > Creation Of New
> > > > Index
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING ERROR: Unable to index new content Lock obtain
> > > > timed out:
> > > >
> > > >
> > >
> >
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
> > > >  10f7fe8-write.lock
> > > >
> > > > |ENTER|UpdateCacheEventProcessor.visit(ContentNodeDeleteEvent)
> > > >
> > > >  Here is my code. You will recognize it pretty much as the
> > > > IndexHTML class
> > > >  from the Lucene demo written by Doug Cutting. I have put a
> > > > ton of comments
> > > >  in a attempt to understand what is going on.
> > > >
> > > >  Any help would be appreciated.
> > > >
> > > >  Luke
> > > >
> > > >  package com.fbhm.bolt.search;
> > > >
> > > >  /*
> > > >   * Created on Nov 11, 2004
> > > >   *
> > > >   * This class will create a single index file for the Content
> > > >   * Management System (CMS). It contains logic to ensure
> > > >   * indexing is done "intelligently". Based on IndexHTML.java
> > > >   * from the demo folder that ships with Lucene
> > > >   */
> > > >
> > > >  import java.io.File;
> > > >  import java.io.IOException;
> > > >  import java.util.Arrays;
> > > >  import java.util.Date;
> > > >
> > > >  import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > > >  import org.apache.lucene.document.Document;
> > > >  import org.apache.lucene.index.IndexReader;
> > > >  import org.apache.lucene.index.IndexWriter;
> > > >  import org.apache.lucene.index.Term;
> > > >  import org.apache.lucene.index.TermEnum;
> > > >  import org.pdfbox.searchengine.lucene.LucenePDFDocument;
> > > >  import org.apache.lucene.demo.HTMLDocument;
> > > >
> > > >  import com.alaia.common.debug.Trace;
> > > >  import com.alaia.common.util.AppProperties;
> > > >
> > > >  /**
> > > >   * @author lshannon Description: <br
> > > >   *   This class is used to index a content folder. It
> > > > contains logic to
> > > >   *   ensure only new or documents that have been modified
> > > > since the last
> > > >   *   search are indexed. <br
> > > >   *   Based on code writen by Doug Cutting in the IndexHTML
> > > > class found in
> > > >   *   the Lucene demo
> > > >   */
> > > >  public class Indexer {
> > > >   //true during deletion pass, this is when the index already
> > > > exists
> > > >   private static boolean deleting = false;
> > > >
> > > >   //object to read existing indexes
> > > >   private static IndexReader reader;
> > > >
> > > >   //object to write to the index folder
> > > >   private static IndexWriter writer;
> > > >
> > > >   //this will be used to write the index file
> > > >   private static TermEnum uidIter;
> > > >
> > > >   /*
> > > >    * This static method does all the work, the end result is
> > > > an up-to-date
> > > >  index folder
> > > >   */
> > > >   public static void Index() {
> > > >    //we will assume to start the index has been created
> > > >    boolean create = true;
> > > >    //set the name of the index file
> > > >    String indexFileLocation =
> > > >
> > > >
> > > AppProperties.getPropertyAsString("bolt.search.siteIndex.index.root");
> > > >    //set the name of the content folder
> > > >    String contentFolderLocation =
> > > >  AppProperties.getPropertyAsString("site.root");
> > > >    //manage whether the index needs to be created or not
> > > >    File index = new File(indexFileLocation);
> > > >    File root = new File(contentFolderLocation);
> > > >    //the index file indicated exists, we need an incremental
> > > > update of the
> > > >    // index
> > > >    if (index.exists()) {
> > > >     Trace.TRACE("INDEXING INFO: An index folder exists at: " +
> > > >  indexFileLocation);
> > > >     deleting = true;
> > > >     create = false;
> > > >     try {
> > > >      //this version of index docs is able to execute the
> > > > incremental
> > > >      // update
> > > >      indexDocs(root, indexFileLocation, create);
> > > >     } catch (Exception e) {
> > > >      //we were unable to do the incremental update
> > > >      Trace.TRACE("INDEXING ERROR: Unable to execute
> > > > incremental update "
> > > >          + e.getMessage());
> > > >     }
> > > >     //after exiting this loop the index should be current with
> > > > content
> > > >     Trace.TRACE("INDEXING INFO: Incremental update
> > > > completed.");
> > > >    }
> > > >    try {
> > > >     //create the writer
> > > >     writer = new IndexWriter(index, new StandardAnalyzer(),
> > > > create);
> > > >     //configure the writer
> > > >     writer.mergeFactor = 10000;
> > > >     writer.maxFieldLength = 100000;
> > > >     try {
> > > >      //get the start date
> > > >      Date start = new Date();
> > > >      //call the indexDocs method, this time we will add new
> > > >      // documents
> > > >      Trace.TRACE("INDEXING INFO: Start Indexing new
> > > > content.");
> > > >      indexDocs(root, indexFileLocation, create);
> > > >      Trace.TRACE("INDEXING INFO: Indexing new content
> > > > complete.");
> > > >      //optimize the index
> > > >      writer.optimize();
> > > >      //close the writer
> > > >      writer.close();
> > > >      //get the end date
> > > >      Date end = new Date();
> > > >      long totalTime = end.getTime() - start.getTime();
> > > >      Trace.TRACE("INDEXING INFO: All Indexing Operations
> > > > Completed in "
> > > >          + totalTime + " milliseconds");
> > > >     } catch (Exception e1) {
> > > >      //unable to add new documents
> > > >      Trace.TRACE("INDEXING ERROR: Unable to index new content
> > > > "
> > > >          + e1.getMessage());
> > > >     }
> > > >    } catch (IOException e) {
> > > >     Trace.TRACE("INDEXING ERROR: Unable to create IndexWriter
> > > > "
> > > >       + e.getMessage());
> > > >    }
> > > >   }
> > > >
> > > >   /*
> > > >    * Walk directory hierarchy in uid order, while keeping uid
> > > > iterator from
> > > >  /*
> > > >    * existing index in sync. Mismatches indicate one of: (a)
> > > > old documents
> > > > to
> > > >  /*
> > > >    * be deleted; (b) unchanged documents, to be left alone; or
> > > > (c) new /*
> > > >    * documents, to be indexed.
> > > >    */
> > > >
> > > >   private static void indexDocs(File file, String index,
> > > > boolean create)
> > > >     throws Exception {
> > > >    //the index already exists we do an incremental update
> > > >    if (!create) {
> > > >     Trace.TRACE("INDEXING INFO: Incremental Update Request
> > > > Confirmed");
> > > >     //open existing index
> > > >     reader = IndexReader.open(index);
> > > >     //this gets an enummeration of uid terms
> > > >     uidIter = reader.terms(new Term("uid", ""));
> > > >     //jump to the index method that does the work
> > > >     //this will use the Iteration above and does
> > > >     //all the "smart" indexing
> > > >     indexDocs(file);
> > > >     //this will be true everytime the index already existed
> > > >     //we are not going to delete documents that are old
> > > >     if (deleting) {
> > > >      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> > > > Started. All
> > > >  Deleted Docs will be listed.");
> > > >      while (uidIter.term() != null
> > > >        && uidIter.term().field() == "uid") {
> > > >       //basically we are deleting all the document we have
> > > >       // indexed before
> > > >       Trace.TRACE("INDEXING INFO: Deleting document "
> > > >         + HTMLDocument.uid2url(uidIter.term().text()));
> > > >       //delete the term from the reader
> > > >       reader.delete(uidIter.term());
> > > >       //go to the nextfield
> > > >       uidIter.next();
> > > >      }
> > > >      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> > > > Completed");
> > > >      //turn off the deleting flag
> > > >      deleting = false;
> > > >     }//close the deleting branch
> > > >     //close the enummeration
> > > >     uidIter.close(); // close uid iterator
> > > >     //close the reader
> > > >     reader.close(); // close existing index
> > > >
> > > >    }
> > > >    //we go here is the index already existed
> > > >    else {
> > > >     Trace.TRACE("INDEXING INFO: Index Folder Did Not Exist.
> > > > Start Creation
> > > > Of
> > > >  New Index");
> > > >     // don't have exisiting
> > > >     indexDocs(file);
> > > >    }
> > > >   }
> > > >
> > > >   private static void indexDocs(File file) throws Exception {
> > > >    //check if we are at the top of a directory
> > > >    if (file.isDirectory()) {
> > > >     //get a list of the files
> > > >     String[] files = file.list();
> > > >     //sort them
> > > >     Arrays.sort(files);
> > > >     //index each file in the directory recursively
> > > >     //we keep repeating this logic until we hit a
> > > >     //file
> > > >     for (int i = 0; i < files.length; i++)
> > > >      //pass in the parent directory and the current file
> > > >      //into the file constructor and index
> > > >      indexDocs(new File(file, files[i]));
> > > >
> > > >    }
> > > >    //we have an actual file, so we need to consider the
> > > >    //file extensions so the correct Document is created
> > > >    else if (file.getPath().endsWith(".html")
> > > >      || file.getPath().endsWith(".htm")
> > > >      || file.getPath().endsWith(".txt")
> > > >      || file.getPath().endsWith(".doc")
> > > >      || file.getPath().endsWith(".xml")
> > > >      || file.getPath().endsWith(".pdf")) {
> > > >
> > > >     //if this is reached it means we were in the midst
> > > >     //of an incremental update
> > > >     if (uidIter != null) {
> > > >      //get the uid for the document we are on
> > > >      String uid = HTMLDocument.uid(file);
> > > >      //now compare this document to the one we have in the
> > > >      //enummeration of terms.
> > > >      //if the term in the enummeration is less than the
> > > >      //term we are on it must be deleted (if we are indeed
> > > >      //doing an incrementatal update)
> > > >      Trace.TRACE("INDEXING INFO: Beginnging Incremental update
> > > >  comparisions");
> > > >      while (uidIter.term() != null
> > > >        && uidIter.term().field() == "uid"
> > > >        && uidIter.term().text().compareTo(uid) < 0) {
> > > >       //delete stale docs
> > > >       if (deleting) {
> > > >        reader.delete(uidIter.term());
> > > >       }
> > > >       uidIter.next();
> > > >      }
> > > >      //if the terms are equal there is no change with this
> > > > document
> > > >      //we keep it as is
> > > >      if (uidIter.term() != null && uidIter.term().field() ==
> > > > "uid"
> > > >        && uidIter.term().text().compareTo(uid) == 0) {
> > > >       uidIter.next();
> > > >      }
> > > >      //if we are not deleting and the document was not there
> > > >      //it means we didn't have this document on the last index
> > > >      //and we should add it
> > > >      else if (!deleting) {
> > > >       if (file.getPath().endsWith(".pdf")) {
> > > >        Document doc = LucenePDFDocument.getDocument(file);
> > > >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > > > existing
> > > > index:
> > > >  "
> > > >            + doc.get("url"));
> > > >        writer.addDocument(doc);
> > > >       } else if (file.getPath().endsWith(".xml")) {
> > > >        Document doc = XMLDocument.Document(file);
> > > >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > > > existing
> > > > index:
> > > >  "
> > > >            + doc.get("url"));
> > > >        writer.addDocument(doc);
> > > >       } else {
> > > >        Document doc = HTMLDocument.Document(file);
> > > >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > > > existing
> > > > index:
> > > >  "
> > > >            + doc.get("url"));
> > > >        writer.addDocument(doc);
> > > >       }
> > > >      }
> > > >     }//end the if for an incremental update
> > > >     //we are creating a new index, add all document types
> > > >     else {
> > > >      if (file.getPath().endsWith(".pdf")) {
> > > >       Document doc = LucenePDFDocument.getDocument(file);
> > > >       Trace.TRACE("INDEXING INFO: Adding a new document to the
> > > > new index: "
> > > >           + doc.get("url"));
> > > >       writer.addDocument(doc);
> > > >      } else if (file.getPath().endsWith(".xml")) {
> > > >       Document doc = XMLDocument.Document(file);
> > > >       Trace.TRACE("INDEXING INFO: Adding a new document to the
> > > > new index: "
> > > >           + doc.get("url"));
> > > >       writer.addDocument(doc);
> > > >      } else {
> > > >       Document doc = HTMLDocument.Document(file);
> > > >       Trace.TRACE("INDEXING INFO: Adding a new document to the
> > > > new index: "
> > > >           + doc.get("url"));
> > > >       writer.addDocument(doc);
> > > >      }//close the else
> > > >     }//close the else for a new index
> > > >    }//close the else if to handle file types
> > > >   }//close the indexDocs method
> > > >
> > > >  }
> > > >
> > > >
> > > >  ----- Original Message ----- 
> > > >  From: "Craig McClanahan" <craigmcc@gmail.com
> > > >  To: "Jakarta Commons Users List"
> > > > <commons-user@jakarta.apache.org
> > > >  Sent: Thursday, November 11, 2004 6:13 PM
> > > >  Subject: Re: avoiding locking
> > > >
> > > >
> > > >   In order to get any useful help, it would be nice to know
> > > > what you are
> > > >   trying to do, and (most importantly) what commons component
> > > > is giving
> > > >   you the problem :-).  The traditional approach is to put a
> > > > prefix on
> > > >   your subject line -- for commons package "foo" it would be:
> > > >
> > > >     [foo] avoiding locking
> > > >
> > > >   It's also generally helpful to see the entire stack trace,
> > > > not just
> > > >   the exception message itself.
> > > >
> > > >   Craig
> > > >
> > > >
> > > >   On Thu, 11 Nov 2004 17:27:19 -0500, Luke Shannon
> > > >   <lshannon@hypermedia.com wrote:
> > > >    What can I do to avoid locking issues?
> > > >
> > > >    Unable to execute incremental update Lock obtain timed out:
> > > >
> > > >
> > >
> >
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
> > > >  10f7fe8-write.lock
> > > >
> > > >    Thanks,
> > > >
> > > >    Luke
> > > >
> > > >
> > > >
> > > >
> > > ---------------------------------------------------------------------
> > > >   To unsubscribe, e-mail:
> > > > commons-user-unsubscribe@jakarta.apache.org
> > > >   For additional commands, e-mail:
> > > > commons-user-help@jakarta.apache.org
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > ---------------------------------------------------------------------
> > > >  To unsubscribe, e-mail:
> > > > commons-user-unsubscribe@jakarta.apache.org
> > > >  For additional commands, e-mail:
> > > > commons-user-help@jakarta.apache.org
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> > > > lucene-user-unsubscribe@jakarta.apache.org
> > > > For additional commands, e-mail:
> > > > lucene-user-help@jakarta.apache.org
> > > >
> > > >
> > >
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >
> > >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11196-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 16:03:48 2004
Return-Path: <lucene-user-return-11196-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 794 invoked from network); 12 Nov 2004 16:03:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 16:03:48 -0000
Received: (qmail 46180 invoked by uid 500); 12 Nov 2004 16:03:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 46159 invoked by uid 500); 12 Nov 2004 16:03:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46143 invoked by uid 99); 12 Nov 2004 16:03:43 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.240] (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 12 Nov 2004 08:03:43 -0800
Received: (qmail 99558 invoked by uid 60001); 12 Nov 2004 16:03:40 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=QE04+mTVK1WbogqWyqirkCBOS/bfuhjepf4ItQ+ehMN++mCU7TB6gdtERJzBMwSZ8M5YO961z+zVWhV0HURhoPGHfCMECLLceAWdblpLoZDI9TK3tSNzl/4WX/25PubdNkNwKfmtiX5saRzgZLG5mZ3566UcI8bsWOROWpjDnTM=  ;
Message-ID: <20041112160339.99556.qmail@web12703.mail.yahoo.com>
Received: from [216.194.17.194] by web12703.mail.yahoo.com via HTTP; Fri, 12 Nov 2004 08:03:39 PST
Date: Fri, 12 Nov 2004 08:03:39 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene : avoiding locking
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <063c01c4c8cf$6d024fb0$7703d00a@hypermedia.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

--- Luke Shannon <lshannon@hypermedia.com> wrote:

> Currently I am experimenting with checking if the index is lock using
> IndexReader.locked before creating a writer. If this turns out to be
> the
> case I was thinking of just unlocking the file.
> 
> Do you think this is a good strategy?

Only if you synchronize well and only if all index-modifying accesses
are contained in the same JVM.  Alternatively, you could add a 'sleep
and retry' logic around the lock check, and perhaps 'give up or force
unlock if you got too much sleep'.

Otis

 
> ----- Original Message ----- 
> From: "Luke Francl" <luke.francl@stellent.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Friday, November 12, 2004 10:38 AM
> Subject: Re: Lucene : avoiding locking
> 
> 
> > Luke,
> >
> > I also integrated Lucene into a content management application with
> > incremental updates and ran into the same problem you did.
> >
> > You need to make sure only one process (which means, no multiple
> copies
> > of the application writing to the index simultaneously) or thread
> ever
> > writes to the index. That includes deletes as in your code below,
> so
> > make sure that is synchronized, too.
> >
> > Also, you will find that opening and closing the index for writing
> is
> > very costly, especially on a large index, so it pays to batch up
> all
> > changes in a transaction (inserts and deletes) together in one go
> at the
> > Lucene index. If this still isn't enough, you can batch up 5
> minutes
> > worth of changes and apply them at once. We haven't got to that
> point
> > yet.
> >
> > I am curious, though, how many people on this list are using Lucene
> in
> > the incremental update case. Most examples I've seen all assume
> batch
> > indexing.
> >
> > Regards,
> >
> > Luke Francl
> >
> >
> >
> > On Thu, 2004-11-11 at 18:33, Luke Shannon wrote:
> > > Syncronizing the method didn't seem to help. The lock is being
> detected
> > > right here in the code:
> > >
> > > while (uidIter.term() != null
> > >       && uidIter.term().field() == "uid"
> > >       && uidIter.term().text().compareTo(uid) < 0) {
> > >      //delete stale docs
> > >      if (deleting) {
> > >       reader.delete(uidIter.term());
> > >      }
> > >      uidIter.next();
> > >     }
> > >
> > > This runs fine on my own site so I am confused. For now I think I
> am
> going
> > > to remove the deleting of "stale" files etc and just rebuild the
> index
> each
> > > time to see what happens.
> > >
> > > ----- Original Message ----- 
> > > From: <yahootintin-lucene@yahoo.com>
> > > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > > Sent: Thursday, November 11, 2004 6:56 PM
> > > Subject: Re: Lucene : avoiding locking
> > >
> > >
> > > > I'm working on a similar project...
> > > > Make sure that only one call to the index method is occuring at
> > > > a time.  Synchronizing that method should do it.
> > > >
> > > > --- Luke Shannon <lshannon@hypermedia.com> wrote:
> > > >
> > > > > Hi All;
> > > > >
> > > > > I have hit a snag in my Lucene integration and don't know
> what
> > > > > to do.
> > > > >
> > > > >  My company has a content management product. Each time
> > > > > someone changes the
> > > > >  directory structure or a file with in it that portion of the
> > > > > site needs to
> > > > >  be re-indexed so the changes are reflected in future
> searches
> > > > > (indexing
> > > > > must
> > > > >  happen during run time).
> > > > >
> > > > >  I have written a Indexer class with a static Index() method.
> > > > > The idea is
> > > > > too
> > > > >  call the method every time something changes and the index
> > > > > needs to be
> > > > >  re-examined. I am hoping the logic put in by Doug Cutting
> > > > > surrounding the
> > > > >  UID will make indexing efficient enough to be called so
> > > > > frequently.
> > > > >
> > > > >  This class works great when I tested it on my own little
> site
> > > > > (I have about
> > > > >  2000 file). But when I drop the functionality into the QA
> > > > > environment I get
> > > > >  a locking error.
> > > > >
> > > > >  I can't access the stack trace, all I can get at is a log
> > > > > file the
> > > > >  application writes too. Here is the section my class wrote.
> > > > > It was right in
> > > > >  the middle of indexing and bang lock issue.
> > > > >
> > > > >  I don't know if the problem is in my code or something in
> the
> > > > > existing
> > > > >  application.
> > > > >
> > > > >  Error Message:
> > > > >  ENTER|SearchEventProcessor.visit(ContentNodeDeleteEvent)
> > > > >  |INFO|INDEXING INFO: Start Indexing new content.
> > > > >  |INFO|INDEXING INFO: Index Folder Did Not Exist. Start
> > > > > Creation Of New
> > > > > Index
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > comparisions
> > > > >  |INFO|INDEXING ERROR: Unable to index new content Lock
> obtain
> > > > > timed out:
> > > > >
> > > > >
> > > >
> > >
>
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
> > > > >  10f7fe8-write.lock
> > > > >
> > > > >
> |ENTER|UpdateCacheEventProcessor.visit(ContentNodeDeleteEvent)
> > > > >
> > > > >  Here is my code. You will recognize it pretty much as the
> > > > > IndexHTML class
> > > > >  from the Lucene demo written by Doug Cutting. I have put a
> > > > > ton of comments
> > > > >  in a attempt to understand what is going on.
> > > > >
> > > > >  Any help would be appreciated.
> > > > >
> > > > >  Luke
> > > > >
> > > > >  package com.fbhm.bolt.search;
> > > > >
> > > > >  /*
> > > > >   * Created on Nov 11, 2004
> > > > >   *
> > > > >   * This class will create a single index file for the
> Content
> > > > >   * Management System (CMS). It contains logic to ensure
> > > > >   * indexing is done "intelligently". Based on IndexHTML.java
> > > > >   * from the demo folder that ships with Lucene
> > > > >   */
> > > > >
> > > > >  import java.io.File;
> > > > >  import java.io.IOException;
> > > > >  import java.util.Arrays;
> > > > >  import java.util.Date;
> > > > >
> > > > >  import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > > > >  import org.apache.lucene.document.Document;
> > > > >  import org.apache.lucene.index.IndexReader;
> > > > >  import org.apache.lucene.index.IndexWriter;
> > > > >  import org.apache.lucene.index.Term;
> > > > >  import org.apache.lucene.index.TermEnum;
> > > > >  import org.pdfbox.searchengine.lucene.LucenePDFDocument;
> > > > >  import org.apache.lucene.demo.HTMLDocument;
> > > > >
> > > > >  import com.alaia.common.debug.Trace;
> > > > >  import com.alaia.common.util.AppProperties;
> > > > >
> > > > >  /**
> > > > >   * @author lshannon Description: <br
> > > > >   *   This class is used to index a content folder. It
> > > > > contains logic to
> > > > >   *   ensure only new or documents that have been modified
> > > > > since the last
> > > > >   *   search are indexed. <br
> > > > >   *   Based on code writen by Doug Cutting in the IndexHTML
> > > > > class found in
> > > > >   *   the Lucene demo
> > > > >   */
> > > > >  public class Indexer {
> > > > >   //true during deletion pass, this is when the index already
> > > > > exists
> > > > >   private static boolean deleting = false;
> > > > >
> > > > >   //object to read existing indexes
> > > > >   private static IndexReader reader;
> > > > >
> > > > >   //object to write to the index folder
> > > > >   private static IndexWriter writer;
> > > > >
> > > > >   //this will be used to write the index file
> > > > >   private static TermEnum uidIter;
> > > > >
> > > > >   /*
> > > > >    * This static method does all the work, the end result is
> > > > > an up-to-date
> > > > >  index folder
> > > > >   */
> > > > >   public static void Index() {
> > > > >    //we will assume to start the index has been created
> > > > >    boolean create = true;
> > > > >    //set the name of the index file
> > > > >    String indexFileLocation =
> > > > >
> > > > >
> > > >
>
AppProperties.getPropertyAsString("bolt.search.siteIndex.index.root");
> > > > >    //set the name of the content folder
> > > > >    String contentFolderLocation =
> > > > >  AppProperties.getPropertyAsString("site.root");
> > > > >    //manage whether the index needs to be created or not
> > > > >    File index = new File(indexFileLocation);
> > > > >    File root = new File(contentFolderLocation);
> > > > >    //the index file indicated exists, we need an incremental
> > > > > update of the
> > > > >    // index
> > > > >    if (index.exists()) {
> > > > >     Trace.TRACE("INDEXING INFO: An index folder exists at: "
> +
> > > > >  indexFileLocation);
> > > > >     deleting = true;
> > > > >     create = false;
> > > > >     try {
> > > > >      //this version of index docs is able to execute the
> > > > > incremental
> > > > >      // update
> > > > >      indexDocs(root, indexFileLocation, create);
> > > > >     } catch (Exception e) {
> > > > >      //we were unable to do the incremental update
> > > > >      Trace.TRACE("INDEXING ERROR: Unable to execute
> > > > > incremental update "
> > > > >          + e.getMessage());
> > > > >     }
> > > > >     //after exiting this loop the index should be current
> with
> > > > > content
> > > > >     Trace.TRACE("INDEXING INFO: Incremental update
> > > > > completed.");
> > > > >    }
> > > > >    try {
> > > > >     //create the writer
> > > > >     writer = new IndexWriter(index, new StandardAnalyzer(),
> > > > > create);
> > > > >     //configure the writer
> > > > >     writer.mergeFactor = 10000;
> > > > >     writer.maxFieldLength = 100000;
> > > > >     try {
> > > > >      //get the start date
> > > > >      Date start = new Date();
> > > > >      //call the indexDocs method, this time we will add new
> > > > >      // documents
> > > > >      Trace.TRACE("INDEXING INFO: Start Indexing new
> > > > > content.");
> > > > >      indexDocs(root, indexFileLocation, create);
> > > > >      Trace.TRACE("INDEXING INFO: Indexing new content
> > > > > complete.");
> > > > >      //optimize the index
> > > > >      writer.optimize();
> > > > >      //close the writer
> > > > >      writer.close();
> > > > >      //get the end date
> > > > >      Date end = new Date();
> > > > >      long totalTime = end.getTime() - start.getTime();
> > > > >      Trace.TRACE("INDEXING INFO: All Indexing Operations
> > > > > Completed in "
> > > > >          + totalTime + " milliseconds");
> > > > >     } catch (Exception e1) {
> > > > >      //unable to add new documents
> > > > >      Trace.TRACE("INDEXING ERROR: Unable to index new content
> > > > > "
> > > > >          + e1.getMessage());
> > > > >     }
> > > > >    } catch (IOException e) {
> > > > >     Trace.TRACE("INDEXING ERROR: Unable to create IndexWriter
> > > > > "
> > > > >       + e.getMessage());
> > > > >    }
> > > > >   }
> > > > >
> > > > >   /*
> > > > >    * Walk directory hierarchy in uid order, while keeping uid
> > > > > iterator from
> > > > >  /*
> > > > >    * existing index in sync. Mismatches indicate one of: (a)
> > > > > old documents
> > > > > to
> > > > >  /*
> > > > >    * be deleted; (b) unchanged documents, to be left alone;
> or
> > > > > (c) new /*
> > > > >    * documents, to be indexed.
> > > > >    */
> > > > >
> > > > >   private static void indexDocs(File file, String index,
> > > > > boolean create)
> > > > >     throws Exception {
> > > > >    //the index already exists we do an incremental update
> > > > >    if (!create) {
> > > > >     Trace.TRACE("INDEXING INFO: Incremental Update Request
> > > > > Confirmed");
> > > > >     //open existing index
> > > > >     reader = IndexReader.open(index);
> > > > >     //this gets an enummeration of uid terms
> > > > >     uidIter = reader.terms(new Term("uid", ""));
> > > > >     //jump to the index method that does the work
> > > > >     //this will use the Iteration above and does
> > > > >     //all the "smart" indexing
> > > > >     indexDocs(file);
> > > > >     //this will be true everytime the index already existed
> > > > >     //we are not going to delete documents that are old
> > > > >     if (deleting) {
> > > > >      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> > > > > Started. All
> > > > >  Deleted Docs will be listed.");
> > > > >      while (uidIter.term() != null
> > > > >        && uidIter.term().field() == "uid") {
> > > > >       //basically we are deleting all the document we have
> > > > >       // indexed before
> > > > >       Trace.TRACE("INDEXING INFO: Deleting document "
> > > > >         + HTMLDocument.uid2url(uidIter.term().text()));
> > > > >       //delete the term from the reader
> > > > >       reader.delete(uidIter.term());
> > > > >       //go to the nextfield
> > > > >       uidIter.next();
> > > > >      }
> > > > >      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> > > > > Completed");
> > > > >      //turn off the deleting flag
> > > > >      deleting = false;
> > > > >     }//close the deleting branch
> > > > >     //close the enummeration
> > > > >     uidIter.close(); // close uid iterator
> > > > >     //close the reader
> > > > >     reader.close(); // close existing index
> > > > >
> > > > >    }
> > > > >    //we go here is the index already existed
> > > > >    else {
> > > > >     Trace.TRACE("INDEXING INFO: Index Folder Did Not Exist.
> > > > > Start Creation
> > > > > Of
> > > > >  New Index");
> > > > >     // don't have exisiting
> > > > >     indexDocs(file);
> > > > >    }
> > > > >   }
> > > > >
> > > > >   private static void indexDocs(File file) throws Exception {
> > > > >    //check if we are at the top of a directory
> > > > >    if (file.isDirectory()) {
> > > > >     //get a list of the files
> > > > >     String[] files = file.list();
> > > > >     //sort them
> > > > >     Arrays.sort(files);
> > > > >     //index each file in the directory recursively
> > > > >     //we keep repeating this logic until we hit a
> > > > >     //file
> > > > >     for (int i = 0; i < files.length; i++)
> > > > >      //pass in the parent directory and the current file
> > > > >      //into the file constructor and index
> > > > >      indexDocs(new File(file, files[i]));
> > > > >
> > > > >    }
> > > > >    //we have an actual file, so we need to consider the
> > > > >    //file extensions so the correct Document is created
> > > > >    else if (file.getPath().endsWith(".html")
> > > > >      || file.getPath().endsWith(".htm")
> > > > >      || file.getPath().endsWith(".txt")
> > > > >      || file.getPath().endsWith(".doc")
> > > > >      || file.getPath().endsWith(".xml")
> > > > >      || file.getPath().endsWith(".pdf")) {
> > > > >
> > > > >     //if this is reached it means we were in the midst
> > > > >     //of an incremental update
> > > > >     if (uidIter != null) {
> > > > >      //get the uid for the document we are on
> > > > >      String uid = HTMLDocument.uid(file);
> > > > >      //now compare this document to the one we have in the
> > > > >      //enummeration of terms.
> > > > >      //if the term in the enummeration is less than the
> > > > >      //term we are on it must be deleted (if we are indeed
> > > > >      //doing an incrementatal update)
> > > > >      Trace.TRACE("INDEXING INFO: Beginnging Incremental
> update
> > > > >  comparisions");
> > > > >      while (uidIter.term() != null
> > > > >        && uidIter.term().field() == "uid"
> > > > >        && uidIter.term().text().compareTo(uid) < 0) {
> > > > >       //delete stale docs
> > > > >       if (deleting) {
> > > > >        reader.delete(uidIter.term());
> > > > >       }
> > > > >       uidIter.next();
> > > > >      }
> > > > >      //if the terms are equal there is no change with this
> > > > > document
> > > > >      //we keep it as is
> > > > >      if (uidIter.term() != null && uidIter.term().field() ==
> > > > > "uid"
> > > > >        && uidIter.term().text().compareTo(uid) == 0) {
> > > > >       uidIter.next();
> > > > >      }
> > > > >      //if we are not deleting and the document was not there
> > > > >      //it means we didn't have this document on the last
> index
> > > > >      //and we should add it
> > > > >      else if (!deleting) {
> > > > >       if (file.getPath().endsWith(".pdf")) {
> > > > >        Document doc = LucenePDFDocument.getDocument(file);
> > > > >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > > > > existing
> > > > > index:
> > > > >  "
> > > > >            + doc.get("url"));
> > > > >        writer.addDocument(doc);
> > > > >       } else if (file.getPath().endsWith(".xml")) {
> > > > >        Document doc = XMLDocument.Document(file);
> > > > >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > > > > existing
> > > > > index:
> > > > >  "
> > > > >            + doc.get("url"));
> > > > >        writer.addDocument(doc);
> > > > >       } else {
> > > > >        Document doc = HTMLDocument.Document(file);
> > > > >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > > > > existing
> > > > > index:
> > > > >  "
> > > > >            + doc.get("url"));
> > > > >        writer.addDocument(doc);
> > > > >       }
> > > > >      }
> > > > >     }//end the if for an incremental update
> > > > >     //we are creating a new index, add all document types
> > > > >     else {
> > > > >      if (file.getPath().endsWith(".pdf")) {
> > > > >       Document doc = LucenePDFDocument.getDocument(file);
> > > > >       Trace.TRACE("INDEXING INFO: Adding a new document to
> the
> > > > > new index: "
> > > > >           + doc.get("url"));
> > > > >       writer.addDocument(doc);
> > > > >      } else if (file.getPath().endsWith(".xml")) {
> > > > >       Document doc = XMLDocument.Document(file);
> > > > >       Trace.TRACE("INDEXING INFO: Adding a new document to
> the
> > > > > new index: "
> > > > >           + doc.get("url"));
> > > > >       writer.addDocument(doc);
> > > > >      } else {
> > > > >       Document doc = HTMLDocument.Document(file);
> > > > >       Trace.TRACE("INDEXING INFO: Adding a new document to
> the
> > > > > new index: "
> > > > >           + doc.get("url"));
> > > > >       writer.addDocument(doc);
> > > > >      }//close the else
> > > > >     }//close the else for a new index
> > > > >    }//close the else if to handle file types
> > > > >   }//close the indexDocs method
> > > > >
> > > > >  }
> > > > >
> > > > >
> > > > >  ----- Original Message ----- 
> > > > >  From: "Craig McClanahan" <craigmcc@gmail.com
> > > > >  To: "Jakarta Commons Users List"
> > > > > <commons-user@jakarta.apache.org
> > > > >  Sent: Thursday, November 11, 2004 6:13 PM
> > > > >  Subject: Re: avoiding locking
> > > > >
> > > > >
> > > > >   In order to get any useful help, it would be nice to know
> > > > > what you are
> > > > >   trying to do, and (most importantly) what commons component
> > > > > is giving
> > > > >   you the problem :-).  The traditional approach is to put a
> > > > > prefix on
> > > > >   your subject line -- for commons package "foo" it would be:
> > > > >
> > > > >     [foo] avoiding locking
> > > > >
> > > > >   It's also generally helpful to see the entire stack trace,
> > > > > not just
> > > > >   the exception message itself.
> > > > >
> > > > >   Craig
> > > > >
> > > > >
> > > > >   On Thu, 11 Nov 2004 17:27:19 -0500, Luke Shannon
> > > > >   <lshannon@hypermedia.com wrote:
> > > > >    What can I do to avoid locking issues?
> > > > >
> > > > >    Unable to execute incremental update Lock obtain timed
> out:
> > > > >
> > > > >
> > > >
> > >
>
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
> > > > >  10f7fe8-write.lock
> > > > >
> > > > >    Thanks,
> > > > >
> > > > >    Luke
> > > > >
> > > > >
> > > > >
> > > > >
> > > >
> ---------------------------------------------------------------------
> > > > >   To unsubscribe, e-mail:
> > > > > commons-user-unsubscribe@jakarta.apache.org
> > > > >   For additional commands, e-mail:
> > > > > commons-user-help@jakarta.apache.org
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > >
> ---------------------------------------------------------------------
> > > > >  To unsubscribe, e-mail:
> > > > > commons-user-unsubscribe@jakarta.apache.org
> > > > >  For additional commands, e-mail:
> > > > > commons-user-help@jakarta.apache.org
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > > >
> > > >
> ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail:
> > > > > lucene-user-unsubscribe@jakarta.apache.org
> > > > > For additional commands, e-mail:
> > > > > lucene-user-help@jakarta.apache.org
> > > > >
> > > > >
> > > >
> > > >
> > > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> > > > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > > >
> > > >
> > >
> > >
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >
> >
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11197-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 16:04:23 2004
Return-Path: <lucene-user-return-11197-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1239 invoked from network); 12 Nov 2004 16:04:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 16:04:23 -0000
Received: (qmail 49609 invoked by uid 500); 12 Nov 2004 16:04:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49589 invoked by uid 500); 12 Nov 2004 16:04:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49573 invoked by uid 99); 12 Nov 2004 16:04:18 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 08:04:18 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iACG4DJ14199
	for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 10:04:13 -0600 (CST)
Subject: Re: Lucene : avoiding locking
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <063c01c4c8cf$6d024fb0$7703d00a@hypermedia.com>
References: <20041111235654.83806.qmail@web41006.mail.yahoo.com>
	 <055201c4c84f$30c1df00$7703d00a@hypermedia.com>
	 <1100273901.2886.4.camel@localhost>
	 <063c01c4c8cf$6d024fb0$7703d00a@hypermedia.com>
Content-Type: text/plain
Message-Id: <1100275440.2886.7.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Fri, 12 Nov 2004 10:04:00 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Fri, 2004-11-12 at 09:51, Luke Shannon wrote:
> Hi Luke;
> 
> Currently I am experimenting with checking if the index is lock using
> IndexReader.locked before creating a writer. If this turns out to be the
> case I was thinking of just unlocking the file.
> 
> Do you think this is a good strategy?

No, because if the index is locked, that means another thread or process
is writing to it.

If you're getting spurious locks, stop your application and clean our
the /tmp/ directory (you should see files named *lucene* -- these are
the lock files).

Luke


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11198-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 16:06:26 2004
Return-Path: <lucene-user-return-11198-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2450 invoked from network); 12 Nov 2004 16:06:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 16:06:26 -0000
Received: (qmail 54581 invoked by uid 500); 12 Nov 2004 16:06:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54359 invoked by uid 500); 12 Nov 2004 16:06:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54294 invoked by uid 99); 12 Nov 2004 16:06:18 -0000
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.243] (HELO web12706.mail.yahoo.com) (216.136.173.243)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 12 Nov 2004 08:06:18 -0800
Received: (qmail 88557 invoked by uid 60001); 12 Nov 2004 16:06:13 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=gUkL/HrZSmCgGfKxulhTW8pH+90Zw74b0nReKbRBU7llJPsy4IbFOj4+NpTNrKnWglB4OZw9cDAZrhevVM2VxIHfQdMyFRkIcqA6RMsDsXD02D58Sf7ZgR9NfyDptDu+y8GYOZYHRdbE15D7zVPUJYFnaFqJGaC16dU+64F1ka4=  ;
Message-ID: <20041112160612.88554.qmail@web12706.mail.yahoo.com>
Received: from [216.194.17.194] by web12706.mail.yahoo.com via HTTP; Fri, 12 Nov 2004 08:06:12 PST
Date: Fri, 12 Nov 2004 08:06:12 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene : avoiding locking
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <1100273901.2886.4.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> I am curious, though, how many people on this list are using Lucene
> in the incremental update case. Most examples I've seen all assume
> batch indexing.

I do both on for Simpy (simpy.com).  To ensure no duplicates, I try to
delete (by some unique ID) before I add a new Document.

Otis


> On Thu, 2004-11-11 at 18:33, Luke Shannon wrote:
> > Syncronizing the method didn't seem to help. The lock is being
> detected
> > right here in the code:
> > 
> > while (uidIter.term() != null
> >       && uidIter.term().field() == "uid"
> >       && uidIter.term().text().compareTo(uid) < 0) {
> >      //delete stale docs
> >      if (deleting) {
> >       reader.delete(uidIter.term());
> >      }
> >      uidIter.next();
> >     }
> > 
> > This runs fine on my own site so I am confused. For now I think I
> am going
> > to remove the deleting of "stale" files etc and just rebuild the
> index each
> > time to see what happens.
> > 
> > ----- Original Message ----- 
> > From: <yahootintin-lucene@yahoo.com>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Thursday, November 11, 2004 6:56 PM
> > Subject: Re: Lucene : avoiding locking
> > 
> > 
> > > I'm working on a similar project...
> > > Make sure that only one call to the index method is occuring at
> > > a time.  Synchronizing that method should do it.
> > >
> > > --- Luke Shannon <lshannon@hypermedia.com> wrote:
> > >
> > > > Hi All;
> > > >
> > > > I have hit a snag in my Lucene integration and don't know what
> > > > to do.
> > > >
> > > >  My company has a content management product. Each time
> > > > someone changes the
> > > >  directory structure or a file with in it that portion of the
> > > > site needs to
> > > >  be re-indexed so the changes are reflected in future searches
> > > > (indexing
> > > > must
> > > >  happen during run time).
> > > >
> > > >  I have written a Indexer class with a static Index() method.
> > > > The idea is
> > > > too
> > > >  call the method every time something changes and the index
> > > > needs to be
> > > >  re-examined. I am hoping the logic put in by Doug Cutting
> > > > surrounding the
> > > >  UID will make indexing efficient enough to be called so
> > > > frequently.
> > > >
> > > >  This class works great when I tested it on my own little site
> > > > (I have about
> > > >  2000 file). But when I drop the functionality into the QA
> > > > environment I get
> > > >  a locking error.
> > > >
> > > >  I can't access the stack trace, all I can get at is a log
> > > > file the
> > > >  application writes too. Here is the section my class wrote.
> > > > It was right in
> > > >  the middle of indexing and bang lock issue.
> > > >
> > > >  I don't know if the problem is in my code or something in the
> > > > existing
> > > >  application.
> > > >
> > > >  Error Message:
> > > >  ENTER|SearchEventProcessor.visit(ContentNodeDeleteEvent)
> > > >  |INFO|INDEXING INFO: Start Indexing new content.
> > > >  |INFO|INDEXING INFO: Index Folder Did Not Exist. Start
> > > > Creation Of New
> > > > Index
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > comparisions
> > > >  |INFO|INDEXING ERROR: Unable to index new content Lock obtain
> > > > timed out:
> > > >
> > > >
> > >
> >
>
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
> > > >  10f7fe8-write.lock
> > > >
> > > > |ENTER|UpdateCacheEventProcessor.visit(ContentNodeDeleteEvent)
> > > >
> > > >  Here is my code. You will recognize it pretty much as the
> > > > IndexHTML class
> > > >  from the Lucene demo written by Doug Cutting. I have put a
> > > > ton of comments
> > > >  in a attempt to understand what is going on.
> > > >
> > > >  Any help would be appreciated.
> > > >
> > > >  Luke
> > > >
> > > >  package com.fbhm.bolt.search;
> > > >
> > > >  /*
> > > >   * Created on Nov 11, 2004
> > > >   *
> > > >   * This class will create a single index file for the Content
> > > >   * Management System (CMS). It contains logic to ensure
> > > >   * indexing is done "intelligently". Based on IndexHTML.java
> > > >   * from the demo folder that ships with Lucene
> > > >   */
> > > >
> > > >  import java.io.File;
> > > >  import java.io.IOException;
> > > >  import java.util.Arrays;
> > > >  import java.util.Date;
> > > >
> > > >  import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > > >  import org.apache.lucene.document.Document;
> > > >  import org.apache.lucene.index.IndexReader;
> > > >  import org.apache.lucene.index.IndexWriter;
> > > >  import org.apache.lucene.index.Term;
> > > >  import org.apache.lucene.index.TermEnum;
> > > >  import org.pdfbox.searchengine.lucene.LucenePDFDocument;
> > > >  import org.apache.lucene.demo.HTMLDocument;
> > > >
> > > >  import com.alaia.common.debug.Trace;
> > > >  import com.alaia.common.util.AppProperties;
> > > >
> > > >  /**
> > > >   * @author lshannon Description: <br
> > > >   *   This class is used to index a content folder. It
> > > > contains logic to
> > > >   *   ensure only new or documents that have been modified
> > > > since the last
> > > >   *   search are indexed. <br
> > > >   *   Based on code writen by Doug Cutting in the IndexHTML
> > > > class found in
> > > >   *   the Lucene demo
> > > >   */
> > > >  public class Indexer {
> > > >   //true during deletion pass, this is when the index already
> > > > exists
> > > >   private static boolean deleting = false;
> > > >
> > > >   //object to read existing indexes
> > > >   private static IndexReader reader;
> > > >
> > > >   //object to write to the index folder
> > > >   private static IndexWriter writer;
> > > >
> > > >   //this will be used to write the index file
> > > >   private static TermEnum uidIter;
> > > >
> > > >   /*
> > > >    * This static method does all the work, the end result is
> > > > an up-to-date
> > > >  index folder
> > > >   */
> > > >   public static void Index() {
> > > >    //we will assume to start the index has been created
> > > >    boolean create = true;
> > > >    //set the name of the index file
> > > >    String indexFileLocation =
> > > >
> > > >
> > >
>
AppProperties.getPropertyAsString("bolt.search.siteIndex.index.root");
> > > >    //set the name of the content folder
> > > >    String contentFolderLocation =
> > > >  AppProperties.getPropertyAsString("site.root");
> > > >    //manage whether the index needs to be created or not
> > > >    File index = new File(indexFileLocation);
> > > >    File root = new File(contentFolderLocation);
> > > >    //the index file indicated exists, we need an incremental
> > > > update of the
> > > >    // index
> > > >    if (index.exists()) {
> > > >     Trace.TRACE("INDEXING INFO: An index folder exists at: " +
> > > >  indexFileLocation);
> > > >     deleting = true;
> > > >     create = false;
> > > >     try {
> > > >      //this version of index docs is able to execute the
> > > > incremental
> > > >      // update
> > > >      indexDocs(root, indexFileLocation, create);
> > > >     } catch (Exception e) {
> > > >      //we were unable to do the incremental update
> > > >      Trace.TRACE("INDEXING ERROR: Unable to execute
> > > > incremental update "
> > > >          + e.getMessage());
> > > >     }
> > > >     //after exiting this loop the index should be current with
> > > > content
> > > >     Trace.TRACE("INDEXING INFO: Incremental update
> > > > completed.");
> > > >    }
> > > >    try {
> > > >     //create the writer
> > > >     writer = new IndexWriter(index, new StandardAnalyzer(),
> > > > create);
> > > >     //configure the writer
> > > >     writer.mergeFactor = 10000;
> > > >     writer.maxFieldLength = 100000;
> > > >     try {
> > > >      //get the start date
> > > >      Date start = new Date();
> > > >      //call the indexDocs method, this time we will add new
> > > >      // documents
> > > >      Trace.TRACE("INDEXING INFO: Start Indexing new
> > > > content.");
> > > >      indexDocs(root, indexFileLocation, create);
> > > >      Trace.TRACE("INDEXING INFO: Indexing new content
> > > > complete.");
> > > >      //optimize the index
> > > >      writer.optimize();
> > > >      //close the writer
> > > >      writer.close();
> > > >      //get the end date
> > > >      Date end = new Date();
> > > >      long totalTime = end.getTime() - start.getTime();
> > > >      Trace.TRACE("INDEXING INFO: All Indexing Operations
> > > > Completed in "
> > > >          + totalTime + " milliseconds");
> > > >     } catch (Exception e1) {
> > > >      //unable to add new documents
> > > >      Trace.TRACE("INDEXING ERROR: Unable to index new content
> > > > "
> > > >          + e1.getMessage());
> > > >     }
> > > >    } catch (IOException e) {
> > > >     Trace.TRACE("INDEXING ERROR: Unable to create IndexWriter
> > > > "
> > > >       + e.getMessage());
> > > >    }
> > > >   }
> > > >
> > > >   /*
> > > >    * Walk directory hierarchy in uid order, while keeping uid
> > > > iterator from
> > > >  /*
> > > >    * existing index in sync. Mismatches indicate one of: (a)
> > > > old documents
> > > > to
> > > >  /*
> > > >    * be deleted; (b) unchanged documents, to be left alone; or
> > > > (c) new /*
> > > >    * documents, to be indexed.
> > > >    */
> > > >
> > > >   private static void indexDocs(File file, String index,
> > > > boolean create)
> > > >     throws Exception {
> > > >    //the index already exists we do an incremental update
> > > >    if (!create) {
> > > >     Trace.TRACE("INDEXING INFO: Incremental Update Request
> > > > Confirmed");
> > > >     //open existing index
> > > >     reader = IndexReader.open(index);
> > > >     //this gets an enummeration of uid terms
> > > >     uidIter = reader.terms(new Term("uid", ""));
> > > >     //jump to the index method that does the work
> > > >     //this will use the Iteration above and does
> > > >     //all the "smart" indexing
> > > >     indexDocs(file);
> > > >     //this will be true everytime the index already existed
> > > >     //we are not going to delete documents that are old
> > > >     if (deleting) {
> > > >      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> > > > Started. All
> > > >  Deleted Docs will be listed.");
> > > >      while (uidIter.term() != null
> > > >        && uidIter.term().field() == "uid") {
> > > >       //basically we are deleting all the document we have
> > > >       // indexed before
> > > >       Trace.TRACE("INDEXING INFO: Deleting document "
> > > >         + HTMLDocument.uid2url(uidIter.term().text()));
> > > >       //delete the term from the reader
> > > >       reader.delete(uidIter.term());
> > > >       //go to the nextfield
> > > >       uidIter.next();
> > > >      }
> > > >      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> > > > Completed");
> > > >      //turn off the deleting flag
> > > >      deleting = false;
> > > >     }//close the deleting branch
> > > >     //close the enummeration
> > > >     uidIter.close(); // close uid iterator
> > > >     //close the reader
> > > >     reader.close(); // close existing index
> > > >
> > > >    }
> > > >    //we go here is the index already existed
> > > >    else {
> > > >     Trace.TRACE("INDEXING INFO: Index Folder Did Not Exist.
> > > > Start Creation
> > > > Of
> > > >  New Index");
> > > >     // don't have exisiting
> > > >     indexDocs(file);
> > > >    }
> > > >   }
> > > >
> > > >   private static void indexDocs(File file) throws Exception {
> > > >    //check if we are at the top of a directory
> > > >    if (file.isDirectory()) {
> > > >     //get a list of the files
> > > >     String[] files = file.list();
> > > >     //sort them
> > > >     Arrays.sort(files);
> > > >     //index each file in the directory recursively
> > > >     //we keep repeating this logic until we hit a
> > > >     //file
> > > >     for (int i = 0; i < files.length; i++)
> > > >      //pass in the parent directory and the current file
> > > >      //into the file constructor and index
> > > >      indexDocs(new File(file, files[i]));
> > > >
> > > >    }
> > > >    //we have an actual file, so we need to consider the
> > > >    //file extensions so the correct Document is created
> > > >    else if (file.getPath().endsWith(".html")
> > > >      || file.getPath().endsWith(".htm")
> > > >      || file.getPath().endsWith(".txt")
> > > >      || file.getPath().endsWith(".doc")
> > > >      || file.getPath().endsWith(".xml")
> > > >      || file.getPath().endsWith(".pdf")) {
> > > >
> > > >     //if this is reached it means we were in the midst
> > > >     //of an incremental update
> > > >     if (uidIter != null) {
> > > >      //get the uid for the document we are on
> > > >      String uid = HTMLDocument.uid(file);
> > > >      //now compare this document to the one we have in the
> > > >      //enummeration of terms.
> > > >      //if the term in the enummeration is less than the
> > > >      //term we are on it must be deleted (if we are indeed
> > > >      //doing an incrementatal update)
> > > >      Trace.TRACE("INDEXING INFO: Beginnging Incremental update
> > > >  comparisions");
> > > >      while (uidIter.term() != null
> > > >        && uidIter.term().field() == "uid"
> > > >        && uidIter.term().text().compareTo(uid) < 0) {
> > > >       //delete stale docs
> > > >       if (deleting) {
> > > >        reader.delete(uidIter.term());
> > > >       }
> > > >       uidIter.next();
> > > >      }
> > > >      //if the terms are equal there is no change with this
> > > > document
> > > >      //we keep it as is
> > > >      if (uidIter.term() != null && uidIter.term().field() ==
> > > > "uid"
> > > >        && uidIter.term().text().compareTo(uid) == 0) {
> > > >       uidIter.next();
> > > >      }
> > > >      //if we are not deleting and the document was not there
> > > >      //it means we didn't have this document on the last index
> > > >      //and we should add it
> > > >      else if (!deleting) {
> > > >       if (file.getPath().endsWith(".pdf")) {
> > > >        Document doc = LucenePDFDocument.getDocument(file);
> > > >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > > > existing
> > > > index:
> > > >  "
> > > >            + doc.get("url"));
> > > >        writer.addDocument(doc);
> > > >       } else if (file.getPath().endsWith(".xml")) {
> > > >        Document doc = XMLDocument.Document(file);
> > > >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > > > existing
> > > > index:
> > > >  "
> > > >            + doc.get("url"));
> > > >        writer.addDocument(doc);
> > > >       } else {
> > > >        Document doc = HTMLDocument.Document(file);
> > > >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > > > existing
> > > > index:
> > > >  "
> > > >            + doc.get("url"));
> > > >        writer.addDocument(doc);
> > > >       }
> > > >      }
> > > >     }//end the if for an incremental update
> > > >     //we are creating a new index, add all document types
> > > >     else {
> > > >      if (file.getPath().endsWith(".pdf")) {
> > > >       Document doc = LucenePDFDocument.getDocument(file);
> > > >       Trace.TRACE("INDEXING INFO: Adding a new document to the
> > > > new index: "
> > > >           + doc.get("url"));
> > > >       writer.addDocument(doc);
> > > >      } else if (file.getPath().endsWith(".xml")) {
> > > >       Document doc = XMLDocument.Document(file);
> > > >       Trace.TRACE("INDEXING INFO: Adding a new document to the
> > > > new index: "
> > > >           + doc.get("url"));
> > > >       writer.addDocument(doc);
> > > >      } else {
> > > >       Document doc = HTMLDocument.Document(file);
> > > >       Trace.TRACE("INDEXING INFO: Adding a new document to the
> > > > new index: "
> > > >           + doc.get("url"));
> > > >       writer.addDocument(doc);
> > > >      }//close the else
> > > >     }//close the else for a new index
> > > >    }//close the else if to handle file types
> > > >   }//close the indexDocs method
> > > >
> > > >  }
> > > >
> > > >
> > > >  ----- Original Message ----- 
> > > >  From: "Craig McClanahan" <craigmcc@gmail.com
> > > >  To: "Jakarta Commons Users List"
> > > > <commons-user@jakarta.apache.org
> > > >  Sent: Thursday, November 11, 2004 6:13 PM
> > > >  Subject: Re: avoiding locking
> > > >
> > > >
> > > >   In order to get any useful help, it would be nice to know
> > > > what you are
> > > >   trying to do, and (most importantly) what commons component
> > > > is giving
> > > >   you the problem :-).  The traditional approach is to put a
> > > > prefix on
> > > >   your subject line -- for commons package "foo" it would be:
> > > >
> > > >     [foo] avoiding locking
> > > >
> > > >   It's also generally helpful to see the entire stack trace,
> > > > not just
> > > >   the exception message itself.
> > > >
> > > >   Craig
> > > >
> > > >
> > > >   On Thu, 11 Nov 2004 17:27:19 -0500, Luke Shannon
> > > >   <lshannon@hypermedia.com wrote:
> > > >    What can I do to avoid locking issues?
> > > >
> > > >    Unable to execute incremental update Lock obtain timed out:
> > > >
> > > >
> > >
> >
>
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
> > > >  10f7fe8-write.lock
> > > >
> > > >    Thanks,
> > > >
> > > >    Luke
> > > >
> > > >
> > > >
> > > >
> > >
> ---------------------------------------------------------------------
> > > >   To unsubscribe, e-mail:
> > > > commons-user-unsubscribe@jakarta.apache.org
> > > >   For additional commands, e-mail:
> > > > commons-user-help@jakarta.apache.org
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > >
> ---------------------------------------------------------------------
> > > >  To unsubscribe, e-mail:
> > > > commons-user-unsubscribe@jakarta.apache.org
> > > >  For additional commands, e-mail:
> > > > commons-user-help@jakarta.apache.org
> > > >
> > > >
> > > >
> > > >
> > > >
> > > >
> > >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> > > > lucene-user-unsubscribe@jakarta.apache.org
> > > > For additional commands, e-mail:
> > > > lucene-user-help@jakarta.apache.org
> > > >
> > > >
> > >
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > >
> > >
> > 
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11199-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 16:22:38 2004
Return-Path: <lucene-user-return-11199-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11422 invoked from network); 12 Nov 2004 16:22:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 16:22:38 -0000
Received: (qmail 90209 invoked by uid 500); 12 Nov 2004 16:22:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 89911 invoked by uid 500); 12 Nov 2004 16:22:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 89898 invoked by uid 99); 12 Nov 2004 16:22:34 -0000
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [216.54.180.10] (HELO htexc.hq.htinc.com) (216.54.180.10)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 08:22:34 -0800
X-MIMEOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Number of documents  to be optimized
Date: Fri, 12 Nov 2004 11:22:23 -0500
Message-ID: <4568BE33B520DD43B7B24DE0B609B215522EC1@htexc.hq.htinc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Number of documents  to be optimized
Thread-Index: AcTI0ZBw/dN/GN0JSkqZYEZcdWcAGwAAf7Yg
From: "Ravi" <ravi@htinc.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

How do I know the number of documents to be optimized (If I have one
large index, number of documents that are in other segments) at any
time?

Thanks in advance,
Ravi.=20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11200-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 16:52:44 2004
Return-Path: <lucene-user-return-11200-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27294 invoked from network); 12 Nov 2004 16:52:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 16:52:44 -0000
Received: (qmail 56825 invoked by uid 500); 12 Nov 2004 16:52:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 56804 invoked by uid 500); 12 Nov 2004 16:52:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 56791 invoked by uid 99); 12 Nov 2004 16:52:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [212.74.15.68] (HELO semantico.com) (212.74.15.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 08:52:31 -0800
Received: from spampd.localdomain (localhost [127.0.0.1])
	by localhost.semantico.com (Postfix) with ESMTP id 0353432013C
	for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 16:52:26 +0000 (GMT)
Received: from [192.168.1.210] (Annatto.dyn.rp.lan [192.168.1.210])
	by semantico.com (Postfix) with ESMTP id A564B32013C
	for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 16:52:26 +0000 (GMT)
Message-ID: <4194EA47.3030801@semantico.com>
Date: Fri, 12 Nov 2004 16:52:23 +0000
From: Peter Pimley <ppimley@semantico.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: QueryParser:  "[stopword] AND something" throws Exception
References: <004f01c4c5a9$2baa9140$7703d00a@hypermedia.com>
In-Reply-To: <004f01c4c5a9$2baa9140$7703d00a@hypermedia.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on paprika.rp.lan
X-Spam-Status: No, hits=-100.0 required=5.0 tests=USER_IN_WHITELIST 
	autolearn=no version=2.63
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


[this is using lucene-1.4-final]

Hello.

I have just encountered a way to get the QueryParser to throw an 
ArrayIndexOutOfBoundsException.  It can be recreated with the demo 
org.apache.lucene.demo.SearchFiles program.  The way to trigger it is to 
parse a query of the form:

"a AND b"

...where 'a' is a stop word.  For example, "the AND vector".  It only 
happens when the -first- term is a stop word.  You could search for 
"vector AND the" or "vector AND the AND class", and it works as you 
would expect (i.e. the stop words are ignored).

Unfortunately I am up against a deadline right now so I can't fix this 
myself.  I'm just going to filter out stop words before feeding them to 
the query parser.  I'll try to have a look at it in roughly 2 weeks time 
if nobody else has solved it.

Peter Pimley,
Semantico

Here is the stack trace.

java.lang.ArrayIndexOutOfBoundsException: -1
        at java.util.Vector.elementAt(Vector.java:434)
        at 
org.apache.lucene.queryParser.QueryParser.addClause(QueryParser.java:181)
        at 
org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:529)
        at 
org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:561)
        at 
org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:500)
        at 
org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:561)
        at 
org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:500)
        at 
org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:108)
        at 
org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:87)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11201-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 17:28:45 2004
Return-Path: <lucene-user-return-11201-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46003 invoked from network); 12 Nov 2004 17:28:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 17:28:45 -0000
Received: (qmail 13014 invoked by uid 500); 12 Nov 2004 17:28:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12926 invoked by uid 500); 12 Nov 2004 17:28:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12909 invoked by uid 99); 12 Nov 2004 17:28:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 09:28:38 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: QueryParser:  "[stopword] AND something" throws Exception
Date: Fri, 12 Nov 2004 12:04:31 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA5BFC72@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: QueryParser:  "[stopword] AND something" throws Exception
Thread-Index: AcTI1/e7bI+1w6s/QkCf5U5YPU8OnQAAZ82w
From: "Will Allen" <wallen@Cyveillance.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Holy cow!  This does happen!

-----Original Message-----
From: Peter Pimley [mailto:ppimley@semantico.com]
Sent: Friday, November 12, 2004 11:52 AM
To: Lucene Users List
Subject: QueryParser: "[stopword] AND something" throws Exception



[this is using lucene-1.4-final]

Hello.

I have just encountered a way to get the QueryParser to throw an=20
ArrayIndexOutOfBoundsException.  It can be recreated with the demo=20
org.apache.lucene.demo.SearchFiles program.  The way to trigger it is to =

parse a query of the form:

"a AND b"

...where 'a' is a stop word.  For example, "the AND vector".  It only=20
happens when the -first- term is a stop word.  You could search for=20
"vector AND the" or "vector AND the AND class", and it works as you=20
would expect (i.e. the stop words are ignored).

Unfortunately I am up against a deadline right now so I can't fix this=20
myself.  I'm just going to filter out stop words before feeding them to=20
the query parser.  I'll try to have a look at it in roughly 2 weeks time =

if nobody else has solved it.

Peter Pimley,
Semantico

Here is the stack trace.

java.lang.ArrayIndexOutOfBoundsException: -1
        at java.util.Vector.elementAt(Vector.java:434)
        at=20
org.apache.lucene.queryParser.QueryParser.addClause(QueryParser.java:181)=

        at=20
org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:529)
        at=20
org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:561)
        at=20
org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:500)
        at=20
org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:561)
        at=20
org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:500)
        at=20
org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:108)
        at=20
org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:87)


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11202-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 17:30:04 2004
Return-Path: <lucene-user-return-11202-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46643 invoked from network); 12 Nov 2004 17:30:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 17:30:04 -0000
Received: (qmail 14946 invoked by uid 500); 12 Nov 2004 17:30:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14925 invoked by uid 500); 12 Nov 2004 17:30:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14912 invoked by uid 99); 12 Nov 2004 17:30:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.205 as permitted sender)
Received: from [64.233.170.205] (HELO rproxy.gmail.com) (64.233.170.205)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 09:29:58 -0800
Received: by rproxy.gmail.com with SMTP id 34so419950rns
        for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 09:29:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=TL9fla+tz2I5t7p6Iw+op1GtYR9kTasZEz267WHgD2nrktUlQxzisKBAlDcPEZ5lW/01LtSFCVFu5i2LjcnVWt7XP2Et1x+cfsgoM3yNdXhlnKAZTs0tF5/fBcErV3kdnFjzHeXv3t+Jk+btOcZPPJCRBxbqFzGlS8yHs6xA+Lw=
Received: by 10.38.206.73 with SMTP id d73mr992037rng;
        Fri, 12 Nov 2004 09:29:53 -0800 (PST)
Received: by 10.38.179.9 with HTTP; Fri, 12 Nov 2004 09:29:53 -0800 (PST)
Message-ID: <dd2db8d00411120929617598ea@mail.gmail.com>
Date: Fri, 12 Nov 2004 10:29:53 -0700
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: QueryParser: "[stopword] AND something" throws Exception
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA5BFC72@hermes.corp.cyveillance.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <63434C14F9A6F74CB36B85033E4C30CA5BFC72@hermes.corp.cyveillance.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Try using 1.4.2.  The change file says that
ArrayIndexOutOfBoundsExceptions have been fixed in the queryparser.


On Fri, 12 Nov 2004 12:04:31 -0500, Will Allen <wallen@cyveillance.com> wrote:
> Holy cow!  This does happen!
> 
> 
> 
> -----Original Message-----
> From: Peter Pimley [mailto:ppimley@semantico.com]
> Sent: Friday, November 12, 2004 11:52 AM
> To: Lucene Users List
> Subject: QueryParser: "[stopword] AND something" throws Exception
> 
> [this is using lucene-1.4-final]
> 
> Hello.
> 
> I have just encountered a way to get the QueryParser to throw an
> ArrayIndexOutOfBoundsException.  It can be recreated with the demo
> org.apache.lucene.demo.SearchFiles program.  The way to trigger it is to
> parse a query of the form:
> 
> "a AND b"
> 
> ...where 'a' is a stop word.  For example, "the AND vector".  It only
> happens when the -first- term is a stop word.  You could search for
> "vector AND the" or "vector AND the AND class", and it works as you
> would expect (i.e. the stop words are ignored).
> 
> Unfortunately I am up against a deadline right now so I can't fix this
> myself.  I'm just going to filter out stop words before feeding them to
> the query parser.  I'll try to have a look at it in roughly 2 weeks time
> if nobody else has solved it.
> 
> Peter Pimley,
> Semantico
> 
> Here is the stack trace.
> 
> java.lang.ArrayIndexOutOfBoundsException: -1
>         at java.util.Vector.elementAt(Vector.java:434)
>         at
> org.apache.lucene.queryParser.QueryParser.addClause(QueryParser.java:181)
>         at
> org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:529)
>         at
> org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:561)
>         at
> org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:500)
>         at
> org.apache.lucene.queryParser.QueryParser.Clause(QueryParser.java:561)
>         at
> org.apache.lucene.queryParser.QueryParser.Query(QueryParser.java:500)
>         at
> org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:108)
>         at
> org.apache.lucene.queryParser.QueryParser.parse(QueryParser.java:87)
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11203-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 17:30:26 2004
Return-Path: <lucene-user-return-11203-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46827 invoked from network); 12 Nov 2004 17:30:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 17:30:26 -0000
Received: (qmail 16001 invoked by uid 500); 12 Nov 2004 17:30:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15984 invoked by uid 500); 12 Nov 2004 17:30:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15968 invoked by uid 99); 12 Nov 2004 17:30:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.84] (HELO mailout09.sul.t-online.com) (194.25.134.84)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 09:30:17 -0800
Received: from fwd05.aul.t-online.de 
	by mailout09.sul.t-online.com with smtp 
	id 1CSfFU-0004FZ-01; Fri, 12 Nov 2004 18:30:12 +0100
Received: from pD9EBF89C.dip.t-dialin.net (XNqAR6ZfreUuIFDVGOqt19SqcRYQzgH0kVtdpIAR9PLLExBesvAj6X@[217.235.248.156]) by fmrl05.sul.t-online.com
	with esmtp id 1CSfFJ-0sOeqe0; Fri, 12 Nov 2004 18:30:01 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: QueryParser:  "[stopword] AND something" throws Exception
Date: Fri, 12 Nov 2004 18:30:26 +0100
User-Agent: KMail/1.7.1
References: <004f01c4c5a9$2baa9140$7703d00a@hypermedia.com> <4194EA47.3030801@semantico.com>
In-Reply-To: <4194EA47.3030801@semantico.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411121830.26913@danielnaber.de>
X-ID: XNqAR6ZfreUuIFDVGOqt19SqcRYQzgH0kVtdpIAR9PLLExBesvAj6X@t-dialin.net
X-TOI-MSGID: 0d711fab-991d-4864-9b38-68082bfae9d9
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Friday 12 November 2004 17:52, Peter Pimley wrote:

> [this is using lucene-1.4-final]

Please try 1.4.2.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11204-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 19:03:03 2004
Return-Path: <lucene-user-return-11204-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91969 invoked from network); 12 Nov 2004 19:03:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 19:03:02 -0000
Received: (qmail 58450 invoked by uid 500); 12 Nov 2004 19:02:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58430 invoked by uid 500); 12 Nov 2004 19:02:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58413 invoked by uid 99); 12 Nov 2004 19:02:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 11:02:51 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Fri, 12 Nov 2004 14:03:30 -0500
Message-ID: <06a801c4c8ea$4c1c44c0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041112160339.99556.qmail@web12703.mail.yahoo.com>
Subject: Re: Lucene : avoiding locking
Date: Fri, 12 Nov 2004 14:03:29 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 12 Nov 2004 19:03:30.0208 (UTC) FILETIME=[4C59EA00:01C4C8EA]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi All;

I think I have resovled my locking issues, at least in my development
environment (QA is next). I did the following:

1. Synchronized all the methods in my class (not sure if this was really
necessary).
2. When ever I created a writer or use the reader to delete I checked if the
index is locked. If it is I sleep for one minute before checking again. If
still locked I use IndexReader.unlock() to remove the lock.

Honestly, other than studying for the Sun Programmers Exam, I have never
worked with threads. Does the above sound reasonable? Should I sleep longer?
I have pasted my code below for anyone that is interested.

Thanks,

Luke

/*
 * Created on Nov 11, 2004
 *
 * This class will create a single index file for the HyperMedia content
 * management system.  It is capable of incremental updates as well
 * creating a new index
*/
package model;

import java.io.File;
import java.io.IOException;
import java.util.Arrays;
import java.util.Date;

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.Term;
import org.apache.lucene.index.TermEnum;
import org.apache.lucene.store.FSDirectory;
import org.pdfbox.searchengine.lucene.LucenePDFDocument;

/**
 * @author lshannon Description: <br>
 *         This class is used to index a content folder. It contains logic
to
 *         ensure only new or documents that have been modified since the
last
 *         search are indexed. <br>
 *         Based on code writen by Doug Cutting in the IndexHTML class found
in
 *         the Lucene demo
 */
public class Indexer {
 //true during deletion pass, this is when the index already exists
 private static boolean deleting = false;

 //object to read existing indexes
 private static IndexReader reader;

 //object to write to the index folder
 private static IndexWriter writer;

 //this will be used to write the index file
 private static TermEnum uidIter;

 //the location of the index folder
 static File index;

 /*
  * The default constructor does all the work of the indexing
  */
 public synchronized static void Index() {
  //we will assume to start the index has been created
  boolean create = true;
  //set the name of the index file
  String indexFileLocation = "D:/work/WEB-INF/index";
  index = new File(indexFileLocation);
  //set the name of the content folder
  String contentFolderLocation = "D:/GM";
  File root = new File(contentFolderLocation);
  //the index file indicated exists, we need an incremental update of the
  // index
  if (index.exists()) {
   System.out
     .println("INDEXING INFO: An index folder exists in the location
supplied. Starting incremental update.");
   deleting = true;
   create = false;
   try {
    //this version of index docs is able to execute the incremental
    // update
    indexDocs(root, indexFileLocation, create);
   } catch (Exception e) {
    //we were unable to do the incremental update
    System.out
      .println("INDEXING ERROR: Unable to execute incremental update "
        + e.getMessage());
   }
   //after exiting this loop the index should be current with content
   System.out.println("INDEXING INFO: Incremental update completed.");
  }
  try {
   //create the writer
   System.out
     .println("Attempting to create Writer. The index is locked: "
       + IndexReader.isLocked(indexFileLocation));
   if (IndexReader.isLocked(indexFileLocation)) {
    try {
     System.out
       .println("Waiting 1 minutes for the reader to release the lock on the
index.");
     Thread.sleep(60000L);
     //if we are still locked we need to do something about it
     if (IndexReader.isLocked(indexFileLocation)) {
      System.out
        .println("Index Locked After 1 minute of waiting. Forcefully
releasing lock.");
      IndexReader.unlock(FSDirectory.getDirectory(index,
        false));
      System.out.println("Index lock released");
     }

    } catch (InterruptedException e2) {
     System.out
       .println("INDEX ERROR: There was a problem waiting for the lock to
release. "
         + e2.getMessage());
    }
   }
   System.out.println("Creating a new writer.");
   writer = new IndexWriter(index, new StandardAnalyzer(), create);
   //configure the writer
   writer.mergeFactor = 10000;
   writer.maxFieldLength = 100000;
   try {
    //get the start date
    Date start = new Date();
    //call the indexDocs method, this time we will add new
    // documents
    System.out
      .println("INDEXING INFO: Start Indexing new content.");
    indexDocs(root, indexFileLocation, create);
    System.out
      .println("INDEXING INFO: Indexing new content complete.");
    //optimize the index
    writer.optimize();
    //close the writer
    writer.close();
    //get the end date
    Date end = new Date();
    long totalTime = end.getTime() - start.getTime();
    System.out
      .println("INDEXING INFO: All Indexing Operations Completed in "
        + totalTime + " milliseconds");
   } catch (Exception e1) {
    //unable to add new documents
    System.out
      .println("INDEXING ERROR: Unable to index new content "
        + e1.getMessage());
   }
  } catch (IOException e) {
   System.out.println("INDEXING ERROR: Unable to create IndexWriter "
     + e.getMessage());
  }
 }

 /*
  * Walk directory hierarchy in uid order, while keeping uid iterator from
/*
  * existing index in sync. Mismatches indicate one of: (a) old documents to
/*
  * be deleted; (b) unchanged documents, to be left alone; or (c) new /*
  * documents, to be indexed.
  */

 private static synchronized void indexDocs(File file, String _index,
   boolean create) throws Exception {
  //the index already exists we do an incremental update
  if (!create) {
   System.out
     .println("INDEXING INFO: Incremental Update Request Confirmed");
   //open existing index
   reader = IndexReader.open(_index);
   //this gets an enummeration of uid terms
   uidIter = reader.terms(new Term("uid", ""));
   //jump to the index method that does the work
   //this will use the Iteration above and does
   //all the "smart" indexing
   indexDocs(file);
   //this will be true everytime the index already existed
   //we are not going to delete documents that are old
   if (deleting) {
    System.out
      .println("INDEXING INFO: Deleting Old Content Phase Started. All
Deleted Docs will be listed.");
    while (uidIter.term() != null
      && uidIter.term().field() == "uid") {
     //basically we are deleting all the document we have
     // indexed before
     System.out.println("INDEXING INFO: Deleting document "
       + HTMLDocument.uid2url(uidIter.term().text()));
     //delete the term from the reader
     System.out
       .println("The reader is attempting to deleting from the index.
indexDocs(3 arg)");
     if (IndexReader.isLocked(index.getPath())) {
      try {
       System.out
         .println("Waiting 1 minute for the reader to release the lock on
the index.");
       Thread.sleep(60000L);
       //if we are still locked we need to do something
       // about it
       if (IndexReader.isLocked(index.getPath())) {
        System.out
          .println("Index Locked After 1 minute of waiting. Forcefully
releasing lock.");
        IndexReader.unlock(FSDirectory.getDirectory(
          index, false));
        System.out.println("Index lock released");
       }

      } catch (InterruptedException e2) {
       System.out
         .println("INDEX ERROR: There was a problem waiting for the lock to
release. "
           + e2.getMessage());
      }
     }
     System.out.println("Index is now deleting");
     reader.delete(uidIter.term());
     //go to the nextfield
     uidIter.next();
    }
    System.out
      .println("INDEXING INFO: Deleting Old Content Phase Completed");
    //turn off the deleting flag
    deleting = false;
   }//close the deleting branch
   //close the enummeration
   uidIter.close(); // close uid iterator
   //close the reader
   reader.close(); // close existing index
  }
  //we go here is the index already existed
  else {
   System.out
     .println("INDEXING INFO: Index Folder Did Not Exist. Start Creation Of
New Index");
   // don't have exisiting
   indexDocs(file);
  }
 }

 private synchronized static void indexDocs(File file) throws Exception {
  //check if we are at the top of a directory
  if (file.isDirectory()) {
   //get a list of the files
   String[] files = file.list();
   //sort them
   Arrays.sort(files);
   //index each file in the directory recursively
   //we keep repeating this logic until we hit a
   //file
   for (int i = 0; i < files.length; i++)
    //pass in the parent directory and the current file
    //into the file constructor and index
    indexDocs(new File(file, files[i]));

  }
  //we have an actual file, so we need to consider the
  //file extensions so the correct Document is created
  else if (file.getPath().endsWith(".html")
    || file.getPath().endsWith(".htm")
    || file.getPath().endsWith(".txt")
    || file.getPath().endsWith(".doc")
    || file.getPath().endsWith(".xml")
    || file.getPath().endsWith(".pdf")) {
   System.out
     .println("INDEX INFO: Examining document: " + file.getAbsolutePath());

   //if this is reached it means we were in the midst
   //of an incremental update
   if (uidIter != null) {
    //get the uid for the document we are on
    String uid = HTMLDocument.uid(file);
    //now compare this document to the one we have in the
    //enummeration of terms.
    //if the term in the enummeration is less than the
    //term we are on it must be deleted (if we are indeed
    //doing an incrementatal update)
    System.out
      .println("INDEXING INFO: Incremental update comparisions: "
        + file.getName());
    while (uidIter.term() != null
      && uidIter.term().field() == "uid"
      && uidIter.term().text().compareTo(uid) < 0) {
     //delete stale docs
     if (deleting) {
      System.out
        .println("The reader is attempting to deleting from the index.
indexDocs(1 arg)");
      //look out for reader/writer conflicts
      if (IndexReader.isLocked(index.getPath())) {
       try {
        System.out
          .println("Waiting 1 minute for the reader to release the lock on
the index.");
        Thread.sleep(60000L);
        //if we are still locked we need to do
        // something about it
        if (IndexReader.isLocked(index.getPath())) {
         System.out
           .println("Index Locked After 1 minute waiting. Forcefully
releasing lock.");
         IndexReader.unlock(FSDirectory
           .getDirectory(index, false));
         System.out.println("Index lock released");
        }

       } catch (InterruptedException e2) {
        System.out
          .println("INDEX ERROR: There was a problem waiting for the lock to
release. "
            + e2.getMessage());
       }
      }
      System.out
        .println("INDEX INFO: Data has been deleted from the index.");
      reader.delete(uidIter.term());
     }
     uidIter.next();
    }
    //if the terms are equal there is no change with this document
    //we keep it as is
    if (uidIter.term() != null && uidIter.term().field() == "uid"
      && uidIter.term().text().compareTo(uid) == 0) {
     uidIter.next();
    }
    //if we are not deleting and the document was not there
    //it means we didn't have this document on the last index
    //and we should add it
    else if (!deleting) {
     System.out
       .println("INDEXING INFO: Adding a new Document to the existing index:
"
         + file.getPath());
     //pdf files
     if (file.getPath().endsWith(".pdf")) {
      try {
       Document doc = LucenePDFDocument.getDocument(file);
       writer.addDocument(doc);
      } catch (Exception e) {
       System.out
         .println("INDEXING ERROR: Unable to index pdf document: "
           + file.getPath()
           + " "
           + e.getMessage());
      }
     }
     //xml documents
     else if (file.getPath().endsWith(".xml")) {
      try {
       Document doc = XMLDocument.Document(file);
       writer.addDocument(doc);
      } catch (Exception e) {
       System.out
         .println("INDEXING ERROR: Was unable to index XML document: "
           + file.getPath()
           + " "
           + e.getMessage());
      }
     }
     //html and txt documents
     else {
      try {
       Document doc = HTMLDocument.Document(file);
       writer.addDocument(doc);
      } catch (Exception e) {
       System.out
         .println("INDEXING ERROR: Was unable to index HTML/TXT file: "
           + file.getPath()
           + " "
           + e.getMessage());
      }
     }
    }
   }//end the if for an incremental update
   //we are creating a new index, add all document types
   else {
    System.out
      .println("INDEXING INFO: Adding a new Document to a new index: "
        + file.getPath());
    //pdf documents
    if (file.getPath().endsWith(".pdf")) {
     try {
      Document doc = LucenePDFDocument.getDocument(file);
      writer.addDocument(doc);
     } catch (Exception e) {
      System.out
        .println("INDEXING ERROR: Unable to index pdf document: "
          + file.getPath() + " " + e.getMessage());
     }
    }
    //xml documents
    else if (file.getPath().endsWith(".xml")) {
     try {
      Document doc = XMLDocument.Document(file);
      writer.addDocument(doc);
     } catch (Exception e) {
      System.out
        .println("INDEXING ERROR: Was unable to index XML document: "
          + file.getPath() + " " + e.getMessage());
     }
    }
    //html and txt documents
    else {
     try {
      Document doc = HTMLDocument.Document(file);
      writer.addDocument(doc);
     } catch (Exception e) {
      System.out
        .println("INDEXING ERROR: Was unable to index HTML/TXT file: "
          + file.getPath() + " " + e.getMessage());
     }
    }//close the else
   }//close the else for a new index
  }//close the else if to handle file types
 }//close the indexDocs method

 /*
  * Close any open objects.
  */
 protected void finalize() throws Throwable {
  if (reader != null) {
   reader.close();
  }
  if (writer != null) {
   writer.close();
  }
 }
}
----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Friday, November 12, 2004 11:03 AM
Subject: Re: Lucene : avoiding locking


> Hello,
>
> --- Luke Shannon <lshannon@hypermedia.com> wrote:
>
> > Currently I am experimenting with checking if the index is lock using
> > IndexReader.locked before creating a writer. If this turns out to be
> > the
> > case I was thinking of just unlocking the file.
> >
> > Do you think this is a good strategy?
>
> Only if you synchronize well and only if all index-modifying accesses
> are contained in the same JVM.  Alternatively, you could add a 'sleep
> and retry' logic around the lock check, and perhaps 'give up or force
> unlock if you got too much sleep'.
>
> Otis
>
>
> > ----- Original Message ----- 
> > From: "Luke Francl" <luke.francl@stellent.com>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Friday, November 12, 2004 10:38 AM
> > Subject: Re: Lucene : avoiding locking
> >
> >
> > > Luke,
> > >
> > > I also integrated Lucene into a content management application with
> > > incremental updates and ran into the same problem you did.
> > >
> > > You need to make sure only one process (which means, no multiple
> > copies
> > > of the application writing to the index simultaneously) or thread
> > ever
> > > writes to the index. That includes deletes as in your code below,
> > so
> > > make sure that is synchronized, too.
> > >
> > > Also, you will find that opening and closing the index for writing
> > is
> > > very costly, especially on a large index, so it pays to batch up
> > all
> > > changes in a transaction (inserts and deletes) together in one go
> > at the
> > > Lucene index. If this still isn't enough, you can batch up 5
> > minutes
> > > worth of changes and apply them at once. We haven't got to that
> > point
> > > yet.
> > >
> > > I am curious, though, how many people on this list are using Lucene
> > in
> > > the incremental update case. Most examples I've seen all assume
> > batch
> > > indexing.
> > >
> > > Regards,
> > >
> > > Luke Francl
> > >
> > >
> > >
> > > On Thu, 2004-11-11 at 18:33, Luke Shannon wrote:
> > > > Syncronizing the method didn't seem to help. The lock is being
> > detected
> > > > right here in the code:
> > > >
> > > > while (uidIter.term() != null
> > > >       && uidIter.term().field() == "uid"
> > > >       && uidIter.term().text().compareTo(uid) < 0) {
> > > >      //delete stale docs
> > > >      if (deleting) {
> > > >       reader.delete(uidIter.term());
> > > >      }
> > > >      uidIter.next();
> > > >     }
> > > >
> > > > This runs fine on my own site so I am confused. For now I think I
> > am
> > going
> > > > to remove the deleting of "stale" files etc and just rebuild the
> > index
> > each
> > > > time to see what happens.
> > > >
> > > > ----- Original Message ----- 
> > > > From: <yahootintin-lucene@yahoo.com>
> > > > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > > > Sent: Thursday, November 11, 2004 6:56 PM
> > > > Subject: Re: Lucene : avoiding locking
> > > >
> > > >
> > > > > I'm working on a similar project...
> > > > > Make sure that only one call to the index method is occuring at
> > > > > a time.  Synchronizing that method should do it.
> > > > >
> > > > > --- Luke Shannon <lshannon@hypermedia.com> wrote:
> > > > >
> > > > > > Hi All;
> > > > > >
> > > > > > I have hit a snag in my Lucene integration and don't know
> > what
> > > > > > to do.
> > > > > >
> > > > > >  My company has a content management product. Each time
> > > > > > someone changes the
> > > > > >  directory structure or a file with in it that portion of the
> > > > > > site needs to
> > > > > >  be re-indexed so the changes are reflected in future
> > searches
> > > > > > (indexing
> > > > > > must
> > > > > >  happen during run time).
> > > > > >
> > > > > >  I have written a Indexer class with a static Index() method.
> > > > > > The idea is
> > > > > > too
> > > > > >  call the method every time something changes and the index
> > > > > > needs to be
> > > > > >  re-examined. I am hoping the logic put in by Doug Cutting
> > > > > > surrounding the
> > > > > >  UID will make indexing efficient enough to be called so
> > > > > > frequently.
> > > > > >
> > > > > >  This class works great when I tested it on my own little
> > site
> > > > > > (I have about
> > > > > >  2000 file). But when I drop the functionality into the QA
> > > > > > environment I get
> > > > > >  a locking error.
> > > > > >
> > > > > >  I can't access the stack trace, all I can get at is a log
> > > > > > file the
> > > > > >  application writes too. Here is the section my class wrote.
> > > > > > It was right in
> > > > > >  the middle of indexing and bang lock issue.
> > > > > >
> > > > > >  I don't know if the problem is in my code or something in
> > the
> > > > > > existing
> > > > > >  application.
> > > > > >
> > > > > >  Error Message:
> > > > > >  ENTER|SearchEventProcessor.visit(ContentNodeDeleteEvent)
> > > > > >  |INFO|INDEXING INFO: Start Indexing new content.
> > > > > >  |INFO|INDEXING INFO: Index Folder Did Not Exist. Start
> > > > > > Creation Of New
> > > > > > Index
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING INFO: Beginnging Incremental update
> > > > > > comparisions
> > > > > >  |INFO|INDEXING ERROR: Unable to index new content Lock
> > obtain
> > > > > > timed out:
> > > > > >
> > > > > >
> > > > >
> > > >
> >
>
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
> > > > > >  10f7fe8-write.lock
> > > > > >
> > > > > >
> > |ENTER|UpdateCacheEventProcessor.visit(ContentNodeDeleteEvent)
> > > > > >
> > > > > >  Here is my code. You will recognize it pretty much as the
> > > > > > IndexHTML class
> > > > > >  from the Lucene demo written by Doug Cutting. I have put a
> > > > > > ton of comments
> > > > > >  in a attempt to understand what is going on.
> > > > > >
> > > > > >  Any help would be appreciated.
> > > > > >
> > > > > >  Luke
> > > > > >
> > > > > >  package com.fbhm.bolt.search;
> > > > > >
> > > > > >  /*
> > > > > >   * Created on Nov 11, 2004
> > > > > >   *
> > > > > >   * This class will create a single index file for the
> > Content
> > > > > >   * Management System (CMS). It contains logic to ensure
> > > > > >   * indexing is done "intelligently". Based on IndexHTML.java
> > > > > >   * from the demo folder that ships with Lucene
> > > > > >   */
> > > > > >
> > > > > >  import java.io.File;
> > > > > >  import java.io.IOException;
> > > > > >  import java.util.Arrays;
> > > > > >  import java.util.Date;
> > > > > >
> > > > > >  import org.apache.lucene.analysis.standard.StandardAnalyzer;
> > > > > >  import org.apache.lucene.document.Document;
> > > > > >  import org.apache.lucene.index.IndexReader;
> > > > > >  import org.apache.lucene.index.IndexWriter;
> > > > > >  import org.apache.lucene.index.Term;
> > > > > >  import org.apache.lucene.index.TermEnum;
> > > > > >  import org.pdfbox.searchengine.lucene.LucenePDFDocument;
> > > > > >  import org.apache.lucene.demo.HTMLDocument;
> > > > > >
> > > > > >  import com.alaia.common.debug.Trace;
> > > > > >  import com.alaia.common.util.AppProperties;
> > > > > >
> > > > > >  /**
> > > > > >   * @author lshannon Description: <br
> > > > > >   *   This class is used to index a content folder. It
> > > > > > contains logic to
> > > > > >   *   ensure only new or documents that have been modified
> > > > > > since the last
> > > > > >   *   search are indexed. <br
> > > > > >   *   Based on code writen by Doug Cutting in the IndexHTML
> > > > > > class found in
> > > > > >   *   the Lucene demo
> > > > > >   */
> > > > > >  public class Indexer {
> > > > > >   //true during deletion pass, this is when the index already
> > > > > > exists
> > > > > >   private static boolean deleting = false;
> > > > > >
> > > > > >   //object to read existing indexes
> > > > > >   private static IndexReader reader;
> > > > > >
> > > > > >   //object to write to the index folder
> > > > > >   private static IndexWriter writer;
> > > > > >
> > > > > >   //this will be used to write the index file
> > > > > >   private static TermEnum uidIter;
> > > > > >
> > > > > >   /*
> > > > > >    * This static method does all the work, the end result is
> > > > > > an up-to-date
> > > > > >  index folder
> > > > > >   */
> > > > > >   public static void Index() {
> > > > > >    //we will assume to start the index has been created
> > > > > >    boolean create = true;
> > > > > >    //set the name of the index file
> > > > > >    String indexFileLocation =
> > > > > >
> > > > > >
> > > > >
> >
> AppProperties.getPropertyAsString("bolt.search.siteIndex.index.root");
> > > > > >    //set the name of the content folder
> > > > > >    String contentFolderLocation =
> > > > > >  AppProperties.getPropertyAsString("site.root");
> > > > > >    //manage whether the index needs to be created or not
> > > > > >    File index = new File(indexFileLocation);
> > > > > >    File root = new File(contentFolderLocation);
> > > > > >    //the index file indicated exists, we need an incremental
> > > > > > update of the
> > > > > >    // index
> > > > > >    if (index.exists()) {
> > > > > >     Trace.TRACE("INDEXING INFO: An index folder exists at: "
> > +
> > > > > >  indexFileLocation);
> > > > > >     deleting = true;
> > > > > >     create = false;
> > > > > >     try {
> > > > > >      //this version of index docs is able to execute the
> > > > > > incremental
> > > > > >      // update
> > > > > >      indexDocs(root, indexFileLocation, create);
> > > > > >     } catch (Exception e) {
> > > > > >      //we were unable to do the incremental update
> > > > > >      Trace.TRACE("INDEXING ERROR: Unable to execute
> > > > > > incremental update "
> > > > > >          + e.getMessage());
> > > > > >     }
> > > > > >     //after exiting this loop the index should be current
> > with
> > > > > > content
> > > > > >     Trace.TRACE("INDEXING INFO: Incremental update
> > > > > > completed.");
> > > > > >    }
> > > > > >    try {
> > > > > >     //create the writer
> > > > > >     writer = new IndexWriter(index, new StandardAnalyzer(),
> > > > > > create);
> > > > > >     //configure the writer
> > > > > >     writer.mergeFactor = 10000;
> > > > > >     writer.maxFieldLength = 100000;
> > > > > >     try {
> > > > > >      //get the start date
> > > > > >      Date start = new Date();
> > > > > >      //call the indexDocs method, this time we will add new
> > > > > >      // documents
> > > > > >      Trace.TRACE("INDEXING INFO: Start Indexing new
> > > > > > content.");
> > > > > >      indexDocs(root, indexFileLocation, create);
> > > > > >      Trace.TRACE("INDEXING INFO: Indexing new content
> > > > > > complete.");
> > > > > >      //optimize the index
> > > > > >      writer.optimize();
> > > > > >      //close the writer
> > > > > >      writer.close();
> > > > > >      //get the end date
> > > > > >      Date end = new Date();
> > > > > >      long totalTime = end.getTime() - start.getTime();
> > > > > >      Trace.TRACE("INDEXING INFO: All Indexing Operations
> > > > > > Completed in "
> > > > > >          + totalTime + " milliseconds");
> > > > > >     } catch (Exception e1) {
> > > > > >      //unable to add new documents
> > > > > >      Trace.TRACE("INDEXING ERROR: Unable to index new content
> > > > > > "
> > > > > >          + e1.getMessage());
> > > > > >     }
> > > > > >    } catch (IOException e) {
> > > > > >     Trace.TRACE("INDEXING ERROR: Unable to create IndexWriter
> > > > > > "
> > > > > >       + e.getMessage());
> > > > > >    }
> > > > > >   }
> > > > > >
> > > > > >   /*
> > > > > >    * Walk directory hierarchy in uid order, while keeping uid
> > > > > > iterator from
> > > > > >  /*
> > > > > >    * existing index in sync. Mismatches indicate one of: (a)
> > > > > > old documents
> > > > > > to
> > > > > >  /*
> > > > > >    * be deleted; (b) unchanged documents, to be left alone;
> > or
> > > > > > (c) new /*
> > > > > >    * documents, to be indexed.
> > > > > >    */
> > > > > >
> > > > > >   private static void indexDocs(File file, String index,
> > > > > > boolean create)
> > > > > >     throws Exception {
> > > > > >    //the index already exists we do an incremental update
> > > > > >    if (!create) {
> > > > > >     Trace.TRACE("INDEXING INFO: Incremental Update Request
> > > > > > Confirmed");
> > > > > >     //open existing index
> > > > > >     reader = IndexReader.open(index);
> > > > > >     //this gets an enummeration of uid terms
> > > > > >     uidIter = reader.terms(new Term("uid", ""));
> > > > > >     //jump to the index method that does the work
> > > > > >     //this will use the Iteration above and does
> > > > > >     //all the "smart" indexing
> > > > > >     indexDocs(file);
> > > > > >     //this will be true everytime the index already existed
> > > > > >     //we are not going to delete documents that are old
> > > > > >     if (deleting) {
> > > > > >      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> > > > > > Started. All
> > > > > >  Deleted Docs will be listed.");
> > > > > >      while (uidIter.term() != null
> > > > > >        && uidIter.term().field() == "uid") {
> > > > > >       //basically we are deleting all the document we have
> > > > > >       // indexed before
> > > > > >       Trace.TRACE("INDEXING INFO: Deleting document "
> > > > > >         + HTMLDocument.uid2url(uidIter.term().text()));
> > > > > >       //delete the term from the reader
> > > > > >       reader.delete(uidIter.term());
> > > > > >       //go to the nextfield
> > > > > >       uidIter.next();
> > > > > >      }
> > > > > >      Trace.TRACE("INDEXING INFO: Deleting Old Content Phase
> > > > > > Completed");
> > > > > >      //turn off the deleting flag
> > > > > >      deleting = false;
> > > > > >     }//close the deleting branch
> > > > > >     //close the enummeration
> > > > > >     uidIter.close(); // close uid iterator
> > > > > >     //close the reader
> > > > > >     reader.close(); // close existing index
> > > > > >
> > > > > >    }
> > > > > >    //we go here is the index already existed
> > > > > >    else {
> > > > > >     Trace.TRACE("INDEXING INFO: Index Folder Did Not Exist.
> > > > > > Start Creation
> > > > > > Of
> > > > > >  New Index");
> > > > > >     // don't have exisiting
> > > > > >     indexDocs(file);
> > > > > >    }
> > > > > >   }
> > > > > >
> > > > > >   private static void indexDocs(File file) throws Exception {
> > > > > >    //check if we are at the top of a directory
> > > > > >    if (file.isDirectory()) {
> > > > > >     //get a list of the files
> > > > > >     String[] files = file.list();
> > > > > >     //sort them
> > > > > >     Arrays.sort(files);
> > > > > >     //index each file in the directory recursively
> > > > > >     //we keep repeating this logic until we hit a
> > > > > >     //file
> > > > > >     for (int i = 0; i < files.length; i++)
> > > > > >      //pass in the parent directory and the current file
> > > > > >      //into the file constructor and index
> > > > > >      indexDocs(new File(file, files[i]));
> > > > > >
> > > > > >    }
> > > > > >    //we have an actual file, so we need to consider the
> > > > > >    //file extensions so the correct Document is created
> > > > > >    else if (file.getPath().endsWith(".html")
> > > > > >      || file.getPath().endsWith(".htm")
> > > > > >      || file.getPath().endsWith(".txt")
> > > > > >      || file.getPath().endsWith(".doc")
> > > > > >      || file.getPath().endsWith(".xml")
> > > > > >      || file.getPath().endsWith(".pdf")) {
> > > > > >
> > > > > >     //if this is reached it means we were in the midst
> > > > > >     //of an incremental update
> > > > > >     if (uidIter != null) {
> > > > > >      //get the uid for the document we are on
> > > > > >      String uid = HTMLDocument.uid(file);
> > > > > >      //now compare this document to the one we have in the
> > > > > >      //enummeration of terms.
> > > > > >      //if the term in the enummeration is less than the
> > > > > >      //term we are on it must be deleted (if we are indeed
> > > > > >      //doing an incrementatal update)
> > > > > >      Trace.TRACE("INDEXING INFO: Beginnging Incremental
> > update
> > > > > >  comparisions");
> > > > > >      while (uidIter.term() != null
> > > > > >        && uidIter.term().field() == "uid"
> > > > > >        && uidIter.term().text().compareTo(uid) < 0) {
> > > > > >       //delete stale docs
> > > > > >       if (deleting) {
> > > > > >        reader.delete(uidIter.term());
> > > > > >       }
> > > > > >       uidIter.next();
> > > > > >      }
> > > > > >      //if the terms are equal there is no change with this
> > > > > > document
> > > > > >      //we keep it as is
> > > > > >      if (uidIter.term() != null && uidIter.term().field() ==
> > > > > > "uid"
> > > > > >        && uidIter.term().text().compareTo(uid) == 0) {
> > > > > >       uidIter.next();
> > > > > >      }
> > > > > >      //if we are not deleting and the document was not there
> > > > > >      //it means we didn't have this document on the last
> > index
> > > > > >      //and we should add it
> > > > > >      else if (!deleting) {
> > > > > >       if (file.getPath().endsWith(".pdf")) {
> > > > > >        Document doc = LucenePDFDocument.getDocument(file);
> > > > > >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > > > > > existing
> > > > > > index:
> > > > > >  "
> > > > > >            + doc.get("url"));
> > > > > >        writer.addDocument(doc);
> > > > > >       } else if (file.getPath().endsWith(".xml")) {
> > > > > >        Document doc = XMLDocument.Document(file);
> > > > > >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > > > > > existing
> > > > > > index:
> > > > > >  "
> > > > > >            + doc.get("url"));
> > > > > >        writer.addDocument(doc);
> > > > > >       } else {
> > > > > >        Document doc = HTMLDocument.Document(file);
> > > > > >        Trace.TRACE("INDEXING INFO: Adding new document to the
> > > > > > existing
> > > > > > index:
> > > > > >  "
> > > > > >            + doc.get("url"));
> > > > > >        writer.addDocument(doc);
> > > > > >       }
> > > > > >      }
> > > > > >     }//end the if for an incremental update
> > > > > >     //we are creating a new index, add all document types
> > > > > >     else {
> > > > > >      if (file.getPath().endsWith(".pdf")) {
> > > > > >       Document doc = LucenePDFDocument.getDocument(file);
> > > > > >       Trace.TRACE("INDEXING INFO: Adding a new document to
> > the
> > > > > > new index: "
> > > > > >           + doc.get("url"));
> > > > > >       writer.addDocument(doc);
> > > > > >      } else if (file.getPath().endsWith(".xml")) {
> > > > > >       Document doc = XMLDocument.Document(file);
> > > > > >       Trace.TRACE("INDEXING INFO: Adding a new document to
> > the
> > > > > > new index: "
> > > > > >           + doc.get("url"));
> > > > > >       writer.addDocument(doc);
> > > > > >      } else {
> > > > > >       Document doc = HTMLDocument.Document(file);
> > > > > >       Trace.TRACE("INDEXING INFO: Adding a new document to
> > the
> > > > > > new index: "
> > > > > >           + doc.get("url"));
> > > > > >       writer.addDocument(doc);
> > > > > >      }//close the else
> > > > > >     }//close the else for a new index
> > > > > >    }//close the else if to handle file types
> > > > > >   }//close the indexDocs method
> > > > > >
> > > > > >  }
> > > > > >
> > > > > >
> > > > > >  ----- Original Message ----- 
> > > > > >  From: "Craig McClanahan" <craigmcc@gmail.com
> > > > > >  To: "Jakarta Commons Users List"
> > > > > > <commons-user@jakarta.apache.org
> > > > > >  Sent: Thursday, November 11, 2004 6:13 PM
> > > > > >  Subject: Re: avoiding locking
> > > > > >
> > > > > >
> > > > > >   In order to get any useful help, it would be nice to know
> > > > > > what you are
> > > > > >   trying to do, and (most importantly) what commons component
> > > > > > is giving
> > > > > >   you the problem :-).  The traditional approach is to put a
> > > > > > prefix on
> > > > > >   your subject line -- for commons package "foo" it would be:
> > > > > >
> > > > > >     [foo] avoiding locking
> > > > > >
> > > > > >   It's also generally helpful to see the entire stack trace,
> > > > > > not just
> > > > > >   the exception message itself.
> > > > > >
> > > > > >   Craig
> > > > > >
> > > > > >
> > > > > >   On Thu, 11 Nov 2004 17:27:19 -0500, Luke Shannon
> > > > > >   <lshannon@hypermedia.com wrote:
> > > > > >    What can I do to avoid locking issues?
> > > > > >
> > > > > >    Unable to execute incremental update Lock obtain timed
> > out:
> > > > > >
> > > > > >
> > > > >
> > > >
> >
>
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d432
> > > > > >  10f7fe8-write.lock
> > > > > >
> > > > > >    Thanks,
> > > > > >
> > > > > >    Luke
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > >
> > ---------------------------------------------------------------------
> > > > > >   To unsubscribe, e-mail:
> > > > > > commons-user-unsubscribe@jakarta.apache.org
> > > > > >   For additional commands, e-mail:
> > > > > > commons-user-help@jakarta.apache.org
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > >
> > ---------------------------------------------------------------------
> > > > > >  To unsubscribe, e-mail:
> > > > > > commons-user-unsubscribe@jakarta.apache.org
> > > > > >  For additional commands, e-mail:
> > > > > > commons-user-help@jakarta.apache.org
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > > >
> > > > >
> > ---------------------------------------------------------------------
> > > > > > To unsubscribe, e-mail:
> > > > > > lucene-user-unsubscribe@jakarta.apache.org
> > > > > > For additional commands, e-mail:
> > > > > > lucene-user-help@jakarta.apache.org
> > > > > >
> > > > > >
> > > > >
> > > > >
> > > > >
> > ---------------------------------------------------------------------
> > > > > To unsubscribe, e-mail:
> > lucene-user-unsubscribe@jakarta.apache.org
> > > > > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > > > >
> > > > >
> > > >
> > > >
> > > >
> > > >
> > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> > lucene-user-unsubscribe@jakarta.apache.org
> > > > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > > >
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > >
> > >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11205-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 19:47:16 2004
Return-Path: <lucene-user-return-11205-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15752 invoked from network); 12 Nov 2004 19:47:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 19:47:16 -0000
Received: (qmail 43983 invoked by uid 500); 12 Nov 2004 19:47:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43942 invoked by uid 500); 12 Nov 2004 19:47:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43927 invoked by uid 99); 12 Nov 2004 19:47:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [194.217.242.92] (HELO anchor-post-34.mail.demon.net) (194.217.242.92)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 11:47:06 -0800
Received: from peterpi.demon.co.uk ([80.176.85.36] helo=[10.0.0.3])
	by anchor-post-34.mail.demon.net with esmtp (Exim 4.42)
	id 1CShNm-0002a0-DO
	for lucene-user@jakarta.apache.org; Fri, 12 Nov 2004 19:46:54 +0000
Message-ID: <41952070.80600@semantico.com>
Date: Fri, 12 Nov 2004 20:43:28 +0000
From: Peter Pimley <ppimley@semantico.com>
User-Agent: Mozilla Thunderbird 0.8 (X11/20040926)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: QueryParser: "[stopword] AND something" throws Exception
References: <63434C14F9A6F74CB36B85033E4C30CA5BFC72@hermes.corp.cyveillance.com> <dd2db8d00411120929617598ea@mail.gmail.com>
In-Reply-To: <dd2db8d00411120929617598ea@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks for pointing that out, and sorry for reporting a duplicate bug.

I went here: http://jakarta.apache.org/site/binindex.cgi and the lucene 
link about halfway down the page links to 1.4-final.  I didn't find my 
way to the page that announces 1.4.2.  I'll install 1.4.2 on Monday 
morning, which will let me remove my untidy workaround. :)

Cheers,
Peter


Justin Swanhart wrote:

>Try using 1.4.2.  The change file says that
>ArrayIndexOutOfBoundsExceptions have been fixed in the queryparser.
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11206-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 19:48:17 2004
Return-Path: <lucene-user-return-11206-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16363 invoked from network); 12 Nov 2004 19:48:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 19:48:17 -0000
Received: (qmail 45862 invoked by uid 500); 12 Nov 2004 19:48:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45695 invoked by uid 500); 12 Nov 2004 19:48:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45681 invoked by uid 99); 12 Nov 2004 19:48:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ken.mccracken@gmail.com designates 64.233.170.193 as permitted sender)
Received: from [64.233.170.193] (HELO rproxy.gmail.com) (64.233.170.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 11:48:07 -0800
Received: by rproxy.gmail.com with SMTP id a36so461887rnf
        for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 11:48:04 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=IySC71UKttjMc3EmhQ5K5nao4w1FzkT8Gli7kIa6EETd5adm4q8kEaPGeDdZWk2X1GU23k4N0CRaemsu0colcjE4mQLKDYzjhu0GqzZVzB5cqxd/9kDRknrtzOTfDNpLEYEs8QGG4jPejPFX27jb5vu6V+2fUCzKM1qN2auZGTA=
Received: by 10.38.97.10 with SMTP id u10mr2021rnb;
        Fri, 12 Nov 2004 11:48:04 -0800 (PST)
Received: by 10.38.75.11 with HTTP; Fri, 12 Nov 2004 11:48:04 -0800 (PST)
Message-ID: <2b2518a404111211481f7ac51c@mail.gmail.com>
Date: Fri, 12 Nov 2004 11:48:04 -0800
From: Ken McCracken <ken.mccracken@gmail.com>
Reply-To: Ken McCracken <ken.mccracken@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: lucene Scorers
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I am looking at the Similarity class overview, and wondering if I can
replace the SUM operator with a MAX operator, or any other operator
(across the terms in a query).

For example, if I search for "car OR automobile", a BooleanScorer is
used to add the values from each subexpression together.  In the
BooleanScorer from lucene_1_4_final, in the inner class Collector, we
have in the collect(...) method, the line

     bucket.score += score;			  // increment score

that I may want replace with a MAX operator such as 

     if (score > bucket.score) bucket.score = score;        // take the max

I may also want to keep track of both the max and the sum, by
extending the inner class Bucket.

Do you have any suggestions on how to implement such a change? 
Ideally, I would like to have the ability to define my choice of
scoring algorithm at search time (at run time), and use the Lucene SUM
scorer for some searches, and the MAX scorer for other searches.

Thanks for you help.

-Ken

PS.  The code I'm talking about falls in the follwoing area, for my
example search "car OR automobile".  If I walk the code during search,
I see that the BooleanScorer$Collector is created by the Weight that
was just created, in BooleanQuery$BooleanWeight.scorer(...), as it
adds the subscorers for each of the terms in the BooleanScorer.  When
that collector is asked to collect(...), its bucketTable is filled in.
 Since the collectors for each of the terms use the same bucketTable,
if the document already appears in the bucketTable, then it's score is
added to implement a SUM operator.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11207-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 20:02:00 2004
Return-Path: <lucene-user-return-11207-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23739 invoked from network); 12 Nov 2004 20:02:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 20:02:00 -0000
Received: (qmail 69287 invoked by uid 500); 12 Nov 2004 20:01:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69238 invoked by uid 500); 12 Nov 2004 20:01:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69201 invoked by uid 99); 12 Nov 2004 20:01:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 12:01:48 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.12.11/8.12.11) with ESMTP id iACK1hFd064297
	for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 21:01:43 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: lucene Scorers
Date: Fri, 12 Nov 2004 21:01:43 +0100
User-Agent: KMail/1.5.4
References: <2b2518a404111211481f7ac51c@mail.gmail.com>
In-Reply-To: <2b2518a404111211481f7ac51c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411122101.43344.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Friday 12 November 2004 20:48, Ken McCracken wrote:
> Hi,
> 
> I am looking at the Similarity class overview, and wondering if I can
> replace the SUM operator with a MAX operator, or any other operator
> (across the terms in a query).
> 
> For example, if I search for "car OR automobile", a BooleanScorer is
> used to add the values from each subexpression together.  In the
> BooleanScorer from lucene_1_4_final, in the inner class Collector, we
> have in the collect(...) method, the line
> 
>      bucket.score += score;			  // increment score
> 
> that I may want replace with a MAX operator such as 
> 
>      if (score > bucket.score) bucket.score = score;        // take the max
> 
> I may also want to keep track of both the max and the sum, by
> extending the inner class Bucket.
> 
> Do you have any suggestions on how to implement such a change? 
> Ideally, I would like to have the ability to define my choice of
> scoring algorithm at search time (at run time), and use the Lucene SUM
> scorer for some searches, and the MAX scorer for other searches.
> 
> Thanks for you help.
> 
> -Ken
> 
> PS.  The code I'm talking about falls in the follwoing area, for my
> example search "car OR automobile".  If I walk the code during search,
> I see that the BooleanScorer$Collector is created by the Weight that
> was just created, in BooleanQuery$BooleanWeight.scorer(...), as it
> adds the subscorers for each of the terms in the BooleanScorer.  When
> that collector is asked to collect(...), its bucketTable is filled in.
>  Since the collectors for each of the terms use the same bucketTable,
> if the document already appears in the bucketTable, then it's score is
> added to implement a SUM operator.

SInce you are that far already, you can (in reverse order):
- replace the BooleanScorer by another one that takes the max
 instead of summing.
- replace the weight to return that scorer.
- replace the BooleanQuery to return that weight.
- override QueryParser.getBooleanQuery() to return that query
 in the cases you want, that is when all clauses are optional.

"replace" usually means "inherit from" in new code.
When you need more info on this, try lucene-dev.

Regards,
Paul Elschot.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11208-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 20:28:35 2004
Return-Path: <lucene-user-return-11208-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43030 invoked from network); 12 Nov 2004 20:28:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 20:28:35 -0000
Received: (qmail 7412 invoked by uid 500); 12 Nov 2004 20:28:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7385 invoked by uid 500); 12 Nov 2004 20:28:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7362 invoked by uid 99); 12 Nov 2004 20:28:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 12:28:24 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iACKSJJ21118
	for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 14:28:19 -0600 (CST)
Subject: Re: Bug in the BooleanQuery optimizer? ..TooManyClauses
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200411112148.42529@danielnaber.de>
References: <20041111195732.70523.qmail@web21325.mail.yahoo.com>
	 <200411112148.42529@danielnaber.de>
Content-Type: text/plain
Message-Id: <1100291288.2886.19.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Fri, 12 Nov 2004 14:28:08 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thu, 2004-11-11 at 14:48, Daniel Naber wrote:
> On Thursday 11 November 2004 20:57, Sanyi wrote:
> 
> > What I'm saying is that there is no reason for the optimizer to expand
> > wild* to more than 1024 variations
> 
> That's the point: there is no query optimizer in Lucene.

Would it be possible to write one? I would be very interested in this
feature. 

I poked around in the index and search packages today to see if it could
be done. I think it would take a big change in the Query.rewrite and
related code in the IndexReaders to make the results of the required and
prohibited parts of the query available. 

Again, I don't know if that's even possible. But it would be a great
feature.

Luke


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11209-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 20:52:18 2004
Return-Path: <lucene-user-return-11209-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51417 invoked from network); 12 Nov 2004 20:52:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 20:52:17 -0000
Received: (qmail 47622 invoked by uid 500); 12 Nov 2004 20:52:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47600 invoked by uid 500); 12 Nov 2004 20:52:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47587 invoked by uid 99); 12 Nov 2004 20:52:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.85] (HELO mailout11.sul.t-online.com) (194.25.134.85)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 12:52:06 -0800
Received: from fwd09.aul.t-online.de 
	by mailout11.sul.t-online.com with smtp 
	id 1CSiOm-0001M1-04; Fri, 12 Nov 2004 21:52:00 +0100
Received: from pD9EBE7CF.dip.t-dialin.net (E11VOBZarePaa119pz4vbPq60NUUkgDr0UZ5KohTmuESm1xVmu42kN@[217.235.231.207]) by fmrl09.sul.t-online.com
	with esmtp id 1CSiOl-05wCUC0; Fri, 12 Nov 2004 21:51:59 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Bug in the BooleanQuery optimizer? ..TooManyClauses
Date: Fri, 12 Nov 2004 21:52:25 +0100
User-Agent: KMail/1.7.1
References: <20041111195732.70523.qmail@web21325.mail.yahoo.com> <200411112148.42529@danielnaber.de> <1100291288.2886.19.camel@localhost>
In-Reply-To: <1100291288.2886.19.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411122152.25227@danielnaber.de>
X-ID: E11VOBZarePaa119pz4vbPq60NUUkgDr0UZ5KohTmuESm1xVmu42kN@t-dialin.net
X-TOI-MSGID: 5deba6e6-5652-4300-848c-c2562ca0e392
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Friday 12 November 2004 21:28, Luke Francl wrote:

> > That's the point: there is no query optimizer in Lucene.
>
> Would it be possible to write one? I would be very interested in this
> feature.

There are two different issues: first, reorder the query so that those 
terms with less matches appear first, because as soon as the first term 
with 0 matches occurs, search stops. There will probably be a 
non-so-difficult implementation for that, but this will have more overhead 
than it saves time I guess.

The other thing is that prefix queries get expanded first, then the search 
happens. And that TooManyQueries exception happens when expanding the 
query, not during search. I'm not sure, but I think that's difficult to 
change, at least in a clean way.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11210-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 21:56:58 2004
Return-Path: <lucene-user-return-11210-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74365 invoked from network); 12 Nov 2004 21:56:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 21:56:58 -0000
Received: (qmail 51940 invoked by uid 500); 12 Nov 2004 21:56:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51915 invoked by uid 500); 12 Nov 2004 21:56:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51895 invoked by uid 99); 12 Nov 2004 21:56:54 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 13:56:51 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: lucene Scorers
Date: Fri, 12 Nov 2004 13:56:45 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C028B9E66@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: lucene Scorers
Thread-Index: AcTI8ngtntd1UZRJQUi+aH+Tu4L6EwADwNWg
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I had a similar need and wrote MaxDisjunctionQuery and
MaxDisjunctionScorer.  Unfortunately these are not available as a patch
but I've included the original message below that has the code (modulo
line breaks added by simple text email format).

This code is functional -- I use it in my app.  It is optimized for its
stated use, which involves a small number of clauses.  You'd want to
improve the incremental sorting (e.g., using the bucket technique of
BooleanQuery) if you need it for large numbers of clauses.

Re. Paul's suggested steps below, I did not integrate this with query
parser as I didn't need that functionality (since I'm generating the
multi-field expansions for which max is a much better scoring choice
than sum).

Chuck

Included message:

-----Original Message-----
From: Chuck Williams [mailto:chuck@manawiz.com]=20
Sent: Monday, October 11, 2004 9:55 PM
To: lucene-dev@jakarta.apache.org
Subject: Contribution: better multi-field searching

The files included below (MaxDisjunctionQuery.java and
MaxDisjunctionScorer.java) provide a new mechanism for searching across
multiple fields.

The issue is this.  Imagine you have two fields, title and document,
both of which you want to search with simple queries like:  albino
elephant.  There are two general approaches, either a) create a combined
field that concatenates the two individual fields, or b) expand the
simple query into a BooleanQuery that searches for each term in both
fields.

With approach a), you lose the flexibility to set separate boost factors
on the individual fields.  I wanted title to be much more important than
description for ranking results, and wanted to control this explicitly,
as length norm was not always doing the right thing; e.g., descriptions
are not always long.

With approach b) you run into another problem.  Suppose the example
query is expanded into (title:albino description:albino title:elephant
description:elephant).  Then, assuming tf/idf doesn't affect ranking, a
document with albino in both title and description will score the same
as a document with albino in title and elephant in description.  The
latter document for most applications is much better since it matches
both query terms.  If albino is the more important term according to
idf, then the less desirable documents (albino in both fields) will rank
consistently ahead of the albino elephants (which is what was happening
to me, yielding horrible results).

MaxDisjunctionQuery solves this problem.  The MaxDisjunctionQuery pretty
prints as:  (q1 | q2 | ... | qn)~tiebreaker

The qi's are any subqueries.  This generates the same results as an
OR-type BooleanQuery but scores them differently.  The score for any
document d is the maximum value of the score that d receives for any
subquery, plus the tiebreaker times the sum of the scores it receives
for any other retrieving subqueries.  In the simplest case, tiebreaker
is 0.0f, and the score is simply the maximum score for any retrieving
subquery.  If tiebreaker is nonzero, it should be much smaller than the
boosts being used (0.1 is working very well for me  with title boost at
4.0 and description boost at 1.0).

With this mechanism, the albino elephant query is expanded like this:

    ( (title^4.0:albino | description:albino)~0.1
      (title^4.0:elephant | description:elephant)~0.1
    )

I.e., a BooleanQuery is used to cover the distinct terms, while a
MaxDisjunctionQuery is used to expand the fields.

This query has the following properties:
  1.  Documents with two distinct terms score higher than documents with
the same term in the two different fields.
  2.  Documents that contain a title match for a term score higher than
documents containing only a description match for the same term.
  3.  If two documents contain the same query terms, and yet one of them
contains one of the query terms in multiple fields while the other does
not, the document containing the term in multiple fields scores higher
(this is the purpose of the tiebreaker -- it breaks ties among documents
that match the same terms in the same highest-scoring fields).

Sorry if this is redundant, but I didn't find anything in Lucene already
to do this.  It has helped me considerably, so I'd like to submit it in
case others are facing the same issues.

As an aside, is there a reason that idf is squared in each Term and
Phrase match (it is multiplied both into the query component and the
field component)?  To compensate for this, I'm taking the square root of
the idf I really want in my Similarity, which seems strange.

Thanks for any info on that and any feedback on the utility of
MaxDisjunctionQuery.

NOTE:  The java files use generics and so require the 1.5 jdk, although
it would be straightforward to back-port them to earlier jdk's.

Chuck Williams

*********************************** MaxDisjunctionQuery.java

/*
 * MaxDisjunctionQuery.java
 *
 * Created on October 9, 2004, 3:17 PM
 */

package org.apache.lucene.search;

import java.io.IOException;
import java.util.ArrayList;
import org.apache.lucene.index.IndexReader;

/**
 * A query that generates the union of the documents produced by its
subqueries, and that scores each document as the maximum
 * score for that document produced by any subquery plus a tie breaking
increment for any additional matching subqueries.
 * This is useful to search for a word in multiple fields with different
boost factors (so that the fields cannot be
 * combined equivalently into a single search field).  We want the
primary score to be the one associated with the highest boost,
 * not the sum of the field scores (as BooleanQuery would give).
 * If the query is "albino elephant" this ensures that "albino" matching
one field and "elephant" matching
 * another gets a higher score than "albino" matching both fields.
 * To get this result, use both BooleanQuery and MaxDisjunctionQuery:
for each term a MaxDisjunctionQuery searches for it in
 * each field, while the set of these MaxDisjunctionQuery's is combined
into a BooleanQuery.
 * The tie breaker capability allows results that include the same term
in multiple fields to be judged better than results that
 * include this term in only the best of those multiple fields, without
confusing this with the better case of two different terms
 * in the multiple fields.
 * @author Chuck Williams
 */
public class MaxDisjunctionQuery extends Query {
   =20
    /* The subqueries */
    private ArrayList<Query> disjuncts =3D new ArrayList<Query>();
   =20
    /* Multiple of the non-max disjunct scores added into our final
score.  Non-zero values support tie-breaking. */
    private float tieBreakerMultiplier =3D 0.0f;
   =20
    /** Creates a new empty MaxDisjunctionQuery.  Use add() to add the
subqueries.
     * @param tieBreakerMultiplier this score of each non-maximum
disjunct for a document is multiplied by this weight
     *        and added into the final score.  If non-zero, the value
should be small, on the order of 0.1, which says that
     *        10 occurrences of word in a lower-scored field that is
also in a higher scored field is just as good as a unique
     *        word in the lower scored field (i.e., one that is not in
any higher scored field.
     */
    public MaxDisjunctionQuery(float tieBreakerMultiplier) {
        this.tieBreakerMultiplier =3D tieBreakerMultiplier;
    }
   =20
    /** Add a subquery to this disjunction
     * @param query the disjunct added
     */
    public void add(Query query) {
        disjuncts.add(query);
    }
   =20
    /* The Weight for MaxDisjunctionQuery's, used to normalize, score
and explain these queries */
    private class MaxDisjunctionWeight implements Weight {
       =20
        private Searcher searcher;       // The searcher with which we
are associated.
        private ArrayList<Weight> weights =3D new ArrayList<Weight>();  =
//
The Weight's for our subqueries, in 1-1 correspondence with disjuncts

        /* Construct the Weight for this Query searched by searcher.
Recursively construct subquery weights. */
        public MaxDisjunctionWeight(Searcher searcher) {
            this.searcher =3D searcher;
            for (int i =3D 0; i < disjuncts.size(); i++)
                weights.add(disjuncts.get(i).createWeight(searcher));
        }

        /* Return our associated MaxDisjunctionQuery */
        public Query getQuery() { return MaxDisjunctionQuery.this; }
       =20
        /* Return our boost */
        public float getValue() { return getBoost(); }

        /* Compute the sub of squared weights of us applied to our
subqueries.  Used for normalization. */
        public float sumOfSquaredWeights() throws IOException {
            float max =3D 0.0f, sum =3D 0.0f;
            for (int i =3D 0; i < weights.size(); i++) {
                float sub =3D weights.get(i).sumOfSquaredWeights();
                sum +=3D sub;
                max =3D Math.max(max, sub);
            }
            return (((sum - max) * tieBreakerMultiplier *
tieBreakerMultiplier) + max) * getBoost() * getBoost();
        }

        /* Apply the computed normalization factor to our subqueries */
        public void normalize(float norm) {
            norm *=3D getBoost();  // Incorporate our boost
            for (int i =3D 0 ; i < weights.size(); i++)
                weights.get(i).normalize(norm);
        }

        /* Create the scorer used to score our associated
MaxDisjunctionQuery */
        public Scorer scorer(IndexReader reader) throws IOException {
            MaxDisjunctionScorer result =3D new
MaxDisjunctionScorer(tieBreakerMultiplier, getSimilarity(searcher));
            for (int i =3D 0 ; i < weights.size(); i++) {
                Weight w =3D weights.get(i);
                Scorer subScorer =3D w.scorer(reader);
                if (subScorer =3D=3D null) return null;
                result.add(subScorer);
            }
            return result;
        }

        /* Explain the score we computed for doc */
        public Explanation explain(IndexReader reader, int doc) throws
IOException {
            if ( disjuncts.size() =3D=3D 1) return
weights.get(0).explain(reader,doc);
            Explanation result =3D new Explanation();
            float max =3D 0.0f, sum =3D 0.0f;
            result.setDescription(tieBreakerMultiplier =3D=3D 0.0f ? =
"max
of:" : "max plus " + tieBreakerMultiplier + " times others of:");
            for (int i =3D 0 ; i < weights.size(); i++) {
                Explanation e =3D weights.get(i).explain(reader, doc);
                if (e.getValue() > 0) {
                    result.addDetail(e);
                    sum +=3D e.getValue();
                    max =3D Math.max(max, e.getValue());
                }
            }
            result.setValue(max + (sum - max)*tieBreakerMultiplier);
            return result;
        }
       =20
    }  // end of MaxDisjunctionWeight inner class
 =20
    /* Create the Weight used to score us */
    protected Weight createWeight(Searcher searcher) {
        return new MaxDisjunctionWeight(searcher);
    }
   =20
    /** Optimize our representation and our subqueries representations
     * @param reader the IndexReader we query
     * @return an optimized copy of us (which may not be a copy if there
is nothing to optimize) */
    public Query rewrite(IndexReader reader) throws IOException {
        if (disjuncts.size() =3D=3D 1) {
            Query singleton =3D disjuncts.get(0);
            Query result =3D singleton.rewrite(reader);
            if (getBoost() !=3D 1.0f) {
                if (result =3D=3D singleton) result =3D =
(Query)result.clone();
                result.setBoost(getBoost() * result.getBoost());
            }
            return result;
        }
        MaxDisjunctionQuery clone =3D null;
        for (int i =3D 0 ; i < disjuncts.size(); i++) {
            Query clause =3D disjuncts.get(i);
            Query rewrite =3D clause.rewrite(reader);
            if (rewrite !=3D clause) {
                if (clone =3D=3D null) clone =3D
(MaxDisjunctionQuery)this.clone();
                clone.disjuncts.set(i, rewrite);
            }
        }
        if (clone !=3D null) return clone;
        else return this;
    }
   =20
    /* Create a shallow copy of us -- used in rewriting if necessary
     * @return a copy of us (but reuse, don't copy, our subqueries) */
    public Object clone() {
        MaxDisjunctionQuery clone =3D =
(MaxDisjunctionQuery)super.clone();
        clone.disjuncts =3D (ArrayList<Query>)this.disjuncts.clone();
        return clone;
    }
   =20
    /** Prettyprint us.
     * @param field the field to which we are applied
     * @return a string that shows what we do, of the form "(disjunct1 |
disjunct2 | ... | disjunctn)^boost"
     */
    public String toString(String field) {
        StringBuffer buffer =3D new StringBuffer();
        buffer.append("(");
        for (int i =3D 0 ; i < disjuncts.size(); i++) {
            Query subquery =3D disjuncts.get(i);
            if (subquery instanceof BooleanQuery) {	  // wrap
sub-bools in parens
                buffer.append("(");
                buffer.append(subquery.toString(field));
                buffer.append(")");
            }
            else buffer.append(subquery.toString(field));
            if (i !=3D disjuncts.size()-1) buffer.append(" | ");
        }
        buffer.append(")");
        if (tieBreakerMultiplier !=3D 0.0f) {
            buffer.append("~");
            buffer.append(tieBreakerMultiplier);
        }
        if (getBoost() !=3D 1.0) {
            buffer.append("^");
            buffer.append(getBoost());
        }
        return buffer.toString();
    }
   =20
    /** Return true iff we represent the same query as o
     * @param o another object
     * @return true iff o is a MaxDisjunctionQuery with the same boost
and the same subqueries, in the same order, as us
     */
    public boolean equals(Object o) {
        if (! (o instanceof MaxDisjunctionQuery) ) return false;
        MaxDisjunctionQuery other =3D (MaxDisjunctionQuery)o;
        return (this.getBoost() =3D=3D other.getBoost()) &&
this.disjuncts.equals(other.disjuncts);
    }
   =20
    /** Compute a hash code for hashing us
     * @return the hash code
     */
    public int hashCode() {
        return Float.floatToIntBits(getBoost()) ^ disjuncts.hashCode();
    }
 =20
}

*********************************** MaxDisjunctionScorer.java

/*
 * MaxDisjunctionScorer.java
 *
 * Created on October 9, 2004, 5:03 PM
 */

package org.apache.lucene.search;

import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Comparator;

/**
 * The Scorer for MaxDisjunctionQuery's.  The union of all documents
generated by the the subquery scorers
 * is generated in document number order.  The score for each document
is the maximum of the scores computed
 * by the subquery scorers that generate that document, plus
tieBreakerMultiplier times the sum of the scores
 * for the other subqueries that generate the document.
 * @author Chuck Williams
 */
public class MaxDisjunctionScorer extends Scorer {
   =20
    /* The scorers for subqueries that have remaining docs, kept sorted
by number of next doc. */
    private ArrayList<Scorer> subScorers =3D new ArrayList<Scorer>();
   =20
    /* Multiplier applied to non-maximum-scoring subqueries for a
document as they are summed into the result. */
    private float tieBreakerMultiplier;
   =20
    private boolean more =3D false;          // True iff there is a next
document
    private boolean firstTime =3D true;      // True iff next() has not
yet been called
   =20
    /* Comparator to sort subScorers according to the document number of
next document */
    private static class MaxDisjunctionClauseComparator implements
Comparator<Scorer> {
       =20
        /* Scorers have all been positioned at their next document
already */
        public int compare(Scorer s1, Scorer s2) {
            return s1.doc() - s2.doc();
        }
       =20
        /* Compatible equality */
        public boolean equals(Scorer s1, Scorer s2) {
            return s1.doc() =3D=3D s2.doc();
        }
       =20
     }
   =20
    /* Fixed instance of the comparator to reuse */
    private static MaxDisjunctionClauseComparator subScorerComparator =
=3D
new MaxDisjunctionClauseComparator();
   =20
    /** Creates a new instance of MaxDisjunctionScorer
     * @param similarity -- not used since our definition involves
neither coord nor terms directly */
    public MaxDisjunctionScorer(float tieBreakerMultiplier, Similarity
similarity) {
        super(similarity);
        this.tieBreakerMultiplier =3D tieBreakerMultiplier;
    }
   =20
    /** Add the scorer for a subquery
     * @param scorer the scorer of a subquery of our associated
MaxDisjunctionQuery
     */
    public void add(Scorer scorer) throws IOException {
        if ( scorer.next() ) {       // Initialize and retain only if it
produces docs
            subScorers.add(scorer);
            more =3D true;
        }
    }
   =20
    /* First time initialization.  Sort subScorers. */
    private void init() {
        sortSubScorers();
        firstTime =3D false;
    }
   =20
    /* Sort subScorers in order of document number of next document to
be generated */
    private void sortSubScorers() {
        Scorer[] sorted =3D subScorers.toArray(new
Scorer[subScorers.size()]);
        Arrays.sort(sorted, subScorerComparator);
        for (int i=3D0; i<sorted.length; i++) subScorers.set(i,
sorted[i]);       =20
    }
   =20
    /** Generate the next document matching our associated
MaxDisjunctionQuery.
     * @return true iff there is a next document
     */
    public boolean next() throws IOException {
        if ( !more ) return false;
        if ( firstTime ) {
            init();
            return true;   // more would have been false if no
subScorers had any docs
        }
        // Increment all generators that generated the last doc and
incrementally re-sort.
        int lastdoc =3D subScorers.get(0).doc();
        do {
            if ( subScorers.get(0).next() ) {
                Scorer s =3D subScorers.get(0);
                int snextdoc =3D s.doc(), i=3D1;
                for (; i<subScorers.size() && snextdoc >
subScorers.get(i).doc(); i++)
                    subScorers.set(i-1, subScorers.get(i));
                if ( i!=3D1 ) subScorers.set(i-1, s);               =20
            } else {
                subScorers.remove(0);
                if ( subScorers.isEmpty() ) return (more =3D false);
            }
        } while ( subScorers.get(0).doc()=3D=3Dlastdoc );
        return true;
    }

    /** Determine the current document number.  Initially invalid, until
{@link #next()} is called the first time.
     * @return the document number of the currently generated document
     */
    public int doc() {
        return subScorers.get(0).doc();
    }

    /** Determine the current document score.  Initially invalid, until
{@link #next()} is called the first time.
     * @return the score of the current generated document
     */
    public float score() throws IOException {
        float max =3D subScorers.get(0).score(), sum =3D max;
        for (int i =3D 1, doc =3D subScorers.get(0).doc(); i <
subScorers.size() && subScorers.get(i).doc() =3D=3D doc; i++) {
            float sub =3D subScorers.get(i).score();
            sum +=3D sub;
            max =3D Math.max(max, sub);
        }
        return max + (sum - max)*tieBreakerMultiplier;
    }

    /** Advance to the first document whose number is greater than or
equal to target.
     * @param target the minimum number of the next desired document
     * @return true iff there is a document to be generated whose number
is at least target
     */
    public boolean skipTo(int target) throws IOException {
        int i=3D0;
        while (i<subScorers.size()) {
            if (subScorers.get(i).skipTo(target)) i++;
            else subScorers.remove(i);
        }
        if (i =3D=3D 0) return false;
        sortSubScorers();
        return true;
    }

    /** Explain a score that we computed.  UNSUPPORTED -- see
explanation capability in MaxDisjunctionQuery.
     * @param doc the number of a document we scored
     * @return the Explanation for our score
     */
    public Explanation explain(int doc) throws IOException {
        throw new UnsupportedOperationException();
    }
   =20
}

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-dev-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-dev-help@jakarta.apache.org


  > -----Original Message-----
  > From: Paul Elschot [mailto:paul.elschot@xs4all.nl]
  > Sent: Friday, November 12, 2004 12:02 PM
  > To: lucene-user@jakarta.apache.org
  > Subject: Re: lucene Scorers
  >=20
  > On Friday 12 November 2004 20:48, Ken McCracken wrote:
  > > Hi,
  > >
  > > I am looking at the Similarity class overview, and wondering if I
can
  > > replace the SUM operator with a MAX operator, or any other
operator
  > > (across the terms in a query).
  > >
  > > For example, if I search for "car OR automobile", a BooleanScorer
is
  > > used to add the values from each subexpression together.  In the
  > > BooleanScorer from lucene_1_4_final, in the inner class Collector,
we
  > > have in the collect(...) method, the line
  > >
  > >      bucket.score +=3D score;			  // increment
score
  > >
  > > that I may want replace with a MAX operator such as
  > >
  > >      if (score > bucket.score) bucket.score =3D score;        //
take
  > the max
  > >
  > > I may also want to keep track of both the max and the sum, by
  > > extending the inner class Bucket.
  > >
  > > Do you have any suggestions on how to implement such a change?
  > > Ideally, I would like to have the ability to define my choice of
  > > scoring algorithm at search time (at run time), and use the Lucene
SUM
  > > scorer for some searches, and the MAX scorer for other searches.
  > >
  > > Thanks for you help.
  > >
  > > -Ken
  > >
  > > PS.  The code I'm talking about falls in the follwoing area, for
my
  > > example search "car OR automobile".  If I walk the code during
search,
  > > I see that the BooleanScorer$Collector is created by the Weight
that
  > > was just created, in BooleanQuery$BooleanWeight.scorer(...), as it
  > > adds the subscorers for each of the terms in the BooleanScorer.
When
  > > that collector is asked to collect(...), its bucketTable is filled
in.
  > >  Since the collectors for each of the terms use the same
bucketTable,
  > > if the document already appears in the bucketTable, then it's
score is
  > > added to implement a SUM operator.
  >=20
  > SInce you are that far already, you can (in reverse order):
  > - replace the BooleanScorer by another one that takes the max
  >  instead of summing.
  > - replace the weight to return that scorer.
  > - replace the BooleanQuery to return that weight.
  > - override QueryParser.getBooleanQuery() to return that query
  >  in the cases you want, that is when all clauses are optional.
  >=20
  > "replace" usually means "inherit from" in new code.
  > When you need more info on this, try lucene-dev.
  >=20
  > Regards,
  > Paul Elschot.
  >=20
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11211-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 22:42:11 2004
Return-Path: <lucene-user-return-11211-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88427 invoked from network); 12 Nov 2004 22:42:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 22:42:11 -0000
Received: (qmail 1260 invoked by uid 500); 12 Nov 2004 22:42:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1233 invoked by uid 500); 12 Nov 2004 22:42:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1220 invoked by uid 99); 12 Nov 2004 22:42:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 14:42:00 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iACMftJ23889
	for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 16:41:55 -0600 (CST)
Subject: Re: Bug in the BooleanQuery optimizer? ..TooManyClauses
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200411122152.25227@danielnaber.de>
References: <20041111195732.70523.qmail@web21325.mail.yahoo.com>
	 <200411112148.42529@danielnaber.de> <1100291288.2886.19.camel@localhost>
	 <200411122152.25227@danielnaber.de>
Content-Type: text/plain
Message-Id: <1100299305.2886.39.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Fri, 12 Nov 2004 16:41:45 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Fri, 2004-11-12 at 14:52, Daniel Naber wrote:

> There are two different issues: first, reorder the query so that those 
> terms with less matches appear first, because as soon as the first term 
> with 0 matches occurs, search stops. There will probably be a 
> non-so-difficult implementation for that, but this will have more overhead 
> than it saves time I guess.

It could be done only with searches that have expansions (RangeQuery,
WildcardQuery, etc) to prevent unnecessary work...

> The other thing is that prefix queries get expanded first, then the search 
> happens. And that TooManyQueries exception happens when expanding the 
> query, not during search. I'm not sure, but I think that's difficult to 
> change, at least in a clean way.

Expansion (and thus TooManyClauses) happens during Query.weight(), which
is right before the search. Maybe after it's rewriten the query could be
tested for instanceof BooleanQuery and then see if
BooleanQuery.getClauses().length > BooleanQuery.maxClauseCount?



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11212-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 12 23:53:58 2004
Return-Path: <lucene-user-return-11212-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15384 invoked from network); 12 Nov 2004 23:53:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 12 Nov 2004 23:53:58 -0000
Received: (qmail 81590 invoked by uid 500); 12 Nov 2004 23:53:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81472 invoked by uid 500); 12 Nov 2004 23:53:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81402 invoked by uid 99); 12 Nov 2004 23:53:52 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 15:53:50 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Fri, 12 Nov 2004 18:54:29 -0500
Message-ID: <06f201c4c912$f286eea0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Index File
Date: Fri, 12 Nov 2004 18:54:28 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_06EF_01C4C8E9.099DD3D0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 12 Nov 2004 23:54:29.0281 (UTC) FILETIME=[F2C50910:01C4C912]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_06EF_01C4C8E9.099DD3D0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi;

Is there someway to determine if specific contents are in the index =
folder other than running a query against it?

I see that my document is being indexed. But when I run a query against =
the index I get no results returned.

The weird thing is if I restart TomCat and run the search again the =
correct results are found.

Half this system was built by someone else (the execution of the search =
query and displaying of the results). I only handle the indexing. I =
would like to find a way to definitely ensure that the index file is =
properly being created.

Any ideas? Anyone seen this before?

Thanks

Luke
------=_NextPart_000_06EF_01C4C8E9.099DD3D0--



From lucene-user-return-11213-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 13 00:28:59 2004
Return-Path: <lucene-user-return-11213-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22893 invoked from network); 13 Nov 2004 00:28:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Nov 2004 00:28:59 -0000
Received: (qmail 12492 invoked by uid 500); 13 Nov 2004 00:28:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12472 invoked by uid 500); 13 Nov 2004 00:28:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12458 invoked by uid 99); 13 Nov 2004 00:28:55 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 12 Nov 2004 16:28:49 -0800
Received: (qmail 2818 invoked by uid 60001); 13 Nov 2004 00:28:45 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=08f296JTBWnFRv7HnWtNLv7N8Liubi0/HNhuefGdVl9FC7KJQA0PuAf2hzhb8fhlxLT57b6cjBObAm4k3DrKGxtVpZnRidCXAcRxbQ4y9UQUwnb6DJAvR95qkzZ2OEUWMDqrl6mzwsooHVgYK8Kby2Rd3CBelusYJLtjQJLxEbk=  ;
Message-ID: <20041113002839.2812.qmail@web12702.mail.yahoo.com>
Received: from [216.194.17.194] by web12702.mail.yahoo.com via HTTP; Fri, 12 Nov 2004 16:28:39 PST
Date: Fri, 12 Nov 2004 16:28:39 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index File
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <06f201c4c912$f286eea0$7703d00a@hypermedia.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If you add a Document to the index after you've opened an
IndexSearcher/Reader, your IndexSearcher/Reader will not see it.  You
have to open a new IS/R to see the newly added Documents.  This is
often covered on this list... I must have added this to Lucene FAQ at
jGuru, too.

Otis

--- Luke Shannon <lshannon@hypermedia.com> wrote:

> Hi;
> 
> Is there someway to determine if specific contents are in the index
> folder other than running a query against it?
> 
> I see that my document is being indexed. But when I run a query
> against the index I get no results returned.
> 
> The weird thing is if I restart TomCat and run the search again the
> correct results are found.
> 
> Half this system was built by someone else (the execution of the
> search query and displaying of the results). I only handle the
> indexing. I would like to find a way to definitely ensure that the
> index file is properly being created.
> 
> Any ideas? Anyone seen this before?
> 
> Thanks
> 
> Luke


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11214-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 13 01:07:15 2004
Return-Path: <lucene-user-return-11214-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33063 invoked from network); 13 Nov 2004 01:07:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Nov 2004 01:07:15 -0000
Received: (qmail 49820 invoked by uid 500); 13 Nov 2004 01:07:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49790 invoked by uid 500); 13 Nov 2004 01:07:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49760 invoked by uid 99); 13 Nov 2004 01:07:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [207.44.204.19] (HELO ensim.hc2.net) (207.44.204.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 12 Nov 2004 17:07:08 -0800
Received: from GANDALF (dsl-36-150.dsl.netsource.ie [213.79.36.150])
	(authenticated (0 bits))
	by ensim.hc2.net (8.11.6/8.11.6) with ESMTP id iAD0Cjh17119
	for <lucene-user@jakarta.apache.org>; Fri, 12 Nov 2004 18:12:46 -0600
From: "Richard Greenane" <richard@supportsit.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: Index File
Date: Sat, 13 Nov 2004 01:07:08 -0000
Message-ID: <000901c4c91d$1a4fabc0$0a00a8c0@supportsit.local>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.2627
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4927.1200
In-Reply-To: <06f201c4c912$f286eea0$7703d00a@hypermedia.com>
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You might wat to look at LUKE @ http://www.getopt.org/luke/
A great tool for checking the index to make sure that everything is
there

Regards

Richard


-----Original Message-----
From: Luke Shannon [mailto:lshannon@hypermedia.com] 
Sent: 12 November 2004 23:54
To: Lucene Users List
Subject: Index File


Hi;

Is there someway to determine if specific contents are in the index
folder other than running a query against it?

I see that my document is being indexed. But when I run a query against
the index I get no results returned.

The weird thing is if I restart TomCat and run the search again the
correct results are found.

Half this system was built by someone else (the execution of the search
query and displaying of the results). I only handle the indexing. I
would like to find a way to definitely ensure that the index file is
properly being created.

Any ideas? Anyone seen this before?

Thanks

Luke


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11215-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 13 08:16:35 2004
Return-Path: <lucene-user-return-11215-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62124 invoked from network); 13 Nov 2004 08:16:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Nov 2004 08:16:35 -0000
Received: (qmail 66421 invoked by uid 500); 13 Nov 2004 08:16:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66389 invoked by uid 500); 13 Nov 2004 08:16:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66374 invoked by uid 99); 13 Nov 2004 08:16:29 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.210] (HELO web21324.mail.yahoo.com) (216.136.175.210)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 13 Nov 2004 00:16:26 -0800
Received: (qmail 74426 invoked by uid 60001); 13 Nov 2004 08:16:20 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=ebFtWp1aVxIaq8yFDdHYcYim8rFE38SmfqTXeAa4s1PqHEZZB6vYnmxOcM+90RTc3VrvwI6G4sARCzf+17IC+3rKZ5rDhKteQ3e7Q5FPo5wfgpwnfobbhnb8iu6ADs0F2IXFtLZosUt5PtHnkiqRRVOuL9gKFQCivG9/TuV0N3s=  ;
Message-ID: <20041113081620.74424.qmail@web21324.mail.yahoo.com>
Received: from [81.182.60.36] by web21324.mail.yahoo.com via HTTP; Sat, 13 Nov 2004 00:16:20 PST
Date: Sat, 13 Nov 2004 00:16:20 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Re: Bug in the BooleanQuery optimizer? ..TooManyClauses
To: Lucene Users List <lucene-user@jakarta.apache.org>,
  Giulio Cesare Solaroli <giulio.cesare@gmail.com>
In-Reply-To: <ff737ac30411120611c1a5fc@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> - leave the current implementation, raising an exception;
> - handle the exception and limit the boolean query to the first 1024
> (or what ever the limit is) terms;
> - select, between the possible terms, only the first 1024 (or what
> ever the limit is) more meaningful ones, leaving out all the others.

I like this idea and I would finalize to myself like this:
I'd also create a default rule for that to avoid handling exceptions for people who're happy with
the default behavior:

Keep and search for only the longest 1024 fragments, so it'll throw a,an,at,and,add,etc.., but
it'll automatically keep 1024 variations like alpha,alfa,advanced,automatical,etc..
So, it'll automatically lower the search overhead and will still search fine without throwing
exceptions.
(for people who prefer the widest search range and do not care about the huge overhead, we could
leave a boolean switch for keeping not the longest, but the shortest fragments)


		
__________________________________ 
Do you Yahoo!? 
Check out the new Yahoo! Front Page. 
www.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11216-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 13 08:38:23 2004
Return-Path: <lucene-user-return-11216-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 73177 invoked from network); 13 Nov 2004 08:38:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Nov 2004 08:38:22 -0000
Received: (qmail 77137 invoked by uid 500); 13 Nov 2004 08:38:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77104 invoked by uid 500); 13 Nov 2004 08:38:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77090 invoked by uid 99); 13 Nov 2004 08:38:12 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.207] (HELO web21321.mail.yahoo.com) (216.136.175.207)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 13 Nov 2004 00:38:10 -0800
Received: (qmail 75996 invoked by uid 60001); 13 Nov 2004 08:38:07 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=tBOgdXfTOjKomsSdFWYwIMvr5Y9G/2sSm11g2w9Vq4TsIhMTGD2SjZeodJlmAwKSe90C19naoaZLp80AobsUkYDR7qbpISsuqxvDNHKKi868oxQBW8WBYbKHXSt1dxywhLyE/XPBxzayxZhk6zae7mOK06RLMLsL+DBAW6zYuoA=  ;
Message-ID: <20041113083806.75993.qmail@web21321.mail.yahoo.com>
Received: from [81.182.60.36] by web21321.mail.yahoo.com via HTTP; Sat, 13 Nov 2004 00:38:06 PST
Date: Sat, 13 Nov 2004 00:38:06 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Anyone implemented custom hit ranking?
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

I have problems with short text ranking. I've read about same raking problems in the list
archives, but found only hints and toughts (adjust DefaultSimilarity, Similarity, etc...), not
complete solutions with source code.
Anyone implemented a good solution for this problem? (example: my search application returns about
10-20 pages of 1-2 word hits for "hello", and then it starts to list the longer texts)
I've implemented a very simple solution: I boost documents shorter than 300 chars with
1/300*doclength at index time. Now it works a lot better. In fact, I can't see any problems now.
Anyway, I think this is not "the solution", this is a patch or workaround.
So, I'd be interested in some kind of well designed complete solution for this problem.

Regards,
Sanyi


		
__________________________________ 
Do you Yahoo!? 
Check out the new Yahoo! Front Page. 
www.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11217-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 13 10:09:16 2004
Return-Path: <lucene-user-return-11217-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 92069 invoked from network); 13 Nov 2004 10:09:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Nov 2004 10:09:15 -0000
Received: (qmail 49940 invoked by uid 500); 13 Nov 2004 10:09:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49909 invoked by uid 500); 13 Nov 2004 10:09:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49895 invoked by uid 99); 13 Nov 2004 10:09:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.196 as permitted sender)
Received: from [64.233.170.196] (HELO rproxy.gmail.com) (64.233.170.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 13 Nov 2004 02:08:57 -0800
Received: by rproxy.gmail.com with SMTP id b11so540654rne
        for <lucene-user@jakarta.apache.org>; Sat, 13 Nov 2004 02:08:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=sYhx/ilBZlF26ghkESwWcZydnFJZYSktUI3rWAt9XPiRl3mpO9nHxFza8ePc5Jqlp3+ryfcnPh64woopJ6syTw7bUNeQML/h7GFGacce3AQ+fI6IUhXdUbdPP8iUGAvc9nLYzsLJVX/y3AgGeULJStpv+Mew8Elh3AtgJFfdYb8=
Received: by 10.38.90.36 with SMTP id n36mr149152rnb;
        Sat, 13 Nov 2004 02:08:53 -0800 (PST)
Received: by 10.38.72.66 with HTTP; Sat, 13 Nov 2004 02:08:53 -0800 (PST)
Message-ID: <88c6a67204111302086f9f46b6@mail.gmail.com>
Date: Sat, 13 Nov 2004 04:08:53 -0600
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: How to efficiently get # of search results, per attribute
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'd like to implement a search across several types of "entities",
let's say, classes, professors, and departments.  I want the user to
be able to enter a simple, single query and not have to specify what
they're looking for.  Then I want the search results to be something
like this:

Search results for: "philosophy boyer"

Found: 121 classes - 5 professors - 2 departments

<search results here...>


I know I could iterate through every hit returned and count them up
myself, but that seems inefficient if there are lots of results.  Is
there some other way to get this kind of information from the search
result set?  My other ideas are: doing a separate search each result
type, or storing different types in different indexes.  Any
suggestions?  Thanks for your help!

-Chris

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11218-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 13 10:29:06 2004
Return-Path: <lucene-user-return-11218-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95775 invoked from network); 13 Nov 2004 10:29:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Nov 2004 10:29:06 -0000
Received: (qmail 61819 invoked by uid 500); 13 Nov 2004 10:29:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61789 invoked by uid 500); 13 Nov 2004 10:29:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61776 invoked by uid 99); 13 Nov 2004 10:29:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 13 Nov 2004 02:28:58 -0800
Received: from [192.168.0.2] [217.165.51.24] by mail.bayt.net with ESMTP
  (SMTPD32-8.13) id A3C645550154; Sat, 13 Nov 2004 05:36:54 -0500
Message-ID: <4195E1DB.7040804@bayt.net>
Date: Sat, 13 Nov 2004 14:28:43 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: How to efficiently get # of search results, per attribute
References: <88c6a67204111302086f9f46b6@mail.gmail.com>
In-Reply-To: <88c6a67204111302086f9f46b6@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It depends on how many results they're looking through, here are two 
scenarios I see:

1] If you don't have that many records you can fetch all the results and 
then do a post parsing step the determine totals

2] If you have a lot of entries in each category and you're worried 
about fetching thousands of records every time, you can just have 
seperate indecies per category and search them in in parallel (not 
Lucene Parallel Search) and you can get up to 100 hits for each one 
(efficiency) but you'll also have the total from the search to display.

Either way you can boost up speed using RamDirectory if you need more 
speed from the search, but whichever approach you choose I would 
recommend that you sit down and do some number crunching to figure out 
which way to go.


Hope this helps

Nader Henein



Chris Lamprecht wrote:

>I'd like to implement a search across several types of "entities",
>let's say, classes, professors, and departments.  I want the user to
>be able to enter a simple, single query and not have to specify what
>they're looking for.  Then I want the search results to be something
>like this:
>
>Search results for: "philosophy boyer"
>
>Found: 121 classes - 5 professors - 2 departments
>
><search results here...>
>
>
>I know I could iterate through every hit returned and count them up
>myself, but that seems inefficient if there are lots of results.  Is
>there some other way to get this kind of information from the search
>result set?  My other ideas are: doing a separate search each result
>type, or storing different types in different indexes.  Any
>suggestions?  Thanks for your help!
>
>-Chris
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11219-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 13 11:07:19 2004
Return-Path: <lucene-user-return-11219-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3356 invoked from network); 13 Nov 2004 11:07:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Nov 2004 11:07:18 -0000
Received: (qmail 79903 invoked by uid 500); 13 Nov 2004 11:07:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 79870 invoked by uid 500); 13 Nov 2004 11:07:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 79847 invoked by uid 99); 13 Nov 2004 11:07:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.34] (HELO smtp-vbr14.xs4all.nl) (194.109.24.34)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 13 Nov 2004 03:07:10 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr14.xs4all.nl (8.12.11/8.12.11) with ESMTP id iADB75qQ098998
	for <lucene-user@jakarta.apache.org>; Sat, 13 Nov 2004 12:07:05 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: lucene Scorers
Date: Sat, 13 Nov 2004 12:07:05 +0100
User-Agent: KMail/1.5.4
References: <E3381E0825F1954D953A4E347017BB1C028B9E66@reh001-1.REX001.ExchangeByRegister.com>
In-Reply-To: <E3381E0825F1954D953A4E347017BB1C028B9E66@reh001-1.REX001.ExchangeByRegister.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411131207.05478.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Friday 12 November 2004 22:56, Chuck Williams wrote:
> I had a similar need and wrote MaxDisjunctionQuery and
> MaxDisjunctionScorer.  Unfortunately these are not available as a patch
> but I've included the original message below that has the code (modulo
> line breaks added by simple text email format).
>
> This code is functional -- I use it in my app.  It is optimized for its
> stated use, which involves a small number of clauses.  You'd want to
> improve the incremental sorting (e.g., using the bucket technique of
> BooleanQuery) if you need it for large numbers of clauses.

When you're interested, you can also have a look here for
yet another DisjunctionScorer:
http://issues.apache.org/bugzilla/show_bug.cgi?id=31785

It has the advantage that it implements skipTo() so that it can 
be used as a subscorer of ConjunctionScorer, ie. it can be
faster in situations like this:

aa AND (bb OR cc)

where bb and cc are treated by the DisjunctionScorer.
When aa is a filter this can also be used to implement
a filtering query.

 
> Re. Paul's suggested steps below, I did not integrate this with query
> parser as I didn't need that functionality (since I'm generating the
> multi-field expansions for which max is a much better scoring choice
> than sum).
> 
> Chuck
> 
> Included message:
> 
> -----Original Message-----
> From: Chuck Williams [mailto:chuck@manawiz.com] 
> Sent: Monday, October 11, 2004 9:55 PM
> To: lucene-dev@jakarta.apache.org
> Subject: Contribution: better multi-field searching
> 
> The files included below (MaxDisjunctionQuery.java and
> MaxDisjunctionScorer.java) provide a new mechanism for searching across
> multiple fields.

The maximum indeed works well, also when the fields differ a lot length.
 
Regards,
Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11220-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 13 11:14:57 2004
Return-Path: <lucene-user-return-11220-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4806 invoked from network); 13 Nov 2004 11:14:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Nov 2004 11:14:56 -0000
Received: (qmail 84549 invoked by uid 500); 13 Nov 2004 11:14:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84508 invoked by uid 500); 13 Nov 2004 11:14:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84495 invoked by uid 99); 13 Nov 2004 11:14:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of angeles3d@gmail.com designates 64.233.170.201 as permitted sender)
Received: from [64.233.170.201] (HELO rproxy.gmail.com) (64.233.170.201)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 13 Nov 2004 03:14:41 -0800
Received: by rproxy.gmail.com with SMTP id a36so501984rnf
        for <lucene-user@jakarta.apache.org>; Sat, 13 Nov 2004 03:14:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=TaD0GE6zbas5+xkk+doFwMsQUZLjT9NuXpna4VqizrPVT4+ptd7W7nH/IIHZIYJKD1QTlQRU4OR5dVKBunBunSz1fShOPDIHjjuWrv0ycevbU+UAHRpCSFPf0ZyWMAR+c2dlDNf7A07d/uvnnuVBNyUWz4/VpvKyvKR4rcb3i4s=
Received: by 10.38.104.3 with SMTP id b3mr695496rnc;
        Sat, 13 Nov 2004 03:14:37 -0800 (PST)
Received: by 10.38.14.16 with HTTP; Sat, 13 Nov 2004 03:14:36 -0800 (PST)
Message-ID: <6c00cd31041113031457627a7a@mail.gmail.com>
Date: Sat, 13 Nov 2004 06:14:36 -0500
From: Miguel Angel <angeles3d@gmail.com>
Reply-To: Miguel Angel <angeles3d@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: about Stemming
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi, I have used the DEMOS of lucene and I want to know as it is
possible to be added  Stemming for my applications.

-- 
Miguel Angel Angeles R.
Asesoria en Conectividad y Servidores
Telf. 97451277

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11221-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 13 11:29:08 2004
Return-Path: <lucene-user-return-11221-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7565 invoked from network); 13 Nov 2004 11:29:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Nov 2004 11:29:08 -0000
Received: (qmail 96288 invoked by uid 500); 13 Nov 2004 11:29:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95995 invoked by uid 500); 13 Nov 2004 11:29:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95981 invoked by uid 99); 13 Nov 2004 11:29:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [217.160.91.29] (HELO p15112568.pureserver.info) (217.160.91.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 13 Nov 2004 03:29:04 -0800
Received: from [192.168.10.103] (ppp-82-135-1-133.mnet-online.de [82.135.1.133])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by p15112568.pureserver.info (Postfix) with ESMTP id 1BE5C14010F
	for <lucene-user@jakarta.apache.org>; Sat, 13 Nov 2004 12:29:01 +0100 (CET)
Message-ID: <4195EFF5.8060009@intrafind.de>
Date: Sat, 13 Nov 2004 12:28:53 +0100
From: Bernhard Messer <bernhard.messer@intrafind.de>
Organization: IntraFind Software AG
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: about Stemming
References: <6c00cd31041113031457627a7a@mail.gmail.com>
In-Reply-To: <6c00cd31041113031457627a7a@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Miguel Angel schrieb:

>Hi, I have used the DEMOS of lucene and I want to know as it is
>possible to be added  Stemming for my applications.
>  
>
have a look to the lucene-sandbox. Under contributions there are 
stemmers for many different languages.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11222-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 13 11:37:02 2004
Return-Path: <lucene-user-return-11222-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8995 invoked from network); 13 Nov 2004 11:37:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Nov 2004 11:37:02 -0000
Received: (qmail 1866 invoked by uid 500); 13 Nov 2004 11:36:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1838 invoked by uid 500); 13 Nov 2004 11:36:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1820 invoked by uid 99); 13 Nov 2004 11:36:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.35] (HELO smtp-vbr15.xs4all.nl) (194.109.24.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 13 Nov 2004 03:36:54 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr15.xs4all.nl (8.12.11/8.12.11) with ESMTP id iADBaoQl078970
	for <lucene-user@jakarta.apache.org>; Sat, 13 Nov 2004 12:36:50 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Bug in the BooleanQuery optimizer? ..TooManyClauses
Date: Sat, 13 Nov 2004 12:36:49 +0100
User-Agent: KMail/1.5.4
References: <20041113081620.74424.qmail@web21324.mail.yahoo.com>
In-Reply-To: <20041113081620.74424.qmail@web21324.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411131236.49906.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Saturday 13 November 2004 09:16, Sanyi wrote:
> > - leave the current implementation, raising an exception;
> > - handle the exception and limit the boolean query to the first 1024
> > (or what ever the limit is) terms;
> > - select, between the possible terms, only the first 1024 (or what
> > ever the limit is) more meaningful ones, leaving out all the others.
> 
> I like this idea and I would finalize to myself like this:
> I'd also create a default rule for that to avoid handling exceptions for 
people who're happy with
> the default behavior:
> 
> Keep and search for only the longest 1024 fragments, so it'll throw 
a,an,at,and,add,etc.., but
> it'll automatically keep 1024 variations like 
alpha,alfa,advanced,automatical,etc..

Wouldn't it be counterintuitive to only use the longest matches
for truncations?
To have only longer matches one can also use queries with
multiple ? characters, each matching exactly one character.

I think it would be better encourage the users to use longer
and maybe also more prefixes. This gives more precise results
and is more efficient to execute.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11223-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 13 23:39:47 2004
Return-Path: <lucene-user-return-11223-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55232 invoked from network); 13 Nov 2004 23:39:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 13 Nov 2004 23:39:47 -0000
Received: (qmail 16488 invoked by uid 500); 13 Nov 2004 23:39:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16442 invoked by uid 500); 13 Nov 2004 23:39:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16427 invoked by uid 99); 13 Nov 2004 23:39:43 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 13 Nov 2004 15:39:38 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: How to efficiently get # of search results, per attribute
Date: Sat, 13 Nov 2004 15:36:11 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C028BA026@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: How to efficiently get # of search results, per attribute
Thread-Index: AcTJa5qKrrerB5aXQzC5IlUqTon0BgAaJERQ
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	<nsh@bayt.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

My Lucene application includes multi-faceted navigation that does a more
complex version of the below.  I've got 5 different taxonomies into
which every indexed item is classified.  The largest of the taxonomies
has over 15,000 entries while the other 4 are much smaller. For every
search query, I determine the best small set of nodes from each taxonomy
to present to the user as drill down options, and provide the counts
regarding how many results fall under each of these nodes.  At present I
only have about 25,000 indexed objects and usually no more than 1,000
results from the initial query.  To determine the drill-down options and
counts, I scan up to 1,000 results computing the counts for all nodes
into which these results classify.  Then for each taxonomy I pick the
best drill-down options available (orthogonal set with reasonable
branching factor that covers all results) and present them with their
counts.  If there are more than 1,000 results, I extrapolate the
computed counts to estimate the actual counts on the entire set of
results.  This is all done with a single index and a single search.

The total time required for performing this computation for the one
large taxonomy is under 10ms, running in full debug mode in my ide.  The
query response time overall is subjectively instantaneous at the UI
(Google-speed or better).  So, unless some dimension of the problem is
much bigger than mine, I doubt performance will be an issue.

Chuck

  > -----Original Message-----
  > From: Nader Henein [mailto:nsh@bayt.net]
  > Sent: Saturday, November 13, 2004 2:29 AM
  > To: Lucene Users List
  > Subject: Re: How to efficiently get # of search results, per
attribute
  >=20
  > It depends on how many results they're looking through, here are two
  > scenarios I see:
  >=20
  > 1] If you don't have that many records you can fetch all the results
and
  > then do a post parsing step the determine totals
  >=20
  > 2] If you have a lot of entries in each category and you're worried
  > about fetching thousands of records every time, you can just have
  > seperate indecies per category and search them in in parallel (not
  > Lucene Parallel Search) and you can get up to 100 hits for each one
  > (efficiency) but you'll also have the total from the search to
display.
  >=20
  > Either way you can boost up speed using RamDirectory if you need
more
  > speed from the search, but whichever approach you choose I would
  > recommend that you sit down and do some number crunching to figure
out
  > which way to go.
  >=20
  >=20
  > Hope this helps
  >=20
  > Nader Henein
  >=20
  >=20
  >=20
  > Chris Lamprecht wrote:
  >=20
  > >I'd like to implement a search across several types of "entities",
  > >let's say, classes, professors, and departments.  I want the user
to
  > >be able to enter a simple, single query and not have to specify
what
  > >they're looking for.  Then I want the search results to be
something
  > >like this:
  > >
  > >Search results for: "philosophy boyer"
  > >
  > >Found: 121 classes - 5 professors - 2 departments
  > >
  > ><search results here...>
  > >
  > >
  > >I know I could iterate through every hit returned and count them up
  > >myself, but that seems inefficient if there are lots of results.
Is
  > >there some other way to get this kind of information from the
search
  > >result set?  My other ideas are: doing a separate search each
result
  > >type, or storing different types in different indexes.  Any
  > >suggestions?  Thanks for your help!
  > >
  > >-Chris
  > >
  >
>---------------------------------------------------------------------
  > >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > >For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
  > >
  > >
  > >
  > >
  > >
  > >
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11224-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 14 00:47:02 2004
Return-Path: <lucene-user-return-11224-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15149 invoked from network); 14 Nov 2004 00:47:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Nov 2004 00:47:02 -0000
Received: (qmail 58254 invoked by uid 500); 14 Nov 2004 00:46:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58207 invoked by uid 500); 14 Nov 2004 00:46:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58193 invoked by uid 99); 14 Nov 2004 00:46:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.199 as permitted sender)
Received: from [64.233.170.199] (HELO rproxy.gmail.com) (64.233.170.199)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 13 Nov 2004 16:46:55 -0800
Received: by rproxy.gmail.com with SMTP id b11so571574rne
        for <lucene-user@jakarta.apache.org>; Sat, 13 Nov 2004 16:46:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=ZjyHm9peImHgX7Nbr5HaHMYcsGBvOTNBFyCQtZpPuJTeDhp3lCSCn0nenpqUy7Ve1T6yfTov6qDTC8g+tqIobl3veP6GOULBPLso/TyttIvZF8cjdfO98Upnh44Flhqy8XsbNmxMOCr1/vgRi8M+xJm42e7dP99iHuHHTYzmOSU=
Received: by 10.38.71.1 with SMTP id t1mr303919rna;
        Sat, 13 Nov 2004 16:46:51 -0800 (PST)
Received: by 10.38.72.66 with HTTP; Sat, 13 Nov 2004 16:46:51 -0800 (PST)
Message-ID: <88c6a67204111316463f5dea38@mail.gmail.com>
Date: Sat, 13 Nov 2004 18:46:51 -0600
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: How to efficiently get # of search results, per attribute
In-Reply-To: <E3381E0825F1954D953A4E347017BB1C028BA026@reh001-1.REX001.ExchangeByRegister.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <E3381E0825F1954D953A4E347017BB1C028BA026@reh001-1.REX001.ExchangeByRegister.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Nader and Chuck,

Thanks for the responses, they're both helpful.  My index sizes will
begin on the order of 200,000 classes, and 20,000 instructors (and
much fewer departments), and grow over time to maybe a few million
classes.  Compared to some of the numbers I've seen on this mailing
list, my dataset is fairly small.  I think I'll not worry about
performance for now, until & unless it becomes an issue.

-Chris

On Sat, 13 Nov 2004 15:36:11 -0800, Chuck Williams <chuck@manawiz.com> wrote:
> My Lucene application includes multi-faceted navigation that does a more
> complex version of the below.  I've got 5 different taxonomies into
> which every indexed item is classified.  The largest of the taxonomies
> has over 15,000 entries while the other 4 are much smaller. For every
> search query, I determine the best small set of nodes from each taxonomy
> to present to the user as drill down options, and provide the counts
> regarding how many results fall under each of these nodes.  At present I
> only have about 25,000 indexed objects and usually no more than 1,000
> results from the initial query.  To determine the drill-down options and
> counts, I scan up to 1,000 results computing the counts for all nodes
> into which these results classify.  Then for each taxonomy I pick the
> best drill-down options available (orthogonal set with reasonable
> branching factor that covers all results) and present them with their
> counts.  If there are more than 1,000 results, I extrapolate the
> computed counts to estimate the actual counts on the entire set of
> results.  This is all done with a single index and a single search.
> 
> The total time required for performing this computation for the one
> large taxonomy is under 10ms, running in full debug mode in my ide.  The
> query response time overall is subjectively instantaneous at the UI
> (Google-speed or better).  So, unless some dimension of the problem is
> much bigger than mine, I doubt performance will be an issue.
> 
> Chuck
> 
> 
> 
>  > -----Original Message-----
>  > From: Nader Henein [mailto:nsh@bayt.net]
>  > Sent: Saturday, November 13, 2004 2:29 AM
>  > To: Lucene Users List
>  > Subject: Re: How to efficiently get # of search results, per
> attribute
>  >
>  > It depends on how many results they're looking through, here are two
>  > scenarios I see:
>  >
>  > 1] If you don't have that many records you can fetch all the results
> and
>  > then do a post parsing step the determine totals
>  >
>  > 2] If you have a lot of entries in each category and you're worried
>  > about fetching thousands of records every time, you can just have
>  > seperate indecies per category and search them in in parallel (not
>  > Lucene Parallel Search) and you can get up to 100 hits for each one
>  > (efficiency) but you'll also have the total from the search to
> display.
>  >
>  > Either way you can boost up speed using RamDirectory if you need
> more
>  > speed from the search, but whichever approach you choose I would
>  > recommend that you sit down and do some number crunching to figure
> out
>  > which way to go.
>  >
>  >
>  > Hope this helps
>  >
>  > Nader Henein
>  >
>  >
>  >
>  > Chris Lamprecht wrote:
>  >
>  > >I'd like to implement a search across several types of "entities",
>  > >let's say, classes, professors, and departments.  I want the user
> to
>  > >be able to enter a simple, single query and not have to specify
> what
>  > >they're looking for.  Then I want the search results to be
> something
>  > >like this:
>  > >
>  > >Search results for: "philosophy boyer"
>  > >
>  > >Found: 121 classes - 5 professors - 2 departments
>  > >
>  > ><search results here...>
>  > >
>  > >
>  > >I know I could iterate through every hit returned and count them up
>  > >myself, but that seems inefficient if there are lots of results.
> Is
>  > >there some other way to get this kind of information from the
> search
>  > >result set?  My other ideas are: doing a separate search each
> result
>  > >type, or storing different types in different indexes.  Any
>  > >suggestions?  Thanks for your help!
>  > >
>  > >-Chris
>  > >
>  >
> >---------------------------------------------------------------------
>  > >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>  > >For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
>  > >
>  > >
>  > >
>  > >
>  > >
>  > >
>  >
>  >
> ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11225-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 14 01:06:40 2004
Return-Path: <lucene-user-return-11225-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19163 invoked from network); 14 Nov 2004 01:06:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Nov 2004 01:06:40 -0000
Received: (qmail 72155 invoked by uid 500); 14 Nov 2004 01:06:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72135 invoked by uid 500); 14 Nov 2004 01:06:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72116 invoked by uid 99); 14 Nov 2004 01:06:35 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 13 Nov 2004 17:06:33 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Anyone implemented custom hit ranking?
Date: Sat, 13 Nov 2004 17:06:28 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C028BA02B@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Anyone implemented custom hit ranking?
Thread-Index: AcTJXCIXYWjV6Mk4TG6ToD4tylFSmgAiTL0g
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I've done some customization of scoring/ranking and plan to do more.  A
good place to start is with your own Similarity, extending Lucene's
DefaultSimilarity.  Like you, I found the default length normalization
to not work well with my dataset.  I separately weight each indexed
field according to a static relative importance (implemented as a query
boost factor that is automatically applied) and then disable length
normalization altogether by redefining lengthNorm() to always return
1.0f.

I also had problems with tf and idf normalization, especially with idf
dominating the ranking determination.  To address that, my Similarity
increases the base of the log for each, and adds a final square root to
the idf computation since Lucene squares the idf in the score
computations.

Have you tried the explain() mechanism?  It is a great way to see
precisely how your results are being scored (but be warned there is a
final normalization in Hits that explain() does not show -- this final
normalization does not affect the ranking order, but it does affect the
final scores).

Chuck

  > -----Original Message-----
  > From: Sanyi [mailto:need4sid@yahoo.com]
  > Sent: Saturday, November 13, 2004 12:38 AM
  > To: lucene-user@jakarta.apache.org
  > Subject: Anyone implemented custom hit ranking?
  >=20
  > Hi!
  >=20
  > I have problems with short text ranking. I've read about same raking
  > problems in the list
  > archives, but found only hints and toughts (adjust
DefaultSimilarity,
  > Similarity, etc...), not
  > complete solutions with source code.
  > Anyone implemented a good solution for this problem? (example: my
search
  > application returns about
  > 10-20 pages of 1-2 word hits for "hello", and then it starts to list
the
  > longer texts)
  > I've implemented a very simple solution: I boost documents shorter
than
  > 300 chars with
  > 1/300*doclength at index time. Now it works a lot better. In fact, I
  > can't see any problems now.
  > Anyway, I think this is not "the solution", this is a patch or
  > workaround.
  > So, I'd be interested in some kind of well designed complete
solution
  > for this problem.
  >=20
  > Regards,
  > Sanyi
  >=20
  >=20
  >=20
  > __________________________________
  > Do you Yahoo!?
  > Check out the new Yahoo! Front Page.
  > www.yahoo.com
  >=20
  >=20
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11226-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 14 06:57:04 2004
Return-Path: <lucene-user-return-11226-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84326 invoked from network); 14 Nov 2004 06:57:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 14 Nov 2004 06:57:04 -0000
Received: (qmail 68010 invoked by uid 500); 14 Nov 2004 06:56:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67981 invoked by uid 500); 14 Nov 2004 06:56:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67967 invoked by uid 99); 14 Nov 2004 06:56:59 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=HTML_ATTR_BAD,HTML_ATTR_UNIQUE,HTML_MESSAGE,HTML_TITLE_EMPTY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 13 Nov 2004 22:56:53 -0800
Received: from [192.168.1.109] (adsl-64-161-208-214.dsl.snfc21.pacbell.net [64.161.208.214])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id iAE6ugBL016810;
	Sat, 13 Nov 2004 22:56:47 -0800
Message-ID: <419701A9.4050806@newsmonster.org>
Date: Sat, 13 Nov 2004 22:56:41 -0800
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: asa@mozilla.org, Brendan Eich <brendan@mozilla.org>,
        Jon Udell <jon_udell@infoworld.com>,
        Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Mozilla Desktop Search
Content-Type: multipart/alternative;
 boundary="------------040500070505020105020207"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------040500070505020105020207
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

   
http://www.peerfear.org/rss/permalink/2004/11/13/MozillaDesktopSearch/

> The Mozilla foundation may be considering a desktop search 
> implementation 
> <http://computerworld.com/developmenttopics/websitemgmt/story/0,10801,97396,00.html?f=x10> 
> :
>
>     Having launched the much-awaited Version 1.0 of the Firefox
>     browser yesterday (see story), The Mozilla Foundation is busy
>     planning enhancements to the open-source product, including the
>     possibility of integrating it with a variety of desktop search
>     tools. The Mozilla Foundation also wants to place Firefox in PCs
>     through reseller deals with PC hardware vendors and continue to
>     sharpen the product's pop-up ad-blocking technology. 
>
> I'm not sure this is a good idea. Maybe it is though. The technology 
> just isn't there for cross platform search.
>
> I'd have to suggest using Lucene but using GCJ for a native compile 
> into XPCOM components but I'm not sure if GCJ is up to the job here. 
> If this approach is possible then I'd be very excited.
>
> One advantage to this approach is that an HTTP server wouldn't be 
> necessary since you're already within the brower.
>
> Good for everyone involved. No bloated Tomcat causing problem and 
> blazingly fast access within the browser. Also since TCP isn't 
> involved you could gracefully fail when the search service isn't 
> running; you could just start it.
>
-- 

Use Rojo (RSS/Atom aggregator).  Visit http://rojo.com. Ask me for an 
invite!  Also see irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

If you're interested in RSS, Weblogs, Social Networking, etc... then you 
should work for Rojo!  If you recommend someone and we hire them you'll 
get a free iPod!
    
Kevin A. Burton, Location - San Francisco, CA
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412


--------------040500070505020105020207--

From lucene-user-return-11227-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 04:04:37 2004
Return-Path: <lucene-user-return-11227-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34526 invoked from network); 15 Nov 2004 04:04:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 04:04:36 -0000
Received: (qmail 20101 invoked by uid 500); 15 Nov 2004 04:04:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19392 invoked by uid 500); 15 Nov 2004 04:04:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19378 invoked by uid 99); 15 Nov 2004 04:04:31 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=CLICK_BELOW,DNS_FROM_RFC_ABUSE,FROM_ENDS_IN_NUMS,HTML_20_30,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.225.197] (HELO web14826.mail.yahoo.com) (216.136.225.197)
  by apache.org (qpsmtpd/0.28) with SMTP; Sun, 14 Nov 2004 20:04:28 -0800
Received: (qmail 54180 invoked by uid 60001); 15 Nov 2004 04:04:24 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=WgDju/9/DyosAk0tUGNIWSRJqzAYX4gFmhufS1ZcyXj6N89hy9ZoQ9KpmfokfWPzIdLl1bYZTPXx/zwNv0LrQv9e8Pk8zAsZd/HFoBDU0RQp4MmzfHMUAT2NrLEweiKOHyXecXkzHHXk4/SiFMVSvs/8+ejY4sov6FsXkHzHxfM=  ;
Message-ID: <20041115040424.54178.qmail@web14826.mail.yahoo.com>
Received: from [221.132.22.31] by web14826.mail.yahoo.com via HTTP; Sun, 14 Nov 2004 20:04:24 PST
Date: Sun, 14 Nov 2004 20:04:24 -0800 (PST)
From: Nhan Nguyen Dang <ndnhan2003@yahoo.com>
Subject: Re: Using Lucene to store document
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20041111053902.92911.qmail@web12701.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-2034385053-1100491464=:54140"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--0-2034385053-1100491464=:54140
Content-Type: text/plain; charset=us-ascii

Hi,
When the Index is read to memory for searching, which data in the segment/ index will be load ? 
I mean all the indexed fields/ terms ? Is the stored field loaded ?
thanks, 


Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:Hello,

HEAD version means that you should check out Lucene straight out of
CVS. How to work with CVS is another story, probably described
somewhere on jakarta.apache.org site.

Otis

--- Nhan Nguyen Dang wrote:

> Hi Otis,
> Please let me know what HEAD version of Lucene is?
> Actually, I'm consider the advantages of storing document using
> Lucene Stored field - For my Search engine.
> I've tested with thousands of documents and see that retrieve
> document (in this case XML file) with Lucene is a little bit faster
> than using FS. But I cannot test with a large number of data to hava
> an accurate comparision. 
> So whether Lucene can support millions of document, still balance and
> retrieve the with approriate speed.
> Nhan
> 
> 
> ---------------------------------
> FREE Spam Protection! Click Here.
> SpamExtract Blocks Spam.
> 
> ---------------------------------
> Do you Yahoo!?
> Check out the new Yahoo! Front Page. www.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



			
---------------------------------
Do you Yahoo!?
 Check out the new Yahoo! Front Page. www.yahoo.com
--0-2034385053-1100491464=:54140--

From lucene-user-return-11228-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 06:42:57 2004
Return-Path: <lucene-user-return-11228-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 584 invoked from network); 15 Nov 2004 06:42:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 06:42:57 -0000
Received: (qmail 32775 invoked by uid 500); 15 Nov 2004 06:42:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32470 invoked by uid 500); 15 Nov 2004 06:42:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 32453 invoked by uid 99); 15 Nov 2004 06:42:48 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=CLICK_BELOW,DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.242] (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.28) with SMTP; Sun, 14 Nov 2004 22:42:48 -0800
Received: (qmail 39418 invoked by uid 60001); 15 Nov 2004 06:42:46 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=i5KcWobMBsI4nseuIgqZMEwzYEj3HJpoxcZT93O0tK87VVXf1HnLbVVkqUuyqTsYZR9t6DzkbvmgGZOTgeG/meIIiV8wBCkjo0Zq5IVwhaRK/5b3Uq7LwjDhuG1u8vxuCXdD1LPLUsLizR/CMDiIjXTrM5uz/38B3Ec7SjzT/qs=  ;
Message-ID: <20041115064246.39416.qmail@web12705.mail.yahoo.com>
Received: from [24.184.142.180] by web12705.mail.yahoo.com via HTTP; Sun, 14 Nov 2004 22:42:46 PST
Date: Sun, 14 Nov 2004 22:42:46 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Using Lucene to store document
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20041115040424.54178.qmail@web14826.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Not all data in the index is loaded all at once.  I believe the .tii
file (if you are using multifile index format) is loaded into RAM,
maybe some other small ones, but the rest is read off the disk as it's
needed, depending on the terms used in the search.

Otis


--- Nhan Nguyen Dang <ndnhan2003@yahoo.com> wrote:

> Hi,
> When the Index is read to memory for searching, which data in the
> segment/ index will be load ? 
> I mean all the indexed fields/ terms ? Is the stored field loaded ?
> thanks, 
> 
> 
> Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:Hello,
> 
> HEAD version means that you should check out Lucene straight out of
> CVS. How to work with CVS is another story, probably described
> somewhere on jakarta.apache.org site.
> 
> Otis
> 
> --- Nhan Nguyen Dang wrote:
> 
> > Hi Otis,
> > Please let me know what HEAD version of Lucene is?
> > Actually, I'm consider the advantages of storing document using
> > Lucene Stored field - For my Search engine.
> > I've tested with thousands of documents and see that retrieve
> > document (in this case XML file) with Lucene is a little bit faster
> > than using FS. But I cannot test with a large number of data to
> hava
> > an accurate comparision. 
> > So whether Lucene can support millions of document, still balance
> and
> > retrieve the with approriate speed.
> > Nhan
> > 
> > 
> > ---------------------------------
> > FREE Spam Protection! Click Here.
> > SpamExtract Blocks Spam.
> > 
> > ---------------------------------
> > Do you Yahoo!?
> > Check out the new Yahoo! Front Page. www.yahoo.com
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> 
> 			
> ---------------------------------
> Do you Yahoo!?
>  Check out the new Yahoo! Front Page. www.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11229-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 12:36:33 2004
Return-Path: <lucene-user-return-11229-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3950 invoked from network); 15 Nov 2004 12:36:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 12:36:33 -0000
Received: (qmail 25744 invoked by uid 500); 15 Nov 2004 12:36:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25722 invoked by uid 500); 15 Nov 2004 12:36:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25708 invoked by uid 99); 15 Nov 2004 12:36:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of venkatraju@gmail.com designates 64.233.170.204 as permitted sender)
Received: from [64.233.170.204] (HELO rproxy.gmail.com) (64.233.170.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 04:36:22 -0800
Received: by rproxy.gmail.com with SMTP id b11so651555rne
        for <lucene-user@jakarta.apache.org>; Mon, 15 Nov 2004 04:36:18 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=eceWGVUvHNSBTkJDF6KxPcWfcoL6f4F5qqTi6ykC1DKK4LkN7AGVzL1Pf2WfY4+ULeMQFUjcEtnw0iiVga/s6K5x6/kZVZjp5VNj9AqLurCWfEQDRGD7wauVgIyuozAU4Nbe71zu4KA5UN2unHkOXPEaZhy0d6fzOvNBN6QpO7A=
Received: by 10.38.181.38 with SMTP id d38mr275198rnf;
        Mon, 15 Nov 2004 04:36:17 -0800 (PST)
Received: by 10.38.165.13 with HTTP; Mon, 15 Nov 2004 04:36:17 -0800 (PST)
Message-ID: <2fe5a4ca04111504361f1a7cf3@mail.gmail.com>
Date: Mon, 15 Nov 2004 18:06:17 +0530
From: Venkatraju <venkatraju@gmail.com>
Reply-To: Venkatraju <venkatraju@gmail.com>
To: lucene-user <lucene-user@jakarta.apache.org>
Subject: Lucene scalability, performance
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I plan to use Lucene in a project. The data to be indexed could get
pretty large (few GBs, with average document size ~ 10-30KB). I have
seen the numbers on the Benchmarks page - but I wanted to hear if
others had something to add. Any tips/hints on keeping the searches
fast enough with such large indexes? Any caveats that I must be wary
of?

Also, has someone evaluated Swih-E vs. Lucene in terms of performance
and scalability?

Thanks in advance.
Venkat

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11230-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 12:46:09 2004
Return-Path: <lucene-user-return-11230-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8136 invoked from network); 15 Nov 2004 12:46:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 12:46:09 -0000
Received: (qmail 37817 invoked by uid 500); 15 Nov 2004 12:46:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37765 invoked by uid 500); 15 Nov 2004 12:46:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37743 invoked by uid 99); 15 Nov 2004 12:46:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.62.196.100] (HELO maui.ebi.ac.uk) (193.62.196.100)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 04:46:01 -0800
Received: from SILK (silk.dhcp.ebi.ac.uk [172.22.69.6])
	by maui.ebi.ac.uk (8.11.7+Sun/8.11.7) with SMTP id iAFCjrF15600
	for <lucene-user@jakarta.apache.org>; Mon, 15 Nov 2004 12:45:53 GMT
From: "Rupinder Singh Mazara" <rsmazara@ebi.ac.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: displaying search  results 
Date: Mon, 15 Nov 2004 12:46:37 -0000
Message-ID: <CFEHIPOIEGKAJJPJENCEKEJHCDAA.rsmazara@ebi.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.6604 (9.0.2911.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-EBI-Information: This email is scanned using www.mailscanner.info.
X-EBI: Found to be clean
X-EBI-SpamCheck: not spam, SpamAssassin (score=0, required 5)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

hi all 

  I want to be able to draw a venn diagramm or something similar that shows
  how results of different queries overlapp.
  the idea is to draw a diagramm using applets or gif's or the like 
   which shows how  different results match, 

   gratefull for any help in this matter 

   Rupinder
  

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11231-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 12:59:53 2004
Return-Path: <lucene-user-return-11231-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13657 invoked from network); 15 Nov 2004 12:59:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 12:59:52 -0000
Received: (qmail 52590 invoked by uid 500); 15 Nov 2004 12:59:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52568 invoked by uid 500); 15 Nov 2004 12:59:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52554 invoked by uid 99); 15 Nov 2004 12:59:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [212.159.14.213] (HELO ptb-relay02.plus.net) (212.159.14.213)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 04:59:43 -0800
Received: from [80.229.194.52] (helo=joseph)
	 by ptb-relay02.plus.net with smtp (Exim) id 1CTgS6-0000G8-UZ; Mon, 15 Nov 2004 12:59:27 +0000
Message-ID: <005301c4cb12$70c49dc0$34c2e550@joseph>
From: "Pete Lewis" <pete@uptima.co.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"Venkatraju" <venkatraju@gmail.com>
References: <2fe5a4ca04111504361f1a7cf3@mail.gmail.com>
Subject: Re: Lucene scalability, performance
Date: Mon, 15 Nov 2004 12:55:52 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Venkat

If you want to go against just html pages (maybe with Dublin core tags) then
Swich-E isn't too bad, but it wont be as portable as Lucene plus it doesn't
seem to be as nearly as active on the development side as Lucene (so you'll
get less support in the event of problems).  Swish seems easy to install &
index against just html pages.

If you want something a bit more capable, or if you are going against
structured text files / databases / etc then choose Lucene everytime.

Performance, you'll find that Java Lucene will compare well with C / Perl
Swish, and for your volumes there shouldn't be any problems with Lucene.

Cheers

Pete

----- Original Message ----- 
From: "Venkatraju" <venkatraju@gmail.com>
To: "lucene-user" <lucene-user@jakarta.apache.org>
Sent: Monday, November 15, 2004 12:36 PM
Subject: Lucene scalability, performance


> Hi,
>
> I plan to use Lucene in a project. The data to be indexed could get
> pretty large (few GBs, with average document size ~ 10-30KB). I have
> seen the numbers on the Benchmarks page - but I wanted to hear if
> others had something to add. Any tips/hints on keeping the searches
> fast enough with such large indexes? Any caveats that I must be wary
> of?
>
> Also, has someone evaluated Swih-E vs. Lucene in terms of performance
> and scalability?
>
> Thanks in advance.
> Venkat
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11232-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 13:38:39 2004
Return-Path: <lucene-user-return-11232-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33255 invoked from network); 15 Nov 2004 13:38:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 13:38:39 -0000
Received: (qmail 5841 invoked by uid 500); 15 Nov 2004 13:38:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5762 invoked by uid 500); 15 Nov 2004 13:38:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5739 invoked by uid 99); 15 Nov 2004 13:38:32 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=BIZ_TLD
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.53.169.170] (HELO mail.aduna.biz) (213.53.169.170)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 05:38:29 -0800
Received: from [127.0.0.1] (laguna.tech.aduna.biz [10.1.0.20])
	by mail.aduna.biz (Postfix) with ESMTP id 16F955452A
	for <lucene-user@jakarta.apache.org>; Mon, 15 Nov 2004 14:38:32 +0100 (CET)
Message-ID: <4198B149.8070003@aduna.biz>
Date: Mon, 15 Nov 2004 14:38:17 +0100
From: Christiaan Fluit <christiaan.fluit@aduna.biz>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.3) Gecko/20040910
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: displaying search  results
References: <CFEHIPOIEGKAJJPJENCEKEJHCDAA.rsmazara@ebi.ac.uk>
In-Reply-To: <CFEHIPOIEGKAJJPJENCEKEJHCDAA.rsmazara@ebi.ac.uk>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Rupinder Singh Mazara wrote:

>   I want to be able to draw a venn diagramm or something similar that shows
>   how results of different queries overlapp.
>   the idea is to draw a diagramm using applets or gif's or the like 
>    which shows how  different results match, 

This is *exactly* what we are doing in our AutoFocus Personal 
application. AFP is a desktop search app that uses our Cluster Map 
visualization library for displaying overlapping sets of items. 
Internally it uses a number of Lucene indices, besides a number of 
Sesame RDF storages, hence our presence on this list.

See http://aduna.biz/products/autofocus/personal/index.html for more 
information about AutoFocus Personal, which soon will see a new final 
release. The screenshots should give you a good impression of what the 
visualization is about.

See e.g. http://www.cs.vu.nl/~frankh/abstracts/OntoHandbook03Viz.html 
for our latest published research article about the visualization. I 
also have a deadline today for another article, just yell if you're 
interested.

You can email me directly in case you are interested in using the 
Cluster Map library. Please know that this is commercial software, but 
for academic use we have an attractive offering (as judged by the 
universities using it!).


Regards,

Christiaan Fluit
Aduna.biz
--


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11233-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 15:39:55 2004
Return-Path: <lucene-user-return-11233-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6910 invoked from network); 15 Nov 2004 15:39:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 15:39:54 -0000
Received: (qmail 69688 invoked by uid 500); 15 Nov 2004 15:39:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69522 invoked by uid 500); 15 Nov 2004 15:39:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69477 invoked by uid 99); 15 Nov 2004 15:39:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 07:39:38 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iAFFdXJ17949
	for <lucene-user@jakarta.apache.org>; Mon, 15 Nov 2004 09:39:33 -0600 (CST)
Subject: RE: Index File
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <000901c4c91d$1a4fabc0$0a00a8c0@supportsit.local>
References: <000901c4c91d$1a4fabc0$0a00a8c0@supportsit.local>
Content-Type: text/plain
Message-Id: <1100533162.2886.60.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Mon, 15 Nov 2004 09:39:22 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Fri, 2004-11-12 at 19:07, Richard Greenane wrote:
> You might wat to look at LUKE @ http://www.getopt.org/luke/
> A great tool for checking the index to make sure that everything is
> there

There is also a web-based tool that you can run in your servlet
container called LIMO. I've added some query features to it in CVS,
which you can check out from Sourceforge:
http://sourceforge.net/projects/limo

But I will second what Otis said: you must (or rather your colleague
must) check to see if the index has been updated before a search (use
IndexReader.getCurrentVersion), and if it is, close the IndexSearcher
and create a new one.

Luke


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11234-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 15:48:50 2004
Return-Path: <lucene-user-return-11234-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12094 invoked from network); 15 Nov 2004 15:48:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 15:48:50 -0000
Received: (qmail 81667 invoked by uid 500); 15 Nov 2004 15:48:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81467 invoked by uid 500); 15 Nov 2004 15:48:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81385 invoked by uid 99); 15 Nov 2004 15:48:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 07:47:58 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Mon, 15 Nov 2004 10:48:26 -0500
Message-ID: <079f01c4cb2a$8b860e60$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Parsing .ppt
Date: Mon, 15 Nov 2004 10:48:26 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_079C_01C4CB00.A2A1D590"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 15 Nov 2004 15:48:26.0499 (UTC) FILETIME=[8BA2E530:01C4CB2A]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_079C_01C4CB00.A2A1D590
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hey All;

Anyone know a good API for parsing MS powerpoint files?

Luke
------=_NextPart_000_079C_01C4CB00.A2A1D590--



From lucene-user-return-11235-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 15:51:43 2004
Return-Path: <lucene-user-return-11235-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13697 invoked from network); 15 Nov 2004 15:51:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 15:51:43 -0000
Received: (qmail 90510 invoked by uid 500); 15 Nov 2004 15:51:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90488 invoked by uid 500); 15 Nov 2004 15:51:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90475 invoked by uid 99); 15 Nov 2004 15:51:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 07:51:37 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Mon, 15 Nov 2004 10:52:12 -0500
Message-ID: <07a701c4cb2b$1238c880$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <000901c4c91d$1a4fabc0$0a00a8c0@supportsit.local> <1100533162.2886.60.camel@localhost>
Subject: Re: Index File
Date: Mon, 15 Nov 2004 10:52:12 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 15 Nov 2004 15:52:12.0501 (UTC) FILETIME=[12581050:01C4CB2B]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Based on Otis's suggestion I was able to resolve this issue. The class I was
integrating with for search created one IndexSearcher when it was
instantiated and keep that same reference throughout the session.

Once this was modified to create a new IndexerSearch for every search
request, all my problems went away.

----- Original Message ----- 
From: "Luke Francl" <luke.francl@stellent.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, November 15, 2004 10:39 AM
Subject: RE: Index File


> On Fri, 2004-11-12 at 19:07, Richard Greenane wrote:
> > You might wat to look at LUKE @ http://www.getopt.org/luke/
> > A great tool for checking the index to make sure that everything is
> > there
>
> There is also a web-based tool that you can run in your servlet
> container called LIMO. I've added some query features to it in CVS,
> which you can check out from Sourceforge:
> http://sourceforge.net/projects/limo
>
> But I will second what Otis said: you must (or rather your colleague
> must) check to see if the index has been updated before a search (use
> IndexReader.getCurrentVersion), and if it is, close the IndexSearcher
> and create a new one.
>
> Luke
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11236-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 15:54:25 2004
Return-Path: <lucene-user-return-11236-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15259 invoked from network); 15 Nov 2004 15:54:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 15:54:25 -0000
Received: (qmail 95022 invoked by uid 500); 15 Nov 2004 15:54:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95001 invoked by uid 500); 15 Nov 2004 15:54:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94986 invoked by uid 99); 15 Nov 2004 15:54:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.92.66.11] (HELO smtp1.cypoint.net) (81.92.66.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 07:54:16 -0800
Received: from [172.16.4.101] ([172.16.4.101])
	by smtp1.cypoint.net (8.12.11/8.12.11) with ESMTP id iAFFsB1I023519
	for <lucene-user@jakarta.apache.org>; Mon, 15 Nov 2004 16:54:11 +0100
Message-ID: <4198D123.7020800@cypoint.se>
Date: Mon, 15 Nov 2004 16:54:11 +0100
From: Magnus Johansson <magnus.johansson@cypoint.se>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Parsing .ppt
References: <079f01c4cb2a$8b860e60$7703d00a@hypermedia.com>
In-Reply-To: <079f01c4cb2a$8b860e60$7703d00a@hypermedia.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

There's some code using POI at
http://www.mail-archive.com/poi-user@jakarta.apache.org/msg04809.html

/magnus


Luke Shannon wrote:

>Hey All;
>
>Anyone know a good API for parsing MS powerpoint files?
>
>Luke
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11237-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 16:03:22 2004
Return-Path: <lucene-user-return-11237-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20215 invoked from network); 15 Nov 2004 16:03:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 16:03:22 -0000
Received: (qmail 12460 invoked by uid 500); 15 Nov 2004 16:03:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12433 invoked by uid 500); 15 Nov 2004 16:03:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12420 invoked by uid 99); 15 Nov 2004 16:03:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 08:03:15 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iAFG3BJ18650
	for <lucene-user@jakarta.apache.org>; Mon, 15 Nov 2004 10:03:11 -0600 (CST)
Subject: Re: Index File
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <07a701c4cb2b$1238c880$7703d00a@hypermedia.com>
References: <000901c4c91d$1a4fabc0$0a00a8c0@supportsit.local>
	 <1100533162.2886.60.camel@localhost>
	 <07a701c4cb2b$1238c880$7703d00a@hypermedia.com>
Content-Type: text/plain
Message-Id: <1100534580.2886.67.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Mon, 15 Nov 2004 10:03:00 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Mon, 2004-11-15 at 09:52, Luke Shannon wrote:
> Once this was modified to create a new IndexerSearch for every search
> request, all my problems went away.

Be careful with this. You could conceivably run out of file handles.
This problem got a lot better in Lucene 1.3 with the compound file
format, it could still happen if you have a lot of heap and aren't
garbage collecting very often. So close the old one when you're done
with it.

Also, creating a new IndexSearcher only when the index has been modified
will give you a performance boost because you do not have to open the
index with every search. 

Luke Francl


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11238-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 17:08:16 2004
Return-Path: <lucene-user-return-11238-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57733 invoked from network); 15 Nov 2004 17:08:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 17:08:16 -0000
Received: (qmail 57111 invoked by uid 500); 15 Nov 2004 17:08:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57078 invoked by uid 500); 15 Nov 2004 17:08:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57064 invoked by uid 99); 15 Nov 2004 17:08:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 09:08:08 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Mon, 15 Nov 2004 12:08:41 -0500
Message-ID: <07d201c4cb35$c1658e60$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <000901c4c91d$1a4fabc0$0a00a8c0@supportsit.local> <1100533162.2886.60.camel@localhost> <07a701c4cb2b$1238c880$7703d00a@hypermedia.com> <1100534580.2886.67.camel@localhost>
Subject: Re: Index File
Date: Mon, 15 Nov 2004 12:08:41 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 15 Nov 2004 17:08:41.0299 (UTC) FILETIME=[C17B1230:01C4CB35]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Luke;

I have tried to implement a system where the search method is aware whether
the index folder has been updated or not (so it only creates a new searcher
when required). However, due to the environment this process is running in
it turned out not to be a simple task. I need to move on to some out
standing document types I still need to handle. But before I do that...

When you said "performance boost" how substaintal might this be? For now
each time I finish with a Searcher I close it and set the reference to null.
The application this is running in monitors the levels of memory being
utilized. If utilization gets to high it requests the garbage collector to
run.

I am not totally sure I totally understand risks involved with the
FileHandlers issue you brought up, or what kind of burden I may be putting
on performance by not putting better logic around the creation of the
IndexSearcher. I hoping things will be ok as they are until I can dedicate
more time to the issue.

Are there specific errors or behavior I should look for if I start to run
out of FileHandlers?

Luke
----- Original Message ----- 
From: "Luke Francl" <luke.francl@stellent.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, November 15, 2004 11:03 AM
Subject: Re: Index File


> On Mon, 2004-11-15 at 09:52, Luke Shannon wrote:
> > Once this was modified to create a new IndexerSearch for every search
> > request, all my problems went away.
>
> Be careful with this. You could conceivably run out of file handles.
> This problem got a lot better in Lucene 1.3 with the compound file
> format, it could still happen if you have a lot of heap and aren't
> garbage collecting very often. So close the old one when you're done
> with it.
>
> Also, creating a new IndexSearcher only when the index has been modified
> will give you a performance boost because you do not have to open the
> index with every search.
>
> Luke Francl
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11239-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 17:19:17 2004
Return-Path: <lucene-user-return-11239-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63344 invoked from network); 15 Nov 2004 17:19:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 17:19:17 -0000
Received: (qmail 71306 invoked by uid 500); 15 Nov 2004 17:19:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71286 invoked by uid 500); 15 Nov 2004 17:19:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71273 invoked by uid 99); 15 Nov 2004 17:19:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 09:19:08 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iAFHJ4J20601
	for <lucene-user@jakarta.apache.org>; Mon, 15 Nov 2004 11:19:04 -0600 (CST)
Subject: Re: Index File
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <07d201c4cb35$c1658e60$7703d00a@hypermedia.com>
References: <000901c4c91d$1a4fabc0$0a00a8c0@supportsit.local>
	 <1100533162.2886.60.camel@localhost>
	 <07a701c4cb2b$1238c880$7703d00a@hypermedia.com>
	 <1100534580.2886.67.camel@localhost>
	 <07d201c4cb35$c1658e60$7703d00a@hypermedia.com>
Content-Type: text/plain
Message-Id: <1100539133.2886.75.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Mon, 15 Nov 2004 11:18:54 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

As long as you are closing your IndexSearchers when you are done with
them you should not have problems with file handles. When using Lucene
1.2 (pre-compound file format) on Windows, I ran into this problem
because Windows only lets an application open something like 1000 file
handles. On Unix the number is larger.

To calculate the cost of creating a new IndexSearcher for each search,
just put a timing statement around your call to IndexSearcher.open and
IndexSearcher.close. Your performance cost is the time used when opening
and closing unnecessarily.

Here is a description of the scheme I used to manage this issue:

"Creating a new IndexSearcher for every request opens too many
files. Searchers are thread-safe, so it is good to keep only one
Searcher open at a time. However, we must create a new Searcher if
the index has changed, and it is not safe to close a Searcher while
it is still in use by a thread. The SearcherManager handles these
cases.

The SearcherManager keeps a list of the Searchers which are
currently in use and returns the the current one, or a new one if
necessary. The SearcherManager uses a reference counting scheme to
keep track of which Searchers are still being used. Callers must
return their Searcher to the SearcherManager when done using it so
the Searcher can be closed (releasing its filehandles) if no other
threads are using it and the index has changed."


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11240-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 18:28:47 2004
Return-Path: <lucene-user-return-11240-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98024 invoked from network); 15 Nov 2004 18:28:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 18:28:47 -0000
Received: (qmail 23177 invoked by uid 500); 15 Nov 2004 18:28:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23065 invoked by uid 500); 15 Nov 2004 18:28:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23024 invoked by uid 99); 15 Nov 2004 18:28:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of angeles3d@gmail.com designates 64.233.170.195 as permitted sender)
Received: from [64.233.170.195] (HELO rproxy.gmail.com) (64.233.170.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 10:28:08 -0800
Received: by rproxy.gmail.com with SMTP id a36so635742rnf
        for <lucene-user@jakarta.apache.org>; Mon, 15 Nov 2004 10:28:03 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=hZKk2MsGRav7FP+TUqbVHP8J7brq4VQdLRioDqdOIqGTA4/5GHHTBzQwLvVmtwvLh9CEBmqLB93gRqlv5D5D38aEzMcZMNqkaxUd509Cz8VfTb73KaEgJ+qTvIQzntw/1czWyRlZvbmw7Zcl7z+xvnStEiN6yu68ePPA55/GEls=
Received: by 10.38.77.56 with SMTP id z56mr109600rna;
        Mon, 15 Nov 2004 10:28:03 -0800 (PST)
Received: by 10.38.14.16 with HTTP; Mon, 15 Nov 2004 10:28:03 -0800 (PST)
Message-ID: <6c00cd31041115102869a90a5a@mail.gmail.com>
Date: Mon, 15 Nov 2004 13:28:03 -0500
From: Miguel Angel <angeles3d@gmail.com>
Reply-To: Miguel Angel <angeles3d@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: Steamming
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi, i use demo for lucene, about steamming ?? anybody can examples
used steamming for lucene??? examples please
-- 
Miguel Angel Angeles R.
Asesoria en Conectividad y Servidores
Telf. 97451277

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11241-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 19:18:40 2004
Return-Path: <lucene-user-return-11241-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23989 invoked from network); 15 Nov 2004 19:18:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 19:18:40 -0000
Received: (qmail 57704 invoked by uid 500); 15 Nov 2004 19:18:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57348 invoked by uid 500); 15 Nov 2004 19:18:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57103 invoked by uid 99); 15 Nov 2004 19:18:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 11:18:19 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Mon, 15 Nov 2004 14:18:51 -0500
Message-ID: <07e601c4cb47$f0f79350$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <000901c4c91d$1a4fabc0$0a00a8c0@supportsit.local> <1100533162.2886.60.camel@localhost> <07a701c4cb2b$1238c880$7703d00a@hypermedia.com> <1100534580.2886.67.camel@localhost> <07d201c4cb35$c1658e60$7703d00a@hypermedia.com> <1100539133.2886.75.camel@localhost>
Subject: Re: Index File
Date: Mon, 15 Nov 2004 14:18:51 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 15 Nov 2004 19:18:51.0959 (UTC) FILETIME=[F0FF3470:01C4CB47]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Luke;

I implemented the logging like you said. At present I am speeding about 678
milliseconds creating a new IndexSearcher.

I am going to implement your scheme to resolve this but at a later point
since I don't think this is a huge time factor to be worried about at
present.

Thanks for all your help,

Luke

----- Original Message ----- 
From: "Luke Francl" <luke.francl@stellent.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, November 15, 2004 12:18 PM
Subject: Re: Index File


> As long as you are closing your IndexSearchers when you are done with
> them you should not have problems with file handles. When using Lucene
> 1.2 (pre-compound file format) on Windows, I ran into this problem
> because Windows only lets an application open something like 1000 file
> handles. On Unix the number is larger.
>
> To calculate the cost of creating a new IndexSearcher for each search,
> just put a timing statement around your call to IndexSearcher.open and
> IndexSearcher.close. Your performance cost is the time used when opening
> and closing unnecessarily.
>
> Here is a description of the scheme I used to manage this issue:
>
> "Creating a new IndexSearcher for every request opens too many
> files. Searchers are thread-safe, so it is good to keep only one
> Searcher open at a time. However, we must create a new Searcher if
> the index has changed, and it is not safe to close a Searcher while
> it is still in use by a thread. The SearcherManager handles these
> cases.
>
> The SearcherManager keeps a list of the Searchers which are
> currently in use and returns the the current one, or a new one if
> necessary. The SearcherManager uses a reference counting scheme to
> keep track of which Searchers are still being used. Callers must
> return their Searcher to the SearcherManager when done using it so
> the Searcher can be closed (releasing its filehandles) if no other
> threads are using it and the index has changed."
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11242-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 19:31:16 2004
Return-Path: <lucene-user-return-11242-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29869 invoked from network); 15 Nov 2004 19:31:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 19:31:16 -0000
Received: (qmail 85915 invoked by uid 500); 15 Nov 2004 19:31:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85897 invoked by uid 500); 15 Nov 2004 19:31:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85882 invoked by uid 99); 15 Nov 2004 19:31:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ken.mccracken@gmail.com designates 64.233.170.202 as permitted sender)
Received: from [64.233.170.202] (HELO rproxy.gmail.com) (64.233.170.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 11:31:10 -0800
Received: by rproxy.gmail.com with SMTP id a36so642036rnf
        for <lucene-user@jakarta.apache.org>; Mon, 15 Nov 2004 11:31:06 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=kp8lDtdOoVC2A4r+ymFaAphF9RySkQ5ZkSKS2KYJunBEZ0cjEeua0SyRfiwL+e2Mpert1Xx3ibisCH4XdPydooEHglyt24yFsVu//YSxI2Sf7ZkvAOZQWu4QjFHos3Cp3XMf8i6WC489zys1QO6iBqeuUhzB+uWc9LdWndkkkjM=
Received: by 10.38.99.51 with SMTP id w51mr550834rnb;
        Mon, 15 Nov 2004 11:31:06 -0800 (PST)
Received: by 10.38.75.11 with HTTP; Mon, 15 Nov 2004 11:31:06 -0800 (PST)
Message-ID: <2b2518a404111511313178f7ff@mail.gmail.com>
Date: Mon, 15 Nov 2004 11:31:06 -0800
From: Ken McCracken <ken.mccracken@gmail.com>
Reply-To: Ken McCracken <ken.mccracken@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: setting Similarity at search time
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

Is there a way to set the Similarity at search(...) time, rather than
just setting it on the (Index)Searcher object itself?  I'd like to be
able to specify different similarities in different threads searching
concurrently, using the same IndexSearcher instance.

In my use case, the choice of Similarity is a parameter of the search
request, and hence may be different for each request.

Can such a method be added to override the search(...) method?

Thanks,
-Ken

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11243-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 20:52:01 2004
Return-Path: <lucene-user-return-11243-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74046 invoked from network); 15 Nov 2004 20:52:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 20:52:00 -0000
Received: (qmail 44806 invoked by uid 500); 15 Nov 2004 20:51:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44728 invoked by uid 500); 15 Nov 2004 20:51:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44654 invoked by uid 99); 15 Nov 2004 20:51:54 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST,FORGED_RCVD_HELO,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [167.206.5.78] (HELO mta5.srv.hcvlny.cv.net) (167.206.5.78)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 12:51:51 -0800
Received: from optonline.net (hamstr5.srv.hcvlny.cv.net [167.206.5.17])
 by mta5.srv.hcvlny.cv.net
 (iPlanet Messaging Server 5.2 HotFix 1.25 (built Mar  3 2004))
 with ESMTP id <0I7800KRPNABZN@mta5.srv.hcvlny.cv.net> for
 lucene-user@jakarta.apache.org; Mon, 15 Nov 2004 15:51:47 -0500 (EST)
Received: from [167.206.5.47] (Forwarded-For: [68.192.172.208])
 by mstr5.srv.hcvlny.cv.net (mshttpd); Mon, 15 Nov 2004 15:51:47 -0500
Date: Mon, 15 Nov 2004 15:51:47 -0500
From: jeichels@optonline.net
Subject: Re: Lucene : avoiding locking
To: lucene-user@jakarta.apache.org
Message-id: <abd3dcabee00.abee00abd3dc@optonline.net>
MIME-version: 1.0
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.25 (built Mar  3 2004)
Content-type: text/plain; charset=us-ascii
Content-language: en
Content-transfer-encoding: 7BIT
Content-disposition: inline
X-Accept-Language: en
Priority: normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


I am new to Lucene, but have a large project in production on the web using other apache software including Tomcat, Struts, OJB, and others.

The database I need to support will hopefully grow to millions of records.  Right now it only has thousands but it is growing.   These documents get updated by users regularly, but not frequently.   When you have 100k users though, infrequently means you still have to deal with lock types of issues.

When they update their record, their search criteria will have to be updated and they will expect to see results somewhat immediately.

In moving from exact matching which is very poor for searches to Lucene, this locking is the only thing that has me nervous.   I would really like a well thought out scheme for incremental changes as I won't "generally" need batch unless I have to delete/recreate the database for some reason.

Thinking about most online forums, I think incremental is the way they would like to be able to go for searching.

I have lots to learn about this project, but I really like what I see besides that locking issue.   If I get into this more and understand details maybe I will have something to offer later.   Lots to learn first though.

Thank you for your hard work,

JohnE



----------------------------

I am curious, though, how many people on this list are using Lucene in
the incremental update case. Most examples I've seen all assume batch
indexing.

Regards,

Luke Francl




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11244-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 21:00:27 2004
Return-Path: <lucene-user-return-11244-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78364 invoked from network); 15 Nov 2004 21:00:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 21:00:27 -0000
Received: (qmail 62211 invoked by uid 500); 15 Nov 2004 21:00:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62086 invoked by uid 500); 15 Nov 2004 21:00:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62035 invoked by uid 99); 15 Nov 2004 21:00:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [141.156.69.115] (HELO mail.infosciences.com) (141.156.69.115)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 13:00:09 -0800
Received: from Aviran (unknown [141.156.69.109])
	by mail.infosciences.com (Postfix) with ESMTP
	id 1EE3911830B; Mon, 15 Nov 2004 15:58:15 -0500 (EST)
From: "Aviran" <amordo@infosciences.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>,
	"'Miguel Angel'" <angeles3d@gmail.com>
Subject: RE: Steamming
Date: Mon, 15 Nov 2004 16:00:08 -0500
Message-ID: <008701c4cb56$19f3ca90$6a00a8c0@Aviran>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
In-Reply-To: <6c00cd31041115102869a90a5a@mail.gmail.com>
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I don't understand what kind of examples you need. All there is to it is
just use a different analyzer.
Take a look at Snowball analyzer in lucene's sand box.

Aviran
http://www.aviransplace.com

-----Original Message-----
From: Miguel Angel [mailto:angeles3d@gmail.com] 
Sent: Monday, November 15, 2004 13:28 PM
To: lucene-user@jakarta.apache.org
Subject: Steamming


Hi, i use demo for lucene, about steamming ?? anybody can examples used
steamming for lucene??? examples please
-- 
Miguel Angel Angeles R.
Asesoria en Conectividad y Servidores
Telf. 97451277

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11245-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 21:05:51 2004
Return-Path: <lucene-user-return-11245-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81419 invoked from network); 15 Nov 2004 21:05:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 21:05:51 -0000
Received: (qmail 74655 invoked by uid 500); 15 Nov 2004 21:05:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74636 invoked by uid 500); 15 Nov 2004 21:05:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74620 invoked by uid 99); 15 Nov 2004 21:05:46 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 13:05:43 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: setting Similarity at search time
Date: Mon, 15 Nov 2004 13:05:36 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C028BA2FD@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: setting Similarity at search time
Thread-Index: AcTLSayD6FfmwPuPSBSYMwacATAhswADM34w
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"Ken McCracken" <ken.mccracken@gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Take a look at this:

http://issues.apache.org/bugzilla/show_bug.cgi?id=3D31841

Not my initial patch, but the latest patch from Wolf Siberski.  I
haven't used it yet, but it looks like what you are looking for, and
something I want to use too.

Chuck

  > -----Original Message-----
  > From: Ken McCracken [mailto:ken.mccracken@gmail.com]
  > Sent: Monday, November 15, 2004 11:31 AM
  > To: Lucene Users List
  > Subject: setting Similarity at search time
  >=20
  > Hi,
  >=20
  > Is there a way to set the Similarity at search(...) time, rather
than
  > just setting it on the (Index)Searcher object itself?  I'd like to
be
  > able to specify different similarities in different threads
searching
  > concurrently, using the same IndexSearcher instance.
  >=20
  > In my use case, the choice of Similarity is a parameter of the
search
  > request, and hence may be different for each request.
  >=20
  > Can such a method be added to override the search(...) method?
  >=20
  > Thanks,
  > -Ken
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11246-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 21:27:04 2004
Return-Path: <lucene-user-return-11246-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91189 invoked from network); 15 Nov 2004 21:27:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 21:27:04 -0000
Received: (qmail 14516 invoked by uid 500); 15 Nov 2004 21:27:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14493 invoked by uid 500); 15 Nov 2004 21:27:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14479 invoked by uid 99); 15 Nov 2004 21:27:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [209.10.150.70] (HELO admin01-nyc.clicvu.com) (209.10.150.70)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 13:26:57 -0800
Received: from smtp.clicvu.com ([192.168.0.72]) by admin01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with ESMTP id com for <lucene-user@jakarta.apache.org>;
          Mon, 15 Nov 2004 16:24:03 -0500
Content-type: text/plain
Date: Mon, 15 Nov 2004 16:21:26 -0500
From: roy-lucene-user@xemaps.com
Subject: lock file paths
To: lucene-user@jakarta.apache.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hey guys,

Quick question... is there a way to get the file paths to the lock files?  Or do I have to modify the src?  Currently I can't find any methods that will return a lock's file path.

Roy.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11247-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 21:46:30 2004
Return-Path: <lucene-user-return-11247-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99642 invoked from network); 15 Nov 2004 21:46:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 21:46:30 -0000
Received: (qmail 54641 invoked by uid 500); 15 Nov 2004 21:46:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54607 invoked by uid 500); 15 Nov 2004 21:46:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54594 invoked by uid 99); 15 Nov 2004 21:46:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [192.18.98.36] (HELO brmea-mail-4.sun.com) (192.18.98.36)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 13:46:21 -0800
Received: from phys-d3-ha21sca-1 ([129.145.155.163])
	by brmea-mail-4.sun.com (8.12.10/8.12.9) with ESMTP id iAFLkINH007302
	for <lucene-user@jakarta.apache.org>; Mon, 15 Nov 2004 14:46:18 -0700 (MST)
Received: from conversion-daemon.ha21sca-mail1.sfbay.sun.com by
 ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 id <0I7800H01POECB@ha21sca-mail1.sfbay.sun.com>
 (original mail from Hetan.Shah@Sun.COM) for lucene-user@jakarta.apache.org;
 Mon, 15 Nov 2004 13:46:17 -0800 (PST)
Received: from [127.0.0.1] (d-mpk24-41-157.SFBay.Sun.COM [129.146.41.157])
 by ha21sca-mail1.sfbay.sun.com
 (iPlanet Messaging Server 5.2 HotFix 1.24 (built Dec 19 2003))
 with ESMTP id <0I78007ZJPSWT5@ha21sca-mail1.sfbay.sun.com> for
 lucene-user@jakarta.apache.org; Mon, 15 Nov 2004 13:46:17 -0800 (PST)
Date: Mon, 15 Nov 2004 13:45:41 -0800
From: Hetan Shah <Hetan.Shah@Sun.COM>
Subject: Incremental Indexing
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id: <41992385.1070403@sun.com>
MIME-version: 1.0
Content-type: text/plain; charset=us-ascii; format=flowed
Content-transfer-encoding: 7BIT
X-Accept-Language: en-us, en
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7)
 Gecko/20040616
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello All,

Is it possible to index the documents in incremental fashion. What I 
mean by this is, update the document in the index only if it has changed 
since last time it was indexed. This can save considerable amount of 
time while indexing.

Any pointers are appreciated.
-H


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11248-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 21:51:19 2004
Return-Path: <lucene-user-return-11248-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2549 invoked from network); 15 Nov 2004 21:51:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 21:51:19 -0000
Received: (qmail 69282 invoked by uid 500); 15 Nov 2004 21:51:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69260 invoked by uid 500); 15 Nov 2004 21:51:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69239 invoked by uid 99); 15 Nov 2004 21:51:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 13:51:11 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Mon, 15 Nov 2004 16:51:43 -0500
Message-ID: <082101c4cb5d$4b98d200$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <41992385.1070403@sun.com>
Subject: Re: Incremental Indexing
Date: Mon, 15 Nov 2004 16:51:43 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 15 Nov 2004 21:51:43.0813 (UTC) FILETIME=[4BD90F50:01C4CB5D]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Take a peak at IndexHTML.java in the demo that ships with Lucene. It
performs an incremental update as you have described.

----- Original Message ----- 
From: "Hetan Shah" <Hetan.Shah@Sun.COM>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, November 15, 2004 4:45 PM
Subject: Incremental Indexing


> Hello All,
>
> Is it possible to index the documents in incremental fashion. What I
> mean by this is, update the document in the index only if it has changed
> since last time it was indexed. This can save considerable amount of
> time while indexing.
>
> Any pointers are appreciated.
> -H
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11249-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 22:01:49 2004
Return-Path: <lucene-user-return-11249-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7374 invoked from network); 15 Nov 2004 22:01:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 22:01:49 -0000
Received: (qmail 2525 invoked by uid 500); 15 Nov 2004 22:01:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2473 invoked by uid 500); 15 Nov 2004 22:01:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2401 invoked by uid 99); 15 Nov 2004 22:01:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 14:01:32 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iAFM1RJ27532
	for <lucene-user@jakarta.apache.org>; Mon, 15 Nov 2004 16:01:27 -0600 (CST)
Subject: Re: Lucene : avoiding locking (incremental indexing)
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <abd3dcabee00.abee00abd3dc@optonline.net>
References: <abd3dcabee00.abee00abd3dc@optonline.net>
Content-Type: text/plain
Message-Id: <1100556077.11925.33.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Mon, 15 Nov 2004 16:01:17 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This is how I implemented incremental indexing. If anyone sees anything
wrong, please let me know.

Our motivation is similar to John Eichel's. We have a digital asset
management system and when users update, delete or create a new asset,
they need to see their results immediately.

The most important thing to know about incremental indexing that
multiple threads cannot share the same IndexWriter, and only one
IndexWriter can be open on an index at a time.

Therefore, what I did was control access to the IndexWriter through a
singleton wrapper class that synchronizes access to the IndexWriter and
IndexReader (for deletes). After finishing writing to the index, you
must close the IndexWriter to flush the changes to the index.

If you do this you will be fine.

However, opening and closing the index takes time so we had to look for
some ways to speed up the indexing.

The most obvious thing is that you should do as much work as possible
outside of the synchronized block. For example, in my application, the
creation of Lucene Document objects is not synchronized. Only the part
of the code that is between your IndexWriter.open() and
IndexWriter.close() needs to be synchronized.

The other easy thing I did to improve performance was batch changes in a
transaction together for indexing. If a user changes 50 assets, that
will all be indexed using one Lucene IndexWriter.

So far, we haven't had to explore further performance enhancements, but
if we do the next thing I will do is create a thread that gathers assets
that need to be indexed and performs a batch job every five minutes or
so.

Hope this is helpful,
Luke


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11250-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 22:02:05 2004
Return-Path: <lucene-user-return-11250-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7794 invoked from network); 15 Nov 2004 22:02:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 22:02:05 -0000
Received: (qmail 5159 invoked by uid 500); 15 Nov 2004 22:01:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5107 invoked by uid 500); 15 Nov 2004 22:01:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5066 invoked by uid 99); 15 Nov 2004 22:01:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [216.54.180.10] (HELO htexc.hq.htinc.com) (216.54.180.10)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 14:01:51 -0800
X-MIMEOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: IndexSearcher Refresh
Date: Mon, 15 Nov 2004 17:01:40 -0500
Message-ID: <4568BE33B520DD43B7B24DE0B609B215522F62@htexc.hq.htinc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexSearcher Refresh
Thread-Index: AcTLXT3arb5LD9MUSfW0sWYfo1O50QAATl2w
From: "Ravi" <ravi@htinc.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Is there a way to refresh the IndexSearcher object with the newly added
documents to the index instead of creating a new object?=20

Thanks in advance,
Ravi.=20


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11251-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 22:11:20 2004
Return-Path: <lucene-user-return-11251-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12588 invoked from network); 15 Nov 2004 22:11:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 22:11:20 -0000
Received: (qmail 21689 invoked by uid 500); 15 Nov 2004 22:11:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21233 invoked by uid 500); 15 Nov 2004 22:11:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21219 invoked by uid 99); 15 Nov 2004 22:11:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 14:11:03 -0800
Received: from ifit.uni-klu.ac.at ([143.205.246.239]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Mon, 15 Nov 2004 23:10:57 +0100
Message-ID: <419929F3.2080703@ifit.uni-klu.ac.at>
Date: Mon, 15 Nov 2004 23:13:07 +0100
From: Sergiu Gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.5) Gecko/20031007
X-Accept-Language: de-at, en, ro, it, en-us
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Incremental Indexing
References: <41992385.1070403@sun.com>
In-Reply-To: <41992385.1070403@sun.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 15 Nov 2004 22:10:58.0092 (UTC) FILETIME=[FBDA0EC0:01C4CB5F]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hetan Shah wrote:

> Hello All,
>
> Is it possible to index the documents in incremental fashion. What I 
> mean by this is, update the document in the index only if it has 
> changed since last time it was indexed. This can save considerable 
> amount of time while indexing.
>
Sure .. but I'm affraid you have to implement your isChanged() method 
yourself ...
This might application specific function anyway.

 Sergiu

> Any pointers are appreciated.
> -H
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11252-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 22:14:03 2004
Return-Path: <lucene-user-return-11252-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13451 invoked from network); 15 Nov 2004 22:14:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 22:14:03 -0000
Received: (qmail 24161 invoked by uid 500); 15 Nov 2004 22:13:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24136 invoked by uid 500); 15 Nov 2004 22:13:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24116 invoked by uid 99); 15 Nov 2004 22:13:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 14:13:48 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Mon, 15 Nov 2004 17:14:20 -0500
Message-ID: <082901c4cb60$74235cb0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <abd3dcabee00.abee00abd3dc@optonline.net> <1100556077.11925.33.camel@localhost>
Subject: Re: Lucene : avoiding locking (incremental indexing)
Date: Mon, 15 Nov 2004 17:14:19 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 15 Nov 2004 22:14:20.0219 (UTC) FILETIME=[745430B0:01C4CB60]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Luke;

I have a similar system (except people don't need to see results
immediatly). The approach I took is a little different.

I made my Indexer a thread with the indexing operations occuring the in run
method. When the IndexWriter is to be created or the IndexReader needs to
execute a delete I called the following method:

private void manageIndexLock() {
  try {
   //check if the index is locked and deal with it if it is
   if (index.exists() && IndexReader.isLocked(indexFileLocation)) {
    System.out.println("INDEXING INFO: There is more than one process trying
to write to the index folder. Will wait for index to become available.");
    //perform this loop until the lock if released or 3 mins
    // has expired
    int indexChecks = 0;
    while (IndexReader.isLocked(indexFileLocation)
      && indexChecks < 6) {
     //increment the number of times we check the index
     // files
     indexChecks++;
     try {
      //sleep for 30 seconds
      Thread.sleep(30000L);
     } catch (InterruptedException e2) {
      System.out.println("INDEX ERROR: There was a problem waiting for the
lock to release. "
          + e2.getMessage());
     }
    }//closes the while loop for checking on the index
    // directory
    //if we are still locked we need to do something about it
    if (IndexReader.isLocked(indexFileLocation)) {
     System.out.println("INDEXING INFO: Index Locked After 3 minute of
waiting. Forcefully releasing lock.");
     IndexReader.unlock(FSDirectory.getDirectory(index, false));
     System.out.println("INDEXING INFO: Index lock released");
    }//close the if that actually releases the lock
   }//close the if ensure the file exists
  }//closes the try for all the above operations
  catch (IOException e1) {
   System.out.println("INDEX ERROR: There was a problem waiting for the lock
to release. "
       + e1.getMessage());
  }
 }//close the manageIndexLock method

Do you think this is a bad approach?

Luke

----- Original Message ----- 
From: "Luke Francl" <luke.francl@stellent.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, November 15, 2004 5:01 PM
Subject: Re: Lucene : avoiding locking (incremental indexing)


> This is how I implemented incremental indexing. If anyone sees anything
> wrong, please let me know.
>
> Our motivation is similar to John Eichel's. We have a digital asset
> management system and when users update, delete or create a new asset,
> they need to see their results immediately.
>
> The most important thing to know about incremental indexing that
> multiple threads cannot share the same IndexWriter, and only one
> IndexWriter can be open on an index at a time.
>
> Therefore, what I did was control access to the IndexWriter through a
> singleton wrapper class that synchronizes access to the IndexWriter and
> IndexReader (for deletes). After finishing writing to the index, you
> must close the IndexWriter to flush the changes to the index.
>
> If you do this you will be fine.
>
> However, opening and closing the index takes time so we had to look for
> some ways to speed up the indexing.
>
> The most obvious thing is that you should do as much work as possible
> outside of the synchronized block. For example, in my application, the
> creation of Lucene Document objects is not synchronized. Only the part
> of the code that is between your IndexWriter.open() and
> IndexWriter.close() needs to be synchronized.
>
> The other easy thing I did to improve performance was batch changes in a
> transaction together for indexing. If a user changes 50 assets, that
> will all be indexed using one Lucene IndexWriter.
>
> So far, we haven't had to explore further performance enhancements, but
> if we do the next thing I will do is create a thread that gathers assets
> that need to be indexed and performs a batch job every five minutes or
> so.
>
> Hope this is helpful,
> Luke
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11253-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 22:46:19 2004
Return-Path: <lucene-user-return-11253-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31495 invoked from network); 15 Nov 2004 22:46:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 22:46:19 -0000
Received: (qmail 88000 invoked by uid 500); 15 Nov 2004 22:46:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 87975 invoked by uid 500); 15 Nov 2004 22:46:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 87960 invoked by uid 99); 15 Nov 2004 22:46:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 14:46:10 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iAFMk5J28565
	for <lucene-user@jakarta.apache.org>; Mon, 15 Nov 2004 16:46:05 -0600 (CST)
Subject: Understanding TooManyClauses-Exception and Query-RAM-size
From: Luke Francl <luke.francl@stellent.com>
To: lucene-user@jakarta.apache.org
Content-Type: text/plain
Message-Id: <1100558752.11925.48.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Mon, 15 Nov 2004 16:45:52 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

In a July 2004 message
(http://issues.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apache.org&msgId=1757461
but the list archives seem to be down right now), Martin Stein quoted
Doug Cutting as giving this formula to estimate the amount of memory
consumed by a query:

1 byte * Number of searchable fields in your index * Number of docs in
your index

plus

1k bytes * number of terms in query

plus

1k bytes * number of phrase terms in query

I'm adding some features to LIMO, and query RAM estimation is one of
them.

However, I'm not quite sure about how to calculate the first term in
this formula. I'm calculating the memory used recursively. Does the
first part apply to every Query object, or only to the entire Query
structure?

For example, with a query like "foo" on an index with 10 fields and 1000
documents, the memory used would = 1*10*1000 + 1024*1 = 11024.
But for the query "foo +(bar baz)" do you include number_of_fields *
number_of_documents part for each term in the query? Or just for the
entire thing?

Thanks,
Luke Francl


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11254-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 22:53:31 2004
Return-Path: <lucene-user-return-11254-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39803 invoked from network); 15 Nov 2004 22:53:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 22:53:31 -0000
Received: (qmail 98326 invoked by uid 500); 15 Nov 2004 22:53:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98303 invoked by uid 500); 15 Nov 2004 22:53:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98290 invoked by uid 99); 15 Nov 2004 22:53:24 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST,FORGED_RCVD_HELO,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [167.206.5.69] (HELO mta3.srv.hcvlny.cv.net) (167.206.5.69)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 14:53:20 -0800
Received: from optonline.net (hamstr5.srv.hcvlny.cv.net [167.206.5.17])
 by mta3.srv.hcvlny.cv.net
 (iPlanet Messaging Server 5.2 HotFix 1.25 (built Mar  3 2004))
 with ESMTP id <0I7800HI4SSV29@mta3.srv.hcvlny.cv.net> for
 lucene-user@jakarta.apache.org; Mon, 15 Nov 2004 17:50:56 -0500 (EST)
Received: from [167.206.5.47] (Forwarded-For: [68.192.172.208])
 by mstr5.srv.hcvlny.cv.net (mshttpd); Mon, 15 Nov 2004 17:50:55 -0500
Date: Mon, 15 Nov 2004 17:50:55 -0500
From: jeichels@optonline.net
Subject: Re: Lucene : avoiding locking (incremental indexing)
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id: <a5bd72a5ea4e.a5ea4ea5bd72@optonline.net>
MIME-version: 1.0
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.25 (built Mar  3 2004)
Content-type: text/plain; charset=us-ascii
Content-language: en
Content-transfer-encoding: 7BIT
Content-disposition: inline
X-Accept-Language: en
Priority: normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It really seems like I am not the only person having this issue.

So far I am seeing 2 solutions and honestly I don't love either totally.  I am thinking that without changes to Lucene itself, the best "general" way to implement this might be to have a queue of changes and have Lucene work off this queue in a single thread using a time-settable batch method.   This is similar to what you are using below, but I don't like that you forcibly unlock Lucene if it shows itself locked.   Using the Queue approach, only that one thread could be accessing Lucene for writes/deletes anyway so there should be no "unknown" locking.

I can imagine this being a very good addition to Lucene - creating a high level interface to Lucene that manages incremental updates in such a manner.  If anybody has such a general piece of code, please post it!!!   I would use it tonight rather then create my own.

I am not sure if there is anything that can be done to Lucene itself to help with this need people seem to be having.  I realize the likely reasons why Lucene might need to only have one Index writer and the additional load that might be caused by locking off pieces of the database rather then the whole database.  I think I need to look in the developer archives.

JohnE



----- Original Message -----
From: Luke Shannon <lshannon@hypermedia.com>
Date: Monday, November 15, 2004 5:14 pm
Subject: Re: Lucene : avoiding locking (incremental indexing)

> Hi Luke;
> 
> I have a similar system (except people don't need to see results
> immediatly). The approach I took is a little different.
> 
> I made my Indexer a thread with the indexing operations occuring 
> the in run
> method. When the IndexWriter is to be created or the IndexReader 
> needs to
> execute a delete I called the following method:
> 
> private void manageIndexLock() {
>  try {
>   //check if the index is locked and deal with it if it is
>   if (index.exists() && IndexReader.isLocked(indexFileLocation)) {
>    System.out.println("INDEXING INFO: There is more than one 
> process trying
> to write to the index folder. Will wait for index to become 
> available.");    //perform this loop until the lock if released or 
> 3 mins
>    // has expired
>    int indexChecks = 0;
>    while (IndexReader.isLocked(indexFileLocation)
>      && indexChecks < 6) {
>     //increment the number of times we check the index
>     // files
>     indexChecks++;
>     try {
>      //sleep for 30 seconds
>      Thread.sleep(30000L);
>     } catch (InterruptedException e2) {
>      System.out.println("INDEX ERROR: There was a problem waiting 
> for the
> lock to release. "
>          + e2.getMessage());
>     }
>    }//closes the while loop for checking on the index
>    // directory
>    //if we are still locked we need to do something about it
>    if (IndexReader.isLocked(indexFileLocation)) {
>     System.out.println("INDEXING INFO: Index Locked After 3 
> minute of
> waiting. Forcefully releasing lock.");
>     IndexReader.unlock(FSDirectory.getDirectory(index, false));
>     System.out.println("INDEXING INFO: Index lock released");
>    }//close the if that actually releases the lock
>   }//close the if ensure the file exists
>  }//closes the try for all the above operations
>  catch (IOException e1) {
>   System.out.println("INDEX ERROR: There was a problem waiting 
> for the lock
> to release. "
>       + e1.getMessage());
>  }
> }//close the manageIndexLock method
> 
> Do you think this is a bad approach?
> 
> Luke
> 
> ----- Original Message ----- 
> From: "Luke Francl" <luke.francl@stellent.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Monday, November 15, 2004 5:01 PM
> Subject: Re: Lucene : avoiding locking (incremental indexing)
> 
> 
> > This is how I implemented incremental indexing. If anyone sees 
> anything> wrong, please let me know.
> >
> > Our motivation is similar to John Eichel's. We have a digital asset
> > management system and when users update, delete or create a new 
> asset,> they need to see their results immediately.
> >
> > The most important thing to know about incremental indexing that
> > multiple threads cannot share the same IndexWriter, and only one
> > IndexWriter can be open on an index at a time.
> >
> > Therefore, what I did was control access to the IndexWriter 
> through a
> > singleton wrapper class that synchronizes access to the 
> IndexWriter and
> > IndexReader (for deletes). After finishing writing to the index, you
> > must close the IndexWriter to flush the changes to the index.
> >
> > If you do this you will be fine.
> >
> > However, opening and closing the index takes time so we had to 
> look for
> > some ways to speed up the indexing.
> >
> > The most obvious thing is that you should do as much work as 
> possible> outside of the synchronized block. For example, in my 
> application, the
> > creation of Lucene Document objects is not synchronized. Only 
> the part
> > of the code that is between your IndexWriter.open() and
> > IndexWriter.close() needs to be synchronized.
> >
> > The other easy thing I did to improve performance was batch 
> changes in a
> > transaction together for indexing. If a user changes 50 assets, that
> > will all be indexed using one Lucene IndexWriter.
> >
> > So far, we haven't had to explore further performance 
> enhancements, but
> > if we do the next thing I will do is create a thread that 
> gathers assets
> > that need to be indexed and performs a batch job every five 
> minutes or
> > so.
> >
> > Hope this is helpful,
> > Luke
> >
> >
> > -----------------------------------------------------------------
> ----
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> 
> 
> 
> -------------------------------------------------------------------
> --
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11255-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 23:03:09 2004
Return-Path: <lucene-user-return-11255-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48395 invoked from network); 15 Nov 2004 23:03:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 23:03:09 -0000
Received: (qmail 14294 invoked by uid 500); 15 Nov 2004 23:03:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 13740 invoked by uid 500); 15 Nov 2004 23:03:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13725 invoked by uid 99); 15 Nov 2004 23:03:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 15:03:03 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iAFN2wJ28948
	for <lucene-user@jakarta.apache.org>; Mon, 15 Nov 2004 17:02:58 -0600 (CST)
Subject: Re: Lucene : avoiding locking (incremental indexing)
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <a5bd72a5ea4e.a5ea4ea5bd72@optonline.net>
References: <a5bd72a5ea4e.a5ea4ea5bd72@optonline.net>
Content-Type: text/plain
Message-Id: <1100559767.11925.53.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Mon, 15 Nov 2004 17:02:47 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Mon, 2004-11-15 at 16:50, jeichels@optonline.net wrote:
> So far I am seeing 2 solutions and honestly I don't love either totally.  I am thinking that without changes to Lucene itself, the best "general" way to implement this might be to have a queue of changes and have Lucene work off this queue in a single thread using a time-settable batch method.   This is similar to what you are using below, but I don't like that you forcibly unlock Lucene if it shows itself locked.   Using the Queue approach, only that one thread could be accessing Lucene for writes/deletes anyway so there should be no "unknown" locking.

I forgot one aspect of my implementation that has implications for this
scheme: additions to the index don't show up until you call
IndexWriter.close(). There's no flush() method, so in your queue, you'd
need to open and close the IndexWriter when it was time to write the
changes to the index.

Luke


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11256-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 15 23:10:54 2004
Return-Path: <lucene-user-return-11256-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 51556 invoked from network); 15 Nov 2004 23:10:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 15 Nov 2004 23:10:54 -0000
Received: (qmail 25645 invoked by uid 500); 15 Nov 2004 23:10:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25625 invoked by uid 500); 15 Nov 2004 23:10:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25612 invoked by uid 99); 15 Nov 2004 23:10:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 15:10:45 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Mon, 15 Nov 2004 18:11:17 -0500
Message-ID: <084401c4cb68$693ab930$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <a5bd72a5ea4e.a5ea4ea5bd72@optonline.net>
Subject: Re: Lucene : avoiding locking (incremental indexing)
Date: Mon, 15 Nov 2004 18:11:17 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 15 Nov 2004 23:11:17.0319 (UTC) FILETIME=[69144570:01C4CB68]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I like the sound of the Queue approach.  I also don't like that I have to
focefully unlock the index.

I'm not the most experience programmer and am on a tight deadline. The
approach I ended up with was the best I could do with the experience I've
got and the time I had.

My indexer works so far and doesn't have to forcefully release the lock on
the Index too often (the case is most likely to occur when someone removes a
content file(s) and the reader needs to delete from the existing index for
the first time). We will see what happens as more people use the system with
large content directories.

As I learn more I plan to expand the functionality of my class.

Luke S

----- Original Message ----- 
From: <jeichels@optonline.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, November 15, 2004 5:50 PM
Subject: Re: Lucene : avoiding locking (incremental indexing)


> It really seems like I am not the only person having this issue.
>
> So far I am seeing 2 solutions and honestly I don't love either totally.
I am thinking that without changes to Lucene itself, the best "general" way
to implement this might be to have a queue of changes and have Lucene work
off this queue in a single thread using a time-settable batch method.   This
is similar to what you are using below, but I don't like that you forcibly
unlock Lucene if it shows itself locked.   Using the Queue approach, only
that one thread could be accessing Lucene for writes/deletes anyway so there
should be no "unknown" locking.
>
> I can imagine this being a very good addition to Lucene - creating a high
level interface to Lucene that manages incremental updates in such a manner.
If anybody has such a general piece of code, please post it!!!   I would use
it tonight rather then create my own.
>
> I am not sure if there is anything that can be done to Lucene itself to
help with this need people seem to be having.  I realize the likely reasons
why Lucene might need to only have one Index writer and the additional load
that might be caused by locking off pieces of the database rather then the
whole database.  I think I need to look in the developer archives.
>
> JohnE
>
>
>
> ----- Original Message -----
> From: Luke Shannon <lshannon@hypermedia.com>
> Date: Monday, November 15, 2004 5:14 pm
> Subject: Re: Lucene : avoiding locking (incremental indexing)
>
> > Hi Luke;
> >
> > I have a similar system (except people don't need to see results
> > immediatly). The approach I took is a little different.
> >
> > I made my Indexer a thread with the indexing operations occuring
> > the in run
> > method. When the IndexWriter is to be created or the IndexReader
> > needs to
> > execute a delete I called the following method:
> >
> > private void manageIndexLock() {
> >  try {
> >   //check if the index is locked and deal with it if it is
> >   if (index.exists() && IndexReader.isLocked(indexFileLocation)) {
> >    System.out.println("INDEXING INFO: There is more than one
> > process trying
> > to write to the index folder. Will wait for index to become
> > available.");    //perform this loop until the lock if released or
> > 3 mins
> >    // has expired
> >    int indexChecks = 0;
> >    while (IndexReader.isLocked(indexFileLocation)
> >      && indexChecks < 6) {
> >     //increment the number of times we check the index
> >     // files
> >     indexChecks++;
> >     try {
> >      //sleep for 30 seconds
> >      Thread.sleep(30000L);
> >     } catch (InterruptedException e2) {
> >      System.out.println("INDEX ERROR: There was a problem waiting
> > for the
> > lock to release. "
> >          + e2.getMessage());
> >     }
> >    }//closes the while loop for checking on the index
> >    // directory
> >    //if we are still locked we need to do something about it
> >    if (IndexReader.isLocked(indexFileLocation)) {
> >     System.out.println("INDEXING INFO: Index Locked After 3
> > minute of
> > waiting. Forcefully releasing lock.");
> >     IndexReader.unlock(FSDirectory.getDirectory(index, false));
> >     System.out.println("INDEXING INFO: Index lock released");
> >    }//close the if that actually releases the lock
> >   }//close the if ensure the file exists
> >  }//closes the try for all the above operations
> >  catch (IOException e1) {
> >   System.out.println("INDEX ERROR: There was a problem waiting
> > for the lock
> > to release. "
> >       + e1.getMessage());
> >  }
> > }//close the manageIndexLock method
> >
> > Do you think this is a bad approach?
> >
> > Luke
> >
> > ----- Original Message ----- 
> > From: "Luke Francl" <luke.francl@stellent.com>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Monday, November 15, 2004 5:01 PM
> > Subject: Re: Lucene : avoiding locking (incremental indexing)
> >
> >
> > > This is how I implemented incremental indexing. If anyone sees
> > anything> wrong, please let me know.
> > >
> > > Our motivation is similar to John Eichel's. We have a digital asset
> > > management system and when users update, delete or create a new
> > asset,> they need to see their results immediately.
> > >
> > > The most important thing to know about incremental indexing that
> > > multiple threads cannot share the same IndexWriter, and only one
> > > IndexWriter can be open on an index at a time.
> > >
> > > Therefore, what I did was control access to the IndexWriter
> > through a
> > > singleton wrapper class that synchronizes access to the
> > IndexWriter and
> > > IndexReader (for deletes). After finishing writing to the index, you
> > > must close the IndexWriter to flush the changes to the index.
> > >
> > > If you do this you will be fine.
> > >
> > > However, opening and closing the index takes time so we had to
> > look for
> > > some ways to speed up the indexing.
> > >
> > > The most obvious thing is that you should do as much work as
> > possible> outside of the synchronized block. For example, in my
> > application, the
> > > creation of Lucene Document objects is not synchronized. Only
> > the part
> > > of the code that is between your IndexWriter.open() and
> > > IndexWriter.close() needs to be synchronized.
> > >
> > > The other easy thing I did to improve performance was batch
> > changes in a
> > > transaction together for indexing. If a user changes 50 assets, that
> > > will all be indexed using one Lucene IndexWriter.
> > >
> > > So far, we haven't had to explore further performance
> > enhancements, but
> > > if we do the next thing I will do is create a thread that
> > gathers assets
> > > that need to be indexed and performs a batch job every five
> > minutes or
> > > so.
> > >
> > > Hope this is helpful,
> > > Luke
> > >
> > >
> > > -----------------------------------------------------------------
> > ----
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > >
> > >
> >
> >
> >
> > -------------------------------------------------------------------
> > --
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11257-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 00:45:07 2004
Return-Path: <lucene-user-return-11257-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88088 invoked from network); 16 Nov 2004 00:45:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 00:45:06 -0000
Received: (qmail 60683 invoked by uid 500); 16 Nov 2004 00:45:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60652 invoked by uid 500); 16 Nov 2004 00:45:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60638 invoked by uid 99); 16 Nov 2004 00:45:00 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of janssen@parc.com designates 13.1.64.93 as permitted sender)
Received: from [13.1.64.93] (HELO alpha.xerox.com) (13.1.64.93)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 15 Nov 2004 16:44:57 -0800
Received: from synergy1.parc.xerox.com ([13.1.101.60]) by alpha.xerox.com with SMTP id <218909(2)>; Mon, 15 Nov 2004 16:44:41 PST
Received: from parc.com ([127.0.0.1]) by synergy1.parc.xerox.com with SMTP id <58617>; Mon, 15 Nov 2004 16:44:32 PST
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: new version of NewMultiFieldQueryParser 
In-Reply-To: Your message of "Fri, 29 Oct 2004 15:15:44 PDT."
             <200410300015.44117@danielnaber.de> 
Date: Mon, 15 Nov 2004 16:44:28 PST
From: Bill Janssen <janssen@parc.com>
Message-Id: <04Nov15.164432pst."58617"@synergy1.parc.xerox.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

That's right, the new version (the one that overrode getFieldQuery())
wasn't a good idea.  The current version on ftp.parc.xerox.com yields:

% javac -classpath .:/import/lucene/lucene-1.4.1.jar SearchTest.java 
% java -classpath .:/import/lucene/lucene-1.4.1.jar SearchTest '+gut* +test'
query is +(title:gut* authors:gut* contents:gut*) +(title:test authors:test contents:test)
% 

This is "the old version that doesn't implement getFieldQuery()."

Bill

> On Friday 29 October 2004 20:42, Bill Janssen wrote:
> 
> > Try running the program at
> > ftp://ftp.parc.xerox.com/transient/janssen/SearchTest.java, and see
> > how that works for you. Seems to work fine with Java 1.4.2 and Luce=
> ne
> > 1.4.1, for me.
> 
> That seems to be the old version that doesn't implement getFieldQuery. The=
>  
> new version (which you pasted in an email on 2004-10-27) doesn't seem to 
> work with e.g. prefix queries. I call it like this:
> 
>     String[] fields = new String[2];
>     fields[0] = "title";
>     fields[1] = "body";
>     NewMultiFieldQueryParser qp = new NewMultiFieldQueryParser(fields, new
>         WhitespaceAnalyzer());
>     Query q = qp.parse("+gut* +test");
>     System.out.println(q);  
> 
> I get:
> 
> +%%:gut* +(title:test body:test)
> 
> Or am I mixing up the versions?
> 
> Regards
>  Daniel
> 
> -- 
> http://www.danielnaber.de
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11258-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 00:50:37 2004
Return-Path: <lucene-user-return-11258-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89788 invoked from network); 16 Nov 2004 00:50:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 00:50:37 -0000
Received: (qmail 67826 invoked by uid 500); 16 Nov 2004 00:50:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67803 invoked by uid 500); 16 Nov 2004 00:50:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67789 invoked by uid 99); 16 Nov 2004 00:50:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.111.107.196] (HELO mail.fulfilnet.com.au) (203.111.107.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 16:50:30 -0800
Message-Id: <200411160047.iAG0leh06994@mail.fulfilnet.com.au>
From: "Anson Lau" <alau@fulfil-net.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: cost of proximity question
Date: Tue, 16 Nov 2004 11:51:43 +1100
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

Does anyone know what's the performance cost of a Nutch like proximity query
that looks like this: (+Hello +World +\"Hello world\"~p^a)x  ?  or just how
in general how much processing does proximity add to a query?

Thanks,
Anson




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11259-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 01:25:28 2004
Return-Path: <lucene-user-return-11259-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2653 invoked from network); 16 Nov 2004 01:25:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 01:25:28 -0000
Received: (qmail 14067 invoked by uid 500); 16 Nov 2004 01:25:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14047 invoked by uid 500); 16 Nov 2004 01:25:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14034 invoked by uid 99); 16 Nov 2004 01:25:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.141.132.41] (HELO ml.worldsoftware.co.jp) (203.141.132.41)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 17:25:21 -0800
Received: from satoshiobtu4n6 (zaku.worldsoftware.co.jp [192.168.55.6])
	by ml.worldsoftware.co.jp (Postfix) with SMTP id 0DCA076399
	for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 10:25:08 +0900 (JST)
Message-ID: <001f01c4cb7b$1e0868a0$32e0fcca@satoshiobtu4n6>
From: "Satoshi Hasegawa" <hasegawa@p03.worldsoftware.co.jp>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Is opening IndexReader multiple times safe?
Date: Tue, 16 Nov 2004 10:25:11 +0900
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-2022-jp";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

I need to handle IOExceptions that arise from index access 
(IndexReader#open, #delete, IndexWriter#optimize etc.), and I'm not sure if 
the IndexReader is open when the exception is thrown/caught. Specifically, 
my code is as follows.

        try {
            indexReader.delete(term);
            indexReader.close();
            IndexWriter indexWriter = new IndexWriter(fsDirectory,
                    new JapaneseAnalyzer(), false);
            indexWriter.optimize();
            indexWriter.close();
        } catch (Exception e) {
            // IndexReader may or may not be open
            indexReader = IndexReader.open(path);
            indexReader.undelete();
        }

Is the above code safe? IndexReader may already be open at the beginning of 
the catch clause if the exception was thrown before closing the IndexReader.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11260-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 02:45:04 2004
Return-Path: <lucene-user-return-11260-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37222 invoked from network); 16 Nov 2004 02:45:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 02:45:03 -0000
Received: (qmail 5876 invoked by uid 500); 16 Nov 2004 02:44:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5844 invoked by uid 500); 16 Nov 2004 02:44:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5830 invoked by uid 99); 16 Nov 2004 02:44:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 18:44:47 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Mon, 15 Nov 2004 21:45:17 -0500
Message-ID: <088b01c4cb86$4e56bce0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <001f01c4cb7b$1e0868a0$32e0fcca@satoshiobtu4n6>
Subject: Re: Is opening IndexReader multiple times safe?
Date: Mon, 15 Nov 2004 21:45:17 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-2022-jp"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 16 Nov 2004 02:45:17.0221 (UTC) FILETIME=[4E41D550:01C4CB86]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Satoshi;

I troubled shooted a problem similar to this by moving around a
IndexReader.isLocked(indexFileLocation) to determine exactly when the reader
was closed.

Note: the method throws an error if the index file doesn't exist that you
are checking on.

Luke

----- Original Message ----- 
From: "Satoshi Hasegawa" <hasegawa@p03.worldsoftware.co.jp>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, November 15, 2004 8:25 PM
Subject: Is opening IndexReader multiple times safe?


> Hello,
>
> I need to handle IOExceptions that arise from index access
> (IndexReader#open, #delete, IndexWriter#optimize etc.), and I'm not sure
if
> the IndexReader is open when the exception is thrown/caught. Specifically,
> my code is as follows.
>
>         try {
>             indexReader.delete(term);
>             indexReader.close();
>             IndexWriter indexWriter = new IndexWriter(fsDirectory,
>                     new JapaneseAnalyzer(), false);
>             indexWriter.optimize();
>             indexWriter.close();
>         } catch (Exception e) {
>             // IndexReader may or may not be open
>             indexReader = IndexReader.open(path);
>             indexReader.undelete();
>         }
>
> Is the above code safe? IndexReader may already be open at the beginning
of
> the catch clause if the exception was thrown before closing the
IndexReader.
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11261-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 07:28:48 2004
Return-Path: <lucene-user-return-11261-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 42962 invoked from network); 16 Nov 2004 07:28:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 07:28:47 -0000
Received: (qmail 51594 invoked by uid 500); 16 Nov 2004 07:28:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51572 invoked by uid 500); 16 Nov 2004 07:28:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51557 invoked by uid 99); 16 Nov 2004 07:28:42 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 15 Nov 2004 23:28:38 -0800
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 16 Nov 2004 08:28:31 +0100
Message-ID: <4199AC1F.6050200@ifit.uni-klu.ac.at>
Date: Tue, 16 Nov 2004 08:28:31 +0100
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Lucene : avoiding locking (incremental indexing)
References: <a5bd72a5ea4e.a5ea4ea5bd72@optonline.net> <084401c4cb68$693ab930$7703d00a@hypermedia.com>
In-Reply-To: <084401c4cb68$693ab930$7703d00a@hypermedia.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 16 Nov 2004 07:28:31.0523 (UTC) FILETIME=[DFA68730:01C4CBAD]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Luke Shannon wrote:

>I like the sound of the Queue approach.  I also don't like that I have to
>focefully unlock the index.
>  
>
Personally I don't like the Queue aproach... because I already 
implemented multithreading in out application
to improve its performance. In our application indexing is not a high 
priority, but it's happening quite often.
Search is a priority.

Lucene allows to have more searches at on time. When you have a big 
index and a many users then ...
the Queue aproach can slow down your application to much. I think it 
will be a bottleneck.

I know that the lock problem is annoying, but I also think that the 
right way is to identify the source of locking.
Our application is a webbased application based on turbine, and when we 
want to restart tomcat, we just kill
the process (otherwise we need to restart 2 times because of some log4j 
initialization problem), so ...
the index is locked after the tomcat restart. In my case it makes sense 
to check if index is locked one time at
startup. I'm also logging all errors that I get in the systems, this is 
helping me to find their sourcce easier.

 All the best,

 Sergiu

>I'm not the most experience programmer and am on a tight deadline. The
>approach I ended up with was the best I could do with the experience I've
>got and the time I had.
>
>My indexer works so far and doesn't have to forcefully release the lock on
>the Index too often (the case is most likely to occur when someone removes a
>content file(s) and the reader needs to delete from the existing index for
>the first time). We will see what happens as more people use the system with
>large content directories.
>
>As I learn more I plan to expand the functionality of my class.
>
>Luke S
>
>----- Original Message ----- 
>From: <jeichels@optonline.net>
>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>Sent: Monday, November 15, 2004 5:50 PM
>Subject: Re: Lucene : avoiding locking (incremental indexing)
>
>
>  
>
>>It really seems like I am not the only person having this issue.
>>
>>So far I am seeing 2 solutions and honestly I don't love either totally.
>>    
>>
>I am thinking that without changes to Lucene itself, the best "general" way
>to implement this might be to have a queue of changes and have Lucene work
>off this queue in a single thread using a time-settable batch method.   This
>is similar to what you are using below, but I don't like that you forcibly
>unlock Lucene if it shows itself locked.   Using the Queue approach, only
>that one thread could be accessing Lucene for writes/deletes anyway so there
>should be no "unknown" locking.
>  
>
>>I can imagine this being a very good addition to Lucene - creating a high
>>    
>>
>level interface to Lucene that manages incremental updates in such a manner.
>If anybody has such a general piece of code, please post it!!!   I would use
>it tonight rather then create my own.
>  
>
>>I am not sure if there is anything that can be done to Lucene itself to
>>    
>>
>help with this need people seem to be having.  I realize the likely reasons
>why Lucene might need to only have one Index writer and the additional load
>that might be caused by locking off pieces of the database rather then the
>whole database.  I think I need to look in the developer archives.
>  
>
>>JohnE
>>
>>
>>
>>----- Original Message -----
>>From: Luke Shannon <lshannon@hypermedia.com>
>>Date: Monday, November 15, 2004 5:14 pm
>>Subject: Re: Lucene : avoiding locking (incremental indexing)
>>
>>    
>>
>>>Hi Luke;
>>>
>>>I have a similar system (except people don't need to see results
>>>immediatly). The approach I took is a little different.
>>>
>>>I made my Indexer a thread with the indexing operations occuring
>>>the in run
>>>method. When the IndexWriter is to be created or the IndexReader
>>>needs to
>>>execute a delete I called the following method:
>>>
>>>private void manageIndexLock() {
>>> try {
>>>  //check if the index is locked and deal with it if it is
>>>  if (index.exists() && IndexReader.isLocked(indexFileLocation)) {
>>>   System.out.println("INDEXING INFO: There is more than one
>>>process trying
>>>to write to the index folder. Will wait for index to become
>>>available.");    //perform this loop until the lock if released or
>>>3 mins
>>>   // has expired
>>>   int indexChecks = 0;
>>>   while (IndexReader.isLocked(indexFileLocation)
>>>     && indexChecks < 6) {
>>>    //increment the number of times we check the index
>>>    // files
>>>    indexChecks++;
>>>    try {
>>>     //sleep for 30 seconds
>>>     Thread.sleep(30000L);
>>>    } catch (InterruptedException e2) {
>>>     System.out.println("INDEX ERROR: There was a problem waiting
>>>for the
>>>lock to release. "
>>>         + e2.getMessage());
>>>    }
>>>   }//closes the while loop for checking on the index
>>>   // directory
>>>   //if we are still locked we need to do something about it
>>>   if (IndexReader.isLocked(indexFileLocation)) {
>>>    System.out.println("INDEXING INFO: Index Locked After 3
>>>minute of
>>>waiting. Forcefully releasing lock.");
>>>    IndexReader.unlock(FSDirectory.getDirectory(index, false));
>>>    System.out.println("INDEXING INFO: Index lock released");
>>>   }//close the if that actually releases the lock
>>>  }//close the if ensure the file exists
>>> }//closes the try for all the above operations
>>> catch (IOException e1) {
>>>  System.out.println("INDEX ERROR: There was a problem waiting
>>>for the lock
>>>to release. "
>>>      + e1.getMessage());
>>> }
>>>}//close the manageIndexLock method
>>>
>>>Do you think this is a bad approach?
>>>
>>>Luke
>>>
>>>----- Original Message ----- 
>>>From: "Luke Francl" <luke.francl@stellent.com>
>>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>>Sent: Monday, November 15, 2004 5:01 PM
>>>Subject: Re: Lucene : avoiding locking (incremental indexing)
>>>
>>>
>>>      
>>>
>>>>This is how I implemented incremental indexing. If anyone sees
>>>>        
>>>>
>>>anything> wrong, please let me know.
>>>      
>>>
>>>>Our motivation is similar to John Eichel's. We have a digital asset
>>>>management system and when users update, delete or create a new
>>>>        
>>>>
>>>asset,> they need to see their results immediately.
>>>      
>>>
>>>>The most important thing to know about incremental indexing that
>>>>multiple threads cannot share the same IndexWriter, and only one
>>>>IndexWriter can be open on an index at a time.
>>>>
>>>>Therefore, what I did was control access to the IndexWriter
>>>>        
>>>>
>>>through a
>>>      
>>>
>>>>singleton wrapper class that synchronizes access to the
>>>>        
>>>>
>>>IndexWriter and
>>>      
>>>
>>>>IndexReader (for deletes). After finishing writing to the index, you
>>>>must close the IndexWriter to flush the changes to the index.
>>>>
>>>>If you do this you will be fine.
>>>>
>>>>However, opening and closing the index takes time so we had to
>>>>        
>>>>
>>>look for
>>>      
>>>
>>>>some ways to speed up the indexing.
>>>>
>>>>The most obvious thing is that you should do as much work as
>>>>        
>>>>
>>>possible> outside of the synchronized block. For example, in my
>>>application, the
>>>      
>>>
>>>>creation of Lucene Document objects is not synchronized. Only
>>>>        
>>>>
>>>the part
>>>      
>>>
>>>>of the code that is between your IndexWriter.open() and
>>>>IndexWriter.close() needs to be synchronized.
>>>>
>>>>The other easy thing I did to improve performance was batch
>>>>        
>>>>
>>>changes in a
>>>      
>>>
>>>>transaction together for indexing. If a user changes 50 assets, that
>>>>will all be indexed using one Lucene IndexWriter.
>>>>
>>>>So far, we haven't had to explore further performance
>>>>        
>>>>
>>>enhancements, but
>>>      
>>>
>>>>if we do the next thing I will do is create a thread that
>>>>        
>>>>
>>>gathers assets
>>>      
>>>
>>>>that need to be indexed and performs a batch job every five
>>>>        
>>>>
>>>minutes or
>>>      
>>>
>>>>so.
>>>>
>>>>Hope this is helpful,
>>>>Luke
>>>>
>>>>
>>>>-----------------------------------------------------------------
>>>>        
>>>>
>>>----
>>>      
>>>
>>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>>        
>>>>
>>>
>>>-------------------------------------------------------------------
>>>--
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>>      
>>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>    
>>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11262-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 10:25:38 2004
Return-Path: <lucene-user-return-11262-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45183 invoked from network); 16 Nov 2004 10:25:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 10:25:38 -0000
Received: (qmail 89301 invoked by uid 500); 16 Nov 2004 10:25:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 89276 invoked by uid 500); 16 Nov 2004 10:25:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 89263 invoked by uid 99); 16 Nov 2004 10:25:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 02:25:27 -0800
Received: (qmail 32309 invoked by uid 89); 16 Nov 2004 10:25:22 -0000
Received: from unknown (HELO ?131.114.3.115?) (doug@cottrell-cutting.net@131.114.3.115)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 16 Nov 2004 10:25:22 -0000
Message-ID: <4199D58A.1070604@apache.org>
Date: Tue, 16 Nov 2004 11:25:14 +0100
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.3) Gecko/20040910
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Backup strategies
References: <clo3kn$heq$1@sea.gmane.org>
In-Reply-To: <clo3kn$heq$1@sea.gmane.org>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Christoph Kiehl wrote:
> I'm curious about your strategy to backup indexes based on FSDirectory. 
> If I do a file based copy I suspect I will get corrupted data because of 
> concurrent write access.
> My current favorite is to create an empty index and use 
> IndexWriter.addIndexes() to copy the current index state. But I'm not 
> sure about the performance of this solution.
> 
> How do you make your backups?

A safe way to backup is to have your indexing process, when it knows the 
index is stable (e.g., just after calling IndexWriter.close()), make a 
checkpoint copy of the index by running a shell command like "cp -lpr 
index index.YYYMMDDHHmmSS".  This is very fast and requires little disk 
space, since it creates only a new directory of hard links.  Then you 
can separately back this up and subsequently remove it.

This is also a useful way to replicate indexes.  On the master indexing 
server periodically perform "cp -lpr" as above.  Then search slaves can 
use rsync to pull down the latest version of the index.  If a very small 
mergefactor is used (e.g., 2) then the index will have only a few 
segments, so that searches are fast.  On the slave, periodically find 
the latest index.YYYMMDDHHmmSS, use "cp -lpr index/ index.YYYMMDDHHmmSS" 
and 'rsync --delete master:index.YYYMMDDHHmmSS index.YYYMMDDHHmmSS' to 
efficiently get a local copy, and finally "ln -fsn index.YYYMMDDHHmmSS 
index" to publish the new version of the index.

Doug


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11263-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 10:26:07 2004
Return-Path: <lucene-user-return-11263-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45410 invoked from network); 16 Nov 2004 10:26:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 10:26:06 -0000
Received: (qmail 90508 invoked by uid 500); 16 Nov 2004 10:26:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90489 invoked by uid 500); 16 Nov 2004 10:26:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90473 invoked by uid 99); 16 Nov 2004 10:26:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [217.160.91.29] (HELO p15112568.pureserver.info) (217.160.91.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 02:25:57 -0800
Received: from [192.168.10.103] (unknown [82.135.65.168])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by p15112568.pureserver.info (Postfix) with ESMTP id C5BD114010F
	for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 11:25:52 +0100 (CET)
Message-ID: <4199D5A9.3060903@intrafind.de>
Date: Tue, 16 Nov 2004 11:25:45 +0100
From: Bernhard Messer <bernhard.messer@intrafind.de>
Organization: IntraFind Software AG
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Parsing .ppt
References: <079f01c4cb2a$8b860e60$7703d00a@hypermedia.com> <4198D123.7020800@cypoint.se>
In-Reply-To: <4198D123.7020800@cypoint.se>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

i tested the implementation. It seems to work with basic Powerpoint 
slides. The problem i have is that it doesn't extract special characters 
like "german umlaute". Does anybody already adressed the problem ?

thanks
Bernhard

Magnus Johansson schrieb:

> There's some code using POI at
> http://www.mail-archive.com/poi-user@jakarta.apache.org/msg04809.html
>
> /magnus
>
>
> Luke Shannon wrote:
>
>> Hey All;
>>
>> Anyone know a good API for parsing MS powerpoint files?
>>
>> Luke
>>
>>  
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11264-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 10:31:22 2004
Return-Path: <lucene-user-return-11264-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48266 invoked from network); 16 Nov 2004 10:31:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 10:31:22 -0000
Received: (qmail 97775 invoked by uid 500); 16 Nov 2004 10:31:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97756 invoked by uid 500); 16 Nov 2004 10:31:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97742 invoked by uid 99); 16 Nov 2004 10:31:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 02:31:13 -0800
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.14) id A8D28CAB00C2; Tue, 16 Nov 2004 05:39:14 -0500
Message-ID: <4199D6EA.4070208@bayt.net>
Date: Tue, 16 Nov 2004 14:31:06 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Backup strategies
References: <clo3kn$heq$1@sea.gmane.org> <4199D58A.1070604@apache.org>
In-Reply-To: <4199D58A.1070604@apache.org>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

We've recently implemented something similar with the backup process 
creating a file (much like the lock files during indexing) that the 
IndexWriter recognizes (tweak) and doesn't attempt to start and indexing 
or a delete while it's there, wasn't that much work actually.

Nader

Doug Cutting wrote:

> Christoph Kiehl wrote:
>
>> I'm curious about your strategy to backup indexes based on 
>> FSDirectory. If I do a file based copy I suspect I will get corrupted 
>> data because of concurrent write access.
>> My current favorite is to create an empty index and use 
>> IndexWriter.addIndexes() to copy the current index state. But I'm not 
>> sure about the performance of this solution.
>>
>> How do you make your backups?
>
>
> A safe way to backup is to have your indexing process, when it knows 
> the index is stable (e.g., just after calling IndexWriter.close()), 
> make a checkpoint copy of the index by running a shell command like 
> "cp -lpr index index.YYYMMDDHHmmSS".  This is very fast and requires 
> little disk space, since it creates only a new directory of hard 
> links.  Then you can separately back this up and subsequently remove it.
>
> This is also a useful way to replicate indexes.  On the master 
> indexing server periodically perform "cp -lpr" as above.  Then search 
> slaves can use rsync to pull down the latest version of the index.  If 
> a very small mergefactor is used (e.g., 2) then the index will have 
> only a few segments, so that searches are fast.  On the slave, 
> periodically find the latest index.YYYMMDDHHmmSS, use "cp -lpr index/ 
> index.YYYMMDDHHmmSS" and 'rsync --delete master:index.YYYMMDDHHmmSS 
> index.YYYMMDDHHmmSS' to efficiently get a local copy, and finally "ln 
> -fsn index.YYYMMDDHHmmSS index" to publish the new version of the index.
>
> Doug
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11265-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 13:24:08 2004
Return-Path: <lucene-user-return-11265-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22802 invoked from network); 16 Nov 2004 13:24:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 13:24:08 -0000
Received: (qmail 37345 invoked by uid 500); 16 Nov 2004 13:24:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37318 invoked by uid 500); 16 Nov 2004 13:24:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37304 invoked by uid 99); 16 Nov 2004 13:24:03 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.238] (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 16 Nov 2004 05:24:00 -0800
Received: (qmail 18089 invoked by uid 60001); 16 Nov 2004 13:23:56 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=DjFUbms5Prh7pCoytlImwvq5iwn+JBrjecd4Tk3+vqYkwz7BM2mfO5kMcrnCJHoF1OU+Op3dWDx927pJTSrMlVXrP/ObkUorZ9KqGA+P7TzD7trMQ/BSQQMDo+SC55++z8i6kU1Ayb/HRODni7rGkIn4NrTsJekTcxBSSSX3Dnw=  ;
Message-ID: <20041116132356.18086.qmail@web12701.mail.yahoo.com>
Received: from [69.112.2.199] by web12701.mail.yahoo.com via HTTP; Tue, 16 Nov 2004 05:23:56 PST
Date: Tue, 16 Nov 2004 05:23:56 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IndexSearcher Refresh
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <4568BE33B520DD43B7B24DE0B609B215522F62@htexc.hq.htinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I don't think so, you have to forget or close the old one and create a
new instance.

Otis

--- Ravi <ravi@htinc.com> wrote:

> Is there a way to refresh the IndexSearcher object with the newly
> added
> documents to the index instead of creating a new object? 
> 
> Thanks in advance,
> Ravi. 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11266-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 13:25:41 2004
Return-Path: <lucene-user-return-11266-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23416 invoked from network); 16 Nov 2004 13:25:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 13:25:40 -0000
Received: (qmail 39576 invoked by uid 500); 16 Nov 2004 13:25:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39229 invoked by uid 500); 16 Nov 2004 13:25:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39215 invoked by uid 99); 16 Nov 2004 13:25:35 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 16 Nov 2004 05:25:32 -0800
Received: (qmail 76395 invoked by uid 60001); 16 Nov 2004 13:25:29 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=br7VF3R+r45CKlLFrFoVzx7jviYRbQJ2ru0UprFpOSx3f2dD7fmWfWQ//ZXEUC0i5wfw5rFuOnlz6hR72b0nP0BM4TKg6FLgbGpJEbJClYa5LGiqZJDm+x2nBs8XL04nX7RilvgWu2+5KG1rs+84q/3WgNedSQKNbanwFBNqJWA=  ;
Message-ID: <20041116132528.76393.qmail@web12702.mail.yahoo.com>
Received: from [69.112.2.199] by web12702.mail.yahoo.com via HTTP; Tue, 16 Nov 2004 05:25:28 PST
Date: Tue, 16 Nov 2004 05:25:28 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: lock file paths
To: Lucene Users List <lucene-user@jakarta.apache.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Good question.  I'm not looking at the API now, but I don't recall any
methods that would let you know where Lucene decided to store its
locks.  You could peek at the source and follow its logic, though.

Otis

--- roy-lucene-user@xemaps.com wrote:

> Hey guys,
> 
> Quick question... is there a way to get the file paths to the lock
> files?  Or do I have to modify the src?  Currently I can't find any
> methods that will return a lock's file path.
> 
> Roy.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11267-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 14:18:03 2004
Return-Path: <lucene-user-return-11267-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54734 invoked from network); 16 Nov 2004 14:18:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 14:18:03 -0000
Received: (qmail 18831 invoked by uid 500); 16 Nov 2004 14:17:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18662 invoked by uid 500); 16 Nov 2004 14:17:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18647 invoked by uid 99); 16 Nov 2004 14:17:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [163.166.43.76] (HELO cr02am01.baplc.com) (163.166.43.76)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 06:17:25 -0800
Received: from localhost (corp-mgw06.baplc.com [163.166.43.76])
	by cr02am01.baplc.com (Postfix) with ESMTP id 37D4E133
	for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 14:17:16 +0000 (GMT)
Received: from cr02am01.baplc.com ([163.166.43.56])
 by localhost (cr02am01 [163.166.43.76]) (amavisd-new, port 10024) with LMTP
 id 3481632-01-77 for <lucene-user@jakarta.apache.org>;
 Tue, 16 Nov 2004 14:17:15 +0000 (GMT)
Received: from intl-mgw01.baplc.com (intl-mgw01.baplc.com [161.2.239.201])
	by cr02am01.baplc.com (Postfix) with ESMTP id 9F5ED6F
	for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 14:17:15 +0000 (GMT)
Received: from mlncl02.uk.ba.com (bamlncl02.ncl.uk.ba.com [10.152.112.149])
	by intl-mgw01.baplc.com (Postfix) with ESMTP id 7084178
	for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 14:17:15 +0000 (GMT)
X-Priority: 3 (Normal)
Sensitivity: 
Subject: Whitespace Analyzer not producing expected search results
To: lucene-user@jakarta.apache.org
X-Mailer: Lotus Notes Release 5.0.10  March 22, 2002
Message-ID: <OFFA7AA19A.9DB93069-ON80256F4E.00436B98-80256F4E.004E7B66@uk.ba.com>
From: lee.a.carroll@britishairways.com
Date: Tue, 16 Nov 2004 14:25:38 +0000
X-MIMETrack: Serialize by Router on BAMLNCL02/NEWCASTLE/BRITISH AIRWAYS/GB(Release 5.0.11
  |July 24, 2002) at 16/11/2004 14:25:41
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Scanned: by amavisd-new at britishairways.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

We have indexed a set of web files (jsp , js , xslt , java properties and
html) using the lucene Whitespace Analyzer.
The purpose is to allow developers to find where code / functions are used
and defined across a large and dissperate
content management repository. Hopefully to aid code re-use, easier
refactoring and standards control.

However when a query parser search is made using a whitespace analyser with
a string known to be in an indexed file, the search returns zero hits.

For example the string  <jsp\:include page
=\"/path1/path2/path3/path4/file1.jsp\" /> is
searched for using the query parser (escaping the meta-chars)and an indexed
document which contains
the following text should be found ?

 // include HTML head
%>
             <jsp:include page="/path1/path2/path3/path4/file1.jsp" />

             <script language="JavaScript" src
="/path1/path2/path3/file1.js"></script>
             <!-- <script>

 I've taken a look at the FAQ advice regarding checking the effects of an
analyser (in our case whitespace) but our test class returns the expected
tokens for any given token stream. For Example this string  "<% mytoken1
mytoken2 %>" is tokenised by the whitespace analyzer as [<%] [mytoken1]
[mytoken2] [%>].

I'm sure I've missed something but i can't see what it is. If anyone could
shed any light on posible reasons for why we are getting zero hits for text
strings which are in our indexed files I'd be really gratefull. See below
for more info on index and search set up

Thanks a lot Lee C

File contents are  in a tokenised , indexed not stored field.
Index uses the whitespace analyzer which comes with lucene

Searches are performed using a boolean query. The boolean query is made up
of a query parser which gets its search term from an html text box entered
by the user and a prefix query which is used to limit search scope by
directory paths.
the search uses a whitespace analyzer, no filtering takes place






-------------------------------------------------------------------------------------------------

Get the best from British Airways at ba.com
http://www.ba.com



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11268-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 14:46:15 2004
Return-Path: <lucene-user-return-11268-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83782 invoked from network); 16 Nov 2004 14:46:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 14:46:15 -0000
Received: (qmail 88361 invoked by uid 500); 16 Nov 2004 14:46:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 88322 invoked by uid 500); 16 Nov 2004 14:46:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 88304 invoked by uid 99); 16 Nov 2004 14:46:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 06:46:06 -0800
Received: (qmail 22038 invoked by uid 89); 16 Nov 2004 14:46:02 -0000
Received: from unknown (HELO ?131.114.3.115?) (doug@cottrell-cutting.net@131.114.3.115)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 16 Nov 2004 14:46:01 -0000
Message-ID: <419A12A1.5020700@apache.org>
Date: Tue, 16 Nov 2004 15:45:53 +0100
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.3) Gecko/20040910
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: document ID and performance
References: <068B7A93-2873-11D9-9BD5-000D93C181DA@linkedin.com>
In-Reply-To: <068B7A93-2873-11D9-9BD5-000D93C181DA@linkedin.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yan Pujante wrote:
> I want to run a very fast search that simply returns the matching 
> document id. Is there any way to associate the document id returned in 
> the hit collector to the internal document ID stored in the index ? 
> Anybody has any idea how to do that ? Ideally you would want to be able 
> to write something like this:
> 
>     document.add(Field.ID(documentID));
> 
> and then in the HitCollector API:
> 
> collect(String documentID, float score) with the documentID being the 
> one you stored (but which would be returned very efficiently)

Have a look at:
 
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/FieldCache.html

In your HitCollector, access an array, from the field cache, that maps 
Lucene ids to your ids.

Doug


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11269-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 15:11:30 2004
Return-Path: <lucene-user-return-11269-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99860 invoked from network); 16 Nov 2004 15:11:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 15:11:30 -0000
Received: (qmail 57305 invoked by uid 500); 16 Nov 2004 15:11:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57274 invoked by uid 500); 16 Nov 2004 15:11:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57261 invoked by uid 99); 16 Nov 2004 15:11:24 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,FROM_HAS_ULINE_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.218.94.171] (HELO web41128.mail.yahoo.com) (66.218.94.171)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 16 Nov 2004 07:11:21 -0800
Received: (qmail 49433 invoked by uid 60001); 16 Nov 2004 15:11:18 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=41Lnfpw1xQIA/5wHv6iEIMQOP/r3Gq+yUgfpHL88AyjrHFXHcnbpy73PilZI5tCkl+tEsiGdPEJnFRzornkMBuxJEs8a9VTWceAPMy3hBQCpdqMICoo7mj4vqtGq7fXMFswR2Wyo1jZvPjzVUuMZeArl5onui3HqBXE93stFbNI=  ;
Message-ID: <20041116151118.49431.qmail@web41128.mail.yahoo.com>
Received: from [198.45.18.37] by web41128.mail.yahoo.com via HTTP; Wed, 17 Nov 2004 00:11:18 JST
Date: Wed, 17 Nov 2004 00:11:18 +0900 (JST)
From: K Kim <www_kk2@yahoo.com>
Subject: Searching and indexing from different processes (applications)
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=euc-kr
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi.

I just started to play around with Lucene.  I was
wondering if searching and indexing can be done
simultaneously from different processes (two different
processes.)  For example, searching is serviced from a
web appliation, while indexing is done periodically
from a stand-alone application.

What would be the best way to implement this?  

Thanks.


	

	
		
___________________________________
 100MB,     - !                  (http://mail.yahoo.co.kr)
, , , OST, ,  - !   (http://kr.music.yahoo.com)
  , , ,  - !    (http://kr.mobile.yahoo.com)

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11270-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 15:18:50 2004
Return-Path: <lucene-user-return-11270-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4057 invoked from network); 16 Nov 2004 15:18:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 15:18:48 -0000
Received: (qmail 77704 invoked by uid 500); 16 Nov 2004 15:18:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77679 invoked by uid 500); 16 Nov 2004 15:18:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77645 invoked by uid 99); 16 Nov 2004 15:18:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 07:18:33 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Tue, 16 Nov 2004 10:18:57 -0500
Message-ID: <08e301c4cbef$9783dc40$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041116132356.18086.qmail@web12701.mail.yahoo.com>
Subject: Re: IndexSearcher Refresh
Date: Tue, 16 Nov 2004 10:18:57 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 16 Nov 2004 15:18:57.0498 (UTC) FILETIME=[97A483A0:01C4CBEF]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It would nice if the IndexerSearcher contained a method that could return
the last modified date of the index folder it was created with.

This would make it easier to know when you need to create a new Searcher.

----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, November 16, 2004 8:23 AM
Subject: Re: IndexSearcher Refresh


> I don't think so, you have to forget or close the old one and create a
> new instance.
>
> Otis
>
> --- Ravi <ravi@htinc.com> wrote:
>
> > Is there a way to refresh the IndexSearcher object with the newly
> > added
> > documents to the index instead of creating a new object?
> >
> > Thanks in advance,
> > Ravi.
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11271-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 15:20:34 2004
Return-Path: <lucene-user-return-11271-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5027 invoked from network); 16 Nov 2004 15:20:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 15:20:34 -0000
Received: (qmail 81311 invoked by uid 500); 16 Nov 2004 15:19:55 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81253 invoked by uid 500); 16 Nov 2004 15:19:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81202 invoked by uid 99); 16 Nov 2004 15:19:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of angeles3d@gmail.com designates 64.233.170.203 as permitted sender)
Received: from [64.233.170.203] (HELO rproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 07:19:52 -0800
Received: by rproxy.gmail.com with SMTP id a36so732249rnf
        for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 07:19:48 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=lwJxSDE6takFbfTNWLb2VzAhgdZLEfPzQEF4ck1Kb3Pgc0375swjlt3P7eGrnsNDdnwlhFXu4o40A+yyckGK2sVfBwkNKuM4nIGDMhgETVOJSFAnTE0fqz9uZuM7BltyQ7eaL7ne7yuFynPL4rKzql6LMDTd74ihkSt2zd9jcpc=
Received: by 10.38.171.64 with SMTP id t64mr219476rne;
        Tue, 16 Nov 2004 07:19:46 -0800 (PST)
Received: by 10.38.14.16 with HTTP; Tue, 16 Nov 2004 07:19:45 -0800 (PST)
Message-ID: <6c00cd3104111607193bdbde56@mail.gmail.com>
Date: Tue, 16 Nov 2004 10:19:45 -0500
From: Miguel Angel <angeles3d@gmail.com>
Reply-To: Miguel Angel <angeles3d@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: how do you work with PDF
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi, i need know  how do you work with PDF, please give the process.
Thanks...

-- 
Miguel Angel Angeles R.
Asesoria en Conectividad y Servidores
Telf. 97451277

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11272-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 15:22:03 2004
Return-Path: <lucene-user-return-11272-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5784 invoked from network); 16 Nov 2004 15:22:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 15:22:02 -0000
Received: (qmail 91092 invoked by uid 500); 16 Nov 2004 15:21:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91063 invoked by uid 500); 16 Nov 2004 15:21:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91050 invoked by uid 99); 16 Nov 2004 15:21:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 07:21:57 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Tue, 16 Nov 2004 10:22:30 -0500
Message-ID: <08ff01c4cbf0$16667720$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"Miguel Angel" <angeles3d@gmail.com>
References: <6c00cd3104111607193bdbde56@mail.gmail.com>
Subject: Re: how do you work with PDF
Date: Tue, 16 Nov 2004 10:22:30 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 16 Nov 2004 15:22:30.0330 (UTC) FILETIME=[168019A0:01C4CBF0]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

www.pdfbox.org

Once you get the package installed the code you can use is:

Document doc = LucenePDFDocument.getDocument(file);
      writer.addDocument(doc);

This method returns the PDF in Lucene document format.

Luke

----- Original Message ----- 
From: "Miguel Angel" <angeles3d@gmail.com>
To: <lucene-user@jakarta.apache.org>
Sent: Tuesday, November 16, 2004 10:19 AM
Subject: how do you work with PDF


> Hi, i need know  how do you work with PDF, please give the process.
> Thanks...
> 
> -- 
> Miguel Angel Angeles R.
> Asesoria en Conectividad y Servidores
> Telf. 97451277
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11273-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 15:26:58 2004
Return-Path: <lucene-user-return-11273-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9095 invoked from network); 16 Nov 2004 15:26:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 15:26:58 -0000
Received: (qmail 17883 invoked by uid 500); 16 Nov 2004 15:26:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17857 invoked by uid 500); 16 Nov 2004 15:26:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17844 invoked by uid 99); 16 Nov 2004 15:26:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 07:26:48 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 2939223BC6
	for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 16:27:27 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 07753-09 for <lucene-user@jakarta.apache.org>;
 Tue, 16 Nov 2004 16:27:27 +0100 (CET)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 0D36723B8E
	for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 16:27:27 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id iAGFQhmA005232
	for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 16:26:43 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id iAGFQhxS005228;
	Tue, 16 Nov 2004 16:26:43 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16794.7219.259355.83766@tanto-xipolis.de>
Date: Tue, 16 Nov 2004 16:26:43 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Searching and indexing from different processes (applications)
In-Reply-To: <20041116151118.49431.qmail@web41128.mail.yahoo.com>
References: <20041116151118.49431.qmail@web41128.mail.yahoo.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

K Kim writes:

> I just started to play around with Lucene.  I was
> wondering if searching and indexing can be done
> simultaneously from different processes (two different
> processes.)  For example, searching is serviced from a
> web appliation, while indexing is done periodically
> from a stand-alone application.
> 
> What would be the best way to implement this?  
> 
simply do it.
The only things you have to keep in mind, is
a) you cannot have more than one process/thread writing to lucene
b) an index reader/search will not see updates unless it's closed
   and reopened.

So all you need is your web app and your indexing process and some
way to inform the web app after indexing, that it should reopen the index.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11274-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 15:28:39 2004
Return-Path: <lucene-user-return-11274-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9938 invoked from network); 16 Nov 2004 15:28:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 15:28:39 -0000
Received: (qmail 25601 invoked by uid 500); 16 Nov 2004 15:28:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25579 invoked by uid 500); 16 Nov 2004 15:28:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25566 invoked by uid 99); 16 Nov 2004 15:28:29 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.241] (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 16 Nov 2004 07:28:23 -0800
Received: (qmail 54601 invoked by uid 60001); 16 Nov 2004 15:28:20 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=ueOyzxpFV25D92AN4Hw/M8otPmLkASI9jeoBQx0/r2jSP+QFeKVdMHaOrKXhSguNxMFnjsOEnHIM+JxCRvf+hd3224kKVDB2eugkeaW0IZHDmIyRPHlJolgBG/WbRg10geqNtMAc8I5jdI5UAN6cL5ktgkMjMt+EyWwwraH5InQ=  ;
Message-ID: <20041116152818.54599.qmail@web12704.mail.yahoo.com>
Received: from [216.194.17.194] by web12704.mail.yahoo.com via HTTP; Tue, 16 Nov 2004 07:28:18 PST
Date: Tue, 16 Nov 2004 07:28:18 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: IndexSearcher Refresh
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <08e301c4cbef$9783dc40$7703d00a@hypermedia.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This will help:

http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexReader.html#getCurrentVersion(org.apache.lucene.store.Directory)

Otis


--- Luke Shannon <lshannon@hypermedia.com> wrote:

> It would nice if the IndexerSearcher contained a method that could
> return
> the last modified date of the index folder it was created with.
> 
> This would make it easier to know when you need to create a new
> Searcher.
> 
> ----- Original Message ----- 
> From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Tuesday, November 16, 2004 8:23 AM
> Subject: Re: IndexSearcher Refresh
> 
> 
> > I don't think so, you have to forget or close the old one and
> create a
> > new instance.
> >
> > Otis
> >
> > --- Ravi <ravi@htinc.com> wrote:
> >
> > > Is there a way to refresh the IndexSearcher object with the newly
> > > added
> > > documents to the index instead of creating a new object?
> > >
> > > Thanks in advance,
> > > Ravi.
> > >
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> > >
> > >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >
> >
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11275-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 15:31:19 2004
Return-Path: <lucene-user-return-11275-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11617 invoked from network); 16 Nov 2004 15:31:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 15:31:19 -0000
Received: (qmail 34486 invoked by uid 500); 16 Nov 2004 15:31:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34455 invoked by uid 500); 16 Nov 2004 15:31:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34437 invoked by uid 99); 16 Nov 2004 15:31:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.80.239.198] (HELO outbound1.sopragroup.com) (81.80.239.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 07:31:08 -0800
Received: by outbound1.sopragroup.com (8.12.10/8.12.10/outbound-A02) with ESMTP id iAGFV0Kr001946
          for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 16:31:02 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="ks_c_5601-1987"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Searching and indexing from different processes (applications)
Date: Tue, 16 Nov 2004 16:31:00 +0100
Message-ID: <5933531F07A5144E9E53E1AA45257E4B01251EB9@wexchbe03.ancy.fr.sopra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching and indexing from different processes (applications)
Thread-Index: AcTL7o4FFikEbCg8S3CRPyHxOfcRZAAASquA
From: "Cocula Remi" <rcocula@sopragroup.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 16 Nov 2004 15:32:48.0234 (UTC) FILETIME=[86CCC4A0:01C4CBF1]
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have created a tool that could respond to your question.
It is called "Lucene Server" (http://luceneserver.sourceforge.net/)
It is a tool for integration of Lucene in distributed environnements =
(via RMI).=20

A new release is under developpement. It will include a paginated search =
service using XML.

If you are interested by this project just try it; I will support you.

Regards.



-----Message d'origine-----
De?: K Kim [mailto:www_kk2@yahoo.com]
Envoye?: mardi 16 novembre 2004 16:11
A?: lucene-user@jakarta.apache.org
Objet?: Searching and indexing from different processes (applications)



Hi.

I just started to play around with Lucene.  I was
wondering if searching and indexing can be done
simultaneously from different processes (two different
processes.)  For example, searching is serviced from a
web appliation, while indexing is done periodically
from a stand-alone application.

What would be the best way to implement this? =20

Thanks.


=09

=09
	=09
___________________________________
=C3=D6=B4=EB 100MB, =B4=F5 =C0=CC=BB=F3 =BF=EB=B7=AE =
=B0=ED=B9=CE=BE=F8=B4=C2 - =BE=DF=C8=C4! =B8=DE=C0=CF                 =
(http://mail.yahoo.co.kr)
=C3=D6=BD=C5=B0=EE, =C3=DF=C3=B5=B0=EE, =B0=A1=BF=E4, OST, =C6=CB=BC=DB, =
=B9=C2=C1=F7=BA=F1=B5=F0=BF=C0 - =BE=DF=C8=C4! =BA=F1=C6=AE=B9=DA=BD=BA  =
(http://kr.music.yahoo.com)
=C3=D6=BD=C5 =C8=DE=B4=EB=C6=F9 =C1=A4=BA=B8, =BA=A7=BC=D2=B8=AE, =
=C4=B3=B8=AF=C5=CD, =B9=AE=C0=DA=B8=DE=BC=BC=C1=F6 - =BE=DF=C8=C4! =
=B8=F0=B9=D9=C0=CF   (http://kr.mobile.yahoo.com)

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11276-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 15:33:45 2004
Return-Path: <lucene-user-return-11276-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12988 invoked from network); 16 Nov 2004 15:33:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 15:33:44 -0000
Received: (qmail 41929 invoked by uid 500); 16 Nov 2004 15:33:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41906 invoked by uid 500); 16 Nov 2004 15:33:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41893 invoked by uid 99); 16 Nov 2004 15:33:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of angeles3d@gmail.com designates 64.233.170.202 as permitted sender)
Received: from [64.233.170.202] (HELO rproxy.gmail.com) (64.233.170.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 07:33:35 -0800
Received: by rproxy.gmail.com with SMTP id a36so734095rnf
        for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 07:33:31 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=CGiS/5tmoUbVCgBPbPlz6b4+fKGkOiiEOtqpnaDbnhYtqEDklgd+cYXM13hDPatiC7wInqF2hyBQ6gcYEzx0pV9xRpFl1rvrD0sEmuGxPCfxoYJZDjsg67WYTqtPwUJg5UeZGg2Gox4vUcCUfhjQXIzfeLZRpapB/C0KymiqmEc=
Received: by 10.39.3.3 with SMTP id f3mr191918rni;
        Tue, 16 Nov 2004 07:33:31 -0800 (PST)
Received: by 10.38.14.16 with HTTP; Tue, 16 Nov 2004 07:33:31 -0800 (PST)
Message-ID: <6c00cd3104111607336d7ab8b5@mail.gmail.com>
Date: Tue, 16 Nov 2004 10:33:31 -0500
From: Miguel Angel <angeles3d@gmail.com>
Reply-To: Miguel Angel <angeles3d@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: how about this google
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

When you use Google and you put in the box  "amig" then press ENTER
....Sometimes google show "Perhaps it meant  amigus"   how make this
solution??

-- 
Miguel Angel Angeles R.
Asesoria en Conectividad y Servidores
Telf. 97451277

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11277-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 15:34:11 2004
Return-Path: <lucene-user-return-11277-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13235 invoked from network); 16 Nov 2004 15:34:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 15:34:11 -0000
Received: (qmail 43332 invoked by uid 500); 16 Nov 2004 15:34:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43313 invoked by uid 500); 16 Nov 2004 15:34:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43297 invoked by uid 99); 16 Nov 2004 15:34:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 07:34:02 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Tue, 16 Nov 2004 10:34:32 -0500
Message-ID: <091e01c4cbf1$c4f69df0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041116152818.54599.qmail@web12704.mail.yahoo.com>
Subject: Re: IndexSearcher Refresh
Date: Tue, 16 Nov 2004 10:34:32 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 16 Nov 2004 15:34:32.0710 (UTC) FILETIME=[C5128A60:01C4CBF1]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yes it will. Thanks.

----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, November 16, 2004 10:28 AM
Subject: Re: IndexSearcher Refresh


> This will help:
>
>
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexReader.html#getCurrentVersion(org.apache.lucene.store.Directory)
>
> Otis
>
>
> --- Luke Shannon <lshannon@hypermedia.com> wrote:
>
> > It would nice if the IndexerSearcher contained a method that could
> > return
> > the last modified date of the index folder it was created with.
> >
> > This would make it easier to know when you need to create a new
> > Searcher.
> >
> > ----- Original Message ----- 
> > From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Tuesday, November 16, 2004 8:23 AM
> > Subject: Re: IndexSearcher Refresh
> >
> >
> > > I don't think so, you have to forget or close the old one and
> > create a
> > > new instance.
> > >
> > > Otis
> > >
> > > --- Ravi <ravi@htinc.com> wrote:
> > >
> > > > Is there a way to refresh the IndexSearcher object with the newly
> > > > added
> > > > documents to the index instead of creating a new object?
> > > >
> > > > Thanks in advance,
> > > > Ravi.
> > > >
> > > >
> > > >
> > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> > lucene-user-unsubscribe@jakarta.apache.org
> > > > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > > >
> > > >
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > >
> > >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11278-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 16:04:36 2004
Return-Path: <lucene-user-return-11278-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 30957 invoked from network); 16 Nov 2004 16:04:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 16:04:36 -0000
Received: (qmail 51504 invoked by uid 500); 16 Nov 2004 16:03:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51399 invoked by uid 500); 16 Nov 2004 16:03:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51346 invoked by uid 99); 16 Nov 2004 16:03:57 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of tom@shopbloomfield.com designates 63.246.12.8 as permitted sender)
Received: from [63.246.12.8] (HELO shopbloomfield.com) (63.246.12.8)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 08:03:51 -0800
Received: by shopbloomfield.com (Postfix, from userid 513)
	id D54693B044; Tue, 16 Nov 2004 09:58:50 -0600 (CST)
Received: from shopbloomfield.com (shopbloomfield.com [63.246.12.8])
	by shopbloomfield.com (Postfix) with ESMTP id 762A43B042;
	Tue, 16 Nov 2004 09:58:50 -0600 (CST)
Date: Tue, 16 Nov 2004 09:58:50 -0600 (CST)
From: Bloomfield Nutrition <tom@shopbloomfield.com>
X-X-Sender: tom@epeopleplace.com
To: Lucene Users List <lucene-user@jakarta.apache.org>,
	Miguel Angel <angeles3d@gmail.com>
Subject: Re: how about this google
In-Reply-To: <20041116152849.2035B3B044@shopbloomfield.com>
References: <20041116152849.2035B3B044@shopbloomfield.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Spam-Level: 
Message-Id: <20041116155850.D54693B044@shopbloomfield.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You want to use ngrams on your lucene index, then pick the highest ranking
score.

For a demo: http://www.searchmorph.com/kat/spell.jsp
or
http://www.searchmorph.com/pub/ngramspeller/NGramSpeller.java for source
code.

TB

http://www.shopbloomfield.com



On Tue, 16 Nov 2004, Miguel Angel wrote:

> When you use Google and you put in the box  "amig" then press ENTER
> ....Sometimes google show "Perhaps it meant  amigus"   how make this
> solution??
>
> --
> Miguel Angel Angeles R.
> Asesoria en Conectividad y Servidores
> Telf. 97451277
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11279-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 16:19:35 2004
Return-Path: <lucene-user-return-11279-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39466 invoked from network); 16 Nov 2004 16:19:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 16:19:35 -0000
Received: (qmail 97203 invoked by uid 500); 16 Nov 2004 16:19:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97183 invoked by uid 500); 16 Nov 2004 16:19:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97169 invoked by uid 99); 16 Nov 2004 16:19:31 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [207.14.217.166] (HELO server) (207.14.217.166)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 08:19:28 -0800
Received: from [192.168.204.162] (lv-69-69-100-62.sta.sprint-hsd.net [69.69.100.62])
	by server (8.12.8/8.12.8) with SMTP id iAGECKCV030700
	for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 09:12:21 -0500
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <OFFA7AA19A.9DB93069-ON80256F4E.00436B98-80256F4E.004E7B66@uk.ba.com>
References: <OFFA7AA19A.9DB93069-ON80256F4E.00436B98-80256F4E.004E7B66@uk.ba.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <41FFA5CC-37EB-11D9-8186-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Whitespace Analyzer not producing expected search results
Date: Tue, 16 Nov 2004 08:19:14 -0800
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Try using a TermQuery instead of QueryParser to see if you get the  
results you expect.  Exact case matters.

Also, when troubleshooting issues with QueryParser, it is helpful to  
see what the actual Query returned is - try displaying its toString  
output.

	Erik

On Nov 16, 2004, at 6:25 AM, lee.a.carroll@britishairways.com wrote:

> Hi,
>
> We have indexed a set of web files (jsp , js , xslt , java properties  
> and
> html) using the lucene Whitespace Analyzer.
> The purpose is to allow developers to find where code / functions are  
> used
> and defined across a large and dissperate
> content management repository. Hopefully to aid code re-use, easier
> refactoring and standards control.
>
> However when a query parser search is made using a whitespace analyser  
> with
> a string known to be in an indexed file, the search returns zero hits.
>
> For example the string  <jsp\:include page
> =\"/path1/path2/path3/path4/file1.jsp\" /> is
> searched for using the query parser (escaping the meta-chars)and an  
> indexed
> document which contains
> the following text should be found ?
>
>  // include HTML head
> %>
>              <jsp:include page="/path1/path2/path3/path4/file1.jsp" />
>
>              <script language="JavaScript" src
> ="/path1/path2/path3/file1.js"></script>
>              <!-- <script>
>
>  I've taken a look at the FAQ advice regarding checking the effects of  
> an
> analyser (in our case whitespace) but our test class returns the  
> expected
> tokens for any given token stream. For Example this string  "<%  
> mytoken1
> mytoken2 %>" is tokenised by the whitespace analyzer as [<%] [mytoken1]
> [mytoken2] [%>].
>
> I'm sure I've missed something but i can't see what it is. If anyone  
> could
> shed any light on posible reasons for why we are getting zero hits for  
> text
> strings which are in our indexed files I'd be really gratefull. See  
> below
> for more info on index and search set up
>
> Thanks a lot Lee C
>
> File contents are  in a tokenised , indexed not stored field.
> Index uses the whitespace analyzer which comes with lucene
>
> Searches are performed using a boolean query. The boolean query is  
> made up
> of a query parser which gets its search term from an html text box  
> entered
> by the user and a prefix query which is used to limit search scope by
> directory paths.
> the search uses a whitespace analyzer, no filtering takes place
>
>
>
>
>
>
> ----------------------------------------------------------------------- 
> --------------------------
>
> Get the best from British Airways at ba.com
> http://www.ba.com
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11280-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 17:16:52 2004
Return-Path: <lucene-user-return-11280-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68693 invoked from network); 16 Nov 2004 17:16:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 17:16:52 -0000
Received: (qmail 11464 invoked by uid 500); 16 Nov 2004 17:16:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11432 invoked by uid 500); 16 Nov 2004 17:16:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11419 invoked by uid 99); 16 Nov 2004 17:16:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [216.54.180.10] (HELO htexc.hq.htinc.com) (216.54.180.10)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 09:16:44 -0800
X-MIMEOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: IndexSearcher Refresh
Date: Tue, 16 Nov 2004 12:16:32 -0500
Message-ID: <4568BE33B520DD43B7B24DE0B609B215522FBE@htexc.hq.htinc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: IndexSearcher Refresh
Thread-Index: AcTL8biIuy1UlMbcTWuEmBhvbzarMQADiSEg
From: "Ravi" <ravi@htinc.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If you add 10 documents to the index and delete the same 10, is the
number of changes 20 or zero?=20

Ravi.

-----Original Message-----
From: Luke Shannon [mailto:lshannon@hypermedia.com]=20
Sent: Tuesday, November 16, 2004 10:35 AM
To: Lucene Users List
Subject: Re: IndexSearcher Refresh

Yes it will. Thanks.

----- Original Message -----
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, November 16, 2004 10:28 AM
Subject: Re: IndexSearcher Refresh


> This will help:
>
>
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexR
eader.html#getCurrentVersion(org.apache.lucene.store.Directory)
>
> Otis
>
>
> --- Luke Shannon <lshannon@hypermedia.com> wrote:
>
> > It would nice if the IndexerSearcher contained a method that could
> > return
> > the last modified date of the index folder it was created with.
> >
> > This would make it easier to know when you need to create a new
> > Searcher.
> >
> > ----- Original Message -----=20
> > From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Tuesday, November 16, 2004 8:23 AM
> > Subject: Re: IndexSearcher Refresh
> >
> >
> > > I don't think so, you have to forget or close the old one and
> > create a
> > > new instance.
> > >
> > > Otis
> > >
> > > --- Ravi <ravi@htinc.com> wrote:
> > >
> > > > Is there a way to refresh the IndexSearcher object with the
newly
> > > > added
> > > > documents to the index instead of creating a new object?
> > > >
> > > > Thanks in advance,
> > > > Ravi.
> > > >
> > > >
> > > >
> >
---------------------------------------------------------------------
> > > > To unsubscribe, e-mail:
> > lucene-user-unsubscribe@jakarta.apache.org
> > > > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > > >
> > > >
> > >
> > >
> > >
> >
---------------------------------------------------------------------
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > >
> > >
> >
> >
> >
> >
---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11281-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 17:51:17 2004
Return-Path: <lucene-user-return-11281-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84998 invoked from network); 16 Nov 2004 17:51:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 17:51:17 -0000
Received: (qmail 85922 invoked by uid 500); 16 Nov 2004 17:51:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85749 invoked by uid 500); 16 Nov 2004 17:51:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85733 invoked by uid 99); 16 Nov 2004 17:51:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of venkatraju@gmail.com designates 64.233.170.205 as permitted sender)
Received: from [64.233.170.205] (HELO rproxy.gmail.com) (64.233.170.205)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 09:51:10 -0800
Received: by rproxy.gmail.com with SMTP id b11so800856rne
        for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 09:51:06 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=NPn5owBEzlj5wHeIKDTBYz+0ZvlGjQd8AdTlGJQj4gFagtixCHiI7QNhKWpJkqf8VeqPz3/3ms+RkLDYn/RbsF3DXKUhHwfU2KFI5UrOf0VtgnDm+LHo5lVeT4pLZJSbeumRSIvcyZfFEuQ9iaeFcKnUeHhY3Kd6ENCh2MSj2gg=
Received: by 10.38.181.38 with SMTP id d38mr1263785rnf;
        Tue, 16 Nov 2004 09:51:06 -0800 (PST)
Received: by 10.38.165.13 with HTTP; Tue, 16 Nov 2004 09:51:06 -0800 (PST)
Message-ID: <2fe5a4ca04111609512d92db53@mail.gmail.com>
Date: Tue, 16 Nov 2004 23:21:06 +0530
From: Venkatraju <venkatraju@gmail.com>
Reply-To: Venkatraju <venkatraju@gmail.com>
To: lucene-user <lucene-user@jakarta.apache.org>
Subject: Lucene - index fields design question
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I am a new user of Lucene. so please point me to
documentation/archives if these issues have been covered before.

I plan to use Lucene in a application with the following (fairly
standard) requirements:
- Index documents that contain a title, author, date and content
- It is fairly common to search for some text across all the fields
- Matches in the title field should be given more weightage over
matches in the content field
- Provide an option to restrict search to documents within a date range

Give these requirements, what is a good index design with search speed in mind?
Documents will have fields "title", "author", "date" and "content".
Should I make title and author part of the "content" as well so that
"search across all fields" will just become a search in "content"
field? If so, how do I give more weightage to matches in "title"
field?

The other option would be to expand a simple query to include searches
across all fields.
Ex.: Expand "abcd" to "title:abcd^4 OR content:abcd". Also, should the
boost for title field be applied in the query or is it better to
provide a boost to the title field during indexing (is that possible)?
Which of these options will work and be more effecient?

For date range limited search, can field values be integers? If not,
encoding the date as "YYYYMMDDHHMM" and then use a filter or a
RangeQuery - is that the way to do this?

Thanks,
Venkat

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11282-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 18:16:25 2004
Return-Path: <lucene-user-return-11282-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 776 invoked from network); 16 Nov 2004 18:16:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 18:16:25 -0000
Received: (qmail 27787 invoked by uid 500); 16 Nov 2004 18:16:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27764 invoked by uid 500); 16 Nov 2004 18:16:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27751 invoked by uid 99); 16 Nov 2004 18:16:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [66.219.38.35] (HELO exchange.inside.eclyptic.com) (66.219.38.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 10:16:15 -0800
Received: from 10.10.1.105 ([10.10.1.105]) by exchange.inside.eclyptic.com ([10.10.1.10]) with Microsoft Exchange Server HTTP-DAV ;
 Tue, 16 Nov 2004 18:16:23 +0000
Subject: RAM, FS Directory: Problem during merge
From: Ravi Rao <rrao@alterpoint.com>
To: lucene-user@jakarta.apache.org
Cc: Ravi Rao <rrao@alterpoint.com>
Content-Type: text/plain
Content-Transfer-Encoding: 7bit
Message-Id: <1100628970.21753.57.camel@rnr.inside.eclyptic.com>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.5-2.norlug 
Date: Tue, 16 Nov 2004 12:16:10 -0600
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

All,

Lucene 1.4 final.

I have an index that has to be updated frequently.  A search may
happen at any time.  I implemented this by indexing into a
RAMDirectory and then merging with an FSDirecotory at regular
intervals (or sometimes when a search is requested).  This seems to
work quite well.

On Linux, I have started seeing the following exception thrown.

java.io.IOException: read past EOF
  at
org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:220)
  at org.apache.lucene.store.InputStream.readBytes(InputStream.java:61)
  at org.apache.lucene.index.SegmentReader.norms(SegmentReader.java:357)
  at org.apache.lucene.index.SegmentReader.norms(SegmentReader.java:324)
  at
org.apache.lucene.index.SegmentMerger.mergeNorms(SegmentMerger.java:422)
  at org.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:94)
  at
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:487)
  at org.apache.lucene.index.IndexWriter.optimize(IndexWriter.java:366)
  at
org.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:381)

>>From reading the sources, the only way I can see this happening is if
the RAMDirectory is corrupted in some way.  Has anyone seen this
before?  I don't yet have access to the full logs so I don't have much
more information.

Many thanks,
-- 
Ravi/


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11283-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 19:07:17 2004
Return-Path: <lucene-user-return-11283-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23325 invoked from network); 16 Nov 2004 19:07:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 19:07:17 -0000
Received: (qmail 20056 invoked by uid 500); 16 Nov 2004 19:07:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19900 invoked by uid 500); 16 Nov 2004 19:07:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19859 invoked by uid 99); 16 Nov 2004 19:07:07 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST,FORGED_RCVD_HELO,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [167.206.5.42] (HELO mta9.srv.hcvlny.cv.net) (167.206.5.42)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 11:07:06 -0800
Received: from optonline.net (hamstr5.srv.hcvlny.cv.net [167.206.5.17])
 by mta9.srv.hcvlny.cv.net
 (iPlanet Messaging Server 5.2 HotFix 1.25 (built Mar  3 2004))
 with ESMTP id <0I7A00H06D3K96@mta9.srv.hcvlny.cv.net> for
 lucene-user@jakarta.apache.org; Tue, 16 Nov 2004 14:06:57 -0500 (EST)
Received: from [167.206.5.47] (Forwarded-For: [68.192.172.208])
 by mstr5.srv.hcvlny.cv.net (mshttpd); Tue, 16 Nov 2004 14:06:56 -0500
Date: Tue, 16 Nov 2004 14:06:56 -0500
From: jeichels@optonline.net
Subject: Re: Lucene : avoiding locking (incremental indexing)
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id: <b2fd30b2b448.b2b448b2fd30@optonline.net>
MIME-version: 1.0
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.25 (built Mar  3 2004)
Content-type: text/plain; charset=us-ascii
Content-language: en
Content-transfer-encoding: 7BIT
Content-disposition: inline
X-Accept-Language: en
Priority: normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


I am interested in pursuing experienced peoples' understanding as I have half the queue approach developed already.

I am not following why you don't like the queue approach Sergiu.  From what I gathered from this board, if you do lots of updates, the opening of the WriterIndex is very intensive and should be used in a batch orientation rather then on a one-at-a-time incremental approach.  In some cases on this board they talk about it being so overwhelming that people are putting forced delays so the Java engine can catch up.  Using a queueing approach, you may get a hit every 30 seconds or minute or...whatever you choose as your timeframe, but it should be enough of a delay to allow the java engine to not be overwhelmed.  I would like this not to happen with Lucene and would like to be able to update every time an update occurs, but this does not seem the right approach right now.  As I said before, this seems like a wish item for Lucene.  I don't really know if the wish is feasible.

So far the biggest problem I was facing with this approach, however, was having feedback from the archiving process to the main database that the archiving change actually has happened and correctly even if the server goes down.

JohnE





> Personally I don't like the Queue aproach... because I already 
> implemented multithreading in out application
> to improve its performance. In our application indexing is not a 
> high 
> priority, but it's happening quite often.
> Search is a priority.
> 
> Lucene allows to have more searches at on time. When you have a 
> big 
> index and a many users then ...
> the Queue aproach can slow down your application to much. I think 
> it 
> will be a bottleneck.
> 
> I know that the lock problem is annoying, but I also think that 
> the 
> right way is to identify the source of locking.
> Our application is a webbased application based on turbine, and 
> when we 
> want to restart tomcat, we just kill
> the process (otherwise we need to restart 2 times because of some 
> log4j 
> initialization problem), so ...
> the index is locked after the tomcat restart. In my case it makes 
> sense 
> to check if index is locked one time at
> startup. I'm also logging all errors that I get in the systems, 
> this is 
> helping me to find their sourcce easier.
> 
> All the best,
> 
> Sergiu
> 



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11284-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 19:29:57 2004
Return-Path: <lucene-user-return-11284-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32125 invoked from network); 16 Nov 2004 19:29:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 19:29:57 -0000
Received: (qmail 51600 invoked by uid 500); 16 Nov 2004 19:29:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51571 invoked by uid 500); 16 Nov 2004 19:29:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51553 invoked by uid 99); 16 Nov 2004 19:29:54 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 11:29:51 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Lucene - index fields design question
Date: Tue, 16 Nov 2004 11:29:45 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C02984053@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene - index fields design question
Thread-Index: AcTMBN70Z5t9R/miRMmYxcghv5Mn8wACjN1A
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"Venkatraju" <venkatraju@gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I do most of these same things and made these relevant design decisions:

1.  Use a combination of query expansion to search across multiple
fields and field concatenation to create document fields that combine
separate object fields.  I use multiple fields only when it is important
to weight them differently.  E.g., in my case the separate fields are
combined into just title and body document fields for general term
searching.  I expand queries (with my own expander after parsing) by
rewriting queries against the "default" field into an OR across title
and body with title boosted higher than body.
2.  One problem with the above concerns scoring (and this is also one of
the reasons to use concatenation rather than query expansion as much as
possible).  Lucene's BooleanQuery use sum-based scoring for OR's that is
further factored with the coord() adjustment (settable in the
Similarity).  This causes OR's to behave very poorly for the
field-expansion case.  E.g., if the query is foo bar, and  you expand
each term into title and body in the simplest way to produce title:foo^4
body:foo title:bar^4 body:bar, then a document with foo in title and bar
in body will get the same score as one with foo in title and foo in
body, clearly not desired.  There are at least 3 different solutions to
this problem discussed on this list.  I wrote my own MaxDisjunctionQuery
just to handle this case:  it uses max instead of sum for this kind of
OR query, and it does not use coord() (so use MaxDisjunctionQuery for
the OR's of the same term or other query across multiple fields, and
regular BooleanQuery to OR together the different terms or other
queries).  Paul Elschot wrote a more general DisjunctionQuery that can
be configured to do the same thing.  Doug Cutting came up with a
solution that does not require a new Query class; his solution expands
the query in a certain way and specializes certain existing methods.
You should be able to find these solutions by searching the archive
(e.g., search for MaxDisjunctionQuery and DisjunctionQuery and read the
threads).  Code is posted in one way or other.
3.  RangeQuery's are the way to do your date ranges, or any other
ranges.  The encodings need to be lexicographic, not integer.  E.g., 10
precedes 2, so pad with leading 0's (02 precedes 10).  If you need
negatives or floats, you need additional considerations to ensure
consistency with lexicographic order (invert the order of negatives and
use a sign representation such that the positive sign indicator follows
the negative sign indicator; floats require nothing special so long as
the integer portion is fixed length).  Dates encode naturally.  I add
additional fields like those used to search Ranges onto the Lucene
documents in addition to title and body.  There are numerous messages on
the list that discuss details of this, and there is a link to the web
site that goes through a complete example, including showing how to
specialize the query parser if you want users entering RangeQuery's in
Lucene syntax (either way you have to lexicographically encode both
queries and the document fields you index).

If you have more specific questions or cannot find the references,
please just ask.

Good luck,

Chuck


  > -----Original Message-----
  > From: Venkatraju [mailto:venkatraju@gmail.com]
  > Sent: Tuesday, November 16, 2004 9:51 AM
  > To: lucene-user
  > Subject: Lucene - index fields design question
  >=20
  > Hi,
  >=20
  > I am a new user of Lucene. so please point me to
  > documentation/archives if these issues have been covered before.
  >=20
  > I plan to use Lucene in a application with the following (fairly
  > standard) requirements:
  > - Index documents that contain a title, author, date and content
  > - It is fairly common to search for some text across all the fields
  > - Matches in the title field should be given more weightage over
  > matches in the content field
  > - Provide an option to restrict search to documents within a date
range
  >=20
  > Give these requirements, what is a good index design with search
speed
  > in mind?
  > Documents will have fields "title", "author", "date" and "content".
  > Should I make title and author part of the "content" as well so that
  > "search across all fields" will just become a search in "content"
  > field? If so, how do I give more weightage to matches in "title"
  > field?
  >=20
  > The other option would be to expand a simple query to include
searches
  > across all fields.
  > Ex.: Expand "abcd" to "title:abcd^4 OR content:abcd". Also, should
the
  > boost for title field be applied in the query or is it better to
  > provide a boost to the title field during indexing (is that
possible)?
  > Which of these options will work and be more effecient?
  >=20
  > For date range limited search, can field values be integers? If not,
  > encoding the date as "YYYYMMDDHHMM" and then use a filter or a
  > RangeQuery - is that the way to do this?
  >=20
  > Thanks,
  > Venkat
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11285-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 19:40:22 2004
Return-Path: <lucene-user-return-11285-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36758 invoked from network); 16 Nov 2004 19:40:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 19:40:21 -0000
Received: (qmail 71831 invoked by uid 500); 16 Nov 2004 19:40:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71805 invoked by uid 500); 16 Nov 2004 19:40:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71791 invoked by uid 99); 16 Nov 2004 19:40:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 11:40:15 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Tue, 16 Nov 2004 14:40:45 -0500
Message-ID: <098201c4cc14$2a0947c0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: _4c.fnm missing
Date: Tue, 16 Nov 2004 14:40:44 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_097F_01C4CBEA.41250EF0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 16 Nov 2004 19:40:45.0094 (UTC) FILETIME=[2A197460:01C4CC14]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_097F_01C4CBEA.41250EF0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I received the error below when I was attempting to over whelm my system =
with incremental update requests.

What is this file it is looking for? I checked the index. It contains:

_4c.del
_4d.cfs
deletable
segments

Where does _4c.fnm come from?

Here is the error:

Unable to create the create the writer and/or index new content =
/usr/tomcat/fb_hub/WEB-INF/index/_4c.fnm (No such file or directory).

Thanks,

Luke
------=_NextPart_000_097F_01C4CBEA.41250EF0--



From lucene-user-return-11286-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 20:10:02 2004
Return-Path: <lucene-user-return-11286-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49443 invoked from network); 16 Nov 2004 20:10:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 20:10:02 -0000
Received: (qmail 16855 invoked by uid 500); 16 Nov 2004 20:09:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16827 invoked by uid 500); 16 Nov 2004 20:09:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16814 invoked by uid 99); 16 Nov 2004 20:09:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [207.58.142.18] (HELO snowtide.com) (207.58.142.18)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 12:09:54 -0800
Received: from [127.0.0.1] (snowtide.com [127.0.0.1])
	by snowtide.com (8.12.8/8.12.8) with ESMTP id iAGKAHig010008;
	Tue, 16 Nov 2004 15:10:17 -0500
In-Reply-To: <08ff01c4cbf0$16667720$7703d00a@hypermedia.com>
References: <6c00cd3104111607193bdbde56@mail.gmail.com> <08ff01c4cbf0$16667720$7703d00a@hypermedia.com>
Mime-Version: 1.0 (Apple Message framework v619)
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <7D69B39D-380B-11D9-A797-000A95B336F2@snowtide.com>
Content-Transfer-Encoding: 7bit
Cc: "Miguel Angel" <angeles3d@gmail.com>
From: Chas Emerick <cemerick@snowtide.com>
Subject: Re: how do you work with PDF
Date: Tue, 16 Nov 2004 15:09:58 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Alternatively, you can use PDFTextStream (http://snowtide.com).

It also has an easy-to-use Lucene API, with code that looks like this:

Document doc = PDFDocumentFactory.buildPDFDocument(pdfFile, config);
indexWriter.addDocument(doc);

One of the nice advantages of this is that the resulting Lucene 
Document instance can also contain the PDF document's metadata 
attributes as Lucene Fields.

Here's a longer tutorial that covers this and more:

http://snowtide.com/home/PDFTextStream/techtips/easy_lucene_integration

Chas Emerick
cemerick@snowtide.com
Snowtide Informatics Systems

PDFTextStream: fast PDF text extraction for Java apps and Lucene
http://snowtide.com/home/PDFTextStream/

On Nov 16, 2004, at 10:22 AM, Luke Shannon wrote:

> www.pdfbox.org
>
> Once you get the package installed the code you can use is:
>
> Document doc = LucenePDFDocument.getDocument(file);
>       writer.addDocument(doc);
>
> This method returns the PDF in Lucene document format.
>
> Luke
>
> ----- Original Message -----
> From: "Miguel Angel" <angeles3d@gmail.com>
> To: <lucene-user@jakarta.apache.org>
> Sent: Tuesday, November 16, 2004 10:19 AM
> Subject: how do you work with PDF
>
>
>> Hi, i need know  how do you work with PDF, please give the process.
>> Thanks...
>>
>> -- 
>> Miguel Angel Angeles R.
>> Asesoria en Conectividad y Servidores
>> Telf. 97451277
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11287-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 20:15:38 2004
Return-Path: <lucene-user-return-11287-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54056 invoked from network); 16 Nov 2004 20:15:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 20:15:38 -0000
Received: (qmail 28204 invoked by uid 500); 16 Nov 2004 20:15:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28183 invoked by uid 500); 16 Nov 2004 20:15:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28169 invoked by uid 99); 16 Nov 2004 20:15:34 -0000
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.204.205.207] (HELO hemail101.i.frys.com) (63.204.205.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 12:15:31 -0800
Received: from 099972K036 (ays-1.is.corp.i.frys.com [10.100.0.60])
	by hemail101.i.frys.com (8.12.10/8.12.10) with SMTP id iAGKDIV1013621
	for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 12:13:18 -0800
Message-ID: <005201c4cc19$0bb02b40$3c00640a@099972K036>
From: "Abhay Saswade" <ays@i.frys.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20040629045128.89237.qmail@web12707.mail.yahoo.com>
Subject: Re: best ways of using IndexSearcher
Date: Tue, 16 Nov 2004 12:15:41 -0800
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,
Can I use single instance of IndexSearcher in multiple threads with sorting?
Thanks,
Abhay

----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, June 28, 2004 8:51 PM
Subject: Re: best ways of using IndexSearcher


> Anson,
>
> Use a single instance of IndexSearcher and, if you want to always 'see'
> even the latest index changes (deletes and adds since you opened the
> IndexSearcher) make sure to re-create the IndexSearcher when you detect
> that the index version has changed (see
>
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexReader.html#getCurrentVersion(org.apache.lucene.store.Directory))
>
> When you get the new IndexSearcher, leave the old instance alone - let
> the GC take care of it, and don't call close() on it, in case something
> in your application is still using that instance.
>
> This stuff is not really CPU intensive.  Disk I/O tends to be the
> bottleneck.  If you are working with multiple indices, spread them over
> multiple disks (not just partitions, real disks), if you can.
>
> Otis
>
>
> --- Anson Lau <alau@fulfil-net.com> wrote:
> > Hi Guys,
> >
> > What's the recommended way of using IndexSearcher? Should
> > IndexSearcher be a
> > singleton or pooled?  Would pooling provide a more scalable solution
> > by
> > allowing you to decide how many IndexSearcher to use based on say how
> > many
> > CPU u have on ur server?
> >
> > Thanks,
> >
> > Anson
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11288-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 20:21:06 2004
Return-Path: <lucene-user-return-11288-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62646 invoked from network); 16 Nov 2004 20:21:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 20:21:06 -0000
Received: (qmail 37244 invoked by uid 500); 16 Nov 2004 20:21:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37226 invoked by uid 500); 16 Nov 2004 20:21:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37211 invoked by uid 99); 16 Nov 2004 20:21:02 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.241] (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 16 Nov 2004 12:21:00 -0800
Received: (qmail 1906 invoked by uid 60001); 16 Nov 2004 20:20:57 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=RPtUErYBcqK1AUbvxfqLbjEz4ATjogZYFhBZ/g8A16Cfs4Kg9fZp89ZeYQ2p1iDhe+9s9Fkbg+QZVR8ryoGTq9mRCb4/yea1uUzioId6CvO9J1g8lx5PHRPDyzE2xQVsgPTK+AjYM4bJli18++lBtWiHEd4lGx/XYnTItM/C5ms=  ;
Message-ID: <20041116202056.1904.qmail@web12704.mail.yahoo.com>
Received: from [216.194.17.194] by web12704.mail.yahoo.com via HTTP; Tue, 16 Nov 2004 12:20:56 PST
Date: Tue, 16 Nov 2004 12:20:56 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: _4c.fnm missing
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <098201c4cc14$2a0947c0$7703d00a@hypermedia.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

 Field names are stored in the field info file, with suffix .fnm. - see
http://jakarta.apache.org/lucene/docs/fileformats.html

The .fnm should be inside the .cfs file (cfs files are compound files
that contain all index files described at the above URL).  Maybe you
can provide the code that causes this error in Bugzilla for somebody to
look at.  Does it consistently break?

Otis


--- Luke Shannon <lshannon@hypermedia.com> wrote:

> I received the error below when I was attempting to over whelm my
> system with incremental update requests.
> 
> What is this file it is looking for? I checked the index. It
> contains:
> 
> _4c.del
> _4d.cfs
> deletable
> segments
> 
> Where does _4c.fnm come from?
> 
> Here is the error:
> 
> Unable to create the create the writer and/or index new content
> /usr/tomcat/fb_hub/WEB-INF/index/_4c.fnm (No such file or directory).
> 
> Thanks,
> 
> Luke


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11289-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 20:23:29 2004
Return-Path: <lucene-user-return-11289-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63716 invoked from network); 16 Nov 2004 20:23:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 20:23:29 -0000
Received: (qmail 43727 invoked by uid 500); 16 Nov 2004 20:23:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43537 invoked by uid 500); 16 Nov 2004 20:23:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43524 invoked by uid 99); 16 Nov 2004 20:23:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 12:23:16 -0800
Received: from ifit.uni-klu.ac.at ([143.205.246.239]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 16 Nov 2004 21:23:08 +0100
Message-ID: <419A622A.4070301@ifit.uni-klu.ac.at>
Date: Tue, 16 Nov 2004 21:25:14 +0100
From: Sergiu Gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.5) Gecko/20031007
X-Accept-Language: de-at, en, ro, it, en-us
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Lucene : avoiding locking (incremental indexing)
References: <b2fd30b2b448.b2b448b2fd30@optonline.net>
In-Reply-To: <b2fd30b2b448.b2b448b2fd30@optonline.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-OriginalArrivalTime: 16 Nov 2004 20:23:09.0087 (UTC) FILETIME=[166FFAF0:01C4CC1A]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

jeichels@optonline.net wrote:

>I am interested in pursuing experienced peoples' understanding as I have half the queue approach developed already.
>  
>
well I think that experienced people developed lucene :)  theyoffered us 
the possibility to use multithreading and concurent searching.
Of course .. depends on requirements to use them or not. I choose to use 
them ... because I'm developing a web application.

>I am not following why you don't like the queue approach Sergiu.  From what I gathered from this board, if you do lots of updates, the opening of the WriterIndex is very intensive and should be used in a batch orientation rather then on a one-at-a-time incremental approach.  
>
That's not my case .. I have to reindex the information that is changed 
in our system. We are developing a knowledge management platform and
reindex the objects each time they are changed.

>In some cases on this board they talk about it being so overwhelming that people are putting forced delays so the Java engine can catch up.  
>
I haven'T had this kind of problems and I use multithreading when I 
reindex the whole index ... and the searches still work correctly 
whithout any locking
problems. I think that the locking problems come from outside .. and 
this locking sources should be identified.
But again .. this is just my case ...

>Using a queueing approach, you may get a hit every 30 seconds or minute or...whatever you choose as your timeframe, but it should be enough of a delay to allow the java engine to not be overwhelmed.
>
No .. I cannot accept this because our users should be able to change 
information in the system and to make searches in the same time, without 
having to wait
to much for server response ...

>  I would like this not to happen with Lucene and would like to be able to update every time an update occurs, but this does not seem the right approach right now.  As I said before, this seems like a wish item for Lucene.  I don't really know if the wish is feasible.
>  
>
I agree that maybe a built in function for identifying false locking 
would be very usefull ... but it might be also a little bit bad for the 
users because they
will be tempted to unlock index ... instead of closing readers/writers 
correctly.

>So far the biggest problem I was facing with this approach, however, was having feedback from the archiving process to the main database that the archiving change actually has happened and correctly even if the server goes down.
>  
>
... so .. it may work correctly if we use lucene (and the servers and 
the OS)  correctly :)

  Maybe it will be a good idea to create some junit/jmeter tests to 
identify the source of  unespected locks.
This is also depending on your availability. But I think it will worth 
the effort.

 Sergiu

>JohnE
>
>
>
>
>
>  
>
>>Personally I don't like the Queue aproach... because I already 
>>implemented multithreading in out application
>>to improve its performance. In our application indexing is not a 
>>high 
>>priority, but it's happening quite often.
>>Search is a priority.
>>
>>Lucene allows to have more searches at on time. When you have a 
>>big 
>>index and a many users then ...
>>the Queue aproach can slow down your application to much. I think 
>>it 
>>will be a bottleneck.
>>
>>I know that the lock problem is annoying, but I also think that 
>>the 
>>right way is to identify the source of locking.
>>Our application is a webbased application based on turbine, and 
>>when we 
>>want to restart tomcat, we just kill
>>the process (otherwise we need to restart 2 times because of some 
>>log4j 
>>initialization problem), so ...
>>the index is locked after the tomcat restart. In my case it makes 
>>sense 
>>to check if index is locked one time at
>>startup. I'm also logging all errors that I get in the systems, 
>>this is 
>>helping me to find their sourcce easier.
>>
>>All the best,
>>
>>Sergiu
>>
>>    
>>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11290-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 20:24:21 2004
Return-Path: <lucene-user-return-11290-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64194 invoked from network); 16 Nov 2004 20:24:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 20:24:20 -0000
Received: (qmail 47032 invoked by uid 500); 16 Nov 2004 20:24:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47004 invoked by uid 500); 16 Nov 2004 20:24:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 46989 invoked by uid 99); 16 Nov 2004 20:24:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 12:24:13 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Tue, 16 Nov 2004 15:24:42 -0500
Message-ID: <099501c4cc1a$4e42c070$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041116202056.1904.qmail@web12704.mail.yahoo.com>
Subject: Re: _4c.fnm missing
Date: Tue, 16 Nov 2004 15:24:42 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 16 Nov 2004 20:24:42.0770 (UTC) FILETIME=[4E46DF20:01C4CC1A]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It conistantly breaks when I run more than 10 concurrent incremental
updates.

I can post the code on Bugzilla (hopefully when I get to the site it will be
obvious how I can post things).

Luke

----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, November 16, 2004 3:20 PM
Subject: Re: _4c.fnm missing


> Field names are stored in the field info file, with suffix .fnm. - see
> http://jakarta.apache.org/lucene/docs/fileformats.html
>
> The .fnm should be inside the .cfs file (cfs files are compound files
> that contain all index files described at the above URL).  Maybe you
> can provide the code that causes this error in Bugzilla for somebody to
> look at.  Does it consistently break?
>
> Otis
>
>
> --- Luke Shannon <lshannon@hypermedia.com> wrote:
>
> > I received the error below when I was attempting to over whelm my
> > system with incremental update requests.
> >
> > What is this file it is looking for? I checked the index. It
> > contains:
> >
> > _4c.del
> > _4d.cfs
> > deletable
> > segments
> >
> > Where does _4c.fnm come from?
> >
> > Here is the error:
> >
> > Unable to create the create the writer and/or index new content
> > /usr/tomcat/fb_hub/WEB-INF/index/_4c.fnm (No such file or directory).
> >
> > Thanks,
> >
> > Luke
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11291-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 20:35:25 2004
Return-Path: <lucene-user-return-11291-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68720 invoked from network); 16 Nov 2004 20:35:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 20:35:25 -0000
Received: (qmail 69264 invoked by uid 500); 16 Nov 2004 20:35:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69246 invoked by uid 500); 16 Nov 2004 20:35:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69233 invoked by uid 99); 16 Nov 2004 20:35:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.135.195.111] (HELO wc-mail.multivisioninc.com) (206.135.195.111)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 12:35:20 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: BooleanQuery - TooManyClauses Issue
Date: Tue, 16 Nov 2004 12:35:13 -0800
Message-ID: <8469BF7E9827FC48A81C9CC6983EAB73015BB784@wc-mail.multivisioninc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: BooleanQuery - TooManyClauses Issue
Thread-Index: AcTMGcx9QE0FBvlTTFmKDR3d0sLQtQAACKwg
From: "Joe Krause" <JKrause@multivisioninc.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hey Folks, I just inherited a deployed Lucene based application that
started throwing the following exception:

org.apache.lucene.search.BooleanQuery$TooManyClauses
        at
org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:79)
        at
org.apache.lucene.search.BooleanQuery.add(BooleanQuery.java:71)
        at
org.apache.lucene.search.RangeQuery.rewrite(RangeQuery.java:99)
        at
org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:243)
        at
org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:166)
        at org.apache.lucene.search.Query.weight(Query.java:84)
        at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:117)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:51)
        at org.apache.lucene.search.Searcher.search(Searcher.java:41)
        at
com.multivision.util.search.HitIndex.search(HitIndex.java:121)
        at
com.multivision.util.search.HitSearchAgent.search(HitSearchAgent.java:83
)
        at com.multivision.model.HitModel.list(HitModel.java:80)
        at
com.multivision.actions.client.hits.SearchAction.action(SearchAction.jav
a:81)
        at
com.multivision.actions.ClientAuthenticated.doExecute(ClientAuthenticate
d.java:45)
        at
com.multivision.actions.MultivisionAction.execute(MultivisionAction.java
:41)
        at
org.apache.struts.action.RequestProcessor.processActionPerform(RequestPr
ocessor.java:421)
        at
org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:
226)
        at
org.apache.struts.action.ActionServlet.process(ActionServlet.java:1164)
        at
org.apache.struts.action.ActionServlet.doGet(ActionServlet.java:397)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:689)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:802)
        ...

It wasn't doing this two weeks ago, but it started doing it this week. I
deleted the index directory and reindexed all the files, but that
doesn't seem to help.

I did some research regarding this error and found out that the default
number of clauses a BooleanQuery can contain are 1024 (a limitation, but
one that seems reasonable to work with). I outputted the contents of the
org.apache.lucene.search.Query object and the
org.apache.lucene.search.Sort objects right before I sent them to the
org.apache.lucene.search.IndexSearcher - to see if there are too many
clauses being accidentally produced. This is what I get:

2004-11-16 12:09:40,302 DEBUG  com.multivision.util.search.HitIndex -
Query =3D +(affiliate:teeth market:teeth dma_rank:teeth program:teeth
station:teeth text:teeth) +air_date:[0401010000 TO 0411162359]

2004-11-16 12:09:40,302 DEBUG com.multivision.util.search.HitIndex -
Sort =3D "air_date"!,"dma_rank"

So there appears to be far fewer than 1024 clauses. Is there any other
reasons why I would be getting this exception? I am new to Lucene, so at
this point I am stumped.

Thanks for your help!

Joe Krause

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11292-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 20:40:07 2004
Return-Path: <lucene-user-return-11292-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 71863 invoked from network); 16 Nov 2004 20:40:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 20:40:07 -0000
Received: (qmail 79687 invoked by uid 500); 16 Nov 2004 20:40:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 79662 invoked by uid 500); 16 Nov 2004 20:40:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 79647 invoked by uid 99); 16 Nov 2004 20:40:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 12:39:59 -0800
Received: from [192.168.0.4] [217.165.86.199] by mail.bayt.net with ESMTP
  (SMTPD32-8.14) id A7839C4300F0; Tue, 16 Nov 2004 15:48:03 -0500
Message-ID: <419A6597.4080804@bayt.net>
Date: Wed, 17 Nov 2004 00:39:51 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: _4c.fnm missing
References: <20041116202056.1904.qmail@web12704.mail.yahoo.com> <099501c4cc1a$4e42c070$7703d00a@hypermedia.com>
In-Reply-To: <099501c4cc1a$4e42c070$7703d00a@hypermedia.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

what kind of incremental updates are you doing, because we update our index every 15 minutes with 100 ~ 200 documents and we're writing to a 6 GB memory resident index, the IndexWriter runs one instance at a time, so what kind of increments are we talking about it takes a bit of doing to overwhelm Lucene.

What's your update schedule, how big is the index, and after how many updates does the system crash?

Nader Henein



Luke Shannon wrote:

>It conistantly breaks when I run more than 10 concurrent incremental
>updates.
>
>I can post the code on Bugzilla (hopefully when I get to the site it will be
>obvious how I can post things).
>
>Luke
>
>----- Original Message ----- 
>From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>Sent: Tuesday, November 16, 2004 3:20 PM
>Subject: Re: _4c.fnm missing
>
>
>  
>
>>Field names are stored in the field info file, with suffix .fnm. - see
>>http://jakarta.apache.org/lucene/docs/fileformats.html
>>
>>The .fnm should be inside the .cfs file (cfs files are compound files
>>that contain all index files described at the above URL).  Maybe you
>>can provide the code that causes this error in Bugzilla for somebody to
>>look at.  Does it consistently break?
>>
>>Otis
>>
>>
>>--- Luke Shannon <lshannon@hypermedia.com> wrote:
>>
>>    
>>
>>>I received the error below when I was attempting to over whelm my
>>>system with incremental update requests.
>>>
>>>What is this file it is looking for? I checked the index. It
>>>contains:
>>>
>>>_4c.del
>>>_4d.cfs
>>>deletable
>>>segments
>>>
>>>Where does _4c.fnm come from?
>>>
>>>Here is the error:
>>>
>>>Unable to create the create the writer and/or index new content
>>>/usr/tomcat/fb_hub/WEB-INF/index/_4c.fnm (No such file or directory).
>>>
>>>Thanks,
>>>
>>>Luke
>>>      
>>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>    
>>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11293-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 20:48:41 2004
Return-Path: <lucene-user-return-11293-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76050 invoked from network); 16 Nov 2004 20:48:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 20:48:40 -0000
Received: (qmail 97722 invoked by uid 500); 16 Nov 2004 20:48:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97705 invoked by uid 500); 16 Nov 2004 20:48:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97686 invoked by uid 99); 16 Nov 2004 20:48:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 12:48:34 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Tue, 16 Nov 2004 15:49:04 -0500
Message-ID: <09a601c4cc1d$b590a550$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	<nsh@bayt.net>
References: <20041116202056.1904.qmail@web12704.mail.yahoo.com> <099501c4cc1a$4e42c070$7703d00a@hypermedia.com> <419A6597.4080804@bayt.net>
Subject: Re: _4c.fnm missing
Date: Tue, 16 Nov 2004 15:49:04 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 16 Nov 2004 20:49:04.0608 (UTC) FILETIME=[B599A600:01C4CC1D]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The schedule is determined by the users of the system. Basically when the
user(s) change the content (adding/deleting a folder or file, modify a
file's content) through a web based interface a re-index is required of the
content. This could happen 20 times in the span of a few seconds or once in
an hour.

I doubt I am overwhelming Lucene, I think the problem is in my code and how
I am managing the deleting and writing to the Index.

----- Original Message ----- 
From: "Nader Henein" <nsh@bayt.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, November 16, 2004 3:39 PM
Subject: Re: _4c.fnm missing


> what kind of incremental updates are you doing, because we update our
index every 15 minutes with 100 ~ 200 documents and we're writing to a 6 GB
memory resident index, the IndexWriter runs one instance at a time, so what
kind of increments are we talking about it takes a bit of doing to overwhelm
Lucene.
>
> What's your update schedule, how big is the index, and after how many
updates does the system crash?
>
> Nader Henein
>
>
>
> Luke Shannon wrote:
>
> >It conistantly breaks when I run more than 10 concurrent incremental
> >updates.
> >
> >I can post the code on Bugzilla (hopefully when I get to the site it will
be
> >obvious how I can post things).
> >
> >Luke
> >
> >----- Original Message ----- 
> >From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> >To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >Sent: Tuesday, November 16, 2004 3:20 PM
> >Subject: Re: _4c.fnm missing
> >
> >
> >
> >
> >>Field names are stored in the field info file, with suffix .fnm. - see
> >>http://jakarta.apache.org/lucene/docs/fileformats.html
> >>
> >>The .fnm should be inside the .cfs file (cfs files are compound files
> >>that contain all index files described at the above URL).  Maybe you
> >>can provide the code that causes this error in Bugzilla for somebody to
> >>look at.  Does it consistently break?
> >>
> >>Otis
> >>
> >>
> >>--- Luke Shannon <lshannon@hypermedia.com> wrote:
> >>
> >>
> >>
> >>>I received the error below when I was attempting to over whelm my
> >>>system with incremental update requests.
> >>>
> >>>What is this file it is looking for? I checked the index. It
> >>>contains:
> >>>
> >>>_4c.del
> >>>_4d.cfs
> >>>deletable
> >>>segments
> >>>
> >>>Where does _4c.fnm come from?
> >>>
> >>>Here is the error:
> >>>
> >>>Unable to create the create the writer and/or index new content
> >>>/usr/tomcat/fb_hub/WEB-INF/index/_4c.fnm (No such file or directory).
> >>>
> >>>Thanks,
> >>>
> >>>Luke
> >>>
> >>>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >>
> >>
> >>
> >
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11294-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 20:57:07 2004
Return-Path: <lucene-user-return-11294-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 80030 invoked from network); 16 Nov 2004 20:57:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 20:57:05 -0000
Received: (qmail 18248 invoked by uid 500); 16 Nov 2004 20:57:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18185 invoked by uid 500); 16 Nov 2004 20:57:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18122 invoked by uid 99); 16 Nov 2004 20:57:02 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 12:57:00 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Tue, 16 Nov 2004 15:57:32 -0500
Message-ID: <09b201c4cc1e$e4605460$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	<nsh@bayt.net>
References: <20041116202056.1904.qmail@web12704.mail.yahoo.com> <099501c4cc1a$4e42c070$7703d00a@hypermedia.com> <419A6597.4080804@bayt.net>
Subject: Re: _4c.fnm missing
Date: Tue, 16 Nov 2004 15:57:32 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 16 Nov 2004 20:57:32.0563 (UTC) FILETIME=[E45D6E30:01C4CC1E]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This is the latest error I have received:

IndexReader out of date and no longer valid for delete, undelete, or setNorm
operations

I need synchronize this process more carefully. I think this goes back to
the point that during my incremental update I sometimes need to forcefully
clear the lock on the Index. I am not managing the deleting and writing to
the Index correctly.

The first thing I am doing is tracking down the cause of this situation so I
don't need to forcefully clear locks anymore.

----- Original Message ----- 
From: "Nader Henein" <nsh@bayt.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, November 16, 2004 3:39 PM
Subject: Re: _4c.fnm missing


> what kind of incremental updates are you doing, because we update our
index every 15 minutes with 100 ~ 200 documents and we're writing to a 6 GB
memory resident index, the IndexWriter runs one instance at a time, so what
kind of increments are we talking about it takes a bit of doing to overwhelm
Lucene.
>
> What's your update schedule, how big is the index, and after how many
updates does the system crash?
>
> Nader Henein
>
>
>
> Luke Shannon wrote:
>
> >It conistantly breaks when I run more than 10 concurrent incremental
> >updates.
> >
> >I can post the code on Bugzilla (hopefully when I get to the site it will
be
> >obvious how I can post things).
> >
> >Luke
> >
> >----- Original Message ----- 
> >From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> >To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >Sent: Tuesday, November 16, 2004 3:20 PM
> >Subject: Re: _4c.fnm missing
> >
> >
> >
> >
> >>Field names are stored in the field info file, with suffix .fnm. - see
> >>http://jakarta.apache.org/lucene/docs/fileformats.html
> >>
> >>The .fnm should be inside the .cfs file (cfs files are compound files
> >>that contain all index files described at the above URL).  Maybe you
> >>can provide the code that causes this error in Bugzilla for somebody to
> >>look at.  Does it consistently break?
> >>
> >>Otis
> >>
> >>
> >>--- Luke Shannon <lshannon@hypermedia.com> wrote:
> >>
> >>
> >>
> >>>I received the error below when I was attempting to over whelm my
> >>>system with incremental update requests.
> >>>
> >>>What is this file it is looking for? I checked the index. It
> >>>contains:
> >>>
> >>>_4c.del
> >>>_4d.cfs
> >>>deletable
> >>>segments
> >>>
> >>>Where does _4c.fnm come from?
> >>>
> >>>Here is the error:
> >>>
> >>>Unable to create the create the writer and/or index new content
> >>>/usr/tomcat/fb_hub/WEB-INF/index/_4c.fnm (No such file or directory).
> >>>
> >>>Thanks,
> >>>
> >>>Luke
> >>>
> >>>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >>
> >>
> >>
> >
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11295-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 20:59:57 2004
Return-Path: <lucene-user-return-11295-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81690 invoked from network); 16 Nov 2004 20:59:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 20:59:57 -0000
Received: (qmail 26433 invoked by uid 500); 16 Nov 2004 20:59:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26414 invoked by uid 500); 16 Nov 2004 20:59:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26400 invoked by uid 99); 16 Nov 2004 20:59:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 12:59:50 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iAGKxkJ25273
	for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 14:59:46 -0600 (CST)
Subject: Re: _4c.fnm missing
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <09b201c4cc1e$e4605460$7703d00a@hypermedia.com>
References: <20041116202056.1904.qmail@web12704.mail.yahoo.com>
	 <099501c4cc1a$4e42c070$7703d00a@hypermedia.com> <419A6597.4080804@bayt.net>
	 <09b201c4cc1e$e4605460$7703d00a@hypermedia.com>
Content-Type: text/plain
Message-Id: <1100638772.12377.15.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Tue, 16 Nov 2004 14:59:32 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tue, 2004-11-16 at 14:57, Luke Shannon wrote:
> This is the latest error I have received:
> 
> IndexReader out of date and no longer valid for delete, undelete, or setNorm
> operations

What you need to do is check the version number of the index to
determine if you need to open a new IndexReader for deletes. Remember,
this must be synchronized with the same lock you are using to control
access to the index for locks.

Luke


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11296-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 21:01:41 2004
Return-Path: <lucene-user-return-11296-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 82820 invoked from network); 16 Nov 2004 21:01:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 21:01:40 -0000
Received: (qmail 36784 invoked by uid 500); 16 Nov 2004 21:01:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36706 invoked by uid 500); 16 Nov 2004 21:01:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36622 invoked by uid 99); 16 Nov 2004 21:01:34 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.243] (HELO web12706.mail.yahoo.com) (216.136.173.243)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 16 Nov 2004 13:01:32 -0800
Received: (qmail 32789 invoked by uid 60001); 16 Nov 2004 21:01:28 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=z3PSrrht/Zwbd19YNBpC7rJ+ii7hmo/BOLdf9vHv/QJdKOW0wbyThfn39hRpBXDcWMQASiSxBykPkCzYLvbuaUt7nO4YYQNXDVHK5PMhf8nUdf1Dkn8YHvPVTecZaARFoU4aw7otD5VnSrwYWOnn9MG5DnX+V6lvtC4gqpMfZaE=  ;
Message-ID: <20041116210127.32783.qmail@web12706.mail.yahoo.com>
Received: from [216.194.17.194] by web12706.mail.yahoo.com via HTTP; Tue, 16 Nov 2004 13:01:27 PST
Date: Tue, 16 Nov 2004 13:01:27 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: _4c.fnm missing
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <099501c4cc1a$4e42c070$7703d00a@hypermedia.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

'Concurrent' and 'updates' in the same sentence sounds like a possible
source of the problem.  You have to use a single IndexWriter and it
should not overlap with an IndexReader that is doing deletes.

Otis

--- Luke Shannon <lshannon@hypermedia.com> wrote:

> It conistantly breaks when I run more than 10 concurrent incremental
> updates.
> 
> I can post the code on Bugzilla (hopefully when I get to the site it
> will be
> obvious how I can post things).
> 
> Luke
> 
> ----- Original Message ----- 
> From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Tuesday, November 16, 2004 3:20 PM
> Subject: Re: _4c.fnm missing
> 
> 
> > Field names are stored in the field info file, with suffix .fnm. -
> see
> > http://jakarta.apache.org/lucene/docs/fileformats.html
> >
> > The .fnm should be inside the .cfs file (cfs files are compound
> files
> > that contain all index files described at the above URL).  Maybe
> you
> > can provide the code that causes this error in Bugzilla for
> somebody to
> > look at.  Does it consistently break?
> >
> > Otis
> >
> >
> > --- Luke Shannon <lshannon@hypermedia.com> wrote:
> >
> > > I received the error below when I was attempting to over whelm my
> > > system with incremental update requests.
> > >
> > > What is this file it is looking for? I checked the index. It
> > > contains:
> > >
> > > _4c.del
> > > _4d.cfs
> > > deletable
> > > segments
> > >
> > > Where does _4c.fnm come from?
> > >
> > > Here is the error:
> > >
> > > Unable to create the create the writer and/or index new content
> > > /usr/tomcat/fb_hub/WEB-INF/index/_4c.fnm (No such file or
> directory).
> > >
> > > Thanks,
> > >
> > > Luke
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> >
> >
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11297-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 21:18:55 2004
Return-Path: <lucene-user-return-11297-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89856 invoked from network); 16 Nov 2004 21:18:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 21:18:55 -0000
Received: (qmail 68466 invoked by uid 500); 16 Nov 2004 21:18:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68268 invoked by uid 500); 16 Nov 2004 21:18:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68255 invoked by uid 99); 16 Nov 2004 21:18:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 13:18:51 -0800
Received: from [192.168.0.4] [217.165.86.199] by mail.bayt.net with ESMTP
  (SMTPD32-8.14) id A09F5B1F00F4; Tue, 16 Nov 2004 16:26:55 -0500
Message-ID: <419A6EB2.5040503@bayt.net>
Date: Wed, 17 Nov 2004 01:18:42 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: _4c.fnm missing
References: <20041116210127.32783.qmail@web12706.mail.yahoo.com>
In-Reply-To: <20041116210127.32783.qmail@web12706.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

That's it, you need to batch your updates, it comes down to do you need to give your users search accuracy to the second, take your  database and put an is_dirty row on the master table of the object you're indexing and run a scheduled task every x minutes and have your process read the objects that are set to dirty and then re set the flag once they've been indexed correctly.

my two cents

Nader



Otis Gospodnetic wrote:

>'Concurrent' and 'updates' in the same sentence sounds like a possible
>source of the problem.  You have to use a single IndexWriter and it
>should not overlap with an IndexReader that is doing deletes.
>
>Otis
>
>--- Luke Shannon <lshannon@hypermedia.com> wrote:
>
>  
>
>>It conistantly breaks when I run more than 10 concurrent incremental
>>updates.
>>
>>I can post the code on Bugzilla (hopefully when I get to the site it
>>will be
>>obvious how I can post things).
>>
>>Luke
>>
>>----- Original Message ----- 
>>From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
>>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
>>Sent: Tuesday, November 16, 2004 3:20 PM
>>Subject: Re: _4c.fnm missing
>>
>>
>>    
>>
>>>Field names are stored in the field info file, with suffix .fnm. -
>>>      
>>>
>>see
>>    
>>
>>>http://jakarta.apache.org/lucene/docs/fileformats.html
>>>
>>>The .fnm should be inside the .cfs file (cfs files are compound
>>>      
>>>
>>files
>>    
>>
>>>that contain all index files described at the above URL).  Maybe
>>>      
>>>
>>you
>>    
>>
>>>can provide the code that causes this error in Bugzilla for
>>>      
>>>
>>somebody to
>>    
>>
>>>look at.  Does it consistently break?
>>>
>>>Otis
>>>
>>>
>>>--- Luke Shannon <lshannon@hypermedia.com> wrote:
>>>
>>>      
>>>
>>>>I received the error below when I was attempting to over whelm my
>>>>system with incremental update requests.
>>>>
>>>>What is this file it is looking for? I checked the index. It
>>>>contains:
>>>>
>>>>_4c.del
>>>>_4d.cfs
>>>>deletable
>>>>segments
>>>>
>>>>Where does _4c.fnm come from?
>>>>
>>>>Here is the error:
>>>>
>>>>Unable to create the create the writer and/or index new content
>>>>/usr/tomcat/fb_hub/WEB-INF/index/_4c.fnm (No such file or
>>>>        
>>>>
>>directory).
>>    
>>
>>>>Thanks,
>>>>
>>>>Luke
>>>>        
>>>>
>>>
>>>      
>>>
>>---------------------------------------------------------------------
>>    
>>
>>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>For additional commands, e-mail:
>>>      
>>>
>>lucene-user-help@jakarta.apache.org
>>    
>>
>>>      
>>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11298-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 21:43:49 2004
Return-Path: <lucene-user-return-11298-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99432 invoked from network); 16 Nov 2004 21:43:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 21:43:49 -0000
Received: (qmail 11666 invoked by uid 500); 16 Nov 2004 21:43:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11640 invoked by uid 500); 16 Nov 2004 21:43:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11626 invoked by uid 99); 16 Nov 2004 21:43:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 13:43:44 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Tue, 16 Nov 2004 16:44:12 -0500
Message-ID: <09c501c4cc25$6a0c6530$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	<nsh@bayt.net>
References: <20041116210127.32783.qmail@web12706.mail.yahoo.com> <419A6EB2.5040503@bayt.net>
Subject: Re: _4c.fnm missing
Date: Tue, 16 Nov 2004 16:44:13 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 16 Nov 2004 21:44:12.0636 (UTC) FILETIME=[6956A9C0:01C4CC25]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It doesn't have to be to the second. If things take a few minutes it's ok.

It looks like the first lock issue I'm hitting in my program is when I try
and delete from the Index for the first time. No writer has been created
yet, only the reader so I am not sure why it thinks its locked.

----- Original Message ----- 
From: "Nader Henein" <nsh@bayt.net>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, November 16, 2004 4:18 PM
Subject: Re: _4c.fnm missing


> That's it, you need to batch your updates, it comes down to do you need to
give your users search accuracy to the second, take your  database and put
an is_dirty row on the master table of the object you're indexing and run a
scheduled task every x minutes and have your process read the objects that
are set to dirty and then re set the flag once they've been indexed
correctly.
>
> my two cents
>
> Nader
>
>
>
> Otis Gospodnetic wrote:
>
> >'Concurrent' and 'updates' in the same sentence sounds like a possible
> >source of the problem.  You have to use a single IndexWriter and it
> >should not overlap with an IndexReader that is doing deletes.
> >
> >Otis
> >
> >--- Luke Shannon <lshannon@hypermedia.com> wrote:
> >
> >
> >
> >>It conistantly breaks when I run more than 10 concurrent incremental
> >>updates.
> >>
> >>I can post the code on Bugzilla (hopefully when I get to the site it
> >>will be
> >>obvious how I can post things).
> >>
> >>Luke
> >>
> >>----- Original Message ----- 
> >>From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> >>To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> >>Sent: Tuesday, November 16, 2004 3:20 PM
> >>Subject: Re: _4c.fnm missing
> >>
> >>
> >>
> >>
> >>>Field names are stored in the field info file, with suffix .fnm. -
> >>>
> >>>
> >>see
> >>
> >>
> >>>http://jakarta.apache.org/lucene/docs/fileformats.html
> >>>
> >>>The .fnm should be inside the .cfs file (cfs files are compound
> >>>
> >>>
> >>files
> >>
> >>
> >>>that contain all index files described at the above URL).  Maybe
> >>>
> >>>
> >>you
> >>
> >>
> >>>can provide the code that causes this error in Bugzilla for
> >>>
> >>>
> >>somebody to
> >>
> >>
> >>>look at.  Does it consistently break?
> >>>
> >>>Otis
> >>>
> >>>
> >>>--- Luke Shannon <lshannon@hypermedia.com> wrote:
> >>>
> >>>
> >>>
> >>>>I received the error below when I was attempting to over whelm my
> >>>>system with incremental update requests.
> >>>>
> >>>>What is this file it is looking for? I checked the index. It
> >>>>contains:
> >>>>
> >>>>_4c.del
> >>>>_4d.cfs
> >>>>deletable
> >>>>segments
> >>>>
> >>>>Where does _4c.fnm come from?
> >>>>
> >>>>Here is the error:
> >>>>
> >>>>Unable to create the create the writer and/or index new content
> >>>>/usr/tomcat/fb_hub/WEB-INF/index/_4c.fnm (No such file or
> >>>>
> >>>>
> >>directory).
> >>
> >>
> >>>>Thanks,
> >>>>
> >>>>Luke
> >>>>
> >>>>
> >>>
> >>>
> >>>
> >>---------------------------------------------------------------------
> >>
> >>
> >>>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>>For additional commands, e-mail:
> >>>
> >>>
> >>lucene-user-help@jakarta.apache.org
> >>
> >>
> >>>
> >>>
> >>
> >>---------------------------------------------------------------------
> >>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >>
> >>
> >>
> >>
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> >For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> >
> >
> >
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11299-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 22:32:52 2004
Return-Path: <lucene-user-return-11299-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19268 invoked from network); 16 Nov 2004 22:32:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 22:32:52 -0000
Received: (qmail 99903 invoked by uid 500); 16 Nov 2004 22:32:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99809 invoked by uid 500); 16 Nov 2004 22:32:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99796 invoked by uid 99); 16 Nov 2004 22:32:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 14:32:42 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.12.11/8.12.11) with ESMTP id iAGMWbpT043053
	for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 23:32:37 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: BooleanQuery - TooManyClauses Issue
Date: Tue, 16 Nov 2004 23:32:37 +0100
User-Agent: KMail/1.5.4
References: <8469BF7E9827FC48A81C9CC6983EAB73015BB784@wc-mail.multivisioninc.com>
In-Reply-To: <8469BF7E9827FC48A81C9CC6983EAB73015BB784@wc-mail.multivisioninc.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411162332.37080.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tuesday 16 November 2004 21:35, Joe Krause wrote:
> Hey Folks, I just inherited a deployed Lucene based application that
> started throwing the following exception:
> 
> org.apache.lucene.search.BooleanQuery$TooManyClauses
...
> I did some research regarding this error and found out that the default
> number of clauses a BooleanQuery can contain are 1024 (a limitation, but
> one that seems reasonable to work with). I outputted the contents of the
> org.apache.lucene.search.Query object and the
> org.apache.lucene.search.Sort objects right before I sent them to the
> org.apache.lucene.search.IndexSearcher - to see if there are too many
> clauses being accidentally produced. This is what I get:
> 
> 2004-11-16 12:09:40,302 DEBUG  com.multivision.util.search.HitIndex -
> Query = +(affiliate:teeth market:teeth dma_rank:teeth program:teeth
> station:teeth text:teeth) +air_date:[0401010000 TO 0411162359]
> 
> 2004-11-16 12:09:40,302 DEBUG com.multivision.util.search.HitIndex -
> Sort = "air_date"!,"dma_rank"
> 
> So there appears to be far fewer than 1024 clauses. Is there any other
> reasons why I would be getting this exception? I am new to Lucene, so at
> this point I am stumped.

The range query:
+air_date:[0401010000 TO 0411162359]
is almost certainly causing your problems. It expands further to all terms
in the range. Several solutions to this have been discussed earlier,
ao. splitting dates into day and time components.
Once you approach 1000 days, you'll get the same problem again,
so you might want to use a filter for the dates.
See DateFilter and the archives on YYYYMMDD.

Regards,
Paul Elschot.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11300-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 16 22:38:14 2004
Return-Path: <lucene-user-return-11300-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21184 invoked from network); 16 Nov 2004 22:38:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 16 Nov 2004 22:38:13 -0000
Received: (qmail 7144 invoked by uid 500); 16 Nov 2004 22:37:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7077 invoked by uid 500); 16 Nov 2004 22:37:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7053 invoked by uid 99); 16 Nov 2004 22:37:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 14:37:46 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iAGMbcJ27737
	for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 16:37:38 -0600 (CST)
Subject: Re: BooleanQuery - TooManyClauses Issue
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200411162332.37080.paul.elschot@xs4all.nl>
References: 
	 <8469BF7E9827FC48A81C9CC6983EAB73015BB784@wc-mail.multivisioninc.com>
	 <200411162332.37080.paul.elschot@xs4all.nl>
Content-Type: text/plain
Message-Id: <1100644647.12377.18.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Tue, 16 Nov 2004 16:37:27 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tue, 2004-11-16 at 16:32, Paul Elschot wrote:

> Once you approach 1000 days, you'll get the same problem again,
> so you might want to use a filter for the dates.
> See DateFilter and the archives on YYYYMMDD.

Can anyone point to a good example of how to use the DateFilter?

Thanks,
Luke


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11301-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 00:08:02 2004
Return-Path: <lucene-user-return-11301-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61632 invoked from network); 17 Nov 2004 00:08:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 00:08:02 -0000
Received: (qmail 32060 invoked by uid 500); 17 Nov 2004 00:07:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32023 invoked by uid 500); 17 Nov 2004 00:07:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 32010 invoked by uid 99); 17 Nov 2004 00:07:58 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.190.39.192] (HELO web53002.mail.yahoo.com) (206.190.39.192)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 16 Nov 2004 16:07:56 -0800
Received: (qmail 5347 invoked by uid 60001); 17 Nov 2004 00:07:51 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=0SuXRvK/alDDYboArqgf0s6D2aNWP57eWnWpDfX1XDAGSft7YAWXR2oWXIs4LI8/Hz5j9l7QyuBFvTGSpING4MLeWs4baH0/n+RhQ7Q8vpboAKghO48kNK67FOSkqTuFS3XarOkC+3rwdwqQ7wbSj34XYXaRQEzzYPn4yKTVBQI=  ;
Message-ID: <20041117000751.5345.qmail@web53002.mail.yahoo.com>
Received: from [216.231.10.162] by web53002.mail.yahoo.com via HTTP; Tue, 16 Nov 2004 16:07:51 PST
Date: Tue, 16 Nov 2004 16:07:51 -0800 (PST)
From: Edwin Tang <emttang@yahoo.com>
Subject: Re: BooleanQuery - TooManyClauses Issue
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <1100644647.12377.18.camel@localhost>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This is what I have been doing with DateFilter....

DateFilter dateFilter = new DateFilter("published", lLimitDate,
System.currentTimeMillis());
TopFieldDocs docs = searcher.search(parser.parse(sSearchPhrase), dateFilter,
utility.iMaxResults, new Sort(sortFields));

Ed

--- Luke Francl <luke.francl@stellent.com> wrote:

> On Tue, 2004-11-16 at 16:32, Paul Elschot wrote:
> 
> > Once you approach 1000 days, you'll get the same problem again,
> > so you might want to use a filter for the dates.
> > See DateFilter and the archives on YYYYMMDD.
> 
> Can anyone point to a good example of how to use the DateFilter?
> 
> Thanks,
> Luke
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11302-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 00:21:08 2004
Return-Path: <lucene-user-return-11302-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66387 invoked from network); 17 Nov 2004 00:21:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 00:21:08 -0000
Received: (qmail 50977 invoked by uid 500); 17 Nov 2004 00:21:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50842 invoked by uid 500); 17 Nov 2004 00:21:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50829 invoked by uid 99); 17 Nov 2004 00:21:03 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.190.39.197] (HELO web53007.mail.yahoo.com) (206.190.39.197)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 16 Nov 2004 16:21:00 -0800
Received: (qmail 36511 invoked by uid 60001); 17 Nov 2004 00:20:56 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=sIpRcvJdrvz4bIzaS4wYNvah3CI7Tqo3Ge7sscUc4e2N4nfAf7cKNCtP73GG4S705V3v24jZwC1vzj1eZFy1e8IhaPSFp5wqO8mBheuEskOpmnBGCc5dKTm4ivoI3YPSsJ9mm/M4bIccP87Dw873gy66YFezgeJPKmexRH8Iikc=  ;
Message-ID: <20041117002055.36509.qmail@web53007.mail.yahoo.com>
Received: from [216.231.10.162] by web53007.mail.yahoo.com via HTTP; Tue, 16 Nov 2004 16:20:55 PST
Date: Tue, 16 Nov 2004 16:20:55 -0800 (PST)
From: Edwin Tang <emttang@yahoo.com>
Subject: Need help with filtering
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

I have been using DateFilter to limit my search results to a certain date
range. I am now asked to replace this filter with one where my search results
have document IDs greater than a given document ID. This document ID is
assigned during indexing and is a Keyword field.

I've browsed around the FAQs and archives and see that I can either use
QueryFilter or BooleanQuery. I've tried both approaches to limit the document
ID range, but am getting the BooleanQuery.TooManyClauses exception in both
cases. I've also tried bumping max number of clauses via setMaxClauseCount(),
but that number has gotten pretty big.

Is there another approach to this? Or am I setting this up incorrectly? Snippet
of one of my approaches follows:
queryFilter = new QueryFilter(new RangeQuery(new Term("id", sLastSearchedId),
null, false));
docs = searcher.search(parser.parse(sSearchPhrase), queryFilter,
utility.iMaxResults, new Sort(sortFields));

Thanks in advance,
Ed


		
__________________________________ 
Do you Yahoo!? 
Meet the all-new My Yahoo! - Try it today! 
http://my.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11303-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 01:13:41 2004
Return-Path: <lucene-user-return-11303-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 87622 invoked from network); 17 Nov 2004 01:13:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 01:13:41 -0000
Received: (qmail 12987 invoked by uid 500); 17 Nov 2004 01:13:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12957 invoked by uid 500); 17 Nov 2004 01:13:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12943 invoked by uid 99); 17 Nov 2004 01:13:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.141.132.41] (HELO ml.worldsoftware.co.jp) (203.141.132.41)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 17:13:33 -0800
Received: from satoshiobtu4n6 (zaku.worldsoftware.co.jp [192.168.55.6])
	by ml.worldsoftware.co.jp (Postfix) with SMTP id 442B676399
	for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 10:13:28 +0900 (JST)
Message-ID: <003701c4cc42$a74fa8e0$32e0fcca@satoshiobtu4n6>
From: "Satoshi Hasegawa" <hasegawa@p03.worldsoftware.co.jp>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <001f01c4cb7b$1e0868a0$32e0fcca@satoshiobtu4n6> <088b01c4cb86$4e56bce0$7703d00a@hypermedia.com>
Subject: Re: Is opening IndexReader multiple times safe?
Date: Wed, 17 Nov 2004 10:13:30 +0900
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-2022-jp";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you, Luke. I decided to branch (use multiple try/catch clauses) so 
that I know if the IndexReader is open or not. Your remark on locking was 
helpful for my understanding of Lucene anyway.

----- Original Message ----- 
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, November 16, 2004 11:45 AM
Subject: Re: Is opening IndexReader multiple times safe?


> Hi Satoshi;
>
> I troubled shooted a problem similar to this by moving around a
> IndexReader.isLocked(indexFileLocation) to determine exactly when the 
> reader
> was closed.
>
> Note: the method throws an error if the index file doesn't exist that you
> are checking on.
>
> Luke
>
> ----- Original Message ----- 
> From: "Satoshi Hasegawa" <hasegawa@p03.worldsoftware.co.jp>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Monday, November 15, 2004 8:25 PM
> Subject: Is opening IndexReader multiple times safe?
>
>
>> Hello,
>>
>> I need to handle IOExceptions that arise from index access
>> (IndexReader#open, #delete, IndexWriter#optimize etc.), and I'm not sure
> if
>> the IndexReader is open when the exception is thrown/caught. 
>> Specifically,
>> my code is as follows.
>>
>>         try {
>>             indexReader.delete(term);
>>             indexReader.close();
>>             IndexWriter indexWriter = new IndexWriter(fsDirectory,
>>                     new JapaneseAnalyzer(), false);
>>             indexWriter.optimize();
>>             indexWriter.close();
>>         } catch (Exception e) {
>>             // IndexReader may or may not be open
>>             indexReader = IndexReader.open(path);
>>             indexReader.undelete();
>>         }
>>
>> Is the above code safe? IndexReader may already be open at the beginning
> of
>> the catch clause if the exception was thrown before closing the
> IndexReader.
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11304-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 02:26:57 2004
Return-Path: <lucene-user-return-11304-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24926 invoked from network); 17 Nov 2004 02:26:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 02:26:57 -0000
Received: (qmail 90000 invoked by uid 500); 17 Nov 2004 02:26:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 89973 invoked by uid 500); 17 Nov 2004 02:26:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 89959 invoked by uid 99); 17 Nov 2004 02:26:53 -0000
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=HTML_90_100,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.235.234.121] (HELO taurus.lunarpages.com) (64.235.234.121)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 18:26:48 -0800
Received: from adsl-68-121-27-153.dsl.irvnca.pacbell.net ([68.121.27.153] helo=ramonlaptop)
	by taurus.lunarpages.com with esmtpa (Exim 4.43)
	id 1CUFXI-0000VT-Q9
	for lucene-user@jakarta.apache.org; Tue, 16 Nov 2004 18:27:09 -0800
From: "Ramon Aseniero" <ramon.aseniero@tryarc.com>
To: <lucene-user@jakarta.apache.org>
Subject: Best Implementation of Next and Prev in Lucene
Date: Tue, 16 Nov 2004 18:26:29 -0800
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0000_01C4CC09.CC1385E0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcTMTNhp6Oa1QgJOQSWLn5wT6yDYXQ==
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - taurus.lunarpages.com
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [0 0] / [47 12]
X-AntiAbuse: Sender Address Domain - tryarc.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0000_01C4CC09.CC1385E0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Hi All,

 

What's the best implementation of displaying the Next and Prev search result
in Lucene?

 

Thanks,

Ramon


------=_NextPart_000_0000_01C4CC09.CC1385E0--


From lucene-user-return-11305-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 03:51:26 2004
Return-Path: <lucene-user-return-11305-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48877 invoked from network); 17 Nov 2004 03:51:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 03:51:26 -0000
Received: (qmail 54328 invoked by uid 500); 17 Nov 2004 03:51:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54300 invoked by uid 500); 17 Nov 2004 03:51:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54285 invoked by uid 99); 17 Nov 2004 03:51:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 19:51:19 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Tue, 16 Nov 2004 22:51:48 -0500
Message-ID: <0a0401c4cc58$c50f5040$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041116210127.32783.qmail@web12706.mail.yahoo.com>
Subject: Index Locking Issues Resolved...I hope
Date: Tue, 16 Nov 2004 22:51:50 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 17 Nov 2004 03:51:48.0646 (UTC) FILETIME=[C3BEB460:01C4CC58]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello;

I think I have solved my locking issues. I just made it through the set of
test cases that previously resulted in Index Locking Errors. I just removed
the method from my code that checks for a Index lock and forcefully removes
it after 1 minute. Hopefully they never need to be put back in.

Here is what I changed:

I moved all my Indexer logic into a class called Index.java that implemented
Runnable. Index's start() called a method named go() which was static and
synchronized. go() kicks off all the logic to update the index (the reader,
writer and other members involved with incremental updates also static). I
put logging in place that logs when a thread has executed the method and
what the thread's name is.

Every time a client class changes the content it can create a thread
reference and pass it the runnable Index. The convention I have requested
for naming the thread is a toString() of the current date. Then they start
the thread.

How it worked:

A few users just tested the system, half added documents to the system while
another half deleted documents at the same time. No locking issues were seen
and the index was current with the changes made a short time after the last
operation (in my previous code this test resulted in a issue with index
locking).

I was able to go through the log file and find the start of the synchronized
go() method and the successful completion of the indexing operations for
every request made.

The only performance issue I noticed was if someone added a very large PDF
it took a while before the thread handling the request could finish. If this
is the first operation of many it means the operations following this large
file take that much longer. Luckily for me search results don't need to be
instant.

Things are looking much better. For now...

Thanks to all that helped me up till now.

Luke

----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, November 16, 2004 4:01 PM
Subject: Re: _4c.fnm missing


> 'Concurrent' and 'updates' in the same sentence sounds like a possible
> source of the problem.  You have to use a single IndexWriter and it
> should not overlap with an IndexReader that is doing deletes.
>
> Otis
>
> --- Luke Shannon <lshannon@hypermedia.com> wrote:
>
> > It conistantly breaks when I run more than 10 concurrent incremental
> > updates.
> >
> > I can post the code on Bugzilla (hopefully when I get to the site it
> > will be
> > obvious how I can post things).
> >
> > Luke
> >
> > ----- Original Message ----- 
> > From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > Sent: Tuesday, November 16, 2004 3:20 PM
> > Subject: Re: _4c.fnm missing
> >
> >
> > > Field names are stored in the field info file, with suffix .fnm. -
> > see
> > > http://jakarta.apache.org/lucene/docs/fileformats.html
> > >
> > > The .fnm should be inside the .cfs file (cfs files are compound
> > files
> > > that contain all index files described at the above URL).  Maybe
> > you
> > > can provide the code that causes this error in Bugzilla for
> > somebody to
> > > look at.  Does it consistently break?
> > >
> > > Otis
> > >
> > >
> > > --- Luke Shannon <lshannon@hypermedia.com> wrote:
> > >
> > > > I received the error below when I was attempting to over whelm my
> > > > system with incremental update requests.
> > > >
> > > > What is this file it is looking for? I checked the index. It
> > > > contains:
> > > >
> > > > _4c.del
> > > > _4d.cfs
> > > > deletable
> > > > segments
> > > >
> > > > Where does _4c.fnm come from?
> > > >
> > > > Here is the error:
> > > >
> > > > Unable to create the create the writer and/or index new content
> > > > /usr/tomcat/fb_hub/WEB-INF/index/_4c.fnm (No such file or
> > directory).
> > > >
> > > > Thanks,
> > > >
> > > > Luke
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail:
> > lucene-user-help@jakarta.apache.org
> > >
> > >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11306-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 04:21:41 2004
Return-Path: <lucene-user-return-11306-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56732 invoked from network); 17 Nov 2004 04:21:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 04:21:41 -0000
Received: (qmail 82379 invoked by uid 500); 17 Nov 2004 04:21:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 82357 invoked by uid 500); 17 Nov 2004 04:21:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 82344 invoked by uid 99); 17 Nov 2004 04:21:36 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST,FORGED_RCVD_HELO,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [167.206.5.75] (HELO mta8.srv.hcvlny.cv.net) (167.206.5.75)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 20:21:34 -0800
Received: from optonline.net (hamstr5.srv.hcvlny.cv.net [167.206.5.17])
 by mta8.srv.hcvlny.cv.net
 (iPlanet Messaging Server 5.2 HotFix 1.25 (built Mar  3 2004))
 with ESMTP id <0I7B009142RCAP@mta8.srv.hcvlny.cv.net> for
 lucene-user@jakarta.apache.org; Tue, 16 Nov 2004 23:21:13 -0500 (EST)
Received: from [167.206.5.53] (Forwarded-For: [68.192.172.208])
 by mstr5.srv.hcvlny.cv.net (mshttpd); Tue, 16 Nov 2004 23:21:12 -0500
Date: Tue, 16 Nov 2004 23:21:12 -0500
From: jeichels@optonline.net
Subject: Re: Index Locking Issues Resolved...I hope
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id: <aa369faa30bb.aa30bbaa369f@optonline.net>
MIME-version: 1.0
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.25 (built Mar  3 2004)
Content-type: text/plain; charset=us-ascii
Content-language: en
Content-transfer-encoding: 7BIT
Content-disposition: inline
X-Accept-Language: en
Priority: normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Very cool Luke.  I am not quite there yet.  I am half way through implementing the queue approach, but I have hit walls that are making me sit back and figure out my strategy.   I have a struts/tomcat/ojb/mysql project that can potentially have a million records and growing over time and updates will occur perhaps 100,000/day.  This is not today, but what I am building for.

My concerns not just Lucene itself, but its surrounding effects as follows.  I am finding out that edge case scenerios are making things difficult due to having two databases instead of one.

----- How to know the index on this huge database is always in synch.
----- What happens if the server crashes or is brought down.  <solution might be db last modified date>
----- Backups of the database and the index handled in an efficient, safe manner on a live system.
-----  How to reindex while the system is in place <solution might be doing new index to a different location> as a seperate tool.
-----  How to handle the fact that the IndexWriter is not very good in incremental data cases in a high volume update/query system. <soluction might be to query for records from the database that have changed every 45 seconds or so and applying the changes>.
-----  How the IndexWriter solution above might cause bad lag on queries frequently. <no solution>
-----  how to get Tomcat to start up a thread to run this updater at startup and not have a problem with memory management.
-----  How to make this all work in my startup business to allow me to feel I can sleep at night.


In general, things just got much more complicated then I was hoping for though I don't know how I can do without using Lucene or something like Lucene.  This has been done so many times before that I would have suspected it would be easy, but I have not seen clear yet because it is all new.   I wish a database Text field could have this sort of mechanism built into it.   MySql does not do this (what I am using), but I am going to check into other databases now.  OJB will work with most all of them so that would help if there is a database type of solution that will allow that sleep at night thing to happen!!!

If you have input to these things, I had found some answers in the mailing list, but not really a concept of how to manage the whole thing.  Is there an incremental big open source project out there that uses Lucene and a database?  I don't think so.

If you have any code or ideas I would appreciate both!!!  Also having a FAQ that handles lots of these common problems, though a bit off topic they are, might really help people choose to use Lucene.

Thanks,

JohnE




----- Original Message -----
From: Luke Shannon <lshannon@hypermedia.com>
Date: Tuesday, November 16, 2004 10:51 pm
Subject: Index Locking Issues Resolved...I hope

> Hello;
> 
> I think I have solved my locking issues. I just made it through 
> the set of
> test cases that previously resulted in Index Locking Errors. I 
> just removed
> the method from my code that checks for a Index lock and 
> forcefully removes
> it after 1 minute. Hopefully they never need to be put back in.
> 
> Here is what I changed:
> 
> I moved all my Indexer logic into a class called Index.java that 
> implementedRunnable. Index's start() called a method named go() 
> which was static and
> synchronized. go() kicks off all the logic to update the index 
> (the reader,
> writer and other members involved with incremental updates also 
> static). I
> put logging in place that logs when a thread has executed the 
> method and
> what the thread's name is.
> 
> Every time a client class changes the content it can create a thread
> reference and pass it the runnable Index. The convention I have 
> requestedfor naming the thread is a toString() of the current 
> date. Then they start
> the thread.
> 
> How it worked:
> 
> A few users just tested the system, half added documents to the 
> system while
> another half deleted documents at the same time. No locking issues 
> were seen
> and the index was current with the changes made a short time after 
> the last
> operation (in my previous code this test resulted in a issue with 
> indexlocking).
> 
> I was able to go through the log file and find the start of the 
> synchronizedgo() method and the successful completion of the 
> indexing operations for
> every request made.
> 
> The only performance issue I noticed was if someone added a very 
> large PDF
> it took a while before the thread handling the request could 
> finish. If this
> is the first operation of many it means the operations following 
> this large
> file take that much longer. Luckily for me search results don't 
> need to be
> instant.
> 
> Things are looking much better. For now...
> 
> Thanks to all that helped me up till now.
> 
> Luke
> 
> ----- Original Message ----- 
> From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Tuesday, November 16, 2004 4:01 PM
> Subject: Re: _4c.fnm missing
> 
> 
> > 'Concurrent' and 'updates' in the same sentence sounds like a 
> possible> source of the problem.  You have to use a single 
> IndexWriter and it
> > should not overlap with an IndexReader that is doing deletes.
> >
> > Otis
> >
> > --- Luke Shannon <lshannon@hypermedia.com> wrote:
> >
> > > It conistantly breaks when I run more than 10 concurrent 
> incremental> > updates.
> > >
> > > I can post the code on Bugzilla (hopefully when I get to the 
> site it
> > > will be
> > > obvious how I can post things).
> > >
> > > Luke
> > >
> > > ----- Original Message ----- 
> > > From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> > > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> > > Sent: Tuesday, November 16, 2004 3:20 PM
> > > Subject: Re: _4c.fnm missing
> > >
> > >
> > > > Field names are stored in the field info file, with suffix 
> .fnm. -
> > > see
> > > > http://jakarta.apache.org/lucene/docs/fileformats.html
> > > >
> > > > The .fnm should be inside the .cfs file (cfs files are compound
> > > files
> > > > that contain all index files described at the above URL).  Maybe
> > > you
> > > > can provide the code that causes this error in Bugzilla for
> > > somebody to
> > > > look at.  Does it consistently break?
> > > >
> > > > Otis
> > > >
> > > >
> > > > --- Luke Shannon <lshannon@hypermedia.com> wrote:
> > > >
> > > > > I received the error below when I was attempting to over 
> whelm my
> > > > > system with incremental update requests.
> > > > >
> > > > > What is this file it is looking for? I checked the index. It
> > > > > contains:
> > > > >
> > > > > _4c.del
> > > > > _4d.cfs
> > > > > deletable
> > > > > segments
> > > > >
> > > > > Where does _4c.fnm come from?
> > > > >
> > > > > Here is the error:
> > > > >
> > > > > Unable to create the create the writer and/or index new 
> content> > > > /usr/tomcat/fb_hub/WEB-INF/index/_4c.fnm (No such 
> file or
> > > directory).
> > > > >
> > > > > Thanks,
> > > > >
> > > > > Luke
> > > >
> > > >
> > > >
> > > ---------------------------------------------------------------
> ------
> > > > To unsubscribe, e-mail: lucene-user-
> unsubscribe@jakarta.apache.org> > > For additional commands, e-mail:
> > > lucene-user-help@jakarta.apache.org
> > > >
> > > >
> > >
> > >
> > >
> > > ---------------------------------------------------------------
> ------
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail: lucene-user-
> help@jakarta.apache.org> >
> > >
> >
> >
> > -----------------------------------------------------------------
> ----
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> 
> 
> 
> -------------------------------------------------------------------
> --
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11307-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 04:50:29 2004
Return-Path: <lucene-user-return-11307-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63503 invoked from network); 17 Nov 2004 04:50:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 04:50:29 -0000
Received: (qmail 8185 invoked by uid 500); 17 Nov 2004 04:50:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7932 invoked by uid 500); 17 Nov 2004 04:50:16 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7919 invoked by uid 99); 17 Nov 2004 04:50:16 -0000
X-ASF-Spam-Status: No, hits=2.6 required=10.0
	tests=BLANK_LINES_70_80,LINES_OF_YELLING,SUBJ_ALL_CAPS,UPPERCASE_50_75
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 16 Nov 2004 20:50:15 -0800
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I7B4NH00.ISM for <lucene-user@jakarta.apache.org>; Wed,
          17 Nov 2004 10:32:05 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: COUNT SUBINDEX [IN MERGERINDEX]
Date: Wed, 17 Nov 2004 10:26:24 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKICEPKCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



Hi Guys,


Apologies .............



Can Some body Tell me which API to use to Count the  number of SubIndexe's
in a MERGED Index.



Thx in Advance





      WITH WARM REGARDS
      HAVE A NICE DAY
      [ N.S.KARTHIK]




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11308-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 04:59:52 2004
Return-Path: <lucene-user-return-11308-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66297 invoked from network); 17 Nov 2004 04:59:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 04:59:51 -0000
Received: (qmail 15344 invoked by uid 500); 17 Nov 2004 04:59:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15318 invoked by uid 500); 17 Nov 2004 04:59:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15304 invoked by uid 99); 17 Nov 2004 04:59:48 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 16 Nov 2004 20:59:45 -0800
Received: (qmail 86025 invoked by uid 60001); 17 Nov 2004 04:59:42 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=5SGTU9/5BV0Lt8fhthwY7a+1/002VN8kaY+aW4GqTPDA+NuSGYjs5hnPiVuK8ZDgSUPYnfE6Y0EFT2POODSKDKkPnaPniOBVpb3ip2W1lsoF4/JtaX+az2YzMCVGOUIuZRrE9ZVJ1TTaIFb7gQ2NZWVpxAi7lpx17dOwGKUQ2Mc=  ;
Message-ID: <20041117045941.86023.qmail@web12702.mail.yahoo.com>
Received: from [24.184.142.180] by web12702.mail.yahoo.com via HTTP; Tue, 16 Nov 2004 20:59:41 PST
Date: Tue, 16 Nov 2004 20:59:41 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: COUNT SUBINDEX [IN MERGERINDEX]
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <LOEGLEEGOAKBOLAJCCKICEPKCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Once the index is merged there is only 1 index - there are no
subindices.

Otis

--- Karthik N S <karthik@controlnet.co.in> wrote:

> 
> 
> Hi Guys,
> 
> 
> Apologies .............
> 
> 
> 
> Can Some body Tell me which API to use to Count the  number of
> SubIndexe's
> in a MERGED Index.
> 
> 
> 
> Thx in Advance
> 
> 
> 
> 
> 
>       WITH WARM REGARDS
>       HAVE A NICE DAY
>       [ N.S.KARTHIK]
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11309-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 05:20:40 2004
Return-Path: <lucene-user-return-11309-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77341 invoked from network); 17 Nov 2004 05:20:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 05:20:40 -0000
Received: (qmail 36664 invoked by uid 500); 17 Nov 2004 05:20:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36643 invoked by uid 500); 17 Nov 2004 05:20:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36630 invoked by uid 99); 17 Nov 2004 05:20:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 21:20:33 -0800
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.14) id A1826287007E; Wed, 17 Nov 2004 00:28:34 -0500
Message-ID: <419ADF9A.2010002@bayt.net>
Date: Wed, 17 Nov 2004 09:20:26 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Need help with filtering
References: <20041117002055.36509.qmail@web53007.mail.yahoo.com>
In-Reply-To: <20041117002055.36509.qmail@web53007.mail.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Well if the document ID is number (even if it isn't really) you could 
use a range query, or just rebuild your index using that specific filed 
as a sorted field but if it numeric be aware that if you use integer it 
limits how high your numbers can get.

nader

Edwin Tang wrote:

>Hello,
>
>I have been using DateFilter to limit my search results to a certain date
>range. I am now asked to replace this filter with one where my search results
>have document IDs greater than a given document ID. This document ID is
>assigned during indexing and is a Keyword field.
>
>I've browsed around the FAQs and archives and see that I can either use
>QueryFilter or BooleanQuery. I've tried both approaches to limit the document
>ID range, but am getting the BooleanQuery.TooManyClauses exception in both
>cases. I've also tried bumping max number of clauses via setMaxClauseCount(),
>but that number has gotten pretty big.
>
>Is there another approach to this? Or am I setting this up incorrectly? Snippet
>of one of my approaches follows:
>queryFilter = new QueryFilter(new RangeQuery(new Term("id", sLastSearchedId),
>null, false));
>docs = searcher.search(parser.parse(sSearchPhrase), queryFilter,
>utility.iMaxResults, new Sort(sortFields));
>
>Thanks in advance,
>Ed
>
>
>		
>__________________________________ 
>Do you Yahoo!? 
>Meet the all-new My Yahoo! - Try it today! 
>http://my.yahoo.com 
> 
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11310-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 06:01:51 2004
Return-Path: <lucene-user-return-11310-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89299 invoked from network); 17 Nov 2004 06:01:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 06:01:51 -0000
Received: (qmail 72435 invoked by uid 500); 17 Nov 2004 06:01:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71649 invoked by uid 500); 17 Nov 2004 06:01:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71636 invoked by uid 99); 17 Nov 2004 06:01:41 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=LINES_OF_YELLING,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 16 Nov 2004 22:01:39 -0800
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I7B83R00.RS5 for <lucene-user@jakarta.apache.org>; Wed,
          17 Nov 2004 11:46:39 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: COUNT SUBINDEX [IN MERGERINDEX]
Date: Wed, 17 Nov 2004 11:40:58 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIOEPKCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
In-Reply-To: <20041117045941.86023.qmail@web12702.mail.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi guy's


Apologies.....


  So  A Mergeed Index is again a Single [ addition of subIndexes... ),

 If that case , If One of the Field Types is of  type   'Field.Keyword'
whic is Unique across the subIndexes [Before Merging].

 and If I want to Count this Unique Field in a MergerIndex  [After i'ts been
Merged ] How do I do this Please.

  Ex
      SubIndex1 = filename1,filenam2,filenam3

      SubIndex2 = filename4,filenam5,filenam6

     MergerIndex1 = filename1,filenam2,filenam3, filename4,filenam5,filenam6

    [From MergerIndex] Count = 6 nos


Something like the above



Thx in Advance




-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Wednesday, November 17, 2004 10:30 AM
To: Lucene Users List
Subject: Re: COUNT SUBINDEX [IN MERGERINDEX]


Once the index is merged there is only 1 index - there are no
subindices.

Otis

--- Karthik N S <karthik@controlnet.co.in> wrote:

>
>
> Hi Guys,
>
>
> Apologies .............
>
>
>
> Can Some body Tell me which API to use to Count the  number of
> SubIndexe's
> in a MERGED Index.
>
>
>
> Thx in Advance
>
>
>
>
>
>       WITH WARM REGARDS
>       HAVE A NICE DAY
>       [ N.S.KARTHIK]
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11311-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 06:38:21 2004
Return-Path: <lucene-user-return-11311-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1511 invoked from network); 17 Nov 2004 06:38:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 06:38:21 -0000
Received: (qmail 6876 invoked by uid 500); 17 Nov 2004 06:38:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6852 invoked by uid 500); 17 Nov 2004 06:38:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6835 invoked by uid 99); 17 Nov 2004 06:38:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.203 as permitted sender)
Received: from [64.233.170.203] (HELO rproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 16 Nov 2004 22:38:14 -0800
Received: by rproxy.gmail.com with SMTP id b11so892026rne
        for <lucene-user@jakarta.apache.org>; Tue, 16 Nov 2004 22:38:02 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=VVyA55Y0CctuZrY35OhUpOe9j1ne5vccEZgsko6K9/5aDDrT8rO8MnBzLTQD32j9/kF8TV9SyUI/Tnz0P4jyN8CXbSTGz0wu5nzytLgU9pIh7R8DU83U256KfWfXjYnUejwct1ohL3U9hHAMVjHfdYaQq4kjiwxclXmcuTx3EeY=
Received: by 10.38.149.67 with SMTP id w67mr101849rnd;
        Tue, 16 Nov 2004 22:38:02 -0800 (PST)
Received: by 10.38.72.66 with HTTP; Tue, 16 Nov 2004 22:38:02 -0800 (PST)
Message-ID: <88c6a672041116223818fe8527@mail.gmail.com>
Date: Wed, 17 Nov 2004 00:38:02 -0600
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Index Locking Issues Resolved...I hope
In-Reply-To: <aa369faa30bb.aa30bbaa369f@optonline.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <aa369faa30bb.aa30bbaa369f@optonline.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

MySQL does offer a basic fulltext search (with MyISAM tables), but it
doesn't really approach the functionality of Lucene, such as pluggable
tokenizers, stemming, etc.  I think MS SQL server has fulltext search
as well, but I have no idea if it's any good.

See http://www.google.com/search?hl=en&lr=&safe=off&c2coff=1&q=mysql+fulltext

> I have not seen clear yet because it is all new.   I wish a database Text field could have this sort of mechanism built into it.   MySql does not do this (what I am using), but I am going to check into other databases now.  OJB will work with most all of them so that would help if there is a database type of solution that will allow that sleep at night thing to happen!!!
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11312-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 08:20:00 2004
Return-Path: <lucene-user-return-11312-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54666 invoked from network); 17 Nov 2004 08:20:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 08:20:00 -0000
Received: (qmail 12848 invoked by uid 500); 17 Nov 2004 08:19:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 12823 invoked by uid 500); 17 Nov 2004 08:19:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 12809 invoked by uid 99); 17 Nov 2004 08:19:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.31] (HELO smtp-vbr11.xs4all.nl) (194.109.24.31)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 00:19:50 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr11.xs4all.nl (8.12.11/8.12.11) with ESMTP id iAH8Jgh6089726
	for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 09:19:42 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Need help with filtering
Date: Wed, 17 Nov 2004 09:19:42 +0100
User-Agent: KMail/1.5.4
References: <20041117002055.36509.qmail@web53007.mail.yahoo.com>
In-Reply-To: <20041117002055.36509.qmail@web53007.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411170919.42136.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 17 November 2004 01:20, Edwin Tang wrote:
> Hello,
> 
> I have been using DateFilter to limit my search results to a certain date
> range. I am now asked to replace this filter with one where my search 
results
> have document IDs greater than a given document ID. This document ID is
> assigned during indexing and is a Keyword field.
> 
> I've browsed around the FAQs and archives and see that I can either use
> QueryFilter or BooleanQuery. I've tried both approaches to limit the 
document
> ID range, but am getting the BooleanQuery.TooManyClauses exception in both
> cases. I've also tried bumping max number of clauses via 
setMaxClauseCount(),
> but that number has gotten pretty big.
> 
> Is there another approach to this? ...

Recoding DateFilter to a DocumentIdFilter should be straightforward.

The trick is to use only one document enumerator at a time for all
terms. Document enumerators take buffer space, and that is the
reason why BooleanQuery has an exception for too many clauses.

Regards,
Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11313-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 08:31:56 2004
Return-Path: <lucene-user-return-11313-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60478 invoked from network); 17 Nov 2004 08:31:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 08:31:56 -0000
Received: (qmail 30993 invoked by uid 500); 17 Nov 2004 08:31:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30939 invoked by uid 500); 17 Nov 2004 08:31:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30923 invoked by uid 99); 17 Nov 2004 08:31:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 00:31:45 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.12.11/8.12.11) with ESMTP id iAH8VeWd022106
	for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 09:31:40 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: COUNT SUBINDEX [IN MERGERINDEX]
Date: Wed, 17 Nov 2004 09:31:40 +0100
User-Agent: KMail/1.5.4
References: <LOEGLEEGOAKBOLAJCCKIOEPKCCAA.karthik@controlnet.co.in>
In-Reply-To: <LOEGLEEGOAKBOLAJCCKIOEPKCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411170931.40115.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 17 November 2004 07:10, Karthik N S wrote:
> Hi guy's
> 
> 
> Apologies.....
> 
> 
>   So  A Mergeed Index is again a Single [ addition of subIndexes... ),
> 
>  If that case , If One of the Field Types is of  type   'Field.Keyword'
> whic is Unique across the subIndexes [Before Merging].
> 
>  and If I want to Count this Unique Field in a MergerIndex  [After i'ts been
> Merged ] How do I do this Please.

IndexReader.numDocs() will give the number of docs in an index.

Lucene has no direct support for unique fields. After merging, if the
same unique field value occurs in both source indexes, the merged
index will contain two documents with that value.
In case one wants to merge into unique field values, the non unique
values in one of the source indexes need to be deleted before merging.

See IndexReader.termDocs(term) on how to get the document numbers
for (unique) terms via a TermDocs, and IndexReader.delete(docNum)
for deleting docs.

Regards,
Paul.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11314-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 10:32:36 2004
Return-Path: <lucene-user-return-11314-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63986 invoked from network); 17 Nov 2004 10:32:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 10:32:36 -0000
Received: (qmail 3088 invoked by uid 500); 17 Nov 2004 10:32:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3063 invoked by uid 500); 17 Nov 2004 10:32:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3050 invoked by uid 99); 17 Nov 2004 10:32:31 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST,FORGED_RCVD_HELO,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [167.206.5.68] (HELO mta2.srv.hcvlny.cv.net) (167.206.5.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 02:32:27 -0800
Received: from optonline.net (hamstr5.srv.hcvlny.cv.net [167.206.5.17])
 by mta2.srv.hcvlny.cv.net
 (iPlanet Messaging Server 5.2 HotFix 1.25 (built Mar  3 2004))
 with ESMTP id <0I7B00DHWJXSFC@mta2.srv.hcvlny.cv.net> for
 lucene-user@jakarta.apache.org; Wed, 17 Nov 2004 05:32:17 -0500 (EST)
Received: from [167.206.5.139] (Forwarded-For: [68.192.172.208])
 by mstr5.srv.hcvlny.cv.net (mshttpd); Wed, 17 Nov 2004 05:32:16 -0500
Date: Wed, 17 Nov 2004 05:32:16 -0500
From: jeichels@optonline.net
Subject: Re: Index Locking Issues Resolved...I hope
To: Lucene Users List <lucene-user@jakarta.apache.org>,
 Chris Lamprecht <clamprecht@gmail.com>
Message-id: <aa5972aa4582.aa4582aa5972@optonline.net>
MIME-version: 1.0
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.25 (built Mar  3 2004)
Content-type: text/plain; charset=us-ascii
Content-language: en
Content-transfer-encoding: 7BIT
Content-disposition: inline
X-Accept-Language: en
Priority: normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


I was thinking that perhaps I can pre-stem words before sticking them in a search field in the database perhaps using Lucene stemming code, then try to use the Natural Language Search found in MySql 4.1.1.   I am confident the MySql product can't keep up with Lucene yet, but at least they hvae improved it some.  Not even sure if my hosting company will upgrade to 4.1.1 though.  Still looking for a lot of solutions to make Lucene sit in synch more nicely with MySql as the main database...aka an easy to use way of handling 



----- Original Message -----
From: Chris Lamprecht <clamprecht@gmail.com>
Date: Wednesday, November 17, 2004 1:38 am
Subject: Re: Index Locking Issues Resolved...I hope

> MySQL does offer a basic fulltext search (with MyISAM tables), but it
> doesn't really approach the functionality of Lucene, such as pluggable
> tokenizers, stemming, etc.  I think MS SQL server has fulltext search
> as well, but I have no idea if it's any good.
> 
> See 
> http://www.google.com/search?hl=en&lr=&safe=off&c2coff=1&q=mysql+fulltext
> > I have not seen clear yet because it is all new.   I wish a 
> database Text field could have this sort of mechanism built into 
> it.   MySql does not do this (what I am using), but I am going to 
> check into other databases now.  OJB will work with most all of 
> them so that would help if there is a database type of solution 
> that will allow that sleep at night thing to happen!!!
> >
> 
> -------------------------------------------------------------------
> --
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11315-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 10:35:40 2004
Return-Path: <lucene-user-return-11315-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66437 invoked from network); 17 Nov 2004 10:35:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 10:35:39 -0000
Received: (qmail 9326 invoked by uid 500); 17 Nov 2004 10:35:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 9287 invoked by uid 500); 17 Nov 2004 10:35:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9250 invoked by uid 99); 17 Nov 2004 10:35:34 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=LINES_OF_YELLING,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 17 Nov 2004 02:35:32 -0800
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I7BKSA00.6Z2 for <lucene-user@jakarta.apache.org>; Wed,
          17 Nov 2004 16:20:34 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: COUNT SUBINDEX [IN MERGERINDEX]
Date: Wed, 17 Nov 2004 16:14:53 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIGEPMCCAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
In-Reply-To: <200411170931.40115.paul.elschot@xs4all.nl>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Guys


Apologies..........

I am Still Confused.. ;(


Let me make it more simple Question


   On using Search from a  Index without any SearchWord,  I would like to
count  the total number of Documents present in it.

   [ I Only have the Field Types 'Field.Keyword' which stores the Unique
filename ]

   Will IndexReader.termDocs(term) give me the Count for the same.
   If so How To use it....... Please

  Thx in advance.
Karthik



-----Original Message-----
From: Paul Elschot [mailto:paul.elschot@xs4all.nl]
Sent: Wednesday, November 17, 2004 2:02 PM
To: lucene-user@jakarta.apache.org
Subject: Re: COUNT SUBINDEX [IN MERGERINDEX]


On Wednesday 17 November 2004 07:10, Karthik N S wrote:
> Hi guy's
>
>
> Apologies.....
>
>
>   So  A Mergeed Index is again a Single [ addition of subIndexes... ),
>
>  If that case , If One of the Field Types is of  type   'Field.Keyword'
> whic is Unique across the subIndexes [Before Merging].
>
>  and If I want to Count this Unique Field in a MergerIndex  [After i'ts
been
> Merged ] How do I do this Please.

IndexReader.numDocs() will give the number of docs in an index.

Lucene has no direct support for unique fields. After merging, if the
same unique field value occurs in both source indexes, the merged
index will contain two documents with that value.
In case one wants to merge into unique field values, the non unique
values in one of the source indexes need to be deleted before merging.

See IndexReader.termDocs(term) on how to get the document numbers
for (unique) terms via a TermDocs, and IndexReader.delete(docNum)
for deleting docs.

Regards,
Paul.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11316-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 14:48:12 2004
Return-Path: <lucene-user-return-11316-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4297 invoked from network); 17 Nov 2004 14:48:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 14:48:11 -0000
Received: (qmail 5998 invoked by uid 500); 17 Nov 2004 14:47:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 5847 invoked by uid 500); 17 Nov 2004 14:47:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 5785 invoked by uid 99); 17 Nov 2004 14:47:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [207.234.147.17] (HELO mail2.s2lmail.com) (207.234.147.17)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 17 Nov 2004 06:47:48 -0800
Received: (qmail 5714 invoked by uid 508); 17 Nov 2004 14:48:27 -0000
Received: from unknown (HELO infact12) (61.11.66.46)
  by mail5.s2lmail.com with SMTP; 17 Nov 2004 14:48:27 -0000
Message-ID: <000501c4ccb6$2d3eefb0$0448170a@infact12>
From: "lingaraju" <lingaraju.shambulingaiah@infactindia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <1090855036.2590.15.camel@dell-inspiron> <1090855904.9386.15.camel@localhost>  <410549F1.6020402@apache.org> <1090927209.11215.5.camel@dell-inspiron>
Subject: tool to  check the index field
Date: Wed, 17 Nov 2004 20:30:26 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

HI ALL

I am having  index file created by other people
Now  i want to know how many field are there in the index
Is there any third party tool to do this
I saw some where some GUI tool to do this but  forgot the name.

Regards
LingaRaju 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11317-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 14:52:58 2004
Return-Path: <lucene-user-return-11317-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 6829 invoked from network); 17 Nov 2004 14:52:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 14:52:58 -0000
Received: (qmail 21135 invoked by uid 500); 17 Nov 2004 14:52:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21099 invoked by uid 500); 17 Nov 2004 14:52:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21084 invoked by uid 99); 17 Nov 2004 14:52:49 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of Kiran.Viparthi@fao.org designates 168.202.2.12 as permitted sender)
Received: from [168.202.2.12] (HELO smtpmail.fao.org) (168.202.2.12)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 06:52:47 -0800
Received: from CONVERSION-DAEMON.smtpmail.fao.org by smtpmail.fao.org
 (PMDF V6.2-X17 #30673) id <0I7B00G01VZJE8@smtpmail.fao.org> for
 lucene-user@jakarta.apache.org; Wed, 17 Nov 2004 15:52:31 +0100 (MET)
Received: from hqfaoex02.hq.un.fao.org (hqfaoex02.fao.org [168.202.2.80])
 by smtpmail.fao.org (PMDF V6.2-X17 #30673)
 with ESMTP id <0I7B00DQOVZJVW@smtpmail.fao.org> for
 lucene-user@jakarta.apache.org; Wed, 17 Nov 2004 15:52:31 +0100 (MET)
Received: from hqafex01.hq.un.fao.org ([168.202.2.52])
 by hqfaoex02.hq.un.fao.org with Microsoft SMTPSVC(5.0.2195.6713); Wed,
 17 Nov 2004 15:52:41 +0100
Date: Wed, 17 Nov 2004 15:52:41 +0100
From: "Viparthi, Kiran (AFIS)" <Kiran.Viparthi@fao.org>
Subject: RE: tool to  check the index field
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id: <B978AA198CB86D488F88454BE7CA796C5E3E04@hqafex01.fao.org>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft Exchange V6.0.6487.1
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-Topic: tool to  check the index field
Thread-Index: AcTMtMxZyseB5AIuRciBFOuYxshuHwAAB9Ww
content-class: urn:content-classes:message
X-MS-Has-Attach:
X-MS-TNEF-Correlator:
X-OriginalArrivalTime: 17 Nov 2004 14:52:41.0803 (UTC)
 FILETIME=[16DE49B0:01C4CCB5]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Try using : 

Luke : http://www.getopt.org/luke/
Limo : http://limo.sourceforge.net/

Regards,
Kiran.


-----Original Message-----
From: lingaraju [mailto:lingaraju.shambulingaiah@infactindia.com] 
Sent: 17 November 2004 16:00
To: Lucene Users List
Subject: tool to check the index field


HI ALL

I am having  index file created by other people
Now  i want to know how many field are there in the index
Is there any third party tool to do this
I saw some where some GUI tool to do this but  forgot the name.

Regards
LingaRaju 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11318-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 14:56:58 2004
Return-Path: <lucene-user-return-11318-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9089 invoked from network); 17 Nov 2004 14:56:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 14:56:58 -0000
Received: (qmail 30353 invoked by uid 500); 17 Nov 2004 14:56:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30330 invoked by uid 500); 17 Nov 2004 14:56:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30317 invoked by uid 99); 17 Nov 2004 14:56:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [141.156.69.115] (HELO mail.infosciences.com) (141.156.69.115)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 06:56:47 -0800
Received: from Aviran (unknown [141.156.69.109])
	by mail.infosciences.com (Postfix) with ESMTP id E2B21118309
	for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 09:54:40 -0500 (EST)
From: "Aviran" <amordo@infosciences.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: best ways of using IndexSearcher
Date: Wed, 17 Nov 2004 09:56:54 -0500
Message-ID: <002901c4ccb5$b096b470$6a00a8c0@Aviran>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
In-Reply-To: <005201c4cc19$0bb02b40$3c00640a@099972K036>
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yes, IndexSearcher is thread safe.

Aviran
http://www.aviransplace.com

-----Original Message-----
From: Abhay Saswade [mailto:ays@i.frys.com]=20
Sent: Tuesday, November 16, 2004 15:16 PM
To: Lucene Users List
Subject: Re: best ways of using IndexSearcher


Hello,
Can I use single instance of IndexSearcher in multiple threads with =
sorting?
Thanks, Abhay

----- Original Message -----=20
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Monday, June 28, 2004 8:51 PM
Subject: Re: best ways of using IndexSearcher


> Anson,
>
> Use a single instance of IndexSearcher and, if you want to always=20
> 'see' even the latest index changes (deletes and adds since you opened =

> the
> IndexSearcher) make sure to re-create the IndexSearcher when you =
detect
> that the index version has changed (see
>
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexRe=
ade
r.html#getCurrentVersion(org.apache.lucene.store.Directory))
>
> When you get the new IndexSearcher, leave the old instance alone - let =

> the GC take care of it, and don't call close() on it, in case=20
> something in your application is still using that instance.
>
> This stuff is not really CPU intensive.  Disk I/O tends to be the=20
> bottleneck.  If you are working with multiple indices, spread them=20
> over multiple disks (not just partitions, real disks), if you can.
>
> Otis
>
>
> --- Anson Lau <alau@fulfil-net.com> wrote:
> > Hi Guys,
> >
> > What's the recommended way of using IndexSearcher? Should=20
> > IndexSearcher be a singleton or pooled?  Would pooling provide a=20
> > more scalable solution by
> > allowing you to decide how many IndexSearcher to use based on say =
how
> > many
> > CPU u have on ur server?
> >
> > Thanks,
> >
> > Anson
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11319-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 15:31:27 2004
Return-Path: <lucene-user-return-11319-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 28072 invoked from network); 17 Nov 2004 15:31:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 15:31:26 -0000
Received: (qmail 28339 invoked by uid 500); 17 Nov 2004 15:31:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28310 invoked by uid 500); 17 Nov 2004 15:31:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28294 invoked by uid 99); 17 Nov 2004 15:31:21 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.190.39.195] (HELO web53005.mail.yahoo.com) (206.190.39.195)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 17 Nov 2004 07:31:19 -0800
Received: (qmail 72552 invoked by uid 60001); 17 Nov 2004 15:31:14 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=XDtXjsBjuXykr3muU2KmVRCSmhf+7B+HVTjIUBXe9t4U7zYEKDR0GfcyQfKiwthMrXO2KaPB3GSPJjT9RNtcqXVBtQ+FQxxM9keuL6UjGfenVOEUi9l1SgODQhIhSXCeyy8sIlwdzvAfxUveBBaG/3D84uPBWFVPIngj4M+N5Wg=  ;
Message-ID: <20041117153114.72550.qmail@web53005.mail.yahoo.com>
Received: from [216.231.10.162] by web53005.mail.yahoo.com via HTTP; Wed, 17 Nov 2004 07:31:14 PST
Date: Wed, 17 Nov 2004 07:31:14 -0800 (PST)
From: Edwin Tang <emttang@yahoo.com>
Subject: Re: Need help with filtering
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200411170919.42136.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Ah... recoding DateFilter. I will look into this today. Thanks for the help.

Ed

--- Paul Elschot <paul.elschot@xs4all.nl> wrote:

> On Wednesday 17 November 2004 01:20, Edwin Tang wrote:
> > Hello,
> > 
> > I have been using DateFilter to limit my search results to a certain date
> > range. I am now asked to replace this filter with one where my search 
> results
> > have document IDs greater than a given document ID. This document ID is
> > assigned during indexing and is a Keyword field.
> > 
> > I've browsed around the FAQs and archives and see that I can either use
> > QueryFilter or BooleanQuery. I've tried both approaches to limit the 
> document
> > ID range, but am getting the BooleanQuery.TooManyClauses exception in both
> > cases. I've also tried bumping max number of clauses via 
> setMaxClauseCount(),
> > but that number has gotten pretty big.
> > 
> > Is there another approach to this? ...
> 
> Recoding DateFilter to a DocumentIdFilter should be straightforward.
> 
> The trick is to use only one document enumerator at a time for all
> terms. Document enumerators take buffer space, and that is the
> reason why BooleanQuery has an exception for too many clauses.
> 
> Regards,
> Paul
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 



		
__________________________________ 
Do you Yahoo!? 
The all-new My Yahoo! - Get yours free! 
http://my.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11320-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 15:36:53 2004
Return-Path: <lucene-user-return-11320-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31361 invoked from network); 17 Nov 2004 15:36:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 15:36:53 -0000
Received: (qmail 40193 invoked by uid 500); 17 Nov 2004 15:36:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40169 invoked by uid 500); 17 Nov 2004 15:36:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40154 invoked by uid 99); 17 Nov 2004 15:36:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [163.166.43.72] (HELO cr02ae01.baplc.com) (163.166.43.72)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 07:36:42 -0800
Received: from localhost (corp-mgw02.baplc.com [163.166.43.72])
	by cr02ae01.baplc.com (Postfix) with ESMTP id 2FBC7116
	for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 15:36:37 +0000 (GMT)
Received: from cr02ae01.baplc.com ([163.166.43.52])
 by localhost (cr02ae01 [163.166.43.72]) (amavisd-new, port 10024) with LMTP
 id 7086268-01-22 for <lucene-user@jakarta.apache.org>;
 Wed, 17 Nov 2004 15:36:36 +0000 (GMT)
Received: from intl-mgw02.baplc.com (intl-mgw02.baplc.com [161.2.239.202])
	by cr02ae01.baplc.com (Postfix) with ESMTP id 24CF166
	for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 15:36:36 +0000 (GMT)
Received: from mlncl02.uk.ba.com (bamlncl02.ncl.uk.ba.com [10.152.112.149])
	by intl-mgw02.baplc.com (Postfix) with ESMTP id F0D906D
	for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 15:36:35 +0000 (GMT)
X-Priority: 3 (Normal)
Sensitivity: 
Subject: Re: Whitespace Analyzer not producing expected search results
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Lotus Notes Release 5.0.10  March 22, 2002
Message-ID: <OFA197C4A9.39F81678-ON80256F4F.00439417-80256F4F.0055BEE6@uk.ba.com>
From: lee.a.carroll@britishairways.com
Date: Wed, 17 Nov 2004 15:44:59 +0000
X-MIMETrack: Serialize by Router on BAMLNCL02/NEWCASTLE/BRITISH AIRWAYS/GB(Release 5.0.11
  |July 24, 2002) at 17/11/2004 15:45:02
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Scanned: by amavisd-new at britishairways.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



Thanks for the suggestions Erik. Displaying the query string is really
usefull
and this is what i've found.

I issue a search using the search term

ResponseHelper.writeNoCachingHeaders\(response\);

The search is parsed using a query parser and produces the following query
string

+contents:ResponseHelper.writeNoCachingHeaders(response);

This looks good and finds two documents

I then try a search using the term

ResponseHelper.writeNoCachingHeaders\(*\);

now I'm expecting this to be a wider search term and it should find at
least two, possibly more docs?

the query parser produces the query

+contents:responsehelper.writenocachingheaders(*);

wow the query has lost its case and no docs get returned.

Why does the query parser do this (my analyzer is the provided whitespace
one).

Any ideas to get around this ?

Thanks Lee C


Try using a TermQuery instead of QueryParser to see if you get the
results you expect.  Exact case matters.

Also, when troubleshooting issues with QueryParser, it is helpful to
see what the actual Query returned is - try displaying its toString
output.

 Erik

On Nov 16, 2004, at 6:25 AM, lee.a.carroll@britishairways.com wrote:

> Hi,
>
> We have indexed a set of web files (jsp , js , xslt , java properties
> and
> html) using the lucene Whitespace Analyzer.
> The purpose is to allow developers to find where code / functions are
> used
> and defined across a large and dissperate
> content management repository. Hopefully to aid code re-use, easier
> refactoring and standards control.
>
> However when a query parser search is made using a whitespace analyser
> with
> a string known to be in an indexed file, the search returns zero hits.
>
> For example the string  <jsp\:include page
> =\"/path1/path2/path3/path4/file1.jsp\" /> is
> searched for using the query parser (escaping the meta-chars)and an
> indexed
> document which contains
> the following text should be found ?
>
>  // include HTML head
> %>
>              <jsp:include page="/path1/path2/path3/path4/file1.jsp" />
>
>              <script language="JavaScript" src
> ="/path1/path2/path3/file1.js"></script>
>              <!-- <script>
>
>  I've taken a look at the FAQ advice regarding checking the effects of
> an
> analyser (in our case whitespace) but our test class returns the
> expected
> tokens for any given token stream. For Example this string  "<%
> mytoken1
> mytoken2 %>" is tokenised by the whitespace analyzer as [<%] [mytoken1]
> [mytoken2] [%>].
>
> I'm sure I've missed something but i can't see what it is. If anyone
> could
> shed any light on posible reasons for why we are getting zero hits for
> text
> strings which are in our indexed files I'd be really gratefull. See
> below
> for more info on index and search set up
>
> Thanks a lot Lee C
>
> File contents are  in a tokenised , indexed not stored field.
> Index uses the whitespace analyzer which comes with lucene
>
> Searches are performed using a boolean query. The boolean query is
> made up
> of a query parser which gets its search term from an html text box
> entered
> by the user and a prefix query which is used to limit search scope by
> directory paths.
> the search uses a whitespace analyzer, no filtering takes place

-------------------------------------------------------------------------------------------------

Get the best from British Airways at ba.com
http://www.ba.com



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11321-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 16:13:56 2004
Return-Path: <lucene-user-return-11321-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55017 invoked from network); 17 Nov 2004 16:13:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 16:13:56 -0000
Received: (qmail 59199 invoked by uid 500); 17 Nov 2004 16:13:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59173 invoked by uid 500); 17 Nov 2004 16:13:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 59155 invoked by uid 99); 17 Nov 2004 16:13:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 08:13:48 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Wed, 17 Nov 2004 11:14:16 -0500
Message-ID: <0a9201c4ccc0$7c762080$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <1090855036.2590.15.camel@dell-inspiron> <1090855904.9386.15.camel@localhost>  <410549F1.6020402@apache.org> <1090927209.11215.5.camel@dell-inspiron> <000501c4ccb6$2d3eefb0$0448170a@infact12>
Subject: Re: tool to  check the index field
Date: Wed, 17 Nov 2004 11:14:16 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 17 Nov 2004 16:14:16.0799 (UTC) FILETIME=[7C8366F0:01C4CCC0]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Try this:

http://www.getopt.org/luke/

Luke
----- Original Message ----- 
From: "lingaraju" <lingaraju.shambulingaiah@infactindia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, November 17, 2004 10:00 AM
Subject: tool to check the index field


> HI ALL
> 
> I am having  index file created by other people
> Now  i want to know how many field are there in the index
> Is there any third party tool to do this
> I saw some where some GUI tool to do this but  forgot the name.
> 
> Regards
> LingaRaju 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11322-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 16:26:05 2004
Return-Path: <lucene-user-return-11322-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61737 invoked from network); 17 Nov 2004 16:26:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 16:26:04 -0000
Received: (qmail 92806 invoked by uid 500); 17 Nov 2004 16:26:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 92690 invoked by uid 500); 17 Nov 2004 16:25:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 92677 invoked by uid 99); 17 Nov 2004 16:25:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [216.54.180.10] (HELO htexc.hq.htinc.com) (216.54.180.10)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 08:25:58 -0800
X-MIMEOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Index copy
Date: Wed, 17 Nov 2004 11:25:48 -0500
Message-ID: <4568BE33B520DD43B7B24DE0B609B215523038@htexc.hq.htinc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index copy
Thread-Index: AcTMwHAQW3HytZwCS1ma27vzs+QD/QAAUesg
From: "Ravi" <ravi@htinc.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Whats the bestway to copy an index from one directory to another? I
tried opening an IndexWriter at the new location and used addIndexes to
read from the old index. But that was very slow.=20

Thanks in advance,
Ravi. =20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11323-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 16:30:58 2004
Return-Path: <lucene-user-return-11323-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65267 invoked from network); 17 Nov 2004 16:30:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 16:30:58 -0000
Received: (qmail 9614 invoked by uid 500); 17 Nov 2004 16:30:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 9596 invoked by uid 500); 17 Nov 2004 16:30:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9583 invoked by uid 99); 17 Nov 2004 16:30:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [207.14.217.166] (HELO server) (207.14.217.166)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 08:30:51 -0800
Received: from [192.168.205.180] (lv-69-69-100-62.sta.sprint-hsd.net [69.69.100.62])
	by server (8.12.8/8.12.8) with SMTP id iAHENfCV001449
	for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 09:23:42 -0500
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <OFA197C4A9.39F81678-ON80256F4F.00439417-80256F4F.0055BEE6@uk.ba.com>
References: <OFA197C4A9.39F81678-ON80256F4F.00439417-80256F4F.0055BEE6@uk.ba.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <09A7323B-38B6-11D9-AC67-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Whitespace Analyzer not producing expected search results
Date: Wed, 17 Nov 2004 08:30:48 -0800
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 17, 2004, at 7:44 AM, lee.a.carroll@britishairways.com wrote:
> I then try a search using the term
>
> ResponseHelper.writeNoCachingHeaders\(*\);
>
> now I'm expecting this to be a wider search term and it should find at
> least two, possibly more docs?
>
> the query parser produces the query
>
> +contents:responsehelper.writenocachingheaders(*);
>
> wow the query has lost its case and no docs get returned.
>
> Why does the query parser do this (my analyzer is the provided 
> whitespace
> one).
>
> Any ideas to get around this ?

Because generally terms are lowercased when indexed by the analyzer 
(but not in your case with WhitespaceAnalyzer), QueryParser defaults to 
lowercasing wildcarded queries.  Wildcard query terms are not analyzed.

To get around this, construct an instance of QueryParser and turn the 
lowercasing of wildcard terms off:

     QueryParser parser = new QueryParser("field", new 
StandardAnalyzer());
     parser.setLowercaseWildcardTerms(false);

Use the instance of QueryParser instead of the static parse method from 
now on.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11324-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 16:54:12 2004
Return-Path: <lucene-user-return-11324-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78278 invoked from network); 17 Nov 2004 16:54:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 16:54:11 -0000
Received: (qmail 63979 invoked by uid 500); 17 Nov 2004 16:54:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63952 invoked by uid 500); 17 Nov 2004 16:54:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63932 invoked by uid 99); 17 Nov 2004 16:54:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [163.166.43.76] (HELO cr02am01.baplc.com) (163.166.43.76)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 08:54:02 -0800
Received: from localhost (corp-mgw06.baplc.com [163.166.43.76])
	by cr02am01.baplc.com (Postfix) with ESMTP id BD72C64
	for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 16:53:55 +0000 (GMT)
Received: from cr02am01.baplc.com ([163.166.43.56])
 by localhost (cr02am01 [163.166.43.76]) (amavisd-new, port 10024) with LMTP
 id 7381166-03-93 for <lucene-user@jakarta.apache.org>;
 Wed, 17 Nov 2004 16:53:55 +0000 (GMT)
Received: from intl-mgw01.baplc.com (intl-mgw01.baplc.com [161.2.239.201])
	by cr02am01.baplc.com (Postfix) with ESMTP id 55A1671
	for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 16:53:55 +0000 (GMT)
Received: from mlncl02.uk.ba.com (bamlncl02.ncl.uk.ba.com [10.152.112.149])
	by intl-mgw01.baplc.com (Postfix) with ESMTP id 1BAD07B
	for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 16:53:55 +0000 (GMT)
X-Priority: 3 (Normal)
Sensitivity: 
Subject: Re: Whitespace Analyzer not producing expected search results
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Lotus Notes Release 5.0.10  March 22, 2002
Message-ID: <OF7F64CAB5.077BE91F-ON80256F4F.005C73BF-80256F4F.005CD2C6@uk.ba.com>
From: lee.a.carroll@britishairways.com
Date: Wed, 17 Nov 2004 17:02:19 +0000
X-MIMETrack: Serialize by Router on BAMLNCL02/NEWCASTLE/BRITISH AIRWAYS/GB(Release 5.0.11
  |July 24, 2002) at 17/11/2004 17:02:21
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Scanned: by amavisd-new at britishairways.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Thanks a lot for the solution / explanation. Saved the day Erik.

Summary

Observation: Using a wild carded search term with queryParser and the
WhitespaceAnalyser returned no hits when when hits where expected.

Reason: This was caused by the default behaviour of queryParser to lower
case wildcarded search terms.

Resolution: To use an instance of query parser setting the instances
setLowercaseWildcardTerms to false.

Example:    QueryParser parser = new QueryParser("field", new
            StandardAnalyzer());
            parser.setLowercaseWildcardTerms(false);



     Solution provided by Erik Hatcher




     -------------------------------------------------------------------------------------------------

     Get the best from British Airways at ba.com
     http://www.ba.com



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11325-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 17:28:48 2004
Return-Path: <lucene-user-return-11325-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97317 invoked from network); 17 Nov 2004 17:28:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 17:28:48 -0000
Received: (qmail 67522 invoked by uid 500); 17 Nov 2004 17:28:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67498 invoked by uid 500); 17 Nov 2004 17:28:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67484 invoked by uid 99); 17 Nov 2004 17:28:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of angeles3d@gmail.com designates 64.233.170.193 as permitted sender)
Received: from [64.233.170.193] (HELO rproxy.gmail.com) (64.233.170.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 09:28:40 -0800
Received: by rproxy.gmail.com with SMTP id j1so325617rnf
        for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 09:28:33 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=Dzd1myxeky5sO8GD7FRPX26ms2u3Gc5FEdlRj8hXQDxiFrF0WRYl075w3nu/W2V9JmWy6tnQXMLCpw05cdCTf4MpI4D346EOxrqwqV6+eqhn+3D4zoJS6EHlVNu6e+6LHTJOxk/G5cWOZ5P+6l/g0ssEqFA/hP8YUwRRzj0fkik=
Received: by 10.38.79.19 with SMTP id c19mr97034rnb;
        Wed, 17 Nov 2004 09:28:33 -0800 (PST)
Received: by 10.38.14.16 with HTTP; Wed, 17 Nov 2004 09:28:33 -0800 (PST)
Message-ID: <6c00cd3104111709282e0c1f23@mail.gmail.com>
Date: Wed, 17 Nov 2004 12:28:33 -0500
From: Miguel Angel <angeles3d@gmail.com>
Reply-To: Miguel Angel <angeles3d@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: index document pdf
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi, i downloading pdfbox 0.6.4  , what add in the source code the
demo`s lucene ????

-- 
Miguel Angel Angeles R.
Asesoria en Conectividad y Servidores
Telf. 97451277

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11326-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 17:49:44 2004
Return-Path: <lucene-user-return-11326-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8801 invoked from network); 17 Nov 2004 17:49:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 17:49:44 -0000
Received: (qmail 27424 invoked by uid 500); 17 Nov 2004 17:49:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27373 invoked by uid 500); 17 Nov 2004 17:49:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27309 invoked by uid 99); 17 Nov 2004 17:49:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 09:49:23 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Wed, 17 Nov 2004 12:49:51 -0500
Message-ID: <0ad001c4cccd$d6b059a0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"Miguel Angel" <angeles3d@gmail.com>
References: <6c00cd3104111709282e0c1f23@mail.gmail.com>
Subject: Re: index document pdf
Date: Wed, 17 Nov 2004 12:49:51 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 17 Nov 2004 17:49:51.0750 (UTC) FILETIME=[D6CF7A60:01C4CCCD]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello;

Hopfully I understand the question.

1. Modify the indexDoc(file) method to consider the file type pdf:

else if (file.getPath().endsWith(".html") ||
file.getPath().endsWith(".pdf")) {

2. Create a specific branch of code to create the lucene document from the
file type and than add it to the index:

if (file.getPath().endsWith(".pdf")) {
      try {
       Document doc = LucenePDFDocument.getDocument(file);
       writer.addDocument(doc);
      } catch (Exception e) {
       System.out.println("INDEXING ERROR: Unable to index pdf document: "
           + file.getPath()
           + " "
           + e.getMessage());
      }
     }

Note: Ensure you do step 2 for the case when uidIter != null and when it is
equal to null.

That should do it.

Concerning pdfbox make sure you have all the jars required. I had a little
trouble getting this going at first. It needs log4j.jar to run. If you have
any problems with the appenders I found this message thread helpful.
http://java2.5341.com/msg/32909.html

Luke

----- Original Message ----- 
From: "Miguel Angel" <angeles3d@gmail.com>
To: <lucene-user@jakarta.apache.org>
Sent: Wednesday, November 17, 2004 12:28 PM
Subject: index document pdf


> Hi, i downloading pdfbox 0.6.4  , what add in the source code the
> demo`s lucene ????
>
> -- 
> Miguel Angel Angeles R.
> Asesoria en Conectividad y Servidores
> Telf. 97451277
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11327-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 18:07:30 2004
Return-Path: <lucene-user-return-11327-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16757 invoked from network); 17 Nov 2004 18:07:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 18:07:30 -0000
Received: (qmail 78977 invoked by uid 500); 17 Nov 2004 18:07:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 78954 invoked by uid 500); 17 Nov 2004 18:07:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 78939 invoked by uid 99); 17 Nov 2004 18:07:25 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.215] (HELO web21326.mail.yahoo.com) (216.136.175.215)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 17 Nov 2004 10:07:21 -0800
Received: (qmail 63125 invoked by uid 60001); 17 Nov 2004 18:07:11 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=u7MZgb3D5z1mU56maagc24QVDwvO03XEtZmTQM50Lms/fOFoSfy8bcwfS2BaOxwX76uHfuvLL4r8bW0V8QRbjIWKkMf5fTWsS5SJVGPCPMEzmQMruKNUhHD8/oUD8rWmhh10NZeul74VsJYNT8J5H/tLmEqvk6/4jFL0JaRApkA=  ;
Message-ID: <20041117180710.63123.qmail@web21326.mail.yahoo.com>
Received: from [81.182.59.92] by web21326.mail.yahoo.com via HTTP; Wed, 17 Nov 2004 10:07:10 PST
Date: Wed, 17 Nov 2004 10:07:10 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: WildcardTermEnum skipping terms containing numbers?!
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

I have following problem with 1.4.2:
I'm searching for "c?ca" (using StandardAnalyzer) and one of the hits looks something like this:
"blabla c0ca c0la etc.. etc..."
(those big "o"-s are zero characters)
Now, I'm enumerating the terms using WildcardTermEnum and all I get is:

caca
ccca
ceca
cica
coca
crca
csca
cuca
cyca

It doesn't know about "c0ca" at all.
Is there any solution to come over this problem?

Thanks,
Sanyi


		
__________________________________ 
Do you Yahoo!? 
The all-new My Yahoo! - Get yours free! 
http://my.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11328-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 18:31:37 2004
Return-Path: <lucene-user-return-11328-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 28019 invoked from network); 17 Nov 2004 18:31:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 18:31:36 -0000
Received: (qmail 28155 invoked by uid 500); 17 Nov 2004 18:31:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28133 invoked by uid 500); 17 Nov 2004 18:31:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28111 invoked by uid 99); 17 Nov 2004 18:31:32 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.190.39.116] (HELO web52408.mail.yahoo.com) (206.190.39.116)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 17 Nov 2004 10:31:29 -0800
Received: (qmail 94767 invoked by uid 60001); 17 Nov 2004 18:31:25 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=zbfX4PSq40e5jHxv6KnXM1KoFaXtj3hAxT0hgxsNSubmOkjJDC3uJtq6Zcm7yius7yHOTRV6GszAaab0rSN4PPXLwypXcPypRA+B4TcGJbmdQ+T599+g0e1RguttBFy6gdi4016XUQfmA7Sy0EZfzteEQBV6gxov1qNkYOqB9Gk=  ;
Message-ID: <20041117183125.94755.qmail@web52408.mail.yahoo.com>
Received: from [12.161.235.225] by web52408.mail.yahoo.com via HTTP; Wed, 17 Nov 2004 10:31:24 PST
Date: Wed, 17 Nov 2004 10:31:24 -0800 (PST)
From: Yonik Seeley <yseeley@yahoo.com>
Reply-To: yseeley@cs.stanford.edu
Subject: Re: WildcardTermEnum skipping terms containing numbers?!
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20041117180710.63123.qmail@web21326.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

test


		
__________________________________ 
Do you Yahoo!? 
The all-new My Yahoo! - Get yours free! 
http://my.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11329-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 19:10:54 2004
Return-Path: <lucene-user-return-11329-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48787 invoked from network); 17 Nov 2004 19:10:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 19:10:53 -0000
Received: (qmail 97708 invoked by uid 500); 17 Nov 2004 19:10:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97673 invoked by uid 500); 17 Nov 2004 19:10:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97659 invoked by uid 99); 17 Nov 2004 19:10:49 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.210] (HELO web21324.mail.yahoo.com) (216.136.175.210)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 17 Nov 2004 11:10:46 -0800
Received: (qmail 47225 invoked by uid 60001); 17 Nov 2004 19:10:42 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=kcP7+snKd73sdpk366m3vKxh7evs0U37+pV4jNfPjVC5vJNhHV3NtmMqtGptoL8+KSfS3YeusBYo4QxZtApwRU+1StozJs5kzU2Bvug1IOZsBJ6q0n1VtEvu+UMRVAaC2Lq1ufIbtW/+Xp+u9ktTilvSVEi1+otOIbe2YiJJizU=  ;
Message-ID: <20041117191041.47223.qmail@web21324.mail.yahoo.com>
Received: from [81.182.59.92] by web21324.mail.yahoo.com via HTTP; Wed, 17 Nov 2004 11:10:41 PST
Date: Wed, 17 Nov 2004 11:10:41 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Re: WildcardTermEnum skipping terms containing numbers?!
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20041117180710.63123.qmail@web21326.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Enumerating the terms using WildcardTermEnum and an IndexReader seems to be too buggy to use.
I'm now reimplementing my code using WildcardTermEnum.wildcardEquals which seems to be better so
far.

--- Sanyi <need4sid@yahoo.com> wrote:

> Hi!
> 
> I have following problem with 1.4.2:
> I'm searching for "c?ca" (using StandardAnalyzer) and one of the hits looks something like this:
> "blabla c0ca c0la etc.. etc..."
> (those big "o"-s are zero characters)
> Now, I'm enumerating the terms using WildcardTermEnum and all I get is:
> 
> caca
> ccca
> ceca
> cica
> coca
> crca
> csca
> cuca
> cyca
> 
> It doesn't know about "c0ca" at all.
> Is there any solution to come over this problem?
> 
> Thanks,
> Sanyi
> 
> 
> 		
> __________________________________ 
> Do you Yahoo!? 
> The all-new My Yahoo! - Get yours free! 
> http://my.yahoo.com 
>  
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 



		
__________________________________ 
Do you Yahoo!? 
Meet the all-new My Yahoo! - Try it today! 
http://my.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11330-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 19:34:55 2004
Return-Path: <lucene-user-return-11330-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61491 invoked from network); 17 Nov 2004 19:34:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 19:34:55 -0000
Received: (qmail 55307 invoked by uid 500); 17 Nov 2004 19:34:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55286 invoked by uid 500); 17 Nov 2004 19:34:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55272 invoked by uid 99); 17 Nov 2004 19:34:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.204 as permitted sender)
Received: from [64.233.170.204] (HELO rproxy.gmail.com) (64.233.170.204)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 11:34:49 -0800
Received: by rproxy.gmail.com with SMTP id 1so697316rny
        for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 11:34:38 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=IzxssVk+1r5p5ylHDzv/qdlWQKsHMwVdVTmU0AKAFE9u3yc/WOyfmm11RP8satazgNcwNT/B0bfu5xQp7+AgC/qGNTzoEbgVkDQ1BOrVsFtGV957MmjPddtvDPthQ9UtxkfLapcpb6G/axUtdAoOBDvmnR5fuPg+GJIUHXk+b2M=
Received: by 10.38.179.75 with SMTP id b75mr450115rnf;
        Wed, 17 Nov 2004 11:34:38 -0800 (PST)
Received: by 10.38.179.9 with HTTP; Wed, 17 Nov 2004 11:34:38 -0800 (PST)
Message-ID: <dd2db8d0041117113418c7f2fb@mail.gmail.com>
Date: Wed, 17 Nov 2004 12:34:38 -0700
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Index copy
In-Reply-To: <4568BE33B520DD43B7B24DE0B609B215523038@htexc.hq.htinc.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <4568BE33B520DD43B7B24DE0B609B215523038@htexc.hq.htinc.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You could lock your index for writes, then copy the file using
operating system copy commands.

Another way would be to lock your index, make a filesystem snapshot,
then unlock your index.  You can then safely copy the snapshot without
interupting further index operations.

On Wed, 17 Nov 2004 11:25:48 -0500, Ravi <ravi@htinc.com> wrote:
> Whats the bestway to copy an index from one directory to another? I
> tried opening an IndexWriter at the new location and used addIndexes to
> read from the old index. But that was very slow.
> 
> Thanks in advance,
> Ravi.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11331-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 19:44:19 2004
Return-Path: <lucene-user-return-11331-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66958 invoked from network); 17 Nov 2004 19:44:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 19:44:19 -0000
Received: (qmail 74426 invoked by uid 500); 17 Nov 2004 19:44:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74391 invoked by uid 500); 17 Nov 2004 19:44:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74374 invoked by uid 99); 17 Nov 2004 19:44:13 -0000
X-ASF-Spam-Status: No, hits=3.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FROM_ENDS_IN_NUMS,PLING_QUERY,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of abdo1234@msn.com designates 64.4.11.10 as permitted sender)
Received: from [64.4.11.10] (HELO hotmail.com) (64.4.11.10)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 11:44:05 -0800
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 17 Nov 2004 11:44:01 -0800
Received: from 81.10.42.103 by by7fd.bay7.hotmail.msn.com with HTTP;
	Wed, 17 Nov 2004 19:43:36 GMT
X-Originating-IP: [81.10.42.103]
X-Originating-Email: [abdo1234@msn.com]
X-Sender: abdo1234@msn.com
From: "abdulrahman galal" <abdo1234@msn.com>
To: lucene-user@jakarta.apache.org, erik@ehatchersolutions.com, otis_gospodnetic@yahoo.com, vigna@dsi.unimi.it, support@searchblackbox.com
Bcc: 
Subject: Something missing !!???
Date: Wed, 17 Nov 2004 21:43:36 +0200
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
Message-ID: <BAY7-F10MJ69ik6kvXs00013c80@hotmail.com>
X-OriginalArrivalTime: 17 Nov 2004 19:44:01.0479 (UTC) FILETIME=[C9912D70:01C4CCDD]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

i noticed in the last period that alot of people disscus with each others 
about the bugs of lucene ...

but something is missing ... i consider lucene is an indexing tool for text 
files and so one ...

but there are alot of tools that makes this indexing like access ...

what about compression ... compressing original text files and its indexes 
and performing indexing on them like (MG) system which is effecient in 
compression and indexing ...

where all of that in Lucene ???? please help me

if these requierments satisfied in Lucene please anyone notify me and send 
link of the new version...


thanks alot ...

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11332-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 19:54:55 2004
Return-Path: <lucene-user-return-11332-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 73104 invoked from network); 17 Nov 2004 19:54:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 19:54:54 -0000
Received: (qmail 92028 invoked by uid 500); 17 Nov 2004 19:54:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91994 invoked by uid 500); 17 Nov 2004 19:54:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91952 invoked by uid 99); 17 Nov 2004 19:54:46 -0000
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=PLING_QUERY,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.195 as permitted sender)
Received: from [64.233.170.195] (HELO rproxy.gmail.com) (64.233.170.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 11:54:43 -0800
Received: by rproxy.gmail.com with SMTP id 1so698631rny
        for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 11:54:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=rpfddsSjUhTxn2rmUDIXxEEridTwmb4/xFoPaShJQSWwibTKsBbwrX5fsTDb52STNK3d5zjZBAUPNQ6bzKdfSIS91hqe9Xgja9MH+ajJWR1mOobOOtGqtB35oDHYvcJHCMGyN7dPVm32WEdJcvElsu7/qDgC1YP7eDMB4OUP+0I=
Received: by 10.38.179.75 with SMTP id b75mr458062rnf;
        Wed, 17 Nov 2004 11:54:39 -0800 (PST)
Received: by 10.38.179.9 with HTTP; Wed, 17 Nov 2004 11:54:25 -0800 (PST)
Message-ID: <dd2db8d004111711541516f206@mail.gmail.com>
Date: Wed, 17 Nov 2004 12:54:25 -0700
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Something missing !!???
In-Reply-To: <BAY7-F10MJ69ik6kvXs00013c80@hotmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <BAY7-F10MJ69ik6kvXs00013c80@hotmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The HEAD version of CVS supports gz compression.  You will need to
check it out using cvs if you want to use it.


On Wed, 17 Nov 2004 21:43:36 +0200, abdulrahman galal <abdo1234@msn.com> wrote:
> i noticed in the last period that alot of people disscus with each others
> about the bugs of lucene ...
> 
> but something is missing ... i consider lucene is an indexing tool for text
> files and so one ...
> 
> but there are alot of tools that makes this indexing like access ...
> 
> what about compression ... compressing original text files and its indexes
> and performing indexing on them like (MG) system which is effecient in
> compression and indexing ...
> 
> where all of that in Lucene ???? please help me
> 
> if these requierments satisfied in Lucene please anyone notify me and send
> link of the new version...
> 
> thanks alot ...
> 
> _________________________________________________________________
> Express yourself instantly with MSN Messenger! Download today it's FREE!
> http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11333-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 20:04:58 2004
Return-Path: <lucene-user-return-11333-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78815 invoked from network); 17 Nov 2004 20:04:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 20:04:58 -0000
Received: (qmail 18078 invoked by uid 500); 17 Nov 2004 20:04:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18057 invoked by uid 500); 17 Nov 2004 20:04:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18044 invoked by uid 99); 17 Nov 2004 20:04:54 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 12:04:51 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Wed, 17 Nov 2004 15:05:19 -0500
Message-ID: <0b0901c4cce0$c3a249f0$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: version documents
Date: Wed, 17 Nov 2004 15:05:19 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0B06_01C4CCB6.DABBA020"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 17 Nov 2004 20:05:19.0594 (UTC) FILETIME=[C3620CA0:01C4CCE0]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0B06_01C4CCB6.DABBA020
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hey all;

I have ran into an interesting case.

Our system has notes. These need to be indexed. They are xml files =
called default.xml and are easily parsed and indexed. No problem, have =
been doing it all week.

The problem is if someone edits the note, the system doesn't update the =
default.xml. It creates a new file, default_1.xml (every edit creates a =
new file with an incremented number, the sytem only displays the content =
from the highest number).

My problem is I index all the documents and end up with terms that were =
taken out of note several version ago still showing up in the query. =
>From my point of view this makes sense because the files are still in =
the content. But to a user it is confusing because they have no idea =
every change they make to a note spans a new file and now the are seeing =
a term they removed from their note 2 weeks ago showing up in a query.

I have started modifying my incremental update to be look for multiple =
version of the default.xml but it is more work than I thought and is =
going make things complex.

Maybe there is an easier way? If I just let it run and create the index, =
can somebody suggest a way I could easily scan the index folder ensuring =
only the default.xml with the highest number in its filename remains =
(only for folders were there is more than one default.xml file)? Or is =
this wishful thinking?

Thanks,

Luke
------=_NextPart_000_0B06_01C4CCB6.DABBA020--



From lucene-user-return-11334-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 20:18:21 2004
Return-Path: <lucene-user-return-11334-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 87083 invoked from network); 17 Nov 2004 20:18:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 20:18:21 -0000
Received: (qmail 38637 invoked by uid 500); 17 Nov 2004 20:18:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38607 invoked by uid 500); 17 Nov 2004 20:17:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38584 invoked by uid 99); 17 Nov 2004 20:17:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [216.54.180.10] (HELO htexc.hq.htinc.com) (216.54.180.10)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 12:17:57 -0800
X-MIMEOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: mergeFactor
Date: Wed, 17 Nov 2004 15:17:46 -0500
Message-ID: <4568BE33B520DD43B7B24DE0B609B21552304E@htexc.hq.htinc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: mergeFactor
Thread-Index: AcTM4LdTLRuoxGUvSNC9RUhohUvuzwAAKt9g
From: "Ravi" <ravi@htinc.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Can somebody explain the difference between the parameters minMergeDocs
and mergeFactor in IndexWriter. When I read the documentation, it looks
like both of them represent number of documents to be in buffer before
they are merged into a new segment.=20

Thanks in advance,
Ravi. =20



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11335-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 21:38:55 2004
Return-Path: <lucene-user-return-11335-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39327 invoked from network); 17 Nov 2004 21:38:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 21:38:55 -0000
Received: (qmail 77574 invoked by uid 500); 17 Nov 2004 21:38:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77534 invoked by uid 500); 17 Nov 2004 21:38:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77517 invoked by uid 99); 17 Nov 2004 21:38:46 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.203 as permitted sender)
Received: from [64.233.170.203] (HELO rproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 13:38:43 -0800
Received: by rproxy.gmail.com with SMTP id 1so706276rny
        for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 13:38:39 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=ijD8B8jsHr+duK+E4hKdpokTyBo5XszDWMkXGz1tGjl3MYFBYDVowKjvKFoa/s9QNQ4lsXrqMqqLbm3Sk4+tMSkI7auPbZ/qReYOhSZRxPxcXr8iqqlPv8J3bPHVLpXVn3T0tweqagWJVUW1d/TLJ87p2xxKOCZCIt80hPTxJ2Y=
Received: by 10.38.179.75 with SMTP id b75mr476757rnf;
        Wed, 17 Nov 2004 12:38:39 -0800 (PST)
Received: by 10.38.179.9 with HTTP; Wed, 17 Nov 2004 12:38:39 -0800 (PST)
Message-ID: <dd2db8d004111712383ea6829f@mail.gmail.com>
Date: Wed, 17 Nov 2004 13:38:39 -0700
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: version documents
In-Reply-To: <0b0901c4cce0$c3a249f0$7703d00a@hypermedia.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <0b0901c4cce0$c3a249f0$7703d00a@hypermedia.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Split the filename into "basefilename" and "version" and make each a keyword.

Sort your query by version descending, and only use the first
"basefile" you encounter.

On Wed, 17 Nov 2004 15:05:19 -0500, Luke Shannon
<lshannon@hypermedia.com> wrote:
> Hey all;
> 
> I have ran into an interesting case.
> 
> Our system has notes. These need to be indexed. They are xml files called default.xml and are easily parsed and indexed. No problem, have been doing it all week.
> 
> The problem is if someone edits the note, the system doesn't update the default.xml. It creates a new file, default_1.xml (every edit creates a new file with an incremented number, the sytem only displays the content from the highest number).
> 
> My problem is I index all the documents and end up with terms that were taken out of note several version ago still showing up in the query. From my point of view this makes sense because the files are still in the content. But to a user it is confusing because they have no idea every change they make to a note spans a new file and now the are seeing a term they removed from their note 2 weeks ago showing up in a query.
> 
> I have started modifying my incremental update to be look for multiple version of the default.xml but it is more work than I thought and is going make things complex.
> 
> Maybe there is an easier way? If I just let it run and create the index, can somebody suggest a way I could easily scan the index folder ensuring only the default.xml with the highest number in its filename remains (only for folders were there is more than one default.xml file)? Or is this wishful thinking?
> 
> Thanks,
> 
> Luke
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11336-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 22:15:41 2004
Return-Path: <lucene-user-return-11336-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98710 invoked from network); 17 Nov 2004 22:15:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 22:15:41 -0000
Received: (qmail 75726 invoked by uid 500); 17 Nov 2004 22:15:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 75694 invoked by uid 500); 17 Nov 2004 22:15:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 75680 invoked by uid 99); 17 Nov 2004 22:15:35 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 14:15:33 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Wed, 17 Nov 2004 17:16:00 -0500
Message-ID: <0b4501c4ccf3$0540f980$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"Justin Swanhart" <greenlion@gmail.com>
References: <0b0901c4cce0$c3a249f0$7703d00a@hypermedia.com> <dd2db8d004111712383ea6829f@mail.gmail.com>
Subject: Re: version documents
Date: Wed, 17 Nov 2004 17:16:00 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 17 Nov 2004 22:16:00.0557 (UTC) FILETIME=[04F60DD0:01C4CCF3]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

That is a good idea. Thanks!

----- Original Message ----- 
From: "Justin Swanhart" <greenlion@gmail.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, November 17, 2004 3:38 PM
Subject: Re: version documents


> Split the filename into "basefilename" and "version" and make each a
keyword.
>
> Sort your query by version descending, and only use the first
> "basefile" you encounter.
>
> On Wed, 17 Nov 2004 15:05:19 -0500, Luke Shannon
> <lshannon@hypermedia.com> wrote:
> > Hey all;
> >
> > I have ran into an interesting case.
> >
> > Our system has notes. These need to be indexed. They are xml files
called default.xml and are easily parsed and indexed. No problem, have been
doing it all week.
> >
> > The problem is if someone edits the note, the system doesn't update the
default.xml. It creates a new file, default_1.xml (every edit creates a new
file with an incremented number, the sytem only displays the content from
the highest number).
> >
> > My problem is I index all the documents and end up with terms that were
taken out of note several version ago still showing up in the query. From my
point of view this makes sense because the files are still in the content.
But to a user it is confusing because they have no idea every change they
make to a note spans a new file and now the are seeing a term they removed
from their note 2 weeks ago showing up in a query.
> >
> > I have started modifying my incremental update to be look for multiple
version of the default.xml but it is more work than I thought and is going
make things complex.
> >
> > Maybe there is an easier way? If I just let it run and create the index,
can somebody suggest a way I could easily scan the index folder ensuring
only the default.xml with the highest number in its filename remains (only
for folders were there is more than one default.xml file)? Or is this
wishful thinking?
> >
> > Thanks,
> >
> > Luke
> >
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11337-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 22:59:40 2004
Return-Path: <lucene-user-return-11337-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16662 invoked from network); 17 Nov 2004 22:59:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 22:59:40 -0000
Received: (qmail 56659 invoked by uid 500); 17 Nov 2004 22:59:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 56640 invoked by uid 500); 17 Nov 2004 22:59:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 56624 invoked by uid 99); 17 Nov 2004 22:59:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [217.195.47.30] (HELO server2.pro-traffic2.de) (217.195.47.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 14:59:33 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by server2.pro-traffic2.de (Postfix) with ESMTP id 72F252D0115
	for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 23:56:54 +0100 (CET)
Received: from server2.pro-traffic2.de ([127.0.0.1])
	by localhost (server2 [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 26632-10 for <lucene-user@jakarta.apache.org>;
	Wed, 17 Nov 2004 23:56:54 +0100 (CET)
Received: from goliath (dsl-082-082-248-189.arcor-ip.net [82.82.248.189])
	by server2.pro-traffic2.de (Postfix) with ESMTP id D65E32D0110
	for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 23:56:53 +0100 (CET)
Message-ID: <006301c4ccf8$c2299fc0$0100a8c0@goliath>
From: "DES" <mail@2des.de>
To: <lucene-user@jakarta.apache.org>
Subject: Lucene and SVD
Date: Wed, 17 Nov 2004 23:57:05 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="koi8-r";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at server2.pro-traffic2.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi

I need some kind of implementation of SVD (singular value decomposition) or 
LSI with Lucene engine. Have anyone any ideas how to create a query table 
for decomposition? The table must have documents as rows and terms as 
columns, if a term is presented in the docuement, the corresponding field 
contains "1" and a "0" if not. Then the SVD will be applied to this table, 
and with first 2 columns docuemnts will be displayed in a 2D-space.
Does anyone work on a project like this?

thank you and excuse for my language skills :)

Anton 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11338-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 17 23:54:24 2004
Return-Path: <lucene-user-return-11338-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 86538 invoked from network); 17 Nov 2004 23:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 17 Nov 2004 23:54:24 -0000
Received: (qmail 44518 invoked by uid 500); 17 Nov 2004 23:54:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43755 invoked by uid 500); 17 Nov 2004 23:54:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43741 invoked by uid 99); 17 Nov 2004 23:54:15 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST,FORGED_RCVD_HELO,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [167.206.5.68] (HELO mta2.srv.hcvlny.cv.net) (167.206.5.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 15:54:12 -0800
Received: from optonline.net (hamstr5.srv.hcvlny.cv.net [167.206.5.17])
 by mta2.srv.hcvlny.cv.net
 (iPlanet Messaging Server 5.2 HotFix 1.25 (built Mar  3 2004))
 with ESMTP id <0I7C00AXBL27UI@mta2.srv.hcvlny.cv.net> for
 lucene-user@jakarta.apache.org; Wed, 17 Nov 2004 18:54:08 -0500 (EST)
Received: from [167.206.5.73] (Forwarded-For: [68.192.172.208])
 by mstr5.srv.hcvlny.cv.net (mshttpd); Wed, 17 Nov 2004 18:54:07 -0500
Date: Wed, 17 Nov 2004 18:54:07 -0500
From: jeichels@optonline.net
Subject: Considering intermediary solution before Lucene question
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id: <b2763db295c0.b295c0b2763d@optonline.net>
MIME-version: 1.0
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.25 (built Mar  3 2004)
Content-type: text/plain; charset=us-ascii
Content-language: en
Content-transfer-encoding: 7BIT
Content-disposition: inline
X-Accept-Language: en
Priority: normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Is there a way to use Lucene stemming and stop word removal without using the rest of the tool?   I am downloading the code now, but I imagine the answer might be deeply burried.  I would like to be able to send in a phrase and get back a collection of keywords if possible.

I am thinking of using an intermediary solution before moving fully to Lucene.  I don't have time to spend a month making a carefully tested, administratable Lucene solution for my site yet, but I intend to do so over time.  Funny thing is the Lucene code likely would only take up a couple hundred of lines, but integration and administration would take me much more time.

In the meantime, I am thinking I could use perhaps Lucene steming and parsing of words, then stick each search word along with the associated primary key in an indexed MySql table.   Each record I would need to do this to is small with maybe only average 15 userful words.   I would be able to have an in-database solution though ranking, etc would not exist.   This is better then the exact word searching i have currently which is really bad.

By the way, MySql 4.1.1 has some Lucene type handling, but it too does not have stemming and I am sure it is very slow compaired to Lucene.   Cpanel is still stuck on MySql 4.0.* so many people would not have access to even this basic ability in production systems for some time yet.

JohnE



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11339-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 00:17:53 2004
Return-Path: <lucene-user-return-11339-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97140 invoked from network); 18 Nov 2004 00:17:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 00:17:53 -0000
Received: (qmail 92328 invoked by uid 500); 18 Nov 2004 00:17:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91914 invoked by uid 500); 18 Nov 2004 00:17:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91900 invoked by uid 99); 18 Nov 2004 00:17:45 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.242] (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 17 Nov 2004 16:17:39 -0800
Received: (qmail 88478 invoked by uid 60001); 18 Nov 2004 00:17:36 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=duxkdLCLSNtq/KcJrRg5YIDhA66oqiLoHWeWrHXo0yNLetTTo+s20rGYKGOcF/zCw2fZsRYj5IZgo5Un2TJf0wmgkMWhTGfDhEBJ+YI/iwMHTZ/r2cxe/MfNJHS4weAW2Dxh/KLknbpurpzkfFqv3aAn6W8S1rh+tLbZ2jLl6qQ=  ;
Message-ID: <20041118001735.88476.qmail@web12705.mail.yahoo.com>
Received: from [216.194.17.194] by web12705.mail.yahoo.com via HTTP; Wed, 17 Nov 2004 16:17:35 PST
Date: Wed, 17 Nov 2004 16:17:35 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Considering intermediary solution before Lucene question
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <b2763db295c0.b295c0b2763d@optonline.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yes, you can use just the Analysis part.  For instance, I use this for
http://www.simpy.com and I believe we also have this in the Lucene book
as part of the source code package:

    /**
     * Gets Tokens extracted from the given text, using the specified
Analyzer.
     *
     * @param analyzer the <code>Analyzer</code> to use
     * @param text the text to analyze
     * @param field the field to pass to the Analyzer for tokenization
     * @return an array of <code>Token</code>s
     * @exception IOException if an error occurs
     */
    public static Token[] getTokens(Analyzer analyzer, String text,
String field)
        throws IOException
    {
        TokenStream stream = analyzer.tokenStream(field, new
StringReader(text));
        ArrayList tokenList = new ArrayList();
        while (true) {
            Token token = stream.next();
            if (token == null)
                break;
            tokenList.add(token);
        }
        return (Token[]) tokenList.toArray(new Token[0]);
    }

Otis

--- jeichels@optonline.net wrote:

> 
> Is there a way to use Lucene stemming and stop word removal without
> using the rest of the tool?   I am downloading the code now, but I
> imagine the answer might be deeply burried.  I would like to be able
> to send in a phrase and get back a collection of keywords if
> possible.
> 
> I am thinking of using an intermediary solution before moving fully
> to Lucene.  I don't have time to spend a month making a carefully
> tested, administratable Lucene solution for my site yet, but I intend
> to do so over time.  Funny thing is the Lucene code likely would only
> take up a couple hundred of lines, but integration and administration
> would take me much more time.
> 
> In the meantime, I am thinking I could use perhaps Lucene steming and
> parsing of words, then stick each search word along with the
> associated primary key in an indexed MySql table.   Each record I
> would need to do this to is small with maybe only average 15 userful
> words.   I would be able to have an in-database solution though
> ranking, etc would not exist.   This is better then the exact word
> searching i have currently which is really bad.
> 
> By the way, MySql 4.1.1 has some Lucene type handling, but it too
> does not have stemming and I am sure it is very slow compaired to
> Lucene.   Cpanel is still stuck on MySql 4.0.* so many people would
> not have access to even this basic ability in production systems for
> some time yet.
> 
> JohnE
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11340-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 01:01:57 2004
Return-Path: <lucene-user-return-11340-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 14988 invoked from network); 18 Nov 2004 01:01:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 01:01:56 -0000
Received: (qmail 59488 invoked by uid 500); 18 Nov 2004 01:01:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59451 invoked by uid 500); 18 Nov 2004 01:01:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 59438 invoked by uid 99); 18 Nov 2004 01:01:51 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST,FORGED_RCVD_HELO,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [167.206.5.42] (HELO mta9.srv.hcvlny.cv.net) (167.206.5.42)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 17:01:48 -0800
Received: from optonline.net (hamstr5.srv.hcvlny.cv.net [167.206.5.17])
 by mta9.srv.hcvlny.cv.net
 (iPlanet Messaging Server 5.2 HotFix 1.25 (built Mar  3 2004))
 with ESMTP id <0I7C00465O6TIJ@mta9.srv.hcvlny.cv.net> for
 lucene-user@jakarta.apache.org; Wed, 17 Nov 2004 20:01:41 -0500 (EST)
Received: from [167.206.5.73] (Forwarded-For: [68.192.172.208])
 by mstr5.srv.hcvlny.cv.net (mshttpd); Wed, 17 Nov 2004 20:01:41 -0500
Date: Wed, 17 Nov 2004 20:01:41 -0500
From: jeichels@optonline.net
Subject: Re: Considering intermediary solution before Lucene question
To: Lucene Users List <lucene-user@jakarta.apache.org>
Message-id: <b316d4b31b98.b31b98b316d4@optonline.net>
MIME-version: 1.0
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.25 (built Mar  3 2004)
Content-type: text/plain; charset=us-ascii
Content-language: en
Content-transfer-encoding: 7BIT
Content-disposition: inline
X-Accept-Language: en
Priority: normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This is so cool Otis.  I was just to write this off of something in the FAQ, but this is better then what I was doing.

This rocks!!!  Thank you.

JohnE

P.S.:  I am assuming you use org.apache.lucene.analysis.Token?   There are three Token's under Lucene.



----- Original Message -----
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Date: Wednesday, November 17, 2004 7:17 pm
Subject: Re: Considering intermediary solution before Lucene question

> Yes, you can use just the Analysis part.  For instance, I use this for
> http://www.simpy.com and I believe we also have this in the Lucene 
> bookas part of the source code package:
> 
>    /**
>     * Gets Tokens extracted from the given text, using the specified
> Analyzer.
>     *
>     * @param analyzer the <code>Analyzer</code> to use
>     * @param text the text to analyze
>     * @param field the field to pass to the Analyzer for tokenization
>     * @return an array of <code>Token</code>s
>     * @exception IOException if an error occurs
>     */
>    public static Token[] getTokens(Analyzer analyzer, String text,
> String field)
>        throws IOException
>    {
>        TokenStream stream = analyzer.tokenStream(field, new
> StringReader(text));
>        ArrayList tokenList = new ArrayList();
>        while (true) {
>            Token token = stream.next();
>            if (token == null)
>                break;
>            tokenList.add(token);
>        }
>        return (Token[]) tokenList.toArray(new Token[0]);
>    }
> 
> Otis
> 
> --- jeichels@optonline.net wrote:
> 
> > 
> > Is there a way to use Lucene stemming and stop word removal without
> > using the rest of the tool?   I am downloading the code now, but I
> > imagine the answer might be deeply burried.  I would like to be able
> > to send in a phrase and get back a collection of keywords if
> > possible.
> > 
> > I am thinking of using an intermediary solution before moving fully
> > to Lucene.  I don't have time to spend a month making a carefully
> > tested, administratable Lucene solution for my site yet, but I 
> intend> to do so over time.  Funny thing is the Lucene code likely 
> would only
> > take up a couple hundred of lines, but integration and 
> administration> would take me much more time.
> > 
> > In the meantime, I am thinking I could use perhaps Lucene 
> steming and
> > parsing of words, then stick each search word along with the
> > associated primary key in an indexed MySql table.   Each record I
> > would need to do this to is small with maybe only average 15 userful
> > words.   I would be able to have an in-database solution though
> > ranking, etc would not exist.   This is better then the exact word
> > searching i have currently which is really bad.
> > 
> > By the way, MySql 4.1.1 has some Lucene type handling, but it too
> > does not have stemming and I am sure it is very slow compaired to
> > Lucene.   Cpanel is still stuck on MySql 4.0.* so many people would
> > not have access to even this basic ability in production systems for
> > some time yet.
> > 
> > JohnE
> > 
> > 
> > 
> > -----------------------------------------------------------------
> ----
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > 
> > 
> 
> 
> -------------------------------------------------------------------
> --
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11341-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 01:25:54 2004
Return-Path: <lucene-user-return-11341-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21561 invoked from network); 18 Nov 2004 01:25:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 01:25:54 -0000
Received: (qmail 80728 invoked by uid 500); 18 Nov 2004 01:25:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 80699 invoked by uid 500); 18 Nov 2004 01:25:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 80685 invoked by uid 99); 18 Nov 2004 01:25:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of john.wang@gmail.com designates 64.233.170.200 as permitted sender)
Received: from [64.233.170.200] (HELO rproxy.gmail.com) (64.233.170.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 17:25:42 -0800
Received: by rproxy.gmail.com with SMTP id a36so972195rnf
        for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 17:25:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=os+kYfxliunjgG7Z0i7BeM4ValV/n4V5IKxU7t0e4dt6zitv0cpjV4cMwYQopsDddAwPmsFJvP8Kqbdgl/0f09krz2x7TTW0cx2zO3Yf3HSQM3j20I5X3bWDj2hiNyen6GLIOotqE16V9dT8lPCqcFDGkf8Huft8rIj41fzTyXI=
Received: by 10.38.83.67 with SMTP id g67mr325984rnb;
        Wed, 17 Nov 2004 17:25:23 -0800 (PST)
Received: by 10.38.75.60 with HTTP; Wed, 17 Nov 2004 17:25:23 -0800 (PST)
Message-ID: <8837fb77041117172562751621@mail.gmail.com>
Date: Wed, 17 Nov 2004 17:25:23 -0800
From: John Wang <john.wang@gmail.com>
Reply-To: John Wang <john.wang@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: lucene transaction and roll back implementation
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi folks:

    How does lucene implement transaction and roll back. E.g. if the
machine crashes (from power outage etc.) in the middle of a write,
e.g. indexWriter.close()? From examining the code, seems that there is
a possibility such crash can cause a corrupted index.

(in segmentInfos, new data is written to a temp file and then swaps
back to the actual file by doing Util.renameFile, but Util.renameFile
is not atomic if we are doing a byte copy)

    Is there a automatic recovery mechansim or a roll back?

    What is a general advise for how to handle these situations?

Thanks

-John

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11342-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 01:55:18 2004
Return-Path: <lucene-user-return-11342-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29905 invoked from network); 18 Nov 2004 01:55:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 01:55:18 -0000
Received: (qmail 8255 invoked by uid 500); 18 Nov 2004 01:55:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8233 invoked by uid 500); 18 Nov 2004 01:55:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8220 invoked by uid 99); 18 Nov 2004 01:55:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.192 as permitted sender)
Received: from [64.233.170.192] (HELO rproxy.gmail.com) (64.233.170.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 17:55:08 -0800
Received: by rproxy.gmail.com with SMTP id b11so995192rne
        for <lucene-user@jakarta.apache.org>; Wed, 17 Nov 2004 17:54:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=XZfDFaG6ROgUTMH7gCN6m79e3+4fqJe8fDJCaKvcX//YKYM5fNedfrqsaypb1RiWz5lTFLC1Lf6/w0gDpOjJKP3m7xRkfQoSLAxaCoYeTJRCA2mQ2gK2HcqN9s1bxGhIk0OGicg5C2rwHUabzB+7hGM5qb4uIwedCsz4EOeKiIQ=
Received: by 10.38.162.54 with SMTP id k54mr4258rne;
        Wed, 17 Nov 2004 16:08:03 -0800 (PST)
Received: by 10.38.72.66 with HTTP; Wed, 17 Nov 2004 16:08:03 -0800 (PST)
Message-ID: <88c6a67204111716084e343252@mail.gmail.com>
Date: Wed, 17 Nov 2004 18:08:03 -0600
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Considering intermediary solution before Lucene question
In-Reply-To: <b2763db295c0.b295c0b2763d@optonline.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <b2763db295c0.b295c0b2763d@optonline.net>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

John,

It actually should be pretty easy to use just the parts of Lucene you
want (the analyzers, etc) without using the rest.  See the example of
the PorterStemmer from this article:

http://www.onjava.com/pub/a/onjava/2003/01/15/lucene.html?page=2

You could feed a Reader to the tokenStream() method of
PorterStemAnalyzer, and get back a TokenStream, from which you pull
the tokens using the next() method.



On Wed, 17 Nov 2004 18:54:07 -0500, jeichels@optonline.net
<jeichels@optonline.net> wrote:
> 
> Is there a way to use Lucene stemming and stop word removal without using the rest of the tool?   I am downloading the code now, but I imagine the answer might be deeply burried.  I would like to be able to send in a phrase and get back a collection of keywords if possible.
> 
> I am thinking of using an intermediary solution before moving fully to Lucene.  I don't have time to spend a month making a carefully tested, administratable Lucene solution for my site yet, but I intend to do so over time.  Funny thing is the Lucene code likely would only take up a couple hundred of lines, but integration and administration would take me much more time.
> 
> In the meantime, I am thinking I could use perhaps Lucene steming and parsing of words, then stick each search word along with the associated primary key in an indexed MySql table.   Each record I would need to do this to is small with maybe only average 15 userful words.   I would be able to have an in-database solution though ranking, etc would not exist.   This is better then the exact word searching i have currently which is really bad.
> 
> By the way, MySql 4.1.1 has some Lucene type handling, but it too does not have stemming and I am sure it is very slow compaired to Lucene.   Cpanel is still stuck on MySql 4.0.* so many people would not have access to even this basic ability in production systems for some time yet.
> 
> JohnE
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11343-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 02:04:08 2004
Return-Path: <lucene-user-return-11343-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32527 invoked from network); 18 Nov 2004 02:04:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 02:04:08 -0000
Received: (qmail 17162 invoked by uid 500); 18 Nov 2004 02:04:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16842 invoked by uid 500); 18 Nov 2004 02:04:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16823 invoked by uid 99); 18 Nov 2004 02:04:02 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST,FORGED_RCVD_HELO,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [167.206.5.67] (HELO mta1.srv.hcvlny.cv.net) (167.206.5.67)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 18:03:58 -0800
Received: from optonline.net (hamstr5.srv.hcvlny.cv.net [167.206.5.17])
 by mta1.srv.hcvlny.cv.net
 (iPlanet Messaging Server 5.2 HotFix 1.25 (built Mar  3 2004))
 with ESMTP id <0I7C006ORR1ZNW@mta1.srv.hcvlny.cv.net> for
 lucene-user@jakarta.apache.org; Wed, 17 Nov 2004 21:03:35 -0500 (EST)
Received: from [167.206.5.73] (Forwarded-For: [68.192.172.208])
 by mstr5.srv.hcvlny.cv.net (mshttpd); Wed, 17 Nov 2004 21:03:35 -0500
Date: Wed, 17 Nov 2004 21:03:35 -0500
From: jeichels@optonline.net
Subject: Re: Considering intermediary solution before Lucene question
To: Lucene Users List <lucene-user@jakarta.apache.org>,
 Chris Lamprecht <clamprecht@gmail.com>
Message-id: <c26ab4c2ac7d.c2ac7dc26ab4@optonline.net>
MIME-version: 1.0
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.25 (built Mar  3 2004)
Content-type: text/plain; charset=us-ascii
Content-language: en
Content-transfer-encoding: 7BIT
Content-disposition: inline
X-Accept-Language: en
Priority: normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I thank you both.  I have it already partly implemented here.   It seems easy.

At least this should carry through my product until I can really get to use Lucene.  I am not sure how far I can take MySql with stemmed, indexed key words, but should give me maybe 6 monthes at least of something useful as opposed to impossible searching.  I need time and this might just be the trick.

Always I fight for simplicity, but it is hard when you have 2 databases that have to keep in synch.  If accuracy is important (people paying money) then handling all of the edge cases (such as the question that was just asked about if the machine goes down) are so important.  I understand this is beyond the scope of Lucene.

Thank you for the help.  This really is an interesting project.

JohnE



----- Original Message -----
From: Chris Lamprecht <clamprecht@gmail.com>
Date: Wednesday, November 17, 2004 7:08 pm
Subject: Re: Considering intermediary solution before Lucene question

> John,
> 
> It actually should be pretty easy to use just the parts of Lucene you
> want (the analyzers, etc) without using the rest.  See the example of
> the PorterStemmer from this article:
> 
> http://www.onjava.com/pub/a/onjava/2003/01/15/lucene.html?page=2
> 
> You could feed a Reader to the tokenStream() method of
> PorterStemAnalyzer, and get back a TokenStream, from which you pull
> the tokens using the next() method.
> 
> 
> 
> On Wed, 17 Nov 2004 18:54:07 -0500, jeichels@optonline.net
> <jeichels@optonline.net> wrote:
> > 
> > Is there a way to use Lucene stemming and stop word removal 
> without using the rest of the tool?   I am downloading the code 
> now, but I imagine the answer might be deeply burried.  I would 
> like to be able to send in a phrase and get back a collection of 
> keywords if possible.
> > 
> > I am thinking of using an intermediary solution before moving 
> fully to Lucene.  I don't have time to spend a month making a 
> carefully tested, administratable Lucene solution for my site yet, 
> but I intend to do so over time.  Funny thing is the Lucene code 
> likely would only take up a couple hundred of lines, but 
> integration and administration would take me much more time.
> > 
> > In the meantime, I am thinking I could use perhaps Lucene 
> steming and parsing of words, then stick each search word along 
> with the associated primary key in an indexed MySql table.   Each 
> record I would need to do this to is small with maybe only average 
> 15 userful words.   I would be able to have an in-database 
> solution though ranking, etc would not exist.   This is better 
> then the exact word searching i have currently which is really bad.
> > 
> > By the way, MySql 4.1.1 has some Lucene type handling, but it 
> too does not have stemming and I am sure it is very slow compaired 
> to Lucene.   Cpanel is still stuck on MySql 4.0.* so many people 
> would not have access to even this basic ability in production 
> systems for some time yet.
> > 
> > JohnE
> > 
> > -----------------------------------------------------------------
> ----
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > 
> >
> 
> -------------------------------------------------------------------
> --
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11344-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 02:23:52 2004
Return-Path: <lucene-user-return-11344-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 38247 invoked from network); 18 Nov 2004 02:23:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 02:23:52 -0000
Received: (qmail 35113 invoked by uid 500); 18 Nov 2004 02:23:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 35091 invoked by uid 500); 18 Nov 2004 02:23:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35078 invoked by uid 99); 18 Nov 2004 02:23:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [216.54.180.10] (HELO htexc.hq.htinc.com) (216.54.180.10)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 17 Nov 2004 18:23:45 -0800
X-MIMEOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Index copy
Date: Wed, 17 Nov 2004 21:23:30 -0500
Message-ID: <4568BE33B520DD43B7B24DE0B609B215523062@htexc.hq.htinc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Index copy
Thread-Index: AcTM3ITQTdWkKNclT3W4Iq0YhMA6fgAOMeFg
From: "Ravi" <ravi@htinc.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

=20
Thanks. I was looking for an o/s independent way of copying. Probably I
can use BufferedInputStream and BufferedOutputStream classes to copy the
index to a different location.
=20
-----Original Message-----
From: Justin Swanhart [mailto:greenlion@gmail.com]=20
Sent: Wednesday, November 17, 2004 2:35 PM
To: Lucene Users List
Subject: Re: Index copy

You could lock your index for writes, then copy the file using operating
system copy commands.

Another way would be to lock your index, make a filesystem snapshot,
then unlock your index.  You can then safely copy the snapshot without
interupting further index operations.

On Wed, 17 Nov 2004 11:25:48 -0500, Ravi <ravi@htinc.com> wrote:
> Whats the bestway to copy an index from one directory to another? I=20
> tried opening an IndexWriter at the new location and used addIndexes=20
> to read from the old index. But that was very slow.
>=20
> Thanks in advance,
> Ravi.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11345-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 08:26:32 2004
Return-Path: <lucene-user-return-11345-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57978 invoked from network); 18 Nov 2004 08:26:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 08:26:32 -0000
Received: (qmail 59979 invoked by uid 500); 18 Nov 2004 08:26:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 59954 invoked by uid 500); 18 Nov 2004 08:26:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 59941 invoked by uid 99); 18 Nov 2004 08:26:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 00:26:21 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr3.xs4all.nl (8.12.11/8.12.11) with ESMTP id iAI8QBLO011879
	for <lucene-user@jakarta.apache.org>; Thu, 18 Nov 2004 09:26:12 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Lucene and SVD
Date: Thu, 18 Nov 2004 09:26:11 +0100
User-Agent: KMail/1.5.4
References: <006301c4ccf8$c2299fc0$0100a8c0@goliath>
In-Reply-To: <006301c4ccf8$c2299fc0$0100a8c0@goliath>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
Message-Id: <200411180926.11417.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 17 November 2004 23:57, DES wrote:
> Hi
>=20
> I need some kind of implementation of SVD (singular value decomposition) =
or=20
> LSI with Lucene engine. Have anyone any ideas how to create a query table=
=20
> for decomposition? The table must have documents as rows and terms as=20
> columns, if a term is presented in the docuement, the corresponding field=
=20
> contains "1" and a "0" if not. Then the SVD will be applied to this table=
,=20

=46rom Lucene, with TermVector and field norm, one could use the term
density instead of a presence bit.

> and with first 2 columns docuemnts will be displayed in a 2D-space.
> Does anyone work on a project like this?

I don't know. Is there a good SVD package for Java?

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11346-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 09:03:40 2004
Return-Path: <lucene-user-return-11346-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78158 invoked from network); 18 Nov 2004 09:03:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 09:03:39 -0000
Received: (qmail 648 invoked by uid 500); 18 Nov 2004 09:03:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99727 invoked by uid 500); 18 Nov 2004 09:03:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99713 invoked by uid 99); 18 Nov 2004 09:03:36 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 01:03:33 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id B341C23BE0
	for <lucene-user@jakarta.apache.org>; Thu, 18 Nov 2004 10:04:15 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 11730-09 for <lucene-user@jakarta.apache.org>;
 Thu, 18 Nov 2004 10:04:15 +0100 (CET)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 8559E23BDF
	for <lucene-user@jakarta.apache.org>; Thu, 18 Nov 2004 10:04:15 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id iAI93SmA029609
	for <lucene-user@jakarta.apache.org>; Thu, 18 Nov 2004 10:03:28 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id iAI93SuV029605;
	Thu, 18 Nov 2004 10:03:28 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16796.25952.23037.960288@tanto-xipolis.de>
Date: Thu, 18 Nov 2004 10:03:28 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: WildcardTermEnum skipping terms containing numbers?!
In-Reply-To: <20041117191041.47223.qmail@web21324.mail.yahoo.com>
References: <20041117180710.63123.qmail@web21326.mail.yahoo.com>
	<20041117191041.47223.qmail@web21324.mail.yahoo.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sanyi writes:
> Enumerating the terms using WildcardTermEnum and an IndexReader seems to be too buggy to use.

If there's a bug, it should be tracked down, not worked around...

But it looks ok to me:

import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.index.*;
import org.apache.lucene.document.*;
import org.apache.lucene.store.*;
import org.apache.lucene.search.*;

public class LuceneTest {

    public static void main(String[] args) throws Exception {

	RAMDirectory dir = new RAMDirectory();

	IndexWriter writer = new IndexWriter(dir, new StandardAnalyzer(), true);

	Document doc = new Document();
	
	doc.add(new Field("foo", "blabla etc.. etc... c0la c0ca caca ccca", true, true, true));

	writer.addDocument(doc);

	writer.close();

	IndexReader reader = IndexReader.open(dir);

	WildcardTermEnum enum = new WildcardTermEnum(reader, new Term("foo", "c??a"));

	do {
	    System.out.println(enum.term().text());
	} while ( enum.next() );

	WildcardQuery wq = new WildcardQuery(new Term("foo", "c??a"));

	Query q = wq.rewrite(reader);

	System.out.println(q.toString());

	reader.close();
    }
}

gives
c0ca
c0la
caca
ccca
foo:c0ca foo:c0la foo:caca foo:ccca

The only bug I see is in the docs, that claims enum.term() to be invalid
before the first call to next() which does not seem to be the case.
So if you use
while ( enum.next() ) {
...
}
you will loose the first term, whatever it is.
Looking at the sources I find that this behaviour is shared by 
FuzzyTermEnum. Both implementations of the abstract FilteredTermEnum class
call setEnum at the end of the constructor, which prepares the first
result.

Morus


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11347-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 10:35:20 2004
Return-Path: <lucene-user-return-11347-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 35035 invoked from network); 18 Nov 2004 10:35:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 10:35:20 -0000
Received: (qmail 50282 invoked by uid 500); 18 Nov 2004 10:35:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50246 invoked by uid 500); 18 Nov 2004 10:35:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50233 invoked by uid 99); 18 Nov 2004 10:35:14 -0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=RCVD_BY_IP,RCVD_DOUBLE_IP_LOOSE,RCVD_NUMERIC_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [80.33.244.28] (HELO 80.33.244.28) (80.33.244.28)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 02:35:11 -0800
Received: from  [213.170.56.194] by 80.33.244.28
  (ArGoSoft Mail Server Pro for WinNT/2000/XP, Version 1.8 (1.8.6.7)); Thu, 18 Nov 2004 11:36:08 +0100
From: "d2clon@desarrolladores.org" <d2clon@desarrolladores.org>
Reply-To: d2clon@desarrolladores.org
Organization: desarrolladores.org
To: lucene-user@jakarta.apache.org
Subject: problems search number range
Date: Thu, 18 Nov 2004 10:35:47 +0100
User-Agent: KMail/1.6.1
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Message-Id: <200411181035.47756.d2clon@desarrolladores.org>
X-ArGoMail-Authenticated: d2clon@desarrolladores.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

(excuse me for my english)

hi people:
i am trying to do a search between two numbers..=20
at the very beginning it was all right,=20
for example: when i had the number 20 and i searched between 10 and 30

query=3D 'number:[10 TO 30]'

then lucene found it.. but..

if i change the range numbers: 5 and 130 i started to have problems..
lucene didn't find the number 20 yet=A1

i solved this changing the format of the numbers and putting this:=20
number to look for: "020"
range: "005", "130"
query=3D 'number:[005 TO 030]

up to this point all correct..=20

but then another problem starts:
i need to use negative numbers and then all becomes crazy for me...

i need to solve this search:
number: -10
range: -50 TO 5

i need help..=20
i dont find anything using google..=20

thanks
d2clon





---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11348-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 11:13:54 2004
Return-Path: <lucene-user-return-11348-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55953 invoked from network); 18 Nov 2004 11:13:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 11:13:54 -0000
Received: (qmail 89018 invoked by uid 500); 18 Nov 2004 11:13:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 88771 invoked by uid 500); 18 Nov 2004 11:13:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 88755 invoked by uid 99); 18 Nov 2004 11:13:49 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [217.195.47.30] (HELO server2.pro-traffic2.de) (217.195.47.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 03:13:46 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by server2.pro-traffic2.de (Postfix) with ESMTP id B28D52D15F8
	for <lucene-user@jakarta.apache.org>; Thu, 18 Nov 2004 12:05:43 +0100 (CET)
Received: from server2.pro-traffic2.de ([127.0.0.1])
	by localhost (server2 [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 08304-09 for <lucene-user@jakarta.apache.org>;
	Thu, 18 Nov 2004 12:05:43 +0100 (CET)
Received: from goliath (dsl-213-023-069-131.arcor-ip.net [213.23.69.131])
	by server2.pro-traffic2.de (Postfix) with ESMTP id 2F8CF2D15F6
	for <lucene-user@jakarta.apache.org>; Thu, 18 Nov 2004 12:05:43 +0100 (CET)
Message-ID: <000e01c4cd5e$9af78870$0100a8c0@goliath>
From: "DES" <mail@2des.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <006301c4ccf8$c2299fc0$0100a8c0@goliath> <200411180926.11417.paul.elschot@xs4all.nl>
Subject: Re: Lucene and SVD
Date: Thu, 18 Nov 2004 12:06:07 +0100
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at server2.pro-traffic2.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

>I don't know. Is there a good SVD package for Java?

I think about implementation with Jama, there is a SVD class, but I don't 
know yet if it's good or not 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11349-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 11:49:26 2004
Return-Path: <lucene-user-return-11349-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74607 invoked from network); 18 Nov 2004 11:49:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 11:49:25 -0000
Received: (qmail 37586 invoked by uid 500); 18 Nov 2004 11:49:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37398 invoked by uid 500); 18 Nov 2004 11:49:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37381 invoked by uid 99); 18 Nov 2004 11:49:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 03:49:16 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP
	id 8510F23BC9; Thu, 18 Nov 2004 12:49:59 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 18819-07; Thu, 18 Nov 2004 12:49:59 +0100 (CET)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP
	id 5BCEE23BC8; Thu, 18 Nov 2004 12:49:59 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id iAIBnBmA030632;
	Thu, 18 Nov 2004 12:49:11 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id iAIBnBRY030626;
	Thu, 18 Nov 2004 12:49:11 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16796.35895.255667.627629@tanto-xipolis.de>
Date: Thu, 18 Nov 2004 12:49:11 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	d2clon@desarrolladores.org
Subject: Re: problems search number range
In-Reply-To: <200411181035.47756.d2clon@desarrolladores.org>
References: <200411181035.47756.d2clon@desarrolladores.org>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

d2clon@desarrolladores.org writes:
> 
> i need to solve this search:
> number: -10
> range: -50 TO 5
> 
> i need help.. 
> i dont find anything using google.. 
> 
If your numbers are in the interval MIN/MAX and MIN<0 you can shift
that to a positive interval 0 ... (MAX-MIN) by subtracting MIN from
each number.

Alternatively you have to find a string represantation providing the
correct order for signed integers.
E.g.
-0010
-0001
00000
00001
00020
should work (in the range -9999..99999), since '0' has a higher ascii 
(unicode) code than '-'.
Of course the analayzer has to preserve the '-' and the '-' should not
be eaten by the query parser in case you use it. I don't know if there are
problems with that, but I suspect that at least for the query parser.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11350-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 12:28:24 2004
Return-Path: <lucene-user-return-11350-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 98444 invoked from network); 18 Nov 2004 12:28:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 12:28:23 -0000
Received: (qmail 83990 invoked by uid 500); 18 Nov 2004 12:28:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 83953 invoked by uid 500); 18 Nov 2004 12:28:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 83940 invoked by uid 99); 18 Nov 2004 12:28:18 -0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=RCVD_BY_IP,RCVD_DOUBLE_IP_LOOSE,RCVD_NUMERIC_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [80.33.244.28] (HELO 80.33.244.28) (80.33.244.28)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 04:28:16 -0800
Received: from  [213.170.56.194] by 80.33.244.28
  (ArGoSoft Mail Server Pro for WinNT/2000/XP, Version 1.8 (1.8.6.7)); Thu, 18 Nov 2004 13:29:11 +0100
From: "d2clon@desarrolladores.org" <d2clon@desarrolladores.org>
Reply-To: d2clon@desarrolladores.org
Organization: desarrolladores.org
To: lucene-user@jakarta.apache.org
Subject: Re: problems search number range
Date: Thu, 18 Nov 2004 12:28:51 +0100
User-Agent: KMail/1.6.1
References: <200411181035.47756.d2clon@desarrolladores.org> <16796.35895.255667.627629@tanto-xipolis.de>
In-Reply-To: <16796.35895.255667.627629@tanto-xipolis.de>
MIME-Version: 1.0
Content-Disposition: inline
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Message-Id: <200411181228.51431.d2clon@desarrolladores.org>
X-ArGoMail-Authenticated: d2clon@desarrolladores.org
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

hi morus & company;

On Thursday 18 November 2004 12:49, Morus Walter wrote:
> d2clon@desarrolladores.org writes:
> > i need to solve this search:
> > number: -10
> > range: -50 TO 5
> >
> > i need help..
> > i dont find anything using google..
>
> If your numbers are in the interval MIN/MAX and MIN<0 you can shift
> that to a positive interval 0 ... (MAX-MIN) by subtracting MIN from
> each number.

thx, this is just what i have done.. 



>
> Alternatively you have to find a string represantation providing the
> correct order for signed integers.
> E.g.
> -0010
> -0001
> 00000
> 00001
> 00020
> should work (in the range -9999..99999), since '0' has a higher ascii
> (unicode) code than '-'.
> Of course the analayzer has to preserve the '-' and the '-' should not
> be eaten by the query parser in case you use it. I don't know if there are
> problems with that, but I suspect that at least for the query parser.


this solution was the first that i tried.. but this does not run correctly.. 
because:

when we try to sort this number in alphanumeric order we obtain that number 
-0010 is higher than -0001

so, the final solution is what you comment us at the beginning of your post.

thx a lot
d2clon

>
> Morus
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11351-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 12:37:19 2004
Return-Path: <lucene-user-return-11351-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3153 invoked from network); 18 Nov 2004 12:37:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 12:37:19 -0000
Received: (qmail 99446 invoked by uid 500); 18 Nov 2004 12:37:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99413 invoked by uid 500); 18 Nov 2004 12:37:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99381 invoked by uid 99); 18 Nov 2004 12:37:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 04:37:10 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP
	id 3141223BC7; Thu, 18 Nov 2004 13:37:53 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 20125-04; Thu, 18 Nov 2004 13:37:53 +0100 (CET)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP
	id 0CF9C23BC5; Thu, 18 Nov 2004 13:37:53 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id iAICb5mA031082;
	Thu, 18 Nov 2004 13:37:05 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id iAICb5E9031078;
	Thu, 18 Nov 2004 13:37:05 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16796.38769.517691.466413@tanto-xipolis.de>
Date: Thu, 18 Nov 2004 13:37:05 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	d2clon@desarrolladores.org
Subject: Re: problems search number range
In-Reply-To: <200411181228.51431.d2clon@desarrolladores.org>
References: <200411181035.47756.d2clon@desarrolladores.org>
	<16796.35895.255667.627629@tanto-xipolis.de>
	<200411181228.51431.d2clon@desarrolladores.org>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

d2clon@desarrolladores.org writes:
> 
> this solution was the first that i tried.. but this does not run correctly.. 
> because:
> 
> when we try to sort this number in alphanumeric order we obtain that number 
> -0010 is higher than -0001
> 
right. I failed to see that.
So you would have to use a complement for negative numbers as well e.g. using
-9989 for -10, -9998 for -1, ...

But shifting the interval is easier of course.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11352-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 13:09:31 2004
Return-Path: <lucene-user-return-11352-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20208 invoked from network); 18 Nov 2004 13:09:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 13:09:30 -0000
Received: (qmail 50000 invoked by uid 500); 18 Nov 2004 13:09:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49966 invoked by uid 500); 18 Nov 2004 13:09:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49949 invoked by uid 99); 18 Nov 2004 13:09:24 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_MESSAGE,HTML_NONELEMENT_30_40,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [202.144.61.68] (HELO delmail1.sapient.com) (202.144.61.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 05:09:21 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4CD6F.C98E13D4"
Subject: Too many files exception
Date: Thu, 18 Nov 2004 18:39:07 +0530
Message-ID: <88B56FBAEB84EC448511C30CD63D3F8A0279F539@delmail1.sapient.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Too many files exception
Thread-Index: AcTNb84kBlXfp7WcS2GPonfNI9x/zQ==
From: "Neelam Bhatnagar" <nbhatnagar@sapient.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4CD6F.C98E13D4
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hello all,=20
=20
We have been using Lucene 3.1 version with Tomcat 4.0 and jdk1.4.=20
It seems that sometimes we see a "Too many files open" exception which
completely garbles the whole index and whole search functionality
crashes on the web site. It has also been known to crash the complete
JSP container of tomcat.=20
=20
After looking at the bug list, we found out that it has been reported as
a bug in the Lucene bug list as Bug#29774, #30049, #30452 which claims
to have been resolved with the new version of Lucene.=20
=20
We have tried everything to reproduce the problem ourselves to figure
out the exact circumstances under which it occurs but with out any luck.
We are absolutely sure that we close all the files, index readers,
writers and searchers.
=20
We would be installing the new version of Lucene but we need to be able
to reproduce the problem consistently to test it.
=20
We would really appreciate it if someone could point us to the root
cause behind this so we can devise a solution around that.
=20
Thanks and regards
Neelam Bhatnagar
=20
Technology| Sapient
Presidency Building
Mehrauli-Gurgaon Road
Sector-14, Gurgaon-122001
Haryana, India
=20
Tel: 91.124.2826299
Cell: 91.9899591054
Email: nbhatnagar@sapient.com
=20
=20
=20
=20

------_=_NextPart_001_01C4CD6F.C98E13D4--

From lucene-user-return-11353-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 14:58:27 2004
Return-Path: <lucene-user-return-11353-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2163 invoked from network); 18 Nov 2004 14:58:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 14:58:27 -0000
Received: (qmail 73354 invoked by uid 500); 18 Nov 2004 14:57:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 73224 invoked by uid 500); 18 Nov 2004 14:57:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73184 invoked by uid 99); 18 Nov 2004 14:57:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [141.156.69.115] (HELO mail.infosciences.com) (141.156.69.115)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 06:57:46 -0800
Received: from Aviran (unknown [141.156.69.109])
	by mail.infosciences.com (Postfix) with ESMTP
	id 2B3F8118308; Thu, 18 Nov 2004 09:55:23 -0500 (EST)
From: "Aviran" <amordo@infosciences.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>,
	"'John Wang'" <john.wang@gmail.com>
Subject: RE: lucene transaction and roll back implementation
Date: Thu, 18 Nov 2004 09:57:48 -0500
Message-ID: <002201c4cd7e$fae3e830$6a00a8c0@Aviran>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
In-Reply-To: <8837fb77041117172562751621@mail.gmail.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

AFIK there is no transaction not rollback support in lucene

Aviran
http://www.aviransplace.com

-----Original Message-----
From: John Wang [mailto:john.wang@gmail.com]=20
Sent: Wednesday, November 17, 2004 20:25 PM
To: lucene-user@jakarta.apache.org
Subject: lucene transaction and roll back implementation


Hi folks:

    How does lucene implement transaction and roll back. E.g. if the =
machine
crashes (from power outage etc.) in the middle of a write, e.g.
indexWriter.close()? From examining the code, seems that there is a
possibility such crash can cause a corrupted index.

(in segmentInfos, new data is written to a temp file and then swaps back =
to
the actual file by doing Util.renameFile, but Util.renameFile is not =
atomic
if we are doing a byte copy)

    Is there a automatic recovery mechansim or a roll back?

    What is a general advise for how to handle these situations?

Thanks

-John

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11354-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 15:02:47 2004
Return-Path: <lucene-user-return-11354-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5784 invoked from network); 18 Nov 2004 15:02:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 15:02:47 -0000
Received: (qmail 86623 invoked by uid 500); 18 Nov 2004 15:02:41 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86592 invoked by uid 500); 18 Nov 2004 15:02:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86571 invoked by uid 99); 18 Nov 2004 15:02:40 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 07:02:38 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Best Implementation of Next and Prev in Lucene
Date: Thu, 18 Nov 2004 10:02:34 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA5BFCC9@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Best Implementation of Next and Prev in Lucene
Thread-Index: AcTMTNhp6Oa1QgJOQSWLn5wT6yDYXQBMsOoA
From: "Will Allen" <wallen@Cyveillance.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

See the demo jsp pages.

-----Original Message-----
From: Ramon Aseniero [mailto:ramon.aseniero@tryarc.com]
Sent: Tuesday, November 16, 2004 9:26 PM
To: lucene-user@jakarta.apache.org
Subject: Best Implementation of Next and Prev in Lucene


Hi All,

=20

What's the best implementation of displaying the Next and Prev search =
result
in Lucene?

=20

Thanks,

Ramon


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11355-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 15:06:48 2004
Return-Path: <lucene-user-return-11355-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8956 invoked from network); 18 Nov 2004 15:06:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 15:06:47 -0000
Received: (qmail 3846 invoked by uid 500); 18 Nov 2004 15:06:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 3809 invoked by uid 500); 18 Nov 2004 15:06:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 3784 invoked by uid 99); 18 Nov 2004 15:06:29 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 07:06:28 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: API request: isOpen on indexwriter and searcher
Date: Thu, 18 Nov 2004 10:06:25 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA5BFCCA@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Best Implementation of Next and Prev in Lucene
Thread-Index: AcTMTNhp6Oa1QgJOQSWLn5wT6yDYXQBMswmA
From: "Will Allen" <wallen@Cyveillance.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Could a developer consider adding an isOpen method to the writer and =
searcher?

I have looked at doing it myself, but not sure what I am doing.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11356-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 15:43:12 2004
Return-Path: <lucene-user-return-11356-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 35500 invoked from network); 18 Nov 2004 15:43:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 15:43:12 -0000
Received: (qmail 96291 invoked by uid 500); 18 Nov 2004 15:42:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96187 invoked by uid 500); 18 Nov 2004 15:42:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96133 invoked by uid 99); 18 Nov 2004 15:42:13 -0000
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=DNS_FROM_RFC_ABUSE,NIGERIAN_SUBJECT2
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.244] (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 18 Nov 2004 07:42:10 -0800
Received: (qmail 7897 invoked by uid 60001); 18 Nov 2004 15:42:06 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=2PIi7e7XjqQlpRWpnCkWAnrRhcFAHpYM2gvHZ0ECzeQPDcIweiK4iJqzVecUMXk+d+S5GDv0XqhBlIrkuyskYF+pmN7f8D14cCZml2rh0zba8vETbVBWYQwlJH14A2DFLIPXab7n4E22sUXHpamnoJ2or2j2fvShBzivodAC9Hs=  ;
Message-ID: <20041118154159.7858.qmail@web12707.mail.yahoo.com>
Received: from [216.194.17.194] by web12707.mail.yahoo.com via HTTP; Thu, 18 Nov 2004 07:41:58 PST
Date: Thu, 18 Nov 2004 07:41:58 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: urgent help needed
To: lucene-user@jakarta.apache.org
Cc: nbhatnagar@sapient.com
In-Reply-To: <88B56FBAEB84EC448511C30CD63D3F8A0279F532@delmail1.sapient.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Redirecting to the more appropriate lucene-user list.

Hello,

About 2 years ago I wrote 2 articles for O'Reilly Network, where I
believe I mentioned this issue and provided some context.  Make sure
your index is optimized.  If that doesn't help, switch to the compound
index format (1 set call on IndexWriter instance).  You can also adjust
your OS's limits - the article I mentioned cover this for a few UNIX
shells.

Otis

--- Neelam Bhatnagar <nbhatnagar@sapient.com> wrote:

> Hi,
>  
> I have posted this several times before but there has been no
> response.
> We really need to resolve this as soon as possible. Kindly help us. 
>  
> We have been using Lucene 3.1 version with Tomcat 4.0 and jdk1.4. 
> It seems that sometimes we see a "Too many files open" exception
> which
> completely garbles the whole index and whole search functionality
> crashes on the web site. It has also been known to crash the complete
> JSP container of tomcat. 
>  
> After looking at the bug list, we found out that it has been reported
> as
> a bug in the Lucene bug list as Bug#29774, #30049, #30452 which
> claims
> to have been resolved with the new version of Lucene. 
>  
> We have tried everything to reproduce the problem ourselves to figure
> out the exact circumstances under which it occurs but with out any
> luck.
> 
>  
> We would be installing the new version of Lucene but we need to be
> able
> to reproduce the problem to test it.
>  
> We would really appreciate it if someone could point us to the root
> cause behind this so we can devise a solution around that.
>  
> Thanks and regards
> Neelam Bhatnagar
>  
> Technology| Sapient
> Presidency Building
> Mehrauli-Gurgaon Road
> Sector-14, Gurgaon-122001
> Haryana, India
>  
> Tel: 91.124.2826299
> Cell: 91.9899591054
> Email: nbhatnagar@sapient.com
>  
>  
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11357-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 15:45:30 2004
Return-Path: <lucene-user-return-11357-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 37248 invoked from network); 18 Nov 2004 15:45:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 15:45:29 -0000
Received: (qmail 11448 invoked by uid 500); 18 Nov 2004 15:45:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 11421 invoked by uid 500); 18 Nov 2004 15:45:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 11407 invoked by uid 99); 18 Nov 2004 15:45:24 -0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=NIGERIAN_SUBJECT2
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [202.144.61.68] (HELO delmail1.sapient.com) (202.144.61.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 07:45:22 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: urgent help needed
Date: Thu, 18 Nov 2004 21:15:07 +0530
Message-ID: <88B56FBAEB84EC448511C30CD63D3F8A0279F540@delmail1.sapient.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: urgent help needed
Thread-Index: AcTNhS4b1Ejs3QRFTXCm69VtSNpOzAAACu5A
From: "Neelam Bhatnagar" <nbhatnagar@sapient.com>
To: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Cc: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

Thank you for your help. Could you tell us the URL of the online version
of these articles?

Thanks and regards
Neelam Bhatnagar


-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Thursday, November 18, 2004 9:12 PM
To: lucene-user@jakarta.apache.org
Cc: Neelam Bhatnagar
Subject: Re: urgent help needed

Redirecting to the more appropriate lucene-user list.

Hello,

About 2 years ago I wrote 2 articles for O'Reilly Network, where I
believe I mentioned this issue and provided some context.  Make sure
your index is optimized.  If that doesn't help, switch to the compound
index format (1 set call on IndexWriter instance).  You can also adjust
your OS's limits - the article I mentioned cover this for a few UNIX
shells.

Otis

--- Neelam Bhatnagar <nbhatnagar@sapient.com> wrote:

> Hi,
> =20
> I have posted this several times before but there has been no
> response.
> We really need to resolve this as soon as possible. Kindly help us.=20
> =20
> We have been using Lucene 3.1 version with Tomcat 4.0 and jdk1.4.=20
> It seems that sometimes we see a "Too many files open" exception
> which
> completely garbles the whole index and whole search functionality
> crashes on the web site. It has also been known to crash the complete
> JSP container of tomcat.=20
> =20
> After looking at the bug list, we found out that it has been reported
> as
> a bug in the Lucene bug list as Bug#29774, #30049, #30452 which
> claims
> to have been resolved with the new version of Lucene.=20
> =20
> We have tried everything to reproduce the problem ourselves to figure
> out the exact circumstances under which it occurs but with out any
> luck.
>=20
> =20
> We would be installing the new version of Lucene but we need to be
> able
> to reproduce the problem to test it.
> =20
> We would really appreciate it if someone could point us to the root
> cause behind this so we can devise a solution around that.
> =20
> Thanks and regards
> Neelam Bhatnagar
> =20
> Technology| Sapient
> Presidency Building
> Mehrauli-Gurgaon Road
> Sector-14, Gurgaon-122001
> Haryana, India
> =20
> Tel: 91.124.2826299
> Cell: 91.9899591054
> Email: nbhatnagar@sapient.com
> =20
> =20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11358-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 15:48:19 2004
Return-Path: <lucene-user-return-11358-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 39743 invoked from network); 18 Nov 2004 15:48:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 15:48:19 -0000
Received: (qmail 21366 invoked by uid 500); 18 Nov 2004 15:47:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21207 invoked by uid 500); 18 Nov 2004 15:47:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21144 invoked by uid 99); 18 Nov 2004 15:47:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 07:47:28 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iAIFkiJ18025
	for <lucene-user@jakarta.apache.org>; Thu, 18 Nov 2004 09:46:44 -0600 (CST)
Subject: Re: Too many files exception
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <88B56FBAEB84EC448511C30CD63D3F8A0279F539@delmail1.sapient.com>
References: <88B56FBAEB84EC448511C30CD63D3F8A0279F539@delmail1.sapient.com>
Content-Type: text/plain
Message-Id: <1100792832.14378.6.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Thu, 18 Nov 2004 09:47:12 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thu, 2004-11-18 at 07:09, Neelam Bhatnagar wrote:
> Hello all, 
>  
> We have been using Lucene 3.1 version with Tomcat 4.0 and jdk1.4. 
> It seems that sometimes we see a "Too many files open" exception which
> completely garbles the whole index and whole search functionality
> crashes on the web site. It has also been known to crash the complete
> JSP container of tomcat. 

(I'm assuming you meant Lucene 1.3)

This exception happens when your process has too many file handles open.
Values differ by operating system.

With Lucene, this is caused by having a number of IndexReaders open.
Each IndexReader will open each file in your index. If you do not close
your IndexReaders, this exception can happen, especially if you have a
lot of heap and the IndexReaders are not getting garbage collected.

My guess is that you are creating a new IndexSearcher for each search
request and then not closing it after the search is complete. 

Lucene 1.3 added a feature called compound index files that much
alleviates this problem by greatly reducing the number of files required
in an index. You can use it by turning on IndexWriter.useCompoundFile(
true ):

http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexWriter.html#getUseCompoundFile()

Combined with closing your IndexReaders, this should fix the problem.

Regards,
Luke Francl


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11359-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 15:48:49 2004
Return-Path: <lucene-user-return-11359-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40236 invoked from network); 18 Nov 2004 15:48:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 15:48:48 -0000
Received: (qmail 24394 invoked by uid 500); 18 Nov 2004 15:48:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24339 invoked by uid 500); 18 Nov 2004 15:48:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24316 invoked by uid 99); 18 Nov 2004 15:48:01 -0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=NIGERIAN_SUBJECT2
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 07:47:55 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Thu, 18 Nov 2004 10:48:20 -0500
Message-ID: <007101c4cd86$07089050$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <88B56FBAEB84EC448511C30CD63D3F8A0279F540@delmail1.sapient.com>
Subject: Re: urgent help needed
Date: Thu, 18 Nov 2004 10:48:19 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 18 Nov 2004 15:48:20.0232 (UTC) FILETIME=[0723E080:01C4CD86]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

These are the ones I think. They were the first things I read on Lucene and
were very helpful.

http://www.onjava.com/pub/a/onjava/2003/03/05/lucene.html
http://www.onjava.com/pub/a/onjava/2003/01/15/lucene.html

----- Original Message ----- 
From: "Neelam Bhatnagar" <nbhatnagar@sapient.com>
To: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Cc: <lucene-user@jakarta.apache.org>
Sent: Thursday, November 18, 2004 10:45 AM
Subject: RE: urgent help needed


Hello,

Thank you for your help. Could you tell us the URL of the online version
of these articles?

Thanks and regards
Neelam Bhatnagar


-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Thursday, November 18, 2004 9:12 PM
To: lucene-user@jakarta.apache.org
Cc: Neelam Bhatnagar
Subject: Re: urgent help needed

Redirecting to the more appropriate lucene-user list.

Hello,

About 2 years ago I wrote 2 articles for O'Reilly Network, where I
believe I mentioned this issue and provided some context.  Make sure
your index is optimized.  If that doesn't help, switch to the compound
index format (1 set call on IndexWriter instance).  You can also adjust
your OS's limits - the article I mentioned cover this for a few UNIX
shells.

Otis

--- Neelam Bhatnagar <nbhatnagar@sapient.com> wrote:

> Hi,
>
> I have posted this several times before but there has been no
> response.
> We really need to resolve this as soon as possible. Kindly help us.
>
> We have been using Lucene 3.1 version with Tomcat 4.0 and jdk1.4.
> It seems that sometimes we see a "Too many files open" exception
> which
> completely garbles the whole index and whole search functionality
> crashes on the web site. It has also been known to crash the complete
> JSP container of tomcat.
>
> After looking at the bug list, we found out that it has been reported
> as
> a bug in the Lucene bug list as Bug#29774, #30049, #30452 which
> claims
> to have been resolved with the new version of Lucene.
>
> We have tried everything to reproduce the problem ourselves to figure
> out the exact circumstances under which it occurs but with out any
> luck.
>
>
> We would be installing the new version of Lucene but we need to be
> able
> to reproduce the problem to test it.
>
> We would really appreciate it if someone could point us to the root
> cause behind this so we can devise a solution around that.
>
> Thanks and regards
> Neelam Bhatnagar
>
> Technology| Sapient
> Presidency Building
> Mehrauli-Gurgaon Road
> Sector-14, Gurgaon-122001
> Haryana, India
>
> Tel: 91.124.2826299
> Cell: 91.9899591054
> Email: nbhatnagar@sapient.com
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11360-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 15:56:56 2004
Return-Path: <lucene-user-return-11360-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46235 invoked from network); 18 Nov 2004 15:56:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 15:56:56 -0000
Received: (qmail 51701 invoked by uid 500); 18 Nov 2004 15:56:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 51672 invoked by uid 500); 18 Nov 2004 15:56:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 51659 invoked by uid 99); 18 Nov 2004 15:56:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [193.62.196.100] (HELO maui.ebi.ac.uk) (193.62.196.100)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 07:56:49 -0800
Received: from SILK (silk.dhcp.ebi.ac.uk [172.22.69.6])
	by maui.ebi.ac.uk (8.11.7+Sun/8.11.7) with SMTP id iAIFucF12000
	for <lucene-user@jakarta.apache.org>; Thu, 18 Nov 2004 15:56:38 GMT
From: "Rupinder Singh Mazara" <rsmazara@ebi.ac.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: boolean/set operations  on lucene queries
Date: Thu, 18 Nov 2004 15:57:24 -0000
Message-ID: <CFEHIPOIEGKAJJPJENCEOEJJCDAA.rsmazara@ebi.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.6604 (9.0.2911.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
Importance: Normal
X-EBI-Information: This email is scanned using www.mailscanner.info.
X-EBI: Found to be clean
X-EBI-SpamCheck: not spam, SpamAssassin (score=0, required 5)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

hi all

 I needed some help in solving the following problem
 a user executes query1 and query2

 both the queries( not result sets ) get stored, over time the user
 wants to find
 which documents from query1 are common to documents in query2 , basicall a
intersect of the results of query1 with query2


 and similarly the union and difference between the results of query1 and
query2

 without having to run the queries and storing the results into some kind of
datastructure
 does lucene provide some capabilities, i was reading about QueryFilter,
does anyone have
 experience with a simialar example


 thanks

 Rupinder


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11361-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 16:00:44 2004
Return-Path: <lucene-user-return-11361-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49183 invoked from network); 18 Nov 2004 16:00:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 16:00:44 -0000
Received: (qmail 60915 invoked by uid 500); 18 Nov 2004 16:00:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 60897 invoked by uid 500); 18 Nov 2004 16:00:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 60883 invoked by uid 99); 18 Nov 2004 16:00:37 -0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=NIGERIAN_SUBJECT2
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [202.144.61.68] (HELO delmail1.sapient.com) (202.144.61.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 08:00:35 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: urgent help needed
Date: Thu, 18 Nov 2004 21:30:29 +0530
Message-ID: <88B56FBAEB84EC448511C30CD63D3F8A0279F544@delmail1.sapient.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: urgent help needed
Thread-Index: AcTNhiAJjP2B6QBaTHKaMqjyykiCAgAAYwMg
From: "Neelam Bhatnagar" <nbhatnagar@sapient.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you for the information.=20

Regards
Neelam=20

-----Original Message-----
From: Luke Shannon [mailto:lshannon@hypermedia.com]=20
Sent: Thursday, November 18, 2004 9:18 PM
To: Lucene Users List
Subject: Re: urgent help needed

These are the ones I think. They were the first things I read on Lucene
and
were very helpful.

http://www.onjava.com/pub/a/onjava/2003/03/05/lucene.html
http://www.onjava.com/pub/a/onjava/2003/01/15/lucene.html

----- Original Message -----=20
From: "Neelam Bhatnagar" <nbhatnagar@sapient.com>
To: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Cc: <lucene-user@jakarta.apache.org>
Sent: Thursday, November 18, 2004 10:45 AM
Subject: RE: urgent help needed


Hello,

Thank you for your help. Could you tell us the URL of the online version
of these articles?

Thanks and regards
Neelam Bhatnagar


-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Thursday, November 18, 2004 9:12 PM
To: lucene-user@jakarta.apache.org
Cc: Neelam Bhatnagar
Subject: Re: urgent help needed

Redirecting to the more appropriate lucene-user list.

Hello,

About 2 years ago I wrote 2 articles for O'Reilly Network, where I
believe I mentioned this issue and provided some context.  Make sure
your index is optimized.  If that doesn't help, switch to the compound
index format (1 set call on IndexWriter instance).  You can also adjust
your OS's limits - the article I mentioned cover this for a few UNIX
shells.

Otis

--- Neelam Bhatnagar <nbhatnagar@sapient.com> wrote:

> Hi,
>
> I have posted this several times before but there has been no
> response.
> We really need to resolve this as soon as possible. Kindly help us.
>
> We have been using Lucene 3.1 version with Tomcat 4.0 and jdk1.4.
> It seems that sometimes we see a "Too many files open" exception
> which
> completely garbles the whole index and whole search functionality
> crashes on the web site. It has also been known to crash the complete
> JSP container of tomcat.
>
> After looking at the bug list, we found out that it has been reported
> as
> a bug in the Lucene bug list as Bug#29774, #30049, #30452 which
> claims
> to have been resolved with the new version of Lucene.
>
> We have tried everything to reproduce the problem ourselves to figure
> out the exact circumstances under which it occurs but with out any
> luck.
>
>
> We would be installing the new version of Lucene but we need to be
> able
> to reproduce the problem to test it.
>
> We would really appreciate it if someone could point us to the root
> cause behind this so we can devise a solution around that.
>
> Thanks and regards
> Neelam Bhatnagar
>
> Technology| Sapient
> Presidency Building
> Mehrauli-Gurgaon Road
> Sector-14, Gurgaon-122001
> Haryana, India
>
> Tel: 91.124.2826299
> Cell: 91.9899591054
> Email: nbhatnagar@sapient.com
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11362-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 17:24:55 2004
Return-Path: <lucene-user-return-11362-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99760 invoked from network); 18 Nov 2004 17:24:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 17:24:17 -0000
Received: (qmail 75465 invoked by uid 500); 18 Nov 2004 17:23:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 75404 invoked by uid 500); 18 Nov 2004 17:23:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 75335 invoked by uid 99); 18 Nov 2004 17:23:49 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 09:23:47 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Thu, 18 Nov 2004 12:24:12 -0500
Message-ID: <00f801c4cd93$6be43120$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: PDF Index Time
Date: Thu, 18 Nov 2004 12:24:12 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_00F5_01C4CD69.82FFD140"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 18 Nov 2004 17:24:12.0682 (UTC) FILETIME=[6BDE16A0:01C4CD93]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_00F5_01C4CD69.82FFD140
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi;

I am using the PDFBox's getLuceneDocument method to parse my PDF =
documents. It returns good results and was very easy to integrate into =
the project. However it is slow.

Does anyone know of a faster package? Someone mentioned snowtide on an =
earlier post. Anyone have experience with this package?

Luke
------=_NextPart_000_00F5_01C4CD69.82FFD140--



From lucene-user-return-11363-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 17:33:53 2004
Return-Path: <lucene-user-return-11363-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5741 invoked from network); 18 Nov 2004 17:33:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 17:33:52 -0000
Received: (qmail 96300 invoked by uid 500); 18 Nov 2004 17:33:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96237 invoked by uid 500); 18 Nov 2004 17:33:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96213 invoked by uid 99); 18 Nov 2004 17:33:39 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ben@csh.rit.edu designates 129.21.60.6 as permitted sender)
Received: from [129.21.60.6] (HELO blacksheep.csh.rit.edu) (129.21.60.6)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 09:33:36 -0800
Received: from fury.csh.rit.edu (fury.csh.rit.edu [IPv6:2001:470:1f00:135:a00:20ff:fe8d:5399])
	by blacksheep.csh.rit.edu (Postfix) with ESMTP id 51BF391F8
	for <lucene-user@jakarta.apache.org>; Thu, 18 Nov 2004 12:33:28 -0500 (EST)
Received: by fury.csh.rit.edu (Postfix, from userid 38448)
	id 0935D14B5; Thu, 18 Nov 2004 12:33:27 -0500 (EST)
Received: from localhost (localhost [127.0.0.1])
	by fury.csh.rit.edu (Postfix) with ESMTP id D9AF814B4
	for <lucene-user@jakarta.apache.org>; Thu, 18 Nov 2004 12:33:27 -0500 (EST)
Date: Thu, 18 Nov 2004 12:33:27 -0500 (EST)
From: Ben Litchfield <ben@csh.rit.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: PDF Index Time
In-Reply-To: <00f801c4cd93$6be43120$7703d00a@hypermedia.com>
Message-ID: <Pine.GSO.4.53.0411181225420.27062@fury.csh.rit.edu>
References: <00f801c4cd93$6be43120$7703d00a@hypermedia.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


PDFBox is slow, there is an open issue for it on the sourceforge site and
I am actively working on improving speed and should see significant
improvements in the next release.

I have not extensively tried the snowtide package but they have a trial
download and the docs show that it should be just as easy to integrate as
PDFBox is.  They list pricings on there site as well, which is nice that
it is not hidden as some software companies do.

Ben

On Thu, 18 Nov 2004, Luke Shannon wrote:

> Hi;
>
> I am using the PDFBox's getLuceneDocument method to parse my PDF
> documents. It returns good results and was very easy to integrate into
> the project. However it is slow.
>
> Does anyone know of a faster package? Someone mentioned snowtide on an
> earlier post. Anyone have experience with this package?
>
> Luke

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11364-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 17:45:03 2004
Return-Path: <lucene-user-return-11364-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12342 invoked from network); 18 Nov 2004 17:45:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 17:45:03 -0000
Received: (qmail 32178 invoked by uid 500); 18 Nov 2004 17:44:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32153 invoked by uid 500); 18 Nov 2004 17:44:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 32140 invoked by uid 99); 18 Nov 2004 17:44:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 09:44:56 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Thu, 18 Nov 2004 12:45:22 -0500
Message-ID: <010201c4cd96$60df9370$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <00f801c4cd93$6be43120$7703d00a@hypermedia.com> <Pine.GSO.4.53.0411181225420.27062@fury.csh.rit.edu>
Subject: Re: PDF Index Time
Date: Thu, 18 Nov 2004 12:45:22 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 18 Nov 2004 17:45:22.0703 (UTC) FILETIME=[60DBE9F0:01C4CD96]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Ben;

Thank you creating such a easy to use package for indexing PDF.

I will keep PDFBox in the system and wait for the next release.

Thanks for the update.

Luke

----- Original Message ----- 
From: "Ben Litchfield" <ben@csh.rit.edu>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Thursday, November 18, 2004 12:33 PM
Subject: Re: PDF Index Time


> 
> PDFBox is slow, there is an open issue for it on the sourceforge site and
> I am actively working on improving speed and should see significant
> improvements in the next release.
> 
> I have not extensively tried the snowtide package but they have a trial
> download and the docs show that it should be just as easy to integrate as
> PDFBox is.  They list pricings on there site as well, which is nice that
> it is not hidden as some software companies do.
> 
> Ben
> 
> On Thu, 18 Nov 2004, Luke Shannon wrote:
> 
> > Hi;
> >
> > I am using the PDFBox's getLuceneDocument method to parse my PDF
> > documents. It returns good results and was very easy to integrate into
> > the project. However it is slow.
> >
> > Does anyone know of a faster package? Someone mentioned snowtide on an
> > earlier post. Anyone have experience with this package?
> >
> > Luke
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11365-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 17:45:15 2004
Return-Path: <lucene-user-return-11365-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12429 invoked from network); 18 Nov 2004 17:45:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 17:45:14 -0000
Received: (qmail 33146 invoked by uid 500); 18 Nov 2004 17:45:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33119 invoked by uid 500); 18 Nov 2004 17:45:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33093 invoked by uid 99); 18 Nov 2004 17:45:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 09:45:07 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.12.11/8.12.11) with ESMTP id iAIHj2Fm099170
	for <lucene-user@jakarta.apache.org>; Thu, 18 Nov 2004 18:45:02 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: boolean/set operations  on lucene queries
Date: Thu, 18 Nov 2004 18:45:02 +0100
User-Agent: KMail/1.5.4
References: <CFEHIPOIEGKAJJPJENCEOEJJCDAA.rsmazara@ebi.ac.uk>
In-Reply-To: <CFEHIPOIEGKAJJPJENCEOEJJCDAA.rsmazara@ebi.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411181845.02190.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Thursday 18 November 2004 16:57, Rupinder Singh Mazara wrote:
> hi all
> 
>  I needed some help in solving the following problem
>  a user executes query1 and query2
> 
>  both the queries( not result sets ) get stored, over time the user
>  wants to find
>  which documents from query1 are common to documents in query2 , basicall a
> intersect of the results of query1 with query2
> 
> 
>  and similarly the union and difference between the results of query1 and
> query2
> 
>  without having to run the queries and storing the results into some kind of
> datastructure
>  does lucene provide some capabilities, i was reading about QueryFilter,

The queries can be added as clauses to a BooleanQuery.
Such clauses can be optional, required or prohibited.

Regards,
Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11366-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 19:20:11 2004
Return-Path: <lucene-user-return-11366-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58425 invoked from network); 18 Nov 2004 19:20:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 19:20:11 -0000
Received: (qmail 50327 invoked by uid 500); 18 Nov 2004 19:19:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50245 invoked by uid 500); 18 Nov 2004 19:19:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50224 invoked by uid 99); 18 Nov 2004 19:19:41 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.190.39.110] (HELO web52402.mail.yahoo.com) (206.190.39.110)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 18 Nov 2004 11:19:38 -0800
Received: (qmail 39291 invoked by uid 60001); 18 Nov 2004 18:32:20 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=rtejHrRmED+4NbIctn6lV3HfspY/Q+mIk4iNNwc97/QZ/pGe3kIyRwBFef1DFSD4RWdW4L7oFQ8ev87UQJ576/ZyqosQc/JP3Fkzwhq2oN8t0CPWJGkQ4qztQ18tihJNibX7j1lBGErJdnMKLI10V2VspJhtywkjIv26Cw2hraE=  ;
Message-ID: <20041118183219.39283.qmail@web52402.mail.yahoo.com>
Received: from [12.161.235.225] by web52402.mail.yahoo.com via HTTP; Thu, 18 Nov 2004 10:32:19 PST
Date: Thu, 18 Nov 2004 10:32:19 -0800 (PST)
From: Yonik Seeley <yseeley@yahoo.com>
Reply-To: yseeley@cs.stanford.edu
Subject: Re: version documents
To: Lucene Users List <lucene-user@jakarta.apache.org>,
  Justin Swanhart <greenlion@gmail.com>
In-Reply-To: <dd2db8d004111712383ea6829f@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

This won't fully work.  You still need to delete the
original out of the lucene index to avoid it showing
up in searches.

Example:
myfile v1:  "I want a cat"
myfile v2:  "I want a dog"

If you change "cat" to "dog" in myfile, and then do a
search for "cat", you will *only* get v1 and hence the
sort on version doesn't help.

-Yonik


--- Justin Swanhart <greenlion@gmail.com> wrote:
> Split the filename into "basefilename" and "version"
> and make each a keyword.
> 
> Sort your query by version descending, and only use
> the first
> "basefile" you encounter.


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11367-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 19:38:00 2004
Return-Path: <lucene-user-return-11367-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 66491 invoked from network); 18 Nov 2004 19:37:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 19:37:59 -0000
Received: (qmail 85046 invoked by uid 500); 18 Nov 2004 19:37:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84947 invoked by uid 500); 18 Nov 2004 19:37:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84930 invoked by uid 99); 18 Nov 2004 19:37:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 11:37:48 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Thu, 18 Nov 2004 14:38:12 -0500
Message-ID: <011701c4cda6$23d42f30$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	<yseeley@cs.stanford.edu>
References: <20041118183219.39283.qmail@web52402.mail.yahoo.com>
Subject: Re: version documents
Date: Thu, 18 Nov 2004 14:38:12 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 18 Nov 2004 19:38:12.0219 (UTC) FILETIME=[23CE14B0:01C4CDA6]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thank you for the suggestion.

I ended up biting the bullet and re-working my indexing logic. Luckily the
system itself knows what the "current" version of a document is (otherwise
it won't know which one to display to the user) for any given folder.

I was able to get a static method I could call passing in a folder name. The
method returns the file name of the current version for that folder.

Each time I am doing an incremental update if I find that a document from a
folder hasn't changed I make sure it is the current version before moving
on. If it isn't I remove it from the index.

Than when I am creating a new index or adding files to an existing, for each
file, I have to check the file I am adding to ensure it is the current
version for the folder before adding it.

As you can imagine this slows down indexing (creating a new or updating an
existing) but it ensures content from an old version will never show up in a
query.

Luke

----- Original Message ----- 
From: "Yonik Seeley" <yseeley@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>; "Justin Swanhart"
<greenlion@gmail.com>
Sent: Thursday, November 18, 2004 1:32 PM
Subject: Re: version documents


> This won't fully work.  You still need to delete the
> original out of the lucene index to avoid it showing
> up in searches.
>
> Example:
> myfile v1:  "I want a cat"
> myfile v2:  "I want a dog"
>
> If you change "cat" to "dog" in myfile, and then do a
> search for "cat", you will *only* get v1 and hence the
> sort on version doesn't help.
>
> -Yonik
>
>
> --- Justin Swanhart <greenlion@gmail.com> wrote:
> > Split the filename into "basefilename" and "version"
> > and make each a keyword.
> >
> > Sort your query by version descending, and only use
> > the first
> > "basefile" you encounter.
>
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11368-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 20:51:16 2004
Return-Path: <lucene-user-return-11368-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19051 invoked from network); 18 Nov 2004 20:51:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 20:51:16 -0000
Received: (qmail 31102 invoked by uid 500); 18 Nov 2004 20:51:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 31058 invoked by uid 500); 18 Nov 2004 20:51:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 31045 invoked by uid 99); 18 Nov 2004 20:51:11 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FROM_ENDS_IN_NUMS,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of abdo1234@msn.com designates 64.4.11.11 as permitted sender)
Received: from [64.4.11.11] (HELO hotmail.com) (64.4.11.11)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 12:51:04 -0800
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Thu, 18 Nov 2004 12:51:01 -0800
Message-ID: <BAY7-F11D44875C0CF846410EDFDC9C20@phx.gbl>
Received: from 81.10.42.171 by by7fd.bay7.hotmail.msn.com with HTTP;
	Thu, 18 Nov 2004 20:50:24 GMT
X-Originating-IP: [81.10.42.171]
X-Originating-Email: [abdo1234@msn.com]
X-Sender: abdo1234@msn.com
In-Reply-To: <dd2db8d004111711541516f206@mail.gmail.com>
From: "abdulrahman galal" <abdo1234@msn.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: I need Last version of Lucene 
Date: Thu, 18 Nov 2004 22:50:24 +0200
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 18 Nov 2004 20:51:01.0265 (UTC) FILETIME=[4FF59810:01C4CDB0]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

i need last version of lucene .. which has the ability of gzip ...

but no one answer my quistion tell nowwwwww ... does it compress the 
original files and its indexs

_________________________________________________________________
Express yourself instantly with MSN Messenger! Download today it's FREE! 
http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11369-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 20:53:23 2004
Return-Path: <lucene-user-return-11369-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20120 invoked from network); 18 Nov 2004 20:53:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 20:53:23 -0000
Received: (qmail 34712 invoked by uid 500); 18 Nov 2004 20:53:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34452 invoked by uid 500); 18 Nov 2004 20:53:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34438 invoked by uid 99); 18 Nov 2004 20:53:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [216.54.180.10] (HELO htexc.hq.htinc.com) (216.54.180.10)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 12:53:16 -0800
X-MIMEOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: mergeFactor & maxMergeDocs
Date: Thu, 18 Nov 2004 15:53:05 -0500
Message-ID: <4568BE33B520DD43B7B24DE0B609B215523099@htexc.hq.htinc.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: mergeFactor & maxMergeDocs
Thread-Index: AcTNphyB1MGOwMTrS/GoO97zAgCERQACRQ5Q
From: "Ravi" <ravi@htinc.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

How do you set mergeFactor on an IndexWriter object. I tried the way it
was mentioned in this
article(http://www.onjava.com/pub/a/onjava/2003/03/05/lucene.html)
writer.mergeFactor =3D 1000;=20
This did not work for me. I tried setting the
org.apache.lucene.mergeFactor property. That worked for me. Lucene
created a new segment for every 1000 documents. Then I wanted to test
maxMergeDocs using setProperty. I set its value to 5000. With the
default maxMergeDocs when I have 10000 documents, Lucene merged the 10
segments into one large segment. I want to set the value to maxMergeDocs
to 5000 so I don't want lucene to do a merge when it has 10,000
documents. But that did not work. Can somebody explain how to set these
properties?=20

Thanks in advance,
Ravi.  =20

-----Original Message-----
From: Luke Shannon [mailto:lshannon@hypermedia.com]=20
Sent: Thursday, November 18, 2004 2:38 PM
To: Lucene Users List; yseeley@cs.stanford.edu
Subject: Re: version documents

Thank you for the suggestion.

I ended up biting the bullet and re-working my indexing logic. Luckily
the system itself knows what the "current" version of a document is
(otherwise it won't know which one to display to the user) for any given
folder.

I was able to get a static method I could call passing in a folder name.
The method returns the file name of the current version for that folder.

Each time I am doing an incremental update if I find that a document
from a folder hasn't changed I make sure it is the current version
before moving on. If it isn't I remove it from the index.

Than when I am creating a new index or adding files to an existing, for
each file, I have to check the file I am adding to ensure it is the
current version for the folder before adding it.

As you can imagine this slows down indexing (creating a new or updating
an
existing) but it ensures content from an old version will never show up
in a query.

Luke

----- Original Message -----
From: "Yonik Seeley" <yseeley@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>; "Justin
Swanhart"
<greenlion@gmail.com>
Sent: Thursday, November 18, 2004 1:32 PM
Subject: Re: version documents


> This won't fully work.  You still need to delete the
> original out of the lucene index to avoid it showing
> up in searches.
>
> Example:
> myfile v1:  "I want a cat"
> myfile v2:  "I want a dog"
>
> If you change "cat" to "dog" in myfile, and then do a
> search for "cat", you will *only* get v1 and hence the
> sort on version doesn't help.
>
> -Yonik
>
>
> --- Justin Swanhart <greenlion@gmail.com> wrote:
> > Split the filename into "basefilename" and "version"
> > and make each a keyword.
> >
> > Sort your query by version descending, and only use
> > the first
> > "basefile" you encounter.
>
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11370-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 21:20:46 2004
Return-Path: <lucene-user-return-11370-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32171 invoked from network); 18 Nov 2004 21:20:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 21:20:46 -0000
Received: (qmail 73141 invoked by uid 500); 18 Nov 2004 21:20:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 73103 invoked by uid 500); 18 Nov 2004 21:20:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73090 invoked by uid 99); 18 Nov 2004 21:20:42 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.243] (HELO web12706.mail.yahoo.com) (216.136.173.243)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 18 Nov 2004 13:20:37 -0800
Received: (qmail 8911 invoked by uid 60001); 18 Nov 2004 21:20:31 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=CV0jQpYebhqHP0mdVgaVGPUDxssy5DCn55PVZrP4+elk23oUWV59SCk/lP6PZkxFiushcd2voJR2os0h+tBU/vUZuMINa02RINF1/DUSvshAmgIt1u2fGHEt8/yIkzbLtk7Qywdi2+N09G7JcsePI8ZexDoQecTxRAE01ErnzQ8=  ;
Message-ID: <20041118212031.8909.qmail@web12706.mail.yahoo.com>
Received: from [216.194.17.194] by web12706.mail.yahoo.com via HTTP; Thu, 18 Nov 2004 13:20:31 PST
Date: Thu, 18 Nov 2004 13:20:31 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: I need Last version of Lucene 
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <BAY7-F11D44875C0CF846410EDFDC9C20@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It doesn't compress original files, it only compresses some data in its
indices.

To get the very latest version of Lucene you will have to pull it
directly from CVS.  Jakarta.apache.org site has the instructions for
doing that.

Otis


--- abdulrahman galal <abdo1234@msn.com> wrote:

> i need last version of lucene .. which has the ability of gzip ...
> 
> but no one answer my quistion tell nowwwwww ... does it compress the 
> original files and its indexs
> 
> _________________________________________________________________
> Express yourself instantly with MSN Messenger! Download today it's
> FREE! 
> http://messenger.msn.click-url.com/go/onm00200471ave/direct/01/
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11371-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 21:56:05 2004
Return-Path: <lucene-user-return-11371-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49710 invoked from network); 18 Nov 2004 21:56:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 21:56:04 -0000
Received: (qmail 19150 invoked by uid 500); 18 Nov 2004 21:55:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19125 invoked by uid 500); 18 Nov 2004 21:55:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19112 invoked by uid 99); 18 Nov 2004 21:55:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of angeles3d@gmail.com designates 64.233.170.193 as permitted sender)
Received: from [64.233.170.193] (HELO rproxy.gmail.com) (64.233.170.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 13:55:50 -0800
Received: by rproxy.gmail.com with SMTP id z35so1096076rne
        for <lucene-user@jakarta.apache.org>; Thu, 18 Nov 2004 13:55:46 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=LTmAtuMWD9K3pduatf0/oF2dGo4Xyzc2/rw2ZOGklwnoLiwKl3Y5cBBt/yi+U51uGUlEW6ysICes4fWKZDCsuQdRlBHNpOkvTJs0YEoj+sLlJq21fmcaWboYOz5n4SCvkTYE26YRuvKlG5wG+abvGtuDY6zQ4W4VGtGtn81N9a0=
Received: by 10.38.126.68 with SMTP id y68mr170914rnc;
        Thu, 18 Nov 2004 13:49:06 -0800 (PST)
Received: by 10.38.14.16 with HTTP; Thu, 18 Nov 2004 13:49:06 -0800 (PST)
Message-ID: <6c00cd3104111813493a4ce34e@mail.gmail.com>
Date: Thu, 18 Nov 2004 16:49:06 -0500
From: Miguel Angel <angeles3d@gmail.com>
Reply-To: Miguel Angel <angeles3d@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: DOC, PPT index???
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi !!!
Lucene can index the files (do, ppt the MS OFFICE ??)
How do you can this index (doc, ppt)
-- 
Miguel Angel Angeles R.
Asesoria en Conectividad y Servidores
Telf. 97451277

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11372-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 22:07:32 2004
Return-Path: <lucene-user-return-11372-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54431 invoked from network); 18 Nov 2004 22:07:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 22:07:31 -0000
Received: (qmail 36111 invoked by uid 500); 18 Nov 2004 22:07:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36084 invoked by uid 500); 18 Nov 2004 22:07:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36071 invoked by uid 99); 18 Nov 2004 22:07:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 14:07:21 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Thu, 18 Nov 2004 17:07:46 -0500
Message-ID: <014501c4cdbb$09000070$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"Miguel Angel" <angeles3d@gmail.com>
References: <6c00cd3104111813493a4ce34e@mail.gmail.com>
Subject: Re: DOC, PPT index???
Date: Thu, 18 Nov 2004 17:07:46 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 18 Nov 2004 22:07:46.0491 (UTC) FILETIME=[08E350B0:01C4CDBB]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Check out:

http://jakarta.apache.org/poi/

----- Original Message ----- 
From: "Miguel Angel" <angeles3d@gmail.com>
To: <lucene-user@jakarta.apache.org>
Sent: Thursday, November 18, 2004 4:49 PM
Subject: DOC, PPT index???


> Hi !!!
> Lucene can index the files (do, ppt the MS OFFICE ??)
> How do you can this index (doc, ppt)
> -- 
> Miguel Angel Angeles R.
> Asesoria en Conectividad y Servidores
> Telf. 97451277
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11373-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 22:11:30 2004
Return-Path: <lucene-user-return-11373-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55527 invoked from network); 18 Nov 2004 22:11:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 22:11:29 -0000
Received: (qmail 45175 invoked by uid 500); 18 Nov 2004 22:11:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45158 invoked by uid 500); 18 Nov 2004 22:11:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 45145 invoked by uid 99); 18 Nov 2004 22:11:24 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.239] (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 18 Nov 2004 14:11:22 -0800
Received: (qmail 64757 invoked by uid 60001); 18 Nov 2004 22:11:19 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=jAA8nAJCuq/kbAsQT5JXnyU0UEDRAXtNARykKqMvC8BP4PqTZcKbqY/zcqBZev/ZbBVjfKhv6aaJvoG9HF187ZQj8LmU4xV9VL+IiFGMHFNVcBz1h3zS29zMOJaSJQxWYtvz1tQ7cDpPSqN/0bpFr52WSKGM9fxtOMBp/a/Ywwc=  ;
Message-ID: <20041118221118.64755.qmail@web12702.mail.yahoo.com>
Received: from [216.194.17.194] by web12702.mail.yahoo.com via HTTP; Thu, 18 Nov 2004 14:11:18 PST
Date: Thu, 18 Nov 2004 14:11:18 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: DOC, PPT index???
To: Lucene Users List <lucene-user@jakarta.apache.org>,
  Miguel Angel <angeles3d@gmail.com>
In-Reply-To: <6c00cd3104111813493a4ce34e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It's all answered here:

http://www.jguru.com/faq/home.jsp?topic=Lucene

Otis

--- Miguel Angel <angeles3d@gmail.com> wrote:

> Hi !!!
> Lucene can index the files (do, ppt the MS OFFICE ??)
> How do you can this index (doc, ppt)
> -- 
> Miguel Angel Angeles R.
> Asesoria en Conectividad y Servidores
> Telf. 97451277
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11374-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 18 22:27:11 2004
Return-Path: <lucene-user-return-11374-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63140 invoked from network); 18 Nov 2004 22:27:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 18 Nov 2004 22:27:11 -0000
Received: (qmail 71603 invoked by uid 500); 18 Nov 2004 22:27:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71573 invoked by uid 500); 18 Nov 2004 22:27:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71560 invoked by uid 99); 18 Nov 2004 22:26:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.207 as permitted sender)
Received: from [64.233.170.207] (HELO rproxy.gmail.com) (64.233.170.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 14:26:57 -0800
Received: by rproxy.gmail.com with SMTP id 34so67660rns
        for <lucene-user@jakarta.apache.org>; Thu, 18 Nov 2004 14:26:20 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=MVQVtA80ZNNQ9kHIN8TTiOkSb5Cfh8q3NJjHI96m37lfmw8fi7tRkQp4Ns0yiUgnXFhr9085kNadPlYNH6QqjSWpeiETb/PJC1JBMhr7kOVL8R2+hlHKftuFtoPJ7LGNaVp8wSai1T7g4S4zrl1I12ZH+/UZthNiRBgwXSiP4HY=
Received: by 10.38.206.12 with SMTP id d12mr319116rng;
        Thu, 18 Nov 2004 13:59:40 -0800 (PST)
Received: by 10.38.179.9 with HTTP; Thu, 18 Nov 2004 13:59:40 -0800 (PST)
Message-ID: <dd2db8d00411181359461c774b@mail.gmail.com>
Date: Thu, 18 Nov 2004 14:59:40 -0700
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: java.io.FileNotFoundException: ... (No such file or directory)
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have two index processes.  One is an index server, the other is a
search server.  The processes run on different machines.

The index server is a single threaded process that reads from the
database and adds
unindexed rows to the index as needed.  It sleeps for a couple minutes
between each
batch to allow newly added/updated rows to accumulate.

The searcher process keeps an open cache of IndexSearcher objects and
is multithreaded.
It accepts connections on a tcp port, runs the query and stores the
results in a database.
After a set interval, the server checks to see if the index on disk is
a newer version.  If it is,
it loads the index into a new IndexSearcher as a RAMDirectory.

Every once in awhile, the index reader process gets a FileNotFoundException:
20041118 1378 1383  (index number, old version, new version)
[newer version found] Loading index directory into RAM: 20041118
java.io.FileNotFoundException:
/path/omitted/for/obvious/reasons/_4zj6.cfs (No such file or
directory)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
        at org.en.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java:376)
        at org.en.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
        at org.en.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
        at org.en.lucene.store.RAMDirectory.<init>(RAMDirectory.java:60)
        at org.en.lucene.store.RAMDirectory.<init>(RAMDirectory.java:89)
        at org.en.global.searchserver.UpdateSearchers.createIndexSearchers(Search.java:89)
        at org.en.global.searchserver.UpdateSearchers.run(Search.java:54)

the code being called at that point is:
//add the directory to the HashMap of IndexSearchers (dir# => IndexSearcher)
indexSearchers.put(subDirs[i],new IndexSearcher(new
RAMDirectory(indexDir + "/" + subDirs[i])));

The indexes are located on a NFS mountpoint. Could this be the
problem?  Or should I be looking elsewhere...  Should i just check for
an IOException, and try reloading the index if I get an error?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11375-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 19 00:17:06 2004
Return-Path: <lucene-user-return-11375-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12961 invoked from network); 19 Nov 2004 00:17:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Nov 2004 00:17:06 -0000
Received: (qmail 52337 invoked by uid 500); 19 Nov 2004 00:16:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52146 invoked by uid 500); 19 Nov 2004 00:16:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52133 invoked by uid 99); 19 Nov 2004 00:16:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 18 Nov 2004 16:16:50 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: java.io.FileNotFoundException: ... (No such file or directory)
Date: Thu, 18 Nov 2004 19:16:46 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA5BFCD9@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: java.io.FileNotFoundException: ... (No such file or directory)
Thread-Index: AcTNvbm6KwD91YQZQNKJsj+FZh4MEAADrAJw
From: "Will Allen" <wallen@Cyveillance.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"Justin Swanhart" <greenlion@gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have gotten this a few times.  I am also using a NFS mount, but have =
seen it in cases where a mount wasn't involved.

I cannot speak to why this is happening, but I have posted to this forum =
before a way of repairing your index by modifying the segments file.  =
Search for "wallen".

The other thing I have done, is use code to copy the documents that can =
be read by a reader to a new index.  I suppose I should submit those =
tools to open source!

Anyway, this error will break the searcher, but the index can still be =
read with an indexreader.

-Will

Here is the source of a method that should get you started (logger is a =
log4j object):

    public void transferDocuments()
    throws IOException
    {
        IndexReader reader =3D IndexReader.open(brokenDir);
        logger.debug(reader.numDocs() + "");
        IndexWriter writer =3D new IndexWriter(newIndexDir, =
PopIndexer.popAnalyzer(),true);
        writer.minMergeDocs =3D 50;
        writer.mergeFactor =3D 200;
        writer.setUseCompoundFile(true);
        int docCount =3D reader.numDocs();
        Date start =3D new Date();
        //docCount =3D Math.min(docCount, 500);
        for(int x=3D0; x < docCount; x++)
        {
            try
            {
            	if(!reader.isDeleted(x))
            	{
                    Document doc =3D reader.document(x);   =20
                    if(x % 1000 =3D=3D 0)
                    {
                        logger.debug(doc.get("subject"));
                    }
                    //remove the new fields if they exist, and add new =
value
                    //TODO test not having this in
                    /*
                    for ( Enumeration newFields =3D doc.fields(); =
newFields.hasMoreElements(); )
                    {
                        Field newField =3D (Field) =
newFields.nextElement();
                        doc.removeFields( newField.name() );
                        doc.add( newField );
                    }
                    */
                    doc.removeFields("counter");
                    doc.add(Field.Keyword("counter", "counter"));
                    //	reinsert old document
                    writer.addDocument( doc );            	=09
            	}
            }
            catch(IOException ioe)
            {
                logger.error("doc:" + x + " failed, " + =
ioe.getMessage());
            }
            catch(IndexOutOfBoundsException ioobe)
            {
                logger.error("INDEX OUT OF BOUNDS!" + =
ioobe.getMessage());
                ioobe.printStackTrace();
            }
        }
        reader.close();
        //logger.debug("done, about the optimize");
        //writer.optimize();
        writer.close();
        long time =3D ((new Date()).getTime() - start.getTime())/1000;
        logger.info("done optimizing: " + time + " seconds or " + =
(docCount / time) + " rec/sec");
    }



-----Original Message-----
From: Justin Swanhart [mailto:greenlion@gmail.com]
Sent: Thursday, November 18, 2004 5:00 PM
To: Lucene Users List
Subject: java.io.FileNotFoundException: ... (No such file or directory)


I have two index processes.  One is an index server, the other is a
search server.  The processes run on different machines.

The index server is a single threaded process that reads from the
database and adds
unindexed rows to the index as needed.  It sleeps for a couple minutes
between each
batch to allow newly added/updated rows to accumulate.

The searcher process keeps an open cache of IndexSearcher objects and
is multithreaded.
It accepts connections on a tcp port, runs the query and stores the
results in a database.
After a set interval, the server checks to see if the index on disk is
a newer version.  If it is,
it loads the index into a new IndexSearcher as a RAMDirectory.

Every once in awhile, the index reader process gets a =
FileNotFoundException:
20041118 1378 1383  (index number, old version, new version)
[newer version found] Loading index directory into RAM: 20041118
java.io.FileNotFoundException:
/path/omitted/for/obvious/reasons/_4zj6.cfs (No such file or
directory)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
        at =
org.en.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java:376)=

        at =
org.en.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
        at =
org.en.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
        at org.en.lucene.store.RAMDirectory.<init>(RAMDirectory.java:60)
        at org.en.lucene.store.RAMDirectory.<init>(RAMDirectory.java:89)
        at =
org.en.global.searchserver.UpdateSearchers.createIndexSearchers(Search.ja=
va:89)
        at =
org.en.global.searchserver.UpdateSearchers.run(Search.java:54)

the code being called at that point is:
//add the directory to the HashMap of IndexSearchers (dir# =3D> =
IndexSearcher)
indexSearchers.put(subDirs[i],new IndexSearcher(new
RAMDirectory(indexDir + "/" + subDirs[i])));

The indexes are located on a NFS mountpoint. Could this be the
problem?  Or should I be looking elsewhere...  Should i just check for
an IOException, and try reloading the index if I get an error?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11376-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 19 05:41:40 2004
Return-Path: <lucene-user-return-11376-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 46644 invoked from network); 19 Nov 2004 05:41:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Nov 2004 05:41:39 -0000
Received: (qmail 55142 invoked by uid 500); 19 Nov 2004 05:41:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55114 invoked by uid 500); 19 Nov 2004 05:41:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55100 invoked by uid 99); 19 Nov 2004 05:41:28 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 18 Nov 2004 21:41:27 -0800
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I7EWFP00.E3T for <lucene-user@jakarta.apache.org>; Fri,
          19 Nov 2004 11:25:01 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: X-Thread Message
Date: Fri, 19 Nov 2004 11:19:21 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIOEAGCDAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi  Guys


Apologies............



Does Any body have any Improved Suggestion  for the Thread

http://nagoya.apache.org/eyebrowse/ReadMsg?listName=lucene-user@jakarta.apac
he.org&msgId=1992830


I am still in Delima



      WITH WARM REGARDS
      HAVE A NICE DAY
      [ N.S.KARTHIK]



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11377-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 19 12:41:17 2004
Return-Path: <lucene-user-return-11377-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95005 invoked from network); 19 Nov 2004 12:41:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Nov 2004 12:41:17 -0000
Received: (qmail 93668 invoked by uid 500); 19 Nov 2004 12:41:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93636 invoked by uid 500); 19 Nov 2004 12:41:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93618 invoked by uid 99); 19 Nov 2004 12:41:11 -0000
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,FROM_ENDS_IN_NUMS,MSGID_FROM_MTA_HEADER,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of abdo1234@msn.com designates 64.4.11.4 as permitted sender)
Received: from [64.4.11.4] (HELO hotmail.com) (64.4.11.4)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 19 Nov 2004 04:41:05 -0800
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 19 Nov 2004 04:41:01 -0800
Message-ID: <BAY7-F4EBD941171AB2F4039AB3C9C30@phx.gbl>
Received: from 81.10.42.171 by by7fd.bay7.hotmail.msn.com with HTTP;
	Fri, 19 Nov 2004 12:40:22 GMT
X-Originating-IP: [81.10.42.171]
X-Originating-Email: [abdo1234@msn.com]
X-Sender: abdo1234@msn.com
In-Reply-To: <20041118212031.8909.qmail@web12706.mail.yahoo.com>
From: "abdulrahman galal" <abdo1234@msn.com>
To: lucene-user@jakarta.apache.org
Bcc: 
Subject: Qustion
Date: Fri, 19 Nov 2004 14:40:22 +0200
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 19 Nov 2004 12:41:01.0287 (UTC) FILETIME=[069EB770:01C4CE35]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



can anyone guide me how to compress data files and in the same time search 
in them while they are compressed ... any ideas ... is there any open source 
tool for that

_________________________________________________________________
Don't just search. Find. Check out the new MSN Search! 
http://search.msn.click-url.com/go/onm00200636ave/direct/01/


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11378-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 19 12:47:04 2004
Return-Path: <lucene-user-return-11378-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97472 invoked from network); 19 Nov 2004 12:47:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Nov 2004 12:47:04 -0000
Received: (qmail 4059 invoked by uid 500); 19 Nov 2004 12:46:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4033 invoked by uid 500); 19 Nov 2004 12:46:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4016 invoked by uid 99); 19 Nov 2004 12:46:57 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.211] (HELO web21325.mail.yahoo.com) (216.136.175.211)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 19 Nov 2004 04:46:54 -0800
Received: (qmail 72031 invoked by uid 60001); 19 Nov 2004 12:45:18 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=RYULargIAamZJTigVN9/3EzjBYi5XeEe4my5LXGZZJR1s3ESCgA2W9iQGBzDDqX3VNHGgfUdWSsajmdGu1yv8XdrFemigfNyXdIRZxmwmJv1MRQBpOJI7m4knXDCbtVmq6OrQfPESY2lhNIyeM+4mgBsZQttkM/T78Pym5xGyZ8=  ;
Message-ID: <20041119124518.72029.qmail@web21325.mail.yahoo.com>
Received: from [81.182.58.48] by web21325.mail.yahoo.com via HTTP; Fri, 19 Nov 2004 04:45:18 PST
Date: Fri, 19 Nov 2004 04:45:18 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Re: WildcardTermEnum skipping terms containing numbers?!
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <16796.25952.23037.960288@tanto-xipolis.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> If there's a bug, it should be tracked down, not worked around...

Sure, but I'm working with 20million records and it takes about 25 hours to re-index, so I'm
looking for ways that doesn't require reindexing.

My code was:

      WildcardTermEnum wcenum = new WildcardTermEnum(reader, term);
      
      while (wcenum.next()) {
    		terms.add(new WeightedTerm(termgroup,wcenum.term().text()));
    		//System.out.println(wcenum.term().text());
      }

And it skipped lots of things it shouldn't have skipped.
So, I've chosen the other way:
if (wcenum.wildcardEquals(term.text(), 0, "c0ca", 0)) { ... }
It works perfectly so far.

> 
> But it looks ok to me:
> 
> import org.apache.lucene.analysis.standard.StandardAnalyzer;
> import org.apache.lucene.index.*;
> import org.apache.lucene.document.*;
> import org.apache.lucene.store.*;
> import org.apache.lucene.search.*;
> 
> public class LuceneTest {
> 
>     public static void main(String[] args) throws Exception {
> 
> 	RAMDirectory dir = new RAMDirectory();
> 
> 	IndexWriter writer = new IndexWriter(dir, new StandardAnalyzer(), true);
> 
> 	Document doc = new Document();
> 	
> 	doc.add(new Field("foo", "blabla etc.. etc... c0la c0ca caca ccca", true, true, true));
> 
> 	writer.addDocument(doc);
> 
> 	writer.close();
> 
> 	IndexReader reader = IndexReader.open(dir);
> 
> 	WildcardTermEnum enum = new WildcardTermEnum(reader, new Term("foo", "c??a"));
> 
> 	do {
> 	    System.out.println(enum.term().text());
> 	} while ( enum.next() );
> 
> 	WildcardQuery wq = new WildcardQuery(new Term("foo", "c??a"));
> 
> 	Query q = wq.rewrite(reader);
> 
> 	System.out.println(q.toString());
> 
> 	reader.close();
>     }
> }
> 
> gives
> c0ca
> c0la
> caca
> ccca
> foo:c0ca foo:c0la foo:caca foo:ccca
> 
> The only bug I see is in the docs, that claims enum.term() to be invalid
> before the first call to next() which does not seem to be the case.
> So if you use
> while ( enum.next() ) {
> ...
> }
> you will loose the first term, whatever it is.
> Looking at the sources I find that this behaviour is shared by 
> FuzzyTermEnum. Both implementations of the abstract FilteredTermEnum class
> call setEnum at the end of the constructor, which prepares the first
> result.
> 
> Morus
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 



		
__________________________________ 
Do you Yahoo!? 
Meet the all-new My Yahoo! - Try it today! 
http://my.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11379-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 19 13:29:20 2004
Return-Path: <lucene-user-return-11379-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21234 invoked from network); 19 Nov 2004 13:29:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Nov 2004 13:29:19 -0000
Received: (qmail 91795 invoked by uid 500); 19 Nov 2004 13:29:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91471 invoked by uid 500); 19 Nov 2004 13:29:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91454 invoked by uid 99); 19 Nov 2004 13:29:13 -0000
X-ASF-Spam-Status: No, hits=1.1 required=10.0
	tests=PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 19 Nov 2004 05:29:11 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 4534B23BCA
	for <lucene-user@jakarta.apache.org>; Fri, 19 Nov 2004 14:29:46 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 17160-10 for <lucene-user@jakarta.apache.org>;
 Fri, 19 Nov 2004 14:29:46 +0100 (CET)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 20E5623BC8
	for <lucene-user@jakarta.apache.org>; Fri, 19 Nov 2004 14:29:46 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id iAJDSumA010178
	for <lucene-user@jakarta.apache.org>; Fri, 19 Nov 2004 14:28:56 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id iAJDSukJ010174;
	Fri, 19 Nov 2004 14:28:56 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16797.62744.571636.425134@tanto-xipolis.de>
Date: Fri, 19 Nov 2004 14:28:56 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: WildcardTermEnum skipping terms containing numbers?!
In-Reply-To: <20041119124518.72029.qmail@web21325.mail.yahoo.com>
References: <16796.25952.23037.960288@tanto-xipolis.de>
	<20041119124518.72029.qmail@web21325.mail.yahoo.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Sanyi writes:
> > If there's a bug, it should be tracked down, not worked around...
> 
> Sure, but I'm working with 20million records and it takes about 25 hours to re-index, so I'm
> looking for ways that doesn't require reindexing.
> 
why reindex?

> My code was:
> 
>       WildcardTermEnum wcenum = new WildcardTermEnum(reader, term);
>       
>       while (wcenum.next()) {
>     		terms.add(new WeightedTerm(termgroup,wcenum.term().text()));
>     		//System.out.println(wcenum.term().text());
>       }
> 
> And it skipped lots of things it shouldn't have skipped.

As stated at the end of my mail, I'd expect that to skip the first
term in the enum.
Is that, what you miss or do you loose more than one term?

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11380-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 19 15:55:45 2004
Return-Path: <lucene-user-return-11380-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21891 invoked from network); 19 Nov 2004 15:55:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Nov 2004 15:55:41 -0000
Received: (qmail 67870 invoked by uid 500); 19 Nov 2004 15:55:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67714 invoked by uid 500); 19 Nov 2004 15:55:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67623 invoked by uid 99); 19 Nov 2004 15:55:00 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 19 Nov 2004 07:54:57 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Fri, 19 Nov 2004 10:55:20 -0500
Message-ID: <000f01c4ce50$2c27ae00$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: False Locking Conflict?
Date: Fri, 19 Nov 2004 10:55:20 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_000C_01C4CE26.43410430"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 19 Nov 2004 15:55:20.0559 (UTC) FILETIME=[2C166FF0:01C4CE50]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_000C_01C4CE26.43410430
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hey All;

Is it possible for there to be a situation where the locking file is in =
place after the reader has been closed?

I have extra logging in place and have followed the code execution. The =
reader finishes deleting old content and closes (I know this for sure). =
This is the only reader instance I have for the class (it is a static =
member). The reader is not re-opened. I try to open the writer and I get =
my old friend:

java.io.IOException: Lock obtain timed out: =
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d=
43210f7fe8-write.lock

This code is synchronized so I am sure there is no other processes =
trying to do the same thing. It looks to me like the reader is closing =
and the lock file is not being removed. Is this possible?

Luke
------=_NextPart_000_000C_01C4CE26.43410430--



From lucene-user-return-11381-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 19 17:53:10 2004
Return-Path: <lucene-user-return-11381-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95185 invoked from network); 19 Nov 2004 17:53:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Nov 2004 17:53:10 -0000
Received: (qmail 19176 invoked by uid 500); 19 Nov 2004 17:53:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 19150 invoked by uid 500); 19 Nov 2004 17:53:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 19135 invoked by uid 99); 19 Nov 2004 17:53:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.197 as permitted sender)
Received: from [64.233.170.197] (HELO rproxy.gmail.com) (64.233.170.197)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 19 Nov 2004 09:52:58 -0800
Received: by rproxy.gmail.com with SMTP id 34so107635rns
        for <lucene-user@jakarta.apache.org>; Fri, 19 Nov 2004 09:52:54 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=tx+7AMboWuhiq2lVp4bljtywfp2xPBDPpTHyVH9w6bZLqGcoNxzxZR6LRNysLflfs/rl7MQFP07e+P08zYbDNQDqsm9ih/gORVgUaeFQADs8B8/LdUsXVXzeLRIFNf5BHSzFTIFbn7zgpFjGLyvIQNO00Izo41PlO8Ff+q9Ehh0=
Received: by 10.38.10.42 with SMTP id 42mr6314rnj;
        Fri, 19 Nov 2004 09:52:54 -0800 (PST)
Received: by 10.38.179.9 with HTTP; Fri, 19 Nov 2004 09:52:54 -0800 (PST)
Message-ID: <dd2db8d004111909526cbee191@mail.gmail.com>
Date: Fri, 19 Nov 2004 10:52:54 -0700
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: java.io.FileNotFoundException: ... (No such file or directory)
In-Reply-To: <63434C14F9A6F74CB36B85033E4C30CA5BFCD9@hermes.corp.cyveillance.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <63434C14F9A6F74CB36B85033E4C30CA5BFCD9@hermes.corp.cyveillance.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Is it possible that while my searcher process is reading the directory
that the index writer process performs a merge?  If that is so, then
the I think that the merge could remove segment files before they are
read by the
reader.  When the reader tries to read one of the now missing segment
files it throws the IOException.  That file was in the segments file
when the RAMDirectory started loading the directory, but now it is
missing because of the merge.  This would most likely not affect small
indexes, but large indexes like mine, especially over a network file
system could definitely be affected.

If this is what is happening, a way around it would be to open all the
files in the segment file when the segment file is read.  Then valid
file handles will be maintained for all the files that need to be
read.  If the index writer process removes a segment, then the file
handle should still be valid.  This might only work for local
filesystems though, I'm not sure if NFS works that way or not.



On Thu, 18 Nov 2004 19:16:46 -0500, Will Allen <wallen@cyveillance.com> wrote:
> I have gotten this a few times.  I am also using a NFS mount, but have seen it in cases where a mount wasn't involved.
> 
> I cannot speak to why this is happening, but I have posted to this forum before a way of repairing your index by modifying the segments file.  Search for "wallen".
> 
> The other thing I have done, is use code to copy the documents that can be read by a reader to a new index.  I suppose I should submit those tools to open source!
> 
> Anyway, this error will break the searcher, but the index can still be read with an indexreader.
> 
> -Will
> 
> Here is the source of a method that should get you started (logger is a log4j object):
> 
>     public void transferDocuments()
>     throws IOException
>     {
>         IndexReader reader = IndexReader.open(brokenDir);
>         logger.debug(reader.numDocs() + "");
>         IndexWriter writer = new IndexWriter(newIndexDir, PopIndexer.popAnalyzer(),true);
>         writer.minMergeDocs = 50;
>         writer.mergeFactor = 200;
>         writer.setUseCompoundFile(true);
>         int docCount = reader.numDocs();
>         Date start = new Date();
>         //docCount = Math.min(docCount, 500);
>         for(int x=0; x < docCount; x++)
>         {
>             try
>             {
>                 if(!reader.isDeleted(x))
>                 {
>                     Document doc = reader.document(x);
>                     if(x % 1000 == 0)
>                     {
>                         logger.debug(doc.get("subject"));
>                     }
>                     //remove the new fields if they exist, and add new value
>                     //TODO test not having this in
>                     /*
>                     for ( Enumeration newFields = doc.fields(); newFields.hasMoreElements(); )
>                     {
>                         Field newField = (Field) newFields.nextElement();
>                         doc.removeFields( newField.name() );
>                         doc.add( newField );
>                     }
>                     */
>                     doc.removeFields("counter");
>                     doc.add(Field.Keyword("counter", "counter"));
>                     //  reinsert old document
>                     writer.addDocument( doc );
>                 }
>             }
>             catch(IOException ioe)
>             {
>                 logger.error("doc:" + x + " failed, " + ioe.getMessage());
>             }
>             catch(IndexOutOfBoundsException ioobe)
>             {
>                 logger.error("INDEX OUT OF BOUNDS!" + ioobe.getMessage());
>                 ioobe.printStackTrace();
>             }
>         }
>         reader.close();
>         //logger.debug("done, about the optimize");
>         //writer.optimize();
>         writer.close();
>         long time = ((new Date()).getTime() - start.getTime())/1000;
>         logger.info("done optimizing: " + time + " seconds or " + (docCount / time) + " rec/sec");
> 
> 
>     }
> 
> -----Original Message-----
> From: Justin Swanhart [mailto:greenlion@gmail.com]
> Sent: Thursday, November 18, 2004 5:00 PM
> To: Lucene Users List
> Subject: java.io.FileNotFoundException: ... (No such file or directory)
> 
> I have two index processes.  One is an index server, the other is a
> search server.  The processes run on different machines.
> 
> The index server is a single threaded process that reads from the
> database and adds
> unindexed rows to the index as needed.  It sleeps for a couple minutes
> between each
> batch to allow newly added/updated rows to accumulate.
> 
> The searcher process keeps an open cache of IndexSearcher objects and
> is multithreaded.
> It accepts connections on a tcp port, runs the query and stores the
> results in a database.
> After a set interval, the server checks to see if the index on disk is
> a newer version.  If it is,
> it loads the index into a new IndexSearcher as a RAMDirectory.
> 
> Every once in awhile, the index reader process gets a FileNotFoundException:
> 20041118 1378 1383  (index number, old version, new version)
> [newer version found] Loading index directory into RAM: 20041118
> java.io.FileNotFoundException:
> /path/omitted/for/obvious/reasons/_4zj6.cfs (No such file or
> directory)
>         at java.io.RandomAccessFile.open(Native Method)
>         at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
>         at org.en.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.java:376)
>         at org.en.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
>         at org.en.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
>         at org.en.lucene.store.RAMDirectory.<init>(RAMDirectory.java:60)
>         at org.en.lucene.store.RAMDirectory.<init>(RAMDirectory.java:89)
>         at org.en.global.searchserver.UpdateSearchers.createIndexSearchers(Search.java:89)
>         at org.en.global.searchserver.UpdateSearchers.run(Search.java:54)
> 
> the code being called at that point is:
> //add the directory to the HashMap of IndexSearchers (dir# => IndexSearcher)
> indexSearchers.put(subDirs[i],new IndexSearcher(new
> RAMDirectory(indexDir + "/" + subDirs[i])));
> 
> The indexes are located on a NFS mountpoint. Could this be the
> problem?  Or should I be looking elsewhere...  Should i just check for
> an IOException, and try reloading the index if I get an error?
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11382-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 19 19:13:42 2004
Return-Path: <lucene-user-return-11382-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31395 invoked from network); 19 Nov 2004 19:13:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Nov 2004 19:13:42 -0000
Received: (qmail 18144 invoked by uid 500); 19 Nov 2004 19:13:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18108 invoked by uid 500); 19 Nov 2004 19:13:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18066 invoked by uid 99); 19 Nov 2004 19:13:33 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.244] (HELO web12707.mail.yahoo.com) (216.136.173.244)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 19 Nov 2004 11:13:28 -0800
Received: (qmail 41078 invoked by uid 60001); 19 Nov 2004 19:13:23 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=1Hwl3ftOTCpNSlnm6RMa5oA4hndHumTMEaoIOrSKdL2jayDj4u4cx/Wo8S+YhVq0dmpQiBdRyTHqack/PMGBv0K7U3/Mx4fve2XjR4q383DDYdKXxDzMCACFM2FIwaTvWhZNBVDhvCHEeCs7ThirHw1blZoIwtqPJcX0jaeG9uo=  ;
Message-ID: <20041119191322.41075.qmail@web12707.mail.yahoo.com>
Received: from [216.194.17.194] by web12707.mail.yahoo.com via HTTP; Fri, 19 Nov 2004 11:13:22 PST
Date: Fri, 19 Nov 2004 11:13:22 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: False Locking Conflict?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <000f01c4ce50$2c27ae00$7703d00a@hypermedia.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It is possible, but it's not likely, as other users are not reporting
this.

Otis

--- Luke Shannon <lshannon@hypermedia.com> wrote:

> Hey All;
> 
> Is it possible for there to be a situation where the locking file is
> in place after the reader has been closed?
> 
> I have extra logging in place and have followed the code execution.
> The reader finishes deleting old content and closes (I know this for
> sure). This is the only reader instance I have for the class (it is a
> static member). The reader is not re-opened. I try to open the writer
> and I get my old friend:
> 
> java.io.IOException: Lock obtain timed out:
>
Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d43210f7fe8-write.lock
> 
> This code is synchronized so I am sure there is no other processes
> trying to do the same thing. It looks to me like the reader is
> closing and the lock file is not being removed. Is this possible?
> 
> Luke


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11383-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 19 19:21:47 2004
Return-Path: <lucene-user-return-11383-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 35473 invoked from network); 19 Nov 2004 19:21:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 19 Nov 2004 19:21:47 -0000
Received: (qmail 37468 invoked by uid 500); 19 Nov 2004 19:21:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37322 invoked by uid 500); 19 Nov 2004 19:21:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37244 invoked by uid 99); 19 Nov 2004 19:21:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.65.202.3] (HELO contextmedia.com) (64.65.202.3)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 19 Nov 2004 11:21:10 -0800
Received: from ppeddi ([192.168.1.48]) by contextmedia.com ; Fri, 19 Nov 2004 14:20:14 -0500
Message-ID: <0ca001c4ce6c$cdcfe440$aa87a8c0@ppeddi>
From: "Praveen Peddi" <ppeddi@contextmedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041119191322.41075.qmail@web12707.mail.yahoo.com>
Subject: Re: False Locking Conflict?
Date: Fri, 19 Nov 2004 14:20:17 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Rcpt-To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If you have more than one lucene application running on the same machine, 
they all share the same temp file? Atleast I had this problem when I run my 
application in 2 diff instances of weblogic on the same machine.
Praveen
----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Friday, November 19, 2004 2:13 PM
Subject: Re: False Locking Conflict?


> It is possible, but it's not likely, as other users are not reporting
> this.
>
> Otis
>
> --- Luke Shannon <lshannon@hypermedia.com> wrote:
>
>> Hey All;
>>
>> Is it possible for there to be a situation where the locking file is
>> in place after the reader has been closed?
>>
>> I have extra logging in place and have followed the code execution.
>> The reader finishes deleting old content and closes (I know this for
>> sure). This is the only reader instance I have for the class (it is a
>> static member). The reader is not re-opened. I try to open the writer
>> and I get my old friend:
>>
>> java.io.IOException: Lock obtain timed out:
>>
> Lock@/usr/tomcat/jakarta-tomcat-5.0.19/temp/lucene-398fbd170a5457d05e2f4d43210f7fe8-write.lock
>>
>> This code is synchronized so I am sure there is no other processes
>> trying to do the same thing. It looks to me like the reader is
>> closing and the lock file is not being removed. Is this possible?
>>
>> Luke
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11384-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 20 00:58:55 2004
Return-Path: <lucene-user-return-11384-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97751 invoked from network); 20 Nov 2004 00:58:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Nov 2004 00:58:55 -0000
Received: (qmail 94329 invoked by uid 500); 20 Nov 2004 00:58:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94307 invoked by uid 500); 20 Nov 2004 00:58:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94294 invoked by uid 99); 20 Nov 2004 00:58:47 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO main.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 19 Nov 2004 16:58:46 -0800
Received: from list by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1CVJaL-0006Vr-00
	for <lucene-user@jakarta.apache.org>; Sat, 20 Nov 2004 01:58:41 +0100
Received: from adsl-68-94-55-89.dsl.rcsntx.swbell.net ([68.94.55.89])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Sat, 20 Nov 2004 01:58:41 +0100
Received: from vin by adsl-68-94-55-89.dsl.rcsntx.swbell.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Sat, 20 Nov 2004 01:58:41 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: Vic <vin@friendvu.com>
Subject: cache check?
Date: Fri, 19 Nov 2004 18:58:41 -0600
Lines: 8
Message-ID: <cnm4ru$bl6$1@sea.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: adsl-68-94-55-89.dsl.rcsntx.swbell.net
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Did somone write a cache of hits yet? Like they have for DAO.
For example I say Dao.search(XYZ);
It 1st checks the memory cache to see if this was just asked, on a cache 
miss it runs a search and puts in in cache.

If not, I will, it would take me a few weeks.

.V


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11385-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 20 10:22:53 2004
Return-Path: <lucene-user-return-11385-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3121 invoked from network); 20 Nov 2004 10:22:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Nov 2004 10:22:53 -0000
Received: (qmail 57757 invoked by uid 500); 20 Nov 2004 10:22:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57727 invoked by uid 500); 20 Nov 2004 10:22:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57712 invoked by uid 99); 20 Nov 2004 10:22:46 -0000
X-ASF-Spam-Status: No, hits=1.3 required=10.0
	tests=DNS_FROM_RFC_ABUSE,PLING_QUERY
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.175.207] (HELO web21321.mail.yahoo.com) (216.136.175.207)
  by apache.org (qpsmtpd/0.28) with SMTP; Sat, 20 Nov 2004 02:22:44 -0800
Received: (qmail 45542 invoked by uid 60001); 20 Nov 2004 10:22:40 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=HlwDYtY//Gc5c4M+vLJ/7ZyF6dNWT/0t+ORU5M3CDbhqwvaat4KP2lc7dNhHi+alSUJAFmfWL8uzaGBI4sFRGMf0OL+p0vRNXyq3Rpeyj1WT8R0JgazjuCZJb2I00omJjrGmsXgUuGP68pSoBZAT+JuMCXG/3yOcVCVnW342R6Y=  ;
Message-ID: <20041120102239.45536.qmail@web21321.mail.yahoo.com>
Received: from [81.182.58.165] by web21321.mail.yahoo.com via HTTP; Sat, 20 Nov 2004 02:22:39 PST
Date: Sat, 20 Nov 2004 02:22:39 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Re: WildcardTermEnum skipping terms containing numbers?!
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <16797.62744.571636.425134@tanto-xipolis.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> why reindex?

Well, since I had different experiences with different analyzers I've tried, I thougt that this
problem must origin from either the indexing or a lucene bug.

> As stated at the end of my mail, I'd expect that to skip the
> first term in the enum.

Yes, this must be a problem for me, since I took this sentence from the manual as the starting
point:
"Returns the current Term in the enumeration. Initially invalid, valid after next() called for the
first time."

So, it seems that it was a bug in the docs, not the api itself.

> Is that, what you miss or do you loose
> more than one term?

It seemed to me that it was skipping more stuff, but I'd better not say this, since I didn't know
that the term is valid even before the first next(), so I could've been misleaded by my own
chaotic experiences.

Since my code was completly restructured since then, I don't have all the surrounging stuff needed
for further testing.

Anyway, we've found a docs bug thanks to you and my code is cleaner and better the other way.

Thanx!




		
__________________________________ 
Do you Yahoo!? 
The all-new My Yahoo! - Get yours free! 
http://my.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11386-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 20 16:25:31 2004
Return-Path: <lucene-user-return-11386-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22388 invoked from network); 20 Nov 2004 16:25:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Nov 2004 16:25:31 -0000
Received: (qmail 48015 invoked by uid 500); 20 Nov 2004 16:25:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47983 invoked by uid 500); 20 Nov 2004 16:25:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47965 invoked by uid 99); 20 Nov 2004 16:25:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of angeles3d@gmail.com designates 64.233.170.196 as permitted sender)
Received: from [64.233.170.196] (HELO rproxy.gmail.com) (64.233.170.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 20 Nov 2004 08:25:21 -0800
Received: by rproxy.gmail.com with SMTP id a36so112270rnf
        for <lucene-user@jakarta.apache.org>; Sat, 20 Nov 2004 08:25:18 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=nG914CeceHY1UcsO5G4Ek1WmK+duzkMcU5F3pFZtK+9A+NejG0J4XPt+HQC8vH3/1AspwMm0FmLfAGpyz7Kn3cr+aLH0XFjpP2/0OuJspDWVsEUyIoelBvQ9MwGIGlpQ4oZZ3A4X0GVQC29TjZjVMYx5a6S/SBkoAJEpL1XtTvE=
Received: by 10.38.104.32 with SMTP id b32mr173346rnc;
        Sat, 20 Nov 2004 08:25:18 -0800 (PST)
Received: by 10.38.14.16 with HTTP; Sat, 20 Nov 2004 08:25:18 -0800 (PST)
Message-ID: <6c00cd310411200825547662f@mail.gmail.com>
Date: Sat, 20 Nov 2004 11:25:18 -0500
From: Miguel Angel <angeles3d@gmail.com>
Reply-To: Miguel Angel <angeles3d@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: How much time indexing doc ??
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi, i have 1000 doc (Word, PDF and HTML)   , those documents indexed
in 5 min.  Is this correct?? or i have problem with my Analyzer, i
used StandartAnalyzer
-- 
Miguel Angel Angeles R.
Asesoria en Conectividad y Servidores
Telf. 97451277

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11387-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 20 22:19:35 2004
Return-Path: <lucene-user-return-11387-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74032 invoked from network); 20 Nov 2004 22:19:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Nov 2004 22:19:35 -0000
Received: (qmail 25579 invoked by uid 500); 20 Nov 2004 22:19:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25560 invoked by uid 500); 20 Nov 2004 22:19:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25542 invoked by uid 99); 20 Nov 2004 22:19:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of angeles3d@gmail.com designates 64.233.170.197 as permitted sender)
Received: from [64.233.170.197] (HELO rproxy.gmail.com) (64.233.170.197)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 20 Nov 2004 14:19:26 -0800
Received: by rproxy.gmail.com with SMTP id a36so123842rnf
        for <lucene-user@jakarta.apache.org>; Sat, 20 Nov 2004 14:19:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=R1RUNnAWMBGbeYIKiM8q6EMYGGTxoErRZRk+2FNvSrj+Jjj7w+gS+GNXkNn7mInXiUtsLlIqlXH+Fr25HlTGFk+bKsgvQCo8YTeIp+axxVZNbn84RtDDZ3H8j58mpI4gK5sVPCBmfspwZojKUE1Kff0+Im+TtpN33D6n307C4rQ=
Received: by 10.38.66.45 with SMTP id o45mr256963rna;
        Sat, 20 Nov 2004 14:19:23 -0800 (PST)
Received: by 10.38.14.16 with HTTP; Sat, 20 Nov 2004 14:19:23 -0800 (PST)
Message-ID: <6c00cd31041120141970f02728@mail.gmail.com>
Date: Sat, 20 Nov 2004 17:19:23 -0500
From: Miguel Angel <angeles3d@gmail.com>
Reply-To: Miguel Angel <angeles3d@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: Optimized??
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

What`s mean Optimized index in Lucene=BF?
--=20
Miguel Angel Angeles R.
Asesoria en Conectividad y Servidores
Telf. 97451277

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11388-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 20 22:20:12 2004
Return-Path: <lucene-user-return-11388-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74187 invoked from network); 20 Nov 2004 22:20:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Nov 2004 22:20:12 -0000
Received: (qmail 27108 invoked by uid 500); 20 Nov 2004 22:20:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 27075 invoked by uid 500); 20 Nov 2004 22:20:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 27052 invoked by uid 99); 20 Nov 2004 22:20:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 20 Nov 2004 14:20:04 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9454D13E2903; Sat, 20 Nov 2004 17:19:43 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id B902B13E2902
	for <lucene-user@jakarta.apache.org>; Sat, 20 Nov 2004 17:19:41 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <cnm4ru$bl6$1@sea.gmane.org>
References: <cnm4ru$bl6$1@sea.gmane.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <4C3A25AC-3B42-11D9-965A-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: cache check?
Date: Sat, 20 Nov 2004 17:19:51 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

What are you trying to accomplish with your proposed cache that you are 
missing with Lucene already?  Are you finding access to documents slow?

The Hits object already does some most-recently-used caching.

	Erik


On Nov 19, 2004, at 7:58 PM, Vic wrote:

> Did somone write a cache of hits yet? Like they have for DAO.
> For example I say Dao.search(XYZ);
> It 1st checks the memory cache to see if this was just asked, on a 
> cache miss it runs a search and puts in in cache.
>
> If not, I will, it would take me a few weeks.
>
> .V
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11389-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 20 22:50:10 2004
Return-Path: <lucene-user-return-11389-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 81820 invoked from network); 20 Nov 2004 22:50:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 20 Nov 2004 22:50:09 -0000
Received: (qmail 58160 invoked by uid 500); 20 Nov 2004 22:50:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58124 invoked by uid 500); 20 Nov 2004 22:50:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58110 invoked by uid 99); 20 Nov 2004 22:50:04 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO main.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 20 Nov 2004 14:50:03 -0800
Received: from list by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1CVe3L-0006NV-00
	for <lucene-user@jakarta.apache.org>; Sat, 20 Nov 2004 23:49:59 +0100
Received: from adsl-68-94-55-89.dsl.rcsntx.swbell.net ([68.94.55.89])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Sat, 20 Nov 2004 23:49:59 +0100
Received: from vin by adsl-68-94-55-89.dsl.rcsntx.swbell.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Sat, 20 Nov 2004 23:49:59 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: Vic <vin@friendvu.com>
Subject: Re: cache check?
Date: Sat, 20 Nov 2004 16:49:57 -0600
Lines: 16
Message-ID: <cnohmj$ed4$1@sea.gmane.org>
References: <cnm4ru$bl6$1@sea.gmane.org> <4C3A25AC-3B42-11D9-965A-000393A564E6@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: adsl-68-94-55-89.dsl.rcsntx.swbell.net
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
In-Reply-To: <4C3A25AC-3B42-11D9-965A-000393A564E6@ehatchersolutions.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
> The Hits object already does some most-recently-used caching.
> 

Is there any docs on this or should I look in source?

I plan on terabytes search, and have used DAO caching (ibatis) to make 
my db fast.
I have no idea how fast Lucene will be untill I am done and loaded and 
have querries coming in, but I know I will need to manage the cache.
It depends on how good and tuneable is "some LRU caching" in Hits. Is it 
  soft? Can it take up 2 gigs of ram?

tia
.V



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11390-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 21 04:28:23 2004
Return-Path: <lucene-user-return-11390-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90903 invoked from network); 21 Nov 2004 04:28:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Nov 2004 04:28:23 -0000
Received: (qmail 24555 invoked by uid 500); 21 Nov 2004 04:28:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24510 invoked by uid 500); 21 Nov 2004 04:28:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24491 invoked by uid 99); 21 Nov 2004 04:28:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 20 Nov 2004 20:28:07 -0800
Received: from [192.168.0.4] [217.165.51.153] by mail.bayt.net with ESMTP
  (SMTPD32-8.14) id AB3A6D77014A; Sat, 20 Nov 2004 23:36:10 -0500
Message-ID: <41A0194C.2030702@bayt.net>
Date: Sun, 21 Nov 2004 08:27:56 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Optimized??
References: <6c00cd31041120141970f02728@mail.gmail.com>
In-Reply-To: <6c00cd31041120141970f02728@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

The down and dirty answer is it's like defragmenting your harddrive, 
you're basically compacting and sorting out index references. What you 
need to know is that it makes searching so much faster after you've 
updating the index.

Nader Henein

Miguel Angel wrote:

>What`s mean Optimized index in Lucene?
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11391-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 21 09:52:58 2004
Return-Path: <lucene-user-return-11391-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99509 invoked from network); 21 Nov 2004 09:52:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Nov 2004 09:52:58 -0000
Received: (qmail 47996 invoked by uid 500); 21 Nov 2004 09:52:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47961 invoked by uid 500); 21 Nov 2004 09:52:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47936 invoked by uid 99); 21 Nov 2004 09:52:50 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of n.maisonneuve@gmail.com designates 64.233.184.207 as permitted sender)
Received: from [64.233.184.207] (HELO wproxy.gmail.com) (64.233.184.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 21 Nov 2004 01:52:47 -0800
Received: by wproxy.gmail.com with SMTP id 69so220363wra
        for <lucene-user@jakarta.apache.org>; Sun, 21 Nov 2004 01:52:43 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=hB1O8UCUtira9ci1shrRUtY9XPY8xp73e9bt/u/941adz/f7Gk8Mz7MGQ3+7lWbYZbY2iStJi5AV3jx5a7lHfwUtndgkpA8LEwA3ZtAberyYhNPyR8TmvDZLGYHqnTEFo6PTgJ75rSAX7VVzpfLKqEMnsfG5Yxo0BQq2lAlD5uQ=
Received: by 10.54.13.20 with SMTP id 20mr933469wrm;
        Sun, 21 Nov 2004 01:52:43 -0800 (PST)
Received: by 10.54.35.7 with HTTP; Sun, 21 Nov 2004 01:52:43 -0800 (PST)
Message-ID: <7b87034104112101527a94d8e4@mail.gmail.com>
Date: Sun, 21 Nov 2004 10:52:43 +0100
From: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
Reply-To: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: Filter for a search refinement
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I developped a filter to seach in filtering the search with anterior
hits (search refinement)

see the patch http://issues.apache.org/bugzilla/show_bug.cgi?id=32334

Nicolas Maisonneuve

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11392-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 21 10:06:54 2004
Return-Path: <lucene-user-return-11392-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3899 invoked from network); 21 Nov 2004 10:06:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Nov 2004 10:06:54 -0000
Received: (qmail 58957 invoked by uid 500); 21 Nov 2004 10:06:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58918 invoked by uid 500); 21 Nov 2004 10:06:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58833 invoked by uid 99); 21 Nov 2004 10:06:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 21 Nov 2004 02:06:41 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1CBD513E2009; Sun, 21 Nov 2004 05:06:16 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id F23E113E2008
	for <lucene-user@jakarta.apache.org>; Sun, 21 Nov 2004 05:05:55 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <7b87034104112101527a94d8e4@mail.gmail.com>
References: <7b87034104112101527a94d8e4@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <F967B028-3BA4-11D9-B0C5-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Filter for a search refinement
Date: Sun, 21 Nov 2004 05:06:12 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Nicolas - how does your filter differ from the capabilities available 
from the built-in QueryFilter?  It seems at first glance to be nearly 
the same thing.

	Erik


On Nov 21, 2004, at 4:52 AM, Nicolas Maisonneuve wrote:

> I developped a filter to seach in filtering the search with anterior
> hits (search refinement)
>
> see the patch http://issues.apache.org/bugzilla/show_bug.cgi?id=32334
>
> Nicolas Maisonneuve
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11393-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 21 12:21:09 2004
Return-Path: <lucene-user-return-11393-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 42179 invoked from network); 21 Nov 2004 12:21:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Nov 2004 12:21:09 -0000
Received: (qmail 62422 invoked by uid 500); 21 Nov 2004 12:20:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62216 invoked by uid 500); 21 Nov 2004 12:20:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62203 invoked by uid 99); 21 Nov 2004 12:20:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 21 Nov 2004 04:20:45 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1BBCD13E2009; Sun, 21 Nov 2004 07:20:22 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 182EF13E2008
	for <lucene-user@jakarta.apache.org>; Sun, 21 Nov 2004 07:20:17 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <cnohmj$ed4$1@sea.gmane.org>
References: <cnm4ru$bl6$1@sea.gmane.org> <4C3A25AC-3B42-11D9-965A-000393A564E6@ehatchersolutions.com> <cnohmj$ed4$1@sea.gmane.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <BE4B882A-3BB7-11D9-B61C-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: cache check?
Date: Sun, 21 Nov 2004 07:20:34 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 20, 2004, at 5:49 PM, Vic wrote:
> Erik Hatcher wrote:
>> The Hits object already does some most-recently-used caching.
>
> Is there any docs on this or should I look in source?

The caching is there to avoid disk access of the Lucene index for the 
documents most likely to be accessed next.

> I plan on terabytes search

That's quite a lot of data.  You'll have to do more than just use plain 
Lucene to handle this much data, of course.

> I have no idea how fast Lucene will be untill I am done and loaded and 
> have querries coming in, but I know I will need to manage the cache.

My advice would be to not worry about caching unless and until you need 
it.  You're searching terrabytes, you say, but that does not mean you 
are accessing every single document that comes back from searches.  One 
big issue is how you access the documents you get back from hits - 
accessing a document is when Lucene goes to the index and retrieves 
(currently) the entire document including all the stored fields.  
Minimizing the documents you access in this way (say displaying 10 or 
20 at a time, which is typical) is wise.

I really don't see a need for any custom caching on top of Lucene.  
Remember the rule of optimization: don't.  And for experts only: don't 
do it yet.  :)

> It depends on how good and tuneable is "some LRU caching" in Hits. Is 
> it  soft? Can it take up 2 gigs of ram?

Hits is not tunable.  It caches up to 200 documents.  Though you can 
use Lucene's lower-level search() API methods to do some of your own 
magic if you like - look to see how Hits does its thing with the basic 
search(Query) method.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11394-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 21 13:34:24 2004
Return-Path: <lucene-user-return-11394-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 62114 invoked from network); 21 Nov 2004 13:34:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Nov 2004 13:34:24 -0000
Received: (qmail 24861 invoked by uid 500); 21 Nov 2004 13:34:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24836 invoked by uid 500); 21 Nov 2004 13:34:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24818 invoked by uid 99); 21 Nov 2004 13:34:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of n.maisonneuve@gmail.com designates 64.233.184.206 as permitted sender)
Received: from [64.233.184.206] (HELO wproxy.gmail.com) (64.233.184.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 21 Nov 2004 05:34:05 -0800
Received: by wproxy.gmail.com with SMTP id 69so228687wra
        for <lucene-user@jakarta.apache.org>; Sun, 21 Nov 2004 05:34:01 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=YGJSBZAEs1wtvKWdce2Zm4I3iTWD0TQK6Ib6yHFDl3JXAsknLtvgyXmSvVN3zTmFJGpQj/M1mu6GiaMRLcQmm3QLAYw2G5a6CVmdH44WTR4AQVebLR2QIgMJi/bzD4Fx6RLquhioV/tcWf2dPgnsvmx+RF8k/nrduBVcXICq+A0=
Received: by 10.54.33.42 with SMTP id g42mr1044729wrg;
        Sun, 21 Nov 2004 05:34:01 -0800 (PST)
Received: by 10.54.35.7 with HTTP; Sun, 21 Nov 2004 05:34:00 -0800 (PST)
Message-ID: <7b8703410411210534728d2729@mail.gmail.com>
Date: Sun, 21 Nov 2004 14:34:00 +0100
From: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
Reply-To: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Filter for a search refinement
In-Reply-To: <F967B028-3BA4-11D9-B0C5-000393A564E6@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <7b87034104112101527a94d8e4@mail.gmail.com>
	 <F967B028-3BA4-11D9-B0C5-000393A564E6@ehatchersolutions.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

yes ...it's the same kind of feature... (i didn't see this Filter !,
shame on me)
but my method is maybe faster because with the queryFilter an internal
search is launched and not with my method

nicolas



On Sun, 21 Nov 2004 05:06:12 -0500, Erik Hatcher
<erik@ehatchersolutions.com> wrote:
> Nicolas - how does your filter differ from the capabilities available
> from the built-in QueryFilter?  It seems at first glance to be nearly
> the same thing.
> 
>         Erik
> 
> 
> 
> 
> On Nov 21, 2004, at 4:52 AM, Nicolas Maisonneuve wrote:
> 
> > I developped a filter to seach in filtering the search with anterior
> > hits (search refinement)
> >
> > see the patch http://issues.apache.org/bugzilla/show_bug.cgi?id=32334
> >
> > Nicolas Maisonneuve
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11395-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 21 13:50:01 2004
Return-Path: <lucene-user-return-11395-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68964 invoked from network); 21 Nov 2004 13:50:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Nov 2004 13:50:01 -0000
Received: (qmail 41747 invoked by uid 500); 21 Nov 2004 13:49:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41725 invoked by uid 500); 21 Nov 2004 13:49:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41703 invoked by uid 99); 21 Nov 2004 13:49:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of n.maisonneuve@gmail.com designates 64.233.184.207 as permitted sender)
Received: from [64.233.184.207] (HELO wproxy.gmail.com) (64.233.184.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 21 Nov 2004 05:49:49 -0800
Received: by wproxy.gmail.com with SMTP id 70so318116wra
        for <lucene-user@jakarta.apache.org>; Sun, 21 Nov 2004 05:49:45 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=TTgAL/Bqytus8cGRmyCzRiJzT+EUfgMQ0DzsNY1Rt1KRr/V+LqXSP7asSm2FXtRUNCtTZk3/QqvKNrmyZfl4j+uYvLMP9k/5ZPU3QP2/ty7WPjqKrrr6kof4AOJp0XsRhiBva66ancR25BjwaeoI3oV36jsOAdfjYxi+KZzZPJc=
Received: by 10.54.52.56 with SMTP id z56mr1044423wrz;
        Sun, 21 Nov 2004 05:49:45 -0800 (PST)
Received: by 10.54.35.7 with HTTP; Sun, 21 Nov 2004 05:49:45 -0800 (PST)
Message-ID: <7b87034104112105496defcbc5@mail.gmail.com>
Date: Sun, 21 Nov 2004 14:49:45 +0100
From: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
Reply-To: Nicolas Maisonneuve <n.maisonneuve@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Filter for a search refinement
In-Reply-To: <7b8703410411210534728d2729@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <7b87034104112101527a94d8e4@mail.gmail.com>
	 <F967B028-3BA4-11D9-B0C5-000393A564E6@ehatchersolutions.com>
	 <7b8703410411210534728d2729@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

hmm just a question ..

- in the normal indexSearcher method  
there is a  if (score >0.0F || filter.get(doc)) { doc  in the hit}

- but in the queryFilter , there  isn't a minimum score condition 

normal or not ?

nicolas



On Sun, 21 Nov 2004 14:34:00 +0100, Nicolas Maisonneuve
<n.maisonneuve@gmail.com> wrote:
> yes ...it's the same kind of feature... (i didn't see this Filter !,
> shame on me)
> but my method is maybe faster because with the queryFilter an internal
> search is launched and not with my method
> 
> nicolas
> 
> 
> 
> 
> On Sun, 21 Nov 2004 05:06:12 -0500, Erik Hatcher
> <erik@ehatchersolutions.com> wrote:
> > Nicolas - how does your filter differ from the capabilities available
> > from the built-in QueryFilter?  It seems at first glance to be nearly
> > the same thing.
> >
> >         Erik
> >
> >
> >
> >
> > On Nov 21, 2004, at 4:52 AM, Nicolas Maisonneuve wrote:
> >
> > > I developped a filter to seach in filtering the search with anterior
> > > hits (search refinement)
> > >
> > > see the patch http://issues.apache.org/bugzilla/show_bug.cgi?id=32334
> > >
> > > Nicolas Maisonneuve
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11397-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 21 14:14:24 2004
Return-Path: <lucene-user-return-11397-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78498 invoked from network); 21 Nov 2004 14:14:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Nov 2004 14:14:23 -0000
Received: (qmail 62956 invoked by uid 500); 21 Nov 2004 14:14:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62646 invoked by uid 500); 21 Nov 2004 14:14:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62603 invoked by uid 99); 21 Nov 2004 14:13:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 21 Nov 2004 06:13:56 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0C05713E2008; Sun, 21 Nov 2004 09:13:32 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id C23CD13E2008
	for <lucene-user@jakarta.apache.org>; Sun, 21 Nov 2004 09:13:30 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <7b8703410411210534728d2729@mail.gmail.com>
References: <7b87034104112101527a94d8e4@mail.gmail.com> <F967B028-3BA4-11D9-B0C5-000393A564E6@ehatchersolutions.com> <7b8703410411210534728d2729@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <4B912B67-3BC7-11D9-B61C-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Filter for a search refinement
Date: Sun, 21 Nov 2004 09:11:53 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Nov 21, 2004, at 8:34 AM, Nicolas Maisonneuve wrote:
> yes ...it's the same kind of feature... (i didn't see this Filter !,
> shame on me)
> but my method is maybe faster because with the queryFilter an internal
> search is launched and not with my method

It'd be interesting for you to compare the speed and see.  In your 
approach you are still doing two searches, with the first one used to 
get the documents available for the second search.

QueryFilter also caches.  Filters are really designed for long standing 
use, not a one time query refinement.  For query refinement (search 
within search), simply combine the two queries in a BooleanQuery as 
required clauses.

	Erik

>
>
>
> On Sun, 21 Nov 2004 05:06:12 -0500, Erik Hatcher
> <erik@ehatchersolutions.com> wrote:
>> Nicolas - how does your filter differ from the capabilities available
>> from the built-in QueryFilter?  It seems at first glance to be nearly
>> the same thing.
>>
>>         Erik
>>
>>
>>
>>
>> On Nov 21, 2004, at 4:52 AM, Nicolas Maisonneuve wrote:
>>
>>> I developped a filter to seach in filtering the search with anterior
>>> hits (search refinement)
>>>
>>> see the patch http://issues.apache.org/bugzilla/show_bug.cgi?id=32334
>>>
>>> Nicolas Maisonneuve
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11396-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 21 14:14:24 2004
Return-Path: <lucene-user-return-11396-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78487 invoked from network); 21 Nov 2004 14:14:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Nov 2004 14:14:23 -0000
Received: (qmail 62871 invoked by uid 500); 21 Nov 2004 14:14:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62639 invoked by uid 500); 21 Nov 2004 14:14:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62606 invoked by uid 99); 21 Nov 2004 14:13:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 21 Nov 2004 06:13:56 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D0BC713E2901; Sun, 21 Nov 2004 09:13:32 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id ECD6A13E28F6
	for <lucene-user@jakarta.apache.org>; Sun, 21 Nov 2004 09:13:31 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <7b87034104112105496defcbc5@mail.gmail.com>
References: <7b87034104112101527a94d8e4@mail.gmail.com> <F967B028-3BA4-11D9-B0C5-000393A564E6@ehatchersolutions.com> <7b8703410411210534728d2729@mail.gmail.com> <7b87034104112105496defcbc5@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E6816FD5-3BC6-11D9-B61C-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Filter for a search refinement
Date: Sun, 21 Nov 2004 09:09:04 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

QueryFilter keys off the hits from a previous search to light up the  
bits for documents to pass the filter.  The previous search hits all  
have a score > 0 already, so no need to be concerned with score there.

	Erik

On Nov 21, 2004, at 8:49 AM, Nicolas Maisonneuve wrote:

> hmm just a question ..
>
> - in the normal indexSearcher method
> there is a  if (score >0.0F || filter.get(doc)) { doc  in the hit}
>
> - but in the queryFilter , there  isn't a minimum score condition
>
> normal or not ?
>
> nicolas
>
>
>
> On Sun, 21 Nov 2004 14:34:00 +0100, Nicolas Maisonneuve
> <n.maisonneuve@gmail.com> wrote:
>> yes ...it's the same kind of feature... (i didn't see this Filter !,
>> shame on me)
>> but my method is maybe faster because with the queryFilter an internal
>> search is launched and not with my method
>>
>> nicolas
>>
>>
>>
>>
>> On Sun, 21 Nov 2004 05:06:12 -0500, Erik Hatcher
>> <erik@ehatchersolutions.com> wrote:
>>> Nicolas - how does your filter differ from the capabilities available
>>> from the built-in QueryFilter?  It seems at first glance to be nearly
>>> the same thing.
>>>
>>>         Erik
>>>
>>>
>>>
>>>
>>> On Nov 21, 2004, at 4:52 AM, Nicolas Maisonneuve wrote:
>>>
>>>> I developped a filter to seach in filtering the search with anterior
>>>> hits (search refinement)
>>>>
>>>> see the patch  
>>>> http://issues.apache.org/bugzilla/show_bug.cgi?id=32334
>>>>
>>>> Nicolas Maisonneuve
>>>>
>>>> -------------------------------------------------------------------- 
>>>> -
>>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>>
>>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11398-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 21 16:37:34 2004
Return-Path: <lucene-user-return-11398-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47470 invoked from network); 21 Nov 2004 16:37:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Nov 2004 16:37:33 -0000
Received: (qmail 14102 invoked by uid 500); 21 Nov 2004 16:37:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 13957 invoked by uid 500); 21 Nov 2004 16:37:21 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13941 invoked by uid 99); 21 Nov 2004 16:37:21 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO main.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 21 Nov 2004 08:37:19 -0800
Received: from list by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1CVuiA-0004jv-00
	for <lucene-user@jakarta.apache.org>; Sun, 21 Nov 2004 17:37:14 +0100
Received: from adsl-68-94-55-89.dsl.rcsntx.swbell.net ([68.94.55.89])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Sun, 21 Nov 2004 17:37:14 +0100
Received: from vin by adsl-68-94-55-89.dsl.rcsntx.swbell.net with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Sun, 21 Nov 2004 17:37:14 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: Vic <vin@friendvu.com>
Subject: Re: cache check?
Date: Sun, 21 Nov 2004 10:37:12 -0600
Lines: 9
Message-ID: <cnqg7l$nm4$1@sea.gmane.org>
References: <cnm4ru$bl6$1@sea.gmane.org> <4C3A25AC-3B42-11D9-965A-000393A564E6@ehatchersolutions.com> <cnohmj$ed4$1@sea.gmane.org> <BE4B882A-3BB7-11D9-B61C-000393A564E6@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: adsl-68-94-55-89.dsl.rcsntx.swbell.net
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
In-Reply-To: <BE4B882A-3BB7-11D9-B61C-000393A564E6@ehatchersolutions.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

> Remember the rule of optimization: don't.  And for experts only: don't 
> do it yet.  :)
> 

:-)

.V


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11399-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 21 17:00:24 2004
Return-Path: <lucene-user-return-11399-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 55785 invoked from network); 21 Nov 2004 17:00:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Nov 2004 17:00:24 -0000
Received: (qmail 39526 invoked by uid 500); 21 Nov 2004 17:00:19 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39503 invoked by uid 500); 21 Nov 2004 17:00:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39489 invoked by uid 99); 21 Nov 2004 17:00:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of angeles3d@gmail.com designates 64.233.170.198 as permitted sender)
Received: from [64.233.170.198] (HELO rproxy.gmail.com) (64.233.170.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 21 Nov 2004 09:00:15 -0800
Received: by rproxy.gmail.com with SMTP id a36so150108rnf
        for <lucene-user@jakarta.apache.org>; Sun, 21 Nov 2004 09:00:11 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=O5XM5roFpltTee1Jknq+08HzyHXqPBiV94q3XWXe7zstScXXUejEKRcqmRmfecebd3sL4T+b3Bo5i/tNheYoqMzCsZZ3Df4Lr04qQir94gTDnTwtIAaX5jtJS79u2bqofp6q9MYT0Vgtr7xxjrSWHbZ4Wa99FSo9yN0NnL8vC4U=
Received: by 10.39.3.57 with SMTP id f57mr488390rni;
        Sun, 21 Nov 2004 09:00:10 -0800 (PST)
Received: by 10.38.14.16 with HTTP; Sun, 21 Nov 2004 09:00:10 -0800 (PST)
Message-ID: <6c00cd3104112109004861c374@mail.gmail.com>
Date: Sun, 21 Nov 2004 12:00:10 -0500
From: Miguel Angel <angeles3d@gmail.com>
Reply-To: Miguel Angel <angeles3d@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: disadvantages
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

What are disadvantages the Lucene?? 
-- 
Miguel Angel Angeles R.
Asesoria en Conectividad y Servidores
Telf. 97451277

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11400-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 21 17:25:19 2004
Return-Path: <lucene-user-return-11400-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 63005 invoked from network); 21 Nov 2004 17:25:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Nov 2004 17:25:19 -0000
Received: (qmail 66581 invoked by uid 500); 21 Nov 2004 17:25:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 66552 invoked by uid 500); 21 Nov 2004 17:25:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 66536 invoked by uid 99); 21 Nov 2004 17:25:14 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [68.230.240.35] (HELO lakermmtao04.cox.net) (68.230.240.35)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 21 Nov 2004 09:25:12 -0800
Received: from POWERPACK ([68.100.190.210]) by lakermmtao04.cox.net
          (InterMail vM.6.01.04.00 201-2131-117-20041022) with SMTP
          id <20041121172455.SOXD4706.lakermmtao04.cox.net@POWERPACK>;
          Sun, 21 Nov 2004 12:24:55 -0500
Message-ID: <050201c4cfef$0b8e6030$5502a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"Miguel Angel" <angeles3d@gmail.com>
References: <6c00cd3104112109004861c374@mail.gmail.com>
Subject: Re: disadvantages
Date: Sun, 21 Nov 2004 12:25:06 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_04FF_01C4CFC5.224746E0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_04FF_01C4CFC5.224746E0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Compared to what?
  ----- Original Message -----=20
  From: Miguel Angel=20
  To: lucene-user@jakarta.apache.org=20
  Sent: Sunday, November 21, 2004 12:00 PM
  Subject: disadvantages


  What are disadvantages the Lucene??=20
  --=20
  Miguel Angel Angeles R.
  Asesoria en Conectividad y Servidores
  Telf. 97451277

  ---------------------------------------------------------------------
  To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  For additional commands, e-mail: lucene-user-help@jakarta.apache.org


------=_NextPart_000_04FF_01C4CFC5.224746E0--


From lucene-user-return-11401-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 21 20:55:09 2004
Return-Path: <lucene-user-return-11401-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40630 invoked from network); 21 Nov 2004 20:55:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 21 Nov 2004 20:55:08 -0000
Received: (qmail 89766 invoked by uid 500); 21 Nov 2004 20:55:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 89530 invoked by uid 500); 21 Nov 2004 20:54:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 89500 invoked by uid 99); 21 Nov 2004 20:54:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 21 Nov 2004 12:54:56 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 77E4C13E2008; Sun, 21 Nov 2004 15:54:31 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 2FBBF13E2005
	for <lucene-user@jakarta.apache.org>; Sun, 21 Nov 2004 15:54:30 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <6c00cd3104112109004861c374@mail.gmail.com>
References: <6c00cd3104112109004861c374@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <343CF8F4-3BFF-11D9-B83C-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: disadvantages
Date: Sun, 21 Nov 2004 15:52:06 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.2 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,RCVD_IN_ORBS,
	      REFERENCES,REPLY_WITH_QUOTES,USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 21, 2004, at 12:00 PM, Miguel Angel wrote:
> What are disadvantages the Lucene??

The users of your system won't have time to get coffee when running 
searches.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11402-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 04:02:38 2004
Return-Path: <lucene-user-return-11402-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41648 invoked from network); 22 Nov 2004 04:02:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 04:02:38 -0000
Received: (qmail 9557 invoked by uid 500); 22 Nov 2004 04:02:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 9530 invoked by uid 500); 22 Nov 2004 04:02:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 9513 invoked by uid 99); 22 Nov 2004 04:02:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=LINES_OF_YELLING,MIME_QP_LONG_LINE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [202.7.15.72] (HELO cato.nettas.net) (202.7.15.72)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 21 Nov 2004 20:02:26 -0800
Received: from cato.nettas.net (localhost [127.0.0.1])
	by localhost.nettas.net (Postfix) with ESMTP id 443C14603
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 15:02:20 +1100 (EST)
Received: from eduisa1.education.tas.gov.au (eduisa1.education.tas.gov.au [147.41.65.11])
	by cato.nettas.net (Postfix) with ESMTP id 1B6333B41
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 15:02:20 +1100 (EST)
Received: by eduisa1.education.tas.gov.au
	with XWall v3.31 ;
	Mon, 22 Nov 2004 15:02:19 +1100
From: "Kauler, Leto S" <leto.kauler@education.tas.gov.au>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Using multiple analysers within a query
Date: Mon, 22 Nov 2004 15:02:18 +1100
X-Assembled-By: XWall v3.31
Message-ID: <AFAC9B2BF1A8BF4886F5C0FDE428E90E06B91656@edumail2.education.tas.gov.au>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Lucene list,

We have the need for analysed and 'not analysed/not tokenised' clauses
within one query.  Imagine an unparsed query like:

+title:"Hello World" +path:Resources\Live\1

In the above example we would want the first clause to use
StandardAnalyser and the second to use an analyser which returns the
term as a single token.  So a parsed result might look like:

+(title:hello title:world) +path:Resources\Live\1

Would anyone have any suggestions on how this could be done?  I was
thinking maybe the QueryParser would have to be changed/extended to
accept a separator other than colon ":", something like "=3D" for example
to indicate this clause is not to be tokenised.  Or perhaps this can all
be done using a single analyser?

Regards (and excuse the disclaimer),
--Leto

CONFIDENTIALITY NOTICE AND DISCLAIMER

Information in this transmission is intended only for the person(s) to whom =
it is addressed and may contain privileged and/or confidential information. =
If you are not the intended recipient, any disclosure, copying or disseminat=
ion of the information is unauthorised and you should delete/destroy all cop=
ies and notify the sender. No liability is accepted for any unauthorised use=
 of the information contained in this transmission.

This disclaimer has been automatically added.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11403-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 04:08:24 2004
Return-Path: <lucene-user-return-11403-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 43368 invoked from network); 22 Nov 2004 04:08:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 04:08:24 -0000
Received: (qmail 15842 invoked by uid 500); 22 Nov 2004 04:08:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15815 invoked by uid 500); 22 Nov 2004 04:08:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15800 invoked by uid 99); 22 Nov 2004 04:08:17 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 21 Nov 2004 20:08:15 -0800
Received: from [192.168.0.4] [217.165.51.153] by mail.bayt.net with ESMTP
  (SMTPD32-8.14) id A815F6B800AE; Sun, 21 Nov 2004 23:16:21 -0500
Message-ID: <41A16627.1060209@bayt.net>
Date: Mon, 22 Nov 2004 08:08:07 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: disadvantages
References: <6c00cd3104112109004861c374@mail.gmail.com>
In-Reply-To: <6c00cd3104112109004861c374@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You may singe your fingers if you touch the keyboard during indexing

Nader

Miguel Angel wrote:

>What are disadvantages the Lucene?? 
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11404-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 05:22:28 2004
Return-Path: <lucene-user-return-11404-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77200 invoked from network); 22 Nov 2004 05:22:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 05:22:27 -0000
Received: (qmail 228 invoked by uid 500); 22 Nov 2004 05:22:22 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 194 invoked by uid 500); 22 Nov 2004 05:22:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 169 invoked by uid 99); 22 Nov 2004 05:22:21 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_20_30,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.184.202] (HELO MSPMAIL4.intranetsolutions.com) (12.40.184.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 21 Nov 2004 21:22:17 -0800
x-mimeole: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4D053.938F6102"
Subject: LIMO 0.5 released
Date: Sun, 21 Nov 2004 23:24:44 -0600
Message-ID: <9822074212EA8E44903E10A7CD2DCB1801C57B9E@MSPMAIL4.intranetsolutions.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: LIMO 0.5 released
Thread-Index: AcTQU5N+ByxeuW0nSXelPg0i9RydmQ==
From: "Luke Francl" <Luke.Francl@stellent.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4D053.938F6102
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I am pleased to announce that version 0.5 of LIMO, the Lucene Index =
Monitor, has been released.

LIMO is a web application that allows you to browse your Lucene indexes =
remotely. It is an ideal companion for Lucene applications that run in a =
servlet container.

The 0.5 release adds some cool new features such as:

* More index summary statistics, including index version number, =
deletion status, number of documents, number of fields, number of =
indexed fields, and number of unindexed fields.
* Querying the index.
* Display expanded wild card and range queries (using Query.rewrite) =
with term count so you can see how many terms a complex query is =
expanded to. This is particularly helpful if you are trying to track =
down an annoying TooManyClauses exception.
* Query timing to show how expensive queries are.
* Estimated query memory consumption (as given by the formula in this =
message: =
http://nagoya.apache.org/eyebrowse/ReadMsg?listName=3Dlucene-user@jakarta=
.apache.org&msgId=3D1757461).
* Query result count.
* Query result explanation.
* Stored field reconstruction as in Luke.
* Highlighting of matching terms in search results and reconstructed =
documents using Mark Harwood's library.

LIMO requires Java 1.4 or later and a servlet container.

Download it from SourceForge: http://sourceforge.net/projects/limo/=20

LIMO is still ready to go out of the box (er, war file). Just edit the =
web.xml to point LIMO to your indexes.

Thanks to Julien Nioche for starting a great and very useful project and =
letting me join it; and to Andrzej Bialecki for Luke from which I =
appropriated several ideas and his GrowableStringArray class. If you are =
interested in getting involved, LIMO is now available in SourceForge =
CVS.

Regards,
Luke Francl

------_=_NextPart_001_01C4D053.938F6102--

From lucene-user-return-11405-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 05:34:39 2004
Return-Path: <lucene-user-return-11405-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 80940 invoked from network); 22 Nov 2004 05:34:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 05:34:39 -0000
Received: (qmail 17013 invoked by uid 500); 22 Nov 2004 05:34:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16733 invoked by uid 500); 22 Nov 2004 05:34:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16719 invoked by uid 99); 22 Nov 2004 05:34:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.184.202] (HELO MSPMAIL4.intranetsolutions.com) (12.40.184.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 21 Nov 2004 21:34:32 -0800
x-mimeole: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----_=_NextPart_001_01C4D055.4A0FAA0E"
Subject: RE: disadvantages
Date: Sun, 21 Nov 2004 23:36:34 -0600
Message-ID: <9822074212EA8E44903E10A7CD2DCB1801C57B9F@MSPMAIL4.intranetsolutions.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: <9822074212EA8E44903E10A7CD2DCB1801C57B9F@MSPMAIL4.intranetsolutions.com>
Thread-Topic: disadvantages
Thread-Index: AcTQDLvUolyYzfT4Qj+4rpE8N1XhfAASH6w2
From: "Luke Francl" <Luke.Francl@stellent.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4D055.4A0FAA0E
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Well that really depends on how big your index is and what they search =
for, now doesn't it? ;)


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Sun 11/21/2004 2:52 PM
To: Lucene Users List
Subject: Re: disadvantages
=20
On Nov 21, 2004, at 12:00 PM, Miguel Angel wrote:
> What are disadvantages the Lucene??

The users of your system won't have time to get coffee when running=20
searches.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



------_=_NextPart_001_01C4D055.4A0FAA0E
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
------_=_NextPart_001_01C4D055.4A0FAA0E--

From lucene-user-return-11406-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 08:29:24 2004
Return-Path: <lucene-user-return-11406-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 79053 invoked from network); 22 Nov 2004 08:29:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 08:29:24 -0000
Received: (qmail 44098 invoked by uid 500); 22 Nov 2004 08:29:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44068 invoked by uid 500); 22 Nov 2004 08:29:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44054 invoked by uid 99); 22 Nov 2004 08:29:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.150.190] (HELO envoy.cybage.com) (203.199.150.190)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 00:29:08 -0800
Received: from chandrasekhard ([192.168.11.236]) by envoy.cybage.com with Microsoft SMTPSVC(6.0.3790.211);
	 Mon, 22 Nov 2004 13:57:17 +0530
Message-ID: <003201c4d06d$13e69df0$ec0ba8c0@cybage.com>
From: "Chandrashekhar" <chandrashekhard@cybage.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Limo 0.5
Date: Mon, 22 Nov 2004 13:57:17 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_002F_01C4D09B.2D8E1110"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 22 Nov 2004 08:27:17.0835 (UTC) FILETIME=[13F989B0:01C4D06D]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_002F_01C4D09B.2D8E1110
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

With Limo 0.5 , can i find out if certain word from some Document is =
indexed or not?

With Regards,
Chandrashekhar V Deshmukh

------=_NextPart_000_002F_01C4D09B.2D8E1110--


From lucene-user-return-11407-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 08:32:25 2004
Return-Path: <lucene-user-return-11407-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 80253 invoked from network); 22 Nov 2004 08:32:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 08:32:25 -0000
Received: (qmail 50259 invoked by uid 500); 22 Nov 2004 08:32:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50225 invoked by uid 500); 22 Nov 2004 08:32:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50205 invoked by uid 99); 22 Nov 2004 08:32:13 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.23] (HELO smtp-vbr3.xs4all.nl) (194.109.24.23)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 00:32:12 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr3.xs4all.nl (8.12.11/8.12.11) with ESMTP id iAM7uZ4t062051
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 08:56:35 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Using multiple analysers within a query
Date: Mon, 22 Nov 2004 08:56:35 +0100
User-Agent: KMail/1.5.4
References: <AFAC9B2BF1A8BF4886F5C0FDE428E90E06B91656@edumail2.education.tas.gov.au>
In-Reply-To: <AFAC9B2BF1A8BF4886F5C0FDE428E90E06B91656@edumail2.education.tas.gov.au>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411220856.35255.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Monday 22 November 2004 05:02, Kauler, Leto S wrote:
> Hi Lucene list,
> 
> We have the need for analysed and 'not analysed/not tokenised' clauses
> within one query.  Imagine an unparsed query like:
> 
> +title:"Hello World" +path:Resources\Live\1
> 
> In the above example we would want the first clause to use
> StandardAnalyser and the second to use an analyser which returns the
> term as a single token.  So a parsed result might look like:
> 
> +(title:hello title:world) +path:Resources\Live\1
> 
> Would anyone have any suggestions on how this could be done?  I was
> thinking maybe the QueryParser would have to be changed/extended to
> accept a separator other than colon ":", something like "=" for example
> to indicate this clause is not to be tokenised.  Or perhaps this can all
> be done using a single analyser?

Overriding QueryParser.getFieldQuery() might work for you.
It is given the field and the query text so an analyzer can be chosen
depending on the field.
In case you don't use the latest cvs head, it may be worthwhile to
have a look. Some of the getFieldQuery methods have been
deprecated, but I don't know when.

Regards,
Paul.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11408-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 08:39:47 2004
Return-Path: <lucene-user-return-11408-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83529 invoked from network); 22 Nov 2004 08:39:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 08:39:47 -0000
Received: (qmail 63026 invoked by uid 500); 22 Nov 2004 08:39:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62990 invoked by uid 500); 22 Nov 2004 08:39:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62959 invoked by uid 99); 22 Nov 2004 08:39:38 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 00:39:35 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 543C023BC6
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 09:13:25 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 15060-07 for <lucene-user@jakarta.apache.org>;
 Mon, 22 Nov 2004 09:13:25 +0100 (CET)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 445D423CC4
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 08:57:53 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id iAM7uwmA025497
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 08:56:58 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id iAM7uwWI025493;
	Mon, 22 Nov 2004 08:56:58 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16801.39882.237616.76696@tanto-xipolis.de>
Date: Mon, 22 Nov 2004 08:56:58 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Using multiple analysers within a query
In-Reply-To: <AFAC9B2BF1A8BF4886F5C0FDE428E90E06B91656@edumail2.education.tas.gov.au>
References: <AFAC9B2BF1A8BF4886F5C0FDE428E90E06B91656@edumail2.education.tas.gov.au>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Kauler, Leto S writes:
> 
> Would anyone have any suggestions on how this could be done?  I was
> thinking maybe the QueryParser would have to be changed/extended to
> accept a separator other than colon ":", something like "=" for example
> to indicate this clause is not to be tokenised.  

I suggested that in a recent discussion and Erik Hatcher objected that
it isn't a good idea, to require that users know which field to query
in which way. I guess he is right.
If your query isn't entered by users, you shouldn't use query parser in
most cases anyway.

> Or perhaps this can all
> be done using a single analyser?
> 
Look at PerFieldAnalyzerWrapper. 
You will probably have to write a keyword analyzer (unless you can use
whitespace analyzer in your case).

HTH
	Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11409-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 08:55:47 2004
Return-Path: <lucene-user-return-11409-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90413 invoked from network); 22 Nov 2004 08:55:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 08:55:47 -0000
Received: (qmail 90196 invoked by uid 500); 22 Nov 2004 08:55:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90044 invoked by uid 500); 22 Nov 2004 08:55:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90030 invoked by uid 99); 22 Nov 2004 08:55:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 00:55:34 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9938513E200B; Mon, 22 Nov 2004 03:55:30 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 2057013E200A
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 03:55:28 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <9822074212EA8E44903E10A7CD2DCB1801C57B9F@MSPMAIL4.intranetsolutions.com>
References: <9822074212EA8E44903E10A7CD2DCB1801C57B9F@MSPMAIL4.intranetsolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <3CF06320-3C64-11D9-8557-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: disadvantages
Date: Mon, 22 Nov 2004 03:55:20 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Status: No, hits=-6.4 required=5.0
	tests=AWL,BAYES_01,EMAIL_ATTRIBUTION,IN_REP_TO,QUOTED_EMAIL_TEXT,
	      RCVD_IN_ORBS,REFERENCES,REPLY_WITH_QUOTES,
	      USER_AGENT_APPLEMAIL
	version=2.55
X-Spam-Level: 
X-Spam-Checker-Version: SpamAssassin 2.55 (1.174.2.19-2003-05-19-exp)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 22, 2004, at 12:36 AM, Luke Francl wrote:
> Well that really depends on how big your index is and what they search 
> for, now doesn't it? ;)

Everything is relative.




>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Sun 11/21/2004 2:52 PM
> To: Lucene Users List
> Subject: Re: disadvantages
>
> On Nov 21, 2004, at 12:00 PM, Miguel Angel wrote:
>> What are disadvantages the Lucene??
>
> The users of your system won't have time to get coffee when running
> searches.
>
> 	Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11410-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 13:53:06 2004
Return-Path: <lucene-user-return-11410-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 93158 invoked from network); 22 Nov 2004 13:53:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 13:53:06 -0000
Received: (qmail 62938 invoked by uid 500); 22 Nov 2004 13:52:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62913 invoked by uid 500); 22 Nov 2004 13:52:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62893 invoked by uid 99); 22 Nov 2004 13:52:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.2.182] (HELO fork12.mail.virginia.edu) (128.143.2.182)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 05:52:55 -0800
Received: from localhost (localhost [127.0.0.1])
	by fork12.mail.virginia.edu (Postfix) with ESMTP id 576DD1F52E1
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 08:20:43 -0500 (EST)
Received: from fork12.mail.virginia.edu ([127.0.0.1])
 by localhost (fork12.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 30256-04 for <lucene-user@jakarta.apache.org>;
 Mon, 22 Nov 2004 08:20:43 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by fork12.mail.virginia.edu (Postfix) with ESMTP id 1DB0F1F5208
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 08:20:43 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <16801.39882.237616.76696@tanto-xipolis.de>
References: <AFAC9B2BF1A8BF4886F5C0FDE428E90E06B91656@edumail2.education.tas.gov.au> <16801.39882.237616.76696@tanto-xipolis.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <52343E07-3C89-11D9-A770-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Using multiple analysers within a query
Date: Mon, 22 Nov 2004 08:20:47 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-UVA-Virus-Scanned: by amavisd-new at fork12.mail.virginia.edu
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 22, 2004, at 2:56 AM, Morus Walter wrote:
> Kauler, Leto S writes:
>>
>> Would anyone have any suggestions on how this could be done?  I was
>> thinking maybe the QueryParser would have to be changed/extended to
>> accept a separator other than colon ":", something like "=" for 
>> example
>> to indicate this clause is not to be tokenised.
>
> I suggested that in a recent discussion and Erik Hatcher objected that
> it isn't a good idea, to require that users know which field to query
> in which way. I guess he is right.

QueryParser is a one-size fits (?) all sort of beast.  It has plenty of 
negatives, no question.

> If your query isn't entered by users, you shouldn't use query parser in
> most cases anyway.

I'd go even further and say in all cases.

>> Or perhaps this can all
>> be done using a single analyser?
>>
> Look at PerFieldAnalyzerWrapper.
> You will probably have to write a keyword analyzer (unless you can use
> whitespace analyzer in your case).

We should probably add a KeywordAnalyzer to Lucene's core at some point.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11411-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 14:17:26 2004
Return-Path: <lucene-user-return-11411-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21013 invoked from network); 22 Nov 2004 14:17:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 14:17:26 -0000
Received: (qmail 20414 invoked by uid 500); 22 Nov 2004 14:17:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 20194 invoked by uid 500); 22 Nov 2004 14:17:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 20174 invoked by uid 99); 22 Nov 2004 14:17:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 06:17:16 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 8F4E623BCB
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 15:17:11 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 08862-03 for <lucene-user@jakarta.apache.org>;
 Mon, 22 Nov 2004 15:17:11 +0100 (CET)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 7223223BC5
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 15:17:11 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id iAMEHAmA029647
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 15:17:10 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id iAMEHADF029643;
	Mon, 22 Nov 2004 15:17:10 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16801.62694.766132.157019@tanto-xipolis.de>
Date: Mon, 22 Nov 2004 15:17:10 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Using multiple analysers within a query
In-Reply-To: <52343E07-3C89-11D9-A770-000A95BC61B6@ehatchersolutions.com>
References: <AFAC9B2BF1A8BF4886F5C0FDE428E90E06B91656@edumail2.education.tas.gov.au>
	<16801.39882.237616.76696@tanto-xipolis.de>
	<52343E07-3C89-11D9-A770-000A95BC61B6@ehatchersolutions.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher writes:

> > If your query isn't entered by users, you shouldn't use query parser in
> > most cases anyway.
> 
> I'd go even further and say in all cases.
> 
If you use lucene as a search server you have to provide the query somehow.
E.g. we have an php application, that sends queries to a lucene search
servlet.
In this case it's justifiable to serialize the query into query parser
syntax on the client side and have query parser read the query again on
the server side.
I don't recall any problems with the aproach since we clean up the user
before constructing the query.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11412-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 14:19:10 2004
Return-Path: <lucene-user-return-11412-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21905 invoked from network); 22 Nov 2004 14:19:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 14:19:09 -0000
Received: (qmail 23214 invoked by uid 500); 22 Nov 2004 14:19:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23191 invoked by uid 500); 22 Nov 2004 14:19:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23177 invoked by uid 99); 22 Nov 2004 14:19:01 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [81.80.239.198] (HELO outbound1.sopragroup.com) (81.80.239.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 06:18:59 -0800
Received: by outbound1.sopragroup.com (8.12.10/8.12.10/outbound-A02) with ESMTP id iAMEIlL3022343
          for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 15:18:51 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4D09E.3064D7FE"
Subject: Question about multi-searching [re-post]
Date: Mon, 22 Nov 2004 15:18:50 +0100
Message-ID: <5933531F07A5144E9E53E1AA45257E4B012B94B4@wexchbe03.ancy.fr.sopra>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Question about multi-searching
Thread-Index: AcTBsgQPU769j9WtQfig++sohhwEHgO7Ah6w
From: "Cocula Remi" <rcocula@sopragroup.com>
To: "lucene-user" <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 22 Nov 2004 14:20:50.0843 (UTC) FILETIME=[77E9AEB0:01C4D09E]
X-Scanned-By: MIMEDefang 2.38
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4D09E.3064D7FE
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable




> Hi,
>=20
> (First of all : what is the plurial of index in english ; indexes or =
indices ?)
>=20
>=20
> I want to search into several indexes (indices ?).
> For that, I parse a new query using QueryParser or =
MultiFieldQueryParser.
> Then I search my indexes using the MultiSearcher class.
>=20
> Ok, but the problem comes when different analyzer are used for each =
index.
> QueryParser requires an analyzer to parse the query but a query parsed =
with an analyzer is not suitable for searching into an index that uses =
another analyzer.=20
>=20
> Does anyone know a trick to cope this problem.
>=20
> Eventually I could run a different query on each index to obtain =
several Hits objects.=20
> Then I could write some collector that collects Hits in the order of =
highest scores.
> I wonder if this could work and if it would be as efficient as the =
MultiSearcher . In this situation does it make sense to compare  the =
scores of two differents Hits.

------_=_NextPart_001_01C4D09E.3064D7FE--

From lucene-user-return-11413-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 14:39:46 2004
Return-Path: <lucene-user-return-11413-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 42467 invoked from network); 22 Nov 2004 14:39:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 14:39:46 -0000
Received: (qmail 70511 invoked by uid 500); 22 Nov 2004 14:38:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 70383 invoked by uid 500); 22 Nov 2004 14:38:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 70313 invoked by uid 99); 22 Nov 2004 14:38:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 06:38:53 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Mon, 22 Nov 2004 09:39:05 -0500
Message-ID: <00bb01c4d0a1$03f97a50$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"Miguel Angel" <angeles3d@gmail.com>
References: <6c00cd310411200825547662f@mail.gmail.com>
Subject: Re: How much time indexing doc ??
Date: Mon, 22 Nov 2004 09:39:04 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 22 Nov 2004 14:39:05.0072 (UTC) FILETIME=[041FC700:01C4D0A1]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

PDF(s) can definitely slow things down, depending on their size.

If there are a few larger PDF documents that time is definitely possible.

Luke

----- Original Message ----- 
From: "Miguel Angel" <angeles3d@gmail.com>
To: <lucene-user@jakarta.apache.org>
Sent: Saturday, November 20, 2004 11:25 AM
Subject: How much time indexing doc ??


> Hi, i have 1000 doc (Word, PDF and HTML)   , those documents indexed
> in 5 min.  Is this correct?? or i have problem with my Analyzer, i
> used StandartAnalyzer
> -- 
> Miguel Angel Angeles R.
> Asesoria en Conectividad y Servidores
> Telf. 97451277
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11414-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 14:43:46 2004
Return-Path: <lucene-user-return-11414-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45034 invoked from network); 22 Nov 2004 14:43:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 14:43:45 -0000
Received: (qmail 84407 invoked by uid 500); 22 Nov 2004 14:42:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84357 invoked by uid 500); 22 Nov 2004 14:42:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84196 invoked by uid 99); 22 Nov 2004 14:42:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.220.52.87] (HELO mail.hypermedia.com) (216.220.52.87)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 06:42:37 -0800
Received: from p001002 ([204.225.84.27]) by mail.hypermedia.com with Microsoft SMTPSVC(5.0.2195.5329);
	 Mon, 22 Nov 2004 09:42:53 -0500
Message-ID: <00c201c4d0a1$8bf52f30$7703d00a@hypermedia.com>
From: "Luke Shannon" <lshannon@hypermedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"Miguel Angel" <angeles3d@gmail.com>
References: <6c00cd31041120141970f02728@mail.gmail.com>
Subject: Re: Optimized??
Date: Mon, 22 Nov 2004 09:42:52 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 8bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-OriginalArrivalTime: 22 Nov 2004 14:42:53.0168 (UTC) FILETIME=[8C147700:01C4D0A1]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

As I understand it optimization is when you merge several segments into one
allowing for faster queries.

The FAQs and API have further details.

http://lucene.sourceforge.net/cgi-bin/faq/faqmanager.cgi?file=chapter.indexing&toc=faq#q24

Luke

----- Original Message ----- 
From: "Miguel Angel" <angeles3d@gmail.com>
To: <lucene-user@jakarta.apache.org>
Sent: Saturday, November 20, 2004 5:19 PM
Subject: Optimized??


What`s mean Optimized index in Lucene?
-- 
Miguel Angel Angeles R.
Asesoria en Conectividad y Servidores
Telf. 97451277

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11415-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 15:00:41 2004
Return-Path: <lucene-user-return-11415-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59949 invoked from network); 22 Nov 2004 15:00:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 15:00:41 -0000
Received: (qmail 54856 invoked by uid 500); 22 Nov 2004 15:00:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 54775 invoked by uid 500); 22 Nov 2004 15:00:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 54726 invoked by uid 99); 22 Nov 2004 15:00:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.2.192] (HELO fork2.mail.virginia.edu) (128.143.2.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 07:00:03 -0800
Received: from localhost (localhost [127.0.0.1])
	by fork2.mail.virginia.edu (Postfix) with ESMTP id 2B1711C8A6
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 09:29:58 -0500 (EST)
Received: from fork2.mail.virginia.edu ([127.0.0.1])
 by localhost (fork2.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 06411-03 for <lucene-user@jakarta.apache.org>;
 Mon, 22 Nov 2004 09:29:57 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by fork2.mail.virginia.edu (Postfix) with ESMTP id D893D1C897
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 09:29:57 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <5933531F07A5144E9E53E1AA45257E4B012B94B4@wexchbe03.ancy.fr.sopra>
References: <5933531F07A5144E9E53E1AA45257E4B012B94B4@wexchbe03.ancy.fr.sopra>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <FBEF390C-3C92-11D9-A770-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Question about multi-searching [re-post]
Date: Mon, 22 Nov 2004 09:29:57 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-UVA-Virus-Scanned: by amavisd-new at fork2.mail.virginia.edu
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Nov 22, 2004, at 9:18 AM, Cocula Remi wrote:
>> (First of all : what is the plurial of index in english ; indexes or 
>> indices ?)

We used "indexes" in Lucene in Action.  Its a bit ambiguous in English, 
but indexes sounds less formal and is acceptable.

>> For that, I parse a new query using QueryParser or 
>> MultiFieldQueryParser.
>> Then I search my indexes using the MultiSearcher class.
>>
>> Ok, but the problem comes when different analyzer are used for each 
>> index.
>> QueryParser requires an analyzer to parse the query but a query 
>> parsed with an analyzer is not suitable for searching into an index 
>> that uses another analyzer.
>>
>> Does anyone know a trick to cope this problem.

Nothing built into Lucene solves this problem specifically.  You'll 
have to come up with your own MultiSearcher-like facility that can 
apply different queries to different indexes and merge the results back 
together.  This will be awkward when it comes to scoring though, since 
each index is using a different query.

>> Eventually I could run a different query on each index to obtain 
>> several Hits objects.
>> Then I could write some collector that collects Hits in the order of 
>> highest scores.
>> I wonder if this could work and if it would be as efficient as the 
>> MultiSearcher . In this situation does it make sense to compare  the 
>> scores of two differents Hits.

No, it won't make good sense to compare the scores between the queries, 
but I suspect our queries are pretty close to one another if all that 
varies is the analyzer.  It still will be an awkward comparison though, 
but maybe good enough for your needs?

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11416-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 15:06:11 2004
Return-Path: <lucene-user-return-11416-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64046 invoked from network); 22 Nov 2004 15:06:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 15:06:11 -0000
Received: (qmail 68311 invoked by uid 500); 22 Nov 2004 15:04:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 68057 invoked by uid 500); 22 Nov 2004 15:04:38 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67984 invoked by uid 99); 22 Nov 2004 15:04:37 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [202.144.61.68] (HELO delmail1.sapient.com) (202.144.61.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 07:04:34 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4D0A4.3A318115"
Subject: Too many open files issue
Date: Mon, 22 Nov 2004 20:32:04 +0530
Message-ID: <88B56FBAEB84EC448511C30CD63D3F8A0279F553@delmail1.sapient.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Too many open files issue
Thread-Index: AcTQpDo05tfwW/OERN6YJcVIIZPlAQ==
From: "Neelam Bhatnagar" <nbhatnagar@sapient.com>
To: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
Cc: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4D0A4.3A318115
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
I had requested help on an issue we have been facing with the "Too many
open files" Exception garbling the search indexes and crashing the
search on the web site.=20
As a suggestion, you had asked us to look at the articles on O'Reilly
Network which had specific context around this exact problem.=20
One of the suggestions was to increase the limit on the number of file
descriptors on the file system. We tried it by first lowering the limit
to 200 from 256 in order to reproduce the exception. The exception did
get reproduced but even after increasing the limit to 500, the exception
kept coming until after several rounds of trying to rebuild the index,
we finally got to get it working for the default file descriptor limit
of 256.  This makes us wonder if your first suggestion of optimizing
indexes is a pre-requisite to trying this option.=20
=20
Another piece of relevant information is that we have the default merge
factor of 10.
=20
Kindly give us pointers to what it that we are doing wrong or should we
be trying something completely different.
=20
Thanks and regards
Neelam Bhatnagar
=20

------_=_NextPart_001_01C4D0A4.3A318115--

From lucene-user-return-11417-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 15:18:02 2004
Return-Path: <lucene-user-return-11417-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 73873 invoked from network); 22 Nov 2004 15:18:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 15:18:02 -0000
Received: (qmail 18352 invoked by uid 500); 22 Nov 2004 15:16:36 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18292 invoked by uid 500); 22 Nov 2004 15:16:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18233 invoked by uid 99); 22 Nov 2004 15:16:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.2.177] (HELO fork7.mail.virginia.edu) (128.143.2.177)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 07:16:29 -0800
Received: from localhost (localhost [127.0.0.1])
	by fork7.mail.virginia.edu (Postfix) with ESMTP id B7C5E1F5485
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 09:25:20 -0500 (EST)
Received: from fork7.mail.virginia.edu ([127.0.0.1])
 by localhost (fork7.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 01312-02 for <lucene-user@jakarta.apache.org>;
 Mon, 22 Nov 2004 09:25:20 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by fork7.mail.virginia.edu (Postfix) with ESMTP id 74B821F51BA
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 09:25:20 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <16801.62694.766132.157019@tanto-xipolis.de>
References: <AFAC9B2BF1A8BF4886F5C0FDE428E90E06B91656@edumail2.education.tas.gov.au> <16801.39882.237616.76696@tanto-xipolis.de> <52343E07-3C89-11D9-A770-000A95BC61B6@ehatchersolutions.com> <16801.62694.766132.157019@tanto-xipolis.de>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <567EEC9E-3C92-11D9-A770-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Using multiple analysers within a query
Date: Mon, 22 Nov 2004 09:25:19 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-UVA-Virus-Scanned: by amavisd-new at fork7.mail.virginia.edu
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 22, 2004, at 9:17 AM, Morus Walter wrote:
> Erik Hatcher writes:
>
>>> If your query isn't entered by users, you shouldn't use query parser 
>>> in
>>> most cases anyway.
>>
>> I'd go even further and say in all cases.
>>
> If you use lucene as a search server you have to provide the query 
> somehow.
> E.g. we have an php application, that sends queries to a lucene search
> servlet.
> In this case it's justifiable to serialize the query into query parser
> syntax on the client side and have query parser read the query again on
> the server side.

Ah, good point!  I hadn't considered this scenario.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11418-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 15:32:49 2004
Return-Path: <lucene-user-return-11418-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84553 invoked from network); 22 Nov 2004 15:32:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 15:32:49 -0000
Received: (qmail 73747 invoked by uid 500); 22 Nov 2004 15:32:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 73677 invoked by uid 500); 22 Nov 2004 15:32:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73654 invoked by uid 99); 22 Nov 2004 15:32:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 07:32:15 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iAMFW9J05000
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 09:32:09 -0600 (CST)
Subject: Re: Limo 0.5
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <003201c4d06d$13e69df0$ec0ba8c0@cybage.com>
References: <003201c4d06d$13e69df0$ec0ba8c0@cybage.com>
Content-Type: text/plain
Message-Id: <1101137520.23477.1.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Mon, 22 Nov 2004 09:32:00 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Mon, 2004-11-22 at 02:27, Chandrashekhar wrote:
> Hi,
> 
> With Limo 0.5 , can i find out if certain word from some Document is indexed or not?

This feature doesn't exist as such.

You could search for it and if results come up, then the word is in the
documents it returns.

I'll add enumerating the terms in an index to my list of things to add.

Regards,
Luke Francl


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11419-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 15:56:09 2004
Return-Path: <lucene-user-return-11419-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 809 invoked from network); 22 Nov 2004 15:56:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 15:56:09 -0000
Received: (qmail 39426 invoked by uid 500); 22 Nov 2004 15:55:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39395 invoked by uid 500); 22 Nov 2004 15:55:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39377 invoked by uid 99); 22 Nov 2004 15:55:55 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 07:55:52 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Question about multi-searching [re-post]
Date: Mon, 22 Nov 2004 07:54:47 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C02984F7E@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Question about multi-searching [re-post]
Thread-Index: AcTQpAdE5UlvqhcTTbWJoTAT7sjHaQAB2n3w
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If you are going to compare scores across multiple indices, I'd suggest
considering one of the patches here:

http://issues.apache.org/bugzilla/show_bug.cgi?id=3D31841

Chuck

  > -----Original Message-----
  > From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
  > Sent: Monday, November 22, 2004 6:30 AM
  > To: Lucene Users List
  > Subject: Re: Question about multi-searching [re-post]
  >=20
  >=20
  > On Nov 22, 2004, at 9:18 AM, Cocula Remi wrote:
  > >> (First of all : what is the plurial of index in english ; indexes
or
  > >> indices ?)
  >=20
  > We used "indexes" in Lucene in Action.  Its a bit ambiguous in
English,
  > but indexes sounds less formal and is acceptable.
  >=20
  > >> For that, I parse a new query using QueryParser or
  > >> MultiFieldQueryParser.
  > >> Then I search my indexes using the MultiSearcher class.
  > >>
  > >> Ok, but the problem comes when different analyzer are used for
each
  > >> index.
  > >> QueryParser requires an analyzer to parse the query but a query
  > >> parsed with an analyzer is not suitable for searching into an
index
  > >> that uses another analyzer.
  > >>
  > >> Does anyone know a trick to cope this problem.
  >=20
  > Nothing built into Lucene solves this problem specifically.  You'll
  > have to come up with your own MultiSearcher-like facility that can
  > apply different queries to different indexes and merge the results
back
  > together.  This will be awkward when it comes to scoring though,
since
  > each index is using a different query.
  >=20
  > >> Eventually I could run a different query on each index to obtain
  > >> several Hits objects.
  > >> Then I could write some collector that collects Hits in the order
of
  > >> highest scores.
  > >> I wonder if this could work and if it would be as efficient as
the
  > >> MultiSearcher . In this situation does it make sense to compare
the
  > >> scores of two differents Hits.
  >=20
  > No, it won't make good sense to compare the scores between the
queries,
  > but I suspect our queries are pretty close to one another if all
that
  > varies is the analyzer.  It still will be an awkward comparison
though,
  > but maybe good enough for your needs?
  >=20
  > 	Erik
  >=20
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11420-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 17:14:53 2004
Return-Path: <lucene-user-return-11420-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64498 invoked from network); 22 Nov 2004 17:14:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 17:14:52 -0000
Received: (qmail 96378 invoked by uid 500); 22 Nov 2004 17:13:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96305 invoked by uid 500); 22 Nov 2004 17:13:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96274 invoked by uid 99); 22 Nov 2004 17:13:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [195.245.231.99] (HELO mail84.messagelabs.com) (195.245.231.99)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 22 Nov 2004 09:13:52 -0800
X-VirusChecked: Checked
X-Env-Sender: iouli.golovatyi@group.novartis.com
X-Msg-Ref: server-13.tower-84.messagelabs.com!1101143622!534931
X-StarScan-Version: 5.2.11; banners=-,-,-
X-Originating-IP: [160.62.1.169]
Received: (qmail 29428 invoked from network); 22 Nov 2004 17:13:42 -0000
Received: from fw-mail12.novartis.com (160.62.1.169)
  by server-13.tower-84.messagelabs.com with DES-CBC3-SHA encrypted SMTP; 22 Nov 2004 17:13:42 -0000
Received: from mtap1.is.chbs ([192.37.33.20])
	by fw-mail12.novartis.com (Switch-3.1.6/Switch-3.1.6) with ESMTP id iAMHDgIb15712466
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 18:13:42 +0100
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap1.is.chbs (Switch-3.1.6/Switch-3.1.6) with ESMTP id iAMHDfVp14885082
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 18:13:41 +0100
Subject: Index in RAM - is it realy worthy?
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Message-ID: <OF4C421F05.3ECB1184-ONC1256F54.005D3F1B-C1256F54.005EA284@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Mon, 22 Nov 2004 18:13:39 +0100
MIME-Version: 1.0
Content-type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


I did following test:
I created  the RAM folder on my Red Hat box and copied   c. 1Gb of indexes
there.
I expected the queries to run much quicker.
In reality it was even sometimes slower(sic!)

Lucene has it's own RAM disk functionality. If I implement it, would it
bring any benefits?

Thanks in advance
J.



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11421-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 17:23:56 2004
Return-Path: <lucene-user-return-11421-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 70405 invoked from network); 22 Nov 2004 17:23:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 17:23:56 -0000
Received: (qmail 32683 invoked by uid 500); 22 Nov 2004 17:23:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 32657 invoked by uid 500); 22 Nov 2004 17:23:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 32644 invoked by uid 99); 22 Nov 2004 17:23:47 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [216.136.173.241] (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 22 Nov 2004 09:23:44 -0800
Received: (qmail 25794 invoked by uid 60001); 22 Nov 2004 17:23:40 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=nRvvd8OZBiv5vxlApK3sRUumKddj4esZi3DvXKQ8TpUGnhWb1jpa4hGXVEXuDsdo7qeFCaFW6KH7s7tP5+8QVZJzhLuSZI5he7ZNgVuQTgiVx34pMti7Q3ibyW26j4TQsVo4qmZxwVEu8AffaysDPbrfJTZIxVRZqAxPXu4B1Lg=  ;
Message-ID: <20041122172340.25792.qmail@web12704.mail.yahoo.com>
Received: from [216.194.17.194] by web12704.mail.yahoo.com via HTTP; Mon, 22 Nov 2004 09:23:40 PST
Date: Mon, 22 Nov 2004 09:23:40 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index in RAM - is it realy worthy?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <OF4C421F05.3ECB1184-ONC1256F54.005D3F1B-C1256F54.005EA284@EU.novartis.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

For the Lucene book I wrote some test cases that compare FSDirectory
and RAMDirectory.  What I found was that with certain settings
FSDirectory was almost as fast as RAMDirectory.  Personally, I would
push FSDirectory and hope that the OS and the Filesystem do their share
of work and caching for me before looking for ways to optimize my code.

Otis

--- iouli.golovatyi@group.novartis.com wrote:

> 
> I did following test:
> I created  the RAM folder on my Red Hat box and copied   c. 1Gb of
> indexes
> there.
> I expected the queries to run much quicker.
> In reality it was even sometimes slower(sic!)
> 
> Lucene has it's own RAM disk functionality. If I implement it, would
> it
> bring any benefits?
> 
> Thanks in advance
> J.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11422-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 18:41:20 2004
Return-Path: <lucene-user-return-11422-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 19245 invoked from network); 22 Nov 2004 18:41:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 18:41:20 -0000
Received: (qmail 55707 invoked by uid 500); 22 Nov 2004 18:41:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 55564 invoked by uid 500); 22 Nov 2004 18:41:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 55540 invoked by uid 99); 22 Nov 2004 18:41:05 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.190.39.192] (HELO web53002.mail.yahoo.com) (206.190.39.192)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 22 Nov 2004 10:41:02 -0800
Received: (qmail 62005 invoked by uid 60001); 22 Nov 2004 18:34:17 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=iJfpiIvkVSYFugx3Krn9xyYXfWQUBTmJHLrkDVh3pvY6/MmcmdW7SS/t5WYEnYmXoa+Wh5splYKV8528ySTezExevDpLNHDvvcEgm2UzHrKgIFypFXe4nBUA/zqLL3jN8zbL2kR51FYKzrFe/++6/8R0efTTPKX8oWrYWvnEf6o=  ;
Message-ID: <20041122183417.62000.qmail@web53002.mail.yahoo.com>
Received: from [216.231.10.162] by web53002.mail.yahoo.com via HTTP; Mon, 22 Nov 2004 10:34:17 PST
Date: Mon, 22 Nov 2004 10:34:17 -0800 (PST)
From: Edwin Tang <emttang@yahoo.com>
Subject: Re: Need help with filtering
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <200411170919.42136.paul.elschot@xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello again,

I've modified DateFilter to filter out document IDs as suggested. All seems to
be running well until I tried a specific test case. All my documents have IDs
in the 400,000 range. If I set my lower limit to 5, nothing comes back. After
examining the code, I found the issue to be at the following line:
TermEnum enumerator = reader.terms(new Term(field, start));

Is there a way to retrieve a set of documents with IDs using a Integer
comparison versus a String comparison? If I set "start" to 0, I get everything,
but that's not very efficient.

Thanks in advance,
Ed

--- Paul Elschot <paul.elschot@xs4all.nl> wrote:

> On Wednesday 17 November 2004 01:20, Edwin Tang wrote:
> > Hello,
> > 
> > I have been using DateFilter to limit my search results to a certain date
> > range. I am now asked to replace this filter with one where my search 
> results
> > have document IDs greater than a given document ID. This document ID is
> > assigned during indexing and is a Keyword field.
> > 
> > I've browsed around the FAQs and archives and see that I can either use
> > QueryFilter or BooleanQuery. I've tried both approaches to limit the 
> document
> > ID range, but am getting the BooleanQuery.TooManyClauses exception in both
> > cases. I've also tried bumping max number of clauses via 
> setMaxClauseCount(),
> > but that number has gotten pretty big.
> > 
> > Is there another approach to this? ...
> 
> Recoding DateFilter to a DocumentIdFilter should be straightforward.
> 
> The trick is to use only one document enumerator at a time for all
> terms. Document enumerators take buffer space, and that is the
> reason why BooleanQuery has an exception for too many clauses.
> 
> Regards,
> Paul
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11423-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 18:51:04 2004
Return-Path: <lucene-user-return-11423-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 23885 invoked from network); 22 Nov 2004 18:51:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 18:51:04 -0000
Received: (qmail 77310 invoked by uid 500); 22 Nov 2004 18:50:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77249 invoked by uid 500); 22 Nov 2004 18:50:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77215 invoked by uid 99); 22 Nov 2004 18:50:51 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 10:50:49 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Need help with filtering
Date: Mon, 22 Nov 2004 10:49:45 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C02A44C2E@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Need help with filtering
Thread-Index: AcTQwtzZ33+hI2b8Q4SumxTxOKG2WAAAP+JA
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It sounds like you need to pad your numbers with leading zeroes, i.e.
use the same type of encoding as is required by RangeQuery's.  If you
query with 000005 instead of 5 do you get what you expect?  If all your
document id's are fixed length, then string comparison will be
isomorphic to integer comparison.

Chuck

  > -----Original Message-----
  > From: Edwin Tang [mailto:emttang@yahoo.com]
  > Sent: Monday, November 22, 2004 10:34 AM
  > To: Lucene Users List
  > Subject: Re: Need help with filtering
  >=20
  > Hello again,
  >=20
  > I've modified DateFilter to filter out document IDs as suggested.
All
  > seems to
  > be running well until I tried a specific test case. All my documents
  > have IDs
  > in the 400,000 range. If I set my lower limit to 5, nothing comes
back.
  > After
  > examining the code, I found the issue to be at the following line:
  > TermEnum enumerator =3D reader.terms(new Term(field, start));
  >=20
  > Is there a way to retrieve a set of documents with IDs using a
Integer
  > comparison versus a String comparison? If I set "start" to 0, I get
  > everything,
  > but that's not very efficient.
  >=20
  > Thanks in advance,
  > Ed
  >=20
  > --- Paul Elschot <paul.elschot@xs4all.nl> wrote:
  >=20
  > > On Wednesday 17 November 2004 01:20, Edwin Tang wrote:
  > > > Hello,
  > > >
  > > > I have been using DateFilter to limit my search results to a
certain
  > date
  > > > range. I am now asked to replace this filter with one where my
  > search
  > > results
  > > > have document IDs greater than a given document ID. This
document ID
  > is
  > > > assigned during indexing and is a Keyword field.
  > > >
  > > > I've browsed around the FAQs and archives and see that I can
either
  > use
  > > > QueryFilter or BooleanQuery. I've tried both approaches to limit
the
  > > document
  > > > ID range, but am getting the BooleanQuery.TooManyClauses
exception
  > in both
  > > > cases. I've also tried bumping max number of clauses via
  > > setMaxClauseCount(),
  > > > but that number has gotten pretty big.
  > > >
  > > > Is there another approach to this? ...
  > >
  > > Recoding DateFilter to a DocumentIdFilter should be
straightforward.
  > >
  > > The trick is to use only one document enumerator at a time for all
  > > terms. Document enumerators take buffer space, and that is the
  > > reason why BooleanQuery has an exception for too many clauses.
  > >
  > > Regards,
  > > Paul
  > >
  > >
  > >
---------------------------------------------------------------------
  > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > > For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
  > >
  > >
  >=20
  >=20
  > __________________________________________________
  > Do You Yahoo!?
  > Tired of spam?  Yahoo! Mail has the best spam protection around
  > http://mail.yahoo.com
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11424-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 19:01:00 2004
Return-Path: <lucene-user-return-11424-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 35267 invoked from network); 22 Nov 2004 19:01:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 19:01:00 -0000
Received: (qmail 1463 invoked by uid 500); 22 Nov 2004 19:00:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1413 invoked by uid 500); 22 Nov 2004 19:00:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1357 invoked by uid 99); 22 Nov 2004 19:00:28 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO main.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 11:00:26 -0800
Received: from root by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1CWJQE-0007Dl-00
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 20:00:22 +0100
Received: from dhcp-171-71-47-145.cisco.com ([171.71.47.145])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 20:00:22 +0100
Received: from aurora00 by dhcp-171-71-47-145.cisco.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 20:00:22 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: aurora <aurora00@gmail.com>
Subject: auto-generate uid?
Date: Mon, 22 Nov 2004 10:50:18 -0800
Lines: 6
Message-ID: <opshvql4ck6yt6e7@dhcp-171-71-47-145.cisco.com>
Mime-Version: 1.0
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
Content-Transfer-Encoding: Quoted-Printable
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: dhcp-171-71-47-145.cisco.com
User-Agent: Opera M2/7.54 (Win32, build 3869)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Is there a way to auto-generate uid in Lucene? Even it is just a way to =
 =

query the highest uid and let the application add one to it will do.

Thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11425-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 19:27:13 2004
Return-Path: <lucene-user-return-11425-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50088 invoked from network); 22 Nov 2004 19:27:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 19:27:13 -0000
Received: (qmail 67317 invoked by uid 500); 22 Nov 2004 19:27:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67294 invoked by uid 500); 22 Nov 2004 19:27:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67279 invoked by uid 99); 22 Nov 2004 19:27:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of john.wang@gmail.com designates 64.233.170.198 as permitted sender)
Received: from [64.233.170.198] (HELO rproxy.gmail.com) (64.233.170.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 11:27:03 -0800
Received: by rproxy.gmail.com with SMTP id a36so235614rnf
        for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 11:26:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=Rs47m7YwKowQnio3+a09HSyWr4/sLLa2TguDvJVG2gsjiPzOhojpRv2ZK68rOSrFqFKC8GAm/vp8UIz7ymZF0ERbdWBcWZR4H9KAETdzg0KxGU1SLd1Cs7npawLkAP7xSeIt0Qi1nz9pv4Jiw/jqY9O/esur5AfEKls0fpJHis0=
Received: by 10.38.126.2 with SMTP id y2mr986425rnc;
        Mon, 22 Nov 2004 11:26:58 -0800 (PST)
Received: by 10.38.75.60 with HTTP; Mon, 22 Nov 2004 11:26:58 -0800 (PST)
Message-ID: <8837fb770411221126f8c93f4@mail.gmail.com>
Date: Mon, 22 Nov 2004 11:26:58 -0800
From: John Wang <john.wang@gmail.com>
Reply-To: John Wang <john.wang@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: indexing benchmark
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi folks:

     Is there an indexing benchmark somewhere? I see a search
benchmark on the lucene home site.

Thanks

-John

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11426-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 19:44:15 2004
Return-Path: <lucene-user-return-11426-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 59078 invoked from network); 22 Nov 2004 19:44:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 19:44:15 -0000
Received: (qmail 98116 invoked by uid 500); 22 Nov 2004 19:44:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98093 invoked by uid 500); 22 Nov 2004 19:44:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98072 invoked by uid 99); 22 Nov 2004 19:44:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.2.176] (HELO fork6.mail.virginia.edu) (128.143.2.176)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 11:44:07 -0800
Received: from localhost (localhost [127.0.0.1])
	by fork6.mail.virginia.edu (Postfix) with ESMTP id 674661C163
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 14:44:02 -0500 (EST)
Received: from fork6.mail.virginia.edu ([127.0.0.1])
 by localhost (fork6.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 32721-05 for <lucene-user@jakarta.apache.org>;
 Mon, 22 Nov 2004 14:44:01 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by fork6.mail.virginia.edu (Postfix) with ESMTP id E076A1C335
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 14:44:01 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <opshvql4ck6yt6e7@dhcp-171-71-47-145.cisco.com>
References: <opshvql4ck6yt6e7@dhcp-171-71-47-145.cisco.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <D8717B6D-3CBE-11D9-918B-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: auto-generate uid?
Date: Mon, 22 Nov 2004 14:43:55 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-UVA-Virus-Scanned: by amavisd-new at fork6.mail.virginia.edu
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

What would the purpose of an auto-generated UID be?

But no, Lucene does not generate UID's for you.  Documents are numbered 
internally by their insertion order.  This number changes, however, 
when documents are deleted in the middle and the index is optimized.

	Erik

On Nov 22, 2004, at 1:50 PM, aurora wrote:

> Is there a way to auto-generate uid in Lucene? Even it is just a way 
> to query the highest uid and let the application add one to it will 
> do.
>
> Thanks.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11427-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 19:54:40 2004
Return-Path: <lucene-user-return-11427-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64364 invoked from network); 22 Nov 2004 19:54:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 19:54:40 -0000
Received: (qmail 14209 invoked by uid 500); 22 Nov 2004 19:54:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 14177 invoked by uid 500); 22 Nov 2004 19:54:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 14132 invoked by uid 99); 22 Nov 2004 19:54:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 11:54:27 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Too many open files issue
Date: Mon, 22 Nov 2004 14:54:23 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA5BFCFD@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Too many open files issue
Thread-Index: AcTQpDo05tfwW/OERN6YJcVIIZPlAQAKGfiw
From: "Will Allen" <wallen@Cyveillance.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

If you are on linux the number of file handles for a session is much =
lower than that for the whole machine.  "ulimit -n" will tell you.  =
There are instructions on the web for changing this setting, it involves =
the /etc/security/limits.conf and setting the values for "nofile".

(bulkadm is my user)

bulkadm         soft    nofile          8192
bulkadm         hard    nofile          65536

Also, if you use the condensed file format you will have many fewer =
files.

-----Original Message-----
From: Neelam Bhatnagar [mailto:nbhatnagar@sapient.com]
Sent: Monday, November 22, 2004 10:02 AM
To: Otis Gospodnetic
Cc: lucene-user@jakarta.apache.org
Subject: Too many open files issue


Hi,
=20
I had requested help on an issue we have been facing with the "Too many
open files" Exception garbling the search indexes and crashing the
search on the web site.=20
As a suggestion, you had asked us to look at the articles on O'Reilly
Network which had specific context around this exact problem.=20
One of the suggestions was to increase the limit on the number of file
descriptors on the file system. We tried it by first lowering the limit
to 200 from 256 in order to reproduce the exception. The exception did
get reproduced but even after increasing the limit to 500, the exception
kept coming until after several rounds of trying to rebuild the index,
we finally got to get it working for the default file descriptor limit
of 256.  This makes us wonder if your first suggestion of optimizing
indexes is a pre-requisite to trying this option.=20
=20
Another piece of relevant information is that we have the default merge
factor of 10.
=20
Kindly give us pointers to what it that we are doing wrong or should we
be trying something completely different.
=20
Thanks and regards
Neelam Bhatnagar
=20

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11428-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 20:05:14 2004
Return-Path: <lucene-user-return-11428-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 70164 invoked from network); 22 Nov 2004 20:05:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 20:05:13 -0000
Received: (qmail 33499 invoked by uid 500); 22 Nov 2004 20:05:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33441 invoked by uid 500); 22 Nov 2004 20:05:04 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33419 invoked by uid 99); 22 Nov 2004 20:05:04 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of Sullivan.Sean@menlolog.com designates 63.230.177.41 as permitted sender)
Received: from [63.230.177.41] (HELO ljcqs031.cnf.com) (63.230.177.41)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 12:05:04 -0800
Received: from ljcqs031.cnf.com (localhost [127.0.0.1])
	by localhost.cnf.com (Postfix) with ESMTP id 91EB126F531;
	Mon, 22 Nov 2004 12:05:02 -0800 (PST)
Received: from cnfqe058.cnf.prod.cnf.com (cnfdcx-131-slb-01-in.cnf.com [10.0.108.131])
	by ljcqs031.cnf.com (Postfix) with ESMTP id 7951526F1EC;
	Mon, 22 Nov 2004 12:05:02 -0800 (PST)
Received: from cnfqe109.cnf.prod.cnf.com ([10.0.2.43]) by cnfqe058.cnf.prod.cnf.com with Microsoft SMTPSVC(6.0.3790.211);
	 Mon, 22 Nov 2004 12:05:02 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: downloading Lucene 1.4.2
Date: Mon, 22 Nov 2004 12:05:01 -0800
Message-ID: <890650F148A56F43B91C43B3710922D201AFC477@cnfqe109.cnf.prod.cnf.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: downloading Lucene 1.4.2
Thread-Index: AcTQzozWz57HQ89sR6C4TX2jUD3qsQ==
From: "Sullivan, Sean C - MWT" <Sullivan.Sean@menlolog.com>
To: <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 22 Nov 2004 20:05:02.0413 (UTC) FILETIME=[8D352FD0:01C4D0CE]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


According to the Lucene homepage, Lucene 1.4.2 was released=20
on October 1, 2004

However, the "dist" on www.apache.org does not have a copy of=20
Lucene 1.4.2

   http://www.apache.org/dist/jakarta/lucene/binaries/

Where can I download Lucene 1.4.2?

-Sean


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11429-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 20:27:38 2004
Return-Path: <lucene-user-return-11429-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99331 invoked from network); 22 Nov 2004 20:27:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 20:27:38 -0000
Received: (qmail 78967 invoked by uid 500); 22 Nov 2004 20:27:32 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 78943 invoked by uid 500); 22 Nov 2004 20:27:31 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 78928 invoked by uid 99); 22 Nov 2004 20:27:31 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 12:27:30 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 701905B7F4; Mon, 22 Nov 2004 12:27:28 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 6EFE17F459
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 12:27:28 -0800 (PST)
Date: Mon, 22 Nov 2004 12:27:28 -0800 (PST)
From: Hoss <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: downloading Lucene 1.4.2
In-Reply-To: <890650F148A56F43B91C43B3710922D201AFC477@cnfqe109.cnf.prod.cnf.com>
Message-ID: <Pine.LNX.4.58.0411221226390.13445@hal.rescomp.berkeley.edu>
References: <890650F148A56F43B91C43B3710922D201AFC477@cnfqe109.cnf.prod.cnf.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


In the same Lucene News section where the announcement about 1.4.2 is
listed, there is a link that says "Binary and source distributions are
available here." ...

http://cvs.apache.org/dist/jakarta/lucene/v1.4.2/

I got really confused yesterday after I already had the binary version
and i was looking for the source and found the link you listed.  Does
anyone know how to go about getting http://www.apache.org/dist/ updated?

: According to the Lucene homepage, Lucene 1.4.2 was released
: on October 1, 2004
:
: However, the "dist" on www.apache.org does not have a copy of
: Lucene 1.4.2
:
:    http://www.apache.org/dist/jakarta/lucene/binaries/
:
: Where can I download Lucene 1.4.2?



--

-------------------------------------------------------------------
"Oh, you're a tricky one."                        Chris M Hostetter
     -- Trisha Weir                    hossman@rescomp.berkeley.edu


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11430-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 20:35:20 2004
Return-Path: <lucene-user-return-11430-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3196 invoked from network); 22 Nov 2004 20:35:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 20:35:20 -0000
Received: (qmail 93407 invoked by uid 500); 22 Nov 2004 20:35:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93318 invoked by uid 500); 22 Nov 2004 20:35:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93303 invoked by uid 99); 22 Nov 2004 20:35:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of john.wang@gmail.com designates 64.233.170.199 as permitted sender)
Received: from [64.233.170.199] (HELO rproxy.gmail.com) (64.233.170.199)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 12:35:12 -0800
Received: by rproxy.gmail.com with SMTP id a36so241523rnf
        for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 12:35:10 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=XFfdWhd4H5b/B4eN2nYElVYvgaCAmdydoAgD4/olc+nrA+7C52xRrdT1I2ZKCrMgd7s8/LiAaRq8KHg3L/DnTfVqecxr4swFBc6Xj7kU57dDeqO3S0FF0/UgTTFxqNM3EtwIFef1V2Pz3bpeqO+d27mlOvYDGfEDP+l8+rvmHAk=
Received: by 10.38.104.32 with SMTP id b32mr1018643rnc;
        Mon, 22 Nov 2004 12:35:10 -0800 (PST)
Received: by 10.38.75.60 with HTTP; Mon, 22 Nov 2004 12:35:09 -0800 (PST)
Message-ID: <8837fb770411221235379911f5@mail.gmail.com>
Date: Mon, 22 Nov 2004 12:35:09 -0800
From: John Wang <john.wang@gmail.com>
Reply-To: John Wang <john.wang@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Index in RAM - is it realy worthy?
In-Reply-To: <20041122172340.25792.qmail@web12704.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <OF4C421F05.3ECB1184-ONC1256F54.005D3F1B-C1256F54.005EA284@EU.novartis.net>
	 <20041122172340.25792.qmail@web12704.mail.yahoo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

In my test, I have 12900 documents. Each document is small, a few
discreet fields (KeyWord type) and 1 Text field containing only 1
sentence.

with both mergeFactor and maxMergeDocs being 1000

using RamDirectory, the indexing job took about 9.2 seconds

not using RamDirectory, the indexing job took about 122 seconds.

I am not calling optimize.

This is on windows Xp running java 1.5.

Is there something very wrong or different in my setup to cause such a
big different?


Thanks

-John


On Mon, 22 Nov 2004 09:23:40 -0800 (PST), Otis Gospodnetic
<otis_gospodnetic@yahoo.com> wrote:
> For the Lucene book I wrote some test cases that compare FSDirectory
> and RAMDirectory.  What I found was that with certain settings
> FSDirectory was almost as fast as RAMDirectory.  Personally, I would
> push FSDirectory and hope that the OS and the Filesystem do their share
> of work and caching for me before looking for ways to optimize my code.
> 
> Otis
> 
> 
> 
> --- iouli.golovatyi@group.novartis.com wrote:
> 
> >
> > I did following test:
> > I created  the RAM folder on my Red Hat box and copied   c. 1Gb of
> > indexes
> > there.
> > I expected the queries to run much quicker.
> > In reality it was even sometimes slower(sic!)
> >
> > Lucene has it's own RAM disk functionality. If I implement it, would
> > it
> > bring any benefits?
> >
> > Thanks in advance
> > J.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11431-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 20:39:50 2004
Return-Path: <lucene-user-return-11431-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5377 invoked from network); 22 Nov 2004 20:39:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 20:39:50 -0000
Received: (qmail 2760 invoked by uid 500); 22 Nov 2004 20:39:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2691 invoked by uid 500); 22 Nov 2004 20:39:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2626 invoked by uid 99); 22 Nov 2004 20:39:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 12:39:16 -0800
Received: from [192.168.1.106] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id iAMKdCMc021844
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 12:39:12 -0800
Message-ID: <41A24E6B.8030807@newsmonster.org>
Date: Mon, 22 Nov 2004 12:39:07 -0800
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Index in RAM - is it realy worthy?
References: <20041122172340.25792.qmail@web12704.mail.yahoo.com>
In-Reply-To: <20041122172340.25792.qmail@web12704.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:

>For the Lucene book I wrote some test cases that compare FSDirectory
>and RAMDirectory.  What I found was that with certain settings
>FSDirectory was almost as fast as RAMDirectory.  Personally, I would
>push FSDirectory and hope that the OS and the Filesystem do their share
>of work and caching for me before looking for ways to optimize my code.
>  
>
Yes... I performed the same benchmark and in my situation RAMDirectory 
for searches was about 2% slower.

I'm willing to bet that it has to do with the fact that its a Hashtable 
and not a HashMap (which isn't synchronized).

Also adding a constructor for the term size could make loading a 
RAMDirectory faster since you could prevent rehash.

If you're on a modern machine your filesystme cache will end up 
buffering your disk anyway which I'm sure was happening in my situation.

Kevin

-- 

Use Rojo (RSS/Atom aggregator).  Visit http://rojo.com. Ask me for an 
invite!  Also see irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

If you're interested in RSS, Weblogs, Social Networking, etc... then you 
should work for Rojo!  If you recommend someone and we hire them you'll 
get a free iPod!
    
Kevin A. Burton, Location - San Francisco, CA
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11432-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 20:40:38 2004
Return-Path: <lucene-user-return-11432-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5948 invoked from network); 22 Nov 2004 20:40:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 20:40:37 -0000
Received: (qmail 6554 invoked by uid 500); 22 Nov 2004 20:40:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 6480 invoked by uid 500); 22 Nov 2004 20:40:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 6373 invoked by uid 99); 22 Nov 2004 20:40:25 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 12:40:25 -0800
Received: from [192.168.1.106] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id iAMKeN0H021885
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 12:40:23 -0800
Message-ID: <41A24EA3.2070808@newsmonster.org>
Date: Mon, 22 Nov 2004 12:40:03 -0800
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Index in RAM - is it realy worthy?
References: <20041122172340.25792.qmail@web12704.mail.yahoo.com>
In-Reply-To: <20041122172340.25792.qmail@web12704.mail.yahoo.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:

>For the Lucene book I wrote some test cases that compare FSDirectory
>and RAMDirectory.  What I found was that with certain settings
>FSDirectory was almost as fast as RAMDirectory.  Personally, I would
>push FSDirectory and hope that the OS and the Filesystem do their share
>of work and caching for me before looking for ways to optimize my code.
>  
>
Also another note is that doing an index merge in memory is probably 
faster if you just use a RAMDirectory and perform addIndexes to it.

This would almost certainly be faster than optimizing on disk but I 
haven't benchmarked it.

Kevin

-- 

Use Rojo (RSS/Atom aggregator).  Visit http://rojo.com. Ask me for an 
invite!  Also see irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

If you're interested in RSS, Weblogs, Social Networking, etc... then you 
should work for Rojo!  If you recommend someone and we hire them you'll 
get a free iPod!
    
Kevin A. Burton, Location - San Francisco, CA
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11433-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 21:10:53 2004
Return-Path: <lucene-user-return-11433-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21238 invoked from network); 22 Nov 2004 21:10:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 21:10:52 -0000
Received: (qmail 72049 invoked by uid 500); 22 Nov 2004 21:10:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72011 invoked by uid 500); 22 Nov 2004 21:10:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71992 invoked by uid 99); 22 Nov 2004 21:10:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=CLICK_BELOW
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.2.181] (HELO fork11.mail.virginia.edu) (128.143.2.181)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 13:10:42 -0800
Received: from localhost (localhost [127.0.0.1])
	by fork11.mail.virginia.edu (Postfix) with ESMTP id 33B331F5523
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 16:10:38 -0500 (EST)
Received: from fork11.mail.virginia.edu ([127.0.0.1])
 by localhost (fork11.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 19265-03 for <lucene-user@jakarta.apache.org>;
 Mon, 22 Nov 2004 16:10:37 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by fork11.mail.virginia.edu (Postfix) with ESMTP id E3B471F5504
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 16:10:37 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <890650F148A56F43B91C43B3710922D201AFC477@cnfqe109.cnf.prod.cnf.com>
References: <890650F148A56F43B91C43B3710922D201AFC477@cnfqe109.cnf.prod.cnf.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <F0F8A074-3CCA-11D9-918B-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: downloading Lucene 1.4.2
Date: Mon, 22 Nov 2004 16:10:30 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-UVA-Virus-Scanned: by amavisd-new at fork11.mail.virginia.edu
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Click the "here" link on the Lucene home page.

We Lucene committers have been very very lame and have not published 
the binary distribution appropriately for the mirrors to pick up.  One 
of these days we'll correct this, but for now you can click the link 
from the announcement on the home page.

	Erik

On Nov 22, 2004, at 3:05 PM, Sullivan, Sean C - MWT wrote:

>
> According to the Lucene homepage, Lucene 1.4.2 was released
> on October 1, 2004
>
> However, the "dist" on www.apache.org does not have a copy of
> Lucene 1.4.2
>
>    http://www.apache.org/dist/jakarta/lucene/binaries/
>
> Where can I download Lucene 1.4.2?
>
> -Sean
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11434-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 21:12:46 2004
Return-Path: <lucene-user-return-11434-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21848 invoked from network); 22 Nov 2004 21:12:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 21:12:45 -0000
Received: (qmail 77007 invoked by uid 500); 22 Nov 2004 21:12:37 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76983 invoked by uid 500); 22 Nov 2004 21:12:36 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76961 invoked by uid 99); 22 Nov 2004 21:12:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.2.181] (HELO fork11.mail.virginia.edu) (128.143.2.181)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 13:12:36 -0800
Received: from localhost (localhost [127.0.0.1])
	by fork11.mail.virginia.edu (Postfix) with ESMTP id 977401F5524
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 16:12:34 -0500 (EST)
Received: from fork11.mail.virginia.edu ([127.0.0.1])
 by localhost (fork11.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 19154-09 for <lucene-user@jakarta.apache.org>;
 Mon, 22 Nov 2004 16:12:34 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by fork11.mail.virginia.edu (Postfix) with ESMTP id 5DF4A1F5519
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 16:12:34 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <Pine.LNX.4.58.0411221226390.13445@hal.rescomp.berkeley.edu>
References: <890650F148A56F43B91C43B3710922D201AFC477@cnfqe109.cnf.prod.cnf.com> <Pine.LNX.4.58.0411221226390.13445@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <366B8EDA-3CCB-11D9-918B-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: downloading Lucene 1.4.2
Date: Mon, 22 Nov 2004 16:12:27 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-UVA-Virus-Scanned: by amavisd-new at fork11.mail.virginia.edu
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Nov 22, 2004, at 3:27 PM, Hoss wrote:
>  Does
> anyone know how to go about getting http://www.apache.org/dist/ 
> updated?

Yes, I do.  It just takes a bit of time to do as I've not automated 
that step.  It requires digitally signing several files and several 
other currently manual steps while I'm looking at the instructions.

I apologize for not doing this  yet myself.  Other committers can also 
do this too if they are so inclined.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11435-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 21:39:48 2004
Return-Path: <lucene-user-return-11435-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36748 invoked from network); 22 Nov 2004 21:39:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 21:39:47 -0000
Received: (qmail 22223 invoked by uid 500); 22 Nov 2004 21:39:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22195 invoked by uid 500); 22 Nov 2004 21:39:43 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22180 invoked by uid 99); 22 Nov 2004 21:39:43 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=FROM_ENDS_IN_NUMS,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO main.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 13:39:39 -0800
Received: from list by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1CWLuL-00039N-00
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 22:39:37 +0100
Received: from dhcp-171-71-47-145.cisco.com ([171.71.47.145])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 22:39:37 +0100
Received: from aurora00 by dhcp-171-71-47-145.cisco.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 22:39:37 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: aurora <aurora00@gmail.com>
Subject: Re: auto-generate uid?
Date: Mon, 22 Nov 2004 13:39:32 -0800
Lines: 48
Message-ID: <opshvyf6pm6yt6e7@dhcp-171-71-47-145.cisco.com>
References: <opshvql4ck6yt6e7@dhcp-171-71-47-145.cisco.com> <D8717B6D-3CBE-11D9-918B-000A95BC61B6@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
Content-Transfer-Encoding: Quoted-Printable
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: dhcp-171-71-47-145.cisco.com
User-Agent: Opera M2/7.54 (Win32, build 3869)
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Just to clarify. I have a Field 'uid' those value is an unique integer. =
I  =

use it as a key to the document stored externally. I don't mean Lucene's=
  =

internal document number.

I was wonder if there is a method to query the highest value of a field,=
  =

perhaps something like:

   IndexReader.maxTerm('uid')


> What would the purpose of an auto-generated UID be?
>
> But no, Lucene does not generate UID's for you.  Documents are numbere=
d  =

> internally by their insertion order.  This number changes, however, wh=
en  =

> documents are deleted in the middle and the index is optimized.
>
> 	Erik
>
> On Nov 22, 2004, at 1:50 PM, aurora wrote:
>
>> Is there a way to auto-generate uid in Lucene? Even it is just a way =
to  =

>> query the highest uid and let the application add one to it will do.
>>
>> Thanks.
>>
>>
>> ---------------------------------------------------------------------=

>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org



-- =

Using Opera's revolutionary e-mail client: http://www.opera.com/m2/


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11436-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 21:57:09 2004
Return-Path: <lucene-user-return-11436-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47488 invoked from network); 22 Nov 2004 21:57:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 21:57:09 -0000
Received: (qmail 63264 invoked by uid 500); 22 Nov 2004 21:56:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63202 invoked by uid 500); 22 Nov 2004 21:56:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63169 invoked by uid 99); 22 Nov 2004 21:56:47 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.2.193] (HELO fork3.mail.virginia.edu) (128.143.2.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 13:56:46 -0800
Received: from localhost (localhost [127.0.0.1])
	by fork3.mail.virginia.edu (Postfix) with ESMTP id 954F11C250
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 16:56:41 -0500 (EST)
Received: from fork3.mail.virginia.edu ([127.0.0.1])
 by localhost (fork3.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 25050-01 for <lucene-user@jakarta.apache.org>;
 Mon, 22 Nov 2004 16:56:41 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by fork3.mail.virginia.edu (Postfix) with ESMTP id 466331C33B
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 16:56:41 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <opshvyf6pm6yt6e7@dhcp-171-71-47-145.cisco.com>
References: <opshvql4ck6yt6e7@dhcp-171-71-47-145.cisco.com> <D8717B6D-3CBE-11D9-918B-000A95BC61B6@ehatchersolutions.com> <opshvyf6pm6yt6e7@dhcp-171-71-47-145.cisco.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5FA30D8E-3CD1-11D9-918B-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: auto-generate uid?
Date: Mon, 22 Nov 2004 16:56:33 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-UVA-Virus-Scanned: by amavisd-new at fork3.mail.virginia.edu
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 22, 2004, at 4:39 PM, aurora wrote:
> Just to clarify. I have a Field 'uid' those value is an unique  
> integer. I use it as a key to the document stored externally. I don't  
> mean Lucene's internal document number.
>
> I was wonder if there is a method to query the highest value of a  
> field, perhaps something like:
>
>   IndexReader.maxTerm('uid')

There isn't quite that type of API, though you can skip to a known one  
and enumerate from there:

	http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/ 
TermEnum.html#skipTo(org.apache.lucene.index.Term)

IndexReader gives you a TermEnum from either the terms() method or the  
terms(Term) method.

	Erik

>
>
>> What would the purpose of an auto-generated UID be?
>>
>> But no, Lucene does not generate UID's for you.  Documents are  
>> numbered internally by their insertion order.  This number changes,  
>> however, when documents are deleted in the middle and the index is  
>> optimized.
>>
>> 	Erik
>>
>> On Nov 22, 2004, at 1:50 PM, aurora wrote:
>>
>>> Is there a way to auto-generate uid in Lucene? Even it is just a way  
>>> to query the highest uid and let the application add one to it will  
>>> do.
>>>
>>> Thanks.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
> -- 
> Using Opera's revolutionary e-mail client: http://www.opera.com/m2/
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11437-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 22:00:05 2004
Return-Path: <lucene-user-return-11437-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48534 invoked from network); 22 Nov 2004 22:00:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 22:00:04 -0000
Received: (qmail 67990 invoked by uid 500); 22 Nov 2004 21:59:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 67964 invoked by uid 500); 22 Nov 2004 21:59:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 67950 invoked by uid 99); 22 Nov 2004 21:59:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [217.160.91.29] (HELO p15112568.pureserver.info) (217.160.91.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 13:59:55 -0800
Received: from [192.168.10.103] (ppp-82-135-4-217.mnet-online.de [82.135.4.217])
	(using TLSv1 with cipher RC4-MD5 (128/128 bits))
	(No client certificate requested)
	by p15112568.pureserver.info (Postfix) with ESMTP id CF54A14010F
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 22:59:50 +0100 (CET)
Message-ID: <41A2614F.7090007@intrafind.de>
Date: Mon, 22 Nov 2004 22:59:43 +0100
From: Bernhard Messer <bernhard.messer@intrafind.de>
Organization: IntraFind Software AG
User-Agent: Mozilla Thunderbird 0.8 (X11/20040913)
X-Accept-Language: de-DE, de, en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: auto-generate uid?
References: <opshvql4ck6yt6e7@dhcp-171-71-47-145.cisco.com> <D8717B6D-3CBE-11D9-918B-000A95BC61B6@ehatchersolutions.com> <opshvyf6pm6yt6e7@dhcp-171-71-47-145.cisco.com>
In-Reply-To: <opshvyf6pm6yt6e7@dhcp-171-71-47-145.cisco.com>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Just to clarify. I have a Field 'uid' those value is an unique integer. 
I  use it as a key to the document stored externally. I don't mean 
Lucene's  internal document number.

>
> I was wonder if there is a method to query the highest value of a 
> field,  perhaps something like:
>
>   IndexReader.maxTerm('uid')
>
what you could do is to write your own IndexWriter class by extending 
the original one found in org.apache.lucene.index.IndexWriter. Than you 
have direct access to lucene's segment counter which could provide you a 
unique id for each document in the index. Those id's would stay sticky 
even if you modify the index after the intial creation process.

is that the hint you need to start ?

regards
Bernhard

>
>> What would the purpose of an auto-generated UID be?
>>
>> But no, Lucene does not generate UID's for you.  Documents are 
>> numbered  internally by their insertion order.  This number changes, 
>> however, when  documents are deleted in the middle and the index is 
>> optimized.
>>
>>     Erik
>>
>> On Nov 22, 2004, at 1:50 PM, aurora wrote:
>>
>>> Is there a way to auto-generate uid in Lucene? Even it is just a way 
>>> to  query the highest uid and let the application add one to it will 
>>> do.
>>>
>>> Thanks.
>>>
>>>
>>> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11438-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 22:14:34 2004
Return-Path: <lucene-user-return-11438-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60879 invoked from network); 22 Nov 2004 22:14:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 22:14:33 -0000
Received: (qmail 86773 invoked by uid 500); 22 Nov 2004 22:14:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86746 invoked by uid 500); 22 Nov 2004 22:14:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86727 invoked by uid 99); 22 Nov 2004 22:14:29 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [68.230.240.33] (HELO lakermmtao06.cox.net) (68.230.240.33)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 14:14:28 -0800
Received: from POWERPACK ([68.100.190.210]) by lakermmtao06.cox.net
          (InterMail vM.6.01.04.00 201-2131-117-20041022) with SMTP
          id <20041122221420.KGFS5535.lakermmtao06.cox.net@POWERPACK>
          for <lucene-user@jakarta.apache.org>;
          Mon, 22 Nov 2004 17:14:20 -0500
Message-ID: <078701c4d0e0$a5882030$5502a8c0@POWERPACK>
From: "Terry Steichen" <terry@net-frame.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <opshvql4ck6yt6e7@dhcp-171-71-47-145.cisco.com> <D8717B6D-3CBE-11D9-918B-000A95BC61B6@ehatchersolutions.com> <opshvyf6pm6yt6e7@dhcp-171-71-47-145.cisco.com>
Subject: Re: auto-generate uid?
Date: Mon, 22 Nov 2004 17:14:33 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0784_01C4D0B6.BC1DEE80"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1409
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0784_01C4D0B6.BC1DEE80
Content-Type: text/plain;
	charset="iso-8859-15"
Content-Transfer-Encoding: quoted-printable

Not exactly sure what you're trying to do.  You can easily generate a =
number when you index each Document and insert it in a uid field (which =
is, BTW, what I do), and if you base it on a timestamp plus some =
characteristic of the document (which is also what I do), it should =
always be unique.  As you add more documents, they will each get their =
own unique id.  When you delete documents and optimize, these ids won't =
be affected.

However, in your subsequent clarification, you indicated you already had =
a unique id, and want to find the maximum value.  So why did you say you =
want one auto-generated?

Terry
  ----- Original Message -----=20
  From: aurora=20
  To: lucene-user@jakarta.apache.org=20
  Sent: Monday, November 22, 2004 4:39 PM
  Subject: Re: auto-generate uid?


  Just to clarify. I have a Field 'uid' those value is an unique =
integer. I =20
  use it as a key to the document stored externally. I don't mean =
Lucene's =20
  internal document number.

  I was wonder if there is a method to query the highest value of a =
field, =20
  perhaps something like:

     IndexReader.maxTerm('uid')


  > What would the purpose of an auto-generated UID be?
  >
  > But no, Lucene does not generate UID's for you.  Documents are =
numbered =20
  > internally by their insertion order.  This number changes, however, =
when =20
  > documents are deleted in the middle and the index is optimized.
  >
  > Erik
  >
  > On Nov 22, 2004, at 1:50 PM, aurora wrote:
  >
  >> Is there a way to auto-generate uid in Lucene? Even it is just a =
way to =20
  >> query the highest uid and let the application add one to it will =
do.
  >>
  >> Thanks.
  >>
  >>
  >> =
---------------------------------------------------------------------
  >> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  >> For additional commands, e-mail: =
lucene-user-help@jakarta.apache.org



  --=20
  Using Opera's revolutionary e-mail client: http://www.opera.com/m2/


  ---------------------------------------------------------------------
  To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  For additional commands, e-mail: lucene-user-help@jakarta.apache.org


------=_NextPart_000_0784_01C4D0B6.BC1DEE80--


From lucene-user-return-11439-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 22:16:25 2004
Return-Path: <lucene-user-return-11439-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61924 invoked from network); 22 Nov 2004 22:16:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 22:16:25 -0000
Received: (qmail 90047 invoked by uid 500); 22 Nov 2004 22:16:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90028 invoked by uid 500); 22 Nov 2004 22:16:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90014 invoked by uid 99); 22 Nov 2004 22:16:19 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=DATE_IN_PAST_06_12,DNS_FROM_RFC_ABUSE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of dmitrys@earthlink.net designates 209.86.89.63 as permitted sender)
Received: from [209.86.89.63] (HELO smtpauth03.mail.atl.earthlink.net) (209.86.89.63)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 14:16:17 -0800
Received: from [204.134.51.193] (helo=[204.134.51.193])
	by smtpauth03.mail.atl.earthlink.net with asmtp (TLSv1:AES256-SHA:256)
	(Exim 4.34)
	id 1CWMTl-0008W0-Ge
	for lucene-user@jakarta.apache.org; Mon, 22 Nov 2004 17:16:13 -0500
Message-ID: <41A202B6.5090000@earthlink.net>
Date: Mon, 22 Nov 2004 08:16:06 -0700
From: Dmitry <dmitrys@earthlink.net>
User-Agent: Mozilla Thunderbird 0.9 (X11/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Too many open files issue
References: <88B56FBAEB84EC448511C30CD63D3F8A0279F553@delmail1.sapient.com>
In-Reply-To: <88B56FBAEB84EC448511C30CD63D3F8A0279F553@delmail1.sapient.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-ELNK-Trace: b9a8ec9b68c23176d780f4a490ca69563f9fea00a6dd62bc9e57040cdb713e463c002e464da0a645350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 204.134.51.193
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'm sorry, I wasn't involved in the original conversation but maybe I 
can jump in with some info that will help.

The number of files depends on the merge factor, number of segments, and 
number of indexed fields in your index. It also depends on whether you 
are using "compound files" or not (this is a flag on the IndexWriter). 
With compound files flag on, segments have fixed number of files, 
regardless of how many fields you use. Without the flag, each field is a 
separate file.

Let's say you have 10 segments (per your merge factor) that are being 
merged into a new segment (via an optimize call or just because you have 
reached the merge factor). This means there are 11 segments open at the 
same time. If you have 20 indexed fields and are not using compound 
files, that's 20 * 11 = 220 files. There are a few other files open as 
well, plus whatever other files and sockets that your JVM process is 
holding open at that time. This would include incoming connections, for 
example, if this is running inside a web server. If you are running in 
an application server, this could include connections and files open by 
other applications in that same app server.

So the numbers run up quite a bit.

By the way, it is usual to have the file descriptors limit set at 9000 
or so for unix machines running production web applications. By the way 
2, on Solaris, you will need to modify a value in /etc/systems to get up 
to this level. Not sure about Linux or other flavors.

Another suggestion - you may want to look into a tool called "lsof". It 
is a utility that will show file handles open by a particular process. 
It could be that some other part of your process (or of the application 
server, VM, etc) is not closing files. This tool will help you see what 
files are open and you can validate that all of the really need to be open.

Best of luck.
Dmitry.


Neelam Bhatnagar wrote:

>Hi,
> 
>I had requested help on an issue we have been facing with the "Too many
>open files" Exception garbling the search indexes and crashing the
>search on the web site. 
>As a suggestion, you had asked us to look at the articles on O'Reilly
>Network which had specific context around this exact problem. 
>One of the suggestions was to increase the limit on the number of file
>descriptors on the file system. We tried it by first lowering the limit
>to 200 from 256 in order to reproduce the exception. The exception did
>get reproduced but even after increasing the limit to 500, the exception
>kept coming until after several rounds of trying to rebuild the index,
>we finally got to get it working for the default file descriptor limit
>of 256.  This makes us wonder if your first suggestion of optimizing
>indexes is a pre-requisite to trying this option. 
> 
>Another piece of relevant information is that we have the default merge
>factor of 10.
> 
>Kindly give us pointers to what it that we are doing wrong or should we
>be trying something completely different.
> 
>Thanks and regards
>Neelam Bhatnagar
> 
>
>  
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11440-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 22:21:57 2004
Return-Path: <lucene-user-return-11440-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65521 invoked from network); 22 Nov 2004 22:21:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 22:21:57 -0000
Received: (qmail 98941 invoked by uid 500); 22 Nov 2004 22:21:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98921 invoked by uid 500); 22 Nov 2004 22:21:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98906 invoked by uid 99); 22 Nov 2004 22:21:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of clamprecht@gmail.com designates 64.233.170.199 as permitted sender)
Received: from [64.233.170.199] (HELO rproxy.gmail.com) (64.233.170.199)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 14:21:46 -0800
Received: by rproxy.gmail.com with SMTP id b11so288083rne
        for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 14:21:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=uOWfuC8gIk6EY1pq4VLT1Wf1WPIUgONxOQJXbKLADIRZNjno0Me3sriXG2+sWixivdoOFff01t3CId5Ccmc2BRwLIP7sIOowUwSsI60UU9PJDaifHWyNhtAMExE7Jm90XBO04NrgbJu4EGISOjQIVDQw6LN2vwR4p5zUZU2ZHNE=
Received: by 10.38.72.71 with SMTP id u71mr1062847rna;
        Mon, 22 Nov 2004 14:21:36 -0800 (PST)
Received: by 10.38.72.66 with HTTP; Mon, 22 Nov 2004 14:21:35 -0800 (PST)
Message-ID: <88c6a67204112214216767084e@mail.gmail.com>
Date: Mon, 22 Nov 2004 16:21:35 -0600
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Too many open files issue
In-Reply-To: <88B56FBAEB84EC448511C30CD63D3F8A0279F553@delmail1.sapient.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <88B56FBAEB84EC448511C30CD63D3F8A0279F553@delmail1.sapient.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

A useful resource for increasing the number of file handles on various
operating systems is the Volano Report:

http://www.volano.com/report/

> I had requested help on an issue we have been facing with the "Too many
> open files" Exception garbling the search indexes and crashing the
> search on the web site.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11441-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 23:06:32 2004
Return-Path: <lucene-user-return-11441-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 87410 invoked from network); 22 Nov 2004 23:06:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 23:06:32 -0000
Received: (qmail 72158 invoked by uid 500); 22 Nov 2004 23:06:26 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72116 invoked by uid 500); 22 Nov 2004 23:06:26 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72098 invoked by uid 99); 22 Nov 2004 23:06:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 15:06:20 -0800
Received: from [192.168.1.106] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id iAMN6GjD023610
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 15:06:16 -0800
Message-ID: <41A270E3.4070503@newsmonster.org>
Date: Mon, 22 Nov 2004 15:06:11 -0800
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: JDBCDirectory to prevent optimize()?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

It seems that when compared to other datastores that Lucene starts to 
fall down.  For example lucene doesn't perform online index 
optimizations so if you add 10 documents you have to run optimize() 
again and this isn't exactly a fast operation.

I'm wondering about the potential for a generic JDBCDirectory for 
keeping the lucene index within a database. 

It sounds somewhat unconventional would allow you to perform live 
addDirectory updates without performing an optimize() again.

Has anyone looked at this?  How practical would it be.

Kevin

-- 

Use Rojo (RSS/Atom aggregator).  Visit http://rojo.com. Ask me for an 
invite!  Also see irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

If you're interested in RSS, Weblogs, Social Networking, etc... then you 
should work for Rojo!  If you recommend someone and we hire them you'll 
get a free iPod!
    
Kevin A. Burton, Location - San Francisco, CA
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11442-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 22 23:12:57 2004
Return-Path: <lucene-user-return-11442-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 90070 invoked from network); 22 Nov 2004 23:12:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 22 Nov 2004 23:12:57 -0000
Received: (qmail 81931 invoked by uid 500); 22 Nov 2004 23:12:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81700 invoked by uid 500); 22 Nov 2004 23:12:42 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81686 invoked by uid 99); 22 Nov 2004 23:12:42 -0000
X-ASF-Spam-Status: No, hits=1.7 required=10.0
	tests=HTML_MESSAGE,HTML_SHORT_COMMENT
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [217.195.47.30] (HELO server2.pro-traffic2.de) (217.195.47.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 15:12:41 -0800
Received: from localhost (localhost.localdomain [127.0.0.1])
	by server2.pro-traffic2.de (Postfix) with ESMTP id 408EA2D1F59
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 00:11:18 +0100 (CET)
Received: from server2.pro-traffic2.de ([127.0.0.1])
	by localhost (server2 [127.0.0.1]) (amavisd-new, port 10024)
	with ESMTP id 10472-04 for <lucene-user@jakarta.apache.org>;
	Tue, 23 Nov 2004 00:11:17 +0100 (CET)
Received: from goliath (dsl-082-082-250-240.arcor-ip.net [82.82.250.240])
	by server2.pro-traffic2.de (Postfix) with ESMTP id 9BDD12D13A2
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 00:11:17 +0100 (CET)
Message-ID: <008101c4d0e8$b6c83260$0100a8c0@goliath>
From: "DES" <mail@2des.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: multi-dimensional scaling
Date: Tue, 23 Nov 2004 00:12:18 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_007E_01C4D0F1.183B6D20"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Scanned: by amavisd-new-20030616-p10 (Debian) at server2.pro-traffic2.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_007E_01C4D0F1.183B6D20
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Is it possible to combine Lucene and  multi-dimensional scaling  in some =
way?
------=_NextPart_000_007E_01C4D0F1.183B6D20--


From lucene-user-return-11443-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 02:26:06 2004
Return-Path: <lucene-user-return-11443-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96460 invoked from network); 23 Nov 2004 02:26:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 02:26:06 -0000
Received: (qmail 30839 invoked by uid 500); 23 Nov 2004 02:25:43 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30598 invoked by uid 500); 23 Nov 2004 02:25:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30534 invoked by uid 99); 23 Nov 2004 02:25:38 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 18:25:36 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 113085B7F1; Mon, 22 Nov 2004 18:25:24 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 0FE317F45C
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 18:25:24 -0800 (PST)
Date: Mon, 22 Nov 2004 18:25:24 -0800 (PST)
From: Hoss <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: lucene-user@jakarta.apache.org
Subject: Numeric Range Restrictions: Queries vs Filters
Message-ID: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

(NOTE: numbers in [] indicate Footnotes)

I'm rather new to Lucene (and this list), so if I'm grossly
misunderstanding things, forgive me.

One of my main needs as I investigate Search technologies is to restrict
results based on Ranges of numeric values.  Looking over the archives of
this list, it seems that lots of people have run into problems dealing
with this.  In particular, whenever someone asks a question about "Numeric
Ranges" the question seem to always involve one (or more) of the
following:

   (a) Lexical sorting puts 11 in the range "1 TO 5"
   (b) Dates (or Dates and Times)
   (c) BooleanQuery$TooManyClauses Exceptions
   (d) Should I use a filter?

(a) is a solved problem as long as you use a formatter like
LongField.java[1]

(b) is really nothing more then a special case of dealing with generic
numeric values.  While there are certainly special purposes solutions that
sometimes apply to dealing with Date ranges, any good solution for dealing
with raw numeric ranges can be applied to Dates (and Times)

(c) is a situation that seems to come up a lot because of the way
RangeQuery works.  The rewrite method walks all of the Terms in the index
starting with "lowerTerm" and builds up BooleanQuery containing a separate
TermQuery for every Term found, until it reaches the upperTerm.  This
causes a range search of "0001 TO 1000" to generate a BooleanQuery with N
clauses, where N is the quantity of unique values in the field which are
lexically greater then 0001 and lexically less then 1000.  depending on
the nature of your data, this might be 0 BooleanClauses, or it might be
1000 BooleanClauses; but the list is built before the search is ever even
executed.

At first, this may seem really strange -- I know I was certainly confused
-- but there is a very good reason for it: Ultimately RangeQuery still
provides you with a meaningful score for each document, based on the
frequency (and quantity) of terms that document has in the range [2].  In
order to do that, it has to expand itself, but what if you don't care if
your Range restriction impacts the Score? [3]

Which brings us to...

(c) Filtering.  Filters in general make a lot of sense to me.  They are a
way to specify (at query time) that only a certain subset of the index
should be considered for results.  The Filter class has a very straight
forward API that seems very easy to subclass to get the behavior I want.
The Query API on the other hand ... I freely admit, that I can't make
heads or tails out of it.  I don't even know where I would begin to try
and write a new subclass of Query if I wanted to.

I would think that most people who want to do a "numeric range
restriction" on their data, probably don't care about the Scoring benefits
of RangeQuery.  Looking at the code base, the way DateFilter works seems
like it provides an ideal solution to any sort of Range restriction (not
just Dates) that *should* be more efficient then using RangeQuery when
dealing with an unbounded value set. (Both approaches need to iterate over
all of the terms in the specified field using TermEnum, but RangeQuery has
to build up an set of BooleanQuery objects for each matching term, and
then each of those queries have to help score the documents -- DateFilter
on the other hand only has to maintain a single BitSet of documents that
it finds as it iterates)

But I was surprised then to see the following quote from "Erik Hatcher" in
the archives:

  "In fact, DateFilter by itself is practically of no use, I think." [4]

...Erik goes on to suggest that given "a set of canned date ranges", it
doesn't really matter if you use a RangeQuery or a DateFilter -- as long
as you cache them to reuse them (with something like CachingWrappingFilter
or QueryFilter).  I'm hoping that he might elaborate on that comment?

As a test, I wrote a "RangeFilter" which borrows heavily from DateFilter
to both convince myself it could work, and to do a comparison between it
and RangeQuery. [5] Based on my limited tests, using a Filter to restrict
to a Range is a lot faster then using RangeQuery -- independent of
caching.

The attachment contains my RangeFilter, a unit test that demonstrates it,
and a Benchmarking unit test that does a side-by-side comparison with
RangeQuery [6].  If developers feel that this class is useful, then by all
means roll it into the code base.  (90% of it is cut/pasted from
DateFilter/RangeQuery anyway)


    Comments? ... Questions? ... Answers?



Footnotes:

[1] It seems to me this class is extremely useful, does anyone know
    if there's a particular reason it hasn't been added to the main Lucene
    codebase?
    http://www.mail-archive.com/lucene-dev@jakarta.apache.org/msg04790.html

[2] Take a look at RangeQueryScoreDemo.java in the attachment, which
    produces output something like this...
       Range Search for: 'apple' TO 'dog'
       0.40924072 ... bed dog emu
       0.38014847 ... DOG
       0.2825246 ... cat
       0.17657787 ... apple emu
       0.12671615 ... dog

[3] According to the list archives "Matt Quail" mentioned in May that
    he was working on a "QuickRangeQuery" class that wouldn't have the
    BooleanQuery limitation, at the expense of always scoring "1.0",
    but I haven't seen any mention of anything like it since.  Is Matt
    still an active list member?  Matt, is this something you're still
    pursuing?
    http://nagoya.apache.org/eyebrowse/ReadMsg?msgId=1659395

[4] http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg07015.html

[5] The only major difference between my RangeFilter and DateFilter is
    that RangeFilter supports options for inclusion/exclusion
    (individually for the low/high terms I might add).  But for the
    purposes of a benchmark, doing the same thing with DateFilter would
    have worked fine.

[6] If you have ant, see "ant -projecthelp"; otherwise, read the top
    of build.xml



--

-------------------------------------------------------------------
"Oh, you're a tricky one."                        Chris M Hostetter
     -- Trisha Weir                    hossman@rescomp.berkeley.edu


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11444-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 02:33:55 2004
Return-Path: <lucene-user-return-11444-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1525 invoked from network); 23 Nov 2004 02:33:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 02:33:55 -0000
Received: (qmail 47322 invoked by uid 500); 23 Nov 2004 02:33:48 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47300 invoked by uid 500); 23 Nov 2004 02:33:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47285 invoked by uid 99); 23 Nov 2004 02:33:48 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 22 Nov 2004 18:33:46 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 92C4D5B7F1; Mon, 22 Nov 2004 18:33:44 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8F23F7F45C
	for <lucene-user@jakarta.apache.org>; Mon, 22 Nov 2004 18:33:44 -0800 (PST)
Date: Mon, 22 Nov 2004 18:33:44 -0800 (PST)
From: Hoss <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: lucene-user@jakarta.apache.org
Subject: Re: Numeric Range Restrictions: Queries vs Filters
In-Reply-To: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu>
Message-ID: <Pine.LNX.4.58.0411221829250.19461@hal.rescomp.berkeley.edu>
References: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: MULTIPART/MIXED; BOUNDARY="-441870778-683642203-1101177224=:19461"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

---441870778-683642203-1101177224=:19461
Content-Type: TEXT/PLAIN; charset=US-ASCII


Of course, not only did I manage to forget to include the attachment, but
when I sent a reply with the code, mail.apache.org rejected it because it
was a ZIP file.

So let's see how mail.apache.or feels about 6 seperate text files.


: Date: Mon, 22 Nov 2004 18:25:24 -0800 (PST)
: Subject: Numeric Range Restrictions: Queries vs Filters
:
: (NOTE: numbers in [] indicate Footnotes)
:
: I'm rather new to Lucene (and this list), so if I'm grossly
: misunderstanding things, forgive me.
:
: One of my main needs as I investigate Search technologies is to restrict
: results based on Ranges of numeric values.  Looking over the archives of
: this list, it seems that lots of people have run into problems dealing
: with this.  In particular, whenever someone asks a question about "Numeric
: Ranges" the question seem to always involve one (or more) of the
: following:
:
:    (a) Lexical sorting puts 11 in the range "1 TO 5"
:    (b) Dates (or Dates and Times)
:    (c) BooleanQuery$TooManyClauses Exceptions
:    (d) Should I use a filter?
:
: (a) is a solved problem as long as you use a formatter like
: LongField.java[1]
:
: (b) is really nothing more then a special case of dealing with generic
: numeric values.  While there are certainly special purposes solutions that
: sometimes apply to dealing with Date ranges, any good solution for dealing
: with raw numeric ranges can be applied to Dates (and Times)
:
: (c) is a situation that seems to come up a lot because of the way
: RangeQuery works.  The rewrite method walks all of the Terms in the index
: starting with "lowerTerm" and builds up BooleanQuery containing a separate
: TermQuery for every Term found, until it reaches the upperTerm.  This
: causes a range search of "0001 TO 1000" to generate a BooleanQuery with N
: clauses, where N is the quantity of unique values in the field which are
: lexically greater then 0001 and lexically less then 1000.  depending on
: the nature of your data, this might be 0 BooleanClauses, or it might be
: 1000 BooleanClauses; but the list is built before the search is ever even
: executed.
:
: At first, this may seem really strange -- I know I was certainly confused
: -- but there is a very good reason for it: Ultimately RangeQuery still
: provides you with a meaningful score for each document, based on the
: frequency (and quantity) of terms that document has in the range [2].  In
: order to do that, it has to expand itself, but what if you don't care if
: your Range restriction impacts the Score? [3]
:
: Which brings us to...
:
: (c) Filtering.  Filters in general make a lot of sense to me.  They are a
: way to specify (at query time) that only a certain subset of the index
: should be considered for results.  The Filter class has a very straight
: forward API that seems very easy to subclass to get the behavior I want.
: The Query API on the other hand ... I freely admit, that I can't make
: heads or tails out of it.  I don't even know where I would begin to try
: and write a new subclass of Query if I wanted to.
:
: I would think that most people who want to do a "numeric range
: restriction" on their data, probably don't care about the Scoring benefits
: of RangeQuery.  Looking at the code base, the way DateFilter works seems
: like it provides an ideal solution to any sort of Range restriction (not
: just Dates) that *should* be more efficient then using RangeQuery when
: dealing with an unbounded value set. (Both approaches need to iterate over
: all of the terms in the specified field using TermEnum, but RangeQuery has
: to build up an set of BooleanQuery objects for each matching term, and
: then each of those queries have to help score the documents -- DateFilter
: on the other hand only has to maintain a single BitSet of documents that
: it finds as it iterates)
:
: But I was surprised then to see the following quote from "Erik Hatcher" in
: the archives:
:
:   "In fact, DateFilter by itself is practically of no use, I think." [4]
:
: ...Erik goes on to suggest that given "a set of canned date ranges", it
: doesn't really matter if you use a RangeQuery or a DateFilter -- as long
: as you cache them to reuse them (with something like CachingWrappingFilter
: or QueryFilter).  I'm hoping that he might elaborate on that comment?
:
: As a test, I wrote a "RangeFilter" which borrows heavily from DateFilter
: to both convince myself it could work, and to do a comparison between it
: and RangeQuery. [5] Based on my limited tests, using a Filter to restrict
: to a Range is a lot faster then using RangeQuery -- independent of
: caching.
:
: The attachment contains my RangeFilter, a unit test that demonstrates it,
: and a Benchmarking unit test that does a side-by-side comparison with
: RangeQuery [6].  If developers feel that this class is useful, then by all
: means roll it into the code base.  (90% of it is cut/pasted from
: DateFilter/RangeQuery anyway)
:
:
:     Comments? ... Questions? ... Answers?
:
:
:
: Footnotes:
:
: [1] It seems to me this class is extremely useful, does anyone know
:     if there's a particular reason it hasn't been added to the main Lucene
:     codebase?
:     http://www.mail-archive.com/lucene-dev@jakarta.apache.org/msg04790.html
:
: [2] Take a look at RangeQueryScoreDemo.java in the attachment, which
:     produces output something like this...
:        Range Search for: 'apple' TO 'dog'
:        0.40924072 ... bed dog emu
:        0.38014847 ... DOG
:        0.2825246 ... cat
:        0.17657787 ... apple emu
:        0.12671615 ... dog
:
: [3] According to the list archives "Matt Quail" mentioned in May that
:     he was working on a "QuickRangeQuery" class that wouldn't have the
:     BooleanQuery limitation, at the expense of always scoring "1.0",
:     but I haven't seen any mention of anything like it since.  Is Matt
:     still an active list member?  Matt, is this something you're still
:     pursuing?
:     http://nagoya.apache.org/eyebrowse/ReadMsg?msgId=1659395
:
: [4] http://www.mail-archive.com/lucene-user@jakarta.apache.org/msg07015.html
:
: [5] The only major difference between my RangeFilter and DateFilter is
:     that RangeFilter supports options for inclusion/exclusion
:     (individually for the low/high terms I might add).  But for the
:     purposes of a benchmark, doing the same thing with DateFilter would
:     have worked fine.
:
: [6] If you have ant, see "ant -projecthelp"; otherwise, read the top
:     of build.xml
:
:
:
: --
:
: -------------------------------------------------------------------
: "Oh, you're a tricky one."                        Chris M Hostetter
:      -- Trisha Weir                    hossman@rescomp.berkeley.edu
:
:


--

-------------------------------------------------------------------
"Oh, you're a tricky one."                        Chris M Hostetter
     -- Trisha Weir                    hossman@rescomp.berkeley.edu

---441870778-683642203-1101177224=:19461
Content-Type: TEXT/xml; charset=US-ASCII; name="build.xml"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.58.0411221833440.19461@hal.rescomp.berkeley.edu>
Content-Description: 
Content-Disposition: attachment; filename="build.xml"

DQo8cHJvamVjdCBuYW1lPSJwcm90by1yYW5nZWZpbHRlciIgZGVmYXVsdD0i
Y2xhc3NlcyI+DQogPGRlc2NyaXB0aW9uPg0KICBBIFJhbmdlRmlsdGVyIGNs
YXNzIGZvciBMdWNlbmUsIGFsb25nIHdpdGggc29tZSBzaW1wbGUgSlVuaXQN
CiAgY2xhc3NlcyB0byB0ZXN0IGl0IHByb3ZpZGUgYSBjb21wYXJpc29uIGJl
bmNobWFyayBhZ2FpbnN0IFJhbmdlUXVlcnkuDQoNCiAgWW91IHdpbGwgbmVl
ZCB0byBtb2RpZnkgdGhlICJteS5jbGFzc3BhdGgiIGRlY2xhcmF0aW9uIGlu
IHRoaXMNCiAgYnVpbGQueG1sIGJlZm9yZSBpdCB3aWxsIGRvIG11Y2ggZm9y
IHlvdS4NCg0KICBJbmNsdWRlZCBGaWxlczoNCg0KICAgIFJhbmdlUXVlcnlT
Y29yZURlbW8uamF2YSAgIC0gc3RhbmRhbG9uZSBkZW1vIG9mIFJhbmdlUXVl
cnkncyBzY29yaW5nDQogICAgUmFuZ2VGaWx0ZXIuamF2YSAgICAgICAgICAg
LSBtYWluIGNvZGUgb2YgdGhlIEZpbHRlcg0KICAgIEJhc2VUZXN0UmFuZ2VG
aWx0ZXIuamF2YSAgIC0gYmFzZSBjbGFzcyBKVW5pdCB0ZXN0IHRoYXQgYnVp
bGQgYSBSQU0gaW5kZXgNCiAgICBCZW5jaFRlc3RSYW5nZUZpbHRlci5qYXZh
ICAtIGJlbmNobWFyayB3cml0dGVuIGFzIGEgSlVuaXQgdGVzdA0KICAgIFRl
c3RSYW5nZUZpbHRlci5qYXZhICAgICAgIC0gSlVuaXQgdGVzdCBvZiBSYW5n
ZUZpbHRlcg0KICAgIGJ1aWxkLnhtbCAgICAgICAgICAgICAgICAgIC0gdGhp
cyBmaWxlDQoNCiA8L2Rlc2NyaXB0aW9uPg0KICANCiA8cGF0aCBpZD0ibXku
Y2xhc3NwYXRoIj4NCiAgPCEtLSBtb2RpZnkgY2xhc3NwYXRoIGFzIG5lY2Nl
c3NhcnkgLS0+DQogIDwhLS0gdGhlIG1haW4gdGhpbmdzIG5lZWRlZCBhcmUg
bHVjZW5lIDEuNC4yIGFuZCBqdW5pdCAtLT4NCiAgPHBhdGhlbGVtZW50IHBh
dGg9Ii4iLz4NCiAgPHBhdGhlbGVtZW50IGxvY2F0aW9uPSIuLi9sdWNlbmUv
bHVjZW5lLTEuNC4yL2x1Y2VuZS0xLjQuMi5qYXIiLz4NCiAgPGZpbGVzZXQg
ZGlyPSIuLi8uLi9jb2RlL2N2cy9zc2EvamF2YS9kaXN0LyIgaW5jbHVkZXM9
IioqLyouamFyIiAvPg0KIDwvcGF0aD4NCg0KIDx0YXJnZXQgbmFtZT0iY2xh
c3NlcyIgZGVzY3JpcHRpb249IkNvbXBpbGVzIGFsbCB0aGUgY29kZS4iID4N
CiAgPGphdmFjIHNyY2Rpcj0iLiIgZGVzdGRpcj0iLiIgZGVidWc9InRydWUi
Pg0KICAgIDxjbGFzc3BhdGggcmVmaWQ9Im15LmNsYXNzcGF0aCIgLz4NCiAg
PC9qYXZhYz4NCiA8L3RhcmdldD4NCg0KIDx0YXJnZXQgbmFtZT0idGVzdCIg
ZGVwZW5kcz0iY2xhc3NlcyIgZGVzY3JpcHRpb249IlJ1biB1bml0IHRlc3Rz
Ij4NCiAgPGp1bml0IHByaW50c3VtbWFyeT0ib24iPg0KICAgIDx0ZXN0IG5h
bWU9IlRlc3RSYW5nZUZpbHRlciIgLz4NCiAgICA8Zm9ybWF0dGVyIHR5cGU9
InBsYWluIiB1c2VmaWxlPSJmYWxzZSIgLz4NCiAgICA8Y2xhc3NwYXRoIHJl
ZmlkPSJteS5jbGFzc3BhdGgiIC8+DQogIDwvanVuaXQ+DQogPC90YXJnZXQ+
DQoNCiA8dGFyZ2V0IG5hbWU9ImJlbmNoIiBkZXBlbmRzPSJjbGFzc2VzIg0K
ICAgICAgICAgZGVzY3JpcHRpb249IlJ1biBzaW1wbGUgYmVuY2htYXJrIG9m
IFJhbmdlUXVlcnkgdnMgUmFuZ2VGaWx0ZXIiPg0KICA8anVuaXQgcHJpbnRz
dW1tYXJ5PSJvbiI+DQogICAgPHRlc3QgbmFtZT0iQmVuY2hUZXN0UmFuZ2VG
aWx0ZXIiIC8+DQogICAgPGZvcm1hdHRlciB0eXBlPSJwbGFpbiIgdXNlZmls
ZT0iZmFsc2UiIC8+DQogICAgPGNsYXNzcGF0aCByZWZpZD0ibXkuY2xhc3Nw
YXRoIiAvPg0KICA8L2p1bml0Pg0KIDwvdGFyZ2V0PiANCg0KIDx0YXJnZXQg
bmFtZT0iZGVtbyIgZGVwZW5kcz0iY2xhc3NlcyINCiAgICAgICAgIGRlc2Ny
aXB0aW9uPSJSdW4gYSBkZW1vIG9mIFJhbmdlUXVlcnkgYW5kIHRoZSB3YXkg
aXQgc2NvcmVzIj4NCiAgPGphdmEgY2xhc3NuYW1lPSJSYW5nZVF1ZXJ5U2Nv
cmVEZW1vIj4NCiAgICA8Y2xhc3NwYXRoIHJlZmlkPSJteS5jbGFzc3BhdGgi
IC8+DQogIDwvamF2YT4NCiA8L3RhcmdldD4gDQoNCjwvcHJvamVjdD4NCg==

---441870778-683642203-1101177224=:19461
Content-Type: TEXT/x-java; charset=US-ASCII; name="BaseTestRangeFilter.java"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.58.0411221833441.19461@hal.rescomp.berkeley.edu>
Content-Description: 
Content-Disposition: attachment; filename="BaseTestRangeFilter.java"

DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguVGVybTsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFJlYWRlcjsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFdyaXRlcjsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guUXVlcnk7DQppbXBvcnQgb3Jn
LmFwYWNoZS5sdWNlbmUuc2VhcmNoLkhpdHM7DQppbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuc2VhcmNoLkluZGV4U2VhcmNoZXI7DQppbXBvcnQgb3JnLmFw
YWNoZS5sdWNlbmUuc3RvcmUuUkFNRGlyZWN0b3J5Ow0KaW1wb3J0IG9yZy5h
cGFjaGUubHVjZW5lLmFuYWx5c2lzLlNpbXBsZUFuYWx5emVyOw0KaW1wb3J0
IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRvY3VtZW50Ow0KaW1wb3J0
IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZpZWxkOw0KaW1wb3J0IG9y
Zy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRhdGVGaWVsZDsNCmltcG9ydCBv
cmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guUXVlcnk7DQppbXBvcnQgb3JnLmFw
YWNoZS5sdWNlbmUuc2VhcmNoLlRlcm1RdWVyeTsNCmltcG9ydCBvcmcuYXBh
Y2hlLmx1Y2VuZS5zZWFyY2guRmlsdGVyOw0KaW1wb3J0IG9yZy5hcGFjaGUu
bHVjZW5lLnNlYXJjaC5EYXRlRmlsdGVyOw0KDQppbXBvcnQgamF2YS5pby5J
T0V4Y2VwdGlvbjsNCmltcG9ydCBqYXZhLnV0aWwuUmFuZG9tOw0KDQppbXBv
cnQganVuaXQuZnJhbWV3b3JrLlRlc3RDYXNlOw0KDQpwdWJsaWMgY2xhc3Mg
QmFzZVRlc3RSYW5nZUZpbHRlciBleHRlbmRzIFRlc3RDYXNlIHsNCg0KICAg
IHB1YmxpYyBzdGF0aWMgZmluYWwgYm9vbGVhbiBGID0gZmFsc2U7DQogICAg
cHVibGljIHN0YXRpYyBmaW5hbCBib29sZWFuIFQgPSB0cnVlOw0KICAgIA0K
ICAgIFJBTURpcmVjdG9yeSBpbmRleCA9IG5ldyBSQU1EaXJlY3RvcnkoKTsN
CiAgICBSYW5kb20gcmFuZCA9IG5ldyBSYW5kb20oMTAxKTsgLy8gdXNlIGEg
c2V0IHNlZWQgdG8gdGVzdCBpcyBkZXRlcm1pbmlzdGljDQogICAgDQogICAg
aW50IG1heFIgPSBJbnRlZ2VyLk1JTl9WQUxVRTsNCiAgICBpbnQgbWluUiA9
IEludGVnZXIuTUFYX1ZBTFVFOw0KDQogICAgaW50IG1pbklkID0gMDsNCiAg
ICBpbnQgbWF4SWQgPSAxMDAwMDsNCg0KICAgIHN0YXRpYyBmaW5hbCBpbnQg
aW50TGVuZ3RoID0gSW50ZWdlci50b1N0cmluZyhJbnRlZ2VyLk1BWF9WQUxV
RSkubGVuZ3RoKCk7DQogICAgDQogICAgLyoqDQogICAgICogYSBzaW1wbGUg
cGFkZGluZyBmdW5jdGlvbiB0aGF0IHNob3VsZCB3b3JrIHdpdGggYW55IGlu
dA0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgU3RyaW5nIHBhZChpbnQg
bikgew0KICAgICAgICBTdHJpbmdCdWZmZXIgYiA9IG5ldyBTdHJpbmdCdWZm
ZXIoNDApOw0KICAgICAgICBTdHJpbmcgcCA9ICIwIjsNCiAgICAgICAgaWYg
KG4gPCAwKSB7DQogICAgICAgICAgICBwID0gIi0iOw0KICAgICAgICAgICAg
biA9IEludGVnZXIuTUFYX1ZBTFVFICsgbiArIDE7DQogICAgICAgIH0NCiAg
ICAgICAgYi5hcHBlbmQocCk7DQogICAgICAgIFN0cmluZyBzID0gSW50ZWdl
ci50b1N0cmluZyhuKTsNCiAgICAgICAgZm9yIChpbnQgaSA9IHMubGVuZ3Ro
KCk7IGkgPD0gaW50TGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGIuYXBw
ZW5kKCIwIik7DQogICAgICAgIH0NCiAgICAgICAgYi5hcHBlbmQocyk7DQog
ICAgICAgIA0KICAgICAgICByZXR1cm4gYi50b1N0cmluZygpOw0KICAgIH0N
Cg0KICAgIHB1YmxpYyBCYXNlVGVzdFJhbmdlRmlsdGVyKFN0cmluZyBuYW1l
KSB7DQoJc3VwZXIobmFtZSk7DQogICAgICAgIGJ1aWxkKCk7DQogICAgfQ0K
ICAgIHB1YmxpYyBCYXNlVGVzdFJhbmdlRmlsdGVyKCkgew0KICAgICAgICBi
dWlsZCgpOw0KICAgIH0NCiAgICANCiAgICBwcml2YXRlIHZvaWQgYnVpbGQo
KSB7DQogICAgICAgIHRyeSB7DQogICAgICAgICAgICANCiAgICAgICAgICAg
IC8qIGJ1aWxkIGFuIGluZGV4ICovDQogICAgICAgICAgICBJbmRleFdyaXRl
ciB3cml0ZXIgPSBuZXcgSW5kZXhXcml0ZXIoaW5kZXgsDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFNp
bXBsZUFuYWx5emVyKCksIFQpOw0KDQogICAgICAgICAgICBmb3IgKGludCBk
ID0gbWluSWQ7IGQgPD0gbWF4SWQ7IGQrKykgew0KICAgICAgICAgICAgICAg
IERvY3VtZW50IGRvYyA9IG5ldyBEb2N1bWVudCgpOw0KICAgICAgICAgICAg
ICAgIGRvYy5hZGQoRmllbGQuS2V5d29yZCgiaWQiLHBhZChkKSkpOw0KICAg
ICAgICAgICAgICAgIGludCByPSByYW5kLm5leHRJbnQoKTsNCiAgICAgICAg
ICAgICAgICBpZiAobWF4UiA8IHIpIHsNCiAgICAgICAgICAgICAgICAgICAg
bWF4UiA9IHI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAg
IGlmIChyIDwgbWluUikgew0KICAgICAgICAgICAgICAgICAgICBtaW5SID0g
cjsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgZG9jLmFk
ZChGaWVsZC5LZXl3b3JkKCJyYW5kIixwYWQocikpKTsNCiAgICAgICAgICAg
ICAgICBkb2MuYWRkKEZpZWxkLktleXdvcmQoImJvZHkiLCJib2R5IikpOw0K
ICAgICAgICAgICAgICAgIHdyaXRlci5hZGREb2N1bWVudChkb2MpOw0KICAg
ICAgICAgICAgfQ0KICAgICAgICAgICAgDQogICAgICAgICAgICB3cml0ZXIu
b3B0aW1pemUoKTsNCiAgICAgICAgICAgIHdyaXRlci5jbG9zZSgpOw0KDQog
ICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiBlKSB7DQogICAgICAgICAgICB0
aHJvdyBuZXcgUnVudGltZUV4Y2VwdGlvbigiY2FuJ3QgYnVpbGQgaW5kZXgi
LCBlKTsNCiAgICAgICAgfQ0KDQogICAgfQ0KDQogICAgcHVibGljIHZvaWQg
dGVzdFBhZCgpIHsNCg0KICAgICAgICBpbnRbXSB0ZXN0cyA9IG5ldyBpbnRb
XSB7DQogICAgICAgICAgICAtOTk5OTk5OSwgLTk5NTYwLCAtMTAwLCAtMywg
LTEsIDAsIDMsIDksIDEwLCAxMDAwLCA5OTk5OTk5OTkNCiAgICAgICAgfTsN
CiAgICAgICAgZm9yIChpbnQgaSA9IDA7IGkgPCB0ZXN0cy5sZW5ndGggLSAx
OyBpKyspIHsNCiAgICAgICAgICAgIGludCBhID0gdGVzdHNbaV07DQogICAg
ICAgICAgICBpbnQgYiA9IHRlc3RzW2krMV07DQogICAgICAgICAgICBTdHJp
bmcgYWEgPSBwYWQoYSk7DQogICAgICAgICAgICBTdHJpbmcgYmIgPSBwYWQo
Yik7DQogICAgICAgICAgICBTdHJpbmcgbGFiZWwgPSBhICsgIjoiICsgYWEg
KyAiIHZzICIgKyBiICsgIjoiICsgYmI7DQogICAgICAgICAgICBhc3NlcnRF
cXVhbHMoImxlbmd0aCBvZiAiICsgbGFiZWwsIGFhLmxlbmd0aCgpLCBiYi5s
ZW5ndGgoKSk7DQogICAgICAgICAgICBhc3NlcnRUcnVlKCJjb21wYXJlIGxl
c3MgdGhhbiAiICsgbGFiZWwsIGFhLmNvbXBhcmVUbyhiYikgPCAwKTsNCiAg
ICAgICAgfQ0KDQogICAgfQ0KDQp9DQo=

---441870778-683642203-1101177224=:19461
Content-Type: TEXT/x-java; charset=US-ASCII; name="BenchTestRangeFilter.java"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.58.0411221833442.19461@hal.rescomp.berkeley.edu>
Content-Description: 
Content-Disposition: attachment; filename="BenchTestRangeFilter.java"

DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguVGVybTsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFJlYWRlcjsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFdyaXRlcjsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guUXVlcnk7DQppbXBvcnQgb3Jn
LmFwYWNoZS5sdWNlbmUuc2VhcmNoLkhpdHM7DQppbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuc2VhcmNoLkluZGV4U2VhcmNoZXI7DQppbXBvcnQgb3JnLmFw
YWNoZS5sdWNlbmUuc3RvcmUuUkFNRGlyZWN0b3J5Ow0KaW1wb3J0IG9yZy5h
cGFjaGUubHVjZW5lLmFuYWx5c2lzLlNpbXBsZUFuYWx5emVyOw0KaW1wb3J0
IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRvY3VtZW50Ow0KaW1wb3J0
IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZpZWxkOw0KaW1wb3J0IG9y
Zy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRhdGVGaWVsZDsNCmltcG9ydCBv
cmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guUXVlcnk7DQppbXBvcnQgb3JnLmFw
YWNoZS5sdWNlbmUuc2VhcmNoLlRlcm1RdWVyeTsNCmltcG9ydCBvcmcuYXBh
Y2hlLmx1Y2VuZS5zZWFyY2guQm9vbGVhblF1ZXJ5Ow0KaW1wb3J0IG9yZy5h
cGFjaGUubHVjZW5lLnNlYXJjaC5SYW5nZVF1ZXJ5Ow0KaW1wb3J0IG9yZy5h
cGFjaGUubHVjZW5lLnNlYXJjaC5GaWx0ZXI7DQppbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuc2VhcmNoLkRhdGVGaWx0ZXI7DQoNCmltcG9ydCBqYXZhLmlv
LklPRXhjZXB0aW9uOw0KaW1wb3J0IGphdmEudXRpbC5SYW5kb207DQoNCmlt
cG9ydCBqdW5pdC5mcmFtZXdvcmsuVGVzdENhc2U7DQoNCnB1YmxpYyBjbGFz
cyBCZW5jaFRlc3RSYW5nZUZpbHRlciBleHRlbmRzIEJhc2VUZXN0UmFuZ2VG
aWx0ZXIgew0KDQogICAgLyoqIHVzZSBhIGZpeGVkIHNlZWQgc28gdGVzdHMg
YXJlIGRldGVybWluaXN0aWMgYW5kIGNvbXBhcmFibGUgKi8NCiAgICBwdWJs
aWMgc3RhdGljIGZpbmFsIGludCBTRUVEID0gMjM7DQoNCiAgICBwdWJsaWMg
c3RhdGljIGZpbmFsIGludCBJVEVSUyA9IDEwMDsNCiAgICANCiAgICBwdWJs
aWMgQmVuY2hUZXN0UmFuZ2VGaWx0ZXIoU3RyaW5nIG5hbWUpIHsNCglzdXBl
cihuYW1lKTsNCiAgICB9DQogICAgcHVibGljIEJlbmNoVGVzdFJhbmdlRmls
dGVyKCkgew0KICAgICAgICBzdXBlcigpOw0KICAgIH0NCg0KICAgIC8qKg0K
ICAgICAqIHRlc3QgdGhlIGV4ZWN1dGlvbiBvZiBzZXZlcmFsIHF1ZXJpZXMg
dXNpbmcgdGhlIFJhbmdlRmlsdGVyDQogICAgICovDQogICAgcHVibGljIHZv
aWQgdGVzdFJhbmdlRmlsdGVyKCkgdGhyb3dzIElPRXhjZXB0aW9uIHsNCg0K
ICAgICAgICBkb1Rlc3QNCiAgICAgICAgICAgIChuZXcgVGVzdFNlYXJjaGVy
ICgpIHsNCiAgICAgICAgICAgICAgICAgICAgcHVibGljIEhpdHMgc2VhcmNo
KEluZGV4U2VhcmNoZXIgcywgUXVlcnkgcSwgU3RyaW5nIGYsDQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdHJpbmcgbG93LCBT
dHJpbmcgaGlnaCwNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGJvb2xlYW4gaW5jbHVzaXZlKSB0aHJvd3MgSU9FeGNlcHRpb24g
ew0KICAgICAgICAgICAgICAgICAgICAgICAgRmlsdGVyIGZmID0gbmV3IFJh
bmdlRmlsdGVyKGYsIGxvdywgaGlnaCwNCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmNsdXNpdmUsIGlu
Y2x1c2l2ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcy5z
ZWFyY2gocSxmZik7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAg
ICAgICAgICB9KTsNCiAgICB9DQogICAgDQogICAgLyoqDQogICAgICogdGVz
dCB0aGUgZXhlY3V0aW9uIG9mIHNldmVyYWwgcXVlcmllcyB1c2luZyBSYW5n
ZVF1ZXJ5DQogICAgICovDQogICAgcHVibGljIHZvaWQgdGVzdFJhbmdlUXVl
cnkoKSB0aHJvd3MgSU9FeGNlcHRpb24gew0KICAgICAgICANCiAgICAgICAg
LyogbWFrZSBzdXJlIFJhbmdlUXVlcnkgd2lsbCB3b3JrIHdpdGggdGhlIG1h
eCBwb3NzaWJsZSByYW5nZSBzaXplICovDQogICAgICAgIEJvb2xlYW5RdWVy
eS5zZXRNYXhDbGF1c2VDb3VudChtYXhJZCArIDEpOw0KICAgICAgICANCiAg
ICAgICAgZG9UZXN0DQogICAgICAgICAgICAobmV3IFRlc3RTZWFyY2hlciAo
KSB7DQogICAgICAgICAgICAgICAgICAgIHB1YmxpYyBIaXRzIHNlYXJjaChJ
bmRleFNlYXJjaGVyIHMsIFF1ZXJ5IHEsIFN0cmluZyBmLA0KICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RyaW5nIGxvdywgU3Ry
aW5nIGhpZ2gsDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBib29sZWFuIGluY2x1c2l2ZSkgdGhyb3dzIElPRXhjZXB0aW9uIHsN
CiAgICAgICAgICAgICAgICAgICAgICAgIFF1ZXJ5IHIgPSBuZXcgUmFuZ2VR
dWVyeShuZXcgVGVybShmLCBsb3cpLA0KICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBUZXJtKGYsIGhpZ2gp
LA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgIGluY2x1c2l2ZSk7DQogICAgICAgICAgICAgICAgICAgICAgICBC
b29sZWFuUXVlcnkgcXEgPSBuZXcgQm9vbGVhblF1ZXJ5KCk7DQogICAgICAg
ICAgICAgICAgICAgICAgICBxcS5hZGQocSx0cnVlLGZhbHNlKTsNCiAgICAg
ICAgICAgICAgICAgICAgICAgIHFxLmFkZChyLHRydWUsZmFsc2UpOw0KICAg
ICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHMuc2VhcmNoKHFxKTsNCiAg
ICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0pOw0KDQog
ICAgfQ0KDQogICAgcHJvdGVjdGVkIHZvaWQgZG9UZXN0KFRlc3RTZWFyY2hl
ciB0ZXN0ZXIpIHRocm93cyBJT0V4Y2VwdGlvbiB7DQoNCiAgICAgICAgUmFu
ZG9tIHIgPSBuZXcgUmFuZG9tKFNFRUQpOw0KICAgICAgICBJbmRleFJlYWRl
ciByZWFkZXIgPSBJbmRleFJlYWRlci5vcGVuKGluZGV4KTsNCglJbmRleFNl
YXJjaGVyIHNlYXJjaCA9IG5ldyBJbmRleFNlYXJjaGVyKHJlYWRlcik7DQoN
CiAgICAgICAgaW50W10gY291bnRzID0gbmV3IGludFtJVEVSU107DQoNCiAg
ICAgICAgLyogcGljayBzb21lIHJhbmRvbSBJZCByYW5nZXMgdGhhdCBhcmUg
c21hbGwgYW5kIHNlYXJjaCB0aGVtICovDQogICAgICAgIGZvciAoaW50IGkg
PTA7IGkgPCBJVEVSUzsgaSsrKSB7DQogICAgICAgICAgICBpbnQgYSA9IG1p
bklkICsgci5uZXh0SW50KChtYXhJZCAtIG1pbklkKSAvIDIpOw0KICAgICAg
ICAgICAgaW50IGIgPSBhICsgMTAwOw0KICAgICAgICAgICAgDQogICAgICAg
ICAgICBTdHJpbmcgYWEgPSBwYWQoYSk7DQogICAgICAgICAgICBTdHJpbmcg
YmIgPSBwYWQoYik7DQogICAgICAgICAgICANCiAgICAgICAgICAgIEhpdHMg
cmVzdWx0Ow0KICAgICAgICAgICAgUXVlcnkgcSA9IG5ldyBUZXJtUXVlcnko
bmV3IFRlcm0oImJvZHkiLCJib2R5IikpOw0KDQogICAgICAgICAgICByZXN1
bHQgPSB0ZXN0ZXIuc2VhcmNoKHNlYXJjaCxxLCJpZCIsYWEsYmIsdHJ1ZSk7
DQogICAgICAgICAgICBjb3VudHNbaV0gPSByZXN1bHQubGVuZ3RoKCk7DQog
ICAgICAgIH0NCiAgICAgICAgICAgIA0KDQogICAgICAgIC8qIHBpY2sgc29t
ZSByYW5kb20gSWQgcmFuZ2VzIHRoYXQgYXJlIChvbiBhdmVyYWdlKSBoYWxm
DQogICAgICAgICAqIHRoZSBzaXplIG9mIHRoZSBpbmRleCBhbmQgc2VhcmNo
IHRoZW0NCiAgICAgICAgICovDQogICAgICAgIGZvciAoaW50IGkgPTA7IGkg
PCBJVEVSUzsgaSsrKSB7DQogICAgICAgICAgICBpbnQgYSA9IG1pbklkICsg
ci5uZXh0SW50KChtYXhJZCAtIG1pbklkKSAvIDIpOw0KICAgICAgICAgICAg
aW50IGIgPSBtYXhJZCAtIHIubmV4dEludCgobWF4SWQgLSBtaW5JZCkgLyAy
KTsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgU3RyaW5nIGFhID0gcGFk
KGEpOw0KICAgICAgICAgICAgU3RyaW5nIGJiID0gcGFkKGIpOw0KICAgICAg
ICAgICAgDQogICAgICAgICAgICBIaXRzIHJlc3VsdDsNCiAgICAgICAgICAg
IFF1ZXJ5IHEgPSBuZXcgVGVybVF1ZXJ5KG5ldyBUZXJtKCJib2R5IiwiYm9k
eSIpKTsNCg0KICAgICAgICAgICAgcmVzdWx0ID0gdGVzdGVyLnNlYXJjaChz
ZWFyY2gscSwiaWQiLGFhLGJiLHRydWUpOw0KICAgICAgICAgICAgY291bnRz
W2ldID0gcmVzdWx0Lmxlbmd0aCgpOw0KICAgICAgICB9DQoNCiAgICAgICAg
LyogcGljayBzb21lIHJhbmRvbSByYW5kb20gcmFuZ2VzIHRoYXQgYXJlIHNt
YWxsIGFuZCBzZWFyY2ggdGhlbSAqLw0KICAgICAgICBmb3IgKGludCBpID0w
OyBpIDwgSVRFUlM7IGkrKykgew0KICAgICAgICAgICAgaW50IGEgPSBtaW5S
ICsgci5uZXh0SW50KG1heFIgLyAxMDApOw0KICAgICAgICAgICAgaW50IGIg
PSBhICsgNTAwOw0KICAgICAgICAgICAgDQogICAgICAgICAgICBTdHJpbmcg
YWEgPSBwYWQoYSk7DQogICAgICAgICAgICBTdHJpbmcgYmIgPSBwYWQoYik7
DQogICAgICAgICAgICANCiAgICAgICAgICAgIEhpdHMgcmVzdWx0Ow0KICAg
ICAgICAgICAgUXVlcnkgcSA9IG5ldyBUZXJtUXVlcnkobmV3IFRlcm0oImJv
ZHkiLCJib2R5IikpOw0KDQogICAgICAgICAgICByZXN1bHQgPSB0ZXN0ZXIu
c2VhcmNoKHNlYXJjaCxxLCJyYW5kIixhYSxiYix0cnVlKTsNCiAgICAgICAg
ICAgIGNvdW50c1tpXSA9IHJlc3VsdC5sZW5ndGgoKTsNCiAgICAgICAgfQ0K
DQogICAgICAgIC8qIHBpY2sgc29tZSByYW5kb20gSWQgcmFuZ2VzIHRoYXQg
YXJlIChvbiBhdmVyYWdlKSBoYWxmDQogICAgICAgICAqIHRoZSBzaXplIG9m
IHRoZSBpbmRleCBhbmQgc2VhcmNoIHRoZW0NCiAgICAgICAgICovDQogICAg
ICAgIGZvciAoaW50IGkgPTA7IGkgPCBJVEVSUzsgaSsrKSB7DQogICAgICAg
ICAgICBpbnQgYSA9IG1pblIgKyByLm5leHRJbnQoKG1heFIgLyAyKSAtICht
aW5SIC8gMikgLSAxKTsNCiAgICAgICAgICAgIGludCBiID0gbWF4UiAtIHIu
bmV4dEludCgobWF4UiAvIDIpIC0gKG1pblIgLyAyKSAtIDEpOw0KICAgICAg
ICAgICAgDQogICAgICAgICAgICBTdHJpbmcgYWEgPSBwYWQoYSk7DQogICAg
ICAgICAgICBTdHJpbmcgYmIgPSBwYWQoYik7DQogICAgICAgICAgICANCiAg
ICAgICAgICAgIEhpdHMgcmVzdWx0Ow0KICAgICAgICAgICAgUXVlcnkgcSA9
IG5ldyBUZXJtUXVlcnkobmV3IFRlcm0oImJvZHkiLCJib2R5IikpOw0KDQog
ICAgICAgICAgICByZXN1bHQgPSB0ZXN0ZXIuc2VhcmNoKHNlYXJjaCxxLCJy
YW5kIixhYSxiYix0cnVlKTsNCiAgICAgICAgICAgIGNvdW50c1tpXSA9IHJl
c3VsdC5sZW5ndGgoKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAg
DQogICAgfQ0KICAgIA0KICAgIHB1YmxpYyBpbnRlcmZhY2UgVGVzdFNlYXJj
aGVyIHsNCiAgICAgICAgcHVibGljIEhpdHMgc2VhcmNoKEluZGV4U2VhcmNo
ZXIgcywgUXVlcnkgcSwgU3RyaW5nIGYsDQogICAgICAgICAgICAgICAgICAg
ICAgICAgICBTdHJpbmcgbG93LCBTdHJpbmcgaGlnaCwgYm9vbGVhbiBpbmNs
dXNpdmUpDQogICAgICAgICAgICB0aHJvd3MgSU9FeGNlcHRpb247DQogICAg
fQ0KICAgIA0KfQ0K

---441870778-683642203-1101177224=:19461
Content-Type: TEXT/x-java; charset=US-ASCII; name="RangeFilter.java"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.58.0411221833443.19461@hal.rescomp.berkeley.edu>
Content-Description: 
Content-Disposition: attachment; filename="RangeFilter.java"

DQoNCi8qKg0KICoNCiAqIFRoaXMgY29kZSBib3Jyb3dzIGhlYXZpbHkgZnJv
bSBSYW5nZVF1ZXJ5LmphdmEgYW5kIERhdGVGaWx0ZXIuamF2YQ0KICogYXZh
aWxhYmxlIGhlcmUuLi4NCiAqICAgaHR0cDovL2pha2FydGEuYXBhY2hlLm9y
Zy9sdWNlbmUvDQogKg0KICogVGhpcyBpcyB0aGUgKGMpIGFuZCBsaWNlbmNl
IGZyb20gdGhvc2UgZmlsZXMuLi4uDQogKg0KICoNCiAqIENvcHlyaWdodCAy
MDA0IFRoZSBBcGFjaGUgU29mdHdhcmUgRm91bmRhdGlvbg0KICoNCiAqIExp
Y2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAg
KHRoZSAiTGljZW5zZSIpOw0KICogeW91IG1heSBub3QgdXNlIHRoaXMgZmls
ZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLg0KICog
WW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0DQogKg0K
ICogICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNF
LTIuMA0KICoNCiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxh
dyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUNCiAqIGRpc3Ry
aWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFu
ICJBUyBJUyIgQkFTSVMsDQogKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09O
RElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGll
ZC4NCiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1
YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQNCiAqIGxpbWl0YXRpb25z
IHVuZGVyIHRoZSBMaWNlbnNlLg0KICovDQoNCmltcG9ydCBqYXZhLnV0aWwu
Qml0U2V0Ow0KaW1wb3J0IGphdmEudXRpbC5EYXRlOw0KaW1wb3J0IGphdmEu
aW8uSU9FeGNlcHRpb247DQoNCmltcG9ydCBvcmcuYXBhY2hlLmx1Y2VuZS5z
ZWFyY2guRmlsdGVyOw0KaW1wb3J0IG9yZy5hcGFjaGUubHVjZW5lLmluZGV4
LlRlcm07DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguVGVybURv
Y3M7DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguVGVybUVudW07
DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguSW5kZXhSZWFkZXI7
DQoNCi8qKg0KICogQSBGaWx0ZXIgdGhhdCByZXN0cmljdHMgc2VhcmNoIHJl
c3VsdHMgdG8gYSByYW5nZSBvZiB2YWx1ZXMgaW4gYSBnaXZlbg0KICogZmll
bGVkLg0KICogDQogKiA8cD4NCiAqIFRoaXMgY29kZSBib3Jyb3dzIGhlYXZp
bHkgZnJvbSBSYW5nZVF1ZXJ5LCBidXQgaW1wbGltZW50ZWQgYXMgYSBGaWx0
ZXINCiAqIChtdWNoIGxpa2UgRGF0ZUZpbHRlcikNCiAqIDwvcD4NCiAqIDxw
Pg0KICogSW4gdGhlb3J5LCB0aGUgYWR2YW50YWdlIG9mIHVzaW5nIFJhbmdl
RmlsdGVyIGluc3RlYWQgb2YgYSBSYW5nZVF1ZXJ5DQogKiBpcyB0aGF0IHdo
aWxlIGJvdGggdXNlIGEgVGVybUVudW0gdG8gd2FsayB0aGUgaW5kZXggZnJv
bSB0aGUgbG93IGVuZA0KICogb2YgdGhlIHJhbmdlIHRvIGh0ZSBoaWdoIGVu
ZCwgUmFuZ2VRdWVyeSBkb2VzIHRoaXMgdG8gYnVpbGQgdXAgYSBsaXN0DQog
KiBvZiBxdWVyaWVzLCB3aGljaCB0aGVuIGFsbCBoYXZlIHRvIGJlIHNlYXJj
aGVkIGFnYWluc3QgKHRvIGNvbXB1dGUNCiAqIHNjb3JlKS4gIEEgRmlsdGVy
IG9uIHRoZSBvdGhlciBoYW5kIGRvZXNuJ3QgY2FyZSBhYm91dCBzY29yaW5n
IChhbmQNCiAqIGluIG15IG1pbmQgLS0gbmVpdGhlciBkbyBtdXN0IHBlb3Bs
ZSB3aG8gd2FudCB0byBkbyBSQW5nZSByZXN0cmljdGlvbnMNCiAqIGluIHRo
ZWlyIHNlYXJjaGVzKSBzbyBhcyBpdCB3YWxrcyB0aGUgdGVybXMgaXRjYW4g
anVzdCBidWlsZCB1cCB0aGUNCiAqIHJlc3VsdGluZyBCaXRTZXQgb2YgZG9j
cyB0aGF0IGNvbnRhaW4gdGVybXMgaW4gdGhlIHJhbmdlLg0KICogPC9wPg0K
ICoNCiAqIDxwPg0KICogU2luY2UgRGF0ZUZpbHRlcidzIGNvbnN0cnVjdG9y
IG9ubHkgZGVhbHMgd2l0aCBzdHJpbmdzLCB5b3UgY291bGQganVzdA0KICog
dXNlIGl0IGluc3RlYWQ7IGJ1dCB0aGlzIGNsYXNzIGhhcyB0aGUgYWRkZWQg
YWR2YW50YWdlIG9mIGFsbG93aW5nIHlvdQ0KICogdG8gc3BlY2lmeSB3ZXRo
ZXIgdGhlIHVwcGVyIG9mIGxvd2VyIGJvdW5kcyBzaG91bGQgYmUgaW5jbHVk
ZWQgLS0NCiAqIGluZGVwZW5kYW50bHkuDQogKiA8L3A+DQogKi8NCnB1Ymxp
YyBjbGFzcyBSYW5nZUZpbHRlciBleHRlbmRzIEZpbHRlciB7DQogICAgDQog
ICAgcHJpdmF0ZSBTdHJpbmcgZjsNCiAgICBwcml2YXRlIFN0cmluZyBsb3c7
DQogICAgcHJpdmF0ZSBTdHJpbmcgdXBwOw0KICAgIHByaXZhdGUgYm9vbGVh
biBpbmNsTG93ZXI7DQogICAgcHJpdmF0ZSBib29sZWFuIGluY2xVcHBlcjsN
Cg0KICAgIC8qKg0KICAgICAqIEBwYXJhbSBmaWVsZCBUaGUgZmllbGQgdGhp
cyByYW5nZSBhcHBsaWVzIHRvDQogICAgICogQHBhcmFtIGxvd2VyIFRoZSBs
b3dlciBib3VuZCBvbiB0aGlzIHJhbmdlDQogICAgICogQHBhcmFtIHVwcGVy
IFRoZSB1cHBlciBib3VuZCBvbiB0aGlzIHJhbmdlDQogICAgICogQHBhcmFt
IGluY2x1ZGVMb3dlciBEb2VzIHRoaXMgcmFuZ2UgaW5jbHVkZSB0aGUgbG93
ZXIgYm91bmQ/DQogICAgICogQHBhcmFtIGluY2x1ZGVVcHBlciBEb2VzIHRo
aXMgcmFuZ2UgaW5jbHVkZSB0aGUgdXBwZXIgYm91bmQ/DQogICAgICovDQog
ICAgcHVibGljIFJhbmdlRmlsdGVyKFN0cmluZyBmaWVsZCwgU3RyaW5nIGxv
d2VyLCBTdHJpbmcgdXBwZXIsDQogICAgICAgICAgICAgICAgICAgICAgIGJv
b2xlYW4gaW5jbHVkZUxvd2VyLCBib29sZWFuIGluY2x1ZGVVcHBlcikgew0K
ICAgICAgICBmID0gZmllbGQ7DQogICAgICAgIGxvdyA9IGxvd2VyOw0KICAg
ICAgICB1cHAgPSB1cHBlcjsNCiAgICAgICAgaW5jbExvd2VyID0gaW5jbHVk
ZUxvd2VyOw0KICAgICAgICBpbmNsVXBwZXIgPSBpbmNsdWRlVXBwZXI7DQog
ICAgICAgIA0KICAgICAgICBpZiAobnVsbCA9PSBsb3cgJiYgbnVsbCA9PSB1
cHApIHsNCiAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRF
eGNlcHRpb24NCiAgICAgICAgICAgICAgICAoIkF0IGxlYXN0IG9uZSB2YWx1
ZSBtdXN0IGJlIG5vbi1udWxsIik7DQogICAgICAgIH0NCiAgICAgICAgaWYg
KGluY2xMb3dlciAmJiBudWxsID09IGxvdykgew0KICAgICAgICAgICAgdGhy
b3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbg0KICAgICAgICAgICAg
ICAgICgiVGhlIGxvd2VyIGJvdW5kIG11c3QgYmUgbm9uLW51bGwgdG8gYmUg
aW5jbHVzaXZlIik7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGluY2xVcHBl
ciAmJiBudWxsID09IHVwcCkgew0KICAgICAgICAgICAgdGhyb3cgbmV3IEls
bGVnYWxBcmd1bWVudEV4Y2VwdGlvbg0KICAgICAgICAgICAgICAgICgiVGhl
IHVwcGVyIGJvdW5kIG11c3QgYmUgbm9uLW51bGwgdG8gYmUgaW5jbHVzaXZl
Iik7DQogICAgICAgIH0NCiAgICB9DQogICAgDQogICAgLyoqDQogICAgICog
Q29uc3RydWN0cyBhIGZpbHRlciBmb3IgZmllbGQgPGNvZGU+ZmllbGQ8L2Nv
ZGU+IG1hdGNoaW5nDQogICAgICogbGVzcyB0aGFuIG9yIGVxdWFsIHRvIDxj
b2RlPnZhbHVlPC9jb2RlPg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMg
UmFuZ2VGaWx0ZXIgTGVzcyhTdHJpbmcgZmllbGQsIFN0cmluZyB1cHBlcikg
ew0KICAgICAgICByZXR1cm4gbmV3IFJhbmdlRmlsdGVyKGZpZWxkLCBudWxs
LCB1cHBlciwgZmFsc2UsIHRydWUpOw0KICAgIH0NCg0KICAgIC8qKg0KICAg
ICAqIENvbnN0cnVjdHMgYSBmaWx0ZXIgZm9yIGZpZWxkIDxjb2RlPmZpZWxk
PC9jb2RlPiBtYXRjaGluZw0KICAgICAqIGdyZWF0ZXIgdGhhbiBvciBlcXVh
bCB0byA8Y29kZT5sb3dlcjwvY29kZT4NCiAgICAgKi8NCiAgICBwdWJsaWMg
c3RhdGljIFJhbmdlRmlsdGVyIE1vcmUoU3RyaW5nIGZpZWxkLCBTdHJpbmcg
bG93ZXIpIHsNCiAgICAgICAgcmV0dXJuIG5ldyBSYW5nZUZpbHRlcihmaWVs
ZCwgbG93ZXIsIG51bGwsIHRydWUsIGZhbHNlKTsNCiAgICB9DQogICAgDQog
ICAgLyoqDQogICAgICogUmV0dXJucyBhIEJpdFNldCB3aXRoIHRydWUgZm9y
IGRvY3VtZW50cyB3aGljaCBzaG91bGQgYmUNCiAgICAgKiBwZXJtaXR0ZWQg
aW4gc2VhcmNoIHJlc3VsdHMsIGFuZCBmYWxzZSBmb3IgdGhvc2UgdGhhdCBz
aG91bGQNCiAgICAgKiBub3QuDQogICAgICovDQogICAgcHVibGljIEJpdFNl
dCBiaXRzKEluZGV4UmVhZGVyIHJlYWRlcikgdGhyb3dzIElPRXhjZXB0aW9u
IHsNCiAgICAgICAgQml0U2V0IGJpdHMgPSBuZXcgQml0U2V0KHJlYWRlci5t
YXhEb2MoKSk7DQogICAgICAgIFRlcm1FbnVtIGVudW1lcmF0b3IgPQ0KICAg
ICAgICAgICAgKG51bGwgIT0gbG93DQogICAgICAgICAgICAgPyByZWFkZXIu
dGVybXMobmV3IFRlcm0oZiwgbG93KSkNCiAgICAgICAgICAgICA6IHJlYWRl
ci50ZXJtcyhuZXcgVGVybShmLCIiKSkpOw0KICAgICAgICANCiAgICAgICAg
dHJ5IHsNCiAgICAgICAgICAgIA0KICAgICAgICAgICAgaWYgKGVudW1lcmF0
b3IudGVybSgpID09IG51bGwpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4g
Yml0czsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIA0KICAgICAgICAg
ICAgYm9vbGVhbiBjaGVja0xvd2VyID0gZmFsc2U7DQogICAgICAgICAgICBp
ZiAoIWluY2xMb3dlcikgLy8gbWFrZSBhZGp1c3RtZW50cyB0byBzZXQgdG8g
ZXhjbHVzaXZlDQogICAgICAgICAgICAgICAgY2hlY2tMb3dlciA9IHRydWU7
DQogICAgICAgIA0KICAgICAgICAgICAgVGVybURvY3MgdGVybURvY3MgPSBy
ZWFkZXIudGVybURvY3MoKTsNCiAgICAgICAgICAgIHRyeSB7DQogICAgICAg
ICAgICAgICAgDQogICAgICAgICAgICAgICAgZG8gew0KICAgICAgICAgICAg
ICAgICAgICBUZXJtIHRlcm0gPSBlbnVtZXJhdG9yLnRlcm0oKTsNCiAgICAg
ICAgICAgICAgICAgICAgaWYgKHRlcm0gIT0gbnVsbCAmJiB0ZXJtLmZpZWxk
KCkuZXF1YWxzKGYpKSB7DQogICAgICAgICAgICAgICAgICAgICAgICBpZiAo
IWNoZWNrTG93ZXIgfHwgbnVsbD09bG93IHx8IHRlcm0udGV4dCgpLmNvbXBh
cmVUbyhsb3cpID4gMCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAg
IGNoZWNrTG93ZXIgPSBmYWxzZTsNCiAgICAgICAgICAgICAgICAgICAgICAg
ICAgICBpZiAodXBwICE9IG51bGwpIHsNCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgaW50IGNvbXBhcmUgPSB1cHAuY29tcGFyZVRvKHRlcm0u
dGV4dCgpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyog
aWYgYmV5b25kIHRoZSB1cHBlciB0ZXJtLCBvciBpcyBleGNsdXNpdmUgYW5k
DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqIHRoaXMgaXMg
ZXF1YWwgdG8gdGhlIHVwcGVyIHRlcm0sIGJyZWFrIG91dCAqLw0KICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoKGNvbXBhcmUgPCAwKSB8
fA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKCFpbmNs
VXBwZXIgJiYgY29tcGFyZT09MCkpIHsNCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICAgICAgIGJyZWFrOw0KICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0K
ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8qIHdlIGhhdmUgYSBnb29k
IHRlcm0sIGZpbmQgdGhlIGRvY3MgKi8NCiAgICAgICAgICAgICAgICAgICAg
ICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXJtRG9j
cy5zZWVrKGVudW1lcmF0b3IudGVybSgpKTsNCiAgICAgICAgICAgICAgICAg
ICAgICAgICAgICB3aGlsZSAodGVybURvY3MubmV4dCgpKSB7DQogICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgIGJpdHMuc2V0KHRlcm1Eb2NzLmRv
YygpKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAg
ICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0gZWxz
ZSB7DQogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsNCiAgICAgICAg
ICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAg
ICAgICB3aGlsZSAoZW51bWVyYXRvci5uZXh0KCkpOw0KICAgICAgICAgICAg
ICAgIA0KICAgICAgICAgICAgfSBmaW5hbGx5IHsNCiAgICAgICAgICAgICAg
ICB0ZXJtRG9jcy5jbG9zZSgpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9
IGZpbmFsbHkgew0KICAgICAgICAgICAgZW51bWVyYXRvci5jbG9zZSgpOw0K
ICAgICAgICB9DQoNCiAgICAgICAgcmV0dXJuIGJpdHM7DQogICAgfQ0KICAg
IA0KICAgIHB1YmxpYyBTdHJpbmcgdG9TdHJpbmcoKSB7DQogICAgICAgIFN0
cmluZ0J1ZmZlciBidWZmZXIgPSBuZXcgU3RyaW5nQnVmZmVyKCk7DQogICAg
ICAgIGJ1ZmZlci5hcHBlbmQoZik7DQogICAgICAgIGJ1ZmZlci5hcHBlbmQo
IjoiKTsNCiAgICAgICAgYnVmZmVyLmFwcGVuZChpbmNsTG93ZXIgPyAiWyIg
OiAieyIpOw0KICAgICAgICBpZiAobnVsbCAhPSBsb3cpIHsNCiAgICAgICAg
ICAgIGJ1ZmZlci5hcHBlbmQobG93KTsNCiAgICAgICAgfQ0KICAgICAgICBi
dWZmZXIuYXBwZW5kKCItIik7DQogICAgICAgIGlmIChudWxsICE9IHVwcCkg
ew0KICAgICAgICAgICAgYnVmZmVyLmFwcGVuZCh1cHApOw0KICAgICAgICB9
DQogICAgICAgIGJ1ZmZlci5hcHBlbmQoaW5jbFVwcGVyID8gIl0iIDogIn0i
KTsNCiAgICAgICAgcmV0dXJuIGJ1ZmZlci50b1N0cmluZygpOw0KICAgIH0N
Cn0NCg==

---441870778-683642203-1101177224=:19461
Content-Type: TEXT/x-java; charset=US-ASCII; name="RangeQueryScoreDemo.java"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.58.0411221833444.19461@hal.rescomp.berkeley.edu>
Content-Description: 
Content-Disposition: attachment; filename="RangeQueryScoreDemo.java"

DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguVGVybTsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFJlYWRlcjsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFdyaXRlcjsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guUXVlcnk7DQppbXBvcnQgb3Jn
LmFwYWNoZS5sdWNlbmUuc2VhcmNoLkhpdHM7DQppbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuc2VhcmNoLkluZGV4U2VhcmNoZXI7DQppbXBvcnQgb3JnLmFw
YWNoZS5sdWNlbmUuc3RvcmUuUkFNRGlyZWN0b3J5Ow0KaW1wb3J0IG9yZy5h
cGFjaGUubHVjZW5lLmFuYWx5c2lzLlNpbXBsZUFuYWx5emVyOw0KaW1wb3J0
IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRvY3VtZW50Ow0KaW1wb3J0
IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZpZWxkOw0KaW1wb3J0IG9y
Zy5hcGFjaGUubHVjZW5lLnNlYXJjaC5RdWVyeTsNCmltcG9ydCBvcmcuYXBh
Y2hlLmx1Y2VuZS5zZWFyY2guUmFuZ2VRdWVyeTsNCg0KaW1wb3J0IGphdmEu
aW8uSU9FeGNlcHRpb247DQppbXBvcnQgamF2YS51dGlsLlJhbmRvbTsNCg0K
LyoqDQogKiBTaW1wbGUgZGVtbyBvZiAqd2h5KiByYW5nZSBxdWVyeSBleHBh
bmRzIGl0c2VsZiBvdXQgaW50byBhDQogKiBCb29sZWFuUXVlcnkgY29udGFp
bmluZyBtYW55LCBtYW55LCBNQU5ZIHRlcm1zIChhbGwgb2YgaHRlIGtub3du
DQogKiB0ZXJtcyBiZXR3ZWVuIHRoZSBsb3cvaGlnaCB0ZXJtcyBvZiB0aGUg
cmFuZ2UpDQogKi8NCnB1YmxpYyBjbGFzcyBSYW5nZVF1ZXJ5U2NvcmVEZW1v
IHsNCg0KICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBtYWluKFN0cmluZyBhcmd2
W10pIHRocm93cyBJT0V4Y2VwdGlvbiB7DQoNCiAgICAgICAgRG9jdW1lbnQg
ZG9jOw0KICAgICAgICBSQU1EaXJlY3RvcnkgZCA9IG5ldyBSQU1EaXJlY3Rv
cnkoKTsNCiAgICAgICAgSW5kZXhXcml0ZXIgdyA9IG5ldyBJbmRleFdyaXRl
cihkLCBuZXcgU2ltcGxlQW5hbHl6ZXIoKSwgdHJ1ZSk7DQogICAgICAgIGRv
YyA9IG5ldyBEb2N1bWVudCgpOw0KICAgICAgICBkb2MuYWRkKEZpZWxkLlRl
eHQoIndvcmRzIiwgIm5vdCBpbiByYW5nZSIpKTsNCiAgICAgICAgdy5hZGRE
b2N1bWVudChkb2MpOw0KICAgICAgICBkb2MgPSBuZXcgRG9jdW1lbnQoKTsN
CiAgICAgICAgZG9jLmFkZChGaWVsZC5UZXh0KCJ3b3JkcyIsICJhcHBsZSBl
bXUiKSk7DQogICAgICAgIHcuYWRkRG9jdW1lbnQoZG9jKTsNCiAgICAgICAg
ZG9jID0gbmV3IERvY3VtZW50KCk7DQogICAgICAgIGRvYy5hZGQoRmllbGQu
VGV4dCgid29yZHMiLCAiYmVkIGRvZyBlbXUiKSk7DQogICAgICAgIHcuYWRk
RG9jdW1lbnQoZG9jKTsNCiAgICAgICAgZG9jID0gbmV3IERvY3VtZW50KCk7
DQogICAgICAgIGRvYy5hZGQoRmllbGQuVGV4dCgid29yZHMiLCAiZG9nIikp
Ow0KICAgICAgICB3LmFkZERvY3VtZW50KGRvYyk7DQogICAgICAgIGRvYyA9
IG5ldyBEb2N1bWVudCgpOw0KICAgICAgICBkb2MuYWRkKEZpZWxkLlRleHQo
IndvcmRzIiwgImNhdCIpKTsNCiAgICAgICAgdy5hZGREb2N1bWVudChkb2Mp
Ow0KICAgICAgICBkb2MgPSBuZXcgRG9jdW1lbnQoKTsNCiAgICAgICAgRmll
bGQgZiA9IEZpZWxkLlRleHQoIndvcmRzIiwgIkRPRyIpOyAvKiBjYXBzIGRl
bm90ZSB0aGUgYm9vc3QgKi8NCiAgICAgICAgZi5zZXRCb29zdCgzLjBmKTsN
CiAgICAgICAgZG9jLmFkZChmKTsNCiAgICAgICAgdy5hZGREb2N1bWVudChk
b2MpOw0KICAgICAgICB3Lm9wdGltaXplKCk7DQogICAgICAgIHcuY2xvc2Uo
KTsNCg0KICAgICAgICBJbmRleFNlYXJjaGVyIHMgPSBuZXcgSW5kZXhTZWFy
Y2hlcihkKTsNCiAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKCJSYW5nZSBT
ZWFyY2ggZm9yOiAnYXBwbGUnIFRPICdkb2cnIik7DQogICAgICAgIEhpdHMg
aCA9IHMuc2VhcmNoKG5ldyBSYW5nZVF1ZXJ5KG5ldyBUZXJtKCJ3b3JkcyIs
ICJhcHBsZSIpLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg
ICAgICAgICBuZXcgVGVybSgid29yZHMiLCAiZG9nIiksDQogICAgICAgICAg
ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRydWUpKTsNCiAgICAg
ICAgZm9yIChpbnQgaSA9IDA7IGkgPCBoLmxlbmd0aCgpOyBpKyspIHsNCiAg
ICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihoLnNjb3JlKGkpICsgIiAu
Li4gIiArIGguZG9jKGkpLmdldCgid29yZHMiKSk7IA0KICAgICAgICB9DQoN
CiAgICB9DQp9DQo=

---441870778-683642203-1101177224=:19461
Content-Type: TEXT/x-java; charset=US-ASCII; name="TestRangeFilter.java"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.4.58.0411221833445.19461@hal.rescomp.berkeley.edu>
Content-Description: 
Content-Disposition: attachment; filename="TestRangeFilter.java"

DQppbXBvcnQgb3JnLmFwYWNoZS5sdWNlbmUuaW5kZXguVGVybTsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFJlYWRlcjsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5pbmRleC5JbmRleFdyaXRlcjsNCmltcG9y
dCBvcmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guUXVlcnk7DQppbXBvcnQgb3Jn
LmFwYWNoZS5sdWNlbmUuc2VhcmNoLkhpdHM7DQppbXBvcnQgb3JnLmFwYWNo
ZS5sdWNlbmUuc2VhcmNoLkluZGV4U2VhcmNoZXI7DQppbXBvcnQgb3JnLmFw
YWNoZS5sdWNlbmUuc3RvcmUuUkFNRGlyZWN0b3J5Ow0KaW1wb3J0IG9yZy5h
cGFjaGUubHVjZW5lLmFuYWx5c2lzLlNpbXBsZUFuYWx5emVyOw0KaW1wb3J0
IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRvY3VtZW50Ow0KaW1wb3J0
IG9yZy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkZpZWxkOw0KaW1wb3J0IG9y
Zy5hcGFjaGUubHVjZW5lLmRvY3VtZW50LkRhdGVGaWVsZDsNCmltcG9ydCBv
cmcuYXBhY2hlLmx1Y2VuZS5zZWFyY2guUXVlcnk7DQppbXBvcnQgb3JnLmFw
YWNoZS5sdWNlbmUuc2VhcmNoLlRlcm1RdWVyeTsNCmltcG9ydCBvcmcuYXBh
Y2hlLmx1Y2VuZS5zZWFyY2guRmlsdGVyOw0KaW1wb3J0IG9yZy5hcGFjaGUu
bHVjZW5lLnNlYXJjaC5EYXRlRmlsdGVyOw0KDQppbXBvcnQgamF2YS5pby5J
T0V4Y2VwdGlvbjsNCmltcG9ydCBqYXZhLnV0aWwuUmFuZG9tOw0KDQppbXBv
cnQganVuaXQuZnJhbWV3b3JrLlRlc3RDYXNlOw0KDQovKioNCiAqIEEgYmFz
aWMgJ3Bvc2l0aXZlJyBVbml0IHRlc3QgY2xhc3MgZm9yIHRoZSBSYW5nZUZp
bHRlciBjbGFzcy4NCiAqDQogKiA8cD4NCiAqIE5PVEU6IGF0IHRoZSBtb21l
bnQsIHRoaXMgY2xhc3Mgb25seSB0ZXN0cyBmb3IgJ3Bvc2l0aXZlJyByZXN1
bHRzLA0KICogaXQgZG9lcyBub3QgdmVyaWZ5IHRoZSByZXN1bHRzIHRvIGVu
c3VyZSB0aGVpciBhcmUgbm8gJ2ZhbHNlIHBvc2l0aXZlcycsDQogKiBub3Ig
ZG9lcyBpdCBhZGVxdWF0ZWx5IHRlc3QgJ25lZ2F0aXZlJyByZXN1bHRzLiAg
SXQgYWxzbyBkb2VzIG5vdCB0ZXN0DQogKiB0aGF0IGdhcmJhZ2UgaW4gcmVz
dWx0cyBpbiBhbiBFeGNlcHRpb24uDQogKi8NCnB1YmxpYyBjbGFzcyBUZXN0
UmFuZ2VGaWx0ZXIgZXh0ZW5kcyBCYXNlVGVzdFJhbmdlRmlsdGVyIHsNCg0K
ICAgIHB1YmxpYyBUZXN0UmFuZ2VGaWx0ZXIoU3RyaW5nIG5hbWUpIHsNCglz
dXBlcihuYW1lKTsNCiAgICB9DQogICAgcHVibGljIFRlc3RSYW5nZUZpbHRl
cigpIHsNCiAgICAgICAgc3VwZXIoKTsNCiAgICB9DQoNCiAgICBwdWJsaWMg
dm9pZCB0ZXN0UmFuZ2VGaWx0ZXJJZCgpIHRocm93cyBJT0V4Y2VwdGlvbiB7
DQoNCiAgICAgICAgSW5kZXhSZWFkZXIgcmVhZGVyID0gSW5kZXhSZWFkZXIu
b3BlbihpbmRleCk7DQoJSW5kZXhTZWFyY2hlciBzZWFyY2ggPSBuZXcgSW5k
ZXhTZWFyY2hlcihyZWFkZXIpOw0KDQogICAgICAgIGludCBtZWRJZCA9ICgo
bWF4SWQgLSBtaW5JZCkgLyAyKTsNCiAgICAgICAgDQogICAgICAgIFN0cmlu
ZyBtaW5JUCA9IHBhZChtaW5JZCk7DQogICAgICAgIFN0cmluZyBtYXhJUCA9
IHBhZChtYXhJZCk7DQogICAgICAgIFN0cmluZyBtZWRJUCA9IHBhZChtZWRJ
ZCk7DQogICAgDQogICAgICAgIGludCBudW1Eb2NzID0gcmVhZGVyLm51bURv
Y3MoKTsNCiAgICAgICAgDQogICAgICAgIGFzc2VydEVxdWFscygibnVtIG9m
IGRvY3MiLCBudW1Eb2NzLCAxKyBtYXhJZCAtIG1pbklkKTsNCiAgICAgICAg
DQoJSGl0cyByZXN1bHQ7DQogICAgICAgIFF1ZXJ5IHEgPSBuZXcgVGVybVF1
ZXJ5KG5ldyBUZXJtKCJib2R5IiwiYm9keSIpKTsNCg0KICAgICAgICAvLyB0
ZXN0IGlkLCBib3VuZGVkIG9uIGJvdGggZW5kcw0KICAgICAgICANCglyZXN1
bHQgPSBzZWFyY2guc2VhcmNoKHEsbmV3IFJhbmdlRmlsdGVyKCJpZCIsbWlu
SVAsbWF4SVAsVCxUKSk7DQoJYXNzZXJ0RXF1YWxzKCJmaW5kIGFsbCIsIG51
bURvY3MsIHJlc3VsdC5sZW5ndGgoKSk7DQoNCglyZXN1bHQgPSBzZWFyY2gu
c2VhcmNoKHEsbmV3IFJhbmdlRmlsdGVyKCJpZCIsbWluSVAsbWF4SVAsVCxG
KSk7DQoJYXNzZXJ0RXF1YWxzKCJhbGwgYnV0IGxhc3QiLCBudW1Eb2NzLTEs
IHJlc3VsdC5sZW5ndGgoKSk7DQoNCglyZXN1bHQgPSBzZWFyY2guc2VhcmNo
KHEsbmV3IFJhbmdlRmlsdGVyKCJpZCIsbWluSVAsbWF4SVAsRixUKSk7DQoJ
YXNzZXJ0RXF1YWxzKCJhbGwgYnV0IGZpcnN0IiwgbnVtRG9jcy0xLCByZXN1
bHQubGVuZ3RoKCkpOw0KICAgICAgICANCglyZXN1bHQgPSBzZWFyY2guc2Vh
cmNoKHEsbmV3IFJhbmdlRmlsdGVyKCJpZCIsbWluSVAsbWF4SVAsRixGKSk7
DQogICAgICAgIGFzc2VydEVxdWFscygiYWxsIGJ1dCBlbmRzIiwgbnVtRG9j
cy0yLCByZXN1bHQubGVuZ3RoKCkpOw0KICAgIA0KICAgICAgICByZXN1bHQg
PSBzZWFyY2guc2VhcmNoKHEsbmV3IFJhbmdlRmlsdGVyKCJpZCIsbWVkSVAs
bWF4SVAsVCxUKSk7DQogICAgICAgIGFzc2VydEVxdWFscygibWVkIGFuZCB1
cCIsIDErIG1heElkLW1lZElkLCByZXN1bHQubGVuZ3RoKCkpOw0KICAgICAg
ICANCiAgICAgICAgcmVzdWx0ID0gc2VhcmNoLnNlYXJjaChxLG5ldyBSYW5n
ZUZpbHRlcigiaWQiLG1pbklQLG1lZElQLFQsVCkpOw0KICAgICAgICBhc3Nl
cnRFcXVhbHMoInVwIHRvIG1lZCIsIDErIG1lZElkLW1pbklkLCByZXN1bHQu
bGVuZ3RoKCkpOw0KDQogICAgICAgIC8vIHVuYm91bmRlZCBpZA0KDQoJcmVz
dWx0ID0gc2VhcmNoLnNlYXJjaChxLG5ldyBSYW5nZUZpbHRlcigiaWQiLG1p
bklQLG51bGwsVCxGKSk7DQoJYXNzZXJ0RXF1YWxzKCJtaW4gYW5kIHVwIiwg
bnVtRG9jcywgcmVzdWx0Lmxlbmd0aCgpKTsNCg0KCXJlc3VsdCA9IHNlYXJj
aC5zZWFyY2gocSxuZXcgUmFuZ2VGaWx0ZXIoImlkIixudWxsLG1heElQLEYs
VCkpOw0KCWFzc2VydEVxdWFscygibWF4IGFuZCBkb3duIiwgbnVtRG9jcywg
cmVzdWx0Lmxlbmd0aCgpKTsNCg0KCXJlc3VsdCA9IHNlYXJjaC5zZWFyY2go
cSxuZXcgUmFuZ2VGaWx0ZXIoImlkIixtaW5JUCxudWxsLEYsRikpOw0KCWFz
c2VydEVxdWFscygibm90IG1pbiwgYnV0IHVwIiwgbnVtRG9jcy0xLCByZXN1
bHQubGVuZ3RoKCkpOw0KICAgICAgICANCglyZXN1bHQgPSBzZWFyY2guc2Vh
cmNoKHEsbmV3IFJhbmdlRmlsdGVyKCJpZCIsbnVsbCxtYXhJUCxGLEYpKTsN
Cglhc3NlcnRFcXVhbHMoIm5vdCBtYXgsIGJ1dCBkb3duIiwgbnVtRG9jcy0x
LCByZXN1bHQubGVuZ3RoKCkpOw0KICAgICAgICANCiAgICAgICAgcmVzdWx0
ID0gc2VhcmNoLnNlYXJjaChxLG5ldyBSYW5nZUZpbHRlcigiaWQiLG1lZElQ
LG1heElQLFQsRikpOw0KICAgICAgICBhc3NlcnRFcXVhbHMoIm1lZCBhbmQg
dXAsIG5vdCBtYXgiLCBtYXhJZC1tZWRJZCwgcmVzdWx0Lmxlbmd0aCgpKTsN
CiAgICAgICAgDQogICAgICAgIHJlc3VsdCA9IHNlYXJjaC5zZWFyY2gocSxu
ZXcgUmFuZ2VGaWx0ZXIoImlkIixtaW5JUCxtZWRJUCxGLFQpKTsNCiAgICAg
ICAgYXNzZXJ0RXF1YWxzKCJub3QgbWluLCB1cCB0byBtZWQiLCBtZWRJZC1t
aW5JZCwgcmVzdWx0Lmxlbmd0aCgpKTsNCg0KICAgICAgICAvLyB2ZXJ5IHNt
YWxsIHNldHMNCg0KCXJlc3VsdCA9IHNlYXJjaC5zZWFyY2gocSxuZXcgUmFu
Z2VGaWx0ZXIoImlkIixtaW5JUCxtaW5JUCxGLEYpKTsNCglhc3NlcnRFcXVh
bHMoIm1pbixtaW4sRixGIiwgMCwgcmVzdWx0Lmxlbmd0aCgpKTsNCglyZXN1
bHQgPSBzZWFyY2guc2VhcmNoKHEsbmV3IFJhbmdlRmlsdGVyKCJpZCIsbWVk
SVAsbWVkSVAsRixGKSk7DQoJYXNzZXJ0RXF1YWxzKCJtZWQsbWVkLEYsRiIs
IDAsIHJlc3VsdC5sZW5ndGgoKSk7DQoJcmVzdWx0ID0gc2VhcmNoLnNlYXJj
aChxLG5ldyBSYW5nZUZpbHRlcigiaWQiLG1heElQLG1heElQLEYsRikpOw0K
CWFzc2VydEVxdWFscygibWF4LG1heCxGLEYiLCAwLCByZXN1bHQubGVuZ3Ro
KCkpOw0KICAgICAgICAgICAgICAgICAgICAgDQoJcmVzdWx0ID0gc2VhcmNo
LnNlYXJjaChxLG5ldyBSYW5nZUZpbHRlcigiaWQiLG1pbklQLG1pbklQLFQs
VCkpOw0KCWFzc2VydEVxdWFscygibWluLG1pbixULFQiLCAxLCByZXN1bHQu
bGVuZ3RoKCkpOw0KCXJlc3VsdCA9IHNlYXJjaC5zZWFyY2gocSxuZXcgUmFu
Z2VGaWx0ZXIoImlkIixudWxsLG1pbklQLEYsVCkpOw0KCWFzc2VydEVxdWFs
cygibnVsLG1pbixGLFQiLCAxLCByZXN1bHQubGVuZ3RoKCkpOw0KDQoJcmVz
dWx0ID0gc2VhcmNoLnNlYXJjaChxLG5ldyBSYW5nZUZpbHRlcigiaWQiLG1h
eElQLG1heElQLFQsVCkpOw0KCWFzc2VydEVxdWFscygibWF4LG1heCxULFQi
LCAxLCByZXN1bHQubGVuZ3RoKCkpOw0KCXJlc3VsdCA9IHNlYXJjaC5zZWFy
Y2gocSxuZXcgUmFuZ2VGaWx0ZXIoImlkIixtYXhJUCxudWxsLFQsRikpOw0K
CWFzc2VydEVxdWFscygibWF4LG51bCxULFQiLCAxLCByZXN1bHQubGVuZ3Ro
KCkpOw0KDQoJcmVzdWx0ID0gc2VhcmNoLnNlYXJjaChxLG5ldyBSYW5nZUZp
bHRlcigiaWQiLG1lZElQLG1lZElQLFQsVCkpOw0KCWFzc2VydEVxdWFscygi
bWVkLG1lZCxULFQiLCAxLCByZXN1bHQubGVuZ3RoKCkpOw0KICAgICAgICAN
CiAgICB9DQoNCiAgICBwdWJsaWMgdm9pZCB0ZXN0UmFuZ2VGaWx0ZXJSYW5k
KCkgdGhyb3dzIElPRXhjZXB0aW9uIHsNCg0KICAgICAgICBJbmRleFJlYWRl
ciByZWFkZXIgPSBJbmRleFJlYWRlci5vcGVuKGluZGV4KTsNCglJbmRleFNl
YXJjaGVyIHNlYXJjaCA9IG5ldyBJbmRleFNlYXJjaGVyKHJlYWRlcik7DQoN
CiAgICAgICAgU3RyaW5nIG1pblJQID0gcGFkKG1pblIpOw0KICAgICAgICBT
dHJpbmcgbWF4UlAgPSBwYWQobWF4Uik7DQogICAgDQogICAgICAgIGludCBu
dW1Eb2NzID0gcmVhZGVyLm51bURvY3MoKTsNCiAgICAgICAgDQogICAgICAg
IGFzc2VydEVxdWFscygibnVtIG9mIGRvY3MiLCBudW1Eb2NzLCAxKyBtYXhJ
ZCAtIG1pbklkKTsNCiAgICAgICAgDQoJSGl0cyByZXN1bHQ7DQogICAgICAg
IFF1ZXJ5IHEgPSBuZXcgVGVybVF1ZXJ5KG5ldyBUZXJtKCJib2R5IiwiYm9k
eSIpKTsNCg0KICAgICAgICAvLyB0ZXN0IGV4dHJlbWVzLCBib3VuZGVkIG9u
IGJvdGggZW5kcw0KICAgICAgICANCglyZXN1bHQgPSBzZWFyY2guc2VhcmNo
KHEsbmV3IFJhbmdlRmlsdGVyKCJyYW5kIixtaW5SUCxtYXhSUCxULFQpKTsN
Cglhc3NlcnRFcXVhbHMoImZpbmQgYWxsIiwgbnVtRG9jcywgcmVzdWx0Lmxl
bmd0aCgpKTsNCg0KCXJlc3VsdCA9IHNlYXJjaC5zZWFyY2gocSxuZXcgUmFu
Z2VGaWx0ZXIoInJhbmQiLG1pblJQLG1heFJQLFQsRikpOw0KCWFzc2VydEVx
dWFscygiYWxsIGJ1dCBiaWdnZXN0IiwgbnVtRG9jcy0xLCByZXN1bHQubGVu
Z3RoKCkpOw0KDQoJcmVzdWx0ID0gc2VhcmNoLnNlYXJjaChxLG5ldyBSYW5n
ZUZpbHRlcigicmFuZCIsbWluUlAsbWF4UlAsRixUKSk7DQoJYXNzZXJ0RXF1
YWxzKCJhbGwgYnV0IHNtYWxsZXN0IiwgbnVtRG9jcy0xLCByZXN1bHQubGVu
Z3RoKCkpOw0KICAgICAgICANCglyZXN1bHQgPSBzZWFyY2guc2VhcmNoKHEs
bmV3IFJhbmdlRmlsdGVyKCJyYW5kIixtaW5SUCxtYXhSUCxGLEYpKTsNCiAg
ICAgICAgYXNzZXJ0RXF1YWxzKCJhbGwgYnV0IGV4dHJlbWVzIiwgbnVtRG9j
cy0yLCByZXN1bHQubGVuZ3RoKCkpOw0KICAgIA0KICAgICAgICAvLyB1bmJv
dW5kZWQNCg0KCXJlc3VsdCA9IHNlYXJjaC5zZWFyY2gocSxuZXcgUmFuZ2VG
aWx0ZXIoInJhbmQiLG1pblJQLG51bGwsVCxGKSk7DQoJYXNzZXJ0RXF1YWxz
KCJzbWFsbGVzdCBhbmQgdXAiLCBudW1Eb2NzLCByZXN1bHQubGVuZ3RoKCkp
Ow0KDQoJcmVzdWx0ID0gc2VhcmNoLnNlYXJjaChxLG5ldyBSYW5nZUZpbHRl
cigicmFuZCIsbnVsbCxtYXhSUCxGLFQpKTsNCglhc3NlcnRFcXVhbHMoImJp
Z2dlc3QgYW5kIGRvd24iLCBudW1Eb2NzLCByZXN1bHQubGVuZ3RoKCkpOw0K
DQoJcmVzdWx0ID0gc2VhcmNoLnNlYXJjaChxLG5ldyBSYW5nZUZpbHRlcigi
cmFuZCIsbWluUlAsbnVsbCxGLEYpKTsNCglhc3NlcnRFcXVhbHMoIm5vdCBz
bWFsbGVzdCwgYnV0IHVwIiwgbnVtRG9jcy0xLCByZXN1bHQubGVuZ3RoKCkp
Ow0KICAgICAgICANCglyZXN1bHQgPSBzZWFyY2guc2VhcmNoKHEsbmV3IFJh
bmdlRmlsdGVyKCJyYW5kIixudWxsLG1heFJQLEYsRikpOw0KCWFzc2VydEVx
dWFscygibm90IGJpZ2dlc3QsIGJ1dCBkb3duIiwgbnVtRG9jcy0xLCByZXN1
bHQubGVuZ3RoKCkpOw0KICAgICAgICANCiAgICAgICAgLy8gdmVyeSBzbWFs
bCBzZXRzDQoNCglyZXN1bHQgPSBzZWFyY2guc2VhcmNoKHEsbmV3IFJhbmdl
RmlsdGVyKCJyYW5kIixtaW5SUCxtaW5SUCxGLEYpKTsNCglhc3NlcnRFcXVh
bHMoIm1pbixtaW4sRixGIiwgMCwgcmVzdWx0Lmxlbmd0aCgpKTsNCglyZXN1
bHQgPSBzZWFyY2guc2VhcmNoKHEsbmV3IFJhbmdlRmlsdGVyKCJyYW5kIixt
YXhSUCxtYXhSUCxGLEYpKTsNCglhc3NlcnRFcXVhbHMoIm1heCxtYXgsRixG
IiwgMCwgcmVzdWx0Lmxlbmd0aCgpKTsNCiAgICAgICAgICAgICAgICAgICAg
IA0KCXJlc3VsdCA9IHNlYXJjaC5zZWFyY2gocSxuZXcgUmFuZ2VGaWx0ZXIo
InJhbmQiLG1pblJQLG1pblJQLFQsVCkpOw0KCWFzc2VydEVxdWFscygibWlu
LG1pbixULFQiLCAxLCByZXN1bHQubGVuZ3RoKCkpOw0KCXJlc3VsdCA9IHNl
YXJjaC5zZWFyY2gocSxuZXcgUmFuZ2VGaWx0ZXIoInJhbmQiLG51bGwsbWlu
UlAsRixUKSk7DQoJYXNzZXJ0RXF1YWxzKCJudWwsbWluLEYsVCIsIDEsIHJl
c3VsdC5sZW5ndGgoKSk7DQoNCglyZXN1bHQgPSBzZWFyY2guc2VhcmNoKHEs
bmV3IFJhbmdlRmlsdGVyKCJyYW5kIixtYXhSUCxtYXhSUCxULFQpKTsNCglh
c3NlcnRFcXVhbHMoIm1heCxtYXgsVCxUIiwgMSwgcmVzdWx0Lmxlbmd0aCgp
KTsNCglyZXN1bHQgPSBzZWFyY2guc2VhcmNoKHEsbmV3IFJhbmdlRmlsdGVy
KCJyYW5kIixtYXhSUCxudWxsLFQsRikpOw0KCWFzc2VydEVxdWFscygibWF4
LG51bCxULFQiLCAxLCByZXN1bHQubGVuZ3RoKCkpOw0KICAgICAgICANCiAg
ICB9DQoNCn0NCg==


---441870778-683642203-1101177224=:19461
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
---441870778-683642203-1101177224=:19461--

From lucene-user-return-11445-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 08:15:26 2004
Return-Path: <lucene-user-return-11445-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9728 invoked from network); 23 Nov 2004 08:15:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 08:15:25 -0000
Received: (qmail 46317 invoked by uid 500); 23 Nov 2004 08:15:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 45301 invoked by uid 500); 23 Nov 2004 08:15:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44318 invoked by uid 99); 23 Nov 2004 08:14:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.25.134.82] (HELO mailout05.sul.t-online.com) (194.25.134.82)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 00:14:53 -0800
Received: from fwd09.aul.t-online.de 
	by mailout05.sul.t-online.com with smtp 
	id 1CWVp0-0002PA-03; Tue, 23 Nov 2004 09:14:46 +0100
Received: from pD9EBFBE1.dip.t-dialin.net (bVI05kZSrewD6Z-EZLfO2eVFQTlSbPRLSlqg8yO2QpPGkakDLI8U4k@[217.235.251.225]) by fmrl09.sul.t-online.com
	with esmtp id 1CWVow-0XDcJc0; Tue, 23 Nov 2004 09:14:42 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: JDBCDirectory to prevent optimize()?
Date: Tue, 23 Nov 2004 09:15:29 +0100
User-Agent: KMail/1.7.1
References: <41A270E3.4070503@newsmonster.org>
In-Reply-To: <41A270E3.4070503@newsmonster.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411230915.29515@danielnaber.de>
X-ID: bVI05kZSrewD6Z-EZLfO2eVFQTlSbPRLSlqg8yO2QpPGkakDLI8U4k@t-dialin.net
X-TOI-MSGID: 4afe761e-8af2-412d-b179-a9d1ce2e8801
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tuesday 23 November 2004 00:06, Kevin A. Burton wrote:

> I'm wondering about the potential for a generic JDBCDirectory for
> keeping the lucene index within a database.

Such a thing already exists: http://ppinew.mnis.com/jdbcdirectory/, but I 
don't know about its scalability.

Regards
 Daniel

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11446-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 08:59:52 2004
Return-Path: <lucene-user-return-11446-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50348 invoked from network); 23 Nov 2004 08:59:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 08:59:52 -0000
Received: (qmail 26374 invoked by uid 500); 23 Nov 2004 08:59:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26327 invoked by uid 500); 23 Nov 2004 08:59:40 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26297 invoked by uid 99); 23 Nov 2004 08:59:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 00:59:38 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.12.11/8.12.11) with ESMTP id iAN8xX7e065882
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 09:59:33 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Numeric Range Restrictions: Queries vs Filters
Date: Tue, 23 Nov 2004 09:59:33 +0100
User-Agent: KMail/1.5.4
References: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411230959.33391.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Chris,

On Tuesday 23 November 2004 03:25, Hoss wrote:
> (NOTE: numbers in [] indicate Footnotes)
> 
> I'm rather new to Lucene (and this list), so if I'm grossly
> misunderstanding things, forgive me.
> 
> One of my main needs as I investigate Search technologies is to restrict
> results based on Ranges of numeric values.  Looking over the archives of
> this list, it seems that lots of people have run into problems dealing
> with this.  In particular, whenever someone asks a question about "Numeric
> Ranges" the question seem to always involve one (or more) of the
> following:
> 
>    (a) Lexical sorting puts 11 in the range "1 TO 5"
>    (b) Dates (or Dates and Times)
>    (c) BooleanQuery$TooManyClauses Exceptions
>    (d) Should I use a filter?

FWIW, the javadoc of the development version of
BooleanQuery.maxClauseCount reads:

  The maximum number of clauses permitted. Default value is 1024. Use the  
  org.apache.lucene.maxClauseCount system property to override. 

  TermQuery clauses are generated from for example prefix queries and
  fuzzy queries. Each TermQuery needs some buffer space during search,
  so this parameter indirectly controls the maximum buffer requirements for
  query search. Normally the buffers are allocated by the JVM. When using
  for example MMapDirectory the buffering is left to the operating system.

MMapDirectory uses memory mapped files for the index.

It would be useful to also provide a reference to filters (DateFilter)
and to LongField in case it is added to the code base.

...
> The Query API on the other hand ... I freely admit, that I can't make
> heads or tails out of it.  I don't even know where I would begin to try
> and write a new subclass of Query if I wanted to.

In a nutshell:

A Query either rewrites to another Query, or it provides a Weight.
A Weight first does normalisation and then provides a Scorer
to be used during search.

RangeQuery is a good example:

A RangeQuery rewrites to a BooleanQuery over TermQuery's
for the matching terms.
A BooleanQuery provides a BooleanScorer via its Weight.
A TermQuery provides a TermScorer via its Weight.

Regards,
Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11447-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 09:01:08 2004
Return-Path: <lucene-user-return-11447-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50940 invoked from network); 23 Nov 2004 09:01:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 09:01:05 -0000
Received: (qmail 28923 invoked by uid 500); 23 Nov 2004 09:00:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 28901 invoked by uid 500); 23 Nov 2004 09:00:57 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 28884 invoked by uid 99); 23 Nov 2004 09:00:57 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 01:00:55 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP id 93B5223CD1
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 10:00:52 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 01838-07 for <lucene-user@jakarta.apache.org>;
 Tue, 23 Nov 2004 10:00:52 +0100 (CET)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP id 9916C23D0B
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 09:26:33 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id iAN8QVmA005103
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 09:26:31 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id iAN8QV2S005099;
	Tue, 23 Nov 2004 09:26:31 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16802.62519.433145.854042@tanto-xipolis.de>
Date: Tue, 23 Nov 2004 09:26:31 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Numeric Range Restrictions: Queries vs Filters
In-Reply-To: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu>
References: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hoss writes:
> 
> (c) Filtering.  Filters in general make a lot of sense to me.  They are a
> way to specify (at query time) that only a certain subset of the index
> should be considered for results.  The Filter class has a very straight
> forward API that seems very easy to subclass to get the behavior I want.
> The Query API on the other hand ... I freely admit, that I can't make
> heads or tails out of it.  I don't even know where I would begin to try
> and write a new subclass of Query if I wanted to.
> 
> I would think that most people who want to do a "numeric range
> restriction" on their data, probably don't care about the Scoring benefits
> of RangeQuery.  Looking at the code base, the way DateFilter works seems
> like it provides an ideal solution to any sort of Range restriction (not
> just Dates) that *should* be more efficient then using RangeQuery when
> dealing with an unbounded value set. (Both approaches need to iterate over
> all of the terms in the specified field using TermEnum, but RangeQuery has
> to build up an set of BooleanQuery objects for each matching term, and
> then each of those queries have to help score the documents -- DateFilter
> on the other hand only has to maintain a single BitSet of documents that
> it finds as it iterates)
> 
IMO there's another option, at least as long as the number of your documents
isn't too high.
Sorting already creates a list of all field values for some field that 
will be used during the search for sorting.
Nothing prevents you from using that aproach for search restriction also.
The advantage is, that you can create that list once and use it for different
ranges until the index is changed whereas a filter can only represent
one range.
The disadvantate is, that you have to keep one value for each document in
memory instead of one bit in a filter.

I did that (before the sort code was introduced) for date queries in order
to be able to sort and restrict searches on dates.
But I haven't thought about how a general API for such a solution might look 
like so far.

Of course it depends on a number of questions, which way is preferable.
How often is the index modified, are range queries usually done for the
same or different ranges, how many documents are indexed and so on.

Morus
  

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11448-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 10:37:44 2004
Return-Path: <lucene-user-return-11448-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2796 invoked from network); 23 Nov 2004 10:37:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 10:37:44 -0000
Received: (qmail 25545 invoked by uid 500); 23 Nov 2004 10:37:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 25496 invoked by uid 500); 23 Nov 2004 10:37:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 25475 invoked by uid 99); 23 Nov 2004 10:37:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 02:37:27 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4279C13E200B; Tue, 23 Nov 2004 05:37:00 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id D69FA13E200A
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 05:36:44 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <41A270E3.4070503@newsmonster.org>
References: <41A270E3.4070503@newsmonster.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <8EB7BC0B-3D3B-11D9-982F-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: JDBCDirectory to prevent optimize()?
Date: Tue, 23 Nov 2004 05:36:39 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Also, there is a DBDirectory in the sandbox to store a Lucene index 
inside Berkeley DB.

	Erik

On Nov 22, 2004, at 6:06 PM, Kevin A. Burton wrote:

> It seems that when compared to other datastores that Lucene starts to 
> fall down.  For example lucene doesn't perform online index 
> optimizations so if you add 10 documents you have to run optimize() 
> again and this isn't exactly a fast operation.
>
> I'm wondering about the potential for a generic JDBCDirectory for 
> keeping the lucene index within a database.
> It sounds somewhat unconventional would allow you to perform live 
> addDirectory updates without performing an optimize() again.
>
> Has anyone looked at this?  How practical would it be.
>
> Kevin
>
> -- 
>
> Use Rojo (RSS/Atom aggregator).  Visit http://rojo.com. Ask me for an 
> invite!  Also see irc.freenode.net #rojo if you want to chat.
>
> Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html
>
> If you're interested in RSS, Weblogs, Social Networking, etc... then 
> you should work for Rojo!  If you recommend someone and we hire them 
> you'll get a free iPod!
>    Kevin A. Burton, Location - San Francisco, CA
>       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11449-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 10:42:15 2004
Return-Path: <lucene-user-return-11449-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 5055 invoked from network); 23 Nov 2004 10:42:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 10:42:15 -0000
Received: (qmail 34105 invoked by uid 500); 23 Nov 2004 10:42:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 34081 invoked by uid 500); 23 Nov 2004 10:42:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 34064 invoked by uid 99); 23 Nov 2004 10:42:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [202.144.61.68] (HELO delmail1.sapient.com) (202.144.61.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 02:42:07 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4D149.0D2FDE19"
Subject: Re: too many files open issue
Date: Tue, 23 Nov 2004 16:11:55 +0530
Message-ID: <88B56FBAEB84EC448511C30CD63D3F8A0279F559@delmail1.sapient.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Re: too many files open issue
Thread-Index: AcTRSQ0rLcEuUFTuQ/OFbWn+4uREyQ==
From: "Neelam Bhatnagar" <nbhatnagar@sapient.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4D149.0D2FDE19
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi Dmitry,
=20
Thank you so much for your reply.=20
=20
I'd like to answer your specific questions.=20
=20
>>It also depends on whether you are using "compound files" or not (this
is a flag on the IndexWriter). >>With compound files flag on, segments
have fixed number of files, regardless of how many fields >>you use.
Without the flag, each field is a separate file.
=20
We are using Lucene 1.2 and hence we don't have this compound file
property in IndexWriter class. This would mean that we are having a
separate file for each field.=20
=20
>>By the way, it is usual to have the file descriptors limit set at 9000
or so for unix machines running >>production web applications. By the
way 2, on Solaris, you will need to modify a value in >>/etc/systems to
get up to this level. Not sure about Linux or other flavors.
=20
We are using SunOS 5.8 on a Sparc Sunfire280 R machine. Running ulimit
-n gives number 256.=20
This is the number we had first tried to reduce to 200 and then bring
back up to 500 without any luck. Then ultimately, everything started to
work on the default number 256.=20
We had tried to alter this number using ulimit command itself instead of
changing it in the /etc/system file.=20
=20
>>Another suggestion - you may want to look into a tool called "lsof".
It is a utility that will show file >>handles open by a particular
process. It could be that some other part of your process (or of the
>>application server, VM, etc) is not closing files. This tool will help
you see what files are open and >>you can validate that all of the
really need to be open.
=20
The "lsof" tool is available through following path=20
ftp://vic.cc.purdue.edu/pub/tools/unix/lsof
which is not accepting anonymous access. Hence we have not been able to
download this tool to figure out what's going on with the processes and
the files being opened by them.
=20
=20
The most worrying aspect about the whole scenario is that there's no
consistency in the way system behaves. It works fine with the default
settings then suddenly it stops working. Then after changing the
settings several times, it works again then breaks again. Our worry is
that we may not be going in the right direction with this approach.=20
=20
Kindly advise.
=20
Thanks and regards
Neelam Bhatnagar
=20
=20
-----Original Message-----
From: Dmitry [mailto:dmitrys@earthlink.net]=20
Sent: Monday, November 22, 2004 8:46 PM
To: Lucene Users List
Subject: Re: Too many open files issue
=20
I'm sorry, I wasn't involved in the original conversation but maybe I=20
can jump in with some info that will help.
=20
The number of files depends on the merge factor, number of segments, and

number of indexed fields in your index. It also depends on whether you=20
are using "compound files" or not (this is a flag on the IndexWriter).=20
With compound files flag on, segments have fixed number of files,=20
regardless of how many fields you use. Without the flag, each field is a

separate file.
=20
Let's say you have 10 segments (per your merge factor) that are being=20
merged into a new segment (via an optimize call or just because you have

reached the merge factor). This means there are 11 segments open at the=20
same time. If you have 20 indexed fields and are not using compound=20
files, that's 20 * 11 =3D 220 files. There are a few other files open as =

well, plus whatever other files and sockets that your JVM process is=20
holding open at that time. This would include incoming connections, for=20
example, if this is running inside a web server. If you are running in=20
an application server, this could include connections and files open by=20
other applications in that same app server.
=20
So the numbers run up quite a bit.
=20
By the way, it is usual to have the file descriptors limit set at 9000=20
or so for unix machines running production web applications. By the way=20
2, on Solaris, you will need to modify a value in /etc/systems to get up

to this level. Not sure about Linux or other flavors.
=20
Another suggestion - you may want to look into a tool called "lsof". It=20
is a utility that will show file handles open by a particular process.=20
It could be that some other part of your process (or of the application=20
server, VM, etc) is not closing files. This tool will help you see what=20
files are open and you can validate that all of the really need to be
open.
=20
Best of luck.
Dmitry.
=20
=20
Neelam Bhatnagar wrote:
=20
>Hi,
>=20
>I had requested help on an issue we have been facing with the "Too many
>open files" Exception garbling the search indexes and crashing the
>search on the web site.=20
>As a suggestion, you had asked us to look at the articles on O'Reilly
>Network which had specific context around this exact problem.=20
>One of the suggestions was to increase the limit on the number of file
>descriptors on the file system. We tried it by first lowering the limit
>to 200 from 256 in order to reproduce the exception. The exception did
>get reproduced but even after increasing the limit to 500, the
exception
>kept coming until after several rounds of trying to rebuild the index,
>we finally got to get it working for the default file descriptor limit
>of 256.  This makes us wonder if your first suggestion of optimizing
>indexes is a pre-requisite to trying this option.=20
>=20
>Another piece of relevant information is that we have the default merge
>factor of 10.
>=20
>Kindly give us pointers to what it that we are doing wrong or should we
>be trying something completely different.
>=20
>Thanks and regards
>Neelam Bhatnagar
>=20
>
> =20
>
=20
=20
---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
=20
=20

------_=_NextPart_001_01C4D149.0D2FDE19--

From lucene-user-return-11450-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 11:06:29 2004
Return-Path: <lucene-user-return-11450-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21402 invoked from network); 23 Nov 2004 11:06:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 11:06:29 -0000
Received: (qmail 71729 invoked by uid 500); 23 Nov 2004 11:05:29 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71680 invoked by uid 500); 23 Nov 2004 11:05:28 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71658 invoked by uid 99); 23 Nov 2004 11:05:28 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [209.10.110.95] (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 03:05:24 -0800
Received: (qmail 39756 invoked by uid 89); 23 Nov 2004 09:18:39 -0000
Received: from unknown (HELO ?131.114.3.115?) (doug@cottrell-cutting.net@131.114.3.115)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 23 Nov 2004 09:18:39 -0000
Message-ID: <41A30067.2010403@apache.org>
Date: Tue, 23 Nov 2004 10:18:31 +0100
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.3) Gecko/20040910
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Numeric Range Restrictions: Queries vs Filters
References: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hoss wrote:
> The attachment contains my RangeFilter, a unit test that demonstrates it,
> and a Benchmarking unit test that does a side-by-side comparison with
> RangeQuery [6].  If developers feel that this class is useful, then by all
> means roll it into the code base.  (90% of it is cut/pasted from
> DateFilter/RangeQuery anyway)

+1

DateFilter could be deprecated, and replaced with the more generally and 
appropriately named RangeFilter.  Should we also deprecate DateField, in 
preference for DateTools?

Doug


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11451-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 13:25:11 2004
Return-Path: <lucene-user-return-11451-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12240 invoked from network); 23 Nov 2004 13:25:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 13:25:11 -0000
Received: (qmail 61412 invoked by uid 500); 23 Nov 2004 13:25:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 61367 invoked by uid 500); 23 Nov 2004 13:25:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 61324 invoked by uid 99); 23 Nov 2004 13:25:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.2.178] (HELO fork8.mail.virginia.edu) (128.143.2.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 05:24:58 -0800
Received: from localhost (localhost [127.0.0.1])
	by fork8.mail.virginia.edu (Postfix) with ESMTP id 396511F51B5
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 08:24:50 -0500 (EST)
Received: from fork8.mail.virginia.edu ([127.0.0.1])
 by localhost (fork8.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 02514-08 for <lucene-user@jakarta.apache.org>;
 Tue, 23 Nov 2004 08:24:49 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by fork8.mail.virginia.edu (Postfix) with ESMTP id CE9731F526F
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 08:24:49 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu>
References: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <0CD1B7F0-3D53-11D9-8036-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Numeric Range Restrictions: Queries vs Filters
Date: Tue, 23 Nov 2004 08:24:49 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-UVA-Virus-Scanned: by amavisd-new at fork8.mail.virginia.edu
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Nov 22, 2004, at 9:25 PM, Hoss wrote:
> I'm rather new to Lucene (and this list), so if I'm grossly
> misunderstanding things, forgive me.

You're spot on!

> But I was surprised then to see the following quote from "Erik 
> Hatcher" in
> the archives:
>
>   "In fact, DateFilter by itself is practically of no use, I think." 
> [4]
>
> ...Erik goes on to suggest that given "a set of canned date ranges", it
> doesn't really matter if you use a RangeQuery or a DateFilter -- as 
> long
> as you cache them to reuse them (with something like 
> CachingWrappingFilter
> or QueryFilter).  I'm hoping that he might elaborate on that comment?

RangeQuery wrapped inside a QueryFilter is more specifically what I 
said.  I'm not a fan of DateField and how the built-in date support in 
Lucene works, so this is why I don't like DateFilter personally.

Your RangeFilter, however, is nicely done and well worth deprecating 
DateFilter for.

> As a test, I wrote a "RangeFilter" which borrows heavily from 
> DateFilter
> to both convince myself it could work, and to do a comparison between 
> it
> and RangeQuery. [5] Based on my limited tests, using a Filter to 
> restrict
> to a Range is a lot faster then using RangeQuery -- independent of
> caching.

And now with FilteredQuery you can have the best of both worlds :)

Thanks for your detailed code, tests, and contribution.  We'll fold it 
in.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11452-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 14:36:27 2004
Return-Path: <lucene-user-return-11452-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 74188 invoked from network); 23 Nov 2004 14:36:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 14:36:27 -0000
Received: (qmail 30096 invoked by uid 500); 23 Nov 2004 14:36:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30049 invoked by uid 500); 23 Nov 2004 14:36:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30007 invoked by uid 99); 23 Nov 2004 14:36:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.2.178] (HELO fork8.mail.virginia.edu) (128.143.2.178)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 06:36:09 -0800
Received: from localhost (localhost [127.0.0.1])
	by fork8.mail.virginia.edu (Postfix) with ESMTP id 0BAC61F55A2
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 09:19:16 -0500 (EST)
Received: from fork8.mail.virginia.edu ([127.0.0.1])
 by localhost (fork8.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 16879-09 for <lucene-user@jakarta.apache.org>;
 Tue, 23 Nov 2004 09:19:15 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by fork8.mail.virginia.edu (Postfix) with ESMTP id B98DB1F559F
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 09:19:15 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <41A30067.2010403@apache.org>
References: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu> <41A30067.2010403@apache.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <A6DA6D90-3D5A-11D9-8036-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Numeric Range Restrictions: Queries vs Filters
Date: Tue, 23 Nov 2004 09:19:13 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-UVA-Virus-Scanned: by amavisd-new at fork8.mail.virginia.edu
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 23, 2004, at 4:18 AM, Doug Cutting wrote:
> Hoss wrote:
>> The attachment contains my RangeFilter, a unit test that demonstrates 
>> it,
>> and a Benchmarking unit test that does a side-by-side comparison with
>> RangeQuery [6].  If developers feel that this class is useful, then 
>> by all
>> means roll it into the code base.  (90% of it is cut/pasted from
>> DateFilter/RangeQuery anyway)
>
> +1
>
> DateFilter could be deprecated, and replaced with the more generally 
> and appropriately named RangeFilter.  Should we also deprecate 
> DateField, in preference for DateTools?

Done.  I deprecated DateField and DateFilter, and added the RangeFilter 
class contributed by Chris.

I did a little code cleanup, Chris, renaming some RangeFilter variables 
and correcting typos in the Javadocs.  Let me know if everything looks 
ok.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11453-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 19:03:19 2004
Return-Path: <lucene-user-return-11453-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8345 invoked from network); 23 Nov 2004 19:03:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 19:03:19 -0000
Received: (qmail 24280 invoked by uid 500); 23 Nov 2004 19:03:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 24232 invoked by uid 500); 23 Nov 2004 19:03:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 24211 invoked by uid 99); 23 Nov 2004 19:03:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.65.202.3] (HELO contextmedia.com) (64.65.202.3)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 11:03:08 -0800
Received: from ppeddi ([192.168.1.48]) by contextmedia.com ; Tue, 23 Nov 2004 10:01:48 -0500
Message-ID: <0de401c4d16d$5a8d32e0$aa87a8c0@ppeddi>
From: "Praveen Peddi" <ppeddi@contextmedia.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu> <41A30067.2010403@apache.org> <A6DA6D90-3D5A-11D9-8036-000A95BC61B6@ehatchersolutions.com>
Subject: Re: Numeric Range Restrictions: Queries vs Filters
Date: Tue, 23 Nov 2004 10:01:47 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Rcpt-To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Chris's RangeFilter does not cache anything where as QueryFilter does 
caching. Is it better to add the caching funtionality to RangeFilter also? 
or does it not make any difference?

Praveen
----- Original Message ----- 
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, November 23, 2004 9:19 AM
Subject: Re: Numeric Range Restrictions: Queries vs Filters


> On Nov 23, 2004, at 4:18 AM, Doug Cutting wrote:
>> Hoss wrote:
>>> The attachment contains my RangeFilter, a unit test that demonstrates 
>>> it,
>>> and a Benchmarking unit test that does a side-by-side comparison with
>>> RangeQuery [6].  If developers feel that this class is useful, then by 
>>> all
>>> means roll it into the code base.  (90% of it is cut/pasted from
>>> DateFilter/RangeQuery anyway)
>>
>> +1
>>
>> DateFilter could be deprecated, and replaced with the more generally and 
>> appropriately named RangeFilter.  Should we also deprecate DateField, in 
>> preference for DateTools?
>
> Done.  I deprecated DateField and DateFilter, and added the RangeFilter 
> class contributed by Chris.
>
> I did a little code cleanup, Chris, renaming some RangeFilter variables 
> and correcting typos in the Javadocs.  Let me know if everything looks ok.
>
> Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11454-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 19:17:14 2004
Return-Path: <lucene-user-return-11454-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 18403 invoked from network); 23 Nov 2004 19:17:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 19:17:13 -0000
Received: (qmail 63342 invoked by uid 500); 23 Nov 2004 19:17:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 63323 invoked by uid 500); 23 Nov 2004 19:17:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 63306 invoked by uid 99); 23 Nov 2004 19:17:01 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 11:16:59 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8B6D95B817; Tue, 23 Nov 2004 11:16:53 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 88CF07F45E
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 11:16:53 -0800 (PST)
Date: Tue, 23 Nov 2004 11:16:53 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Numeric Range Restrictions: Queries vs Filters
In-Reply-To: <0CD1B7F0-3D53-11D9-8036-000A95BC61B6@ehatchersolutions.com>
Message-ID: <Pine.LNX.4.58.0411231053350.12672@hal.rescomp.berkeley.edu>
References: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu>
 <0CD1B7F0-3D53-11D9-8036-000A95BC61B6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


: Done.  I deprecated DateField and DateFilter, and added the RangeFilter
: class contributed by Chris.
:
: I did a little code cleanup, Chris, renaming some RangeFilter variables
: and correcting typos in the Javadocs.  Let me know if everything looks
: ok.

Wow ... that was fast.  Things look fine to me (typo's in javadocs are my
specialty)  but now I wish I'd included more tests

I still feel a little confused about two things though...

First: Is there any reason Matt Quail's "LongField" class hasn't been
added to CVS (or has it and I'm just not seeing it?)

I haven't tested it extensively, but strikes me as being a crucial utility
for people who want to do any serious sorting or filtering of numeric
values.

Although I would suggest a few minor tweaks:
  a) Rename to something like NumberTools (to be consistent with the new
     DateTools and because...)
  b) Add some one line convinience methods like intToString and
     floatToString and doubleToString ala:
         return longToString(Double.doubleToLongBits(d));

Second...

: RangeQuery wrapped inside a QueryFilter is more specifically what I
: said.  I'm not a fan of DateField and how the built-in date support in
: Lucene works, so this is why I don't like DateFilter personally.
:
: Your RangeFilter, however, is nicely done and well worth deprecating
: DateFilter for.
      [...]
: > and RangeQuery. [5] Based on my limited tests, using a Filter to
: > restrict
: > to a Range is a lot faster then using RangeQuery -- independent of
: > caching.
:
: And now with FilteredQuery you can have the best of both worlds :)

See, this is what I'm not getting: what is the advantage of the second
world? :) ... in what situations would using...

   s.search(q1, new QueryFilter(new RangeQuery(t1,t2,true));

...be a better choice then...

   s.search(q1, new RangeFilter(t1.field(),t1.text(),t2.text(),true,true);


?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11455-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 19:53:45 2004
Return-Path: <lucene-user-return-11455-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 47507 invoked from network); 23 Nov 2004 19:53:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 19:53:45 -0000
Received: (qmail 81768 invoked by uid 500); 23 Nov 2004 19:53:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 81697 invoked by uid 500); 23 Nov 2004 19:53:22 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 81647 invoked by uid 99); 23 Nov 2004 19:53:22 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_30_40,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.200.217.40] (HELO sakthi.softprosys.com) (203.200.217.40)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 11:53:18 -0800
Received: by sakthi.softprosys.com (Postfix, from userid 517)
	id 9D9E767061; Wed, 24 Nov 2004 01:23:14 +0530 (IST)
Received: from santoshkumar (unknown [192.168.1.157])by sakthi.softprosys.com (Postfix) with SMTP id 535D266FFAfor <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 01:23:14 +0530 (IST)
Message-ID: <001801c4d196$e84f7ec0$9d01a8c0@sprosys.com>
From: "Santosh" <santosh.s@softprosys.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: modifying existing index
Date: Wed, 24 Nov 2004 01:29:14 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;boundary="----=_NextPart_000_0015_01C4D1C5.01F989F0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0015_01C4D1C5.01F989F0
Content-Type: text/plain;charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I am using lucene for indexing, when I am creating Index the docuemnts =
are added. but when I want to modify the single existing document and =
reIndex again, it is taking as new document and adding one more time, so =
that I am getting same document twice in the results.
To overcome this I am deleting existing Index and again recreating whole =
Index. but is it possibe to index  the modified document again and =
overwrite existing document without deleting and recreation. can I do =
this? If so how?=20

and one more question.
can lucene will be able to do stemming?
If I am searching for "roam" then I know that it can give result for =
"foam" using fuzzy query. But my requirement is if I search for "roam" =
can I get the similar worlist as output. so that I can show the end user =
in the column  ---------------   do you mean "foam"?
How can I get similar word list in the given content? =20




-----------------------SOFTPRO DISCLAIMER------------------------------

Information contained in this E-MAIL and any attachments are
confidential being  proprietary to SOFTPRO SYSTEMS  is 'privileged'
and 'confidential'.

If you are not an intended or authorised recipient of this E-MAIL or
have received it in error, You are notified that any use, copying or
dissemination  of the information contained in this E-MAIL in any
manner whatsoever is strictly prohibited. Please delete it immediately
and notify the sender by E-MAIL.

In such a case reading, reproducing, printing or further dissemination
of this E-MAIL is strictly prohibited and may be unlawful.

SOFTPRO SYSYTEMS does not REPRESENT or WARRANT that an attachment
hereto is free from computer viruses or other defects. 

The opinions expressed in this E-MAIL and any ATTACHEMENTS may be
those of the author and are not necessarily those of SOFTPRO SYSTEMS.
------------------------------------------------------------------------

------=_NextPart_000_0015_01C4D1C5.01F989F0--


From lucene-user-return-11456-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 19:57:54 2004
Return-Path: <lucene-user-return-11456-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49983 invoked from network); 23 Nov 2004 19:57:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 19:57:52 -0000
Received: (qmail 94881 invoked by uid 500); 23 Nov 2004 19:56:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94799 invoked by uid 500); 23 Nov 2004 19:56:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94747 invoked by uid 99); 23 Nov 2004 19:56:52 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.40.185.2] (HELO mspmail2.stellent.com) (12.40.185.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 11:56:49 -0800
Received: from [10.10.20.20] ([10.10.20.20])
	by mspmail2.stellent.com (8.11.6+Sun/8.11.5) with ESMTP id iANJuhJ11854
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 13:56:43 -0600 (CST)
Subject: Re: modifying existing index
From: Luke Francl <luke.francl@stellent.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <001801c4d196$e84f7ec0$9d01a8c0@sprosys.com>
References: <001801c4d196$e84f7ec0$9d01a8c0@sprosys.com>
Content-Type: text/plain
Message-Id: <1101239790.24366.40.camel@localhost>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 
Date: Tue, 23 Nov 2004 13:56:30 -0600
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tue, 2004-11-23 at 13:59, Santosh wrote:
> I am using lucene for indexing, when I am creating Index the docuemnts are added. but when I want to modify the single existing document and reIndex again, it is taking as new document and adding one more time, so that I am getting same document twice in the results.
> To overcome this I am deleting existing Index and again recreating whole Index. but is it possibe to index  the modified document again and overwrite existing document without deleting and recreation. can I do this? If so how? 

You do not need to recreate the whole index. Just mark the document as
deleted using the IndexReader and then add it again with the
IndexWriter. Remember to close your IndexReader and IndexWriter after
doing this.

The deleted document will be removed the next time you optimize your
index.

Luke Francl


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11457-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 19:58:02 2004
Return-Path: <lucene-user-return-11457-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 50168 invoked from network); 23 Nov 2004 19:58:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 19:58:01 -0000
Received: (qmail 95197 invoked by uid 500); 23 Nov 2004 19:57:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95159 invoked by uid 500); 23 Nov 2004 19:57:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 95137 invoked by uid 99); 23 Nov 2004 19:57:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [63.100.163.104] (HELO hermes.corp.cyveillance.com) (63.100.163.104)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 11:56:58 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Subject: RE: modifying existing index
Date: Tue, 23 Nov 2004 14:56:52 -0500
Message-ID: <63434C14F9A6F74CB36B85033E4C30CA5BFD12@hermes.corp.cyveillance.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: modifying existing index
Thread-Index: AcTRlhxAiHxJhYogROOrWYFpqk8JRQAABySw
From: "Will Allen" <wallen@Cyveillance.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

To update a document you need to insert the modified document, then =
delete the old one.

Here is some code that I use to get you going in the right direction (it =
wont compile, but if you follow it closely you will see how I take an =
array of lucene documents with new properties and add them, then delete =
the old ones.):


	public void  updateDocuments( Document[] documentsToUpdate )
	{
		if ( documentsToUpdate.length > 0 )
		{
			String updateDate =3D Dates.formatDate( new Date(), "yyyyMMddHHmm" );
			//  wait on some other modification to finish
			HashSet failedToAdd =3D new HashSet();
			waitToModify();
			synchronized(directory)
			{
				IndexWriter indexWriter =3D null;
				try
				{
					indexWriter =3D getWriter();
					indexWriter.mergeFactor =3D 2; //this seems to be needed to =
accomodate a lucene (ver 1.4.2) bug
					//otherwise the index does not accurately reflect the change
					//load data from new document into old document
					for ( int i =3D 0; i < documentsToUpdate.length; i++ )
					{
						try
						{
							Document newDoc =3D modifyDocument( documentsToUpdate[i], =
updateDate );
							if ( newDoc !=3D null )
							{
								documentsToUpdate[i] =3D newDoc;
								indexWriter.addDocument( newDoc );
							}
							else
							{
								failedToAdd.add( documentsToUpdate[i].get( "messageid" ) );
							}
						}
						catch ( IOException addDocException )
						{
							//if we fail to add, make a note and dont delete it
							logger.error( " ["+getContext().getID()+"] error updating =
message:" + documentsToUpdate[i].get("messageid") ,addDocException );
							failedToAdd.add( documentsToUpdate[i].get( "messageid" ) );
						}
						catch ( java.lang.IllegalStateException ise )
						{
							//if we fail to add, make a note and dont delete it
							logger.error( " ["+getContext().getID()+"] error updating =
message:" + documentsToUpdate[i].get("messageid") ,ise );
							failedToAdd.add( documentsToUpdate[i].get( "messageid" ) );
						}
					}
					//if we fail to close the writer, we dont want to continue
					closeWriter();
					searcherVersion =3D -1; //establish that the searcher needs to =
update
					IndexReader reader =3D IndexReader.open( indexPath );
					int testid =3D -1;
					for ( int i =3D 0; i < documentsToUpdate.length; i++ )
					{
						Document newDoc =3D documentsToUpdate[i];
						try
						{
							logger.debug( "delete id:" + newDoc.get( "deleteid" ) + " =
messageid: "
								+ newDoc.get( "messageid" ) );
							reader.delete( Integer.parseInt( newDoc.get( "deleteid" ) ) );
							testid =3D Integer.parseInt( newDoc.get( "deleteid" ) );
						}
						catch ( NumberFormatException nfe )
						{
							logger.warn( "unable to parse the deleteid:" + newDoc.get( =
"deleteid" ) );
						}
					}
					reader.close();
				}
				catch ( IOException ioe )
				{
					logger.error( "Unable to update messages  =
["+getContext().getID()+"]",  ioe );
				}
				finally
				{
					searcherVersion =3D -15;
					stateMask -=3D stateMask & STATE_MODIFYING;
					logUpdate( documentsToUpdate, failedToAdd );
				}			=09
			}
		}
		//optimizeIndex();
	}

-----Original Message-----
From: Santosh [mailto:santosh.s@softprosys.com]
Sent: Tuesday, November 23, 2004 2:59 PM
To: Lucene Users List
Subject: modifying existing index


I am using lucene for indexing, when I am creating Index the docuemnts =
are added. but when I want to modify the single existing document and =
reIndex again, it is taking as new document and adding one more time, so =
that I am getting same document twice in the results.
To overcome this I am deleting existing Index and again recreating whole =
Index. but is it possibe to index  the modified document again and =
overwrite existing document without deleting and recreation. can I do =
this? If so how?=20

and one more question.
can lucene will be able to do stemming?
If I am searching for "roam" then I know that it can give result for =
"foam" using fuzzy query. But my requirement is if I search for "roam" =
can I get the similar worlist as output. so that I can show the end user =
in the column  ---------------   do you mean "foam"?
How can I get similar word list in the given content? =20




-----------------------SOFTPRO DISCLAIMER------------------------------

Information contained in this E-MAIL and any attachments are
confidential being  proprietary to SOFTPRO SYSTEMS  is 'privileged'
and 'confidential'.

If you are not an intended or authorised recipient of this E-MAIL or
have received it in error, You are notified that any use, copying or
dissemination  of the information contained in this E-MAIL in any
manner whatsoever is strictly prohibited. Please delete it immediately
and notify the sender by E-MAIL.

In such a case reading, reproducing, printing or further dissemination
of this E-MAIL is strictly prohibited and may be unlawful.

SOFTPRO SYSYTEMS does not REPRESENT or WARRANT that an attachment
hereto is free from computer viruses or other defects.=20

The opinions expressed in this E-MAIL and any ATTACHEMENTS may be
those of the author and are not necessarily those of SOFTPRO SYSTEMS.
------------------------------------------------------------------------

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11458-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 20:27:38 2004
Return-Path: <lucene-user-return-11458-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 82489 invoked from network); 23 Nov 2004 20:27:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 20:27:37 -0000
Received: (qmail 3052 invoked by uid 500); 23 Nov 2004 20:27:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 2660 invoked by uid 500); 23 Nov 2004 20:27:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 2497 invoked by uid 99); 23 Nov 2004 20:27:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of paul.fuehring@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 12:27:09 -0800
Received: by wproxy.gmail.com with SMTP id 69so603121wra
        for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 12:26:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=qVYv/rJ1SWYISFoSqcEdlPu4KDoAk1gOqGF32RagLvX+/jmWSZia3krMIzunPln+ptnX/9H+4+JGBcY8vjBd6rTKl3nel2XHV/mElt6HlFvfOVEeoHND7/SminmhmyRklCCO9xutCxshdUJ1MLSGP4CQ7n3CMtUtC/9vJSp/dmo=
Received: by 10.54.32.9 with SMTP id f9mr139873wrf;
        Tue, 23 Nov 2004 12:25:24 -0800 (PST)
Received: by 10.54.30.73 with HTTP; Tue, 23 Nov 2004 12:25:23 -0800 (PST)
Message-ID: <e4ae55b904112312255edb5576@mail.gmail.com>
Date: Tue, 23 Nov 2004 21:25:23 +0100
From: Paul <paul.fuehring@gmail.com>
Reply-To: Paul <paul.fuehring@gmail.com>
To: lucene-user <lucene-user@jakarta.apache.org>
Subject: experiences with PDF files
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
I read a lot of mails about the time consuming pdf-parsing and tried
myself some solutions. My example PDF file has 181 pages in 1,5 MB
(mostly text nearly no grafics).
-with pdfbox.org's toolkit it took 17m32s to parse&read it's content
-after installing ghostscript and ps2text / ps2ascii my parsing failed
after page 54 and 2m51s because of irregular fonts
-installing XPDF and using it's tool pdftotext parsing completed after
7-10seconds

My machine is a Celeren 1700 with VMWare Workstation 3.2 (128 MB
assigned) and Linux Suse 7.3.

I will parse my pdf files with xpdf and something like
Runtime.getRuntime().exec("pdftotext -nopgbrk -raw "+pdfFileName+"
"+txtFileName);


Paul

P.S. look at http://www.jguru.com/faq/view.jsp?EID=1074237 for links and tipps

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11459-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 20:32:32 2004
Return-Path: <lucene-user-return-11459-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 88638 invoked from network); 23 Nov 2004 20:32:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 20:32:32 -0000
Received: (qmail 18303 invoked by uid 500); 23 Nov 2004 20:32:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18277 invoked by uid 500); 23 Nov 2004 20:32:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18263 invoked by uid 99); 23 Nov 2004 20:32:26 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.2.177] (HELO fork7.mail.virginia.edu) (128.143.2.177)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 12:32:24 -0800
Received: from localhost (localhost [127.0.0.1])
	by fork7.mail.virginia.edu (Postfix) with ESMTP id 34CB31F5593
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 15:32:04 -0500 (EST)
Received: from fork7.mail.virginia.edu ([127.0.0.1])
 by localhost (fork7.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 09480-03 for <lucene-user@jakarta.apache.org>;
 Tue, 23 Nov 2004 15:32:03 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by fork7.mail.virginia.edu (Postfix) with ESMTP id E78A81F5163
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 15:32:03 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <0de401c4d16d$5a8d32e0$aa87a8c0@ppeddi>
References: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu> <41A30067.2010403@apache.org> <A6DA6D90-3D5A-11D9-8036-000A95BC61B6@ehatchersolutions.com> <0de401c4d16d$5a8d32e0$aa87a8c0@ppeddi>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <B7D43776-3D8E-11D9-B01F-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Numeric Range Restrictions: Queries vs Filters
Date: Tue, 23 Nov 2004 15:31:56 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-UVA-Virus-Scanned: by amavisd-new at fork7.mail.virginia.edu
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 23, 2004, at 10:01 AM, Praveen Peddi wrote:
> Chris's RangeFilter does not cache anything where as QueryFilter does 
> caching. Is it better to add the caching funtionality to RangeFilter 
> also? or does it not make any difference?

Caching is a different _aspect_.  Filtering and caching are not related 
and should not be intimately tied, in my opinion.  The solution is to 
use the CachingWrapperFilter to wrap a RangeFilter when caching is 
desired.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11460-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 20:34:02 2004
Return-Path: <lucene-user-return-11460-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89502 invoked from network); 23 Nov 2004 20:34:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 20:34:02 -0000
Received: (qmail 22208 invoked by uid 500); 23 Nov 2004 20:33:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22183 invoked by uid 500); 23 Nov 2004 20:33:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22164 invoked by uid 99); 23 Nov 2004 20:33:56 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.190.39.112] (HELO web52404.mail.yahoo.com) (206.190.39.112)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 23 Nov 2004 12:33:53 -0800
Received: (qmail 84330 invoked by uid 60001); 23 Nov 2004 20:33:31 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=RLwWuakfyyk9DP2Dp6vekG55/8Q5MuGGiqk4/izXNF2oBZEWEtjKrtdcZoI59NcwtFIJzKam5VK9X6XA3JG9pUvZHOSwAulPPN6aBJBKiHsq6nq92tHdiecyIcREoR/isbRfQBvfOH+/0otn2+gWcSbYsJi9lLj8I0A1/E026Pc=  ;
Message-ID: <20041123203331.84328.qmail@web52404.mail.yahoo.com>
Received: from [12.161.235.225] by web52404.mail.yahoo.com via HTTP; Tue, 23 Nov 2004 12:33:30 PST
Date: Tue, 23 Nov 2004 12:33:30 -0800 (PST)
From: Yonik Seeley <yseeley@yahoo.com>
Reply-To: yseeley@cs.stanford.edu
Subject: Re: Numeric Range Restrictions: Queries vs Filters
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <Pine.LNX.4.58.0411231053350.12672@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I think it depends on the query.  If the query (q1)
covers a large number of documents and the fiter
covers a very small number, then using a RangeFilter
will probably be slower than a RangeQuery.

-Yonik


> See, this is what I'm not getting: what is the
> advantage of the second
> world? :) ... in what situations would using...
> 
>    s.search(q1, new QueryFilter(new
> RangeQuery(t1,t2,true));
> 
> ...be a better choice then...
> 
>    s.search(q1, new
>
RangeFilter(t1.field(),t1.text(),t2.text(),true,true);



__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11461-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 20:40:24 2004
Return-Path: <lucene-user-return-11461-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 93550 invoked from network); 23 Nov 2004 20:40:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 20:40:24 -0000
Received: (qmail 39686 invoked by uid 500); 23 Nov 2004 20:40:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 39661 invoked by uid 500); 23 Nov 2004 20:40:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 39636 invoked by uid 99); 23 Nov 2004 20:40:13 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [206.190.39.116] (HELO web52408.mail.yahoo.com) (206.190.39.116)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 23 Nov 2004 12:40:11 -0800
Received: (qmail 13214 invoked by uid 60001); 23 Nov 2004 20:40:05 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=6hpliOI5vilCeEglyn2OKvgMydlVB33/SeRTCKtzyzjxnZBSkxBPX/DPx2Z0r66nHH0MLiLs3BImdFoMevdZTCr5plOGynx0s162f0gstYauGDpoCKsXTW4tiiAcl2gg6ImjC9njbVRvw9V2rMkslespS81FNBvzaP57MQeqn6Y=  ;
Message-ID: <20041123204004.13212.qmail@web52408.mail.yahoo.com>
Received: from [12.161.235.225] by web52408.mail.yahoo.com via HTTP; Tue, 23 Nov 2004 12:40:04 PST
Date: Tue, 23 Nov 2004 12:40:04 -0800 (PST)
From: Yonik Seeley <yseeley@yahoo.com>
Reply-To: yseeley@cs.stanford.edu
Subject: Re: Numeric Range Restrictions: Queries vs Filters
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20041123203331.84328.qmail@web52404.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hmmm, scratch that.  I explained the tradeoff of a
filter vs a range query - not between the different
types of filters you talk about.

--- Yonik Seeley <yseeley@yahoo.com> wrote:
> I think it depends on the query.  If the query (q1)
> covers a large number of documents and the fiter
> covers a very small number, then using a RangeFilter
> will probably be slower than a RangeQuery.
> 
> -Yonik
> 
> 
> > See, this is what I'm not getting: what is the
> > advantage of the second
> > world? :) ... in what situations would using...
> > 
> >    s.search(q1, new QueryFilter(new
> > RangeQuery(t1,t2,true));
> > 
> > ...be a better choice then...
> > 
> >    s.search(q1, new
> >
>
RangeFilter(t1.field(),t1.text(),t2.text(),true,true);
> 
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam
> protection around 
> http://mail.yahoo.com 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
> 
> 



		
__________________________________ 
Do you Yahoo!? 
Meet the all-new My Yahoo! - Try it today! 
http://my.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11462-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 20:42:15 2004
Return-Path: <lucene-user-return-11462-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94419 invoked from network); 23 Nov 2004 20:42:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 20:42:15 -0000
Received: (qmail 49280 invoked by uid 500); 23 Nov 2004 20:42:06 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49242 invoked by uid 500); 23 Nov 2004 20:42:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49222 invoked by uid 99); 23 Nov 2004 20:42:06 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.2.177] (HELO fork7.mail.virginia.edu) (128.143.2.177)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 12:42:05 -0800
Received: from localhost (localhost [127.0.0.1])
	by fork7.mail.virginia.edu (Postfix) with ESMTP id 111E11F558D
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 15:42:01 -0500 (EST)
Received: from fork7.mail.virginia.edu ([127.0.0.1])
 by localhost (fork7.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 12621-01 for <lucene-user@jakarta.apache.org>;
 Tue, 23 Nov 2004 15:42:00 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by fork7.mail.virginia.edu (Postfix) with ESMTP id C1B341F5591
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 15:42:00 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <Pine.LNX.4.58.0411231053350.12672@hal.rescomp.berkeley.edu>
References: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu> <0CD1B7F0-3D53-11D9-8036-000A95BC61B6@ehatchersolutions.com> <Pine.LNX.4.58.0411231053350.12672@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <1B98396C-3D90-11D9-B01F-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Numeric Range Restrictions: Queries vs Filters
Date: Tue, 23 Nov 2004 15:41:53 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-UVA-Virus-Scanned: by amavisd-new at fork7.mail.virginia.edu
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 23, 2004, at 2:16 PM, Chris Hostetter wrote:
> : I did a little code cleanup, Chris, renaming some RangeFilter 
> variables
> : and correcting typos in the Javadocs.  Let me know if everything 
> looks
> : ok.
>
> Wow ... that was fast.  Things look fine to me (typo's in javadocs are 
> my
> specialty)  but now I wish I'd included more tests

We can always add more tests.  Anytime.

> First: Is there any reason Matt Quail's "LongField" class hasn't been
> added to CVS (or has it and I'm just not seeing it?)

Laziness is the only reason, at least on my part.  I think adding it is 
a great thing.  I'll look into it.

> I haven't tested it extensively, but strikes me as being a crucial 
> utility
> for people who want to do any serious sorting or filtering of numeric
> values.

I debate (with myself) on whether add-ons that can be done with other 
code is worth adding to Lucene's core.  In this case the utility 
methods are so commonly needed that it makes sense.  But it could be 
argued also that there are are classes in Lucene that are not central 
to its operation.

> Although I would suggest a few minor tweaks:
>   a) Rename to something like NumberTools (to be consistent with the 
> new
>      DateTools and because...)

Agreed.

>   b) Add some one line convinience methods like intToString and
>      floatToString and doubleToString ala:
>          return longToString(Double.doubleToLongBits(d));

No objects to having convenience methods - though I need to look at 
what the LongField code is providing before commenting in detail.

> : And now with FilteredQuery you can have the best of both worlds :)
>
> See, this is what I'm not getting: what is the advantage of the second
> world? :) ... in what situations would using...
>
>    s.search(q1, new QueryFilter(new RangeQuery(t1,t2,true));
>
> ...be a better choice then...
>
>    s.search(q1, new 
> RangeFilter(t1.field(),t1.text(),t2.text(),true,true);

Note that I said FilteredQuery, not QueryFilter.

Certainly RangeFilter is cleaner than using a QueryFilter(RangeFilter) 
combination - that's why we added it.  :)

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11463-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 21:28:41 2004
Return-Path: <lucene-user-return-11463-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21741 invoked from network); 23 Nov 2004 21:28:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 21:28:29 -0000
Received: (qmail 50340 invoked by uid 500); 23 Nov 2004 21:28:13 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50265 invoked by uid 500); 23 Nov 2004 21:28:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50228 invoked by uid 99); 23 Nov 2004 21:28:12 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [128.143.2.193] (HELO fork3.mail.virginia.edu) (128.143.2.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 13:28:10 -0800
Received: from localhost (localhost [127.0.0.1])
	by fork3.mail.virginia.edu (Postfix) with ESMTP id 27D701C008
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 16:27:50 -0500 (EST)
Received: from fork3.mail.virginia.edu ([127.0.0.1])
 by localhost (fork3.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 09540-05 for <lucene-user@jakarta.apache.org>;
 Tue, 23 Nov 2004 16:27:49 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by fork3.mail.virginia.edu (Postfix) with ESMTP id C87DB1BFE2
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 16:27:49 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <1B98396C-3D90-11D9-B01F-000A95BC61B6@ehatchersolutions.com>
References: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu> <0CD1B7F0-3D53-11D9-8036-000A95BC61B6@ehatchersolutions.com> <Pine.LNX.4.58.0411231053350.12672@hal.rescomp.berkeley.edu> <1B98396C-3D90-11D9-B01F-000A95BC61B6@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <818DE409-3D96-11D9-B01F-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Numeric Range Restrictions: Queries vs Filters
Date: Tue, 23 Nov 2004 16:27:41 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-UVA-Virus-Scanned: by amavisd-new at fork3.mail.virginia.edu
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 23, 2004, at 3:41 PM, Erik Hatcher wrote:
> On Nov 23, 2004, at 2:16 PM, Chris Hostetter wrote:
>> First: Is there any reason Matt Quail's "LongField" class hasn't been
>> added to CVS (or has it and I'm just not seeing it?)
>
> Laziness is the only reason, at least on my part.  I think adding it 
> is a great thing.  I'll look into it.

I'm feeling particularly commit-y today.  I dug up Matt Quail's 
original LongField contribution in e-mail and adapted it to a new 
NumberTools class.  I committed it along with the tests he contributed 
also.

I think there needs to be some discussion on what other utility methods 
should be added.  For example, most of the numerics I index are 
positive integers and using a zero-padded is sufficient.  I'd rather 
have clearly recognizable numbers in my fields than some strange 
contortion that requires a conversion process to see.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11464-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 21:47:45 2004
Return-Path: <lucene-user-return-11464-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 33626 invoked from network); 23 Nov 2004 21:47:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 21:47:45 -0000
Received: (qmail 96299 invoked by uid 500); 23 Nov 2004 21:47:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96259 invoked by uid 500); 23 Nov 2004 21:47:32 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96242 invoked by uid 99); 23 Nov 2004 21:47:32 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of paul.fuehring@gmail.com designates 64.233.184.192 as permitted sender)
Received: from [64.233.184.192] (HELO wproxy.gmail.com) (64.233.184.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 13:47:30 -0800
Received: by wproxy.gmail.com with SMTP id 69so614452wra
        for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 13:47:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=gJmEXKDhEU3oV6DcGCI+yRnaonsRoMnDeipgRWA0z/m0IZ5anPlIa/UsNO2RlkC8Rdhln/nxffPDtKDFaNC5FCU87L6/zzf6u08VwLVGE6NDXrV+RAZYsnDef71S7top2sopp5zW4yNCYdsNPZYUD5DPi8cDor7y2hNURZk8SRI=
Received: by 10.54.32.9 with SMTP id f9mr224150wrf;
        Tue, 23 Nov 2004 13:47:21 -0800 (PST)
Received: by 10.54.30.73 with HTTP; Tue, 23 Nov 2004 13:47:21 -0800 (PST)
Message-ID: <e4ae55b9041123134772290619@mail.gmail.com>
Date: Tue, 23 Nov 2004 22:47:21 +0100
From: Paul <paul.fuehring@gmail.com>
Reply-To: Paul <paul.fuehring@gmail.com>
To: lucene-user <lucene-user@jakarta.apache.org>
Subject: retrieving added document
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,
I'm creating a document and adding it with a writer to the index. For
some reason I need to add data to this specific document later on
(minutes, not hours or days). Is it possible to retrieve it and add
additonal data?
I found the document(int n) - method within the IndexReader (btw: the
description makes no sense for me: "Returns the stored fields of the
nth Document in this index." - but it returns a Document and not a
list of fields..) but where do I get that number from? (and the
numbers change, I know..)

thanks for any help

Paul

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11465-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 22:03:15 2004
Return-Path: <lucene-user-return-11465-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41948 invoked from network); 23 Nov 2004 22:03:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 22:03:14 -0000
Received: (qmail 26628 invoked by uid 500); 23 Nov 2004 22:02:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26503 invoked by uid 500); 23 Nov 2004 22:02:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26469 invoked by uid 99); 23 Nov 2004 22:02:56 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 14:02:53 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 8AA435B7D9; Tue, 23 Nov 2004 14:02:36 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 87AE07F45E
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 14:02:36 -0800 (PST)
Date: Tue, 23 Nov 2004 14:02:36 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Numeric Range Restrictions: Queries vs Filters
In-Reply-To: <1B98396C-3D90-11D9-B01F-000A95BC61B6@ehatchersolutions.com>
Message-ID: <Pine.LNX.4.58.0411231333010.12631@hal.rescomp.berkeley.edu>
References: <Pine.LNX.4.58.0411221818360.19461@hal.rescomp.berkeley.edu>
 <0CD1B7F0-3D53-11D9-8036-000A95BC61B6@ehatchersolutions.com>
 <Pine.LNX.4.58.0411231053350.12672@hal.rescomp.berkeley.edu>
 <1B98396C-3D90-11D9-B01F-000A95BC61B6@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


: Note that I said FilteredQuery, not QueryFilter.

Doh .. right sorry, I confused myself by thinking you were still refering
to your comments 2004-03-29 comparing DateFilter with RangeQuery wrapped
in a QueryFilter.

: I debate (with myself) on whether add-ons that can be done with other
: code is worth adding to Lucene's core.  In this case the utility
: methods are so commonly needed that it makes sense.  But it could be

In particular, having a class of utilities like that in the code base is
usefull, because now the javadocs for classes like RangeQuery and
RangeFilter can refrence them as being neccessary important to ensure that
ranges work the way you expect ... and hopefully fewer people will be
confused in the future.

: I think there needs to be some discussion on what other utility methods
: should be added.  For example, most of the numerics I index are
: positive integers and using a zero-padded is sufficient.  I'd rather
: have clearly recognizable numbers in my fields than some strange
: contortion that requires a conversion process to see.

I'm of two minds, on one hand I think there's no big harm in providing
every concievable utility function known to man so people have their
choice of representation.  On the other hand, I think it would be nice if
Lucene had a much simpler API for dealing with "non-strings" that just did
"the right thing" based on simple expectations -- without the user having
to ask themselves: "Will i ever need negative numbers?  Will I ever need
numbers bigger then 1000?" or to later remember that they padded tis field
to 5 digits and that field to 7 digits.

Having clearly recognized values is something that can (should?) be easily
accomplished by indexing the contorted but lexically sortable value, and
storing the more readable value...

    Document d = /* some doc */;
    Long l = /* some value */;
    Field f1 = Field.UnIndexed("field", l.toString());
    Field f2 = Field.UnStored("field", NumerTools.longToString(l));
    d.add(f1);
    d.add(f2);

(I'm not imagining things right?  that should work, correct?)

What would really be sweet, Is if Lucene had an API that
transparently dealt with all of the major primitive types, both at
indexing time and at query time, so that users ddn't have to pay any
attention to the stringification, or when to Index a different value
then they store...

    Field f = Field.Long("field", l); /* indexes one string, stores the other */
    d.add(f);
    ...
    Query q = new RangeQuery("field", l1, l2); /* knows to use the contorted string */
    ...
    String s = hits.doc(i).getValue("field"); /* returns pretty string */
    Long l = hits.doc(i).getValue("field");   /* returns orriginal Long */

--

-------------------------------------------------------------------
"Oh, you're a tricky one."                        Chris M Hostetter
     -- Trisha Weir                    hossman@rescomp.berkeley.edu


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11466-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 23:03:12 2004
Return-Path: <lucene-user-return-11466-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 70998 invoked from network); 23 Nov 2004 23:03:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 23:03:11 -0000
Received: (qmail 73916 invoked by uid 500); 23 Nov 2004 23:03:05 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 73887 invoked by uid 500); 23 Nov 2004 23:03:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73872 invoked by uid 99); 23 Nov 2004 23:03:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [12.43.53.196] (HELO mail.sofari.com) (12.43.53.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 15:03:02 -0800
Received: from [192.168.1.106] ([12.43.53.196])
	by mail.sofari.com (8.12.11/8.12.3/Debian-6.6) with ESMTP id iANN2xil006257
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 15:02:59 -0800
Message-ID: <41A3C19D.3080904@newsmonster.org>
Date: Tue, 23 Nov 2004 15:02:53 -0800
From: "Kevin A. Burton" <burton@newsmonster.org>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.7) Gecko/20040616
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: JDBCDirectory to prevent optimize()?
References: <41A270E3.4070503@newsmonster.org> <8EB7BC0B-3D3B-11D9-982F-000393A564E6@ehatchersolutions.com>
In-Reply-To: <8EB7BC0B-3D3B-11D9-982F-000393A564E6@ehatchersolutions.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:

> Also, there is a DBDirectory in the sandbox to store a Lucene index 
> inside Berkeley DB.

I assume this would prevent prefix queries from working...

Kevin

-- 

Use Rojo (RSS/Atom aggregator).  Visit http://rojo.com. Ask me for an 
invite!  Also see irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

If you're interested in RSS, Weblogs, Social Networking, etc... then you 
should work for Rojo!  If you recommend someone and we hire them you'll 
get a free iPod!
    
Kevin A. Burton, Location - San Francisco, CA
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11467-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 23 23:37:58 2004
Return-Path: <lucene-user-return-11467-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91041 invoked from network); 23 Nov 2004 23:37:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 23 Nov 2004 23:37:58 -0000
Received: (qmail 38150 invoked by uid 500); 23 Nov 2004 23:37:52 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 38124 invoked by uid 500); 23 Nov 2004 23:37:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 38098 invoked by uid 99); 23 Nov 2004 23:37:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of john.wang@gmail.com designates 64.233.170.202 as permitted sender)
Received: from [64.233.170.202] (HELO rproxy.gmail.com) (64.233.170.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 15:37:49 -0800
Received: by rproxy.gmail.com with SMTP id a36so28953rnf
        for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 15:37:44 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=f+wOxZ+tPbXvvYog6TFXEOx44xNPxQMeQx/2uCFamIr3tIGyzo4LIV5FFSdV9qXYiRED2IYiDx6ESMBjSA0VSTzzKka05+xdz2/jfQULZU9imJWK9m4Ri+IEGZ9b7Kd4N8nw8tVzSqcRkDjwpb4+q53OtC0aHq2rpKTEGJF8v7Y=
Received: by 10.39.3.80 with SMTP id f80mr88777rni;
        Tue, 23 Nov 2004 15:37:44 -0800 (PST)
Received: by 10.38.75.29 with HTTP; Tue, 23 Nov 2004 15:37:44 -0800 (PST)
Message-ID: <8837fb7704112315374f5d84e6@mail.gmail.com>
Date: Tue, 23 Nov 2004 15:37:44 -0800
From: John Wang <john.wang@gmail.com>
Reply-To: John Wang <john.wang@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: URGENT: Help indexing large document set
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi:

   I am trying to index 1M documents, with batches of 500 documents.

   Each document has an unique text key, which is added as a
Field.KeyWord(name,value).

   For each batch of 500, I need to make sure I am not adding a
document with a key that is already in the current index.

  To do this, I am calling IndexSearcher.docFreq for each document and
delete the document currently in the index with the same key:
 
       while (keyIter.hasNext()) {
            String objectID = (String) keyIter.next();
            term = new Term("key", objectID);
            int count = localSearcher.docFreq(term);

            if (count != 0) {
                localReader.delete(term);
            }
          }

Then I proceed with adding the documents.

This turns out to be extremely expensive, I looked into the code and I see in 
TermInfosReader.get(Term term) it is doing a linear look up for each
term. So as the index grows, the above operation degrades at a linear
rate. So for each commit, we are doing a docFreq for 500 documents.

I also tried to create a BooleanQuery composed of 500 TermQueries and
do 1 search for each batch, and the performance didn't get better. And
if the batch size increases to say 50,000, creating a BooleanQuery
composed of 50,000 TermQuery instances may introduce huge memory
costs.

Is there a better way to do this?

Can TermInfosReader.get(Term term) be optimized to do a binary lookup
instead of a linear walk? Of course that depends on whether the terms
are stored in sorted order, are they?

This is very urgent, thanks in advance for all your help.

-John

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11468-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 00:13:41 2004
Return-Path: <lucene-user-return-11468-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8016 invoked from network); 24 Nov 2004 00:13:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 00:13:41 -0000
Received: (qmail 1612 invoked by uid 500); 24 Nov 2004 00:13:31 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 1452 invoked by uid 500); 24 Nov 2004 00:13:29 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 1435 invoked by uid 99); 24 Nov 2004 00:13:29 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 16:13:27 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: URGENT: Help indexing large document set
Date: Tue, 23 Nov 2004 16:13:22 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C02A44FF4@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: URGENT: Help indexing large document set
Thread-Index: AcTRtXYzpZsNrjYtTr6Fpx9pZvNPvQABHwTg
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"John Wang" <john.wang@gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Are you sure you have a performance problem with
TermInfosReader.get(Term)?  It looks to me like it scans sequentially
only within a small buffer window (of size
SegmentTermEnum.indexInterval) and that it uses binary search otherwise.
See TermInfosReader.getIndexOffset(Term).

Chuck

  > -----Original Message-----
  > From: John Wang [mailto:john.wang@gmail.com]
  > Sent: Tuesday, November 23, 2004 3:38 PM
  > To: lucene-user@jakarta.apache.org
  > Subject: URGENT: Help indexing large document set
  >=20
  > Hi:
  >=20
  >    I am trying to index 1M documents, with batches of 500 documents.
  >=20
  >    Each document has an unique text key, which is added as a
  > Field.KeyWord(name,value).
  >=20
  >    For each batch of 500, I need to make sure I am not adding a
  > document with a key that is already in the current index.
  >=20
  >   To do this, I am calling IndexSearcher.docFreq for each document
and
  > delete the document currently in the index with the same key:
  >=20
  >        while (keyIter.hasNext()) {
  >             String objectID =3D (String) keyIter.next();
  >             term =3D new Term("key", objectID);
  >             int count =3D localSearcher.docFreq(term);
  >=20
  >             if (count !=3D 0) {
  >                 localReader.delete(term);
  >             }
  >           }
  >=20
  > Then I proceed with adding the documents.
  >=20
  > This turns out to be extremely expensive, I looked into the code and
I
  > see in
  > TermInfosReader.get(Term term) it is doing a linear look up for each
  > term. So as the index grows, the above operation degrades at a
linear
  > rate. So for each commit, we are doing a docFreq for 500 documents.
  >=20
  > I also tried to create a BooleanQuery composed of 500 TermQueries
and
  > do 1 search for each batch, and the performance didn't get better.
And
  > if the batch size increases to say 50,000, creating a BooleanQuery
  > composed of 50,000 TermQuery instances may introduce huge memory
  > costs.
  >=20
  > Is there a better way to do this?
  >=20
  > Can TermInfosReader.get(Term term) be optimized to do a binary
lookup
  > instead of a linear walk? Of course that depends on whether the
terms
  > are stored in sorted order, are they?
  >=20
  > This is very urgent, thanks in advance for all your help.
  >=20
  > -John
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11469-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 00:23:43 2004
Return-Path: <lucene-user-return-11469-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 12798 invoked from network); 24 Nov 2004 00:23:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 00:23:43 -0000
Received: (qmail 18509 invoked by uid 500); 24 Nov 2004 00:23:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18336 invoked by uid 500); 24 Nov 2004 00:23:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18122 invoked by uid 99); 24 Nov 2004 00:23:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of john.wang@gmail.com designates 64.233.170.198 as permitted sender)
Received: from [64.233.170.198] (HELO rproxy.gmail.com) (64.233.170.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 16:23:07 -0800
Received: by rproxy.gmail.com with SMTP id a36so31238rnf
        for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 16:23:00 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=etrMQc7qRJ5++3u/pnheeOUodnpPeN6QSmXHDMi9Nm6vhi47VDRgdbcw/Sr6mmnw36rW1hTvyW+XadO4L+Qg1X8w+r16QBRx9Cs6xcPGbSlriqr5kyI20pIKEVkA53v/VyClNpb0WQiYHJgW1qn1ZsDd6fx7yuBBBHJ5yQAg3CA=
Received: by 10.38.99.75 with SMTP id w75mr100350rnb;
        Tue, 23 Nov 2004 16:22:59 -0800 (PST)
Received: by 10.38.75.29 with HTTP; Tue, 23 Nov 2004 16:22:59 -0800 (PST)
Message-ID: <8837fb7704112316225d10e625@mail.gmail.com>
Date: Tue, 23 Nov 2004 16:22:59 -0800
From: John Wang <john.wang@gmail.com>
Reply-To: John Wang <john.wang@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: URGENT: Help indexing large document set
In-Reply-To: <E3381E0825F1954D953A4E347017BB1C02A44FF4@reh001-1.REX001.ExchangeByRegister.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <E3381E0825F1954D953A4E347017BB1C02A44FF4@reh001-1.REX001.ExchangeByRegister.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Chuck! I missed the call: getIndexOffset.
I am profiling it again to pin-point where the performance problem is.

-John

On Tue, 23 Nov 2004 16:13:22 -0800, Chuck Williams <chuck@manawiz.com> wrote:
> Are you sure you have a performance problem with
> TermInfosReader.get(Term)?  It looks to me like it scans sequentially
> only within a small buffer window (of size
> SegmentTermEnum.indexInterval) and that it uses binary search otherwise.
> See TermInfosReader.getIndexOffset(Term).
> 
> Chuck
> 
> 
> 
>  > -----Original Message-----
>  > From: John Wang [mailto:john.wang@gmail.com]
>  > Sent: Tuesday, November 23, 2004 3:38 PM
>  > To: lucene-user@jakarta.apache.org
>  > Subject: URGENT: Help indexing large document set
>  >
>  > Hi:
>  >
>  >    I am trying to index 1M documents, with batches of 500 documents.
>  >
>  >    Each document has an unique text key, which is added as a
>  > Field.KeyWord(name,value).
>  >
>  >    For each batch of 500, I need to make sure I am not adding a
>  > document with a key that is already in the current index.
>  >
>  >   To do this, I am calling IndexSearcher.docFreq for each document
> and
>  > delete the document currently in the index with the same key:
>  >
>  >        while (keyIter.hasNext()) {
>  >             String objectID = (String) keyIter.next();
>  >             term = new Term("key", objectID);
>  >             int count = localSearcher.docFreq(term);
>  >
>  >             if (count != 0) {
>  >                 localReader.delete(term);
>  >             }
>  >           }
>  >
>  > Then I proceed with adding the documents.
>  >
>  > This turns out to be extremely expensive, I looked into the code and
> I
>  > see in
>  > TermInfosReader.get(Term term) it is doing a linear look up for each
>  > term. So as the index grows, the above operation degrades at a
> linear
>  > rate. So for each commit, we are doing a docFreq for 500 documents.
>  >
>  > I also tried to create a BooleanQuery composed of 500 TermQueries
> and
>  > do 1 search for each batch, and the performance didn't get better.
> And
>  > if the batch size increases to say 50,000, creating a BooleanQuery
>  > composed of 50,000 TermQuery instances may introduce huge memory
>  > costs.
>  >
>  > Is there a better way to do this?
>  >
>  > Can TermInfosReader.get(Term term) be optimized to do a binary
> lookup
>  > instead of a linear walk? Of course that depends on whether the
> terms
>  > are stored in sorted order, are they?
>  >
>  > This is very urgent, thanks in advance for all your help.
>  >
>  > -John
>  >
>  >
> ---------------------------------------------------------------------
>  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11470-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 00:24:42 2004
Return-Path: <lucene-user-return-11470-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13379 invoked from network); 24 Nov 2004 00:24:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 00:24:42 -0000
Received: (qmail 21401 invoked by uid 500); 24 Nov 2004 00:24:09 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21271 invoked by uid 500); 24 Nov 2004 00:24:05 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21154 invoked by uid 99); 24 Nov 2004 00:24:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 16:23:59 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3F93213E28F8; Tue, 23 Nov 2004 19:23:34 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 9030B13E28F9
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 19:23:30 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <41A3C19D.3080904@newsmonster.org>
References: <41A270E3.4070503@newsmonster.org> <8EB7BC0B-3D3B-11D9-982F-000393A564E6@ehatchersolutions.com> <41A3C19D.3080904@newsmonster.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <0D111E8B-3DAF-11D9-BE93-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: JDBCDirectory to prevent optimize()?
Date: Tue, 23 Nov 2004 19:23:23 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 23, 2004, at 6:02 PM, Kevin A. Burton wrote:
> Erik Hatcher wrote:
>
>> Also, there is a DBDirectory in the sandbox to store a Lucene index 
>> inside Berkeley DB.
>
> I assume this would prevent prefix queries from working...

Huh?  Why would you assume that?  As far as I know, and I've tested 
this some, a Lucene index inside Berkeley DB works the same as if it 
had been in RAM or on the filesystem.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11471-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 00:31:25 2004
Return-Path: <lucene-user-return-11471-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 15846 invoked from network); 24 Nov 2004 00:31:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 00:31:25 -0000
Received: (qmail 30615 invoked by uid 500); 24 Nov 2004 00:31:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30591 invoked by uid 500); 24 Nov 2004 00:31:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30575 invoked by uid 99); 24 Nov 2004 00:31:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of ken.mccracken@gmail.com designates 64.233.170.198 as permitted sender)
Received: from [64.233.170.198] (HELO rproxy.gmail.com) (64.233.170.198)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 16:31:16 -0800
Received: by rproxy.gmail.com with SMTP id a36so31719rnf
        for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 16:31:14 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=PZ2aKQWZx9mCtqPt9PFc/m//D+EQY5YgLA6gvE+KvGn3iF9vVch0MPhrBqtt2IIaXJgWPRI++pK4C/UA8LBsFDPpAcc1XtOuuaXQoh826fM7L+HJAWikgmB/G0RPN/L+zcMBLRFM6i9j7XxWp1wr/iNmvKRQ7i05tLPaDNNlG5M=
Received: by 10.38.150.72 with SMTP id x72mr105103rnd;
        Tue, 23 Nov 2004 16:31:14 -0800 (PST)
Received: by 10.38.75.22 with HTTP; Tue, 23 Nov 2004 16:31:14 -0800 (PST)
Message-ID: <2b2518a404112316313c264077@mail.gmail.com>
Date: Tue, 23 Nov 2004 16:31:14 -0800
From: Ken McCracken <ken.mccracken@gmail.com>
Reply-To: Ken McCracken <ken.mccracken@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: lucene Scorers
In-Reply-To: <200411131207.05478.paul.elschot@xs4all.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <E3381E0825F1954D953A4E347017BB1C028B9E66@reh001-1.REX001.ExchangeByRegister.com>
	 <200411131207.05478.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

Thanks the pointers in your replies.  Would it be possible to include
some sort of accrual scorer interface somewhere in the Lucene Query
APIs?  This could be passed into a query similar to
MaxDisjunctionQuery; and combine the sum, max, tieBreaker, etc.,
according to the implementor's discretion, to compute the overall
score for a document.

-Ken

On Sat, 13 Nov 2004 12:07:05 +0100, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> On Friday 12 November 2004 22:56, Chuck Williams wrote:
> 
> 
> > I had a similar need and wrote MaxDisjunctionQuery and
> > MaxDisjunctionScorer.  Unfortunately these are not available as a patch
> > but I've included the original message below that has the code (modulo
> > line breaks added by simple text email format).
> >
> > This code is functional -- I use it in my app.  It is optimized for its
> > stated use, which involves a small number of clauses.  You'd want to
> > improve the incremental sorting (e.g., using the bucket technique of
> > BooleanQuery) if you need it for large numbers of clauses.
> 
> When you're interested, you can also have a look here for
> yet another DisjunctionScorer:
> http://issues.apache.org/bugzilla/show_bug.cgi?id=31785
> 
> It has the advantage that it implements skipTo() so that it can
> be used as a subscorer of ConjunctionScorer, ie. it can be
> faster in situations like this:
> 
> aa AND (bb OR cc)
> 
> where bb and cc are treated by the DisjunctionScorer.
> When aa is a filter this can also be used to implement
> a filtering query.
> 
> 
> 
> 
> > Re. Paul's suggested steps below, I did not integrate this with query
> > parser as I didn't need that functionality (since I'm generating the
> > multi-field expansions for which max is a much better scoring choice
> > than sum).
> >
> > Chuck
> >
> > Included message:
> >
> > -----Original Message-----
> > From: Chuck Williams [mailto:chuck@manawiz.com]
> > Sent: Monday, October 11, 2004 9:55 PM
> > To: lucene-dev@jakarta.apache.org
> > Subject: Contribution: better multi-field searching
> >
> > The files included below (MaxDisjunctionQuery.java and
> > MaxDisjunctionScorer.java) provide a new mechanism for searching across
> > multiple fields.
> 
> The maximum indeed works well, also when the fields differ a lot length.
> 
> Regards,
> Paul
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11472-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 00:41:53 2004
Return-Path: <lucene-user-return-11472-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34665 invoked from network); 24 Nov 2004 00:41:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 00:41:53 -0000
Received: (qmail 43869 invoked by uid 500); 24 Nov 2004 00:41:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43843 invoked by uid 500); 24 Nov 2004 00:41:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43830 invoked by uid 99); 24 Nov 2004 00:41:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of appler@gmail.com designates 64.233.170.203 as permitted sender)
Received: from [64.233.170.203] (HELO rproxy.gmail.com) (64.233.170.203)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 16:41:41 -0800
Received: by rproxy.gmail.com with SMTP id 34so16030rns
        for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 16:41:37 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=pU6daBe3OX3u0vvkh+IWV8oYs412vK1n0yLtEizfE+/3H/nWeM/shi9MqYEiMvP6ydmvWV0k2G60jVe8GKt8ywb73ShvFDRVCrjmw2W2RSdU/cirqq379Bq3TFIlT+eviPuLkem9aAOyTx9vsnFmp5mYnlMuFZ6pWOchb2UY5T4=
Received: by 10.38.8.74 with SMTP id 74mr71264rnh;
        Tue, 23 Nov 2004 16:41:37 -0800 (PST)
Received: by 10.38.206.64 with HTTP; Tue, 23 Nov 2004 16:41:37 -0800 (PST)
Message-ID: <48b7084904112316415afe133f@mail.gmail.com>
Date: Wed, 24 Nov 2004 09:41:37 +0900
From: Cheolgoo Kang <appler@gmail.com>
Reply-To: Cheolgoo Kang <appler@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>, 
	Paul <paul.fuehring@gmail.com>
Subject: Re: retrieving added document
In-Reply-To: <e4ae55b9041123134772290619@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <e4ae55b9041123134772290619@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tue, 23 Nov 2004 22:47:21 +0100, Paul <paul.fuehring@gmail.com> wrote:
> Hi,
> I'm creating a document and adding it with a writer to the index. For
> some reason I need to add data to this specific document later on
> (minutes, not hours or days). Is it possible to retrieve it and add
> additonal data?

No, you cannot add additional data (or modify) to previously added document.
It's easy to delete the old one from the index and add a new document with
additional data included.

> I found the document(int n) - method within the IndexReader (btw: the
> description makes no sense for me: "Returns the stored fields of the
> nth Document in this index." - but it returns a Document and not a
> list of fields..) but where do I get that number from? (and the
> numbers change, I know..)

Usually you search using IndexSearcher and it's resulting Hits has the doc-id
(the number) in that index. And the Document contains the list of
(stored) fields.

> 
> thanks for any help
> 
> Paul
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


-- 
Cheolgoo, Kang

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11473-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 00:45:35 2004
Return-Path: <lucene-user-return-11473-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36014 invoked from network); 24 Nov 2004 00:45:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 00:45:35 -0000
Received: (qmail 50394 invoked by uid 500); 24 Nov 2004 00:45:24 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 50370 invoked by uid 500); 24 Nov 2004 00:45:24 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 50352 invoked by uid 99); 24 Nov 2004 00:45:24 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 16:45:21 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: lucene Scorers
Date: Tue, 23 Nov 2004 16:45:16 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C02A45000@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: lucene Scorers
Thread-Index: AcTRvO1loNYNtYjsTKemJ3+NULb3kwAAGJgg
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"Ken McCracken" <ken.mccracken@gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Ken,

I'm glad our replies were helpful.  It sounds like you looked at the
code in MaxDisjunctionQuery, so you probably noticed that it also
implements skipTo().  Your suggestion sounds like a good thing to do.  I
thought about that when writing MaxDisjunctionQuery, but didn't need the
generality, and it does make the code more complex.  I think Lucene
needs one of these mechanisms in it, at least to solve the problems
associated with the current default use of BooleanQuery for multiple
field expansions.  Your proposal would generalize this to solve
additional cases where different accrual operators are appropriate.

You could write and submit the generalization, although there are no
guarantees anybody would do anything with it.  I didn't get anywhere in
my attempt to submit MaxDisjunctionQuery.  I think there is also a
serious problem in scoring with the current score normalization (it does
not provide meaningfully comaparable scores across different searches,
which means that absolute score numbers like 0.8 have no intrinsic
meaning concerning how good a result is or is not).  When I finally get
back to tuning search in my app, that's the next one I'll try a
submission on.

Chuck

  > -----Original Message-----
  > From: Ken McCracken [mailto:ken.mccracken@gmail.com]
  > Sent: Tuesday, November 23, 2004 4:31 PM
  > To: Lucene Users List
  > Subject: Re: lucene Scorers
  >=20
  > Hi,
  >=20
  > Thanks the pointers in your replies.  Would it be possible to
include
  > some sort of accrual scorer interface somewhere in the Lucene Query
  > APIs?  This could be passed into a query similar to
  > MaxDisjunctionQuery; and combine the sum, max, tieBreaker, etc.,
  > according to the implementor's discretion, to compute the overall
  > score for a document.
  >=20
  > -Ken
  >=20
  > On Sat, 13 Nov 2004 12:07:05 +0100, Paul Elschot
  > <paul.elschot@xs4all.nl> wrote:
  > > On Friday 12 November 2004 22:56, Chuck Williams wrote:
  > >
  > >
  > > > I had a similar need and wrote MaxDisjunctionQuery and
  > > > MaxDisjunctionScorer.  Unfortunately these are not available as
a
  > patch
  > > > but I've included the original message below that has the code
  > (modulo
  > > > line breaks added by simple text email format).
  > > >
  > > > This code is functional -- I use it in my app.  It is optimized
for
  > its
  > > > stated use, which involves a small number of clauses.  You'd
want to
  > > > improve the incremental sorting (e.g., using the bucket
technique of
  > > > BooleanQuery) if you need it for large numbers of clauses.
  > >
  > > When you're interested, you can also have a look here for
  > > yet another DisjunctionScorer:
  > > http://issues.apache.org/bugzilla/show_bug.cgi?id=3D31785
  > >
  > > It has the advantage that it implements skipTo() so that it can
  > > be used as a subscorer of ConjunctionScorer, ie. it can be
  > > faster in situations like this:
  > >
  > > aa AND (bb OR cc)
  > >
  > > where bb and cc are treated by the DisjunctionScorer.
  > > When aa is a filter this can also be used to implement
  > > a filtering query.
  > >
  > >
  > >
  > >
  > > > Re. Paul's suggested steps below, I did not integrate this with
  > query
  > > > parser as I didn't need that functionality (since I'm generating
the
  > > > multi-field expansions for which max is a much better scoring
choice
  > > > than sum).
  > > >
  > > > Chuck
  > > >
  > > > Included message:
  > > >
  > > > -----Original Message-----
  > > > From: Chuck Williams [mailto:chuck@manawiz.com]
  > > > Sent: Monday, October 11, 2004 9:55 PM
  > > > To: lucene-dev@jakarta.apache.org
  > > > Subject: Contribution: better multi-field searching
  > > >
  > > > The files included below (MaxDisjunctionQuery.java and
  > > > MaxDisjunctionScorer.java) provide a new mechanism for searching
  > across
  > > > multiple fields.
  > >
  > > The maximum indeed works well, also when the fields differ a lot
  > length.
  > >
  > > Regards,
  > > Paul
  > >
  > >
  > >
  > >
  > >
---------------------------------------------------------------------
  > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > > For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
  > >
  > >
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11474-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 04:43:54 2004
Return-Path: <lucene-user-return-11474-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41319 invoked from network); 24 Nov 2004 04:43:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 04:43:53 -0000
Received: (qmail 44291 invoked by uid 500); 24 Nov 2004 04:43:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 44242 invoked by uid 500); 24 Nov 2004 04:43:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 44213 invoked by uid 99); 24 Nov 2004 04:43:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [207.245.223.231] (HELO trekspace.trekspace.com) (207.245.223.231)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 20:43:34 -0800
Received: from trekspace.trekspace.com (trekspace@trekspace.trekspace.com [192.168.2.234])
	by trekspace.trekspace.com (8.12.3/8.12.3/Debian-7.1) with ESMTP id iAO4hRXi021412
	for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 23:43:27 -0500
Message-ID: <3024729629112586458PMLGNXDDZC.tlai@trekspace.com>
Date: Tue, 23 Nov 2004 23:43:27 -0500 (EST)
From: Terence Lai <tlai@trekspace.com>
Reply-To: Terence Lai <tlai@trekspace.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Help on the Query Parser
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: Treklogic MailTool v1.6 http://www.treklogic.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

I am trying to use the QueryParser.parse() to parse a query string like "java* developer". Note that I want the wildcard string, java*, followed by the word developer. The following is the code.

-------------
String qryStr = "\"java* developer\"";
String fieldname = "text";
StandardAnalyzer analyzer = new StandAnalyzer();

Query qry = org.apache.lucene.queryParser.QueryParser.parse(qryStr, fieldname, analyzer);
-------------

When I do a qryStr.toString() to print out the contents, I got the following output:

---------------------
text:"java developer"
---------------------

Look likes that the wildcard query disappeared. In fact, I am expecting text:"java* developer" to be returned. It seems to me that the QueryParser cannot handle the wildcard within a quoted String.

Does anyone has a solution on this? Am I missing something in the code?

Thanks,
Terence





----------------------------------------------------------
Get your free email account from http://www.trekspace.com
          Your Internet Virtual Desktop!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11475-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 05:28:55 2004
Return-Path: <lucene-user-return-11475-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60498 invoked from network); 24 Nov 2004 05:28:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 05:28:54 -0000
Received: (qmail 91401 invoked by uid 500); 24 Nov 2004 05:28:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91054 invoked by uid 500); 24 Nov 2004 05:28:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91035 invoked by uid 99); 24 Nov 2004 05:28:49 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=LINES_OF_YELLING,SUBJ_ALL_CAPS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 23 Nov 2004 21:28:47 -0800
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I7O59100.CND for <lucene-user@jakarta.apache.org>; Wed,
          24 Nov 2004 11:13:49 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: MERGERINDEX + SOLUTION
Date: Wed, 24 Nov 2004 11:08:19 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKICEBICDAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi Guys

Apologies............



I have a MERGERINDEX [ Merged 1000 subindexes] ,


The Question  is

Does Somebody have any solution  for recorrecting  the  Mergerindex [ in
case of Corruption ]

If so Please Let the Form  know about this,so developers like us would use
the same.


Thx in Advance





      WITH WARM REGARDS
      HAVE A NICE DAY
      [ N.S.KARTHIK]




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11476-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 07:22:16 2004
Return-Path: <lucene-user-return-11476-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 22522 invoked from network); 24 Nov 2004 07:22:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 07:22:16 -0000
Received: (qmail 56512 invoked by uid 500); 24 Nov 2004 07:22:11 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 56489 invoked by uid 500); 24 Nov 2004 07:22:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 56475 invoked by uid 99); 24 Nov 2004 07:22:11 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_20_30,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.200.217.40] (HELO sakthi.softprosys.com) (203.200.217.40)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 23:22:08 -0800
Received: by sakthi.softprosys.com (Postfix, from userid 517)
	id EA2C86701A; Wed, 24 Nov 2004 12:39:25 +0530 (IST)
Received: from santoshkumar (unknown [192.168.1.157])by sakthi.softprosys.com (Postfix) with SMTP id A46F866FD7for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 12:39:25 +0530 (IST)
Message-ID: <001f01c4d1f5$5ec3f5f0$9d01a8c0@sprosys.com>
From: "Santosh" <santosh.s@softprosys.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: fetching similar wordlist as given word
Date: Wed, 24 Nov 2004 12:45:25 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;boundary="----=_NextPart_000_001C_01C4D223.78729500"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_001C_01C4D223.78729500
Content-Type: text/plain;charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

can lucene will be able to do stemming?
If I am searching for "roam" then I know that it can give result for =
"foam" using fuzzy query. But my requirement is if I search for "roam" =
can I get the similar wordlist as output. so that I can show the end =
user in the column  ---------------   do you mean "foam"?
How can I get similar word list in the given content? =20



-----------------------SOFTPRO DISCLAIMER------------------------------

Information contained in this E-MAIL and any attachments are
confidential being  proprietary to SOFTPRO SYSTEMS  is 'privileged'
and 'confidential'.

If you are not an intended or authorised recipient of this E-MAIL or
have received it in error, You are notified that any use, copying or
dissemination  of the information contained in this E-MAIL in any
manner whatsoever is strictly prohibited. Please delete it immediately
and notify the sender by E-MAIL.

In such a case reading, reproducing, printing or further dissemination
of this E-MAIL is strictly prohibited and may be unlawful.

SOFTPRO SYSYTEMS does not REPRESENT or WARRANT that an attachment
hereto is free from computer viruses or other defects. 

The opinions expressed in this E-MAIL and any ATTACHEMENTS may be
those of the author and are not necessarily those of SOFTPRO SYSTEMS.
------------------------------------------------------------------------

------=_NextPart_000_001C_01C4D223.78729500--


From lucene-user-return-11477-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 07:30:03 2004
Return-Path: <lucene-user-return-11477-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25235 invoked from network); 24 Nov 2004 07:30:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 07:30:03 -0000
Received: (qmail 71748 invoked by uid 500); 24 Nov 2004 07:29:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 71728 invoked by uid 500); 24 Nov 2004 07:29:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 71711 invoked by uid 99); 24 Nov 2004 07:29:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [203.200.217.40] (HELO sakthi.softprosys.com) (203.200.217.40)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 23:29:57 -0800
Received: by sakthi.softprosys.com (Postfix, from userid 517)
	id 5E6746701A; Wed, 24 Nov 2004 12:58:20 +0530 (IST)
Received: from santoshkumar (unknown [192.168.1.157])by sakthi.softprosys.com (Postfix) with SMTP id 1BACC66FE1for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 12:58:20 +0530 (IST)
Message-ID: <002701c4d1f8$02faec30$9d01a8c0@sprosys.com>
From: "Santosh" <santosh.s@softprosys.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <001801c4d196$e84f7ec0$9d01a8c0@sprosys.com> <1101239790.24366.40.camel@localhost>
Subject: Re: modifying existing index
Date: Wed, 24 Nov 2004 13:04:20 +0530
MIME-Version: 1.0
Content-Type: text/plain;charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have gon through IndexReader , I got method :     delete(int docNum)   ,
but from where I will get document number? Is  this predifined? or we have
to give a number prior  to indexing?
----- Original Message -----
From: "Luke Francl" <luke.francl@stellent.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, November 24, 2004 1:26 AM
Subject: Re: modifying existing index


> On Tue, 2004-11-23 at 13:59, Santosh wrote:
> > I am using lucene for indexing, when I am creating Index the docuemnts
are added. but when I want to modify the single existing document and
reIndex again, it is taking as new document and adding one more time, so
that I am getting same document twice in the results.
> > To overcome this I am deleting existing Index and again recreating whole
Index. but is it possibe to index  the modified document again and overwrite
existing document without deleting and recreation. can I do this? If so how?
>
> You do not need to recreate the whole index. Just mark the document as
> deleted using the IndexReader and then add it again with the
> IndexWriter. Remember to close your IndexReader and IndexWriter after
> doing this.
>
> The deleted document will be removed the next time you optimize your
> index.
>
> Luke Francl
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11478-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 07:32:05 2004
Return-Path: <lucene-user-return-11478-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 25914 invoked from network); 24 Nov 2004 07:32:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 07:32:05 -0000
Received: (qmail 74091 invoked by uid 500); 24 Nov 2004 07:31:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74070 invoked by uid 500); 24 Nov 2004 07:31:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74054 invoked by uid 99); 24 Nov 2004 07:31:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [213.61.178.43] (HELO mail.tanto.de) (213.61.178.43)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 23:31:56 -0800
Received: from localhost (localhost [127.0.0.1])
	by mail.tanto.de (Postfix) with ESMTP
	id 8E6DF23C45; Wed, 24 Nov 2004 08:31:50 +0100 (CET)
Received: from mail.tanto.de ([127.0.0.1])
 by localhost (mail.tanto.de [127.0.0.1]) (amavisd-new, port 10024) with ESMTP
 id 05235-05; Wed, 24 Nov 2004 08:31:50 +0100 (CET)
Received: from tucholsky.office.tanto.de (unknown [10.0.1.4])
	by mail.tanto.de (Postfix) with ESMTP
	id E813C23C4B; Wed, 24 Nov 2004 08:16:53 +0100 (CET)
Received: from tucholsky.office.tanto.de (morus@tucholsky [127.0.0.1])
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) with ESMTP id iAO7GnmA015066;
	Wed, 24 Nov 2004 08:16:49 +0100
Received: (from morus@localhost)
	by tucholsky.office.tanto.de (8.12.3/8.12.3/Debian-6.6) id iAO7GnUZ015062;
	Wed, 24 Nov 2004 08:16:49 +0100
From: Morus Walter <morus.walter@tanto.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
Message-ID: <16804.13665.202227.494123@tanto-xipolis.de>
Date: Wed, 24 Nov 2004 08:16:49 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	Terence Lai <tlai@trekspace.com>
Subject: Re: Help on the Query Parser
In-Reply-To: <3024729629112586458PMLGNXDDZC.tlai@trekspace.com>
References: <3024729629112586458PMLGNXDDZC.tlai@trekspace.com>
X-Mailer: VM 7.03 under 21.4 (patch 6) "Common Lisp" XEmacs Lucid
X-Virus-Scanned: by amavisd-new at mail.tanto.de Q&A postmaster@tanto.de
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Terence Lai writes:
> 
> Look likes that the wildcard query disappeared. In fact, I am expecting text:"java* developer" to be returned. It seems to me that the QueryParser cannot handle the wildcard within a quoted String.
> 
That's not just QueryParser. 
Lucene itself doesn't handle wildcards within phrases.
You could have a query text:"java* developer" if '*' isn't removed by the 
analyzer. But it would only search for the token 'java*' not any expansion of 
that. I guess this is not, what you want.

Morus

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11479-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 07:37:14 2004
Return-Path: <lucene-user-return-11479-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27902 invoked from network); 24 Nov 2004 07:37:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 07:37:14 -0000
Received: (qmail 79038 invoked by uid 500); 24 Nov 2004 07:37:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 78804 invoked by uid 500); 24 Nov 2004 07:37:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 78790 invoked by uid 99); 24 Nov 2004 07:37:08 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 23:37:06 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: modifying existing index
Date: Tue, 23 Nov 2004 23:36:58 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C02A45037@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: modifying existing index
Thread-Index: AcTR92lqsr91cy3KQQKXsYfTx1k7fQAADbsw
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

A good way to do this is to add a keyword field with whatever unique id
you have for the document.  Then you can delete the term containing a
unique id to delete the document from the index (look at
IndexReader.delete(Term)).  You can look at the demo class IndexHTML to
see how it does incremental indexing for an example.

Chuck

  > -----Original Message-----
  > From: Santosh [mailto:santosh.s@softprosys.com]
  > Sent: Tuesday, November 23, 2004 11:34 PM
  > To: Lucene Users List
  > Subject: Re: modifying existing index
  >=20
  > I have gon through IndexReader , I got method :     delete(int
  > docNum)   ,
  > but from where I will get document number? Is  this predifined? or
we
  > have
  > to give a number prior  to indexing?
  > ----- Original Message -----
  > From: "Luke Francl" <luke.francl@stellent.com>
  > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
  > Sent: Wednesday, November 24, 2004 1:26 AM
  > Subject: Re: modifying existing index
  >=20
  >=20
  > > On Tue, 2004-11-23 at 13:59, Santosh wrote:
  > > > I am using lucene for indexing, when I am creating Index the
  > docuemnts
  > are added. but when I want to modify the single existing document
and
  > reIndex again, it is taking as new document and adding one more
time, so
  > that I am getting same document twice in the results.
  > > > To overcome this I am deleting existing Index and again
recreating
  > whole
  > Index. but is it possibe to index  the modified document again and
  > overwrite
  > existing document without deleting and recreation. can I do this? If
so
  > how?
  > >
  > > You do not need to recreate the whole index. Just mark the
document as
  > > deleted using the IndexReader and then add it again with the
  > > IndexWriter. Remember to close your IndexReader and IndexWriter
after
  > > doing this.
  > >
  > > The deleted document will be removed the next time you optimize
your
  > > index.
  > >
  > > Luke Francl
  > >
  > >
  > >
---------------------------------------------------------------------
  > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > > For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
  > >
  >=20
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11480-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 07:40:56 2004
Return-Path: <lucene-user-return-11480-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29472 invoked from network); 24 Nov 2004 07:40:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 07:40:56 -0000
Received: (qmail 83149 invoked by uid 500); 24 Nov 2004 07:40:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 83131 invoked by uid 500); 24 Nov 2004 07:40:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 83111 invoked by uid 99); 24 Nov 2004 07:40:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of appler@gmail.com designates 64.233.170.206 as permitted sender)
Received: from [64.233.170.206] (HELO rproxy.gmail.com) (64.233.170.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 23:40:47 -0800
Received: by rproxy.gmail.com with SMTP id 34so24334rns
        for <lucene-user@jakarta.apache.org>; Tue, 23 Nov 2004 23:40:38 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=BH6NAW8+YWrEYc1EqyxDpHTmOPBWfaH/WzrMLGvl7TtKEkB3NijdoWjGpkUbVmjJIKsfPZ3D/E7Nw0gSfaL2F9i0gUpAetforAfTyk1fwLrsz5fO4o80NhVIzlxgw10W25V2fEnERj4jYz8ZWfUMlMVnGdhvshhbn7eWuicSzao=
Received: by 10.38.179.40 with SMTP id b40mr157655rnf;
        Tue, 23 Nov 2004 23:40:38 -0800 (PST)
Received: by 10.38.206.64 with HTTP; Tue, 23 Nov 2004 23:40:38 -0800 (PST)
Message-ID: <48b708490411232340135eeb43@mail.gmail.com>
Date: Wed, 24 Nov 2004 16:40:38 +0900
From: Cheolgoo Kang <appler@gmail.com>
Reply-To: Cheolgoo Kang <appler@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: modifying existing index
In-Reply-To: <002701c4d1f8$02faec30$9d01a8c0@sprosys.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <001801c4d196$e84f7ec0$9d01a8c0@sprosys.com>
	 <1101239790.24366.40.camel@localhost>
	 <002701c4d1f8$02faec30$9d01a8c0@sprosys.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wed, 24 Nov 2004 13:04:20 +0530, Santosh <santosh.s@softprosys.com> wrote:
> I have gon through IndexReader , I got method :     delete(int docNum)   ,
> but from where I will get document number? Is  this predifined? or we have
> to give a number prior  to indexing?

The number(aka doc-id) is given by lucene and is it's an internal sequential
integer. This number is usually retrieved from Hits.id(int) of your search.

Hits myHits = myIndexSearcher.search( myQuery );
for ( int i=0; i<myHits.length(); i++ ) {
  Document doc = myHits.doc( myHits.id( i ) );
  // myHits.id( i ) retrieves the i-th doc-id and
  // myHits.doc( myHits.id( i ) ) returns the desired i-th document
  // in the result myHits.
}

HTH

> 
> 
> ----- Original Message -----
> From: "Luke Francl" <luke.francl@stellent.com>
> To: "Lucene Users List" <lucene-user@jakarta.apache.org>
> Sent: Wednesday, November 24, 2004 1:26 AM
> Subject: Re: modifying existing index
> 
> > On Tue, 2004-11-23 at 13:59, Santosh wrote:
> > > I am using lucene for indexing, when I am creating Index the docuemnts
> are added. but when I want to modify the single existing document and
> reIndex again, it is taking as new document and adding one more time, so
> that I am getting same document twice in the results.
> > > To overcome this I am deleting existing Index and again recreating whole
> Index. but is it possibe to index  the modified document again and overwrite
> existing document without deleting and recreation. can I do this? If so how?
> >
> > You do not need to recreate the whole index. Just mark the document as
> > deleted using the IndexReader and then add it again with the
> > IndexWriter. Remember to close your IndexReader and IndexWriter after
> > doing this.
> >
> > The deleted document will be removed the next time you optimize your
> > index.
> >
> > Luke Francl
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


-- 
Cheolgoo, Kang

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11481-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 07:48:18 2004
Return-Path: <lucene-user-return-11481-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32997 invoked from network); 24 Nov 2004 07:48:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 07:48:18 -0000
Received: (qmail 93480 invoked by uid 500); 24 Nov 2004 07:48:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93410 invoked by uid 500); 24 Nov 2004 07:48:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93349 invoked by uid 99); 24 Nov 2004 07:48:06 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [64.78.19.14] (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 23 Nov 2004 23:48:04 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: fetching similar wordlist as given word
Date: Tue, 23 Nov 2004 23:47:48 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C02A45038@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: fetching similar wordlist as given word
Thread-Index: AcTR9lMAFeHEZazhSXSWBMeEFgeDJgAAihkQ
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Lucene does support stemming, but that is not what your example requires
(stemming equates "roaming", "roam", "roamed", etc.).  For stemming,
look at PorterStemFilter or better, the Snowball stemmers in the
sandbox.  For your similar word list, I think you are looking for the
class FuzzyTermEnum.  This should give you the terms you need, although
perhaps only those with a common prefix of a specified length.
Otherwise, you could develop your own algorithm to look for similar
terms in the index.

Chuck

  > -----Original Message-----
  > From: Santosh [mailto:santosh.s@softprosys.com]
  > Sent: Tuesday, November 23, 2004 11:15 PM
  > To: Lucene Users List
  > Subject: fetching similar wordlist as given word
  >=20
  > can lucene will be able to do stemming?
  > If I am searching for "roam" then I know that it can give result for
  > "foam" using fuzzy query. But my requirement is if I search for
"roam"
  > can I get the similar wordlist as output. so that I can show the end
  > user in the column  ---------------   do you mean "foam"?
  > How can I get similar word list in the given content?
  >=20
  >=20
  >=20
  > -----------------------SOFTPRO
DISCLAIMER------------------------------
  >=20
  >=20
  >=20
  > Information contained in this E-MAIL and any attachments are
  >=20
  > confidential being  proprietary to SOFTPRO SYSTEMS  is 'privileged'
  >=20
  > and 'confidential'.
  >=20
  >=20
  >=20
  > If you are not an intended or authorised recipient of this E-MAIL or
  >=20
  > have received it in error, You are notified that any use, copying or
  >=20
  > dissemination  of the information contained in this E-MAIL in any
  >=20
  > manner whatsoever is strictly prohibited. Please delete it
immediately
  >=20
  > and notify the sender by E-MAIL.
  >=20
  >=20
  >=20
  > In such a case reading, reproducing, printing or further
dissemination
  >=20
  > of this E-MAIL is strictly prohibited and may be unlawful.
  >=20
  >=20
  >=20
  > SOFTPRO SYSYTEMS does not REPRESENT or WARRANT that an attachment
  >=20
  > hereto is free from computer viruses or other defects.
  >=20
  >=20
  >=20
  > The opinions expressed in this E-MAIL and any ATTACHEMENTS may be
  >=20
  > those of the author and are not necessarily those of SOFTPRO
SYSTEMS.
  >=20
  >
------------------------------------------------------------------------


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11482-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 08:05:58 2004
Return-Path: <lucene-user-return-11482-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40702 invoked from network); 24 Nov 2004 08:05:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 08:05:58 -0000
Received: (qmail 13586 invoked by uid 500); 24 Nov 2004 08:05:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 13557 invoked by uid 500); 24 Nov 2004 08:05:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13543 invoked by uid 99); 24 Nov 2004 08:05:51 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 00:05:48 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.12.11/8.12.11) with ESMTP id iAO85dUV029352
	for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 09:05:39 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: URGENT: Help indexing large document set
Date: Wed, 24 Nov 2004 09:05:39 +0100
User-Agent: KMail/1.5.4
References: <8837fb7704112315374f5d84e6@mail.gmail.com>
In-Reply-To: <8837fb7704112315374f5d84e6@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411240905.39366.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 24 November 2004 00:37, John Wang wrote:
> Hi:
> 
>    I am trying to index 1M documents, with batches of 500 documents.
> 
>    Each document has an unique text key, which is added as a
> Field.KeyWord(name,value).
> 
>    For each batch of 500, I need to make sure I am not adding a
> document with a key that is already in the current index.
> 
>   To do this, I am calling IndexSearcher.docFreq for each document and
> delete the document currently in the index with the same key:
>  
>        while (keyIter.hasNext()) {
>             String objectID = (String) keyIter.next();
>             term = new Term("key", objectID);
>             int count = localSearcher.docFreq(term);

To speed this up a bit make sure that the iterator gives
the terms in sorted order. I'd use an index reader instead
of a searcher, but that will probably not make a difference.

Adding the documents can be done with multiple threads.
Last time I checked that, there was a moderate speed up
using three threads instead of one on a single CPU machine.
Tuning the values of minMergeDocs and maxMergeDocs
may also help to increase performance of adding documents.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11483-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 08:34:20 2004
Return-Path: <lucene-user-return-11483-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85470 invoked from network); 24 Nov 2004 08:34:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 08:34:20 -0000
Received: (qmail 49128 invoked by uid 500); 24 Nov 2004 08:34:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48999 invoked by uid 500); 24 Nov 2004 08:34:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 48985 invoked by uid 99); 24 Nov 2004 08:34:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.27] (HELO smtp-vbr7.xs4all.nl) (194.109.24.27)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 00:34:12 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr7.xs4all.nl (8.12.11/8.12.11) with ESMTP id iAO8Y21S007057
	for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 09:34:02 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: lucene Scorers
Date: Wed, 24 Nov 2004 09:34:02 +0100
User-Agent: KMail/1.5.4
References: <E3381E0825F1954D953A4E347017BB1C028B9E66@reh001-1.REX001.ExchangeByRegister.com> <200411131207.05478.paul.elschot@xs4all.nl> <2b2518a404112316313c264077@mail.gmail.com>
In-Reply-To: <2b2518a404112316313c264077@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411240934.02331.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 24 November 2004 01:31, Ken McCracken wrote:
> Hi,
> 
> Thanks the pointers in your replies.  Would it be possible to include
> some sort of accrual scorer interface somewhere in the Lucene Query
> APIs?  This could be passed into a query similar to
> MaxDisjunctionQuery; and combine the sum, max, tieBreaker, etc.,
> according to the implementor's discretion, to compute the overall
> score for a document.

The DisjunctionScorer is currently not part of Lucene.
You might try and subclass Similarity to provide what you need and
pass that to your Query.

I'm using a few subclasses of DisjunctionScorer to provide the actual
score value ao. for max and sum.
For each of these scorers,  I use a separate Query and Weight.
This gives a parallel class hierarchy for Query, Weight and Scorer.

I guess it's time to have a look at Design Patterns and/or Refactoring
on how to get rid of the parallel class hierarchy. That could also
involve some sort of accrual scorer and Lucene's Similarity.

Regards,
Paul Elschot

> -Ken
> 
> On Sat, 13 Nov 2004 12:07:05 +0100, Paul Elschot <paul.elschot@xs4all.nl> 
wrote:
> > On Friday 12 November 2004 22:56, Chuck Williams wrote:
> > 
> > 
> > > I had a similar need and wrote MaxDisjunctionQuery and
> > > MaxDisjunctionScorer.  Unfortunately these are not available as a patch
> > > but I've included the original message below that has the code (modulo
> > > line breaks added by simple text email format).
> > >
> > > This code is functional -- I use it in my app.  It is optimized for its
> > > stated use, which involves a small number of clauses.  You'd want to
> > > improve the incremental sorting (e.g., using the bucket technique of
> > > BooleanQuery) if you need it for large numbers of clauses.
> > 
> > When you're interested, you can also have a look here for
> > yet another DisjunctionScorer:
> > http://issues.apache.org/bugzilla/show_bug.cgi?id=31785
> > 
> > It has the advantage that it implements skipTo() so that it can
> > be used as a subscorer of ConjunctionScorer, ie. it can be
> > faster in situations like this:
> > 
> > aa AND (bb OR cc)
> > 
> > where bb and cc are treated by the DisjunctionScorer.
> > When aa is a filter this can also be used to implement
> > a filtering query.
> > 
> > 
> > 
> > 
> > > Re. Paul's suggested steps below, I did not integrate this with query
> > > parser as I didn't need that functionality (since I'm generating the
> > > multi-field expansions for which max is a much better scoring choice
> > > than sum).
> > >
> > > Chuck
> > >
> > > Included message:
> > >
> > > -----Original Message-----
> > > From: Chuck Williams [mailto:chuck@manawiz.com]
> > > Sent: Monday, October 11, 2004 9:55 PM
> > > To: lucene-dev@jakarta.apache.org
> > > Subject: Contribution: better multi-field searching
> > >
> > > The files included below (MaxDisjunctionQuery.java and
> > > MaxDisjunctionScorer.java) provide a new mechanism for searching across
> > > multiple fields.
> > 
> > The maximum indeed works well, also when the fields differ a lot length.
> > 
> > Regards,
> > Paul
> > 
> > 
> > 
> > 
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> > 
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11484-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 08:54:24 2004
Return-Path: <lucene-user-return-11484-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 96663 invoked from network); 24 Nov 2004 08:54:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 08:54:24 -0000
Received: (qmail 69284 invoked by uid 500); 24 Nov 2004 08:54:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69100 invoked by uid 500); 24 Nov 2004 08:54:13 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68927 invoked by uid 99); 24 Nov 2004 08:54:12 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 00:54:09 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 700765B7C7; Wed, 24 Nov 2004 00:53:52 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 6EEC57F45E
	for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 00:53:52 -0800 (PST)
Date: Wed, 24 Nov 2004 00:53:52 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: fetching similar wordlist as given word
In-Reply-To: <E3381E0825F1954D953A4E347017BB1C02A45038@reh001-1.REX001.ExchangeByRegister.com>
Message-ID: <Pine.LNX.4.58.0411240029270.23126@hal.rescomp.berkeley.edu>
References: <E3381E0825F1954D953A4E347017BB1C02A45038@reh001-1.REX001.ExchangeByRegister.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


:   > can I get the similar wordlist as output. so that I can show the end
:   > user in the column  ---------------   do you mean "foam"?
:   > How can I get similar word list in the given content?

This is a non trivial problem, because the definition of "similar" is
subject to interpretation.  I would look into various dictionary
implimentations, and see if you can find a good Java based dictionary that
can suggest alternatives based on an input string.

Once you have that, then you should be able to use IndexSearcher.docFreq
to find out how many docs contains each alternate word, and compare that
with the number of docs that contain the initial word ... if one of the
alternates has a significantly higher number of matches, then you suggest
it.


NOTE: The DICT protocol defines a client/server approach to providing
spell correction and definitions.  Maybe you can leverage some of the
spell correction code mentioned in the "Server Software Written in Java"
section of this doc...
	http://www.dict.org/links.html
In particular, you might want to take a look at JavaDict's Database.match
function using the LevenshteinStrategy...
http://ktulu.com.ar/javadict/docs/ar/com/ktulu/dict/Database.html#match(java.lang.String,%20ar.com.ktulu.dict.strategies.Strategy)



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11485-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 09:10:55 2004
Return-Path: <lucene-user-return-11485-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8814 invoked from network); 24 Nov 2004 09:10:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 09:10:55 -0000
Received: (qmail 97228 invoked by uid 500); 24 Nov 2004 09:10:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 97202 invoked by uid 500); 24 Nov 2004 09:10:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 97188 invoked by uid 99); 24 Nov 2004 09:10:50 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from [212.227.126.173] (HELO moutng.kundenserver.de) (212.227.126.173)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 01:10:45 -0800
Received: from [212.227.126.207] (helo=mrelayng.kundenserver.de)
	by moutng.kundenserver.de with esmtp (Exim 3.35 #1)
	id 1CWtAY-0003yD-00
	for lucene-user@jakarta.apache.org; Wed, 24 Nov 2004 10:10:34 +0100
Received: from [82.135.0.197] (helo=[192.168.10.101])
	by mrelayng.kundenserver.de with asmtp (TLSv1:RC4-MD5:128)
	(Exim 3.35 #1)
	id 1CWtAY-0000nu-00
	for lucene-user@jakarta.apache.org; Wed, 24 Nov 2004 10:10:34 +0100
From: Daniel Naber <daniel.naber@t-online.de>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Help on the Query Parser
Date: Wed, 24 Nov 2004 10:10:33 +0100
User-Agent: KMail/1.7.1
References: <3024729629112586458PMLGNXDDZC.tlai@trekspace.com> <16804.13665.202227.494123@tanto-xipolis.de>
In-Reply-To: <16804.13665.202227.494123@tanto-xipolis.de>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411241010.33415.daniel.naber@t-online.de>
X-Provags-ID: kundenserver.de abuse@kundenserver.de auth:94b5a5949d2eb00693e70b0c89be5163
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Wednesday 24 November 2004 08:16, Morus Walter wrote:

> Lucene itself doesn't handle wildcards within phrases.

This can be added using PhrasePrefixQuery (which is slightly misnamed):
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/PhrasePrefixQuery.html

Regards
 Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11486-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 09:28:20 2004
Return-Path: <lucene-user-return-11486-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26582 invoked from network); 24 Nov 2004 09:28:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 09:28:20 -0000
Received: (qmail 33364 invoked by uid 500); 24 Nov 2004 09:28:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33336 invoked by uid 500); 24 Nov 2004 09:28:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33321 invoked by uid 99); 24 Nov 2004 09:28:14 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_30_40,HTML_MESSAGE,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [195.245.231.99] (HELO mail84.messagelabs.com) (195.245.231.99)
  by apache.org (qpsmtpd/0.28) with SMTP; Wed, 24 Nov 2004 01:28:06 -0800
X-VirusChecked: Checked
X-Env-Sender: iouli.golovatyi@group.novartis.com
X-Msg-Ref: server-12.tower-84.messagelabs.com!1101288457!1956422
X-StarScan-Version: 5.2.11; banners=-,-,-
X-Originating-IP: [160.62.1.169]
Received: (qmail 25622 invoked from network); 24 Nov 2004 09:27:38 -0000
Received: from fw-mail12.novartis.com (160.62.1.169)
  by server-12.tower-84.messagelabs.com with DES-CBC3-SHA encrypted SMTP; 24 Nov 2004 09:27:38 -0000
Received: from mtap2.is.chbs ([192.37.33.19])
	by fw-mail12.novartis.com (Switch-3.1.6/Switch-3.1.6) with ESMTP id iAO9RbQ722282276
	for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 10:27:37 +0100
Received: from phchbs-s3025.EU.novartis.net (phchbs-s3025.eu.novartis.net [192.37.31.249])
	by mtap2.is.chbs (Switch-3.1.6/Switch-3.1.6) with ESMTP id iAO9RbAu8388792
	for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 10:27:37 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Re: Index in RAM - is it realy worthy?
MIME-Version: 1.0
Message-ID: <OF283A260D.55393BA5-ONC1256F56.00322D06-C1256F56.0033F6CB@EU.novartis.net>
From: iouli.golovatyi@group.novartis.com
Date: Wed, 24 Nov 2004 10:27:35 +0100
Content-Type: multipart/alternative; boundary="=_alternative 0033F6A2C1256F56_="
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--=_alternative 0033F6A2C1256F56_=
Content-Type: text/plain; charset="us-ascii"

Thanks everybody for responds.

What else can essentially improve queries performance?
(I do not speak now about such things as keeping index optimized etc. - 
it's clear)

As I experiensed on my 2 cpu box,  during the query execution both 
processors were realy busy. The question is would it accelerate speed if I 
get 4 cpu box, 10 cpu...
I mean real performance boost (at least factor 10), not just %-ge.

Whould it help if I play with different query formulation, i.e.  "a and (b 
or c)" instead of  "(b or c) and a"

Regards,
j.







"Kevin A. Burton" <burton@newsmonster.org>
22.11.2004 21:40
Please respond to "Lucene Users List"

 
        To:     Lucene Users List <lucene-user@jakarta.apache.org>
        cc:     (bcc: Iouli Golovatyi/X/GP/Novartis)
        Subject:        Re: Index in RAM - is it realy worthy?
        Category: 



Otis Gospodnetic wrote:

>For the Lucene book I wrote some test cases that compare FSDirectory
>and RAMDirectory.  What I found was that with certain settings
>FSDirectory was almost as fast as RAMDirectory.  Personally, I would
>push FSDirectory and hope that the OS and the Filesystem do their share
>of work and caching for me before looking for ways to optimize my code.
> 
>
Also another note is that doing an index merge in memory is probably 
faster if you just use a RAMDirectory and perform addIndexes to it.

This would almost certainly be faster than optimizing on disk but I 
haven't benchmarked it.

Kevin

-- 

Use Rojo (RSS/Atom aggregator).  Visit http://rojo.com. Ask me for an 
invite!  Also see irc.freenode.net #rojo if you want to chat.

Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html

If you're interested in RSS, Weblogs, Social Networking, etc... then you 
should work for Rojo!  If you recommend someone and we hire them you'll 
get a free iPod!
 
Kevin A. Burton, Location - San Francisco, CA
       AIM/YIM - sfburtonator,  Web - http://peerfear.org/
GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




--=_alternative 0033F6A2C1256F56_=--

From lucene-user-return-11487-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 13:18:13 2004
Return-Path: <lucene-user-return-11487-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58329 invoked from network); 24 Nov 2004 13:18:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 13:18:12 -0000
Received: (qmail 69384 invoked by uid 500); 24 Nov 2004 13:18:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69153 invoked by uid 500); 24 Nov 2004 13:18:06 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69135 invoked by uid 99); 24 Nov 2004 13:18:05 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from fw1-inet.semantico.com (HELO semantico.com) (212.74.15.68)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 05:18:03 -0800
Received: from spampd.localdomain (localhost [127.0.0.1])
	by localhost.semantico.com (Postfix) with ESMTP id 69AD13202AC
	for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 13:17:33 +0000 (GMT)
Received: from [192.168.1.210] (Annatto.dyn.rp.lan [192.168.1.210])
	by semantico.com (Postfix) with ESMTP id EBD743202AC
	for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 13:17:32 +0000 (GMT)
Message-ID: <41A489EB.8080809@semantico.com>
Date: Wed, 24 Nov 2004 13:17:31 +0000
From: Peter Pimley <ppimley@semantico.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Index in RAM - is it realy worthy?
References: <OF283A260D.55393BA5-ONC1256F56.00322D06-C1256F56.0033F6CB@EU.novartis.net>
In-Reply-To: <OF283A260D.55393BA5-ONC1256F56.00322D06-C1256F56.0033F6CB@EU.novartis.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 2.63 (2004-01-11) on paprika.rp.lan
X-Spam-Status: No, hits=-100.0 required=5.0 tests=USER_IN_WHITELIST 
	autolearn=no version=2.63
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

iouli.golovatyi@group.novartis.com wrote:

>As I experiensed on my 2 cpu box,  during the query execution both 
>processors were realy busy. The question is would it accelerate speed if I 
>get 4 cpu box, 10 cpu...
>I mean real performance boost (at least factor 10), not just %-ge.
>  
>

I'm no expert on this, but I would guess that adding more processors 
would not increase the speed of *individual* queries, but it would 
greatly improve total throughput.  If you kept adding processors you'd 
probably get to the state where something other than CPU was your 
limiting factor (e.g. memory/disk bandwidth).

... but that's just a guess. ;)

Peter


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11488-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 14:55:59 2004
Return-Path: <lucene-user-return-11488-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72448 invoked from network); 24 Nov 2004 14:55:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 14:55:59 -0000
Received: (qmail 41833 invoked by uid 500); 24 Nov 2004 14:53:07 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 41804 invoked by uid 500); 24 Nov 2004 14:53:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 41720 invoked by uid 99); 24 Nov 2004 14:53:04 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from www.trekspace.com (HELO trekspace.trekspace.com) (207.245.223.231)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 06:53:02 -0800
Received: from trekspace.trekspace.com (trekspace@trekspace.trekspace.com [192.168.2.234])
	by trekspace.trekspace.com (8.12.3/8.12.3/Debian-7.1) with ESMTP id iAOEqgXi004763
	for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 09:52:42 -0500
Message-ID: <8999313407932278210URBXPVEIGM.tlai@trekspace.com>
Date: Wed, 24 Nov 2004 09:52:42 -0500 (EST)
From: Terence Lai <tlai@trekspace.com>
Reply-To: Terence Lai <tlai@trekspace.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: Re: Help on the Query Parser
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Mailer: Treklogic MailTool v1.6 http://www.treklogic.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Daniel,

I couldn't figure out how to use the PharsePrefixQuery with a phase like "java* developer". It only provides method to add terms. Can a term contain wildcard character in lucene?

Thanks,
Terence

> On Wednesday 24 November 2004 08:16, Morus Walter wrote:
> 
> > Lucene itself doesn't handle wildcards within phrases.
> 
> This can be added using PhrasePrefixQuery (which is slightly misnamed):
> http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/PhrasePrefixQuery.html
> 
> Regards
>  Daniel
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 




----------------------------------------------------------
Get your free email account from http://www.trekspace.com
          Your Internet Virtual Desktop!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11489-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 15:44:50 2004
Return-Path: <lucene-user-return-11489-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24939 invoked from network); 24 Nov 2004 15:44:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 15:44:50 -0000
Received: (qmail 85062 invoked by uid 500); 24 Nov 2004 15:27:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85014 invoked by uid 500); 24 Nov 2004 15:27:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84974 invoked by uid 99); 24 Nov 2004 15:27:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from www.trekspace.com (HELO trekspace.trekspace.com) (207.245.223.231)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 07:27:37 -0800
Received: from trekspace.trekspace.com (trekspace@trekspace.trekspace.com [192.168.2.234])
	by trekspace.trekspace.com (8.12.3/8.12.3/Debian-7.1) with ESMTP id iAOEseXi004899
	for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 09:54:40 -0500
Message-ID: <3172454101458243651NMVWXGKGFV.tlai@trekspace.com>
Date: Wed, 24 Nov 2004 09:54:40 -0500 (EST)
From: Terence Lai <tlai@trekspace.com>
Reply-To: Terence Lai <tlai@trekspace.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: Re: Help on the Query Parser
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Mailer: Treklogic MailTool v1.6 http://www.treklogic.com
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Morus,

I want to search for the string like below:

- java developer
- javascript developer

By searching "java*", it will return more than I want. That's why I am thinking "java* developer".

Terence

> Terence Lai writes:
> > 
> > Look likes that the wildcard query disappeared. In fact, I am expecting text:"java* 
> developer" to be returned. It seems to me that the QueryParser cannot handle the 
> wildcard within a quoted String.
> > 
> That's not just QueryParser. 
> Lucene itself doesn't handle wildcards within phrases.
> You could have a query text:"java* developer" if '*' isn't removed by the 
> analyzer. But it would only search for the token 'java*' not any expansion of 
> that. I guess this is not, what you want.
> 
> Morus
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 




----------------------------------------------------------
Get your free email account from http://www.trekspace.com
          Your Internet Virtual Desktop!

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11490-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 15:48:23 2004
Return-Path: <lucene-user-return-11490-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 28946 invoked from network); 24 Nov 2004 15:48:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 15:48:23 -0000
Received: (qmail 96958 invoked by uid 500); 24 Nov 2004 15:31:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 96910 invoked by uid 500); 24 Nov 2004 15:31:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 96849 invoked by uid 99); 24 Nov 2004 15:31:00 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from fork10.mail.Virginia.EDU (HELO fork10.mail.virginia.edu) (128.143.2.180)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 07:30:58 -0800
Received: from localhost (localhost [127.0.0.1])
	by fork10.mail.virginia.edu (Postfix) with ESMTP id E95C01F5CE6
	for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 10:30:35 -0500 (EST)
Received: from fork10.mail.virginia.edu ([127.0.0.1])
 by localhost (fork10.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 17564-09 for <lucene-user@jakarta.apache.org>;
 Wed, 24 Nov 2004 10:30:35 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by fork10.mail.virginia.edu (Postfix) with ESMTP id B4FA81F5AB9
	for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 10:30:35 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <8999313407932278210URBXPVEIGM.tlai@trekspace.com>
References: <8999313407932278210URBXPVEIGM.tlai@trekspace.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C929502B-3E2D-11D9-A4B6-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Help on the Query Parser
Date: Wed, 24 Nov 2004 10:30:35 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-UVA-Virus-Scanned: by amavisd-new at fork10.mail.virginia.edu
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 24, 2004, at 9:52 AM, Terence Lai wrote:
> I couldn't figure out how to use the PharsePrefixQuery with a phase  
> like "java* developer". It only provides method to add terms. Can a  
> term contain wildcard character in lucene?

PhrasePrefixQuery requires that you write the code to lookup all the  
matching terms (for java* in your example).  It will require a bit of  
custom coding to be able to parse a query like "java* developer" into a  
PhrasePrefixQuery.  It is not something Lucene currently supports  
easily.

	Erik

>
> Thanks,
> Terence
>
>> On Wednesday 24 November 2004 08:16, Morus Walter wrote:
>>
>>> Lucene itself doesn't handle wildcards within phrases.
>>
>> This can be added using PhrasePrefixQuery (which is slightly  
>> misnamed):
>> http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/ 
>> PhrasePrefixQuery.html
>>
>> Regards
>>  Daniel
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>
>
>
>
> ----------------------------------------------------------
> Get your free email account from http://www.trekspace.com
>           Your Internet Virtual Desktop!
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11491-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 17:57:56 2004
Return-Path: <lucene-user-return-11491-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68569 invoked from network); 24 Nov 2004 17:57:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 17:57:56 -0000
Received: (qmail 23710 invoked by uid 500); 24 Nov 2004 17:56:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23612 invoked by uid 500); 24 Nov 2004 17:56:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23573 invoked by uid 99); 24 Nov 2004 17:56:55 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.softprosys.com (HELO sakthi.softprosys.com) (203.200.217.40)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 09:56:49 -0800
Received: by sakthi.softprosys.com (Postfix, from userid 517)
	id 9C4F467023; Wed, 24 Nov 2004 23:18:18 +0530 (IST)
Received: from santoshkumar (unknown [192.168.1.157])by sakthi.softprosys.com (Postfix) with SMTP id 5200E67020for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 23:18:18 +0530 (IST)
Message-ID: <007001c4d24e$9eec12d0$9d01a8c0@sprosys.com>
From: "Santosh" <santosh.s@softprosys.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <E3381E0825F1954D953A4E347017BB1C02A45037@reh001-1.REX001.ExchangeByRegister.com>
Subject: Re: modifying existing index
Date: Wed, 24 Nov 2004 23:24:18 +0530
MIME-Version: 1.0
Content-Type: text/plain;charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I am able to delete now the Index using the following

if(indexDir.exists())

{


IndexReader reader = IndexReader.open( indexDir );

uidIter = reader.terms(new Term("id", ""));

while (uidIter.term() != null && uidIter.term().field() == "id") {


reader.delete(uidIter.term());

uidIter.next();

}

reader.close();

}

where "id"  is the keyword field. But here also all the documents are
deleted. How can I modify my code and delete particular document with given
id





Iam creating the index in the following way

Document doc = new Document();

doc.add(Field.Text("text",text));

doc.add(Field.Keyword("id",Long.toString(id)));

doc.add(Field.Keyword("title",title));

doc.add(Field.Keyword("keywords",keywords));

doc.add(Field.Keyword("type",type));

writer.addDocument(doc);









----- Original Message -----
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Wednesday, November 24, 2004 1:06 PM
Subject: RE: modifying existing index


A good way to do this is to add a keyword field with whatever unique id
you have for the document.  Then you can delete the term containing a
unique id to delete the document from the index (look at
IndexReader.delete(Term)).  You can look at the demo class IndexHTML to
see how it does incremental indexing for an example.

Chuck

  > -----Original Message-----> From: Santosh
[mailto:santosh.s@softprosys.com]> Sent: Tuesday, November 23, 2004 11:34
PM> To: Lucene Users List> Subject: Re: modifying existing index> > I have
gon through IndexReader , I got method :     delete(int> docNum)   ,> but
from where I will get document number? Is  this predifined? or
we> have> to give a number prior  to indexing?> ----- Original
Message -----> From: "Luke Francl" <luke.francl@stellent.com>> To: "Lucene
Users List" <lucene-user@jakarta.apache.org>> Sent: Wednesday, November 24,
2004 1:26 AM> Subject: Re: modifying existing index> > > > On Tue,
2004-11-23 at 13:59, Santosh wrote:> > > I am using lucene for indexing,
when I am creating Index the> docuemnts> are added. but when I want to
modify the single existing document
and> reIndex again, it is taking as new document and adding one more
time, so> that I am getting same document twice in the results.> > > To
overcome this I am deleting existing Index and again
recreating> whole> Index. but is it possibe to index  the modified document
again and> overwrite> existing document without deleting and recreation. can
I do this? If
so> how?> >> > You do not need to recreate the whole index. Just mark the
document as> > deleted using the IndexReader and then add it again with the>
> IndexWriter. Remember to close your IndexReader and IndexWriter
after> > doing this.> >> > The deleted document will be removed the next
time you optimize
your> > index.> >> > Luke Francl> >> >> >
---------------------------------------------------------------------> > To
unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org> > For
additional commands, e-mail:
lucene-user-help@jakarta.apache.org> >> > >
---------------------------------------------------------------------> To
unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org> For
additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11492-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 18:16:05 2004
Return-Path: <lucene-user-return-11492-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77872 invoked from network); 24 Nov 2004 18:16:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 18:16:05 -0000
Received: (qmail 88418 invoked by uid 500); 24 Nov 2004 18:15:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 88362 invoked by uid 500); 24 Nov 2004 18:15:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 88321 invoked by uid 99); 24 Nov 2004 18:15:44 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from reh001-1.rex001.exchangebyregister.com (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 10:15:40 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: modifying existing index
Date: Wed, 24 Nov 2004 10:15:21 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C02A45132@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: modifying existing index
Thread-Index: AcTSTx9PmR9lRZE8R92jd4TAK2xfvgAAL24g
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I haven't tried it but believe this should work:

    IndexReader reader;
    void delete(long id) {
        reader.delete(new Term("id", Long.toString(id)));
    }

This also has the benefit that it does binary search rather than
sequential search.

You will want to pad you id's with leading zeroes if you are going to do
incremental indexing (both when storing them and when looking them up).
Sorting is by lexicographic order, not numerical order, and incremental
indexing is much faster if the id's are kept sorted (as is done in
IndexHTML).

Chuck


  > -----Original Message-----
  > From: Santosh [mailto:santosh.s@softprosys.com]
  > Sent: Wednesday, November 24, 2004 9:54 AM
  > To: Lucene Users List
  > Subject: Re: modifying existing index
  >=20
  > I am able to delete now the Index using the following
  >=20
  > if(indexDir.exists())
  >=20
  > {
  >=20
  >=20
  > IndexReader reader =3D IndexReader.open( indexDir );
  >=20
  > uidIter =3D reader.terms(new Term("id", ""));
  >=20
  > while (uidIter.term() !=3D null && uidIter.term().field() =3D=3D =
"id") {
  >=20
  >=20
  > reader.delete(uidIter.term());
  >=20
  > uidIter.next();
  >=20
  > }
  >=20
  > reader.close();
  >=20
  > }
  >=20
  > where "id"  is the keyword field. But here also all the documents
are
  > deleted. How can I modify my code and delete particular document
with
  > given
  > id
  >=20
  >=20
  >=20
  >=20
  >=20
  > Iam creating the index in the following way
  >=20
  > Document doc =3D new Document();
  >=20
  > doc.add(Field.Text("text",text));
  >=20
  > doc.add(Field.Keyword("id",Long.toString(id)));
  >=20
  > doc.add(Field.Keyword("title",title));
  >=20
  > doc.add(Field.Keyword("keywords",keywords));
  >=20
  > doc.add(Field.Keyword("type",type));
  >=20
  > writer.addDocument(doc);
  >=20
  >=20
  >=20
  >=20
  >=20
  >=20
  >=20
  >=20
  >=20
  > ----- Original Message -----
  > From: "Chuck Williams" <chuck@manawiz.com>
  > To: "Lucene Users List" <lucene-user@jakarta.apache.org>
  > Sent: Wednesday, November 24, 2004 1:06 PM
  > Subject: RE: modifying existing index
  >=20
  >=20
  > A good way to do this is to add a keyword field with whatever unique
id
  > you have for the document.  Then you can delete the term containing
a
  > unique id to delete the document from the index (look at
  > IndexReader.delete(Term)).  You can look at the demo class IndexHTML
to
  > see how it does incremental indexing for an example.
  >=20
  > Chuck
  >=20
  >   > -----Original Message-----> From: Santosh
  > [mailto:santosh.s@softprosys.com]> Sent: Tuesday, November 23, 2004
  > 11:34
  > PM> To: Lucene Users List> Subject: Re: modifying existing index> >
I
  > have
  > gon through IndexReader , I got method :     delete(int> docNum)
,>
  > but
  > from where I will get document number? Is  this predifined? or
  > we> have> to give a number prior  to indexing?> ----- Original
  > Message -----> From: "Luke Francl" <luke.francl@stellent.com>> To:
  > "Lucene
  > Users List" <lucene-user@jakarta.apache.org>> Sent: Wednesday,
November
  > 24,
  > 2004 1:26 AM> Subject: Re: modifying existing index> > > > On Tue,
  > 2004-11-23 at 13:59, Santosh wrote:> > > I am using lucene for
indexing,
  > when I am creating Index the> docuemnts> are added. but when I want
to
  > modify the single existing document
  > and> reIndex again, it is taking as new document and adding one more
  > time, so> that I am getting same document twice in the results.> > >
To
  > overcome this I am deleting existing Index and again
  > recreating> whole> Index. but is it possibe to index  the modified
  > document
  > again and> overwrite> existing document without deleting and
recreation.
  > can
  > I do this? If
  > so> how?> >> > You do not need to recreate the whole index. Just
mark
  > the
  > document as> > deleted using the IndexReader and then add it again
with
  > the>
  > > IndexWriter. Remember to close your IndexReader and IndexWriter
  > after> > doing this.> >> > The deleted document will be removed the
next
  > time you optimize
  > your> > index.> >> > Luke Francl> >> >> >
  >
---------------------------------------------------------------------> >
  > To
  > unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org> >
For
  > additional commands, e-mail:
  > lucene-user-help@jakarta.apache.org> >> > >
  >
--------------------------------------------------------------------->
  > To
  > unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org> For
  > additional commands, e-mail: lucene-user-help@jakarta.apache.org
  >=20
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
  >=20
  >=20
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11493-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 20:21:21 2004
Return-Path: <lucene-user-return-11493-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 69093 invoked from network); 24 Nov 2004 20:21:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 20:21:21 -0000
Received: (qmail 29412 invoked by uid 500); 24 Nov 2004 20:21:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 29394 invoked by uid 500); 24 Nov 2004 20:21:08 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 29371 invoked by uid 99); 24 Nov 2004 20:21:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of john.wang@gmail.com designates 64.233.170.202 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.202)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 12:21:05 -0800
Received: by rproxy.gmail.com with SMTP id a36so104616rnf
        for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 12:20:58 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=sVjVCtyg3mmVmV9Z24BYWTreR+nfG2Q6k2DiikZMCj8ySyYBaEIT9hYD9A/t07jPmUNwG7r/Jfsa0RPQbutyAM/pwDARperptxnVvNGIIggmU9QopOTrBXh6F7Vlip48wrEHNPBCGs9H8ruIgACoXcCwZzq7AzkFm2wU3arZdn4=
Received: by 10.38.79.75 with SMTP id c75mr501507rnb;
        Wed, 24 Nov 2004 12:20:58 -0800 (PST)
Received: by 10.38.75.29 with HTTP; Wed, 24 Nov 2004 12:20:57 -0800 (PST)
Message-ID: <8837fb7704112412203f474f0b@mail.gmail.com>
Date: Wed, 24 Nov 2004 12:20:57 -0800
From: John Wang <john.wang@gmail.com>
Reply-To: John Wang <john.wang@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: URGENT: Help indexing large document set
In-Reply-To: <200411240905.39366.paul.elschot@xs4all.nl>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <8837fb7704112315374f5d84e6@mail.gmail.com>
	 <200411240905.39366.paul.elschot@xs4all.nl>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks Paul!

Using your suggestion, I have changed the update check code to use
only the indexReader:

try {
              localReader = IndexReader.open(path);

              while (keyIter.hasNext()) {
                key = (String) keyIter.next();
                term = new Term("key", key);
                TermDocs tDocs = localReader.termDocs(term);
                if (tDocs != null) {
                  try {
                    while (tDocs.next()) {
                      localReader.delete(tDocs.doc());
                    }
                  } finally {
                    tDocs.close();
                  }
                }
              }
            } finally {

              if (localReader != null) {
                localReader.close();
              }

            }


Unfortunately it didn't seem to make any dramatic difference.

I also see the CPU is only 30-50% busy, so I am guessing it's spending
a lot of time in IO. Anyway of making the CPU work harder?

Is batch size of 500 too small for 1 million documents?

Currently I am seeing a linear speed degredation of 0.3 milliseconds
per document.

Thanks

-John


On Wed, 24 Nov 2004 09:05:39 +0100, Paul Elschot <paul.elschot@xs4all.nl> wrote:
> On Wednesday 24 November 2004 00:37, John Wang wrote:
> 
> 
> > Hi:
> >
> >    I am trying to index 1M documents, with batches of 500 documents.
> >
> >    Each document has an unique text key, which is added as a
> > Field.KeyWord(name,value).
> >
> >    For each batch of 500, I need to make sure I am not adding a
> > document with a key that is already in the current index.
> >
> >   To do this, I am calling IndexSearcher.docFreq for each document and
> > delete the document currently in the index with the same key:
> >
> >        while (keyIter.hasNext()) {
> >             String objectID = (String) keyIter.next();
> >             term = new Term("key", objectID);
> >             int count = localSearcher.docFreq(term);
> 
> To speed this up a bit make sure that the iterator gives
> the terms in sorted order. I'd use an index reader instead
> of a searcher, but that will probably not make a difference.
> 
> Adding the documents can be done with multiple threads.
> Last time I checked that, there was a moderate speed up
> using three threads instead of one on a single CPU machine.
> Tuning the values of minMergeDocs and maxMergeDocs
> may also help to increase performance of adding documents.
> 
> Regards,
> Paul Elschot
> 
> ---------------------------------------------------------------------
> 
> 
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11494-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 20:27:10 2004
Return-Path: <lucene-user-return-11494-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78481 invoked from network); 24 Nov 2004 20:27:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 20:27:10 -0000
Received: (qmail 40832 invoked by uid 500); 24 Nov 2004 20:26:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40816 invoked by uid 500); 24 Nov 2004 20:26:59 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40787 invoked by uid 99); 24 Nov 2004 20:26:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of john.wang@gmail.com designates 64.233.170.197 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.197)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 12:26:53 -0800
Received: by rproxy.gmail.com with SMTP id a36so106762rnf
        for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 12:26:47 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=qyRUvpmAGbLn6ECPe0is0jUiRhB8l5bPb/K7Mnc4b/n+iv6kRlDF5l/Pxj/wHdgNAqnp+Hi3nXpuU8Z+8lmbNG0vN57etHSimWpVEUzfH1CV4aX2uw6WBFmrzV/TuCdNUCI5OFnzZGjkTqZThu96KaMMI5HmgIq1BUXcSbt1JXg=
Received: by 10.38.15.61 with SMTP id 61mr501357rno;
        Wed, 24 Nov 2004 12:26:47 -0800 (PST)
Received: by 10.38.75.29 with HTTP; Wed, 24 Nov 2004 12:26:47 -0800 (PST)
Message-ID: <8837fb77041124122675a0d0e0@mail.gmail.com>
Date: Wed, 24 Nov 2004 12:26:47 -0800
From: John Wang <john.wang@gmail.com>
Reply-To: John Wang <john.wang@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>, 
	Chris Lamprecht <clamprecht@gmail.com>
Subject: Re: Too many open files issue
In-Reply-To: <88c6a67204112214216767084e@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <88B56FBAEB84EC448511C30CD63D3F8A0279F553@delmail1.sapient.com>
	 <88c6a67204112214216767084e@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have also seen this problem.

In the Lucene code, I don't see where the reader speicified when
creating a field is closed. That holds on to the file.

I am looking at DocumentWriter.invertDocument()

Thanks

-John


On Mon, 22 Nov 2004 16:21:35 -0600, Chris Lamprecht
<clamprecht@gmail.com> wrote:
> A useful resource for increasing the number of file handles on various
> operating systems is the Volano Report:
> 
> http://www.volano.com/report/
> 
> 
> 
> > I had requested help on an issue we have been facing with the "Too many
> > open files" Exception garbling the search indexes and crashing the
> > search on the web site.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11495-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 20:33:06 2004
Return-Path: <lucene-user-return-11495-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 80532 invoked from network); 24 Nov 2004 20:33:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 20:33:05 -0000
Received: (qmail 53564 invoked by uid 500); 24 Nov 2004 20:33:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 53544 invoked by uid 500); 24 Nov 2004 20:33:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 53524 invoked by uid 99); 24 Nov 2004 20:33:00 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from reh001-1.rex001.exchangebyregister.com (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 12:32:57 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: URGENT: Help indexing large document set
Date: Wed, 24 Nov 2004 12:32:52 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C02A45194@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: URGENT: Help indexing large document set
Thread-Index: AcTSYycolHlXtGdiSPaYMhYMZDEzkQAAMsvw
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>,
	"John Wang" <john.wang@gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Does keyIter return the keys in sorted order?  This should reduce seeks,
especially if the keys are dense.

Also, you should be able to localReader.delete(term) instead of
iterating over the docs (of which I presume there is only one doc since
keys are unique).  This won't improve performance as
IndexReader.delete(Term) does exactly what your code does, but it will
be cleaner.

A linear slowdown with number of docs doesn't make sense, so something
else must be wrong.  I'm not sure what the default buffer size is (it
appears it used to be 128 but is dynamic now I think).  You might find
the slowdown stops after a certain point, especially if you increase
your batch size.

Chuck

  > -----Original Message-----
  > From: John Wang [mailto:john.wang@gmail.com]
  > Sent: Wednesday, November 24, 2004 12:21 PM
  > To: Lucene Users List
  > Subject: Re: URGENT: Help indexing large document set
  >=20
  > Thanks Paul!
  >=20
  > Using your suggestion, I have changed the update check code to use
  > only the indexReader:
  >=20
  > try {
  >               localReader =3D IndexReader.open(path);
  >=20
  >               while (keyIter.hasNext()) {
  >                 key =3D (String) keyIter.next();
  >                 term =3D new Term("key", key);
  >                 TermDocs tDocs =3D localReader.termDocs(term);
  >                 if (tDocs !=3D null) {
  >                   try {
  >                     while (tDocs.next()) {
  >                       localReader.delete(tDocs.doc());
  >                     }
  >                   } finally {
  >                     tDocs.close();
  >                   }
  >                 }
  >               }
  >             } finally {
  >=20
  >               if (localReader !=3D null) {
  >                 localReader.close();
  >               }
  >=20
  >             }
  >=20
  >=20
  > Unfortunately it didn't seem to make any dramatic difference.
  >=20
  > I also see the CPU is only 30-50% busy, so I am guessing it's
spending
  > a lot of time in IO. Anyway of making the CPU work harder?
  >=20
  > Is batch size of 500 too small for 1 million documents?
  >=20
  > Currently I am seeing a linear speed degredation of 0.3 milliseconds
  > per document.
  >=20
  > Thanks
  >=20
  > -John
  >=20
  >=20
  > On Wed, 24 Nov 2004 09:05:39 +0100, Paul Elschot
  > <paul.elschot@xs4all.nl> wrote:
  > > On Wednesday 24 November 2004 00:37, John Wang wrote:
  > >
  > >
  > > > Hi:
  > > >
  > > >    I am trying to index 1M documents, with batches of 500
documents.
  > > >
  > > >    Each document has an unique text key, which is added as a
  > > > Field.KeyWord(name,value).
  > > >
  > > >    For each batch of 500, I need to make sure I am not adding a
  > > > document with a key that is already in the current index.
  > > >
  > > >   To do this, I am calling IndexSearcher.docFreq for each
document
  > and
  > > > delete the document currently in the index with the same key:
  > > >
  > > >        while (keyIter.hasNext()) {
  > > >             String objectID =3D (String) keyIter.next();
  > > >             term =3D new Term("key", objectID);
  > > >             int count =3D localSearcher.docFreq(term);
  > >
  > > To speed this up a bit make sure that the iterator gives
  > > the terms in sorted order. I'd use an index reader instead
  > > of a searcher, but that will probably not make a difference.
  > >
  > > Adding the documents can be done with multiple threads.
  > > Last time I checked that, there was a moderate speed up
  > > using three threads instead of one on a single CPU machine.
  > > Tuning the values of minMergeDocs and maxMergeDocs
  > > may also help to increase performance of adding documents.
  > >
  > > Regards,
  > > Paul Elschot
  > >
  > >
---------------------------------------------------------------------
  > >
  > >
  > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > > For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
  > >
  > >
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11496-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 22:28:08 2004
Return-Path: <lucene-user-return-11496-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 32149 invoked from network); 24 Nov 2004 22:28:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 22:28:08 -0000
Received: (qmail 62711 invoked by uid 500); 24 Nov 2004 22:28:01 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62536 invoked by uid 500); 24 Nov 2004 22:28:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62521 invoked by uid 99); 24 Nov 2004 22:28:01 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jhager@gmail.com designates 64.233.184.200 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.200)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 14:27:55 -0800
Received: by wproxy.gmail.com with SMTP id 55so135579wri
        for <lucene-user@jakarta.apache.org>; Wed, 24 Nov 2004 14:27:51 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=nMOh7drpn7sXBrPNLbO9b64e5L9Emtpen9wIWIPMoFQ3tZlPiq+LVsG5TDWU2jgWqbnY+3QkUsj3DFAUmy0mGNuz51+hUGntVY8UyhG3Ng06xH3xTGFc4M3G9hIgdzY8yEoAzjKo1IVXaNhkTJA2QTNewZ/uXF1g+ySEtqp1NWQ=
Received: by 10.54.46.2 with SMTP id t2mr390002wrt;
        Wed, 24 Nov 2004 14:26:40 -0800 (PST)
Received: by 10.54.2.48 with HTTP; Wed, 24 Nov 2004 14:26:40 -0800 (PST)
Message-ID: <836e9242041124142675866e03@mail.gmail.com>
Date: Wed, 24 Nov 2004 14:26:40 -0800
From: Jonathan Hager <jhager@gmail.com>
Reply-To: Jonathan Hager <jhager@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Index in RAM - is it realy worthy?
In-Reply-To: <41A24E6B.8030807@newsmonster.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <20041122172340.25792.qmail@web12704.mail.yahoo.com>
	 <41A24E6B.8030807@newsmonster.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

When comparing RAMDirectory and FSDirectory it is important to mention
what OS you are using.  When using linux it will cache the most recent
disk access in memory.  Here is a good article that describes its
strategy: http://forums.gentoo.org/viewtopic.php?t=175419

The 2% difference you are seeing is the memory copy.  With other OSes
you may see a speed up when using the RAMDirectory, because not all
OSes contain a disk cache in memory and must access the disk to read
the index.

Another consideration is there is currently a 2GB limitation with the
size of the RAMDirectory.  Indexes over 2GB causes a overflow in the
int used to create the buffer.  [see int len = (int) is.length(); in
RamDirectory]

I ended up using RAM directory for a very different reason.  The index
is 1 to 2MB and is rebuilt every few hours.  It takes 3 to 4 minutes
to query the database and rebuild the index.  But the search should be
available 100% of the time.  Since the index is so small I do the
following:

on server startup:
- look for semaphore, if it is there delete the index
- if there is no index, build it to FSdirectory
- load the index from FSDirectory into RAMDirectory

on reindex:
- create semaphore
- rebuild index to FSDirectory
- delete semaphore
- load index from FSDirecttory into RAMDirectory

to search:
- search the RAMDirectory

RAMDirectory could be replaced by a regular FSDirectory, but it seemed
silly to copy the index from disk to disk, when it ultimately needs to
be in memory.

FSDirectory could be replaced by a RAMDirectory, but this means that
it would take the server 3 to 4 minutes longer to startup every time. 
By persisting the index, this time would only be necessary if indexing
was interrupted.

Jonathan

On Mon, 22 Nov 2004 12:39:07 -0800, Kevin A. Burton
<burton@newsmonster.org> wrote:
> Otis Gospodnetic wrote:
> 
> >For the Lucene book I wrote some test cases that compare FSDirectory
> >and RAMDirectory.  What I found was that with certain settings
> >FSDirectory was almost as fast as RAMDirectory.  Personally, I would
> >push FSDirectory and hope that the OS and the Filesystem do their share
> >of work and caching for me before looking for ways to optimize my code.
> >
> >
> Yes... I performed the same benchmark and in my situation RAMDirectory
> for searches was about 2% slower.
> 
> I'm willing to bet that it has to do with the fact that its a Hashtable
> and not a HashMap (which isn't synchronized).
> 
> Also adding a constructor for the term size could make loading a
> RAMDirectory faster since you could prevent rehash.
> 
> If you're on a modern machine your filesystme cache will end up
> buffering your disk anyway which I'm sure was happening in my situation.
> 
> Kevin
> 
> --
> 
> Use Rojo (RSS/Atom aggregator).  Visit http://rojo.com. Ask me for an
> invite!  Also see irc.freenode.net #rojo if you want to chat.
> 
> Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html
> 
> If you're interested in RSS, Weblogs, Social Networking, etc... then you
> should work for Rojo!  If you recommend someone and we hire them you'll
> get a free iPod!
> 
> Kevin A. Burton, Location - San Francisco, CA
>        AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11497-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Nov 24 23:48:21 2004
Return-Path: <lucene-user-return-11497-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 61072 invoked from network); 24 Nov 2004 23:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 24 Nov 2004 23:48:21 -0000
Received: (qmail 75021 invoked by uid 500); 24 Nov 2004 23:48:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74988 invoked by uid 500); 24 Nov 2004 23:48:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 74969 invoked by uid 99); 24 Nov 2004 23:48:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=LINES_OF_YELLING,MIME_QP_LONG_LINE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from cato.nettas.net (HELO cato.nettas.net) (202.7.15.72)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 15:48:09 -0800
Received: from cato.nettas.net (localhost [127.0.0.1])
	by localhost.nettas.net (Postfix) with ESMTP id AB85155FA
	for <lucene-user@jakarta.apache.org>; Thu, 25 Nov 2004 10:47:46 +1100 (EST)
Received: from eduisa1.education.tas.gov.au (eduisa1.education.tas.gov.au [147.41.65.11])
	by cato.nettas.net (Postfix) with ESMTP id 611F426D4
	for <lucene-user@jakarta.apache.org>; Thu, 25 Nov 2004 10:47:46 +1100 (EST)
Received: by eduisa1.education.tas.gov.au
	with XWall v3.31 ;
	Thu, 25 Nov 2004 10:47:46 +1100
From: "Kauler, Leto S" <leto.kauler@education.tas.gov.au>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: Using multiple analysers within a query
Date: Thu, 25 Nov 2004 10:47:45 +1100
X-Assembled-By: XWall v3.31
Message-ID: <AFAC9B2BF1A8BF4886F5C0FDE428E90E06B9165A@edumail2.education.tas.gov.au>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi again,

Thanks for everyone who replied.  The PerFieldAnalyzerWrapper was a good
suggestion, and one I had overlooked, but for our particular
requirements it wouldn't quite work so I went with overriding
getFieldQuery().

You were right, Paul.  In 1.4.2 a whole heap of QueryParser changes were
made, mostly removing the analyzer parameter from methods.

In the end I built my changes on top of the NewMultiFieldQueryParser
which was shared here recently and works wonders -- thanks Bill Janssen
and sergiu gordea.  I added support for slops and boosts to build
together with the multi-fields array, and then overrode getFieldQuery to
check the queryText for a start char ("=3D" for example) and if found
remove it and switch to a non-tokenising analyser.

Then I found that because that analyser always returns a single token
(TermQuery) it would send through spaces into the final query string,
causing problems.  So also in getFieldQuery I check if it needs breaking
up and converting into a PhraseQuery.

Seems to work, just needs thorough testing.  If anyone would like a copy
I could post it up here.

Regards, --Leto
(excuse the disclaimer...)



> We have the need for analysed and 'not analysed/not tokenised' clauses

> within one query.  Imagine an unparsed query like:
>=20
> +title:"Hello World" +path:Resources\Live\1
>=20
> In the above example we would want the first clause to use=20
> StandardAnalyser and the second to use an analyser which returns the=20
> term as a single token.  So a parsed result might look like:
>=20
> +(title:hello title:world) +path:Resources\Live\1
>=20
> Would anyone have any suggestions on how this could be done?  I was=20
> thinking maybe the QueryParser would have to be changed/extended to=20
> accept a separator other than colon ":", something like "=3D" for=20
> example to indicate this clause is not to be tokenised.  Or perhaps=20
> this can all be done using a single analyser?

CONFIDENTIALITY NOTICE AND DISCLAIMER

Information in this transmission is intended only for the person(s) to whom =
it is addressed and may contain privileged and/or confidential information. =
If you are not the intended recipient, any disclosure, copying or disseminat=
ion of the information is unauthorised and you should delete/destroy all cop=
ies and notify the sender. No liability is accepted for any unauthorised use=
 of the information contained in this transmission.

This disclaimer has been automatically added.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11498-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 25 00:19:44 2004
Return-Path: <lucene-user-return-11498-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72079 invoked from network); 25 Nov 2004 00:19:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Nov 2004 00:19:43 -0000
Received: (qmail 7845 invoked by uid 500); 25 Nov 2004 00:19:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7813 invoked by uid 500); 25 Nov 2004 00:19:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7766 invoked by uid 99); 25 Nov 2004 00:19:30 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=LINES_OF_YELLING,MIME_QP_LONG_LINE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from cato.nettas.net (HELO cato.nettas.net) (202.7.15.72)
  by apache.org (qpsmtpd/0.28) with ESMTP; Wed, 24 Nov 2004 16:19:27 -0800
Received: from cato.nettas.net (localhost [127.0.0.1])
	by localhost.nettas.net (Postfix) with ESMTP id C7883402B
	for <lucene-user@jakarta.apache.org>; Thu, 25 Nov 2004 11:19:19 +1100 (EST)
Received: from eduisa2.education.tas.gov.au (eduisa2.education.tas.gov.au [147.41.65.12])
	by cato.nettas.net (Postfix) with ESMTP id 8F1EE3A55
	for <lucene-user@jakarta.apache.org>; Thu, 25 Nov 2004 11:19:19 +1100 (EST)
Received: by eduisa2.education.tas.gov.au
	with XWall v3.31 ;
	Thu, 25 Nov 2004 11:19:19 +1100
From: "Kauler, Leto S" <leto.kauler@education.tas.gov.au>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: Using multiple analysers within a query
Date: Thu, 25 Nov 2004 11:19:18 +1100
X-Assembled-By: XWall v3.31
Message-ID: <AFAC9B2BF1A8BF4886F5C0FDE428E90E06B9165C@edumail2.education.tas.gov.au>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Actually, just realised a PhraseQuery is incorrect...
I only want a single TermQuery but it just needs to be quoted, d'oh.


-----Original Message-----
Then I found that because that analyser always returns a single token
(TermQuery) it would send through spaces into the final query string,
causing problems.  So also in getFieldQuery I check if it needs breaking
up and converting into a PhraseQuery.

CONFIDENTIALITY NOTICE AND DISCLAIMER

Information in this transmission is intended only for the person(s) to whom =
it is addressed and may contain privileged and/or confidential information. =
If you are not the intended recipient, any disclosure, copying or disseminat=
ion of the information is unauthorised and you should delete/destroy all cop=
ies and notify the sender. No liability is accepted for any unauthorised use=
 of the information contained in this transmission.

This disclaimer has been automatically added.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11499-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Thu Nov 25 23:05:50 2004
Return-Path: <lucene-user-return-11499-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 17803 invoked from network); 25 Nov 2004 23:05:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 25 Nov 2004 23:05:50 -0000
Received: (qmail 98570 invoked by uid 500); 25 Nov 2004 23:05:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 98540 invoked by uid 500); 25 Nov 2004 23:05:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 98524 invoked by uid 99); 25 Nov 2004 23:05:44 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of nicclas@gmail.com designates 64.233.170.196 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.196)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 25 Nov 2004 15:05:43 -0800
Received: by rproxy.gmail.com with SMTP id a36so207322rnf
        for <lucene-user@jakarta.apache.org>; Thu, 25 Nov 2004 15:05:41 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=p3AB923DfHnuA2jOcluWQ0578aT4hBXpR28FdLWDNcQRfvFv8Bz6MrUETygGrqgM5BefZy6NhGfDKVFKg3yH7dQMeLraz8FKbIuUAgs4X0xXNvRCXDdjfxnhqDV3KviTfKj1L+TjGxFjuciWyg7tcNUATNmT0mIwNf8srNR2Sls=
Received: by 10.38.171.16 with SMTP id t16mr127569rne;
        Thu, 25 Nov 2004 15:05:41 -0800 (PST)
Received: by 10.38.163.8 with HTTP; Thu, 25 Nov 2004 15:05:41 -0800 (PST)
Message-ID: <6bf9d694041125150536573678@mail.gmail.com>
Date: Fri, 26 Nov 2004 00:05:41 +0100
From: clas <nicclas@gmail.com>
Reply-To: clas <nicclas@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Modifying the StandardAnalyzer to not strip ;-signs
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi all,

I'm using the StandardAnalyzer in an application based on Lucene 1.4.2. 

Currently, and by default, the StandardAnalyser "throws
semicolon-signs away" at index and store time. For example, a document
like "ee3e st&#x00e4;der" looks liks "ee3e st&#x00e4der" when
retrieved from the index (That is, the ;-sign is missing). The
document is stored as a Field.Text in the index.

What I would like to do is to index, and store, words like
"st&#x00e4;der" and retrieve them in exactly the same form, i.e. as
"st&#x00e4;der".

I can imagine that the result I would like to achieve can be produced
by some modifications to the StandardTokenizer.jj (or somewhere else).
Can someone please help me by showing me where/how such change can be
made.

(Note: It is not necessary to be able to search for text with
semicolon-sign included, just to retrieve them in their original
format.)

cheers
Clas / Frisim.com

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11500-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 26 00:35:49 2004
Return-Path: <lucene-user-return-11500-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49563 invoked from network); 26 Nov 2004 00:35:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 26 Nov 2004 00:35:49 -0000
Received: (qmail 92029 invoked by uid 500); 26 Nov 2004 00:35:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 91996 invoked by uid 500); 26 Nov 2004 00:35:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 91979 invoked by uid 99); 26 Nov 2004 00:35:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Thu, 25 Nov 2004 16:35:44 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8AF3D13E28FC; Thu, 25 Nov 2004 19:35:41 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id E17A313E2007
	for <lucene-user@jakarta.apache.org>; Thu, 25 Nov 2004 19:35:23 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <6bf9d694041125150536573678@mail.gmail.com>
References: <6bf9d694041125150536573678@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <10AE4581-3F43-11D9-9F2C-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Modifying the StandardAnalyzer to not strip ;-signs
Date: Thu, 25 Nov 2004 19:35:25 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 25, 2004, at 6:05 PM, clas wrote:
> Currently, and by default, the StandardAnalyser "throws
> semicolon-signs away" at index and store time.

This is incorrect.  *Nothing* is changed in what is stored from the 
original String.  Chances are something else is causing you to see the 
semicolon dropped.

> (Note: It is not necessary to be able to search for text with
> semicolon-sign included, just to retrieve them in their original
> format.)

Since searching for the semicolon is not necessary, all should be well 
once you figure out where else in your system the semicolon is dropped.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11501-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 26 01:04:32 2004
Return-Path: <lucene-user-return-11501-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57852 invoked from network); 26 Nov 2004 01:04:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 26 Nov 2004 01:04:32 -0000
Received: (qmail 22551 invoked by uid 500); 26 Nov 2004 01:04:25 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 22526 invoked by uid 500); 26 Nov 2004 01:04:25 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22513 invoked by uid 99); 26 Nov 2004 01:04:25 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web12701.mail.yahoo.com (HELO web12701.mail.yahoo.com) (216.136.173.238)
  by apache.org (qpsmtpd/0.28) with SMTP; Thu, 25 Nov 2004 17:04:23 -0800
Received: (qmail 66247 invoked by uid 60001); 26 Nov 2004 01:04:21 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=VYdi4QJBwWBeiOw+L3QcOdXqLPxFSSoxaP02eB3VXTir8gEFkHdu0XDV5fa92+5VUwHjG2ET2n7T7bx0Nr+PT6PPsk0rOQ5U52IAhhP2uK54R6eANMRUPaLBbxo5TN/V8NchqGyOlf1l0pRglhdMGezF72fEBIesBn0U2SVE6ow=  ;
Message-ID: <20041126010421.66245.qmail@web12701.mail.yahoo.com>
Received: from [69.201.128.26] by web12701.mail.yahoo.com via HTTP; Thu, 25 Nov 2004 17:04:21 PST
Date: Thu, 25 Nov 2004 17:04:21 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Modifying the StandardAnalyzer to not strip ;-signs
To: Lucene Users List <lucene-user@jakarta.apache.org>,
  clas <nicclas@gmail.com>
In-Reply-To: <6bf9d694041125150536573678@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You could use Field.Keyword.

Otis


--- clas <nicclas@gmail.com> wrote:

> Hi all,
> 
> I'm using the StandardAnalyzer in an application based on Lucene
> 1.4.2. 
> 
> Currently, and by default, the StandardAnalyser "throws
> semicolon-signs away" at index and store time. For example, a
> document
> like "ee3e stder" looks liks "ee3e st&#58590;r" when
> retrieved from the index (That is, the ;-sign is missing). The
> document is stored as a Field.Text in the index.
> 
> What I would like to do is to index, and store, words like
> "stder" and retrieve them in exactly the same form, i.e. as
> "stder".
> 
> I can imagine that the result I would like to achieve can be produced
> by some modifications to the StandardTokenizer.jj (or somewhere
> else).
> Can someone please help me by showing me where/how such change can be
> made.
> 
> (Note: It is not necessary to be able to search for text with
> semicolon-sign included, just to retrieve them in their original
> format.)
> 
> cheers
> Clas / Frisim.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11502-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 26 08:47:33 2004
Return-Path: <lucene-user-return-11502-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 54997 invoked from network); 26 Nov 2004 08:47:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 26 Nov 2004 08:47:32 -0000
Received: (qmail 21705 invoked by uid 500); 26 Nov 2004 08:47:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21681 invoked by uid 500); 26 Nov 2004 08:47:19 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21663 invoked by uid 99); 26 Nov 2004 08:47:19 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from londo.swishmail.com (HELO londo.swishmail.com) (209.10.110.95)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 26 Nov 2004 00:47:19 -0800
Received: (qmail 91017 invoked by uid 89); 26 Nov 2004 08:47:17 -0000
Received: from unknown (HELO ?131.114.3.115?) (doug@cottrell-cutting.net@131.114.3.115)
  by londo.swishmail.com with AES256-SHA encrypted SMTP; 26 Nov 2004 08:47:16 -0000
Message-ID: <41A6ED8B.9050309@apache.org>
Date: Fri, 26 Nov 2004 09:47:07 +0100
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.7.3) Gecko/20040910
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: Too many open files issue
References: <88B56FBAEB84EC448511C30CD63D3F8A0279F553@delmail1.sapient.com>	 <88c6a67204112214216767084e@mail.gmail.com> <8837fb77041124122675a0d0e0@mail.gmail.com>
In-Reply-To: <8837fb77041124122675a0d0e0@mail.gmail.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

John Wang wrote:
> In the Lucene code, I don't see where the reader speicified when
> creating a field is closed. That holds on to the file.
> 
> I am looking at DocumentWriter.invertDocument()

It is closed in a finally clause on line 170, when the TokenStream is 
closed.

Doug


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11503-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 26 09:38:43 2004
Return-Path: <lucene-user-return-11503-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85790 invoked from network); 26 Nov 2004 09:38:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 26 Nov 2004 09:38:43 -0000
Received: (qmail 23538 invoked by uid 500); 26 Nov 2004 09:38:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23518 invoked by uid 500); 26 Nov 2004 09:38:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23489 invoked by uid 99); 26 Nov 2004 09:38:20 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from smtp-vbr10.xs4all.nl (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 26 Nov 2004 01:38:18 -0800
Received: from p2400.twansoft.com (a80-126-165-160.adsl.xs4all.nl [80.126.165.160])
	(authenticated bits=0)
	by smtp-vbr10.xs4all.nl (8.12.11/8.12.11) with ESMTP id iAQ9cBmC070918
	for <lucene-user@jakarta.apache.org>; Fri, 26 Nov 2004 10:38:15 +0100 (CET)
	(envelope-from twan@twansoft.com)
Message-Id: <6.1.2.0.2.20041126100835.0666ca30@pop.xs4all.nl>
X-Sender: twanko@pop.xs4all.nl
X-Mailer: QUALCOMM Windows Eudora Version 6.1.2.0
Date: Fri, 26 Nov 2004 10:42:04 +0100
To: lucene-user@jakarta.apache.org
From: Twan Kogels <twan@twansoft.com>
Subject: Dutch Analyzer dictionary format?
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello all,

I'm using lucene to search through a couple of documents to find 
interesting documents. Most documents are in Dutch language. I saw that the 
default snowball stemmer wasn't doing well on text written in a foreign 
language. Lucky i found a Dutch text analyzer in de lucene sandbox project.

I've read the javadoc and found out it needs a stemdictionary. You can load 
this dictionary with the following function:
DutchAnalyzer.setStemDictionary(File f)

The format needs to be a tab separator list (word [tab] stem).

To be sure i do everything correctly i've got a question about the dictonary:
Can i just get:
<http://snowball.tartarus.org/dutch/diffs.txt>
and convert it to a tab separated list and then "feed" it to the 
setStemDictionary() function?

Kind regards,
Twan Kogels 



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11504-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Fri Nov 26 17:02:25 2004
Return-Path: <lucene-user-return-11504-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 40835 invoked from network); 26 Nov 2004 17:02:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 26 Nov 2004 17:02:25 -0000
Received: (qmail 40480 invoked by uid 500); 26 Nov 2004 17:02:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 40453 invoked by uid 500); 26 Nov 2004 17:02:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 40440 invoked by uid 99); 26 Nov 2004 17:02:17 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web12703.mail.yahoo.com (HELO web12703.mail.yahoo.com) (216.136.173.240)
  by apache.org (qpsmtpd/0.28) with SMTP; Fri, 26 Nov 2004 09:02:15 -0800
Received: (qmail 67124 invoked by uid 60001); 26 Nov 2004 17:02:13 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=riUnEVwRqgVlhJBqZlCjqpzdTYEhKzyKpucFiR93QR8PSJkGHfLb1ka5O046k+TEPOc2A5VsLq4s4e2YPENtciDa5NFjDdLDVNjPGeM8jajwyzMLRgZh5JLvMo9M9/XGAsRqz0Pbl4L7I2SjeYNWuZmTfe90D5dN0z+ZkfQLtdw=  ;
Message-ID: <20041126170213.67122.qmail@web12703.mail.yahoo.com>
Received: from [69.201.130.149] by web12703.mail.yahoo.com via HTTP; Fri, 26 Nov 2004 09:02:13 PST
Date: Fri, 26 Nov 2004 09:02:13 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Dutch Analyzer dictionary format?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <6.1.2.0.2.20041126100835.0666ca30@pop.xs4all.nl>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Judging from everything you've said, the answer is yes.  I don't use
Dutch Analyzer, so I'm not 100% sure about this, but it sounds easy
enough to try.

Otis

--- Twan Kogels <twan@twansoft.com> wrote:

> Hello all,
> 
> I'm using lucene to search through a couple of documents to find 
> interesting documents. Most documents are in Dutch language. I saw
> that the 
> default snowball stemmer wasn't doing well on text written in a
> foreign 
> language. Lucky i found a Dutch text analyzer in de lucene sandbox
> project.
> 
> I've read the javadoc and found out it needs a stemdictionary. You
> can load 
> this dictionary with the following function:
> DutchAnalyzer.setStemDictionary(File f)
> 
> The format needs to be a tab separator list (word [tab] stem).
> 
> To be sure i do everything correctly i've got a question about the
> dictonary:
> Can i just get:
> <http://snowball.tartarus.org/dutch/diffs.txt>
> and convert it to a tab separated list and then "feed" it to the 
> setStemDictionary() function?
> 
> Kind regards,
> Twan Kogels 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11505-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 27 07:47:04 2004
Return-Path: <lucene-user-return-11505-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58930 invoked from network); 27 Nov 2004 07:47:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 27 Nov 2004 07:47:04 -0000
Received: (qmail 42575 invoked by uid 500); 27 Nov 2004 07:46:59 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 42547 invoked by uid 500); 27 Nov 2004 07:46:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 42534 invoked by uid 99); 27 Nov 2004 07:46:58 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_40_50,HTML_MESSAGE,MIME_QP_LONG_LINE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mailbe04.mc.Vanderbilt.Edu (HELO mailbe04.mc.vanderbilt.edu) (160.129.50.174)
  by apache.org (qpsmtpd/0.28) with ESMTP; Fri, 26 Nov 2004 23:46:58 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4D455.444C8D79"
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: Are similarity scores computed when using sort?
Date: Sat, 27 Nov 2004 01:46:55 -0600
Message-ID: <F36CECB25A260542A3FD097C50B1EA3C1D133A@mailbe04.mc.vanderbilt.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Are similarity scores computed when using sort?
Thread-Index: AcTUVURHnixBsJIsQHCxI/KUBA48/Q==
From: "Aphinyanaphongs, Yindalon" <ping.pong@Vanderbilt.Edu>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4D455.444C8D79
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I have an search application that is very performance conscious.  I've =
looked through the IndexSearcher code, and haven't been able to clarify =
whether a similarity score is calculated if the results are sorted by =
some numerical field value? Basically, it would be preferable to not =
incur the computational cost of generating a similarity score if it is =
never used.

Thanks
Yin
=20

------_=_NextPart_001_01C4D455.444C8D79--

From lucene-user-return-11506-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 27 10:43:37 2004
Return-Path: <lucene-user-return-11506-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 28497 invoked from network); 27 Nov 2004 10:43:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 27 Nov 2004 10:43:37 -0000
Received: (qmail 4969 invoked by uid 500); 27 Nov 2004 10:43:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 4944 invoked by uid 500); 27 Nov 2004 10:43:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 4923 invoked by uid 99); 27 Nov 2004 10:43:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 27 Nov 2004 02:43:26 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 59D5013E28FB; Sat, 27 Nov 2004 05:43:24 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 8BE4313E2008
	for <lucene-user@jakarta.apache.org>; Sat, 27 Nov 2004 05:43:00 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <F36CECB25A260542A3FD097C50B1EA3C1D133A@mailbe04.mc.vanderbilt.edu>
References: <F36CECB25A260542A3FD097C50B1EA3C1D133A@mailbe04.mc.vanderbilt.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <1DF58B2F-4061-11D9-A9DA-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Are similarity scores computed when using sort?
Date: Sat, 27 Nov 2004 05:43:04 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Yes, Similarity is still computed.  It has to be in order to determine 
if the documents considered are a hit or not.  Scores of 0 are not a 
hit.

You certainly could simplify the Similarity computations though, by 
creating your own implementation and returning 1 from all the methods.

	Erik

On Nov 27, 2004, at 2:46 AM, Aphinyanaphongs, Yindalon wrote:

> I have an search application that is very performance conscious.  I've 
> looked through the IndexSearcher code, and haven't been able to 
> clarify whether a similarity score is calculated if the results are 
> sorted by some numerical field value? Basically, it would be 
> preferable to not incur the computational cost of generating a 
> similarity score if it is never used.
>
> Thanks
> Yin
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11507-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 27 18:01:56 2004
Return-Path: <lucene-user-return-11507-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 72469 invoked from network); 27 Nov 2004 18:01:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 27 Nov 2004 18:01:56 -0000
Received: (qmail 76615 invoked by uid 500); 27 Nov 2004 18:01:47 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76577 invoked by uid 500); 27 Nov 2004 18:01:47 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76563 invoked by uid 99); 27 Nov 2004 18:01:46 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_40_50,HTML_MESSAGE,MIME_QP_LONG_LINE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mailbe04.mc.Vanderbilt.Edu (HELO mailbe04.mc.vanderbilt.edu) (160.129.50.174)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 27 Nov 2004 10:01:45 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4D4AB.25EDD979"
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: Are similarity scores computed when using sort?
Date: Sat, 27 Nov 2004 12:01:41 -0600
Message-ID: <F36CECB25A260542A3FD097C50B1EA3C1D133C@mailbe04.mc.vanderbilt.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Are similarity scores computed when using sort?
Thread-Index: AcTUbf2sNseQ1ATVQN+TY/gwdAcEPwAPCR2y
From: "Aphinyanaphongs, Yindalon" <ping.pong@Vanderbilt.Edu>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4D4AB.25EDD979
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Erik
Thanks for the quick response.  I don't necessarily need to calculated =
the similarity score. It was my understanding that the inverted index =
had a list of all the hits for each term so technically, no document =
returned from the inverted index should have a score of 0.  Thus, if I =
have some numerical field to sort by, the inverted index itself handles =
returning the documents with the term.
=20
Would you know in what java class the call is made to Similarity and =
where that code may be commented out, or would it be preferable to write =
my own similarity sub-class instead?
=20
Thanks,
Yin
=20

________________________________

From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Sat 11/27/2004 4:43 AM
To: Lucene Users List
Subject: Re: Are similarity scores computed when using sort?



Yes, Similarity is still computed.  It has to be in order to determine
if the documents considered are a hit or not.  Scores of 0 are not a
hit.

You certainly could simplify the Similarity computations though, by
creating your own implementation and returning 1 from all the methods.

        Erik

On Nov 27, 2004, at 2:46 AM, Aphinyanaphongs, Yindalon wrote:

> I have an search application that is very performance conscious.  I've
> looked through the IndexSearcher code, and haven't been able to
> clarify whether a similarity score is calculated if the results are
> sorted by some numerical field value? Basically, it would be
> preferable to not incur the computational cost of generating a
> similarity score if it is never used.
>
> Thanks
> Yin
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




------_=_NextPart_001_01C4D4AB.25EDD979--

From lucene-user-return-11508-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 27 21:22:59 2004
Return-Path: <lucene-user-return-11508-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 42976 invoked from network); 27 Nov 2004 21:22:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 27 Nov 2004 21:22:59 -0000
Received: (qmail 38019 invoked by uid 500); 27 Nov 2004 21:22:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37997 invoked by uid 500); 27 Nov 2004 21:22:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37980 invoked by uid 99); 27 Nov 2004 21:22:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from post-22.mail.nl.demon.net (HELO post-22.mail.nl.demon.net) (194.159.73.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 27 Nov 2004 13:22:52 -0800
Received: from mda.demon.nl ([212.238.156.229]:34355 helo=[127.0.0.1])
	by post-22.mail.nl.demon.net with esmtp (Exim 4.34)
	id 1CYA1l-000Dxj-Ue; Sat, 27 Nov 2004 21:22:46 +0000
Message-ID: <41A8F0C2.8090700@zilverline.org>
Date: Sat, 27 Nov 2004 22:25:22 +0100
From: Zilverline info <info@zilverline.org>
User-Agent: Mozilla Thunderbird 0.7.1 (Windows/20040626)
X-Accept-Language: nl, en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Zilverline Search Engine version 1.0-final released
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

All,

I've just released Zilverline version 1.0.

New features include incremental indexing and scheduling of indexing
proces, as well as a few minor updates.

The source will be made available as well very soon.

Zilverline is protected by a Collaborative Source License. You can read
more on this type of licensing at http://www.zilverline.org

Zilverline is a search engine based on lucene that's ready to
roll, and can be simply dropped in a Servlet Engine. It runs out of the
box, and supports PDF, WORD, HTM, TXT, RTF and CHM, and can  index zip,
rar, and many other formats. Both on Windows and Linux.

Zilverline supports plugins. You can create your own extractors
for various file formats. I've provided Extractors for RTF, Text, PDF,
Word, and HTML.

Zilverline supports collections. A collection is a set of files and
directories in a directory. A collection can be indexed, and searched.
The results of the search can be retrieved from local disk or remotely,
if you run a webserver on your machine. Files inside zip, rar and chm
files are extracted, indexed and can be cached. The cache can be mapped
to sit behind your webserver as well.

It's also possible to specify your own handlers for archives. Say you
have a RAR archive, and you have a program on your system that can
extract the content from it, then you can specify that Zilverline should
use this program.


Please take look at http://www.zilverline.org, and have a swing at it.

cheers,

   Michael Franken






---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11509-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sat Nov 27 23:04:54 2004
Return-Path: <lucene-user-return-11509-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 64821 invoked from network); 27 Nov 2004 23:04:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 27 Nov 2004 23:04:53 -0000
Received: (qmail 26775 invoked by uid 500); 27 Nov 2004 23:04:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 26746 invoked by uid 500); 27 Nov 2004 23:04:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 26731 invoked by uid 99); 27 Nov 2004 23:04:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 27 Nov 2004 15:04:47 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B7D7813E28FB; Sat, 27 Nov 2004 18:04:45 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id 05A8A13E2008
	for <lucene-user@jakarta.apache.org>; Sat, 27 Nov 2004 18:03:57 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <F36CECB25A260542A3FD097C50B1EA3C1D133C@mailbe04.mc.vanderbilt.edu>
References: <F36CECB25A260542A3FD097C50B1EA3C1D133C@mailbe04.mc.vanderbilt.edu>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <A07299C0-40C8-11D9-AA52-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Are similarity scores computed when using sort?
Date: Sat, 27 Nov 2004 18:04:01 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 27, 2004, at 1:01 PM, Aphinyanaphongs, Yindalon wrote:
> Thanks for the quick response.  I don't necessarily need to calculated 
> the similarity score. It was my understanding that the inverted index 
> had a list of all the hits for each term so technically, no document 
> returned from the inverted index should have a score of 0.

It's certainly true that the inverted index has a list of all documents 
that contain each term.  However the word "hit" is by definition a 
document with score > 0 given a query, not just a term.  Queries can be 
quite sophisticated.  For example, I was very easily able to create an 
XOR query by using a custom similarity.

> Would you know in what java class the call is made to Similarity and 
> where that code may be commented out, or would it be preferable to 
> write my own similarity sub-class instead?

Similarity use is spread out in several places.  Get a good IDE(A!) and 
surf the code and you'll easily be able to see where methods of 
Similarity are being used.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11510-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 28 00:35:00 2004
Return-Path: <lucene-user-return-11510-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 86633 invoked from network); 28 Nov 2004 00:34:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Nov 2004 00:34:59 -0000
Received: (qmail 8533 invoked by uid 500); 28 Nov 2004 00:34:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8480 invoked by uid 500); 28 Nov 2004 00:34:48 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8456 invoked by uid 99); 28 Nov 2004 00:34:48 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_30_40,HTML_MESSAGE,MIME_QP_LONG_LINE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mailbe04.mc.Vanderbilt.Edu (HELO mailbe04.mc.vanderbilt.edu) (160.129.50.174)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 27 Nov 2004 16:34:46 -0800
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4D4E2.0CB9FEC4"
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Subject: RE: Are similarity scores computed when using sort?
Date: Sat, 27 Nov 2004 18:33:07 -0600
Message-ID: <F36CECB25A260542A3FD097C50B1EA3C1D1341@mailbe04.mc.vanderbilt.edu>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Are similarity scores computed when using sort?
Thread-Index: AcTU1YlL6aQQue96TjuwHXYo+PIkIQADEtUi
From: "Aphinyanaphongs, Yindalon" <ping.pong@Vanderbilt.Edu>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4D4E2.0CB9FEC4
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Erik!
Thanks for the response.  I'll take a look and see to customizing a =
solution.
Yin

________________________________

From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Sat 11/27/2004 5:04 PM
To: Lucene Users List
Subject: Re: Are similarity scores computed when using sort?



On Nov 27, 2004, at 1:01 PM, Aphinyanaphongs, Yindalon wrote:
> Thanks for the quick response.  I don't necessarily need to calculated
> the similarity score. It was my understanding that the inverted index
> had a list of all the hits for each term so technically, no document
> returned from the inverted index should have a score of 0.

It's certainly true that the inverted index has a list of all documents
that contain each term.  However the word "hit" is by definition a
document with score > 0 given a query, not just a term.  Queries can be
quite sophisticated.  For example, I was very easily able to create an
XOR query by using a custom similarity.

> Would you know in what java class the call is made to Similarity and
> where that code may be commented out, or would it be preferable to
> write my own similarity sub-class instead?

Similarity use is spread out in several places.  Get a good IDE(A!) and
surf the code and you'll easily be able to see where methods of
Similarity are being used.

        Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org




------_=_NextPart_001_01C4D4E2.0CB9FEC4--

From lucene-user-return-11511-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 28 01:55:17 2004
Return-Path: <lucene-user-return-11511-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 99129 invoked from network); 28 Nov 2004 01:55:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Nov 2004 01:55:17 -0000
Received: (qmail 69535 invoked by uid 500); 28 Nov 2004 01:55:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69407 invoked by uid 500); 28 Nov 2004 01:55:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 69392 invoked by uid 99); 28 Nov 2004 01:55:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of john.wang@gmail.com designates 64.233.170.205 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.205)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 27 Nov 2004 17:55:09 -0800
Received: by rproxy.gmail.com with SMTP id a36so321451rnf
        for <lucene-user@jakarta.apache.org>; Sat, 27 Nov 2004 17:55:07 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=G+FmqXPpYFRqBwWFEuYvVXlvnkDnUjfy8AZyU27+WiJQS+2wqptAo5UCTraqKG1fJ8Pc2V1i3Aul5UlBOIKLuFuFeHtBaLuLLYdlmhteuu2z3lAY4iMMBP7qw5sbj7S7tDtHpG9morEhiz3qdxYDrhV0rE4Uo3kbTt/7d7upR8M=
Received: by 10.38.208.75 with SMTP id f75mr276210rng;
        Sat, 27 Nov 2004 17:55:07 -0800 (PST)
Received: by 10.38.75.21 with HTTP; Sat, 27 Nov 2004 17:55:07 -0800 (PST)
Message-ID: <8837fb7704112717554eaf0d2e@mail.gmail.com>
Date: Sat, 27 Nov 2004 17:55:07 -0800
From: John Wang <john.wang@gmail.com>
Reply-To: John Wang <john.wang@gmail.com>
To: lucene-user@jakarta.apache.org
Subject: Re: URGENT: Help indexing large document set
In-Reply-To: <E3381E0825F1954D953A4E347017BB1C02A452CD@reh001-1.REX001.ExchangeByRegister.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <E3381E0825F1954D953A4E347017BB1C02A452CD@reh001-1.REX001.ExchangeByRegister.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Chuck:

     Thanks for your help and the info.

     By some experimentation, I found when calling
FSWriter.addIndex(ramDirectory), it is actually performing a merge
with the existing index. So doing 2000 batches of 500, when the index
grows after each batch, the time to do the merge increases.

     I guess in this implementation, doing it this way is not optimal.

Thanks

-John


On Sat, 27 Nov 2004 13:14:31 -0800, Chuck Williams <chuck@manawiz.com> wrote:
> Hi John,
> 
> I don't use a RamDirectory and so don't have the answer for you.  There
> have been a number of messages about RamDirectory performance on
> lucene-user, including some reported benchmarks.  Some people have
> reported a significant benefit from RamDirectory's, but most others have
> seen little or no benefit.  I'm not sure which factors indicate the
> nature or magnitude of impact.   You sent the message below just to me
> -- you might want to post a question on lucene-user.
> 
> I've included a couple messages below on the subject that I saved.
> 
> Chuck
> 
> Included messages:
> 
> -----Original Message-----
> From: Jonathan Hager [mailto:jhager@gmail.com]
> Sent: Wednesday, November 24, 2004 2:27 PM
> To: Lucene Users List
> Subject: Re: Index in RAM - is it realy worthy?
> 
> When comparing RAMDirectory and FSDirectory it is important to mention
> what OS you are using.  When using linux it will cache the most recent
> disk access in memory.  Here is a good article that describes its
> strategy: http://forums.gentoo.org/viewtopic.php?t=175419
> 
> The 2% difference you are seeing is the memory copy.  With other OSes
> you may see a speed up when using the RAMDirectory, because not all
> OSes contain a disk cache in memory and must access the disk to read
> the index.
> 
> Another consideration is there is currently a 2GB limitation with the
> size of the RAMDirectory.  Indexes over 2GB causes a overflow in the
> int used to create the buffer.  [see int len = (int) is.length(); in
> RamDirectory]
> 
> I ended up using RAM directory for a very different reason.  The index
> is 1 to 2MB and is rebuilt every few hours.  It takes 3 to 4 minutes
> to query the database and rebuild the index.  But the search should be
> available 100% of the time.  Since the index is so small I do the
> following:
> 
> on server startup:
> - look for semaphore, if it is there delete the index
> - if there is no index, build it to FSdirectory
> - load the index from FSDirectory into RAMDirectory
> 
> on reindex:
> - create semaphore
> - rebuild index to FSDirectory
> - delete semaphore
> - load index from FSDirecttory into RAMDirectory
> 
> to search:
> - search the RAMDirectory
> 
> RAMDirectory could be replaced by a regular FSDirectory, but it seemed
> silly to copy the index from disk to disk, when it ultimately needs to
> be in memory.
> 
> FSDirectory could be replaced by a RAMDirectory, but this means that
> it would take the server 3 to 4 minutes longer to startup every time.
> By persisting the index, this time would only be necessary if indexing
> was interrupted.
> 
> Jonathan
> 
> On Mon, 22 Nov 2004 12:39:07 -0800, Kevin A. Burton
> <burton@newsmonster.org> wrote:
> > Otis Gospodnetic wrote:
> >
> > >For the Lucene book I wrote some test cases that compare FSDirectory
> > >and RAMDirectory.  What I found was that with certain settings
> > >FSDirectory was almost as fast as RAMDirectory.  Personally, I would
> > >push FSDirectory and hope that the OS and the Filesystem do their
> share
> > >of work and caching for me before looking for ways to optimize my
> code.
> > >
> > >
> > Yes... I performed the same benchmark and in my situation RAMDirectory
> > for searches was about 2% slower.
> >
> > I'm willing to bet that it has to do with the fact that its a
> Hashtable
> > and not a HashMap (which isn't synchronized).
> >
> > Also adding a constructor for the term size could make loading a
> > RAMDirectory faster since you could prevent rehash.
> >
> > If you're on a modern machine your filesystme cache will end up
> > buffering your disk anyway which I'm sure was happening in my
> situation.
> >
> > Kevin
> >
> > --
> >
> > Use Rojo (RSS/Atom aggregator).  Visit http://rojo.com. Ask me for an
> > invite!  Also see irc.freenode.net #rojo if you want to chat.
> >
> > Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html
> >
> > If you're interested in RSS, Weblogs, Social Networking, etc... then
> you
> > should work for Rojo!  If you recommend someone and we hire them
> you'll
> > get a free iPod!
> >
> > Kevin A. Burton, Location - San Francisco, CA
> >        AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> > GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> 
> 
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> -----Original Message-----
> From: John Wang [mailto:john.wang@gmail.com]
> Sent: Monday, November 22, 2004 12:35 PM
> To: Lucene Users List
> Subject: Re: Index in RAM - is it realy worthy?
> 
> In my test, I have 12900 documents. Each document is small, a few
> discreet fields (KeyWord type) and 1 Text field containing only 1
> sentence.
> 
> with both mergeFactor and maxMergeDocs being 1000
> 
> using RamDirectory, the indexing job took about 9.2 seconds
> 
> not using RamDirectory, the indexing job took about 122 seconds.
> 
> I am not calling optimize.
> 
> This is on windows Xp running java 1.5.
> 
> Is there something very wrong or different in my setup to cause such a
> big different?
> 
> Thanks
> 
> -John
> 
> On Mon, 22 Nov 2004 09:23:40 -0800 (PST), Otis Gospodnetic
> <otis_gospodnetic@yahoo.com> wrote:
> > For the Lucene book I wrote some test cases that compare FSDirectory
> > and RAMDirectory.  What I found was that with certain settings
> > FSDirectory was almost as fast as RAMDirectory.  Personally, I would
> > push FSDirectory and hope that the OS and the Filesystem do their
> share
> > of work and caching for me before looking for ways to optimize my
> code.
> >
> > Otis
> >
> >
> >
> > --- iouli.golovatyi@group.novartis.com wrote:
> >
> > >
> > > I did following test:
> > > I created  the RAM folder on my Red Hat box and copied   c. 1Gb of
> > > indexes
> > > there.
> > > I expected the queries to run much quicker.
> > > In reality it was even sometimes slower(sic!)
> > >
> > > Lucene has it's own RAM disk functionality. If I implement it, would
> > > it
> > > bring any benefits?
> > >
> > > Thanks in advance
> > > J.
> >
> > ---------------------------------------------------------------------
> 
> 
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>  > -----Original Message-----
>  > From: John Wang [mailto:john.wang@gmail.com]
>  > Sent: Saturday, November 27, 2004 11:50 AM
>  > To: Chuck Williams
>  > Subject: Re: URGENT: Help indexing large document set
>  >
>  > I found the reason for the degredation. It is because I was writing
> to
>  > a RamDirectory and then adding to a FSWriter. I guess it makes sense
>  > since the addIndex call would slow down as the index grows.
>  >
>  > I guess it is not a good idea to use RamDirectory if there are many
>  > small batches. Are there some performace numbers that would tell me
>  > when to/not to use a RamDirectory?
>  >
>  > thanks
>  >
>  > -John
>  >
>  >
>  > On Wed, 24 Nov 2004 15:23:49 -0800, John Wang <john.wang@gmail.com>
>  > wrote:
>  > > Hi Chuck:
>  > >
>  > >      The reason I am not using localReader.delete(term) is because
> I
>  > > have some logic to check whether to delete the term based on a
> flag.
>  > >
>  > >      I am testing with the keys to be sorted.
>  > >
>  > >      I am not doing anything weird, just committing a batch of 500
>  > > documents to the index of 2000 batches. I don't what why it is
> having
>  > > this linear slow down...
>  > >
>  > >
>  > >
>  > > Thanks
>  > >
>  > > -John
>  > >
>  > > On Wed, 24 Nov 2004 12:32:52 -0800, Chuck Williams
> <chuck@manawiz.com>
>  > wrote:
>  > > > Does keyIter return the keys in sorted order?  This should
> reduce
>  > seeks,
>  > > > especially if the keys are dense.
>  > > >
>  > > > Also, you should be able to localReader.delete(term) instead of
>  > > > iterating over the docs (of which I presume there is only one
> doc
>  > since
>  > > > keys are unique).  This won't improve performance as
>  > > > IndexReader.delete(Term) does exactly what your code does, but
> it
>  > will
>  > > > be cleaner.
>  > > >
>  > > > A linear slowdown with number of docs doesn't make sense, so
>  > something
>  > > > else must be wrong.  I'm not sure what the default buffer size
> is
>  > (it
>  > > > appears it used to be 128 but is dynamic now I think).  You
> might
>  > find
>  > > > the slowdown stops after a certain point, especially if you
> increase
>  > > > your batch size.
>  > > >
>  > > >
>  > > >
>  > > > Chuck
>  > > >
>  > > >  > -----Original Message-----
>  > > >  > From: John Wang [mailto:john.wang@gmail.com]
>  > > >  > Sent: Wednesday, November 24, 2004 12:21 PM
>  > > >  > To: Lucene Users List
>  > > >  > Subject: Re: URGENT: Help indexing large document set
>  > > >  >
>  > > >  > Thanks Paul!
>  > > >  >
>  > > >  > Using your suggestion, I have changed the update check code
> to
>  > use
>  > > >  > only the indexReader:
>  > > >  >
>  > > >  > try {
>  > > >  >               localReader = IndexReader.open(path);
>  > > >  >
>  > > >  >               while (keyIter.hasNext()) {
>  > > >  >                 key = (String) keyIter.next();
>  > > >  >                 term = new Term("key", key);
>  > > >  >                 TermDocs tDocs = localReader.termDocs(term);
>  > > >  >                 if (tDocs != null) {
>  > > >  >                   try {
>  > > >  >                     while (tDocs.next()) {
>  > > >  >                       localReader.delete(tDocs.doc());
>  > > >  >                     }
>  > > >  >                   } finally {
>  > > >  >                     tDocs.close();
>  > > >  >                   }
>  > > >  >                 }
>  > > >  >               }
>  > > >  >             } finally {
>  > > >  >
>  > > >  >               if (localReader != null) {
>  > > >  >                 localReader.close();
>  > > >  >               }
>  > > >  >
>  > > >  >             }
>  > > >  >
>  > > >  >
>  > > >  > Unfortunately it didn't seem to make any dramatic difference.
>  > > >  >
>  > > >  > I also see the CPU is only 30-50% busy, so I am guessing it's
>  > > > spending
>  > > >  > a lot of time in IO. Anyway of making the CPU work harder?
>  > > >  >
>  > > >  > Is batch size of 500 too small for 1 million documents?
>  > > >  >
>  > > >  > Currently I am seeing a linear speed degredation of 0.3
>  > milliseconds
>  > > >  > per document.
>  > > >  >
>  > > >  > Thanks
>  > > >  >
>  > > >  > -John
>  > > >  >
>  > > >  >
>  > > >  > On Wed, 24 Nov 2004 09:05:39 +0100, Paul Elschot
>  > > >  > <paul.elschot@xs4all.nl> wrote:
>  > > >  > > On Wednesday 24 November 2004 00:37, John Wang wrote:
>  > > >  > >
>  > > >  > >
>  > > >  > > > Hi:
>  > > >  > > >
>  > > >  > > >    I am trying to index 1M documents, with batches of 500
>  > > > documents.
>  > > >  > > >
>  > > >  > > >    Each document has an unique text key, which is added
> as a
>  > > >  > > > Field.KeyWord(name,value).
>  > > >  > > >
>  > > >  > > >    For each batch of 500, I need to make sure I am not
> adding
>  > a
>  > > >  > > > document with a key that is already in the current index.
>  > > >  > > >
>  > > >  > > >   To do this, I am calling IndexSearcher.docFreq for each
>  > > > document
>  > > >  > and
>  > > >  > > > delete the document currently in the index with the same
> key:
>  > > >  > > >
>  > > >  > > >        while (keyIter.hasNext()) {
>  > > >  > > >             String objectID = (String) keyIter.next();
>  > > >  > > >             term = new Term("key", objectID);
>  > > >  > > >             int count = localSearcher.docFreq(term);
>  > > >  > >
>  > > >  > > To speed this up a bit make sure that the iterator gives
>  > > >  > > the terms in sorted order. I'd use an index reader instead
>  > > >  > > of a searcher, but that will probably not make a
> difference.
>  > > >  > >
>  > > >  > > Adding the documents can be done with multiple threads.
>  > > >  > > Last time I checked that, there was a moderate speed up
>  > > >  > > using three threads instead of one on a single CPU machine.
>  > > >  > > Tuning the values of minMergeDocs and maxMergeDocs
>  > > >  > > may also help to increase performance of adding documents.
>  > > >  > >
>  > > >  > > Regards,
>  > > >  > > Paul Elschot
>  > > >  > >
>  > > >  > >
>  > > >
> --------------------------------------------------------------------
>  > -
>  > > >  > >
>  > > >  > >
>  > > >  > > To unsubscribe, e-mail: lucene-user-
>  > unsubscribe@jakarta.apache.org
>  > > >  > > For additional commands, e-mail:
>  > > > lucene-user-help@jakarta.apache.org
>  > > >  > >
>  > > >  > >
>  > > >  >
>  > > >  >
>  > > >
> --------------------------------------------------------------------
>  > -
>  > > >
>  > > >
>  > > >  > To unsubscribe, e-mail: lucene-user-
>  > unsubscribe@jakarta.apache.org
>  > > >  > For additional commands, e-mail: lucene-user-
>  > help@jakarta.apache.org
>  > > >
>  > > >
>  > >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11512-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 28 02:01:31 2004
Return-Path: <lucene-user-return-11512-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 1223 invoked from network); 28 Nov 2004 02:01:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Nov 2004 02:01:30 -0000
Received: (qmail 73676 invoked by uid 500); 28 Nov 2004 02:01:28 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 73651 invoked by uid 500); 28 Nov 2004 02:01:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73637 invoked by uid 99); 28 Nov 2004 02:01:27 -0000
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from main.gmane.org (HELO main.gmane.org) (80.91.229.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sat, 27 Nov 2004 18:01:26 -0800
Received: from root by main.gmane.org with local (Exim 3.35 #1 (Debian))
	id 1CYENP-0002Ph-00
	for <lucene-user@jakarta.apache.org>; Sun, 28 Nov 2004 03:01:23 +0100
Received: from 203-173-16-142.dyn.iinet.net.au ([203.173.16.142])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Sun, 28 Nov 2004 03:01:23 +0100
Received: from peter by 203-173-16-142.dyn.iinet.net.au with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <lucene-user@jakarta.apache.org>; Sun, 28 Nov 2004 03:01:23 +0100
X-Injected-Via-Gmane: http://gmane.org/
To: lucene-user@jakarta.apache.org
From: Peter Becker <peter@peterbecker.de>
Subject: Re: Filters for Openoffice File Indexing available (Java)
Date: Sun, 28 Nov 2004 11:35:39 +1000
Lines: 23
Message-ID: <cobaf0$jfg$1@sea.gmane.org>
References: <418F4AAF.6060400@arrasz.de>
Mime-Version: 1.0
Content-Type: text/plain; charset=windows-1252; format=flowed
Content-Transfer-Encoding: 8bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: 203-173-16-142.dyn.iinet.net.au
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.7.3) Gecko/20040910
X-Accept-Language: en-us, en
In-Reply-To: <418F4AAF.6060400@arrasz.de>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Joachim Arrasz wrote:
> Hello List.
> 
> we have written an application which includes OpenOffice Integration 
> into an OpenSource CMS (OpenCms).
> 
> For this CMS there is a Lucene Integration available under sourceforge.
> 
> So now we are looking for search and index Filters for Lucene, that 
> were able to integrate out OpenOffice Files also into search result.
> 
> Is there any project or code available for doing this, or must we write 
> everything by ourself? Do anybody know good beginner Tutorials for doing 
> things like this?

We wrote somthing like that a while ago. It seems to work, although we 
did only some basic testing:

 
http://cvs.sourceforge.net/viewcvs.py/tockit/java/applications/docco/source/org/tockit/docco/documenthandler/OpenOfficeDocumentHandler.java?view=markup

HTH,
   Peter


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11513-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 28 17:31:27 2004
Return-Path: <lucene-user-return-11513-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83589 invoked from network); 28 Nov 2004 17:31:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Nov 2004 17:31:27 -0000
Received: (qmail 52313 invoked by uid 500); 28 Nov 2004 17:31:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52287 invoked by uid 500); 28 Nov 2004 17:31:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52273 invoked by uid 99); 28 Nov 2004 17:31:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.207 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.207)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 28 Nov 2004 09:31:14 -0800
Received: by rproxy.gmail.com with SMTP id 34so128135rns
        for <lucene-user@jakarta.apache.org>; Sun, 28 Nov 2004 09:31:12 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=nrSFWV5GJzDo7yfHhYwmimyLGxYs5CbiHyik8QhJt/YAJX6R1ZPzTzP+6tudxKBtItiRYkrER1CLtxMdwlcjjDIIQCHe4uUqftG/bgwhPzW+jecu5Hge2Km8UMVRZmuFW9hIMMAugj2ZAEm+VUFA6mLxMI4zKYdePtFGtOstXmQ=
Received: by 10.38.206.33 with SMTP id d33mr830228rng;
        Sun, 28 Nov 2004 09:31:12 -0800 (PST)
Received: by 10.38.179.80 with HTTP; Sun, 28 Nov 2004 09:31:11 -0800 (PST)
Message-ID: <dd2db8d004112809317aec96a@mail.gmail.com>
Date: Sun, 28 Nov 2004 12:31:11 -0500
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>, 
	Jonathan Hager <jhager@gmail.com>
Subject: Re: Index in RAM - is it realy worthy?
In-Reply-To: <836e9242041124142675866e03@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <20041122172340.25792.qmail@web12704.mail.yahoo.com>
	 <41A24E6B.8030807@newsmonster.org>
	 <836e9242041124142675866e03@mail.gmail.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

My indexes are stored on a NetApp filter via NFS.  The indexer process
updates the indexes over NFS.  I have multiple indexes.  My search
process determines if the nfs indexes have been updated, and if they
have, then loads the index into a RAMDirectory.   RAMDirectory is of
course much faster than searching over NFS.  This way, I can also have
multiple search servers running easily.  The drawback of course is
startup time.  It takes a few minutes to start each search server
because it has to load the data into memory.  RAMDirectory also seems
to be kind of memory inneficient, using a lot more memory than the
data actually consumes on disk.


On Wed, 24 Nov 2004 14:26:40 -0800, Jonathan Hager <jhager@gmail.com> wrote:
> When comparing RAMDirectory and FSDirectory it is important to mention
> what OS you are using.  When using linux it will cache the most recent
> disk access in memory.  Here is a good article that describes its
> strategy: http://forums.gentoo.org/viewtopic.php?t=175419
> 
> The 2% difference you are seeing is the memory copy.  With other OSes
> you may see a speed up when using the RAMDirectory, because not all
> OSes contain a disk cache in memory and must access the disk to read
> the index.
> 
> Another consideration is there is currently a 2GB limitation with the
> size of the RAMDirectory.  Indexes over 2GB causes a overflow in the
> int used to create the buffer.  [see int len = (int) is.length(); in
> RamDirectory]
> 
> I ended up using RAM directory for a very different reason.  The index
> is 1 to 2MB and is rebuilt every few hours.  It takes 3 to 4 minutes
> to query the database and rebuild the index.  But the search should be
> available 100% of the time.  Since the index is so small I do the
> following:
> 
> on server startup:
> - look for semaphore, if it is there delete the index
> - if there is no index, build it to FSdirectory
> - load the index from FSDirectory into RAMDirectory
> 
> on reindex:
> - create semaphore
> - rebuild index to FSDirectory
> - delete semaphore
> - load index from FSDirecttory into RAMDirectory
> 
> to search:
> - search the RAMDirectory
> 
> RAMDirectory could be replaced by a regular FSDirectory, but it seemed
> silly to copy the index from disk to disk, when it ultimately needs to
> be in memory.
> 
> FSDirectory could be replaced by a RAMDirectory, but this means that
> it would take the server 3 to 4 minutes longer to startup every time.
> By persisting the index, this time would only be necessary if indexing
> was interrupted.
> 
> Jonathan
> 
> On Mon, 22 Nov 2004 12:39:07 -0800, Kevin A. Burton
> 
> 
> <burton@newsmonster.org> wrote:
> > Otis Gospodnetic wrote:
> >
> > >For the Lucene book I wrote some test cases that compare FSDirectory
> > >and RAMDirectory.  What I found was that with certain settings
> > >FSDirectory was almost as fast as RAMDirectory.  Personally, I would
> > >push FSDirectory and hope that the OS and the Filesystem do their share
> > >of work and caching for me before looking for ways to optimize my code.
> > >
> > >
> > Yes... I performed the same benchmark and in my situation RAMDirectory
> > for searches was about 2% slower.
> >
> > I'm willing to bet that it has to do with the fact that its a Hashtable
> > and not a HashMap (which isn't synchronized).
> >
> > Also adding a constructor for the term size could make loading a
> > RAMDirectory faster since you could prevent rehash.
> >
> > If you're on a modern machine your filesystme cache will end up
> > buffering your disk anyway which I'm sure was happening in my situation.
> >
> > Kevin
> >
> > --
> >
> > Use Rojo (RSS/Atom aggregator).  Visit http://rojo.com. Ask me for an
> > invite!  Also see irc.freenode.net #rojo if you want to chat.
> >
> > Rojo is Hiring! - http://www.rojonetworks.com/JobsAtRojo.html
> >
> > If you're interested in RSS, Weblogs, Social Networking, etc... then you
> > should work for Rojo!  If you recommend someone and we hire them you'll
> > get a free iPod!
> >
> > Kevin A. Burton, Location - San Francisco, CA
> >        AIM/YIM - sfburtonator,  Web - http://peerfear.org/
> > GPG fingerprint: 5FB2 F3E2 760E 70A8 6174 D393 E84D 8D04 99F1 4412
> >
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11514-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Sun Nov 28 19:40:04 2004
Return-Path: <lucene-user-return-11514-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21212 invoked from network); 28 Nov 2004 19:40:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 28 Nov 2004 19:40:04 -0000
Received: (qmail 88409 invoked by uid 500); 28 Nov 2004 19:39:58 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 88386 invoked by uid 500); 28 Nov 2004 19:39:58 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 88371 invoked by uid 99); 28 Nov 2004 19:39:58 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web52405.mail.yahoo.com (HELO web52405.mail.yahoo.com) (206.190.39.113)
  by apache.org (qpsmtpd/0.28) with SMTP; Sun, 28 Nov 2004 11:39:57 -0800
Received: (qmail 15919 invoked by uid 60001); 28 Nov 2004 19:39:54 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=roe5mtHhKH5HUrsal1DT1FC3TjpG2kaaVAn8M1LFBq+/zXDbrRoM54lyU/o5GIH7Ntpn9y4LL0pZncN3LePpqwzTeNT2Lfx8jlNC1dLY5L+3ofpZGSIO9gGlunOhpKtz0x95Pq3JIKtNZSMiFJ4b+0hx22PlRWojsjWaw/t+FCQ=  ;
Message-ID: <20041128193954.15913.qmail@web52405.mail.yahoo.com>
Received: from [24.225.199.136] by web52405.mail.yahoo.com via HTTP; Sun, 28 Nov 2004 11:39:54 PST
Date: Sun, 28 Nov 2004 11:39:54 -0800 (PST)
From: Yonik Seeley <yseeley@yahoo.com>
Reply-To: yseeley@cs.stanford.edu
Subject: IndexWriter.addIndexes efficiency
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I'd like to use addIndexes(Directory[] dirs) to add
batches of documents to a main index.

My main problem is that the addIndexes()
implementation calls optimize() at the beginning and
the end.

Now, my main index will be ~25GB in size, so adding a
single document and then doing an optimize will mean
rewriting 25GB of files, right?  That sounds like it
is going to be too expensive to do often.

What I would really like is to be able to control more
explicitly when an optimize happens.  Could
addIndexes() be easily rewritten to just call
maybeMergeSegments()?

-Yonik




		
__________________________________ 
Do you Yahoo!? 
All your favorites on one personal page  Try My Yahoo!
http://my.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11515-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 29 02:08:46 2004
Return-Path: <lucene-user-return-11515-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 48405 invoked from network); 29 Nov 2004 02:08:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Nov 2004 02:08:46 -0000
Received: (qmail 13589 invoked by uid 500); 29 Nov 2004 02:08:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 13368 invoked by uid 500); 29 Nov 2004 02:08:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13343 invoked by uid 99); 29 Nov 2004 02:08:36 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from skipper.frogspace.net (HELO skipper.frogspace.net) (216.222.192.2)
  by apache.org (qpsmtpd/0.28) with ESMTP; Sun, 28 Nov 2004 18:08:35 -0800
Received: from [207.7.199.217] (helo=aroushlt)
	by skipper.frogspace.net with esmtp (Exim 4.32)
	id 1CYaxt-0002gQ-A9; Sun, 28 Nov 2004 18:08:34 -0800
From: "George Aroush" <george@aroush.net>
To: <lucene-dev@jakarta.apache.org>,
	<lucene-user@jakarta.apache.org>
Subject: dotLucene (port of Jakarta Lucene to C#)
Date: Sun, 28 Nov 2004 21:08:30 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
Thread-Index: AcTVuFIygrtZ8D6SRAeQOYbZ2Y7D9Q==
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-SA-Exim-Connect-IP: 207.7.199.217
X-SA-Exim-Mail-From: george@aroush.net
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi folks,

I am please to announce the availability of dotLucene 1.4.0 RC1.  dotLucene
is a complete port of Jakarta Lucene to C#.  The port is almost a
line-by-line port and it includes the demos as well as all the JUnit tests.
An index created by dotLucene is cross compatible with Jakarta Lucene and
via verse.

Please visit http://sourceforge.net/projects/dotlucene/ to learn more about
dotLucene and to download the source code.

Best regards,

-- George Aroush


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11516-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 29 05:41:41 2004
Return-Path: <lucene-user-return-11516-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 34180 invoked from network); 29 Nov 2004 05:41:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Nov 2004 05:41:41 -0000
Received: (qmail 9410 invoked by uid 500); 29 Nov 2004 05:41:39 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 8591 invoked by uid 500); 29 Nov 2004 05:41:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 8578 invoked by uid 99); 29 Nov 2004 05:41:37 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=SUBJ_ALL_CAPS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: error (hermes.apache.org: local policy)
Received: from Unknown (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Sun, 28 Nov 2004 21:41:35 -0800
Received: from karthik ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I7XF5000.8O8 for <lucene-user@jakarta.apache.org>; Mon,
          29 Nov 2004 11:25:48 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: UNIQUE FILE SEARCH
Date: Mon, 29 Nov 2004 11:20:22 +0530
Message-ID: <LOEGLEEGOAKBOLAJCCKIIECDCDAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



Hi Guy's


Apologies.............



I  have a Index with one of the fields   is   FieldType  'KeyWord' .

To this Field I add  UNIQUE  File Names .



On Search How can I display All the File names  with out  any SearchKeyword
?.



Thx in Advance.




      WITH WARM REGARDS
      HAVE A NICE DAY
      [ N.S.KARTHIK]




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11517-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 29 12:22:22 2004
Return-Path: <lucene-user-return-11517-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 65490 invoked from network); 29 Nov 2004 12:22:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Nov 2004 12:22:21 -0000
Received: (qmail 35438 invoked by uid 500); 29 Nov 2004 12:21:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 35347 invoked by uid 500); 29 Nov 2004 12:21:01 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35256 invoked by uid 99); 29 Nov 2004 12:20:58 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from gwserv161.interdoms.net (HELO gwserv161.interdoms.net) (69.65.18.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 29 Nov 2004 04:20:56 -0800
Received: from ws97.brusselsvillage.be ([194.183.227.97] helo=attentio.com)
	by gwserv161.interdoms.net with esmtpa (Exim 4.43)
	id 1CYkWT-0008Lf-KG
	for lucene-user@jakarta.apache.org; Mon, 29 Nov 2004 13:20:53 +0100
Message-ID: <41AB1423.6050905@attentio.com>
Date: Mon, 29 Nov 2004 13:20:51 +0100
From: Roxana Angheluta <roxana@attentio.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040114
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  lucene-user@jakarta.apache.org
Subject: similarity matrix
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - gwserv161.interdoms.net
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - attentio.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Dear all,

I would like to use Lucene to get the similarity matrix from a 
collection of documents.
The similarity function used should be something based on tf-idf.

What would be an efficient way to do this?

Thanks,
roxana

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11518-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 29 13:37:38 2004
Return-Path: <lucene-user-return-11518-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 11621 invoked from network); 29 Nov 2004 13:37:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Nov 2004 13:37:37 -0000
Received: (qmail 85264 invoked by uid 500); 29 Nov 2004 13:36:21 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 84950 invoked by uid 500); 29 Nov 2004 13:36:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 84810 invoked by uid 99); 29 Nov 2004 13:36:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from smtp-vbr6.xs4all.nl (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 29 Nov 2004 05:36:12 -0800
Received: from p2400.twansoft.com (a80-126-165-160.adsl.xs4all.nl [80.126.165.160])
	(authenticated bits=0)
	by smtp-vbr6.xs4all.nl (8.12.11/8.12.11) with ESMTP id iATDa7Kc005699
	for <lucene-user@jakarta.apache.org>; Mon, 29 Nov 2004 14:36:07 +0100 (CET)
	(envelope-from twan@twansoft.com)
Message-Id: <6.1.2.0.2.20041129143853.06668fe0@pop.xs4all.nl>
X-Sender: twanko@pop.xs4all.nl
X-Mailer: QUALCOMM Windows Eudora Version 6.1.2.0
Date: Mon, 29 Nov 2004 14:39:49 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Twan Kogels <twan@twansoft.com>
Subject: Re: Dutch Analyzer dictionary format?
In-Reply-To: <20041126170213.67122.qmail@web12703.mail.yahoo.com>
References: <6.1.2.0.2.20041126100835.0666ca30@pop.xs4all.nl>
 <20041126170213.67122.qmail@web12703.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello Otis,

Thanks for the reply. I just tryed it and it works perfect ;-)

Cheers,
Twan

At 18:02 26-11-2004, you wrote:
>Judging from everything you've said, the answer is yes.  I don't use
>Dutch Analyzer, so I'm not 100% sure about this, but it sounds easy
>enough to try.
>
>Otis
>
>--- Twan Kogels <twan@twansoft.com> wrote:
>
> > Hello all,
> >
> > I'm using lucene to search through a couple of documents to find
> > interesting documents. Most documents are in Dutch language. I saw
> > that the
> > default snowball stemmer wasn't doing well on text written in a
> > foreign
> > language. Lucky i found a Dutch text analyzer in de lucene sandbox
> > project.
> >
> > I've read the javadoc and found out it needs a stemdictionary. You
> > can load
> > this dictionary with the following function:
> > DutchAnalyzer.setStemDictionary(File f)
> >
> > The format needs to be a tab separator list (word [tab] stem).
> >
> > To be sure i do everything correctly i've got a question about the
> > dictonary:
> > Can i just get:
> > <http://snowball.tartarus.org/dutch/diffs.txt>
> > and convert it to a tab separated list and then "feed" it to the
> > setStemDictionary() function?
> >
> > Kind regards,
> > Twan Kogels
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> > For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> >
> >
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11519-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 29 14:52:19 2004
Return-Path: <lucene-user-return-11519-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 76492 invoked from network); 29 Nov 2004 14:52:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Nov 2004 14:52:19 -0000
Received: (qmail 53547 invoked by uid 500); 29 Nov 2004 14:52:03 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 53517 invoked by uid 500); 29 Nov 2004 14:52:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 53500 invoked by uid 99); 29 Nov 2004 14:52:02 -0000
X-ASF-Spam-Status: No, hits=0.6 required=10.0
	tests=HTML_20_30,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.softprosys.com (HELO sakthi.softprosys.com) (203.200.217.40)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 29 Nov 2004 06:52:02 -0800
Received: by sakthi.softprosys.com (Postfix, from userid 517)
	id 4E16C66FE2; Mon, 29 Nov 2004 20:13:23 +0530 (IST)
Received: from santoshkumar (unknown [192.168.1.157])by sakthi.softprosys.com (Postfix) with SMTP id 0161666FC9for <lucene-user@jakarta.apache.org>; Mon, 29 Nov 2004 20:13:22 +0530 (IST)
Message-ID: <001a01c4d622$9edb70b0$9d01a8c0@sprosys.com>
From: "Santosh" <santosh.s@softprosys.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: Help for alternatives for search words
Date: Mon, 29 Nov 2004 20:19:25 +0530
MIME-Version: 1.0
Content-Type: multipart/alternative;boundary="----=_NextPart_000_0017_01C4D650.B88A0FC0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2600.0000
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0017_01C4D650.B88A0FC0
Content-Type: text/plain;charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

I am using lucene for searching. It is working fine but I have a problem =
with alternate words.If I am searching for "fooddy" the lucene will give =
the result for "food" also .

how can I trace these alternate word "foam" in these documents. How =
lucene will support this feature? how can I get alternate words list. I =
need three alternate words for each search word. when each time a user =
enters roam I need to show "are you searching for ?" (food,foods,foody)  =
=20

-----------------------SOFTPRO DISCLAIMER------------------------------

Information contained in this E-MAIL and any attachments are
confidential being  proprietary to SOFTPRO SYSTEMS  is 'privileged'
and 'confidential'.

If you are not an intended or authorised recipient of this E-MAIL or
have received it in error, You are notified that any use, copying or
dissemination  of the information contained in this E-MAIL in any
manner whatsoever is strictly prohibited. Please delete it immediately
and notify the sender by E-MAIL.

In such a case reading, reproducing, printing or further dissemination
of this E-MAIL is strictly prohibited and may be unlawful.

SOFTPRO SYSYTEMS does not REPRESENT or WARRANT that an attachment
hereto is free from computer viruses or other defects. 

The opinions expressed in this E-MAIL and any ATTACHEMENTS may be
those of the author and are not necessarily those of SOFTPRO SYSTEMS.
------------------------------------------------------------------------

------=_NextPart_000_0017_01C4D650.B88A0FC0--


From lucene-user-return-11520-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 29 16:55:39 2004
Return-Path: <lucene-user-return-11520-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 57786 invoked from network); 29 Nov 2004 16:55:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Nov 2004 16:55:39 -0000
Received: (qmail 93941 invoked by uid 500); 29 Nov 2004 16:55:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 93917 invoked by uid 500); 29 Nov 2004 16:55:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 93903 invoked by uid 99); 29 Nov 2004 16:55:30 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_MESSAGE,HTML_TEXT_AFTER_BODY,HTML_TEXT_AFTER_HTML
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ip-64-32-221-50.dsl.iad.megapath.net (HELO mail.lou.emergint.com) (64.32.221.50)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 29 Nov 2004 08:55:29 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.0.6249.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C4D634.39ADA0A7"
Subject: Removing unnecessary characters from Queuery Terms
Date: Mon, 29 Nov 2004 11:55:26 -0500
Message-ID: <8D7DE0C84F1D5149894354E754E6807E332653@mail.lou.emergint.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Removing unnecessary characters from Queuery Terms
Thread-Index: AcTWNDv/GaqTeqGBSR+LOMc0/oIFXQ==
From: "Kevin L. Cobb" <kevin.cobb@emergint.com>
To: <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C4D634.39ADA0A7
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

I am parsing very large files with "search terms" that will be submitted
to a Lucene Index. My current problem is that some of the terms have
some "special" characters in them that blow up when the phrase is
parsed. An example would be "My Search Phrase (alternate".  I won't be
adding any special Booleans or Clauses around the text. =20

=20

My basic line of code that build the Query object is ...

Query query =3D MultiFieldQueryParser.parse(term.toLowerCase(), fields,
new StandardAnalyzer());

=20

Thanks in advance for any input.=20

=20

KLCobb

=20


------_=_NextPart_001_01C4D634.39ADA0A7--

From lucene-user-return-11521-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 29 18:55:58 2004
Return-Path: <lucene-user-return-11521-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 36230 invoked from network); 29 Nov 2004 18:55:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Nov 2004 18:55:57 -0000
Received: (qmail 20321 invoked by uid 500); 29 Nov 2004 18:54:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 20186 invoked by uid 500); 29 Nov 2004 18:54:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 20113 invoked by uid 99); 29 Nov 2004 18:54:14 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from postfix4-1.free.fr (HELO postfix4-1.free.fr) (213.228.0.62)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 29 Nov 2004 10:54:08 -0800
Received: from jpaul.libertysurf.fr (unknown [81.56.186.208])
	by postfix4-1.free.fr (Postfix) with ESMTP id AD4991F30FD
	for <lucene-user@jakarta.apache.org>; Mon, 29 Nov 2004 19:53:53 +0100 (CET)
Message-Id: <6.1.2.0.2.20041129195330.033247d0@pop.tiscali.fr>
X-Sender: jgen0229_1_lsurf@pop.tiscali.fr
X-Mailer: QUALCOMM Windows Eudora Version 6.1.2.0
Date: Mon, 29 Nov 2004 19:53:58 +0100
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
From: Genty Jean-Paul <gentyjp@libertysurf.fr>
Subject: Re: Zilverline Search Engine version 1.0-final released
In-Reply-To: <41A8F0C2.8090700@zilverline.org>
References: <41A8F0C2.8090700@zilverline.org>
Mime-Version: 1.0
Content-Type: text/plain; charset="us-ascii"; format=flowed
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Congratulations !!!

At 22:25 27/11/2004, you wrote:
>All,
>
>I've just released Zilverline version 1.0.
>
>New features include incremental indexing and scheduling of indexing
>proces, as well as a few minor updates.
>
>The source will be made available as well very soon.
>
>Zilverline is protected by a Collaborative Source License. You can read
>more on this type of licensing at http://www.zilverline.org
>
>Zilverline is a search engine based on lucene that's ready to
>roll, and can be simply dropped in a Servlet Engine. It runs out of the
>box, and supports PDF, WORD, HTM, TXT, RTF and CHM, and can  index zip,
>rar, and many other formats. Both on Windows and Linux.
>
>Zilverline supports plugins. You can create your own extractors
>for various file formats. I've provided Extractors for RTF, Text, PDF,
>Word, and HTML.
>
>Zilverline supports collections. A collection is a set of files and
>directories in a directory. A collection can be indexed, and searched.
>The results of the search can be retrieved from local disk or remotely,
>if you run a webserver on your machine. Files inside zip, rar and chm
>files are extracted, indexed and can be cached. The cache can be mapped
>to sit behind your webserver as well.
>
>It's also possible to specify your own handlers for archives. Say you
>have a RAR archive, and you have a program on your system that can
>extract the content from it, then you can specify that Zilverline should
>use this program.
>
>
>Please take look at http://www.zilverline.org, and have a swing at it.
>
>cheers,
>
>   Michael Franken
>
>
>
>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11522-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 29 20:19:31 2004
Return-Path: <lucene-user-return-11522-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 93212 invoked from network); 29 Nov 2004 20:19:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Nov 2004 20:19:30 -0000
Received: (qmail 72808 invoked by uid 500); 29 Nov 2004 20:18:35 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 72764 invoked by uid 500); 29 Nov 2004 20:18:35 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 72734 invoked by uid 99); 29 Nov 2004 20:18:34 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.on-net.net (HELO sam.on-net.net) (204.117.190.8)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 29 Nov 2004 12:18:29 -0800
Received: from [192.168.1.1] (adsl-68-251-2-113.dsl.ipltin.ameritech.net [68.251.2.113])
	(authenticated bits=0)
	by sam.on-net.net (8.12.10/8.12.10) with ESMTP id iATKI0rW026325
	for <lucene-user@jakarta.apache.org>; Mon, 29 Nov 2004 15:18:01 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
Content-Transfer-Encoding: 7bit
Message-Id: <CB456B6E-4243-11D9-805D-000A95A83378@base2inc.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: Lucene Users List <lucene-user@jakarta.apache.org>
From: Frank Morton <fmorton@base2inc.com>
Subject: boosting challenge
Date: Mon, 29 Nov 2004 15:18:12 -0500
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

I have an index of restaurants with two fields. The "name" of the 
restaurant and a "description".

I would like to search for the word "bob" in both fields, but if it 
occurs in the "name", it would score higher. So, if "Bob Evans" is the 
name of the restaurant, but other restaurants refer to "Bob" in the 
description, the restaurant "Bob Evans" would score highest, but the 
others would also match the query.

I thought you could boost the term with a query like:

name:bob^4 description:bob

and it would boost the word bob if found in the "name" property, but 
this is not working for me. I get  the exact same results using the 
above query and a simple "bob" query.

I am using lucene-1.4-final.jar.

I am using the PorterStemAnalyzer

Am I missing something. Lucene seems very capable,  otherwise.

Thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11523-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 29 20:36:54 2004
Return-Path: <lucene-user-return-11523-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9416 invoked from network); 29 Nov 2004 20:36:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Nov 2004 20:36:54 -0000
Received: (qmail 15816 invoked by uid 500); 29 Nov 2004 20:36:42 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 15783 invoked by uid 500); 29 Nov 2004 20:36:41 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 15767 invoked by uid 99); 29 Nov 2004 20:36:41 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web12705.mail.yahoo.com (HELO web12705.mail.yahoo.com) (216.136.173.242)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 29 Nov 2004 12:36:39 -0800
Received: (qmail 25712 invoked by uid 60001); 29 Nov 2004 20:36:37 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=AwaTZaKFaEkid7Rgj5P7Fj5GV8HT3pap4x48qzJr+xZexNaGdJkrcLNtQkA7OzQSRrOxrElXlnRb8izOotfeYhazsOvy9sGbUClcy5nwQHZHQFsaTpM813Ct+oVR1ZTg/y1S0lCZfGBMbDjRa4ew92mqU1mHpno8pTFaeOljP0g=  ;
Message-ID: <20041129203637.25710.qmail@web12705.mail.yahoo.com>
Received: from [216.194.17.194] by web12705.mail.yahoo.com via HTTP; Mon, 29 Nov 2004 12:36:37 PST
Date: Mon, 29 Nov 2004 12:36:37 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: boosting challenge
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <CB456B6E-4243-11D9-805D-000A95A83378@base2inc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Try 4.0 instead of 4.  That may be correct syntax (don't have
QueryParser source to check), because the code takes boosts as float
type values.

Otis

--- Frank Morton <fmorton@base2inc.com> wrote:

> I have an index of restaurants with two fields. The "name" of the 
> restaurant and a "description".
> 
> I would like to search for the word "bob" in both fields, but if it 
> occurs in the "name", it would score higher. So, if "Bob Evans" is
> the 
> name of the restaurant, but other restaurants refer to "Bob" in the 
> description, the restaurant "Bob Evans" would score highest, but the 
> others would also match the query.
> 
> I thought you could boost the term with a query like:
> 
> name:bob^4 description:bob
> 
> and it would boost the word bob if found in the "name" property, but 
> this is not working for me. I get  the exact same results using the 
> above query and a simple "bob" query.
> 
> I am using lucene-1.4-final.jar.
> 
> I am using the PorterStemAnalyzer
> 
> Am I missing something. Lucene seems very capable,  otherwise.
> 
> Thanks.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11524-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 29 20:49:40 2004
Return-Path: <lucene-user-return-11524-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 16672 invoked from network); 29 Nov 2004 20:49:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Nov 2004 20:49:39 -0000
Received: (qmail 48108 invoked by uid 500); 29 Nov 2004 20:49:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 48067 invoked by uid 500); 29 Nov 2004 20:49:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47902 invoked by uid 99); 29 Nov 2004 20:49:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.on-net.net (HELO sam.on-net.net) (204.117.190.8)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 29 Nov 2004 12:49:12 -0800
Received: from [192.168.1.1] (adsl-68-251-2-113.dsl.ipltin.ameritech.net [68.251.2.113])
	(authenticated bits=0)
	by sam.on-net.net (8.12.10/8.12.10) with ESMTP id iATKmqrW001197
	for <lucene-user@jakarta.apache.org>; Mon, 29 Nov 2004 15:48:53 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <20041129203637.25710.qmail@web12705.mail.yahoo.com>
References: <20041129203637.25710.qmail@web12705.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <1B22202F-4248-11D9-805D-000A95A83378@base2inc.com>
Content-Transfer-Encoding: 7bit
From: Frank Morton <fmorton@base2inc.com>
Subject: Re: boosting challenge
Date: Mon, 29 Nov 2004 15:49:04 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanks for the response.  Using 4.0 did not work either.

Additionally, I have also tried Field.setBoost(4.0) on the "name" 
field. That didn't work either.

Still perplexed....I assume people are using boosting with 1.4 
successfully.


On Nov 29, 2004, at 3:36 PM, Otis Gospodnetic wrote:

> Try 4.0 instead of 4.  That may be correct syntax (don't have
> QueryParser source to check), because the code takes boosts as float
> type values.
>
> Otis
>
> --- Frank Morton <fmorton@base2inc.com> wrote:
>
>> I have an index of restaurants with two fields. The "name" of the
>> restaurant and a "description".
>>
>> I would like to search for the word "bob" in both fields, but if it
>> occurs in the "name", it would score higher. So, if "Bob Evans" is
>> the
>> name of the restaurant, but other restaurants refer to "Bob" in the
>> description, the restaurant "Bob Evans" would score highest, but the
>> others would also match the query.
>>
>> I thought you could boost the term with a query like:
>>
>> name:bob^4 description:bob
>>
>> and it would boost the word bob if found in the "name" property, but
>> this is not working for me. I get  the exact same results using the
>> above query and a simple "bob" query.
>>
>> I am using lucene-1.4-final.jar.
>>
>> I am using the PorterStemAnalyzer
>>
>> Am I missing something. Lucene seems very capable,  otherwise.
>>
>> Thanks.
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11525-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 29 20:52:15 2004
Return-Path: <lucene-user-return-11525-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21174 invoked from network); 29 Nov 2004 20:52:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Nov 2004 20:52:15 -0000
Received: (qmail 52581 invoked by uid 500); 29 Nov 2004 20:52:02 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 52551 invoked by uid 500); 29 Nov 2004 20:52:02 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 52532 invoked by uid 99); 29 Nov 2004 20:52:01 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from reh001-1.rex001.exchangebyregister.com (HELO reh001-1.REX001.ExchangeByRegister.com) (64.78.19.14)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 29 Nov 2004 12:52:00 -0800
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: RE: boosting challenge
Date: Mon, 29 Nov 2004 12:51:57 -0800
Message-ID: <E3381E0825F1954D953A4E347017BB1C02A45578@reh001-1.REX001.ExchangeByRegister.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: boosting challenge
Thread-Index: AcTWVPA4+IfovJUNRSajTNDyjBxZNwAABP+g
From: "Chuck Williams" <chuck@manawiz.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Try the explain() capability to see what factors are influencing the
order of your results.  Probably these other factors are overwhelming
your boost.  I had similar problems and resolved them by tweaking these
other contributions, especially idf.  You can do that in a custom
Similarity.

Chuck

  > -----Original Message-----
  > From: Frank Morton [mailto:fmorton@base2inc.com]
  > Sent: Monday, November 29, 2004 12:49 PM
  > To: Lucene Users List
  > Subject: Re: boosting challenge
  >=20
  > Thanks for the response.  Using 4.0 did not work either.
  >=20
  > Additionally, I have also tried Field.setBoost(4.0) on the "name"
  > field. That didn't work either.
  >=20
  > Still perplexed....I assume people are using boosting with 1.4
  > successfully.
  >=20
  >=20
  > On Nov 29, 2004, at 3:36 PM, Otis Gospodnetic wrote:
  >=20
  > > Try 4.0 instead of 4.  That may be correct syntax (don't have
  > > QueryParser source to check), because the code takes boosts as
float
  > > type values.
  > >
  > > Otis
  > >
  > > --- Frank Morton <fmorton@base2inc.com> wrote:
  > >
  > >> I have an index of restaurants with two fields. The "name" of the
  > >> restaurant and a "description".
  > >>
  > >> I would like to search for the word "bob" in both fields, but if
it
  > >> occurs in the "name", it would score higher. So, if "Bob Evans"
is
  > >> the
  > >> name of the restaurant, but other restaurants refer to "Bob" in
the
  > >> description, the restaurant "Bob Evans" would score highest, but
the
  > >> others would also match the query.
  > >>
  > >> I thought you could boost the term with a query like:
  > >>
  > >> name:bob^4 description:bob
  > >>
  > >> and it would boost the word bob if found in the "name" property,
but
  > >> this is not working for me. I get  the exact same results using
the
  > >> above query and a simple "bob" query.
  > >>
  > >> I am using lucene-1.4-final.jar.
  > >>
  > >> I am using the PorterStemAnalyzer
  > >>
  > >> Am I missing something. Lucene seems very capable,  otherwise.
  > >>
  > >> Thanks.
  > >>
  > >>
  > >>
---------------------------------------------------------------------
  > >> To unsubscribe, e-mail:
lucene-user-unsubscribe@jakarta.apache.org
  > >> For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
  > >>
  > >>
  > >
  > >
  > >
---------------------------------------------------------------------
  > > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > > For additional commands, e-mail:
lucene-user-help@jakarta.apache.org
  > >
  >=20
  >=20
  >
---------------------------------------------------------------------
  > To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
  > For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11526-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Mon Nov 29 21:08:19 2004
Return-Path: <lucene-user-return-11526-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 29903 invoked from network); 29 Nov 2004 21:08:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 29 Nov 2004 21:08:19 -0000
Received: (qmail 94478 invoked by uid 500); 29 Nov 2004 21:08:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 94456 invoked by uid 500); 29 Nov 2004 21:08:10 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94443 invoked by uid 99); 29 Nov 2004 21:08:10 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.on-net.net (HELO sam.on-net.net) (204.117.190.8)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 29 Nov 2004 13:08:08 -0800
Received: from [192.168.1.1] (adsl-68-251-2-113.dsl.ipltin.ameritech.net [68.251.2.113])
	(authenticated bits=0)
	by sam.on-net.net (8.12.10/8.12.10) with ESMTP id iATL7prW004257
	for <lucene-user@jakarta.apache.org>; Mon, 29 Nov 2004 16:07:51 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <E3381E0825F1954D953A4E347017BB1C02A45578@reh001-1.REX001.ExchangeByRegister.com>
References: <E3381E0825F1954D953A4E347017BB1C02A45578@reh001-1.REX001.ExchangeByRegister.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <C08C258E-424A-11D9-805D-000A95A83378@base2inc.com>
Content-Transfer-Encoding: 7bit
From: Frank Morton <fmorton@base2inc.com>
Subject: Re: boosting challenge
Date: Mon, 29 Nov 2004 16:08:00 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Apologies to all. Worse than RTFM. A post-sorting was being done to the 
search results, alphabetizing by name. Doh...

On Nov 29, 2004, at 3:51 PM, Chuck Williams wrote:

> Try the explain() capability to see what factors are influencing the
> order of your results.  Probably these other factors are overwhelming
> your boost.  I had similar problems and resolved them by tweaking these
> other contributions, especially idf.  You can do that in a custom
> Similarity.
>
> Chuck
>
>> -----Original Message-----
>> From: Frank Morton [mailto:fmorton@base2inc.com]
>> Sent: Monday, November 29, 2004 12:49 PM
>> To: Lucene Users List
>> Subject: Re: boosting challenge
>>
>> Thanks for the response.  Using 4.0 did not work either.
>>
>> Additionally, I have also tried Field.setBoost(4.0) on the "name"
>> field. That didn't work either.
>>
>> Still perplexed....I assume people are using boosting with 1.4
>> successfully.
>>
>>
>> On Nov 29, 2004, at 3:36 PM, Otis Gospodnetic wrote:
>>
>>> Try 4.0 instead of 4.  That may be correct syntax (don't have
>>> QueryParser source to check), because the code takes boosts as
> float
>>> type values.
>>>
>>> Otis
>>>
>>> --- Frank Morton <fmorton@base2inc.com> wrote:
>>>
>>>> I have an index of restaurants with two fields. The "name" of the
>>>> restaurant and a "description".
>>>>
>>>> I would like to search for the word "bob" in both fields, but if
> it
>>>> occurs in the "name", it would score higher. So, if "Bob Evans"
> is
>>>> the
>>>> name of the restaurant, but other restaurants refer to "Bob" in
> the
>>>> description, the restaurant "Bob Evans" would score highest, but
> the
>>>> others would also match the query.
>>>>
>>>> I thought you could boost the term with a query like:
>>>>
>>>> name:bob^4 description:bob
>>>>
>>>> and it would boost the word bob if found in the "name" property,
> but
>>>> this is not working for me. I get  the exact same results using
> the
>>>> above query and a simple "bob" query.
>>>>
>>>> I am using lucene-1.4-final.jar.
>>>>
>>>> I am using the PorterStemAnalyzer
>>>>
>>>> Am I missing something. Lucene seems very capable,  otherwise.
>>>>
>>>> Thanks.
>>>>
>>>>
>>>>
> ---------------------------------------------------------------------
>>>> To unsubscribe, e-mail:
> lucene-user-unsubscribe@jakarta.apache.org
>>>> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
>>>>
>>>>
>>>
>>>
>>>
> ---------------------------------------------------------------------
>>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>>> For additional commands, e-mail:
> lucene-user-help@jakarta.apache.org
>>>
>>
>>
>>
> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11527-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 00:29:11 2004
Return-Path: <lucene-user-return-11527-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 26144 invoked from network); 30 Nov 2004 00:29:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 00:29:11 -0000
Received: (qmail 13617 invoked by uid 500); 30 Nov 2004 00:29:04 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 13595 invoked by uid 500); 30 Nov 2004 00:29:03 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 13581 invoked by uid 99); 30 Nov 2004 00:29:03 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from anchor-post-30.mail.demon.net (HELO anchor-post-30.mail.demon.net) (194.217.242.88)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 29 Nov 2004 16:29:02 -0800
Received: from peterpi.demon.co.uk ([80.176.85.36] helo=[10.0.0.3])
	by anchor-post-30.mail.demon.net with esmtp (Exim 4.42)
	id 1CYvt2-000HAN-1r
	for lucene-user@jakarta.apache.org; Tue, 30 Nov 2004 00:28:56 +0000
Message-ID: <41ABBEC7.7090901@semantico.com>
Date: Tue, 30 Nov 2004 00:28:55 +0000
From: Peter Pimley <ppimley@semantico.com>
User-Agent: Mozilla Thunderbird 0.8 (X11/20040926)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: boosting challenge
References: <E3381E0825F1954D953A4E347017BB1C02A45578@reh001-1.REX001.ExchangeByRegister.com> <C08C258E-424A-11D9-805D-000A95A83378@base2inc.com>
In-Reply-To: <C08C258E-424A-11D9-805D-000A95A83378@base2inc.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Frank Morton wrote:

> Apologies to all. Worse than RTFM. A post-sorting was being done to 
> the search results, alphabetizing by name. Doh...

I was going to say that I'm doing exactly what you describe with 
weighting one field more than the other and it works just fine.

Still, you've found the problem now ;)

Peter

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11528-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 04:20:48 2004
Return-Path: <lucene-user-return-11528-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 85623 invoked from network); 30 Nov 2004 04:20:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 04:20:48 -0000
Received: (qmail 58306 invoked by uid 500); 30 Nov 2004 04:20:40 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 58280 invoked by uid 500); 30 Nov 2004 04:20:39 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 58262 invoked by uid 99); 30 Nov 2004 04:20:39 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of venkatraju@gmail.com designates 64.233.184.192 as permitted sender)
Received: from wproxy.gmail.com (HELO wproxy.gmail.com) (64.233.184.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Mon, 29 Nov 2004 20:20:38 -0800
Received: by wproxy.gmail.com with SMTP id 68so790329wra
        for <lucene-user@jakarta.apache.org>; Mon, 29 Nov 2004 20:20:36 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding;
        b=eS5B5lFIPK7sFse7rUwbblix1DXkgRa0Z3oUMBP2C+hz6MiFjw1NcQ7HTSCjzuf/JkRTn+dyK80WG8FFGkI39ewxirm/fXzX2mWuMm2eUcmiBhPGGLDkqRZwy2P5xXg+oaggYP5YG693eIaowc/t/+TFl2dSpRPJtem8Xw2rosE=
Received: by 10.54.54.71 with SMTP id c71mr1656488wra;
        Mon, 29 Nov 2004 20:19:30 -0800 (PST)
Received: by 10.54.8.68 with HTTP; Mon, 29 Nov 2004 20:19:30 -0800 (PST)
Message-ID: <2fe5a4ca041129201953ac0176@mail.gmail.com>
Date: Tue, 30 Nov 2004 09:49:30 +0530
From: Venkatraju <venkatraju@gmail.com>
Reply-To: Venkatraju <venkatraju@gmail.com>
To: lucene-user <lucene-user@jakarta.apache.org>
Subject: Need for periodic full indexing?
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi,

I am using Lucene in a project that will have about 1000 new/updated documents
added everyday. The plan is to build a full index once and then
add/delete documents
incrementally multiple times a day (and optimize the index). Given
this, is there
a need to build the full index periodically, say once a month? Are there any
reasons to do this:
- will it improve performance in any way?
- is this good for stability - any problems like index corruption etc.?

Any thing else that may be of importance in such cases - would like to hear
from people using Lucene in such scenarios.

Regards,
Venkat

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11529-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 06:32:29 2004
Return-Path: <lucene-user-return-11529-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58249 invoked from network); 30 Nov 2004 06:32:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 06:32:29 -0000
Received: (qmail 76521 invoked by uid 500); 30 Nov 2004 06:32:20 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76500 invoked by uid 500); 30 Nov 2004 06:32:20 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76484 invoked by uid 99); 30 Nov 2004 06:32:19 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web12708.mail.yahoo.com (HELO web12708.mail.yahoo.com) (216.136.173.245)
  by apache.org (qpsmtpd/0.28) with SMTP; Mon, 29 Nov 2004 22:32:18 -0800
Received: (qmail 56128 invoked by uid 60001); 30 Nov 2004 06:32:16 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=I6e268Qi60UkRPj/Z532XsZLJ/e5MF6X/6FxNZx5nXqNX+p6PAmSutKUOJWoERkxRa4RsamG+6tXQxjCVobwUM4RYRP+3cul004pP8VjGUpcQ0U+n0M9oOfthVxsZ+UtNqdeRmxntnBI3bNbbgwKZCbdMsjgDksg1Tgo/vfZidU=  ;
Message-ID: <20041130063216.56126.qmail@web12708.mail.yahoo.com>
Received: from [69.201.130.149] by web12708.mail.yahoo.com via HTTP; Mon, 29 Nov 2004 22:32:16 PST
Date: Mon, 29 Nov 2004 22:32:16 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Need for periodic full indexing?
To: Lucene Users List <lucene-user@jakarta.apache.org>,
  Venkatraju <venkatraju@gmail.com>
In-Reply-To: <2fe5a4ca041129201953ac0176@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You won't need to reindex everything, unless you change something about
your indexing.  For instance, if you change your Analyzer, or boost
fields/documents during indexing.  You will want to optimize your index
once in a while, that's all.

Otis

--- Venkatraju <venkatraju@gmail.com> wrote:

> Hi,
> 
> I am using Lucene in a project that will have about 1000 new/updated
> documents
> added everyday. The plan is to build a full index once and then
> add/delete documents
> incrementally multiple times a day (and optimize the index). Given
> this, is there
> a need to build the full index periodically, say once a month? Are
> there any
> reasons to do this:
> - will it improve performance in any way?
> - is this good for stability - any problems like index corruption
> etc.?
> 
> Any thing else that may be of importance in such cases - would like
> to hear
> from people using Lucene in such scenarios.
> 
> Regards,
> Venkat
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11530-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 10:05:24 2004
Return-Path: <lucene-user-return-11530-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 95849 invoked from network); 30 Nov 2004 10:05:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 10:05:24 -0000
Received: (qmail 23189 invoked by uid 500); 30 Nov 2004 10:04:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23156 invoked by uid 500); 30 Nov 2004 10:04:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 23133 invoked by uid 99); 30 Nov 2004 10:04:52 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web21321.mail.yahoo.com (HELO web21321.mail.yahoo.com) (216.136.175.207)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 30 Nov 2004 02:04:49 -0800
Received: (qmail 16791 invoked by uid 60001); 30 Nov 2004 10:04:46 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=45oRFdnMPNMpYL89UbYgZYCyRZrfbQSUuX1n9iOwv2U9N3obymEdLtUKCOt/Vjg/aFOyPMtCpTsnwRzWzeoWW9NUhSwm0pbAKkomsAkO40BZBbrYYnDAfPwfgY4IwKuQyh88SSWk9EF3SvCQdZ3Z6v+kYBQOrg5llnp113SRngU=  ;
Message-ID: <20041130100446.16789.qmail@web21321.mail.yahoo.com>
Received: from [193.226.211.176] by web21321.mail.yahoo.com via HTTP; Tue, 30 Nov 2004 02:04:46 PST
Date: Tue, 30 Nov 2004 02:04:46 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: What is the best file system for Lucene?
To: lucene-user@jakarta.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi!

I'm testing Lucene 1.4.2 on two very different configs, but with the same index.
I'm very surprised by the results: Both systems are searching at about the same speed, but I'd
expect (and I really need) to run Lucene a lot faster on my stronger config.

Config #1 (a notebook):
WinXP Pro, NTFS, 1.8GHz Pentium-M, 768Megs memory, 7200RPM winchester

Config #2 (a desktop PC):
SuSE 9.1 Pro, resiefs, 3.0GHZ P4 HT (virtually two 3.0GHz P4s), 3GByte RAM, 15000RPM U320 SCSI
winchester

You can see that the hardware of #2 is at least twice better/faster than #1.
I'm searching the reason and the solution to take advantage of the better hardware compared to the
poor notebook.
Currently #2 can't amazingly outperform the notebook (#1).

The question is: What can be worse in #2 than on the poor notebook?

I can imagine only software problems.
Which are the sotware parts then?
1. The OS
Is SuSE 9.1 a LOT slower than WinXP pro?
2. The file system
Is reisefs a LOT slower than NTFS?

Regards,
Sanyi


	
		
__________________________________ 
Do you Yahoo!? 
Yahoo! Mail - You care about security. So do we. 
http://promotions.yahoo.com/new_mail

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11531-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 11:00:54 2004
Return-Path: <lucene-user-return-11531-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 27654 invoked from network); 30 Nov 2004 11:00:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 11:00:54 -0000
Received: (qmail 36112 invoked by uid 500); 30 Nov 2004 11:00:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36091 invoked by uid 500); 30 Nov 2004 11:00:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 36075 invoked by uid 99); 30 Nov 2004 11:00:45 -0000
X-ASF-Spam-Status: No, hits=1.5 required=10.0
	tests=DNS_FROM_RFC_POST
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from smtp.uk.colt.net (HELO smtp.uk.colt.net) (213.86.171.102)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 03:00:44 -0800
Received: from rte.ie (mx.rte.ie [217.173.98.209])
	by smtp.uk.colt.net (Postfix) with ESMTP id F07C26127
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 10:57:19 +0000 (GMT)
Message-ID: <41AC52D7.2040901@rte.ie>
Date: Tue, 30 Nov 2004 11:00:39 +0000
From: John Moylan <johnm@rte.ie>
Organization: RTE
User-Agent: Mozilla Thunderbird 0.9 (X11/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: What is the best file system for Lucene?
References: <20041130100446.16789.qmail@web21321.mail.yahoo.com>
In-Reply-To: <20041130100446.16789.qmail@web21321.mail.yahoo.com>
X-Enigmail-Version: 0.89.0.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/mixed;
 boundary="------------030500060101020904000602"
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

--------------030500060101020904000602
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Interesting, what are your merge settings, which JDK are you
using?(there are big differences between versions). Have you tried with
hyperthreading turned off on #2? - if so did it fare any differently?

Regards,
John

Sanyi wrote:
| Hi!
|
| I'm testing Lucene 1.4.2 on two very different configs, but with the
same index.
| I'm very surprised by the results: Both systems are searching at about
the same speed, but I'd
| expect (and I really need) to run Lucene a lot faster on my stronger
config.
|
| Config #1 (a notebook):
| WinXP Pro, NTFS, 1.8GHz Pentium-M, 768Megs memory, 7200RPM winchester
|
| Config #2 (a desktop PC):
| SuSE 9.1 Pro, resiefs, 3.0GHZ P4 HT (virtually two 3.0GHz P4s), 3GByte
RAM, 15000RPM U320 SCSI
| winchester
|
| You can see that the hardware of #2 is at least twice better/faster
than #1.
| I'm searching the reason and the solution to take advantage of the
better hardware compared to the
| poor notebook.
| Currently #2 can't amazingly outperform the notebook (#1).
|
| The question is: What can be worse in #2 than on the poor notebook?
|
| I can imagine only software problems.
| Which are the sotware parts then?
| 1. The OS
| Is SuSE 9.1 a LOT slower than WinXP pro?
| 2. The file system
| Is reisefs a LOT slower than NTFS?
|
| Regards,
| Sanyi
|
|
| 	
| 		
| __________________________________
| Do you Yahoo!?
| Yahoo! Mail - You care about security. So do we.
| http://promotions.yahoo.com/new_mail
|
| ---------------------------------------------------------------------
| To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
| For additional commands, e-mail: lucene-user-help@jakarta.apache.org
|
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (GNU/Linux)

iD8DBQFBrFLWHgDLUzVQ7OARAraNAJ96DcMxVGYZQCmbjTpnaNJHlBEDRwCfcYoa
1UVJ37tcsNRp2m7h42265QA=
=BP6l
-----END PGP SIGNATURE-----

******************************************************************************
The information in this e-mail is confidential and may be legally privileged.
It is intended solely for the addressee. Access to this e-mail by anyone else
is unauthorised. If you are not the intended recipient, any disclosure,
copying, distribution, or any action taken or omitted to be taken in reliance
on it, is prohibited and may be unlawful.
Please note that emails to, from and within RT may be subject to the Freedom
of Information Act 1997 and may be liable to disclosure.
******************************************************************************


--------------030500060101020904000602
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org
--------------030500060101020904000602--

From lucene-user-return-11532-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 11:29:10 2004
Return-Path: <lucene-user-return-11532-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 45401 invoked from network); 30 Nov 2004 11:29:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 11:29:10 -0000
Received: (qmail 99508 invoked by uid 500); 30 Nov 2004 11:28:44 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 99448 invoked by uid 500); 30 Nov 2004 11:28:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 99411 invoked by uid 99); 30 Nov 2004 11:28:43 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web21324.mail.yahoo.com (HELO web21324.mail.yahoo.com) (216.136.175.210)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 30 Nov 2004 03:28:41 -0800
Received: (qmail 9832 invoked by uid 60001); 30 Nov 2004 11:28:39 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=ihynwf5l5qI+6xQQmaZPV594zedpmfI1pGBp7RsssoY+dT9J3xBfos/HPSNqG14N0pb8V9HvY0LOGG1jKhmvubTUYTv3ukaVZ/FSkUtzXoIqk1vvK1XT7YPrZy720OKjkO1sl0sGOvDZMM7p9Rstnv0lrfwBO/DdpBb6Jsr0gIU=  ;
Message-ID: <20041130112839.9830.qmail@web21324.mail.yahoo.com>
Received: from [193.226.211.176] by web21324.mail.yahoo.com via HTTP; Tue, 30 Nov 2004 03:28:39 PST
Date: Tue, 30 Nov 2004 03:28:39 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Re: What is the best file system for Lucene?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <41AC52D7.2040901@rte.ie>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> Interesting, what are your merge settings

Sorry, I didn't mention that I was talking about search performance.
I'm using the same, fully optimized index on both systems.
(I've generated both indexes with the same code from the same database on the actual OS)

> which JDK are you using?

I'm using the same Sun JDK on both systems.
I've tried so far:
j2sdk1.4.2_04 _05 and _06.
I didn't notice speed differences between these subversions.
Do you know about significant speed differences between them I should notice?

> Have you tried with hyperthreading turned off on #2?

No, but I will try it if the problem isn't in the file system.
I hope that the reason of slowness is reiserfs, because it is the easiest to change.

What file systems are you people using Lucene on? And what are your experiences?

Regards,
Sanyi



		
__________________________________ 
Do you Yahoo!? 
The all-new My Yahoo! - What will yours do?
http://my.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11533-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 11:35:03 2004
Return-Path: <lucene-user-return-11533-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49424 invoked from network); 30 Nov 2004 11:35:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 11:35:02 -0000
Received: (qmail 10557 invoked by uid 500); 30 Nov 2004 11:34:45 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 10530 invoked by uid 500); 30 Nov 2004 11:34:45 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 10516 invoked by uid 99); 30 Nov 2004 11:34:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from sioux.media-style.com (HELO sioux.media-style.com) (212.122.43.147)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 03:34:42 -0800
Received: from www-data by sioux.media-style.com with local (Exim 3.35 #1 (Debian))
	id 1CZ6BB-0003e5-00
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 12:28:21 +0100
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: What is the best file system for Lucene?
Message-ID: <1101814101.41ac5955b154f@www.media-style.com>
Date: Tue, 30 Nov 2004 12:28:21 +0100 (CET)
From: sg@media-style.com
References: <20041130112839.9830.qmail@web21324.mail.yahoo.com>
In-Reply-To: <20041130112839.9830.qmail@web21324.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: IMP/PHP IMAP webmail program 2.2.6
X-Originating-IP: 160.57.144.41
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> What file systems are you people using Lucene on? And what are your
> experiences?

http://www.apple.com/xsan/

Actually it is a beta version and have some small issues but it is very fast 
and easy to manage in case you get it installed. 
The installation it self is tricky since it is very dependend on your network 
setup and need a well working dns, routings etc.
However it is fast as the wind. :-)

HTH
Stefan

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11534-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 11:49:32 2004
Return-Path: <lucene-user-return-11534-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 56609 invoked from network); 30 Nov 2004 11:49:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 11:49:32 -0000
Received: (qmail 36348 invoked by uid 500); 30 Nov 2004 11:49:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 36153 invoked by uid 500); 30 Nov 2004 11:49:11 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 35848 invoked by uid 99); 30 Nov 2004 11:49:08 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 30 Nov 2004 03:49:06 -0800
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I7ZQV500.DX5 for <lucene-user@jakarta.apache.org>; Tue,
          30 Nov 2004 17:34:17 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: SEARCH CRITERIA
Date: Tue, 30 Nov 2004 17:21:43 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKIEAFCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4927.1200
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi Guys

Apologies.....


On yahoo and Altavista ,if searched upon a word like 'kid'  returns the
search with

similar as below.


   Also try: kid rock, kid games, star wars kid, karate kid   More...



  How to obtain the similar search criteria using Lucene.


Thx in advance


Warm regards
Karthik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11535-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 11:57:06 2004
Return-Path: <lucene-user-return-11535-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 60106 invoked from network); 30 Nov 2004 11:57:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 11:57:06 -0000
Received: (qmail 49435 invoked by uid 500); 30 Nov 2004 11:56:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 49398 invoked by uid 500); 30 Nov 2004 11:56:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 49319 invoked by uid 99); 30 Nov 2004 11:56:49 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mail.bayt.net (HELO mail.bayt.net) (216.176.57.91)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 03:56:47 -0800
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.14) id A1EF74730068; Tue, 30 Nov 2004 07:05:03 -0500
Message-ID: <41AC5FFA.4030401@bayt.net>
Date: Tue, 30 Nov 2004 15:56:42 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: SEARCH CRITERIA
References: <OBELINLGKPEMCIEIJJNKIEAFCAAA.karthik@controlnet.co.in>
In-Reply-To: <OBELINLGKPEMCIEIJJNKIEAFCAAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

they probably create a list of similar results by doing some sort of 
data mining on the search criteria that people use in succession, so for 
example someone, or they have a list of searches that are too general (a 
search for the word kid is at best stupid) but you can't call your users 
stupid so you try to guess what they're searching for based on other 
searches conducted  (kid rock, kid games, star wars kid, karate kid ) 
that contain the initial search string "kid". You can use fuzzy search 
in Lucene, but that won't do that really, the short answer is DIY 
depending on your needs.

My two galiuns

Nader Henein

Karthik N S wrote:

>Hi Guys
>
>Apologies.....
>
>
>On yahoo and Altavista ,if searched upon a word like 'kid'  returns the
>search with
>
>similar as below.
>
>
>   Also try: kid rock, kid games, star wars kid, karate kid   More...
>
>
>
>  How to obtain the similar search criteria using Lucene.
>
>
>Thx in advance
>
>
>Warm regards
>Karthik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
>For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11536-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 12:08:32 2004
Return-Path: <lucene-user-return-11536-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 67273 invoked from network); 30 Nov 2004 12:08:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 12:08:31 -0000
Received: (qmail 77778 invoked by uid 500); 30 Nov 2004 12:07:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 77714 invoked by uid 500); 30 Nov 2004 12:07:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 77686 invoked by uid 99); 30 Nov 2004 12:07:48 -0000
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=SUBJ_ALL_CAPS,UPPERCASE_25_50
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 30 Nov 2004 04:07:48 -0800
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I7ZRQE00.8Z1 for <lucene-user@jakarta.apache.org>; Tue,
          30 Nov 2004 17:53:02 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <lucene-user@jakarta.apache.org>
Subject: GETVALUES +SEARCH
Date: Tue, 30 Nov 2004 17:40:28 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKAEAHCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4927.1200
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


Hi Guys


Apologies.............




On Search API the command  [ package  org.apache.lucene.document.Document ]

Will this    'public final String[] getValues(String name)'     return me
all the docs with out looping  thru ?

Please Explaine with example.



Thx in advance



      WITH WARM REGARDS
      HAVE A NICE DAY
      [ N.S.KARTHIK]




---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11537-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 12:12:46 2004
Return-Path: <lucene-user-return-11537-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68926 invoked from network); 30 Nov 2004 12:12:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 12:12:46 -0000
Received: (qmail 87014 invoked by uid 500); 30 Nov 2004 12:12:33 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 86986 invoked by uid 500); 30 Nov 2004 12:12:33 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 86970 invoked by uid 99); 30 Nov 2004 12:12:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from ptb-relay01.plus.net (HELO ptb-relay01.plus.net) (212.159.14.212)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 04:12:31 -0800
Received: from [80.229.194.52] (helo=joseph)
	 by ptb-relay01.plus.net with smtp (Exim) id 1CZ6qz-000FaQ-Fs
	for lucene-user@jakarta.apache.org; Tue, 30 Nov 2004 12:11:33 +0000
Message-ID: <37da01c4d6d5$39dbf0f0$34c2e550@joseph>
From: "Pete Lewis" <pete@uptima.co.uk>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
References: <20041130112839.9830.qmail@web21324.mail.yahoo.com>
Subject: Re: What is the best file system for Lucene?
Date: Tue, 30 Nov 2004 12:07:46 -0000
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Sanyi

Could you try XP on your desktop - that would take some variables out.  The
problem is that you are comparing OS, as well as filesystems, as well as
different hardware configs.

Also, unless you take your hyperthreading off, with just one index you are
searching with just one half of the CPU - so your desktop is actually using
a 1.5GHz CPU for the search.  So, taking account of this its not too
surprising that they are searching at comparable speeds.....

HTH
Pete

----- Original Message ----- 
From: "Sanyi" <need4sid@yahoo.com>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Sent: Tuesday, November 30, 2004 11:28 AM
Subject: Re: What is the best file system for Lucene?


> > Interesting, what are your merge settings
>
> Sorry, I didn't mention that I was talking about search performance.
> I'm using the same, fully optimized index on both systems.
> (I've generated both indexes with the same code from the same database on
the actual OS)
>
> > which JDK are you using?
>
> I'm using the same Sun JDK on both systems.
> I've tried so far:
> j2sdk1.4.2_04 _05 and _06.
> I didn't notice speed differences between these subversions.
> Do you know about significant speed differences between them I should
notice?
>
> > Have you tried with hyperthreading turned off on #2?
>
> No, but I will try it if the problem isn't in the file system.
> I hope that the reason of slowness is reiserfs, because it is the easiest
to change.
>
> What file systems are you people using Lucene on? And what are your
experiences?
>
> Regards,
> Sanyi
>
>
>
>
> __________________________________
> Do you Yahoo!?
> The all-new My Yahoo! - What will yours do?
> http://my.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11538-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 12:50:24 2004
Return-Path: <lucene-user-return-11538-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 86353 invoked from network); 30 Nov 2004 12:50:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 12:50:23 -0000
Received: (qmail 57554 invoked by uid 500); 30 Nov 2004 12:50:10 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57521 invoked by uid 500); 30 Nov 2004 12:50:09 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57507 invoked by uid 99); 30 Nov 2004 12:50:09 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from debmu468.server.arvato-systems.de (HELO pmx3.bertelsmann.de) (62.55.240.4)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 04:50:07 -0800
Received: from pmx3.bertelsmann.de (localhost [127.0.0.1])
	by localhost.bertelsmann.de (Postfix) with ESMTP id 692B234F24
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 13:50:03 +0100 (CET)
Received: from mmx6.bertelsmann.de (unknown [145.228.237.47])
	by pmx3.bertelsmann.de (Postfix) with ESMTP id 5F64934EDF
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 13:50:03 +0100 (CET)
Received: from gtlbmlexs0006.bagmail.net ([145.228.237.20]) by mmx6.bertelsmann.de with Microsoft SMTPSVC(6.0.3790.211);
	 Tue, 30 Nov 2004 13:50:03 +0100
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: AW: What is the best file system for Lucene?
Date: Tue, 30 Nov 2004 13:50:53 +0100
Message-ID: <69D276452CD2904980D5B6AC33C9BE17026CCF47@gtlbmlexs0006.bagmail.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: What is the best file system for Lucene?
Thread-Index: AcTWxA12vbHNGvj/TzWynzg5Bqv/QQADexMw
From: <Wolf-Dietrich.Materna@empolis.com>
To: <lucene-user@jakarta.apache.org>
X-OriginalArrivalTime: 30 Nov 2004 12:50:03.0283 (UTC) FILETIME=[1C37FE30:01C4D6DB]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,
Sanyi [mailto:need4sid@yahoo.com] wrote:
> I'm testing Lucene 1.4.2 on two very different configs, but=20
> with the same index.
> I'm very surprised by the results: Both systems are searching=20
> at about the same speed, but I'd expect (and I really need)=20
> to run Lucene a lot faster on my stronger config.
>=20
> Config #1 (a notebook):
> WinXP Pro, NTFS, 1.8GHz Pentium-M, 768Megs memory, 7200RPM winchester
>=20
> Config #2 (a desktop PC):
> SuSE 9.1 Pro, resiefs, 3.0GHZ P4 HT (virtually two 3.0GHz=20
> P4s), 3GByte RAM, 15000RPM U320 SCSI winchester
>=20
> You can see that the hardware of #2 is at least twice=20
> better/faster than #1.
> I'm searching the reason and the solution to take advantage=20
> of the better hardware compared to the poor notebook.
> Currently #2 can't amazingly outperform the notebook (#1).
>=20
> The question is: What can be worse in #2 than on the poor notebook?
The notebook is quite good, e.g. the Pentium-M might be faster than
your Pentium 4. At least it has a similar speed, because of it better
internal design. Never compare cpus of different types by their
frequency.=20
Use benchmarks, e.g. SpecInt_2000 <http://www.spec.org/benchmarks.html>
to
compare cpus, but keep in mind that these ratings will be different from

your "real world" application.=20
SPECint2000(base) rating of a P4@3,06Ghz: 1085,
 Details:
<http://www.spec.org/cpu2000/results/res2002q4/cpu2000-20021113-01827.ht
ml>
SPECint2000(base) rating of Pentium M 755@2Ghz: 1541 (!)
  Details:
<http://www.spec.org/cpu2000/results/res2004q2/cpu2000-20040614-03081.ht
ml>
Note: this is a workstation using a faster version of your notebook cpu.
I haven't found any Pentium M system with 1,8Ghz in the list.

Maybe your index is small enough to fit into the cache provided by the=20
operating systems. So you wouldn't recognize any difference between your

hard disks.

> I can imagine only software problems.
> Which are the sotware parts then?
> 1. The OS. Is SuSE 9.1 a LOT slower than WinXP pro?
> 2. The file system. Is reisefs a LOT slower than NTFS?
I don't think so. I'm using Windows 2000 pro and SuSE 9.0 and=20
(from my memory) Linux seems to be sightly faster, but I can't
provide any benchmark now.
You should re-run your tests on the same hardware.
Regards,
	Wolf-Dietrich

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11539-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 12:58:03 2004
Return-Path: <lucene-user-return-11539-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 91163 invoked from network); 30 Nov 2004 12:58:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 12:58:02 -0000
Received: (qmail 74054 invoked by uid 500); 30 Nov 2004 12:57:16 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 74026 invoked by uid 500); 30 Nov 2004 12:57:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 73989 invoked by uid 99); 30 Nov 2004 12:57:15 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from 66-7-226-62.cust.telepacific.net (HELO samwise.scalix.local) (66.7.226.62)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 04:57:13 -0800
Received: from localhost (scalix@localhost)
	by samwise.scalix.local (8.11.6/8.11.6) with ESMTP id iAUCGEZ09183
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 04:16:14 -0800
Received: from [10.11.108.243] (snorlax.uk.scalix.com 10.11.108.216)
    by snorlax.uk.scalix.com (Scalix SMTP Relay 9.2.0.39-beta)
    via ESMTP; Tue, 30 Nov 2004 12:57:08 +0000 (GMT)
User-Agent: Mozilla Thunderbird 0.8 (X11/20041020)
X-Accept-Language: en-us, en
x-scalix-Hops: 3
Message-Id: <41AC6E24.9070509@scalix.com>
Date: Tue, 30 Nov 2004 12:57:08 +0000
References: <20041130100446.16789.qmail@web21321.mail.yahoo.com>
In-Reply-To: <20041130100446.16789.qmail@web21321.mail.yahoo.com>
Subject: Re: What is the best file system for Lucene?
MIME-Version: 1.0
Sender: John Haxby <jch@scalix.com>
FROM: John Haxby <jch@scalix.com>
TO: Lucene Users List <lucene-user@jakarta.apache.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Disposition: inline
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N




Sanyi wrote:

>I'm testing Lucene 1.4.2 on two very different configs, but with the sa=
me index.
>I'm very surprised by the results: Both systems are searching at about =
the same speed, but I'd
>expect (and I really need) to run Lucene a lot faster on my stronger co=
nfig.
>
>Config #1 (a notebook):
>WinXP Pro, NTFS, 1.8GHz Pentium-M, 768Megs memory, 7200RPM winchester
>
>Config #2 (a desktop PC):
>SuSE 9.1 Pro, resiefs, 3.0GHZ P4 HT (virtually two 3.0GHz P4s), 3GByte =
RAM, 15000RPM U320 SCSI
>winchester
>
>You can see that the hardware of #2 is at least twice better/faster tha=
n #1.
>I'm searching the reason and the solution to take advantage of the bett=
er hardware compared to the
>poor notebook.
>Currently #2 can't amazingly outperform the notebook (#1).
>
> =20
>
How large is the index=3F   If it's less than a couple of GByte then it =

will be entirely in memory after you've done a few searches on the Linux=
=20
box.  You can force it into memory by cat'ing all the index files on to =

/dev/null a couple of times (cat * > /dev/null).   A 3GHz system should =

now perform dramatically faster than a 1.5GHz system no matter what the =

file system. (And it's still 3GHz whether or not hyperthreading is=20
turned on -- hyperthreading simply makes use of some under-used silicon =

to give you somewhere between 1 and 2 CPUs.  In some pathlogical cases=20
it can give you less than one CPU, but I don't think lucene falls into=20
the category.  And it's going to be a helluva lot faster than any=20
Pentium M because it has a nice healthy cache.)

However, I don't believe that the hardware, OS or file system have=20
anything to do with it.   Normally if you're seeing similar performance =

on widely differing platforms you're seeing latency somewhere else.  =20
For example (and this is only an example) looking up a hostname in the=20
DNS will take about the same time on almost any machine you can get hold=
 of.

You don't say how you're measuring search performance and you don't say =

what you're seeing.   Also, what's the load on the system while you're=20
running the tests=3F   gkrellm on Linux is very useful as an overall vie=
w=20
=2D- are you CPU bound, are you seeing lots of disk traffic=3F   Is the =

system actually more-or-less idle=3F

jch



---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11540-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 13:03:15 2004
Return-Path: <lucene-user-return-11540-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 94109 invoked from network); 30 Nov 2004 13:03:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 13:03:15 -0000
Received: (qmail 85156 invoked by uid 500); 30 Nov 2004 13:02:53 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 85056 invoked by uid 500); 30 Nov 2004 13:02:52 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 85038 invoked by uid 99); 30 Nov 2004 13:02:52 -0000
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS,URIBL_SBL
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.192 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.192)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 05:02:51 -0800
Received: by rproxy.gmail.com with SMTP id 34so198298rns
        for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 05:02:49 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=jbngRgBzdKVgrVSUNfPdTSX/fcO0gITVMDiKngVuJe3qFlw6ksBlcDoAxedmlxa8/LK1jBe0qxoFMRMy/3sAKHQHiYa9hya/mPg52r9hV0aJ092hkdJXqf6Q5zVadVyHPY4/AvKezHiKAxHSqvtsTlwQGukY4nx2Ye7+0Z5bNq4=
Received: by 10.38.10.61 with SMTP id 61mr1428755rnj;
        Tue, 30 Nov 2004 05:02:49 -0800 (PST)
Received: by 10.38.179.4 with HTTP; Tue, 30 Nov 2004 05:02:48 -0800 (PST)
Message-ID: <dd2db8d0041130050279f60b95@mail.gmail.com>
Date: Tue, 30 Nov 2004 08:02:48 -0500
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: What is the best file system for Lucene?
In-Reply-To: <37da01c4d6d5$39dbf0f0$34c2e550@joseph>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <20041130112839.9830.qmail@web21324.mail.yahoo.com>
	 <37da01c4d6d5$39dbf0f0$34c2e550@joseph>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tue, 30 Nov 2004 12:07:46 -0000, Pete Lewis <pete@uptima.co.uk> wrote:
> Also, unless you take your hyperthreading off, with just one index you are
> searching with just one half of the CPU - so your desktop is actually using
> a 1.5GHz CPU for the search.  So, taking account of this its not too
> surprising that they are searching at comparable speeds.....
> 
> HTH
> Pete

Actually, that isn't how hyperthreading works.  The "second" CPU in a
hyperthreaded system should only run threads when the "main" cpu is
waiting on another task, like a memory access.  The second, or sub CPU
is only a virtual processor.  There aren't really two chips on board. 
New multicore processors will actually have more than one processor 
in one chip.

Problems can arise when you are using a HT processor on an operating
system that doesn't know about HT technology.  The OS should only
schedule jobs to run on the sub CPU under very specific circumstances.
 This is one of the major reasons for the scheduler overhaul in Linux
2.6.  The default scheduler in 2.4 would assign threads to the sub CPU
that shouldn't have been, and those threads would suffer from resource
starvation.

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11541-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 13:08:32 2004
Return-Path: <lucene-user-return-11541-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 97881 invoked from network); 30 Nov 2004 13:08:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 13:08:32 -0000
Received: (qmail 807 invoked by uid 500); 30 Nov 2004 13:07:56 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 767 invoked by uid 500); 30 Nov 2004 13:07:55 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 731 invoked by uid 99); 30 Nov 2004 13:07:54 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web21321.mail.yahoo.com (HELO web21321.mail.yahoo.com) (216.136.175.207)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 30 Nov 2004 05:07:51 -0800
Received: (qmail 49515 invoked by uid 60001); 30 Nov 2004 13:07:46 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=2qivME5RNJoL9Ajprn3SqSpneYVNBZO1+P9c2xZkzt3XhelrKljI7e5hvALJoMnILvhuw01oiutaKodf3oomkTTW3kyGDVJE8QQdPsQbEvd5JZCnGvnw7od+xkabLNdkxzIDNbY14NG2VhzekE6oMrrL8pC0q+ElFFbhaQejmf8=  ;
Message-ID: <20041130130746.49513.qmail@web21321.mail.yahoo.com>
Received: from [193.226.211.176] by web21321.mail.yahoo.com via HTTP; Tue, 30 Nov 2004 05:07:46 PST
Date: Tue, 30 Nov 2004 05:07:46 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Re: What is the best file system for Lucene?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <37da01c4d6d5$39dbf0f0$34c2e550@joseph>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> Could you try XP on your desktop

Sure, but I'll only do that I run out of ideas.

> so your desktop is actually using
> a 1.5GHz CPU for the search.

No, this is not true. It uses a 3.0GHz P4 then.
(HT means that you have two 3.0GHz P4s)

So, it is still surprising to me.

Regards,
Sanyi



		
__________________________________ 
Do you Yahoo!? 
All your favorites on one personal page  Try My Yahoo!
http://my.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11542-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 13:13:47 2004
Return-Path: <lucene-user-return-11542-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 2103 invoked from network); 30 Nov 2004 13:13:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 13:13:47 -0000
Received: (qmail 18242 invoked by uid 500); 30 Nov 2004 13:13:30 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 18214 invoked by uid 500); 30 Nov 2004 13:13:30 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 18191 invoked by uid 99); 30 Nov 2004 13:13:29 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web21321.mail.yahoo.com (HELO web21321.mail.yahoo.com) (216.136.175.207)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 30 Nov 2004 05:13:28 -0800
Received: (qmail 51356 invoked by uid 60001); 30 Nov 2004 13:13:26 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=xjIbZb0XB5kFBIeJ/arH5H1HxMG3UcLRLpWTnGbRqMqOnEZhy9RkqtWXcpKk1gM/D50dZBgAgIXTFBLO+E4Xj6XFKazjBeMUnd5eXP6hUSCJF9Lc5oNhcWtPW0I15Qj6UcKuu4zP3bXp9EukA7K9wFSdqEusv848BOscJMgM5Cs=  ;
Message-ID: <20041130131326.51354.qmail@web21321.mail.yahoo.com>
Received: from [193.226.211.176] by web21321.mail.yahoo.com via HTTP; Tue, 30 Nov 2004 05:13:26 PST
Date: Tue, 30 Nov 2004 05:13:26 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Re: AW: What is the best file system for Lucene?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <69D276452CD2904980D5B6AC33C9BE17026CCF47@gtlbmlexs0006.bagmail.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> The notebook is quite good, e.g. the Pentium-M might be faster than
> your Pentium 4. At least it has a similar speed, because of it better
> internal design. Never compare cpus of different types by their
> frequency. 

Ok, this might be true, but:

All of my other tests where the CPU is involved, are running a LOT faster on the desktop PC with
the 3GHz P4.
Even other JAVA parts are running a LOT faster. (twice as fast nearly)
So, we can't even say that the JAVA VM takes no advantage of the 3GHz P4 compared to the 1.8GHz
Pentium-M.
Everything is a LOT faster, except searching with lucene. (which is also a bit faster, but
slightly)

> Maybe your index is small enough to fit into the cache provided by the 
> operating systems. So you wouldn't recognize any difference between your
> hard disks.

It is a 3GByte index and I always reboot between tests, so cahcing is not the case.

> I don't think so. I'm using Windows 2000 pro and SuSE 9.0 and 
> (from my memory) Linux seems to be sightly faster, but I can't
> provide any benchmark now.

Are you using reiserfs with SuSE?

Regards,
Sanyi


		
__________________________________ 
Do you Yahoo!? 
The all-new My Yahoo! - Get yours free! 
http://my.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11543-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 13:16:45 2004
Return-Path: <lucene-user-return-11543-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 3367 invoked from network); 30 Nov 2004 13:16:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 13:16:45 -0000
Received: (qmail 23023 invoked by uid 500); 30 Nov 2004 13:16:27 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 23005 invoked by uid 500); 30 Nov 2004 13:16:27 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 22991 invoked by uid 99); 30 Nov 2004 13:16:27 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: domain of greenlion@gmail.com designates 64.233.170.206 as permitted sender)
Received: from rproxy.gmail.com (HELO rproxy.gmail.com) (64.233.170.206)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 05:16:25 -0800
Received: by rproxy.gmail.com with SMTP id 34so198714rns
        for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 05:16:23 -0800 (PST)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:references;
        b=YQvYuf2LnrUusSo29cyFOjcMSRbFft7vg4bgqc+UiVevlvQCeCKYycC3EVm+6f4S+qCARt/AISicXLOMSFjLiyGXD0MkkM+AEIj52WPmzVBbeBfLJvw5V8KpRRJQ+BaZgDmBA+aVt5l0lk9LnnrWMkC4QBPysTD9la4FUpp7WCU=
Received: by 10.38.206.33 with SMTP id d33mr1443008rng;
        Tue, 30 Nov 2004 05:16:23 -0800 (PST)
Received: by 10.38.179.4 with HTTP; Tue, 30 Nov 2004 05:16:23 -0800 (PST)
Message-ID: <dd2db8d004113005161e47cc53@mail.gmail.com>
Date: Tue, 30 Nov 2004 08:16:23 -0500
From: Justin Swanhart <greenlion@gmail.com>
Reply-To: Justin Swanhart <greenlion@gmail.com>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: What is the best file system for Lucene?
In-Reply-To: <20041130100446.16789.qmail@web21321.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=US-ASCII
Content-Transfer-Encoding: 7bit
References: <20041130100446.16789.qmail@web21321.mail.yahoo.com>
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

As a generalisation, SuSE itself is not a lot slower than Windows XP. 
I also very much doubt that filesystem is a factor.  If you want to
test w/out filesystem involvement, simply load your index into a
RAMDirectory instead of using FSDirectory.  That precludes filesystem
overhead in searches.

There are quite a number of factors involved that could be affecting
performance.

First off, 1.8GHz Pentium-M machines are supposed to run at about the
speed of a 2.4GHz machine.  The clock speeds on the mobile chips are
lower, but they tend to perform much better than rated.   I recommend
you take a general benchmark of both machines testing both disk speed
and cpu speed to get a baseline performance comparision.  I also
suggest turning of HT for your benchmarks and performance testing.

Secondly, while the second machine appears to be twice as fast, the
disk could actually perform slower on the Linux box, especially if the
notebook drive has a big (8M) cache like most 7200RPM ata disk drives
do.  I imagine that if you hit the index with lots of simultaneous
searches, that the Linux box would hold its own for much longer than
the XP box simply due to the random seek performance of the scsi disk
combined with scsi command queueing.

RAM speed is a factor too.  Is the p4 a xeon processor?  The older HT
xeons have a much slower bus than the newer p4-m processors.  Memory
speed will be affected accordingly.

I haven't heard of a hard disk referred to as a winchester disk in a
very long time :)

Once you have an idea of how the two machines actually compare
performance-wise, you can then judge how they perform index
operations.  Until then, all your measurements are subjective and you
don't gain much by comparing the two indexing processes.

Justin

On Tue, 30 Nov 2004 02:04:46 -0800 (PST), Sanyi <need4sid@yahoo.com> wrote:
> Hi!
> 
> I'm testing Lucene 1.4.2 on two very different configs, but with the same index.
> I'm very surprised by the results: Both systems are searching at about the same speed, but I'd
> expect (and I really need) to run Lucene a lot faster on my stronger config.
> 
> Config #1 (a notebook):
> WinXP Pro, NTFS, 1.8GHz Pentium-M, 768Megs memory, 7200RPM winchester
> 
> Config #2 (a desktop PC):
> SuSE 9.1 Pro, resiefs, 3.0GHZ P4 HT (virtually two 3.0GHz P4s), 3GByte RAM, 15000RPM U320 SCSI
> winchester
> 
> You can see that the hardware of #2 is at least twice better/faster than #1.
> I'm searching the reason and the solution to take advantage of the better hardware compared to the
> poor notebook.
> Currently #2 can't amazingly outperform the notebook (#1).
> 
> The question is: What can be worse in #2 than on the poor notebook?
> 
> I can imagine only software problems.
> Which are the sotware parts then?
> 1. The OS
> Is SuSE 9.1 a LOT slower than WinXP pro?
> 2. The file system
> Is reisefs a LOT slower than NTFS?
> 
> Regards,
> Sanyi
> 
> __________________________________
> Do you Yahoo!?
> Yahoo! Mail - You care about security. So do we.
> http://promotions.yahoo.com/new_mail
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11544-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 13:24:11 2004
Return-Path: <lucene-user-return-11544-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 7756 invoked from network); 30 Nov 2004 13:24:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 13:24:11 -0000
Received: (qmail 37429 invoked by uid 500); 30 Nov 2004 13:23:50 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37409 invoked by uid 500); 30 Nov 2004 13:23:50 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37395 invoked by uid 99); 30 Nov 2004 13:23:49 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web21323.mail.yahoo.com (HELO web21323.mail.yahoo.com) (216.136.175.209)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 30 Nov 2004 05:23:49 -0800
Received: (qmail 87220 invoked by uid 60001); 30 Nov 2004 13:23:47 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=FObArT0BMV5yRiTmkXaZQwJs5WZ3u0Q34NfNmLTj+UavKzPI46HuyZ9DgXbPRrKBuGw5lW01eWLYDW0iBwpTXc6YZIutx7jbtYFmsjphQzTqfxHqrvGTr8K2ujQ4KWESkhfpREBPEp0cQk5+VMN+5Gt/t1WvWV+6y7YQgiMfrMs=  ;
Message-ID: <20041130132347.87218.qmail@web21323.mail.yahoo.com>
Received: from [193.226.211.176] by web21323.mail.yahoo.com via HTTP; Tue, 30 Nov 2004 05:23:47 PST
Date: Tue, 30 Nov 2004 05:23:47 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Re: What is the best file system for Lucene?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <41AC6E24.9070509@scalix.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> How large is the index?   If it's less than a couple of GByte then it 
> will be entirely in memory

It is 3GBytes big and it will grow a lot.
I have to search from the HDD which is very fast compared to the notebook's HDD.

Average seek time:
Notebook: 8-9ms
Desktop: 3.9ms

Data read:
Notebook: max. ~20MBytes/sec
Desktop: 60-80MBytes/sec

So, if the bottleneck is the HDD, it has to be 2x-3x faster on the desktop system.
Except if reiserfs is a lot slower than NTFS.

> For example (and this is only an example) looking up a hostname in the 
> DNS will take about the same time on almost any machine you can get hold of.

Ok, but I have very simple and pure tests and everything is measured part-by-part.
..and every parts speeds up a lot on the desltop system, except the lucene search part.

> You don't say how you're measuring search performance and you don't say 
> what you're seeing.

I call my java program from command line on both systems, like:
search hello
Then it searches for bravo and collects the elapsed milliseconds between every call to anything.
Then it displays the results. It is very simple.

> Also, what's the load on the system while you're 
> running the tests?   gkrellm on Linux is very useful as an overall view 
> -- are you CPU bound, are you seeing lots of disk traffic?   Is the 
> system actually more-or-less idle?

Thanx for the hint. Since my search searches for only 30 hits, it completes too fastly to let me
monitor it real-time.
Anyway, if reiserfs will prove to be fast enough, I'll search for other reasons and will perform
longer tests for real-time monitoring.

Regards,
Sanyi


		
__________________________________ 
Do you Yahoo!? 
Take Yahoo! Mail with you! Get it on your mobile phone. 
http://mobile.yahoo.com/maildemo 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11545-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 13:50:32 2004
Return-Path: <lucene-user-return-11545-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 21167 invoked from network); 30 Nov 2004 13:50:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 13:50:32 -0000
Received: (qmail 95046 invoked by uid 500); 30 Nov 2004 13:50:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 95017 invoked by uid 500); 30 Nov 2004 13:50:18 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 94986 invoked by uid 99); 30 Nov 2004 13:50:18 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web21326.mail.yahoo.com (HELO web21326.mail.yahoo.com) (216.136.175.215)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 30 Nov 2004 05:50:17 -0800
Received: (qmail 66534 invoked by uid 60001); 30 Nov 2004 13:50:15 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=nFswqP824XZnA4HVASEss53lvDmKVmkJEjTHAAIWacjeo5YHUdmOxU91oy9e75CVQoMjBcSCYdlrR/f4QpXPbOD7MoYZRGH0NgQhV4aaIN6Tr0iuTtQs2g+EZ0WHI8mtx9hTloWIIO6mjld3KSzJlAUNikAZjrP96Tjp7b4BEic=  ;
Message-ID: <20041130135015.66532.qmail@web21326.mail.yahoo.com>
Received: from [193.226.211.176] by web21326.mail.yahoo.com via HTTP; Tue, 30 Nov 2004 05:50:15 PST
Date: Tue, 30 Nov 2004 05:50:15 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Re: What is the best file system for Lucene?
To: Lucene Users List <lucene-user@jakarta.apache.org>,
  Justin Swanhart <greenlion@gmail.com>
In-Reply-To: <dd2db8d004113005161e47cc53@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

> simply load your index into a
> RAMDirectory instead of using FSDirectory. 

I have 3GByte RAM and my index is 3GByte big currently. (it'll be soon about 4GByte)
So, I have to find out this another way.

> First off, 1.8GHz Pentium-M machines are supposed to run at about the
> speed of a 2.4GHz machine.  The clock speeds on the mobile chips are
> lower, but they tend to perform much better than rated.   I recommend
> you take a general benchmark of both machines testing both disk speed
> and cpu speed to get a baseline performance comparision.

I think that it a good general benchmark that almost everything runs at least twice as fast on the
3.0GHz P4 except lucene search.

I can tell one more interesting info:
I have a MySQL table with ~20million records.
I throw a DROP INDEX on that table, MySQL rebuilds the whole huge table into a tempfile.
It completes in 30 minutes on both systems.
It doesn't matter again that the 15kRPM U320 HDD is 2x-3x as fast.
Very surprising again.
Hmm... reiserfs must be very-very slow, or I'm completly lost :)

> I also suggest turning of HT for your benchmarks and performance testing.

I'll try this later and I really hope it won't be the reason.

> Secondly, while the second machine appears to be twice as fast, the
> disk could actually perform slower on the Linux box, especially if the
> notebook drive has a big (8M) cache like most 7200RPM ata disk drives
> do. 

Both drives have 8M cache.

> I imagine that if you hit the index with lots of simultaneous
> searches, that the Linux box would hold its own for much longer than
> the XP box simply due to the random seek performance of the scsi disk
> combined with scsi command queueing.

Are you saying that SCSI command queuing wastes more time than a 15kRPM 3.9ms HDD can gain over a
7.2kRPM 8-9ms HDD?
It sounds terrible and I hope it isn't true.

> RAM speed is a factor too.  Is the p4 a xeon processor?  The older HT
> xeons have a much slower bus than the newer p4-m processors.  Memory
> speed will be affected accordingly.

It is not a Xeon, just a P4 3.0GHz HT.

> I haven't heard of a hard disk referred to as a winchester disk in a
> very long time :)

;)

> Once you have an idea of how the two machines actually compare
> performance-wise, you can then judge how they perform index
> operations.

Lucene indexing completes in 13-15 hours on the desktop system while it completes in about 29-33
hours on the notebook.

Now, combine it with the DROP INDEX tests completing in the same amount of time on both and find
out why is the search only slightly faster :)

> Until then, all your measurements are subjective and you
> don't gain much by comparing the two indexing processes.

I'm worried about searching. Indexing is a lot faster on the desktop config.

Regards,
Sanyi



		
__________________________________ 
Do you Yahoo!? 
All your favorites on one personal page  Try My Yahoo!
http://my.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11546-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 14:07:56 2004
Return-Path: <lucene-user-return-11546-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 31948 invoked from network); 30 Nov 2004 14:07:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 14:07:56 -0000
Received: (qmail 37195 invoked by uid 500); 30 Nov 2004 14:06:18 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 37160 invoked by uid 500); 30 Nov 2004 14:06:17 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 37135 invoked by uid 99); 30 Nov 2004 14:06:16 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from gwserv161.interdoms.net (HELO gwserv161.interdoms.net) (69.65.18.194)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 06:06:15 -0800
Received: from ws97.brusselsvillage.be ([194.183.227.97] helo=attentio.com)
	by gwserv161.interdoms.net with esmtpa (Exim 4.43)
	id 1CZ8du-0004S1-Sw
	for lucene-user@jakarta.apache.org; Tue, 30 Nov 2004 15:06:11 +0100
Message-ID: <41AC7E50.9040905@attentio.com>
Date: Tue, 30 Nov 2004 15:06:08 +0100
From: Roxana Angheluta <roxana@attentio.com>
User-Agent: Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.6) Gecko/20040114
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  lucene-user@jakarta.apache.org
Subject: similarity matrix - more clear
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - gwserv161.interdoms.net
X-AntiAbuse: Original Domain - jakarta.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [47 12] / [47 12]
X-AntiAbuse: Sender Address Domain - attentio.com
X-Source: 
X-Source-Args: 
X-Source-Dir: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Dear all,

Yesterday I've asked a question about geting the similarity matrix of a 
collection of documents from an index, but I got only one answer, so 
perhaps my question was not very clear.

I will try to reformulate:

I want to use Lucene to have efficient access to an index of a 
collection of documents. My final purpose is to cluster documents. 
Therefore I need to have for each pair of documents a number signifying 
the similarity between them.
A possible solution would be to initialize in turn each document as a 
query, do a search using an IndexSearcher and to take from the search 
result the similarity between the query (which is in fact a document) 
and all the other documents. This is highly redundant, because the 
similarity between a pair of documents is computed multiple times.

I was wondering whether there is a simpler way to do it, since the index 
file contains all the information needed. Can anyone help me here?

Thanks,
roxana

PS I know about the project Carrot2, which deals with document 
clustering, but I think is not appropriate for me because of 2 reasons:
1) I need to keep the index on the disk for further reusage
2) I need to be able to search efficiently in the index
I thought Lucene can help me here, am I wrong?

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11547-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 14:40:48 2004
Return-Path: <lucene-user-return-11547-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 68159 invoked from network); 30 Nov 2004 14:40:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 14:40:48 -0000
Received: (qmail 21264 invoked by uid 500); 30 Nov 2004 14:36:14 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 21147 invoked by uid 500); 30 Nov 2004 14:36:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 21080 invoked by uid 99); 30 Nov 2004 14:36:09 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from fork3.mail.Virginia.EDU (HELO fork3.mail.virginia.edu) (128.143.2.193)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 06:36:07 -0800
Received: from localhost (localhost [127.0.0.1])
	by fork3.mail.virginia.edu (Postfix) with ESMTP id 286781C024
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 09:35:40 -0500 (EST)
Received: from fork3.mail.virginia.edu ([127.0.0.1])
 by localhost (fork3.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 29031-10 for <lucene-user@jakarta.apache.org>;
 Tue, 30 Nov 2004 09:35:39 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by fork3.mail.virginia.edu (Postfix) with ESMTP id C5E7C1BFD6
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 09:35:39 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <OBELINLGKPEMCIEIJJNKAEAHCAAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKAEAHCAAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <22BF7BB8-42DD-11D9-8C76-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: GETVALUES +SEARCH
Date: Tue, 30 Nov 2004 09:35:52 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-UVA-Virus-Scanned: by amavisd-new at fork3.mail.virginia.edu
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Nov 30, 2004, at 7:10 AM, Karthik N S wrote:
> On Search API the command  [ package  
> org.apache.lucene.document.Document ]
>
> Will this    'public final String[] getValues(String name)'     return 
> me
> all the docs with out looping  thru ?

getValues(fieldName) returns a String[] of the values of the field.  
It's similar to getValue(fieldName).  If you index a field multiple 
times:

	doc.add(Field.Keyword("keyword", "one"));
	doc.add(Field.Keyword("keyword", "two"));

getValue("keyword") will return "one", but getValues("keyword") will 
return a String[] {"one", "two"}

If you want to retrieve all documents, use IndexReader's various API 
methods.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11548-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 15:10:57 2004
Return-Path: <lucene-user-return-11548-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 89330 invoked from network); 30 Nov 2004 15:10:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 15:10:57 -0000
Received: (qmail 17740 invoked by uid 500); 30 Nov 2004 15:09:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 17720 invoked by uid 500); 30 Nov 2004 15:09:46 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 17693 invoked by uid 99); 30 Nov 2004 15:09:45 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ares.cs.Virginia.EDU (HELO ares.cs.Virginia.EDU) (128.143.137.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 07:09:43 -0800
Received: from cobra.cs.Virginia.EDU (cobra.cs.Virginia.EDU [128.143.137.16])
	by ares.cs.Virginia.EDU (8.12.10/8.12.10/UVACS-2003031900) with ESMTP id iAUF9YM0021341
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 10:09:34 -0500 (EST)
Received: from localhost (xj3a@localhost)
	by cobra.cs.Virginia.EDU (8.12.10+Sun/8.12.10/Submit) with ESMTP id iAUF9YtB009264
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 10:09:34 -0500 (EST)
Date: Tue, 30 Nov 2004 10:09:34 -0500 (EST)
From: Xiangyu  Jin <xj3a@cs.virginia.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: similarity matrix - more clear
In-Reply-To: <41AC7E50.9040905@attentio.com>
Message-ID: <Pine.GSO.4.58.0411301004320.1439@cobra.cs.Virginia.EDU>
References: <41AC7E50.9040905@attentio.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N



I also have the same task as you do. According to my understanding,
suppose their are N documents, your approach will take N^2 similarity
calculations.

Although there are N(N-1)/2 distinct document pairs,
the similarity calculation (according to my understanding) in Lucene is
asymmetric, so this means you have to calculate N(N-1) similaries.
Therefore, seems your approach is not so redundant since you have to
calculate O(N^2) order of similarities.

On Tue, 30 Nov 2004, Roxana Angheluta wrote:

> Dear all,
>
> Yesterday I've asked a question about geting the similarity matrix of a
> collection of documents from an index, but I got only one answer, so
> perhaps my question was not very clear.
>
> I will try to reformulate:
>
> I want to use Lucene to have efficient access to an index of a
> collection of documents. My final purpose is to cluster documents.
> Therefore I need to have for each pair of documents a number signifying
> the similarity between them.
> A possible solution would be to initialize in turn each document as a
> query, do a search using an IndexSearcher and to take from the search
> result the similarity between the query (which is in fact a document)
> and all the other documents. This is highly redundant, because the
> similarity between a pair of documents is computed multiple times.
>
> I was wondering whether there is a simpler way to do it, since the index
> file contains all the information needed. Can anyone help me here?
>
> Thanks,
> roxana
>
> PS I know about the project Carrot2, which deals with document
> clustering, but I think is not appropriate for me because of 2 reasons:
> 1) I need to keep the index on the disk for further reusage
> 2) I need to be able to search efficiently in the index
> I thought Lucene can help me here, am I wrong?
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11549-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 15:55:23 2004
Return-Path: <lucene-user-return-11549-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 20370 invoked from network); 30 Nov 2004 15:55:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 15:55:23 -0000
Received: (qmail 53867 invoked by uid 500); 30 Nov 2004 15:54:34 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 53839 invoked by uid 500); 30 Nov 2004 15:54:34 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 53811 invoked by uid 99); 30 Nov 2004 15:54:33 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mhro1.mayo.edu (HELO mhro1.mayo.edu) (129.176.212.21)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 07:54:32 -0800
Received: from excsrv01.mayo.edu (excsrv01.mayo.edu [129.176.235.101]) by mhro1.mayo.edu with ESMTP for lucene-user@jakarta.apache.org; Tue, 30 Nov 2004 09:54:17 -0600
Received: by excsrv01.mayo.edu with Internet Mail Service (5.5.2653.19)
	id <W35F6MAD>; Tue, 30 Nov 2004 09:54:15 -0600
Message-Id: <A8FE2359D23B3243BF7EF44ADE36CA6628AD99@excsrv64.mayo.edu>
From: "Armbrust, Daniel C." <Armbrust.Daniel@mayo.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: What is the best file system for Lucene?
Date: Tue, 30 Nov 2004 09:54:12 -0600
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

You may want to give the IBM JVM a try - I've found it faster in some cases...

http://www-106.ibm.com/developerworks/java/jdk/linux140/


Dan 

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11550-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 15:59:32 2004
Return-Path: <lucene-user-return-11550-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 24739 invoked from network); 30 Nov 2004 15:59:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 15:59:32 -0000
Received: (qmail 69036 invoked by uid 500); 30 Nov 2004 15:58:46 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 69001 invoked by uid 500); 30 Nov 2004 15:58:44 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 68941 invoked by uid 99); 30 Nov 2004 15:58:43 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from mhro1.mayo.edu (HELO mhro1.mayo.edu) (129.176.212.21)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 07:58:42 -0800
Received: from excsrv01.mayo.edu (excsrv01.mayo.edu [129.176.235.101]) by mhro1.mayo.edu with ESMTP for lucene-user@jakarta.apache.org; Tue, 30 Nov 2004 09:58:19 -0600
Received: by excsrv01.mayo.edu with Internet Mail Service (5.5.2653.19)
	id <W35F6NQJ>; Tue, 30 Nov 2004 09:58:17 -0600
Message-Id: <A8FE2359D23B3243BF7EF44ADE36CA6628AD9D@excsrv64.mayo.edu>
From: "Armbrust, Daniel C." <Armbrust.Daniel@mayo.edu>
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: RE: What is the best file system for Lucene?
Date: Tue, 30 Nov 2004 09:58:13 -0600
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

As I understand hyperthreading, this is not true: 

>Also, unless you take your hyperthreading off, with just one index you are
>searching with just one half of the CPU - so your desktop is actually using
>a 1.5GHz CPU for the search.

You still have the full speed of the processor available - the processor itself just keeps switching between different threads of execution.  Some people have noted that some (single threaded) applications will run 5-10% slower when hyperthreading is turned on - but that depends on the app.  It certainly won't be running at half speed.

Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11551-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 16:19:18 2004
Return-Path: <lucene-user-return-11551-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 41680 invoked from network); 30 Nov 2004 16:19:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 16:19:18 -0000
Received: (qmail 33179 invoked by uid 500); 30 Nov 2004 16:17:49 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 33152 invoked by uid 500); 30 Nov 2004 16:17:49 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 33136 invoked by uid 99); 30 Nov 2004 16:17:48 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ares.cs.Virginia.EDU (HELO ares.cs.Virginia.EDU) (128.143.137.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 08:17:47 -0800
Received: from cobra.cs.Virginia.EDU (cobra.cs.Virginia.EDU [128.143.137.16])
	by ares.cs.Virginia.EDU (8.12.10/8.12.10/UVACS-2003031900) with ESMTP id iAUGHdM0006488
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 11:17:39 -0500 (EST)
Received: from localhost (xj3a@localhost)
	by cobra.cs.Virginia.EDU (8.12.10+Sun/8.12.10/Submit) with ESMTP id iAUGHcL9010336
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 11:17:39 -0500 (EST)
Date: Tue, 30 Nov 2004 11:17:38 -0500 (EST)
From: Xiangyu  Jin <xj3a@cs.virginia.edu>
To: lucene-user@jakarta.apache.org
Subject: Lucene's ranking function VS Standard VSM model
Message-ID: <Pine.GSO.4.58.0411301107440.1439@cobra.cs.Virginia.EDU>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


 I have seen different versions of Lucene's ranking function
from the similarity document and Lucene user list.

Since I need to get document-doucment similaries,
so what I do is to issue the document as query directly.
I found it is different if we issue "computer computer"
to Lucene vers we issue it to standard VSM. The latter one
will treat "computer computer" as "computer" but Lucene
doesn't.

In order to illustrate my question more clear, I write
a more formalized document

http://www.cs.virginia.edu/~xj3a/lucene_ranking.pdf

so that there is no ambiguity of those formulas.

I am not asure whether I understand correctly, but the
major reason comes from Lucene's query parser. It defaults
each term appear once. If we issue a query term multiple
times in the query string, it will result in some un-expected
results.

For detail information, pls refer to the attached link.

thanks

xiangyu jin

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11552-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 17:05:25 2004
Return-Path: <lucene-user-return-11552-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 77776 invoked from network); 30 Nov 2004 17:05:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 17:05:25 -0000
Received: (qmail 76195 invoked by uid 500); 30 Nov 2004 17:04:17 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76026 invoked by uid 500); 30 Nov 2004 17:04:15 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 75868 invoked by uid 99); 30 Nov 2004 17:04:14 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web12704.mail.yahoo.com (HELO web12704.mail.yahoo.com) (216.136.173.241)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 30 Nov 2004 09:04:12 -0800
Received: (qmail 92622 invoked by uid 60001); 30 Nov 2004 17:04:08 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=XMbRZgD4BM7rgi+JLLOyXIYEv/895A9QMInSHxOwQlWZxFwSeWsW4F9vhqkeYSQf7ZRDWjOtcsE6N1ebRbzjvoXh/UAk0PX/5Cc/6JJJ3ya25ggAawbqwvghhuPY2DoV5InHsPNSOI0bOFkuDzXan11x0lDDRjzgnWP7F4NtKX0=  ;
Message-ID: <20041130170408.92620.qmail@web12704.mail.yahoo.com>
Received: from [216.194.17.194] by web12704.mail.yahoo.com via HTTP; Tue, 30 Nov 2004 09:04:07 PST
Date: Tue, 30 Nov 2004 09:04:07 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: What is the best file system for Lucene?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20041130135015.66532.qmail@web21326.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

> Lucene indexing completes in 13-15 hours on the desktop system while
> it completes in about 29-33
> hours on the notebook.
> 
> Now, combine it with the DROP INDEX tests completing in the same
> amount of time on both and find
> out why is the search only slightly faster :)
> 
> > Until then, all your measurements are subjective and you
> > don't gain much by comparing the two indexing processes.
> 
> I'm worried about searching. Indexing is a lot faster on the desktop
> config.

This tells you that your problem is not the disk itself, and not the
fielsystem.  The bottleneck is elsewhere.

Why not run your search under a profiler?  That will tell you where the
JVM is spending its time.  It may even be in some weird InetAddress
call, like another person already pointed out.

Otis


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11553-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 17:15:04 2004
Return-Path: <lucene-user-return-11553-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 83411 invoked from network); 30 Nov 2004 17:15:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 17:15:03 -0000
Received: (qmail 16069 invoked by uid 500); 30 Nov 2004 17:14:51 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16045 invoked by uid 500); 30 Nov 2004 17:14:51 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16029 invoked by uid 99); 30 Nov 2004 17:14:51 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web12702.mail.yahoo.com (HELO web12702.mail.yahoo.com) (216.136.173.239)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 30 Nov 2004 09:14:45 -0800
Received: (qmail 21146 invoked by uid 60001); 30 Nov 2004 17:14:31 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=bh9QTwC54M+IeAzkS8Kc64MYN5GJZE4Je1CrUw2MnAyjSzeCE0cSMxVazndLz7eWlSsjpSgS+bwE+2tVQQ3tLrSnvE5ycvlFckBZfvWBOsAv2WvVMj+yYCJSpLcurWO4iMQvEdbBdAFTZxTcY6XhZ0VoB4TiswHaDL3YuwNsoR4=  ;
Message-ID: <20041130171429.21139.qmail@web12702.mail.yahoo.com>
Received: from [216.194.17.194] by web12702.mail.yahoo.com via HTTP; Tue, 30 Nov 2004 09:14:29 PST
Date: Tue, 30 Nov 2004 09:14:29 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: similarity matrix - more clear
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <41AC7E50.9040905@attentio.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hello,

I don't think Lucene can spit out the similarity matrix for you, but
perhaps you can use Lucene's Term Vector support to help you build the
matrix yourself:
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/TermFreqVector.html

The other relevant sections of the Lucene API to look at are:
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/index/IndexReader.html#getTermFreqVectors(int)
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/document/Field.html#Text(java.lang.String,%20java.io.Reader,%20boolean)
...

This should let you tell Lucene to compute and store term vectors
during indexing, and then you will be able to retrieve a Term Vector
for each Document in the index/collection.  Armed with this data you
should be able to compute similarities between Documents with TV dot
products/cosines, which should be enough for you to build your
similarity matrix.

This sounds like something that would be nice to have in the Lucene
Sandbox, so if you end up with some code that you are allowed to share,
please contribute it back to Lucene.

Otis

--- Roxana Angheluta <roxana@attentio.com> wrote:

> Dear all,
> 
> Yesterday I've asked a question about geting the similarity matrix of
> a 
> collection of documents from an index, but I got only one answer, so 
> perhaps my question was not very clear.
> 
> I will try to reformulate:
> 
> I want to use Lucene to have efficient access to an index of a 
> collection of documents. My final purpose is to cluster documents. 
> Therefore I need to have for each pair of documents a number
> signifying 
> the similarity between them.
> A possible solution would be to initialize in turn each document as a
> 
> query, do a search using an IndexSearcher and to take from the search
> 
> result the similarity between the query (which is in fact a document)
> 
> and all the other documents. This is highly redundant, because the 
> similarity between a pair of documents is computed multiple times.
> 
> I was wondering whether there is a simpler way to do it, since the
> index 
> file contains all the information needed. Can anyone help me here?
> 
> Thanks,
> roxana
> 
> PS I know about the project Carrot2, which deals with document 
> clustering, but I think is not appropriate for me because of 2
> reasons:
> 1) I need to keep the index on the disk for further reusage
> 2) I need to be able to search efficiently in the index
> I thought Lucene can help me here, am I wrong?
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-user-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11554-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 17:47:10 2004
Return-Path: <lucene-user-return-11554-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 8551 invoked from network); 30 Nov 2004 17:47:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 17:47:10 -0000
Received: (qmail 16702 invoked by uid 500); 30 Nov 2004 17:46:57 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 16683 invoked by uid 500); 30 Nov 2004 17:46:56 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 16668 invoked by uid 99); 30 Nov 2004 17:46:56 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from ares.cs.Virginia.EDU (HELO ares.cs.Virginia.EDU) (128.143.137.19)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 09:46:55 -0800
Received: from cobra.cs.Virginia.EDU (cobra.cs.Virginia.EDU [128.143.137.16])
	by ares.cs.Virginia.EDU (8.12.10/8.12.10/UVACS-2003031900) with ESMTP id iAUHkoM0028973
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 12:46:50 -0500 (EST)
Received: from localhost (xj3a@localhost)
	by cobra.cs.Virginia.EDU (8.12.10+Sun/8.12.10/Submit) with ESMTP id iAUHkox0011770
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 12:46:50 -0500 (EST)
Date: Tue, 30 Nov 2004 12:46:50 -0500 (EST)
From: Xiangyu  Jin <xj3a@cs.virginia.edu>
To: lucene-user@jakarta.apache.org
Subject: Does Lucene perform ranking in the retrieved set?
Message-ID: <Pine.GSO.4.58.0411301240140.1439@cobra.cs.Virginia.EDU>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


THis might be a stupid question.

When perform retrieval for a query, deos Lucene first get
a subset of candidate matches and then perform the ranking
on the set? That is, similarity calculation is performed only
on a subset of the docuemnts to the query.

If so, from which module could I get those candidate docs,
then I can perform my own similarity calculations (since
I might need to rewrite the normalization factor, so
only modify the "similarity" model seems will not
work).

Or, is there document describe the produre of how Lucene
perform search?

thanks

xiangyu jin

---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11555-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 18:04:07 2004
Return-Path: <lucene-user-return-11555-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 30781 invoked from network); 30 Nov 2004 18:04:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 18:04:07 -0000
Received: (qmail 76173 invoked by uid 500); 30 Nov 2004 18:00:38 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 76112 invoked by uid 500); 30 Nov 2004 18:00:37 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 76053 invoked by uid 99); 30 Nov 2004 18:00:37 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web12706.mail.yahoo.com (HELO web12706.mail.yahoo.com) (216.136.173.243)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 30 Nov 2004 10:00:34 -0800
Received: (qmail 77896 invoked by uid 60001); 30 Nov 2004 18:00:29 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=SSikTaxjCZ7bUjQvlgm00fh87O9/rdWD6bN9745DNTAG2CVOH+Gy/NUSlLQUMjnn1jFTO1us5D0rVfaFhRK2DnWr7tiGKrWf3mCFwXpOYCLuxnq38JoBPPIyK2Gs23kZvRkkFt/uPEJpm6NCWwrSyPkrcX7nHAQO+DV/keSTtyA=  ;
Message-ID: <20041130180029.77894.qmail@web12706.mail.yahoo.com>
Received: from [216.194.17.194] by web12706.mail.yahoo.com via HTTP; Tue, 30 Nov 2004 10:00:29 PST
Date: Tue, 30 Nov 2004 10:00:29 -0800 (PST)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Does QueryParser uses Analyzer ?
To: lucene-user@jakarta.apache.org
Cc: A448@alunos.ipca.pt
In-Reply-To: <41AC94E5.6060302@alunos.ipca.pt>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

QueryParser does use Analyzer, see this:

  static public Query parse(String query, String field, Analyzer
analyzer)
       throws ParseException {
    QueryParser parser = new QueryParser(field, analyzer); <<<<<<<
    return parser.parse(query);
  }

Otis
P.S.
Use lucene-user list, please.


--- Ricardo Lopes <A448@alunos.ipca.pt> wrote:

> Does the QueryParser class really uses the Analyzer passed to the
> parse 
> method ?
> 
> I look at the code and i dont the object beeing used anywhere in the 
> class. The problem is that i am writting an application with lucene
> that 
> searches using a foreign language with latin characters, the indexing
> 
> works fine, but the search aparently doesn't call the Analyzer.
> 
> Here is an example:
> i have a file that contains the following word: memria
> if i search for: memoria (without the puntuation charecter in the o)
> it 
> finds the word, which is correct
> if i search for: memria (the exact same word) it doesn't find the
> word, 
> because the QueryParser splits the word to "mem ria", but if the 
> analyzer were called the "" would be replaced to "o". I guess the 
> analyzer isn't called, is this right?
> 
> Thanks in advance,
> Ricardo Lopes
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: lucene-dev-unsubscribe@jakarta.apache.org
> For additional commands, e-mail: lucene-dev-help@jakarta.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11556-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 18:27:41 2004
Return-Path: <lucene-user-return-11556-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 58295 invoked from network); 30 Nov 2004 18:27:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 18:27:41 -0000
Received: (qmail 66010 invoked by uid 500); 30 Nov 2004 18:23:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 65979 invoked by uid 500); 30 Nov 2004 18:23:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 65946 invoked by uid 99); 30 Nov 2004 18:23:53 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from smtp-vbr9.xs4all.nl (HELO smtp-vbr9.xs4all.nl) (194.109.24.29)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 10:23:37 -0800
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr9.xs4all.nl (8.12.11/8.12.11) with ESMTP id iAUINQb9075665
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 19:23:26 +0100 (CET)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: lucene-user@jakarta.apache.org
Subject: Re: Does Lucene perform ranking in the retrieved set?
Date: Tue, 30 Nov 2004 19:23:26 +0100
User-Agent: KMail/1.5.4
References: <Pine.GSO.4.58.0411301240140.1439@cobra.cs.Virginia.EDU>
In-Reply-To: <Pine.GSO.4.58.0411301240140.1439@cobra.cs.Virginia.EDU>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200411301923.26135.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Tuesday 30 November 2004 18:46, Xiangyu Jin wrote:
> 
> THis might be a stupid question.
> 
> When perform retrieval for a query, deos Lucene first get
> a subset of candidate matches and then perform the ranking
> on the set? That is, similarity calculation is performed only
> on a subset of the docuemnts to the query.

Yes, Lucene uses  an inverted index for this.

> If so, from which module could I get those candidate docs,
> then I can perform my own similarity calculations (since
> I might need to rewrite the normalization factor, so
> only modify the "similarity" model seems will not
> work).

To change the normalisation you may consider implementing
your own Weight:
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/Weight.html
For some example implementations of Weight the Lucene source
code in the org.apache.lucene.search package is the best resource.

Using your own Weight also requires a subclass of Query that returns
this weight in the createWeight() method.

> Or, is there document describe the produre of how Lucene
> perform search?

This describes the scoring:
http://jakarta.apache.org/lucene/docs/api/org/apache/lucene/search/Similarity.html
See also the DefaultSimilarity.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11557-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 19:39:27 2004
Return-Path: <lucene-user-return-11557-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4065 invoked from network); 30 Nov 2004 19:39:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 19:39:26 -0000
Received: (qmail 47192 invoked by uid 500); 30 Nov 2004 19:39:15 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 47141 invoked by uid 500); 30 Nov 2004 19:39:14 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 47044 invoked by uid 99); 30 Nov 2004 19:39:13 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from web21327.mail.yahoo.com (HELO web21327.mail.yahoo.com) (216.136.175.216)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 30 Nov 2004 11:39:12 -0800
Received: (qmail 18514 invoked by uid 60001); 30 Nov 2004 19:39:10 -0000
Comment: DomainKeys? See http://antispam.yahoo.com/domainkeys
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  b=xo+HLQUwpYMLV2ItlfWVydPGWuL79FMPzOlDOKJ9raOY1XIHh+d/+yZuwGgxTC+plmnS5KLfpr0dEmeunfwB+fWJupKxytdbEgDroo3AYdo9t+jiBS2zSDe/0P0aXlSCzDCtSkJT25f1dQnuvDf8XMMBPWEWeYZQkjvfaKWROYw=  ;
Message-ID: <20041130193910.18512.qmail@web21327.mail.yahoo.com>
Received: from [81.182.59.121] by web21327.mail.yahoo.com via HTTP; Tue, 30 Nov 2004 11:39:10 PST
Date: Tue, 30 Nov 2004 11:39:10 -0800 (PST)
From: Sanyi <need4sid@yahoo.com>
Subject: Re: What is the best file system for Lucene?
To: Lucene Users List <lucene-user@jakarta.apache.org>
In-Reply-To: <20041130170408.92620.qmail@web12704.mail.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Thanx for the replies to you all.
I was looking for someone with the same experiences as mine ones, but it seems that I'll have to
test this myself.
I'll try out my ideas and the most interesting ideas from you guys.

Regards,
Sanyi


		
__________________________________ 
Do you Yahoo!? 
Meet the all-new My Yahoo! - Try it today! 
http://my.yahoo.com 
 


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11558-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 21:40:48 2004
Return-Path: <lucene-user-return-11558-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 78505 invoked from network); 30 Nov 2004 21:40:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 21:40:47 -0000
Received: (qmail 62707 invoked by uid 500); 30 Nov 2004 21:40:08 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 62660 invoked by uid 500); 30 Nov 2004 21:40:07 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 62609 invoked by uid 99); 30 Nov 2004 21:40:07 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO tango.casebank.com) (209.167.138.140)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 13:40:06 -0800
Received: from aatamer ([172.17.232.22]) by tango.casebank.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 30 Nov 2004 16:40:33 -0500
From: "Allen Atamer" <aatamer@casebank.com>
To: <lucene-user@jakarta.apache.org>
Subject: literal search in quotes on non-tokenized field
Date: Tue, 30 Nov 2004 16:42:44 -0500
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0642_01C4D6FB.9DF2B1C0"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcTXJYUuMotJ/kZGSOmA8Mcdpe/boA==
Message-ID: <TANGO0oaBfvQeVe0F7H00004a20@tango.casebank.com>
X-OriginalArrivalTime: 30 Nov 2004 21:40:34.0015 (UTC) FILETIME=[38D03EF0:01C4D725]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0642_01C4D6FB.9DF2B1C0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

Here is a problem I am experiencing with Lucene searches on non-tokenized
fields:
 
A search in quotes on a field named Build with the query "\"orig\"" does not
work but the query "origi" yields 62 hits
 
I have run indexing on the field with the following method
 
                    doc.add(Field.Keyword(data.getColumnName(j),
                            fieldValue.toString().toLowerCase()));
 
so even though the original data has "ORIGI" in the "Build" field, lowercase
is not the problem
 
Here's a log of the parsed query before going to the searcher:
 
Parsed query: (Build:"origi") for the first search
Parsed query: (Build:origi) for the second search
 
Right now we're not using a query parser / analyzer system to build the
query. We're building the query up.
The query mentioned above is a TermQuery object
 
Thanks 

------=_NextPart_000_0642_01C4D6FB.9DF2B1C0--


From lucene-user-return-11559-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 21:51:31 2004
Return-Path: <lucene-user-return-11559-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 84003 invoked from network); 30 Nov 2004 21:51:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 21:51:31 -0000
Received: (qmail 90170 invoked by uid 500); 30 Nov 2004 21:51:23 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 90149 invoked by uid 500); 30 Nov 2004 21:51:23 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 90125 invoked by uid 99); 30 Nov 2004 21:51:23 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from fork11.mail.Virginia.EDU (HELO fork11.mail.virginia.edu) (128.143.2.181)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 13:51:21 -0800
Received: from localhost (localhost [127.0.0.1])
	by fork11.mail.virginia.edu (Postfix) with ESMTP id 1ED311F5232
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 16:51:19 -0500 (EST)
Received: from fork11.mail.virginia.edu ([127.0.0.1])
 by localhost (fork11.mail.virginia.edu [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 03281-08 for <lucene-user@jakarta.apache.org>;
 Tue, 30 Nov 2004 16:51:18 -0500 (EST)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by fork11.mail.virginia.edu (Postfix) with ESMTP id 87CA71F5249
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 16:51:18 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <TANGO0oaBfvQeVe0F7H00004a20@tango.casebank.com>
References: <TANGO0oaBfvQeVe0F7H00004a20@tango.casebank.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <FBE614DC-4319-11D9-B17D-000A95BC61B6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: literal search in quotes on non-tokenized field
Date: Tue, 30 Nov 2004 16:51:26 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-UVA-Virus-Scanned: by amavisd-new at fork11.mail.virginia.edu
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

On Nov 30, 2004, at 4:42 PM, Allen Atamer wrote:
> A search in quotes on a field named Build with the query "\"orig\"" 
> does not
> work but the query "origi" yields 62 hits
>
> I have run indexing on the field with the following method
>
>                     doc.add(Field.Keyword(data.getColumnName(j),
>                             fieldValue.toString().toLowerCase()));
>
> so even though the original data has "ORIGI" in the "Build" field, 
> lowercase
> is not the problem
>
> Here's a log of the parsed query before going to the searcher:
>
> Parsed query: (Build:"origi") for the first search
> Parsed query: (Build:origi) for the second search

What do you mean by "parsed", since below you say you're not using 
QueryParser/Analyzer.

> Right now we're not using a query parser / analyzer system to build the
> query. We're building the query up.
> The query mentioned above is a TermQuery object

Let me hopefully clarify what you've said.... you've indexed (I'm not 
using quotes on purpose) origi, but you're doing a TermQuery on "origi" 
(with the quotes) and expecting it to match?

It doesn't work that way.  A TermQuery must match *exactly* what was 
indexed (either directly as a Keyword, or as tokens emitted from the 
analyzer).  Since you're building the query up yourself from, I'm 
assuming, user input, you may need to pre-process what the user entered 
to get the right term to query on.  Only the term origi would match.

I'm in the process of building a search system for some library 
archives and the single hardest thing about my work is building the 
user interface and making it work like users would like.  Humanities 
academics are by far the most particular crowd ever.  My suggestion of 
making a single text box that they type words into to query which I 
would lowercase and tokenize into a Boolean OR query was shot down 
quickly as being insufficient.   :)  Case-sensitive and insensitive 
searches are desired with all sort of other accommodations.   In fact, 
they suggested I write an article on my experience of building a search 
interface.  The underlying indexing and searching is trivial compared 
to the interface!

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11560-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 22:48:19 2004
Return-Path: <lucene-user-return-11560-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 9529 invoked from network); 30 Nov 2004 22:48:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 22:48:18 -0000
Received: (qmail 7728 invoked by uid 500); 30 Nov 2004 22:48:12 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 7710 invoked by uid 500); 30 Nov 2004 22:48:12 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 7696 invoked by uid 99); 30 Nov 2004 22:48:12 -0000
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (hermes.apache.org: local policy)
Received: from keyserver.Rescomp.Berkeley.EDU (HELO rescomp.berkeley.edu) (169.229.70.167)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 14:48:11 -0800
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 765EE5B82C; Tue, 30 Nov 2004 14:48:06 -0800 (PST)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 746E67F45C
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 14:48:06 -0800 (PST)
Date: Tue, 30 Nov 2004 14:48:06 -0800 (PST)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Re: similarity matrix - more clear
In-Reply-To: <41AC7E50.9040905@attentio.com>
Message-ID: <Pine.LNX.4.58.0411301431540.9227@hal.rescomp.berkeley.edu>
References: <41AC7E50.9040905@attentio.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

: A possible solution would be to initialize in turn each document as a
: query, do a search using an IndexSearcher and to take from the search
: result the similarity between the query (which is in fact a document)
: and all the other documents. This is highly redundant, because the
: similarity between a pair of documents is computed multiple times.

A simpler aproach that i can think of would be to iterate over a complete
TermEnum of hte index, and for each Term, get the corisponding TermDocs
enumerator to list every document that contains that term.  Assuming that
every pair of docs initially has a similarity of "0" this would allow you
to incriment the similarity of each pair everytime you find a term that
multiple docs have in common.  (the amount you incriment the score for
each pair could be based on TermEnum.docFreq() and TermDocs.freq()).

A very simple approach might be something like...

   IndexReader r = ...;
   int[][] scores = new int[r.maxDocs()][r.maxDocs()];
   TermEnum enumerator = r.terms();
   TermDocs termDocs = r.termDocs();
   do {
      Term term = enumerator.term();
      if (term != null) {
         termDocs.seek(enumerator.term());
         Map docs = new HashMap();
         while (termDocs.next()) {
            docs.put(termDocs.doc(),termDoc.freq());
         }
         for (Iterator i = docs.keySet().iterator(); i.hasNext();) {
            for (Iterator j = docs.keySet().iterator(); j.hasNext();) {
               ii == i.next();
               jj = j.next();
               if (ii < jj) {
                  continue; // do each pair only once
               }
               scores[jj][ii] += (docs.get(ii) + docs.get(jj)) / 2
            }
         }
      } else {
         break;
      }
   } while (enumerator.next());


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11561-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Tue Nov 30 22:59:41 2004
Return-Path: <lucene-user-return-11561-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 13961 invoked from network); 30 Nov 2004 22:59:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 30 Nov 2004 22:59:40 -0000
Received: (qmail 30257 invoked by uid 500); 30 Nov 2004 22:59:00 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 30210 invoked by uid 500); 30 Nov 2004 22:59:00 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 30162 invoked by uid 99); 30 Nov 2004 22:58:59 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO tango.casebank.com) (209.167.138.140)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 14:58:58 -0800
Received: from aatamer ([172.17.232.22]) by tango.casebank.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 30 Nov 2004 17:59:26 -0500
From: "Allen Atamer" <aatamer@casebank.com>
To: "'Lucene Users List'" <lucene-user@jakarta.apache.org>
Subject: RE: literal search in quotes on non-tokenized field
Date: Tue, 30 Nov 2004 18:01:37 -0500
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <FBE614DC-4319-11D9-B17D-000A95BC61B6@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcTXJtCAo7RdlHO8TVmgtkUrWUuaDwAAYnPg
Message-ID: <TANGOYQGKgfEUrIQiru00004a8f@tango.casebank.com>
X-OriginalArrivalTime: 30 Nov 2004 22:59:26.0531 (UTC) FILETIME=[3D9CE130:01C4D730]
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Erik,


> -----Original Message-----
> > Here's a log of the parsed query before going to the searcher:
> >
> > Parsed query: (Build:"origi") for the first search
> > Parsed query: (Build:origi) for the second search
> 
> What do you mean by "parsed", since below you say you're not using
> QueryParser/Analyzer.


Sorry, that's residual log text. The lines of code are 

BooleanQuery totalQuery = new BooleanQuery();

.. logic to build totalQuery ...

log.debug("Parsed query: " + totalQuery.toString());
dbSearchHits = searcher.search(totalQuery);


> > Right now we're not using a query parser / analyzer system to build the
> > query. We're building the query up.
> > The query mentioned above is a TermQuery object
> 
> Let me hopefully clarify what you've said.... you've indexed (I'm not
> using quotes on purpose) origi, but you're doing a TermQuery on "origi"
> (with the quotes) and expecting it to match?
> 
> It doesn't work that way.  A TermQuery must match *exactly* what was
> indexed (either directly as a Keyword, or as tokens emitted from the
> analyzer).  Since you're building the query up yourself from, I'm
> assuming, user input, you may need to pre-process what the user entered
> to get the right term to query on.  Only the term origi would match.

Yeah but it doesn't. The exact text in the database is ORIGI. Keyword
doesn't work if you supply more than one word. In fact we're doing it wrong.
Fields with a small number of terms should not be indexed as keyword, but
tokenized. I'm going to change the indexing strategy to only use keyword
when there's one and only one keyword in the data itself. Fields with two to
three words will be tokenized with the NoTokenizingTokenizer that was posted
earlier, and fields with four or more words will be tokenized with
MyTokenizer.

All we need to do for searching keyword fields is remove the double quotes
to be consistent with searching in a tokenized field. Then use QueryParser
to parse the tokenized fields with the appropriate parser for the field.
This should solve the problem.

Thanks


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11562-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Dec 01 00:16:02 2004
Return-Path: <lucene-user-return-11562-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 49848 invoked from network); 1 Dec 2004 00:16:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Dec 2004 00:16:01 -0000
Received: (qmail 58022 invoked by uid 500); 1 Dec 2004 00:15:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 57988 invoked by uid 500); 1 Dec 2004 00:15:54 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 57972 invoked by uid 99); 1 Dec 2004 00:15:54 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO ehatchersolutions.com) (69.55.225.129)
  by apache.org (qpsmtpd/0.28) with ESMTP; Tue, 30 Nov 2004 16:15:52 -0800
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3BA9F13E28F8; Tue, 30 Nov 2004 19:15:48 -0500 (EST)
Received: from [192.168.1.101] (va-chrvlle-cad1-bdgrp1-4b-b-169.chvlva.adelphia.net [68.169.41.169])
	by ehatchersolutions.com (Postfix) with ESMTP id C79E213E28F7
	for <lucene-user@jakarta.apache.org>; Tue, 30 Nov 2004 19:14:33 -0500 (EST)
Mime-Version: 1.0 (Apple Message framework v619)
In-Reply-To: <TANGOYQGKgfEUrIQiru00004a8f@tango.casebank.com>
References: <TANGOYQGKgfEUrIQiru00004a8f@tango.casebank.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <FD31B3E8-432D-11D9-8A88-000393A564E6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: literal search in quotes on non-tokenized field
Date: Tue, 30 Nov 2004 19:14:38 -0500
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
X-Mailer: Apple Mail (2.619)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Status: No, score=-2.7 required=5.0 tests=AWL,BAYES_00,
	RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL autolearn=no version=3.0.1
X-Spam-Level: 
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N


On Nov 30, 2004, at 6:01 PM, Allen Atamer wrote:
>> It doesn't work that way.  A TermQuery must match *exactly* what was
>> indexed (either directly as a Keyword, or as tokens emitted from the
>> analyzer).  Since you're building the query up yourself from, I'm
>> assuming, user input, you may need to pre-process what the user 
>> entered
>> to get the right term to query on.  Only the term origi would match.
>
> Yeah but it doesn't. The exact text in the database is ORIGI.

But you lowercased what you indexed (in the code you sent).

>  Keyword
> doesn't work if you supply more than one word.

Depends on what you mean by "doesn't work".  It works as expected. 
Keyword fields are not tokenized and thus a TermQuery on it has to be 
exactly the value you supplied.  But it sounds like you've got a handle 
on the situation now.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


From lucene-user-return-11563-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org Wed Dec 01 05:39:03 2004
Return-Path: <lucene-user-return-11563-apmail-jakarta-lucene-user-archive=jakarta.apache.org@jakarta.apache.org>
Delivered-To: apmail-jakarta-lucene-user-archive@www.apache.org
Received: (qmail 4923 invoked from network); 1 Dec 2004 05:39:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur-2.apache.org with SMTP; 1 Dec 2004 05:39:02 -0000
Received: (qmail 43892 invoked by uid 500); 1 Dec 2004 05:38:54 -0000
Delivered-To: apmail-jakarta-lucene-user-archive@jakarta.apache.org
Received: (qmail 43872 invoked by uid 500); 1 Dec 2004 05:38:53 -0000
Mailing-List: contact lucene-user-help@jakarta.apache.org; run by ezmlm
Precedence: bulk
List-Unsubscribe: <mailto:lucene-user-unsubscribe@jakarta.apache.org>
List-Subscribe: <mailto:lucene-user-subscribe@jakarta.apache.org>
List-Help: <mailto:lucene-user-help@jakarta.apache.org>
List-Post: <mailto:lucene-user@jakarta.apache.org>
List-Id: "Lucene Users List" <lucene-user.jakarta.apache.org>
Reply-To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Delivered-To: mailing list lucene-user@jakarta.apache.org
Received: (qmail 43855 invoked by uid 99); 1 Dec 2004 05:38:53 -0000
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from Unknown (HELO daakghar.controlnet.co.in) (203.199.26.74)
  by apache.org (qpsmtpd/0.28) with SMTP; Tue, 30 Nov 2004 21:38:51 -0800
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id I814E100.N2M for <lucene-user@jakarta.apache.org>; Wed,
          1 Dec 2004 11:24:01 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "Lucene Users List" <lucene-user@jakarta.apache.org>
Subject: RE: GETVALUES +SEARCH
Date: Wed, 1 Dec 2004 11:11:27 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKIEALCAAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
In-Reply-To: <22BF7BB8-42DD-11D9-8C76-000A95BC61B6@ehatchersolutions.com>
X-MimeOLE: Produced By Microsoft MimeOLE V5.50.4927.1200
X-Virus-Checked: Checked
X-Spam-Rating: minotaur-2.apache.org 1.6.2 0/1000/N

Hi Guys


Apologies...........



   Is there any API in Lucene Which can retrieve all the searched Values in
single fetch

   into some sort of an 'Array'   WITHOUT using this [ below ] Looping
process [ This would make

   the Search and display more Faster ].

     for (int i = 0; i < hits.length();i++) {
	      Document doc = hits.doc(i);
	      String path  = doc.get("path");
            .....
     }



Thx in Advance
Karthik


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Tuesday, November 30, 2004 8:06 PM
To: Lucene Users List
Subject: Re: GETVALUES +SEARCH



On Nov 30, 2004, at 7:10 AM, Karthik N S wrote:
> On Search API the command  [ package
> org.apache.lucene.document.Document ]
>
> Will this    'public final String[] getValues(String name)'     return
> me
> all the docs with out looping  thru ?

getValues(fieldName) returns a String[] of the values of the field.
It's similar to getValue(fieldName).  If you index a field multiple
times:

	doc.add(Field.Keyword("keyword", "one"));
	doc.add(Field.Keyword("keyword", "two"));

getValue("keyword") will return "one", but getValues("keyword") will
return a String[] {"one", "two"}

If you want to retrieve all documents, use IndexReader's various API
methods.

	Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: lucene-user-unsubscribe@jakarta.apache.org
For additional commands, e-mail: lucene-user-help@jakarta.apache.org


