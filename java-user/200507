From java-user-return-15252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 07:37:44 2005
Return-Path: <java-user-return-15252-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37825 invoked from network); 1 Jul 2005 07:37:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 07:37:44 -0000
Received: (qmail 18985 invoked by uid 500); 1 Jul 2005 07:37:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18945 invoked by uid 500); 1 Jul 2005 07:37:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18931 invoked by uid 99); 1 Jul 2005 07:37:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 00:37:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.194 as permitted sender)
Received: from [64.233.184.194] (HELO wproxy.gmail.com) (64.233.184.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 00:37:34 -0700
Received: by wproxy.gmail.com with SMTP id 71so265520wri
        for <java-user@lucene.apache.org>; Fri, 01 Jul 2005 00:37:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=tU2ly7sUDMAX3skhINLwrrOjAytVHMGH96VzbyF56K+aa4t2Wwd24pbTj2r2aFADTukxDw/k9joz8gifDide5xgJQHcVu8mJbs/MUcsxkJ13aMnpLHaGmI+IWQ9/Hb49zlFRPt1lKrX1hbQOtxs06E0XMpA2mE7cpTbQxbc52GI=
Received: by 10.54.101.2 with SMTP id y2mr1221542wrb;
        Fri, 01 Jul 2005 00:37:30 -0700 (PDT)
Received: by 10.54.24.60 with HTTP; Fri, 1 Jul 2005 00:37:29 -0700 (PDT)
Message-ID: <6e3ae631050701003773b3da1b@mail.gmail.com>
Date: Fri, 1 Jul 2005 00:37:29 -0700
From: Chris Lu <chris.lu@gmail.com>
Reply-To: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Vedr. Re: Design question [too many fields?]
In-Reply-To: <20050701065713.8697.qmail@web50506.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42C4B835.6010703@gmail.com>
	 <20050701065713.8697.qmail@web50506.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> It is anyway going to be too many fields then? Days of
> year for the whole year ahead? Since the fromDate and
> toDate can be across two months and the customer wants
> the data be available for one year.

It won't have too many fields.
> > My suggestion is, use "year" + "month" + "day" three
> > fields to store
"day" field means days for one month. So "month" and "day" two fields
will have 12 and 31 values respectively.
And "year" field depends on what data you got. I guess your data won't
span accross 1024 years.

--=20
Chris Lu
---------------------
Full-Text Search on Any Database
http://www.dbsight.net

On 6/30/05, Naimdjon Takhirov <tnaim1@yahoo.com> wrote:
> Hi Chris,
>=20
> It is anyway going to be too many fields then? Days of
> year for the whole year ahead? Since the fromDate and
> toDate can be across two months and the customer wants
> the data be available for one year.
>=20
> Naimdjon
>=20
> --- Chris Lu <chris.lu@gmail.com> skrev:
>=20
> > Mark, your suggestion will incur another trip to the
> > database. And if
> > the search results is large, filtering in DB by pk
> > is not really good.
> >
> > Erik, your original "date" field is good when there
> > is not many
> > dates(<1024) in the database. Otherwise, Range Query
> > can not handle it.
> >
> > My suggestion is, use "year" + "month" + "day" three
> > fields to store
> > date. And when searching, for example, any date
> > that's greater than
> > 2005-06-30, you can use this query to search: ( year
> > > 2005 ) or  (
> > year=3D2005 and month>=3D6) or ( year=3D2005 and month=3D6
> > and day > 30 ).
> > It's a combination of BooleanQuery, TermQuery, and
> > RangeQuery.
> >
> > This may seem cumbersome, but it can save one trip
> > to database, and
> > circumvent Lucene's limitation.
> >
> > Chris Lu
> > http://www.dbsight.net
> >
> > Erik Hatcher wrote:
> >
> > > I second Mark's suggestion over the alternative I
> > posted.  My
> > > alternative was merely to invert the field
> > structure originally
> > > described, but using a Filter for the volatile
> > information is wiser.
> > >
> > >     Erik
> > >
> > > On Jun 29, 2005, at 9:58 AM, mark harwood wrote:
> > >
> > >> Presumably there is also a free-text element to
> > the
> > >> search or you wouldn't be using Lucene.
> > >>
> > >> Multiple fields is not the way to go.
> > >> A single Lucene field could contain multiple
> > terms (
> > >> the available dates) but I still don't think
> > that's
> > >> the best solution.
> > >> The availability info is likely to be pretty
> > volatile
> > >> and you always want up-to-date info so I would
> > prefer
> > >> to hit a database for this. If you keep a DB
> > primary
> > >> key to Lucene doc id look-up cached in memory you
> > can
> > >> quickly construct a Lucene filter from the
> > database
> > >> results and therefore only show Lucene results
> > for
> > >> available rooms.
> > >>
> > >> Cheers
> > >> Mark
> > >>
> > >>
> > >>
> > >>
> >
> ___________________________________________________________
> > >> How much free photo storage do you get? Store
> > your holiday
> > >> snaps for FREE with Yahoo! Photos
> > http://uk.photos.yahoo.com
> > >>
> > >>
> >
> ---------------------------------------------------------------------
> > >> To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > >>
> > >
> > >
> > >
> >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 08:41:59 2005
Return-Path: <java-user-return-15253-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63288 invoked from network); 1 Jul 2005 08:41:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 08:41:58 -0000
Received: (qmail 90698 invoked by uid 500); 1 Jul 2005 08:41:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90645 invoked by uid 500); 1 Jul 2005 08:41:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90629 invoked by uid 99); 1 Jul 2005 08:41:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 01:41:50 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.7.81.164] (HELO mx1.idowa.net) (217.7.81.164)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 01:41:52 -0700
Received: from mx1.idowa.net (localhost [127.0.0.1])
	by mx1-int.idowa.de (Postfix) with ESMTP id CAF91101392
	for <java-user@lucene.apache.org>; Fri,  1 Jul 2005 10:41:44 +0200 (CEST)
Received: from mail0.vn.idowa.de (vl-gw-float.sr.idowa.net [217.7.81.140])
	by mx1-sa.idowa.net (Postfix) with ESMTP id BB81010136A
	for <java-user@lucene.apache.org>; Fri,  1 Jul 2005 10:41:44 +0200 (CEST)
Received: from [192.168.31.5] (unknown [192.168.31.5])
	by mail0.vn.idowa.de (Postfix) with ESMTP id 1772E510D9
	for <java-user@lucene.apache.org>; Fri,  1 Jul 2005 10:41:44 +0200 (CEST)
Message-ID: <42C501B7.6070009@idowa.de>
Date: Fri, 01 Jul 2005 10:41:27 +0200
From: Harald Stowasser <stowasser.h@idowa.de>
User-Agent: Mozilla/5.0 (Windows; U; Windows NT 5.0; de-AT; rv:1.7.2) Gecko/20040803
X-Accept-Language: de, en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: [Project-advertisement] myDbSearcher.
X-Enigmail-Version: 0.86.1.0
X-Enigmail-Supports: pgp-inline, pgp-mime
Content-Type: multipart/signed; micalg=pgp-sha1;
 protocol="application/pgp-signature";
 boundary="------------enig78F9B6F3539B77FB99F23B98"
X-Spam-Checker-Version: SpamAssassin 3.0.0 (2004-09-13) on hermes.idowa.de
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.7 required=5.0 tests=AWL,BAYES_40 autolearn=ham 
	version=3.0.0
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------enig78F9B6F3539B77FB99F23B98
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hello lucene list readers.

We have decided to put my MySQL-Lucene-search-engine under the GPL.
Maybe you can use it:
http://sourceforge.net/projects/mydbsearcher/

First implementation is running there:
http://www.idowa.de/ueberblick/suche/index_html (German Newspaper)

And it would be nice, if anyone want to aid me a little bit. Simply
because I don't have plenty of time. The next project is already in the
fledgling stages.

Thank you for reading,
  Harald.


--------------enig78F9B6F3539B77FB99F23B98
Content-Type: application/pgp-signature; name="signature.asc"
Content-Description: OpenPGP digital signature
Content-Disposition: attachment; filename="signature.asc"

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.2.4 (MingW32)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org

iD8DBQFCxQG8d2ByLviqWmYRAmNDAJ0R21PjBsNq07WTNXSJEXTTv+h7CwCdEqzM
lNqKXxOyDeIdBuyPb4bt02c=
=M5uj
-----END PGP SIGNATURE-----

--------------enig78F9B6F3539B77FB99F23B98--


From java-user-return-15254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 09:39:56 2005
Return-Path: <java-user-return-15254-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87330 invoked from network); 1 Jul 2005 09:39:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 09:39:55 -0000
Received: (qmail 75238 invoked by uid 500); 1 Jul 2005 09:39:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75063 invoked by uid 500); 1 Jul 2005 09:39:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74908 invoked by uid 99); 1 Jul 2005 09:39:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 02:39:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 02:39:38 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 886CE13E2005; Fri,  1 Jul 2005 05:39:30 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 54D7F13E2006
	for <java-user@lucene.apache.org>; Fri,  1 Jul 2005 05:39:02 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42C4B835.6010703@gmail.com>
References: <20050629135856.83265.qmail@web26004.mail.ukl.yahoo.com> <AD48ECAA-83ED-49B3-945D-E7B4118451E3@ehatchersolutions.com> <42C4B835.6010703@gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BE6516D9-9BD3-487F-815C-74C96A328453@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Design question [too many fields?]
Date: Fri, 1 Jul 2005 05:39:04 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 30, 2005, at 11:27 PM, Chris Lu wrote:
> Mark, your suggestion will incur another trip to the database. And  
> if the search results is large, filtering in DB by pk is not really  
> good.

Chris - I disagree with that last comment.  It can be a great  
solution when the filter is cached.  Certainly building a filter for  
every search would be inefficient, but filters are really best when  
cached.

> Erik, your original "date" field is good when there is not many  
> dates(<1024) in the database. Otherwise, Range Query can not handle  
> it.

Not quite correct... it would not matter how many dates were in the  
index/database, only how many were within the range used by  
RangeQuery.  The original requirement was a years worth of days,  
which at most would be 366 days and I suspect someone looking for  
hotel room availability would be narrowing things down to a week or  
month.

> My suggestion is, use "year" + "month" + "day" three fields to  
> store date. And when searching, for example, any date that's  
> greater than 2005-06-30, you can use this query to search: ( year >  
> 2005 ) or  ( year=2005 and month>=6) or ( year=2005 and month=6 and  
> day > 30 ).
> It's a combination of BooleanQuery, TermQuery, and RangeQuery.

How would you represent multiple dates for a Document using that  
scheme?  Wasn't that one of the original requirements?

> This may seem cumbersome, but it can save one trip to database, and  
> circumvent Lucene's limitation.

One trip to the DB *once* with the results cached is mighty  
inexpensive in the grand scheme of things.  Mark's point is something  
I agree with (and wrote about in the custom filter example in Lucene  
in Action) - some information makes good sense to stay in a  
relational database when its too volatile to put in a Lucene index.  
Building a filter to access a DB, with the results cached is a good  
solution to the specified problem, I think.  Certainly there are many  
ways to solve it though.

     Erik


>
> Chris Lu
> http://www.dbsight.net
>
> Erik Hatcher wrote:
>
>
>> I second Mark's suggestion over the alternative I posted.  My   
>> alternative was merely to invert the field structure originally   
>> described, but using a Filter for the volatile information is wiser.
>>
>>     Erik
>>
>> On Jun 29, 2005, at 9:58 AM, mark harwood wrote:
>>
>>
>>> Presumably there is also a free-text element to the
>>> search or you wouldn't be using Lucene.
>>>
>>> Multiple fields is not the way to go.
>>> A single Lucene field could contain multiple terms (
>>> the available dates) but I still don't think that's
>>> the best solution.
>>> The availability info is likely to be pretty volatile
>>> and you always want up-to-date info so I would prefer
>>> to hit a database for this. If you keep a DB primary
>>> key to Lucene doc id look-up cached in memory you can
>>> quickly construct a Lucene filter from the database
>>> results and therefore only show Lucene results for
>>> available rooms.
>>>
>>> Cheers
>>> Mark
>>>
>>>
>>>
>>> ___________________________________________________________
>>> How much free photo storage do you get? Store your holiday
>>> snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 10:15:47 2005
Return-Path: <java-user-return-15255-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 870 invoked from network); 1 Jul 2005 10:15:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 10:15:47 -0000
Received: (qmail 63706 invoked by uid 500); 1 Jul 2005 10:15:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63679 invoked by uid 500); 1 Jul 2005 10:15:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63659 invoked by uid 99); 1 Jul 2005 10:15:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 03:15:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 03:15:39 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C3F4613E2006; Fri,  1 Jul 2005 06:15:30 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 1846413E2005
	for <java-user@lucene.apache.org>; Fri,  1 Jul 2005 06:15:25 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42C45781.2080606@yahoo.co.uk>
References: <4F8DDDFDAC9A864AAED5BB875129DF4B04D40BD2@tmskoex01.tm.thomsonmedia.com> <F42833D6-C751-4424-8E60-39E42E44951C@ehatchersolutions.com> <42C45781.2080606@yahoo.co.uk>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7E0D0319-0A42-4532-AF66-636049500D3A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Does highlighter highlight phrases only?
Date: Fri, 1 Jul 2005 06:15:26 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 30, 2005, at 4:35 PM, markharw00d wrote:

> Hi Erik,
> Yes I was thinking that code could form the basis of a new  
> highlighter.
>
> I've just attached a QuerySpansExtractor to the bugzilla entry for  
> the new highlighter. This class produces Spans from queries other  
> than SpanXxxxQueries eg phrase, term and booleans.
> I'm thinking you can throw the text to be highligted  as a single  
> doc into a MemIndex , extracts the spans using the  
> QuerySpansExtractor and the  MemIndex's reader (need to expose a  
> getReader method on this - I'm working on it), then use some new  
> highlighting logic on the Spans.
>
> Sound reasonable?

I think so.

One minor issue... a SpanNearQuery is not entirely equal to a  
PhraseQuery when there is slop involved.  You have this:

     SpanNearQuery sp = new SpanNearQuery(clauses,query.getSlop 
(),false);

Here's a test from Lucene in Action that demonstrates:

public void testSpanNearQuery() throws Exception {
   SpanQuery[] quick_brown_dog =
       new SpanQuery[]{quick, brown, dog};
   SpanNearQuery snq =
       new SpanNearQuery(quick_brown_dog, 0, true);
   assertNoMatches(snq);
   snq = new SpanNearQuery(quick_brown_dog, 4, true);
   assertNoMatches(snq);
   snq = new SpanNearQuery(quick_brown_dog, 5, true);
   assertOnlyBrownFox(snq);

   // interesting - even a sloppy phrase query would require
   // more slop to match
   snq = new SpanNearQuery(new SpanQuery[]{lazy, fox}, 3, false);
   assertOnlyBrownFox(snq);

   PhraseQuery pq = new PhraseQuery();
   pq.add(new Term("f", "lazy"));
   pq.add(new Term("f", "fox"));
   pq.setSlop(4);
   assertNoMatches(pq);

   pq.setSlop(5);
   assertOnlyBrownFox(pq);
}

So to be entirely accurate, an offset will be needed to get  
SpanNearQuery to match PhraseQuery, though I have a feeling (I'm not  
thinking through the details at the moment) that there is an edge  
case or two that is not compatible.  A PhraseQuery with slop of 1,  
for example - can a SpanNearQuery be set up to match that exactly?  I  
don't think so... a PhraseQuery with slop of 1 cannot match in  
reverse order, only in order with an optional hole between terms.

But, I like the idea of highlighting spans by converting other query  
types to get the Spans.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 12:06:28 2005
Return-Path: <java-user-return-15256-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43494 invoked from network); 1 Jul 2005 12:06:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 12:06:28 -0000
Received: (qmail 19946 invoked by uid 500); 1 Jul 2005 12:06:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19925 invoked by uid 500); 1 Jul 2005 12:06:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19909 invoked by uid 99); 1 Jul 2005 12:06:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 05:06:19 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_MESSAGE,SUB_FREE_OFFER
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.190.217.57] (HELO mail.cordis.lu) (212.190.217.57)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 05:06:21 -0700
Received: from mailsvr.INTRASOFT.LU (mail.intrasoft.lu [212.190.217.251])
	by mail.cordis.lu (8.13.1/8.13.1) with ESMTP id j61E6GHH025426
	for <java-user@lucene.apache.org>; Fri, 1 Jul 2005 14:06:16 GMT
Received: by mailsvr.INTRASOFT.LU with Internet Mail Service (5.5.2657.72)
	id <N7HC9RF2>; Fri, 1 Jul 2005 14:06:16 +0200
Message-ID: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCDF4D@mailsvr.INTRASOFT.LU>
From: BOUDOT Christian <c.boudot@intrasoft.lu>
To: java-user@lucene.apache.org
Subject: free text search with numbers
Date: Fri, 1 Jul 2005 14:06:16 +0200 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C57E35.483DBFE0"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C57E35.483DBFE0
Content-Type: text/plain

Hi folks,

 

It is the first time that I implement a search with Lucene, so please don't
laugh if my question seam trivial.

When I enter some text in my free text search the query gets build correctly
but when I enter number (as string) the query parser seam to ignore them.
What am I doing wrong?

 

Query: org.apache.lucene.search.Query

Parser: org.apache.lucene.queryParser.MultiFieldQueryParser

 

 

Many thanks for your help

 

Chris


------_=_NextPart_001_01C57E35.483DBFE0--

From java-user-return-15257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 12:15:07 2005
Return-Path: <java-user-return-15257-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47598 invoked from network); 1 Jul 2005 12:15:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 12:15:07 -0000
Received: (qmail 29712 invoked by uid 500); 1 Jul 2005 12:14:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29666 invoked by uid 500); 1 Jul 2005 12:14:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29651 invoked by uid 99); 1 Jul 2005 12:14:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 05:14:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.87.79.226] (HELO felisconsulting.sk) (193.87.79.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 05:14:59 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C57E36.C120A4C0"
Subject: Sentence and Paragraph searching
Date: Fri, 1 Jul 2005 14:16:48 +0200
Message-ID: <F6798025EA9F5F47A82B68D22DFF5EDF07B832@sukuba.felis.sk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sentence and Paragraph searching
Thread-Index: AcV+NsEHgJZDAMUNStu1vQ68aQnK+w==
From: "Peter Laurinc" <laurinc@felisconsulting.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C57E36.C120A4C0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi,
=20
I'm newbie to lucene.
I wan to ask, how to implement search for phrase that must be in
sentence/paragraph.
I did see som examples, that uses term position changing, but I think
that this is not the way, because it breaks classic proximity search.=20
(if one word is on end and second of begining of next sentence)
=20
=20
Thanks for any help
=20
Peter

------_=_NextPart_001_01C57E36.C120A4C0--

From java-user-return-15258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 13:11:14 2005
Return-Path: <java-user-return-15258-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68568 invoked from network); 1 Jul 2005 13:11:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 13:11:13 -0000
Received: (qmail 19346 invoked by uid 500); 1 Jul 2005 13:11:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19308 invoked by uid 500); 1 Jul 2005 13:11:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19257 invoked by uid 99); 1 Jul 2005 13:10:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 06:10:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 06:11:02 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id ED14613E2006; Fri,  1 Jul 2005 09:10:51 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 5D0FB13E2005
	for <java-user@lucene.apache.org>; Fri,  1 Jul 2005 09:10:47 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCDF4D@mailsvr.INTRASOFT.LU>
References: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCDF4D@mailsvr.INTRASOFT.LU>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AFB3815D-1AC0-43B0-A2C1-6FA4E713112F@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: free text search with numbers
Date: Fri, 1 Jul 2005 09:10:49 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 1, 2005, at 8:06 AM, BOUDOT Christian wrote:
> It is the first time that I implement a search with Lucene, so  
> please don't
> laugh if my question seam trivial.
>
> When I enter some text in my free text search the query gets build  
> correctly
> but when I enter number (as string) the query parser seam to ignore  
> them.
> What am I doing wrong?
>
>
>
> Query: org.apache.lucene.search.Query
>
> Parser: org.apache.lucene.queryParser.MultiFieldQueryParser

Chris - the answer to this dilemma is here: http://wiki.apache.org/ 
jakarta-lucene/AnalysisParalysis

In short, the analyzer is eating the numbers as it was designed to do  
- you'll want to adjust the analyzer to achieve the indexing/ 
searching for numbers somehow.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 13:32:00 2005
Return-Path: <java-user-return-15259-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91490 invoked from network); 1 Jul 2005 13:32:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 13:32:00 -0000
Received: (qmail 46786 invoked by uid 500); 1 Jul 2005 13:31:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46747 invoked by uid 500); 1 Jul 2005 13:31:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46728 invoked by uid 99); 1 Jul 2005 13:31:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 06:31:42 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.190.217.57] (HELO mail.cordis.lu) (212.190.217.57)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 06:31:44 -0700
Received: from mailsvr.INTRASOFT.LU (mail.intrasoft.lu [212.190.217.251])
	by mail.cordis.lu (8.13.1/8.13.1) with ESMTP id j61FVbv0026656
	for <java-user@lucene.apache.org>; Fri, 1 Jul 2005 15:31:37 GMT
Received: by mailsvr.INTRASOFT.LU with Internet Mail Service (5.5.2657.72)
	id <N7HC9RPV>; Fri, 1 Jul 2005 15:31:37 +0200
Message-ID: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCDF79@mailsvr.INTRASOFT.LU>
From: BOUDOT Christian <c.boudot@intrasoft.lu>
To: java-user@lucene.apache.org
Subject: RE: free text search with numbers
Date: Fri, 1 Jul 2005 15:31:36 +0200 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C57E41.3425BE70"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C57E41.3425BE70
Content-Type: text/plain

Thanks for the link.

Cheers

Chris

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: 01 July 2005 15:11
To: java-user@lucene.apache.org
Subject: Re: free text search with numbers


On Jul 1, 2005, at 8:06 AM, BOUDOT Christian wrote:
> It is the first time that I implement a search with Lucene, so  
> please don't
> laugh if my question seam trivial.
>
> When I enter some text in my free text search the query gets build  
> correctly
> but when I enter number (as string) the query parser seam to ignore  
> them.
> What am I doing wrong?
>
>
>
> Query: org.apache.lucene.search.Query
>
> Parser: org.apache.lucene.queryParser.MultiFieldQueryParser

Chris - the answer to this dilemma is here: http://wiki.apache.org/ 
jakarta-lucene/AnalysisParalysis

In short, the analyzer is eating the numbers as it was designed to do  
- you'll want to adjust the analyzer to achieve the indexing/ 
searching for numbers somehow.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------_=_NextPart_001_01C57E41.3425BE70--

From java-user-return-15260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 14:04:34 2005
Return-Path: <java-user-return-15260-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5829 invoked from network); 1 Jul 2005 14:04:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 14:04:34 -0000
Received: (qmail 7791 invoked by uid 500); 1 Jul 2005 14:03:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7692 invoked by uid 500); 1 Jul 2005 14:03:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7529 invoked by uid 99); 1 Jul 2005 14:03:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 07:03:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 07:03:54 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0714613E2006; Fri,  1 Jul 2005 10:03:45 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id D524013E2005
	for <java-user@lucene.apache.org>; Fri,  1 Jul 2005 10:03:37 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <F6798025EA9F5F47A82B68D22DFF5EDF07B832@sukuba.felis.sk>
References: <F6798025EA9F5F47A82B68D22DFF5EDF07B832@sukuba.felis.sk>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <ED6E8EB3-05E0-4DC8-824C-8FC23CC5E568@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Sentence and Paragraph searching
Date: Fri, 1 Jul 2005 10:03:39 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 1, 2005, at 8:16 AM, Peter Laurinc wrote:

> Hi,
>
> I'm newbie to lucene.
> I wan to ask, how to implement search for phrase that must be in
> sentence/paragraph.
> I did see som examples, that uses term position changing, but I think
> that this is not the way, because it breaks classic proximity search.
> (if one word is on end and second of begining of next sentence)

It really depends on your needs.  If you never need proximity across  
sentence boundaries, then what's the issue?   Putting a large gap at  
sentence boundaries makes good sense for some needs.  Maybe not so  
for your situation?

I'm definitely interested in what others have done with this sort of  
thing.

At the extreme, if all you wanted was to find sentences and did not  
need to query for terms in multiple sentences at one time then you  
could index each sentence as a separate Document.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 14:11:31 2005
Return-Path: <java-user-return-15261-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8673 invoked from network); 1 Jul 2005 14:11:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 14:11:31 -0000
Received: (qmail 25187 invoked by uid 500); 1 Jul 2005 14:11:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 25146 invoked by uid 500); 1 Jul 2005 14:11:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25119 invoked by uid 99); 1 Jul 2005 14:11:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 07:11:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.25.48.137] (HELO network.idexxi.com) (12.25.48.137)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 07:11:19 -0700
Received: from ([172.31.10.167])
	by Mail1.network.idexxi.com with ESMTP  id KP-BRAWH.5328926;
	Fri, 01 Jul 2005 10:10:55 -0400
Received: by taz.westbrook.idexxi.com with Internet Mail Service (5.5.2653.19)
	id <N7CP1X5D>; Fri, 1 Jul 2005 10:10:55 -0400
Message-ID: <3F4FE8951F7D314DB337D3693C9CFE7D0F0E55FE@taz.westbrook.idexxi.com>
From: "Faulkner, Jeffrey" <jeffrey-faulkner@IDEXX.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: UTF-8 indexing and searching
Date: Fri, 1 Jul 2005 10:10:50 -0400 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2653.19)
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm trying to index and search html and jsp files that are saved using utf-8
encoding.  The pages are indexed on the file system using the
StandardAnalyzer.  The files can contain a mix of english, chinese,
japanese, etc. saved as utf-8.  Searches using english terms are successful
but none of the searches for the chinese or japanese characters are
successful.  I'm a little confused about dealing with different encodings to
begin with. I tried specifying the encoding as utf-8 when reading in the
files using an InputStream and also also converting the String retrieved
from a form submission using getBytes specifying utf-8 also without any
success.  I've heard the StandardAnalzyer isn't optimal at indexing these
other characters but I heard that it does provide some basic indexing
capability.  Is it possible that these characters are being indexed and
searched correctly but they just aren't being found because of the
limitations of the analyzer or do you think that the files are being indexed
or searched incorrectly due to some encoding issues?
Thanks for the input 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 15:43:54 2005
Return-Path: <java-user-return-15262-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40405 invoked from network); 1 Jul 2005 15:43:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 15:43:54 -0000
Received: (qmail 56314 invoked by uid 500); 1 Jul 2005 15:43:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56133 invoked by uid 500); 1 Jul 2005 15:43:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56059 invoked by uid 99); 1 Jul 2005 15:43:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 08:43:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.87.79.226] (HELO felisconsulting.sk) (193.87.79.226)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 08:43:44 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Sentence and Paragraph searching
Date: Fri, 1 Jul 2005 17:45:33 +0200
Message-ID: <F6798025EA9F5F47A82B68D22DFF5EDF07B835@sukuba.felis.sk>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sentence and Paragraph searching
Thread-Index: AcV+Rg9fTt/EIBIySCO3f8IWmtd1dAADVEpA
From: "Peter Laurinc" <laurinc@felisconsulting.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Maybe the solution is have to each term not only position but also
something like vector. Then you can "vectorize it":
term 1 has vector 1, 1 term 2 has vector 1, 1 (1 paragraph, 1 sentence
of this paragraph) , term 3 has (1, 2)
if you set query for searching in paragraph/sentence you only set what
portion of vector must be same.=20

Is this the way?=20

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Friday, July 01, 2005 4:04 PM
To: java-user@lucene.apache.org
Subject: Re: Sentence and Paragraph searching


On Jul 1, 2005, at 8:16 AM, Peter Laurinc wrote:

> Hi,
>
> I'm newbie to lucene.
> I wan to ask, how to implement search for phrase that must be in=20
> sentence/paragraph.
> I did see som examples, that uses term position changing, but I think=20
> that this is not the way, because it breaks classic proximity search.
> (if one word is on end and second of begining of next sentence)

It really depends on your needs.  If you never need proximity across =20
sentence boundaries, then what's the issue?   Putting a large gap at =20
sentence boundaries makes good sense for some needs.  Maybe not so for
your situation?

I'm definitely interested in what others have done with this sort of
thing.

At the extreme, if all you wanted was to find sentences and did not need
to query for terms in multiple sentences at one time then you could
index each sentence as a separate Document.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 17:47:50 2005
Return-Path: <java-user-return-15263-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92833 invoked from network); 1 Jul 2005 17:47:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 17:47:50 -0000
Received: (qmail 76467 invoked by uid 500); 1 Jul 2005 17:47:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76441 invoked by uid 500); 1 Jul 2005 17:47:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76428 invoked by uid 99); 1 Jul 2005 17:47:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 10:47:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.192 as permitted sender)
Received: from [64.233.184.192] (HELO wproxy.gmail.com) (64.233.184.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 10:47:44 -0700
Received: by wproxy.gmail.com with SMTP id 70so400649wra
        for <java-user@lucene.apache.org>; Fri, 01 Jul 2005 10:47:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=EJNxbBNZc/qb7it7qpyZxaC17+ht/NqTx2WuY7yw1+JH3NFAiMGUikqSo9B2rh0BBMydan3jtEwJ3pKOtdqH3x/q/CmvBgh+HhY7Y5I8eBoaAt0XQoA5MhO8QhNm6mh8Mrdjo8Kop9K8zDQawAKKa65sN323S76YEKlGNBCXX5g=
Received: by 10.54.143.4 with SMTP id q4mr1773442wrd;
        Fri, 01 Jul 2005 10:47:38 -0700 (PDT)
Received: by 10.54.24.60 with HTTP; Fri, 1 Jul 2005 10:47:38 -0700 (PDT)
Message-ID: <6e3ae63105070110476eb39d62@mail.gmail.com>
Date: Fri, 1 Jul 2005 10:47:38 -0700
From: Chris Lu <chris.lu@gmail.com>
Reply-To: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Design question [too many fields?]
In-Reply-To: <BE6516D9-9BD3-487F-815C-74C96A328453@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20050629135856.83265.qmail@web26004.mail.ukl.yahoo.com>
	 <AD48ECAA-83ED-49B3-945D-E7B4118451E3@ehatchersolutions.com>
	 <42C4B835.6010703@gmail.com>
	 <BE6516D9-9BD3-487F-815C-74C96A328453@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik,  Mark and Naimdjon, Sorry I totally misunderstood the question,
of multiple dates for a Document. I came to agree with Erik and Mark
on this problem.

My head was thinking to find a generic solution to Lucene's
limitation: The TooManyClauses problem when using RangeQuery and there
are more than 1024 values. It should be another thread.

--=20
Chris Lu
---------------------
Full-Text Search on Any Database
http://www.dbsight.net


On 7/1/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>=20
> On Jun 30, 2005, at 11:27 PM, Chris Lu wrote:
> > Mark, your suggestion will incur another trip to the database. And
> > if the search results is large, filtering in DB by pk is not really
> > good.
>=20
> Chris - I disagree with that last comment.  It can be a great
> solution when the filter is cached.  Certainly building a filter for
> every search would be inefficient, but filters are really best when
> cached.
>=20
> > Erik, your original "date" field is good when there is not many
> > dates(<1024) in the database. Otherwise, Range Query can not handle
> > it.
>=20
> Not quite correct... it would not matter how many dates were in the
> index/database, only how many were within the range used by
> RangeQuery.  The original requirement was a years worth of days,
> which at most would be 366 days and I suspect someone looking for
> hotel room availability would be narrowing things down to a week or
> month.
>=20
> > My suggestion is, use "year" + "month" + "day" three fields to
> > store date. And when searching, for example, any date that's
> > greater than 2005-06-30, you can use this query to search: ( year >
> > 2005 ) or  ( year=3D2005 and month>=3D6) or ( year=3D2005 and month=3D6=
 and
> > day > 30 ).
> > It's a combination of BooleanQuery, TermQuery, and RangeQuery.
>=20
> How would you represent multiple dates for a Document using that
> scheme?  Wasn't that one of the original requirements?
>=20
> > This may seem cumbersome, but it can save one trip to database, and
> > circumvent Lucene's limitation.
>=20
> One trip to the DB *once* with the results cached is mighty
> inexpensive in the grand scheme of things.  Mark's point is something
> I agree with (and wrote about in the custom filter example in Lucene
> in Action) - some information makes good sense to stay in a
> relational database when its too volatile to put in a Lucene index.
> Building a filter to access a DB, with the results cached is a good
> solution to the specified problem, I think.  Certainly there are many
> ways to solve it though.
>=20
>      Erik
>=20
>=20
> >
> > Chris Lu
> > http://www.dbsight.net
> >
> > Erik Hatcher wrote:
> >
> >
> >> I second Mark's suggestion over the alternative I posted.  My
> >> alternative was merely to invert the field structure originally
> >> described, but using a Filter for the volatile information is wiser.
> >>
> >>     Erik
> >>
> >> On Jun 29, 2005, at 9:58 AM, mark harwood wrote:
> >>
> >>
> >>> Presumably there is also a free-text element to the
> >>> search or you wouldn't be using Lucene.
> >>>
> >>> Multiple fields is not the way to go.
> >>> A single Lucene field could contain multiple terms (
> >>> the available dates) but I still don't think that's
> >>> the best solution.
> >>> The availability info is likely to be pretty volatile
> >>> and you always want up-to-date info so I would prefer
> >>> to hit a database for this. If you keep a DB primary
> >>> key to Lucene doc id look-up cached in memory you can
> >>> quickly construct a Lucene filter from the database
> >>> results and therefore only show Lucene results for
> >>> available rooms.
> >>>
> >>> Cheers
> >>> Mark
> >>>
> >>>
> >>>
> >>> ___________________________________________________________
> >>> How much free photo storage do you get? Store your holiday
> >>> snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com
> >>>
> >>> --------------------------------------------------------------------
> >>> -
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 18:53:25 2005
Return-Path: <java-user-return-15264-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17142 invoked from network); 1 Jul 2005 18:53:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 18:53:25 -0000
Received: (qmail 84976 invoked by uid 500); 1 Jul 2005 18:53:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84955 invoked by uid 500); 1 Jul 2005 18:53:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84937 invoked by uid 99); 1 Jul 2005 18:53:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 11:53:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of dmccallie@cerner.com designates 159.140.213.148 as permitted sender)
Received: from [159.140.213.148] (HELO ns02.cerner.com) (159.140.213.148)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 11:53:19 -0700
Received: from cerner.com ([159.140.213.242])
        by ns02.cerner.com (smtp) with ESMTP id j61IrDxm007737
        for <java-user@lucene.apache.org>; Fri, 1 Jul 2005 13:53:13 -0500
Received: from ([10.160.12.234])
	by CT03.cerner.com with ESMTP  id KP-TRRB5.1030439;
	Fri, 01 Jul 2005 13:52:54 -0500
Received: from msbhwhq02.northamerica.cerner.net ([10.160.16.184]) by msscanwhq02.northamerica.cerner.net with InterScan Messaging Security Suite; Fri, 01 Jul 2005 13:52:53 -0500
Received: from MSMBWHQ03.northamerica.cerner.net ([10.160.16.177]) by msbhwhq02.northamerica.cerner.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Fri, 1 Jul 2005 13:52:53 -0500
x-mimeole: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Sentence and Paragraph searching
Date: Fri, 1 Jul 2005 13:52:45 -0500
Message-ID: <F1894E3038F7504BA762FB01A853BE1A01574013@MSMBWHQ03.northamerica.cerner.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Sentence and Paragraph searching
Thread-Index: AcV+Rg9fTt/EIBIySCO3f8IWmtd1dAADVEpAAAZk1iA=
From: "McCallie,David" <DMCCALLIE@cerner.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 01 Jul 2005 18:52:53.0719 (UTC) FILETIME=[1665A670:01C57E6E]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Couldn't you use SpanQuery for something like this?  Put special
<start-of-sentence> and <end-of-sentence> tokens around each sentence,
and then search for the specific key words inside of the outer SPAN? Do
the same for paragraphs, sections, etc.

I tried this once, and it seemed to work.  I'm not sure of the
performance penalty of the SPAN overhead.

--david



-----Original Message-----
From: Peter Laurinc [mailto:laurinc@felisconsulting.com]=0D
Sent: Friday, July 01, 2005 10:46 AM
To: java-user@lucene.apache.org
Subject: RE: Sentence and Paragraph searching

Maybe the solution is have to each term not only position but also
something like vector. Then you can "vectorize it":
term 1 has vector 1, 1 term 2 has vector 1, 1 (1 paragraph, 1 sentence
of this paragraph) , term 3 has (1, 2) if you set query for searching in
paragraph/sentence you only set what portion of vector must be same.=0D

Is this the way?=0D

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Friday, July 01, 2005 4:04 PM
To: java-user@lucene.apache.org
Subject: Re: Sentence and Paragraph searching


On Jul 1, 2005, at 8:16 AM, Peter Laurinc wrote:

> Hi,
>
> I'm newbie to lucene.
> I wan to ask, how to implement search for phrase that must be in=0D
> sentence/paragraph.
> I did see som examples, that uses term position changing, but I think=0D
> that this is not the way, because it breaks classic proximity search.
> (if one word is on end and second of begining of next sentence)

It really depends on your needs.  If you never need proximity across =0D
sentence boundaries, then what's the issue?   Putting a large gap at =0D
sentence boundaries makes good sense for some needs.  Maybe not so for
your situation?

I'm definitely interested in what others have done with this sort of
thing.

At the extreme, if all you wanted was to find sentences and did not need
to query for terms in multiple sentences at one time then you could
index each sentence as a separate Document.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


CONFIDENTIALITY NOTICE

This message and any included attachments
are from Cerner Corporation and are intended
only for the addressee. The information
contained in this message is confidential and
may constitute inside or non-public information
under international, federal, or state
securities laws. Unauthorized forwarding,
printing, copying, distribution, or use of such
information is strictly prohibited and may be
unlawful. If you are not the addressee, please
promptly delete this message and notify the
sender of the delivery error by e-mail or you
may call Cerner's corporate offices in Kansas
City, Missouri, U.S.A at (+1) (816)221-1024.
---------------------------------------- --

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 19:13:12 2005
Return-Path: <java-user-return-15265-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23307 invoked from network); 1 Jul 2005 19:13:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 19:13:11 -0000
Received: (qmail 10420 invoked by uid 500); 1 Jul 2005 19:13:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10395 invoked by uid 500); 1 Jul 2005 19:13:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10382 invoked by uid 99); 1 Jul 2005 19:13:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 12:13:05 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.215.166.64] (HELO grassmarket.ucs.ed.ac.uk) (129.215.166.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 12:13:06 -0700
Received: from grassmarket.ucs.ed.ac.uk (localhost [127.0.0.1])
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.10) with ESMTP id j61JD01a016471
	for <java-user@lucene.apache.org>; Fri, 1 Jul 2005 20:13:00 +0100 (BST)
Received: (from nobody@localhost)
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.9/Submit) id j61JD0cM016470
	for java-user@lucene.apache.org; Fri, 1 Jul 2005 20:13:00 +0100 (BST)
X-Authentication-Warning: grassmarket.ucs.ed.ac.uk: nobody set sender to s0454888@sms.ed.ac.uk using -f
Received: from beans.cache.ed.ac.uk (beans.cache.ed.ac.uk [129.215.16.12]) 
	by sms.ed.ac.uk (IMP) with HTTP 
	for <s0454888@sms.ed.ac.uk>; Fri, 01 Jul 2005 20:13:00 +0100
Message-ID: <1120245180.42c595bc2ca96@sms.ed.ac.uk>
Date: Fri, 01 Jul 2005 20:13:00 +0100
From: Dave Kor <s0454888@sms.ed.ac.uk>
To: java-user@lucene.apache.org
Subject: Re: Sentence and Paragraph searching
References: <F6798025EA9F5F47A82B68D22DFF5EDF07B832@sukuba.felis.sk>
In-Reply-To: <F6798025EA9F5F47A82B68D22DFF5EDF07B832@sukuba.felis.sk>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.3
X-Scanned-By: MIMEDefang 2.33 (www . roaringpenguin . com / mimedefang)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Quoting Peter Laurinc <laurinc@felisconsulting.com>:

> Hi,
>
> I'm newbie to lucene.
> I wan to ask, how to implement search for phrase that must be in
> sentence/paragraph.
> I did see som examples, that uses term position changing, but I think
> that this is not the way, because it breaks classic proximity search.
> (if one word is on end and second of begining of next sentence)

Most NLP toolkits have a sentence and paragraph boundary detector that can be
used to separate a single document into its constituent sentences and
paragraphs. The two NLP toolkits I am familiar with are OpenNLP (Open Source)
and Alias-i's LingPipe (Commercial) libraries. These toolkits can be used in
several ways to achieve what you want.

If you are ONLY interested in searching for individual sentences, then you can
use the toolkits to create an index of sentences instead of an index of
documents.

Alternatively, you can encode the sentence boundaries found by these toolkits
within the documents you are indexing, for example using special characters or
as a separate field in Lucene. After every search, do an extra check to ensure
that Lucene did not match across sentence boundaries.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 19:16:52 2005
Return-Path: <java-user-return-15266-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34555 invoked from network); 1 Jul 2005 19:16:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 19:16:51 -0000
Received: (qmail 14028 invoked by uid 500); 1 Jul 2005 19:16:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13828 invoked by uid 500); 1 Jul 2005 19:16:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13815 invoked by uid 99); 1 Jul 2005 19:16:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 12:16:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.38.79] (HELO web50503.mail.yahoo.com) (206.190.38.79)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 01 Jul 2005 12:16:46 -0700
Received: (qmail 63964 invoked by uid 60001); 1 Jul 2005 19:16:40 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=3unQpMq6CKe4oUcquUmbqF0eqQmTodt8S4zE+xIXrNeOXO+fC6Rp3WYFFjNvpW30jKG9xYlT/R1KX1MWOUvTIHzKOgUVTPrDJ6mKCawuFTFT/0aS++QSpsLa3ZnQkaj3ry53ZmjSBbWkahr+JllwV3n5PVRDJ1UEaIRT/zSjSaU=  ;
Message-ID: <20050701191640.63962.qmail@web50503.mail.yahoo.com>
Received: from [85.165.57.81] by web50503.mail.yahoo.com via HTTP; Fri, 01 Jul 2005 21:16:40 CEST
Date: Fri, 1 Jul 2005 21:16:40 +0200 (CEST)
From: Naimdjon Takhirov <tnaim1@yahoo.com>
Subject: Vedr. Re: Design question [too many fields?]
To: java-user@lucene.apache.org, Chris Lu <chris.lu@gmail.com>
In-Reply-To: <6e3ae63105070110476eb39d62@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Guys, thanks for your inputs.
I think the solution Mark has suggested does solves
the problem in an acceptable way. Its actually gonna
be a little better than the solution the customer is
has right now.
Apart from the availability we have to also check if
there is any price for room units saved in database
since the customer has a flexible pricing system
(discounts in weekends, season prices and so on) so
its very important that the availability/price
information is quite up-to-date.
I implemented it with the filter(Mark: there were
about 4900 room units which I think is OK as far as
memory concerned) and instead of 10 secs searching for
a period of two weeks it takes about 3 seconds now.
Still we have optimization work to do.

Naimdjon

--- Chris Lu <chris.lu@gmail.com> skrev:

> Erik,  Mark and Naimdjon, Sorry I totally
> misunderstood the question,
> of multiple dates for a Document. I came to agree
> with Erik and Mark
> on this problem.
> 
> My head was thinking to find a generic solution to
> Lucene's
> limitation: The TooManyClauses problem when using
> RangeQuery and there
> are more than 1024 values. It should be another
> thread.
> 
> -- 
> Chris Lu
> ---------------------
> Full-Text Search on Any Database
> http://www.dbsight.net
> 
> 
> On 7/1/05, Erik Hatcher <erik@ehatchersolutions.com>
> wrote:
> > 
> > On Jun 30, 2005, at 11:27 PM, Chris Lu wrote:
> > > Mark, your suggestion will incur another trip to
> the database. And
> > > if the search results is large, filtering in DB
> by pk is not really
> > > good.
> > 
> > Chris - I disagree with that last comment.  It can
> be a great
> > solution when the filter is cached.  Certainly
> building a filter for
> > every search would be inefficient, but filters are
> really best when
> > cached.
> > 
> > > Erik, your original "date" field is good when
> there is not many
> > > dates(<1024) in the database. Otherwise, Range
> Query can not handle
> > > it.
> > 
> > Not quite correct... it would not matter how many
> dates were in the
> > index/database, only how many were within the
> range used by
> > RangeQuery.  The original requirement was a years
> worth of days,
> > which at most would be 366 days and I suspect
> someone looking for
> > hotel room availability would be narrowing things
> down to a week or
> > month.
> > 
> > > My suggestion is, use "year" + "month" + "day"
> three fields to
> > > store date. And when searching, for example, any
> date that's
> > > greater than 2005-06-30, you can use this query
> to search: ( year >
> > > 2005 ) or  ( year=2005 and month>=6) or (
> year=2005 and month=6 and
> > > day > 30 ).
> > > It's a combination of BooleanQuery, TermQuery,
> and RangeQuery.
> > 
> > How would you represent multiple dates for a
> Document using that
> > scheme?  Wasn't that one of the original
> requirements?
> > 
> > > This may seem cumbersome, but it can save one
> trip to database, and
> > > circumvent Lucene's limitation.
> > 
> > One trip to the DB *once* with the results cached
> is mighty
> > inexpensive in the grand scheme of things.  Mark's
> point is something
> > I agree with (and wrote about in the custom filter
> example in Lucene
> > in Action) - some information makes good sense to
> stay in a
> > relational database when its too volatile to put
> in a Lucene index.
> > Building a filter to access a DB, with the results
> cached is a good
> > solution to the specified problem, I think. 
> Certainly there are many
> > ways to solve it though.
> > 
> >      Erik
> > 
> > 
> > >
> > > Chris Lu
> > > http://www.dbsight.net
> > >
> > > Erik Hatcher wrote:
> > >
> > >
> > >> I second Mark's suggestion over the alternative
> I posted.  My
> > >> alternative was merely to invert the field
> structure originally
> > >> described, but using a Filter for the volatile
> information is wiser.
> > >>
> > >>     Erik
> > >>
> > >> On Jun 29, 2005, at 9:58 AM, mark harwood
> wrote:
> > >>
> > >>
> > >>> Presumably there is also a free-text element
> to the
> > >>> search or you wouldn't be using Lucene.
> > >>>
> > >>> Multiple fields is not the way to go.
> > >>> A single Lucene field could contain multiple
> terms (
> > >>> the available dates) but I still don't think
> that's
> > >>> the best solution.
> > >>> The availability info is likely to be pretty
> volatile
> > >>> and you always want up-to-date info so I would
> prefer
> > >>> to hit a database for this. If you keep a DB
> primary
> > >>> key to Lucene doc id look-up cached in memory
> you can
> > >>> quickly construct a Lucene filter from the
> database
> > >>> results and therefore only show Lucene results
> for
> > >>> available rooms.
> > >>>
> > >>> Cheers
> > >>> Mark
> > >>>
> > >>>
> > >>>
> > >>>
>
___________________________________________________________
> > >>> How much free photo storage do you get? Store
> your holiday
> > >>> snaps for FREE with Yahoo! Photos
> http://uk.photos.yahoo.com
> > >>>
> > >>>
>
--------------------------------------------------------------------
> > >>> -
> > >>> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > >>> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >>>
> > >>>
> > >>
> > >>
> > >>
>
---------------------------------------------------------------------
> > >> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > >> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >>
> > >>
> > >>
> > >
> > >
> > >
>
---------------------------------------------------------------------
> > > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > >
> > 
> > 
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > 
> >
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 19:26:08 2005
Return-Path: <java-user-return-15267-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43952 invoked from network); 1 Jul 2005 19:26:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 19:26:08 -0000
Received: (qmail 37946 invoked by uid 500); 1 Jul 2005 19:26:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 37919 invoked by uid 500); 1 Jul 2005 19:26:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 37906 invoked by uid 99); 1 Jul 2005 19:26:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 12:26:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.11.35] (HELO smtp004.mail.ukl.yahoo.com) (217.12.11.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 01 Jul 2005 12:26:03 -0700
Received: (qmail 13449 invoked from network); 1 Jul 2005 19:25:57 -0000
Received: from unknown (HELO ?10.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp004.mail.ukl.yahoo.com with SMTP; 1 Jul 2005 19:25:56 -0000
Message-ID: <42C598C4.3080503@yahoo.co.uk>
Date: Fri, 01 Jul 2005 20:25:56 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Vedr. Re: Design question [too many fields?]
References: <20050701191640.63962.qmail@web50503.mail.yahoo.com>
In-Reply-To: <20050701191640.63962.qmail@web50503.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>>about 4900 room units which I think is OK as far as
>>Still we have optimization work to do.

Assuming your availability is a year in advance and yours is a reputable chain of hotels that books rooms by the day, (not the hour!) You only need:
4900 * 365 bits of true/false info to cache all the availability data you need.
This is a Bitset occupying less than a megabyte of RAM.
You could index into this sort of structure very quickly (for the appropriate date/doc positions) and  get a big performance boost.
Perhaps more complex to implement but certainly a very fast solution.



	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 19:27:15 2005
Return-Path: <java-user-return-15268-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44225 invoked from network); 1 Jul 2005 19:27:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 19:27:15 -0000
Received: (qmail 42252 invoked by uid 500); 1 Jul 2005 19:27:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42224 invoked by uid 500); 1 Jul 2005 19:27:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42211 invoked by uid 99); 1 Jul 2005 19:27:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 12:27:07 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.30] (HELO smtp-vbr10.xs4all.nl) (194.109.24.30)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 12:27:09 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr10.xs4all.nl (8.13.3/8.13.3) with ESMTP id j61JR30G077615
	for <java-user@lucene.apache.org>; Fri, 1 Jul 2005 21:27:04 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Sentence and Paragraph searching
Date: Fri, 1 Jul 2005 21:27:02 +0200
User-Agent: KMail/1.5.4
References: <F6798025EA9F5F47A82B68D22DFF5EDF07B832@sukuba.felis.sk> <1120245180.42c595bc2ca96@sms.ed.ac.uk>
In-Reply-To: <1120245180.42c595bc2ca96@sms.ed.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-15"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200507012127.03076.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 01 July 2005 21:13, Dave Kor wrote:
> Quoting Peter Laurinc <laurinc@felisconsulting.com>:
> 
> > Hi,
> >
> > I'm newbie to lucene.
> > I wan to ask, how to implement search for phrase that must be in
> > sentence/paragraph.
> > I did see som examples, that uses term position changing, but I think
> > that this is not the way, because it breaks classic proximity search.
> > (if one word is on end and second of begining of next sentence)
> 
> Most NLP toolkits have a sentence and paragraph boundary detector that can be
> used to separate a single document into its constituent sentences and
> paragraphs. The two NLP toolkits I am familiar with are OpenNLP (Open Source)
> and Alias-i's LingPipe (Commercial) libraries. These toolkits can be used in
> several ways to achieve what you want.
> 
> If you are ONLY interested in searching for individual sentences, then you can
> use the toolkits to create an index of sentences instead of an index of
> documents.
> 
> Alternatively, you can encode the sentence boundaries found by these toolkits
> within the documents you are indexing, for example using special characters or
> as a separate field in Lucene. After every search, do an extra check to ensure
> that Lucene did not match across sentence boundaries.

Or try and use a SpanNotQuery to make sure that the sentence or paragraph
border is contained in matches in the same field.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 20:06:50 2005
Return-Path: <java-user-return-15269-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54487 invoked from network); 1 Jul 2005 20:06:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 20:06:50 -0000
Received: (qmail 6566 invoked by uid 500); 1 Jul 2005 20:06:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6518 invoked by uid 500); 1 Jul 2005 20:06:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6482 invoked by uid 99); 1 Jul 2005 20:06:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 13:06:41 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.29] (HELO smtp-vbr9.xs4all.nl) (194.109.24.29)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 13:06:42 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr9.xs4all.nl (8.13.3/8.13.3) with ESMTP id j61K6aP1048120
	for <java-user@lucene.apache.org>; Fri, 1 Jul 2005 22:06:36 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Sentence and Paragraph searching
Date: Fri, 1 Jul 2005 22:06:35 +0200
User-Agent: KMail/1.5.4
References: <F1894E3038F7504BA762FB01A853BE1A01574013@MSMBWHQ03.northamerica.cerner.net>
In-Reply-To: <F1894E3038F7504BA762FB01A853BE1A01574013@MSMBWHQ03.northamerica.cerner.net>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200507012206.35836.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Friday 01 July 2005 20:52, McCallie,David wrote:
> 
> Couldn't you use SpanQuery for something like this?  Put special
> <start-of-sentence> and <end-of-sentence> tokens around each sentence,
> and then search for the specific key words inside of the outer SPAN? Do
> the same for paragraphs, sections, etc.
> 
> I tried this once, and it seemed to work.  I'm not sure of the
> performance penalty of the SPAN overhead.
> 

It should work, as well as SpanNotQuery for excluding the
sentence boundary (see my other post). Using a separate
sentence field in which each token position is mapped to the same
sentence number would be faster, but that would also require
a special version of PhraseQuery to search at the same position.
Paragraphs can be handled similarly.

The disadvantage of adding a new field over the same data
is that the term index is duplicated.
This could be avoided by extending the index format
with index levels: one for normal use, one for sentences, one for
paragraphs, ... .

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 20:41:22 2005
Return-Path: <java-user-return-15270-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63048 invoked from network); 1 Jul 2005 20:41:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 20:41:22 -0000
Received: (qmail 62879 invoked by uid 500); 1 Jul 2005 20:41:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62844 invoked by uid 500); 1 Jul 2005 20:41:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62830 invoked by uid 99); 1 Jul 2005 20:41:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 13:41:15 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=MSGID_FROM_MTA_HEADER,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.168.230.140] (HELO omr4.netsolmail.com) (216.168.230.140)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 13:41:17 -0700
Received: from ms9.netsolmail.com (IDENT:mirapoint@[216.168.230.183])
	by omr4.netsolmail.com (8.12.10/8.12.10) with ESMTP id j61KfAeB010344
	for <java-user@lucene.apache.org>; Fri, 1 Jul 2005 16:41:10 -0400 (EDT)
Received: from ms9.netsolmail.com (localhost.netsolmail.com [127.0.0.1])
	by ms9.netsolmail.com (Mirapoint Messaging Server MOS 3.2.2-GA)
	with ESMTP id DOJ48578;
	Fri, 1 Jul 2005 16:41:10 -0400 (EDT)
From: <pierre.conti@vtdim.com>
Message-Id: <200507012041.DOJ48578@ms9.netsolmail.com>
Received: from 80.170.33.139
	by ms9.netsolmail.com (Mirapoint Messaging Server MOS 3.2.2-GA)
	with HTTP/1.1;
	Fri, 1 Jul 2005 16:41:10 -0400
Date: Fri, 1 Jul 2005 16:41:10 -0400
Subject: Re: UTF-8 indexing and searching
To: java-user@lucene.apache.org
X-Mailer: Webmail Mirapoint Direct 3.2.2-GA
MIME-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Did you check that the request string you get at the analyzer
level is corectly encoded as UTF-8?
We had the same problem with french accentuated char encoded
also as UTF-8, and transmited by tomcat as ISO-8859-1. It was
just for a test, also we didn't investgated a lot, but
re-encode in URL/ISO-8859-1 and re-decode from URL in correct
UTF-8, and it worked.
Don't know, if it may help you ...


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 20:58:18 2005
Return-Path: <java-user-return-15271-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66125 invoked from network); 1 Jul 2005 20:58:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 20:58:17 -0000
Received: (qmail 80076 invoked by uid 500); 1 Jul 2005 20:58:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80048 invoked by uid 500); 1 Jul 2005 20:58:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80035 invoked by uid 99); 1 Jul 2005 20:58:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 13:58:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [134.96.188.26] (HELO mail.dfki.de) (134.96.188.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 13:58:13 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id D6DB6E4834
	for <java-user@lucene.apache.org>; Fri,  1 Jul 2005 22:58:03 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id B5481E47E1
	for <java-user@lucene.apache.org>; Fri,  1 Jul 2005 22:58:03 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <200507012041.DOJ48578@ms9.netsolmail.com>
References: <200507012041.DOJ48578@ms9.netsolmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <d6a9d666acdd5ebf86375fe9375a3ef3@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: UTF-8 indexing and searching
Date: Fri, 1 Jul 2005 22:57:59 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Careful that in the http world, there's an amibuity:=20
x-www-form-url-encoded does not specify the content-encoding that the=20
byts represented in the %-escaped sequences are written with.
That's fixed by the very recent URI spec where absence means utf-8...

My experience was that Tomcat simply converted the bytes of this into=20
the first bytes of the 16-bit unicode, therefore working with=20
iso-8859-1.
We succeeded receiving forms from pages utf-8-encded by packing an=20
inputstreamreader in utf-8 at the end of an inputstream that reads the=20=

bytes of the string of request.getParam...

Hope that helps.

paul



Le 1 juil. 05, =E0 22:41, <pierre.conti@vtdim.com> a =E9crit :

>
> Did you check that the request string you get at the analyzer
> level is corectly encoded as UTF-8?
> We had the same problem with french accentuated char encoded
> also as UTF-8, and transmited by tomcat as ISO-8859-1. It was
> just for a test, also we didn't investgated a lot, but
> re-encode in URL/ISO-8859-1 and re-decode from URL in correct
> UTF-8, and it worked.
> Don't know, if it may help you ...
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 01 22:58:41 2005
Return-Path: <java-user-return-15272-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5339 invoked from network); 1 Jul 2005 22:58:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Jul 2005 22:58:41 -0000
Received: (qmail 46716 invoked by uid 500); 1 Jul 2005 22:58:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45826 invoked by uid 500); 1 Jul 2005 22:58:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45812 invoked by uid 99); 1 Jul 2005 22:58:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 15:58:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yourabi@gmail.com designates 64.233.184.192 as permitted sender)
Received: from [64.233.184.192] (HELO wproxy.gmail.com) (64.233.184.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 15:58:38 -0700
Received: by wproxy.gmail.com with SMTP id i5so430568wra
        for <java-user@lucene.apache.org>; Fri, 01 Jul 2005 15:58:33 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=t5DiQqHX0weYcJIYBt+1JQbRsCTKDanPG51Ed5K6aFvOWBuFCqGzsJzzE/ye/wNhk3jA41aRvLzKjUOZyzqX6zp7rDwfLiltIbWwUf2R55k0JV2ZawJ8t3mn1WNBfU4PsNuGaW7AfGhNOzA30uYtKHw/myDbn5+Ry5EwRld4P/k=
Received: by 10.54.47.59 with SMTP id u59mr1895954wru;
        Fri, 01 Jul 2005 15:58:32 -0700 (PDT)
Received: by 10.54.14.63 with HTTP; Fri, 1 Jul 2005 15:58:32 -0700 (PDT)
Message-ID: <b13f3f0605070115587c1af748@mail.gmail.com>
Date: Fri, 1 Jul 2005 15:58:32 -0700
From: Yousef Ourabi <yourabi@gmail.com>
Reply-To: Yousef Ourabi <yourabi@gmail.com>
To: java-user@lucene.apache.org
Subject: Getting all terms from Index
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello all,
I am getting odd results, documents without the keyword I search for
are being returned. I want to get all the indexed (searchable) inside
the index, then create queries for those words with explaining
(explaination object) set to see what matches to what and why?

Thanks in advance,
Yousef

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 02 01:12:15 2005
Return-Path: <java-user-return-15273-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37071 invoked from network); 2 Jul 2005 01:12:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 2 Jul 2005 01:12:15 -0000
Received: (qmail 12480 invoked by uid 500); 2 Jul 2005 01:12:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12409 invoked by uid 500); 2 Jul 2005 01:12:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12382 invoked by uid 99); 2 Jul 2005 01:12:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 18:12:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 01 Jul 2005 18:12:09 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E14FF13E2006; Fri,  1 Jul 2005 21:11:58 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 053D013E2005
	for <java-user@lucene.apache.org>; Fri,  1 Jul 2005 21:11:44 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <b13f3f0605070115587c1af748@mail.gmail.com>
References: <b13f3f0605070115587c1af748@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <510B9731-8102-4BF7-81A8-9A8B19E567B1@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Getting all terms from Index
Date: Fri, 1 Jul 2005 21:11:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 1, 2005, at 6:58 PM, Yousef Ourabi wrote:

> Hello all,
> I am getting odd results, documents without the keyword I search for
> are being returned.

You really have to provide some details for this list to be helpful.

> I want to get all the indexed (searchable) inside
> the index, then create queries for those words with explaining
> (explaination object) set to see what matches to what and why?

Get a copy of Luke and analyze your index with it; it sheds a lot of  
light on what's under the covers.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 03 06:15:52 2005
Return-Path: <java-user-return-15274-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82655 invoked from network); 3 Jul 2005 06:15:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2005 06:15:51 -0000
Received: (qmail 61232 invoked by uid 500); 3 Jul 2005 06:15:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60623 invoked by uid 500); 3 Jul 2005 06:15:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60610 invoked by uid 99); 3 Jul 2005 06:15:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Jul 2005 23:15:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 02 Jul 2005 23:15:45 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A8D965B7A8; Sat,  2 Jul 2005 23:15:33 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP
	id 9FAA27F460; Sat,  2 Jul 2005 23:15:33 -0700 (PDT)
Date: Sat, 2 Jul 2005 23:15:33 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org, Chris Lu <chris.lu@gmail.com>
Subject: Re: Design question [too many fields?]
In-Reply-To: <6e3ae63105070110476eb39d62@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0507022308380.5525@hal.rescomp.berkeley.edu>
References: <20050629135856.83265.qmail@web26004.mail.ukl.yahoo.com> 
 <AD48ECAA-83ED-49B3-945D-E7B4118451E3@ehatchersolutions.com> 
 <42C4B835.6010703@gmail.com>  <BE6516D9-9BD3-487F-815C-74C96A328453@ehatchersolutions.com>
 <6e3ae63105070110476eb39d62@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: My head was thinking to find a generic solution to Lucene's
: limitation: The TooManyClauses problem when using RangeQuery and there
: are more than 1024 values. It should be another thread.

It's been discussed in several threads, and i can think of 2 good
solutions at this point...

Using a RangeFilter (or DateFilter) instead of a RangeQuery
http://nagoya.apache.org/eyebrowse/BrowseList?listName=lucene-user@jakarta.apache.org&by=thread&from=943115

Using ConstantScoreRangeQuery in place of RangeQuery...
http://issues.apache.org/bugzilla/show_bug.cgi?id=34673

-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 03 13:28:00 2005
Return-Path: <java-user-return-15275-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20930 invoked from network); 3 Jul 2005 13:28:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2005 13:28:00 -0000
Received: (qmail 6138 invoked by uid 500); 3 Jul 2005 13:27:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6084 invoked by uid 500); 3 Jul 2005 13:27:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6071 invoked by uid 99); 3 Jul 2005 13:27:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Jul 2005 06:27:52 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.215.166.64] (HELO grassmarket.ucs.ed.ac.uk) (129.215.166.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Jul 2005 06:27:54 -0700
Received: from grassmarket.ucs.ed.ac.uk (localhost [127.0.0.1])
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.10) with ESMTP id j63DRm1a000432
	for <java-user@lucene.apache.org>; Sun, 3 Jul 2005 14:27:48 +0100 (BST)
Received: (from nobody@localhost)
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.9/Submit) id j63DRlNk000431
	for java-user@lucene.apache.org; Sun, 3 Jul 2005 14:27:47 +0100 (BST)
X-Authentication-Warning: grassmarket.ucs.ed.ac.uk: nobody set sender to s0454888@sms.ed.ac.uk using -f
Received: from beans.cache.ed.ac.uk (beans.cache.ed.ac.uk [129.215.16.12]) 
	by sms.ed.ac.uk (IMP) with HTTP 
	for <s0454888@sms.ed.ac.uk>; Sun, 03 Jul 2005 14:27:47 +0100
Message-ID: <1120397267.42c7e7d3cb21c@sms.ed.ac.uk>
Date: Sun, 03 Jul 2005 14:27:47 +0100
From: Dave Kor <s0454888@sms.ed.ac.uk>
To: java-user@lucene.apache.org
Subject: Unexpected: ordered
References: <20050629135856.83265.qmail@web26004.mail.ukl.yahoo.com>  <AD48ECAA-83ED-49B3-945D-E7B4118451E3@ehatchersolutions.com>  <42C4B835.6010703@gmail.com>  <BE6516D9-9BD3-487F-815C-74C96A328453@ehatchersolutions.com> <6e3ae63105070110476eb39d62@mail.gmail.com> <Pine.LNX.4.58.0507022308380.5525@hal.rescomp.berkeley.edu>
In-Reply-To: <Pine.LNX.4.58.0507022308380.5525@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.3
X-Scanned-By: MIMEDefang 2.33 (www . roaringpenguin . com / mimedefang)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a system that automatically generate span queries to Lucene. Sometimes,
the system generates a query like this one which always throws a
RuntimeException:

spanNear([spanNear([text:interesting], 3, true), spanNear([text:interesting,
text:john, text:said], 8, true)], 2, true)

Basically, the system is looking for a document that contains a string sequence
"interesting .... interesting john said". The thrown exception is as follows:

java.lang.RuntimeException: Unexpected: ordered
        at
org.apache.lucene.search.spans.NearSpans.firstNonOrderedNextToPartialList(Unknown
Source)
        at org.apache.lucene.search.spans.NearSpans.next(Unknown Source)
        at org.apache.lucene.search.spans.SpanScorer.next(Unknown Source)
        at org.apache.lucene.search.Scorer.score(Unknown Source)
        at org.apache.lucene.search.IndexSearcher.search(Unknown Source)

My question is, what does is this "Unexpected: ordered" mean? and is there
anyway I can avoid these exceptions?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 03 14:39:22 2005
Return-Path: <java-user-return-15276-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33340 invoked from network); 3 Jul 2005 14:39:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 3 Jul 2005 14:39:22 -0000
Received: (qmail 57527 invoked by uid 500); 3 Jul 2005 14:39:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57484 invoked by uid 500); 3 Jul 2005 14:39:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57471 invoked by uid 99); 3 Jul 2005 14:39:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Jul 2005 07:39:09 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.109.24.26] (HELO smtp-vbr6.xs4all.nl) (194.109.24.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 03 Jul 2005 07:39:11 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr6.xs4all.nl (8.13.3/8.13.3) with ESMTP id j63Ed5uS088876
	for <java-user@lucene.apache.org>; Sun, 3 Jul 2005 16:39:05 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Unexpected: ordered
Date: Sun, 3 Jul 2005 16:39:05 +0200
User-Agent: KMail/1.5.4
References: <20050629135856.83265.qmail@web26004.mail.ukl.yahoo.com> <Pine.LNX.4.58.0507022308380.5525@hal.rescomp.berkeley.edu> <1120397267.42c7e7d3cb21c@sms.ed.ac.uk>
In-Reply-To: <1120397267.42c7e7d3cb21c@sms.ed.ac.uk>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200507031639.05068.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Sunday 03 July 2005 15:27, Dave Kor wrote:
> I have a system that automatically generate span queries to Lucene. 
Sometimes,
> the system generates a query like this one which always throws a
> RuntimeException:
> 
> spanNear([spanNear([text:interesting], 3, true), spanNear([text:interesting,
> text:john, text:said], 8, true)], 2, true)
> 
> Basically, the system is looking for a document that contains a string 
sequence
> "interesting .... interesting john said". The thrown exception is as 
follows:
> 
> java.lang.RuntimeException: Unexpected: ordered
>         at
> 
org.apache.lucene.search.spans.NearSpans.firstNonOrderedNextToPartialList(Unknown
> Source)
>         at org.apache.lucene.search.spans.NearSpans.next(Unknown Source)
>         at org.apache.lucene.search.spans.SpanScorer.next(Unknown Source)
>         at org.apache.lucene.search.Scorer.score(Unknown Source)
>         at org.apache.lucene.search.IndexSearcher.search(Unknown Source)
> 
> My question is, what does is this "Unexpected: ordered" mean? and is there
> anyway I can avoid these exceptions?

It's an internal error that is not supposed to occur.
Could you continue on the java-dev list?

SpanNearQuery is not supposed to operate on a single argument, at least
that's what I thought when I wrote the bug fix code that throws this
exception. Does the exception go away when you replace the first spanNear
(the one with the single [text:interesting]  with a SpanTermQuery ?

It's also possible that the code cannot handle the two identical
text:interesting arguments. 

It's probably good to have a test case for this. Could you extend the
exception with the document number and maybe a position within the
document to try and get to the original text that causes this exception,
and use that to file a bug report?

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 04 07:35:57 2005
Return-Path: <java-user-return-15277-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 266 invoked from network); 4 Jul 2005 07:35:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2005 07:35:57 -0000
Received: (qmail 180 invoked by uid 500); 4 Jul 2005 07:35:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 154 invoked by uid 500); 4 Jul 2005 07:35:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 140 invoked by uid 99); 4 Jul 2005 07:35:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 00:35:45 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME,TRACKER_ID
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of muetze303@gmx.li designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 04 Jul 2005 00:35:46 -0700
Received: (qmail 27905 invoked by uid 0); 4 Jul 2005 07:35:41 -0000
Received: from 212.59.36.36 by www83.gmx.net with HTTP;
	Mon, 4 Jul 2005 09:35:41 +0200 (MEST)
Date: Mon, 4 Jul 2005 09:35:41 +0200 (MEST)
From: muetze303@gmx.li
To: java-user@lucene.apache.org
MIME-Version: 1.0
Subject: =?ISO-8859-1?Q?Retrieval_model_used_by_Lucene?=
X-Priority: 3 (Normal)
X-Authenticated: #12158616
Message-ID: <31739.1120462541@www83.gmx.net>
X-Mailer: WWW-Mail 1.6 (Global Message Exchange)
X-Flags: 0001
Content-Type: text/plain; charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi everybody,

which kind of retrieval model is lucene using? Is it a simple vector model,
a extended boolean model or another model? A reliable source with
information about it would be fine, cause every source i found is telling
something different. :)

Greets

Michael

-- 
Weitersagen: GMX DSL-Flatrates mit Tempo-Garantie!
Ab 4,99 Euro/Monat: http://www.gmx.net/de/go/dsl

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 04 12:19:50 2005
Return-Path: <java-user-return-15278-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39474 invoked from network); 4 Jul 2005 12:19:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2005 12:19:50 -0000
Received: (qmail 47916 invoked by uid 500); 4 Jul 2005 12:19:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47888 invoked by uid 500); 4 Jul 2005 12:19:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47873 invoked by uid 99); 4 Jul 2005 12:19:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 05:19:41 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.215.166.64] (HELO grassmarket.ucs.ed.ac.uk) (129.215.166.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 05:19:42 -0700
Received: from grassmarket.ucs.ed.ac.uk (localhost [127.0.0.1])
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.10) with ESMTP id j64CJa1a029406
	for <java-user@lucene.apache.org>; Mon, 4 Jul 2005 13:19:36 +0100 (BST)
Received: (from nobody@localhost)
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.9/Submit) id j64CJa7Z029397
	for java-user@lucene.apache.org; Mon, 4 Jul 2005 13:19:36 +0100 (BST)
X-Authentication-Warning: grassmarket.ucs.ed.ac.uk: nobody set sender to s0454888@sms.ed.ac.uk using -f
Received: from neeps.cache.ed.ac.uk (neeps.cache.ed.ac.uk [129.215.13.84]) 
	by sms.ed.ac.uk (IMP) with HTTP 
	for <s0454888@sms.ed.ac.uk>; Mon, 04 Jul 2005 13:19:36 +0100
Message-ID: <1120479576.42c92958181c0@sms.ed.ac.uk>
Date: Mon, 04 Jul 2005 13:19:36 +0100
From: Dave Kor <s0454888@sms.ed.ac.uk>
To: java-user@lucene.apache.org
Subject: Re: Retrieval model used by Lucene
References: <31739.1120462541@www83.gmx.net>
In-Reply-To: <31739.1120462541@www83.gmx.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.3
X-Scanned-By: MIMEDefang 2.33 (www . roaringpenguin . com / mimedefang)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Quoting muetze303@gmx.li:

> Hi everybody,
>
> which kind of retrieval model is lucene using? Is it a simple vector model,
> a extended boolean model or another model? A reliable source with
> information about it would be fine, cause every source i found is telling
> something different. :)
>

Lucene uses the standard vector space model, basically TF*IDF.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 04 13:02:14 2005
Return-Path: <java-user-return-15279-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53898 invoked from network); 4 Jul 2005 13:02:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2005 13:02:14 -0000
Received: (qmail 6025 invoked by uid 500); 4 Jul 2005 13:02:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6004 invoked by uid 500); 4 Jul 2005 13:02:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5990 invoked by uid 99); 4 Jul 2005 13:02:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 06:02:07 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.190.217.57] (HELO mail.cordis.lu) (212.190.217.57)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 06:02:08 -0700
Received: from mailsvr.INTRASOFT.LU (mail.intrasoft.lu [212.190.217.251])
	by mail.cordis.lu (8.13.1/8.13.1) with ESMTP id j64F1hKb004441
	for <java-user@lucene.apache.org>; Mon, 4 Jul 2005 15:01:43 GMT
Received: by mailsvr.INTRASOFT.LU with Internet Mail Service (5.5.2657.72)
	id <3CNP6H66>; Mon, 4 Jul 2005 15:02:01 +0200
Message-ID: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCE15D@mailsvr.INTRASOFT.LU>
From: BOUDOT Christian <c.boudot@intrasoft.lu>
To: java-user@lucene.apache.org
Subject: RE: free text search with numbers
Date: Mon, 4 Jul 2005 15:02:00 +0200 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C58098.911DA2B0"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C58098.911DA2B0
Content-Type: text/plain

Hi,

I modified the analyzer (it is now vegetarian and won't eat numbers anymore
:-) but I have hit a new problem. The parser won't accept a keyword to start
with a wildcard character. (*/12/2003) Any hints to solve this new issue?

Many thanks

Chris

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: 01 July 2005 15:11
To: java-user@lucene.apache.org
Subject: Re: free text search with numbers


On Jul 1, 2005, at 8:06 AM, BOUDOT Christian wrote:
> It is the first time that I implement a search with Lucene, so  
> please don't
> laugh if my question seam trivial.
>
> When I enter some text in my free text search the query gets build  
> correctly
> but when I enter number (as string) the query parser seam to ignore  
> them.
> What am I doing wrong?
>
>
>
> Query: org.apache.lucene.search.Query
>
> Parser: org.apache.lucene.queryParser.MultiFieldQueryParser

Chris - the answer to this dilemma is here: http://wiki.apache.org/ 
jakarta-lucene/AnalysisParalysis

In short, the analyzer is eating the numbers as it was designed to do  
- you'll want to adjust the analyzer to achieve the indexing/ 
searching for numbers somehow.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------_=_NextPart_001_01C58098.911DA2B0--

From java-user-return-15280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 04 14:20:53 2005
Return-Path: <java-user-return-15280-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2329 invoked from network); 4 Jul 2005 14:20:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2005 14:20:53 -0000
Received: (qmail 9201 invoked by uid 500); 4 Jul 2005 14:20:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9163 invoked by uid 500); 4 Jul 2005 14:20:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9148 invoked by uid 99); 4 Jul 2005 14:20:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 07:20:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 07:20:43 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4A97D13E2006; Mon,  4 Jul 2005 10:20:35 -0400 (EDT)
Received: from [192.168.0.3] (64-203-185-8.va.mvl.ntelos.net [64.203.185.8])
	by ehatchersolutions.com (Postfix) with ESMTP id D97EC13E2005
	for <java-user@lucene.apache.org>; Mon,  4 Jul 2005 10:15:38 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCE15D@mailsvr.INTRASOFT.LU>
References: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCE15D@mailsvr.INTRASOFT.LU>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <865A2FF6-3859-4BCA-B420-0942E7018F6D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: free text search with numbers
Date: Mon, 4 Jul 2005 10:15:29 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 4, 2005, at 9:02 AM, BOUDOT Christian wrote:

> Hi,
>
> I modified the analyzer (it is now vegetarian and won't eat numbers  
> anymore
> :-) but I have hit a new problem. The parser won't accept a keyword  
> to start
> with a wildcard character. (*/12/2003) Any hints to solve this new  
> issue?

This is by-design "issue" with QueryParser (to avoid WildcardQuery's  
from being created that run through every term in the index).  It is  
the way the grammar has been defined.  You would need to build your  
own QueryParser to change this behavior.   The relevant QueryParser  
grammar piece is this (from QueryParser.jj):

| <WILDTERM:  <_TERM_START_CHAR>
               (<_TERM_CHAR> | ( [ "*", "?" ] ))* >

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 04 15:38:36 2005
Return-Path: <java-user-return-15281-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32689 invoked from network); 4 Jul 2005 15:38:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2005 15:38:36 -0000
Received: (qmail 23553 invoked by uid 500); 4 Jul 2005 15:38:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23533 invoked by uid 500); 4 Jul 2005 15:38:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23519 invoked by uid 99); 4 Jul 2005 15:38:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 08:38:28 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.190.217.57] (HELO mail.cordis.lu) (212.190.217.57)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 08:38:29 -0700
Received: from mailsvr.INTRASOFT.LU (mail.intrasoft.lu [212.190.217.251])
	by mail.cordis.lu (8.13.1/8.13.1) with ESMTP id j64Hc4RN007224
	for <java-user@lucene.apache.org>; Mon, 4 Jul 2005 17:38:04 GMT
Received: by mailsvr.INTRASOFT.LU with Internet Mail Service (5.5.2657.72)
	id <3CNP6JK0>; Mon, 4 Jul 2005 17:38:23 +0200
Message-ID: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCE218@mailsvr.INTRASOFT.LU>
From: BOUDOT Christian <c.boudot@intrasoft.lu>
To: java-user@lucene.apache.org
Subject: RE: free text search with numbers
Date: Mon, 4 Jul 2005 17:38:22 +0200 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C580AE.69075440"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C580AE.69075440
Content-Type: text/plain

I have found in the QueryParser.jj those lines of comments:

// OG: to support prefix queries:
// http://nagoya.apache.org/bugzilla/show_bug.cgi?id=12137
// Change from:
// | <WILDTERM:  <_TERM_START_CHAR>
//              (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
// To:
//
// | <WILDTERM:  (<_TERM_CHAR> | ( [ "*", "?" ] ))* >

So as indicated I changed my line to the second option but it didn't solve
the problem I still getting the lexical error. Do I have to do something
special to this .jj file or is it read when the QueryParser.java file is
compiled?

Cheers
Chris


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: 04 July 2005 16:15
To: java-user@lucene.apache.org
Subject: Re: free text search with numbers


On Jul 4, 2005, at 9:02 AM, BOUDOT Christian wrote:

> Hi,
>
> I modified the analyzer (it is now vegetarian and won't eat numbers  
> anymore
> :-) but I have hit a new problem. The parser won't accept a keyword  
> to start
> with a wildcard character. (*/12/2003) Any hints to solve this new  
> issue?

This is by-design "issue" with QueryParser (to avoid WildcardQuery's  
from being created that run through every term in the index).  It is  
the way the grammar has been defined.  You would need to build your  
own QueryParser to change this behavior.   The relevant QueryParser  
grammar piece is this (from QueryParser.jj):

| <WILDTERM:  <_TERM_START_CHAR>
               (<_TERM_CHAR> | ( [ "*", "?" ] ))* >

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------_=_NextPart_001_01C580AE.69075440--

From java-user-return-15282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 04 15:44:19 2005
Return-Path: <java-user-return-15282-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34160 invoked from network); 4 Jul 2005 15:44:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2005 15:44:19 -0000
Received: (qmail 31191 invoked by uid 500); 4 Jul 2005 15:44:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30906 invoked by uid 500); 4 Jul 2005 15:44:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30893 invoked by uid 99); 4 Jul 2005 15:44:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 08:44:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [62.23.157.12] (HELO xmailserver.test) (62.23.157.12)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 04 Jul 2005 08:44:14 -0700
Received: from localhost (127.0.0.1:3059)
	by xmailserver.test with [XMail 1.20 ESMTP Server]
	id <S12A0> for <java-user@lucene.apache.org> from <sven.duzont@keljob.com>;
	Mon, 4 Jul 2005 17:44:05 +0200
Date: Mon, 4 Jul 2005 17:44:05 +0200
From: Sven Duzont <sven.duzont@keljob.com>
X-Mailer: The Bat! (v3.5) Professional
Reply-To: Sven duzont <sven.duzont@keljob.com>
Organization: Keljob
X-Priority: 3 (Normal)
Message-ID: <168743348.20050704174405@keljob.com>
To: "Bohl, David" <java-user@lucene.apache.org>
Subject: Re[2]: Does highlighter highlight phrases only?
In-Reply-To: <4F8DDDFDAC9A864AAED5BB875129DF4B04D40BD2@tmskoex01.tm.thomsonmedia.com>
References:
 <4F8DDDFDAC9A864AAED5BB875129DF4B04D40BD2@tmskoex01.tm.thomsonmedia.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,

As i also encountered the phrase query issue with the old highlighter
code, I added a fieldName argument in case of the analyser handle it in the
tokenStream() method.
I just submitted the patch on bugzilla

--- sven


jeudi 30 juin 2005, 22:12:51, vous avez crit:

BD> FYI, I made an update to this (I'm the author) to handle span queries.  I
BD> uploaded the updated code to the same bugzilla link.  The code doesn't treat
BD> span queries like phrases - it just highlights the terms individually (if
BD> someone can find a way to highlight it as a phrase, feel free to update it).




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 04 16:05:33 2005
Return-Path: <java-user-return-15283-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42579 invoked from network); 4 Jul 2005 16:05:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2005 16:05:31 -0000
Received: (qmail 76557 invoked by uid 500); 4 Jul 2005 16:05:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76537 invoked by uid 500); 4 Jul 2005 16:05:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76521 invoked by uid 99); 4 Jul 2005 16:05:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 09:05:24 -0700
X-ASF-Spam-Status: No, hits=1.2 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME,TO_ADDRESS_EQ_REAL
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [144.118.29.72] (HELO shim2.irt.drexel.edu) (144.118.29.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 09:05:25 -0700
Received: from conversion-daemon.shim2.irt.drexel.edu by shim2.irt.drexel.edu
 (iPlanet Messaging Server 5.2 HotFix 1.17 (built Jun 23 2003))
 id <0IJ400201135ET@shim2.irt.drexel.edu> for java-user@lucene.apache.org; Mon,
 04 Jul 2005 12:05:20 -0400 (EDT)
Received: from drexel.edu ([192.168.5.136])
 by shim2.irt.drexel.edu (iPlanet Messaging Server 5.2 HotFix 1.17 (built Jun
 23 2003)) with ESMTP id <0IJ4007YS20W0Z@shim2.irt.drexel.edu> for
 java-user@lucene.apache.org; Mon, 04 Jul 2005 12:05:20 -0400 (EDT)
Received: from [144.118.29.48] by mail1.prvt.drexel.edu (mshttpd); Mon,
 04 Jul 2005 12:05:20 -0400
Date: Mon, 04 Jul 2005 12:05:20 -0400
From: xx28@drexel.edu
Subject: highlight term
To: "java-user@lucene.apache.org" <java-user@lucene.apache.org>
Message-id: <42ab16e42a8a72.42a8a7242ab16e@drexel.edu>
MIME-version: 1.0
X-Mailer: iPlanet Messenger Express 5.2 HotFix 1.17 (built Jun 23 2003)
Content-type: text/plain; charset=us-ascii
Content-language: en
Content-transfer-encoding: 7BIT
Content-disposition: inline
X-Accept-Language: en
Priority: normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi -

I tried increasing SUMMARY_LENGTH to 10000 (originally 200) in HTMLParser.java and HTMLParser.jj files. The purpose is to create snippet and highlight the search terms within it.

Then I used ant to compile (also used javacc-HTMLParser, compile, jar, jar-demo, war-demo and copied war file to appropriate directory), however, it looks like still 200 is used as SUMMARY_LENGTH, not 10000. 

Did I miss something here?

Thanks,

George


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 04 16:34:02 2005
Return-Path: <java-user-return-15284-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53066 invoked from network); 4 Jul 2005 16:34:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2005 16:34:02 -0000
Received: (qmail 7808 invoked by uid 500); 4 Jul 2005 16:33:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 7775 invoked by uid 500); 4 Jul 2005 16:33:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 7762 invoked by uid 99); 4 Jul 2005 16:33:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 09:33:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 09:33:55 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3BCCA13E2005; Mon,  4 Jul 2005 12:33:47 -0400 (EDT)
Received: from [192.168.0.3] (64-203-185-8.va.mvl.ntelos.net [64.203.185.8])
	by ehatchersolutions.com (Postfix) with ESMTP id B5DC313E2005
	for <java-user@lucene.apache.org>; Mon,  4 Jul 2005 12:33:29 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCE218@mailsvr.INTRASOFT.LU>
References: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCE218@mailsvr.INTRASOFT.LU>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8963F560-A658-4315-A2B1-9CDAA47C640D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: free text search with numbers
Date: Mon, 4 Jul 2005 12:33:29 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

A couple of sanity checks... you changes the main lines, not the  
comments I hope :)  And also, you need to rebuild the parser code by  
running JavaCC on it.  If you're tinkering with a copy of Lucene's  
source code you can run the Ant target "javacc" and you must have  
JavaCC installed per the build instructions.

     Erik



On Jul 4, 2005, at 11:38 AM, BOUDOT Christian wrote:

> I have found in the QueryParser.jj those lines of comments:
>
> // OG: to support prefix queries:
> // http://nagoya.apache.org/bugzilla/show_bug.cgi?id=12137
> // Change from:
> // | <WILDTERM:  <_TERM_START_CHAR>
> //              (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
> // To:
> //
> // | <WILDTERM:  (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>
> So as indicated I changed my line to the second option but it  
> didn't solve
> the problem I still getting the lexical error. Do I have to do  
> something
> special to this .jj file or is it read when the QueryParser.java  
> file is
> compiled?
>
> Cheers
> Chris
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: 04 July 2005 16:15
> To: java-user@lucene.apache.org
> Subject: Re: free text search with numbers
>
>
> On Jul 4, 2005, at 9:02 AM, BOUDOT Christian wrote:
>
>
>> Hi,
>>
>> I modified the analyzer (it is now vegetarian and won't eat numbers
>> anymore
>> :-) but I have hit a new problem. The parser won't accept a keyword
>> to start
>> with a wildcard character. (*/12/2003) Any hints to solve this new
>> issue?
>>
>
> This is by-design "issue" with QueryParser (to avoid WildcardQuery's
> from being created that run through every term in the index).  It is
> the way the grammar has been defined.  You would need to build your
> own QueryParser to change this behavior.   The relevant QueryParser
> grammar piece is this (from QueryParser.jj):
>
> | <WILDTERM:  <_TERM_START_CHAR>
>                (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>
>      Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 04 17:05:28 2005
Return-Path: <java-user-return-15285-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 62520 invoked from network); 4 Jul 2005 17:05:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2005 17:05:26 -0000
Received: (qmail 44327 invoked by uid 500); 4 Jul 2005 17:05:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44231 invoked by uid 500); 4 Jul 2005 17:05:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44218 invoked by uid 99); 4 Jul 2005 17:05:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 10:05:14 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.205 as permitted sender)
Received: from [64.233.170.205] (HELO rproxy.gmail.com) (64.233.170.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 10:05:16 -0700
Received: by rproxy.gmail.com with SMTP id 1so127746rny
        for <java-user@lucene.apache.org>; Mon, 04 Jul 2005 10:05:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=dz1ncL+0sP1qgaWVgV4np47DWTUCwKKXiT4JY0/thmDjROhn00yxI2G/ojYZw9ECDnuIjM27F/or6jmJ6EUI4EPALr7sPstDxASqWgf48cKlIn870QL85yRF5Ma8riElw7Y6DsPQ16c4vjY4qJ4aDjguvXQsi3byeUnYWS3gZFY=
Received: by 10.38.95.9 with SMTP id s9mr781843rnb;
        Mon, 04 Jul 2005 10:05:11 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Mon, 4 Jul 2005 10:05:11 -0700 (PDT)
Message-ID: <7ca12391050704100516f908a8@mail.gmail.com>
Date: Mon, 4 Jul 2005 10:05:11 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Retrieval model used by Lucene
In-Reply-To: <1120479576.42c92958181c0@sms.ed.ac.uk>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <31739.1120462541@www83.gmx.net>
	 <1120479576.42c92958181c0@sms.ed.ac.uk>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Well, I guess Lucene's Span query uses the Cover Density based model
(proximity model). However, it is within the framework of the TF*IDF
as well.

Jian

On 7/4/05, Dave Kor <s0454888@sms.ed.ac.uk> wrote:
> Quoting muetze303@gmx.li:
>=20
> > Hi everybody,
> >
> > which kind of retrieval model is lucene using? Is it a simple vector mo=
del,
> > a extended boolean model or another model? A reliable source with
> > information about it would be fine, cause every source i found is telli=
ng
> > something different. :)
> >
>=20
> Lucene uses the standard vector space model, basically TF*IDF.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 04 20:03:57 2005
Return-Path: <java-user-return-15286-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41061 invoked from network); 4 Jul 2005 20:03:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 4 Jul 2005 20:03:57 -0000
Received: (qmail 19137 invoked by uid 500); 4 Jul 2005 20:03:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18247 invoked by uid 500); 4 Jul 2005 20:03:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18234 invoked by uid 99); 4 Jul 2005 20:03:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 13:03:52 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=FROM_ENDS_IN_NUMS,HTML_20_30,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.73.178.246] (HELO web60918.mail.yahoo.com) (209.73.178.246)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 04 Jul 2005 13:03:53 -0700
Received: (qmail 15600 invoked by uid 60001); 4 Jul 2005 20:03:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=SqdtDuc0Q+bmGbIhlI3+sU5O4QaxcCZg8IaUjKLfmQ66Xvpk7GkYpPVcb91Uf6LJYXcWpPtvwTW5ea1eR9WK1nF9LhtKKiiM7JYg9OdoiRJvMcimagUYxxIQfjTdHh46Fr2JasJPcRI0dL32+M3u0gCKA6z5LOHEYU+t64P2ygM=  ;
Message-ID: <20050704200349.15598.qmail@web60918.mail.yahoo.com>
Received: from [69.225.162.190] by web60918.mail.yahoo.com via HTTP; Mon, 04 Jul 2005 13:03:49 PDT
Date: Mon, 4 Jul 2005 13:03:49 -0700 (PDT)
From: Chris Fellows <chrisfellows44@yahoo.com>
Subject: Most Useful Lucene Taglib?
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1944637357-1120507429=:15270"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1944637357-1120507429=:15270
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hello,
 
Looking for most useful lucene taglib and have found references to one written by a Iskandar Salim found at www.javaxp.net/lucene-taglib, but that site is 404. Found a patch submited in 2003 bug# 20283. Downloaded and seems adequate, but from the docs I've read, the javaxp seems superior. Does anyone know where to find or the best lucene taglib to use? Looked in jakarta taglibs but could not find.
 
Regards,
 
Chris

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 
--0-1944637357-1120507429=:15270--

From java-user-return-15287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 01:32:17 2005
Return-Path: <java-user-return-15287-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54827 invoked from network); 5 Jul 2005 01:32:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 01:32:16 -0000
Received: (qmail 21147 invoked by uid 500); 5 Jul 2005 01:32:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21129 invoked by uid 500); 5 Jul 2005 01:32:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21116 invoked by uid 99); 5 Jul 2005 01:32:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 18:32:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 18:32:09 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 71DC213E2005; Mon,  4 Jul 2005 21:32:00 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id CAD3313E2006
	for <java-user@lucene.apache.org>; Mon,  4 Jul 2005 21:31:42 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050704200349.15598.qmail@web60918.mail.yahoo.com>
References: <20050704200349.15598.qmail@web60918.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <80D74CBB-6DF5-4B07-9029-520CA303883F@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Most Useful Lucene Taglib?
Date: Mon, 4 Jul 2005 21:31:44 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris,

Once upon a time there was a taglib area in the Lucene Sandbox, but  
that has since been removed since the contributor of it disappeared.

What do you need a Lucene taglib to do?  I personally thing such a  
taglib is overkill and harder to use than it would be to just code up  
the functionality you need directly.

     Erik


On Jul 4, 2005, at 4:03 PM, Chris Fellows wrote:

> Hello,
>
> Looking for most useful lucene taglib and have found references to  
> one written by a Iskandar Salim found at www.javaxp.net/lucene- 
> taglib, but that site is 404. Found a patch submited in 2003 bug#  
> 20283. Downloaded and seems adequate, but from the docs I've read,  
> the javaxp seems superior. Does anyone know where to find or the  
> best lucene taglib to use? Looked in jakarta taglibs but could not  
> find.
>
> Regards,
>
> Chris
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 01:46:04 2005
Return-Path: <java-user-return-15288-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58443 invoked from network); 5 Jul 2005 01:46:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 01:46:03 -0000
Received: (qmail 31610 invoked by uid 500); 5 Jul 2005 01:45:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31588 invoked by uid 500); 5 Jul 2005 01:45:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31569 invoked by uid 99); 5 Jul 2005 01:45:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 18:45:56 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=FROM_ENDS_IN_NUMS,HTML_20_30,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.73.178.253] (HELO web60925.mail.yahoo.com) (209.73.178.253)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 04 Jul 2005 18:45:56 -0700
Received: (qmail 94846 invoked by uid 60001); 5 Jul 2005 01:45:48 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ArJZx6W+NCXj/SsTMh4voQEEUOiU0ElzaSM8NIxOZqwodtmp6ItQXhz6/OYrak603/EQwvxlynybfNRRkXRGcSNQzgryz3/liE0pr6HmK+NtjhtPxOINF8kT1K1LZwbF1lv/QgrP2EugFjjxws2xAMPm5acCLSPipx/Wgh45Fcg=  ;
Message-ID: <20050705014548.94844.qmail@web60925.mail.yahoo.com>
Received: from [69.225.162.190] by web60925.mail.yahoo.com via HTTP; Mon, 04 Jul 2005 18:45:47 PDT
Date: Mon, 4 Jul 2005 18:45:47 -0700 (PDT)
From: Chris Fellows <chrisfellows44@yahoo.com>
Subject: Re: Most Useful Lucene Taglib?
To: java-user@lucene.apache.org
In-Reply-To: <80D74CBB-6DF5-4B07-9029-520CA303883F@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-418845750-1120527947=:89722"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-418845750-1120527947=:89722
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

I was following an example in a book that referenced that taglib :) Book's copyrighted 2004 so there may be at least a small user base out there. I finally got the Sandbox version to work correctly on lucene 1.2. It doesn't work on 1.4.x. 
 
Perhaps it may be an overkill of a taglib, but my familiarity with Lucene dates to only this weekend. On the other hand there has been a sustained trend to move away from scriptlets. IS there a strong web client user base of Lucene?


Erik Hatcher <erik@ehatchersolutions.com> wrote:
Chris,

Once upon a time there was a taglib area in the Lucene Sandbox, but 
that has since been removed since the contributor of it disappeared.

What do you need a Lucene taglib to do? I personally thing such a 
taglib is overkill and harder to use than it would be to just code up 
the functionality you need directly.

Erik


On Jul 4, 2005, at 4:03 PM, Chris Fellows wrote:

> Hello,
>
> Looking for most useful lucene taglib and have found references to 
> one written by a Iskandar Salim found at www.javaxp.net/lucene- 
> taglib, but that site is 404. Found a patch submited in 2003 bug# 
> 20283. Downloaded and seems adequate, but from the docs I've read, 
> the javaxp seems superior. Does anyone know where to find or the 
> best lucene taglib to use? Looked in jakarta taglibs but could not 
> find.
>
> Regards,
>
> Chris
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam? Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


		
---------------------------------
Yahoo! Mail
 Stay connected, organized, and protected. Take the tour
--0-418845750-1120527947=:89722--

From java-user-return-15289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 06:26:31 2005
Return-Path: <java-user-return-15289-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51043 invoked from network); 5 Jul 2005 06:26:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 06:26:31 -0000
Received: (qmail 77551 invoked by uid 500); 5 Jul 2005 06:26:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77528 invoked by uid 500); 5 Jul 2005 06:26:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77515 invoked by uid 99); 5 Jul 2005 06:26:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 23:26:21 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.190.217.57] (HELO mail.cordis.lu) (212.190.217.57)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 04 Jul 2005 23:26:21 -0700
Received: from mailsvr.INTRASOFT.LU (mail.intrasoft.lu [212.190.217.251])
	by mail.cordis.lu (8.13.1/8.13.1) with ESMTP id j658Praf028746
	for <java-user@lucene.apache.org>; Tue, 5 Jul 2005 08:25:53 GMT
Received: by mailsvr.INTRASOFT.LU with Internet Mail Service (5.5.2657.72)
	id <3CNP63HM>; Tue, 5 Jul 2005 08:26:15 +0200
Message-ID: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCE231@mailsvr.INTRASOFT.LU>
From: BOUDOT Christian <c.boudot@intrasoft.lu>
To: java-user@lucene.apache.org
Subject: RE: free text search with numbers
Date: Tue, 5 Jul 2005 08:26:14 +0200 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5812A.71A95720"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5812A.71A95720
Content-Type: text/plain

:-) I changed the main lines and compiled the QueryParser.java after that I
compiled the entire package, build a new jar file and installed it on my
server. (I followed the same procedure I used when I added a new analyzer)

Cheers

Chris

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: 04 July 2005 18:33
To: java-user@lucene.apache.org
Subject: Re: free text search with numbers

A couple of sanity checks... you changes the main lines, not the  
comments I hope :)  And also, you need to rebuild the parser code by  
running JavaCC on it.  If you're tinkering with a copy of Lucene's  
source code you can run the Ant target "javacc" and you must have  
JavaCC installed per the build instructions.

     Erik



On Jul 4, 2005, at 11:38 AM, BOUDOT Christian wrote:

> I have found in the QueryParser.jj those lines of comments:
>
> // OG: to support prefix queries:
> // http://nagoya.apache.org/bugzilla/show_bug.cgi?id=12137
> // Change from:
> // | <WILDTERM:  <_TERM_START_CHAR>
> //              (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
> // To:
> //
> // | <WILDTERM:  (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>
> So as indicated I changed my line to the second option but it  
> didn't solve
> the problem I still getting the lexical error. Do I have to do  
> something
> special to this .jj file or is it read when the QueryParser.java  
> file is
> compiled?
>
> Cheers
> Chris
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: 04 July 2005 16:15
> To: java-user@lucene.apache.org
> Subject: Re: free text search with numbers
>
>
> On Jul 4, 2005, at 9:02 AM, BOUDOT Christian wrote:
>
>
>> Hi,
>>
>> I modified the analyzer (it is now vegetarian and won't eat numbers
>> anymore
>> :-) but I have hit a new problem. The parser won't accept a keyword
>> to start
>> with a wildcard character. (*/12/2003) Any hints to solve this new
>> issue?
>>
>
> This is by-design "issue" with QueryParser (to avoid WildcardQuery's
> from being created that run through every term in the index).  It is
> the way the grammar has been defined.  You would need to build your
> own QueryParser to change this behavior.   The relevant QueryParser
> grammar piece is this (from QueryParser.jj):
>
> | <WILDTERM:  <_TERM_START_CHAR>
>                (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>
>      Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------_=_NextPart_001_01C5812A.71A95720--

From java-user-return-15290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 07:45:03 2005
Return-Path: <java-user-return-15290-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12651 invoked from network); 5 Jul 2005 07:45:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 07:45:03 -0000
Received: (qmail 79599 invoked by uid 500); 5 Jul 2005 07:44:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79389 invoked by uid 500); 5 Jul 2005 07:44:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79376 invoked by uid 99); 5 Jul 2005 07:44:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 00:44:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [134.96.188.26] (HELO mail.dfki.de) (134.96.188.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 00:44:54 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 932DCE47F9
	for <java-user@lucene.apache.org>; Tue,  5 Jul 2005 09:44:48 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 82B1CE47ED
	for <java-user@lucene.apache.org>; Tue,  5 Jul 2005 09:44:48 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <20050705014548.94844.qmail@web60925.mail.yahoo.com>
References: <20050705014548.94844.qmail@web60925.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <b34d62284b7932707e22aba7288a3505@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: Most Useful Lucene Taglib?
Date: Tue, 5 Jul 2005 09:44:47 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Le 5 juil. 05, =E0 03:45, Chris Fellows a =E9crit :
> IS there a strong web client user base of Lucene?

I would estimate this to at least 50% of, say, the=20
java-user@lucene.apache.org mailing-list, really a personal guess,=20
though.

paul=


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 08:02:36 2005
Return-Path: <java-user-return-15291-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22450 invoked from network); 5 Jul 2005 08:02:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 08:02:36 -0000
Received: (qmail 10236 invoked by uid 500); 5 Jul 2005 08:02:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10215 invoked by uid 500); 5 Jul 2005 08:02:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10202 invoked by uid 99); 5 Jul 2005 08:02:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 01:02:28 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_30_40,HTML_MESSAGE,HTML_TITLE_EMPTY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [143.205.118.212] (HELO proserver2.ifit.uni-klu.ac.at) (143.205.118.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 01:02:28 -0700
Received: from [143.205.118.98] ([143.205.118.98]) by proserver2.ifit.uni-klu.ac.at over TLS secured channel with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 5 Jul 2005 10:02:21 +0200
Message-ID: <42CA3E8D.4000009@ifit.uni-klu.ac.at>
Date: Tue, 05 Jul 2005 10:02:21 +0200
From: sergiu gordea <gsergiu@ifit.uni-klu.ac.at>
User-Agent: Mozilla Thunderbird 0.7 (Windows/20040616)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: free text search with numbers
References: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCE218@mailsvr.INTRASOFT.LU>
In-Reply-To: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCE218@mailsvr.INTRASOFT.LU>
Content-Type: multipart/alternative;
 boundary="------------010101080009020802030301"
X-OriginalArrivalTime: 05 Jul 2005 08:02:21.0965 (UTC) FILETIME=[DF4FA3D0:01C58137]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------010101080009020802030301
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit

 Hi Christian,

 That syntax is not entirely correct.
Search in the mailing list for "*term"  or suffix queries
a few months ago I submitted the correct grammar that enables
suffix queries.

 Best,

 Sergiu

BOUDOT Christian wrote:

>I have found in the QueryParser.jj those lines of comments:
>
>// OG: to support prefix queries:
>// http://nagoya.apache.org/bugzilla/show_bug.cgi?id=12137
>// Change from:
>// | <WILDTERM:  <_TERM_START_CHAR>
>//              (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>// To:
>//
>// | <WILDTERM:  (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>
>So as indicated I changed my line to the second option but it didn't solve
>the problem I still getting the lexical error. Do I have to do something
>special to this .jj file or is it read when the QueryParser.java file is
>compiled?
>
>Cheers
>Chris
>
>
>-----Original Message-----
>From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
>Sent: 04 July 2005 16:15
>To: java-user@lucene.apache.org
>Subject: Re: free text search with numbers
>
>
>On Jul 4, 2005, at 9:02 AM, BOUDOT Christian wrote:
>
>  
>
>>Hi,
>>
>>I modified the analyzer (it is now vegetarian and won't eat numbers  
>>anymore
>>:-) but I have hit a new problem. The parser won't accept a keyword  
>>to start
>>with a wildcard character. (*/12/2003) Any hints to solve this new  
>>issue?
>>    
>>
>
>This is by-design "issue" with QueryParser (to avoid WildcardQuery's  
>from being created that run through every term in the index).  It is  
>the way the grammar has been defined.  You would need to build your  
>own QueryParser to change this behavior.   The relevant QueryParser  
>grammar piece is this (from QueryParser.jj):
>
>| <WILDTERM:  <_TERM_START_CHAR>
>               (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>
>     Erik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


--------------010101080009020802030301--

From java-user-return-15292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 09:54:48 2005
Return-Path: <java-user-return-15292-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80623 invoked from network); 5 Jul 2005 09:54:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 09:54:48 -0000
Received: (qmail 74662 invoked by uid 500); 5 Jul 2005 09:54:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74625 invoked by uid 500); 5 Jul 2005 09:54:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74568 invoked by uid 99); 5 Jul 2005 09:54:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 02:54:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 02:54:38 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4BE5613E2006; Tue,  5 Jul 2005 05:54:29 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id F298313E2005
	for <java-user@lucene.apache.org>; Tue,  5 Jul 2005 05:54:17 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050705014548.94844.qmail@web60925.mail.yahoo.com>
References: <20050705014548.94844.qmail@web60925.mail.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E22F8037-082C-4A85-ABDD-607EDB9BF853@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Most Useful Lucene Taglib?
Date: Tue, 5 Jul 2005 05:54:18 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 4, 2005, at 9:45 PM, Chris Fellows wrote:
> Perhaps it may be an overkill of a taglib, but my familiarity with  
> Lucene dates to only this weekend. On the other hand there has been  
> a sustained trend to move away from scriptlets.

By no means was I suggesting scriptlets, though pragmatically there  
is nothing wrong with view-tier scriptlets in JSP pages.  There is  
something wrong with JSP in general :)  (it would be off-topic to  
elaborate)

Being new to Lucene is even the more reason to use Lucene's  
straightforward and simple API directly rather than start with what  
is probably taglib of mediocre quality.

I presume you have some sort of MVC architecture in your system?  If  
so, the controller would receive a query from the client, perform the  
search, and push the results to be displayed to the JSP (perhaps as  
Hits or a subset of the documents as a Document[]).  Paging controls  
for displaying Hits could simply be hyperlinks back to the search  
with an additional page parameter that the controller will use to set  
the starting point for that page.  There isn't much more needed that  
that, is there?

> IS there a strong web client user base of Lucene?

Of course.  http://www.lucenebook.com for example, which uses  
Tapestry for the searching and results page.

     Erik



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 09:59:35 2005
Return-Path: <java-user-return-15293-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82979 invoked from network); 5 Jul 2005 09:59:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 09:59:34 -0000
Received: (qmail 80518 invoked by uid 500); 5 Jul 2005 09:59:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80501 invoked by uid 500); 5 Jul 2005 09:59:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80488 invoked by uid 99); 5 Jul 2005 09:59:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 02:59:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 02:59:27 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id AB16A13E2005; Tue,  5 Jul 2005 05:59:17 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id A8A8913E2006
	for <java-user@lucene.apache.org>; Tue,  5 Jul 2005 05:58:44 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCE231@mailsvr.INTRASOFT.LU>
References: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCE231@mailsvr.INTRASOFT.LU>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <93594720-EB95-436E-AAB7-77EA9474CEDE@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: free text search with numbers
Date: Tue, 5 Jul 2005 05:58:47 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 5, 2005, at 2:26 AM, BOUDOT Christian wrote:

> :-) I changed the main lines and compiled the QueryParser.java  
> after that I
> compiled the entire package, build a new jar file and installed it  
> on my
> server. (I followed the same procedure I used when I added a new  
> analyzer)

Sorry if these are dumb questions, but you changed QueryParser.jj and  
then recompiled QueryParser.java?  Did you run JavaCC to regenerate  
QueryParser.java?

You don't need to rebuild Lucene to add a new Analyzer.   
QueryParser.jj is quite a different story as it is a JavaCC-based  
parser and needs another step of generation besides just compilation  
of the .java file.

     Erik


>
> Cheers
>
> Chris
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: 04 July 2005 18:33
> To: java-user@lucene.apache.org
> Subject: Re: free text search with numbers
>
> A couple of sanity checks... you changes the main lines, not the
> comments I hope :)  And also, you need to rebuild the parser code by
> running JavaCC on it.  If you're tinkering with a copy of Lucene's
> source code you can run the Ant target "javacc" and you must have
> JavaCC installed per the build instructions.
>
>      Erik
>
>
>
> On Jul 4, 2005, at 11:38 AM, BOUDOT Christian wrote:
>
>
>> I have found in the QueryParser.jj those lines of comments:
>>
>> // OG: to support prefix queries:
>> // http://nagoya.apache.org/bugzilla/show_bug.cgi?id=12137
>> // Change from:
>> // | <WILDTERM:  <_TERM_START_CHAR>
>> //              (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>> // To:
>> //
>> // | <WILDTERM:  (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>>
>> So as indicated I changed my line to the second option but it
>> didn't solve
>> the problem I still getting the lexical error. Do I have to do
>> something
>> special to this .jj file or is it read when the QueryParser.java
>> file is
>> compiled?
>>
>> Cheers
>> Chris
>>
>>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: 04 July 2005 16:15
>> To: java-user@lucene.apache.org
>> Subject: Re: free text search with numbers
>>
>>
>> On Jul 4, 2005, at 9:02 AM, BOUDOT Christian wrote:
>>
>>
>>
>>> Hi,
>>>
>>> I modified the analyzer (it is now vegetarian and won't eat numbers
>>> anymore
>>> :-) but I have hit a new problem. The parser won't accept a keyword
>>> to start
>>> with a wildcard character. (*/12/2003) Any hints to solve this new
>>> issue?
>>>
>>>
>>
>> This is by-design "issue" with QueryParser (to avoid WildcardQuery's
>> from being created that run through every term in the index).  It is
>> the way the grammar has been defined.  You would need to build your
>> own QueryParser to change this behavior.   The relevant QueryParser
>> grammar piece is this (from QueryParser.jj):
>>
>> | <WILDTERM:  <_TERM_START_CHAR>
>>                (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>>
>>      Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 12:40:44 2005
Return-Path: <java-user-return-15294-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53756 invoked from network); 5 Jul 2005 12:40:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 12:40:44 -0000
Received: (qmail 76164 invoked by uid 500); 5 Jul 2005 12:40:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76141 invoked by uid 500); 5 Jul 2005 12:40:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76128 invoked by uid 99); 5 Jul 2005 12:40:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 05:40:35 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.190.217.57] (HELO mail.cordis.lu) (212.190.217.57)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 05:40:35 -0700
Received: from mailsvr.INTRASOFT.LU (mail.intrasoft.lu [212.190.217.251])
	by mail.cordis.lu (8.13.1/8.13.1) with ESMTP id j65Ee5JH002142
	for <java-user@lucene.apache.org>; Tue, 5 Jul 2005 14:40:05 GMT
Received: by mailsvr.INTRASOFT.LU with Internet Mail Service (5.5.2657.72)
	id <3CNP6QK2>; Tue, 5 Jul 2005 14:40:29 +0200
Message-ID: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCE3D0@mailsvr.INTRASOFT.LU>
From: BOUDOT Christian <c.boudot@intrasoft.lu>
To: java-user@lucene.apache.org
Subject: RE: free text search with numbers
Date: Tue, 5 Jul 2005 14:40:24 +0200 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5815E.B69BF430"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5815E.B69BF430
Content-Type: text/plain

Your questions are not dump but I am :-S I am not familiar with JavaCC and
the .jj files. I didn't know I had to generate the java files with JavaCC.
Of course it works now. There is still a lot to discover for me :-)

Many thanks for your help and patience.

Cheers

Chris


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
Sent: 05 July 2005 11:59
To: java-user@lucene.apache.org
Subject: Re: free text search with numbers


On Jul 5, 2005, at 2:26 AM, BOUDOT Christian wrote:

> :-) I changed the main lines and compiled the QueryParser.java  
> after that I
> compiled the entire package, build a new jar file and installed it  
> on my
> server. (I followed the same procedure I used when I added a new  
> analyzer)

Sorry if these are dumb questions, but you changed QueryParser.jj and  
then recompiled QueryParser.java?  Did you run JavaCC to regenerate  
QueryParser.java?

You don't need to rebuild Lucene to add a new Analyzer.   
QueryParser.jj is quite a different story as it is a JavaCC-based  
parser and needs another step of generation besides just compilation  
of the .java file.

     Erik


>
> Cheers
>
> Chris
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: 04 July 2005 18:33
> To: java-user@lucene.apache.org
> Subject: Re: free text search with numbers
>
> A couple of sanity checks... you changes the main lines, not the
> comments I hope :)  And also, you need to rebuild the parser code by
> running JavaCC on it.  If you're tinkering with a copy of Lucene's
> source code you can run the Ant target "javacc" and you must have
> JavaCC installed per the build instructions.
>
>      Erik
>
>
>
> On Jul 4, 2005, at 11:38 AM, BOUDOT Christian wrote:
>
>
>> I have found in the QueryParser.jj those lines of comments:
>>
>> // OG: to support prefix queries:
>> // http://nagoya.apache.org/bugzilla/show_bug.cgi?id=12137
>> // Change from:
>> // | <WILDTERM:  <_TERM_START_CHAR>
>> //              (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>> // To:
>> //
>> // | <WILDTERM:  (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>>
>> So as indicated I changed my line to the second option but it
>> didn't solve
>> the problem I still getting the lexical error. Do I have to do
>> something
>> special to this .jj file or is it read when the QueryParser.java
>> file is
>> compiled?
>>
>> Cheers
>> Chris
>>
>>
>> -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: 04 July 2005 16:15
>> To: java-user@lucene.apache.org
>> Subject: Re: free text search with numbers
>>
>>
>> On Jul 4, 2005, at 9:02 AM, BOUDOT Christian wrote:
>>
>>
>>
>>> Hi,
>>>
>>> I modified the analyzer (it is now vegetarian and won't eat numbers
>>> anymore
>>> :-) but I have hit a new problem. The parser won't accept a keyword
>>> to start
>>> with a wildcard character. (*/12/2003) Any hints to solve this new
>>> issue?
>>>
>>>
>>
>> This is by-design "issue" with QueryParser (to avoid WildcardQuery's
>> from being created that run through every term in the index).  It is
>> the way the grammar has been defined.  You would need to build your
>> own QueryParser to change this behavior.   The relevant QueryParser
>> grammar piece is this (from QueryParser.jj):
>>
>> | <WILDTERM:  <_TERM_START_CHAR>
>>                (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>>
>>      Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

------_=_NextPart_001_01C5815E.B69BF430--

From java-user-return-15295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 12:41:11 2005
Return-Path: <java-user-return-15295-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53841 invoked from network); 5 Jul 2005 12:41:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 12:41:11 -0000
Received: (qmail 77342 invoked by uid 500); 5 Jul 2005 12:41:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77322 invoked by uid 500); 5 Jul 2005 12:41:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77308 invoked by uid 99); 5 Jul 2005 12:41:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 05:41:04 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.190.217.57] (HELO mail.cordis.lu) (212.190.217.57)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 05:41:04 -0700
Received: from mailsvr.INTRASOFT.LU (mail.intrasoft.lu [212.190.217.251])
	by mail.cordis.lu (8.13.1/8.13.1) with ESMTP id j65EeZTb002159
	for <java-user@lucene.apache.org>; Tue, 5 Jul 2005 14:40:35 GMT
Received: by mailsvr.INTRASOFT.LU with Internet Mail Service (5.5.2657.72)
	id <3CNP6QK3>; Tue, 5 Jul 2005 14:40:59 +0200
Message-ID: <A2DF56E8BC9B964884DD1A7C9C812C0F04FCE3D2@mailsvr.INTRASOFT.LU>
From: BOUDOT Christian <c.boudot@intrasoft.lu>
To: java-user@lucene.apache.org
Subject: RE: free text search with numbers
Date: Tue, 5 Jul 2005 14:40:57 +0200 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5815E.CA9D1BD0"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5815E.CA9D1BD0
Content-Type: text/plain

Thanks for the hint.

Cheers

Chris

-----Original Message-----
From: sergiu gordea [mailto:gsergiu@ifit.uni-klu.ac.at] 
Sent: 05 July 2005 10:02
To: java-user@lucene.apache.org
Subject: Re: free text search with numbers

 Hi Christian,

 That syntax is not entirely correct.
Search in the mailing list for "*term"  or suffix queries
a few months ago I submitted the correct grammar that enables
suffix queries.

 Best,

 Sergiu

BOUDOT Christian wrote:

>I have found in the QueryParser.jj those lines of comments:
>
>// OG: to support prefix queries:
>// http://nagoya.apache.org/bugzilla/show_bug.cgi?id=12137
>// Change from:
>// | <WILDTERM:  <_TERM_START_CHAR>
>//              (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>// To:
>//
>// | <WILDTERM:  (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>
>So as indicated I changed my line to the second option but it didn't solve
>the problem I still getting the lexical error. Do I have to do something
>special to this .jj file or is it read when the QueryParser.java file is
>compiled?
>
>Cheers
>Chris
>
>
>-----Original Message-----
>From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
>Sent: 04 July 2005 16:15
>To: java-user@lucene.apache.org
>Subject: Re: free text search with numbers
>
>
>On Jul 4, 2005, at 9:02 AM, BOUDOT Christian wrote:
>
>  
>
>>Hi,
>>
>>I modified the analyzer (it is now vegetarian and won't eat numbers  
>>anymore
>>:-) but I have hit a new problem. The parser won't accept a keyword  
>>to start
>>with a wildcard character. (*/12/2003) Any hints to solve this new  
>>issue?
>>    
>>
>
>This is by-design "issue" with QueryParser (to avoid WildcardQuery's  
>from being created that run through every term in the index).  It is  
>the way the grammar has been defined.  You would need to build your  
>own QueryParser to change this behavior.   The relevant QueryParser  
>grammar piece is this (from QueryParser.jj):
>
>| <WILDTERM:  <_TERM_START_CHAR>
>               (<_TERM_CHAR> | ( [ "*", "?" ] ))* >
>
>     Erik
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>


------_=_NextPart_001_01C5815E.CA9D1BD0--

From java-user-return-15296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 12:50:29 2005
Return-Path: <java-user-return-15296-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57809 invoked from network); 5 Jul 2005 12:50:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 12:50:28 -0000
Received: (qmail 91928 invoked by uid 500); 5 Jul 2005 12:50:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91886 invoked by uid 500); 5 Jul 2005 12:50:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91803 invoked by uid 99); 5 Jul 2005 12:50:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 05:50:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [64.74.127.3] (HELO svr.ftp1.com) (64.74.127.3)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 05:50:16 -0700
Received: from graphite by svr.ftp1.com with local (Exim 4.44)
	id 1DpmsL-0001FV-Bc
	for java-user@lucene.apache.org; Tue, 05 Jul 2005 07:50:09 -0500
Received: from 192.223.163.5 ([192.223.163.5])
        (SquirrelMail authenticated user tony@simpleobjects.com);
        by www.simpleobjects.com with HTTP;
        Tue, 5 Jul 2005 08:50:09 -0400 (EDT)
Message-ID: <14943.192.223.163.5.1120567809.squirrel@192.223.163.5>
Date: Tue, 5 Jul 2005 08:50:09 -0400 (EDT)
Subject: if delete all docs in segment - when is segment deleted
From: "Tony Schwartz" <tony@simpleobjects.com>
To: java-user@lucene.apache.org
User-Agent: SquirrelMail/1.4.3a
X-Mailer: SquirrelMail/1.4.3a
MIME-Version: 1.0
Content-Type: text/plain;charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Priority: 3 (Normal)
Importance: Normal
X-AntiAbuse: This header was added to track abuse, please include it with any abuse report
X-AntiAbuse: Primary Hostname - svr.ftp1.com
X-AntiAbuse: Original Domain - lucene.apache.org
X-AntiAbuse: Originator/Caller UID/GID - [32036 808] / [47 12]
X-AntiAbuse: Sender Address Domain - simpleobjects.com
X-Source: /usr/local/cpanel/3rdparty/bin/php
X-Source-Args: /usr/local/cpanel/3rdparty/bin/php /usr/local/cpanel/base/3rdparty/squirrelmail/src/compose.php 
X-Source-Dir: :/base/3rdparty/squirrelmail/src
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If every doc in a segment is deleted, when does the segment go away?
Without me having to dig too deep, I was hoping someone could help me prepare for this
eventuality.  I have an index that grows infinitely.  Old docs are deleted each day just
before new docs for that day are added.  If I set MaxMergeDocs to some number, say 1
million, and the segment has 1 million docs in it, and every doc in that segment is
deleted, will the segment ever be deleted?  If not, how difficult would it be to add
some type of trigger to detect this "all deleted in segment" condition so lucene could
remove the huge segment to free disk space.  I'm concerned the segment will never be
deleted.

Tony Schwartz
tony@simpleobjects.com
There are 10 types of people in this world.  Ones that understand binary and ones that
don't.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 13:48:51 2005
Return-Path: <java-user-return-15297-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 20100 invoked from network); 5 Jul 2005 13:48:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 13:48:51 -0000
Received: (qmail 88907 invoked by uid 500); 5 Jul 2005 13:48:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88833 invoked by uid 500); 5 Jul 2005 13:48:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88820 invoked by uid 99); 5 Jul 2005 13:48:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 06:48:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of TAigner@wescodist.com designates 12.29.179.202 as permitted sender)
Received: from [12.29.179.202] (HELO mail01.wescodist.com) (12.29.179.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 06:48:39 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C58168.3CA087A4"
Subject: question on filters
Date: Tue, 5 Jul 2005 09:48:34 -0400
Message-ID: <14FBF41EF1411B45B2EC4ADEAC53D1310350B60D@MAIL01.wescodist.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: question on filters
Thread-Index: AcWBYCm0MRefrl+IQVCgryyMJ/W1CgAB6i2g
From: "Aigner, Thomas" <TAigner@WescoDist.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C58168.3CA087A4
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

Hi all,

      I am creating a punctuation filter to filter certain punctuation
out of the token stream.  I am getting a "The field t.termText is not
visible" error.  I'm not sure what I would need to include to make this
property visible (I am still new to Lucene and Java for that matter).  I
copied to code from the LowerCaseFilter that Lucene uses and slightly
modified it.

=20

=20

import java.io.IOException;

import org.apache.lucene.analysis.TokenStream;

import org.apache.lucene.analysis.TokenFilter;

import org.apache.lucene.analysis.Token;

=20

public class PunctuationFilter extends TokenFilter {

  public PunctuationFilter(TokenStream in) {

    super(in);

  }

=20

  public Token next() throws IOException {

     =20

    Token t =3D input.next();

=20

    if (t =3D=3D null)

      return null;

=20

    t.termText =3D t.termText.replaceAll("-","");

    t.termText =3D t.termText.replaceAll("/","");

   =20

    return t;

  }

}

=20

=20

Thanks all,

Tom


------_=_NextPart_001_01C58168.3CA087A4--

From java-user-return-15298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 20:41:43 2005
Return-Path: <java-user-return-15298-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32919 invoked from network); 5 Jul 2005 20:41:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 20:41:43 -0000
Received: (qmail 9572 invoked by uid 500); 5 Jul 2005 20:41:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9550 invoked by uid 500); 5 Jul 2005 20:41:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9537 invoked by uid 99); 5 Jul 2005 20:41:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 13:41:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 13:41:36 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 35D4613E2007; Tue,  5 Jul 2005 16:41:25 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id AE18E13E210E
	for <java-user@lucene.apache.org>; Tue,  5 Jul 2005 16:41:06 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <14FBF41EF1411B45B2EC4ADEAC53D1310350B60D@MAIL01.wescodist.com>
References: <14FBF41EF1411B45B2EC4ADEAC53D1310350B60D@MAIL01.wescodist.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F617FC6C-EFC8-444D-956E-CA5CA55FBE87@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: question on filters
Date: Tue, 5 Jul 2005 16:41:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.7 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 5, 2005, at 9:48 AM, Aigner, Thomas wrote:

> Hi all,
>
>       I am creating a punctuation filter to filter certain punctuation
> out of the token stream.  I am getting a "The field t.termText is not
> visible" error.  I'm not sure what I would need to include to make  
> this
> property visible (I am still new to Lucene and Java for that  
> matter).  I
> copied to code from the LowerCaseFilter that Lucene uses and slightly
> modified it.


>
>     t.termText = t.termText.replaceAll("-","");
>
>     t.termText = t.termText.replaceAll("/","");

Use the termText() _method_, not the internal accessor.  You will  
need to create a new Token in this case.  For example, look at the  
source to the following analyzer (from the Lucene in Action source):

package lia.analysis.codec;

import org.apache.lucene.analysis.TokenFilter;
import org.apache.lucene.analysis.Token;
import org.apache.lucene.analysis.TokenStream;
import org.apache.commons.codec.language.Metaphone;
import org.apache.commons.codec.EncoderException;
import java.io.IOException;

/**
* Remove??  We don't show this anymore since SynonymAnalyzer
* demonstrates placing more than one token in a position
*/
public class MetaphoneInjectionFilter extends TokenFilter {
   public static String METAPHONE = "METAPHONE";

   private Metaphone metaphoner = new Metaphone();
   private Token save;

   public MetaphoneInjectionFilter(TokenStream input) {
     super(input);
   }

   public Token next() throws IOException {

     // emit saved token, if available
     if (save != null) {
       Token temp = save;
       save = null;
       return temp;
     }

     // pull next token from stream
     Token t = input.next();

     if (t == null) return null;   // all done

     // create metaphone, save until next request
     if (save == null) {
       String value = t.termText();

       try {
         value = metaphoner.encode(t.termText());
       } catch (EncoderException ignored) {
         // ignored
       }

       save = new Token(value, t.startOffset(),
                 t.endOffset(), METAPHONE);
       save.setPositionIncrement(0);
     }

     return t;

   }
}



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 20:50:52 2005
Return-Path: <java-user-return-15299-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37255 invoked from network); 5 Jul 2005 20:50:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 20:50:51 -0000
Received: (qmail 20588 invoked by uid 500); 5 Jul 2005 20:50:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20568 invoked by uid 500); 5 Jul 2005 20:50:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20554 invoked by uid 99); 5 Jul 2005 20:50:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 13:50:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 13:50:43 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DpuMr-0007ir-SO
	for java-user@lucene.apache.org; Tue, 05 Jul 2005 22:50:09 +0200
Received: from r4bv35.chello.upc.cz ([84.42.201.35])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 05 Jul 2005 22:50:09 +0200
Received: from literakl by r4bv35.chello.upc.cz with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Tue, 05 Jul 2005 22:50:09 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Leos Literak <literakl@seznam.cz>
Subject:  highlighter to use with 1.4.3?
Date:  Tue, 05 Jul 2005 22:48:42 +0200
Lines: 15
Message-ID: <daernb$49f$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: r4bv35.chello.upc.cz
User-Agent: Mozilla Thunderbird 1.0 (X11/20041209)
X-Accept-Language: en-us, en
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I'd like to play around with highlighter.
I downloaded one from sandbox, but it doesn't
compile against lucene stable 1.4.3.

highlight/TokenSources.java:19: cannot find symbol
     [javac] symbol  : class TermVectorOffsetInfo

Is there some package that can be used with lucene 1.4.3
distribution? If not, please think of us poor users,
that don't live on cutting edge and all that they need
is some ZIP or TAR to download :-)

Leos


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 20:59:03 2005
Return-Path: <java-user-return-15300-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41025 invoked from network); 5 Jul 2005 20:59:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 20:59:03 -0000
Received: (qmail 31335 invoked by uid 500); 5 Jul 2005 20:58:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31308 invoked by uid 500); 5 Jul 2005 20:58:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31288 invoked by uid 99); 5 Jul 2005 20:58:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 13:58:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.245.223.231] (HELO trekspace.trekspace.com) (207.245.223.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 13:58:56 -0700
Received: from trekspace.trekspace.com (trekspace@trekspace.trekspace.com [192.168.2.234])
	by trekspace.trekspace.com (8.12.3/8.12.3/Debian-7.1) with ESMTP id j65KwpZZ004260
	for <java-user@lucene.apache.org>; Tue, 5 Jul 2005 16:58:51 -0400
Message-ID: <786160445965283803APPKVAWSEI.tlai@trekspace.com>
Date: Tue, 5 Jul 2005 16:58:51 -0400 (EDT)
From: Terence Lai <tlai@trekspace.com>
Reply-To: Terence Lai <tlai@trekspace.com>
To: java-user@lucene.apache.org
Subject: Question on the Sandbox Highlighter
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: Treklogic MailTool v1.6 http://www.treklogic.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I am currently using Lucene 1.4.2 with the highighter downloaded from Lucene In Action.

The Highlighter class provides the following method to highlight the terms specified in the Query:

/**
 * Highlights chosen terms in a text, extracting the most relevant section.
 * The document text is analysed in chunks to record hit statistics
 * across the document. After accumulating stats, the fragment with the highest score
 * is returned
 *
 * @param tokenStream   a stream of tokens identified in the text parameter, including offset information. 
 * This is typically produced by an analyzer re-parsing a document's 
 * text. Some work may be done on retrieving TokenStreams more efficently 
 * by adding support for storing original text position data in the Lucene
 * index but this support is not currently available (as of Lucene 1.4 rc2).  
 * @param text text to highlight terms in
 *
 * @return highlighted text fragment or null if no terms found
 */
public final String getBestFragment(TokenStream tokenStream, String text)
       throws IOException;


According to the javadoc, this method only returns the most relevant section of the text. Is there any way or method to return ENTIRED text with the terms being highlighted?

Thanks,
Terence




----------------------------------------------------------
Get your free email account from http://www.trekspace.com
          Your Internet Virtual Desktop!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 21:23:57 2005
Return-Path: <java-user-return-15301-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51977 invoked from network); 5 Jul 2005 21:23:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 21:23:57 -0000
Received: (qmail 69450 invoked by uid 500); 5 Jul 2005 21:23:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 69424 invoked by uid 500); 5 Jul 2005 21:23:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 69405 invoked by uid 99); 5 Jul 2005 21:23:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 14:23:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 14:23:50 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 63FDD13E200A; Tue,  5 Jul 2005 17:23:42 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 9526913E2007
	for <java-user@lucene.apache.org>; Tue,  5 Jul 2005 17:23:21 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <786160445965283803APPKVAWSEI.tlai@trekspace.com>
References: <786160445965283803APPKVAWSEI.tlai@trekspace.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5CA18D0D-2303-467D-BBBE-6183CC804029@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Question on the Sandbox Highlighter
Date: Tue, 5 Jul 2005 17:23:20 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 5, 2005, at 4:58 PM, Terence Lai wrote:
> I am currently using Lucene 1.4.2 with the highighter downloaded  
> from Lucene In Action.
>
> The Highlighter class provides the following method to highlight  
> the terms specified in the Query:
>
> /**
>  * Highlights chosen terms in a text, extracting the most relevant  
> section.
>  * The document text is analysed in chunks to record hit statistics
>  * across the document. After accumulating stats, the fragment with  
> the highest score
>  * is returned
>  *
>  * @param tokenStream   a stream of tokens identified in the text  
> parameter, including offset information.
>  * This is typically produced by an analyzer re-parsing a document's
>  * text. Some work may be done on retrieving TokenStreams more  
> efficently
>  * by adding support for storing original text position data in the  
> Lucene
>  * index but this support is not currently available (as of Lucene  
> 1.4 rc2).
>  * @param text text to highlight terms in
>  *
>  * @return highlighted text fragment or null if no terms found
>  */
> public final String getBestFragment(TokenStream tokenStream, String  
> text)
>        throws IOException;
>
>
> According to the javadoc, this method only returns the most  
> relevant section of the text. Is there any way or method to return  
> ENTIRED text with the terms being highlighted?

Yes - it relies on the Fragmenter.  For lucenebook.com, for example,  
if a search result is for a blog entry, the entire contents are  
highlighted using a NullFragmenter:

package lia.web;

import org.apache.lucene.search.highlight.Fragmenter;
import org.apache.lucene.analysis.Token;

public class NullFragmenter implements Fragmenter {
   public void start(String s) {
   }

   public boolean isNewFragment(Token token) {
     return false;
   }
}


     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 21:27:18 2005
Return-Path: <java-user-return-15302-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52978 invoked from network); 5 Jul 2005 21:27:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 21:27:17 -0000
Received: (qmail 75593 invoked by uid 500); 5 Jul 2005 21:27:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75562 invoked by uid 500); 5 Jul 2005 21:27:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75548 invoked by uid 99); 5 Jul 2005 21:27:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 14:27:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 14:27:11 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id DAF1213E2007; Tue,  5 Jul 2005 17:27:03 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id D675C13E2007
	for <java-user@lucene.apache.org>; Tue,  5 Jul 2005 17:26:57 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <daernb$49f$1@sea.gmane.org>
References: <daernb$49f$1@sea.gmane.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9C4FF39C-AFF0-44B9-ABAC-027F45296D41@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: highlighter to use with 1.4.3?
Date: Tue, 5 Jul 2005 17:27:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 5, 2005, at 4:48 PM, Leos Literak wrote:

> Hi,
>
> I'd like to play around with highlighter.
> I downloaded one from sandbox, but it doesn't
> compile against lucene stable 1.4.3.
>
> highlight/TokenSources.java:19: cannot find symbol
>     [javac] symbol  : class TermVectorOffsetInfo
>
> Is there some package that can be used with lucene 1.4.3
> distribution? If not, please think of us poor users,
> that don't live on cutting edge and all that they need
> is some ZIP or TAR to download :-)

My apologies here.  The trunk of Subversion has parts that are not  
backwards compatible.  You probably can get back to the old CVS  
repository and pull the jakarta-lucene-sandbox codebase, but an  
easier download would be to use the Highlighter JAR found in the  
Lucene in Action codebase at http://www.lucenebook.com

In future releases of Lucene, all the contrib pieces will ship in the  
binary downloads in binary form and the source code will be packaged  
up in the source downloads.  In the past, the sandbox was a built-it- 
yourself batteries-not-included area.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 21:55:10 2005
Return-Path: <java-user-return-15303-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63414 invoked from network); 5 Jul 2005 21:55:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 21:55:10 -0000
Received: (qmail 24508 invoked by uid 500); 5 Jul 2005 21:55:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 24489 invoked by uid 500); 5 Jul 2005 21:55:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 24476 invoked by uid 99); 5 Jul 2005 21:55:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 14:55:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yourabi@gmail.com designates 64.233.184.202 as permitted sender)
Received: from [64.233.184.202] (HELO wproxy.gmail.com) (64.233.184.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 14:55:04 -0700
Received: by wproxy.gmail.com with SMTP id i5so1136432wra
        for <java-user@lucene.apache.org>; Tue, 05 Jul 2005 14:55:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=lj0HHSb7AK1Scbkn/4vOiNgm6TJEdQpIVINutr4ez5oYpO8EWNOzvrLlPnd+O15xKMrsOo4osCTxrIhO176sdDnZrChkILTsfmbyUOjX7uloMyd2Z5T0UMsX+JhpnIHiJ5g9TE2sSLbZJjs8W9FXqJNQ7LnD15GQ9qrxjwPWIsQ=
Received: by 10.54.45.21 with SMTP id s21mr4717770wrs;
        Tue, 05 Jul 2005 14:55:00 -0700 (PDT)
Received: by 10.54.14.63 with HTTP; Tue, 5 Jul 2005 14:55:00 -0700 (PDT)
Message-ID: <b13f3f06050705145533b4033f@mail.gmail.com>
Date: Tue, 5 Jul 2005 14:55:00 -0700
From: Yousef Ourabi <yourabi@gmail.com>
Reply-To: Yousef Ourabi <yourabi@gmail.com>
To: java-user@lucene.apache.org
Subject: PhraseQuery Incompatible format version
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey All:
Quick Question about the following error I am getting when I use a
string tokenizer to parse the query string. The query I pass to is
Great Expections / Great Expectations, both are two tokens however?

phraseQuery.add(new Term("content", tok.nextToken()));
IOException caught SearchByTerm: Incompatible format version: 2
expected 1 or less

Any thoughts?

-Yousef

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 22:24:28 2005
Return-Path: <java-user-return-15304-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76635 invoked from network); 5 Jul 2005 22:24:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 22:24:27 -0000
Received: (qmail 72274 invoked by uid 500); 5 Jul 2005 22:24:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72249 invoked by uid 500); 5 Jul 2005 22:24:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72235 invoked by uid 99); 5 Jul 2005 22:24:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 15:24:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.152.184.149] (HELO internalmx.vasoftware.com) (12.152.184.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 15:24:18 -0700
Received: from netblock-66-159-223-11.dslextreme.com ([66.159.223.11]:55735 helo=[192.168.1.74])
	by internalmx.vasoftware.com with asmtp 
	(Cipher TLSv1:RC4-SHA:128) (Exim 4.22 #1 (Debian))
	id 1Dpvpu-0004u5-If by VAauthid <cconrad> with fixed_plain
	for <java-user@lucene.apache.org>; Tue, 05 Jul 2005 15:24:14 -0700
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42C32DDE.3060703@tropo.com>
References: <B2C6C2CE-EB47-480D-9BE3-E444938D5B64@vasoftware.com> <42C32DDE.3060703@tropo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <402F7DAF-CAC1-419F-8CD6-554450ECF95E@vasoftware.com>
Content-Transfer-Encoding: 7bit
From: Chris Conrad <cconrad@vasoftware.com>
Subject: Re: SF.net search system
Date: Tue, 5 Jul 2005 15:24:09 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Score-Int: 
X-EA-Verified: internalmx.vasoftware.com 1Dpvpu-0004u5-If a15c9308ff7a7df6287c7c57da6cfba3
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi David,

On Jun 29, 2005, at 4:25 PM, David Spencer wrote:

> Chris Conrad wrote:
>
>> I know I've been asked before for a description of how   
>> SourceForge.net is using Lucene.  I wrote a blog entry about it  
>> and  thought people might be interested in seeing at a high level  
>> how it  was designed.  Take a look at http://blog.dev.sf.net.  Any  
>> comments  are welcome.
>>
>
> Thanks for the writeup and nice to see that you guys are using Lucene.
>
> It would be interesting to know what Analyzer you're using, and as  
> your blog entry says you're having some wierd problem, well, I  
> suspect the most common source of strange Lucene behavior is that  
> the "wrong" Analyzer is used.

We're using the StandardAnalyzer.  We are having very strange  
problems and I haven't been able to track them down.  I know that the  
SourceForge Enterprise Edition team at VA has also seen the same kind  
of problem (i.e. search terms returning no results when there seem to  
be matches).

>
> Also, out of curiosity: what's the peak load the search system gets?

We don't really measure peak load accurately but if you watch the  
query log it's scrolling constantly.  I would guess that we peak at  
5-7 queries per second but don't quote me on it.

>
> thx,
>  Dave
>
>
>> --Chris Conrad
>> SourceForge.net Engineer
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 22:27:37 2005
Return-Path: <java-user-return-15305-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77966 invoked from network); 5 Jul 2005 22:27:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 22:27:36 -0000
Received: (qmail 81449 invoked by uid 500); 5 Jul 2005 22:27:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81337 invoked by uid 500); 5 Jul 2005 22:27:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81323 invoked by uid 99); 5 Jul 2005 22:27:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 15:27:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.152.184.149] (HELO internalmx.vasoftware.com) (12.152.184.149)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 15:27:29 -0700
Received: from netblock-66-159-223-11.dslextreme.com ([66.159.223.11]:55828 helo=[192.168.1.74])
	by internalmx.vasoftware.com with asmtp 
	(Cipher TLSv1:RC4-SHA:128) (Exim 4.22 #1 (Debian))
	id 1Dpvsz-0004xq-Ff by VAauthid <cconrad> with fixed_plain; Tue, 05 Jul 2005 15:27:25 -0700
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <6e3ae631050629163723ff1e76@mail.gmail.com>
References: <B2C6C2CE-EB47-480D-9BE3-E444938D5B64@vasoftware.com> <42C32DDE.3060703@tropo.com> <6e3ae631050629163723ff1e76@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <813722BA-B137-4A94-93D1-63CC38E648B2@vasoftware.com>
Content-Transfer-Encoding: 7bit
From: Chris Conrad <cconrad@vasoftware.com>
Subject: Re: SF.net search system
Date: Tue, 5 Jul 2005 15:27:20 -0700
To: java-user@lucene.apache.org,
 Chris Lu <chris.lu@gmail.com>
X-Mailer: Apple Mail (2.730)
X-Spam-Score-Int: 
X-EA-Verified: internalmx.vasoftware.com 1Dpvsz-0004xq-Ff 724790c922488f808bba2f7cdab984ad
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jun 29, 2005, at 4:37 PM, Chris Lu wrote:

> How is your crawler is done?
> I saw SF.net searches several types of documents, like "People",
> "Freshmeet.net", "Site Doc". Are they all from database?

We don't crawl per se, we use triggers in the database to spool  
changes to a table which is then processed in batches.  The searches  
which are searching data stored on SourceForge.net all work that  
way.  The Freshmeat.net search, on the other hand, actually posts the  
search to Freshmeat.net.  We have no control over their search  
system, though, that search type is provided as a convenience for users.

>
> A little bit marketing here:
> I am working on an off-the-shelf product called DBSight. It's
> basically Database+Lucene+Query Display. It can do most of the things
> you mentioned(no offense to your great work). And it is scalable to
> enterprise level database. Basically it can be attached to any
> database and create a search engine rapidly.
>
> It can even support subscriber(s)+publisher mode. So instead of a
> powerful machine, you can use several ordinary computer to create a
> search farm.
>
> Configurations, inlucding Analyzers, are configurable through web UI.
>
> check out this demo:
> http://search.dbsight.com

I took a quick look at your tool and it seems pretty robust.  Perhaps  
I'll have time to fully evaluate it at some point.

Thanks,
--Chris Conrad
SourceForge.net Engineer

>
> Chris Lu
>
> On 6/29/05, David Spencer <dave-lucene-user@tropo.com> wrote:
>
>> Chris Conrad wrote:
>>
>>> I know I've been asked before for a description of how   
>>> SourceForge.net
>>> is using Lucene.  I wrote a blog entry about it and  thought people
>>> might be interested in seeing at a high level how it  was designed.
>>> Take a look at http://blog.dev.sf.net.  Any comments  are welcome.
>>>
>>
>> Thanks for the writeup and nice to see that you guys are using  
>> Lucene.
>>
>> It would be interesting to know what Analyzer you're using, and as  
>> your
>> blog entry says you're having some wierd problem, well, I suspect the
>> most common source of strange Lucene behavior is that the "wrong"
>> Analyzer is used.
>>
>> Also, out of curiosity: what's the peak load the search system gets?
>>
>> thx,
>>   Dave
>>
>>
>>>
>>> --Chris Conrad
>>> SourceForge.net Engineer
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 05 23:02:02 2005
Return-Path: <java-user-return-15306-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90050 invoked from network); 5 Jul 2005 23:02:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 5 Jul 2005 23:02:02 -0000
Received: (qmail 30010 invoked by uid 500); 5 Jul 2005 23:01:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29790 invoked by uid 500); 5 Jul 2005 23:01:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29777 invoked by uid 99); 5 Jul 2005 23:01:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 16:01:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 05 Jul 2005 16:01:56 -0700
Received: from [192.168.0.254] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j65N29Z17986
	for <java-user@lucene.apache.org>; Tue, 5 Jul 2005 18:02:09 -0500
Message-ID: <42CB115E.4000407@getopt.org>
Date: Wed, 06 Jul 2005 01:01:50 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: SF.net search system
References: <B2C6C2CE-EB47-480D-9BE3-E444938D5B64@vasoftware.com> <42C32DDE.3060703@tropo.com> <402F7DAF-CAC1-419F-8CD6-554450ECF95E@vasoftware.com>
In-Reply-To: <402F7DAF-CAC1-419F-8CD6-554450ECF95E@vasoftware.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Conrad wrote:
> We're using the StandardAnalyzer.  We are having very strange  problems 
> and I haven't been able to track them down.  I know that the  
> SourceForge Enterprise Edition team at VA has also seen the same kind  
> of problem (i.e. search terms returning no results when there seem to  
> be matches).
> 

You may want to use Luke (http://www.getopt.org/luke) to see the details 
of your index. You should be able to find documents by using a simple 
term query on the Documents tab, and then move on to the Search tab and 
see how your more complex queries are being rewritten.

It's also possible that some of the hits fall below the threshold of the 
default HitCollector.


-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 09:24:19 2005
Return-Path: <java-user-return-15307-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49298 invoked from network); 6 Jul 2005 09:24:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 09:24:19 -0000
Received: (qmail 94848 invoked by uid 500); 6 Jul 2005 09:24:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94818 invoked by uid 500); 6 Jul 2005 09:24:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94805 invoked by uid 99); 6 Jul 2005 09:24:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 02:24:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 02:24:10 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1Dq67J-0006YZ-TP
	for java-user@lucene.apache.org; Wed, 06 Jul 2005 11:22:53 +0200
Received: from r4bv35.chello.upc.cz ([84.42.201.35])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2005 11:22:53 +0200
Received: from literakl by r4bv35.chello.upc.cz with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2005 11:22:53 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Leos Literak <literakl@seznam.cz>
Subject:  lucene logo
Date:  Wed, 06 Jul 2005 11:21:43 +0200
Lines: 9
Message-ID: <dag7r7$1kv$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: r4bv35.chello.upc.cz
User-Agent: Mozilla Thunderbird 1.0 (X11/20041209)
X-Accept-Language: en-us, en
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I'd like to put lucene logo plus link to my search
page, but logo on Lucene website is too big. Does
any one has some smaller one? Max 100 pixels wide?

Thanks

Leos


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 09:52:54 2005
Return-Path: <java-user-return-15308-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60782 invoked from network); 6 Jul 2005 09:52:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 09:52:53 -0000
Received: (qmail 32608 invoked by uid 500); 6 Jul 2005 09:52:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32576 invoked by uid 500); 6 Jul 2005 09:52:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32554 invoked by uid 99); 6 Jul 2005 09:52:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 02:52:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [212.17.32.37] (HELO gran.netsource.ie) (212.17.32.37)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 02:52:44 -0700
Received: from dsl-43-11.dsl.netsource.ie ([213.79.43.11] helo=alanlaptop)
	by gran.netsource.ie with esmtp (Exim 3.35 #1)
	id 1Dq6a4-0007Ma-00
	for java-user@lucene.apache.org; Wed, 06 Jul 2005 10:52:36 +0100
To: java-user@lucene.apache.org
Subject: Re: lucene logo
References: <dag7r7$1kv$1@sea.gmane.org>
Message-ID: <op.sthkdxjhsbbnoh@alanlaptop>
Date: Wed, 06 Jul 2005 10:52:35 +0100
From: "Alan Hicks" <alan.hicks@omega.ie>
Organization: Omegasoft
Content-Type: multipart/mixed; boundary=----------pM5wXSixWCwmzeSMUs9yx0
MIME-Version: 1.0
In-Reply-To: <dag7r7$1kv$1@sea.gmane.org>
User-Agent: Opera M2/8.01 (Win32, build 7642)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------------pM5wXSixWCwmzeSMUs9yx0
Content-Type: text/plain; format=flowed; delsp=yes; charset=iso-8859-15
Content-Transfer-Encoding: 8bit

Hi,

Just resized the logo lucene from apaceh.org to 100 x 15.

Its attached.

Alan.



On Wed, 06 Jul 2005 10:21:43 +0100, Leos Literak <literakl@seznam.cz>  
wrote:

> Hi,
>
> I'd like to put lucene logo plus link to my search
> page, but logo on Lucene website is too big. Does
> any one has some smaller one? Max 100 pixels wide?
>
> Thanks
>
> Leos
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>



-- 
Alan Hicks
Omegasoft
01-2941100

------------pM5wXSixWCwmzeSMUs9yx0
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------------pM5wXSixWCwmzeSMUs9yx0--



From java-user-return-15309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 12:28:05 2005
Return-Path: <java-user-return-15309-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31290 invoked from network); 6 Jul 2005 12:28:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 12:28:04 -0000
Received: (qmail 6922 invoked by uid 500); 6 Jul 2005 12:27:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6875 invoked by uid 500); 6 Jul 2005 12:27:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6852 invoked by uid 99); 6 Jul 2005 12:27:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 05:27:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 05:27:48 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 619BF13E2006; Wed,  6 Jul 2005 08:27:39 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 8CC8113E2005
	for <java-user@lucene.apache.org>; Wed,  6 Jul 2005 08:27:35 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <dag7r7$1kv$1@sea.gmane.org>
References: <dag7r7$1kv$1@sea.gmane.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <AEAF55A5-C984-4C11-8C6D-3BEC30282ECB@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: lucene logo
Date: Wed, 6 Jul 2005 08:27:28 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 6, 2005, at 5:21 AM, Leos Literak wrote:
> I'd like to put lucene logo plus link to my search
> page, but logo on Lucene website is too big. Does
> any one has some smaller one? Max 100 pixels wide?

There are a few different sizes here:

     http://svn.apache.org/repos/asf/lucene/java/trunk/docs/images/



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 12:58:44 2005
Return-Path: <java-user-return-15310-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45369 invoked from network); 6 Jul 2005 12:58:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 12:58:43 -0000
Received: (qmail 63857 invoked by uid 500); 6 Jul 2005 12:58:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63836 invoked by uid 500); 6 Jul 2005 12:58:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 22614 invoked by uid 99); 6 Jul 2005 09:41:41 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of SRS0=ZjPn=VK=danielnaber.de=lucenelist@srs.kundenserver.de designates 212.227.126.171 as permitted sender)
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: lucene logo
Date: Wed, 6 Jul 2005 11:41:25 +0200
User-Agent: KMail/1.7.1
References: <dag7r7$1kv$1@sea.gmane.org>
In-Reply-To: <dag7r7$1kv$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200507061141.25431.lucenelist@danielnaber.de>
X-Provags-ID: kundenserver.de abuse@kundenserver.de login:94b5a5949d2eb00693e70b0c89be5163
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 06 July 2005 11:21, Leos Literak wrote:

> I'd like to put lucene logo plus link to my search
> page, but logo on Lucene website is too big. Does
> any one has some smaller one? Max 100 pixels wide?

Here's one (lower right corner):
http://www.intrafind.org/iFinder-WebApp/index-dpa.jsp?appID=1

Regards
 Daniel

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 15:30:52 2005
Return-Path: <java-user-return-15311-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43643 invoked from network); 6 Jul 2005 15:30:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 15:30:51 -0000
Received: (qmail 14236 invoked by uid 500); 6 Jul 2005 15:30:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14154 invoked by uid 500); 6 Jul 2005 15:30:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14123 invoked by uid 99); 6 Jul 2005 15:30:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 08:30:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 08:30:38 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DqBr5-000134-Su
	for java-user@lucene.apache.org; Wed, 06 Jul 2005 17:30:31 +0200
Received: from r4bv35.chello.upc.cz ([84.42.201.35])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2005 17:30:31 +0200
Received: from literakl by r4bv35.chello.upc.cz with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2005 17:30:31 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Leos Literak <literakl@seznam.cz>
Subject:  no results for date field
Date:  Wed, 06 Jul 2005 17:29:22 +0200
Lines: 29
Message-ID: <dagtcj$5rr$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: r4bv35.chello.upc.cz
User-Agent: Mozilla Thunderbird 1.0 (X11/20041209)
X-Accept-Language: en-us, en
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I've added to index date field:

     public Field setCreated(Date date) {
         Field field = Field.Keyword(CREATED, date);
         document.add(field);
         return field;
     }

Now I try to search according to documentation:

created:[20040101 TO 20050707]

But there is no hit. Using luke I realized, that
this field has such most frequent values:

0d0xug8go
0cl92izmg

etc.

What am I doing wrong? Is syntax for date range queries
locale specific? I have not found an answear from documentation
or google search.

Thanks

Leos


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 15:54:31 2005
Return-Path: <java-user-return-15312-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54801 invoked from network); 6 Jul 2005 15:54:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 15:54:30 -0000
Received: (qmail 66691 invoked by uid 500); 6 Jul 2005 15:54:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66626 invoked by uid 500); 6 Jul 2005 15:54:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66585 invoked by uid 99); 6 Jul 2005 15:54:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 08:54:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 08:54:18 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DqCCV-0004rE-KL
	for java-user@lucene.apache.org; Wed, 06 Jul 2005 17:52:39 +0200
Received: from r4bv35.chello.upc.cz ([84.42.201.35])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2005 17:52:39 +0200
Received: from literakl by r4bv35.chello.upc.cz with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2005 17:52:39 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Leos Literak <literakl@seznam.cz>
Subject:  Re: lucene logo
Date:  Wed, 06 Jul 2005 17:50:48 +0200
Lines: 12
Message-ID: <daguko$9tf$1@sea.gmane.org>
References:  <dag7r7$1kv$1@sea.gmane.org> <AEAF55A5-C984-4C11-8C6D-3BEC30282ECB@ehatchersolutions.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: r4bv35.chello.upc.cz
User-Agent: Mozilla Thunderbird 1.0 (X11/20041209)
X-Accept-Language: en-us, en
In-Reply-To: <AEAF55A5-C984-4C11-8C6D-3BEC30282ECB@ehatchersolutions.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher wrote:
> There are a few different sizes here:
> 
>     http://svn.apache.org/repos/asf/lucene/java/trunk/docs/images/

Thanks, that is, what I needed.
See http://www.abclinuxu.cz/Search?query=

Could you please add www.abclinuxu.cz to Powered by page?
Thanks

Leos


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 16:04:23 2005
Return-Path: <java-user-return-15313-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59178 invoked from network); 6 Jul 2005 16:04:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 16:04:23 -0000
Received: (qmail 91113 invoked by uid 500); 6 Jul 2005 16:04:15 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91082 invoked by uid 500); 6 Jul 2005 16:04:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91068 invoked by uid 99); 6 Jul 2005 16:04:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 09:04:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 09:04:15 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9FAB013E2006; Wed,  6 Jul 2005 12:04:07 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 3200E13E2005
	for <java-user@lucene.apache.org>; Wed,  6 Jul 2005 12:03:49 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <daguko$9tf$1@sea.gmane.org>
References: <dag7r7$1kv$1@sea.gmane.org> <AEAF55A5-C984-4C11-8C6D-3BEC30282ECB@ehatchersolutions.com> <daguko$9tf$1@sea.gmane.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <47C0C9F2-20F5-40CA-984E-6E1B232C9CB8@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: lucene logo
Date: Wed, 6 Jul 2005 12:03:49 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 6, 2005, at 11:50 AM, Leos Literak wrote:
> Thanks, that is, what I needed.
> See http://www.abclinuxu.cz/Search?query=
>
> Could you please add www.abclinuxu.cz to Powered by page?

Add it yourself - it's now on the user maintained wiki :)

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 16:08:15 2005
Return-Path: <java-user-return-15314-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60789 invoked from network); 6 Jul 2005 16:08:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 16:08:10 -0000
Received: (qmail 1403 invoked by uid 500); 6 Jul 2005 16:07:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1361 invoked by uid 500); 6 Jul 2005 16:07:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1305 invoked by uid 99); 6 Jul 2005 16:07:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 09:07:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 09:07:35 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8DE4313E2006; Wed,  6 Jul 2005 12:07:26 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id DD32213E2005
	for <java-user@lucene.apache.org>; Wed,  6 Jul 2005 12:07:06 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <dagtcj$5rr$1@sea.gmane.org>
References: <dagtcj$5rr$1@sea.gmane.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <EF0C5554-F42E-4C81-A3FE-8BA07822C9C2@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: no results for date field
Date: Wed, 6 Jul 2005 12:07:08 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 6, 2005, at 11:29 AM, Leos Literak wrote:
> I've added to index date field:
>
>     public Field setCreated(Date date) {
>         Field field = Field.Keyword(CREATED, date);
>         document.add(field);
>         return field;
>     }
>
> Now I try to search according to documentation:
>
> created:[20040101 TO 20050707]
>
> But there is no hit. Using luke I realized, that
> this field has such most frequent values:
>
> 0d0xug8go
> 0cl92izmg
>
> etc.
>
> What am I doing wrong? Is syntax for date range queries
> locale specific? I have not found an answear from documentation
> or google search.

What documentation shows that syntax when using Field.Keyword(String,  
Date)?

QueryParser attempts to parse the from and to strings as simple date  
formats with the default locale.  You would use something like  
"created:[01/01/04 TO 07/05/05]".

Please read up on the issues that the default date handling poses  
though.  Simply indexing with YYYYMMDD format is generally a better  
way to go, though you will need to adjust for this to handle range  
queries with QueryParser.  Lots of details of the date issues are in  
Lucene in Action and some details on the wiki too I believe.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 16:15:00 2005
Return-Path: <java-user-return-15315-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64780 invoked from network); 6 Jul 2005 16:14:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 16:14:59 -0000
Received: (qmail 18477 invoked by uid 500); 6 Jul 2005 16:14:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18436 invoked by uid 500); 6 Jul 2005 16:14:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18423 invoked by uid 99); 6 Jul 2005 16:14:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 09:14:52 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.215.166.64] (HELO grassmarket.ucs.ed.ac.uk) (129.215.166.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 09:14:51 -0700
Received: from grassmarket.ucs.ed.ac.uk (localhost [127.0.0.1])
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.10) with ESMTP id j66GEk1a006675
	for <java-user@lucene.apache.org>; Wed, 6 Jul 2005 17:14:46 +0100 (BST)
Received: (from nobody@localhost)
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.9/Submit) id j66GEkNu006674
	for java-user@lucene.apache.org; Wed, 6 Jul 2005 17:14:46 +0100 (BST)
X-Authentication-Warning: grassmarket.ucs.ed.ac.uk: nobody set sender to s0454888@sms.ed.ac.uk using -f
Received: from haggis.cache.ed.ac.uk (haggis.cache.ed.ac.uk [129.215.13.83]) 
	by sms.ed.ac.uk (IMP) with HTTP 
	for <s0454888@sms.ed.ac.uk>; Wed, 06 Jul 2005 17:14:46 +0100
Message-ID: <1120666486.42cc03764974e@sms.ed.ac.uk>
Date: Wed, 06 Jul 2005 17:14:46 +0100
From: Dave Kor <s0454888@sms.ed.ac.uk>
To: java-user@lucene.apache.org
Subject: Boosting SpanQueries
References: <dag7r7$1kv$1@sea.gmane.org>
In-Reply-To: <dag7r7$1kv$1@sea.gmane.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.3
X-Scanned-By: MIMEDefang 2.33 (www . roaringpenguin . com / mimedefang)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I was just wondering, if I set the boost factor in SpanQueries such as the
SpanNearQuery or SpanOrQuery, does it get used?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 17:26:38 2005
Return-Path: <java-user-return-15316-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98868 invoked from network); 6 Jul 2005 17:26:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 17:26:38 -0000
Received: (qmail 97648 invoked by uid 500); 6 Jul 2005 17:26:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97622 invoked by uid 500); 6 Jul 2005 17:26:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97609 invoked by uid 99); 6 Jul 2005 17:26:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 10:26:28 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=HTML_30_40,HTML_MESSAGE,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.130.33.22] (HELO mail21b.london21-verio.com) (213.130.33.22)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 06 Jul 2005 10:26:26 -0700
Received: from www.seinet.es (62.73.179.228)
	by mail21b.london21-verio.com (RS ver 1.0.95vs) with SMTP id 0-133912780
	for <java-user@lucene.apache.org>; Wed,  6 Jul 2005 18:26:21 +0100 (BST)
Message-ID: <005801c5824f$d313e1d0$bf00a8c0@akenaton>
From: "MariLuz Elola" <melola@seinet.es>
To: <java-user@lucene.apache.org>
Subject: OUTOFMEMORY ERROR
Date: Wed, 6 Jul 2005 19:26:20 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0055_01C58260.96576B70"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Loop-Detect:1
X-DistLoop-Detect:1
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0055_01C58260.96576B70
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi, I have a problem when I am trying to search a simple query without =
sorting into an index with 210.000 documents.
Executing the query several times I am getting the OutOfMemory error.
I am creating an IndexSearcher(pathDir) every search.=20
I don=B4t know if it will be necessary to create only one indexSearcher =
and caching it,
If I search into an index with only 50.000 documents, the outofMemory =
error doen=B4t appear.
------------------------
ENVIROMENT DESCRIPTION:
------------------------

---SERVER---
MEMORY 2GB
APP SERVER Jboss3.2.3
JAVA_OPTS -Xmx640M -Xms640M

----LUCENE 1.4.3-------
INDEX +- 210.000 documents
EACH DOCUMENT +- 20 fields (metadatas)
SIZE TEXT DOCUMENT 1k

------------------------
ERROR:
------------------------
18:52:18,657 ERROR [LogInterceptor] Unexpected Error:
java.lang.OutOfMemoryError
18:52:18,657 ERROR [LogInterceptor] Unexpected Error:
java.lang.OutOfMemoryError
18:52:18,660 ERROR [STDERR] java.rmi.ServerError: Unexpected Error; =
nested exception is:
        java.lang.OutOfMemoryError
18:52:18,661 ERROR [STDERR]     at =
org.jboss.ejb.plugins.LogInterceptor.handleException(LogInterceptor.java:=
374)
18:52:18,661 ERROR [STDERR]     at =
org.jboss.ejb.plugins.LogInterceptor.invoke(LogInterceptor.java:195)
18:52:18,661 ERROR [STDERR]     at =
org.jboss.ejb.plugins.ProxyFactoryFinderInterceptor.invoke(ProxyFactoryFi=
nderInterceptor.java:122)
18:52:18,662 ERROR [STDERR]     at =
org.jboss.ejb.StatelessSessionContainer.internalInvoke(StatelessSessionCo=
ntainer.java:331)
18:52:18,662 ERROR [STDERR]     at =
org.jboss.ejb.Container.invoke(Container.java:700)
18:52:18,662 ERROR [STDERR]     at =
sun.reflect.GeneratedMethodAccessor40.invoke(Unknown Source)
18:52:18,662 ERROR [STDERR]     at =
sun.reflect.DelegatingMethodAccessorImpl.invok
..
..
Exception java.lang.OutOfMemoryError: requested 4 bytes for CMS: Work =
queue overflow; try -XX:-CMSParallelRemarkEnabled. Out of swap space?


Could anybody help me???

Thanks in advance

    Mari Luz







------=_NextPart_000_0055_01C58260.96576B70--



From java-user-return-15317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 17:46:35 2005
Return-Path: <java-user-return-15317-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7712 invoked from network); 6 Jul 2005 17:46:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 17:46:34 -0000
Received: (qmail 44512 invoked by uid 500); 6 Jul 2005 17:46:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44485 invoked by uid 500); 6 Jul 2005 17:46:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44472 invoked by uid 99); 6 Jul 2005 17:46:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 10:46:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.198.134] (HELO web31505.mail.mud.yahoo.com) (68.142.198.134)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 06 Jul 2005 10:46:27 -0700
Received: (qmail 18481 invoked by uid 60001); 6 Jul 2005 17:46:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=kXbUL6MPpxr22ENvrfkCU51NiUBHqn59WufhM4wkP9Ltk+bU/QZ2wPruXHLTepUXV8K9G5jop9gq9RCu7AFjro6dXGeGvoNQGZvqXFa+IhTeI7gIwv5qyVyKSXq8vkSB9PXr99E3kxOtvDDgwNu747Mo4RG7lp+LQRPzIaQuNiE=  ;
Message-ID: <20050706174622.18479.qmail@web31505.mail.mud.yahoo.com>
Received: from [64.95.118.32] by web31505.mail.mud.yahoo.com via HTTP; Wed, 06 Jul 2005 10:46:22 PDT
Date: Wed, 6 Jul 2005 10:46:22 -0700 (PDT)
From: ian parkin <iaparkin@yahoo.com>
Subject: Help with custom sorting - ignoring case on string fields.
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello Folks,

Previously, I was using version 1.3 of Lucene that had no complex
sorting abilities, so I wrote my own code to do this using a TreeMap
and Comparator. The sorting was basically lower case comparisons of
strings with a few extra little tweaks here and there.

This past weekend I upgraded to 1.4.3 of Lucene and am looking for
some help with custom sorting code. 

My application stores a couple of mixed-case text fields 'author' and
'title' as Field.Text and I would like to sort on these fields in a
case insensitive manner.

I have been looking at the DistanceComparatorSource example in the
'Lucene In Action' book and have been trying to adapt that to my
humble needs, but so far no luck. For some reason, I just can't get
my head round the example in order to tailor it to my needs.

Does anyone have any example ComparatorSource code that sorts strings
ignoring the case ?

Thanks

IAP

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 19:01:55 2005
Return-Path: <java-user-return-15318-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39466 invoked from network); 6 Jul 2005 19:01:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 19:01:54 -0000
Received: (qmail 24059 invoked by uid 500); 6 Jul 2005 19:01:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23993 invoked by uid 500); 6 Jul 2005 19:01:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23947 invoked by uid 99); 6 Jul 2005 19:01:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 12:01:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yourabi@gmail.com designates 64.233.184.199 as permitted sender)
Received: from [64.233.184.199] (HELO wproxy.gmail.com) (64.233.184.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 12:01:31 -0700
Received: by wproxy.gmail.com with SMTP id i13so21264wra
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2005 12:01:27 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=NHpuQsUrsWlA6r0rw8jSWrng/jt41PjA73x+4MWvkFxMqpoZkTK7Lp9b72HYYcQeIipctpjHt8c4N/kvcUub5ttHysgGpccnL/P4eTx1bHZYMl4wPzeopT1YEHyHnySzWR4iAk4xCVOlsFLoExoT91tnOnlcDA0Wh2zaOmbG3SA=
Received: by 10.54.82.19 with SMTP id f19mr22017wrb;
        Wed, 06 Jul 2005 12:01:27 -0700 (PDT)
Received: by 10.54.14.63 with HTTP; Wed, 6 Jul 2005 12:01:27 -0700 (PDT)
Message-ID: <b13f3f06050706120174697e31@mail.gmail.com>
Date: Wed, 6 Jul 2005 12:01:27 -0700
From: Yousef Ourabi <yourabi@gmail.com>
Reply-To: Yousef Ourabi <yourabi@gmail.com>
To: java-user@lucene.apache.org
Subject: n-Field search w/PhraseQuery
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Quick question on the proper-way of searching multiple fields for phrases?

Would I do this:
BooleanQuery titleOrContent =3D new BooleanQuery();
PhraseQuery titlePhraseSearch =3D new PhraseQuery(); (add filed x, and term=
 1, 2)
PhraseQuery contentPhraseSearch =3D new PhraseQuery(); (add field y, and te=
rm 2,4)

OR

PhraseQuery phraseQuery =3D new PhraseQuery(); add field x, t 1,2 then
add field y, t 2 4?

Thanks for any help?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 19:49:48 2005
Return-Path: <java-user-return-15319-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80383 invoked from network); 6 Jul 2005 19:49:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 19:49:48 -0000
Received: (qmail 41174 invoked by uid 500); 6 Jul 2005 19:49:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41148 invoked by uid 500); 6 Jul 2005 19:49:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41135 invoked by uid 99); 6 Jul 2005 19:49:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 12:49:40 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.68.218.166] (HELO home.simpleobjects.com) (216.68.218.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 12:49:27 -0700
Received: from graphite (graphite.intranet [192.168.2.2])
	by home.simpleobjects.com (Postfix) with ESMTP id 25F7533C3B
	for <java-user@lucene.apache.org>; Wed,  6 Jul 2005 14:49:22 -0400 (EDT)
From: "Tony Schwartz" <tony@simpleobjects.com>
To: <java-user@lucene.apache.org>
Subject: RE: OUTOFMEMORY ERROR
Date: Wed, 6 Jul 2005 15:49:30 -0400
Message-ID: <002f01c58263$d3172610$0202a8c0@graphite>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
In-Reply-To: <005801c5824f$d313e1d0$bf00a8c0@akenaton>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2527
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes, you need to use a single searcher instead of creating one each =
time.

Tony Schwartz
tony@simpleobjects.com
"We're going to need a lot more cowbell."

-----Original Message-----
From: MariLuz Elola [mailto:melola@seinet.es]=20
Sent: Wednesday, July 06, 2005 1:26 PM
To: java-user@lucene.apache.org
Subject: OUTOFMEMORY ERROR

Hi, I have a problem when I am trying to search a simple query without
sorting into an index with 210.000 documents.
Executing the query several times I am getting the OutOfMemory error.
I am creating an IndexSearcher(pathDir) every search.=20
I don=B4t know if it will be necessary to create only one indexSearcher =
and
caching it,
If I search into an index with only 50.000 documents, the outofMemory =
error
doen=B4t appear.
------------------------
ENVIROMENT DESCRIPTION:
------------------------

---SERVER---
MEMORY 2GB
APP SERVER Jboss3.2.3
JAVA_OPTS -Xmx640M -Xms640M

----LUCENE 1.4.3-------
INDEX +- 210.000 documents
EACH DOCUMENT +- 20 fields (metadatas)
SIZE TEXT DOCUMENT 1k

------------------------
ERROR:
------------------------
18:52:18,657 ERROR [LogInterceptor] Unexpected Error:
java.lang.OutOfMemoryError
18:52:18,657 ERROR [LogInterceptor] Unexpected Error:
java.lang.OutOfMemoryError
18:52:18,660 ERROR [STDERR] java.rmi.ServerError: Unexpected Error; =
nested
exception is:
        java.lang.OutOfMemoryError
18:52:18,661 ERROR [STDERR]     at
org.jboss.ejb.plugins.LogInterceptor.handleException(LogInterceptor.java:=
374
)
18:52:18,661 ERROR [STDERR]     at
org.jboss.ejb.plugins.LogInterceptor.invoke(LogInterceptor.java:195)
18:52:18,661 ERROR [STDERR]     at
org.jboss.ejb.plugins.ProxyFactoryFinderInterceptor.invoke(ProxyFactoryFi=
nde
rInterceptor.java:122)
18:52:18,662 ERROR [STDERR]     at
org.jboss.ejb.StatelessSessionContainer.internalInvoke(StatelessSessionCo=
nta
iner.java:331)
18:52:18,662 ERROR [STDERR]     at
org.jboss.ejb.Container.invoke(Container.java:700)
18:52:18,662 ERROR [STDERR]     at
sun.reflect.GeneratedMethodAccessor40.invoke(Unknown Source)
18:52:18,662 ERROR [STDERR]     at
sun.reflect.DelegatingMethodAccessorImpl.invok
..
..
Exception java.lang.OutOfMemoryError: requested 4 bytes for CMS: Work =
queue
overflow; try -XX:-CMSParallelRemarkEnabled. Out of swap space?


Could anybody help me???

Thanks in advance

    Mari Luz








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 21:12:17 2005
Return-Path: <java-user-return-15320-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6694 invoked from network); 6 Jul 2005 21:12:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 21:12:17 -0000
Received: (qmail 66784 invoked by uid 500); 6 Jul 2005 21:12:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66763 invoked by uid 500); 6 Jul 2005 21:12:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66750 invoked by uid 99); 6 Jul 2005 21:12:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 14:12:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 14:11:30 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0476513E2007; Wed,  6 Jul 2005 17:11:22 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 213FC13E2005
	for <java-user@lucene.apache.org>; Wed,  6 Jul 2005 17:11:05 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <b13f3f06050706120174697e31@mail.gmail.com>
References: <b13f3f06050706120174697e31@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <BA240AC0-095D-4813-AFF0-E899C9D5A5DA@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: n-Field search w/PhraseQuery
Date: Wed, 6 Jul 2005 17:11:03 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 6, 2005, at 3:01 PM, Yousef Ourabi wrote:

> Quick question on the proper-way of searching multiple fields for  
> phrases?
>
> Would I do this:
> BooleanQuery titleOrContent = new BooleanQuery();
> PhraseQuery titlePhraseSearch = new PhraseQuery(); (add filed x,  
> and term 1, 2)
> PhraseQuery contentPhraseSearch = new PhraseQuery(); (add field y,  
> and term 2,4)
>
> OR
>
> PhraseQuery phraseQuery = new PhraseQuery(); add field x, t 1,2 then
> add field y, t 2 4?

With those two options, you don't really have a choice.  PhraseQuery  
only can use a single field.  It doesn't really make sense for it to  
be otherwise.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 21:16:12 2005
Return-Path: <java-user-return-15321-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8361 invoked from network); 6 Jul 2005 21:16:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 21:16:11 -0000
Received: (qmail 73058 invoked by uid 500); 6 Jul 2005 21:16:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73038 invoked by uid 500); 6 Jul 2005 21:16:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73025 invoked by uid 99); 6 Jul 2005 21:16:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 14:16:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yourabi@gmail.com designates 64.233.184.192 as permitted sender)
Received: from [64.233.184.192] (HELO wproxy.gmail.com) (64.233.184.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 14:15:41 -0700
Received: by wproxy.gmail.com with SMTP id i7so52394wra
        for <java-user@lucene.apache.org>; Wed, 06 Jul 2005 14:15:37 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=rIpBAgfFcT6NpkJPfEvw07t3SpzSkjDSFaFBBYCGj53meSuCq19cVjlE14d6a5A7ggE5Z8g3KrWkt7tWlkuOFVAJPhaNo09T/YPWCqsR2XO7A2r+V9xM/G5FhIGHyzmAX9u6I5FEaGuwL7Lkkz6o4uHTsV3cwL8t3+FRKV0hJQs=
Received: by 10.54.29.22 with SMTP id c22mr137538wrc;
        Wed, 06 Jul 2005 14:15:37 -0700 (PDT)
Received: by 10.54.14.63 with HTTP; Wed, 6 Jul 2005 14:15:36 -0700 (PDT)
Message-ID: <b13f3f06050706141528881457@mail.gmail.com>
Date: Wed, 6 Jul 2005 14:15:37 -0700
From: Yousef Ourabi <yourabi@gmail.com>
Reply-To: Yousef Ourabi <yourabi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: n-Field search w/PhraseQuery
In-Reply-To: <BA240AC0-095D-4813-AFF0-E899C9D5A5DA@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <b13f3f06050706120174697e31@mail.gmail.com>
	 <BA240AC0-095D-4813-AFF0-E899C9D5A5DA@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the reply, clears things up, have to use boolean query. Thank!

On 7/6/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>=20
> On Jul 6, 2005, at 3:01 PM, Yousef Ourabi wrote:
>=20
> > Quick question on the proper-way of searching multiple fields for
> > phrases?
> >
> > Would I do this:
> > BooleanQuery titleOrContent =3D new BooleanQuery();
> > PhraseQuery titlePhraseSearch =3D new PhraseQuery(); (add filed x,
> > and term 1, 2)
> > PhraseQuery contentPhraseSearch =3D new PhraseQuery(); (add field y,
> > and term 2,4)
> >
> > OR
> >
> > PhraseQuery phraseQuery =3D new PhraseQuery(); add field x, t 1,2 then
> > add field y, t 2 4?
>=20
> With those two options, you don't really have a choice.  PhraseQuery
> only can use a single field.  It doesn't really make sense for it to
> be otherwise.
>=20
>      Erik
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 22:26:25 2005
Return-Path: <java-user-return-15322-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29983 invoked from network); 6 Jul 2005 22:26:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 22:26:25 -0000
Received: (qmail 76017 invoked by uid 500); 6 Jul 2005 22:26:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75881 invoked by uid 500); 6 Jul 2005 22:26:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75813 invoked by uid 99); 6 Jul 2005 22:26:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 15:26:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 15:24:16 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 88FD013E2007; Wed,  6 Jul 2005 18:24:08 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 9252813E2005
	for <java-user@lucene.apache.org>; Wed,  6 Jul 2005 18:23:46 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050706174622.18479.qmail@web31505.mail.mud.yahoo.com>
References: <20050706174622.18479.qmail@web31505.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E04FE2F2-D80A-4BE7-B23F-D678A6A8BB09@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Help with custom sorting - ignoring case on string fields.
Date: Wed, 6 Jul 2005 18:23:46 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ian - I'll look into this issue in more detail as soon as I can, but  
one reasonable approach is to add a special field designed for  
sorting that has all case normalized to either all upper or all lower  
such that sorting is case insensitive.  Note that Field.Text is not a  
good choice for sorting, as it is highly likely there would be  
multiple terms for that field which does not work with sorting.   See  
the javadocs for Sort:

     http://lucene.apache.org/java/docs/api/org/apache/lucene/search/ 
Sort.html

So given this, a think a special field for sorting that has been  
lowercased but uses a non-tokenized but indexed field type is the  
best choice.

Erik

On Jul 6, 2005, at 1:46 PM, ian parkin wrote:

> Hello Folks,
>
> Previously, I was using version 1.3 of Lucene that had no complex
> sorting abilities, so I wrote my own code to do this using a TreeMap
> and Comparator. The sorting was basically lower case comparisons of
> strings with a few extra little tweaks here and there.
>
> This past weekend I upgraded to 1.4.3 of Lucene and am looking for
> some help with custom sorting code.
>
> My application stores a couple of mixed-case text fields 'author' and
> 'title' as Field.Text and I would like to sort on these fields in a
> case insensitive manner.
>
> I have been looking at the DistanceComparatorSource example in the
> 'Lucene In Action' book and have been trying to adapt that to my
> humble needs, but so far no luck. For some reason, I just can't get
> my head round the example in order to tailor it to my needs.
>
> Does anyone have any example ComparatorSource code that sorts strings
> ignoring the case ?
>
> Thanks
>
> IAP
>
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around
> http://mail.yahoo.com
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 06 22:55:30 2005
Return-Path: <java-user-return-15323-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36905 invoked from network); 6 Jul 2005 22:55:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 6 Jul 2005 22:55:30 -0000
Received: (qmail 11103 invoked by uid 500); 6 Jul 2005 22:55:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11081 invoked by uid 500); 6 Jul 2005 22:55:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11058 invoked by uid 99); 6 Jul 2005 22:55:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 06 Jul 2005 15:55:23 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.198.143] (HELO web31514.mail.mud.yahoo.com) (68.142.198.143)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 06 Jul 2005 15:54:54 -0700
Received: (qmail 81887 invoked by uid 60001); 6 Jul 2005 22:54:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=q5XoVC1LoUS55uMwLqSAzVyhYVqxPzFV6QSJPi3/6JXgUJnWLxriVlPZIRQyXUULgsU9PDXy2vmmZ7v3R4zqgDq9yElqsLw+Z441s38r805c8gIYw+V1VnClLYe8J8tbgqreAsKhMS+avU1fwKnzENy86j0FTR0sQp3iKGve6Fo=  ;
Message-ID: <20050706225450.81885.qmail@web31514.mail.mud.yahoo.com>
Received: from [64.95.118.32] by web31514.mail.mud.yahoo.com via HTTP; Wed, 06 Jul 2005 15:54:50 PDT
Date: Wed, 6 Jul 2005 15:54:50 -0700 (PDT)
From: ian parkin <iaparkin@yahoo.com>
Subject: Re: Help with custom sorting - ignoring case on string fields.
To: java-user@lucene.apache.org
In-Reply-To: <E04FE2F2-D80A-4BE7-B23F-D678A6A8BB09@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the reply. 

I actually implemented what you suggested - storing lower case fields
- earlier today and it works quite nicely.

I'll certainly review my use of the Field.Text.

IAP

--- Erik Hatcher <erik@ehatchersolutions.com> wrote:

> Ian - I'll look into this issue in more detail as soon as I can,
> but  
> one reasonable approach is to add a special field designed for  
> sorting that has all case normalized to either all upper or all
> lower  
> such that sorting is case insensitive.  Note that Field.Text is not
> a  
> good choice for sorting, as it is highly likely there would be  
> multiple terms for that field which does not work with sorting.  
> See  
> the javadocs for Sort:
> 
>     
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/ 
> Sort.html
> 
> So given this, a think a special field for sorting that has been  
> lowercased but uses a non-tokenized but indexed field type is the  
> best choice.
> 
> Erik
> 
> On Jul 6, 2005, at 1:46 PM, ian parkin wrote:
> 
> > Hello Folks,
> >
> > Previously, I was using version 1.3 of Lucene that had no complex
> > sorting abilities, so I wrote my own code to do this using a
> TreeMap
> > and Comparator. The sorting was basically lower case comparisons
> of
> > strings with a few extra little tweaks here and there.
> >
> > This past weekend I upgraded to 1.4.3 of Lucene and am looking
> for
> > some help with custom sorting code.
> >
> > My application stores a couple of mixed-case text fields 'author'
> and
> > 'title' as Field.Text and I would like to sort on these fields in
> a
> > case insensitive manner.
> >
> > I have been looking at the DistanceComparatorSource example in
> the
> > 'Lucene In Action' book and have been trying to adapt that to my
> > humble needs, but so far no luck. For some reason, I just can't
> get
> > my head round the example in order to tailor it to my needs.
> >
> > Does anyone have any example ComparatorSource code that sorts
> strings
> > ignoring the case ?
> >
> > Thanks
> >
> > IAP
> >
> > __________________________________________________
> > Do You Yahoo!?
> > Tired of spam?  Yahoo! Mail has the best spam protection around
> > http://mail.yahoo.com
> >
> >
>
---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 07:21:55 2005
Return-Path: <java-user-return-15324-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96955 invoked from network); 7 Jul 2005 07:21:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 07:21:54 -0000
Received: (qmail 9183 invoked by uid 500); 7 Jul 2005 07:21:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9155 invoked by uid 500); 7 Jul 2005 07:21:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9140 invoked by uid 99); 7 Jul 2005 07:21:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 00:21:43 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 00:21:04 -0700
Received: from root by ciao.gmane.org with local (Exim 4.43)
	id 1DqQgI-0004le-Tk
	for java-user@lucene.apache.org; Thu, 07 Jul 2005 09:20:22 +0200
Received: from mail.idoox.com ([194.213.203.154])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2005 09:20:22 +0200
Received: from literakl by mail.idoox.com with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2005 09:20:22 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Leos Literak <literakl@seznam.cz>
Subject:  Re: no results for date field
Date:  Thu, 07 Jul 2005 09:13:02 +0200
Lines: 16
Message-ID: <daiklu$f13$1@sea.gmane.org>
References:  <dagtcj$5rr$1@sea.gmane.org> <EF0C5554-F42E-4C81-A3FE-8BA07822C9C2@ehatchersolutions.com>
Mime-Version:  1.0
Content-Type:  text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: mail.idoox.com
User-Agent: Mozilla/5.0 (X11; U; Linux i686; cs-CZ; rv:1.7.2) Gecko/20040804
X-Accept-Language: cs, en-us, en
In-Reply-To: <EF0C5554-F42E-4C81-A3FE-8BA07822C9C2@ehatchersolutions.com>
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Erik Hatcher napsal(a):
> QueryParser attempts to parse the from and to strings as simple date  
> formats with the default locale.  You would use something like  
> "created:[01/01/04 TO 07/05/05]".
> 
> Please read up on the issues that the default date handling poses  
> though.  Simply indexing with YYYYMMDD format is generally a better  way 
> to go, though you will need to adjust for this to handle range  queries 
> with QueryParser.  Lots of details of the date issues are in  Lucene in 
> Action and some details on the wiki too I believe.

this one works in Czech:

created:[1.7.2005 TO 7.7.2005]

thanks


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 08:42:38 2005
Return-Path: <java-user-return-15325-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32047 invoked from network); 7 Jul 2005 08:42:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 08:42:37 -0000
Received: (qmail 12141 invoked by uid 500); 7 Jul 2005 08:42:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12113 invoked by uid 500); 7 Jul 2005 08:42:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12090 invoked by uid 99); 7 Jul 2005 08:42:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 01:42:25 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.222] (HELO web31205.mail.mud.yahoo.com) (68.142.200.222)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Jul 2005 01:41:49 -0700
Received: (qmail 24248 invoked by uid 60001); 7 Jul 2005 08:41:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=0VQTND4t+fkrp/y83AJbwlNj54UzA0WsSQ4T1VW4EMK8vcLaHtNK9wvVnFa+jl7WK90imxA64RYAM4nS1sM2wz+o3O1qM89tAMIb33Lczolg15jyigfpJho/CS9EU8LjJkLFJY00HWBS6mU2hhOGlWEwESn4sMUbkPI3NCtIl+g=  ;
Message-ID: <20050707084145.24246.qmail@web31205.mail.mud.yahoo.com>
Received: from [209.128.105.41] by web31205.mail.mud.yahoo.com via HTTP; Thu, 07 Jul 2005 01:41:45 PDT
Date: Thu, 7 Jul 2005 01:41:45 -0700 (PDT)
From: bib_lucene bib <bib_lucene@yahoo.com>
Subject: FileNotFoundException segments
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1136588357-1120725705=:22896"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1136588357-1120725705=:22896
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi All
 
can someone please help me on the error in my web application...
 
I am using tomcat , the path for index dir is obtained from jsp page using application.getRealPath("/")+"download/compName"
 
I want to index when the file gets uploaded.
I am getting this error...
 
java.io.FileNotFoundException: C:\tomcat\webapps\myApp\download\compName\segmen
s (The system cannot find the file specified)
        at java.io.RandomAccessFile.open(Native Method)
        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
        at org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.
ava:376)
        at org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
        at org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
        at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
        at org.apache.lucene.index.IndexWriter$1.doBody(IndexWriter.java:233)
        at org.apache.lucene.store.Lock$With.run(Lock.java:109)
        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:228)
        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:193)
        at com.rs.upload.FileIndexer.indexDocument(FileIndexer.java:43)
 
 
This directory C:\tomcat\webapps\myApp\download\compName\  exist in the file system.
 
Here is the program I wrote 
/*
 * Created on Jul 6, 2005
 *
 * TODO To change the template for this generated file go to
 * Window - Preferences - Java - Code Style - Code Templates
 */
package com.rs.upload;
import java.util.Hashtable;
import java.util.Iterator;
import java.io.*;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.analysis.standard.*;
import org.apache.lucene.document.*;
/**
 * @author
 *
 * This will index the documents as and when documents are uploaded.
 * 
 */
public class FileIndexer {
 
 public static void indexDocument(String fileName, Hashtable fields, String indexDir) throws IOException{
  
  // Find if the index already exists
  boolean exists = true;
  File indexFile = null;
  if ((indexFile = new File(indexDir)).exists() && indexFile.isDirectory())
  {
       exists = false;
       System.out.println("Index does not exist");
  }
  else 
  {
        exists = true;
        System.out.println("Index does exist");
  }
  System.out.println("Index Directory:"+indexDir);
  IndexWriter writer = null;
  try {
   writer = new IndexWriter(indexFile, new StandardAnalyzer(), exists);
  } catch (IOException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  }
  writer.mergeFactor = 20;
  
  File candidateFile = new File(fileName);
  indexFile(writer,candidateFile,fields);
 }
 
 private static void indexFile(IndexWriter writer, File f, Hashtable fields) throws IOException{
  
  if( f.isHidden() || !f.exists() || !f.canRead()){
   return;
  }
  
  System.out.println("Indexing file :"+ f.getCanonicalPath());
  Document doc = new Document();
  doc.add(Field.Text("contents", new FileReader(f)));
  doc.add(Field.Keyword("filename",f.getCanonicalPath()));
  
  Iterator it = fields.keySet().iterator();
  String element = "";
     while (it.hasNext()) {
        element =  (String)it.next();
        doc.add(Field.Keyword(element,(String)fields.get(element)));
     }
     writer.addDocument(doc);
 }
}
 

		
---------------------------------
 Sell on Yahoo! Auctions  - No fees. Bid on great items.
--0-1136588357-1120725705=:22896--

From java-user-return-15326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 09:04:52 2005
Return-Path: <java-user-return-15326-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38285 invoked from network); 7 Jul 2005 09:04:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 09:04:52 -0000
Received: (qmail 39605 invoked by uid 500); 7 Jul 2005 09:04:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39588 invoked by uid 500); 7 Jul 2005 09:04:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39575 invoked by uid 99); 7 Jul 2005 09:04:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 02:04:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.56.31.18] (HELO smtp2.clb.oleane.net) (213.56.31.18)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 02:04:32 -0700
Received: from smtp2.clb.oleane.net (localhost [127.0.0.1]) 
	by smtp2.clb.oleane.net (antivirus) with ESMTP id j6794PKV024352
	for <java-user@lucene.apache.org>; Thu, 7 Jul 2005 11:04:25 +0200
Received: from [172.16.0.117] ([217.167.130.37]) (authenticated)
	by smtp2.clb.oleane.net with ESMTP id j6794OlU024280
	for <java-user@lucene.apache.org>; Thu, 7 Jul 2005 11:04:24 +0200
Message-ID: <42CCF037.4080707@lingway.com>
Date: Thu, 07 Jul 2005 11:04:55 +0200
From: Vincent Le Maout <vincent.lemaout@lingway.com>
Reply-To: vincent.lemaout@lingway.com
Organization: Lingway
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Boosting SpanQueries
References: <dag7r7$1kv$1@sea.gmane.org> <1120666486.42cc03764974e@sms.ed.ac.uk>
In-Reply-To: <1120666486.42cc03764974e@sms.ed.ac.uk>
Content-Type: text/plain; charset=ISO-8859-15; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I met this problem a few months ago : trying to boost some words in 
SpanQuery seems
to have no effect, which was confirmed by looking at the source code (no 
reference to
boost in the scoring methods, at least as far as lucene 1.4.3 is 
concerned, correct me if
I am wrong). So my first question was, is that a bug or a feature ? if 
it is a feature is there
a way to implement something  as boosting allowing to enhance the score 
of documents
containing a particular word of a span query ?

Thanks.
Regards.

Vince

Dave Kor wrote:

>I was just wondering, if I set the boost factor in SpanQueries such as the
>SpanNearQuery or SpanOrQuery, does it get used?
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 09:13:39 2005
Return-Path: <java-user-return-15327-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42617 invoked from network); 7 Jul 2005 09:13:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 09:13:38 -0000
Received: (qmail 62238 invoked by uid 500); 7 Jul 2005 09:13:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62210 invoked by uid 500); 7 Jul 2005 09:13:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62197 invoked by uid 99); 7 Jul 2005 09:13:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 02:13:29 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.75.2.32] (HELO listserv.uni-hannover.de) (130.75.2.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 02:11:58 -0700
Received: from rrzn.uni-hannover.de (dhennig@rayserv.rrzn.uni-hannover.de [130.75.5.8])
	by listserv.uni-hannover.de (8.13.3/8.13.3) with ESMTP id j679Bm1k010045
	for <java-user@lucene.apache.org>; Thu, 7 Jul 2005 11:11:48 +0200 (MEST)
Message-ID: <42CCF1D0.1010901@rrzn.uni-hannover.de>
Date: Thu, 07 Jul 2005 11:11:44 +0200
From: Dirk Hennig <dhennig@rrzn.uni-hannover.de>
Organization: RRZN, =?ISO-8859-1?Q?Universit=E4t_Hannover?=
User-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.0.1) Gecko/20020921 Netscape/7.0
X-Accept-Language: en-us, en, de, de-at, de-de, de
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: IOException IndexReader out of date
References: <OAELLNADBIAIBGFCBKEKIEOMDDAA.klein@sitescape.com> <Pine.LNX.4.58.0504141710430.31600@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.43
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hallo,

When I try to use this to remove several documents from the index
---------------------------------------------------------------------
indexReader.open(index);
while (!removeStack.empty()) {
     int hitId = ((Integer)(removeStack.pop())).intValue();
     indexReader.delete(hitId);
}
indexReader.close();
---------------------------------------------------------------------

I get
---------------------------------------------------------------------
java.io.IOException
with message: IndexReader out of date and no longer valid for delete,
undelete, or setNorm operations
---------------------------------------------------------------------

What's the problem?

Greetings,
Dirk





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 09:23:35 2005
Return-Path: <java-user-return-15328-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46613 invoked from network); 7 Jul 2005 09:23:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 09:23:35 -0000
Received: (qmail 84782 invoked by uid 500); 7 Jul 2005 09:23:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84758 invoked by uid 500); 7 Jul 2005 09:23:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84745 invoked by uid 99); 7 Jul 2005 09:23:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 02:23:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.44.193.196] (HELO uar.i-hypergrid.com) (194.44.193.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 02:21:17 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id 067EC23596
	for <java-user@lucene.apache.org>; Thu,  7 Jul 2005 12:21:00 +0300 (EEST)
Message-ID: <42CCF3FB.9050501@i-hypergrid.com>
Date: Thu, 07 Jul 2005 12:20:59 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IOException IndexReader out of date
References: <OAELLNADBIAIBGFCBKEKIEOMDDAA.klein@sitescape.com> <Pine.LNX.4.58.0504141710430.31600@hal.rescomp.berkeley.edu> <42CCF1D0.1010901@rrzn.uni-hannover.de>
In-Reply-To: <42CCF1D0.1010901@rrzn.uni-hannover.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

the problem is than index was modified between indexReader.open(index); 
and indexReader.delete(hitId); method calls.

regards,
Volodymyr Bychkoviak

Dirk Hennig wrote:

> Hallo,
>
> When I try to use this to remove several documents from the index
> ---------------------------------------------------------------------
> indexReader.open(index);
> while (!removeStack.empty()) {
>     int hitId = ((Integer)(removeStack.pop())).intValue();
>     indexReader.delete(hitId);
> }
> indexReader.close();
> ---------------------------------------------------------------------
>
> I get
> ---------------------------------------------------------------------
> java.io.IOException
> with message: IndexReader out of date and no longer valid for delete,
> undelete, or setNorm operations
> ---------------------------------------------------------------------
>
> What's the problem?
>
> Greetings,
> Dirk
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 09:36:05 2005
Return-Path: <java-user-return-15329-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49537 invoked from network); 7 Jul 2005 09:36:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 09:36:04 -0000
Received: (qmail 4028 invoked by uid 500); 7 Jul 2005 09:35:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4008 invoked by uid 500); 7 Jul 2005 09:35:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3994 invoked by uid 99); 7 Jul 2005 09:35:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 02:35:51 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.75.2.32] (HELO listserv.uni-hannover.de) (130.75.2.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 02:34:21 -0700
Received: from rrzn.uni-hannover.de (dhennig@rayserv.rrzn.uni-hannover.de [130.75.5.8])
	by listserv.uni-hannover.de (8.13.3/8.13.3) with ESMTP id j679Y4XT010722
	for <java-user@lucene.apache.org>; Thu, 7 Jul 2005 11:34:04 +0200 (MEST)
Message-ID: <42CCF708.1080108@rrzn.uni-hannover.de>
Date: Thu, 07 Jul 2005 11:34:00 +0200
From: Dirk Hennig <dhennig@rrzn.uni-hannover.de>
Organization: RRZN, =?ISO-8859-1?Q?Universit=E4t_Hannover?=
User-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.0.1) Gecko/20020921 Netscape/7.0
X-Accept-Language: en-us, en, de, de-at, de-de, de
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IOException IndexReader out of date
References: <OAELLNADBIAIBGFCBKEKIEOMDDAA.klein@sitescape.com> <Pine.LNX.4.58.0504141710430.31600@hal.rescomp.berkeley.edu> <42CCF1D0.1010901@rrzn.uni-hannover.de> <42CCF3FB.9050501@i-hypergrid.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.43
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Volodymyr Bychkoviak wrote:
> the problem is than index was modified between indexReader.open(index); 
> and indexReader.delete(hitId); method calls.

That would explain the exception.
But How?
The program is exactly as I wrote it!


>> ---------------------------------------------------------------------
>> indexReader.open(index);
>> while (!removeStack.empty()) {
>>     int hitId = ((Integer)(removeStack.pop())).intValue();
>>     indexReader.delete(hitId);
>> }
>> indexReader.close();
>> ---------------------------------------------------------------------


Dirk


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 09:44:09 2005
Return-Path: <java-user-return-15330-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53042 invoked from network); 7 Jul 2005 09:44:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 09:44:09 -0000
Received: (qmail 19128 invoked by uid 500); 7 Jul 2005 09:43:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19093 invoked by uid 500); 7 Jul 2005 09:43:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19080 invoked by uid 99); 7 Jul 2005 09:43:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 02:43:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.44.193.196] (HELO uar.i-hypergrid.com) (194.44.193.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 02:41:47 -0700
Received: from [192.168.0.86] (vbychkoviak.jforce [192.168.0.86])
	by uar.i-hypergrid.com (Postfix) with ESMTP id B089C46C75
	for <java-user@lucene.apache.org>; Thu,  7 Jul 2005 12:41:24 +0300 (EEST)
Message-ID: <42CCF8C4.4020902@i-hypergrid.com>
Date: Thu, 07 Jul 2005 12:41:24 +0300
From: Volodymyr Bychkoviak <vbychkoviak@i-hypergrid.com>
User-Agent: Mozilla Thunderbird 0.9 (Windows/20041103)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IOException IndexReader out of date
References: <OAELLNADBIAIBGFCBKEKIEOMDDAA.klein@sitescape.com> <Pine.LNX.4.58.0504141710430.31600@hal.rescomp.berkeley.edu> <42CCF1D0.1010901@rrzn.uni-hannover.de> <42CCF3FB.9050501@i-hypergrid.com> <42CCF708.1080108@rrzn.uni-hannover.de>
In-Reply-To: <42CCF708.1080108@rrzn.uni-hannover.de>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Dirk Hennig wrote:

> Volodymyr Bychkoviak wrote:
>
>> the problem is than index was modified between 
>> indexReader.open(index); and indexReader.delete(hitId); method calls.
>
>
> That would explain the exception.
> But How?

it can be modified by another indexReader or indexWriter.

> The program is exactly as I wrote it!

method open is static method wich returns new indexReader. maybe this is 
the problem.

>
>
>>> ---------------------------------------------------------------------
>>> indexReader.open(index);
>>> while (!removeStack.empty()) {
>>>     int hitId = ((Integer)(removeStack.pop())).intValue();
>>>     indexReader.delete(hitId);
>>> }
>>> indexReader.close();
>>> ---------------------------------------------------------------------
>>
>
>
> Dirk
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 09:55:25 2005
Return-Path: <java-user-return-15331-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 59047 invoked from network); 7 Jul 2005 09:55:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 09:55:25 -0000
Received: (qmail 32678 invoked by uid 500); 7 Jul 2005 09:55:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32659 invoked by uid 500); 7 Jul 2005 09:55:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32646 invoked by uid 99); 7 Jul 2005 09:55:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 02:55:16 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_WHOIS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.75.2.32] (HELO listserv.uni-hannover.de) (130.75.2.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 02:53:18 -0700
Received: from rrzn.uni-hannover.de (dhennig@rayserv.rrzn.uni-hannover.de [130.75.5.8])
	by listserv.uni-hannover.de (8.13.3/8.13.3) with ESMTP id j679r6XG011215
	for <java-user@lucene.apache.org>; Thu, 7 Jul 2005 11:53:06 +0200 (MEST)
Message-ID: <42CCFB7E.2020408@rrzn.uni-hannover.de>
Date: Thu, 07 Jul 2005 11:53:02 +0200
From: Dirk Hennig <dhennig@rrzn.uni-hannover.de>
Organization: RRZN, =?ISO-8859-1?Q?Universit=E4t_Hannover?=
User-Agent: Mozilla/5.0 (X11; U; SunOS sun4u; en-US; rv:1.0.1) Gecko/20020921 Netscape/7.0
X-Accept-Language: en-us, en, de, de-at, de-de, de
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: IOException IndexReader out of date
References: <OAELLNADBIAIBGFCBKEKIEOMDDAA.klein@sitescape.com> <Pine.LNX.4.58.0504141710430.31600@hal.rescomp.berkeley.edu> <42CCF1D0.1010901@rrzn.uni-hannover.de> <42CCF3FB.9050501@i-hypergrid.com> <42CCF708.1080108@rrzn.uni-hannover.de> <42CCF8C4.4020902@i-hypergrid.com>
Content-Type: text/plain; charset=us-ascii; format=flowed
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.43
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Volodymyr Bychkoviak wrote:
> method open is static method wich returns new indexReader. maybe this is 
> the problem.

I did not see the wood for the trees!
That's it!

The correct program looks like this:
---------------------------------------------------------------------
indexReader = IndexReader.open(index);
while (!removeStack.empty()) {
     int hitId = ((Integer)(removeStack.pop())).intValue();
     indexReader.delete(hitId);
}
indexReader.close();
---------------------------------------------------------------------


Thanx a lot,
Dirk


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 11:18:06 2005
Return-Path: <java-user-return-15332-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93803 invoked from network); 7 Jul 2005 11:18:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 11:18:05 -0000
Received: (qmail 53616 invoked by uid 500); 7 Jul 2005 11:17:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53501 invoked by uid 500); 7 Jul 2005 11:17:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53484 invoked by uid 99); 7 Jul 2005 11:17:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 04:17:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [134.96.188.26] (HELO mail.dfki.de) (134.96.188.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 04:16:40 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id D7157E47DE
	for <java-user@lucene.apache.org>; Thu,  7 Jul 2005 13:16:30 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 9FE8EE47CC
	for <java-user@lucene.apache.org>; Thu,  7 Jul 2005 13:16:30 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <42CCF037.4080707@lingway.com>
References: <dag7r7$1kv$1@sea.gmane.org> <1120666486.42cc03764974e@sms.ed.ac.uk> <42CCF037.4080707@lingway.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <853fcf8d5234426a894c308816d15e49@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: Boosting SpanQueries
Date: Thu, 7 Jul 2005 13:16:28 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Enclosing it in a boolean-query where its alone and which, itself, has=20=

a boosting would seem to work for me...

paul


Le 7 juil. 05, =E0 11:04, Vincent Le Maout a =E9crit :

> a way to implement something  as boosting allowing to enhance the=20
> score of documents
> containing a particular word of a span query ?=


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 11:32:42 2005
Return-Path: <java-user-return-15333-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99015 invoked from network); 7 Jul 2005 11:32:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 11:32:42 -0000
Received: (qmail 72458 invoked by uid 500); 7 Jul 2005 11:32:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72404 invoked by uid 500); 7 Jul 2005 11:32:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72369 invoked by uid 99); 7 Jul 2005 11:32:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 04:32:33 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Muetze303@gmx.li designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Jul 2005 04:32:03 -0700
Received: (qmail invoked by alias); 07 Jul 2005 11:31:59 -0000
Received: from p54839F91.dip0.t-ipconnect.de (EHLO [192.168.2.11]) [84.131.159.145]
  by mail.gmx.net (mp018) with SMTP; 07 Jul 2005 13:31:59 +0200
X-Authenticated: #12158616
Message-ID: <42CD12D5.7020705@gmx.li>
Date: Thu, 07 Jul 2005 13:32:37 +0200
From: Muetze303 <Muetze303@gmx.li>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FileNotFoundException segments
References: <20050707084145.24246.qmail@web31205.mail.mud.yahoo.com>
In-Reply-To: <20050707084145.24246.qmail@web31205.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

probably the dir exists, but the index inside the dir is broken or not 
complete and you are trying to use it instead of creating a new one?!

bib_lucene bib wrote:

>Hi All
> 
>can someone please help me on the error in my web application...
> 
>I am using tomcat , the path for index dir is obtained from jsp page using application.getRealPath("/")+"download/compName"
> 
>I want to index when the file gets uploaded.
>I am getting this error...
> 
>java.io.FileNotFoundException: C:\tomcat\webapps\myApp\download\compName\segmen
>s (The system cannot find the file specified)
>        at java.io.RandomAccessFile.open(Native Method)
>        at java.io.RandomAccessFile.<init>(RandomAccessFile.java:204)
>        at org.apache.lucene.store.FSInputStream$Descriptor.<init>(FSDirectory.
>ava:376)
>        at org.apache.lucene.store.FSInputStream.<init>(FSDirectory.java:405)
>        at org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
>        at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
>        at org.apache.lucene.index.IndexWriter$1.doBody(IndexWriter.java:233)
>        at org.apache.lucene.store.Lock$With.run(Lock.java:109)
>        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:228)
>        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:193)
>        at com.rs.upload.FileIndexer.indexDocument(FileIndexer.java:43)
> 
> 
>This directory C:\tomcat\webapps\myApp\download\compName\  exist in the file system.
> 
>Here is the program I wrote 
>/*
> * Created on Jul 6, 2005
> *
> * TODO To change the template for this generated file go to
> * Window - Preferences - Java - Code Style - Code Templates
> */
>package com.rs.upload;
>import java.util.Hashtable;
>import java.util.Iterator;
>import java.io.*;
>import org.apache.lucene.index.IndexWriter;
>import org.apache.lucene.analysis.standard.*;
>import org.apache.lucene.document.*;
>/**
> * @author
> *
> * This will index the documents as and when documents are uploaded.
> * 
> */
>public class FileIndexer {
> 
> public static void indexDocument(String fileName, Hashtable fields, String indexDir) throws IOException{
>  
>  // Find if the index already exists
>  boolean exists = true;
>  File indexFile = null;
>  if ((indexFile = new File(indexDir)).exists() && indexFile.isDirectory())
>  {
>       exists = false;
>       System.out.println("Index does not exist");
>  }
>  else 
>  {
>        exists = true;
>        System.out.println("Index does exist");
>  }
>  System.out.println("Index Directory:"+indexDir);
>  IndexWriter writer = null;
>  try {
>   writer = new IndexWriter(indexFile, new StandardAnalyzer(), exists);
>  } catch (IOException e) {
>   // TODO Auto-generated catch block
>   e.printStackTrace();
>  }
>  writer.mergeFactor = 20;
>  
>  File candidateFile = new File(fileName);
>  indexFile(writer,candidateFile,fields);
> }
> 
> private static void indexFile(IndexWriter writer, File f, Hashtable fields) throws IOException{
>  
>  if( f.isHidden() || !f.exists() || !f.canRead()){
>   return;
>  }
>  
>  System.out.println("Indexing file :"+ f.getCanonicalPath());
>  Document doc = new Document();
>  doc.add(Field.Text("contents", new FileReader(f)));
>  doc.add(Field.Keyword("filename",f.getCanonicalPath()));
>  
>  Iterator it = fields.keySet().iterator();
>  String element = "";
>     while (it.hasNext()) {
>        element =  (String)it.next();
>        doc.add(Field.Keyword(element,(String)fields.get(element)));
>     }
>     writer.addDocument(doc);
> }
>}
> 
>
>		
>---------------------------------
> Sell on Yahoo! Auctions  - No fees. Bid on great items.
>  
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 14:09:42 2005
Return-Path: <java-user-return-15334-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78192 invoked from network); 7 Jul 2005 14:09:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 14:09:41 -0000
Received: (qmail 49343 invoked by uid 500); 7 Jul 2005 14:09:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49320 invoked by uid 500); 7 Jul 2005 14:09:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49307 invoked by uid 99); 7 Jul 2005 14:09:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 07:09:27 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=RCVD_BY_IP,RCVD_IN_BL_SPAMCOP_NET,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.195 as permitted sender)
Received: from [64.233.162.195] (HELO zproxy.gmail.com) (64.233.162.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 07:06:37 -0700
Received: by zproxy.gmail.com with SMTP id f1so88301nzc
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2005 07:06:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:content-type:content-transfer-encoding;
        b=bCnAiNmFOoz+xXUzaEcw+56SsEtIW5UEwmwf3C1Yo+AQd1HaXwMIqIPXENEhQOh2lYuv2pZSKe29Utol++6gsOJuen7wMy0c4UJqqQUYkpDUxWY575pXF/4dlLY8K0nE1csxxK0/2LJ2ynmIj/Jr1vjsYDunl6DUnG3CzJNh5Gs=
Received: by 10.36.222.59 with SMTP id u59mr312511nzg;
        Thu, 07 Jul 2005 07:06:15 -0700 (PDT)
Received: from ?172.22.19.82? ([129.176.197.15])
        by mx.gmail.com with ESMTP id 22sm374947nzn.2005.07.07.07.06.13;
        Thu, 07 Jul 2005 07:06:13 -0700 (PDT)
Message-ID: <42CD36D4.5040502@gmail.com>
Date: Thu, 07 Jul 2005 09:06:12 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Search Timeout - abort a search
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Has anyone ever written code to make it possible to return from a 
search, after a given amount of time, returning the results that have 
been collected so far (but not necessarily all of them)?

The only thing that I can see to do through the public Lucene API's 
would be to do the search using a HitCollector - and just stop recording 
the hits after X amount of time has passed - but this would only 
partially solve the problem... lucene would still continue to call the 
HitCollector collect method until it finished.

Is there something else I'm missing?

Thanks,

Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 16:08:18 2005
Return-Path: <java-user-return-15335-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35967 invoked from network); 7 Jul 2005 16:08:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 16:08:18 -0000
Received: (qmail 78500 invoked by uid 500); 7 Jul 2005 16:08:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78464 invoked by uid 500); 7 Jul 2005 16:08:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78450 invoked by uid 99); 7 Jul 2005 16:08:06 -0000
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [194.109.24.32] (HELO smtp-vbr12.xs4all.nl) (194.109.24.32)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 09:07:56 -0700
Received: from k8l.lan (porta.xs4all.nl [80.127.24.69])
	by smtp-vbr12.xs4all.nl (8.13.3/8.13.3) with ESMTP id j67G7MGg073634
	for <java-user@lucene.apache.org>; Thu, 7 Jul 2005 18:07:23 +0200 (CEST)
	(envelope-from paul.elschot@xs4all.nl)
From: Paul Elschot <paul.elschot@xs4all.nl>
To: java-user@lucene.apache.org
Subject: Re: Search Timeout - abort a search
Date: Thu, 7 Jul 2005 18:07:22 +0200
User-Agent: KMail/1.5.4
References: <42CD36D4.5040502@gmail.com>
In-Reply-To: <42CD36D4.5040502@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200507071807.22319.paul.elschot@xs4all.nl>
X-Virus-Scanned: by XS4ALL Virus Scanner
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Thursday 07 July 2005 16:06, Dan Armbrust wrote:
> Has anyone ever written code to make it possible to return from a 
> search, after a given amount of time, returning the results that have 
> been collected so far (but not necessarily all of them)?
> 
> The only thing that I can see to do through the public Lucene API's 
> would be to do the search using a HitCollector - and just stop recording 
> the hits after X amount of time has passed - but this would only 
> partially solve the problem... lucene would still continue to call the 
> HitCollector collect method until it finished.
> 
> Is there something else I'm missing?

To stop the search from a HitCollector just throw an IOException or
an Error and catch it where the search was started.
Since most searching in Lucene already throws IOException
you might try and use a subclass of IOException for the time out.

Regards,
Paul Elschot


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 18:50:23 2005
Return-Path: <java-user-return-15336-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8669 invoked from network); 7 Jul 2005 18:50:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 18:50:23 -0000
Received: (qmail 94148 invoked by uid 500); 7 Jul 2005 18:50:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93725 invoked by uid 500); 7 Jul 2005 18:50:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93711 invoked by uid 99); 7 Jul 2005 18:50:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 11:50:11 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jak-lucene-user@m.gmane.org designates 80.91.229.2 as permitted sender)
Received: from [80.91.229.2] (HELO ciao.gmane.org) (80.91.229.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 11:50:08 -0700
Received: from list by ciao.gmane.org with local (Exim 4.43)
	id 1DqbR7-0000Xt-Ny
	for java-user@lucene.apache.org; Thu, 07 Jul 2005 20:49:25 +0200
Received: from r4bv18.chello.upc.cz ([84.42.201.18])
        by main.gmane.org with esmtp (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2005 20:49:25 +0200
Received: from literakl by r4bv18.chello.upc.cz with local (Gmexim 0.1 (Debian))
        id 1AlnuQ-0007hv-00
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2005 20:49:25 +0200
X-Injected-Via-Gmane: http://gmane.org/
To: java-user@lucene.apache.org
From:  Leos Literak <literakl@seznam.cz>
Subject:  non-lexical comparisons
Date:  Thu, 07 Jul 2005 20:48:40 +0200
Lines: 16
Message-ID: <dajte9$kcd$1@sea.gmane.org>
Mime-Version:  1.0
Content-Type:  text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding:  7bit
X-Complaints-To: usenet@sea.gmane.org
X-Gmane-NNTP-Posting-Host: r4bv18.chello.upc.cz
User-Agent: Mozilla Thunderbird 1.0 (X11/20041209)
X-Accept-Language: en-us, en
Sender: news <news@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I know the answear, but just for curiosity:

have you guys ever thought about non-lexical comparison
support? For example I started to index number of replies
in discussion, so I can find questions without answear,
with one reply, two comments etc. But I cannot simply
express that I want to find questions with more than five
comments (there are ways using regexp, but I dont consider
them as simple).

Probably such feature belongs to RDBMS rather than to fulltext
library .. I am just interested in you opinion. (I expect,
that my users will raise the question, why they cannot use
such condition so I ask in advance).

Leos


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 19:05:03 2005
Return-Path: <java-user-return-15337-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15076 invoked from network); 7 Jul 2005 19:05:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 19:05:03 -0000
Received: (qmail 27554 invoked by uid 500); 7 Jul 2005 19:04:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27532 invoked by uid 500); 7 Jul 2005 19:04:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27518 invoked by uid 99); 7 Jul 2005 19:04:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 12:04:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.245.223.231] (HELO trekspace.trekspace.com) (207.245.223.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 12:04:53 -0700
Received: from trekspace.trekspace.com (trekspace@trekspace.trekspace.com [192.168.2.234])
	by trekspace.trekspace.com (8.12.3/8.12.3/Debian-7.1) with ESMTP id j67J4pZZ016369
	for <java-user@lucene.apache.org>; Thu, 7 Jul 2005 15:04:51 -0400
Message-ID: <9050778747856585878CMPYMWVNLK.tlai@trekspace.com>
Date: Thu, 7 Jul 2005 15:04:51 -0400 (EDT)
From: Terence Lai <tlai@trekspace.com>
Reply-To: Terence Lai <tlai@trekspace.com>
To: java-user@lucene.apache.org
Subject: Help on the ParallelMultiSearcher.rewrite(Query) method
Mime-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 7bit
X-Mailer: Treklogic MailTool v1.6 http://www.treklogic.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I am currently using Lucene 1.4.2. Since my search documents are huge, I divide the search index into different index directory and make use of the ParallelMultiSearcher to perform the search.

Currently, I am working on the highlight feature using Lucene Sandbox Highlighter. One of the requirements is to convert the Query into the primitive form. I invoked the ParallelMultiSearcher.rewrite(Query). However, I got the exception, UnsupportedOperationException.

I start studying the source code. I discover that the ParallelMultiSearcher calls Query.combine() method to combine multiple primitive query into a single one. By looking at the Query.java, the method hasn't been implemented as you see below:

  /** Expert: called when re-writing queries under MultiSearcher.
   *
   * <p>Only implemented by derived queries, with no
   * {@link #createWeight(Searcher)} implementatation.
   */
  public Query combine(Query[] queries) {
    throw new UnsupportedOperationException();
  }

Does anyone know any alternative to rewrite the query if I have multiple index directories?

Thanks,
Terence




----------------------------------------------------------
Get your free email account from http://www.trekspace.com
          Your Internet Virtual Desktop!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 19:13:13 2005
Return-Path: <java-user-return-15338-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17970 invoked from network); 7 Jul 2005 19:13:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 19:13:13 -0000
Received: (qmail 39035 invoked by uid 500); 7 Jul 2005 19:13:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39013 invoked by uid 500); 7 Jul 2005 19:13:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38998 invoked by uid 99); 7 Jul 2005 19:13:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 12:13:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jadavis@gmail.com designates 64.233.170.195 as permitted sender)
Received: from [64.233.170.195] (HELO rproxy.gmail.com) (64.233.170.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 12:13:04 -0700
Received: by rproxy.gmail.com with SMTP id a41so230002rng
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2005 12:13:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=PezZZR6JxTA3ih0q96hhMEC3WHsbLT/bL7LZi2l1UE2rEn6DN88VvDWxUPi5llVvTqXrmM9hC+obQ9LPZVbhHTsyAG/2VZGv8jXhvx+m0EQkOgL5B4EPcXX0ZuTMLyxeG21DLD/Y8mEQ0wy4QBCJCQEDK0Lyxi7/g9AfsFtSm2c=
Received: by 10.38.149.76 with SMTP id w76mr783644rnd;
        Thu, 07 Jul 2005 12:13:02 -0700 (PDT)
Received: by 10.38.24.78 with HTTP; Thu, 7 Jul 2005 12:13:02 -0700 (PDT)
Message-ID: <418eb29d0507071213376f3746@mail.gmail.com>
Date: Thu, 7 Jul 2005 14:13:02 -0500
From: Jeff Davis <jadavis@gmail.com>
Reply-To: Jeff Davis <jadavis@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: non-lexical comparisons
In-Reply-To: <dajte9$kcd$1@sea.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <dajte9$kcd$1@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Have you considered left-padding your numbers with zeros to make each
number a string of the same length?

e.g., The number 5 would be indexed/queried as "00005", which can be
correctly compared to 10 ("00010"), 2345 ("02345"), etc. in a lexical
comparison...

Jeff

On 7/7/05, Leos Literak <literakl@seznam.cz> wrote:
> I know the answear, but just for curiosity:
>=20
> have you guys ever thought about non-lexical comparison
> support? For example I started to index number of replies
> in discussion, so I can find questions without answear,
> with one reply, two comments etc. But I cannot simply
> express that I want to find questions with more than five
> comments (there are ways using regexp, but I dont consider
> them as simple).
>=20
> Probably such feature belongs to RDBMS rather than to fulltext
> library .. I am just interested in you opinion. (I expect,
> that my users will raise the question, why they cannot use
> such condition so I ask in advance).
>=20
> Leos
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 20:52:44 2005
Return-Path: <java-user-return-15339-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66897 invoked from network); 7 Jul 2005 20:52:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 20:52:44 -0000
Received: (qmail 62626 invoked by uid 500); 7 Jul 2005 20:52:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62600 invoked by uid 500); 7 Jul 2005 20:52:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62587 invoked by uid 99); 7 Jul 2005 20:52:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 13:52:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 13:52:35 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E3C0F13E2005; Thu,  7 Jul 2005 16:52:29 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 448A713E2007
	for <java-user@lucene.apache.org>; Thu,  7 Jul 2005 16:52:00 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <9050778747856585878CMPYMWVNLK.tlai@trekspace.com>
References: <9050778747856585878CMPYMWVNLK.tlai@trekspace.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <75460B19-DEC1-413F-81BE-16AC84F4CBAE@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Help on the ParallelMultiSearcher.rewrite(Query) method
Date: Thu, 7 Jul 2005 16:52:01 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.8 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Terence - you need to do the rewrite using the appropriate  
IndexReader for a single index.  You can use query.rewrite(IndexReader).

     Erik


On Jul 7, 2005, at 3:04 PM, Terence Lai wrote:

> Hi all,
>
> I am currently using Lucene 1.4.2. Since my search documents are  
> huge, I divide the search index into different index directory and  
> make use of the ParallelMultiSearcher to perform the search.
>
> Currently, I am working on the highlight feature using Lucene  
> Sandbox Highlighter. One of the requirements is to convert the  
> Query into the primitive form. I invoked the  
> ParallelMultiSearcher.rewrite(Query). However, I got the exception,  
> UnsupportedOperationException.
>
> I start studying the source code. I discover that the  
> ParallelMultiSearcher calls Query.combine() method to combine  
> multiple primitive query into a single one. By looking at the  
> Query.java, the method hasn't been implemented as you see below:
>
>   /** Expert: called when re-writing queries under MultiSearcher.
>    *
>    * <p>Only implemented by derived queries, with no
>    * {@link #createWeight(Searcher)} implementatation.
>    */
>   public Query combine(Query[] queries) {
>     throw new UnsupportedOperationException();
>   }
>
> Does anyone know any alternative to rewrite the query if I have  
> multiple index directories?
>
> Thanks,
> Terence
>
>
>
>
> ----------------------------------------------------------
> Get your free email account from http://www.trekspace.com
>           Your Internet Virtual Desktop!
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 07 22:21:18 2005
Return-Path: <java-user-return-15340-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96496 invoked from network); 7 Jul 2005 22:21:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 7 Jul 2005 22:21:17 -0000
Received: (qmail 96134 invoked by uid 500); 7 Jul 2005 22:21:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96051 invoked by uid 500); 7 Jul 2005 22:21:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96038 invoked by uid 99); 7 Jul 2005 22:21:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 15:21:09 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_20_30,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.225] (HELO web31208.mail.mud.yahoo.com) (68.142.200.225)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Jul 2005 15:21:07 -0700
Received: (qmail 33015 invoked by uid 60001); 7 Jul 2005 22:21:05 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=mt7ouYL5LczuhqESrTx377yy6TUgJ5IvffnZTm5vUT6u9h7qR1KXEL8l1n0+Z80I0Pq5GBg/UTNXAPdLc9Nzb4vZbG5jx+ETDGaicRajymTHTQO1/oWguNAHnkIkL+1p8om7xG+OGIzqfSgjhGkBpBiO1wHXQFD5hl+siaWAb/w=  ;
Message-ID: <20050707222105.33013.qmail@web31208.mail.mud.yahoo.com>
Received: from [137.69.85.36] by web31208.mail.mud.yahoo.com via HTTP; Thu, 07 Jul 2005 15:21:05 PDT
Date: Thu, 7 Jul 2005 15:21:05 -0700 (PDT)
From: bib_lucene bib <bib_lucene@yahoo.com>
Subject: Re: FileNotFoundException segments
To: java-user@lucene.apache.org
In-Reply-To: <42CD12D5.7020705@gmx.li>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1999433834-1120774865=:32287"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1999433834-1120774865=:32287
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

This is a new directory, created just before this step.
I am uploading files to this directory. The file is getting uploaded fine.
Any ideas?

Muetze303 <Muetze303@gmx.li> wrote:
probably the dir exists, but the index inside the dir is broken or not 
complete and you are trying to use it instead of creating a new one?!

bib_lucene bib wrote:

>Hi All
> 
>can someone please help me on the error in my web application...
> 
>I am using tomcat , the path for index dir is obtained from jsp page using application.getRealPath("/")+"download/compName"
> 
>I want to index when the file gets uploaded.
>I am getting this error...
> 
>java.io.FileNotFoundException: C:\tomcat\webapps\myApp\download\compName\segmen
>s (The system cannot find the file specified)
> at java.io.RandomAccessFile.open(Native Method)
> at java.io.RandomAccessFile.(RandomAccessFile.java:204)
> at org.apache.lucene.store.FSInputStream$Descriptor.(FSDirectory.
>ava:376)
> at org.apache.lucene.store.FSInputStream.(FSDirectory.java:405)
> at org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
> at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
> at org.apache.lucene.index.IndexWriter$1.doBody(IndexWriter.java:233)
> at org.apache.lucene.store.Lock$With.run(Lock.java:109)
> at org.apache.lucene.index.IndexWriter.(IndexWriter.java:228)
> at org.apache.lucene.index.IndexWriter.(IndexWriter.java:193)
> at com.rs.upload.FileIndexer.indexDocument(FileIndexer.java:43)
> 
> 
>This directory C:\tomcat\webapps\myApp\download\compName\ exist in the file system.
> 
>Here is the program I wrote 
>/*
> * Created on Jul 6, 2005
> *
> * TODO To change the template for this generated file go to
> * Window - Preferences - Java - Code Style - Code Templates
> */
>package com.rs.upload;
>import java.util.Hashtable;
>import java.util.Iterator;
>import java.io.*;
>import org.apache.lucene.index.IndexWriter;
>import org.apache.lucene.analysis.standard.*;
>import org.apache.lucene.document.*;
>/**
> * @author
> *
> * This will index the documents as and when documents are uploaded.
> * 
> */
>public class FileIndexer {
> 
> public static void indexDocument(String fileName, Hashtable fields, String indexDir) throws IOException{
> 
> // Find if the index already exists
> boolean exists = true;
> File indexFile = null;
> if ((indexFile = new File(indexDir)).exists() && indexFile.isDirectory())
> {
> exists = false;
> System.out.println("Index does not exist");
> }
> else 
> {
> exists = true;
> System.out.println("Index does exist");
> }
> System.out.println("Index Directory:"+indexDir);
> IndexWriter writer = null;
> try {
> writer = new IndexWriter(indexFile, new StandardAnalyzer(), exists);
> } catch (IOException e) {
> // TODO Auto-generated catch block
> e.printStackTrace();
> }
> writer.mergeFactor = 20;
> 
> File candidateFile = new File(fileName);
> indexFile(writer,candidateFile,fields);
> }
> 
> private static void indexFile(IndexWriter writer, File f, Hashtable fields) throws IOException{
> 
> if( f.isHidden() || !f.exists() || !f.canRead()){
> return;
> }
> 
> System.out.println("Indexing file :"+ f.getCanonicalPath());
> Document doc = new Document();
> doc.add(Field.Text("contents", new FileReader(f)));
> doc.add(Field.Keyword("filename",f.getCanonicalPath()));
> 
> Iterator it = fields.keySet().iterator();
> String element = "";
> while (it.hasNext()) {
> element = (String)it.next();
> doc.add(Field.Keyword(element,(String)fields.get(element)));
> }
> writer.addDocument(doc);
> }
>}
> 
>
> 
>---------------------------------
> Sell on Yahoo! Auctions - No fees. Bid on great items.
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


		
---------------------------------
 Sell on Yahoo! Auctions  - No fees. Bid on great items.
--0-1999433834-1120774865=:32287--

From java-user-return-15341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 00:03:01 2005
Return-Path: <java-user-return-15341-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22054 invoked from network); 8 Jul 2005 00:03:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 00:03:00 -0000
Received: (qmail 92527 invoked by uid 500); 8 Jul 2005 00:02:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92506 invoked by uid 500); 8 Jul 2005 00:02:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92493 invoked by uid 99); 8 Jul 2005 00:02:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 17:02:54 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.148.212.179] (HELO adm1.bloglines.com) (216.148.212.179)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Jul 2005 17:02:52 -0700
Received: (qmail 2039 invoked from network); 8 Jul 2005 00:02:51 -0000
Received: from unknown (HELO w12.bloglines.com) (10.4.0.61)
  by 0 with SMTP; 8 Jul 2005 00:02:51 -0000
Received: (qmail 19857 invoked by uid 99); 8 Jul 2005 00:02:51 -0000
Message-ID: <1120780971.2181412914.19856.sendItem@bloglines.com>
Date: 8 Jul 2005 00:02:51 -0000
From: yahootintin.11533894@bloglines.com
To: java-user@lucene.apache.org
Subject: Lucene faster on JDK 1.5?
MIME-Version: 1.0
Content-Type: text/plain;charset="utf-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Are people seeing a significant speed performance with Lucene when they upgrade
to JDK 1.5?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 00:04:36 2005
Return-Path: <java-user-return-15342-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22560 invoked from network); 8 Jul 2005 00:04:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 00:04:36 -0000
Received: (qmail 94470 invoked by uid 500); 8 Jul 2005 00:04:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94452 invoked by uid 500); 8 Jul 2005 00:04:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94436 invoked by uid 99); 8 Jul 2005 00:04:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 17:04:29 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.148.212.179] (HELO adm1.bloglines.com) (216.148.212.179)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Jul 2005 17:04:28 -0700
Received: (qmail 2205 invoked from network); 8 Jul 2005 00:04:27 -0000
Received: from unknown (HELO w12.bloglines.com) (10.4.0.61)
  by 0 with SMTP; 8 Jul 2005 00:04:27 -0000
Received: (qmail 22754 invoked by uid 99); 8 Jul 2005 00:04:27 -0000
Message-ID: <1120781067.1592630318.22753.sendItem@bloglines.com>
Date: 8 Jul 2005 00:04:27 -0000
From: yahootintin.11533894@bloglines.com
To: java-user@lucene.apache.org
Subject: Loading large index into RAM
MIME-Version: 1.0
Content-Type: text/plain;charset="utf-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is it possible to use a RAMDirectory to load a 5 GB index into RAM on Linux?
 I have access to a server with 6 GB of RAM and will try it next week but
I've heard that Java on Linux may only support up to 2 GB of RAM per process.
 Anyone already tried this?

Thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 01:26:04 2005
Return-Path: <java-user-return-15343-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58946 invoked from network); 8 Jul 2005 01:26:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 01:26:04 -0000
Received: (qmail 77947 invoked by uid 500); 8 Jul 2005 01:25:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77767 invoked by uid 500); 8 Jul 2005 01:25:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 71055 invoked by uid 99); 7 Jul 2005 23:39:14 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Content-class: urn:content-classes:message
Subject: RE: FileNotFoundException segments
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Fri, 8 Jul 2005 09:41:48 +1000
Message-ID: <282964E45B81F54AA653A49D11E4C208070E74@Hermes.synetek.com>
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: FileNotFoundException segments
Thread-Index: AcWDQi5uw0s1tDY5SAGRe6dbhIrvkAACqBAg
From: "Jason Polites" <jason.polites@synetek.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

 if ((indexFile =3D new File(indexDir)).exists() &&
indexFile.isDirectory())
  {
       exists =3D false;


Isn't this backwards?

Couldn't you just do:

indexFile =3D new File(indexDir);
exists =3D (indexFile.exists() && indexFile.isDirectory());



-----Original Message-----
From: bib_lucene bib [mailto:bib_lucene@yahoo.com]=20
Sent: Friday, 8 July 2005 8:21 AM
To: java-user@lucene.apache.org
Subject: Re: FileNotFoundException segments

This is a new directory, created just before this step.
I am uploading files to this directory. The file is getting uploaded
fine.
Any ideas?

Muetze303 <Muetze303@gmx.li> wrote:
probably the dir exists, but the index inside the dir is broken or not
complete and you are trying to use it instead of creating a new one?!

bib_lucene bib wrote:

>Hi All
>=20
>can someone please help me on the error in my web application...
>=20
>I am using tomcat , the path for index dir is obtained from jsp page
using application.getRealPath("/")+"download/compName"
>=20
>I want to index when the file gets uploaded.
>I am getting this error...
>=20
>java.io.FileNotFoundException:=20
>C:\tomcat\webapps\myApp\download\compName\segmen
>s (The system cannot find the file specified)  at=20
>java.io.RandomAccessFile.open(Native Method)  at=20
>java.io.RandomAccessFile.(RandomAccessFile.java:204)
> at org.apache.lucene.store.FSInputStream$Descriptor.(FSDirectory.
>ava:376)
> at org.apache.lucene.store.FSInputStream.(FSDirectory.java:405)
> at org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
> at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
> at org.apache.lucene.index.IndexWriter$1.doBody(IndexWriter.java:233)
> at org.apache.lucene.store.Lock$With.run(Lock.java:109)
> at org.apache.lucene.index.IndexWriter.(IndexWriter.java:228)
> at org.apache.lucene.index.IndexWriter.(IndexWriter.java:193)
> at com.rs.upload.FileIndexer.indexDocument(FileIndexer.java:43)
>=20
>=20
>This directory C:\tomcat\webapps\myApp\download\compName\ exist in the
file system.
>=20
>Here is the program I wrote
>/*
> * Created on Jul 6, 2005
> *
> * TODO To change the template for this generated file go to
> * Window - Preferences - Java - Code Style - Code Templates  */=20
>package com.rs.upload; import java.util.Hashtable; import=20
>java.util.Iterator; import java.io.*; import=20
>org.apache.lucene.index.IndexWriter;
>import org.apache.lucene.analysis.standard.*;
>import org.apache.lucene.document.*;
>/**
> * @author
> *
> * This will index the documents as and when documents are uploaded.
> *
> */
>public class FileIndexer {
>=20
> public static void indexDocument(String fileName, Hashtable fields,=20
> String indexDir) throws IOException{
>=20
> // Find if the index already exists
> boolean exists =3D true;
> File indexFile =3D null;
> if ((indexFile =3D new File(indexDir)).exists() &&=20
> indexFile.isDirectory()) { exists =3D false; System.out.println("Index =

> does not exist"); } else { exists =3D true; System.out.println("Index=20
> does exist"); } System.out.println("Index Directory:"+indexDir);=20
> IndexWriter writer =3D null; try { writer =3D new =
IndexWriter(indexFile,=20
> new StandardAnalyzer(), exists); } catch (IOException e) { // TODO=20
> Auto-generated catch block e.printStackTrace(); } writer.mergeFactor =
=3D

> 20;
>=20
> File candidateFile =3D new File(fileName);=20
> indexFile(writer,candidateFile,fields);
> }
>=20
> private static void indexFile(IndexWriter writer, File f, Hashtable=20
> fields) throws IOException{
>=20
> if( f.isHidden() || !f.exists() || !f.canRead()){ return; }
>=20
> System.out.println("Indexing file :"+ f.getCanonicalPath()); Document=20
> doc =3D new Document(); doc.add(Field.Text("contents", new=20
> FileReader(f)));=20
> doc.add(Field.Keyword("filename",f.getCanonicalPath()));
>=20
> Iterator it =3D fields.keySet().iterator();  String element =3D "";  =
while

>(it.hasNext()) {  element =3D (String)it.next(); =20
>doc.add(Field.Keyword(element,(String)fields.get(element)));
> }
> writer.addDocument(doc);
> }
>}
>=20
>
>=20
>---------------------------------
> Sell on Yahoo! Auctions - No fees. Bid on great items.
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


	=09
---------------------------------
 Sell on Yahoo! Auctions  - No fees. Bid on great items.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 01:26:11 2005
Return-Path: <java-user-return-15344-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58983 invoked from network); 8 Jul 2005 01:26:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 01:26:11 -0000
Received: (qmail 78302 invoked by uid 500); 8 Jul 2005 01:26:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78249 invoked by uid 500); 8 Jul 2005 01:26:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 73026 invoked by uid 99); 7 Jul 2005 23:42:21 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Content-class: urn:content-classes:message
Subject: RE: Search Timeout - abort a search
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Fri, 8 Jul 2005 09:44:57 +1000
Message-ID: <282964E45B81F54AA653A49D11E4C208070E75@Hermes.synetek.com>
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Search Timeout - abort a search
Thread-Index: AcWC/X8P6DR/zH5URMq5Hsmua/hd2gAUBwAw
From: "Jason Polites" <jason.polites@synetek.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You could do it asynchronously.  That is, separate off the actually
lucene search into a different thread which does the actual search, then
the calling thread simply waits for a maximum time for the search thread
to complete, then queries the status of the search thread to get the
results obtained to that point.  You can then kill the search thread, or
let it run in the background.

-----Original Message-----
From: Dan Armbrust [mailto:daniel.armbrust.list@gmail.com]=20
Sent: Friday, 8 July 2005 12:06 AM
To: java-user@lucene.apache.org
Subject: Search Timeout - abort a search

Has anyone ever written code to make it possible to return from a
search, after a given amount of time, returning the results that have
been collected so far (but not necessarily all of them)?

The only thing that I can see to do through the public Lucene API's
would be to do the search using a HitCollector - and just stop recording
the hits after X amount of time has passed - but this would only
partially solve the problem... lucene would still continue to call the
HitCollector collect method until it finished.

Is there something else I'm missing?

Thanks,

Dan

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 04:10:25 2005
Return-Path: <java-user-return-15345-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97112 invoked from network); 8 Jul 2005 04:10:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 04:10:25 -0000
Received: (qmail 3771 invoked by uid 500); 8 Jul 2005 04:10:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3752 invoked by uid 500); 8 Jul 2005 04:10:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3739 invoked by uid 99); 8 Jul 2005 04:10:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 21:10:12 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.202 as permitted sender)
Received: from [64.233.170.202] (HELO rproxy.gmail.com) (64.233.170.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 21:10:11 -0700
Received: by rproxy.gmail.com with SMTP id 40so95587rnz
        for <java-user@lucene.apache.org>; Thu, 07 Jul 2005 21:10:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Rwr6lguzcClVLZld+lBEj7+AGYmYktHgNK0cycbxfISizbQiqLduN5g7WzBm610w4hrIOpAHI0SFEEHYo4UHGQvKUzClVqZ3K5hMg5C61GoaNhcgON+kev80BQ8l7pIjPkY8n/CVuErlrdNm8LsOIRPjWxWq4b0WkU/tLJfnwFU=
Received: by 10.38.195.4 with SMTP id s4mr4909731rnf;
        Thu, 07 Jul 2005 21:10:09 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Thu, 7 Jul 2005 21:10:09 -0700 (PDT)
Message-ID: <7ca1239105070721101f7180cc@mail.gmail.com>
Date: Thu, 7 Jul 2005 21:10:09 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: non-lexical comparisons
In-Reply-To: <dajte9$kcd$1@sea.gmane.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <dajte9$kcd$1@sea.gmane.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yeah, RDBMS makes sense. In this case, would it be better to simple
store those in a relational database and just use Lucene to do
indexing for the text?

Cheers,

Jian

On 7/7/05, Leos Literak <literakl@seznam.cz> wrote:
> I know the answear, but just for curiosity:
>=20
> have you guys ever thought about non-lexical comparison
> support? For example I started to index number of replies
> in discussion, so I can find questions without answear,
> with one reply, two comments etc. But I cannot simply
> express that I want to find questions with more than five
> comments (there are ways using regexp, but I dont consider
> them as simple).
>=20
> Probably such feature belongs to RDBMS rather than to fulltext
> library .. I am just interested in you opinion. (I expect,
> that my users will raise the question, why they cannot use
> such condition so I ask in advance).
>=20
> Leos
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 04:41:03 2005
Return-Path: <java-user-return-15346-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3064 invoked from network); 8 Jul 2005 04:41:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 04:41:03 -0000
Received: (qmail 26933 invoked by uid 500); 8 Jul 2005 04:40:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26779 invoked by uid 500); 8 Jul 2005 04:40:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26758 invoked by uid 99); 8 Jul 2005 04:40:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 21:40:55 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.39] (HELO web31106.mail.mud.yahoo.com) (68.142.200.39)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 07 Jul 2005 21:40:53 -0700
Received: (qmail 66375 invoked by uid 60001); 8 Jul 2005 04:40:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=jV97J9EOwJAWaSipypbFcWOCkfoylET8oKxAgzYtwUVd/8LO3zPy5/ySUEjMcqgqe9mZy6lC7eiOTjjJzHw0XJe8l3IaSumEUoBGWro8sbciSXTp1crCAsFwoshKY0iXt5JRyo7pmhDjeqhpdYiAl32NtGBSlFQPsjwZVNojghA=  ;
Message-ID: <20050708044051.66373.qmail@web31106.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31106.mail.mud.yahoo.com via HTTP; Thu, 07 Jul 2005 21:40:51 PDT
Date: Thu, 7 Jul 2005 21:40:51 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene faster on JDK 1.5?
To: java-user@lucene.apache.org
In-Reply-To: <1120780971.2181412914.19856.sendItem@bloglines.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Nothing significant, but I've been using 1.5 on Simpy.com (lots of
Lucene behind it) for over a year now, and I'm happy with it.

Otis


--- yahootintin.11533894@bloglines.com wrote:

> Are people seeing a significant speed performance with Lucene when
> they upgrade
> to JDK 1.5?
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 06:54:42 2005
Return-Path: <java-user-return-15347-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 36569 invoked from network); 8 Jul 2005 06:54:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 06:54:42 -0000
Received: (qmail 27151 invoked by uid 500); 8 Jul 2005 06:54:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27131 invoked by uid 500); 8 Jul 2005 06:54:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27118 invoked by uid 99); 8 Jul 2005 06:54:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 23:54:32 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=FORGED_RCVD_HELO,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.230.233.11] (HELO mail.datagroup.ro) (193.230.233.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 07 Jul 2005 23:54:31 -0700
Received: from dginw.level7.ro (localhost [127.0.0.1])
	by dginw.level7.ro (Postfix) with SMTP id 9040573CBD
	for <java-user@lucene.apache.org>; Fri,  8 Jul 2005 09:54:29 +0300 (EEST)
Received: by mail.datagroup.ro (Postfix, from userid 65534)
	id 4557B73CE7; Fri,  8 Jul 2005 09:54:29 +0300 (EEST)
Received: from ls.datagroup.ro (ls.intranet [10.0.0.2])
	by mail.datagroup.ro (Postfix) with ESMTP id 3E81973CBD
	for <java-user@lucene.apache.org>; Fri,  8 Jul 2005 09:54:28 +0300 (EEST)
Received: by ls.intranet with Internet Mail Service (5.5.2657.72)
	id <3K15CKHJ>; Fri, 8 Jul 2005 09:57:47 +0300
Message-ID: <91ED50165667D211BDB900A0240B1929021EB1E7@ls.intranet>
From: Daniel Moldovan <daniel.moldovan@level7.ro>
To: java-user@lucene.apache.org
Subject: search that span over consecutive documents
Date: Fri, 8 Jul 2005 09:57:43 +0300 
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2657.72)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5838A.56D6E440"
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on dginw.level7.ro
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-105.7 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	HTML_80_90,HTML_MESSAGE,USER_IN_WHITELIST autolearn=ham version=3.0.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5838A.56D6E440
Content-Type: text/plain

Hello everyone,

 

My application must index a lot of books that are stored in xml files.

Each xml file represents a page of the book and this way each page becomes a
lucene Document.

Each page is organized in different sections and finally each section
contains lines.

 

What I need to do is give the user the possibility to search for a phrase
that starts at the 

and of a page and continues on the next page. The span should have some
limits, let's say,  

6 words on each page.

 

Does any one experienced this kind of search? Please share you knowledge if
you did.

Thank you very much,

 

Daniel


------_=_NextPart_001_01C5838A.56D6E440--


From java-user-return-15348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 07:29:26 2005
Return-Path: <java-user-return-15348-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90273 invoked from network); 8 Jul 2005 07:29:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 07:29:26 -0000
Received: (qmail 59856 invoked by uid 500); 8 Jul 2005 07:29:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59830 invoked by uid 500); 8 Jul 2005 07:29:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59815 invoked by uid 99); 8 Jul 2005 07:29:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 00:29:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of clamprecht@gmail.com designates 64.233.170.204 as permitted sender)
Received: from [64.233.170.204] (HELO rproxy.gmail.com) (64.233.170.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 00:29:12 -0700
Received: by rproxy.gmail.com with SMTP id z35so322920rne
        for <java-user@lucene.apache.org>; Fri, 08 Jul 2005 00:29:10 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Hb5aZ65/HrdrYLvOnRL6j1TjAy8zW4LOg8Mf7by2hmht243JVv5doykGw3LBG4fhl5fm0mWBzxB4PDvac+r79PtjaXPz0wT75zjeEtYSgIhBcQjE8F84j4ot+qBxpVsuM2fCiQYjr9PgOebAfkSS9Si4NrtTcpyp7HkegMOAhvM=
Received: by 10.39.3.1 with SMTP id f1mr1552114rni;
        Fri, 08 Jul 2005 00:29:10 -0700 (PDT)
Received: by 10.38.104.23 with HTTP; Fri, 8 Jul 2005 00:29:10 -0700 (PDT)
Message-ID: <88c6a672050708002955c8cafa@mail.gmail.com>
Date: Fri, 8 Jul 2005 02:29:10 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Loading large index into RAM
In-Reply-To: <1120781067.1592630318.22753.sendItem@bloglines.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <1120781067.1592630318.22753.sendItem@bloglines.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you're under an x86_64 machine (AMD opteron, for instance), you may
be able to set your JVM heap this large.  But if you have 6GB RAM, you
might try keeping your JVM small (under 1GB), and letting linux's
filesystem cache do the work.  Lucene searches are often CPU-bound
(during the search phase anyway) and loading into a RAMDirectory won't
help here.  It's the second "phase" of search -- pulling all the
lucene Documents from disk -- that's often I/O bound, and can benefit
from being in RAM.

-chris

On 8 Jul 2005 00:04:27 -0000, yahootintin.11533894@bloglines.com
<yahootintin.11533894@bloglines.com> wrote:
> Is it possible to use a RAMDirectory to load a 5 GB index into RAM on Lin=
ux?
>  I have access to a server with 6 GB of RAM and will try it next week but
> I've heard that Java on Linux may only support up to 2 GB of RAM per proc=
ess.
>  Anyone already tried this?
>=20
> Thanks.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 09:05:12 2005
Return-Path: <java-user-return-15349-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45350 invoked from network); 8 Jul 2005 09:05:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 09:05:11 -0000
Received: (qmail 67915 invoked by uid 500); 8 Jul 2005 09:04:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67788 invoked by uid 500); 8 Jul 2005 09:04:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67718 invoked by uid 99); 8 Jul 2005 09:04:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 02:04:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [62.23.111.122] (HELO cer31mx-gw.cirso.fr) (62.23.111.122)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 02:04:50 -0700
Received: from cer31mx-gw.cirso.fr 
        by cer31mx-gw.cirso.fr  with ESMTP id j6894lfB022581
        for <java-user@lucene.apache.org>; Fri, 8 Jul 2005 11:04:48 +0200
Received: from contact31.urssaf.fr 
        by cer31mx-gw.cirso.fr  with ESMTP id j6894gJN022526
        for <java-user@lucene.apache.org>; Fri, 8 Jul 2005 11:04:42 +0200
Subject: Bertrand VENZAL/CER31/REC est absent(e).
From: "Bertrand VENZAL" <bertrand.venzal@cirso.fr>
To: "java-user" <java-user@lucene.apache.org>
Message-ID: <OFBC83E058.922BC744-ONC1257038.0031B7E0-C1257038.0031B7E0@urssaf.fr>
Date: Fri, 8 Jul 2005 11:03:03 +0200
MIME-Version: 1.0
Content-type: text/plain; charset=iso-8859-1
Content-transfer-encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Je serai absent(e) =E0 partir du  08/07/2005 de retour le 02/08/2005.

Je r=E9pondrai =E0 votre message d=E8s mon retour.
=



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 12:48:21 2005
Return-Path: <java-user-return-15350-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34115 invoked from network); 8 Jul 2005 12:48:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 12:48:21 -0000
Received: (qmail 93974 invoked by uid 500); 8 Jul 2005 12:48:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93931 invoked by uid 500); 8 Jul 2005 12:48:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93908 invoked by uid 99); 8 Jul 2005 12:48:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 05:48:11 -0700
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,RCVD_IN_BL_SPAMCOP_NET,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fersher@hotmail.com designates 65.54.224.44 as permitted sender)
Received: from [65.54.224.44] (HELO hotmail.com) (65.54.224.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 05:48:10 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Fri, 8 Jul 2005 05:48:09 -0700
Message-ID: <BAY105-F348B3658431D27A88BCB7CB2DB0@phx.gbl>
Received: from 65.54.224.200 by by105fd.bay105.hotmail.msn.com with HTTP;
	Fri, 08 Jul 2005 12:48:08 GMT
X-Originating-IP: [65.54.224.200]
X-Originating-Email: [fersher@hotmail.com]
X-Sender: fersher@hotmail.com
From: "christopher may" <fersher@hotmail.com>
To: java-user@lucene.apache.org, general-help@lucene.apache.org
Subject: Search 
Date: Fri, 08 Jul 2005 08:48:08 -0400
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 08 Jul 2005 12:48:09.0124 (UTC) FILETIME=[4B0DB640:01C583BB]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is there a simple way for me to add a browse by letter setup on lucene's 
main page. If anybody knows of any documents on this I would greatly 
appreciate it, Thanks



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 13:08:58 2005
Return-Path: <java-user-return-15351-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43619 invoked from network); 8 Jul 2005 13:08:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 13:08:57 -0000
Received: (qmail 45468 invoked by uid 500); 8 Jul 2005 13:08:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45439 invoked by uid 500); 8 Jul 2005 13:08:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45421 invoked by uid 99); 8 Jul 2005 13:08:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 06:08:49 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.58] (HELO pop05.mail.atl.earthlink.net) (207.69.200.58)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 06:08:47 -0700
Received: from wamui-thinleaf.atl.sa.earthlink.net ([209.86.224.51])
	by pop05.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1Dqsb0-0004hg-00
	for java-user@lucene.apache.org; Fri, 08 Jul 2005 09:08:46 -0400
Message-ID: <1038176.1120828126041.JavaMail.root@wamui-thinleaf.atl.sa.earthlink.net>
Date: Fri, 8 Jul 2005 08:08:46 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: How to get the un-stemed word
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,
  I am using the snowball stemmer and for all my searches that works fine.
However,  I have a need to display the un-stemmed word after doing some term vector analysis.

I was thinking that I might insert the real word at the same position as the stemed word but give
the real word a type of say "r-word".  My question is how can I get the r-word from the TermVectors?

If there is not a way to get it from the TermVector is there a way to search/retrieve by token type?

Thanks,

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 14:20:44 2005
Return-Path: <java-user-return-15352-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80224 invoked from network); 8 Jul 2005 14:20:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 14:20:43 -0000
Received: (qmail 78486 invoked by uid 500); 8 Jul 2005 14:20:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78441 invoked by uid 500); 8 Jul 2005 14:20:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78416 invoked by uid 99); 8 Jul 2005 14:20:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 07:20:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of appler@gmail.com designates 64.233.170.197 as permitted sender)
Received: from [64.233.170.197] (HELO rproxy.gmail.com) (64.233.170.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 07:20:31 -0700
Received: by rproxy.gmail.com with SMTP id z35so384054rne
        for <java-user@lucene.apache.org>; Fri, 08 Jul 2005 07:20:30 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=mXf9YNYjQmD3kt6WCDfejy3D7ToNL72p4ElcS3T8p6hG3zSth/nuZJhJox6LhzPhBptHQPz5elMIHTktpEqf7YJ/P2HLKKuepT8FbpkEWHC40EL6BEMhFKwKaePunNzNov7zXSA0REaPUDPiK5E7np4Th7h+u1TBAOt3N2+mvws=
Received: by 10.38.92.22 with SMTP id p22mr1848247rnb;
        Fri, 08 Jul 2005 07:20:30 -0700 (PDT)
Received: by 10.38.101.56 with HTTP; Fri, 8 Jul 2005 07:20:30 -0700 (PDT)
Message-ID: <48b7084905070807203106be22@mail.gmail.com>
Date: Fri, 8 Jul 2005 23:20:30 +0900
From: Cheolgoo Kang <appler@gmail.com>
Reply-To: Cheolgoo Kang <appler@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Loading large index into RAM
In-Reply-To: <88c6a672050708002955c8cafa@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <1120781067.1592630318.22753.sendItem@bloglines.com>
	 <88c6a672050708002955c8cafa@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How about using RAM disk and FSDirectory? It would be not so fast as
RAMDirectory,
but will be fast enough.

On 7/8/05, Chris Lamprecht <clamprecht@gmail.com> wrote:
> If you're under an x86_64 machine (AMD opteron, for instance), you may
> be able to set your JVM heap this large.  But if you have 6GB RAM, you
> might try keeping your JVM small (under 1GB), and letting linux's
> filesystem cache do the work.  Lucene searches are often CPU-bound
> (during the search phase anyway) and loading into a RAMDirectory won't
> help here.  It's the second "phase" of search -- pulling all the
> lucene Documents from disk -- that's often I/O bound, and can benefit
> from being in RAM.
>=20
> -chris
>=20
> On 8 Jul 2005 00:04:27 -0000, yahootintin.11533894@bloglines.com
> <yahootintin.11533894@bloglines.com> wrote:
> > Is it possible to use a RAMDirectory to load a 5 GB index into RAM on L=
inux?
> >  I have access to a server with 6 GB of RAM and will try it next week b=
ut
> > I've heard that Java on Linux may only support up to 2 GB of RAM per pr=
ocess.
> >  Anyone already tried this?
> >
> > Thanks.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Regards,
Cheolgoo Kang

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 14:33:00 2005
Return-Path: <java-user-return-15353-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84214 invoked from network); 8 Jul 2005 14:32:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 14:32:59 -0000
Received: (qmail 4823 invoked by uid 500); 8 Jul 2005 14:32:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4756 invoked by uid 500); 8 Jul 2005 14:32:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4712 invoked by uid 99); 8 Jul 2005 14:32:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 07:32:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.245.223.231] (HELO trekspace.trekspace.com) (207.245.223.231)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 07:32:30 -0700
Received: from trekspace.trekspace.com (trekspace@trekspace.trekspace.com [192.168.2.234])
	by trekspace.trekspace.com (8.12.3/8.12.3/Debian-7.1) with ESMTP id j68EWTZZ009506
	for <java-user@lucene.apache.org>; Fri, 8 Jul 2005 10:32:29 -0400
Message-ID: <4231956370232711469VHJQKBGMDI.tlai@trekspace.com>
Date: Fri, 8 Jul 2005 10:32:29 -0400 (EDT)
From: Terence Lai <tlai@trekspace.com>
Reply-To: Terence Lai <tlai@trekspace.com>
To: java-user@lucene.apache.org
Subject: RE: Re: Help on the ParallelMultiSearcher.rewrite(Query) method
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-Mailer: Treklogic MailTool v1.6 http://www.treklogic.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Erik,

I have implemented the way as you described, and it is now working probably. However, I have a concern on the performance of my implementation.

Since I am using parallelMultiSearcher to perform the search. I have no idea on which index directory is corresponding to the document that I am trying to highlight. The way my application works is indicated as follows:

1) user enter a keyword search criteria for the document contents
2) the system returns a list of document titles with hyper links to drill down to the contents.
3) upon the user click the hyper link of the individual document, the application will perform the highlight based on the search criteria cached from Step (1)

Because of this, the application does not keep track of which index directory is associated with the search result document. Currently, I have to make another search using the document primary key to locate the searcher, and using this individual searcher to rewrite my query. However, it invokes an extra search operation which may be costly.

Therefore, I originally tried to use the ParallelMultiSearcher.rewrite() to convert the query into a primitive form. Doing this way, I don't need to worry about which index directory is belong to the index document. Is there any reason why the method not being supported?

I am trying to think of an alternative way. Is that possible for me to loop through all the individual searchers and perform an IndexSearcher.rewrite with each searcher. At the end, I create a BooleanQuery to join them together with BooleanQuery(subQuery, false, false); Do you think this will work? Is there any issue if I do this?

Thanks,
Terence



> Terence - you need to do the rewrite using the appropriate  
> IndexReader for a single index.  You can use query.rewrite(IndexReader).
> 
>      Erik
> 
> 
> On Jul 7, 2005, at 3:04 PM, Terence Lai wrote:
> 
> > Hi all,
> >
> > I am currently using Lucene 1.4.2. Since my search documents are  
> > huge, I divide the search index into different index directory and  
> > make use of the ParallelMultiSearcher to perform the search.
> >
> > Currently, I am working on the highlight feature using Lucene  
> > Sandbox Highlighter. One of the requirements is to convert the  
> > Query into the primitive form. I invoked the  
> > ParallelMultiSearcher.rewrite(Query). However, I got the exception,  
> > UnsupportedOperationException.
> >
> > I start studying the source code. I discover that the  
> > ParallelMultiSearcher calls Query.combine() method to combine  
> > multiple primitive query into a single one. By looking at the  
> > Query.java, the method hasn't been implemented as you see below:
> >
> >   /** Expert: called when re-writing queries under MultiSearcher.
> >    *
> >    * <p>Only implemented by derived queries, with no
> >    * {@link #createWeight(Searcher)} implementatation.
> >    */
> >   public Query combine(Query[] queries) {
> >     throw new UnsupportedOperationException();
> >   }
> >
> > Does anyone know any alternative to rewrite the query if I have  
> > multiple index directories?
> >
> > Thanks,
> > Terence
> >
> >
> >
> >
> > ----------------------------------------------------------
> > Get your free email account from http://www.trekspace.com
> >           Your Internet Virtual Desktop!
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 




----------------------------------------------------------
Get your free email account from http://www.trekspace.com
          Your Internet Virtual Desktop!

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 14:59:13 2005
Return-Path: <java-user-return-15354-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95252 invoked from network); 8 Jul 2005 14:59:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 14:59:13 -0000
Received: (qmail 61414 invoked by uid 500); 8 Jul 2005 14:59:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61393 invoked by uid 500); 8 Jul 2005 14:59:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61380 invoked by uid 99); 8 Jul 2005 14:59:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 07:59:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 07:59:01 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D84E813E2005; Fri,  8 Jul 2005 10:58:55 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id EB43613E2007
	for <java-user@lucene.apache.org>; Fri,  8 Jul 2005 10:58:44 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <BAY105-F348B3658431D27A88BCB7CB2DB0@phx.gbl>
References: <BAY105-F348B3658431D27A88BCB7CB2DB0@phx.gbl>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5DA4CAF8-5745-4E82-9335-85CB18BC3B01@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Search 
Date: Fri, 8 Jul 2005 10:58:46 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.5 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 8, 2005, at 8:48 AM, christopher may wrote:
> Is there a simple way for me to add a browse by letter setup on  
> lucene's main page. If anybody knows of any documents on this I  
> would greatly appreciate it, Thanks

I don't understand what you mean.  Are you talking about changing  
Lucene's official website?  Or asking about the technicalities of  
using Lucene in your own system?  Please elaborate.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 15:01:48 2005
Return-Path: <java-user-return-15355-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96799 invoked from network); 8 Jul 2005 15:01:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 15:01:47 -0000
Received: (qmail 70571 invoked by uid 500); 8 Jul 2005 15:01:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70540 invoked by uid 500); 8 Jul 2005 15:01:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70527 invoked by uid 99); 8 Jul 2005 15:01:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 08:01:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 08:01:37 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A543D13E2005; Fri,  8 Jul 2005 11:01:32 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 703BF13E2005
	for <java-user@lucene.apache.org>; Fri,  8 Jul 2005 11:01:21 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <1038176.1120828126041.JavaMail.root@wamui-thinleaf.atl.sa.earthlink.net>
References: <1038176.1120828126041.JavaMail.root@wamui-thinleaf.atl.sa.earthlink.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <D8270882-0940-47DC-AFC2-AE6D1A292EC6@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to get the un-stemed word
Date: Fri, 8 Jul 2005 11:01:22 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 8, 2005, at 9:08 AM, Andrew Boyd wrote:

> Hi all,
>   I am using the snowball stemmer and for all my searches that  
> works fine.
> However,  I have a need to display the un-stemmed word after doing  
> some term vector analysis.
>
> I was thinking that I might insert the real word at the same  
> position as the stemed word but give
> the real word a type of say "r-word".  My question is how can I get  
> the r-word from the TermVectors?
>
> If there is not a way to get it from the TermVector is there a way  
> to search/retrieve by token type?

Currently token type is not stored in the index - it is used solely  
during analysis but does not go any further.

It would be quite cool for that type to carry into the index and be  
surfaced for searching.

You will need to develop another approach, perhaps using two  
different indexes, or two different fields.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 15:04:45 2005
Return-Path: <java-user-return-15356-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98597 invoked from network); 8 Jul 2005 15:04:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 15:04:45 -0000
Received: (qmail 78311 invoked by uid 500); 8 Jul 2005 15:04:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78292 invoked by uid 500); 8 Jul 2005 15:04:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78278 invoked by uid 99); 8 Jul 2005 15:04:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 08:04:38 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.95.77.96] (HELO phobos.net-temps.com) (64.95.77.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 08:04:36 -0700
Received: from localhost (localhost [127.0.0.1])
	by phobos.net-temps.com (Postfix) with ESMTP id 44EF53F441;
	Fri,  8 Jul 2005 11:04:32 -0400 (EDT)
Received: from phobos.net-temps.com ([127.0.0.1])
 by localhost (phobos.net-temps.com [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 97981-01; Fri,  8 Jul 2005 11:04:29 -0400 (EDT)
Received: from nbrackett (europa [192.168.1.21])
	by phobos.net-temps.com (Postfix) with SMTP id 4D8853F43D
	for <java-user@lucene.apache.org>; Fri,  8 Jul 2005 11:04:29 -0400 (EDT)
From: "Nathan Brackett" <nbrackett@net-temps.com>
To: <java-user@lucene.apache.org>
Subject: Search deadlocking under load
Date: Fri, 8 Jul 2005 11:05:55 -0400
Message-ID: <LJEJJJKMGLFKGPJJOLFJEEADIGAA.nbrackett@net-temps.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Importance: Normal
X-Virus-Scanned: by amavisd-new at net-temps.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey all,

We're looking to use Lucene as the back end to our website and we're running
into an unusual deadlocking problem.

For testing purposes, we're just running one web server (threaded
environment) against an index mounted on an NFS share. This machine performs
searches only against this index so it's not being touched. We have tried a
few different models so far:

1) Pooling IndexSearcher objects: Occasionally we would run into OutOfMemory
problems as we would not block if a request came through and all
IndexSearchers were already checked out, we would just create a temporary
one and then dispose of it once it was returned to the pool.

2) Create a new IndexSearcher each time: Every request to search would
create an IndexSearcher object. This quickly gave OutOfMemory errors, even
when we would close them out directly after.

3) Use a global IndexSearcher: This is the model we're working with now. The
model holds up fine under low-moderate load and is, in fact, much faster at
searching (probably due to some caching mechanism). Under heavy load though,
the CPU will spike up to 99% and never come back down until we kill -9 the
process. Also, as you ramp the load, we've discovered that search times go
up as well. Searches will generally come back after 40ms, but as the load
goes up the searches don't come back for up to 20 seconds.

We've been attempting to find where the problem is for the last week with no
luck. Our index is optimized, so there is only one file. Do we need to
synchronize access to the global IndexSearcher so that only one search can
run at a time? That poses a bit of a problem as if a particular search takes
a long time, all others will wait. This problem does not look like an
OutOrMemory error because the memory usage when the spike occurs is usually
in the range of 150meg used with a ceiling of 650meg. Anyone else
experiencing any problems like this or have any idea where we should be
looking? Thanks.




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 15:11:48 2005
Return-Path: <java-user-return-15357-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1553 invoked from network); 8 Jul 2005 15:11:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 15:11:48 -0000
Received: (qmail 92889 invoked by uid 500); 8 Jul 2005 15:11:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 92773 invoked by uid 500); 8 Jul 2005 15:11:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 92757 invoked by uid 99); 8 Jul 2005 15:11:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 08:11:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 08:11:38 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7280813E2005; Fri,  8 Jul 2005 11:11:31 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id B6A2913E2005
	for <java-user@lucene.apache.org>; Fri,  8 Jul 2005 11:11:21 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <4231956370232711469VHJQKBGMDI.tlai@trekspace.com>
References: <4231956370232711469VHJQKBGMDI.tlai@trekspace.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AC686C1B-DA5E-4332-B71E-AB039062E6DC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Help on the ParallelMultiSearcher.rewrite(Query) method
Date: Fri, 8 Jul 2005 11:11:23 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 8, 2005, at 10:32 AM, Terence Lai wrote:
> I have implemented the way as you described, and it is now working  
> probably. However, I have a concern on the performance of my  
> implementation.
>
> Since I am using parallelMultiSearcher to perform the search. I  
> have no idea on which index directory is corresponding to the  
> document that I am trying to highlight. The way my application  
> works is indicated as follows:

You can get the "index" of the Searchable using:

     int indexIndex = searcher.subSearcher(hits.id(position));   
(borrowed from lucenebook.com code)

Where position is the position in the Hits for the document.

> 1) user enter a keyword search criteria for the document contents
> 2) the system returns a list of document titles with hyper links to  
> drill down to the contents.
> 3) upon the user click the hyper link of the individual document,  
> the application will perform the highlight based on the search  
> criteria cached from Step (1)
>
> Because of this, the application does not keep track of which index  
> directory is associated with the search result document. Currently,  
> I have to make another search using the document primary key to  
> locate the searcher, and using this individual searcher to rewrite  
> my query. However, it invokes an extra search operation which may  
> be costly.

My recommendation is to encode in the drill-down hyperlink the index  
"index" and the document id within that index.

> Therefore, I originally tried to use the  
> ParallelMultiSearcher.rewrite() to convert the query into a  
> primitive form. Doing this way, I don't need to worry about which  
> index directory is belong to the index document. Is there any  
> reason why the method not being supported?

I'm not quite qualified to answer this fully, but rewriting a query  
may involve enumerating the terms and it needs to get those terms  
from an index.  With the MultiSearcher's, which index that would be  
is undefined.

> I am trying to think of an alternative way. Is that possible for me  
> to loop through all the individual searchers and perform an  
> IndexSearcher.rewrite with each searcher. At the end, I create a  
> BooleanQuery to join them together with BooleanQuery(subQuery,  
> false, false); Do you think this will work? Is there any issue if I  
> do this?

That seems unnecessary.  I think the approach of keeping track of  
which index a result came from will work for the situation you've  
described.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 15:13:48 2005
Return-Path: <java-user-return-15358-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2238 invoked from network); 8 Jul 2005 15:13:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 15:13:48 -0000
Received: (qmail 99028 invoked by uid 500); 8 Jul 2005 15:13:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99008 invoked by uid 500); 8 Jul 2005 15:13:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98995 invoked by uid 99); 8 Jul 2005 15:13:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 08:13:39 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.58] (HELO pop05.mail.atl.earthlink.net) (207.69.200.58)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 08:13:37 -0700
Received: from wamui-thinleaf.atl.sa.earthlink.net ([209.86.224.51])
	by pop05.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1DquXo-0003or-00
	for java-user@lucene.apache.org; Fri, 08 Jul 2005 11:13:36 -0400
Message-ID: <21280466.1120835616760.JavaMail.root@wamui-thinleaf.atl.sa.earthlink.net>
Date: Fri, 8 Jul 2005 11:13:36 -0400 (EDT)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Re: How to get the un-stemed word
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the reply.

It would be cool to have the type in the index.  Imagine if you had different types like
person, place, event or even subject, predicate, object.  It would greatly enhance the search capabilities of lucene.

Andrew

-----Original Message-----
From: Erik Hatcher <erik@ehatchersolutions.com>
Sent: Jul 8, 2005 11:01 AM
To: java-user@lucene.apache.org
Subject: Re: How to get the un-stemed word


On Jul 8, 2005, at 9:08 AM, Andrew Boyd wrote:

> Hi all,
>   I am using the snowball stemmer and for all my searches that  
> works fine.
> However,  I have a need to display the un-stemmed word after doing  
> some term vector analysis.
>
> I was thinking that I might insert the real word at the same  
> position as the stemed word but give
> the real word a type of say "r-word".  My question is how can I get  
> the r-word from the TermVectors?
>
> If there is not a way to get it from the TermVector is there a way  
> to search/retrieve by token type?

Currently token type is not stored in the index - it is used solely  
during analysis but does not go any further.

It would be quite cool for that type to carry into the index and be  
surfaced for searching.

You will need to develop another approach, perhaps using two  
different indexes, or two different fields.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 15:33:56 2005
Return-Path: <java-user-return-15359-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9832 invoked from network); 8 Jul 2005 15:33:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 15:33:51 -0000
Received: (qmail 41375 invoked by uid 500); 8 Jul 2005 15:33:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41348 invoked by uid 500); 8 Jul 2005 15:33:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41317 invoked by uid 99); 8 Jul 2005 15:33:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 08:33:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 08:33:37 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3AE5D13E2005; Fri,  8 Jul 2005 11:33:31 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 153FF13E2008
	for <java-user@lucene.apache.org>; Fri,  8 Jul 2005 11:32:53 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <21280466.1120835616760.JavaMail.root@wamui-thinleaf.atl.sa.earthlink.net>
References: <21280466.1120835616760.JavaMail.root@wamui-thinleaf.atl.sa.earthlink.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A2E42BCA-0C01-4C01-985C-7397085D6645@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: How to get the un-stemed word
Date: Fri, 8 Jul 2005 11:32:55 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 8, 2005, at 11:13 AM, Andrew Boyd wrote:
> It would be cool to have the type in the index.  Imagine if you had  
> different types like
> person, place, event or even subject, predicate, object.  It would  
> greatly enhance the search capabilities of lucene.

I completely concur.  It is for the gurus of the inner workings to  
discuss the feasibility of this sort of thing.  I believe Doug did  
add some kind of additional information, though I don't recall the  
specifics.  Could someone elaborate on the pros/cons to this sort of  
thing?

Subject, predicate, object.... right within my current work context  
of learning and building a system that leverages RDF heavily.

     Erik


>
> Andrew
>
> -----Original Message-----
> From: Erik Hatcher <erik@ehatchersolutions.com>
> Sent: Jul 8, 2005 11:01 AM
> To: java-user@lucene.apache.org
> Subject: Re: How to get the un-stemed word
>
>
> On Jul 8, 2005, at 9:08 AM, Andrew Boyd wrote:
>
>
>> Hi all,
>>   I am using the snowball stemmer and for all my searches that
>> works fine.
>> However,  I have a need to display the un-stemmed word after doing
>> some term vector analysis.
>>
>> I was thinking that I might insert the real word at the same
>> position as the stemed word but give
>> the real word a type of say "r-word".  My question is how can I get
>> the r-word from the TermVectors?
>>
>> If there is not a way to get it from the TermVector is there a way
>> to search/retrieve by token type?
>>
>
> Currently token type is not stored in the index - it is used solely
> during analysis but does not go any further.
>
> It would be quite cool for that type to carry into the index and be
> surfaced for searching.
>
> You will need to develop another approach, perhaps using two
> different indexes, or two different fields.
>
>      Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 15:45:11 2005
Return-Path: <java-user-return-15360-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13730 invoked from network); 8 Jul 2005 15:45:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 15:45:11 -0000
Received: (qmail 66136 invoked by uid 500); 8 Jul 2005 15:45:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66109 invoked by uid 500); 8 Jul 2005 15:45:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66096 invoked by uid 99); 8 Jul 2005 15:45:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 08:45:03 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.216] (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 08 Jul 2005 08:45:00 -0700
Received: (qmail 3771 invoked by uid 60001); 8 Jul 2005 15:44:58 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=h2wVlYizceCrMfiggxUOQSZYdvFPRUGryHcmMREjbbAOuUHdK6oCZftcOlqtNddZO99UYixPAvJ8i7xfwfx2PnOBgVHz8REfULD/hQcP1J7ucBglPheA+hpykt/m/gg5RjEESIeUutDqj1axSVK7AgPGtdrzk8dXuTnAkv+hjUs=  ;
Message-ID: <20050708154458.3769.qmail@web26005.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26005.mail.ukl.yahoo.com via HTTP; Fri, 08 Jul 2005 16:44:58 BST
Date: Fri, 8 Jul 2005 16:44:58 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: How to get the un-stemed word
To: java-user@lucene.apache.org, Andrew Boyd <Andrew.Boyd@bbtech.net>
In-Reply-To: <21280466.1120835616760.JavaMail.root@wamui-thinleaf.atl.sa.earthlink.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can get the unstemmed word by re-analysing the
(hopefully stored somewhere) text.
Look at the tokens emitted from the TokenStream and
when you get to the one that matches the stemmed form
you can use the token offset info to retrieve the
unstemmed form from the original text. 

Another option which avoids re-analysis is to store
the TermVector with TermPositionVector info enabled.
All the offsets are then stored in the index, rather
than computed on-the-fly by an Analyzer.

The highlighter in the sandbox can use both of these
approaches to get the original forms.

Cheers
Mark


	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 18:51:59 2005
Return-Path: <java-user-return-15361-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3778 invoked from network); 8 Jul 2005 18:51:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 18:51:59 -0000
Received: (qmail 44068 invoked by uid 500); 8 Jul 2005 18:51:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44037 invoked by uid 500); 8 Jul 2005 18:51:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44024 invoked by uid 99); 8 Jul 2005 18:51:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 11:51:51 -0700
X-ASF-Spam-Status: No, hits=0.8 required=10.0
	tests=FROM_ENDS_IN_NUMS,HTML_10_20,HTML_MESSAGE,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Muetze303@gmx.li designates 213.165.64.20 as permitted sender)
Received: from [213.165.64.20] (HELO mail.gmx.net) (213.165.64.20)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 08 Jul 2005 11:51:50 -0700
Received: (qmail invoked by alias); 08 Jul 2005 18:51:46 -0000
Received: from p54839548.dip0.t-ipconnect.de (EHLO [192.168.2.11]) [84.131.149.72]
  by mail.gmx.net (mp009) with SMTP; 08 Jul 2005 20:51:46 +0200
X-Authenticated: #12158616
Message-ID: <42CECB6A.8000407@gmx.li>
Date: Fri, 08 Jul 2005 20:52:26 +0200
From: Muetze303 <Muetze303@gmx.li>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: FileNotFoundException segments
References: <20050707222105.33013.qmail@web31208.mail.mud.yahoo.com>
In-Reply-To: <20050707222105.33013.qmail@web31208.mail.mud.yahoo.com>
Content-Type: multipart/alternative;
 boundary="------------040103060100030205030605"
X-Y-GMX-Trusted: 0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------040103060100030205030605
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit

Ok, your directory exists.

if ((indexFile = new File(indexDir)).exists() && indexFile.isDirectory())
{
exists = false;
System.out.println("Index does not exist");
}

now is  exists == false

at this point:

writer = new IndexWriter(indexFile, new StandardAnalyzer(), exists);

exists is still false. That means that your are trying to update an existing index. but there is no index inside your index. I think exists must be true so that a new index is created inside your directory!?

change the exists from false to true and everything should work fine ...


bib_lucene bib wrote:

>This is a new directory, created just before this step.
>I am uploading files to this directory. The file is getting uploaded fine.
>Any ideas?
>
>Muetze303 <Muetze303@gmx.li> wrote:
>probably the dir exists, but the index inside the dir is broken or not 
>complete and you are trying to use it instead of creating a new one?!
>
>bib_lucene bib wrote:
>
>  
>
>>Hi All
>>
>>can someone please help me on the error in my web application...
>>
>>I am using tomcat , the path for index dir is obtained from jsp page using application.getRealPath("/")+"download/compName"
>>
>>I want to index when the file gets uploaded.
>>I am getting this error...
>>
>>java.io.FileNotFoundException: C:\tomcat\webapps\myApp\download\compName\segmen
>>s (The system cannot find the file specified)
>>at java.io.RandomAccessFile.open(Native Method)
>>at java.io.RandomAccessFile.(RandomAccessFile.java:204)
>>at org.apache.lucene.store.FSInputStream$Descriptor.(FSDirectory.
>>ava:376)
>>at org.apache.lucene.store.FSInputStream.(FSDirectory.java:405)
>>at org.apache.lucene.store.FSDirectory.openFile(FSDirectory.java:268)
>>at org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:40)
>>at org.apache.lucene.index.IndexWriter$1.doBody(IndexWriter.java:233)
>>at org.apache.lucene.store.Lock$With.run(Lock.java:109)
>>at org.apache.lucene.index.IndexWriter.(IndexWriter.java:228)
>>at org.apache.lucene.index.IndexWriter.(IndexWriter.java:193)
>>at com.rs.upload.FileIndexer.indexDocument(FileIndexer.java:43)
>>
>>
>>This directory C:\tomcat\webapps\myApp\download\compName\ exist in the file system.
>>
>>Here is the program I wrote 
>>/*
>>* Created on Jul 6, 2005
>>*
>>* TODO To change the template for this generated file go to
>>* Window - Preferences - Java - Code Style - Code Templates
>>*/
>>package com.rs.upload;
>>import java.util.Hashtable;
>>import java.util.Iterator;
>>import java.io.*;
>>import org.apache.lucene.index.IndexWriter;
>>import org.apache.lucene.analysis.standard.*;
>>import org.apache.lucene.document.*;
>>/**
>>* @author
>>*
>>* This will index the documents as and when documents are uploaded.
>>* 
>>*/
>>public class FileIndexer {
>>
>>public static void indexDocument(String fileName, Hashtable fields, String indexDir) throws IOException{
>>
>>// Find if the index already exists
>>boolean exists = true;
>>File indexFile = null;
>>if ((indexFile = new File(indexDir)).exists() && indexFile.isDirectory())
>>{
>>exists = false;
>>System.out.println("Index does not exist");
>>}
>>else 
>>{
>>exists = true;
>>System.out.println("Index does exist");
>>}
>>System.out.println("Index Directory:"+indexDir);
>>IndexWriter writer = null;
>>try {
>>writer = new IndexWriter(indexFile, new StandardAnalyzer(), exists);
>>} catch (IOException e) {
>>// TODO Auto-generated catch block
>>e.printStackTrace();
>>}
>>writer.mergeFactor = 20;
>>
>>File candidateFile = new File(fileName);
>>indexFile(writer,candidateFile,fields);
>>}
>>
>>private static void indexFile(IndexWriter writer, File f, Hashtable fields) throws IOException{
>>
>>if( f.isHidden() || !f.exists() || !f.canRead()){
>>return;
>>}
>>
>>System.out.println("Indexing file :"+ f.getCanonicalPath());
>>Document doc = new Document();
>>doc.add(Field.Text("contents", new FileReader(f)));
>>doc.add(Field.Keyword("filename",f.getCanonicalPath()));
>>
>>Iterator it = fields.keySet().iterator();
>>String element = "";
>>while (it.hasNext()) {
>>element = (String)it.next();
>>doc.add(Field.Keyword(element,(String)fields.get(element)));
>>}
>>writer.addDocument(doc);
>>}
>>}
>>
>>
>>
>>---------------------------------
>>Sell on Yahoo! Auctions - No fees. Bid on great items.
>>
>>
>>    
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>		
>---------------------------------
> Sell on Yahoo! Auctions  - No fees. Bid on great items.
>  
>

--------------040103060100030205030605--

From java-user-return-15362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 19:40:07 2005
Return-Path: <java-user-return-15362-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76542 invoked from network); 8 Jul 2005 19:40:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 19:40:03 -0000
Received: (qmail 9177 invoked by uid 500); 8 Jul 2005 19:39:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9155 invoked by uid 500); 8 Jul 2005 19:39:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9142 invoked by uid 99); 8 Jul 2005 19:39:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 12:39:48 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.74] (HELO web31112.mail.mud.yahoo.com) (68.142.201.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 08 Jul 2005 12:39:45 -0700
Received: (qmail 61759 invoked by uid 60001); 8 Jul 2005 19:39:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=bEWY5rXKsm8Bz2raC9g1c1e+7boNSuoJI8av10ZBdf6YIoXmMB6SnJkkJQWdeUTx+Fw5mDJJQ+jGmSyebFHUls3FJ9vcGtrha4OyKWWPCtH+OzU6IAA5C2c39wPg73s8+P8Vw4151n7g6tL8IhWv5v2C5kvGteouatLDIb2rsu8=  ;
Message-ID: <20050708193944.61757.qmail@web31112.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31112.mail.mud.yahoo.com via HTTP; Fri, 08 Jul 2005 12:39:44 PDT
Date: Fri, 8 Jul 2005 12:39:44 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Search deadlocking under load
To: java-user@lucene.apache.org
In-Reply-To: <LJEJJJKMGLFKGPJJOLFJEEADIGAA.nbrackett@net-temps.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Nathan,

3) is the recommended usage.
Your index is on an NFS share, which means you are searching it over
the network.  Make it local, and you should see performance
improvements.  Local or remove, it makes sense that searches take
longer to execute, and the load goes up.  Yes, it shouldn't deadlock. 
You shouldn't need to synchronize access to IndexSearcher.
When your JVM locks up next time, kill it, get the thread dump, and
send it to the list, so we can try to remove the bottleneck, if that's
possible.

How many queries/second do you run, and what kinds of queries are they,
how big is your index and what kind of hardware (disks, RAM, CPU) are
you using?

Otis

--- Nathan Brackett <nbrackett@net-temps.com> wrote:

> Hey all,
> 
> We're looking to use Lucene as the back end to our website and we're
> running
> into an unusual deadlocking problem.
> 
> For testing purposes, we're just running one web server (threaded
> environment) against an index mounted on an NFS share. This machine
> performs
> searches only against this index so it's not being touched. We have
> tried a
> few different models so far:
> 
> 1) Pooling IndexSearcher objects: Occasionally we would run into
> OutOfMemory
> problems as we would not block if a request came through and all
> IndexSearchers were already checked out, we would just create a
> temporary
> one and then dispose of it once it was returned to the pool.
> 
> 2) Create a new IndexSearcher each time: Every request to search
> would
> create an IndexSearcher object. This quickly gave OutOfMemory errors,
> even
> when we would close them out directly after.
> 
> 3) Use a global IndexSearcher: This is the model we're working with
> now. The
> model holds up fine under low-moderate load and is, in fact, much
> faster at
> searching (probably due to some caching mechanism). Under heavy load
> though,
> the CPU will spike up to 99% and never come back down until we kill
> -9 the
> process. Also, as you ramp the load, we've discovered that search
> times go
> up as well. Searches will generally come back after 40ms, but as the
> load
> goes up the searches don't come back for up to 20 seconds.
> 
> We've been attempting to find where the problem is for the last week
> with no
> luck. Our index is optimized, so there is only one file. Do we need
> to
> synchronize access to the global IndexSearcher so that only one
> search can
> run at a time? That poses a bit of a problem as if a particular
> search takes
> a long time, all others will wait. This problem does not look like an
> OutOrMemory error because the memory usage when the spike occurs is
> usually
> in the range of 150meg used with a ceiling of 650meg. Anyone else
> experiencing any problems like this or have any idea where we should
> be
> looking? Thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 19:45:50 2005
Return-Path: <java-user-return-15363-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88303 invoked from network); 8 Jul 2005 19:45:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 19:45:49 -0000
Received: (qmail 15932 invoked by uid 500); 8 Jul 2005 19:45:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15912 invoked by uid 500); 8 Jul 2005 19:45:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15899 invoked by uid 99); 8 Jul 2005 19:45:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 12:45:42 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.40] (HELO web31107.mail.mud.yahoo.com) (68.142.200.40)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 08 Jul 2005 12:45:39 -0700
Received: (qmail 62111 invoked by uid 60001); 8 Jul 2005 19:45:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Ng1XwAqujeHiFCRuwA87k1q+Kfo42rbPGjAjA1Q1EAF5IHU1X7aAXLoZIoQyrXbksfeyJf9koWF0vqe7FDbcCbjm1AmYU7BeEnkABkYwlwdDispt4og1XK8ib/oD+84YyUCzNt4lvZcM9M4+2Jieew+b+0Y2AqU+f5zTMF/qqV8=  ;
Message-ID: <20050708194537.62109.qmail@web31107.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31107.mail.mud.yahoo.com via HTTP; Fri, 08 Jul 2005 12:45:37 PDT
Date: Fri, 8 Jul 2005 12:45:37 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Loading large index into RAM
To: java-user@lucene.apache.org
In-Reply-To: <48b7084905070807203106be22@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes, you could mount your memory as a ram disk (ramfs type under Linux)
partition.  This was mentioned on this list 1+ years ago.

Otis


--- Cheolgoo Kang <appler@gmail.com> wrote:

> How about using RAM disk and FSDirectory? It would be not so fast as
> RAMDirectory,
> but will be fast enough.
> 
> On 7/8/05, Chris Lamprecht <clamprecht@gmail.com> wrote:
> > If you're under an x86_64 machine (AMD opteron, for instance), you
> may
> > be able to set your JVM heap this large.  But if you have 6GB RAM,
> you
> > might try keeping your JVM small (under 1GB), and letting linux's
> > filesystem cache do the work.  Lucene searches are often CPU-bound
> > (during the search phase anyway) and loading into a RAMDirectory
> won't
> > help here.  It's the second "phase" of search -- pulling all the
> > lucene Documents from disk -- that's often I/O bound, and can
> benefit
> > from being in RAM.
> > 
> > -chris
> > 
> > On 8 Jul 2005 00:04:27 -0000, yahootintin.11533894@bloglines.com
> > <yahootintin.11533894@bloglines.com> wrote:
> > > Is it possible to use a RAMDirectory to load a 5 GB index into
> RAM on Linux?
> > >  I have access to a server with 6 GB of RAM and will try it next
> week but
> > > I've heard that Java on Linux may only support up to 2 GB of RAM
> per process.
> > >  Anyone already tried this?
> > >
> > > Thanks.
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> -- 
> Regards,
> Cheolgoo Kang
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 20:05:48 2005
Return-Path: <java-user-return-15364-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2666 invoked from network); 8 Jul 2005 20:05:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 20:05:47 -0000
Received: (qmail 40043 invoked by uid 500); 8 Jul 2005 20:05:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40022 invoked by uid 500); 8 Jul 2005 20:05:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40009 invoked by uid 99); 8 Jul 2005 20:05:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 13:05:40 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_40_50,HTML_MESSAGE,NO_REAL_NAME,RCVD_BY_IP
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.10.150.71] (HELO web01-nyc.clicvu.com) (209.10.150.71)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 13:05:38 -0700
Received: from [192.168.0.71] by web01-nyc.clicvu.com
          (Post.Office MTA v3.5.3 release 223 ID# 0-64039U1000L100S0V35)
          with SMTP id com for <java-user@lucene.apache.org>;
          Fri, 8 Jul 2005 16:01:36 -0400
Received: by rproxy.gmail.com with SMTP id c16so435325rne
        for <java-user@lucene.apache.org                                                                                                                                                                                                                                    >; Fri, 08 Jul 2005 13:04:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:references;
        b=GdETLJ9os18aFvZ8WatH5U4GMYojeNPMVZMHM46t/oDNXIM1MKKe6B+HfaEkEoRES8tsTWdzyo53Mu6n+p+gpmKWpbSWJ1yBqWGmvvA7vqgG/KtlMnfDJkyqKSVN/RuC/6kRxaYMfC46o3OKsHIqdRUP7Qh/+J84IYEYkTryFFE=
Received: by 10.38.149.2 with SMTP id w2mr1818571rnd;
        Fri, 08 Jul 2005 13:04:50 -0700 (PDT)
Received: by 10.38.24.73 with HTTP; Fri, 8 Jul 2005 13:04:50 -0700 (PDT)
Message-ID: <454006f5050708130478b0cb9e@mail.gmail.com>
Date: Fri, 8 Jul 2005 16:04:50 -0400
From: roy-lucene-user@xemaps.com
Reply-To: Roy Rim <roy-lucene-user@xemaps.com>
To: java-user@lucene.apache.org                                                                                                                                                                                                                                    
Subject: Re: Lucene faster on JDK 1.5?
In-Reply-To: <20050708044051.66373.qmail@web31106.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: multipart/alternative; 
	boundary="----=_Part_1263_17744917.1120853090341"
References: <1120780971.2181412914.19856.sendItem@bloglines.com>
	 <20050708044051.66373.qmail@web31106.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_Part_1263_17744917.1120853090341
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

This might be a good time to ask another question. Are there any advantages=
=20
to lucene using the java.nio package?

Roy

On 7/8/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
>=20
>=20
> Nothing significant, but I've been using 1.5 on Simpy.com<http://Simpy.co=
m>(lots of
> Lucene behind it) for over a year now, and I'm happy with it.
>=20
> Otis
>=20
>=20
> --- yahootintin.11533894@bloglines.com wrote:
>=20
> > Are people seeing a significant speed performance with Lucene when
> > they upgrade
> > to JDK 1.5?
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

------=_Part_1263_17744917.1120853090341--

From java-user-return-15365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 08 21:07:27 2005
Return-Path: <java-user-return-15365-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18185 invoked from network); 8 Jul 2005 21:07:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 8 Jul 2005 21:07:24 -0000
Received: (qmail 19806 invoked by uid 500); 8 Jul 2005 21:07:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19640 invoked by uid 500); 8 Jul 2005 21:07:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19627 invoked by uid 99); 8 Jul 2005 21:07:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 14:07:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [12.154.210.214] (HELO rectangular.com) (12.154.210.214)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 14:07:15 -0700
Received: from [64.122.192.183] (helo=[192.168.0.7])
	by rectangular.com with esmtpa (Exim 4.44)
	id 1Dr06L-000Ir9-3F
	for java-user@lucene.apache.org; Fri, 08 Jul 2005 14:09:37 -0700
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050708154458.3769.qmail@web26005.mail.ukl.yahoo.com>
References: <20050708154458.3769.qmail@web26005.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <2A4156B3-84DD-494F-8392-20C8BD49931C@rectangular.com>
Content-Transfer-Encoding: 7bit
From: Marvin Humphrey <marvin@rectangular.com>
Subject: Re: How to get the un-stemed word
Date: Fri, 8 Jul 2005 14:07:12 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 8, 2005, at 8:44 AM, mark harwood wrote:

> You can get the unstemmed word by re-analysing the
> (hopefully stored somewhere) text.
> Look at the tokens emitted from the TokenStream and
> when you get to the one that matches the stemmed form
> you can use the token offset info to retrieve the
> unstemmed form from the original text.

Wouldn't that fall down if you had two distinct terms which produce  
the same string when stemmed?

Best,

Marvin Humphrey
Rectangular Research
http://www.rectangular.com/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 09 01:23:15 2005
Return-Path: <java-user-return-15366-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72841 invoked from network); 9 Jul 2005 01:23:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2005 01:23:15 -0000
Received: (qmail 21026 invoked by uid 500); 9 Jul 2005 01:23:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21007 invoked by uid 500); 9 Jul 2005 01:23:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20987 invoked by uid 99); 9 Jul 2005 01:23:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 18:23:08 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_30_40,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 18:23:05 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8AA8C13E2007; Fri,  8 Jul 2005 21:22:57 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 164BD13E2005
	for <java-user@lucene.apache.org>; Fri,  8 Jul 2005 21:22:31 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <91ED50165667D211BDB900A0240B1929021EB1E7@ls.intranet>
References: <91ED50165667D211BDB900A0240B1929021EB1E7@ls.intranet>
Content-Type: multipart/alternative; boundary=Apple-Mail-1-831032750
Message-Id: <0C79FCD3-0C61-4F2E-855A-F3D426C17967@ehatchersolutions.com>
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: search that span over consecutive documents
Date: Fri, 8 Jul 2005 21:22:33 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00,
	HTML_30_40,HTML_MESSAGE autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-1-831032750
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed


On Jul 8, 2005, at 2:57 AM, Daniel Moldovan wrote:
> My application must index a lot of books that are stored in xml files.
>
> Each xml file represents a page of the book and this way each page  
> becomes a
> lucene Document.
>
> Each page is organized in different sections and finally each section
> contains lines.
>
>
>
> What I need to do is give the user the possibility to search for a  
> phrase
> that starts at the
> and of a page and continues on the next page. The span should have  
> some
> limits, let's say,  6 words on each page.
>
> Does any one experienced this kind of search? Please share you  
> knowledge if
> you did.

You're lucky you get to represent your data so hierarchically!  Try  
getting scholars to represent a book in such a fashion!!!  (I'm  
dealing with scholarly works in XML format and sections do not fall  
_within_ pages, they can span across pages).

In this case, one field of your document should probably index a page  
+ 6 words on either side of it from the previous and next pages.   
Maybe you also have a field that represents only the page as well.   
Perhaps something at query time decides which field to search?  Maybe  
all phrase queries use the overlapped field and other query types use  
the single page field?

     Erik




--Apple-Mail-1-831032750--

From java-user-return-15367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 09 06:44:25 2005
Return-Path: <java-user-return-15367-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32537 invoked from network); 9 Jul 2005 06:44:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2005 06:44:25 -0000
Received: (qmail 62542 invoked by uid 500); 9 Jul 2005 06:44:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 62521 invoked by uid 500); 9 Jul 2005 06:44:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 62507 invoked by uid 99); 9 Jul 2005 06:44:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 23:44:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 23:44:15 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id C9011159F9E
	for <java-user@lucene.apache.org>; Sat,  9 Jul 2005 16:44:09 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id B830B64007
	for <java-user@lucene.apache.org>; Sat,  9 Jul 2005 16:44:09 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 10865-01-5 for <java-user@lucene.apache.org>;
 Sat,  9 Jul 2005 16:44:07 +1000 (EST)
Received: from [192.168.1.100] (CPE-60-224-158-59.vic.bigpond.net.au [60.224.158.59])
	by herald.aconex.com (Postfix) with ESMTP id 17B6664002
	for <java-user@lucene.apache.org>; Sat,  9 Jul 2005 16:44:07 +1000 (EST)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050708193944.61757.qmail@web31112.mail.mud.yahoo.com>
References: <20050708193944.61757.qmail@web31112.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <73809823-CE46-406E-A142-6C4C0EA1E0E4@aconex.com>
Content-Transfer-Encoding: 7bit
From: Paul Smith <psmith@aconex.com>
Subject: Index Partitioning ( was Re: Search deadlocking under load)
Date: Sat, 9 Jul 2005 16:44:08 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Nathan, first apologies for somewhat hijacking your thread, but I  
believe my question to be very related.

Nathan's Scenario 1 is the one we're effectively employing (or in the  
process of setting up).  Rather than 1 Index To Rule Them All, I have  
decided to partition the index structure.  Users tend to focus on a  
Project concept at a time, and within each Project, they have  
Documents and Mail (and some other types we'll eventually index, we  
call them 'entities' to be generic).  So I am creating an Index for  
each Project-Entity.  We should still be able to search across all  
entities  for a given project (or even for all) by using  
MultiSearcher.  However I believed it would be faster to have  
separate indices (much smaller index to search).

Otis (and anyone else), are you suggesting this design is not  
something we should employ?

Nathan's point about pooling Searchers is something that we also  
addressed by a LRU cache mechanism.  In testing we also found that  
there was an upper limit on the number of IndexSearchers that can be  
open at one time, and so I can see why he suffered OOM with creating  
temporary searchers for those requests outside the current pool-set.   
However his 2nd point is interesting that creating a new index each  
time eventually suffered OutOfMemory (even though he's closing them)  
is a worry.   Is this because an IndexSearcher can be closed, but the  
underlying IndexReader is not automatically closed?

Appreciate any thoughts on this.  I'd rather know now while I have  
the opportunity to change the design than later when in production..  :)

cheers,

Paul Smith

On 09/07/2005, at 5:39 AM, Otis Gospodnetic wrote:

> Nathan,
>
> 3) is the recommended usage.
> Your index is on an NFS share, which means you are searching it over
> the network.  Make it local, and you should see performance
> improvements.  Local or remove, it makes sense that searches take
> longer to execute, and the load goes up.  Yes, it shouldn't deadlock.
> You shouldn't need to synchronize access to IndexSearcher.
> When your JVM locks up next time, kill it, get the thread dump, and
> send it to the list, so we can try to remove the bottleneck, if that's
> possible.
>
> How many queries/second do you run, and what kinds of queries are  
> they,
> how big is your index and what kind of hardware (disks, RAM, CPU) are
> you using?
>
> Otis
>
> --- Nathan Brackett <nbrackett@net-temps.com> wrote:
>
>
>> Hey all,
>>
>> We're looking to use Lucene as the back end to our website and we're
>> running
>> into an unusual deadlocking problem.
>>
>> For testing purposes, we're just running one web server (threaded
>> environment) against an index mounted on an NFS share. This machine
>> performs
>> searches only against this index so it's not being touched. We have
>> tried a
>> few different models so far:
>>
>> 1) Pooling IndexSearcher objects: Occasionally we would run into
>> OutOfMemory
>> problems as we would not block if a request came through and all
>> IndexSearchers were already checked out, we would just create a
>> temporary
>> one and then dispose of it once it was returned to the pool.
>>
>> 2) Create a new IndexSearcher each time: Every request to search
>> would
>> create an IndexSearcher object. This quickly gave OutOfMemory errors,
>> even
>> when we would close them out directly after.
>>
>> 3) Use a global IndexSearcher: This is the model we're working with
>> now. The
>> model holds up fine under low-moderate load and is, in fact, much
>> faster at
>> searching (probably due to some caching mechanism). Under heavy load
>> though,
>> the CPU will spike up to 99% and never come back down until we kill
>> -9 the
>> process. Also, as you ramp the load, we've discovered that search
>> times go
>> up as well. Searches will generally come back after 40ms, but as the
>> load
>> goes up the searches don't come back for up to 20 seconds.
>>
>> We've been attempting to find where the problem is for the last week
>> with no
>> luck. Our index is optimized, so there is only one file. Do we need
>> to
>> synchronize access to the global IndexSearcher so that only one
>> search can
>> run at a time? That poses a bit of a problem as if a particular
>> search takes
>> a long time, all others will wait. This problem does not look like an
>> OutOrMemory error because the memory usage when the spike occurs is
>> usually
>> in the range of 150meg used with a ceiling of 650meg. Anyone else
>> experiencing any problems like this or have any idea where we should
>> be
>> looking? Thanks.
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 09 06:45:09 2005
Return-Path: <java-user-return-15368-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32664 invoked from network); 9 Jul 2005 06:45:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2005 06:45:09 -0000
Received: (qmail 63623 invoked by uid 500); 9 Jul 2005 06:45:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63602 invoked by uid 500); 9 Jul 2005 06:45:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63589 invoked by uid 99); 9 Jul 2005 06:45:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 23:45:03 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.45] (HELO smtpout.mac.com) (17.250.248.45)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 08 Jul 2005 23:45:01 -0700
Received: from mac.com (smtpin08-en2 [10.13.10.153])
	by smtpout.mac.com (Xserve/8.12.11/smtpout11/MantshX 4.0) with ESMTP id j696ixlv009728
	for <java-user@lucene.apache.org>; Fri, 8 Jul 2005 23:44:59 -0700 (PDT)
Received: from [127.0.0.1] (66-214-154-12.mpk-mres.charterpipeline.net [66.214.154.12])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin08/MantshX 4.0) with ESMTP id j696iwCi002430
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 8 Jul 2005 23:44:59 -0700 (PDT)
Message-ID: <42CF7269.7000309@mac.com>
Date: Fri, 08 Jul 2005 23:44:57 -0700
From: "xing@mac.com" <xing@mac.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Loading FS index into RAM index
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I was reading the Lucene book and came across the part where the author 
detailed how to write index to ram dir and then flush it to file dir.

That turned on a light bulb and I want to do bidirectional index 
loading. Build index in ram, store in file for backup. Then if I have to 
shutdown the process, I can then ask it to reload the index from file 
back into ram for searching duties.

Unforunately my code below which tries to load fs index into ram fails 
right at "ram_writer.addIndexes(fs_dir);" with io exception. When I 
check "/tmp/lucene-index/", which contains a proper index,  after the io 
exception everything was erased and the directory was empty.

Thanks for any pointers.

Xing


try {
		System.out.println("start");
		//IndexWriter file_writer = new IndexWriter("/tmp/lucene-index/", new 
StandardAnalyzer(), true);
		IndexWriter ram_writer = new IndexWriter(new RAMDirectory(), new 
StandardAnalyzer(), true);
		System.out.println("loaded ram_writer");
		
		Directory[] fs_dir = new Directory[1];
		
		fs_dir[0] = FSDirectory.getDirectory("/tmp/lucene-index/", true);
		System.out.println("loaded fs_dir");
		
		ram_writer.addIndexes(fs_dir);
		System.out.println("load fs_dir into ram");
		
		ram_writer.optimize();
		System.out.println("optimize ram index");
		
		ram_writer.close();
		//index_writer.close();
		
		System.out.println("good");
		}
		catch (IOException ex) {
			System.out.println("io exception");
			
		}	

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 09 07:24:16 2005
Return-Path: <java-user-return-15369-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45448 invoked from network); 9 Jul 2005 07:24:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2005 07:24:16 -0000
Received: (qmail 82306 invoked by uid 500); 9 Jul 2005 07:24:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81598 invoked by uid 500); 9 Jul 2005 07:24:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81584 invoked by uid 99); 9 Jul 2005 07:24:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Jul 2005 00:24:10 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.70] (HELO smtpout.mac.com) (17.250.248.70)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Jul 2005 00:24:07 -0700
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (Xserve/8.12.11/smtpout13/MantshX 4.0) with ESMTP id j697O5JX021138
	for <java-user@lucene.apache.org>; Sat, 9 Jul 2005 00:24:05 -0700 (PDT)
Received: from [127.0.0.1] (66-214-154-12.mpk-mres.charterpipeline.net [66.214.154.12])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id j697O3FB029359
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sat, 9 Jul 2005 00:24:04 -0700 (PDT)
Message-ID: <42CF7B92.2080408@mac.com>
Date: Sat, 09 Jul 2005 00:24:02 -0700
From: "xing@mac.com" <xing@mac.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Loading FS index into RAM index
References: <42CF7269.7000309@mac.com>
In-Reply-To: <42CF7269.7000309@mac.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Never mind. I need to read the API more closely. 
RAMDirectory(directory) is built into lucene and already does the trick 
with just one line of code.

xing@mac.com wrote:
> I was reading the Lucene book and came across the part where the author 
> detailed how to write index to ram dir and then flush it to file dir.
> 
> That turned on a light bulb and I want to do bidirectional index 
> loading. Build index in ram, store in file for backup. Then if I have to 
> shutdown the process, I can then ask it to reload the index from file 
> back into ram for searching duties.
> 
> Unforunately my code below which tries to load fs index into ram fails 
> right at "ram_writer.addIndexes(fs_dir);" with io exception. When I 
> check "/tmp/lucene-index/", which contains a proper index,  after the io 
> exception everything was erased and the directory was empty.
> 
> Thanks for any pointers.
> 
> Xing
> 
> 
> try {
>         System.out.println("start");
>         //IndexWriter file_writer = new 
> IndexWriter("/tmp/lucene-index/", new StandardAnalyzer(), true);
>         IndexWriter ram_writer = new IndexWriter(new RAMDirectory(), new 
> StandardAnalyzer(), true);
>         System.out.println("loaded ram_writer");
>        
>         Directory[] fs_dir = new Directory[1];
>        
>         fs_dir[0] = FSDirectory.getDirectory("/tmp/lucene-index/", true);
>         System.out.println("loaded fs_dir");
>        
>         ram_writer.addIndexes(fs_dir);
>         System.out.println("load fs_dir into ram");
>        
>         ram_writer.optimize();
>         System.out.println("optimize ram index");
>        
>         ram_writer.close();
>         //index_writer.close();
>        
>         System.out.println("good");
>         }
>         catch (IOException ex) {
>             System.out.println("io exception");
>            
>         }   
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 09 18:42:38 2005
Return-Path: <java-user-return-15370-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64518 invoked from network); 9 Jul 2005 18:42:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2005 18:42:38 -0000
Received: (qmail 40927 invoked by uid 500); 9 Jul 2005 18:42:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40805 invoked by uid 500); 9 Jul 2005 18:42:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40771 invoked by uid 99); 9 Jul 2005 18:42:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Jul 2005 11:42:20 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.44] (HELO smtpout.mac.com) (17.250.248.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Jul 2005 11:42:18 -0700
Received: from mac.com (smtpin08-en2 [10.13.10.153])
	by smtpout.mac.com (Xserve/8.12.11/smtpout12/MantshX 4.0) with ESMTP id j69IgGC8029448
	for <java-user@lucene.apache.org>; Sat, 9 Jul 2005 11:42:16 -0700 (PDT)
Received: from [127.0.0.1] (66-214-154-12.mpk-mres.charterpipeline.net [66.214.154.12])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin08/MantshX 4.0) with ESMTP id j69IgBfV025596
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sat, 9 Jul 2005 11:42:14 -0700 (PDT)
Message-ID: <42D01A81.3030209@mac.com>
Date: Sat, 09 Jul 2005 11:42:09 -0700
From: "xing@mac.com" <xing@mac.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Problem with multiple values to a single field.
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I need to index multiple values to a single document field, such as 
category. An entry can be associated with 2 or more categories. When the 
search is performed, the user can opt to select result from documents 
containing only one category value. What would be the best way to go 
about this?

Does lucene allow me to use the doc.add() method twice for the same 
field and store two different values?

Thanks a bunch.

Xing

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 09 20:49:17 2005
Return-Path: <java-user-return-15371-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86454 invoked from network); 9 Jul 2005 20:49:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 9 Jul 2005 20:49:17 -0000
Received: (qmail 5082 invoked by uid 500); 9 Jul 2005 20:49:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5053 invoked by uid 500); 9 Jul 2005 20:49:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5038 invoked by uid 99); 9 Jul 2005 20:49:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Jul 2005 13:49:12 -0700
X-ASF-Spam-Status: No, hits=1.9 required=10.0
	tests=RCVD_BY_IP,RCVD_IN_BL_SPAMCOP_NET,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.198 as permitted sender)
Received: from [64.233.184.198] (HELO wproxy.gmail.com) (64.233.184.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Jul 2005 13:49:09 -0700
Received: by wproxy.gmail.com with SMTP id i25so633216wra
        for <java-user@lucene.apache.org>; Sat, 09 Jul 2005 13:49:08 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=QLIQmI56h1KkCQinT8nqWVzvRA0mFMxNGhfCvpU5Rq/gXcwSngWIJ+FccAykKjZJysz/X+KROyYokhq6yXu5wcPWYSsxfJF1aYKYxG1Y2FYRmEg/0bYOQKiXaK/d16v/RABFBI+zmlBbYf57V73sFh8VNLRDFSRZCXLixl+HreM=
Received: by 10.54.26.56 with SMTP id 56mr2797399wrz;
        Sat, 09 Jul 2005 13:49:08 -0700 (PDT)
Received: by 10.54.24.34 with HTTP; Sat, 9 Jul 2005 13:49:08 -0700 (PDT)
Message-ID: <6e3ae63105070913494d1be387@mail.gmail.com>
Date: Sat, 9 Jul 2005 13:49:08 -0700
From: Chris Lu <chris.lu@gmail.com>
Reply-To: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Problem with multiple values to a single field.
In-Reply-To: <42D01A81.3030209@mac.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42D01A81.3030209@mac.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Right, Just add it twice, your document will be linked to the two categorie=
s.

Chris Lu
----
Free-Text Search on Any Database
http://www.dbsight.net

On 7/9/05, xing@mac.com <xing@mac.com> wrote:
> I need to index multiple values to a single document field, such as
> category. An entry can be associated with 2 or more categories. When the
> search is performed, the user can opt to select result from documents
> containing only one category value. What would be the best way to go
> about this?
>=20
> Does lucene allow me to use the doc.add() method twice for the same
> field and store two different values?
>=20
> Thanks a bunch.
>=20
> Xing
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Chris Lu
---------------------
Full-Text Search on Any Database
http://www.dbsight.net

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 10 04:40:48 2005
Return-Path: <java-user-return-15372-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53355 invoked from network); 10 Jul 2005 04:40:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2005 04:40:47 -0000
Received: (qmail 5442 invoked by uid 500); 10 Jul 2005 04:40:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5417 invoked by uid 500); 10 Jul 2005 04:40:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5404 invoked by uid 99); 10 Jul 2005 04:40:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 09 Jul 2005 21:40:40 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.227] (HELO web31210.mail.mud.yahoo.com) (68.142.200.227)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 09 Jul 2005 21:40:36 -0700
Received: (qmail 51927 invoked by uid 60001); 10 Jul 2005 04:40:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Ab9wt3MEINEZZUdYpMUHg7RwIKkvhk4dniUvfr6LQcwNk9zBz0iX//bRUVFzwnAnP5I0gt+KudW8Eb13Ru6soMrhrLeCH4BUhPevXer8gXipEvdV6+ZoLWmuaaHaqlKx6LvzwShAz2y07hJk4+hlYaPNFRT0SwO3fH1LzHRDvM8=  ;
Message-ID: <20050710044035.51924.qmail@web31210.mail.mud.yahoo.com>
Received: from [68.126.184.230] by web31210.mail.mud.yahoo.com via HTTP; Sat, 09 Jul 2005 21:40:35 PDT
Date: Sat, 9 Jul 2005 21:40:35 -0700 (PDT)
From: bib_lucene bib <bib_lucene@yahoo.com>
Subject: Query -- how to write
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1319845319-1120970435=:51437"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1319845319-1120970435=:51437
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Hi All
 
I am indexing a document like this...
 
Document doc = new Document();
  doc.add(Field.Text("contents", new FileReader(f)));
  doc.add(Field.Text("filename",f.getCanonicalPath()));
  Iterator it = fields.keySet().iterator();
  String element = "";
     while (it.hasNext()) {
        element =  (String)it.next();
        doc.add(Field.Text(element,(String)fields.get(element)));  // also tried field.keyword
     }
     writer.addDocument(doc);
     writer.optimize();
     writer.close();
 
So the lucene doc has the text of the uploaded doc and also some params like author, date, etc.
 
When I write my search 

String queryStr = request.getParameter("query");

File indexDir = new File("c:/luceneindex");

Directory fsDir = FSDirectory.getDirectory(indexDir,false);

IndexSearcher is = new IndexSearcher(fsDir);

Query query = QueryParser.parse(queryStr,"contents", new StandardAnalyzer());

Hits hits = is.search(query);

Not surprisingly I get a match only if there is a word in the contents of the document.

Question: If my query should be able to search not only document contents but also the other data added such as author how do I do that.

Please let me know.

Also if I can get a pointer this type of info I will really appreciate it.

Thanks

bib/-


		
---------------------------------
Yahoo! Mail
 Stay connected, organized, and protected. Take the tour
--0-1319845319-1120970435=:51437--

From java-user-return-15373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 10 10:09:21 2005
Return-Path: <java-user-return-15373-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1259 invoked from network); 10 Jul 2005 10:09:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2005 10:09:21 -0000
Received: (qmail 31682 invoked by uid 500); 10 Jul 2005 10:09:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31657 invoked by uid 500); 10 Jul 2005 10:09:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31643 invoked by uid 99); 10 Jul 2005 10:09:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jul 2005 03:09:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jul 2005 03:09:13 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E6FAD13E2007; Sun, 10 Jul 2005 06:09:05 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 2859113E2005
	for <java-user@lucene.apache.org>; Sun, 10 Jul 2005 06:08:36 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050710044035.51924.qmail@web31210.mail.mud.yahoo.com>
References: <20050710044035.51924.qmail@web31210.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5DB8BB95-C3F2-44A4-90EA-BF32E112D9DC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query -- how to write
Date: Sun, 10 Jul 2005 06:08:38 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 10, 2005, at 12:40 AM, bib_lucene bib wrote:

> Hi All
>
> I am indexing a document like this...
>
> Document doc = new Document();
>   doc.add(Field.Text("contents", new FileReader(f)));
>   doc.add(Field.Text("filename",f.getCanonicalPath()));
>   Iterator it = fields.keySet().iterator();
>   String element = "";
>      while (it.hasNext()) {
>         element =  (String)it.next();
>         doc.add(Field.Text(element,(String)fields.get 
> (element)));  // also tried field.keyword
>      }
>      writer.addDocument(doc);
>      writer.optimize();
>      writer.close();
>
> So the lucene doc has the text of the uploaded doc and also some  
> params like author, date, etc.
>
> When I write my search
>
> String queryStr = request.getParameter("query");
>
> File indexDir = new File("c:/luceneindex");
>
> Directory fsDir = FSDirectory.getDirectory(indexDir,false);
>
> IndexSearcher is = new IndexSearcher(fsDir);
>
> Query query = QueryParser.parse(queryStr,"contents", new  
> StandardAnalyzer());
>
> Hits hits = is.search(query);
>
> Not surprisingly I get a match only if there is a word in the  
> contents of the document.
>
> Question: If my query should be able to search not only document  
> contents but also the other data added such as author how do I do  
> that.

There are two common options here:

     - MultiFieldQueryParser

     - Use an aggregate field for all searchable text

I personally prefer the aggregate field approach as it makes the  
queries much simpler under the covers.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 10 23:15:48 2005
Return-Path: <java-user-return-15374-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30995 invoked from network); 10 Jul 2005 23:15:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2005 23:15:48 -0000
Received: (qmail 74613 invoked by uid 500); 10 Jul 2005 23:15:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74569 invoked by uid 500); 10 Jul 2005 23:15:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74556 invoked by uid 99); 10 Jul 2005 23:15:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jul 2005 16:15:42 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jul 2005 16:15:39 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 0DC065B7F1; Sun, 10 Jul 2005 16:15:31 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 032087F460
	for <java-user@lucene.apache.org>; Sun, 10 Jul 2005 16:15:31 -0700 (PDT)
Date: Sun, 10 Jul 2005 16:15:30 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Index Partitioning ( was Re: Search deadlocking under load)
In-Reply-To: <73809823-CE46-406E-A142-6C4C0EA1E0E4@aconex.com>
Message-ID: <Pine.LNX.4.58.0507101605250.22002@hal.rescomp.berkeley.edu>
References: <20050708193944.61757.qmail@web31112.mail.mud.yahoo.com>
 <73809823-CE46-406E-A142-6C4C0EA1E0E4@aconex.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Nathan's point about pooling Searchers is something that we also
: addressed by a LRU cache mechanism.  In testing we also found that

Generally speaking, you only ever need one active Searcher, which all of
your threads should be able to use.  (Of course, Nathan says that in his
code base, doing this causes his JVM to freeze up, but I've never seen
this myself).

I say one "active" Searcher because it might make sense in your
application to open a new searcher after new documents have been added, do
some searches on that new Searcher to "warm" FieldCache for ssorting, and
then close the old searcher and make the new Searcher available to all of
your query threads.

: However his 2nd point is interesting that creating a new index each
: time eventually suffered OutOfMemory (even though he's closing them)
: is a worry.   Is this because an IndexSearcher can be closed, but the
: underlying IndexReader is not automatically closed?

As I understand it, the general rule is: if you call IndexReader.open, you
better call .close() on that reader.  If you construct and IndexSearcher
using a Directory or a path, then calling .close() on the searcher will
take care of closing the reader -- but if your code look like this...

    Searcher s = new IndexSearcher(IndexReader.open(foo))

...then you are screwed, because nothing will ever close that reader and
free it's resources.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 10 23:25:06 2005
Return-Path: <java-user-return-15375-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32799 invoked from network); 10 Jul 2005 23:25:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 10 Jul 2005 23:25:06 -0000
Received: (qmail 81689 invoked by uid 500); 10 Jul 2005 23:25:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81663 invoked by uid 500); 10 Jul 2005 23:25:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81648 invoked by uid 99); 10 Jul 2005 23:25:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jul 2005 16:25:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jul 2005 16:24:58 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id 3001E159FAD
	for <java-user@lucene.apache.org>; Mon, 11 Jul 2005 09:24:53 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 185B264007
	for <java-user@lucene.apache.org>; Mon, 11 Jul 2005 09:24:53 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 06749-01-6 for <java-user@lucene.apache.org>;
 Mon, 11 Jul 2005 09:24:52 +1000 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by herald.aconex.com (Postfix) with ESMTP id 28F9064002
	for <java-user@lucene.apache.org>; Mon, 11 Jul 2005 09:24:52 +1000 (EST)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <Pine.LNX.4.58.0507101605250.22002@hal.rescomp.berkeley.edu>
References: <20050708193944.61757.qmail@web31112.mail.mud.yahoo.com> <73809823-CE46-406E-A142-6C4C0EA1E0E4@aconex.com> <Pine.LNX.4.58.0507101605250.22002@hal.rescomp.berkeley.edu>
Content-Type: multipart/alternative; boundary=Apple-Mail-9-996777276
Message-Id: <0E62ADC4-D7FC-4CF1-B691-A464567BAEC4@aconex.com>
From: Paul Smith <psmith@aconex.com>
Subject: Re: Index Partitioning ( was Re: Search deadlocking under load)
Date: Mon, 11 Jul 2005 09:24:57 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-9-996777276
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed


On 11/07/2005, at 9:15 AM, Chris Hostetter wrote:

>
> : Nathan's point about pooling Searchers is something that we also
> : addressed by a LRU cache mechanism.  In testing we also found that
>
> Generally speaking, you only ever need one active Searcher, which  
> all of
> your threads should be able to use.  (Of course, Nathan says that  
> in his
> code base, doing this causes his JVM to freeze up, but I've never seen
> this myself).
>
Thanks for your response Chris.  Do you think we are going down a  
deadly path by having "many smaller" IndexSearchers open rather than  
"one very large one"?

>
> As I understand it, the general rule is: if you call  
> IndexReader.open, you
> better call .close() on that reader.  If you construct and  
> IndexSearcher
> using a Directory or a path, then calling .close() on the searcher  
> will
> take care of closing the reader -- but if your code look like this...
>
>     Searcher s = new IndexSearcher(IndexReader.open(foo))
>
> ...then you are screwed, because nothing will ever close that  
> reader and
> free it's resources.

That was my initial thought when Nathan outlined is issue.  I've seen  
that happen before myself.

Paul
--Apple-Mail-9-996777276--

From java-user-return-15376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 00:43:52 2005
Return-Path: <java-user-return-15376-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40166 invoked from network); 11 Jul 2005 00:43:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 00:43:52 -0000
Received: (qmail 22412 invoked by uid 500); 11 Jul 2005 00:43:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22385 invoked by uid 500); 11 Jul 2005 00:43:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22371 invoked by uid 99); 11 Jul 2005 00:43:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jul 2005 17:43:47 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jul 2005 17:43:42 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id AE9F25B7F5; Sun, 10 Jul 2005 17:43:36 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A6CFC7F460
	for <java-user@lucene.apache.org>; Sun, 10 Jul 2005 17:43:36 -0700 (PDT)
Date: Sun, 10 Jul 2005 17:43:36 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Index Partitioning ( was Re: Search deadlocking under load)
In-Reply-To: <0E62ADC4-D7FC-4CF1-B691-A464567BAEC4@aconex.com>
Message-ID: <Pine.LNX.4.58.0507101727420.31070@hal.rescomp.berkeley.edu>
References: <20050708193944.61757.qmail@web31112.mail.mud.yahoo.com>
 <73809823-CE46-406E-A142-6C4C0EA1E0E4@aconex.com>
 <Pine.LNX.4.58.0507101605250.22002@hal.rescomp.berkeley.edu>
 <0E62ADC4-D7FC-4CF1-B691-A464567BAEC4@aconex.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: > Generally speaking, you only ever need one active Searcher, which
: > all of
: > your threads should be able to use.  (Of course, Nathan says that
: > in his
: > code base, doing this causes his JVM to freeze up, but I've never seen
: > this myself).
: >
: Thanks for your response Chris.  Do you think we are going down a
: deadly path by having "many smaller" IndexSearchers open rather than
: "one very large one"?

I'm sorry ... i think i may have confused you, i forgot  that this thread
was regarding partioning the index.  i ment one searcher *per index* ...
don't try to make a seperate searcher per client, or have a pool of
searchers, or anything like that.  But if you have a need to partition
your data into multiple indexes, then have one searcher per index.

I don't really know a lot about what gets loaded into memory when you
make/use a new searcher, but the one thing i've learned from experience is
that the FieldCache (which gets used when you sort on a field) contains
every term in the field you are sorting on, and an instance of FieldCache
exists for each IndexReader you open (which is one big reason not to open
a seperate reader for every client).

now assume you partition your data into two seperate indexes, unless the
way you partition your data lets you cleanly so that each of hte
two indexes contains only half the number of terms as if you had one big
index, then sorting on a field in those two indexes will require more RAM
then sorting on the same data in asingle index.

...that's just one example i ran into when looking at partitioning data,
i'm sure there are other cases where splitting your data up into seperate
indexes isn't neccessarily more efficient then using one big index.



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 01:03:39 2005
Return-Path: <java-user-return-15377-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42825 invoked from network); 11 Jul 2005 01:03:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 01:03:39 -0000
Received: (qmail 34691 invoked by uid 500); 11 Jul 2005 01:03:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34666 invoked by uid 500); 11 Jul 2005 01:03:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34653 invoked by uid 99); 11 Jul 2005 01:03:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jul 2005 18:03:34 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jul 2005 18:03:31 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id D451615A00E
	for <java-user@lucene.apache.org>; Mon, 11 Jul 2005 11:03:26 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 5207F64007
	for <java-user@lucene.apache.org>; Mon, 11 Jul 2005 11:03:26 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 13413-02-7 for <java-user@lucene.apache.org>;
 Mon, 11 Jul 2005 11:03:24 +1000 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by herald.aconex.com (Postfix) with ESMTP id 206B164002
	for <java-user@lucene.apache.org>; Mon, 11 Jul 2005 11:03:24 +1000 (EST)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <Pine.LNX.4.58.0507101727420.31070@hal.rescomp.berkeley.edu>
References: <20050708193944.61757.qmail@web31112.mail.mud.yahoo.com> <73809823-CE46-406E-A142-6C4C0EA1E0E4@aconex.com> <Pine.LNX.4.58.0507101605250.22002@hal.rescomp.berkeley.edu> <0E62ADC4-D7FC-4CF1-B691-A464567BAEC4@aconex.com> <Pine.LNX.4.58.0507101727420.31070@hal.rescomp.berkeley.edu>
Content-Type: multipart/alternative; boundary=Apple-Mail-12-1002689035
Message-Id: <1017F4C8-CB8C-4CA7-8953-0BBFDE0667BD@aconex.com>
From: Paul Smith <psmith@aconex.com>
Subject: Re: Index Partitioning ( was Re: Search deadlocking under load)
Date: Mon, 11 Jul 2005 11:03:29 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Apple-Mail-12-1002689035
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	charset=US-ASCII;
	delsp=yes;
	format=flowed


On 11/07/2005, at 10:43 AM, Chris Hostetter wrote:

>
> : > Generally speaking, you only ever need one active Searcher, which
> : > all of
> : > your threads should be able to use.  (Of course, Nathan says that
> : > in his
> : > code base, doing this causes his JVM to freeze up, but I've  
> never seen
> : > this myself).
> : >
> : Thanks for your response Chris.  Do you think we are going down a
> : deadly path by having "many smaller" IndexSearchers open rather than
> : "one very large one"?
>
> I'm sorry ... i think i may have confused you, i forgot  that this  
> thread
> was regarding partioning the index.  i ment one searcher *per  
> index* ...
> don't try to make a seperate searcher per client, or have a pool of
> searchers, or anything like that.  But if you have a need to partition
> your data into multiple indexes, then have one searcher per index.

Actually I think I confused you first, and then you confused me  
back... Let me... uhh, clarify 'ourselves'.. :)

My use of the word 'pool' was an error on my part (and a very silly  
one).  I should really have meant "LRU Cache".

We have recognized that there is a finite # of IndexSearchers that  
can probably be open at one time.  So we'll use an LRU cache to make  
sure only the 'actively' in use Searchers are open.  However there  
will only be one IndexSearcher for a given physical Index directory  
open at a time, we're just making sure only the recently used ones  
are kept open to keep memory limits sane.

>
> now assume you partition your data into two seperate indexes,  
> unless the
> way you partition your data lets you cleanly so that each of hte
> two indexes contains only half the number of terms as if you had  
> one big
> index, then sorting on a field in those two indexes will require  
> more RAM
> then sorting on the same data in asingle index.
>

Our data is logically segmented into Projects.  Each Project can  
contain Documents and Mail.  So we currently have 2 physical Indexes  
per Project.  90% of the time our users work within one project at a  
time, and only work in "document mode" or "mail mode".  Every now and  
then they may need to do a general search across all Entities and/or  
Projects they are involved in (accomplished with Mulitsearcher).   
Perhaps we should just put Documents and Mail all in one Index for a  
project (ie have 1 Index per project)??

Part of the reason in to partition is to make the cost of rebuilding  
a given project cheaper.  Reduces the risk of an Uber-Index being  
corrupted and screwing all the users up.  We can order the reindexing  
of projects to make sure our more important customers get re-indexed  
first if there is a serious issue.

I would have thought that partitioning indexes would have performance  
benefits too:  a lot less data to scan (most of the data is already  
relevant).

Since this isn't in production yet, I'd rather be proven wrong now  
rather than later! :)

Thanks for your input.

Paul
--Apple-Mail-12-1002689035--

From java-user-return-15378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 05:45:50 2005
Return-Path: <java-user-return-15378-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13191 invoked from network); 11 Jul 2005 05:45:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 05:45:50 -0000
Received: (qmail 84429 invoked by uid 500); 11 Jul 2005 05:45:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 84171 invoked by uid 500); 11 Jul 2005 05:45:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 84157 invoked by uid 99); 11 Jul 2005 05:45:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jul 2005 22:45:41 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.86] (HELO smtpout.mac.com) (17.250.248.86)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 10 Jul 2005 22:45:38 -0700
Received: from mac.com (smtpin02-en2 [10.13.10.147])
	by smtpout.mac.com (Xserve/8.12.11/smtpout04/MantshX 4.0) with ESMTP id j6B5jbRg004314
	for <java-user@lucene.apache.org>; Sun, 10 Jul 2005 22:45:37 -0700 (PDT)
Received: from [127.0.0.1] (66-214-154-12.mpk-mres.charterpipeline.net [66.214.154.12])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin02/MantshX 4.0) with ESMTP id j6B5jZbK027575
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Sun, 10 Jul 2005 22:45:36 -0700 (PDT)
Message-ID: <42D2077F.4010106@mac.com>
Date: Sun, 10 Jul 2005 22:45:35 -0700
From: "xing@mac.com" <xing@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: BooleanQuery$TooManyClauses
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Did a google serach on the problem when using the range search phrase of 
  "+datefield:[199801 TO 200512]" (date stored as "YYYYMMDD") which 
returns 1 million hits.

error: org.apache.lucene.search.BooleanQuery$TooManyClauses

Adding "-Dorg.apache.lucene.maxClauseCount=2400" to java option allowed 
the search query to run without error. The actual value needed is 
between 2300 and 2400. At 2300 the query fails.

My question is how does Lucene perform range query?  As a bunch of 
smaller boolean queries? How does one estimate the number of clauses 
required for a general query and more specifically on a range query?

Thanks.

Xing Li

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 11:01:54 2005
Return-Path: <java-user-return-15379-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13414 invoked from network); 11 Jul 2005 11:01:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 11:01:54 -0000
Received: (qmail 3455 invoked by uid 500); 11 Jul 2005 11:01:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3431 invoked by uid 500); 11 Jul 2005 11:01:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3417 invoked by uid 99); 11 Jul 2005 11:01:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 04:01:43 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_60_70,HTML_MESSAGE,HTML_TITLE_EMPTY
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [62.23.157.12] (HELO xmailserver.test) (62.23.157.12)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Jul 2005 04:01:40 -0700
Received: from localhost (127.0.0.1:3591)
	by xmailserver.test with [XMail 1.20 ESMTP Server]
	id <S12B7> for <java-user@lucene.apache.org> from <sven.duzont@keljob.com>;
	Mon, 11 Jul 2005 13:02:32 +0200
Date: Mon, 11 Jul 2005 13:02:31 +0200
From: Sven Duzont <sven.duzont@keljob.com>
X-Mailer: The Bat! (v3.5) Professional
Reply-To: Sven duzont <sven.duzont@keljob.com>
Organization: Keljob
X-Priority: 3 (Normal)
Message-ID: <119124990.20050711130231@keljob.com>
To: Paul Smith <java-user@lucene.apache.org>
Subject: Re[2]: Index Partitioning ( was Re: Search deadlocking under load)
In-Reply-To: <1017F4C8-CB8C-4CA7-8953-0BBFDE0667BD@aconex.com>
References: <20050708193944.61757.qmail@web31112.mail.mud.yahoo.com>
 <73809823-CE46-406E-A142-6C4C0EA1E0E4@aconex.com>
 <Pine.LNX.4.58.0507101605250.22002@hal.rescomp.berkeley.edu>
 <0E62ADC4-D7FC-4CF1-B691-A464567BAEC4@aconex.com>
 <Pine.LNX.4.58.0507101727420.31070@hal.rescomp.berkeley.edu>
 <1017F4C8-CB8C-4CA7-8953-0BBFDE0667BD@aconex.com>
MIME-Version: 1.0
Content-Type: multipart/alternative;
 boundary="----------2D17915E15DBF9A0"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------------2D17915E15DBF9A0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit

Hello, 

We are already using this design in production for a email job application system.
Each client (company) have an account and may have multiple users
When a new client is created, a new lucene index is automatically created when new job-applications arrive for this account. 
Job applications are in principle owned by users, but some times they can share it with other users in same account, so the search can be user-independent.
This design works fine for us as the flow of job applications is not the same for different accounts. There are lucene indices that are more often updated than others.
It also permit us to rebuild one client index without impacting others

We have only one problem : when the index is updated and searched at the same time, the index may be corrupted and an exception may be thrown by the indexer ("Read past OEF", i unfortunately don't have the stack trace right now under my hand). I think that it is because the search and indexation are made in two different java processes. We will rework the routines to lock the search when an indexation is running and vice versa

--- sven

lundi 11 juillet 2005, 03:03:29, vous avez crit:


PS> On 11/07/2005, at 10:43 AM, Chris Hostetter wrote:

>>
>> : > Generally speaking, you only ever need one active Searcher, which
>> : > all of
>> : > your threads should be able to use.  (Of course, Nathan says that
>> : > in his
>> : > code base, doing this causes his JVM to freeze up, but I've  
>> never seen
>> : > this myself).
>> : >
>> : Thanks for your response Chris.  Do you think we are going down a
>> : deadly path by having "many smaller" IndexSearchers open rather than
>> : "one very large one"?
>>
>> I'm sorry ... i think i may have confused you, i forgot  that this
>> thread
>> was regarding partioning the index.  i ment one searcher *per  
>> index* ...
>> don't try to make a seperate searcher per client, or have a pool of
>> searchers, or anything like that.  But if you have a need to partition
>> your data into multiple indexes, then have one searcher per index.

PS> Actually I think I confused you first, and then you confused me  
PS> back... Let me... uhh, clarify 'ourselves'.. :)

PS> My use of the word 'pool' was an error on my part (and a very silly
PS> one).  I should really have meant "LRU Cache".

PS> We have recognized that there is a finite # of IndexSearchers that
PS> can probably be open at one time.  So we'll use an LRU cache to make
PS> sure only the 'actively' in use Searchers are open.  However there
PS> will only be one IndexSearcher for a given physical Index directory
PS> open at a time, we're just making sure only the recently used ones
PS> are kept open to keep memory limits sane.

>>
>> now assume you partition your data into two seperate indexes,  
>> unless the
>> way you partition your data lets you cleanly so that each of hte
>> two indexes contains only half the number of terms as if you had  
>> one big
>> index, then sorting on a field in those two indexes will require  
>> more RAM
>> then sorting on the same data in asingle index.
>>

PS> Our data is logically segmented into Projects.  Each Project can  
PS> contain Documents and Mail.  So we currently have 2 physical Indexes
PS> per Project.  90% of the time our users work within one project at a
PS> time, and only work in "document mode" or "mail mode".  Every now and
PS> then they may need to do a general search across all Entities and/or
PS> Projects they are involved in (accomplished with Mulitsearcher).
PS> Perhaps we should just put Documents and Mail all in one Index for a
PS> project (ie have 1 Index per project)??

PS> Part of the reason in to partition is to make the cost of rebuilding
PS> a given project cheaper.  Reduces the risk of an Uber-Index being
PS> corrupted and screwing all the users up.  We can order the reindexing
PS> of projects to make sure our more important customers get re-indexed
PS> first if there is a serious issue.

PS> I would have thought that partitioning indexes would have performance
PS> benefits too:  a lot less data to scan (most of the data is already
PS> relevant).

PS> Since this isn't in production yet, I'd rather be proven wrong now
PS> rather than later! :)

PS> Thanks for your input.

PS> Paul
------------2D17915E15DBF9A0--


From java-user-return-15380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 12:22:01 2005
Return-Path: <java-user-return-15380-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44496 invoked from network); 11 Jul 2005 12:22:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 12:22:01 -0000
Received: (qmail 4568 invoked by uid 500); 11 Jul 2005 12:21:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4395 invoked by uid 500); 11 Jul 2005 12:21:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4382 invoked by uid 99); 11 Jul 2005 12:21:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 05:21:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 05:21:50 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B1AC013E2007; Mon, 11 Jul 2005 08:21:45 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id C776313E2005
	for <java-user@lucene.apache.org>; Mon, 11 Jul 2005 08:21:31 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42D2077F.4010106@mac.com>
References: <42D2077F.4010106@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C2EFB6A0-3BD8-443D-96F0-689291DA53BE@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: BooleanQuery$TooManyClauses
Date: Mon, 11 Jul 2005 08:21:34 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.2 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 11, 2005, at 1:45 AM, xing@mac.com wrote:

> Did a google serach on the problem when using the range search  
> phrase of  "+datefield:[199801 TO 200512]" (date stored as  
> "YYYYMMDD") which returns 1 million hits.
>
> error: org.apache.lucene.search.BooleanQuery$TooManyClauses
>
> Adding "-Dorg.apache.lucene.maxClauseCount=2400" to java option  
> allowed the search query to run without error. The actual value  
> needed is between 2300 and 2400. At 2300 the query fails.
>
> My question is how does Lucene perform range query?  As a bunch of  
> smaller boolean queries? How does one estimate the number of  
> clauses required for a general query and more specifically on a  
> range query?

RangeQuery expands under the covers to a BooleanQuery with all  
matching terms OR'd together.

In your case, if you've indexed a term for every day in that range  
using YYYYMMDD then you've got 2,524 terms roughly = 7 * 365 - 31  
(minus 31 because you'd omit December '05 since you are only going to  
200512).  If all you need is YYYYMM range searching, then index it as  
that (that'd be 7 years * 12 months/year = 84 terms).

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 15:03:11 2005
Return-Path: <java-user-return-15381-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16243 invoked from network); 11 Jul 2005 15:03:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 15:03:11 -0000
Received: (qmail 68701 invoked by uid 500); 11 Jul 2005 15:03:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68684 invoked by uid 500); 11 Jul 2005 15:03:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68671 invoked by uid 99); 11 Jul 2005 15:03:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 08:03:01 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.95.77.96] (HELO phobos.net-temps.com) (64.95.77.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 08:02:58 -0700
Received: from localhost (localhost [127.0.0.1])
	by phobos.net-temps.com (Postfix) with ESMTP id BC7093F441;
	Mon, 11 Jul 2005 11:02:54 -0400 (EDT)
Received: from phobos.net-temps.com ([127.0.0.1])
 by localhost (phobos.net-temps.com [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 76399-07; Mon, 11 Jul 2005 11:02:53 -0400 (EDT)
Received: from nbrackett (europa [192.168.1.21])
	by phobos.net-temps.com (Postfix) with SMTP id C1E333F43D
	for <java-user@lucene.apache.org>; Mon, 11 Jul 2005 11:02:52 -0400 (EDT)
From: "Nathan Brackett" <nbrackett@net-temps.com>
To: <java-user@lucene.apache.org>
Subject: RE: Search deadlocking under load
Date: Mon, 11 Jul 2005 11:05:16 -0400
Message-ID: <LJEJJJKMGLFKGPJJOLFJGEJMIGAA.nbrackett@net-temps.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Importance: Normal
In-Reply-To: <20050708193944.61757.qmail@web31112.mail.mud.yahoo.com>
X-Virus-Scanned: by amavisd-new at net-temps.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hey Otis,

Thanks for the hasty response and apologies for my delayed response. It was
Friday and time to go :)

The queries we're running are very varied (wildcard, phrase, normal). The
index is only about a 1/2 gig in size (maybe 250,000 documents). The machine
is running FreeBSD 5.3 with ~2 gig RAM.

I got a thread dump from right around the time that the process would
deadlock and not come back and I noticed that almost all of the threads were
waiting on the same method. Here's what the trace looks like: (small sample
for the sake of brevity...the real dump is huge)

tcpConnection-8080-32:
  [1] org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal
(CompoundFileReader.java:217)
  [2] org.apache.lucene.store.InputStream.refill (InputStream.java:158)
  [3] org.apache.lucene.store.InputStream.readByte (InputStream.java:43)
  [4] org.apache.lucene.store.InputStream.readVInt (InputStream.java:83)
  [5] org.apache.lucene.index.SegmentTermDocs.read
(SegmentTermDocs.java:126)
  [6] org.apache.lucene.search.TermScorer.next (TermScorer.java:55)
  [7] org.apache.lucene.search.BooleanScorer.next (BooleanScorer.java:112)
  [8] org.apache.lucene.search.Scorer.score (Scorer.java:37)
  [9] org.apache.lucene.search.IndexSearcher.search (IndexSearcher.java:92)
  [10] org.apache.lucene.search.Hits.getMoreDocs (Hits.java:64)
  [11] org.apache.lucene.search.Hits.<init> (Hits.java:43)
  [12] org.apache.lucene.search.Searcher.search (Searcher.java:33)
  [13] org.apache.lucene.search.Searcher.search (Searcher.java:27)
  [14] com.nettemps.search.backend.SingleIndexManager.search
(SingleIndexManager.java:335)
  [15] com.nettemps.search.backend.IndexAccessControl.doSearch
(IndexAccessControl.java:100)
  [16] com.nettemps.search.server.SearchServerImpl.searchResumes
(SearchServerImpl.java:402)
  [17]
com.nettemps.search.server.SearchServerReadOnly_Tie.invoke_searchResumes
(SearchServerReadOnly_Tie.java:93)
  [18] com.nettemps.search.server.SearchServerReadOnly_Tie.processingHook
(SearchServerReadOnly_Tie.java:298)
  [19] com.sun.xml.rpc.server.StreamingHandler.handle
(StreamingHandler.java:321)
  [20] com.sun.xml.rpc.server.http.JAXRPCServletDelegate.doPost
(JAXRPCServletDelegate.java:443)
  [21] com.sun.xml.rpc.server.http.JAXRPCServlet.doPost
(JAXRPCServlet.java:102)
  [22] javax.servlet.http.HttpServlet.service (HttpServlet.java:165)
  [23] javax.servlet.http.HttpServlet.service (HttpServlet.java:103)
  [24] com.caucho.server.http.FilterChainServlet.doFilter
(FilterChainServlet.java:96)
  [25] com.caucho.server.http.Invocation.service (Invocation.java:315)
  [26] com.caucho.server.http.CacheInvocation.service
(CacheInvocation.java:135)
  [27] com.caucho.server.http.HttpRequest.handleRequest
(HttpRequest.java:253)
  [28] com.caucho.server.http.HttpRequest.handleConnection
(HttpRequest.java:170)
  [29] com.caucho.server.TcpConnection.run (TcpConnection.java:139)
  [30] java.lang.Thread.run (Thread.java:534)

I took a look at that readInternal method and saw that the contention is
around an InputStream that I assume reads from the actual index file and
returns it for use by the method. We are running many threads that are
attempting to do searches at the same time (roughly 30 - 35), so that
explains why the search times would go up.

In an attempt to reduce the amount of contention, we synchronized our search
method (the one that makes the actual call to Lucene's search: [14]
com.nettemps.search.backend.SingleIndexManager.search
(SingleIndexManager.java:335)). This also caused the same results when hit
with too many threads.

We're really stuck at this point as to what to try. Any advice?



-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Friday, July 08, 2005 3:40 PM
To: java-user@lucene.apache.org
Subject: Re: Search deadlocking under load


Nathan,

3) is the recommended usage.
Your index is on an NFS share, which means you are searching it over
the network.  Make it local, and you should see performance
improvements.  Local or remove, it makes sense that searches take
longer to execute, and the load goes up.  Yes, it shouldn't deadlock.
You shouldn't need to synchronize access to IndexSearcher.
When your JVM locks up next time, kill it, get the thread dump, and
send it to the list, so we can try to remove the bottleneck, if that's
possible.

How many queries/second do you run, and what kinds of queries are they,
how big is your index and what kind of hardware (disks, RAM, CPU) are
you using?

Otis

--- Nathan Brackett <nbrackett@net-temps.com> wrote:

> Hey all,
>
> We're looking to use Lucene as the back end to our website and we're
> running
> into an unusual deadlocking problem.
>
> For testing purposes, we're just running one web server (threaded
> environment) against an index mounted on an NFS share. This machine
> performs
> searches only against this index so it's not being touched. We have
> tried a
> few different models so far:
>
> 1) Pooling IndexSearcher objects: Occasionally we would run into
> OutOfMemory
> problems as we would not block if a request came through and all
> IndexSearchers were already checked out, we would just create a
> temporary
> one and then dispose of it once it was returned to the pool.
>
> 2) Create a new IndexSearcher each time: Every request to search
> would
> create an IndexSearcher object. This quickly gave OutOfMemory errors,
> even
> when we would close them out directly after.
>
> 3) Use a global IndexSearcher: This is the model we're working with
> now. The
> model holds up fine under low-moderate load and is, in fact, much
> faster at
> searching (probably due to some caching mechanism). Under heavy load
> though,
> the CPU will spike up to 99% and never come back down until we kill
> -9 the
> process. Also, as you ramp the load, we've discovered that search
> times go
> up as well. Searches will generally come back after 40ms, but as the
> load
> goes up the searches don't come back for up to 20 seconds.
>
> We've been attempting to find where the problem is for the last week
> with no
> luck. Our index is optimized, so there is only one file. Do we need
> to
> synchronize access to the global IndexSearcher so that only one
> search can
> run at a time? That poses a bit of a problem as if a particular
> search takes
> a long time, all others will wait. This problem does not look like an
> OutOrMemory error because the memory usage when the spike occurs is
> usually
> in the range of 150meg used with a ceiling of 650meg. Anyone else
> experiencing any problems like this or have any idea where we should
> be
> looking? Thanks.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 15:25:51 2005
Return-Path: <java-user-return-15382-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24688 invoked from network); 11 Jul 2005 15:25:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 15:25:51 -0000
Received: (qmail 8618 invoked by uid 500); 11 Jul 2005 15:25:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8554 invoked by uid 500); 11 Jul 2005 15:25:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8540 invoked by uid 99); 11 Jul 2005 15:25:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 08:25:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 08:25:40 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 5316813E2007; Mon, 11 Jul 2005 11:25:34 -0400 (EDT)
Received: from [128.143.218.84] (d-128-218-84.bootp.Virginia.EDU [128.143.218.84])
	by ehatchersolutions.com (Postfix) with ESMTP id 4345513E2005
	for <java-user@lucene.apache.org>; Mon, 11 Jul 2005 11:25:14 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42D2077F.4010106@mac.com>
References: <42D2077F.4010106@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C2EFB6A0-3BD8-443D-96F0-689291DA53BE@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: BooleanQuery$TooManyClauses
Date: Mon, 11 Jul 2005 08:21:34 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 11, 2005, at 1:45 AM, xing@mac.com wrote:

> Did a google serach on the problem when using the range search  
> phrase of  "+datefield:[199801 TO 200512]" (date stored as  
> "YYYYMMDD") which returns 1 million hits.
>
> error: org.apache.lucene.search.BooleanQuery$TooManyClauses
>
> Adding "-Dorg.apache.lucene.maxClauseCount=2400" to java option  
> allowed the search query to run without error. The actual value  
> needed is between 2300 and 2400. At 2300 the query fails.
>
> My question is how does Lucene perform range query?  As a bunch of  
> smaller boolean queries? How does one estimate the number of  
> clauses required for a general query and more specifically on a  
> range query?

RangeQuery expands under the covers to a BooleanQuery with all  
matching terms OR'd together.

In your case, if you've indexed a term for every day in that range  
using YYYYMMDD then you've got 2,524 terms roughly = 7 * 365 - 31  
(minus 31 because you'd omit December '05 since you are only going to  
200512).  If all you need is YYYYMM range searching, then index it as  
that (that'd be 7 years * 12 months/year = 84 terms).

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 15:58:08 2005
Return-Path: <java-user-return-15383-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45842 invoked from network); 11 Jul 2005 15:58:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 15:58:08 -0000
Received: (qmail 71970 invoked by uid 500); 11 Jul 2005 15:55:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71726 invoked by uid 500); 11 Jul 2005 15:55:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71519 invoked by uid 99); 11 Jul 2005 15:55:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 08:55:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [213.130.33.21] (HELO mail21a.london21-verio.com) (213.130.33.21)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Jul 2005 08:55:01 -0700
Received: from www.seinet.es (62.73.179.228)
	by mail21a.london21-verio.com (RS ver 1.0.95vs) with SMTP id 0-1621937295
	for <java-user@lucene.apache.org>; Mon, 11 Jul 2005 16:54:57 +0100 (BST)
Message-ID: <001401c58630$e0f98bd0$bf00a8c0@akenaton>
From: "MariLuz Elola" <melola@seinet.es>
To: <java-user@lucene.apache.org>
Subject: Text or Keyword
Date: Mon, 11 Jul 2005 17:54:53 +0200
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0011_01C58641.A41716E0"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Loop-Detect:1
X-DistLoop-Detect:1
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0011_01C58641.A41716E0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,=20
I am not sure if I have to index using Field.Text or Field.Keyword. I =
know that :

Keyword-Isn't analyzed, but is indexed and stored in the index verbatim.
This type is suitable for fields whose original value should be =
preserved in
its entirety, such as URLs, file system paths, dates, personal names, =
Social
Security numbers, telephone numbers, and so on. For example, we used
the file system path in Indexer (listing 1.1) as a Keyword field.

Text-Is analyzed, and is indexed. This implies that fields of this type =
can
be searched against, but be cautious about the field size. If the data
indexed is a String, it's also stored; but if the data (as in our =
Indexer example)
is from a Reader, it isn't stored. This is often a source of confusion, =
so
take note of this difference when using Field.Text.

I have indexed the same value on the same field firstly like Field.Text =
and secondly like Field.Keyword.
I am using QueryParser.
These are the results of some test:


----------------------------------------------------------------TEST =
1------------------------------------------------------------
FIELD =3D=3D> NAMEFILE; VALUE =3D=3D> name one
-------------------------------------------------------------------------=
-------------------------------------------------------------------------=
------------
Query                                        Index like Field.Text       =
                             Index like Field.Keyword
-------------------------------------------------------------------------=
-------------------------------------------------------------------------=
------------
NAMEFILE:name*                                OK                         =
                                           OK

NAMEFILE:one                                    OK                       =
                                            NO

NAMEFILE:"name one"                            NO                        =
                                        NO

-------------------------------------------------------------------------=
-------------------------------------------------------------------------=
------------
--------------------------------------------------------------------TEST =
2------------------------------------------------------------------------=
-----
FIELD =3D=3D> NAMEFILE;VALUE =3D=3D> NAME TWO

-------------------------------------------------------------------------=
-------------------------------------------------------------------------=
------------

Query                                                Index like =
Field.Text                                    Index like Field.Keyword

-------------------------------------------------------------------------=
-------------------------------------------------------------------------=
------------
NAMEFILE:NAME*                                            OK             =
                                                       NO

NAMEFILE:TWO                                                OK           =
                                                        NO

NAMEFILE:"NAME TWO"                                    NO                =
                                                NO

-------------------------------------------------------------------------=
-------------------------------------------------------------------------=
------------

---------------------------------------------------------------TEST =
3------------------------------------------------------------------------=
-------
FIELD =3D=3D> NAMEFILE; VALUE =3D=3D> name two

-------------------------------------------------------------------------=
-------------------------------------------------------------------------=
------------
Query                                        Index like Field.Text       =
                             Index like Field.Keyword

-------------------------------------------------------------------------=
-------------------------------------------------------------------------=
------------
NAMEFILE:name*                                OK                         =
                                           OK

NAMEFILE:two                                   OK                        =
                                           NO

NAMEFILE:"name two"                            NO                        =
                                        NO

-------------------------------------------------------------------------=
-------------------------------------------------------------------------=
------------

My questions are:

1.- I would like to search for the complete namefile with white spaces =
and I don=B4t know how.

2.-I don=B4t understand the behaviour or Keyword with uppercase and =
lowercase.=20



Thanks in advance

------=_NextPart_000_0011_01C58641.A41716E0--



From java-user-return-15384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 17:57:10 2005
Return-Path: <java-user-return-15384-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 656 invoked from network); 11 Jul 2005 17:57:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 17:57:09 -0000
Received: (qmail 28246 invoked by uid 500); 11 Jul 2005 17:56:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28207 invoked by uid 500); 11 Jul 2005 17:56:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28189 invoked by uid 99); 11 Jul 2005 17:56:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 10:56:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.43] (HELO web31110.mail.mud.yahoo.com) (68.142.200.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Jul 2005 10:56:55 -0700
Received: (qmail 80869 invoked by uid 60001); 11 Jul 2005 17:56:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=npdS/23hgNYWSJDoBDZ7nf6GeT3cl8KIGEf8AAbWetpgLi1jXc2kjpQnI2Cf+R0zKS1QRp22zlGQ8YnSw5cSVDIgx7rViqa/Ey5hC5paFLoiHM02U7FFUgCNfmOJrtXrTCoJWbQZGm2CB14b5fNfHY7YfJxgNSlftjs8NkyQmkE=  ;
Message-ID: <20050711175654.80867.qmail@web31110.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31110.mail.mud.yahoo.com via HTTP; Mon, 11 Jul 2005 10:56:54 PDT
Date: Mon, 11 Jul 2005 10:56:54 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: Search deadlocking under load
To: java-user@lucene.apache.org
In-Reply-To: <LJEJJJKMGLFKGPJJOLFJGEJMIGAA.nbrackett@net-temps.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Nick,

Without looking at the source of that method, I'd suggest first trying
the multifile index format (you can easily convert to it by setting the
new format on IndexWriter and optimizing it).  I'd be interested to
know if this eliminates the problem, or at least makes it harder to
hit.

Otis


--- Nathan Brackett <nbrackett@net-temps.com> wrote:

> Hey Otis,
> 
> Thanks for the hasty response and apologies for my delayed response.
> It was
> Friday and time to go :)
> 
> The queries we're running are very varied (wildcard, phrase, normal).
> The
> index is only about a 1/2 gig in size (maybe 250,000 documents). The
> machine
> is running FreeBSD 5.3 with ~2 gig RAM.
> 
> I got a thread dump from right around the time that the process would
> deadlock and not come back and I noticed that almost all of the
> threads were
> waiting on the same method. Here's what the trace looks like: (small
> sample
> for the sake of brevity...the real dump is huge)
> 
> tcpConnection-8080-32:
>   [1]
> org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal
> (CompoundFileReader.java:217)
>   [2] org.apache.lucene.store.InputStream.refill
> (InputStream.java:158)
>   [3] org.apache.lucene.store.InputStream.readByte
> (InputStream.java:43)
>   [4] org.apache.lucene.store.InputStream.readVInt
> (InputStream.java:83)
>   [5] org.apache.lucene.index.SegmentTermDocs.read
> (SegmentTermDocs.java:126)
>   [6] org.apache.lucene.search.TermScorer.next (TermScorer.java:55)
>   [7] org.apache.lucene.search.BooleanScorer.next
> (BooleanScorer.java:112)
>   [8] org.apache.lucene.search.Scorer.score (Scorer.java:37)
>   [9] org.apache.lucene.search.IndexSearcher.search
> (IndexSearcher.java:92)
>   [10] org.apache.lucene.search.Hits.getMoreDocs (Hits.java:64)
>   [11] org.apache.lucene.search.Hits.<init> (Hits.java:43)
>   [12] org.apache.lucene.search.Searcher.search (Searcher.java:33)
>   [13] org.apache.lucene.search.Searcher.search (Searcher.java:27)
>   [14] com.nettemps.search.backend.SingleIndexManager.search
> (SingleIndexManager.java:335)
>   [15] com.nettemps.search.backend.IndexAccessControl.doSearch
> (IndexAccessControl.java:100)
>   [16] com.nettemps.search.server.SearchServerImpl.searchResumes
> (SearchServerImpl.java:402)
>   [17]
>
com.nettemps.search.server.SearchServerReadOnly_Tie.invoke_searchResumes
> (SearchServerReadOnly_Tie.java:93)
>   [18]
> com.nettemps.search.server.SearchServerReadOnly_Tie.processingHook
> (SearchServerReadOnly_Tie.java:298)
>   [19] com.sun.xml.rpc.server.StreamingHandler.handle
> (StreamingHandler.java:321)
>   [20] com.sun.xml.rpc.server.http.JAXRPCServletDelegate.doPost
> (JAXRPCServletDelegate.java:443)
>   [21] com.sun.xml.rpc.server.http.JAXRPCServlet.doPost
> (JAXRPCServlet.java:102)
>   [22] javax.servlet.http.HttpServlet.service (HttpServlet.java:165)
>   [23] javax.servlet.http.HttpServlet.service (HttpServlet.java:103)
>   [24] com.caucho.server.http.FilterChainServlet.doFilter
> (FilterChainServlet.java:96)
>   [25] com.caucho.server.http.Invocation.service
> (Invocation.java:315)
>   [26] com.caucho.server.http.CacheInvocation.service
> (CacheInvocation.java:135)
>   [27] com.caucho.server.http.HttpRequest.handleRequest
> (HttpRequest.java:253)
>   [28] com.caucho.server.http.HttpRequest.handleConnection
> (HttpRequest.java:170)
>   [29] com.caucho.server.TcpConnection.run (TcpConnection.java:139)
>   [30] java.lang.Thread.run (Thread.java:534)
> 
> I took a look at that readInternal method and saw that the contention
> is
> around an InputStream that I assume reads from the actual index file
> and
> returns it for use by the method. We are running many threads that
> are
> attempting to do searches at the same time (roughly 30 - 35), so that
> explains why the search times would go up.
> 
> In an attempt to reduce the amount of contention, we synchronized our
> search
> method (the one that makes the actual call to Lucene's search: [14]
> com.nettemps.search.backend.SingleIndexManager.search
> (SingleIndexManager.java:335)). This also caused the same results
> when hit
> with too many threads.
> 
> We're really stuck at this point as to what to try. Any advice?
> 
> 
> 
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Sent: Friday, July 08, 2005 3:40 PM
> To: java-user@lucene.apache.org
> Subject: Re: Search deadlocking under load
> 
> 
> Nathan,
> 
> 3) is the recommended usage.
> Your index is on an NFS share, which means you are searching it over
> the network.  Make it local, and you should see performance
> improvements.  Local or remove, it makes sense that searches take
> longer to execute, and the load goes up.  Yes, it shouldn't deadlock.
> You shouldn't need to synchronize access to IndexSearcher.
> When your JVM locks up next time, kill it, get the thread dump, and
> send it to the list, so we can try to remove the bottleneck, if
> that's
> possible.
> 
> How many queries/second do you run, and what kinds of queries are
> they,
> how big is your index and what kind of hardware (disks, RAM, CPU) are
> you using?
> 
> Otis
> 
> --- Nathan Brackett <nbrackett@net-temps.com> wrote:
> 
> > Hey all,
> >
> > We're looking to use Lucene as the back end to our website and
> we're
> > running
> > into an unusual deadlocking problem.
> >
> > For testing purposes, we're just running one web server (threaded
> > environment) against an index mounted on an NFS share. This machine
> > performs
> > searches only against this index so it's not being touched. We have
> > tried a
> > few different models so far:
> >
> > 1) Pooling IndexSearcher objects: Occasionally we would run into
> > OutOfMemory
> > problems as we would not block if a request came through and all
> > IndexSearchers were already checked out, we would just create a
> > temporary
> > one and then dispose of it once it was returned to the pool.
> >
> > 2) Create a new IndexSearcher each time: Every request to search
> > would
> > create an IndexSearcher object. This quickly gave OutOfMemory
> errors,
> > even
> > when we would close them out directly after.
> >
> > 3) Use a global IndexSearcher: This is the model we're working with
> > now. The
> > model holds up fine under low-moderate load and is, in fact, much
> > faster at
> > searching (probably due to some caching mechanism). Under heavy
> load
> > though,
> > the CPU will spike up to 99% and never come back down until we kill
> > -9 the
> > process. Also, as you ramp the load, we've discovered that search
> > times go
> > up as well. Searches will generally come back after 40ms, but as
> the
> > load
> > goes up the searches don't come back for up to 20 seconds.
> >
> > We've been attempting to find where the problem is for the last
> week
> > with no
> > luck. Our index is optimized, so there is only one file. Do we need
> > to
> > synchronize access to the global IndexSearcher so that only one
> > search can
> > run at a time? That poses a bit of a problem as if a particular
> > search takes
> > a long time, all others will wait. This problem does not look like
> an
> > OutOrMemory error because the memory usage when the spike occurs is
> > usually
> > in the range of 150meg used with a ceiling of 650meg. Anyone else
> > experiencing any problems like this or have any idea where we
> should
> > be
> > looking? Thanks.
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 17:59:46 2005
Return-Path: <java-user-return-15385-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1530 invoked from network); 11 Jul 2005 17:59:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 17:59:45 -0000
Received: (qmail 32713 invoked by uid 500); 11 Jul 2005 17:59:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32683 invoked by uid 500); 11 Jul 2005 17:59:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32665 invoked by uid 500); 11 Jul 2005 17:59:37 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 32660 invoked by uid 99); 11 Jul 2005 17:59:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 10:59:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [194.217.242.85] (HELO anchor-post-35.mail.demon.net) (194.217.242.85)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 10:59:35 -0700
Received: from rselvaraj.demon.co.uk ([83.104.137.62] helo=ROBERTSELVARAJ)
	by anchor-post-35.mail.demon.net with esmtp (Exim 4.42)
	id 1Ds2Uv-000GrA-Ge; Mon, 11 Jul 2005 17:55:17 +0000
Reply-To: <lucene@searchblox.com>
From: "Robert Selvaraj" <lucene@searchblox.com>
To: <lucene-dev@jakarta.apache.org>,
	<lucene-user@jakarta.apache.org>
Subject: SearchBlox adds RSS and Atom Web Feeds Indexing in Version 3.0
Date: Mon, 11 Jul 2005 18:59:27 +0100
Organization: SearchBlox Software, Inc.
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Thread-Index: AcWGQkd1Kqb/CRnxRH6oCEdpg+Hopg==
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20050711175936.2CFC910FB2A9@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

SearchBlox Software has released Version 3.0 of its J2EE Content Search
Software. 

SearchBlox delivers out-of-the-box search functionality for quick and easy
integration with websites, applications, intranets and portals. SearchBlox
uses the Lucene Search API and incorporates integrated HTTP/HTTPS, File
System and Feed crawlers, support for various document formats including
HTML, Word, PDF, PowerPoint and Excel, support for indexing and searching
content in 30 languages and customizable search results, all controlled from
a browser-based Admin Console. 

Main features in Version 3.0: 
==============================
- RSS and Atom Web Feed Indexing. Supports RSS (0.90, 0.91 Netscape, 0.91
Userland, 0.92, 0.93, 0.94, 1.0 and 2.0) and Atom (0.3) formats
- Unified search of HTTP(S), Feed and File System Content 
- Browsable categories for quick access to categorized content. These
browsable categories are automatically generated using Category metadata
present in feeds and documents  
 
SearchBlox is available as a Web Archive (WAR) and has been tested with all
major Java Application Servers. It is also available as standalone
application for Windows and Mac OS X.

SearchBlox FREE Edition is available free of charge and can index up to 1000
documents. 

The software can be downloaded from http://www.searchblox.com






---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 18:01:11 2005
Return-Path: <java-user-return-15386-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2318 invoked from network); 11 Jul 2005 18:01:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 18:01:11 -0000
Received: (qmail 38085 invoked by uid 500); 11 Jul 2005 18:01:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38063 invoked by uid 500); 11 Jul 2005 18:01:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38050 invoked by uid 99); 11 Jul 2005 18:01:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 11:01:03 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.76] (HELO web31114.mail.mud.yahoo.com) (68.142.201.76)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Jul 2005 11:01:00 -0700
Received: (qmail 53809 invoked by uid 60001); 11 Jul 2005 18:00:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=1YPe+uNr7X53m3ZrHgH2daW18syaKj7daLgHp3U27SBa59P/LivZxKmONfgQ9HeO/8sdCftbI8wIPuqNKlmlK/2i7gYsBoA/ZaQuTidAKdCKNInrxnt29dNgCdiR7NykHvwuKvGkmRBLpIXNs6ApCHPXZfwjMa8uj69wyrq7lwo=  ;
Message-ID: <20050711180050.53806.qmail@web31114.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31114.mail.mud.yahoo.com via HTTP; Mon, 11 Jul 2005 11:00:50 PDT
Date: Mon, 11 Jul 2005 11:00:50 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Re[2]: Index Partitioning ( was Re: Search deadlocking under load)
To: java-user@lucene.apache.org
In-Reply-To: <119124990.20050711130231@keljob.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul - I'm doing the same (smaller indices) for Simpy.com for similar
reasons (fast, independent and faster reindexing, etc.).  Each index
has its own IndexSearcher, and they are kept in a LRU data structure. 
Before each search the index version is checked, and new IndexSearcher
created in case the index changed.

Otis

--- Sven Duzont <sven.duzont@keljob.com> wrote:

> Hello, 
> 
> We are already using this design in production for a email job
> application system.
> Each client (company) have an account and may have multiple users
> When a new client is created, a new lucene index is automatically
> created when new job-applications arrive for this account. 
> Job applications are in principle owned by users, but some times they
> can share it with other users in same account, so the search can be
> user-independent.
> This design works fine for us as the flow of job applications is not
> the same for different accounts. There are lucene indices that are
> more often updated than others.
> It also permit us to rebuild one client index without impacting
> others
> 
> We have only one problem : when the index is updated and searched at
> the same time, the index may be corrupted and an exception may be
> thrown by the indexer ("Read past OEF", i unfortunately don't have
> the stack trace right now under my hand). I think that it is because
> the search and indexation are made in two different java processes.
> We will rework the routines to lock the search when an indexation is
> running and vice versa
> 
> --- sven
> 
> lundi 11 juillet 2005, 03:03:29, vous avez crit:
> 
> 
> PS> On 11/07/2005, at 10:43 AM, Chris Hostetter wrote:
> 
> >>
> >> : > Generally speaking, you only ever need one active Searcher,
> which
> >> : > all of
> >> : > your threads should be able to use.  (Of course, Nathan says
> that
> >> : > in his
> >> : > code base, doing this causes his JVM to freeze up, but I've  
> >> never seen
> >> : > this myself).
> >> : >
> >> : Thanks for your response Chris.  Do you think we are going down
> a
> >> : deadly path by having "many smaller" IndexSearchers open rather
> than
> >> : "one very large one"?
> >>
> >> I'm sorry ... i think i may have confused you, i forgot  that this
> >> thread
> >> was regarding partioning the index.  i ment one searcher *per  
> >> index* ...
> >> don't try to make a seperate searcher per client, or have a pool
> of
> >> searchers, or anything like that.  But if you have a need to
> partition
> >> your data into multiple indexes, then have one searcher per index.
> 
> PS> Actually I think I confused you first, and then you confused me  
> PS> back... Let me... uhh, clarify 'ourselves'.. :)
> 
> PS> My use of the word 'pool' was an error on my part (and a very
> silly
> PS> one).  I should really have meant "LRU Cache".
> 
> PS> We have recognized that there is a finite # of IndexSearchers
> that
> PS> can probably be open at one time.  So we'll use an LRU cache to
> make
> PS> sure only the 'actively' in use Searchers are open.  However
> there
> PS> will only be one IndexSearcher for a given physical Index
> directory
> PS> open at a time, we're just making sure only the recently used
> ones
> PS> are kept open to keep memory limits sane.
> 
> >>
> >> now assume you partition your data into two seperate indexes,  
> >> unless the
> >> way you partition your data lets you cleanly so that each of hte
> >> two indexes contains only half the number of terms as if you had  
> >> one big
> >> index, then sorting on a field in those two indexes will require  
> >> more RAM
> >> then sorting on the same data in asingle index.
> >>
> 
> PS> Our data is logically segmented into Projects.  Each Project can 
> 
> PS> contain Documents and Mail.  So we currently have 2 physical
> Indexes
> PS> per Project.  90% of the time our users work within one project
> at a
> PS> time, and only work in "document mode" or "mail mode".  Every now
> and
> PS> then they may need to do a general search across all Entities
> and/or
> PS> Projects they are involved in (accomplished with Mulitsearcher).
> PS> Perhaps we should just put Documents and Mail all in one Index
> for a
> PS> project (ie have 1 Index per project)??
> 
> PS> Part of the reason in to partition is to make the cost of
> rebuilding
> PS> a given project cheaper.  Reduces the risk of an Uber-Index being
> PS> corrupted and screwing all the users up.  We can order the
> reindexing
> PS> of projects to make sure our more important customers get
> re-indexed
> PS> first if there is a serious issue.
> 
> PS> I would have thought that partitioning indexes would have
> performance
> PS> benefits too:  a lot less data to scan (most of the data is
> already
> PS> relevant).
> 
> PS> Since this isn't in production yet, I'd rather be proven wrong
> now
> PS> rather than later! :)
> 
> PS> Thanks for your input.
> 
> PS> Paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 19:08:50 2005
Return-Path: <java-user-return-15387-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27416 invoked from network); 11 Jul 2005 19:08:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 19:08:49 -0000
Received: (qmail 67127 invoked by uid 500); 11 Jul 2005 19:08:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67105 invoked by uid 500); 11 Jul 2005 19:08:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67092 invoked by uid 99); 11 Jul 2005 19:08:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 12:08:41 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.207.123] (HELO web32109.mail.mud.yahoo.com) (68.142.207.123)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Jul 2005 12:08:38 -0700
Received: (qmail 64272 invoked by uid 60001); 11 Jul 2005 19:08:38 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=P/zfMHc8C9lEjMg3lcP1HC2ohizlRpdZ/t3JZabS7V7ztp1RQbtLx35uFsM8vtIfmBQRxFoeujVKfeipLDyS9roBxB2zZm5OszJF4V7oNVLQzBlVhgMv3bkDOBnwPkYNPk0tJvgmTxvmKA0iVF+pQj4B4crK4X8yN9D7yA/4QTI=  ;
Message-ID: <20050711190838.64270.qmail@web32109.mail.mud.yahoo.com>
Received: from [206.13.63.69] by web32109.mail.mud.yahoo.com via HTTP; Mon, 11 Jul 2005 12:08:37 PDT
Date: Mon, 11 Jul 2005 12:08:37 -0700 (PDT)
From: Aalap Parikh <aloo77@yahoo.com>
Subject: Re: Index Partitioning ( was Re: Search deadlocking under load)
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0507101727420.31070@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>I don't really know a lot about what gets loaded into
memory when you
>make/use a new searcher, but the one thing i've
learned from experience 
>is
>that the FieldCache (which gets used when you sort on
a field) contains
>every term in the field you are sorting on, and an
instance of 
>FieldCache
>exists for each IndexReader you open (which is one
big reason not to 
>open
>a seperate reader for every client).

You mentioned that re-using the same IndexSearcher
would provide better performance in terms of sorting
of search results, but what if the index I am
searching on is constantly being updated? Would using
the same Searcher pick up those updates (adds/removes)
or that I would need to instantiate a new Searcher for
each of the client requests in order for the search
results to reflect the updated or new docs in the
index?

Thanks,
Aalap.

--- Chris Hostetter <hossman_lucene@fucit.org> wrote:

> 
> : > Generally speaking, you only ever need one
> active Searcher, which
> : > all of
> : > your threads should be able to use.  (Of course,
> Nathan says that
> : > in his
> : > code base, doing this causes his JVM to freeze
> up, but I've never seen
> : > this myself).
> : >
> : Thanks for your response Chris.  Do you think we
> are going down a
> : deadly path by having "many smaller"
> IndexSearchers open rather than
> : "one very large one"?
> 
> I'm sorry ... i think i may have confused you, i
> forgot  that this thread
> was regarding partioning the index.  i ment one
> searcher *per index* ...
> don't try to make a seperate searcher per client, or
> have a pool of
> searchers, or anything like that.  But if you have a
> need to partition
> your data into multiple indexes, then have one
> searcher per index.
> 
> I don't really know a lot about what gets loaded
> into memory when you
> make/use a new searcher, but the one thing i've
> learned from experience is
> that the FieldCache (which gets used when you sort
> on a field) contains
> every term in the field you are sorting on, and an
> instance of FieldCache
> exists for each IndexReader you open (which is one
> big reason not to open
> a seperate reader for every client).
> 
> now assume you partition your data into two seperate
> indexes, unless the
> way you partition your data lets you cleanly so that
> each of hte
> two indexes contains only half the number of terms
> as if you had one big
> index, then sorting on a field in those two indexes
> will require more RAM
> then sorting on the same data in asingle index.
> 
> ...that's just one example i ran into when looking
> at partitioning data,
> i'm sure there are other cases where splitting your
> data up into seperate
> indexes isn't neccessarily more efficient then using
> one big index.
> 
> 
> 
> -Hoss
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 19:19:07 2005
Return-Path: <java-user-return-15388-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31221 invoked from network); 11 Jul 2005 19:19:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 19:19:06 -0000
Received: (qmail 89273 invoked by uid 500); 11 Jul 2005 19:18:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89249 invoked by uid 500); 11 Jul 2005 19:18:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89236 invoked by uid 99); 11 Jul 2005 19:18:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 12:18:59 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.72] (HELO smtpout.mac.com) (17.250.248.72)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 12:18:56 -0700
Received: from mac.com (smtpin01-en2 [10.13.10.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout15/MantshX 4.0) with ESMTP id j6BJIunA010160
	for <java-user@lucene.apache.org>; Mon, 11 Jul 2005 12:18:56 -0700 (PDT)
Received: from [127.0.0.1] (66-214-154-12.mpk-mres.charterpipeline.net [66.214.154.12])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin01/MantshX 4.0) with ESMTP id j6BJIsGM005661
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Mon, 11 Jul 2005 12:18:55 -0700 (PDT)
Message-ID: <42D2C61D.3060907@mac.com>
Date: Mon, 11 Jul 2005 12:18:53 -0700
From: "xing@mac.com" <xing@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: BooleanQuery$TooManyClauses
References: <42D2077F.4010106@mac.com> <C2EFB6A0-3BD8-443D-96F0-689291DA53BE@ehatchersolutions.com>
In-Reply-To: <C2EFB6A0-3BD8-443D-96F0-689291DA53BE@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

2500 vs 84. Wow. That's quite a few OR statements I would be saving 
following your guide of just indexing the parts of the datetime I plan 
to search on. Every ms count.

Now I have a clear picture of how range query works. Great stuff. Thanks.

Btw, coming from a db background I'm so used to writing queries in the 
fashion where I put the most distinct comparison statement, the one 
likely to return the least number of rows, first, in the where 
statement. Db can still be pretty dumb with bad statistics and choose 
the wrong execution plan so I like optimize for them when all possible 
and force the issue.

If I have a sample lucene query:

"+a:abc +b:cde +d:bbd +date:[2001 TO 2005] -e:noway"

Does Lucene's execution engine try to figure out via statistics, 
guesstimate, which path to take first? Or does it just go brute force 
and follow the execution plan from left to right? Or does it just do all 
of them individually, not executing the next search on the results of 
the prior, and then ORing them at the end?

Xing



Erik Hatcher wrote:
> 
> On Jul 11, 2005, at 1:45 AM, xing@mac.com wrote:
> 
>> Did a google serach on the problem when using the range search  phrase 
>> of  "+datefield:[199801 TO 200512]" (date stored as  "YYYYMMDD") which 
>> returns 1 million hits.
>>
>> error: org.apache.lucene.search.BooleanQuery$TooManyClauses
>>
>> Adding "-Dorg.apache.lucene.maxClauseCount=2400" to java option  
>> allowed the search query to run without error. The actual value  
>> needed is between 2300 and 2400. At 2300 the query fails.
>>
>> My question is how does Lucene perform range query?  As a bunch of  
>> smaller boolean queries? How does one estimate the number of  clauses 
>> required for a general query and more specifically on a  range query?
> 
> 
> RangeQuery expands under the covers to a BooleanQuery with all  matching 
> terms OR'd together.
> 
> In your case, if you've indexed a term for every day in that range  
> using YYYYMMDD then you've got 2,524 terms roughly = 7 * 365 - 31  
> (minus 31 because you'd omit December '05 since you are only going to  
> 200512).  If all you need is YYYYMM range searching, then index it as  
> that (that'd be 7 years * 12 months/year = 84 terms).
> 
>     Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 20:02:02 2005
Return-Path: <java-user-return-15389-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50444 invoked from network); 11 Jul 2005 20:02:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 20:02:02 -0000
Received: (qmail 66493 invoked by uid 500); 11 Jul 2005 20:01:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66474 invoked by uid 500); 11 Jul 2005 20:01:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66459 invoked by uid 99); 11 Jul 2005 20:01:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 13:01:55 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.28] (HELO pop04.mail.atl.earthlink.net) (207.69.200.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 13:01:52 -0700
Received: from wamui-chipeau.atl.sa.earthlink.net ([209.86.224.30])
	by pop04.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1Ds4TQ-0003ik-00
	for java-user@lucene.apache.org; Mon, 11 Jul 2005 16:01:52 -0400
Message-ID: <1215225.1121112112259.JavaMail.root@wamui-chipeau.atl.sa.earthlink.net>
Date: Mon, 11 Jul 2005 16:01:52 -0400 (EDT)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Re: How to get the un-stemed word
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What about storing the unstemed word with the same position as the stemmed word.  Would that show up in the TermVectors?

-----Original Message-----
From: mark harwood <markharw00d@yahoo.co.uk>
Sent: Jul 8, 2005 10:44 AM
To: java-user@lucene.apache.org, Andrew Boyd <Andrew.Boyd@bbtech.net>
Subject: Re: How to get the un-stemed word

You can get the unstemmed word by re-analysing the
(hopefully stored somewhere) text.
Look at the tokens emitted from the TokenStream and
when you get to the one that matches the stemmed form
you can use the token offset info to retrieve the
unstemmed form from the original text. 

Another option which avoids re-analysis is to store
the TermVector with TermPositionVector info enabled.
All the offsets are then stored in the index, rather
than computed on-the-fly by an Analyzer.

The highlighter in the sandbox can use both of these
approaches to get the original forms.

Cheers
Mark


	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



Andrew Boyd
Software Architect
Sun Certified J2EE Architect
B&B Technical Services Inc.
205.422.2557

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 20:12:00 2005
Return-Path: <java-user-return-15390-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53853 invoked from network); 11 Jul 2005 20:12:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 20:12:00 -0000
Received: (qmail 96462 invoked by uid 500); 11 Jul 2005 20:11:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96437 invoked by uid 500); 11 Jul 2005 20:11:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96420 invoked by uid 99); 11 Jul 2005 20:11:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 13:11:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.38] (HELO web31105.mail.mud.yahoo.com) (68.142.200.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Jul 2005 13:11:48 -0700
Received: (qmail 37468 invoked by uid 60001); 11 Jul 2005 20:11:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=J77sV2hur29beX6AkNG6L19iPv2LEtmk4q9HOThXnYQCjSv+GBPegIS+aEnPPc0qsbmPEs1pYQGvHPM4RPRSskv9u6EL97nX+Q6+l5kQPdQ1BHw7RVhcRJTRILjpQFTknKMQKYLUm4AwW4Bb7iasmG98f2tToOvYrwgQhgOJGlA=  ;
Message-ID: <20050711201146.37466.qmail@web31105.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31105.mail.mud.yahoo.com via HTTP; Mon, 11 Jul 2005 13:11:46 PDT
Date: Mon, 11 Jul 2005 13:11:46 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index Partitioning ( was Re: Search deadlocking under load)
To: java-user@lucene.apache.org
In-Reply-To: <20050711190838.64270.qmail@web32109.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you want really real-time updates of search results, then yes. 
However, maybe you can live with near-real-time results, in which cases
you can add some logic to your application to check for index version
only every N requests/minutes/hours.

Otis


--- Aalap Parikh <aloo77@yahoo.com> wrote:

> >I don't really know a lot about what gets loaded into
> memory when you
> >make/use a new searcher, but the one thing i've
> learned from experience 
> >is
> >that the FieldCache (which gets used when you sort on
> a field) contains
> >every term in the field you are sorting on, and an
> instance of 
> >FieldCache
> >exists for each IndexReader you open (which is one
> big reason not to 
> >open
> >a seperate reader for every client).
> 
> You mentioned that re-using the same IndexSearcher
> would provide better performance in terms of sorting
> of search results, but what if the index I am
> searching on is constantly being updated? Would using
> the same Searcher pick up those updates (adds/removes)
> or that I would need to instantiate a new Searcher for
> each of the client requests in order for the search
> results to reflect the updated or new docs in the
> index?
> 
> Thanks,
> Aalap.
> 
> --- Chris Hostetter <hossman_lucene@fucit.org> wrote:
> 
> > 
> > : > Generally speaking, you only ever need one
> > active Searcher, which
> > : > all of
> > : > your threads should be able to use.  (Of course,
> > Nathan says that
> > : > in his
> > : > code base, doing this causes his JVM to freeze
> > up, but I've never seen
> > : > this myself).
> > : >
> > : Thanks for your response Chris.  Do you think we
> > are going down a
> > : deadly path by having "many smaller"
> > IndexSearchers open rather than
> > : "one very large one"?
> > 
> > I'm sorry ... i think i may have confused you, i
> > forgot  that this thread
> > was regarding partioning the index.  i ment one
> > searcher *per index* ...
> > don't try to make a seperate searcher per client, or
> > have a pool of
> > searchers, or anything like that.  But if you have a
> > need to partition
> > your data into multiple indexes, then have one
> > searcher per index.
> > 
> > I don't really know a lot about what gets loaded
> > into memory when you
> > make/use a new searcher, but the one thing i've
> > learned from experience is
> > that the FieldCache (which gets used when you sort
> > on a field) contains
> > every term in the field you are sorting on, and an
> > instance of FieldCache
> > exists for each IndexReader you open (which is one
> > big reason not to open
> > a seperate reader for every client).
> > 
> > now assume you partition your data into two seperate
> > indexes, unless the
> > way you partition your data lets you cleanly so that
> > each of hte
> > two indexes contains only half the number of terms
> > as if you had one big
> > index, then sorting on a field in those two indexes
> > will require more RAM
> > then sorting on the same data in asingle index.
> > 
> > ...that's just one example i ran into when looking
> > at partitioning data,
> > i'm sure there are other cases where splitting your
> > data up into seperate
> > indexes isn't neccessarily more efficient then using
> > one big index.
> > 
> > 
> > 
> > -Hoss
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail:
> > java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail:
> > java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around 
> http://mail.yahoo.com 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 21:08:14 2005
Return-Path: <java-user-return-15391-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82219 invoked from network); 11 Jul 2005 21:08:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 21:08:13 -0000
Received: (qmail 16952 invoked by uid 500); 11 Jul 2005 21:08:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16932 invoked by uid 500); 11 Jul 2005 21:08:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16919 invoked by uid 99); 11 Jul 2005 21:08:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 14:08:06 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.11.33] (HELO smtp002.mail.ukl.yahoo.com) (217.12.11.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 11 Jul 2005 14:08:03 -0700
Received: (qmail 13958 invoked from network); 11 Jul 2005 21:08:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:Message-ID:Date:From:User-Agent:X-Accept-Language:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=eYhT9YBeDGkp4IMio3oKrqVDkUFAaUHDRyu/NFak1c2iBgtWRYDg5/veyIaxBDszFL9TdxXeGbUui/LFUG4JxPtV7UbL89v2SOaKjN5lEIbBzHeBPG+MTEcvh/Vh8EbDReeaODQBcvtsh6vUhoMhnkqBz5akBmePa3DYNJ5lfKo=  ;
Received: from unknown (HELO ?10.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp002.mail.ukl.yahoo.com with SMTP; 11 Jul 2005 21:08:02 -0000
Message-ID: <42D2DFB8.1050604@yahoo.co.uk>
Date: Mon, 11 Jul 2005 22:08:08 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 0.8 (Windows/20040913)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: How to get the un-stemed word
References: <1215225.1121112112259.JavaMail.root@wamui-chipeau.atl.sa.earthlink.net>
In-Reply-To: <1215225.1121112112259.JavaMail.root@wamui-chipeau.atl.sa.earthlink.net>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

>>Would that show up in the TermVectors?

Yes, but uou would need a scheme for identifying "original, unstemmed" terms vs stems. For example, you could use another field and analyzer for the unstemmed forms.


Andrew Boyd wrote:

>What about storing the unstemed word with the same position as the stemmed word.  Would that show up in the TermVectors?
>
>-----Original Message-----
>From: mark harwood <markharw00d@yahoo.co.uk>
>Sent: Jul 8, 2005 10:44 AM
>To: java-user@lucene.apache.org, Andrew Boyd <Andrew.Boyd@bbtech.net>
>Subject: Re: How to get the un-stemed word
>
>You can get the unstemmed word by re-analysing the
>(hopefully stored somewhere) text.
>Look at the tokens emitted from the TokenStream and
>when you get to the one that matches the stemmed form
>you can use the token offset info to retrieve the
>unstemmed form from the original text. 
>
>Another option which avoids re-analysis is to store
>the TermVector with TermPositionVector info enabled.
>All the offsets are then stored in the index, rather
>than computed on-the-fly by an Analyzer.
>
>The highlighter in the sandbox can use both of these
>approaches to get the original forms.
>
>Cheers
>Mark
>
>
>	
>	
>		
>___________________________________________________________ 
>Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>Andrew Boyd
>Software Architect
>Sun Certified J2EE Architect
>B&B Technical Services Inc.
>205.422.2557
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>  
>


		
___________________________________________________________ 
How much free photo storage do you get? Store your holiday 
snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 21:41:35 2005
Return-Path: <java-user-return-15392-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90230 invoked from network); 11 Jul 2005 21:41:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 21:41:34 -0000
Received: (qmail 76014 invoked by uid 500); 11 Jul 2005 21:41:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75977 invoked by uid 500); 11 Jul 2005 21:41:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75940 invoked by uid 99); 11 Jul 2005 21:41:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 14:41:13 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.95.77.96] (HELO phobos.net-temps.com) (64.95.77.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 14:41:11 -0700
Received: from localhost (localhost [127.0.0.1])
	by phobos.net-temps.com (Postfix) with ESMTP id 634513F45D;
	Mon, 11 Jul 2005 17:41:08 -0400 (EDT)
Received: from phobos.net-temps.com ([127.0.0.1])
 by localhost (phobos.net-temps.com [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 88561-07; Mon, 11 Jul 2005 17:41:06 -0400 (EDT)
Received: from nbrackett (europa [192.168.1.21])
	by phobos.net-temps.com (Postfix) with SMTP id 861543F443
	for <java-user@lucene.apache.org>; Mon, 11 Jul 2005 17:41:06 -0400 (EDT)
From: "Nathan Brackett" <nbrackett@net-temps.com>
To: <java-user@lucene.apache.org>
Subject: RE: Search deadlocking under load
Date: Mon, 11 Jul 2005 17:43:29 -0400
Message-ID: <LJEJJJKMGLFKGPJJOLFJCEKJIGAA.nbrackett@net-temps.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Importance: Normal
In-Reply-To: <20050711175654.80867.qmail@web31110.mail.mud.yahoo.com>
X-Virus-Scanned: by amavisd-new at net-temps.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the advice. That ought to reduce contention a bit in that
particular method.

I've been reviewing a large amount of thread dumps today and I was wondering
if it's common to see many threads that look like this:

"tcpConnection-8080-20" daemon prio=5 tid=0x081ba000 nid=0x810ac00 waiting
for monitor entry [bf24b000..bf24bd20]
        at
org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(Compou
ndFileReader.java:216)
        - waiting to lock <0x2ee24c48> (a
org.apache.lucene.store.FSInputStream)

When I get the deadlock situation, I often see a few of these lying around,
but no matching thread that actually has the lock on 0x2ee24c48 in the dump.
Is this normal? Not really a thread dump pro.



-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Monday, July 11, 2005 1:57 PM
To: java-user@lucene.apache.org
Subject: RE: Search deadlocking under load


Hi Nick,

Without looking at the source of that method, I'd suggest first trying
the multifile index format (you can easily convert to it by setting the
new format on IndexWriter and optimizing it).  I'd be interested to
know if this eliminates the problem, or at least makes it harder to
hit.

Otis


--- Nathan Brackett <nbrackett@net-temps.com> wrote:

> Hey Otis,
>
> Thanks for the hasty response and apologies for my delayed response.
> It was
> Friday and time to go :)
>
> The queries we're running are very varied (wildcard, phrase, normal).
> The
> index is only about a 1/2 gig in size (maybe 250,000 documents). The
> machine
> is running FreeBSD 5.3 with ~2 gig RAM.
>
> I got a thread dump from right around the time that the process would
> deadlock and not come back and I noticed that almost all of the
> threads were
> waiting on the same method. Here's what the trace looks like: (small
> sample
> for the sake of brevity...the real dump is huge)
>
> tcpConnection-8080-32:
>   [1]
> org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal
> (CompoundFileReader.java:217)
>   [2] org.apache.lucene.store.InputStream.refill
> (InputStream.java:158)
>   [3] org.apache.lucene.store.InputStream.readByte
> (InputStream.java:43)
>   [4] org.apache.lucene.store.InputStream.readVInt
> (InputStream.java:83)
>   [5] org.apache.lucene.index.SegmentTermDocs.read
> (SegmentTermDocs.java:126)
>   [6] org.apache.lucene.search.TermScorer.next (TermScorer.java:55)
>   [7] org.apache.lucene.search.BooleanScorer.next
> (BooleanScorer.java:112)
>   [8] org.apache.lucene.search.Scorer.score (Scorer.java:37)
>   [9] org.apache.lucene.search.IndexSearcher.search
> (IndexSearcher.java:92)
>   [10] org.apache.lucene.search.Hits.getMoreDocs (Hits.java:64)
>   [11] org.apache.lucene.search.Hits.<init> (Hits.java:43)
>   [12] org.apache.lucene.search.Searcher.search (Searcher.java:33)
>   [13] org.apache.lucene.search.Searcher.search (Searcher.java:27)
>   [14] com.nettemps.search.backend.SingleIndexManager.search
> (SingleIndexManager.java:335)
>   [15] com.nettemps.search.backend.IndexAccessControl.doSearch
> (IndexAccessControl.java:100)
>   [16] com.nettemps.search.server.SearchServerImpl.searchResumes
> (SearchServerImpl.java:402)
>   [17]
>
com.nettemps.search.server.SearchServerReadOnly_Tie.invoke_searchResumes
> (SearchServerReadOnly_Tie.java:93)
>   [18]
> com.nettemps.search.server.SearchServerReadOnly_Tie.processingHook
> (SearchServerReadOnly_Tie.java:298)
>   [19] com.sun.xml.rpc.server.StreamingHandler.handle
> (StreamingHandler.java:321)
>   [20] com.sun.xml.rpc.server.http.JAXRPCServletDelegate.doPost
> (JAXRPCServletDelegate.java:443)
>   [21] com.sun.xml.rpc.server.http.JAXRPCServlet.doPost
> (JAXRPCServlet.java:102)
>   [22] javax.servlet.http.HttpServlet.service (HttpServlet.java:165)
>   [23] javax.servlet.http.HttpServlet.service (HttpServlet.java:103)
>   [24] com.caucho.server.http.FilterChainServlet.doFilter
> (FilterChainServlet.java:96)
>   [25] com.caucho.server.http.Invocation.service
> (Invocation.java:315)
>   [26] com.caucho.server.http.CacheInvocation.service
> (CacheInvocation.java:135)
>   [27] com.caucho.server.http.HttpRequest.handleRequest
> (HttpRequest.java:253)
>   [28] com.caucho.server.http.HttpRequest.handleConnection
> (HttpRequest.java:170)
>   [29] com.caucho.server.TcpConnection.run (TcpConnection.java:139)
>   [30] java.lang.Thread.run (Thread.java:534)
>
> I took a look at that readInternal method and saw that the contention
> is
> around an InputStream that I assume reads from the actual index file
> and
> returns it for use by the method. We are running many threads that
> are
> attempting to do searches at the same time (roughly 30 - 35), so that
> explains why the search times would go up.
>
> In an attempt to reduce the amount of contention, we synchronized our
> search
> method (the one that makes the actual call to Lucene's search: [14]
> com.nettemps.search.backend.SingleIndexManager.search
> (SingleIndexManager.java:335)). This also caused the same results
> when hit
> with too many threads.
>
> We're really stuck at this point as to what to try. Any advice?
>
>
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Sent: Friday, July 08, 2005 3:40 PM
> To: java-user@lucene.apache.org
> Subject: Re: Search deadlocking under load
>
>
> Nathan,
>
> 3) is the recommended usage.
> Your index is on an NFS share, which means you are searching it over
> the network.  Make it local, and you should see performance
> improvements.  Local or remove, it makes sense that searches take
> longer to execute, and the load goes up.  Yes, it shouldn't deadlock.
> You shouldn't need to synchronize access to IndexSearcher.
> When your JVM locks up next time, kill it, get the thread dump, and
> send it to the list, so we can try to remove the bottleneck, if
> that's
> possible.
>
> How many queries/second do you run, and what kinds of queries are
> they,
> how big is your index and what kind of hardware (disks, RAM, CPU) are
> you using?
>
> Otis
>
> --- Nathan Brackett <nbrackett@net-temps.com> wrote:
>
> > Hey all,
> >
> > We're looking to use Lucene as the back end to our website and
> we're
> > running
> > into an unusual deadlocking problem.
> >
> > For testing purposes, we're just running one web server (threaded
> > environment) against an index mounted on an NFS share. This machine
> > performs
> > searches only against this index so it's not being touched. We have
> > tried a
> > few different models so far:
> >
> > 1) Pooling IndexSearcher objects: Occasionally we would run into
> > OutOfMemory
> > problems as we would not block if a request came through and all
> > IndexSearchers were already checked out, we would just create a
> > temporary
> > one and then dispose of it once it was returned to the pool.
> >
> > 2) Create a new IndexSearcher each time: Every request to search
> > would
> > create an IndexSearcher object. This quickly gave OutOfMemory
> errors,
> > even
> > when we would close them out directly after.
> >
> > 3) Use a global IndexSearcher: This is the model we're working with
> > now. The
> > model holds up fine under low-moderate load and is, in fact, much
> > faster at
> > searching (probably due to some caching mechanism). Under heavy
> load
> > though,
> > the CPU will spike up to 99% and never come back down until we kill
> > -9 the
> > process. Also, as you ramp the load, we've discovered that search
> > times go
> > up as well. Searches will generally come back after 40ms, but as
> the
> > load
> > goes up the searches don't come back for up to 20 seconds.
> >
> > We've been attempting to find where the problem is for the last
> week
> > with no
> > luck. Our index is optimized, so there is only one file. Do we need
> > to
> > synchronize access to the global IndexSearcher so that only one
> > search can
> > run at a time? That poses a bit of a problem as if a particular
> > search takes
> > a long time, all others will wait. This problem does not look like
> an
> > OutOrMemory error because the memory usage when the spike occurs is
> > usually
> > in the range of 150meg used with a ceiling of 650meg. Anyone else
> > experiencing any problems like this or have any idea where we
> should
> > be
> > looking? Thanks.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 11 22:32:48 2005
Return-Path: <java-user-return-15393-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3510 invoked from network); 11 Jul 2005 22:32:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 11 Jul 2005 22:32:48 -0000
Received: (qmail 47941 invoked by uid 500); 11 Jul 2005 22:32:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47918 invoked by uid 500); 11 Jul 2005 22:32:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47905 invoked by uid 99); 11 Jul 2005 22:32:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 15:32:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 11 Jul 2005 15:32:38 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id AA15515A02D
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2005 08:32:32 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 934B264007
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2005 08:32:32 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 27967-01-3 for <java-user@lucene.apache.org>;
 Tue, 12 Jul 2005 08:32:30 +1000 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by herald.aconex.com (Postfix) with ESMTP id 388CC64002
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2005 08:32:30 +1000 (EST)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050711180050.53806.qmail@web31114.mail.mud.yahoo.com>
References: <20050711180050.53806.qmail@web31114.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <A7BD7494-B5B6-471C-BC43-FF03CFF1E001@aconex.com>
Content-Transfer-Encoding: quoted-printable
From: Paul Smith <psmith@aconex.com>
Subject: Re: Re[2]: Index Partitioning ( was Re: Search deadlocking under load)
Date: Tue, 12 Jul 2005 08:32:33 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Many thanks for confirming the principles should work fine.  It is a =20
load off my mind! :)

On index update, a small Event is triggered into a Buffer, that is =20
periodically (every 30 seconds) processed to coalesce them, then =20
ensure that any open IndexSearcher in the cache is closed.

On 12/07/2005, at 4:00 AM, Otis Gospodnetic wrote:

> Paul - I'm doing the same (smaller indices) for Simpy.com for similar
> reasons (fast, independent and faster reindexing, etc.).  Each index
> has its own IndexSearcher, and they are kept in a LRU data structure.
> Before each search the index version is checked, and new IndexSearcher
> created in case the index changed.
>
> Otis
>
> --- Sven Duzont <sven.duzont@keljob.com> wrote:
>
>
>> Hello,
>>
>> We are already using this design in production for a email job
>> application system.
>> Each client (company) have an account and may have multiple users
>> When a new client is created, a new lucene index is automatically
>> created when new job-applications arrive for this account.
>> Job applications are in principle owned by users, but some times they
>> can share it with other users in same account, so the search can be
>> user-independent.
>> This design works fine for us as the flow of job applications is not
>> the same for different accounts. There are lucene indices that are
>> more often updated than others.
>> It also permit us to rebuild one client index without impacting
>> others
>>
>> We have only one problem : when the index is updated and searched at
>> the same time, the index may be corrupted and an exception may be
>> thrown by the indexer ("Read past OEF", i unfortunately don't have
>> the stack trace right now under my hand). I think that it is because
>> the search and indexation are made in two different java processes.
>> We will rework the routines to lock the search when an indexation is
>> running and vice versa
>>
>> --- sven
>>
>> lundi 11 juillet 2005, 03:03:29, vous avez =E9crit:
>>
>>
>> PS> On 11/07/2005, at 10:43 AM, Chris Hostetter wrote:
>>
>>
>>>>
>>>> : > Generally speaking, you only ever need one active Searcher,
>>>>
>> which
>>
>>>> : > all of
>>>> : > your threads should be able to use.  (Of course, Nathan says
>>>>
>> that
>>
>>>> : > in his
>>>> : > code base, doing this causes his JVM to freeze up, but I've
>>>> never seen
>>>> : > this myself).
>>>> : >
>>>> : Thanks for your response Chris.  Do you think we are going down
>>>>
>> a
>>
>>>> : deadly path by having "many smaller" IndexSearchers open rather
>>>>
>> than
>>
>>>> : "one very large one"?
>>>>
>>>> I'm sorry ... i think i may have confused you, i forgot  that this
>>>> thread
>>>> was regarding partioning the index.  i ment one searcher *per
>>>> index* ...
>>>> don't try to make a seperate searcher per client, or have a pool
>>>>
>> of
>>
>>>> searchers, or anything like that.  But if you have a need to
>>>>
>> partition
>>
>>>> your data into multiple indexes, then have one searcher per index.
>>>>
>>
>> PS> Actually I think I confused you first, and then you confused me
>> PS> back... Let me... uhh, clarify 'ourselves'.. :)
>>
>> PS> My use of the word 'pool' was an error on my part (and a very
>> silly
>> PS> one).  I should really have meant "LRU Cache".
>>
>> PS> We have recognized that there is a finite # of IndexSearchers
>> that
>> PS> can probably be open at one time.  So we'll use an LRU cache to
>> make
>> PS> sure only the 'actively' in use Searchers are open.  However
>> there
>> PS> will only be one IndexSearcher for a given physical Index
>> directory
>> PS> open at a time, we're just making sure only the recently used
>> ones
>> PS> are kept open to keep memory limits sane.
>>
>>
>>>>
>>>> now assume you partition your data into two seperate indexes,
>>>> unless the
>>>> way you partition your data lets you cleanly so that each of hte
>>>> two indexes contains only half the number of terms as if you had
>>>> one big
>>>> index, then sorting on a field in those two indexes will require
>>>> more RAM
>>>> then sorting on the same data in asingle index.
>>>>
>>>>
>>
>> PS> Our data is logically segmented into Projects.  Each Project can
>>
>> PS> contain Documents and Mail.  So we currently have 2 physical
>> Indexes
>> PS> per Project.  90% of the time our users work within one project
>> at a
>> PS> time, and only work in "document mode" or "mail mode".  Every now
>> and
>> PS> then they may need to do a general search across all Entities
>> and/or
>> PS> Projects they are involved in (accomplished with Mulitsearcher).
>> PS> Perhaps we should just put Documents and Mail all in one Index
>> for a
>> PS> project (ie have 1 Index per project)??
>>
>> PS> Part of the reason in to partition is to make the cost of
>> rebuilding
>> PS> a given project cheaper.  Reduces the risk of an Uber-Index being
>> PS> corrupted and screwing all the users up.  We can order the
>> reindexing
>> PS> of projects to make sure our more important customers get
>> re-indexed
>> PS> first if there is a serious issue.
>>
>> PS> I would have thought that partitioning indexes would have
>> performance
>> PS> benefits too:  a lot less data to scan (most of the data is
>> already
>> PS> relevant).
>>
>> PS> Since this isn't in production yet, I'd rather be proven wrong
>> now
>> PS> rather than later! :)
>>
>> PS> Thanks for your input.
>>
>> PS> Paul
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 12 07:50:22 2005
Return-Path: <java-user-return-15394-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71071 invoked from network); 12 Jul 2005 07:50:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2005 07:50:21 -0000
Received: (qmail 33410 invoked by uid 500); 12 Jul 2005 07:50:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33389 invoked by uid 500); 12 Jul 2005 07:50:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33365 invoked by uid 99); 12 Jul 2005 07:50:11 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (hermes.apache.org: local policy)
Received: from [160.92.103.161] (HELO srv-grp-s01.axime.com) (160.92.103.161)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 00:50:02 -0700
Received: from srv-grp-s06.dev.atos.fr ([172.18.100.67]) by srv-grp-s01.axime.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 12 Jul 2005 09:47:24 +0200
content-class: urn:content-classes:message
Subject: Lucene and numerical fields search
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 12 Jul 2005 09:49:29 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Message-ID: <66C1CC04412C4A4785E49FE965C9456E093F89@srv-grp-s06.dev.atos.fr>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene and numerical fields search
Thread-Index: AcWGtjwHHl2RVp5KScCSzB38p6gVXQ==
From: =?iso-8859-1?Q?Rifflard_Micka=EBl?= <Mickael.Rifflard@atosorigin.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Jul 2005 07:47:24.0781 (UTC) FILETIME=[F17079D0:01C586B5]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I'm using Lucene as a fulltext search engine since a year now and this =
one works well for this.
Now, I want to add to my application search capability like : aField =
greater than 10 , aField between 10 and 20.
For this, I used RangeQuery (aField:[10 TO 20] for exemple) and I =
received all documents with field between these 2 values.
All was perfect before... benchs. These one were poor. I received =
results after dozens of seconds.

Here is reasons of this :=20

Firstly, I don't know min or max values for my field so a request can be =
aField:[0 TO 1000000].=20
If I understand, this request is tranform in a BooleanQuery with one =
million of TermQuery separated by OR.

Secondly, to perform greater than or lower than request, I wanted to use =
RangeQuery with Integer.MAX_VALUE (for greater than)=20
or Integer.MIN_VALUE (for lower than). If I understand always, this =
RangeQuery would be transform in a BooleanQuery with many=20
millions of TermQuery.=20

How to perform this kind of searchs (with another Lucene use, with =
anoter solution, ...) ?

Many thanks for your comments.


	Micka=EBl Rifflard



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 12 08:14:53 2005
Return-Path: <java-user-return-15395-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76863 invoked from network); 12 Jul 2005 08:14:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2005 08:14:52 -0000
Received: (qmail 47117 invoked by uid 500); 12 Jul 2005 08:14:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47093 invoked by uid 500); 12 Jul 2005 08:14:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47080 invoked by uid 99); 12 Jul 2005 08:14:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 01:14:43 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.75.234.2] (HELO smtpgate.saa-cons.co.uk) (194.75.234.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 01:14:41 -0700
Received: (from uucp@localhost)
	by smtpgate.saa-cons.co.uk (8.8.8/8.8.8) id JAA01843
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2005 09:15:59 +0100 (BST)
	(envelope-from Paul.Illingworth@saaconsultants.com)
Received: from domino-mail.saa-cons.co.uk(10.10.10.4) by smtpgate.saa-cons.co.uk via smap (V2.1)
	id xma001837; Tue, 12 Jul 05 09:15:57 +0100
In-Reply-To: <66C1CC04412C4A4785E49FE965C9456E093F89@srv-grp-s06.dev.atos.fr>
Subject: Re: Lucene and numerical fields search
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.1 January 21, 2004
Message-ID: <OF84A33953.2F7410E3-ON8025703C.002CA6B7-8025703C.002D6E88@SAAConsultants.com>
From: Paul.Illingworth@saaconsultants.com
Date: Tue, 12 Jul 2005 09:15:44 +0100
X-MIMETrack: Serialize by Router on domino-mail/Saa(Release 6.5.1|January 21, 2004) at
 12/07/2005 09:15:45
MIME-Version: 1.0
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N






I have similar requirements. To get around the "Too many clauses" probl=
em I
am creating a Filter (this takes one or two seconds to create on an ind=
ex
of around 250000 documents) instead of using the RangeQuery. It's not i=
deal
but it does sidestep the problem. If you are using the same range in yo=
ur
queries then you can cache the filters and these can be reused on the s=
ame
IndexReader/IndexSearcher instance.

Paul I.


                                                                       =
    
             Rifflard Micka=EBl                                        =
      
             <Mickael.Rifflard                                         =
    
             @atosorigin.com>                                          =
 To 
                                       <java-user@lucene.apache.org>   =
    
             12/07/2005 08:49                                          =
 cc 
                                                                       =
    
                                                                   Subj=
ect 
             Please respond to         Lucene and numerical fields sear=
ch  
             java-user@lucene.                                         =
    
                apache.org                                             =
    
                                                                       =
    
                                                                       =
    
                                                                       =
    
                                                                       =
    




Hi all,

I'm using Lucene as a fulltext search engine since a year now and this =
one
works well for this.
Now, I want to add to my application search capability like : aField
greater than 10 , aField between 10 and 20.
For this, I used RangeQuery (aField:[10 TO 20] for exemple) and I recei=
ved
all documents with field between these 2 values.
All was perfect before... benchs. These one were poor. I received resul=
ts
after dozens of seconds.

Here is reasons of this :

Firstly, I don't know min or max values for my field so a request can b=
e
aField:[0 TO 1000000].
If I understand, this request is tranform in a BooleanQuery with one
million of TermQuery separated by OR.

Secondly, to perform greater than or lower than request, I wanted to us=
e
RangeQuery with Integer.MAX_VALUE (for greater than)
or Integer.MIN_VALUE (for lower than). If I understand always, this
RangeQuery would be transform in a BooleanQuery with many
millions of TermQuery.

How to perform this kind of searchs (with another Lucene use, with anot=
er
solution, ...) ?

Many thanks for your comments.


             Micka=EBl Rifflard



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

=



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 12 08:31:51 2005
Return-Path: <java-user-return-15396-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83796 invoked from network); 12 Jul 2005 08:31:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2005 08:31:50 -0000
Received: (qmail 71267 invoked by uid 500); 12 Jul 2005 08:31:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71249 invoked by uid 500); 12 Jul 2005 08:31:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71236 invoked by uid 99); 12 Jul 2005 08:31:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 01:31:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [160.92.103.162] (HELO srv-grp-s02.axime.com) (160.92.103.162)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 01:31:40 -0700
Received: from srv-grp-s06.dev.atos.fr ([172.18.100.67]) by srv-grp-s02.axime.com with Microsoft SMTPSVC(5.0.2195.6713);
	 Tue, 12 Jul 2005 10:32:53 +0200
content-class: urn:content-classes:message
Subject: RE: Lucene and numerical fields search
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable
Date: Tue, 12 Jul 2005 10:31:38 +0200
X-MimeOLE: Produced By Microsoft Exchange V6.0.6603.0
Message-ID: <66C1CC04412C4A4785E49FE965C9456E093F8A@srv-grp-s06.dev.atos.fr>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Lucene and numerical fields search
Thread-Index: AcWGucUeOI1Aj7/NT52jcu6vxj8xTQAAd1IQ
From: =?iso-8859-1?Q?Rifflard_Micka=EBl?= <Mickael.Rifflard@atosorigin.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 12 Jul 2005 08:32:53.0875 (UTC) FILETIME=[4C1B2C30:01C586BC]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Paul,

I have seen Filter feature and search how to use it to solve my problem.
But users can search in indeterminate range so I don't find how to use =
filters in that case.

	Micka=EBl

-----Message d'origine-----
De : Paul.Illingworth@saaconsultants.com
[mailto:Paul.Illingworth@saaconsultants.com]
Envoy=E9 : mardi 12 juillet 2005 10:16
=C0 : java-user@lucene.apache.org
Objet : Re: Lucene and numerical fields search







I have similar requirements. To get around the "Too many clauses" =
problem I
am creating a Filter (this takes one or two seconds to create on an =
index
of around 250000 documents) instead of using the RangeQuery. It's not =
ideal
but it does sidestep the problem. If you are using the same range in =
your
queries then you can cache the filters and these can be reused on the =
same
IndexReader/IndexSearcher instance.

Paul I.


                                                                         =
 =20
             Rifflard Micka=EBl                                          =
   =20
             <Mickael.Rifflard                                           =
 =20
             @atosorigin.com>                                           =
To=20
                                       <java-user@lucene.apache.org>     =
 =20
             12/07/2005 08:49                                           =
cc=20
                                                                         =
 =20
                                                                   =
Subject=20
             Please respond to         Lucene and numerical fields =
search =20
             java-user@lucene.                                           =
 =20
                apache.org                                               =
 =20
                                                                         =
 =20
                                                                         =
 =20
                                                                         =
 =20
                                                                         =
 =20




Hi all,

I'm using Lucene as a fulltext search engine since a year now and this =
one
works well for this.
Now, I want to add to my application search capability like : aField
greater than 10 , aField between 10 and 20.
For this, I used RangeQuery (aField:[10 TO 20] for exemple) and I =
received
all documents with field between these 2 values.
All was perfect before... benchs. These one were poor. I received =
results
after dozens of seconds.

Here is reasons of this :

Firstly, I don't know min or max values for my field so a request can be
aField:[0 TO 1000000].
If I understand, this request is tranform in a BooleanQuery with one
million of TermQuery separated by OR.

Secondly, to perform greater than or lower than request, I wanted to use
RangeQuery with Integer.MAX_VALUE (for greater than)
or Integer.MIN_VALUE (for lower than). If I understand always, this
RangeQuery would be transform in a BooleanQuery with many
millions of TermQuery.

How to perform this kind of searchs (with another Lucene use, with =
anoter
solution, ...) ?

Many thanks for your comments.


             Micka=EBl Rifflard



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 12 09:03:57 2005
Return-Path: <java-user-return-15397-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96016 invoked from network); 12 Jul 2005 09:03:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2005 09:03:57 -0000
Received: (qmail 30202 invoked by uid 500); 12 Jul 2005 09:03:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30182 invoked by uid 500); 12 Jul 2005 09:03:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30169 invoked by uid 99); 12 Jul 2005 09:03:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 02:03:45 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.75.234.2] (HELO smtpgate.saa-cons.co.uk) (194.75.234.2)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 02:03:41 -0700
Received: (from uucp@localhost)
	by smtpgate.saa-cons.co.uk (8.8.8/8.8.8) id KAA02823
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2005 10:05:00 +0100 (BST)
	(envelope-from Paul.Illingworth@saaconsultants.com)
Received: from domino-mail.saa-cons.co.uk(10.10.10.4) by smtpgate.saa-cons.co.uk via smap (V2.1)
	id xma002816; Tue, 12 Jul 05 10:04:43 +0100
In-Reply-To: <66C1CC04412C4A4785E49FE965C9456E093F8A@srv-grp-s06.dev.atos.fr>
Subject: RE: Lucene and numerical fields search
To: java-user@lucene.apache.org
X-Mailer: Lotus Notes Release 6.5.1 January 21, 2004
Message-ID: <OF065910E6.FB818119-ON8025703C.00314686-8025703C.0031E5DC@SAAConsultants.com>
From: Paul.Illingworth@saaconsultants.com
Date: Tue, 12 Jul 2005 10:04:31 +0100
X-MIMETrack: Serialize by Router on domino-mail/Saa(Release 6.5.1|January 21, 2004) at
 12/07/2005 10:04:32
MIME-Version: 1.0
Content-type: text/plain; charset=ISO-8859-1
Content-transfer-encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N






Hi Micka=EBl,

Take a look at the org.apache.lucene.search.DateFilter class that comes=

with Lucene. This does date range filtering (I am using a modified vers=
ion
of this class for filtering my date format). It should be relatively
strightforward to modify this for filtering numeric ranges. If your num=
bers
are stored as zero padded Strings then you should be able to leave the
bits() method as is otherwise you might have to put some String to numb=
er
conversion in there somewhere.

Regards

Paul I


                                                                       =
    
             Rifflard Micka=EBl                                        =
      
             <Mickael.Rifflard                                         =
    
             @atosorigin.com>                                          =
 To 
                                       <java-user@lucene.apache.org>   =
    
             12/07/2005 09:31                                          =
 cc 
                                                                       =
    
                                                                   Subj=
ect 
             Please respond to         RE: Lucene and numerical fields =
    
             java-user@lucene.         search                          =
    
                apache.org                                             =
    
                                                                       =
    
                                                                       =
    
                                                                       =
    
                                                                       =
    
                                                                       =
    




Hi Paul,

I have seen Filter feature and search how to use it to solve my problem=

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 12 15:34:36 2005
Return-Path: <java-user-return-15398-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29860 invoked from network); 12 Jul 2005 15:34:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2005 15:34:35 -0000
Received: (qmail 90497 invoked by uid 500); 12 Jul 2005 15:34:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90467 invoked by uid 500); 12 Jul 2005 15:34:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90454 invoked by uid 99); 12 Jul 2005 15:34:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 08:34:26 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 08:34:23 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 913EC5B7C1; Tue, 12 Jul 2005 08:34:18 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 8810F7F45E
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2005 08:34:18 -0700 (PDT)
Date: Tue, 12 Jul 2005 08:34:18 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Index Partitioning ( was Re: Search deadlocking under load)
In-Reply-To: <1017F4C8-CB8C-4CA7-8953-0BBFDE0667BD@aconex.com>
Message-ID: <Pine.LNX.4.58.0507120831510.28329@hal.rescomp.berkeley.edu>
References: <20050708193944.61757.qmail@web31112.mail.mud.yahoo.com>
 <73809823-CE46-406E-A142-6C4C0EA1E0E4@aconex.com>
 <Pine.LNX.4.58.0507101605250.22002@hal.rescomp.berkeley.edu>
 <0E62ADC4-D7FC-4CF1-B691-A464567BAEC4@aconex.com>
 <Pine.LNX.4.58.0507101727420.31070@hal.rescomp.berkeley.edu>
 <1017F4C8-CB8C-4CA7-8953-0BBFDE0667BD@aconex.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


: Since this isn't in production yet, I'd rather be proven wrong now
: rather than later! :)

it sounds like what you're doing makes a lot of sense given your
situation, and the nature of your data.

the one thing you might not have concidered yet, which doesn't have to
make a big difference in your overall architecture, but might influence
the specifics of your design, is the idea that eventually you might want
to seperate Projects on onto different physical servers, letting you put
"important" projects on their own server, so they are alllways available
(even if they are the LRU).



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 12 16:07:50 2005
Return-Path: <java-user-return-15399-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39654 invoked from network); 12 Jul 2005 16:07:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2005 16:07:50 -0000
Received: (qmail 54351 invoked by uid 500); 12 Jul 2005 16:07:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54287 invoked by uid 500); 12 Jul 2005 16:07:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54261 invoked by uid 99); 12 Jul 2005 16:07:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 09:07:34 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.28] (HELO pop04.mail.atl.earthlink.net) (207.69.200.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 09:07:31 -0700
Received: from wamui-andean.atl.sa.earthlink.net ([209.86.224.24])
	by pop04.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1DsNIB-00003U-00
	for java-user@lucene.apache.org; Tue, 12 Jul 2005 12:07:31 -0400
Message-ID: <28101032.1121184450984.JavaMail.root@wamui-andean.atl.sa.earthlink.net>
Date: Tue, 12 Jul 2005 11:07:30 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Re: How to get the un-stemed word
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thats why (at least one of the reasons) I wish the token type was stored in the index.

-----Original Message-----
From: markharw00d <markharw00d@yahoo.co.uk>
Sent: Jul 11, 2005 4:08 PM
To: java-user@lucene.apache.org
Subject: Re: How to get the un-stemed word

>>Would that show up in the TermVectors?

Yes, but uou would need a scheme for identifying "original, unstemmed" terms vs stems. For example, you could use another field and analyzer for the unstemmed forms.


Andrew Boyd wrote:

>What about storing the unstemed word with the same position as the stemmed word.  Would that show up in the TermVectors?
>
>-----Original Message-----
>From: mark harwood <markharw00d@yahoo.co.uk>
>Sent: Jul 8, 2005 10:44 AM
>To: java-user@lucene.apache.org, Andrew Boyd <Andrew.Boyd@bbtech.net>
>Subject: Re: How to get the un-stemed word
>
>You can get the unstemmed word by re-analysing the
>(hopefully stored somewhere) text.
>Look at the tokens emitted from the TokenStream and
>when you get to the one that matches the stemmed form
>you can use the token offset info to retrieve the
>unstemmed form from the original text. 
>
>Another option which avoids re-analysis is to store
>the TermVector with TermPositionVector info enabled.
>All the offsets are then stored in the index, rather
>than computed on-the-fly by an Analyzer.
>
>The highlighter in the sandbox can use both of these
>approaches to get the original forms.
>
>Cheers
>Mark
>
>
>	
>	
>		
>___________________________________________________________ 
>Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>Andrew Boyd
>Software Architect
>Sun Certified J2EE Architect
>B&B Technical Services Inc.
>205.422.2557
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>  
>


		
___________________________________________________________ 
How much free photo storage do you get? Store your holiday 
snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 12 16:37:54 2005
Return-Path: <java-user-return-15400-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49869 invoked from network); 12 Jul 2005 16:37:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2005 16:37:54 -0000
Received: (qmail 30565 invoked by uid 500); 12 Jul 2005 16:37:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30540 invoked by uid 500); 12 Jul 2005 16:37:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30526 invoked by uid 99); 12 Jul 2005 16:37:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 09:37:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of yseeley@gmail.com designates 64.233.170.207 as permitted sender)
Received: from [64.233.170.207] (HELO rproxy.gmail.com) (64.233.170.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 09:37:44 -0700
Received: by rproxy.gmail.com with SMTP id g11so1071669rne
        for <java-user@lucene.apache.org>; Tue, 12 Jul 2005 09:37:44 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=nXmQqc1lbhfxiJeUpm+ylg+F8U1bsLMR2JhHS/MQdKtkvZB4EAi4JwQjmjhlLhGwItzFkZg+nyuuSiAX1xiky4gMCMf6/h8xnTACCZu11yVFqZYbZ4SsGgvhsgSCDSalV6W1Xu1zKcsVLwS04hkWUYjqe5qHcpIWpSrBaG9JolQ=
Received: by 10.38.207.34 with SMTP id e34mr614075rng;
        Tue, 12 Jul 2005 09:37:44 -0700 (PDT)
Received: by 10.38.12.41 with HTTP; Tue, 12 Jul 2005 09:37:44 -0700 (PDT)
Message-ID: <c68e3917050712093757e23dcf@mail.gmail.com>
Date: Tue, 12 Jul 2005 12:37:44 -0400
From: Yonik Seeley <yseeley@gmail.com>
Reply-To: Yonik Seeley <yseeley@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and numerical fields search
In-Reply-To: <66C1CC04412C4A4785E49FE965C9456E093F89@srv-grp-s06.dev.atos.fr>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <66C1CC04412C4A4785E49FE965C9456E093F89@srv-grp-s06.dev.atos.fr>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I use ConstantScoreRangeQuery for this purpose:

http://issues.apache.org/bugzilla/show_bug.cgi?id=3D34673

-Yonik

On 7/12/05, Rifflard Micka=EBl <Mickael.Rifflard@atosorigin.com> wrote:
> Hi all,
>=20
> I'm using Lucene as a fulltext search engine since a year now and this on=
e works well for this.
> Now, I want to add to my application search capability like : aField grea=
ter than 10 , aField between 10 and 20.
> For this, I used RangeQuery (aField:[10 TO 20] for exemple) and I receive=
d all documents with field between these 2 values.
> All was perfect before... benchs. These one were poor. I received results=
 after dozens of seconds.
>=20
> Here is reasons of this :
>=20
> Firstly, I don't know min or max values for my field so a request can be =
aField:[0 TO 1000000].
> If I understand, this request is tranform in a BooleanQuery with one mill=
ion of TermQuery separated by OR.
>=20
> Secondly, to perform greater than or lower than request, I wanted to use =
RangeQuery with Integer.MAX_VALUE (for greater than)
> or Integer.MIN_VALUE (for lower than). If I understand always, this Range=
Query would be transform in a BooleanQuery with many
> millions of TermQuery.
>=20
> How to perform this kind of searchs (with another Lucene use, with anoter=
 solution, ...) ?
>=20
> Many thanks for your comments.
>=20
>=20
>         Micka=EBl Rifflard
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 12 16:40:33 2005
Return-Path: <java-user-return-15401-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50998 invoked from network); 12 Jul 2005 16:40:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2005 16:40:32 -0000
Received: (qmail 34588 invoked by uid 500); 12 Jul 2005 16:40:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34571 invoked by uid 500); 12 Jul 2005 16:40:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34558 invoked by uid 99); 12 Jul 2005 16:40:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 09:40:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of saturnism@gmail.com designates 64.233.184.194 as permitted sender)
Received: from [64.233.184.194] (HELO wproxy.gmail.com) (64.233.184.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 09:40:21 -0700
Received: by wproxy.gmail.com with SMTP id i6so1142177wra
        for <java-user@lucene.apache.org>; Tue, 12 Jul 2005 09:40:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=kuE0hQUjV+0d2xRDoaxbdhhjCGB6yBzA8H8X8i+AnNY2uzSTfdbNzvklGyFhwyfOskQQbk6G4jPCPTIRCe8oCdG6cEwAxUDlIMvib3HMr6XwioCrhmEBD0DiQ+sXDUkBHkKIIg3rd95alGUx5NCxEgkcQOXb9LmIp68gHFpovBs=
Received: by 10.54.48.54 with SMTP id v54mr4462746wrv;
        Tue, 12 Jul 2005 09:39:45 -0700 (PDT)
Received: by 10.54.118.4 with HTTP; Tue, 12 Jul 2005 09:39:45 -0700 (PDT)
Message-ID: <fb9748c905071209392599a9b5@mail.gmail.com>
Date: Wed, 13 Jul 2005 00:39:45 +0800
From: Ray Tsang <saturnism@gmail.com>
Reply-To: Ray Tsang <saturnism@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and numerical fields search
In-Reply-To: <OF065910E6.FB818119-ON8025703C.00314686-8025703C.0031E5DC@SAAConsultants.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <66C1CC04412C4A4785E49FE965C9456E093F8A@srv-grp-s06.dev.atos.fr>
	 <OF065910E6.FB818119-ON8025703C.00314686-8025703C.0031E5DC@SAAConsultants.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It seems TooManyClauses is a potential problem for any query that
expands to a series of OR'ed boolean queries (PrefixQuery,
WildcardQuery, RangeQuery...).  If the max was set too high, the
inefficiency would make the search unsable.

I kind of worked around this by creating a BitSetQuery, and extended
PrefixQuery and WildcardQuery so that they rewrite to BitSetQuery.=20
This at least made both queries usable on a large index (~40mil
documents) with acceptable speed, without the use of filters.  I also
extended QueryParser so it creates the new PrefixQuery and the new
WildcardQuery instead of the ones provided by the distribution.

Ray

On 7/12/05, Paul.Illingworth@saaconsultants.com
<Paul.Illingworth@saaconsultants.com> wrote:
>=20
>=20
>=20
>=20
>=20
> Hi Micka=EBl,
>=20
> Take a look at the org.apache.lucene.search.DateFilter class that comes
> with Lucene. This does date range filtering (I am using a modified versio=
n
> of this class for filtering my date format). It should be relatively
> strightforward to modify this for filtering numeric ranges. If your numbe=
rs
> are stored as zero padded Strings then you should be able to leave the
> bits() method as is otherwise you might have to put some String to number
> conversion in there somewhere.
>=20
> Regards
>=20
> Paul I
>=20
>=20
>=20
>              Rifflard Micka=EBl
>              <Mickael.Rifflard
>              @atosorigin.com>                                           T=
o
>                                        <java-user@lucene.apache.org>
>              12/07/2005 09:31                                           c=
c
>=20
>                                                                    Subjec=
t
>              Please respond to         RE: Lucene and numerical fields
>              java-user@lucene.         search
>                 apache.org
>=20
>=20
>=20
>=20
>=20
>=20
>=20
>=20
>=20
> Hi Paul,
>=20
> I have seen Filter feature and search how to use it to solve my problem
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 12 19:44:22 2005
Return-Path: <java-user-return-15402-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13751 invoked from network); 12 Jul 2005 19:44:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2005 19:44:22 -0000
Received: (qmail 83386 invoked by uid 500); 12 Jul 2005 19:44:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83266 invoked by uid 500); 12 Jul 2005 19:44:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83252 invoked by uid 99); 12 Jul 2005 19:44:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 12:44:13 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.95.77.96] (HELO phobos.net-temps.com) (64.95.77.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 12:44:11 -0700
Received: from localhost (localhost [127.0.0.1])
	by phobos.net-temps.com (Postfix) with ESMTP id 764FD3F48B;
	Tue, 12 Jul 2005 15:44:08 -0400 (EDT)
Received: from phobos.net-temps.com ([127.0.0.1])
 by localhost (phobos.net-temps.com [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 18450-10; Tue, 12 Jul 2005 15:44:06 -0400 (EDT)
Received: from nbrackett (europa [192.168.1.21])
	by phobos.net-temps.com (Postfix) with SMTP id A9C843F487
	for <java-user@lucene.apache.org>; Tue, 12 Jul 2005 15:44:06 -0400 (EDT)
From: "Nathan Brackett" <nbrackett@net-temps.com>
To: <java-user@lucene.apache.org>
Subject: RE: Search deadlocking under load
Date: Tue, 12 Jul 2005 15:46:28 -0400
Message-ID: <LJEJJJKMGLFKGPJJOLFJOEOAIGAA.nbrackett@net-temps.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Importance: Normal
In-Reply-To: <LJEJJJKMGLFKGPJJOLFJCEKJIGAA.nbrackett@net-temps.com>
X-Virus-Scanned: by amavisd-new at net-temps.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis,

After further testing it turns out that the 'deadlock' we're encountering is
not a deadlock at all, but a result of resin hitting its maximum number of
allowed threads.  We bumped up the max-threads in the config and it fixed
the problem for a certain amount of load, but we'd much prefer to go after
the source of the problem, namely:

As the number of threads hitting lucene increases, contention for locks
increases, meaning the average response time decreases.  This places us in a
downward spiral of performance because as the incoming number of hits per
second stays constant, the response time decreases, meaning that the total
number of threads inside resin doing work will increase.  This problem
compounds itself, escalating the number of threads in resin until we crash.


Admittedly this is a pretty harsh test (~~20 hits per second triggering
complex searches, which starts fine but then escalates to > 150 threads as
processing slows down but number of incoming hits per second does not)

Our ultimate goal, however, is to have each search be completely and 100%
parallel.

The point of contention seems to be the method below:

FSDirectory.java:486 (class FSInputStream)



  protected final void readInternal(byte[] b, int offset, int len)
  		throws IOException {
  	synchronized (file) {
  		long position = getFilePointer();
  		if (position != file.position) {
  			file.seek(position);
  			file.position = position;
  		}
  		int total = 0;
  		do {
  			int i = file.read(b, offset+total, len-total);
  			if (i == -1)
  				throw new IOException("read past EOF");
  			file.position += i;
  			total += i;
  		} while (total < len);
  	}
  }




The threads are usually all lined up to reach this.  Why are so many threads
backed up behind the same instance of FSInputStream.readInternal?  Shouldn't
each search have a different input stream?  What would you suggest as the
best path to achieve 100% parallel searching?  Here's a sample of our thread
dump, you can see 2 threads waiting for the same FSInputStream$Descriptor
(which is the synchronized(file) above):

"tcpConnection-8080-11" daemon prio=5 tid=0x08304600 nid=0x8304800 waiting
for monitor entry [bf494000..bf494d08]
        at
org.apache.lucene.store.FSInputStream.readInternal(FSDirectory.java:412)
        - waiting to lock <0x2f2b7a38> (a
org.apache.lucene.store.FSInputStream$Descriptor)
        at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
        at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
        at
org.apache.lucene.index.SegmentTermDocs.read(SegmentTermDocs.java:126)
        at org.apache.lucene.search.TermScorer.next(TermScorer.java:55)
        at
org.apache.lucene.search.BooleanScorer.next(BooleanScorer.java:112)
        at org.apache.lucene.search.Scorer.score(Scorer.java:37)
        at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:92)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:43)
        at org.apache.lucene.search.Searcher.search(Searcher.java:33)
        at org.apache.lucene.search.Searcher.search(Searcher.java:27)
        at
com.nettemps.search.backend.SingleIndexManager.search(SingleIndexManager.jav
a:335)
        at
com.nettemps.search.backend.IndexAccessControl.doSearch(IndexAccessControl.j
ava:100)

"tcpConnection-8080-10" daemon prio=5 tid=0x08336800 nid=0x8336a00 waiting
for monitor entry [bf4d5000..bf4d5d08]
        at
org.apache.lucene.store.FSInputStream.readInternal(FSDirectory.java:412)
        - waiting to lock <0x2f2b7a38> (a
org.apache.lucene.store.FSInputStream$Descriptor)
        at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
        at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
        at
org.apache.lucene.index.SegmentTermDocs.read(SegmentTermDocs.java:126)
        at org.apache.lucene.search.TermScorer.next(TermScorer.java:55)
        at
org.apache.lucene.search.BooleanScorer.next(BooleanScorer.java:112)
        at org.apache.lucene.search.Scorer.score(Scorer.java:37)
        at
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:92)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:43)
        at org.apache.lucene.search.Searcher.search(Searcher.java:33)
        at org.apache.lucene.search.Searcher.search(Searcher.java:27)
        at
com.nettemps.search.backend.SingleIndexManager.search(SingleIndexManager.jav
a:335)

-----Original Message-----
From: Nathan Brackett [mailto:nbrackett@net-temps.com]
Sent: Monday, July 11, 2005 5:43 PM
To: java-user@lucene.apache.org
Subject: RE: Search deadlocking under load


Thanks for the advice. That ought to reduce contention a bit in that
particular method.

I've been reviewing a large amount of thread dumps today and I was wondering
if it's common to see many threads that look like this:

"tcpConnection-8080-20" daemon prio=5 tid=0x081ba000 nid=0x810ac00 waiting
for monitor entry [bf24b000..bf24bd20]
        at
org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(Compou
ndFileReader.java:216)
        - waiting to lock <0x2ee24c48> (a
org.apache.lucene.store.FSInputStream)

When I get the deadlock situation, I often see a few of these lying around,
but no matching thread that actually has the lock on 0x2ee24c48 in the dump.
Is this normal? Not really a thread dump pro.



-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Monday, July 11, 2005 1:57 PM
To: java-user@lucene.apache.org
Subject: RE: Search deadlocking under load


Hi Nick,

Without looking at the source of that method, I'd suggest first trying
the multifile index format (you can easily convert to it by setting the
new format on IndexWriter and optimizing it).  I'd be interested to
know if this eliminates the problem, or at least makes it harder to
hit.

Otis


--- Nathan Brackett <nbrackett@net-temps.com> wrote:

> Hey Otis,
>
> Thanks for the hasty response and apologies for my delayed response.
> It was
> Friday and time to go :)
>
> The queries we're running are very varied (wildcard, phrase, normal).
> The
> index is only about a 1/2 gig in size (maybe 250,000 documents). The
> machine
> is running FreeBSD 5.3 with ~2 gig RAM.
>
> I got a thread dump from right around the time that the process would
> deadlock and not come back and I noticed that almost all of the
> threads were
> waiting on the same method. Here's what the trace looks like: (small
> sample
> for the sake of brevity...the real dump is huge)
>
> tcpConnection-8080-32:
>   [1]
> org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal
> (CompoundFileReader.java:217)
>   [2] org.apache.lucene.store.InputStream.refill
> (InputStream.java:158)
>   [3] org.apache.lucene.store.InputStream.readByte
> (InputStream.java:43)
>   [4] org.apache.lucene.store.InputStream.readVInt
> (InputStream.java:83)
>   [5] org.apache.lucene.index.SegmentTermDocs.read
> (SegmentTermDocs.java:126)
>   [6] org.apache.lucene.search.TermScorer.next (TermScorer.java:55)
>   [7] org.apache.lucene.search.BooleanScorer.next
> (BooleanScorer.java:112)
>   [8] org.apache.lucene.search.Scorer.score (Scorer.java:37)
>   [9] org.apache.lucene.search.IndexSearcher.search
> (IndexSearcher.java:92)
>   [10] org.apache.lucene.search.Hits.getMoreDocs (Hits.java:64)
>   [11] org.apache.lucene.search.Hits.<init> (Hits.java:43)
>   [12] org.apache.lucene.search.Searcher.search (Searcher.java:33)
>   [13] org.apache.lucene.search.Searcher.search (Searcher.java:27)
>   [14] com.nettemps.search.backend.SingleIndexManager.search
> (SingleIndexManager.java:335)
>   [15] com.nettemps.search.backend.IndexAccessControl.doSearch
> (IndexAccessControl.java:100)
>   [16] com.nettemps.search.server.SearchServerImpl.searchResumes
> (SearchServerImpl.java:402)
>   [17]
>
com.nettemps.search.server.SearchServerReadOnly_Tie.invoke_searchResumes
> (SearchServerReadOnly_Tie.java:93)
>   [18]
> com.nettemps.search.server.SearchServerReadOnly_Tie.processingHook
> (SearchServerReadOnly_Tie.java:298)
>   [19] com.sun.xml.rpc.server.StreamingHandler.handle
> (StreamingHandler.java:321)
>   [20] com.sun.xml.rpc.server.http.JAXRPCServletDelegate.doPost
> (JAXRPCServletDelegate.java:443)
>   [21] com.sun.xml.rpc.server.http.JAXRPCServlet.doPost
> (JAXRPCServlet.java:102)
>   [22] javax.servlet.http.HttpServlet.service (HttpServlet.java:165)
>   [23] javax.servlet.http.HttpServlet.service (HttpServlet.java:103)
>   [24] com.caucho.server.http.FilterChainServlet.doFilter
> (FilterChainServlet.java:96)
>   [25] com.caucho.server.http.Invocation.service
> (Invocation.java:315)
>   [26] com.caucho.server.http.CacheInvocation.service
> (CacheInvocation.java:135)
>   [27] com.caucho.server.http.HttpRequest.handleRequest
> (HttpRequest.java:253)
>   [28] com.caucho.server.http.HttpRequest.handleConnection
> (HttpRequest.java:170)
>   [29] com.caucho.server.TcpConnection.run (TcpConnection.java:139)
>   [30] java.lang.Thread.run (Thread.java:534)
>
> I took a look at that readInternal method and saw that the contention
> is
> around an InputStream that I assume reads from the actual index file
> and
> returns it for use by the method. We are running many threads that
> are
> attempting to do searches at the same time (roughly 30 - 35), so that
> explains why the search times would go up.
>
> In an attempt to reduce the amount of contention, we synchronized our
> search
> method (the one that makes the actual call to Lucene's search: [14]
> com.nettemps.search.backend.SingleIndexManager.search
> (SingleIndexManager.java:335)). This also caused the same results
> when hit
> with too many threads.
>
> We're really stuck at this point as to what to try. Any advice?
>
>
>
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> Sent: Friday, July 08, 2005 3:40 PM
> To: java-user@lucene.apache.org
> Subject: Re: Search deadlocking under load
>
>
> Nathan,
>
> 3) is the recommended usage.
> Your index is on an NFS share, which means you are searching it over
> the network.  Make it local, and you should see performance
> improvements.  Local or remove, it makes sense that searches take
> longer to execute, and the load goes up.  Yes, it shouldn't deadlock.
> You shouldn't need to synchronize access to IndexSearcher.
> When your JVM locks up next time, kill it, get the thread dump, and
> send it to the list, so we can try to remove the bottleneck, if
> that's
> possible.
>
> How many queries/second do you run, and what kinds of queries are
> they,
> how big is your index and what kind of hardware (disks, RAM, CPU) are
> you using?
>
> Otis
>
> --- Nathan Brackett <nbrackett@net-temps.com> wrote:
>
> > Hey all,
> >
> > We're looking to use Lucene as the back end to our website and
> we're
> > running
> > into an unusual deadlocking problem.
> >
> > For testing purposes, we're just running one web server (threaded
> > environment) against an index mounted on an NFS share. This machine
> > performs
> > searches only against this index so it's not being touched. We have
> > tried a
> > few different models so far:
> >
> > 1) Pooling IndexSearcher objects: Occasionally we would run into
> > OutOfMemory
> > problems as we would not block if a request came through and all
> > IndexSearchers were already checked out, we would just create a
> > temporary
> > one and then dispose of it once it was returned to the pool.
> >
> > 2) Create a new IndexSearcher each time: Every request to search
> > would
> > create an IndexSearcher object. This quickly gave OutOfMemory
> errors,
> > even
> > when we would close them out directly after.
> >
> > 3) Use a global IndexSearcher: This is the model we're working with
> > now. The
> > model holds up fine under low-moderate load and is, in fact, much
> > faster at
> > searching (probably due to some caching mechanism). Under heavy
> load
> > though,
> > the CPU will spike up to 99% and never come back down until we kill
> > -9 the
> > process. Also, as you ramp the load, we've discovered that search
> > times go
> > up as well. Searches will generally come back after 40ms, but as
> the
> > load
> > goes up the searches don't come back for up to 20 seconds.
> >
> > We've been attempting to find where the problem is for the last
> week
> > with no
> > luck. Our index is optimized, so there is only one file. Do we need
> > to
> > synchronize access to the global IndexSearcher so that only one
> > search can
> > run at a time? That poses a bit of a problem as if a particular
> > search takes
> > a long time, all others will wait. This problem does not look like
> an
> > OutOrMemory error because the memory usage when the spike occurs is
> > usually
> > in the range of 150meg used with a ceiling of 650meg. Anyone else
> > experiencing any problems like this or have any idea where we
> should
> > be
> > looking? Thanks.
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 12 21:54:23 2005
Return-Path: <java-user-return-15403-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48680 invoked from network); 12 Jul 2005 21:54:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2005 21:54:23 -0000
Received: (qmail 98413 invoked by uid 500); 12 Jul 2005 21:54:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98384 invoked by uid 500); 12 Jul 2005 21:54:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98371 invoked by uid 99); 12 Jul 2005 21:54:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 14:54:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 14:54:13 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id 85790159FAF
	for <java-user@lucene.apache.org>; Wed, 13 Jul 2005 07:54:11 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 65DAF64007
	for <java-user@lucene.apache.org>; Wed, 13 Jul 2005 07:54:11 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 13567-01-2 for <java-user@lucene.apache.org>;
 Wed, 13 Jul 2005 07:54:10 +1000 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by herald.aconex.com (Postfix) with ESMTP id 2F46164002
	for <java-user@lucene.apache.org>; Wed, 13 Jul 2005 07:54:10 +1000 (EST)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <Pine.LNX.4.58.0507120831510.28329@hal.rescomp.berkeley.edu>
References: <20050708193944.61757.qmail@web31112.mail.mud.yahoo.com> <73809823-CE46-406E-A142-6C4C0EA1E0E4@aconex.com> <Pine.LNX.4.58.0507101605250.22002@hal.rescomp.berkeley.edu> <0E62ADC4-D7FC-4CF1-B691-A464567BAEC4@aconex.com> <Pine.LNX.4.58.0507101727420.31070@hal.rescomp.berkeley.edu> <1017F4C8-CB8C-4CA7-8953-0BBFDE0667BD@aconex.com> <Pine.LNX.4.58.0507120831510.28329@hal.rescomp.berkeley.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <925A6390-FACC-46A2-A1B9-3F96CE34BEEF@aconex.com>
Content-Transfer-Encoding: 7bit
From: Paul Smith <psmith@aconex.com>
Subject: Re: Index Partitioning ( was Re: Search deadlocking under load)
Date: Wed, 13 Jul 2005 07:54:18 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On 13/07/2005, at 1:34 AM, Chris Hostetter wrote:

>
> : Since this isn't in production yet, I'd rather be proven wrong now
> : rather than later! :)
>
> it sounds like what you're doing makes a lot of sense given your
> situation, and the nature of your data.
>
> the one thing you might not have concidered yet, which doesn't have to
> make a big difference in your overall architecture, but might  
> influence
> the specifics of your design, is the idea that eventually you might  
> want
> to seperate Projects on onto different physical servers, letting  
> you put
> "important" projects on their own server, so they are alllways  
> available
> (even if they are the LRU).
>

Yes, thanks, initially we won't do this until we understand more  
about the profile of usage, and how the IndexSearchers are being aged  
out of the cache.  We have a mirror index server kept in sync, and  
plan to put Apache in front of them (as long as we can prove the 2  
parts of the mirror stay in sync, initially we'll just set apache to  
favor 1 server, with manual failover until we're completely sure).   
We have plans to be implemented eventually that include an Index  
partitioning such that not all projects sit on each server, and they  
broadcast what project contain to clients.

Paul


>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 12 23:43:58 2005
Return-Path: <java-user-return-15404-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81382 invoked from network); 12 Jul 2005 23:43:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 12 Jul 2005 23:43:58 -0000
Received: (qmail 13195 invoked by uid 500); 12 Jul 2005 23:43:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13154 invoked by uid 500); 12 Jul 2005 23:43:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13137 invoked by uid 99); 12 Jul 2005 23:43:52 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 16:43:52 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.48.233] (HELO web52710.mail.yahoo.com) (206.190.48.233)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 12 Jul 2005 16:43:50 -0700
Received: (qmail 4352 invoked by uid 60001); 12 Jul 2005 23:43:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=4NM61wfcqFjwsvVEhW7nSKMB+WYvRdXnZYKfLTlKxh8R9OFAvXN2iwya//ScWLhHGbljnrnPmE3Js5S+0KMN7klpn0RtmdIIJMUs0yzz4z3QV/3NVnRBzMY2zadqMOBSimO7EM0EtcsSWtohIGh/cYbcBEnLVoaLf6VfkUfJSMU=  ;
Message-ID: <20050712234350.4350.qmail@web52710.mail.yahoo.com>
Received: from [84.162.71.143] by web52710.mail.yahoo.com via HTTP; Tue, 12 Jul 2005 16:43:49 PDT
Date: Tue, 12 Jul 2005 16:43:49 -0700 (PDT)
From: Klaus Hubert <klaus_hubert@yahoo.com>
Subject: SIMPLE Lucene / MySQL Indexer
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I played with several search engines to replace MySQL
FULLTEXT index and hope that Lucene is the best
solution for that.

I am reading Mannings book on Lucene in action and it
seems to be the most powerful search engine I found so
far.

I'm stuck at some problem and need help from you
experts. I managed to create an index as described in
the examples. I also managed to read a MySQL database
in Java.

My question is, if anybody here has some SIMPLE
example which does this in one step. I am good in PHP
and in Visual Basic, but very new to Java. Maybe I'm
using the wrong tools (NetBeans IDE and JCreator) but
I don't get it managed to create an Lucene Index on 3
database fields.

I appreciate any help.

Thank you so much,

  Klaus

__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 03:04:05 2005
Return-Path: <java-user-return-15405-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58468 invoked from network); 13 Jul 2005 03:04:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 03:04:05 -0000
Received: (qmail 40146 invoked by uid 500); 13 Jul 2005 03:03:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39924 invoked by uid 500); 13 Jul 2005 03:03:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39911 invoked by uid 99); 13 Jul 2005 03:03:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 20:03:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.162.198 as permitted sender)
Received: from [64.233.162.198] (HELO zproxy.gmail.com) (64.233.162.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 12 Jul 2005 20:03:55 -0700
Received: by zproxy.gmail.com with SMTP id m22so51541nzf
        for <java-user@lucene.apache.org>; Tue, 12 Jul 2005 20:03:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=BydC2tbeg0xGuQPdwo84e3iv8/YnthpNpKuKHMjk3wtKPFhLJ9e0RUfbl3OgbBrIf7n391ztmb1Zv4aZJUVJ0waeEZaQk9BprxH6BvRKzmdOyGBAMaCny+2YqYPhLf5UHIPRSoY1eyByoqbi05iVsk7hDLKLr741/OiRNOVYkKE=
Received: by 10.36.2.17 with SMTP id 17mr486942nzb;
        Tue, 12 Jul 2005 20:03:55 -0700 (PDT)
Received: from ?192.168.1.100? ([67.188.85.52])
        by mx.gmail.com with ESMTP id 38sm437321nzf.2005.07.12.20.03.55;
        Tue, 12 Jul 2005 20:03:55 -0700 (PDT)
Message-ID: <42D48488.7020304@gmail.com>
Date: Tue, 12 Jul 2005 20:03:36 -0700
From: Chris Lu <chris.lu@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: SIMPLE Lucene / MySQL Indexer
References: <20050712234350.4350.qmail@web52710.mail.yahoo.com>
In-Reply-To: <20050712234350.4350.qmail@web52710.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Please allow me to intraduce DBSight.
It's based on Lucene, oriented for Any database search.

Most of the things are done by web UI. No coding is needed to create 
your search.
check out this demo.  http://search.dbsight.com

It's free to download and test. Free for developer edition, non-profit 
usage.

Chris Lu
---
Full-Text Search on Any Database
http://www.dbsight.net

Klaus Hubert wrote:

>Hi,
>
>I played with several search engines to replace MySQL
>FULLTEXT index and hope that Lucene is the best
>solution for that.
>
>I am reading Mannings book on Lucene in action and it
>seems to be the most powerful search engine I found so
>far.
>
>I'm stuck at some problem and need help from you
>experts. I managed to create an index as described in
>the examples. I also managed to read a MySQL database
>in Java.
>
>My question is, if anybody here has some SIMPLE
>example which does this in one step. I am good in PHP
>and in Visual Basic, but very new to Java. Maybe I'm
>using the wrong tools (NetBeans IDE and JCreator) but
>I don't get it managed to create an Lucene Index on 3
>database fields.
>
>I appreciate any help.
>
>Thank you so much,
>
>  Klaus
>
>__________________________________________________
>Do You Yahoo!?
>Tired of spam?  Yahoo! Mail has the best spam protection around 
>http://mail.yahoo.com 
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>  
>


-- 
Chris Lu
--------------
Free-Text Search on Any Database
http://www.dbsight.net


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 08:18:48 2005
Return-Path: <java-user-return-15406-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32132 invoked from network); 13 Jul 2005 08:18:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 08:18:48 -0000
Received: (qmail 78317 invoked by uid 500); 13 Jul 2005 08:18:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78297 invoked by uid 500); 13 Jul 2005 08:18:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78283 invoked by uid 99); 13 Jul 2005 08:18:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 01:18:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ian.lea@gmail.com designates 64.233.182.202 as permitted sender)
Received: from [64.233.182.202] (HELO nproxy.gmail.com) (64.233.182.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 01:18:36 -0700
Received: by nproxy.gmail.com with SMTP id d4so24100nfe
        for <java-user@lucene.apache.org>; Wed, 13 Jul 2005 01:18:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=UjdE7GSzEZY8wIEVGNxESZzFXXnO4o3bvr7RVnQVxVF+TRGDIMgk7arIE8UzCgzp1sr6pTcyt97RYhtrgLN9VYj6I3gYL7dXtBU0iMSeiWdVzTOMzq0eFpHjy9Yj7EP0+nqAi/ob/qwphN0npTmuylDBrsFUGKRMDTh/M2Bj4RQ=
Received: by 10.48.143.9 with SMTP id q9mr17163nfd;
        Wed, 13 Jul 2005 01:18:35 -0700 (PDT)
Received: by 10.48.250.3 with HTTP; Wed, 13 Jul 2005 01:18:35 -0700 (PDT)
Message-ID: <8c4e68610507130118484524e0@mail.gmail.com>
Date: Wed, 13 Jul 2005 09:18:35 +0100
From: Ian Lea <ian.lea@gmail.com>
Reply-To: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: SIMPLE Lucene / MySQL Indexer
In-Reply-To: <20050712234350.4350.qmail@web52710.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20050712234350.4350.qmail@web52710.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Something like this?

IndexWriter iw =3D whatever
ResultSet rs =3D whatever

while (rs.next()) {
   Document ldoc =3D new Document();
   ldoc.add(Field.Text("f1", rs.getString("f1"));
   ldoc.add(Field.Unstored("f2", rs.getString("f2"));
   ldoc.add(Field.Keyword("f3", rs.getString("f3"));
   ...
   iw.addDocument(ldoc);
}

rs.close();
iw.close();


On the IDE front, most people seem to use Eclipse nowadays.


--
Ian.

On 13/07/05, Klaus Hubert <klaus_hubert@yahoo.com> wrote:
> Hi,
>=20
> I played with several search engines to replace MySQL
> FULLTEXT index and hope that Lucene is the best
> solution for that.
>=20
> I am reading Mannings book on Lucene in action and it
> seems to be the most powerful search engine I found so
> far.
>=20
> I'm stuck at some problem and need help from you
> experts. I managed to create an index as described in
> the examples. I also managed to read a MySQL database
> in Java.
>=20
> My question is, if anybody here has some SIMPLE
> example which does this in one step. I am good in PHP
> and in Visual Basic, but very new to Java. Maybe I'm
> using the wrong tools (NetBeans IDE and JCreator) but
> I don't get it managed to create an Lucene Index on 3
> database fields.
>=20
> I appreciate any help.
>=20
> Thank you so much,
>=20
>   Klaus

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 08:42:42 2005
Return-Path: <java-user-return-15407-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40466 invoked from network); 13 Jul 2005 08:42:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 08:42:42 -0000
Received: (qmail 6686 invoked by uid 500); 13 Jul 2005 08:42:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6660 invoked by uid 500); 13 Jul 2005 08:42:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6647 invoked by uid 99); 13 Jul 2005 08:42:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 01:42:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 01:42:29 -0700
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id A6B223A700AA; Wed, 13 Jul 2005 04:54:10 -0400
Message-ID: <42D4D3F3.5070907@bayt.net>
Date: Wed, 13 Jul 2005 12:42:27 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: SIMPLE Lucene / MySQL Indexer
References: <20050712234350.4350.qmail@web52710.mail.yahoo.com>
In-Reply-To: <20050712234350.4350.qmail@web52710.mail.yahoo.com>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Declude-Sender: nsh@bayt.net [192.168.1.24]
X-Declude-Spoolname: DD6B123A700AA6708.SMD
X-Declude-Note: Scanned by Declude 2.0.6.16 (http://www.declude.com/x-note.htm) for spam.
X-Declude-Scan: Score [0] at 04:54:11 on 13 Jul 2005
X-Declude-Tests: Whitelisted
X-Country-Chain: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Also Hibernate, you can use Eclipse as an IDE, with the Hibernator 
plugin to create objects cleanly from your MySQL database and then a few 
lines will fetch an object which you could then be passed to Lucene for 
indexing.

Nader Henein

Klaus Hubert wrote:

>Hi,
>
>I played with several search engines to replace MySQL
>FULLTEXT index and hope that Lucene is the best
>solution for that.
>
>I am reading Mannings book on Lucene in action and it
>seems to be the most powerful search engine I found so
>far.
>
>I'm stuck at some problem and need help from you
>experts. I managed to create an index as described in
>the examples. I also managed to read a MySQL database
>in Java.
>
>My question is, if anybody here has some SIMPLE
>example which does this in one step. I am good in PHP
>and in Visual Basic, but very new to Java. Maybe I'm
>using the wrong tools (NetBeans IDE and JCreator) but
>I don't get it managed to create an Lucene Index on 3
>database fields.
>
>I appreciate any help.
>
>Thank you so much,
>
>  Klaus
>
>__________________________________________________
>Do You Yahoo!?
>Tired of spam?  Yahoo! Mail has the best spam protection around 
>http://mail.yahoo.com 
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
>
>  
>

-- 

Nader S. Henein
Senior Applications Architect

Bayt.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 11:59:58 2005
Return-Path: <java-user-return-15408-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6385 invoked from network); 13 Jul 2005 11:59:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 11:59:57 -0000
Received: (qmail 52557 invoked by uid 500); 13 Jul 2005 11:59:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52529 invoked by uid 500); 13 Jul 2005 11:59:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52514 invoked by uid 99); 13 Jul 2005 11:59:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 04:59:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.48.231] (HELO web52708.mail.yahoo.com) (206.190.48.231)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Jul 2005 04:59:44 -0700
Received: (qmail 62130 invoked by uid 60001); 13 Jul 2005 11:59:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=G+B/FBIa9UtEGsnq2GK46hyFc4SbDngO+wyDSfbzqy7JpYkXcLdW9KggrB3ackM9Pb/IUFoLcHOvHIhwhRADgA/gE+PwzQBmRN0acdnJ2n8ifO0zroRwExr9AIAsDJ6moKlEEDggB021gDXkiRNmxCpf26w6DyvwUlhS4rjE1y0=  ;
Message-ID: <20050713115944.62128.qmail@web52708.mail.yahoo.com>
Received: from [84.162.100.158] by web52708.mail.yahoo.com via HTTP; Wed, 13 Jul 2005 04:59:44 PDT
Date: Wed, 13 Jul 2005 04:59:44 -0700 (PDT)
From: Klaus Hubert <klaus_hubert@yahoo.com>
Subject: RE: SIMPLE Lucene / MySQL Indexer
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Chris,

this is indeed a cool application, but I need just to
create the index. I
definitely will look into your file and see if it
makes my life easier. Can
you tell any details how long it took to create such a
huge index? What
experiences you have with the slowest search? Does it
go over 1 second? (I
know, it depends on the hardware, but I'm just
wondering)

Thanks,

  Klaus

-----Original Message-----
From: Chris Lu [mailto:chris.lu@gmail.com] 
Sent: Wednesday, July 13, 2005 5:04 AM
To: java-user@lucene.apache.org
Subject: Re: SIMPLE Lucene / MySQL Indexer

Please allow me to intraduce DBSight.
It's based on Lucene, oriented for Any database
search.

Most of the things are done by web UI. No coding is
needed to create your
search.
check out this demo.  http://search.dbsight.com

It's free to download and test. Free for developer
edition, non-profit
usage.

Chris Lu
---
Full-Text Search on Any Database
http://www.dbsight.net

Klaus Hubert wrote:

>Hi,
>
>I played with several search engines to replace MySQL
FULLTEXT index 
>and hope that Lucene is the best solution for that.
>
>I am reading Mannings book on Lucene in action and it
seems to be the 
>most powerful search engine I found so far.
>
>I'm stuck at some problem and need help from you
experts. I managed to 
>create an index as described in the examples. I also
managed to read a 
>MySQL database in Java.
>
>My question is, if anybody here has some SIMPLE
example which does this 
>in one step. I am good in PHP and in Visual Basic,
but very new to 
>Java. Maybe I'm using the wrong tools (NetBeans IDE
and JCreator) but I 
>don't get it managed to create an Lucene Index on 3
database fields.
>
>I appreciate any help.
>
>Thank you so much,
>
>  Klaus
>
>__________________________________________________
>Do You Yahoo!?
>Tired of spam?  Yahoo! Mail has the best spam
protection around 
>http://mail.yahoo.com
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail:
java-user-help@lucene.apache.org
>
>
>  
>


--
Chris Lu
--------------
Free-Text Search on Any Database
http://www.dbsight.net


---------------------------------------------------------------------
To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail:
java-user-help@lucene.apache.org




		
____________________________________________________
Start your day with Yahoo! - make it your home page
http://www.yahoo.com/r/hs
 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 12:02:36 2005
Return-Path: <java-user-return-15409-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6802 invoked from network); 13 Jul 2005 12:02:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 12:02:36 -0000
Received: (qmail 55155 invoked by uid 500); 13 Jul 2005 12:02:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55126 invoked by uid 500); 13 Jul 2005 12:02:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55113 invoked by uid 99); 13 Jul 2005 12:02:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 05:02:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.48.226] (HELO web52703.mail.yahoo.com) (206.190.48.226)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Jul 2005 05:02:23 -0700
Received: (qmail 11163 invoked by uid 60001); 13 Jul 2005 12:02:24 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=x9LD+vBqWurx0y5eRkVbpHw/Lp4BwpiGqo29zLngWM4dry4rGUhWlfMY5bOz3EAO+tc8+y+wQxrDggdRcpG2aV7/IVoOUVGU7sehy4S5nqAr6GIoAB6HSgGrKDSvDbI9/2cLwSOvWys7OfqQkanWS5YAygvnGA/zc5LUI6cAVNI=  ;
Message-ID: <20050713120224.11161.qmail@web52703.mail.yahoo.com>
Received: from [84.162.100.158] by web52703.mail.yahoo.com via HTTP; Wed, 13 Jul 2005 05:02:23 PDT
Date: Wed, 13 Jul 2005 05:02:23 -0700 (PDT)
From: Klaus Hubert <klaus_hubert@yahoo.com>
Subject: RE: SIMPLE Lucene / MySQL Indexer
To: java-user@lucene.apache.org, nsh@bayt.net
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Nader,

I downloaded Eclipse and also the Hibernate plugin and
I really like this
IDE. It seems to have lots of power. What I didn't
found so far is a
Debugger where I can go line by line through the code
to see errors
eventually. It runs and I get error messages at the
line where the problem
arises. But I cannot go step by step as I was used to
when Programming
Visual Basic, PHP or Perl.

Thanks,

  Klaus 

-----Original Message-----
From: Nader Henein [mailto:nsh@bayt.net] 
Sent: Wednesday, July 13, 2005 10:42 AM
To: java-user@lucene.apache.org
Subject: Re: SIMPLE Lucene / MySQL Indexer

Also Hibernate, you can use Eclipse as an IDE, with
the Hibernator plugin to
create objects cleanly from your MySQL database and
then a few lines will
fetch an object which you could then be passed to
Lucene for indexing.

Nader Henein

Klaus Hubert wrote:

>Hi,
>
>I played with several search engines to replace MySQL
FULLTEXT index 
>and hope that Lucene is the best solution for that.
>
>I am reading Mannings book on Lucene in action and it
seems to be the 
>most powerful search engine I found so far.
>
>I'm stuck at some problem and need help from you
experts. I managed to 
>create an index as described in the examples. I also
managed to read a 
>MySQL database in Java.
>
>My question is, if anybody here has some SIMPLE
example which does this 
>in one step. I am good in PHP and in Visual Basic,
but very new to 
>Java. Maybe I'm using the wrong tools (NetBeans IDE
and JCreator) but I 
>don't get it managed to create an Lucene Index on 3
database fields.
>
>I appreciate any help.
>
>Thank you so much,
>
>  Klaus
>
>__________________________________________________
>Do You Yahoo!?
>Tired of spam?  Yahoo! Mail has the best spam
protection around 
>http://mail.yahoo.com
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail:
java-user-help@lucene.apache.org
>
>
>
>
>  
>

-- 

Nader S. Henein
Senior Applications Architect

Bayt.com


---------------------------------------------------------------------
To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail:
java-user-help@lucene.apache.org




		
____________________________________________________
Start your day with Yahoo! - make it your home page
http://www.yahoo.com/r/hs
 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 12:04:24 2005
Return-Path: <java-user-return-15410-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7594 invoked from network); 13 Jul 2005 12:04:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 12:04:24 -0000
Received: (qmail 58480 invoked by uid 500); 13 Jul 2005 12:04:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58455 invoked by uid 500); 13 Jul 2005 12:04:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58442 invoked by uid 99); 13 Jul 2005 12:04:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 05:04:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.48.236] (HELO web52713.mail.yahoo.com) (206.190.48.236)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Jul 2005 05:04:12 -0700
Received: (qmail 41794 invoked by uid 60001); 13 Jul 2005 12:04:13 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=SOA4xdJEkxTegMa1HsY6FH1DPCUlblEstYhgxrHz+Ok4fYRzsG5LgueaPWXCNgtgNxr7mygX7hnNbQN7v5CXbLvRCdGnbx42UeUSOxClUGU2hfQDesiBdv0rFofVnAc3D4spxxaI4E65lCIfbrFdPd6a22bLHgEh4e7mmLPl+WY=  ;
Message-ID: <20050713120413.41792.qmail@web52713.mail.yahoo.com>
Received: from [84.162.100.158] by web52713.mail.yahoo.com via HTTP; Wed, 13 Jul 2005 05:04:12 PDT
Date: Wed, 13 Jul 2005 05:04:12 -0700 (PDT)
From: Klaus Hubert <klaus_hubert@yahoo.com>
Subject: RE: SIMPLE Lucene / MySQL Indexer
To: java-user@lucene.apache.org, 'Ian Lea' <ian.lea@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Ian,

That's something I'm looking for. Right, a simple
source code which reads a
database and adds the fields to the index. What I've
found also so far is
another solution at
http://www-128.ibm.com/developerworks/java/library/j-lucene/.
First step is
to export my MySQL database in simple XML and go from
there. It is just an
additional step and I would stick with this if I don't
find another method
to do all at once.

Thanks,

  Klaus 

-----Original Message-----
From: Ian Lea [mailto:ian.lea@gmail.com] 
Sent: Wednesday, July 13, 2005 10:19 AM
To: java-user@lucene.apache.org
Subject: Re: SIMPLE Lucene / MySQL Indexer

Something like this?

IndexWriter iw = whatever
ResultSet rs = whatever

while (rs.next()) {
   Document ldoc = new Document();
   ldoc.add(Field.Text("f1", rs.getString("f1"));
   ldoc.add(Field.Unstored("f2", rs.getString("f2"));
   ldoc.add(Field.Keyword("f3", rs.getString("f3"));
   ...
   iw.addDocument(ldoc);
}

rs.close();
iw.close();


On the IDE front, most people seem to use Eclipse
nowadays.


--
Ian.

On 13/07/05, Klaus Hubert <klaus_hubert@yahoo.com>
wrote:
> Hi,
> 
> I played with several search engines to replace
MySQL FULLTEXT index 
> and hope that Lucene is the best solution for that.
> 
> I am reading Mannings book on Lucene in action and
it seems to be the 
> most powerful search engine I found so far.
> 
> I'm stuck at some problem and need help from you
experts. I managed to 
> create an index as described in the examples. I also
managed to read a 
> MySQL database in Java.
> 
> My question is, if anybody here has some SIMPLE
example which does 
> this in one step. I am good in PHP and in Visual
Basic, but very new 
> to Java. Maybe I'm using the wrong tools (NetBeans
IDE and JCreator) 
> but I don't get it managed to create an Lucene Index
on 3 database 
> fields.
> 
> I appreciate any help.
> 
> Thank you so much,
> 
>   Klaus

---------------------------------------------------------------------
To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail:
java-user-help@lucene.apache.org



__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 12:15:35 2005
Return-Path: <java-user-return-15411-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12117 invoked from network); 13 Jul 2005 12:15:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 12:15:34 -0000
Received: (qmail 79573 invoked by uid 500); 13 Jul 2005 12:15:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79376 invoked by uid 500); 13 Jul 2005 12:15:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79363 invoked by uid 99); 13 Jul 2005 12:15:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 05:15:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.46] (HELO smtpout.mac.com) (17.250.248.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 05:15:21 -0700
Received: from mac.com (webmail01-en1 [10.13.11.143])
	by smtpout.mac.com (Xserve/8.12.11/smtpout10/MantshX 4.0) with ESMTP id j6DCFKZA029052
	for <java-user@lucene.apache.org>; Wed, 13 Jul 2005 05:15:20 -0700 (PDT)
Received: from webmail01 (localhost [127.0.0.1])
	by mac.com (Xserve/webmail01/MantshX 4.0) with ESMTP id j6DCFJdB008272
	for <java-user@lucene.apache.org>; Wed, 13 Jul 2005 05:15:20 -0700 (PDT)
Message-ID: <7583091.1121256919961.JavaMail.xing@mac.com>
Date: Wed, 13 Jul 2005 05:15:19 -0700
From: Xing Li <xing@mac.com>
To: java-user@lucene.apache.org
Subject: RE: SIMPLE Lucene / MySQL Indexer
in-reply-to: <20050713120413.41792.qmail@web52713.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
references: <20050713120413.41792.qmail@web52713.mail.yahoo.com>
X-Originating-IP: 66.180.192.254/instID=9
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Don't make the mistake of complicating the task. Just read straight from mysql into lucene via java. There is no benefit of exporting data to xml just to regrab the data back into lucene. 

Get the Lucene In actioin book if you haven't cause all the samples there are real-world practical. Are you need to add is 10 lines of mysql type java/jdbc code and you are ready to create your first index. Download luke for lucene, GUI testing tool so you can browse the index, perform searches, validate/test search performan bottlenecks, dissect queries, etc.


On Wednesday, July 13, 2005, at 05:04AM, Klaus Hubert <klaus_hubert@yahoo.com> wrote:

>Hi Ian,
>
>That's something I'm looking for. Right, a simple
>source code which reads a
>database and adds the fields to the index. What I've
>found also so far is
>another solution at
>http://www-128.ibm.com/developerworks/java/library/j-lucene/.
>First step is
>to export my MySQL database in simple XML and go from
>there. It is just an
>additional step and I would stick with this if I don't
>find another method
>to do all at once.
>
>Thanks,
>
>  Klaus 
>
>-----Original Message-----
>From: Ian Lea [mailto:ian.lea@gmail.com] 
>Sent: Wednesday, July 13, 2005 10:19 AM
>To: java-user@lucene.apache.org
>Subject: Re: SIMPLE Lucene / MySQL Indexer
>
>Something like this?
>
>IndexWriter iw = whatever
>ResultSet rs = whatever
>
>while (rs.next()) {
>   Document ldoc = new Document();
>   ldoc.add(Field.Text("f1", rs.getString("f1"));
>   ldoc.add(Field.Unstored("f2", rs.getString("f2"));
>   ldoc.add(Field.Keyword("f3", rs.getString("f3"));
>   ...
>   iw.addDocument(ldoc);
>}
>
>rs.close();
>iw.close();
>
>
>On the IDE front, most people seem to use Eclipse
>nowadays.
>
>
>--
>Ian.
>
>On 13/07/05, Klaus Hubert <klaus_hubert@yahoo.com>
>wrote:
>> Hi,
>> 
>> I played with several search engines to replace
>MySQL FULLTEXT index 
>> and hope that Lucene is the best solution for that.
>> 
>> I am reading Mannings book on Lucene in action and
>it seems to be the 
>> most powerful search engine I found so far.
>> 
>> I'm stuck at some problem and need help from you
>experts. I managed to 
>> create an index as described in the examples. I also
>managed to read a 
>> MySQL database in Java.
>> 
>> My question is, if anybody here has some SIMPLE
>example which does 
>> this in one step. I am good in PHP and in Visual
>Basic, but very new 
>> to Java. Maybe I'm using the wrong tools (NetBeans
>IDE and JCreator) 
>> but I don't get it managed to create an Lucene Index
>on 3 database 
>> fields.
>> 
>> I appreciate any help.
>> 
>> Thank you so much,
>> 
>>   Klaus
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail:
>java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail:
>java-user-help@lucene.apache.org
>
>
>
>__________________________________________________
>Do You Yahoo!?
>Tired of spam?  Yahoo! Mail has the best spam protection around 
>http://mail.yahoo.com 
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 12:17:35 2005
Return-Path: <java-user-return-15412-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 14301 invoked from network); 13 Jul 2005 12:17:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 12:17:35 -0000
Received: (qmail 85570 invoked by uid 500); 13 Jul 2005 12:17:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85534 invoked by uid 500); 13 Jul 2005 12:17:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85382 invoked by uid 99); 13 Jul 2005 12:17:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 05:17:21 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_50_60,HTML_MESSAGE,MSGID_FROM_MTA_HEADER
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.83.32] (HELO rediffmail.com) (203.199.83.32)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Jul 2005 05:17:17 -0700
Received: (qmail 305 invoked by uid 510); 13 Jul 2005 12:18:44 -0000
Date: 13 Jul 2005 12:18:44 -0000
Message-ID: <20050713121844.304.qmail@webmail32.rediffmail.com>
Received: from unknown (61.95.167.91) by rediffmail.com via HTTP; 13 jul 2005 12:18:44 -0000
MIME-Version: 1.0
From: "Rahul D Thakare" <rahul_thakare@rediffmail.com>
Reply-To: "Rahul D Thakare" <rahul_thakare@rediffmail.com>
To: java-user@lucene.apache.org
Subject: Wild card and multiple keyword search
Content-type: multipart/alternative;
	boundary="Next_1121257124---0-203.199.83.32-32749"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Next_1121257124---0-203.199.83.32-32749
Content-type: text/plain;
	charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

 =A0=0AHi, =0A=0A We are using doc.add(Field.Text("keywords",keywords)); to=
 add the keywords to the document, where keywords is comma separated keywor=
ds string.=0ALucene seems to tokenize the keywords with multiple words like=
(MAIN BOARD) as different keywords(ie as MAIN and BOARD). Tokenization is b=
ased on comma and space...So if we search for "MAIN BOARD", documents havin=
g keywords like "MAIN LOGIC", "MAIN PARTS", etc also show up=0A=0AIf one se=
arches for "MAIN BOARD", we want get only the documents have "MAIN BOARD". =
 How to do this ?=0A=0ATo achieve this we used doc.add(Field.Keyword("keywo=
rds", keywords)); and while searching=0Awe cannot use standard analyzer, wh=
ile searching, as divides the keywords if we search keywords having space..=
. so we wrote an KeywordAnalyser(KeywordAnalyzer is basically returns only =
one single token) as given below.=0A=0A/**=0A * Tokenizes the entire stream=
 as single token=0A */=0A=0A public class KeywordAnalyzer extends Analyzer=
=0A {=0A	 public TokenStream tokenStream(String fieldName, final Reader rea=
der)=0A	 {=0A		 return new TokenStream(){=0A			 private boolean done;=0A			=
 private final char[] buffer =3D new char[1024];=0A			 public Token next() =
throws IOException=0A			 {=0A				 if(!done)=0A				 {=0A					 done =3D true;=
=0A					 StringBuffer buffer =3D new StringBuffer();=0A					 int length =3D=
 0;=0A					 while(true)=0A					 {=0A						 length =3D reader.read(this.buff=
er);=0A						 if(length =3D=3D -1) break;=0A=0A						 buffer.append(this.bu=
ffer,0,length);=0A					 }=0A					 String text =3D buffer.toString();=0A				=
	 return new Token(text.toUpperCase(),0,text.length());=0A				 }=0A				 ret=
urn null;=0A			 }=0A		 };=0A	 }=0A }=0A=0AWhich solve the above said proble=
m, but we are not able to the wild card searchs like MAIN*, etc.=0A=0AWe ne=
ed both the functionality ie. =0A1.  if user searches for MAIN BOARD, shoul=
d get only documents that contain MAIN BOARD and not MAIN LOGIC, MAIN, MAIN=
 PART etc. =0A2. User should be able to do the wild card search like MAIN*,=
 etc and get the desired documents.=0A=0APlease let us know, how we should =
do the indexing ? and which analyzer to use to do the search ?=0A=0Athanks=
=0ARahul...
--Next_1121257124---0-203.199.83.32-32749--


From java-user-return-15413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 12:23:51 2005
Return-Path: <java-user-return-15413-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17328 invoked from network); 13 Jul 2005 12:23:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 12:23:51 -0000
Received: (qmail 5436 invoked by uid 500); 13 Jul 2005 12:23:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5401 invoked by uid 500); 13 Jul 2005 12:23:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5209 invoked by uid 99); 13 Jul 2005 12:23:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 05:23:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.48.234] (HELO web52711.mail.yahoo.com) (206.190.48.234)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Jul 2005 05:23:34 -0700
Received: (qmail 4475 invoked by uid 60001); 13 Jul 2005 12:23:35 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=UMeYqTVHexvaZwK2cWgoQ23ll+Xp1DEHFBmXSkb2AKpO9xgrG+RnTiUUbuFW9SFzpVx5eRWxtk6VEQ+IdW8E5egXK2gAObYLj36S0zfAwOoMS9ARheHkT0TB/49RhjQ3qgJ1o6y8ErYjy0QgFWyzlP9ub2506A7ZX6ymIXvE+dQ=  ;
Message-ID: <20050713122335.4473.qmail@web52711.mail.yahoo.com>
Received: from [84.162.100.158] by web52711.mail.yahoo.com via HTTP; Wed, 13 Jul 2005 05:23:35 PDT
Date: Wed, 13 Jul 2005 05:23:35 -0700 (PDT)
From: Klaus Hubert <klaus_hubert@yahoo.com>
Subject: RE: SIMPLE Lucene / MySQL Indexer
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Xing,

I have the book and as I wrote in my initial message I
managed to create the
sample index as well managed to read mySQL. But I seem
to be not able to
combine those programs :-( I'm very new to Java and I
haven't found a nice
Debugger so far to go step by step through my code. I
will try today all day
to get this fixed. I know, it shouldn't be too
difficult.

Thank you,

  Klaus 

-----Original Message-----
From: Xing Li [mailto:xing@mac.com] 
Sent: Wednesday, July 13, 2005 2:15 PM
To: java-user@lucene.apache.org
Subject: RE: SIMPLE Lucene / MySQL Indexer

Don't make the mistake of complicating the task. Just
read straight from
mysql into lucene via java. There is no benefit of
exporting data to xml
just to regrab the data back into lucene. 

Get the Lucene In actioin book if you haven't cause
all the samples there
are real-world practical. Are you need to add is 10
lines of mysql type
java/jdbc code and you are ready to create your first
index. Download luke
for lucene, GUI testing tool so you can browse the
index, perform searches,
validate/test search performan bottlenecks, dissect
queries, etc.


On Wednesday, July 13, 2005, at 05:04AM, Klaus Hubert
<klaus_hubert@yahoo.com> wrote:

>Hi Ian,
>
>That's something I'm looking for. Right, a simple
source code which 
>reads a database and adds the fields to the index.
What I've found also 
>so far is another solution at 
>http://www-128.ibm.com/developerworks/java/library/j-lucene/.
>First step is
>to export my MySQL database in simple XML and go from
there. It is just 
>an additional step and I would stick with this if I
don't find another 
>method to do all at once.
>
>Thanks,
>
>  Klaus
>
>-----Original Message-----
>From: Ian Lea [mailto:ian.lea@gmail.com]
>Sent: Wednesday, July 13, 2005 10:19 AM
>To: java-user@lucene.apache.org
>Subject: Re: SIMPLE Lucene / MySQL Indexer
>
>Something like this?
>
>IndexWriter iw = whatever
>ResultSet rs = whatever
>
>while (rs.next()) {
>   Document ldoc = new Document();
>   ldoc.add(Field.Text("f1", rs.getString("f1"));
>   ldoc.add(Field.Unstored("f2", rs.getString("f2"));
>   ldoc.add(Field.Keyword("f3", rs.getString("f3"));
>   ...
>   iw.addDocument(ldoc);
>}
>
>rs.close();
>iw.close();
>
>
>On the IDE front, most people seem to use Eclipse
nowadays.
>
>
>--
>Ian.
>
>On 13/07/05, Klaus Hubert <klaus_hubert@yahoo.com>
>wrote:
>> Hi,
>> 
>> I played with several search engines to replace
>MySQL FULLTEXT index
>> and hope that Lucene is the best solution for that.
>> 
>> I am reading Mannings book on Lucene in action and
>it seems to be the
>> most powerful search engine I found so far.
>> 
>> I'm stuck at some problem and need help from you
>experts. I managed to
>> create an index as described in the examples. I
also
>managed to read a
>> MySQL database in Java.
>> 
>> My question is, if anybody here has some SIMPLE
>example which does
>> this in one step. I am good in PHP and in Visual
>Basic, but very new
>> to Java. Maybe I'm using the wrong tools (NetBeans
>IDE and JCreator)
>> but I don't get it managed to create an Lucene
Index
>on 3 database
>> fields.
>> 
>> I appreciate any help.
>> 
>> Thank you so much,
>> 
>>   Klaus
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail:
>java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail:
>java-user-help@lucene.apache.org
>
>
>
>__________________________________________________
>Do You Yahoo!?
>Tired of spam?  Yahoo! Mail has the best spam
protection around 
>http://mail.yahoo.com
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail:
java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail:
java-user-help@lucene.apache.org




		
____________________________________________________
Start your day with Yahoo! - make it your home page
http://www.yahoo.com/r/hs
 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 12:38:28 2005
Return-Path: <java-user-return-15414-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24027 invoked from network); 13 Jul 2005 12:38:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 12:38:28 -0000
Received: (qmail 34430 invoked by uid 500); 13 Jul 2005 12:38:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 34403 invoked by uid 500); 13 Jul 2005 12:38:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 34390 invoked by uid 99); 13 Jul 2005 12:38:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 05:38:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.44] (HELO smtpout.mac.com) (17.250.248.44)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 05:38:16 -0700
Received: from mac.com (webmail04-en1 [10.13.11.146])
	by smtpout.mac.com (Xserve/8.12.11/smtpout12/MantshX 4.0) with ESMTP id j6DCcG9S000774
	for <java-user@lucene.apache.org>; Wed, 13 Jul 2005 05:38:17 -0700 (PDT)
Received: from webmail04 (localhost [127.0.0.1])
	by mac.com (Xserve/webmail04/MantshX 4.0) with ESMTP id j6DCcFon006465
	for <java-user@lucene.apache.org>; Wed, 13 Jul 2005 05:38:16 -0700 (PDT)
Message-ID: <7455164.1121258295129.JavaMail.xing@mac.com>
Date: Wed, 13 Jul 2005 05:38:15 -0700
From: Xing Li <xing@mac.com>
To: java-user@lucene.apache.org
Subject: RE: SIMPLE Lucene / MySQL Indexer
in-reply-to: <20050713122335.4473.qmail@web52711.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
references: <20050713122335.4473.qmail@web52711.mail.yahoo.com>
X-Originating-IP: 66.180.192.254/instID=54
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Kalus,

Just a few days ago I couldn't even remember how to compile java code. Last time I touched java was like 2001. Don't worry, Lucene is extremely easy, once you know a bit of fund java. It's no different than any other language. Just syntax. I recommend Java from Deitel & Deitel. Fell in love with their practical written style back in college. 

Below is what I whipped up quick to test mysql connections...

Just add  the following to an lucene book sample. You need to download ConnectJ jdbc driver from mysql site and put the jar file in your path variable. 

my_db db = new my_db();
db.connect();

ResultSet = rs;

rs = db.query("select * from mytable limit 100");

whiel(rs.next()) {
....... = rs.getString("mysqltablefieldname"); //return string value of mysql row/column....
...copy code from lucene...
}.


import java.sql.*;

public class my_db {

        public Connection conn = null;
        public Statement stmt = null;
        public boolean loaded = false;

        public boolean load() {
                try {
                        // The newInstance() call is a work around for some
                        // broken Java implementations

                        Class.forName("com.mysql.jdbc.Driver");
                        return true;
                } catch (Exception ex) {

                        System.out.println("Cannot load mysql driver.");
                        return false;
                        // handle the error
                }

        }

        public boolean connect() {
                if(loaded == false) {
                        loaded = load();
                }

                if(loaded == false) {
                        System.out.println("Can't load driver.");
                        return false;
                }
try {
                        conn = DriverManager.getConnection("jdbc:mysql://ip:port/dbname?user=user&password=pass");

                        stmt = conn.createStatement();
                        stmt.executeQuery("SET NAMES 'utf8'");

                        return true;
                }
                catch (SQLException ex) {
                        // handle any errors
                        System.out.println("SQLException: " + ex.getMessage());
                        System.out.println("SQLState: " + ex.getSQLState());
                        System.out.println("VendorError: " + ex.getErrorCode());
                        return false;
                }
        }

        public ResultSet query(String sql) {
                try {
                        return stmt.executeQuery(sql);
                }
                catch (SQLException ex) {
                        // handle any errors
                        System.out.println("SQLException: " + ex.getMessage());
                        System.out.println("SQLState: " + ex.getSQLState());
                        System.out.println("VendorError: " + ex.getErrorCode());
                        return null;
                }
        }

      
}




On Wednesday, July 13, 2005, at 05:23AM, Klaus Hubert <klaus_hubert@yahoo.com> wrote:

>Hi Xing,
>
>I have the book and as I wrote in my initial message I
>managed to create the
>sample index as well managed to read mySQL. But I seem
>to be not able to
>combine those programs :-( I'm very new to Java and I
>haven't found a nice
>Debugger so far to go step by step through my code. I
>will try today all day
>to get this fixed. I know, it shouldn't be too
>difficult.
>
>Thank you,
>
>  Klaus 
>
>-----Original Message-----
>From: Xing Li [mailto:xing@mac.com] 
>Sent: Wednesday, July 13, 2005 2:15 PM
>To: java-user@lucene.apache.org
>Subject: RE: SIMPLE Lucene / MySQL Indexer
>
>Don't make the mistake of complicating the task. Just
>read straight from
>mysql into lucene via java. There is no benefit of
>exporting data to xml
>just to regrab the data back into lucene. 
>
>Get the Lucene In actioin book if you haven't cause
>all the samples there
>are real-world practical. Are you need to add is 10
>lines of mysql type
>java/jdbc code and you are ready to create your first
>index. Download luke
>for lucene, GUI testing tool so you can browse the
>index, perform searches,
>validate/test search performan bottlenecks, dissect
>queries, etc.
>
>
>On Wednesday, July 13, 2005, at 05:04AM, Klaus Hubert
><klaus_hubert@yahoo.com> wrote:
>
>>Hi Ian,
>>
>>That's something I'm looking for. Right, a simple
>source code which 
>>reads a database and adds the fields to the index.
>What I've found also 
>>so far is another solution at 
>>http://www-128.ibm.com/developerworks/java/library/j-lucene/.
>>First step is
>>to export my MySQL database in simple XML and go from
>there. It is just 
>>an additional step and I would stick with this if I
>don't find another 
>>method to do all at once.
>>
>>Thanks,
>>
>>  Klaus
>>
>>-----Original Message-----
>>From: Ian Lea [mailto:ian.lea@gmail.com]
>>Sent: Wednesday, July 13, 2005 10:19 AM
>>To: java-user@lucene.apache.org
>>Subject: Re: SIMPLE Lucene / MySQL Indexer
>>
>>Something like this?
>>
>>IndexWriter iw = whatever
>>ResultSet rs = whatever
>>
>>while (rs.next()) {
>>   Document ldoc = new Document();
>>   ldoc.add(Field.Text("f1", rs.getString("f1"));
>>   ldoc.add(Field.Unstored("f2", rs.getString("f2"));
>>   ldoc.add(Field.Keyword("f3", rs.getString("f3"));
>>   ...
>>   iw.addDocument(ldoc);
>>}
>>
>>rs.close();
>>iw.close();
>>
>>
>>On the IDE front, most people seem to use Eclipse
>nowadays.
>>
>>
>>--
>>Ian.
>>
>>On 13/07/05, Klaus Hubert <klaus_hubert@yahoo.com>
>>wrote:
>>> Hi,
>>> 
>>> I played with several search engines to replace
>>MySQL FULLTEXT index
>>> and hope that Lucene is the best solution for that.
>>> 
>>> I am reading Mannings book on Lucene in action and
>>it seems to be the
>>> most powerful search engine I found so far.
>>> 
>>> I'm stuck at some problem and need help from you
>>experts. I managed to
>>> create an index as described in the examples. I
>also
>>managed to read a
>>> MySQL database in Java.
>>> 
>>> My question is, if anybody here has some SIMPLE
>>example which does
>>> this in one step. I am good in PHP and in Visual
>>Basic, but very new
>>> to Java. Maybe I'm using the wrong tools (NetBeans
>>IDE and JCreator)
>>> but I don't get it managed to create an Lucene
>Index
>>on 3 database
>>> fields.
>>> 
>>> I appreciate any help.
>>> 
>>> Thank you so much,
>>> 
>>>   Klaus
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail:
>>java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail:
>>java-user-help@lucene.apache.org
>>
>>
>>
>>__________________________________________________
>>Do You Yahoo!?
>>Tired of spam?  Yahoo! Mail has the best spam
>protection around 
>>http://mail.yahoo.com
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail:
>java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail:
>java-user-help@lucene.apache.org
>>
>>
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail:
>java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail:
>java-user-help@lucene.apache.org
>
>
>
>
>		
>____________________________________________________
>Start your day with Yahoo! - make it your home page
>http://www.yahoo.com/r/hs
> 
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 12:48:56 2005
Return-Path: <java-user-return-15415-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30526 invoked from network); 13 Jul 2005 12:48:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 12:48:56 -0000
Received: (qmail 48630 invoked by uid 500); 13 Jul 2005 12:48:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48611 invoked by uid 500); 13 Jul 2005 12:48:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48598 invoked by uid 99); 13 Jul 2005 12:48:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 05:48:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ian.lea@gmail.com designates 64.233.182.202 as permitted sender)
Received: from [64.233.182.202] (HELO nproxy.gmail.com) (64.233.182.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 05:48:46 -0700
Received: by nproxy.gmail.com with SMTP id d4so45302nfe
        for <java-user@lucene.apache.org>; Wed, 13 Jul 2005 05:48:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ksEPpt6hB/lRBMk14tdzZOQelyJMtqrl7qGvzHuWIBx2ADmwpkIPosSAr7aMsuqv55lYJOufUxsUNkK0GDj7nt+TwJExc5Sx2wfM4acznaaDiWa2keSu+i7JCv/NvSOY+xhNNS/1aY4jUnlUDv8mqkaqZGvy9GBZ5ak742ltolY=
Received: by 10.48.249.6 with SMTP id w6mr31461nfh;
        Wed, 13 Jul 2005 05:48:46 -0700 (PDT)
Received: by 10.48.250.3 with HTTP; Wed, 13 Jul 2005 05:48:46 -0700 (PDT)
Message-ID: <8c4e6861050713054877036239@mail.gmail.com>
Date: Wed, 13 Jul 2005 13:48:46 +0100
From: Ian Lea <ian.lea@gmail.com>
Reply-To: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org, Rahul D Thakare <rahul_thakare@rediffmail.com>
Subject: Re: Wild card and multiple keyword search
In-Reply-To: <20050713121844.304.qmail@webmail32.rediffmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20050713121844.304.qmail@webmail32.rediffmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sounds to me that all you need is to AND rather than OR your search terms.

=09QueryParser qp =3D new QueryParser("keywords", analyzer);
=09qp.setOperator(QueryParser.DEFAULT_OPERATOR_AND);
        Query q =3D qp.parse(words);

where analyzer is just the standard one.

Or search for +MAIN +BOARD.  Or MAIN AND BOARD.


--
Ian.


On 13 Jul 2005 12:18:44 -0000, Rahul D Thakare
<rahul_thakare@rediffmail.com> wrote:
> =20
> Hi,
>=20
>  We are using doc.add(Field.Text("keywords",keywords)); to add the keywor=
ds to the document, where keywords is comma separated keywords string.
> Lucene seems to tokenize the keywords with multiple words like(MAIN BOARD=
) as different keywords(ie as MAIN and BOARD). Tokenization is based on com=
ma and space...So if we search for "MAIN BOARD", documents having keywords =
like "MAIN LOGIC", "MAIN PARTS", etc also show up
>=20
> If one searches for "MAIN BOARD", we want get only the documents have "MA=
IN BOARD".  How to do this ?
>=20
> To achieve this we used doc.add(Field.Keyword("keywords", keywords)); and=
 while searching
> we cannot use standard analyzer, while searching, as divides the keywords=
 if we search keywords having space... so we wrote an KeywordAnalyser(Keywo=
rdAnalyzer is basically returns only one single token) as given below.
>=20
> /**
>  * Tokenizes the entire stream as single token
>  */
>=20
>  public class KeywordAnalyzer extends Analyzer
>  {
>          public TokenStream tokenStream(String fieldName, final Reader re=
ader)
>          {
>                  return new TokenStream(){
>                          private boolean done;
>                          private final char[] buffer =3D new char[1024];
>                          public Token next() throws IOException
>                          {
>                                  if(!done)
>                                  {
>                                          done =3D true;
>                                          StringBuffer buffer =3D new Stri=
ngBuffer();
>                                          int length =3D 0;
>                                          while(true)
>                                          {
>                                                  length =3D reader.read(t=
his.buffer);
>                                                  if(length =3D=3D -1) bre=
ak;
>=20
>                                                  buffer.append(this.buffe=
r,0,length);
>                                          }
>                                          String text =3D buffer.toString(=
);
>                                          return new Token(text.toUpperCas=
e(),0,text.length());
>                                  }
>                                  return null;
>                          }
>                  };
>          }
>  }
>=20
> Which solve the above said problem, but we are not able to the wild card =
searchs like MAIN*, etc.
>=20
> We need both the functionality ie.
> 1.  if user searches for MAIN BOARD, should get only documents that conta=
in MAIN BOARD and not MAIN LOGIC, MAIN, MAIN PART etc.
> 2. User should be able to do the wild card search like MAIN*, etc and get=
 the desired documents.
>=20
> Please let us know, how we should do the indexing ? and which analyzer to=
 use to do the search ?
>=20
> thanks
> Rahul...
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 13:39:55 2005
Return-Path: <java-user-return-15416-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58199 invoked from network); 13 Jul 2005 13:39:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 13:39:54 -0000
Received: (qmail 31361 invoked by uid 500); 13 Jul 2005 13:39:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31245 invoked by uid 500); 13 Jul 2005 13:39:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31198 invoked by uid 99); 13 Jul 2005 13:39:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 06:39:40 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 06:39:37 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 816BC13E2006; Wed, 13 Jul 2005 09:39:32 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 3373813E2005
	for <java-user@lucene.apache.org>; Wed, 13 Jul 2005 09:39:23 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050713121844.304.qmail@webmail32.rediffmail.com>
References: <20050713121844.304.qmail@webmail32.rediffmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3E265F5A-999F-481F-93D6-451990963081@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Wild card and multiple keyword search
Date: Wed, 13 Jul 2005 09:39:24 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 13, 2005, at 8:18 AM, Rahul D Thakare wrote:
>  We are using doc.add(Field.Text("keywords",keywords)); to add the  
> keywords to the document, where keywords is comma separated  
> keywords string.

If the text is already comma separated and that is the level at which  
you things tokenized, then simply do something like this (untested  
pseudo-code):

     String[] values = keywords.split(",");
     for (int i=0; i < values.length; i++)
         doc.add(Field.Keyword("keywords", values[i]));

> Lucene seems to tokenize the keywords with multiple words like(MAIN  
> BOARD) as different keywords(ie as MAIN and BOARD). Tokenization is  
> based on comma and space...So if we search for "MAIN BOARD",  
> documents having keywords like "MAIN LOGIC", "MAIN PARTS", etc also  
> show up
>
> If one searches for "MAIN BOARD", we want get only the documents  
> have "MAIN BOARD".  How to do this ?

The question back to you is do you want searches for simply "MAIN" to  
find both "MAIN LOGIC" and "MAIN PARTS"?  Or should it return no  
documents since its not an exact match?

Using the above code, "MAIN" would find neither of those and the  
query would have to be exact.  I see below you've clarified this  
requirement...

> To achieve this we used doc.add(Field.Keyword("keywords",  
> keywords)); and while searching
> we cannot use standard analyzer, while searching, as divides the  
> keywords if we search keywords having space... so we wrote an  
> KeywordAnalyser(KeywordAnalyzer is basically returns only one  
> single token) as given below.

There is a KeywordAnalyzer now in the contrib/analyzers codebase, and  
it will ship with the next version of Lucene (or you could build it  
yourself and use it).  There is also a couple of variants of the  
KeywordAnalyzer in the Lucene in Action code (www.lucenebook.com).

> Which solve the above said problem, but we are not able to the wild  
> card searchs like MAIN*, etc.
>
> We need both the functionality ie.
> 1.  if user searches for MAIN BOARD, should get only documents that  
> contain MAIN BOARD and not MAIN LOGIC, MAIN, MAIN PART etc.
> 2. User should be able to do the wild card search like MAIN*, etc  
> and get the desired documents.
>
> Please let us know, how we should do the indexing ? and which  
> analyzer to use to do the search ?

There are many ways to go about this sort of thing, and I apologize  
for being short on time and not able to explain them all fully.  One  
option is to keep the tokenization using a traditional analyzer so  
that it separates by whitespace, but when a user queries it turns  
into a PhraseQuery.  If you really mean for wildcards to be single  
words in the field (in other words, users don't need to query on MA*)  
then the space separated tokenization would work fine here as well.

It is important to think through the analysis process as well as the  
search interface issues (the interface must be given thorough  
consideration and treated as a first class citizen when discussing  
implementations), especially when wildcard and range queries come  
up.  It has been a hot topic recently on how to deal with wildcards  
and ranges efficiently.  In your example, if by "MAIN*" you intend  
for the word MAIN to be a unique token and the user would choose a  
full word to search upon and merely wants to find it within a larger  
field then wildcards are not necessary.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 13:54:26 2005
Return-Path: <java-user-return-15417-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64220 invoked from network); 13 Jul 2005 13:54:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 13:54:26 -0000
Received: (qmail 56674 invoked by uid 500); 13 Jul 2005 13:54:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56623 invoked by uid 500); 13 Jul 2005 13:54:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56559 invoked by uid 99); 13 Jul 2005 13:54:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 06:54:14 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Jul 2005 06:54:10 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IJKGX100.RMA for <java-user@lucene.apache.org>; Wed, 13
          Jul 2005 18:18:37 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: SIMPLE Lucene / MySQL Indexer
Date: Wed, 13 Jul 2005 18:10:52 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKIEFACEAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
in-reply-to: <20050713122335.4473.qmail@web52711.mail.yahoo.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


hI

Apologies....


Interesting this is not the Form to discuss about HOW to Debugging with
Eclipse

 So I suggest u to use the Help tab in Eclispe Ide.

 Hint : First set  the Break point on hte code and then use Use the Debug
tab under Run.



 this is a Lucene Form Guys....


Karthik



-----Original Message-----
From: Klaus Hubert [mailto:klaus_hubert@yahoo.com]
Sent: Wednesday, July 13, 2005 5:54 PM
To: java-user@lucene.apache.org
Subject: RE: SIMPLE Lucene / MySQL Indexer


Hi Xing,

I have the book and as I wrote in my initial message I
managed to create the
sample index as well managed to read mySQL. But I seem
to be not able to
combine those programs :-( I'm very new to Java and I
haven't found a nice
Debugger so far to go step by step through my code. I
will try today all day
to get this fixed. I know, it shouldn't be too
difficult.

Thank you,

  Klaus

-----Original Message-----
From: Xing Li [mailto:xing@mac.com]
Sent: Wednesday, July 13, 2005 2:15 PM
To: java-user@lucene.apache.org
Subject: RE: SIMPLE Lucene / MySQL Indexer

Don't make the mistake of complicating the task. Just
read straight from
mysql into lucene via java. There is no benefit of
exporting data to xml
just to regrab the data back into lucene.

Get the Lucene In actioin book if you haven't cause
all the samples there
are real-world practical. Are you need to add is 10
lines of mysql type
java/jdbc code and you are ready to create your first
index. Download luke
for lucene, GUI testing tool so you can browse the
index, perform searches,
validate/test search performan bottlenecks, dissect
queries, etc.


On Wednesday, July 13, 2005, at 05:04AM, Klaus Hubert
<klaus_hubert@yahoo.com> wrote:

>Hi Ian,
>
>That's something I'm looking for. Right, a simple
source code which
>reads a database and adds the fields to the index.
What I've found also
>so far is another solution at
>http://www-128.ibm.com/developerworks/java/library/j-lucene/.
>First step is
>to export my MySQL database in simple XML and go from
there. It is just
>an additional step and I would stick with this if I
don't find another
>method to do all at once.
>
>Thanks,
>
>  Klaus
>
>-----Original Message-----
>From: Ian Lea [mailto:ian.lea@gmail.com]
>Sent: Wednesday, July 13, 2005 10:19 AM
>To: java-user@lucene.apache.org
>Subject: Re: SIMPLE Lucene / MySQL Indexer
>
>Something like this?
>
>IndexWriter iw = whatever
>ResultSet rs = whatever
>
>while (rs.next()) {
>   Document ldoc = new Document();
>   ldoc.add(Field.Text("f1", rs.getString("f1"));
>   ldoc.add(Field.Unstored("f2", rs.getString("f2"));
>   ldoc.add(Field.Keyword("f3", rs.getString("f3"));
>   ...
>   iw.addDocument(ldoc);
>}
>
>rs.close();
>iw.close();
>
>
>On the IDE front, most people seem to use Eclipse
nowadays.
>
>
>--
>Ian.
>
>On 13/07/05, Klaus Hubert <klaus_hubert@yahoo.com>
>wrote:
>> Hi,
>>
>> I played with several search engines to replace
>MySQL FULLTEXT index
>> and hope that Lucene is the best solution for that.
>>
>> I am reading Mannings book on Lucene in action and
>it seems to be the
>> most powerful search engine I found so far.
>>
>> I'm stuck at some problem and need help from you
>experts. I managed to
>> create an index as described in the examples. I
also
>managed to read a
>> MySQL database in Java.
>>
>> My question is, if anybody here has some SIMPLE
>example which does
>> this in one step. I am good in PHP and in Visual
>Basic, but very new
>> to Java. Maybe I'm using the wrong tools (NetBeans
>IDE and JCreator)
>> but I don't get it managed to create an Lucene
Index
>on 3 database
>> fields.
>>
>> I appreciate any help.
>>
>> Thank you so much,
>>
>>   Klaus
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail:
>java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail:
>java-user-help@lucene.apache.org
>
>
>
>__________________________________________________
>Do You Yahoo!?
>Tired of spam?  Yahoo! Mail has the best spam
protection around
>http://mail.yahoo.com
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail:
java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail:
java-user-help@lucene.apache.org





____________________________________________________
Start your day with Yahoo! - make it your home page
http://www.yahoo.com/r/hs


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 14:39:42 2005
Return-Path: <java-user-return-15418-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81328 invoked from network); 13 Jul 2005 14:39:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 14:39:42 -0000
Received: (qmail 39367 invoked by uid 500); 13 Jul 2005 14:39:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39336 invoked by uid 500); 13 Jul 2005 14:39:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39323 invoked by uid 99); 13 Jul 2005 14:39:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 07:39:32 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_20_30,HTML_MESSAGE,MSGID_FROM_MTA_HEADER
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.83.32] (HELO rediffmail.com) (203.199.83.32)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Jul 2005 07:39:28 -0700
Received: (qmail 5132 invoked by uid 510); 13 Jul 2005 14:40:53 -0000
Date: 13 Jul 2005 14:40:53 -0000
Message-ID: <20050713144053.5131.qmail@webmail32.rediffmail.com>
Received: from unknown (61.95.167.91) by rediffmail.com via HTTP; 13 jul 2005 14:40:53 -0000
MIME-Version: 1.0
From: "Rahul D Thakare" <rahul_thakare@rediffmail.com>
Reply-To: "Rahul D Thakare" <rahul_thakare@rediffmail.com>
To: java-user@lucene.apache.org
Cc: "Erik Hatcher" <erik@ehatchersolutions.com>
Subject: Re: Re: Wild card and multiple keyword search
Content-type: multipart/alternative;
	boundary="Next_1121265653---0-203.199.83.32-5117"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Next_1121265653---0-203.199.83.32-5117
Content-type: text/plain;
	charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Hi Erik,=0A=0A  Thanks for the reply.=0A=0A  Here are the answers of your q=
ueries =0A=0A que: - The question back to you is do you want searches for s=
imply "MAIN" to =A0=0Afind both "MAIN LOGIC" and "MAIN PARTS"? =A0Or should=
 it return no =A0=0Adocuments since its not an exact match?=0A=0AAns: It sh=
ould return no documents since it is not a exact match.=0A=0AI would like t=
o explain my point 2 in below mail again by giveing an example here=0A=0A e=
g- If there are two records with keyword ie "Main Logic" and "Main Board" r=
espectively.=0A=0Awhat we want is =0A1. if the user serch on Main*, both th=
e record should return.=0A2. If the user search on "Main Logic", only one r=
ecord should be return.=0A3. If the user searches for Main, no record shoul=
d be returned=0A=0A=0A point 2 above is working now because we are using Fi=
eld.Keyword (which doesn't tokenise the spaces) and KeywordAnalyser.=0A=0A =
point 1 (wild card search) is not working because KeywordAnalyser does not =
recognise wild card=0A=0Awould appreciate more information on this.=0A=0Ath=
anks in advance.=0A=0Arahul=0A=0AOn Wed, 13 Jul 2005 Erik Hatcher wrote :=
=0A>=0A>On Jul 13, 2005, at 8:18 AM, Rahul D Thakare wrote:=0A>>  We are us=
ing doc.add(Field.Text("keywords",keywords)); to add the  keywords to the d=
ocument, where keywords is comma separated  keywords string.=0A>=0A>If the =
text is already comma separated and that is the level at which  you things =
tokenized, then simply do something like this (untested  pseudo-code):=0A>=
=0A>     String[] values =3D keywords.split(",");=0A>     for (int i=3D0; i=
 < values.length; i++)=0A>         doc.add(Field.Keyword("keywords", values=
[i]));=0A>=0A>>Lucene seems to tokenize the keywords with multiple words li=
ke(MAIN  BOARD) as different keywords(ie as MAIN and BOARD). Tokenization i=
s  based on comma and space...So if we search for "MAIN BOARD",  documents =
having keywords like "MAIN LOGIC", "MAIN PARTS", etc also  show up=0A>>=0A>=
>If one searches for "MAIN BOARD", we want get only the documents  have "MA=
IN BOARD".  How to do this ?=0A>=0A>The question back to you is do you want=
 searches for simply "MAIN" to  find both "MAIN LOGIC" and "MAIN PARTS"?  O=
r should it return no  documents since its not an exact match?=0A>=0A>Using=
 the above code, "MAIN" would find neither of those and the  query would ha=
ve to be exact.  I see below you've clarified this  requirement...=0A>=0A>>=
To achieve this we used doc.add(Field.Keyword("keywords",  keywords)); and =
while searching=0A>>we cannot use standard analyzer, while searching, as di=
vides the  keywords if we search keywords having space... so we wrote an  K=
eywordAnalyser(KeywordAnalyzer is basically returns only one  single token)=
 as given below.=0A>=0A>There is a KeywordAnalyzer now in the contrib/analy=
zers codebase, and  it will ship with the next version of Lucene (or you co=
uld build it  yourself and use it).  There is also a couple of variants of =
the  KeywordAnalyzer in the Lucene in Action code (www.lucenebook.com).=0A>=
=0A>>Which solve the above said problem, but we are not able to the wild  c=
ard searchs like MAIN*, etc.=0A>>=0A>>We need both the functionality ie.=0A=
>>1.  if user searches for MAIN BOARD, should get only documents that  cont=
ain MAIN BOARD and not MAIN LOGIC, MAIN, MAIN PART etc.=0A>>2. User should =
be able to do the wild card search like MAIN*, etc  and get the desired doc=
uments.=0A>>=0A>>Please let us know, how we should do the indexing ? and wh=
ich  analyzer to use to do the search ?=0A>=0A>There are many ways to go ab=
out this sort of thing, and I apologize  for being short on time and not ab=
le to explain them all fully.  One  option is to keep the tokenization usin=
g a traditional analyzer so  that it separates by whitespace, but when a us=
er queries it turns  into a PhraseQuery.  If you really mean for wildcards =
to be single  words in the field (in other words, users don't need to query=
 on MA*)  then the space separated tokenization would work fine here as wel=
l.=0A>=0A>It is important to think through the analysis process as well as =
the  search interface issues (the interface must be given thorough  conside=
ration and treated as a first class citizen when discussing  implementation=
s), especially when wildcard and range queries come  up.  It has been a hot=
 topic recently on how to deal with wildcards  and ranges efficiently.  In =
your example, if by "MAIN*" you intend  for the word MAIN to be a unique to=
ken and the user would choose a  full word to search upon and merely wants =
to find it within a larger  field then wildcards are not necessary.=0A>=0A>=
     Erik=0A>=0A>=0A>------------------------------------------------------=
---------------=0A>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apa=
che.org=0A>For additional commands, e-mail: java-user-help@lucene.apache.or=
g=0A>=0A
--Next_1121265653---0-203.199.83.32-5117--


From java-user-return-15419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 15:07:37 2005
Return-Path: <java-user-return-15419-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91473 invoked from network); 13 Jul 2005 15:07:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 15:07:36 -0000
Received: (qmail 90209 invoked by uid 500); 13 Jul 2005 15:07:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90155 invoked by uid 500); 13 Jul 2005 15:07:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90125 invoked by uid 99); 13 Jul 2005 15:07:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 08:07:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lasse.lindgaard@gmail.com designates 64.233.184.204 as permitted sender)
Received: from [64.233.184.204] (HELO wproxy.gmail.com) (64.233.184.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 08:07:24 -0700
Received: by wproxy.gmail.com with SMTP id 37so206289wra
        for <java-user@lucene.apache.org>; Wed, 13 Jul 2005 08:07:24 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=V6bteogtYvGyO7LlzZJ6dQG4k/fHzUPy1L6SWzkn+0iaX/Bf0j1bwNMJAuXnPdA5MvdR4wEj3K6XCfYYiNWVLw0vDVoYZ8mvWuUaxdHHiYKabSaJefFE4MXNxF5tbvj3AP5QPkSNOFHhAWrdZNXdp27ul7/rSRFONUQU365HtI8=
Received: by 10.54.34.19 with SMTP id h19mr329984wrh;
        Wed, 13 Jul 2005 08:06:46 -0700 (PDT)
Received: by 10.54.147.5 with HTTP; Wed, 13 Jul 2005 08:06:46 -0700 (PDT)
Message-ID: <300d7b19050713080663169823@mail.gmail.com>
Date: Wed, 13 Jul 2005 17:06:46 +0200
From: Lasse L <lasse.lindgaard@gmail.com>
Reply-To: Lasse L <lasse.lindgaard@gmail.com>
To: java-user@lucene.apache.org
Subject: OutOfMemoryError
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I can see that this has been up before, but I still hope to get some
advice based on my specific environment.

I index some documents with 26 fields in them. The size 10000 indexed
documents is 4mb, so it shouldn't be overwhelming amounts of data
compared to what I have heard lucene can do.

Nevertheless. When I run my daemon thread at night it consistently
crashes with an OutOfMemoryError after about 10000 documents. If I
restart the bea 6.1 / sun jdk 1.3 server it continues without a hitch,
then crashes again after about 10000 more documents.

I manually call optimize after each 100 documents.

I create my IndexWriter like this:
=09=09IndexWriter writer;
=09=09writer =3D new IndexWriter(_indexPath, getAnalyzer(), false);
=09=09writer.setUseCompoundFile(true);
=09=09writer.mergeFactor =3D 5;
=09=09writer.minMergeDocs =3D 10;
=09=09writer.maxMergeDocs =3D 500;

My heap size is just 256mb. I can double that easy, but I can't make
it 15 times larger.

I need to index a total of 150000 documents. The creation of a
document takes about 1 second so performance from lucene is not so
critical. Just don't crash on me.

I read elsewhere about some gc issues on jdk 1.3. Is that true and is
there some workaround I would need to do? Threadlocals? static
variables that can be reset?

I didn't get around to run a profiler on our app to see if the way I
use our own code somehow creates a leak. But I don't see why it would.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 15:45:34 2005
Return-Path: <java-user-return-15420-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11767 invoked from network); 13 Jul 2005 15:45:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 15:45:34 -0000
Received: (qmail 88705 invoked by uid 500); 13 Jul 2005 15:45:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88594 invoked by uid 500); 13 Jul 2005 15:45:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88398 invoked by uid 99); 13 Jul 2005 15:45:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 08:45:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ian.lea@gmail.com designates 64.233.182.199 as permitted sender)
Received: from [64.233.182.199] (HELO nproxy.gmail.com) (64.233.182.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 08:45:11 -0700
Received: by nproxy.gmail.com with SMTP id d4so57990nfe
        for <java-user@lucene.apache.org>; Wed, 13 Jul 2005 08:45:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sOyHNnZfCwTwJ2UF0htMgblAhrxUOLB/aV04ZVpRng0UZBjPr10pZwDviFOBFrhEtZvligdFiGivWaFEw5JgwSL7XqJdb60LITikP3M8DdC9D6+ET2084N67b9xawRJ+j5aURn98/mhdqj/agOwwrUr4eQUGBMX6BZUKf5PLjoQ=
Received: by 10.48.143.9 with SMTP id q9mr40453nfd;
        Wed, 13 Jul 2005 08:45:11 -0700 (PDT)
Received: by 10.48.250.3 with HTTP; Wed, 13 Jul 2005 08:45:11 -0700 (PDT)
Message-ID: <8c4e686105071308452eb5c647@mail.gmail.com>
Date: Wed, 13 Jul 2005 16:45:11 +0100
From: Ian Lea <ian.lea@gmail.com>
Reply-To: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org, Lasse L <lasse.lindgaard@gmail.com>
Subject: Re: OutOfMemoryError
In-Reply-To: <300d7b19050713080663169823@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <300d7b19050713080663169823@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Might be interesting to know if it crashed on 20000 docs if you ran it
with heap size of 512Mb.  I guess you've already tried with default
merge values.  Shouldn't need to optimize after every 100 docs.  jdk
1.3 is pretty ancient - can you use 1.5?

I'd try it with a larger heap size, and then look for leaks in your
code. Maybe run the load program without the lucene calls and see if
it still fails.


--
Ian.


On 13/07/05, Lasse L <lasse.lindgaard@gmail.com> wrote:
> Hi,
>=20
> I can see that this has been up before, but I still hope to get some
> advice based on my specific environment.
>=20
> I index some documents with 26 fields in them. The size 10000 indexed
> documents is 4mb, so it shouldn't be overwhelming amounts of data
> compared to what I have heard lucene can do.
>=20
> Nevertheless. When I run my daemon thread at night it consistently
> crashes with an OutOfMemoryError after about 10000 documents. If I
> restart the bea 6.1 / sun jdk 1.3 server it continues without a hitch,
> then crashes again after about 10000 more documents.
>=20
> I manually call optimize after each 100 documents.
>=20
> I create my IndexWriter like this:
>                 IndexWriter writer;
>                 writer =3D new IndexWriter(_indexPath, getAnalyzer(), fal=
se);
>                 writer.setUseCompoundFile(true);
>                 writer.mergeFactor =3D 5;
>                 writer.minMergeDocs =3D 10;
>                 writer.maxMergeDocs =3D 500;
>=20
> My heap size is just 256mb. I can double that easy, but I can't make
> it 15 times larger.
>=20
> I need to index a total of 150000 documents. The creation of a
> document takes about 1 second so performance from lucene is not so
> critical. Just don't crash on me.
>=20
> I read elsewhere about some gc issues on jdk 1.3. Is that true and is
> there some workaround I would need to do? Threadlocals? static
> variables that can be reset?
>=20
> I didn't get around to run a profiler on our app to see if the way I
> use our own code somehow creates a leak. But I don't see why it would.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 15:48:03 2005
Return-Path: <java-user-return-15421-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12526 invoked from network); 13 Jul 2005 15:48:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 15:48:03 -0000
Received: (qmail 94905 invoked by uid 500); 13 Jul 2005 15:47:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94884 invoked by uid 500); 13 Jul 2005 15:47:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94871 invoked by uid 99); 13 Jul 2005 15:47:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 08:47:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.204 as permitted sender)
Received: from [64.233.184.204] (HELO wproxy.gmail.com) (64.233.184.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 08:47:53 -0700
Received: by wproxy.gmail.com with SMTP id i30so188893wra
        for <java-user@lucene.apache.org>; Wed, 13 Jul 2005 08:47:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=IPl6k/X82rbLmLhkLBfrRfdIInl34nSlVTsCOLv9kEWE+MEe3G9hyShmwdfO4RxSw5TAPL9QhWu4EHE48sMLs6G4JQDUB1oEjtdEMAbT5tGQoHdIoC+YnN0UDBS8imZwtEMcug3bhZIId3JDhwgG0vNm1O+FML9H00pWtQnJ3pY=
Received: by 10.54.31.62 with SMTP id e62mr344713wre;
        Wed, 13 Jul 2005 08:47:14 -0700 (PDT)
Received: by 10.54.24.34 with HTTP; Wed, 13 Jul 2005 08:47:14 -0700 (PDT)
Message-ID: <6e3ae6310507130847646b852@mail.gmail.com>
Date: Wed, 13 Jul 2005 08:47:14 -0700
From: Chris Lu <chris.lu@gmail.com>
Reply-To: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: SIMPLE Lucene / MySQL Indexer
In-Reply-To: <20050713115944.62128.qmail@web52708.mail.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20050713115944.62128.qmail@web52708.mail.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, Klaus, thanks.

You can simply use DBSight to create the index. It's in Lucene's
standard format.
And you can control index field type, analyzers, how to select data
from database, number of java threads, etc, just by web UI. No coding
is needed. We have a user who didn't know Lucene at all, and have 3
database searches up and running in one week.

To index a huge index, say 1 million records, it may take 5 ~ 24 hours
depends on the record size, computer size, etc. Actually most of the
time is spent on JDBC pulling the data.

Special warning: MySQL's JDBC driver has a bug leading to OutOfMemory
if you do a select with lots of rows. You must download the latest
JDBC(dev version) and use setFetchSize().

Chris
---
Full-Text Search on Any Database
http://www.dbsight.net

On 7/13/05, Klaus Hubert <klaus_hubert@yahoo.com> wrote:
> Hi Chris,
>=20
> this is indeed a cool application, but I need just to
> create the index. I
> definitely will look into your file and see if it
> makes my life easier. Can
> you tell any details how long it took to create such a
> huge index? What
> experiences you have with the slowest search? Does it
> go over 1 second? (I
> know, it depends on the hardware, but I'm just
> wondering)
>=20
> Thanks,
>=20
>   Klaus
>=20
> -----Original Message-----
> From: Chris Lu [mailto:chris.lu@gmail.com]
> Sent: Wednesday, July 13, 2005 5:04 AM
> To: java-user@lucene.apache.org
> Subject: Re: SIMPLE Lucene / MySQL Indexer
>=20
> Please allow me to intraduce DBSight.
> It's based on Lucene, oriented for Any database
> search.
>=20
> Most of the things are done by web UI. No coding is
> needed to create your
> search.
> check out this demo.  http://search.dbsight.com
>=20
> It's free to download and test. Free for developer
> edition, non-profit
> usage.
>=20
> Chris Lu
> ---
> Full-Text Search on Any Database
> http://www.dbsight.net
>=20
> Klaus Hubert wrote:
>=20
> >Hi,
> >
> >I played with several search engines to replace MySQL
> FULLTEXT index
> >and hope that Lucene is the best solution for that.
> >
> >I am reading Mannings book on Lucene in action and it
> seems to be the
> >most powerful search engine I found so far.
> >
> >I'm stuck at some problem and need help from you
> experts. I managed to
> >create an index as described in the examples. I also
> managed to read a
> >MySQL database in Java.
> >
> >My question is, if anybody here has some SIMPLE
> example which does this
> >in one step. I am good in PHP and in Visual Basic,
> but very new to
> >Java. Maybe I'm using the wrong tools (NetBeans IDE
> and JCreator) but I
> >don't get it managed to create an Lucene Index on 3
> database fields.
> >
> >I appreciate any help.
> >
> >Thank you so much,
> >
> >  Klaus
> >
> >__________________________________________________
> >Do You Yahoo!?
> >Tired of spam?  Yahoo! Mail has the best spam
> protection around
> >http://mail.yahoo.com
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >
> >
> >
>=20
>=20
> --
> Chris Lu
> --------------
> Free-Text Search on Any Database
> http://www.dbsight.net
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
>=20
>=20
>=20
>=20
>=20
> ____________________________________________________
> Start your day with Yahoo! - make it your home page
> http://www.yahoo.com/r/hs
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Chris Lu
---------------------
Full-Text Search on Any Database
http://www.dbsight.net

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 18:43:14 2005
Return-Path: <java-user-return-15422-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93048 invoked from network); 13 Jul 2005 18:43:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 18:43:14 -0000
Received: (qmail 16560 invoked by uid 500); 13 Jul 2005 18:43:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16292 invoked by uid 500); 13 Jul 2005 18:43:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16223 invoked by uid 99); 13 Jul 2005 18:43:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 11:43:00 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_30_40,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.218.93.41] (HELO web41208.mail.yahoo.com) (66.218.93.41)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Jul 2005 11:42:57 -0700
Received: (qmail 55126 invoked by uid 60001); 13 Jul 2005 18:42:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=DIWph+DVBl1clqHXF7qFz8l30hrA9dl5IKAaq/ayJPWbLB/dYy2TxthE+jhXkUhu+4RrLfhh1rAtYFNBrikiFwBr1E3kNVf8YReqH9iPzA/SNoW/a+xnDdu6xiKV5a/H+idk8PCmNnFS7rwe5hC8zip8UEtVZniNRbtLnzpsah4=  ;
Message-ID: <20050713184257.55124.qmail@web41208.mail.yahoo.com>
Received: from [67.94.92.138] by web41208.mail.yahoo.com via HTTP; Wed, 13 Jul 2005 11:42:57 PDT
Date: Wed, 13 Jul 2005 11:42:57 -0700 (PDT)
From: Lokesh Bajaj <lokesh_bajaj@yahoo.com>
Subject: "docMap" array in SegmentMergeInfo
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1828305538-1121280177=:53857"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1828305538-1121280177=:53857
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit


I noticed the following code that builds the "docMap" array in SegmentMergeInfo.java for the case where some documents might be deleted from an index:

    // build array which maps document numbers around deletions 
    if (reader.hasDeletions()) {
      int maxDoc = reader.maxDoc();
      docMap = new int[maxDoc];
      int j = 0;
      for (int i = 0; i < maxDoc; i++) {
        if (reader.isDeleted(i))
          docMap[i] = -1;
        else
          docMap[i] = j++;
      }
    }
  }

For a very large index where we might want to delete/replace some documents, this would require a lot of memory (for 100 million documents, this would need 381 MB of memory). Is there any reason why this was implemented this way?

It seems like this could be implemented as a much smaller array that only keeps track of the deleted document numbers and it would still be very efficient to calculate the new document number by using this much smaller array. Has this been done by anyone else or been considered for change in the Lucene code?

Lokesh


--0-1828305538-1121280177=:53857--

From java-user-return-15423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 20:05:35 2005
Return-Path: <java-user-return-15423-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25720 invoked from network); 13 Jul 2005 20:05:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 20:05:35 -0000
Received: (qmail 31916 invoked by uid 500); 13 Jul 2005 20:05:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31896 invoked by uid 500); 13 Jul 2005 20:05:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31881 invoked by uid 99); 13 Jul 2005 20:05:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 13:05:27 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.48.234] (HELO web52711.mail.yahoo.com) (206.190.48.234)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Jul 2005 13:05:23 -0700
Received: (qmail 21204 invoked by uid 60001); 13 Jul 2005 20:05:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=dZTsMmwZigzMRDDTtQBZg25XmILL3ZHhWw1n4mnRVNqzJUJvOizxJSWlZ6mHAbJIYUqCWFuH+s3L+Gf/+P/taKLYOINepm4EnB2PxY/FQ5SKHyB5GDMa3Lr4n/o16NavNkxoxip30gDoWkSDiKTcUHvksiG8jQ6Ivpmr5UizZCA=  ;
Message-ID: <20050713200523.21202.qmail@web52711.mail.yahoo.com>
Received: from [84.162.94.33] by web52711.mail.yahoo.com via HTTP; Wed, 13 Jul 2005 13:05:23 PDT
Date: Wed, 13 Jul 2005 13:05:23 -0700 (PDT)
From: Klaus Hubert <klaus_hubert@yahoo.com>
Subject: RE: SIMPLE Lucene / MySQL Indexer
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

Thank you all so much for the crash course in Java for
Beginners. Indeed the
last time I used java was 1996... Lol. But I'm getting
now very close. It is
all about the right declarations of classes and
includes at the correct
location. I have almost done it. I will publish my
code to the community if
somebody is interested.

Bye,

  Klaus

-----Original Message-----
From: Xing Li [mailto:xing@mac.com] 
Sent: Wednesday, July 13, 2005 2:38 PM
To: java-user@lucene.apache.org
Subject: RE: SIMPLE Lucene / MySQL Indexer

Kalus,

Just a few days ago I couldn't even remember how to
compile java code. Last
time I touched java was like 2001. Don't worry, Lucene
is extremely easy,
once you know a bit of fund java. It's no different
than any other language.
Just syntax. I recommend Java from Deitel & Deitel.
Fell in love with their
practical written style back in college. 

Below is what I whipped up quick to test mysql
connections...

Just add  the following to an lucene book sample. You
need to download
ConnectJ jdbc driver from mysql site and put the jar
file in your path
variable. 

my_db db = new my_db();
db.connect();

ResultSet = rs;

rs = db.query("select * from mytable limit 100");

whiel(rs.next()) {
....... = rs.getString("mysqltablefieldname");
//return string value of
mysql row/column....
...copy code from lucene...
}.


import java.sql.*;

public class my_db {

        public Connection conn = null;
        public Statement stmt = null;
        public boolean loaded = false;

        public boolean load() {
                try {
                        // The newInstance() call is a
work around for some
                        // broken Java implementations

                       
Class.forName("com.mysql.jdbc.Driver");
                        return true;
                } catch (Exception ex) {

                        System.out.println("Cannot
load mysql driver.");
                        return false;
                        // handle the error
                }

        }

        public boolean connect() {
                if(loaded == false) {
                        loaded = load();
                }

                if(loaded == false) {
                        System.out.println("Can't load
driver.");
                        return false;
                }
try {
                        conn =
DriverManager.getConnection("jdbc:mysql://ip:port/dbname?user=user&password=
pass");

                        stmt = conn.createStatement();
                        stmt.executeQuery("SET NAMES
'utf8'");

                        return true;
                }
                catch (SQLException ex) {
                        // handle any errors
                       
System.out.println("SQLException: " +
ex.getMessage());
                        System.out.println("SQLState:
" + ex.getSQLState());
                       
System.out.println("VendorError: " +
ex.getErrorCode());
                        return false;
                }
        }

        public ResultSet query(String sql) {
                try {
                        return stmt.executeQuery(sql);
                }
                catch (SQLException ex) {
                        // handle any errors
                       
System.out.println("SQLException: " +
ex.getMessage());
                        System.out.println("SQLState:
" + ex.getSQLState());
                       
System.out.println("VendorError: " +
ex.getErrorCode());
                        return null;
                }
        }

      
}




On Wednesday, July 13, 2005, at 05:23AM, Klaus Hubert
<klaus_hubert@yahoo.com> wrote:

>Hi Xing,
>
>I have the book and as I wrote in my initial message
I managed to 
>create the sample index as well managed to read
mySQL. But I seem to be 
>not able to combine those programs :-( I'm very new
to Java and I 
>haven't found a nice Debugger so far to go step by
step through my 
>code. I will try today all day to get this fixed. I
know, it shouldn't 
>be too difficult.
>
>Thank you,
>
>  Klaus
>
>-----Original Message-----
>From: Xing Li [mailto:xing@mac.com]
>Sent: Wednesday, July 13, 2005 2:15 PM
>To: java-user@lucene.apache.org
>Subject: RE: SIMPLE Lucene / MySQL Indexer
>
>Don't make the mistake of complicating the task. Just
read straight 
>from mysql into lucene via java. There is no benefit
of exporting data 
>to xml just to regrab the data back into lucene.
>
>Get the Lucene In actioin book if you haven't cause
all the samples 
>there are real-world practical. Are you need to add
is 10 lines of 
>mysql type java/jdbc code and you are ready to create
your first index. 
>Download luke for lucene, GUI testing tool so you can
browse the index, 
>perform searches, validate/test search performan
bottlenecks, dissect 
>queries, etc.
>
>
>On Wednesday, July 13, 2005, at 05:04AM, Klaus Hubert

><klaus_hubert@yahoo.com> wrote:
>
>>Hi Ian,
>>
>>That's something I'm looking for. Right, a simple
>source code which
>>reads a database and adds the fields to the index.
>What I've found also
>>so far is another solution at
>>http://www-128.ibm.com/developerworks/java/library/j-lucene/.
>>First step is
>>to export my MySQL database in simple XML and go
from
>there. It is just
>>an additional step and I would stick with this if I
>don't find another
>>method to do all at once.
>>
>>Thanks,
>>
>>  Klaus
>>
>>-----Original Message-----
>>From: Ian Lea [mailto:ian.lea@gmail.com]
>>Sent: Wednesday, July 13, 2005 10:19 AM
>>To: java-user@lucene.apache.org
>>Subject: Re: SIMPLE Lucene / MySQL Indexer
>>
>>Something like this?
>>
>>IndexWriter iw = whatever
>>ResultSet rs = whatever
>>
>>while (rs.next()) {
>>   Document ldoc = new Document();
>>   ldoc.add(Field.Text("f1", rs.getString("f1"));
>>   ldoc.add(Field.Unstored("f2",
rs.getString("f2"));
>>   ldoc.add(Field.Keyword("f3", rs.getString("f3"));
>>   ...
>>   iw.addDocument(ldoc);
>>}
>>
>>rs.close();
>>iw.close();
>>
>>
>>On the IDE front, most people seem to use Eclipse
>nowadays.
>>
>>
>>--
>>Ian.
>>
>>On 13/07/05, Klaus Hubert <klaus_hubert@yahoo.com>
>>wrote:
>>> Hi,
>>> 
>>> I played with several search engines to replace
>>MySQL FULLTEXT index
>>> and hope that Lucene is the best solution for
that.
>>> 
>>> I am reading Mannings book on Lucene in action and
>>it seems to be the
>>> most powerful search engine I found so far.
>>> 
>>> I'm stuck at some problem and need help from you
>>experts. I managed to
>>> create an index as described in the examples. I
>also
>>managed to read a
>>> MySQL database in Java.
>>> 
>>> My question is, if anybody here has some SIMPLE
>>example which does
>>> this in one step. I am good in PHP and in Visual
>>Basic, but very new
>>> to Java. Maybe I'm using the wrong tools (NetBeans
>>IDE and JCreator)
>>> but I don't get it managed to create an Lucene
>Index
>>on 3 database
>>> fields.
>>> 
>>> I appreciate any help.
>>> 
>>> Thank you so much,
>>> 
>>>   Klaus
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail:
>>java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail:
>>java-user-help@lucene.apache.org
>>
>>
>>
>>__________________________________________________
>>Do You Yahoo!?
>>Tired of spam?  Yahoo! Mail has the best spam
>protection around
>>http://mail.yahoo.com
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail:
>java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail:
>java-user-help@lucene.apache.org
>>
>>
>>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail:
>java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail:
>java-user-help@lucene.apache.org
>
>
>
>
>		
>____________________________________________________
>Start your day with Yahoo! - make it your home page 
>http://www.yahoo.com/r/hs
> 
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail:
java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail:
java-user-help@lucene.apache.org



__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 20:06:52 2005
Return-Path: <java-user-return-15424-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26889 invoked from network); 13 Jul 2005 20:06:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 20:06:52 -0000
Received: (qmail 35865 invoked by uid 500); 13 Jul 2005 20:06:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35846 invoked by uid 500); 13 Jul 2005 20:06:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35833 invoked by uid 99); 13 Jul 2005 20:06:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 13:06:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.48.226] (HELO web52703.mail.yahoo.com) (206.190.48.226)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Jul 2005 13:06:42 -0700
Received: (qmail 24897 invoked by uid 60001); 13 Jul 2005 20:06:42 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=R0uO4Gy9grZzxppjUKjgLWFwYtONxtcAITzzLlImYFtmP8HrCzJjpCPlHqWVnr2Q8d/ebgSsehoLGj7YVSPmgN+hF2kuriMNpSQ+4CGlBKPHQx6zB+DKCE3VExrhWGL9sONvJlR7H4Eeo7WtQCaagatkXNqJgRABlK4l9Bc/wAI=  ;
Message-ID: <20050713200642.24893.qmail@web52703.mail.yahoo.com>
Received: from [84.162.94.33] by web52703.mail.yahoo.com via HTTP; Wed, 13 Jul 2005 13:06:42 PDT
Date: Wed, 13 Jul 2005 13:06:42 -0700 (PDT)
From: Klaus Hubert <klaus_hubert@yahoo.com>
Subject: RE: SIMPLE Lucene / MySQL Indexer
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Yes, it works with breakpoints and so on, but the
current line is never
highlighted. All I see where it is the line number in
the debug window. But
you are right, this is no Java Forum and I apologize
for beginners
questions.

-----Original Message-----
From: Karthik N S [mailto:karthik@controlnet.co.in] 
Sent: Wednesday, July 13, 2005 2:41 PM
To: java-user@lucene.apache.org
Subject: RE: SIMPLE Lucene / MySQL Indexer


hI

Apologies....


Interesting this is not the Form to discuss about HOW
to Debugging with
Eclipse

 So I suggest u to use the Help tab in Eclispe Ide.

 Hint : First set  the Break point on hte code and
then use Use the Debug
tab under Run.



 this is a Lucene Form Guys....


Karthik



-----Original Message-----
From: Klaus Hubert [mailto:klaus_hubert@yahoo.com]
Sent: Wednesday, July 13, 2005 5:54 PM
To: java-user@lucene.apache.org
Subject: RE: SIMPLE Lucene / MySQL Indexer


Hi Xing,

I have the book and as I wrote in my initial message I
managed to create the
sample index as well managed to read mySQL. But I seem
to be not able to
combine those programs :-( I'm very new to Java and I
haven't found a nice
Debugger so far to go step by step through my code. I
will try today all day
to get this fixed. I know, it shouldn't be too
difficult.

Thank you,

  Klaus

-----Original Message-----
From: Xing Li [mailto:xing@mac.com]
Sent: Wednesday, July 13, 2005 2:15 PM
To: java-user@lucene.apache.org
Subject: RE: SIMPLE Lucene / MySQL Indexer

Don't make the mistake of complicating the task. Just
read straight from
mysql into lucene via java. There is no benefit of
exporting data to xml
just to regrab the data back into lucene.

Get the Lucene In actioin book if you haven't cause
all the samples there
are real-world practical. Are you need to add is 10
lines of mysql type
java/jdbc code and you are ready to create your first
index. Download luke
for lucene, GUI testing tool so you can browse the
index, perform searches,
validate/test search performan bottlenecks, dissect
queries, etc.


On Wednesday, July 13, 2005, at 05:04AM, Klaus Hubert
<klaus_hubert@yahoo.com> wrote:

>Hi Ian,
>
>That's something I'm looking for. Right, a simple
source code which
>reads a database and adds the fields to the index.
What I've found also
>so far is another solution at
>http://www-128.ibm.com/developerworks/java/library/j-lucene/.
>First step is
>to export my MySQL database in simple XML and go from
there. It is just
>an additional step and I would stick with this if I
don't find another
>method to do all at once.
>
>Thanks,
>
>  Klaus
>
>-----Original Message-----
>From: Ian Lea [mailto:ian.lea@gmail.com]
>Sent: Wednesday, July 13, 2005 10:19 AM
>To: java-user@lucene.apache.org
>Subject: Re: SIMPLE Lucene / MySQL Indexer
>
>Something like this?
>
>IndexWriter iw = whatever
>ResultSet rs = whatever
>
>while (rs.next()) {
>   Document ldoc = new Document();
>   ldoc.add(Field.Text("f1", rs.getString("f1"));
>   ldoc.add(Field.Unstored("f2", rs.getString("f2"));
>   ldoc.add(Field.Keyword("f3", rs.getString("f3"));
>   ...
>   iw.addDocument(ldoc);
>}
>
>rs.close();
>iw.close();
>
>
>On the IDE front, most people seem to use Eclipse
nowadays.
>
>
>--
>Ian.
>
>On 13/07/05, Klaus Hubert <klaus_hubert@yahoo.com>
>wrote:
>> Hi,
>>
>> I played with several search engines to replace
>MySQL FULLTEXT index
>> and hope that Lucene is the best solution for that.
>>
>> I am reading Mannings book on Lucene in action and
>it seems to be the
>> most powerful search engine I found so far.
>>
>> I'm stuck at some problem and need help from you
>experts. I managed to
>> create an index as described in the examples. I
also
>managed to read a
>> MySQL database in Java.
>>
>> My question is, if anybody here has some SIMPLE
>example which does
>> this in one step. I am good in PHP and in Visual
>Basic, but very new
>> to Java. Maybe I'm using the wrong tools (NetBeans
>IDE and JCreator)
>> but I don't get it managed to create an Lucene
Index
>on 3 database
>> fields.
>>
>> I appreciate any help.
>>
>> Thank you so much,
>>
>>   Klaus
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail:
>java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail:
>java-user-help@lucene.apache.org
>
>
>
>__________________________________________________
>Do You Yahoo!?
>Tired of spam?  Yahoo! Mail has the best spam
protection around
>http://mail.yahoo.com
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail:
java-user-help@lucene.apache.org
>
>
>

---------------------------------------------------------------------
To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail:
java-user-help@lucene.apache.org





____________________________________________________
Start your day with Yahoo! - make it your home page
http://www.yahoo.com/r/hs


---------------------------------------------------------------------
To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail:
java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail:
java-user-help@lucene.apache.org



__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 20:10:08 2005
Return-Path: <java-user-return-15425-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27675 invoked from network); 13 Jul 2005 20:10:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 20:10:08 -0000
Received: (qmail 40500 invoked by uid 500); 13 Jul 2005 20:09:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40431 invoked by uid 500); 13 Jul 2005 20:09:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40415 invoked by uid 99); 13 Jul 2005 20:09:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 13:09:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [206.190.48.232] (HELO web52709.mail.yahoo.com) (206.190.48.232)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 13 Jul 2005 13:09:54 -0700
Received: (qmail 6993 invoked by uid 60001); 13 Jul 2005 20:09:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=fxnOgHw2SRP0IbKuB9hdYDfKlT+lCCDt9hh73iSKgZIIrDxsp5AnX5cmWl1EBLJVk3e1I8RhB4HpE8AIHoG5JtnhzPioGx/A5tqjfLPUm9GOtANrio9EnT+oyw5c5kVfLMV/G2RRtXo0zfAyGIfkEGBFVhozvrV21q7L5rKMzV8=  ;
Message-ID: <20050713200954.6991.qmail@web52709.mail.yahoo.com>
Received: from [84.162.94.33] by web52709.mail.yahoo.com via HTTP; Wed, 13 Jul 2005 13:09:54 PDT
Date: Wed, 13 Jul 2005 13:09:54 -0700 (PDT)
From: Klaus Hubert <klaus_hubert@yahoo.com>
Subject: RE: SIMPLE Lucene / MySQL Indexer
To: java-user@lucene.apache.org, 'Chris Lu' <chris.lu@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Chris,

I've not thought about that. I'm almost done with my
program and I will give
yours also a try as suggested. I have the lasest
(recommended) JDBC 3.1.10.
But I still have to download and install Tomcat or
similar to run your .war
file. I think 5-24h is not that bad, since you can
update the Lucene index
in future and not go over this long building time
again. Your demo looks
really nice and its fast. Congratulations!

Bye,

  Klaus 

-----Original Message-----
From: Chris Lu [mailto:chris.lu@gmail.com] 
Sent: Wednesday, July 13, 2005 5:47 PM
To: java-user@lucene.apache.org
Subject: Re: SIMPLE Lucene / MySQL Indexer

Hi, Klaus, thanks.

You can simply use DBSight to create the index. It's
in Lucene's standard
format.
And you can control index field type, analyzers, how
to select data from
database, number of java threads, etc, just by web UI.
No coding is needed.
We have a user who didn't know Lucene at all, and have
3 database searches
up and running in one week.

To index a huge index, say 1 million records, it may
take 5 ~ 24 hours
depends on the record size, computer size, etc.
Actually most of the time is
spent on JDBC pulling the data.

Special warning: MySQL's JDBC driver has a bug leading
to OutOfMemory if you
do a select with lots of rows. You must download the
latest JDBC(dev
version) and use setFetchSize().

Chris
---
Full-Text Search on Any Database
http://www.dbsight.net

On 7/13/05, Klaus Hubert <klaus_hubert@yahoo.com>
wrote:
> Hi Chris,
> 
> this is indeed a cool application, but I need just
to create the 
> index. I definitely will look into your file and see
if it makes my 
> life easier. Can you tell any details how long it
took to create such 
> a huge index? What experiences you have with the
slowest search? Does 
> it go over 1 second? (I know, it depends on the
hardware, but I'm just
> wondering)
> 
> Thanks,
> 
>   Klaus
> 
> -----Original Message-----
> From: Chris Lu [mailto:chris.lu@gmail.com]
> Sent: Wednesday, July 13, 2005 5:04 AM
> To: java-user@lucene.apache.org
> Subject: Re: SIMPLE Lucene / MySQL Indexer
> 
> Please allow me to intraduce DBSight.
> It's based on Lucene, oriented for Any database
search.
> 
> Most of the things are done by web UI. No coding is
needed to create 
> your search.
> check out this demo.  http://search.dbsight.com
> 
> It's free to download and test. Free for developer
edition, non-profit 
> usage.
> 
> Chris Lu
> ---
> Full-Text Search on Any Database
> http://www.dbsight.net
> 
> Klaus Hubert wrote:
> 
> >Hi,
> >
> >I played with several search engines to replace
MySQL
> FULLTEXT index
> >and hope that Lucene is the best solution for that.
> >
> >I am reading Mannings book on Lucene in action and
it
> seems to be the
> >most powerful search engine I found so far.
> >
> >I'm stuck at some problem and need help from you
> experts. I managed to
> >create an index as described in the examples. I
also
> managed to read a
> >MySQL database in Java.
> >
> >My question is, if anybody here has some SIMPLE
> example which does this
> >in one step. I am good in PHP and in Visual Basic,
> but very new to
> >Java. Maybe I'm using the wrong tools (NetBeans IDE
> and JCreator) but I
> >don't get it managed to create an Lucene Index on 3
> database fields.
> >
> >I appreciate any help.
> >
> >Thank you so much,
> >
> >  Klaus
> >
> >__________________________________________________
> >Do You Yahoo!?
> >Tired of spam?  Yahoo! Mail has the best spam
> protection around
> >http://mail.yahoo.com
> >
>
>---------------------------------------------------------------------
> >To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >
> >
> >
> >
> 
> 
> --
> Chris Lu
> --------------
> Free-Text Search on Any Database
> http://www.dbsight.net
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
> java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> 
> 
> 
> 
> 
> ____________________________________________________
> Start your day with Yahoo! - make it your home page 
> http://www.yahoo.com/r/hs
> 
> 
>
---------------------------------------------------------------------
> To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail:
java-user-help@lucene.apache.org
> 
> 


--
Chris Lu
---------------------
Full-Text Search on Any Database
http://www.dbsight.net

---------------------------------------------------------------------
To unsubscribe, e-mail:
java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail:
java-user-help@lucene.apache.org




		
____________________________________________________
Start your day with Yahoo! - make it your home page
http://www.yahoo.com/r/hs
 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 21:31:34 2005
Return-Path: <java-user-return-15426-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 60621 invoked from network); 13 Jul 2005 21:31:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 21:31:33 -0000
Received: (qmail 78809 invoked by uid 500); 13 Jul 2005 21:31:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78773 invoked by uid 500); 13 Jul 2005 21:31:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78760 invoked by uid 99); 13 Jul 2005 21:31:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 14:31:26 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.74] (HELO ylpvm43.prodigy.net) (207.115.57.74)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 14:31:23 -0700
Received: from pimout2-ext.prodigy.net (pimout2-int.prodigy.net [207.115.4.217])
	by ylpvm43.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j6DLVPeC027891
	for <java-user@lucene.apache.org>; Wed, 13 Jul 2005 17:31:26 -0400
X-ORBL: [67.127.72.204]
Received: from [192.168.168.81] (adsl-67-127-72-204.dsl.snfc21.pacbell.net [67.127.72.204])
	by pimout2-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id j6DLV9c5226630;
	Wed, 13 Jul 2005 17:31:14 -0400
Message-ID: <42D5881C.6040304@apache.org>
Date: Wed, 13 Jul 2005 14:31:08 -0700
From: Doug Cutting <cutting@apache.org>
User-Agent: Mozilla Thunderbird 1.0.2-1.3.3 (X11/20050513)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: "docMap" array in SegmentMergeInfo
References: <20050713184257.55124.qmail@web41208.mail.yahoo.com>
In-Reply-To: <20050713184257.55124.qmail@web41208.mail.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Lokesh Bajaj wrote:
> For a very large index where we might want to delete/replace some documents, this would require a lot of memory (for 100 million documents, this would need 381 MB of memory). Is there any reason why this was implemented this way?

In practice this has not been an issue.  A single index with 100M 
documents is usually quite slow to search.  When collections get this 
big folks tend to instead search multiple indexes in parallel in order 
to keep response times acceptable.  Also, 381Mb of RAM is often not a 
problem for folks with 100M documents.  But this is not to say that it 
could never be a problem.  For folks with limited RAM and/or lots of 
small documents it could indeed be an issue.

> It seems like this could be implemented as a much smaller array that only keeps track of the deleted document numbers and it would still be very efficient to calculate the new document number by using this much smaller array. Has this been done by anyone else or been considered for change in the Lucene code?

Please submit a patch to the java-dev list.

Doug

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 23:08:05 2005
Return-Path: <java-user-return-15427-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 96451 invoked from network); 13 Jul 2005 23:08:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 23:08:04 -0000
Received: (qmail 44396 invoked by uid 500); 13 Jul 2005 23:07:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44123 invoked by uid 500); 13 Jul 2005 23:07:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44104 invoked by uid 99); 13 Jul 2005 23:07:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 16:07:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [80.245.62.11] (HELO mx.laposte.net) (80.245.62.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 16:07:53 -0700
Received: from zaripha (82.225.66.75) by mx.laposte.net (7.2.060.1) (authenticated as sven.duzont)
        id 42CAC5BC0034EC49 for java-user@lucene.apache.org; Thu, 14 Jul 2005 01:07:53 +0200
Date: Thu, 14 Jul 2005 01:08:48 +0200
From: Sven Duzont <sven.duzont@laposte.net>
X-Mailer: The Bat! (v3.5) Professional
Reply-To: Sven Duzont <sven.duzont@laposte.net>
X-Priority: 3 (Normal)
Message-ID: <1574647545.20050714010848@laposte.net>
To: Chris Lu <java-user@lucene.apache.org>
Subject: Re[2]: SIMPLE Lucene / MySQL Indexer
Resent-from: Sven Duzont <sven.duzont@laposte.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
Resent-Message-Id: <20050713230754.6F59710FB2AF@asf.osuosl.org>
Resent-Date: Wed, 13 Jul 2005 16:07:54 -0700 (PDT)
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

.................................
i thought it was a lucene user list, not a dbsight one

--- sven

 
Le mercredi 13 juillet 2005  17:47:14, vous criviez :
 

 
CL> Hi, Klaus, thanks.
 

 
CL> You can simply use DBSight to create the index. It's in Lucene's
 
CL> standard format.
 
CL> And you can control index field type, analyzers, how to select data
 
CL> from database, number of java threads, etc, just by web UI. No coding
 
CL> is needed. We have a user who didn't know Lucene at all, and have 3
 
CL> database searches up and running in one week.
 

 
CL> To index a huge index, say 1 million records, it may take 5 ~ 24 hours
 
CL> depends on the record size, computer size, etc. Actually most of the
 
CL> time is spent on JDBC pulling the data.
 

 
CL> Special warning: MySQL's JDBC driver has a bug leading to OutOfMemory
 
CL> if you do a select with lots of rows. You must download the latest
 
CL> JDBC(dev version) and use setFetchSize().
 

 
CL> Chris
 
CL> ---
 
CL> Full-Text Search on Any Database
 
CL> http://www.dbsight.net
 

 

  
 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 13 23:59:48 2005
Return-Path: <java-user-return-15428-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12479 invoked from network); 13 Jul 2005 23:59:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 13 Jul 2005 23:59:48 -0000
Received: (qmail 97463 invoked by uid 500); 13 Jul 2005 23:59:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96552 invoked by uid 500); 13 Jul 2005 23:59:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96533 invoked by uid 99); 13 Jul 2005 23:59:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 16:59:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 13 Jul 2005 16:59:38 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3339613E2005; Wed, 13 Jul 2005 19:59:34 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id BA3A013E2005
	for <java-user@lucene.apache.org>; Wed, 13 Jul 2005 19:59:31 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050713144053.5131.qmail@webmail32.rediffmail.com>
References: <20050713144053.5131.qmail@webmail32.rediffmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FCE3C9A0-2707-4303-9F33-175015F02EE3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Wild card and multiple keyword search
Date: Wed, 13 Jul 2005 19:52:48 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 13, 2005, at 10:40 AM, Rahul D Thakare wrote:
>  que: - The question back to you is do you want searches for simply  
> "MAIN" to
> find both "MAIN LOGIC" and "MAIN PARTS"?  Or should it return no
> documents since its not an exact match?
>
> Ans: It should return no documents since it is not a exact match.
>
> I would like to explain my point 2 in below mail again by giveing  
> an example here
>
>  eg- If there are two records with keyword ie "Main Logic" and  
> "Main Board" respectively.
>
> what we want is
> 1. if the user serch on Main*, both the record should return.
> 2. If the user search on "Main Logic", only one record should be  
> return.
> 3. If the user searches for Main, no record should be returned
>
>
>  point 2 above is working now because we are using Field.Keyword  
> (which doesn't tokenise the spaces) and KeywordAnalyser.
>
>  point 1 (wild card search) is not working because KeywordAnalyser  
> does not recognise wild card

That's not quite accurate about why wild card search isn't working.  
My hunch is that it is the lowercasing effect of QueryParser.  There  
is an _instance_ setter to control it.  You'll need to construct an  
instance of QueryParser, call setLowercaseWildcardTerms(false), and  
then call the parse(String) method.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 14 09:52:40 2005
Return-Path: <java-user-return-15429-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78412 invoked from network); 14 Jul 2005 09:52:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2005 09:52:40 -0000
Received: (qmail 64868 invoked by uid 500); 14 Jul 2005 09:52:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64843 invoked by uid 500); 14 Jul 2005 09:52:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64830 invoked by uid 99); 14 Jul 2005 09:52:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 02:52:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 02:52:28 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8CAA513E2006; Thu, 14 Jul 2005 05:52:24 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 991A213E2005
	for <java-user@lucene.apache.org>; Thu, 14 Jul 2005 05:52:08 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
References: <42D5985F.3020303@Golux.Com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <3077AA8A-8018-4195-98C0-BCF870609CA5@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: ApacheCon US 2005 Call for Participaton
Date: Thu, 14 Jul 2005 05:52:15 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Passing the word on.  Lucene-related sessions are very welcome!

     Erik


> In case you missed the news, ApacheCon US 2005 has been scheduled
> for 10-14 December 2005 in San Diego, California!
>
> See http://ApacheCon.Com/2005/US/
>
> And the Call for Participation is open, so if you want to be a
> speaker, please submit your proposals now!
>
> Submit CF proposals at http://ApacheCon.com/html/cfp.html/e=MjAwNS9VUw
>
> The deadline is Tuesday, 9 August 2005.  And because scheduling will
> begin immediately thereafter, NO LATE SUBMISSIONS CAN BE ACCEPTED!


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 14 10:45:49 2005
Return-Path: <java-user-return-15430-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94683 invoked from network); 14 Jul 2005 10:45:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2005 10:45:48 -0000
Received: (qmail 23687 invoked by uid 500); 14 Jul 2005 10:45:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23654 invoked by uid 500); 14 Jul 2005 10:45:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23641 invoked by uid 99); 14 Jul 2005 10:45:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 03:45:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 03:45:39 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4C80513E2005; Thu, 14 Jul 2005 06:45:29 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id CEF6C13E2005
	for <java-user@lucene.apache.org>; Thu, 14 Jul 2005 06:45:10 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
Content-Transfer-Encoding: 7bit
Message-Id: <1272C20F-FC23-4888-8FE8-5A96D5598A1F@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: SIPs and CAPs
Date: Thu, 14 Jul 2005 06:45:17 -0400
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Has anyone developed code to extract SIPs (statistically improbable  
phrases) and CAPs (capitalized phrases) from a Lucene index, such as  
Amazon does with it's books as shown here?

     <http://www.amazon.com/exec/obidos/tg/detail/-/0764526413/ 
ref=sip_top_dp/102-8573693-0514548?%5Fencoding=UTF8&v=glance>

I'm curious as it is something I'd like to do with some of my work.   
Of course CAPs would be impossible to extract from an index that used  
a lowercasing analyzer, so that is a special case that would require  
work during indexing.  But SIPs could be extracted from an existing  
index.

Thanks,
     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 14 11:17:35 2005
Return-Path: <java-user-return-15431-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 745 invoked from network); 14 Jul 2005 11:17:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2005 11:17:35 -0000
Received: (qmail 61464 invoked by uid 500); 14 Jul 2005 11:17:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61441 invoked by uid 500); 14 Jul 2005 11:17:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61428 invoked by uid 99); 14 Jul 2005 11:17:25 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 04:17:25 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.216] (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Jul 2005 04:17:21 -0700
Received: (qmail 4598 invoked by uid 60001); 14 Jul 2005 11:17:21 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=zI1Nlo80XQo5GZ5Xco12/epXazWiYLVMEDkGzIj//gQW81xt/JqmrFoIqIG4ps4wYbQgAzjYX3ufuL4B3KAu9EGCgUZiuqJdFgiQ4yirn4sIBoCR+kzEZrpvTsG+o3VkIu08jSgP7bk7ULNXGOxtqfNkjtffixxem3f6KhxFo9Y=  ;
Message-ID: <20050714111721.4596.qmail@web26005.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26005.mail.ukl.yahoo.com via HTTP; Thu, 14 Jul 2005 12:17:21 BST
Date: Thu, 14 Jul 2005 12:17:21 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: SIPs and CAPs
To: java-user@lucene.apache.org
In-Reply-To: <1272C20F-FC23-4888-8FE8-5A96D5598A1F@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've done this by comparing term frequency in a subset
(in Amazon's case a single book) and looking for a
significant "uplift" in term popularity vs that of the
general corpus popularity. Practically speaking, in
the amazon case you can treat each page in the example
book as a Lucene document, create a RAMDirectory and
then use it's TermEnum to get the docFreqs for all
words and compare them with the corpus docFreqs.

The "uplift" score for each term is
(subsetDocFreq/subsetNumDocs)-(corpusDocFreq/corpusNumDocs)

Take the top "n" terms scored by the above then
analyze the text of the subset looking for runs of
these terms.

I have some code for this that I have wanted to
package up as a contribution for some time.


	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 14 12:11:13 2005
Return-Path: <java-user-return-15432-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19143 invoked from network); 14 Jul 2005 12:11:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2005 12:11:13 -0000
Received: (qmail 21518 invoked by uid 500); 14 Jul 2005 12:11:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 21488 invoked by uid 500); 14 Jul 2005 12:11:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 21475 invoked by uid 99); 14 Jul 2005 12:11:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 05:11:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 05:11:02 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id BF8D813E2005; Thu, 14 Jul 2005 08:10:58 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 35A3C13E2005
	for <java-user@lucene.apache.org>; Thu, 14 Jul 2005 08:10:57 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
Content-Transfer-Encoding: 7bit
Message-Id: <1272C20F-FC23-4888-8FE8-5A96D5598A1F@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: SIPs and CAPs
Date: Thu, 14 Jul 2005 06:45:17 -0400
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Has anyone developed code to extract SIPs (statistically improbable  
phrases) and CAPs (capitalized phrases) from a Lucene index, such as  
Amazon does with it's books as shown here?

     <http://www.amazon.com/exec/obidos/tg/detail/-/0764526413/ 
ref=sip_top_dp/102-8573693-0514548?%5Fencoding=UTF8&v=glance>

I'm curious as it is something I'd like to do with some of my work.   
Of course CAPs would be impossible to extract from an index that used  
a lowercasing analyzer, so that is a special case that would require  
work during indexing.  But SIPs could be extracted from an existing  
index.

Thanks,
     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 14 12:32:16 2005
Return-Path: <java-user-return-15433-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 23765 invoked from network); 14 Jul 2005 12:32:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2005 12:32:16 -0000
Received: (qmail 55792 invoked by uid 500); 14 Jul 2005 12:32:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55754 invoked by uid 500); 14 Jul 2005 12:32:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55740 invoked by uid 99); 14 Jul 2005 12:32:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 05:32:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 05:32:04 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0A89013E2006; Thu, 14 Jul 2005 08:31:58 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id DBA1B13E2005
	for <java-user@lucene.apache.org>; Thu, 14 Jul 2005 08:31:48 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050714111721.4596.qmail@web26005.mail.ukl.yahoo.com>
References: <20050714111721.4596.qmail@web26005.mail.ukl.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9AC9DCE2-332B-4824-BD8E-4EEA5D449702@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: SIPs and CAPs
Date: Thu, 14 Jul 2005 08:31:55 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 14, 2005, at 7:17 AM, mark harwood wrote:
> I've done this by comparing term frequency in a subset
> (in Amazon's case a single book) and looking for a
> significant "uplift" in term popularity vs that of the
> general corpus popularity. Practically speaking, in
> the amazon case you can treat each page in the example
> book as a Lucene document, create a RAMDirectory and
> then use it's TermEnum to get the docFreqs for all
> words and compare them with the corpus docFreqs.
>
> The "uplift" score for each term is
> (subsetDocFreq/subsetNumDocs)-(corpusDocFreq/corpusNumDocs)
>
> Take the top "n" terms scored by the above then
> analyze the text of the subset looking for runs of
> these terms.
>
> I have some code for this that I have wanted to
> package up as a contribution for some time.

Nice!

Do you just do this with terms or do you also extract phrases?   
Phrases would be more intensive to deal with since positional  
information is needed as well as some rules to decide on minimum/ 
maximum length of phrases and such.  Perhaps the technique you  
describe would be useful in locating spots to dig into for phrases?

As for CAP's, perhaps a specialized TokenFilter could be used to do  
this during the indexing analysis step - I don't think it would be  
difficult.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 14 13:28:18 2005
Return-Path: <java-user-return-15434-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43234 invoked from network); 14 Jul 2005 13:28:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2005 13:28:18 -0000
Received: (qmail 86404 invoked by uid 500); 14 Jul 2005 13:27:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 86295 invoked by uid 500); 14 Jul 2005 13:27:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 86268 invoked by uid 99); 14 Jul 2005 13:27:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 06:27:50 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.216] (HELO web26005.mail.ukl.yahoo.com) (217.12.10.216)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Jul 2005 06:27:46 -0700
Received: (qmail 39757 invoked by uid 60001); 14 Jul 2005 13:27:46 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=eo5aQL0K66cHyLG7Xa3sLBGvaUnWo8QOZz98yrQqzi7l7OZETE42Yod7redo+jjHDx85Bysm0bWLdyGvS83WTDgFZPY0VWJOmf2mN/xuCGvbZU0rer1nn4ZHIpokT+uCUOdM/ZmfVx47m6Z93SRCBLOioB3C+6B0xez78MbgPdI=  ;
Message-ID: <20050714132746.39755.qmail@web26005.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26005.mail.ukl.yahoo.com via HTTP; Thu, 14 Jul 2005 14:27:46 BST
Date: Thu, 14 Jul 2005 14:27:46 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: Re: SIPs and CAPs
To: java-user@lucene.apache.org
In-Reply-To: <9AC9DCE2-332B-4824-BD8E-4EEA5D449702@ehatchersolutions.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Do you just do this with terms or do you also
> extract phrases?   

The scheme involves these phases:
1) Identify top terms (using algo described)
2) Identify all term "runs" in original text.
3) Identify sensible phrases from large list of term
runs
4) Provide shortlist of top scoring terms AND phrases

Step 1 is done as described in my earlier post.
Step 2 I currently do be re-running an Analyzer on the
original text. It is possible that this could be done
using the RAMDirectory used in Step 1 and SpanQueries
or some such but I have found it is important to
resort  to the original text to get sensible
terms/phrases.
If your indexed content used stemming and stop word
removal and you *didn't* look at the original text you
would identify phrases like "united state america"
instead of "United States of America".
Step 3 is needed to consolidate all of the learning
about term usage. For example, the code may choose to
collapse the run "United States Of America invades"
into the shorter "United States" run because it occurs
much less and all of the shorter run's terms are in
the longer one.
Step 4 ranks the phrases and terms to produce a
shortlist consisting of both. Some terms are always
used in phrases (so will not be selected as a single
term). Some terms *never* appear in a phrase so are
considered for shortlisting.

There's probably a number of ways in which these
different phases can be implemented but I've found
them all to be necessary if you want to present the
findings in a readable form to end-users.




		
___________________________________________________________ 
How much free photo storage do you get? Store your holiday 
snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 14 13:50:40 2005
Return-Path: <java-user-return-15435-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48333 invoked from network); 14 Jul 2005 13:50:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2005 13:50:40 -0000
Received: (qmail 26035 invoked by uid 500); 14 Jul 2005 13:50:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26008 invoked by uid 500); 14 Jul 2005 13:50:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 25995 invoked by uid 99); 14 Jul 2005 13:50:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 06:50:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.123.241.50] (HELO rivette.int.mediasurface.com) (193.123.241.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 06:50:29 -0700
Received: from rivette.int.mediasurface.com (localhost [127.0.0.1])
	by rivette.int.mediasurface.com (8.11.6+Sun/8.11.6) with ESMTP id j6EDoQY17005
	for <java-user@lucene.apache.org>; Thu, 14 Jul 2005 14:50:26 +0100 (BST)
Received: from neptune.int.mediasurface.com (neptune.int.mediasurface.com [10.0.5.71])
	by rivette.int.mediasurface.com (8.11.6+Sun/8.11.6) with ESMTP id j6EDoQN17001
	for <java-user@lucene.apache.org>; Thu, 14 Jul 2005 14:50:26 +0100 (BST)
Subject: RE: Best Practices for Distributing Lucene Indexing and Searching
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Thu, 14 Jul 2005 14:50:25 +0100
Content-class: urn:content-classes:message
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Message-ID: <BE3E7BC7F7553B4A9362D4192ECD308A9FBE9C@neptune.int.mediasurface.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Best Practices for Distributing Lucene Indexing and Searching
thread-index: AcVX/zFaJNcbQxEMQpq8JkEeaIQ9HAwe5WJg
From: "Peter Gelderbloem" <Peter.Gelderbloem@mediasurface.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am currently looking into building a similar system and came across
this architecture:
http://www.eecs.harvard.edu/~mdw/proj/seda/

I am just reading up on it now. Does anyone have experience building a
lucene system based on this architecture? Any advice would be greatly
appreciated.

Peter Gelderbloem=20

   Registered in England 3186704
-----Original Message-----
From: Luke Francl [mailto:luke.francl@stellent.com]=20
Sent: 13 May 2005 22:04
To: java-user@lucene.apache.org
Subject: Re: Best Practices for Distributing Lucene Indexing and
Searching

On Tue, 2005-03-01 at 19:23, Chris Hostetter wrote:

> I don't really consider reading/writing to an NFS mounted FSDirectory
to
> be viable for the very reasons you listed; but I haven't really found
any
> evidence of problems if you take they approach that a single "writer"
> node indexes to local disk, which is NFS mounted by all of your other
> nodes for doing queries.  concurent updates/queries may still not be
safe
> (i'm not sure) but you could have the writer node "clone" the entire
index
> into a new directory, apply the updates and then signal the other
nodes to
> stop using the old FSDirectory and start using the new one.

Thanks to everyone who contributed advice to my question about how to
distribute a Lucene index across a cluster.

I'm about to start on the implementation and I wanted to clarify
something about using NFS that Chris wrote about above.

There are many warnings about indexing on an NFS file system, but is it
safe to have a single node index, while the other nodes use the file
system in read-only mode?=20

On a related note, our software is cross-platform and needs to work on
Windows as well. Are there any problems known problems having a
read-only index shared over SMB?

Using a shared file system is preferable to me because it's easier, but
if it's necessary I will write the code to copy the index to each node.

Thanks,
Luke Francl


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 14 22:07:55 2005
Return-Path: <java-user-return-15436-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5192 invoked from network); 14 Jul 2005 22:07:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2005 22:07:55 -0000
Received: (qmail 84579 invoked by uid 500); 14 Jul 2005 22:07:53 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83707 invoked by uid 500); 14 Jul 2005 22:07:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83694 invoked by uid 99); 14 Jul 2005 22:07:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 15:07:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 15:07:47 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id 62A9A159FDE
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 08:07:45 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 4C60C64007
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 08:07:45 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 09566-01-2 for <java-user@lucene.apache.org>;
 Fri, 15 Jul 2005 08:07:43 +1000 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by herald.aconex.com (Postfix) with ESMTP id A236B64002
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 08:07:43 +1000 (EST)
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <BE3E7BC7F7553B4A9362D4192ECD308A9FBE9C@neptune.int.mediasurface.com>
References: <BE3E7BC7F7553B4A9362D4192ECD308A9FBE9C@neptune.int.mediasurface.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DA7EFA0A-981B-4232-8DBC-F3CD0535968C@aconex.com>
Content-Transfer-Encoding: 7bit
From: Paul Smith <psmith@aconex.com>
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
Date: Fri, 15 Jul 2005 08:07:43 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I had a crack at whipping up something along this lines during a 1  
day hackathon we held here at work, using ActiveMQ as the bus between  
the 'co-ordinator' (Queen bee) and the 'worker" bees.  The index work  
was segmented as jobs on a work queue, and the workers feed the  
relatively smal index chunks back along a result queue, which the co- 
ordinator then merged in.

The tough part from observing the outcome is knowing what the chunk  
size should be, because in the end the co-ordinator needs to merge  
all the sub-indexes together into 1 and for a large index that's not  
an insignificant time.  You also have to use bookkeeping to work out  
if a 'job' has not been completed in time (maybe failure by the  
worker) and decide whether the job should be resubmitted (in theory  
JMS with transactions would help there, but then you have a  
throughput problem on that too).

Would love to see something like this work really well, and perhaps  
generalize it a bit more.  I do like the simplicity of the SEDA  
principles.

cheers,

Paul Smith


On 14/07/2005, at 11:50 PM, Peter Gelderbloem wrote:

> I am currently looking into building a similar system and came across
> this architecture:
> http://www.eecs.harvard.edu/~mdw/proj/seda/
>
> I am just reading up on it now. Does anyone have experience building a
> lucene system based on this architecture? Any advice would be greatly
> appreciated.
>
> Peter Gelderbloem
>
>    Registered in England 3186704
> -----Original Message-----
> From: Luke Francl [mailto:luke.francl@stellent.com]
> Sent: 13 May 2005 22:04
> To: java-user@lucene.apache.org
> Subject: Re: Best Practices for Distributing Lucene Indexing and
> Searching
>
> On Tue, 2005-03-01 at 19:23, Chris Hostetter wrote:
>
>
>> I don't really consider reading/writing to an NFS mounted FSDirectory
>>
> to
>
>> be viable for the very reasons you listed; but I haven't really found
>>
> any
>
>> evidence of problems if you take they approach that a single "writer"
>> node indexes to local disk, which is NFS mounted by all of your other
>> nodes for doing queries.  concurent updates/queries may still not be
>>
> safe
>
>> (i'm not sure) but you could have the writer node "clone" the entire
>>
> index
>
>> into a new directory, apply the updates and then signal the other
>>
> nodes to
>
>> stop using the old FSDirectory and start using the new one.
>>
>
> Thanks to everyone who contributed advice to my question about how to
> distribute a Lucene index across a cluster.
>
> I'm about to start on the implementation and I wanted to clarify
> something about using NFS that Chris wrote about above.
>
> There are many warnings about indexing on an NFS file system, but  
> is it
> safe to have a single node index, while the other nodes use the file
> system in read-only mode?
>
> On a related note, our software is cross-platform and needs to work on
> Windows as well. Are there any problems known problems having a
> read-only index shared over SMB?
>
> Using a shared file system is preferable to me because it's easier,  
> but
> if it's necessary I will write the code to copy the index to each  
> node.
>
> Thanks,
> Luke Francl
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 14 23:28:43 2005
Return-Path: <java-user-return-15437-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 35209 invoked from network); 14 Jul 2005 23:28:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2005 23:28:43 -0000
Received: (qmail 60713 invoked by uid 500); 14 Jul 2005 23:28:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60688 invoked by uid 500); 14 Jul 2005 23:28:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60675 invoked by uid 99); 14 Jul 2005 23:28:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 16:28:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.35] (HELO web31102.mail.mud.yahoo.com) (68.142.200.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Jul 2005 16:28:32 -0700
Received: (qmail 81663 invoked by uid 60001); 14 Jul 2005 23:28:33 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=bQfYJ08myEfZopg2bSVM32+Kpz1isq2TdFaZKTYmgG3lxsI0CYT0n7TjfOoKuB3ABYDmpaskXS5RkmfB7moysMX267ycXEAke7XJTw0IzgLXwagZXwxz6OOKDvygdDCrldR4Rf667B2aWJxT4O92mlWhDj5tI7fb4DSwjOp+okU=  ;
Message-ID: <20050714232833.81660.qmail@web31102.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31102.mail.mud.yahoo.com via HTTP; Thu, 14 Jul 2005 16:28:33 PDT
Date: Thu, 14 Jul 2005 16:28:33 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
To: java-user@lucene.apache.org
In-Reply-To: <DA7EFA0A-981B-4232-8DBC-F3CD0535968C@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Interesting.  I'm planning on doing something similar for some new
Simpy features.  Why are your worker bees sending whole indices to the
Queen bee?  Wouldn't it be easier to send in Documents and have the
Queen index them in the same index?  Maybe you need those individual,
smaller indices to be separate....

How do you deal with the possibility of the same Document being present
in multiple indices?

Otis


--- Paul Smith <psmith@aconex.com> wrote:

> I had a crack at whipping up something along this lines during a 1  
> day hackathon we held here at work, using ActiveMQ as the bus between
>  
> the 'co-ordinator' (Queen bee) and the 'worker" bees.  The index work
>  
> was segmented as jobs on a work queue, and the workers feed the  
> relatively smal index chunks back along a result queue, which the co-
> 
> ordinator then merged in.
> 
> The tough part from observing the outcome is knowing what the chunk  
> size should be, because in the end the co-ordinator needs to merge  
> all the sub-indexes together into 1 and for a large index that's not 
> 
> an insignificant time.  You also have to use bookkeeping to work out 
> 
> if a 'job' has not been completed in time (maybe failure by the  
> worker) and decide whether the job should be resubmitted (in theory  
> JMS with transactions would help there, but then you have a  
> throughput problem on that too).
> 
> Would love to see something like this work really well, and perhaps  
> generalize it a bit more.  I do like the simplicity of the SEDA  
> principles.
> 
> cheers,
> 
> Paul Smith
> 
> 
> On 14/07/2005, at 11:50 PM, Peter Gelderbloem wrote:
> 
> > I am currently looking into building a similar system and came
> across
> > this architecture:
> > http://www.eecs.harvard.edu/~mdw/proj/seda/
> >
> > I am just reading up on it now. Does anyone have experience
> building a
> > lucene system based on this architecture? Any advice would be
> greatly
> > appreciated.
> >
> > Peter Gelderbloem
> >
> >    Registered in England 3186704
> > -----Original Message-----
> > From: Luke Francl [mailto:luke.francl@stellent.com]
> > Sent: 13 May 2005 22:04
> > To: java-user@lucene.apache.org
> > Subject: Re: Best Practices for Distributing Lucene Indexing and
> > Searching
> >
> > On Tue, 2005-03-01 at 19:23, Chris Hostetter wrote:
> >
> >
> >> I don't really consider reading/writing to an NFS mounted
> FSDirectory
> >>
> > to
> >
> >> be viable for the very reasons you listed; but I haven't really
> found
> >>
> > any
> >
> >> evidence of problems if you take they approach that a single
> "writer"
> >> node indexes to local disk, which is NFS mounted by all of your
> other
> >> nodes for doing queries.  concurent updates/queries may still not
> be
> >>
> > safe
> >
> >> (i'm not sure) but you could have the writer node "clone" the
> entire
> >>
> > index
> >
> >> into a new directory, apply the updates and then signal the other
> >>
> > nodes to
> >
> >> stop using the old FSDirectory and start using the new one.
> >>
> >
> > Thanks to everyone who contributed advice to my question about how
> to
> > distribute a Lucene index across a cluster.
> >
> > I'm about to start on the implementation and I wanted to clarify
> > something about using NFS that Chris wrote about above.
> >
> > There are many warnings about indexing on an NFS file system, but  
> > is it
> > safe to have a single node index, while the other nodes use the
> file
> > system in read-only mode?
> >
> > On a related note, our software is cross-platform and needs to work
> on
> > Windows as well. Are there any problems known problems having a
> > read-only index shared over SMB?
> >
> > Using a shared file system is preferable to me because it's easier,
>  
> > but
> > if it's necessary I will write the code to copy the index to each  
> > node.
> >
> > Thanks,
> > Luke Francl
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 14 23:38:40 2005
Return-Path: <java-user-return-15438-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46197 invoked from network); 14 Jul 2005 23:38:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 14 Jul 2005 23:38:40 -0000
Received: (qmail 72952 invoked by uid 500); 14 Jul 2005 23:38:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72927 invoked by uid 500); 14 Jul 2005 23:38:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72914 invoked by uid 99); 14 Jul 2005 23:38:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 16:38:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 16:38:33 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id 9737015A066
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 09:38:28 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 84A5E64007
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 09:38:28 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 16496-01-10 for <java-user@lucene.apache.org>;
 Fri, 15 Jul 2005 09:38:26 +1000 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by herald.aconex.com (Postfix) with ESMTP id 09DA564002
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 09:38:26 +1000 (EST)
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <20050714232833.81660.qmail@web31102.mail.mud.yahoo.com>
References: <20050714232833.81660.qmail@web31102.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CE9D3007-883C-41A5-A598-D127B6DA063F@aconex.com>
Content-Transfer-Encoding: 7bit
From: Paul Smith <psmith@aconex.com>
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
Date: Fri, 15 Jul 2005 09:38:25 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My punt was that having workers create sub-indexs (creating the  
documents and making a partial index) and shipping the partial index  
back to the queen to merge may be more efficient.  It's probably not,  
I was just using the day as a chance to see if it looked promising,  
and get my hands dirty with SEDA (and ActiveMQ, great JMS provider).   
The bit I forgot about until too late was the merge is going to have  
to be 'serialized' by the queen, there's no real way to get around  
that I could think of. Worse, because the .merge(Directory[]) method  
does an automatic optimize I had to get the Queen to temporarily  
store the partial indexes locally until it had all results before  
doing a merge, otherwise the queen would be spending _forever_ doing  
merges.

If you had the workers just creating Documents, I'm not sure that  
would get over the overhead of the SEDA network/jms transport.  The  
document doesn't really get inverted until it's sent to the Writer?   
In this example the Queen would be doing 99% of the work wouldn't it?  
(defeating the purpose of SEDA).

What I was aiming at was an easily growable, self-healing Indexing  
network.  Need more capacity? Throw in a Mac-Mini or something, and  
let it join as a worker via Zeroconf.  Worker dies?  work just gets  
done somewhere else.  True Google-like model.

But I don't think I quite got there.

Re: document in multiple indexes.  The queen was the co-ordinator, so  
it's first task was to work out what entities to index (everything in  
our app can be referenced via a URI, mail://2358 or doc://9375).  The  
queen works out all the URI's to index, batches them up into a work- 
unit and broadcasts that as a work message on the work queue.  The  
worker takes that package, creates a relatively small index  
(5000-10000 documents, whatever the chunk size is), and ships the  
directory as a zipped up binary message back onto the Result queue.   
Therefore there were never any duplicates.  A worker either processed  
the work unit, or it didn't.

Paul

On 15/07/2005, at 9:28 AM, Otis Gospodnetic wrote:

> Interesting.  I'm planning on doing something similar for some new
> Simpy features.  Why are your worker bees sending whole indices to the
> Queen bee?  Wouldn't it be easier to send in Documents and have the
> Queen index them in the same index?  Maybe you need those individual,
> smaller indices to be separate....
>
> How do you deal with the possibility of the same Document being  
> present
> in multiple indices?
>
> Otis
>
>
> --- Paul Smith <psmith@aconex.com> wrote:
>
>
>> I had a crack at whipping up something along this lines during a 1
>> day hackathon we held here at work, using ActiveMQ as the bus between
>>
>> the 'co-ordinator' (Queen bee) and the 'worker" bees.  The index work
>>
>> was segmented as jobs on a work queue, and the workers feed the
>> relatively smal index chunks back along a result queue, which the co-
>>
>> ordinator then merged in.
>>
>> The tough part from observing the outcome is knowing what the chunk
>> size should be, because in the end the co-ordinator needs to merge
>> all the sub-indexes together into 1 and for a large index that's not
>>
>> an insignificant time.  You also have to use bookkeeping to work out
>>
>> if a 'job' has not been completed in time (maybe failure by the
>> worker) and decide whether the job should be resubmitted (in theory
>> JMS with transactions would help there, but then you have a
>> throughput problem on that too).
>>
>> Would love to see something like this work really well, and perhaps
>> generalize it a bit more.  I do like the simplicity of the SEDA
>> principles.
>>
>> cheers,
>>
>> Paul Smith
>>
>>
>> On 14/07/2005, at 11:50 PM, Peter Gelderbloem wrote:
>>
>>
>>> I am currently looking into building a similar system and came
>>>
>> across
>>
>>> this architecture:
>>> http://www.eecs.harvard.edu/~mdw/proj/seda/
>>>
>>> I am just reading up on it now. Does anyone have experience
>>>
>> building a
>>
>>> lucene system based on this architecture? Any advice would be
>>>
>> greatly
>>
>>> appreciated.
>>>
>>> Peter Gelderbloem
>>>
>>>    Registered in England 3186704
>>> -----Original Message-----
>>> From: Luke Francl [mailto:luke.francl@stellent.com]
>>> Sent: 13 May 2005 22:04
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Best Practices for Distributing Lucene Indexing and
>>> Searching
>>>
>>> On Tue, 2005-03-01 at 19:23, Chris Hostetter wrote:
>>>
>>>
>>>
>>>> I don't really consider reading/writing to an NFS mounted
>>>>
>> FSDirectory
>>
>>>>
>>>>
>>> to
>>>
>>>
>>>> be viable for the very reasons you listed; but I haven't really
>>>>
>> found
>>
>>>>
>>>>
>>> any
>>>
>>>
>>>> evidence of problems if you take they approach that a single
>>>>
>> "writer"
>>
>>>> node indexes to local disk, which is NFS mounted by all of your
>>>>
>> other
>>
>>>> nodes for doing queries.  concurent updates/queries may still not
>>>>
>> be
>>
>>>>
>>>>
>>> safe
>>>
>>>
>>>> (i'm not sure) but you could have the writer node "clone" the
>>>>
>> entire
>>
>>>>
>>>>
>>> index
>>>
>>>
>>>> into a new directory, apply the updates and then signal the other
>>>>
>>>>
>>> nodes to
>>>
>>>
>>>> stop using the old FSDirectory and start using the new one.
>>>>
>>>>
>>>
>>> Thanks to everyone who contributed advice to my question about how
>>>
>> to
>>
>>> distribute a Lucene index across a cluster.
>>>
>>> I'm about to start on the implementation and I wanted to clarify
>>> something about using NFS that Chris wrote about above.
>>>
>>> There are many warnings about indexing on an NFS file system, but
>>> is it
>>> safe to have a single node index, while the other nodes use the
>>>
>> file
>>
>>> system in read-only mode?
>>>
>>> On a related note, our software is cross-platform and needs to work
>>>
>> on
>>
>>> Windows as well. Are there any problems known problems having a
>>> read-only index shared over SMB?
>>>
>>> Using a shared file system is preferable to me because it's easier,
>>>
>>
>>
>>> but
>>> if it's necessary I will write the code to copy the index to each
>>> node.
>>>
>>> Thanks,
>>> Luke Francl
>>>
>>>
>>>
>>>
>> ---------------------------------------------------------------------
>>
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>> ---------------------------------------------------------------------
>>
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 15 01:37:11 2005
Return-Path: <java-user-return-15439-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73744 invoked from network); 15 Jul 2005 01:37:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2005 01:37:11 -0000
Received: (qmail 70834 invoked by uid 500); 15 Jul 2005 01:37:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70797 invoked by uid 500); 15 Jul 2005 01:37:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70784 invoked by uid 99); 15 Jul 2005 01:37:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 18:37:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 18:37:03 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 796D213E2006; Thu, 14 Jul 2005 21:36:57 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id DFB3713E2005
	for <java-user@lucene.apache.org>; Thu, 14 Jul 2005 21:36:06 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <CE9D3007-883C-41A5-A598-D127B6DA063F@aconex.com>
References: <20050714232833.81660.qmail@web31102.mail.mud.yahoo.com> <CE9D3007-883C-41A5-A598-D127B6DA063F@aconex.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <F4A63766-A004-4775-B274-249C72318B80@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
Date: Thu, 14 Jul 2005 21:36:10 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul - it sounds an awful like my (perhaps incorrect) understanding  
of the MapReduce capability of Nutch that is under development.   
Perhaps the work that Doug and others have done there are applicable  
to your situation.

     Erik


On Jul 14, 2005, at 7:38 PM, Paul Smith wrote:

> My punt was that having workers create sub-indexs (creating the  
> documents and making a partial index) and shipping the partial  
> index back to the queen to merge may be more efficient.  It's  
> probably not, I was just using the day as a chance to see if it  
> looked promising, and get my hands dirty with SEDA (and ActiveMQ,  
> great JMS provider).  The bit I forgot about until too late was the  
> merge is going to have to be 'serialized' by the queen, there's no  
> real way to get around that I could think of. Worse, because  
> the .merge(Directory[]) method does an automatic optimize I had to  
> get the Queen to temporarily store the partial indexes locally  
> until it had all results before doing a merge, otherwise the queen  
> would be spending _forever_ doing merges.
>
> If you had the workers just creating Documents, I'm not sure that  
> would get over the overhead of the SEDA network/jms transport.  The  
> document doesn't really get inverted until it's sent to the  
> Writer?  In this example the Queen would be doing 99% of the work  
> wouldn't it? (defeating the purpose of SEDA).
>
> What I was aiming at was an easily growable, self-healing Indexing  
> network.  Need more capacity? Throw in a Mac-Mini or something, and  
> let it join as a worker via Zeroconf.  Worker dies?  work just gets  
> done somewhere else.  True Google-like model.
>
> But I don't think I quite got there.
>
> Re: document in multiple indexes.  The queen was the co-ordinator,  
> so it's first task was to work out what entities to index  
> (everything in our app can be referenced via a URI, mail://2358 or  
> doc://9375).  The queen works out all the URI's to index, batches  
> them up into a work-unit and broadcasts that as a work message on  
> the work queue.  The worker takes that package, creates a  
> relatively small index (5000-10000 documents, whatever the chunk  
> size is), and ships the directory as a zipped up binary message  
> back onto the Result queue.  Therefore there were never any  
> duplicates.  A worker either processed the work unit, or it didn't.
>
> Paul
>
> On 15/07/2005, at 9:28 AM, Otis Gospodnetic wrote:
>
>
>> Interesting.  I'm planning on doing something similar for some new
>> Simpy features.  Why are your worker bees sending whole indices to  
>> the
>> Queen bee?  Wouldn't it be easier to send in Documents and have the
>> Queen index them in the same index?  Maybe you need those individual,
>> smaller indices to be separate....
>>
>> How do you deal with the possibility of the same Document being  
>> present
>> in multiple indices?
>>
>> Otis
>>
>>
>> --- Paul Smith <psmith@aconex.com> wrote:
>>
>>
>>
>>> I had a crack at whipping up something along this lines during a 1
>>> day hackathon we held here at work, using ActiveMQ as the bus  
>>> between
>>>
>>> the 'co-ordinator' (Queen bee) and the 'worker" bees.  The index  
>>> work
>>>
>>> was segmented as jobs on a work queue, and the workers feed the
>>> relatively smal index chunks back along a result queue, which the  
>>> co-
>>>
>>> ordinator then merged in.
>>>
>>> The tough part from observing the outcome is knowing what the chunk
>>> size should be, because in the end the co-ordinator needs to merge
>>> all the sub-indexes together into 1 and for a large index that's not
>>>
>>> an insignificant time.  You also have to use bookkeeping to work out
>>>
>>> if a 'job' has not been completed in time (maybe failure by the
>>> worker) and decide whether the job should be resubmitted (in theory
>>> JMS with transactions would help there, but then you have a
>>> throughput problem on that too).
>>>
>>> Would love to see something like this work really well, and perhaps
>>> generalize it a bit more.  I do like the simplicity of the SEDA
>>> principles.
>>>
>>> cheers,
>>>
>>> Paul Smith
>>>
>>>
>>> On 14/07/2005, at 11:50 PM, Peter Gelderbloem wrote:
>>>
>>>
>>>
>>>> I am currently looking into building a similar system and came
>>>>
>>>>
>>> across
>>>
>>>
>>>> this architecture:
>>>> http://www.eecs.harvard.edu/~mdw/proj/seda/
>>>>
>>>> I am just reading up on it now. Does anyone have experience
>>>>
>>>>
>>> building a
>>>
>>>
>>>> lucene system based on this architecture? Any advice would be
>>>>
>>>>
>>> greatly
>>>
>>>
>>>> appreciated.
>>>>
>>>> Peter Gelderbloem
>>>>
>>>>    Registered in England 3186704
>>>> -----Original Message-----
>>>> From: Luke Francl [mailto:luke.francl@stellent.com]
>>>> Sent: 13 May 2005 22:04
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: Best Practices for Distributing Lucene Indexing and
>>>> Searching
>>>>
>>>> On Tue, 2005-03-01 at 19:23, Chris Hostetter wrote:
>>>>
>>>>
>>>>
>>>>
>>>>> I don't really consider reading/writing to an NFS mounted
>>>>>
>>>>>
>>> FSDirectory
>>>
>>>
>>>>>
>>>>>
>>>>>
>>>> to
>>>>
>>>>
>>>>
>>>>> be viable for the very reasons you listed; but I haven't really
>>>>>
>>>>>
>>> found
>>>
>>>
>>>>>
>>>>>
>>>>>
>>>> any
>>>>
>>>>
>>>>
>>>>> evidence of problems if you take they approach that a single
>>>>>
>>>>>
>>> "writer"
>>>
>>>
>>>>> node indexes to local disk, which is NFS mounted by all of your
>>>>>
>>>>>
>>> other
>>>
>>>
>>>>> nodes for doing queries.  concurent updates/queries may still not
>>>>>
>>>>>
>>> be
>>>
>>>
>>>>>
>>>>>
>>>>>
>>>> safe
>>>>
>>>>
>>>>
>>>>> (i'm not sure) but you could have the writer node "clone" the
>>>>>
>>>>>
>>> entire
>>>
>>>
>>>>>
>>>>>
>>>>>
>>>> index
>>>>
>>>>
>>>>
>>>>> into a new directory, apply the updates and then signal the other
>>>>>
>>>>>
>>>>>
>>>> nodes to
>>>>
>>>>
>>>>
>>>>> stop using the old FSDirectory and start using the new one.
>>>>>
>>>>>
>>>>>
>>>>
>>>> Thanks to everyone who contributed advice to my question about how
>>>>
>>>>
>>> to
>>>
>>>
>>>> distribute a Lucene index across a cluster.
>>>>
>>>> I'm about to start on the implementation and I wanted to clarify
>>>> something about using NFS that Chris wrote about above.
>>>>
>>>> There are many warnings about indexing on an NFS file system, but
>>>> is it
>>>> safe to have a single node index, while the other nodes use the
>>>>
>>>>
>>> file
>>>
>>>
>>>> system in read-only mode?
>>>>
>>>> On a related note, our software is cross-platform and needs to work
>>>>
>>>>
>>> on
>>>
>>>
>>>> Windows as well. Are there any problems known problems having a
>>>> read-only index shared over SMB?
>>>>
>>>> Using a shared file system is preferable to me because it's easier,
>>>>
>>>>
>>>
>>>
>>>
>>>> but
>>>> if it's necessary I will write the code to copy the index to each
>>>> node.
>>>>
>>>> Thanks,
>>>> Luke Francl
>>>>
>>>>
>>>>
>>>>
>>>>
>>> -------------------------------------------------------------------- 
>>> -
>>>
>>>
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>> -------------------------------------------------------------------- 
>>> -
>>>
>>>
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 15 01:45:45 2005
Return-Path: <java-user-return-15440-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 74852 invoked from network); 15 Jul 2005 01:45:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2005 01:45:45 -0000
Received: (qmail 80881 invoked by uid 500); 15 Jul 2005 01:45:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80701 invoked by uid 500); 15 Jul 2005 01:45:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 80688 invoked by uid 99); 15 Jul 2005 01:45:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 18:45:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 18:45:35 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id 265B515A071
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 11:45:32 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 0EA4764007
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 11:45:32 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 27695-01-2 for <java-user@lucene.apache.org>;
 Fri, 15 Jul 2005 11:45:28 +1000 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by herald.aconex.com (Postfix) with ESMTP id EA9F764002
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 11:45:28 +1000 (EST)
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <F4A63766-A004-4775-B274-249C72318B80@ehatchersolutions.com>
References: <20050714232833.81660.qmail@web31102.mail.mud.yahoo.com> <CE9D3007-883C-41A5-A598-D127B6DA063F@aconex.com> <F4A63766-A004-4775-B274-249C72318B80@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <99A7ACE4-B808-4F25-A4F4-C43DD1F4F7FE@aconex.com>
Content-Transfer-Encoding: 7bit
From: Paul Smith <psmith@aconex.com>
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
Date: Fri, 15 Jul 2005 11:45:28 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Cooool, I should go have a look at that.. That begs another question  
though, where does Nutch stand in terms of the ASF?  Did I read (or  
dream) that Nutch may be coming in under ASF?  I guess I should get  
myself subscribed to the Nutch mailing lists.

thanks Erik.

Paul

On 15/07/2005, at 11:36 AM, Erik Hatcher wrote:

> Paul - it sounds an awful like my (perhaps incorrect) understanding  
> of the MapReduce capability of Nutch that is under development.   
> Perhaps the work that Doug and others have done there are  
> applicable to your situation.
>
>     Erik
>
>
> On Jul 14, 2005, at 7:38 PM, Paul Smith wrote:
>
>
>> My punt was that having workers create sub-indexs (creating the  
>> documents and making a partial index) and shipping the partial  
>> index back to the queen to merge may be more efficient.  It's  
>> probably not, I was just using the day as a chance to see if it  
>> looked promising, and get my hands dirty with SEDA (and ActiveMQ,  
>> great JMS provider).  The bit I forgot about until too late was  
>> the merge is going to have to be 'serialized' by the queen,  
>> there's no real way to get around that I could think of. Worse,  
>> because the .merge(Directory[]) method does an automatic optimize  
>> I had to get the Queen to temporarily store the partial indexes  
>> locally until it had all results before doing a merge, otherwise  
>> the queen would be spending _forever_ doing merges.
>>
>> If you had the workers just creating Documents, I'm not sure that  
>> would get over the overhead of the SEDA network/jms transport.   
>> The document doesn't really get inverted until it's sent to the  
>> Writer?  In this example the Queen would be doing 99% of the work  
>> wouldn't it? (defeating the purpose of SEDA).
>>
>> What I was aiming at was an easily growable, self-healing Indexing  
>> network.  Need more capacity? Throw in a Mac-Mini or something,  
>> and let it join as a worker via Zeroconf.  Worker dies?  work just  
>> gets done somewhere else.  True Google-like model.
>>
>> But I don't think I quite got there.
>>
>> Re: document in multiple indexes.  The queen was the co-ordinator,  
>> so it's first task was to work out what entities to index  
>> (everything in our app can be referenced via a URI, mail://2358 or  
>> doc://9375).  The queen works out all the URI's to index, batches  
>> them up into a work-unit and broadcasts that as a work message on  
>> the work queue.  The worker takes that package, creates a  
>> relatively small index (5000-10000 documents, whatever the chunk  
>> size is), and ships the directory as a zipped up binary message  
>> back onto the Result queue.  Therefore there were never any  
>> duplicates.  A worker either processed the work unit, or it didn't.
>>
>> Paul
>>
>> On 15/07/2005, at 9:28 AM, Otis Gospodnetic wrote:
>>
>>
>>
>>> Interesting.  I'm planning on doing something similar for some new
>>> Simpy features.  Why are your worker bees sending whole indices  
>>> to the
>>> Queen bee?  Wouldn't it be easier to send in Documents and have the
>>> Queen index them in the same index?  Maybe you need those  
>>> individual,
>>> smaller indices to be separate....
>>>
>>> How do you deal with the possibility of the same Document being  
>>> present
>>> in multiple indices?
>>>
>>> Otis
>>>
>>>
>>> --- Paul Smith <psmith@aconex.com> wrote:
>>>
>>>
>>>
>>>
>>>> I had a crack at whipping up something along this lines during a 1
>>>> day hackathon we held here at work, using ActiveMQ as the bus  
>>>> between
>>>>
>>>> the 'co-ordinator' (Queen bee) and the 'worker" bees.  The index  
>>>> work
>>>>
>>>> was segmented as jobs on a work queue, and the workers feed the
>>>> relatively smal index chunks back along a result queue, which  
>>>> the co-
>>>>
>>>> ordinator then merged in.
>>>>
>>>> The tough part from observing the outcome is knowing what the chunk
>>>> size should be, because in the end the co-ordinator needs to merge
>>>> all the sub-indexes together into 1 and for a large index that's  
>>>> not
>>>>
>>>> an insignificant time.  You also have to use bookkeeping to work  
>>>> out
>>>>
>>>> if a 'job' has not been completed in time (maybe failure by the
>>>> worker) and decide whether the job should be resubmitted (in theory
>>>> JMS with transactions would help there, but then you have a
>>>> throughput problem on that too).
>>>>
>>>> Would love to see something like this work really well, and perhaps
>>>> generalize it a bit more.  I do like the simplicity of the SEDA
>>>> principles.
>>>>
>>>> cheers,
>>>>
>>>> Paul Smith
>>>>
>>>>
>>>> On 14/07/2005, at 11:50 PM, Peter Gelderbloem wrote:
>>>>
>>>>
>>>>
>>>>
>>>>> I am currently looking into building a similar system and came
>>>>>
>>>>>
>>>>>
>>>> across
>>>>
>>>>
>>>>
>>>>> this architecture:
>>>>> http://www.eecs.harvard.edu/~mdw/proj/seda/
>>>>>
>>>>> I am just reading up on it now. Does anyone have experience
>>>>>
>>>>>
>>>>>
>>>> building a
>>>>
>>>>
>>>>
>>>>> lucene system based on this architecture? Any advice would be
>>>>>
>>>>>
>>>>>
>>>> greatly
>>>>
>>>>
>>>>
>>>>> appreciated.
>>>>>
>>>>> Peter Gelderbloem
>>>>>
>>>>>    Registered in England 3186704
>>>>> -----Original Message-----
>>>>> From: Luke Francl [mailto:luke.francl@stellent.com]
>>>>> Sent: 13 May 2005 22:04
>>>>> To: java-user@lucene.apache.org
>>>>> Subject: Re: Best Practices for Distributing Lucene Indexing and
>>>>> Searching
>>>>>
>>>>> On Tue, 2005-03-01 at 19:23, Chris Hostetter wrote:
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> I don't really consider reading/writing to an NFS mounted
>>>>>>
>>>>>>
>>>>>>
>>>> FSDirectory
>>>>
>>>>
>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> to
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> be viable for the very reasons you listed; but I haven't really
>>>>>>
>>>>>>
>>>>>>
>>>> found
>>>>
>>>>
>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> any
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> evidence of problems if you take they approach that a single
>>>>>>
>>>>>>
>>>>>>
>>>> "writer"
>>>>
>>>>
>>>>
>>>>>> node indexes to local disk, which is NFS mounted by all of your
>>>>>>
>>>>>>
>>>>>>
>>>> other
>>>>
>>>>
>>>>
>>>>>> nodes for doing queries.  concurent updates/queries may still not
>>>>>>
>>>>>>
>>>>>>
>>>> be
>>>>
>>>>
>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> safe
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> (i'm not sure) but you could have the writer node "clone" the
>>>>>>
>>>>>>
>>>>>>
>>>> entire
>>>>
>>>>
>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> index
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> into a new directory, apply the updates and then signal the other
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> nodes to
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> stop using the old FSDirectory and start using the new one.
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>> Thanks to everyone who contributed advice to my question about how
>>>>>
>>>>>
>>>>>
>>>> to
>>>>
>>>>
>>>>
>>>>> distribute a Lucene index across a cluster.
>>>>>
>>>>> I'm about to start on the implementation and I wanted to clarify
>>>>> something about using NFS that Chris wrote about above.
>>>>>
>>>>> There are many warnings about indexing on an NFS file system, but
>>>>> is it
>>>>> safe to have a single node index, while the other nodes use the
>>>>>
>>>>>
>>>>>
>>>> file
>>>>
>>>>
>>>>
>>>>> system in read-only mode?
>>>>>
>>>>> On a related note, our software is cross-platform and needs to  
>>>>> work
>>>>>
>>>>>
>>>>>
>>>> on
>>>>
>>>>
>>>>
>>>>> Windows as well. Are there any problems known problems having a
>>>>> read-only index shared over SMB?
>>>>>
>>>>> Using a shared file system is preferable to me because it's  
>>>>> easier,
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>>
>>>>> but
>>>>> if it's necessary I will write the code to copy the index to each
>>>>> node.
>>>>>
>>>>> Thanks,
>>>>> Luke Francl
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>>
>>>>
>>>>
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>>
>>>>
>>>>
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 15 02:04:42 2005
Return-Path: <java-user-return-15441-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77462 invoked from network); 15 Jul 2005 02:04:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2005 02:04:42 -0000
Received: (qmail 98815 invoked by uid 500); 15 Jul 2005 02:04:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98792 invoked by uid 500); 15 Jul 2005 02:04:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98768 invoked by uid 99); 15 Jul 2005 02:04:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 19:04:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 19:04:32 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id 5CD0515A05D
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 12:04:32 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 02C8164007
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 12:04:32 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 29411-01-6 for <java-user@lucene.apache.org>;
 Fri, 15 Jul 2005 12:04:29 +1000 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by herald.aconex.com (Postfix) with ESMTP id 1FA4064002
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 12:04:29 +1000 (EST)
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <99A7ACE4-B808-4F25-A4F4-C43DD1F4F7FE@aconex.com>
References: <20050714232833.81660.qmail@web31102.mail.mud.yahoo.com> <CE9D3007-883C-41A5-A598-D127B6DA063F@aconex.com> <F4A63766-A004-4775-B274-249C72318B80@ehatchersolutions.com> <99A7ACE4-B808-4F25-A4F4-C43DD1F4F7FE@aconex.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <106DDDE2-F072-4D0D-9DE2-CE61082CE3C2@aconex.com>
Content-Transfer-Encoding: 7bit
From: Paul Smith <psmith@aconex.com>
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
Date: Fri, 15 Jul 2005 12:04:29 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

answering my own question: nutch.org -> lucene.apache.org/nutch/

Excellent!

Paul

On 15/07/2005, at 11:45 AM, Paul Smith wrote:

> Cooool, I should go have a look at that.. That begs another  
> question though, where does Nutch stand in terms of the ASF?  Did I  
> read (or dream) that Nutch may be coming in under ASF?  I guess I  
> should get myself subscribed to the Nutch mailing lists.
>
> thanks Erik.
>
> Paul
>
> On 15/07/2005, at 11:36 AM, Erik Hatcher wrote:
>
>
>> Paul - it sounds an awful like my (perhaps incorrect)  
>> understanding of the MapReduce capability of Nutch that is under  
>> development.  Perhaps the work that Doug and others have done  
>> there are applicable to your situation.
>>
>>     Erik
>>
>>
>> On Jul 14, 2005, at 7:38 PM, Paul Smith wrote:
>>
>>
>>
>>> My punt was that having workers create sub-indexs (creating the  
>>> documents and making a partial index) and shipping the partial  
>>> index back to the queen to merge may be more efficient.  It's  
>>> probably not, I was just using the day as a chance to see if it  
>>> looked promising, and get my hands dirty with SEDA (and ActiveMQ,  
>>> great JMS provider).  The bit I forgot about until too late was  
>>> the merge is going to have to be 'serialized' by the queen,  
>>> there's no real way to get around that I could think of. Worse,  
>>> because the .merge(Directory[]) method does an automatic optimize  
>>> I had to get the Queen to temporarily store the partial indexes  
>>> locally until it had all results before doing a merge, otherwise  
>>> the queen would be spending _forever_ doing merges.
>>>
>>> If you had the workers just creating Documents, I'm not sure that  
>>> would get over the overhead of the SEDA network/jms transport.   
>>> The document doesn't really get inverted until it's sent to the  
>>> Writer?  In this example the Queen would be doing 99% of the work  
>>> wouldn't it? (defeating the purpose of SEDA).
>>>
>>> What I was aiming at was an easily growable, self-healing  
>>> Indexing network.  Need more capacity? Throw in a Mac-Mini or  
>>> something, and let it join as a worker via Zeroconf.  Worker  
>>> dies?  work just gets done somewhere else.  True Google-like model.
>>>
>>> But I don't think I quite got there.
>>>
>>> Re: document in multiple indexes.  The queen was the co- 
>>> ordinator, so it's first task was to work out what entities to  
>>> index (everything in our app can be referenced via a URI, mail:// 
>>> 2358 or doc://9375).  The queen works out all the URI's to index,  
>>> batches them up into a work-unit and broadcasts that as a work  
>>> message on the work queue.  The worker takes that package,  
>>> creates a relatively small index (5000-10000 documents, whatever  
>>> the chunk size is), and ships the directory as a zipped up binary  
>>> message back onto the Result queue.  Therefore there were never  
>>> any duplicates.  A worker either processed the work unit, or it  
>>> didn't.
>>>
>>> Paul
>>>
>>> On 15/07/2005, at 9:28 AM, Otis Gospodnetic wrote:
>>>
>>>
>>>
>>>
>>>> Interesting.  I'm planning on doing something similar for some new
>>>> Simpy features.  Why are your worker bees sending whole indices  
>>>> to the
>>>> Queen bee?  Wouldn't it be easier to send in Documents and have the
>>>> Queen index them in the same index?  Maybe you need those  
>>>> individual,
>>>> smaller indices to be separate....
>>>>
>>>> How do you deal with the possibility of the same Document being  
>>>> present
>>>> in multiple indices?
>>>>
>>>> Otis
>>>>
>>>>
>>>> --- Paul Smith <psmith@aconex.com> wrote:
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>> I had a crack at whipping up something along this lines during a 1
>>>>> day hackathon we held here at work, using ActiveMQ as the bus  
>>>>> between
>>>>>
>>>>> the 'co-ordinator' (Queen bee) and the 'worker" bees.  The  
>>>>> index work
>>>>>
>>>>> was segmented as jobs on a work queue, and the workers feed the
>>>>> relatively smal index chunks back along a result queue, which  
>>>>> the co-
>>>>>
>>>>> ordinator then merged in.
>>>>>
>>>>> The tough part from observing the outcome is knowing what the  
>>>>> chunk
>>>>> size should be, because in the end the co-ordinator needs to merge
>>>>> all the sub-indexes together into 1 and for a large index  
>>>>> that's not
>>>>>
>>>>> an insignificant time.  You also have to use bookkeeping to  
>>>>> work out
>>>>>
>>>>> if a 'job' has not been completed in time (maybe failure by the
>>>>> worker) and decide whether the job should be resubmitted (in  
>>>>> theory
>>>>> JMS with transactions would help there, but then you have a
>>>>> throughput problem on that too).
>>>>>
>>>>> Would love to see something like this work really well, and  
>>>>> perhaps
>>>>> generalize it a bit more.  I do like the simplicity of the SEDA
>>>>> principles.
>>>>>
>>>>> cheers,
>>>>>
>>>>> Paul Smith
>>>>>
>>>>>
>>>>> On 14/07/2005, at 11:50 PM, Peter Gelderbloem wrote:
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> I am currently looking into building a similar system and came
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> across
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> this architecture:
>>>>>> http://www.eecs.harvard.edu/~mdw/proj/seda/
>>>>>>
>>>>>> I am just reading up on it now. Does anyone have experience
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> building a
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> lucene system based on this architecture? Any advice would be
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> greatly
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> appreciated.
>>>>>>
>>>>>> Peter Gelderbloem
>>>>>>
>>>>>>    Registered in England 3186704
>>>>>> -----Original Message-----
>>>>>> From: Luke Francl [mailto:luke.francl@stellent.com]
>>>>>> Sent: 13 May 2005 22:04
>>>>>> To: java-user@lucene.apache.org
>>>>>> Subject: Re: Best Practices for Distributing Lucene Indexing and
>>>>>> Searching
>>>>>>
>>>>>> On Tue, 2005-03-01 at 19:23, Chris Hostetter wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> I don't really consider reading/writing to an NFS mounted
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>> FSDirectory
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> to
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> be viable for the very reasons you listed; but I haven't really
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>> found
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> any
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> evidence of problems if you take they approach that a single
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>> "writer"
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>>> node indexes to local disk, which is NFS mounted by all of your
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>> other
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>>> nodes for doing queries.  concurent updates/queries may still  
>>>>>>> not
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>> be
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> safe
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> (i'm not sure) but you could have the writer node "clone" the
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>> entire
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> index
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> into a new directory, apply the updates and then signal the  
>>>>>>> other
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> nodes to
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> stop using the old FSDirectory and start using the new one.
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>
>>>>>> Thanks to everyone who contributed advice to my question about  
>>>>>> how
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> to
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> distribute a Lucene index across a cluster.
>>>>>>
>>>>>> I'm about to start on the implementation and I wanted to clarify
>>>>>> something about using NFS that Chris wrote about above.
>>>>>>
>>>>>> There are many warnings about indexing on an NFS file system, but
>>>>>> is it
>>>>>> safe to have a single node index, while the other nodes use the
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> file
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> system in read-only mode?
>>>>>>
>>>>>> On a related note, our software is cross-platform and needs to  
>>>>>> work
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> on
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> Windows as well. Are there any problems known problems having a
>>>>>> read-only index shared over SMB?
>>>>>>
>>>>>> Using a shared file system is preferable to me because it's  
>>>>>> easier,
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> but
>>>>>> if it's necessary I will write the code to copy the index to each
>>>>>> node.
>>>>>>
>>>>>> Thanks,
>>>>>> Luke Francl
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> ---
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> ---
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> ---
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 15 02:11:54 2005
Return-Path: <java-user-return-15442-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78597 invoked from network); 15 Jul 2005 02:11:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2005 02:11:53 -0000
Received: (qmail 11621 invoked by uid 500); 15 Jul 2005 02:11:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11601 invoked by uid 500); 15 Jul 2005 02:11:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11588 invoked by uid 99); 15 Jul 2005 02:11:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 19:11:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 19:11:43 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A0F9B13E2006; Thu, 14 Jul 2005 22:11:37 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 1840613E2005
	for <java-user@lucene.apache.org>; Thu, 14 Jul 2005 22:11:17 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <99A7ACE4-B808-4F25-A4F4-C43DD1F4F7FE@aconex.com>
References: <20050714232833.81660.qmail@web31102.mail.mud.yahoo.com> <CE9D3007-883C-41A5-A598-D127B6DA063F@aconex.com> <F4A63766-A004-4775-B274-249C72318B80@ehatchersolutions.com> <99A7ACE4-B808-4F25-A4F4-C43DD1F4F7FE@aconex.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C69089CC-6AFA-4A4C-8EAE-646060EF49D4@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
Date: Thu, 14 Jul 2005 22:11:24 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 14, 2005, at 9:45 PM, Paul Smith wrote:

> Cooool, I should go have a look at that.. That begs another  
> question though, where does Nutch stand in terms of the ASF?  Did I  
> read (or dream) that Nutch may be coming in under ASF?  I guess I  
> should get myself subscribed to the Nutch mailing lists.

You're so behind the times!  :)   Nutch is now an official subproject  
of lucene.apache.org - it went through the Incubator and graduated.   
Yet another example of Doug Cutting rocking.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 15 05:57:53 2005
Return-Path: <java-user-return-15443-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22512 invoked from network); 15 Jul 2005 05:57:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2005 05:57:53 -0000
Received: (qmail 85591 invoked by uid 500); 15 Jul 2005 05:57:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85503 invoked by uid 500); 15 Jul 2005 05:57:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85482 invoked by uid 99); 15 Jul 2005 05:57:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 22:57:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.43] (HELO web31110.mail.mud.yahoo.com) (68.142.200.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 14 Jul 2005 22:57:42 -0700
Received: (qmail 4020 invoked by uid 60001); 15 Jul 2005 05:57:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=DWL5EJ6z483zcxRDS4Ec6Doovf6YRTYqaNZ3RpjjtDQu6OG09XyAvOnJemOZcfASvO9F/rMOP+m/C8mYST32pxPYxNgOfmzfmncq3KdFbiOF81n2ZgsPKfSDEOzRokNCrKzuRK35BCxBZhyK4sj3gd1DlAycAR4eq95yJsgpUt4=  ;
Message-ID: <20050715055743.4018.qmail@web31110.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31110.mail.mud.yahoo.com via HTTP; Thu, 14 Jul 2005 22:57:42 PDT
Date: Thu, 14 Jul 2005 22:57:42 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
To: java-user@lucene.apache.org
In-Reply-To: <99A7ACE4-B808-4F25-A4F4-C43DD1F4F7FE@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The problem that I saw (from your email only) with the "ship the full
little index to the Queen" approach is that, from what I understand,
you eventually do addIndexes(Directory[]) in there, and as this
optimizes things in the end, this means your whole index gets
re-written to disk after each such call.

As for MapReduce, from what I understand, it's quite a bit more
complicated under the hood, but very simple on the surface - given a
single big task, chop it up into a number of smaller ones, put them in
the massive, parallel system, and re-assemble them when they are done.

I'm not sure how generic or Nutch-specific Doug and Mike's MapReduce
code is in Nutch, I haven't been paying close enough attention.

Otis


--- Paul Smith <psmith@aconex.com> wrote:

> Cooool, I should go have a look at that.. That begs another question 
> 
> though, where does Nutch stand in terms of the ASF?  Did I read (or  
> dream) that Nutch may be coming in under ASF?  I guess I should get  
> myself subscribed to the Nutch mailing lists.
> 
> thanks Erik.
> 
> Paul
> 
> On 15/07/2005, at 11:36 AM, Erik Hatcher wrote:
> 
> > Paul - it sounds an awful like my (perhaps incorrect) understanding
>  
> > of the MapReduce capability of Nutch that is under development.   
> > Perhaps the work that Doug and others have done there are  
> > applicable to your situation.
> >
> >     Erik
> >
> >
> > On Jul 14, 2005, at 7:38 PM, Paul Smith wrote:
> >
> >
> >> My punt was that having workers create sub-indexs (creating the  
> >> documents and making a partial index) and shipping the partial  
> >> index back to the queen to merge may be more efficient.  It's  
> >> probably not, I was just using the day as a chance to see if it  
> >> looked promising, and get my hands dirty with SEDA (and ActiveMQ, 
> 
> >> great JMS provider).  The bit I forgot about until too late was  
> >> the merge is going to have to be 'serialized' by the queen,  
> >> there's no real way to get around that I could think of. Worse,  
> >> because the .merge(Directory[]) method does an automatic optimize 
> 
> >> I had to get the Queen to temporarily store the partial indexes  
> >> locally until it had all results before doing a merge, otherwise  
> >> the queen would be spending _forever_ doing merges.
> >>
> >> If you had the workers just creating Documents, I'm not sure that 
> 
> >> would get over the overhead of the SEDA network/jms transport.   
> >> The document doesn't really get inverted until it's sent to the  
> >> Writer?  In this example the Queen would be doing 99% of the work 
> 
> >> wouldn't it? (defeating the purpose of SEDA).
> >>
> >> What I was aiming at was an easily growable, self-healing Indexing
>  
> >> network.  Need more capacity? Throw in a Mac-Mini or something,  
> >> and let it join as a worker via Zeroconf.  Worker dies?  work just
>  
> >> gets done somewhere else.  True Google-like model.
> >>
> >> But I don't think I quite got there.
> >>
> >> Re: document in multiple indexes.  The queen was the co-ordinator,
>  
> >> so it's first task was to work out what entities to index  
> >> (everything in our app can be referenced via a URI, mail://2358 or
>  
> >> doc://9375).  The queen works out all the URI's to index, batches 
> 
> >> them up into a work-unit and broadcasts that as a work message on 
> 
> >> the work queue.  The worker takes that package, creates a  
> >> relatively small index (5000-10000 documents, whatever the chunk  
> >> size is), and ships the directory as a zipped up binary message  
> >> back onto the Result queue.  Therefore there were never any  
> >> duplicates.  A worker either processed the work unit, or it
> didn't.
> >>
> >> Paul
> >>
> >> On 15/07/2005, at 9:28 AM, Otis Gospodnetic wrote:
> >>
> >>
> >>
> >>> Interesting.  I'm planning on doing something similar for some
> new
> >>> Simpy features.  Why are your worker bees sending whole indices  
> >>> to the
> >>> Queen bee?  Wouldn't it be easier to send in Documents and have
> the
> >>> Queen index them in the same index?  Maybe you need those  
> >>> individual,
> >>> smaller indices to be separate....
> >>>
> >>> How do you deal with the possibility of the same Document being  
> >>> present
> >>> in multiple indices?
> >>>
> >>> Otis
> >>>
> >>>
> >>> --- Paul Smith <psmith@aconex.com> wrote:
> >>>
> >>>
> >>>
> >>>
> >>>> I had a crack at whipping up something along this lines during a
> 1
> >>>> day hackathon we held here at work, using ActiveMQ as the bus  
> >>>> between
> >>>>
> >>>> the 'co-ordinator' (Queen bee) and the 'worker" bees.  The index
>  
> >>>> work
> >>>>
> >>>> was segmented as jobs on a work queue, and the workers feed the
> >>>> relatively smal index chunks back along a result queue, which  
> >>>> the co-
> >>>>
> >>>> ordinator then merged in.
> >>>>
> >>>> The tough part from observing the outcome is knowing what the
> chunk
> >>>> size should be, because in the end the co-ordinator needs to
> merge
> >>>> all the sub-indexes together into 1 and for a large index that's
>  
> >>>> not
> >>>>
> >>>> an insignificant time.  You also have to use bookkeeping to work
>  
> >>>> out
> >>>>
> >>>> if a 'job' has not been completed in time (maybe failure by the
> >>>> worker) and decide whether the job should be resubmitted (in
> theory
> >>>> JMS with transactions would help there, but then you have a
> >>>> throughput problem on that too).
> >>>>
> >>>> Would love to see something like this work really well, and
> perhaps
> >>>> generalize it a bit more.  I do like the simplicity of the SEDA
> >>>> principles.
> >>>>
> >>>> cheers,
> >>>>
> >>>> Paul Smith
> >>>>
> >>>>
> >>>> On 14/07/2005, at 11:50 PM, Peter Gelderbloem wrote:
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>> I am currently looking into building a similar system and came
> >>>>>
> >>>>>
> >>>>>
> >>>> across
> >>>>
> >>>>
> >>>>
> >>>>> this architecture:
> >>>>> http://www.eecs.harvard.edu/~mdw/proj/seda/
> >>>>>
> >>>>> I am just reading up on it now. Does anyone have experience
> >>>>>
> >>>>>
> >>>>>
> >>>> building a
> >>>>
> >>>>
> >>>>
> >>>>> lucene system based on this architecture? Any advice would be
> >>>>>
> >>>>>
> >>>>>
> >>>> greatly
> >>>>
> >>>>
> >>>>
> >>>>> appreciated.
> >>>>>
> >>>>> Peter Gelderbloem
> >>>>>
> >>>>>    Registered in England 3186704
> >>>>> -----Original Message-----
> >>>>> From: Luke Francl [mailto:luke.francl@stellent.com]
> >>>>> Sent: 13 May 2005 22:04
> >>>>> To: java-user@lucene.apache.org
> >>>>> Subject: Re: Best Practices for Distributing Lucene Indexing
> and
> >>>>> Searching
> >>>>>
> >>>>> On Tue, 2005-03-01 at 19:23, Chris Hostetter wrote:
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>> I don't really consider reading/writing to an NFS mounted
> >>>>>>
> >>>>>>
> >>>>>>
> >>>> FSDirectory
> >>>>
> >>>>
> >>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>> to
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>> be viable for the very reasons you listed; but I haven't
> really
> >>>>>>
> >>>>>>
> >>>>>>
> >>>> found
> >>>>
> >>>>
> >>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>> any
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>> evidence of problems if you take they approach that a single
> >>>>>>
> >>>>>>
> >>>>>>
> >>>> "writer"
> >>>>
> >>>>
> >>>>
> >>>>>> node indexes to local disk, which is NFS mounted by all of
> your
> >>>>>>
> >>>>>>
> >>>>>>
> >>>> other
> >>>>
> >>>>
> >>>>
> >>>>>> nodes for doing queries.  concurent updates/queries may still
> not
> >>>>>>
> >>>>>>
> >>>>>>
> >>>> be
> >>>>
> >>>>
> >>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>> safe
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>> (i'm not sure) but you could have the writer node "clone" the
> >>>>>>
> >>>>>>
> >>>>>>
> >>>> entire
> >>>>
> >>>>
> >>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>> index
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>> into a new directory, apply the updates and then signal the
> other
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>> nodes to
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>> stop using the old FSDirectory and start using the new one.
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>>
> >>>>>
> >>>>> Thanks to everyone who contributed advice to my question about
> how
> >>>>>
> >>>>>
> >>>>>
> >>>> to
> >>>>
> >>>>
> >>>>
> >>>>> distribute a Lucene index across a cluster.
> >>>>>
> >>>>> I'm about to start on the implementation and I wanted to
> clarify
> >>>>> something about using NFS that Chris wrote about above.
> >>>>>
> >>>>> There are many warnings about indexing on an NFS file system,
> but
> >>>>> is it
> >>>>> safe to have a single node index, while the other nodes use the
> >>>>>
> >>>>>
> >>>>>
> >>>> file
> >>>>
> >>>>
> >>>>
> >>>>> system in read-only mode?
> >>>>>
> >>>>> On a related note, our software is cross-platform and needs to 
> 
> >>>>> work
> >>>>>
> >>>>>
> >>>>>
> >>>> on
> >>>>
> >>>>
> >>>>
> >>>>> Windows as well. Are there any problems known problems having a
> >>>>> read-only index shared over SMB?
> >>>>>
> >>>>> Using a shared file system is preferable to me because it's  
> >>>>> easier,
> >>>>>
> >>>>>
> >>>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>> but
> >>>>> if it's necessary I will write the code to copy the index to
> each
> >>>>> node.
> >>>>>
> >>>>> Thanks,
> >>>>> Luke Francl
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>
> ------------------------------------------------------------------- 
> >>>> --
> >>>>
> >>>>
> >>>>
> >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>
> ------------------------------------------------------------------- 
> >>>> --
> >>>>
> >>>>
> >>>>
> >>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>>> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>>
> >>>>
> >>>>
> >>>>
> ------------------------------------------------------------------- 
> >>>> --
> >>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>> For additional commands, e-mail:
> java-user-help@lucene.apache.org
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>
> >>>
> >>>
> >>>
> -------------------------------------------------------------------- 
> >>> -
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>>
> >>>
> >>>
> >>
> >>
> >>
> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >
> >
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 15 06:05:50 2005
Return-Path: <java-user-return-15444-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24475 invoked from network); 15 Jul 2005 06:05:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2005 06:05:49 -0000
Received: (qmail 98138 invoked by uid 500); 15 Jul 2005 06:05:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98115 invoked by uid 500); 15 Jul 2005 06:05:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98102 invoked by uid 99); 15 Jul 2005 06:05:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 23:05:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 14 Jul 2005 23:05:38 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id 5643A159F84
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 16:05:34 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 4555664007
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 16:05:34 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 14485-01-2 for <java-user@lucene.apache.org>;
 Fri, 15 Jul 2005 16:05:33 +1000 (EST)
Received: from [192.168.0.242] (unknown [192.168.0.242])
	by herald.aconex.com (Postfix) with ESMTP id 1481B64002
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 16:05:33 +1000 (EST)
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <20050715055743.4018.qmail@web31110.mail.mud.yahoo.com>
References: <20050715055743.4018.qmail@web31110.mail.mud.yahoo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AB04AB6F-044B-4FF0-B464-1990D97A28C0@aconex.com>
Content-Transfer-Encoding: 7bit
From: Paul Smith <psmith@aconex.com>
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
Date: Fri, 15 Jul 2005 16:05:31 +1000
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On 15/07/2005, at 3:57 PM, Otis Gospodnetic wrote:

> The problem that I saw (from your email only) with the "ship the full
> little index to the Queen" approach is that, from what I understand,
> you eventually do addIndexes(Directory[]) in there, and as this
> optimizes things in the end, this means your whole index gets
> re-written to disk after each such call.
>

Yep, hence that I placed the partial index received from the worker  
in the queen's local disk, left there until such time as all the  
partial indexes had come in, and then do a final UberMerge of all of  
them in one hit.

> As for MapReduce, from what I understand, it's quite a bit more
> complicated under the hood, but very simple on the surface - given a
> single big task, chop it up into a number of smaller ones, put them in
> the massive, parallel system, and re-assemble them when they are done.
>

Is this sort of like the Fork-Join thing that Doug Lea talks about in  
his concurrency book?  Anyway, the concept you mention is exactly the  
one I'm interested in.  I'll have to hunt through the Nutch stuff to  
see.  I guess it all depends if a problem can be easily and  
programmatically decomposed into smaller units.

> I'm not sure how generic or Nutch-specific Doug and Mike's MapReduce
> code is in Nutch, I haven't been paying close enough attention.
>

Me too.. :)  I didn't even know Nutch was now fully in the ASF, and  
I'm a Member... :-$

Paul



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 15 07:48:03 2005
Return-Path: <java-user-return-15445-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52735 invoked from network); 15 Jul 2005 07:48:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2005 07:48:03 -0000
Received: (qmail 9187 invoked by uid 500); 15 Jul 2005 07:47:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 9100 invoked by uid 500); 15 Jul 2005 07:47:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9065 invoked by uid 99); 15 Jul 2005 07:47:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2005 00:47:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.44.16.11] (HELO getopt.org) (69.44.16.11)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2005 00:47:39 -0700
Received: from [192.168.0.252] (75-mo3-2.acn.waw.pl [62.121.105.75])
	(authenticated)
	by getopt.org (8.11.6/8.11.6) with ESMTP id j6F7lfd31056
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 02:47:41 -0500
Message-ID: <42D76A1A.1080603@getopt.org>
Date: Fri, 15 Jul 2005 09:47:38 +0200
From: Andrzej Bialecki <ab@getopt.org>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
References: <20050715055743.4018.qmail@web31110.mail.mud.yahoo.com> <AB04AB6F-044B-4FF0-B464-1990D97A28C0@aconex.com>
In-Reply-To: <AB04AB6F-044B-4FF0-B464-1990D97A28C0@aconex.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul Smith wrote:

>> I'm not sure how generic or Nutch-specific Doug and Mike's MapReduce
>> code is in Nutch, I haven't been paying close enough attention.
>>
> 
> Me too.. :)  I didn't even know Nutch was now fully in the ASF, and  I'm 
> a Member... :-$

Let me pipe in on behalf of the Nutch project... The work that Doug and 
Mike are doing is on a branch, so you will want to check out the following:

	svn co http://svn.apache.org/repos/asf/lucene/nutch/branches/mapred

The distributed work units are performed by arbitrary implementations of 
appropriate interfaces, so it should be possible to provide 
implementations that handle just Lucene indices.

The MapReduce code is still under heavy development, but it will provide 
the core of Nutch for the next version. Any pair of hands (and eyes) 
interested in this work will definitely help!

-- 
Best regards,
Andrzej Bialecki     <><
  ___. ___ ___ ___ _ _   __________________________________
[__ || __|__/|__||\/|  Information Retrieval, Semantic Web
___|||__||  \|  ||  |  Embedded Unix, System Integration
http://www.sigram.com  Contact: info at sigram dot com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 15 18:57:12 2005
Return-Path: <java-user-return-15446-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39292 invoked from network); 15 Jul 2005 18:57:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2005 18:57:12 -0000
Received: (qmail 88276 invoked by uid 500); 15 Jul 2005 18:57:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88222 invoked by uid 500); 15 Jul 2005 18:57:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88209 invoked by uid 99); 15 Jul 2005 18:57:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2005 11:57:06 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [162.10.250.1] (HELO ussd300.anacomp.com) (162.10.250.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2005 11:57:02 -0700
Received: from usrd104.corp.anacomp.com (usrd104.anacomp.com [162.10.170.234])
	by ussd300.anacomp.com (Postfix) with ESMTP id 6497557285
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 11:57:03 -0700 (PDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C5896E.FCBF0982"
Subject: Runtime full text search like in Microsoft Windows Search
Date: Fri, 15 Jul 2005 14:57:02 -0400
Message-ID: <66911C8E1F2DA24EB29DE289297A135ED5DDCE@usrd104>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Runtime full text search like in Microsoft Windows Search
Thread-Index: AcWJbuZbK9etdvOQRRapeupBVKvC3g==
From: "Tardif, Sebastien" <STARDIF@anacomp.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C5896E.FCBF0982
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

How can you use Lucene like the very limited but fast search that
Microsoft Windows Search provide?
=20
The use case is that the users have a CD with lot of files. I provide
them a nice user interface. They have the option to generate the full
text search index but they should also be able to search without an
index generated. I know that will be slow, but Microsoft Windows Search
is still able to search 500 MB in less than 30 seconds for simpler
matching.
=20
How can I use Lucene for this simpler, not existing index, search?
=20
Or should I have to hook to operating system specific API like Win32 on
Windows?

------_=_NextPart_001_01C5896E.FCBF0982--

From java-user-return-15447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 15 19:12:53 2005
Return-Path: <java-user-return-15447-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43161 invoked from network); 15 Jul 2005 19:12:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2005 19:12:53 -0000
Received: (qmail 8827 invoked by uid 500); 15 Jul 2005 19:12:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8806 invoked by uid 500); 15 Jul 2005 19:12:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8793 invoked by uid 99); 15 Jul 2005 19:12:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2005 12:12:45 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.85] (HELO smtpout.mac.com) (17.250.248.85)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2005 12:12:40 -0700
Received: from mac.com (smtpin07-en2 [10.13.10.152])
	by smtpout.mac.com (Xserve/8.12.11/smtpout03/MantshX 4.0) with ESMTP id j6FJCfHM023892
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 12:12:41 -0700 (PDT)
Received: from [192.168.15.100] (66-214-154-12.mpk-mres.charterpipeline.net [66.214.154.12])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin07/MantshX 4.0) with ESMTP id j6FJCdEL027466
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 12:12:41 -0700 (PDT)
Message-ID: <42D80AA6.5070906@mac.com>
Date: Fri, 15 Jul 2005 12:12:38 -0700
From: "xing@mac.com" <xing@mac.com>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: Runtime full text search like in Microsoft Windows Search
References: <66911C8E1F2DA24EB29DE289297A135ED5DDCE@usrd104>
In-Reply-To: <66911C8E1F2DA24EB29DE289297A135ED5DDCE@usrd104>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If Microsoft Search does as you describe. Isn't it just:

1) Open file
2) Determine file type
3) Convert file content to UTF8, if text based, and you have the API to 
read it. .html, .txt., .doc, .excel, etc.
4) Perform string search, regex.
5) Continue to next file

As far as I know, Lucene is not designed for unindexed search.

Tardif, Sebastien wrote:
> How can you use Lucene like the very limited but fast search that
> Microsoft Windows Search provide?
>  
> The use case is that the users have a CD with lot of files. I provide
> them a nice user interface. They have the option to generate the full
> text search index but they should also be able to search without an
> index generated. I know that will be slow, but Microsoft Windows Search
> is still able to search 500 MB in less than 30 seconds for simpler
> matching.
>  
> How can I use Lucene for this simpler, not existing index, search?
>  
> Or should I have to hook to operating system specific API like Win32 on
> Windows?
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 15 19:16:52 2005
Return-Path: <java-user-return-15448-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44173 invoked from network); 15 Jul 2005 19:16:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2005 19:16:52 -0000
Received: (qmail 14674 invoked by uid 500); 15 Jul 2005 19:16:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14646 invoked by uid 500); 15 Jul 2005 19:16:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14633 invoked by uid 99); 15 Jul 2005 19:16:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2005 12:16:46 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.95.77.96] (HELO phobos.net-temps.com) (64.95.77.96)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2005 12:16:42 -0700
Received: from localhost (localhost [127.0.0.1])
	by phobos.net-temps.com (Postfix) with ESMTP id 1C0C23F487;
	Fri, 15 Jul 2005 15:16:41 -0400 (EDT)
Received: from phobos.net-temps.com ([127.0.0.1])
 by localhost (phobos.net-temps.com [127.0.0.1]) (amavisd-new, port 10024)
 with ESMTP id 17435-05; Fri, 15 Jul 2005 15:16:39 -0400 (EDT)
Received: from nbrackett (europa [192.168.1.21])
	by phobos.net-temps.com (Postfix) with SMTP id 6F0043F480
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 15:16:39 -0400 (EDT)
From: "Nathan Brackett" <nbrackett@net-temps.com>
To: <java-user@lucene.apache.org>
Subject: RE: Runtime full text search like in Microsoft Windows Search
Date: Fri, 15 Jul 2005 15:18:58 -0400
Message-ID: <LJEJJJKMGLFKGPJJOLFJEEMFIHAA.nbrackett@net-temps.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Importance: Normal
In-Reply-To: <66911C8E1F2DA24EB29DE289297A135ED5DDCE@usrd104>
X-Virus-Scanned: by amavisd-new at net-temps.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I imagine you could index the info you wanted to quickly search on into a
RAMDirectory (assuming it wasn't too much info), then run simple or complex
searches on that, but I that might take longer to do than simple regex
searching on files. That would only give you a gain if you were going to run
repeated searches on that set of data.


-----Original Message-----
From: Tardif, Sebastien [mailto:STARDIF@anacomp.com]
Sent: Friday, July 15, 2005 2:57 PM
To: java-user@lucene.apache.org
Subject: Runtime full text search like in Microsoft Windows Search


How can you use Lucene like the very limited but fast search that
Microsoft Windows Search provide?

The use case is that the users have a CD with lot of files. I provide
them a nice user interface. They have the option to generate the full
text search index but they should also be able to search without an
index generated. I know that will be slow, but Microsoft Windows Search
is still able to search 500 MB in less than 30 seconds for simpler
matching.

How can I use Lucene for this simpler, not existing index, search?

Or should I have to hook to operating system specific API like Win32 on
Windows?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 15 19:35:13 2005
Return-Path: <java-user-return-15449-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54212 invoked from network); 15 Jul 2005 19:35:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 15 Jul 2005 19:35:13 -0000
Received: (qmail 36312 invoked by uid 500); 15 Jul 2005 19:35:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36293 invoked by uid 500); 15 Jul 2005 19:35:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36280 invoked by uid 99); 15 Jul 2005 19:35:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2005 12:35:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.77] (HELO web31115.mail.mud.yahoo.com) (68.142.201.77)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 15 Jul 2005 12:35:01 -0700
Received: (qmail 70237 invoked by uid 60001); 15 Jul 2005 19:34:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=kdWJb0oS16r+Rfn3vOgjcrD/D7ZCV4umjpdatWr4rZuJcsxBeQiTiAiX6i9Rl6QCEhbE1wJlZ/pBNL5vBFEMhtNlpPXGntVu8HhISsFShWqM4OJVAGU/x0kfe0Z/6lPL5+XLiaTUKJeH9dELbPN8hFol96vmspZtL54pGpkph9g=  ;
Message-ID: <20050715193428.70235.qmail@web31115.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31115.mail.mud.yahoo.com via HTTP; Fri, 15 Jul 2005 12:34:28 PDT
Date: Fri, 15 Jul 2005 12:34:28 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Runtime full text search like in Microsoft Windows Search
To: java-user@lucene.apache.org
In-Reply-To: <66911C8E1F2DA24EB29DE289297A135ED5DDCE@usrd104>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

As somebody already said, you can have an in-memory index with
RAMDirectory.  You can also pre-build a Lucene index on that CD - CD is
"static", you can't add/remove/change files on it, so you can build an
index and burn it onto the CD at the same time when you put the Word
files on it.

As for getting the indexable text out of Word and other documents, look
at the code for the Lucene book - http://lucenebook.com - there is a
little framework there, that parses and indexes a number of common file
types.

Otis


--- "Tardif, Sebastien" <STARDIF@anacomp.com> wrote:

> How can you use Lucene like the very limited but fast search that
> Microsoft Windows Search provide?
>  
> The use case is that the users have a CD with lot of files. I provide
> them a nice user interface. They have the option to generate the full
> text search index but they should also be able to search without an
> index generated. I know that will be slow, but Microsoft Windows
> Search
> is still able to search 500 MB in less than 30 seconds for simpler
> matching.
>  
> How can I use Lucene for this simpler, not existing index, search?
>  
> Or should I have to hook to operating system specific API like Win32
> on
> Windows?
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 16 00:02:08 2005
Return-Path: <java-user-return-15450-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 162 invoked from network); 16 Jul 2005 00:02:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2005 00:02:08 -0000
Received: (qmail 14221 invoked by uid 500); 16 Jul 2005 00:02:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14194 invoked by uid 500); 16 Jul 2005 00:02:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14181 invoked by uid 99); 16 Jul 2005 00:02:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2005 17:02:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2005 17:01:58 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 920F513E2007; Fri, 15 Jul 2005 20:01:51 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 6393413E2005
	for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 20:01:31 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42D80AA6.5070906@mac.com>
References: <66911C8E1F2DA24EB29DE289297A135ED5DDCE@usrd104> <42D80AA6.5070906@mac.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <5760E965-AF61-41BE-836B-6B146192734C@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Runtime full text search like in Microsoft Windows Search
Date: Fri, 15 Jul 2005 20:01:41 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 15, 2005, at 3:12 PM, xing@mac.com wrote:

> If Microsoft Search does as you describe. Isn't it just:
>
> 1) Open file
> 2) Determine file type
> 3) Convert file content to UTF8, if text based, and you have the  
> API to read it. .html, .txt., .doc, .excel, etc.
> 4) Perform string search, regex.
> 5) Continue to next file
>
> As far as I know, Lucene is not designed for unindexed search.

The new MemoryIndex might be perfect for this sort of thing.  I  
suspect Microsoft's search doesn't allow anything but a term/exact- 
phrase kinda query, so even MemoryIndex might be doing more work (and  
thus slower) for a fair comparison.  However, you'd be able to do  
rich queries using MemoryIndex and it has been heavily tuned for  
performance.  The slow part will be simply reading the files and  
converting them.

     Erik


>
> Tardif, Sebastien wrote:
>
>> How can you use Lucene like the very limited but fast search that
>> Microsoft Windows Search provide?
>>  The use case is that the users have a CD with lot of files. I  
>> provide
>> them a nice user interface. They have the option to generate the full
>> text search index but they should also be able to search without an
>> index generated. I know that will be slow, but Microsoft Windows  
>> Search
>> is still able to search 500 MB in less than 30 seconds for simpler
>> matching.
>>  How can I use Lucene for this simpler, not existing index, search?
>>  Or should I have to hook to operating system specific API like  
>> Win32 on
>> Windows?
>>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 16 00:42:48 2005
Return-Path: <java-user-return-15451-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7336 invoked from network); 16 Jul 2005 00:42:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2005 00:42:48 -0000
Received: (qmail 48453 invoked by uid 500); 16 Jul 2005 00:42:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48435 invoked by uid 500); 16 Jul 2005 00:42:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48422 invoked by uid 99); 16 Jul 2005 00:42:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2005 17:42:41 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.206 as permitted sender)
Received: from [64.233.170.206] (HELO rproxy.gmail.com) (64.233.170.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2005 17:42:37 -0700
Received: by rproxy.gmail.com with SMTP id 1so385830rny
        for <java-user@lucene.apache.org>; Fri, 15 Jul 2005 17:42:38 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Cg89D0wMLmaJVuU/gZpllwrYDzztq5jeEaQKbw3z7O52jEGASotVib8fAgjKLODN1HwfI7u/EEaN6cFNrsgf50oMfQ1S4K3EFs5v5bNPqQNukE6TuCR4Q222KHsyI0BinnO6pEXJo7+3FaBt0eqqlOQyLeUnLVCxw35mPrjtGrs=
Received: by 10.38.6.14 with SMTP id 14mr3505847rnf;
        Fri, 15 Jul 2005 17:42:38 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Fri, 15 Jul 2005 17:42:38 -0700 (PDT)
Message-ID: <7ca1239105071517423d281639@mail.gmail.com>
Date: Fri, 15 Jul 2005 17:42:38 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Lucene index integrity during a system crash
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I know Lucene does not have transaction support at this stage.
However, I want to know what will happen if there is an operating
system crash during the indexing process, will the Lucene index got
corrupted?

Thanks,

Jian

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 16 05:25:23 2005
Return-Path: <java-user-return-15452-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58602 invoked from network); 16 Jul 2005 05:25:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2005 05:25:22 -0000
Received: (qmail 99410 invoked by uid 500); 16 Jul 2005 05:25:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99351 invoked by uid 500); 16 Jul 2005 05:25:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99338 invoked by uid 99); 16 Jul 2005 05:25:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2005 22:25:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.212.94.12] (HELO blackhole.fatwire.com) (209.212.94.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 15 Jul 2005 22:25:13 -0700
Received: by blackhole.fatwire.com with Internet Mail Service (5.5.2656.59)
	id <3NK36R8K>; Sat, 16 Jul 2005 01:25:14 -0400
Message-ID: <E9C070038E79D411B73700D0B73EC81006DBA1F3@blackhole.fatwire.com>
From: "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: Searching for similar documents
Date: Sat, 16 Jul 2005 01:25:08 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2656.59)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, 
I am trying to build a search utility that looks for 'similarities' between
documents.
In other words, for every document listed as a part of search result for a
phrase, I want to be able to list documents that are similar to it (but not
necessarily match the same search criterion). For example, if my search for
"Tomcat" returned "Tomcat installation guide", I want to write a utility
that looks for all similar installation guides that may or may not be
related to Tomcat.

One approach I am thinking is to use term vectors. Algorithm: first extract
the top X term vectors from the current document and create a Boolean query
for those terms. Run it against contents of other documents (I will probably
have to remove commonly used terms manually?). Resulting documents should be
similar to the original one. 

I am wondering if something like this already exists or someone has a better
algorithm/solution. Or am I headed off in the wrong direction with this
algorithm? Your advice is highly appreciated. 

Thanks
-Hareesh 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 16 07:30:39 2005
Return-Path: <java-user-return-15453-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81041 invoked from network); 16 Jul 2005 07:30:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2005 07:30:39 -0000
Received: (qmail 60777 invoked by uid 500); 16 Jul 2005 07:30:37 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59874 invoked by uid 500); 16 Jul 2005 07:30:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59859 invoked by uid 99); 16 Jul 2005 07:30:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2005 00:30:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.75] (HELO web31113.mail.mud.yahoo.com) (68.142.201.75)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 16 Jul 2005 00:30:30 -0700
Received: (qmail 71216 invoked by uid 60001); 16 Jul 2005 07:30:31 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=CGu0iNBySig9LNCJJhJbK9/53xHrelzrKDd1E8RSW6XkFM8dt/ugdjwD1JyR5JiV4CajWH3GcJPJlJmJLHX5B2X1Fk9B+vIP0IzOk+3SI4vWWv4DSJj1bn0ydflpOGopJs4G6mZUYXaSA8+Z0OkAGnerXpaUqh/z/LsTVY06Q3I=  ;
Message-ID: <20050716073030.71214.qmail@web31113.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31113.mail.mud.yahoo.com via HTTP; Sat, 16 Jul 2005 00:30:30 PDT
Date: Sat, 16 Jul 2005 00:30:30 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Searching for similar documents
To: java-user@lucene.apache.org
In-Reply-To: <E9C070038E79D411B73700D0B73EC81006DBA1F3@blackhole.fatwire.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We've got this in Lucene's contrib/:

$ ll contrib/similarity/src/java/org/apache/lucene/search/similar/*java

-rwxrwxr-x  1 otis otis 30431 Jul  9 09:20 MoreLikeThis.java*
-rwxrwxr-x  1 otis otis  3612 Mar 16 17:31 SimilarityQueries.java*

Otis

--- "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com> wrote:

> Hi, 
> I am trying to build a search utility that looks for 'similarities'
> between
> documents.
> In other words, for every document listed as a part of search result
> for a
> phrase, I want to be able to list documents that are similar to it
> (but not
> necessarily match the same search criterion). For example, if my
> search for
> "Tomcat" returned "Tomcat installation guide", I want to write a
> utility
> that looks for all similar installation guides that may or may not be
> related to Tomcat.
> 
> One approach I am thinking is to use term vectors. Algorithm: first
> extract
> the top X term vectors from the current document and create a Boolean
> query
> for those terms. Run it against contents of other documents (I will
> probably
> have to remove commonly used terms manually?). Resulting documents
> should be
> similar to the original one. 
> 
> I am wondering if something like this already exists or someone has a
> better
> algorithm/solution. Or am I headed off in the wrong direction with
> this
> algorithm? Your advice is highly appreciated. 
> 
> Thanks
> -Hareesh 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 16 07:32:53 2005
Return-Path: <java-user-return-15454-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81233 invoked from network); 16 Jul 2005 07:32:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2005 07:32:53 -0000
Received: (qmail 62237 invoked by uid 500); 16 Jul 2005 07:32:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61340 invoked by uid 500); 16 Jul 2005 07:32:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61327 invoked by uid 99); 16 Jul 2005 07:32:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2005 00:32:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.75] (HELO web31113.mail.mud.yahoo.com) (68.142.201.75)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 16 Jul 2005 00:32:44 -0700
Received: (qmail 71327 invoked by uid 60001); 16 Jul 2005 07:32:45 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Q78PYudv5yqZe36QlawYIUU39YxSn8IZasBSddGzdtzvSQuCKtdc0MYt87Wl5I+m8INaw6zIXMsnJwPnYaOGtcjlrj6DlIXG36tVBCvBwuQejnyXbcbiIn/Yu+68bg4M6wthijqPThcxPIJ0YN65YHYuLveGnzFXEFbZFGGdtqU=  ;
Message-ID: <20050716073245.71325.qmail@web31113.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31113.mail.mud.yahoo.com via HTTP; Sat, 16 Jul 2005 00:32:45 PDT
Date: Sat, 16 Jul 2005 00:32:45 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene index integrity during a system crash
To: java-user@lucene.apache.org
In-Reply-To: <7ca1239105071517423d281639@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The only corruption that I've seen mentioned on this list so far was
the corruption of the segments file, and even that people have been
able to manually edit with a hex editor.

Otis


--- jian chen <chenjian1227@gmail.com> wrote:

> Hi,
> 
> I know Lucene does not have transaction support at this stage.
> However, I want to know what will happen if there is an operating
> system crash during the indexing process, will the Lucene index got
> corrupted?
> 
> Thanks,
> 
> Jian
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 16 12:37:21 2005
Return-Path: <java-user-return-15455-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48189 invoked from network); 16 Jul 2005 12:37:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2005 12:37:21 -0000
Received: (qmail 14010 invoked by uid 500); 16 Jul 2005 12:37:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13979 invoked by uid 500); 16 Jul 2005 12:37:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13965 invoked by uid 99); 16 Jul 2005 12:37:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2005 05:37:15 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.212.94.12] (HELO blackhole.fatwire.com) (209.212.94.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2005 05:37:11 -0700
Received: by blackhole.fatwire.com with Internet Mail Service (5.5.2656.59)
	id <3NK36TX0>; Sat, 16 Jul 2005 08:37:12 -0400
Message-ID: <E9C070038E79D411B73700D0B73EC81006DBA1F4@blackhole.fatwire.com>
From: "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com>
To: "'java-user@lucene.apache.org '" <java-user@lucene.apache.org>
Subject: RE: Searching for similar documents
Date: Sat, 16 Jul 2005 08:37:12 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2656.59)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Otis!

Are there Lucene 1.4 compatiable version of these classes?

Thanks very much
-Hareesh

-----Original Message-----
From: Otis Gospodnetic
To: java-user@lucene.apache.org
Sent: 7/16/2005 3:30 AM
Subject: Re: Searching for similar documents

We've got this in Lucene's contrib/:

$ ll contrib/similarity/src/java/org/apache/lucene/search/similar/*java

-rwxrwxr-x  1 otis otis 30431 Jul  9 09:20 MoreLikeThis.java*
-rwxrwxr-x  1 otis otis  3612 Mar 16 17:31 SimilarityQueries.java*

Otis

--- "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com> wrote:

> Hi, 
> I am trying to build a search utility that looks for 'similarities'
> between
> documents.
> In other words, for every document listed as a part of search result
> for a
> phrase, I want to be able to list documents that are similar to it
> (but not
> necessarily match the same search criterion). For example, if my
> search for
> "Tomcat" returned "Tomcat installation guide", I want to write a
> utility
> that looks for all similar installation guides that may or may not be
> related to Tomcat.
> 
> One approach I am thinking is to use term vectors. Algorithm: first
> extract
> the top X term vectors from the current document and create a Boolean
> query
> for those terms. Run it against contents of other documents (I will
> probably
> have to remove commonly used terms manually?). Resulting documents
> should be
> similar to the original one. 
> 
> I am wondering if something like this already exists or someone has a
> better
> algorithm/solution. Or am I headed off in the wrong direction with
> this
> algorithm? Your advice is highly appreciated. 
> 
> Thanks
> -Hareesh 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 16 14:52:28 2005
Return-Path: <java-user-return-15456-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 78610 invoked from network); 16 Jul 2005 14:52:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2005 14:52:28 -0000
Received: (qmail 88925 invoked by uid 500); 16 Jul 2005 14:52:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88043 invoked by uid 500); 16 Jul 2005 14:52:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88030 invoked by uid 99); 16 Jul 2005 14:52:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2005 07:52:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.36] (HELO web31103.mail.mud.yahoo.com) (68.142.200.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 16 Jul 2005 07:52:19 -0700
Received: (qmail 38435 invoked by uid 60001); 16 Jul 2005 14:52:20 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=RaTH5P/r9EfRx3ovALoBltsCxEwJij/++XMvQakyd26L9BK6sffVz1PnAeCTT4sQBWhReGCFgoftSRa0mSq7tf2AotkXpF/fdRtAZHEYr5j5pilAitnD8UbzfFeSNWWts/1TEGMD47Ll3aZ/Pj8Xg7zXOHE7x4FVyWI504b2NWU=  ;
Message-ID: <20050716145220.38433.qmail@web31103.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31103.mail.mud.yahoo.com via HTTP; Sat, 16 Jul 2005 07:52:20 PDT
Date: Sat, 16 Jul 2005 07:52:20 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: Searching for similar documents
To: java-user@lucene.apache.org
In-Reply-To: <E9C070038E79D411B73700D0B73EC81006DBA1F4@blackhole.fatwire.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

They should work with the version in SVN, as well as with 1.4.3.

Otis


--- "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com> wrote:

> Thanks Otis!
> 
> Are there Lucene 1.4 compatiable version of these classes?
> 
> Thanks very much
> -Hareesh
> 
> -----Original Message-----
> From: Otis Gospodnetic
> To: java-user@lucene.apache.org
> Sent: 7/16/2005 3:30 AM
> Subject: Re: Searching for similar documents
> 
> We've got this in Lucene's contrib/:
> 
> $ ll
> contrib/similarity/src/java/org/apache/lucene/search/similar/*java
> 
> -rwxrwxr-x  1 otis otis 30431 Jul  9 09:20 MoreLikeThis.java*
> -rwxrwxr-x  1 otis otis  3612 Mar 16 17:31 SimilarityQueries.java*
> 
> Otis
> 
> --- "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com> wrote:
> 
> > Hi, 
> > I am trying to build a search utility that looks for 'similarities'
> > between
> > documents.
> > In other words, for every document listed as a part of search
> result
> > for a
> > phrase, I want to be able to list documents that are similar to it
> > (but not
> > necessarily match the same search criterion). For example, if my
> > search for
> > "Tomcat" returned "Tomcat installation guide", I want to write a
> > utility
> > that looks for all similar installation guides that may or may not
> be
> > related to Tomcat.
> > 
> > One approach I am thinking is to use term vectors. Algorithm: first
> > extract
> > the top X term vectors from the current document and create a
> Boolean
> > query
> > for those terms. Run it against contents of other documents (I will
> > probably
> > have to remove commonly used terms manually?). Resulting documents
> > should be
> > similar to the original one. 
> > 
> > I am wondering if something like this already exists or someone has
> a
> > better
> > algorithm/solution. Or am I headed off in the wrong direction with
> > this
> > algorithm? Your advice is highly appreciated. 
> > 
> > Thanks
> > -Hareesh 
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 16 20:27:49 2005
Return-Path: <java-user-return-15457-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69888 invoked from network); 16 Jul 2005 20:27:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2005 20:27:49 -0000
Received: (qmail 94360 invoked by uid 500); 16 Jul 2005 20:27:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94332 invoked by uid 500); 16 Jul 2005 20:27:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94319 invoked by uid 99); 16 Jul 2005 20:27:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2005 13:27:43 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.207 as permitted sender)
Received: from [64.233.170.207] (HELO rproxy.gmail.com) (64.233.170.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2005 13:27:39 -0700
Received: by rproxy.gmail.com with SMTP id 40so423999rnz
        for <java-user@lucene.apache.org>; Sat, 16 Jul 2005 13:27:41 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=jzPTJdvlfJ9S7ATBG/92D2eTwVG59rU7yqfgRxPLXPnngup+juHijEu/HsN+zB3ki0fAGs28YuDowsp9QODdrLZBPhgS9yc5+vunDy3ql8KzkpnLYZBbbAepEpQUw0hZpkm0jYC0yVBumL9qHz9Mr+qgwOixVV4Hh+D8wPeyWSo=
Received: by 10.38.8.11 with SMTP id 11mr718195rnh;
        Sat, 16 Jul 2005 13:27:41 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Sat, 16 Jul 2005 13:27:41 -0700 (PDT)
Message-ID: <7ca1239105071613279cea621@mail.gmail.com>
Date: Sat, 16 Jul 2005 13:27:41 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene index integrity during a system crash
In-Reply-To: <20050716073245.71325.qmail@web31113.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <7ca1239105071517423d281639@mail.gmail.com>
	 <20050716073245.71325.qmail@web31113.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, Otis,

Thanks for your email. As this is very important for using Lucene in
our production system, I looked at the code to try to understand. Here
is my observation why the index won't be corrupted during a system
crash.

In the IndexWriter.java mergeSegments(...) method, there are two lines:
segmentInfos.write(directory);=09  // commit before deleting
deleteSegments(segmentsToDelete);//delete unused segments

The sgementInfos.write(...) writes the new segments file as
"segments.new", once the write is complete, it renames "segments.new"
to "segments".

I guess the rename operation is atomic as guaranteed by the operating
system. Otherwise, the "segments" file will be left in an inconsistent
state during the system crash.

It also appears to me that the "segments" file is the single point to
switch from old set of index segments to new ones. In case of a system
failure, the old "segments" file will be used anyway, so, no
corruption.

Is this understanding correct and thorough?

Thanks a lot,

Jian

On 7/16/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> The only corruption that I've seen mentioned on this list so far was
> the corruption of the segments file, and even that people have been
> able to manually edit with a hex editor.
>=20
> Otis
>=20
>=20
> --- jian chen <chenjian1227@gmail.com> wrote:
>=20
> > Hi,
> >
> > I know Lucene does not have transaction support at this stage.
> > However, I want to know what will happen if there is an operating
> > system crash during the indexing process, will the Lucene index got
> > corrupted?
> >
> > Thanks,
> >
> > Jian
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 16 21:59:20 2005
Return-Path: <java-user-return-15458-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86146 invoked from network); 16 Jul 2005 21:59:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2005 21:59:18 -0000
Received: (qmail 41125 invoked by uid 500); 16 Jul 2005 21:59:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41096 invoked by uid 500); 16 Jul 2005 21:59:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41082 invoked by uid 99); 16 Jul 2005 21:59:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2005 14:59:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of nikhil.goel@gmail.com designates 64.233.184.206 as permitted sender)
Received: from [64.233.184.206] (HELO wproxy.gmail.com) (64.233.184.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2005 14:59:10 -0700
Received: by wproxy.gmail.com with SMTP id 71so842221wra
        for <java-user@lucene.apache.org>; Sat, 16 Jul 2005 14:59:12 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=HYd2JWFXAF54xUGOPFalA8kBCbSgB6ekP/38eErrnyPDf9ZjuT7CgvgkYIGFzLSrKu7O3wi9Zzw3gG1mvuCVFsfaM/CRCLISPWUV1fCRBLoRye+6kNN47vaaWRG4Kasx3vivA503PHDZhjq02NF1uDiZ9Jglz6/AblN2/jMXiD4=
Received: by 10.54.51.9 with SMTP id y9mr1516803wry;
        Sat, 16 Jul 2005 14:58:07 -0700 (PDT)
Received: by 10.54.10.45 with HTTP; Sat, 16 Jul 2005 14:58:07 -0700 (PDT)
Message-ID: <7f0c2993050716145859fc014f@mail.gmail.com>
Date: Sat, 16 Jul 2005 16:58:07 -0500
From: Nikhil Goel <nikhil.goel@gmail.com>
Reply-To: Nikhil Goel <nikhil.goel@gmail.com>
To: java-user@lucene.apache.org, jian chen <chenjian1227@gmail.com>
Subject: Re: Lucene index integrity during a system crash
In-Reply-To: <7ca1239105071613279cea621@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <7ca1239105071517423d281639@mail.gmail.com>
	 <20050716073245.71325.qmail@web31113.mail.mud.yahoo.com>
	 <7ca1239105071613279cea621@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hey Jian,=20

Thats a very good thread to start and we faced the similar situation
in our production system where Lunce Index got actually corrupted coz
of non-atomiticity of wrting the index.

Your observation is correct and the only problem that could happen is
there will be zombie segments in your index since they dont get listed
in segments file before the system crash. But i am giving one warning
here, we have seen a case where somehow one segment file entry (.fdx
file) entry is there in "Segments" file but that .fdx file has a size
of 200 but in actual there was nothing in the file and hence we get
past EOF. After lots of inspection, we still couldnt figure out why
that happened. I tried to post that query to this newsgroup but
unfortunately i got no reply and it made us to stop indexing for a
while.

The approach we are following now is to write index in Database and
doing it in a transaction and hence we commit the transaction only
when the segments file and delete file gets updated otherwise we
rollback. This solution has been working well for us but its giving a
slow performance but better than losing the entire index.

I will be glad if someone can give better reasoning abt corruption. I
have seen lots of posts on this group abt it but no one really
responds to this important question.

Please let me know if you have something more to add to my explanation.
Thanks.
Nikhil


On 7/16/05, jian chen <chenjian1227@gmail.com> wrote:
> Hi, Otis,
>=20
> Thanks for your email. As this is very important for using Lucene in
> our production system, I looked at the code to try to understand. Here
> is my observation why the index won't be corrupted during a system
> crash.
>=20
> In the IndexWriter.java mergeSegments(...) method, there are two lines:
> segmentInfos.write(directory);    // commit before deleting
> deleteSegments(segmentsToDelete);//delete unused segments
>=20
> The sgementInfos.write(...) writes the new segments file as
> "segments.new", once the write is complete, it renames "segments.new"
> to "segments".
>=20
> I guess the rename operation is atomic as guaranteed by the operating
> system. Otherwise, the "segments" file will be left in an inconsistent
> state during the system crash.
>=20
> It also appears to me that the "segments" file is the single point to
> switch from old set of index segments to new ones. In case of a system
> failure, the old "segments" file will be used anyway, so, no
> corruption.
>=20
> Is this understanding correct and thorough?
>=20
> Thanks a lot,
>=20
> Jian
>=20
> On 7/16/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > The only corruption that I've seen mentioned on this list so far was
> > the corruption of the segments file, and even that people have been
> > able to manually edit with a hex editor.
> >
> > Otis
> >
> >
> > --- jian chen <chenjian1227@gmail.com> wrote:
> >
> > > Hi,
> > >
> > > I know Lucene does not have transaction support at this stage.
> > > However, I want to know what will happen if there is an operating
> > > system crash during the indexing process, will the Lucene index got
> > > corrupted?
> > >
> > > Thanks,
> > >
> > > Jian
> > >
> > > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 16 22:22:12 2005
Return-Path: <java-user-return-15459-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89414 invoked from network); 16 Jul 2005 22:22:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2005 22:22:11 -0000
Received: (qmail 55211 invoked by uid 500); 16 Jul 2005 22:22:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55188 invoked by uid 500); 16 Jul 2005 22:22:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55175 invoked by uid 99); 16 Jul 2005 22:22:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2005 15:22:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.38] (HELO web31105.mail.mud.yahoo.com) (68.142.200.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 16 Jul 2005 15:22:01 -0700
Received: (qmail 61392 invoked by uid 60001); 16 Jul 2005 22:22:02 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ehAqgYKGA8raWVBvKaz+u/N7z338jkxunXtGmXCxKJz1acTMqenVVMGkaYJRw46Vfbr6q7cbl9WaOwn6j8acDwvGiBeMGOCiOIuLbchIRjIALFCAPfK94V9VWkqglnzxploEjPQZc565GXHPz0fmL7udV0piZM+2NZ7EB0hCJVo=  ;
Message-ID: <20050716222202.61390.qmail@web31105.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31105.mail.mud.yahoo.com via HTTP; Sat, 16 Jul 2005 15:22:02 PDT
Date: Sat, 16 Jul 2005 15:22:02 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene index integrity during a system crash
To: java-user@lucene.apache.org, jian chen <chenjian1227@gmail.com>
In-Reply-To: <7ca1239105071613279cea621@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Jian,

Yes, I think what you describes is correct.  You may end up with some
"junk index segments" in the index directory, but as long as they are
not recorded in segments file, they are irrelevant.

Otis
P.S.
Did you ask you locking in Lucene the other day?


--- jian chen <chenjian1227@gmail.com> wrote:

> Hi, Otis,
> 
> Thanks for your email. As this is very important for using Lucene in
> our production system, I looked at the code to try to understand.
> Here
> is my observation why the index won't be corrupted during a system
> crash.
> 
> In the IndexWriter.java mergeSegments(...) method, there are two
> lines:
> segmentInfos.write(directory);	  // commit before deleting
> deleteSegments(segmentsToDelete);//delete unused segments
> 
> The sgementInfos.write(...) writes the new segments file as
> "segments.new", once the write is complete, it renames "segments.new"
> to "segments".
> 
> I guess the rename operation is atomic as guaranteed by the operating
> system. Otherwise, the "segments" file will be left in an
> inconsistent
> state during the system crash.
> 
> It also appears to me that the "segments" file is the single point to
> switch from old set of index segments to new ones. In case of a
> system
> failure, the old "segments" file will be used anyway, so, no
> corruption.
> 
> Is this understanding correct and thorough?
> 
> Thanks a lot,
> 
> Jian
> 
> On 7/16/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > The only corruption that I've seen mentioned on this list so far
> was
> > the corruption of the segments file, and even that people have been
> > able to manually edit with a hex editor.
> > 
> > Otis
> > 
> > 
> > --- jian chen <chenjian1227@gmail.com> wrote:
> > 
> > > Hi,
> > >
> > > I know Lucene does not have transaction support at this stage.
> > > However, I want to know what will happen if there is an operating
> > > system crash during the indexing process, will the Lucene index
> got
> > > corrupted?
> > >
> > > Thanks,
> > >
> > > Jian
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 16 22:59:58 2005
Return-Path: <java-user-return-15460-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94743 invoked from network); 16 Jul 2005 22:59:58 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 16 Jul 2005 22:59:58 -0000
Received: (qmail 72552 invoked by uid 500); 16 Jul 2005 22:59:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72531 invoked by uid 500); 16 Jul 2005 22:59:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72518 invoked by uid 99); 16 Jul 2005 22:59:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2005 15:59:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.230] (HELO web31111.mail.mud.yahoo.com) (68.142.200.230)
    by apache.org (qpsmtpd/0.29) with SMTP; Sat, 16 Jul 2005 15:59:49 -0700
Received: (qmail 18501 invoked by uid 60001); 16 Jul 2005 22:59:50 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=wSmkxefAvfJgORrCozDm6CdTv6WtDB26hvvjKDf2wSi4aK4Av5j5+FCR8LmnVc+vTntCLaZIpVoMfr/TItAGDeDLoMLpCuALVq0pTEiz0RhbDp2VBY8RvyjK9TQN1l1G6LdBeTdFtLcsb1KnN8pQA3jGOoh3HPczG/wzNFHYB5U=  ;
Message-ID: <20050716225950.18499.qmail@web31111.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31111.mail.mud.yahoo.com via HTTP; Sat, 16 Jul 2005 15:59:49 PDT
Date: Sat, 16 Jul 2005 15:59:49 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene and numerical fields search
To: java-user@lucene.apache.org, Ray Tsang <saturnism@gmail.com>
In-Reply-To: <fb9748c905071209392599a9b5@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Ray,

If you can share your BitSetQuery and QP modifications, feel free to
suggest them for inclusion to the core or contrib (by attaching them to
a new entry in Bugzilla).

Otis


--- Ray Tsang <saturnism@gmail.com> wrote:

> It seems TooManyClauses is a potential problem for any query that
> expands to a series of OR'ed boolean queries (PrefixQuery,
> WildcardQuery, RangeQuery...).  If the max was set too high, the
> inefficiency would make the search unsable.
> 
> I kind of worked around this by creating a BitSetQuery, and extended
> PrefixQuery and WildcardQuery so that they rewrite to BitSetQuery. 
> This at least made both queries usable on a large index (~40mil
> documents) with acceptable speed, without the use of filters.  I also
> extended QueryParser so it creates the new PrefixQuery and the new
> WildcardQuery instead of the ones provided by the distribution.
> 
> Ray
> 
> On 7/12/05, Paul.Illingworth@saaconsultants.com
> <Paul.Illingworth@saaconsultants.com> wrote:
> > 
> > 
> > 
> > 
> > 
> > Hi Mickal,
> > 
> > Take a look at the org.apache.lucene.search.DateFilter class that
> comes
> > with Lucene. This does date range filtering (I am using a modified
> version
> > of this class for filtering my date format). It should be
> relatively
> > strightforward to modify this for filtering numeric ranges. If your
> numbers
> > are stored as zero padded Strings then you should be able to leave
> the
> > bits() method as is otherwise you might have to put some String to
> number
> > conversion in there somewhere.
> > 
> > Regards
> > 
> > Paul I
> > 
> > 
> > 
> >              Rifflard Mickal
> >              <Mickael.Rifflard
> >              @atosorigin.com>                                      
>     To
> >                                       
> <java-user@lucene.apache.org>
> >              12/07/2005 09:31                                      
>     cc
> > 
> >                                                                   
> Subject
> >              Please respond to         RE: Lucene and numerical
> fields
> >              java-user@lucene.         search
> >                 apache.org
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > Hi Paul,
> > 
> > I have seen Filter feature and search how to use it to solve my
> problem
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 17 00:10:32 2005
Return-Path: <java-user-return-15461-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2322 invoked from network); 17 Jul 2005 00:10:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2005 00:10:32 -0000
Received: (qmail 6804 invoked by uid 500); 17 Jul 2005 00:10:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 6771 invoked by uid 500); 17 Jul 2005 00:10:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 6758 invoked by uid 99); 17 Jul 2005 00:10:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2005 17:10:27 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.193 as permitted sender)
Received: from [64.233.170.193] (HELO rproxy.gmail.com) (64.233.170.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sat, 16 Jul 2005 17:10:24 -0700
Received: by rproxy.gmail.com with SMTP id 40so440333rnz
        for <java-user@lucene.apache.org>; Sat, 16 Jul 2005 17:10:26 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=eZW6aIWJx9MEK1iwYxhtjk/RoAKJsJI75NhiJgZo5yPZEypgFsJleyAHf8rUaSE2+jwqqq0zCaJI8ALGEapwS+V4Sn8MjBQ79zamOKU8sEboeu/OHwHc1gGVW7KGeZ0lc+0fd95Tl1+lqPTcfMik8EwTPCUqRKhP85RCkEPZFYM=
Received: by 10.38.196.20 with SMTP id t20mr594857rnf;
        Sat, 16 Jul 2005 17:10:26 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Sat, 16 Jul 2005 17:10:26 -0700 (PDT)
Message-ID: <7ca12391050716171063840fea@mail.gmail.com>
Date: Sat, 16 Jul 2005 17:10:26 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene index integrity during a system crash
Cc: java-user@lucene.apache.org
In-Reply-To: <20050716222202.61390.qmail@web31105.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <7ca1239105071613279cea621@mail.gmail.com>
	 <20050716222202.61390.qmail@web31105.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Otis and Nikhil for your confirmation. I am more confident
about the Lucene index integrity.

Nikhil, I don't see th reason why there is a corrupted .fdx file.
Could it be caused by multi-threaded access to the index?

Otis, I don't remember I asked about locking questions the other day.
I think it should be another guy.

Thanks all,

Jian

On 7/16/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hi Jian,
>=20
> Yes, I think what you describes is correct.  You may end up with some
> "junk index segments" in the index directory, but as long as they are
> not recorded in segments file, they are irrelevant.
>=20
> Otis
> P.S.
> Did you ask you locking in Lucene the other day?
>=20
>=20
> --- jian chen <chenjian1227@gmail.com> wrote:
>=20
> > Hi, Otis,
> >
> > Thanks for your email. As this is very important for using Lucene in
> > our production system, I looked at the code to try to understand.
> > Here
> > is my observation why the index won't be corrupted during a system
> > crash.
> >
> > In the IndexWriter.java mergeSegments(...) method, there are two
> > lines:
> > segmentInfos.write(directory);          // commit before deleting
> > deleteSegments(segmentsToDelete);//delete unused segments
> >
> > The sgementInfos.write(...) writes the new segments file as
> > "segments.new", once the write is complete, it renames "segments.new"
> > to "segments".
> >
> > I guess the rename operation is atomic as guaranteed by the operating
> > system. Otherwise, the "segments" file will be left in an
> > inconsistent
> > state during the system crash.
> >
> > It also appears to me that the "segments" file is the single point to
> > switch from old set of index segments to new ones. In case of a
> > system
> > failure, the old "segments" file will be used anyway, so, no
> > corruption.
> >
> > Is this understanding correct and thorough?
> >
> > Thanks a lot,
> >
> > Jian
> >
> > On 7/16/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> > > The only corruption that I've seen mentioned on this list so far
> > was
> > > the corruption of the segments file, and even that people have been
> > > able to manually edit with a hex editor.
> > >
> > > Otis
> > >
> > >
> > > --- jian chen <chenjian1227@gmail.com> wrote:
> > >
> > > > Hi,
> > > >
> > > > I know Lucene does not have transaction support at this stage.
> > > > However, I want to know what will happen if there is an operating
> > > > system crash during the indexing process, will the Lucene index
> > got
> > > > corrupted?
> > > >
> > > > Thanks,
> > > >
> > > > Jian
> > > >
> > > >
> > ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > >
> > > >
> > >
> > >
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 17 14:13:26 2005
Return-Path: <java-user-return-15462-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50042 invoked from network); 17 Jul 2005 14:13:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 17 Jul 2005 14:13:26 -0000
Received: (qmail 16911 invoked by uid 500); 17 Jul 2005 14:13:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 16863 invoked by uid 500); 17 Jul 2005 14:13:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 16850 invoked by uid 99); 17 Jul 2005 14:13:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jul 2005 07:13:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.160.230.41] (HELO mout.perfora.net) (217.160.230.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jul 2005 07:13:16 -0700
Received: from [59.93.50.245] (helo=D2Q9FF1S)
	by mrelay.perfora.net with ESMTP (Nemesis),
	id 0MKz1m-1Du9tL1k14-0000KF; Sun, 17 Jul 2005 10:13:15 -0400
Message-ID: <002501c58ad8$a2fdacb0$ea01a8c0@dsil.danlawinc.com>
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: <java-user@lucene.apache.org>
References: <20050716222202.61390.qmail@web31105.mail.mud.yahoo.com>
Subject: Index locked exception while updating index
Date: Sun, 17 Jul 2005 19:35:43 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,
I am quite new to Lucene and I have problem with locking. I have a 
MessageDrivenBean that sends messages to my Lucene indexer whenever there is 
a  new database update. The indexer updates the index incrementally . Below 
is the code fragment in the indexer method that gets invoked by the MDB 
listener.

 public void addDocument(Document doc) {
     String indexLoc = luceneConfig.getIndexDir();
     IndexWriter writer = getIndexWriter(indexLoc, false);
     try{
          writer.addDocument(doc);
     } catch(IOException e) {
            logger.error("IOException occurred in addDocument()");
     } catch(Exception e) {
            logger.error("Exception occurred in addDocument()");
     } finally {
            try {
                writer.close();
           } catch(IOException e){
    }
}

The incremental update works fine twice and the third time it throws the 
following exception :

java.io.IOException: Index locked for write: Lock@C:\tmpIndex\write.lock
at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
at lucene.LuceneActions.getIndexWriter(LuceneActions.java:151)
at lucene.LuceneActions.addDocument(LuceneActions.java:43)
at index.IndexServiceImpl.addData(IndexServiceImpl.java:63)
at index.IndexServiceImpl.addToIndex(IndexServiceImpl.java:28)

The Index Writer is created every time and also closed in the finally block. 
Should I be doing something else?
Any help would be appreciated.
Thanks,
Harini 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 04:33:46 2005
Return-Path: <java-user-return-15463-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65369 invoked from network); 18 Jul 2005 04:33:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 04:33:45 -0000
Received: (qmail 33208 invoked by uid 500); 18 Jul 2005 04:33:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33154 invoked by uid 500); 18 Jul 2005 04:33:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33138 invoked by uid 99); 18 Jul 2005 04:33:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jul 2005 21:33:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.42] (HELO web31109.mail.mud.yahoo.com) (68.142.200.42)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 17 Jul 2005 21:33:34 -0700
Received: (qmail 2781 invoked by uid 60001); 18 Jul 2005 04:33:36 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=l9O/qH42kLvlgWWo9DWiNmKfZURYBoZ5WmCLXBcEOr+tNJBxsXAEAqKGtmUxfIvVp5vr447R4M33sMfQ5QQbUCN7FC0vlx1qJwypW6CN79FqOyfH9N9XVBUtTYde2i763kEAWhAuNJZ1++1V9gvMqaZt+xi75RK/qP+WVhlHIr4=  ;
Message-ID: <20050718043336.2779.qmail@web31109.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31109.mail.mud.yahoo.com via HTTP; Sun, 17 Jul 2005 21:33:36 PDT
Date: Sun, 17 Jul 2005 21:33:36 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index locked exception while updating index
To: java-user@lucene.apache.org
In-Reply-To: <002501c58ad8$a2fdacb0$ea01a8c0@dsil.danlawinc.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Harini,

You are catching IOException in the finally block, but you are not even
printing out the exception stack trace.  Perhaps you are not able to
close your IndexWriter for some reason.

Otis


--- Harini Raghavan <harini.raghavan@insideview.com> wrote:

> Hi All,
> I am quite new to Lucene and I have problem with locking. I have a 
> MessageDrivenBean that sends messages to my Lucene indexer whenever
> there is 
> a  new database update. The indexer updates the index incrementally .
> Below 
> is the code fragment in the indexer method that gets invoked by the
> MDB 
> listener.
> 
>  public void addDocument(Document doc) {
>      String indexLoc = luceneConfig.getIndexDir();
>      IndexWriter writer = getIndexWriter(indexLoc, false);
>      try{
>           writer.addDocument(doc);
>      } catch(IOException e) {
>             logger.error("IOException occurred in addDocument()");
>      } catch(Exception e) {
>             logger.error("Exception occurred in addDocument()");
>      } finally {
>             try {
>                 writer.close();
>            } catch(IOException e){
>     }
> }
> 
> The incremental update works fine twice and the third time it throws
> the 
> following exception :
> 
> java.io.IOException: Index locked for write:
> Lock@C:\tmpIndex\write.lock
> at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
> at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
> at lucene.LuceneActions.getIndexWriter(LuceneActions.java:151)
> at lucene.LuceneActions.addDocument(LuceneActions.java:43)
> at index.IndexServiceImpl.addData(IndexServiceImpl.java:63)
> at index.IndexServiceImpl.addToIndex(IndexServiceImpl.java:28)
> 
> The Index Writer is created every time and also closed in the finally
> block. 
> Should I be doing something else?
> Any help would be appreciated.
> Thanks,
> Harini 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 04:50:32 2005
Return-Path: <java-user-return-15464-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69723 invoked from network); 18 Jul 2005 04:50:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 04:50:32 -0000
Received: (qmail 45711 invoked by uid 500); 18 Jul 2005 04:50:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45489 invoked by uid 500); 18 Jul 2005 04:50:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45476 invoked by uid 99); 18 Jul 2005 04:50:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jul 2005 21:50:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.160.230.41] (HELO mout.perfora.net) (217.160.230.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jul 2005 21:50:19 -0700
Received: from ptil-66-8-in.primus-direct.net [61.12.8.66] (helo=D2Q9FF1S)
	by mrelay.perfora.net with ESMTP (Nemesis),
	id 0MKyxe-1DuNa30zPH-0002SU; Mon, 18 Jul 2005 00:50:15 -0400
Message-ID: <000501c58b53$297f1d30$ea01a8c0@dsil.danlawinc.com>
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: <otis_gospodnetic@yahoo.com>
Cc: <java-user@lucene.apache.org>
References: <20050718043336.2779.qmail@web31109.mail.mud.yahoo.com>
Subject: Re: Index locked exception while updating index
Date: Mon, 18 Jul 2005 10:12:39 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Otis,

I tried to print the stack but there was no exception. I think I found the 
cause for the exception. The addDocument was being called by different 
threads simultaneously and so when a second thread was trying to access the 
index, it was already locked. So I made the method addDocument synchronized 
and that fixed the problem.

Thanks for your quick response,
Harini


----- Original Message ----- 
From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
To: <java-user@lucene.apache.org>
Sent: Monday, July 18, 2005 10:03 AM
Subject: Re: Index locked exception while updating index


> Harini,
>
> You are catching IOException in the finally block, but you are not even
> printing out the exception stack trace.  Perhaps you are not able to
> close your IndexWriter for some reason.
>
> Otis
>
>
> --- Harini Raghavan <harini.raghavan@insideview.com> wrote:
>
>> Hi All,
>> I am quite new to Lucene and I have problem with locking. I have a
>> MessageDrivenBean that sends messages to my Lucene indexer whenever
>> there is
>> a  new database update. The indexer updates the index incrementally .
>> Below
>> is the code fragment in the indexer method that gets invoked by the
>> MDB
>> listener.
>>
>>  public void addDocument(Document doc) {
>>      String indexLoc = luceneConfig.getIndexDir();
>>      IndexWriter writer = getIndexWriter(indexLoc, false);
>>      try{
>>           writer.addDocument(doc);
>>      } catch(IOException e) {
>>             logger.error("IOException occurred in addDocument()");
>>      } catch(Exception e) {
>>             logger.error("Exception occurred in addDocument()");
>>      } finally {
>>             try {
>>                 writer.close();
>>            } catch(IOException e){
>>     }
>> }
>>
>> The incremental update works fine twice and the third time it throws
>> the
>> following exception :
>>
>> java.io.IOException: Index locked for write:
>> Lock@C:\tmpIndex\write.lock
>> at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
>> at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
>> at lucene.LuceneActions.getIndexWriter(LuceneActions.java:151)
>> at lucene.LuceneActions.addDocument(LuceneActions.java:43)
>> at index.IndexServiceImpl.addData(IndexServiceImpl.java:63)
>> at index.IndexServiceImpl.addToIndex(IndexServiceImpl.java:28)
>>
>> The Index Writer is created every time and also closed in the finally
>> block.
>> Should I be doing something else?
>> Any help would be appreciated.
>> Thanks,
>> Harini
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 05:22:03 2005
Return-Path: <java-user-return-15465-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77679 invoked from network); 18 Jul 2005 05:22:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 05:22:02 -0000
Received: (qmail 60796 invoked by uid 500); 18 Jul 2005 05:22:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59860 invoked by uid 500); 18 Jul 2005 05:21:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59834 invoked by uid 99); 18 Jul 2005 05:21:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 17 Jul 2005 22:21:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.41] (HELO web31108.mail.mud.yahoo.com) (68.142.200.41)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 17 Jul 2005 22:21:52 -0700
Received: (qmail 98594 invoked by uid 60001); 18 Jul 2005 05:21:54 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=lqTfcwJYYBzpAniTS7/wDSF7KTnfRLW3RxzUfSPrdEGRkL4Sx0bCEgumt/wrsxZYay7W7gJHM55PMmb4R49V/rLo4J3z9kPrcKhYPBcJkpnqvHKGeUXcIr4v/0rTj+djJsBXZenyShiWyN+gbgShajiCDFwK3oCovdAhw7C8948=  ;
Message-ID: <20050718052154.98592.qmail@web31108.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31108.mail.mud.yahoo.com via HTTP; Sun, 17 Jul 2005 22:21:54 PDT
Date: Sun, 17 Jul 2005 22:21:54 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene faster on JDK 1.5?
To: java-user@lucene.apache.org, Roy Rim <roy-lucene-user@xemaps.com>
In-Reply-To: <454006f5050708130478b0cb9e@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't recall the details, but NIO has been mentioned before, and you
may find something in Bugzilla and in mailing list archives.  From what
I recall, there was a NIO-based lock contribution that was never
integrated, and I think Doug made some experiments/tests with NIO-based
Directory implementation, but if I remember correctly, there was no
significant performance improvement.

Otis

--- roy-lucene-user@xemaps.com wrote:

> This might be a good time to ask another question. Are there any
> advantages 
> to lucene using the java.nio package?
>
> > Nothing significant, but I've been using 1.5 on
> Simpy.com<http://Simpy.com>(lots of
> > Lucene behind it) for over a year now, and I'm happy with it.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 07:44:24 2005
Return-Path: <java-user-return-15466-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21803 invoked from network); 18 Jul 2005 07:44:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 07:44:23 -0000
Received: (qmail 71446 invoked by uid 500); 18 Jul 2005 07:44:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71235 invoked by uid 500); 18 Jul 2005 07:44:15 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 71221 invoked by uid 99); 18 Jul 2005 07:44:15 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 00:44:15 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 00:44:10 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id A71D75B76C; Mon, 18 Jul 2005 00:44:07 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id A5E667F459
	for <java-user@lucene.apache.org>; Mon, 18 Jul 2005 00:44:07 -0700 (PDT)
Date: Mon, 18 Jul 2005 00:44:07 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Index locked exception while updating index
In-Reply-To: <000501c58b53$297f1d30$ea01a8c0@dsil.danlawinc.com>
Message-ID: <Pine.LNX.4.58.0507180030230.2147@hal.rescomp.berkeley.edu>
References: <20050718043336.2779.qmail@web31109.mail.mud.yahoo.com>
 <000501c58b53$297f1d30$ea01a8c0@dsil.danlawinc.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I freely admit that i wasn't paying much attention to the begining of this
thread, so maybe there is some subtlety i'm missing, but i don't
understand why your "addDocument" method needs to be synchronized.

I believe the reason you are getting the lock exception is because you are
opening a seperate IndexWriter for each thread correct? ... you should be
able to use one writer for many threads (a singlton writer), and the
concurency will be managed for you under the covers.  The only gotcha's to
watch out for are:

  1) don't let any of your updating threads close the writer
  2) have a seperate management thread that periodically closes the
     current writer to persist the additions, and opens a new one it it's
     palce for future updates.

...if you're using JDK1.5, take a look at
java.util.concurrent.atomic.AtomicReference, it should make managing a
singleton IndexWriter really easy.

: Date: Mon, 18 Jul 2005 10:12:39 +0530
: From: Harini Raghavan <harini.raghavan@insideview.com>
: Reply-To: java-user@lucene.apache.org
: To: otis_gospodnetic@yahoo.com
: Cc: java-user@lucene.apache.org
: Subject: Re: Index locked exception while updating index
:
: Hi Otis,
:
: I tried to print the stack but there was no exception. I think I found the
: cause for the exception. The addDocument was being called by different
: threads simultaneously and so when a second thread was trying to access the
: index, it was already locked. So I made the method addDocument synchronized
: and that fixed the problem.
:
: Thanks for your quick response,
: Harini
:
:
: ----- Original Message -----
: From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
: To: <java-user@lucene.apache.org>
: Sent: Monday, July 18, 2005 10:03 AM
: Subject: Re: Index locked exception while updating index
:
:
: > Harini,
: >
: > You are catching IOException in the finally block, but you are not even
: > printing out the exception stack trace.  Perhaps you are not able to
: > close your IndexWriter for some reason.
: >
: > Otis
: >
: >
: > --- Harini Raghavan <harini.raghavan@insideview.com> wrote:
: >
: >> Hi All,
: >> I am quite new to Lucene and I have problem with locking. I have a
: >> MessageDrivenBean that sends messages to my Lucene indexer whenever
: >> there is
: >> a  new database update. The indexer updates the index incrementally .
: >> Below
: >> is the code fragment in the indexer method that gets invoked by the
: >> MDB
: >> listener.
: >>
: >>  public void addDocument(Document doc) {
: >>      String indexLoc = luceneConfig.getIndexDir();
: >>      IndexWriter writer = getIndexWriter(indexLoc, false);
: >>      try{
: >>           writer.addDocument(doc);
: >>      } catch(IOException e) {
: >>             logger.error("IOException occurred in addDocument()");
: >>      } catch(Exception e) {
: >>             logger.error("Exception occurred in addDocument()");
: >>      } finally {
: >>             try {
: >>                 writer.close();
: >>            } catch(IOException e){
: >>     }
: >> }
: >>
: >> The incremental update works fine twice and the third time it throws
: >> the
: >> following exception :
: >>
: >> java.io.IOException: Index locked for write:
: >> Lock@C:\tmpIndex\write.lock
: >> at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
: >> at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
: >> at lucene.LuceneActions.getIndexWriter(LuceneActions.java:151)
: >> at lucene.LuceneActions.addDocument(LuceneActions.java:43)
: >> at index.IndexServiceImpl.addData(IndexServiceImpl.java:63)
: >> at index.IndexServiceImpl.addToIndex(IndexServiceImpl.java:28)
: >>
: >> The Index Writer is created every time and also closed in the finally
: >> block.
: >> Should I be doing something else?
: >> Any help would be appreciated.
: >> Thanks,
: >> Harini
: >>
: >>
: >> ---------------------------------------------------------------------
: >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: >> For additional commands, e-mail: java-user-help@lucene.apache.org
: >>
: >>
: >
: >
: > ---------------------------------------------------------------------
: > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: > For additional commands, e-mail: java-user-help@lucene.apache.org
: >
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 11:55:38 2005
Return-Path: <java-user-return-15467-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76811 invoked from network); 18 Jul 2005 11:55:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 11:55:37 -0000
Received: (qmail 58239 invoked by uid 500); 18 Jul 2005 11:55:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58155 invoked by uid 500); 18 Jul 2005 11:55:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58142 invoked by uid 99); 18 Jul 2005 11:55:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 04:55:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [194.159.73.194] (HELO post-24.mail.nl.demon.net) (194.159.73.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 04:55:25 -0700
Received: from [213.222.6.82] (port=58360 helo=msnl02.mediasurface.nl)
	by post-24.mail.nl.demon.net with esmtp (Exim 4.43)
	id 1DuUDW-0005Bh-48
	for java-user@lucene.apache.org; Mon, 18 Jul 2005 11:55:26 +0000
Received: from msnl10.int.mediasurface.nl (msnl10 [192.168.10.12])
	by msnl02.mediasurface.nl (Postfix) with ESMTP id EE302455B3
	for <java-user@lucene.apache.org>; Mon, 18 Jul 2005 13:55:24 +0200 (MET DST)
Received: from neptune.int.mediasurface.com ([10.0.5.71]) by msnl10.int.mediasurface.nl with Microsoft SMTPSVC(6.0.3790.1830);
	 Mon, 18 Jul 2005 13:55:25 +0200
Content-class: urn:content-classes:message
Subject: RE: Best Practices for Distributing Lucene Indexing and Searching
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 18 Jul 2005 12:55:21 +0100
Message-ID: <BE3E7BC7F7553B4A9362D4192ECD308A9FC18B@neptune.int.mediasurface.com>
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Best Practices for Distributing Lucene Indexing and Searching
Thread-Index: AcWIwIACvgx3Ce6gRpSS9DyZHLVDqACzmmdQ
From: "Peter Gelderbloem" <Peter.Gelderbloem@Mediasurface.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 18 Jul 2005 11:55:25.0811 (UTC) FILETIME=[95B3F430:01C58B8F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am thinking of having a cluster of one indexer and a few searchers 1
to n.
The indexer will consist of a number of stages as defined in SEDA. I
must still do this decomposition.  the resulting index will be published
via message q to the searchers that will stop doing searches long enough
to update the local index.
What is the purpose behind the nutch mapreduce component?
Would it be useful for me to look at it in order to better decompose the
indexer component?
Cheers,
Peter Gelderbloem=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 12:00:15 2005
Return-Path: <java-user-return-15468-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80799 invoked from network); 18 Jul 2005 12:00:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 12:00:14 -0000
Received: (qmail 68239 invoked by uid 500); 18 Jul 2005 12:00:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68219 invoked by uid 500); 18 Jul 2005 12:00:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68206 invoked by uid 99); 18 Jul 2005 12:00:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 05:00:06 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=HTML_MESSAGE,SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 18 Jul 2005 05:00:01 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IJTOXL00.24E for <java-user@lucene.apache.org>; Mon, 18
          Jul 2005 17:50:09 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: "LUCENE" <java-user@lucene.apache.org>
Subject: BOOLEAN OPERATOR HOWTO
Date: Mon, 18 Jul 2005 17:42:28 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKGEGNCEAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: multipart/related;
	boundary="----=_NextPart_000_0000_01C58BC0.1147FF80"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0000_01C58BC0.1147FF80
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_0001_01C58BC0.1147FF80"


------=_NextPart_001_0001_01C58BC0.1147FF80
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit



Hi

Lucene

Apologies......................

I have 2 Questions.

1) The Search Criteria  src  requires to automatically fill   "  "  between
Search words with a Boolean Operator   "  AND ".


2) The Search Criteria  src  requires to automatically recognise the
existing  Boolean Query  ' AND , + '  present and append the same
     with  out any manupulations.

Ex : -
Search Word  =

'Lucene in Action Erik hatcher and  Otis  + Gospodnetic '   =   lucene AND
action AND Eric  AND hatcher AND otis + gospodnetic .


How to Achieve this , Is there any mechanism built into Lucene to handle
such situations.



Thx in Advance.


WITH WARM REGARDS
HAVE A NICE DAY
[ N.S.KARTHIK]


------=_NextPart_001_0001_01C58BC0.1147FF80
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<STYLE><!-- body, P.msoNormal, LI.msoNormal, PRE, BLOCKQUOTE, a, MENU, =
dd, UL, DT { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } dir, ADDRESS, h1, h2, h3, h4, h5, =
h6, HR { font-family: "Arial"; font-size: 12pt; margin-top: 0em; =
margin-bottom: 0em; color: #000000; } --></STYLE>

<META content=3D"MSHTML 6.00.2600.0" name=3DGENERATOR></HEAD>
<BODY id=3DridBody>
<P><STRONG><FONT face=3DVerdana size=3D2></FONT></STRONG>&nbsp;</P>
<P><SPAN class=3D578365411-18072005><FONT face=3DVerdana=20
size=3D2><STRONG>Hi</STRONG></FONT></SPAN></P>
<P><SPAN class=3D578365411-18072005><STRONG><FONT face=3DVerdana=20
size=3D2>Lucene</FONT></STRONG></SPAN></P>
<P><SPAN class=3D578365411-18072005><STRONG><FONT face=3DVerdana=20
size=3D2>Apologies......................</FONT></STRONG></SPAN></P>
<P><SPAN class=3D578365411-18072005><STRONG><FONT face=3DVerdana =
size=3D2>I have 2=20
Questions.</FONT></STRONG></SPAN></P>
<P><SPAN class=3D578365411-18072005><STRONG><FONT face=3DVerdana =
size=3D2>1)=20
</FONT></STRONG></SPAN><SPAN class=3D578365411-18072005><FONT =
face=3DVerdana=20
size=3D2><STRONG>The Search Criteria&nbsp; src&nbsp; requires to =
automatically=20
fill&nbsp;&nbsp; " &nbsp;"&nbsp; between&nbsp; Search words with a =
Boolean=20
Operator&nbsp;&nbsp; "&nbsp; AND ".</STRONG></FONT></SPAN></P>
<DIV><SPAN class=3D578365411-18072005></SPAN><SPAN=20
class=3D578365411-18072005><STRONG><FONT face=3DVerdana=20
size=3D2></FONT></STRONG></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D578365411-18072005><STRONG><FONT face=3DVerdana =
size=3D2>2)<SPAN=20
class=3D578365411-18072005><STRONG><FONT face=3DVerdana size=3D2>=20
</FONT></STRONG></SPAN><SPAN class=3D578365411-18072005><FONT =
face=3DVerdana=20
size=3D2><STRONG>The Search Criteria&nbsp; src&nbsp; requires to =
automatically=20
recognise the existing&nbsp; Boolean Query&nbsp; ' AND , + '&nbsp; =
present and=20
append the same </STRONG></FONT></SPAN></FONT></STRONG></SPAN></DIV>
<DIV><SPAN class=3D578365411-18072005><STRONG><FONT face=3DVerdana =
size=3D2><SPAN=20
class=3D578365411-18072005><FONT face=3DVerdana=20
size=3D2><STRONG>&nbsp;&nbsp;&nbsp;&nbsp;=20
with&nbsp;</STRONG></FONT></SPAN></FONT></STRONG></SPAN><SPAN=20
class=3D578365411-18072005><STRONG><FONT face=3DVerdana size=3D2><SPAN=20
class=3D578365411-18072005><FONT face=3DVerdana size=3D2><STRONG> out =
any=20
manupulations.</STRONG></FONT></SPAN></FONT></STRONG></SPAN></DIV><STRONG=
><FONT=20
face=3DVerdana size=3D2>
<DIV><SPAN class=3D578365411-18072005><FONT face=3DVerdana=20
size=3D2><STRONG></STRONG></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D578365411-18072005><FONT face=3DVerdana =
size=3D2><STRONG>Ex : -=20
</STRONG></FONT></SPAN></DIV>
<DIV><SPAN class=3D578365411-18072005><FONT face=3DVerdana =
size=3D2><STRONG>Search=20
Word&nbsp; =3D&nbsp;&nbsp;<!--StartFragment --> =
</STRONG></FONT></SPAN></DIV>
<DIV><SPAN class=3D578365411-18072005><FONT face=3DVerdana=20
size=3D2><STRONG></STRONG></FONT></SPAN>&nbsp;</DIV>
<DIV><SPAN class=3D578365411-18072005><FONT face=3DVerdana=20
size=3D2><STRONG>'<TD></TD><TD valign=3D"top">Lucene in Action Erik =
hatcher and=20
&nbsp;Otis&nbsp; + Gospodnetic</TD> '&nbsp;&nbsp; =3D&nbsp;&nbsp;=20
</STRONG></FONT></SPAN><SPAN class=3D578365411-18072005><FONT =
face=3DVerdana=20
size=3D2><STRONG>lucene&nbsp;AND&nbsp;action&nbsp;AND&nbsp;Eric&nbsp; =
AND=20
hatcher&nbsp;AND&nbsp;otis&nbsp;+&nbsp;gospodnetic</TD>=20
.</STRONG></FONT></SPAN></DIV></FONT></STRONG>
<P><STRONG><FONT face=3DVerdana size=3D2></FONT></STRONG>&nbsp;</P>
<P><SPAN class=3D578365411-18072005><FONT face=3DVerdana =
size=3D2><STRONG>How to=20
Achieve this , Is there any mechanism built into Lucene to handle such=20
situations.</STRONG></FONT></SPAN></P>
<P>&nbsp;</P>
<P><SPAN class=3D578365411-18072005><FONT face=3DVerdana =
size=3D2><STRONG>Thx in=20
Advance.</STRONG></FONT></SPAN></P>
<P><IMG height=3D85 src=3D"cid:578365411@18072005-07de" =
width=3D85><BR><B><FONT=20
face=3DVerdana color=3D#939ff7 size=3D3>WITH WARM REGARDS <BR>HAVE A =
NICE DAY <BR>[=20
N.S.KARTHIK]</FONT></B> </P></BODY></HTML>

------=_NextPart_001_0001_01C58BC0.1147FF80--

------=_NextPart_000_0000_01C58BC0.1147FF80--


From java-user-return-15469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 12:18:32 2005
Return-Path: <java-user-return-15469-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89486 invoked from network); 18 Jul 2005 12:18:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 12:18:31 -0000
Received: (qmail 93233 invoked by uid 500); 18 Jul 2005 12:18:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93214 invoked by uid 500); 18 Jul 2005 12:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93201 invoked by uid 99); 18 Jul 2005 12:18:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 05:18:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.160.230.40] (HELO mout.perfora.net) (217.160.230.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 05:18:20 -0700
Received: from ptil-66-8-in.primus-direct.net [61.12.8.66] (helo=D2Q9FF1S)
	by mrelay.perfora.net with ESMTP (Nemesis),
	id 0MKyxe-1DuUZg1tYP-0006ID; Mon, 18 Jul 2005 08:18:20 -0400
Message-ID: <006d01c58b91$c00132f0$ea01a8c0@dsil.danlawinc.com>
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: <java-user@lucene.apache.org>
References: <20050718043336.2779.qmail@web31109.mail.mud.yahoo.com> <000501c58b53$297f1d30$ea01a8c0@dsil.danlawinc.com> <Pine.LNX.4.58.0507180030230.2147@hal.rescomp.berkeley.edu>
Subject: Re: Index locked exception while updating index
Date: Mon, 18 Jul 2005 17:40:50 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=original
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris,

The reason I am creating the IndexWriter for every call to addDocument is 
because the update to index gets triggered by JMS events, so I will not know 
at what point to close the IndexWriter.
Your suggestion to have a separate management thread to close the writer 
sounds good, I will try that out.

Thanks,
Harini

----- Original Message ----- 
From: "Chris Hostetter" <hossman_lucene@fucit.org>
To: <java-user@lucene.apache.org>
Sent: Monday, July 18, 2005 1:14 PM
Subject: Re: Index locked exception while updating index


>
> I freely admit that i wasn't paying much attention to the begining of this
> thread, so maybe there is some subtlety i'm missing, but i don't
> understand why your "addDocument" method needs to be synchronized.
>
> I believe the reason you are getting the lock exception is because you are
> opening a seperate IndexWriter for each thread correct? ... you should be
> able to use one writer for many threads (a singlton writer), and the
> concurency will be managed for you under the covers.  The only gotcha's to
> watch out for are:
>
>  1) don't let any of your updating threads close the writer
>  2) have a seperate management thread that periodically closes the
>     current writer to persist the additions, and opens a new one it it's
>     palce for future updates.
>
> ...if you're using JDK1.5, take a look at
> java.util.concurrent.atomic.AtomicReference, it should make managing a
> singleton IndexWriter really easy.
>
> : Date: Mon, 18 Jul 2005 10:12:39 +0530
> : From: Harini Raghavan <harini.raghavan@insideview.com>
> : Reply-To: java-user@lucene.apache.org
> : To: otis_gospodnetic@yahoo.com
> : Cc: java-user@lucene.apache.org
> : Subject: Re: Index locked exception while updating index
> :
> : Hi Otis,
> :
> : I tried to print the stack but there was no exception. I think I found 
> the
> : cause for the exception. The addDocument was being called by different
> : threads simultaneously and so when a second thread was trying to access 
> the
> : index, it was already locked. So I made the method addDocument 
> synchronized
> : and that fixed the problem.
> :
> : Thanks for your quick response,
> : Harini
> :
> :
> : ----- Original Message -----
> : From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
> : To: <java-user@lucene.apache.org>
> : Sent: Monday, July 18, 2005 10:03 AM
> : Subject: Re: Index locked exception while updating index
> :
> :
> : > Harini,
> : >
> : > You are catching IOException in the finally block, but you are not 
> even
> : > printing out the exception stack trace.  Perhaps you are not able to
> : > close your IndexWriter for some reason.
> : >
> : > Otis
> : >
> : >
> : > --- Harini Raghavan <harini.raghavan@insideview.com> wrote:
> : >
> : >> Hi All,
> : >> I am quite new to Lucene and I have problem with locking. I have a
> : >> MessageDrivenBean that sends messages to my Lucene indexer whenever
> : >> there is
> : >> a  new database update. The indexer updates the index incrementally .
> : >> Below
> : >> is the code fragment in the indexer method that gets invoked by the
> : >> MDB
> : >> listener.
> : >>
> : >>  public void addDocument(Document doc) {
> : >>      String indexLoc = luceneConfig.getIndexDir();
> : >>      IndexWriter writer = getIndexWriter(indexLoc, false);
> : >>      try{
> : >>           writer.addDocument(doc);
> : >>      } catch(IOException e) {
> : >>             logger.error("IOException occurred in addDocument()");
> : >>      } catch(Exception e) {
> : >>             logger.error("Exception occurred in addDocument()");
> : >>      } finally {
> : >>             try {
> : >>                 writer.close();
> : >>            } catch(IOException e){
> : >>     }
> : >> }
> : >>
> : >> The incremental update works fine twice and the third time it throws
> : >> the
> : >> following exception :
> : >>
> : >> java.io.IOException: Index locked for write:
> : >> Lock@C:\tmpIndex\write.lock
> : >> at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
> : >> at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
> : >> at lucene.LuceneActions.getIndexWriter(LuceneActions.java:151)
> : >> at lucene.LuceneActions.addDocument(LuceneActions.java:43)
> : >> at index.IndexServiceImpl.addData(IndexServiceImpl.java:63)
> : >> at index.IndexServiceImpl.addToIndex(IndexServiceImpl.java:28)
> : >>
> : >> The Index Writer is created every time and also closed in the finally
> : >> block.
> : >> Should I be doing something else?
> : >> Any help would be appreciated.
> : >> Thanks,
> : >> Harini
> : >>
> : >>
> : >> ---------------------------------------------------------------------
> : >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : >> For additional commands, e-mail: java-user-help@lucene.apache.org
> : >>
> : >>
> : >
> : >
> : > ---------------------------------------------------------------------
> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : > For additional commands, e-mail: java-user-help@lucene.apache.org
> : >
> :
> :
> : ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
>
>
>
> -Hoss
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 13:02:20 2005
Return-Path: <java-user-return-15470-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9072 invoked from network); 18 Jul 2005 13:02:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 13:02:19 -0000
Received: (qmail 52356 invoked by uid 500); 18 Jul 2005 13:02:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52335 invoked by uid 500); 18 Jul 2005 13:02:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52322 invoked by uid 99); 18 Jul 2005 13:02:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 06:02:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.176.57.91] (HELO mail.bayt.net) (216.176.57.91)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 06:02:06 -0700
Received: from [192.168.1.24] [213.132.40.2] by mail.bayt.net with ESMTP
  (SMTPD32-8.15) id AB1259D007A; Mon, 18 Jul 2005 09:13:54 -0400
Message-ID: <42DBA84E.80005@bayt.net>
Date: Mon, 18 Jul 2005 17:02:06 +0400
From: Nader Henein <nsh@bayt.net>
Reply-To:  nsh@bayt.net
Organization: Bayt.com
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: BOOLEAN OPERATOR HOWTO
References: <OBELINLGKPEMCIEIJJNKGEGNCEAA.karthik@controlnet.co.in>
In-Reply-To: <OBELINLGKPEMCIEIJJNKGEGNCEAA.karthik@controlnet.co.in>
Content-Type: text/plain; charset=UTF-8; format=flowed
Content-Transfer-Encoding: 7bit
X-Declude-Sender: nsh@bayt.net [192.168.1.24]
X-Declude-Spoolname: DAB11059D007A150A.SMD
X-Declude-Note: Scanned by Declude 2.0.6.16 (http://www.declude.com/x-note.htm) for spam.
X-Declude-Scan: Score [0] at 09:13:55 on 18 Jul 2005
X-Declude-Tests: Whitelisted
X-Country-Chain: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Sounds like straight forward string manipulation, just (a) tokenize your string into a collection, and then (b) manipulate the collection to reach your desired stream, then (c) join it back into a string. Oh and once again Erik is spelled consistently with a 'k' not a 'c', you got the first one right then, everything went to hell :-)

Nader



Karthik N S wrote:

> ** 
>
> *Hi*
>
> *Lucene*
>
> *Apologies......................*
>
> *I have 2 Questions.*
>
> *1) **The Search Criteria  src  requires to automatically fill   "  "  
> between  Search words with a Boolean Operator   "  AND ".*
>
> ** 
> *2)* **The Search Criteria  src  requires to automatically recognise 
> the existing  Boolean Query  ' AND , + '  present and append the same **
> **     with **** out any manupulations.**
> *
> ** 
> *Ex : - *
> *Search Word  =   *
> ** 
> *'Lucene in Action Erik hatcher and  Otis  + Gospodnetic '   =   
> **lucene AND action AND Eric  AND hatcher AND otis + gospodnetic .*
> *
>
> ** 
>
> *How to Achieve this , Is there any mechanism built into Lucene to 
> handle such situations.*
>
>  
>
> *Thx in Advance.*
>
>
> *WITH WARM REGARDS
> HAVE A NICE DAY
> [ N.S.KARTHIK]*
>

-- 

Nader S. Henein
Senior Applications Architect

Bayt.com


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 13:11:43 2005
Return-Path: <java-user-return-15471-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12219 invoked from network); 18 Jul 2005 13:11:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 13:11:41 -0000
Received: (qmail 63477 invoked by uid 500); 18 Jul 2005 13:11:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63447 invoked by uid 500); 18 Jul 2005 13:11:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63428 invoked by uid 99); 18 Jul 2005 13:11:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 06:11:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 06:11:26 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id B4E4D13E2005; Mon, 18 Jul 2005 09:11:21 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 2079413E2005
	for <java-user@lucene.apache.org>; Mon, 18 Jul 2005 09:09:25 -0400 (EDT)
In-Reply-To: <OBELINLGKPEMCIEIJJNKGEGNCEAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKGEGNCEAA.karthik@controlnet.co.in>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <A6195159-2779-4825-AEE4-D55CC190E8C3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: BOOLEAN OPERATOR HOWTO
Date: Mon, 18 Jul 2005 09:09:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.8 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 18, 2005, at 8:12 AM, Karthik N S wrote:
> I have 2 Questions.
But there were no question marks!   I don't understand your questions  
at all, sorry, but I'll see if I can decipher it somewhat....

> 1) The Search Criteria  src  requires to automatically fill   "  "   
> between  Search words with a Boolean Operator   "  AND ".

You mean to achieve AND'd clauses?   By default, OR is the operator,  
and AND must be explicit.  You can construct a QueryParser instance  
and set the default operator to AND, though, and then OR must be  
explicit.

>  2) The Search Criteria  src  requires to automatically recognise  
> the existing  Boolean Query  ' AND , + '  present and append the same
>      with  out any manupulations.
>
> Ex : -
> Search Word  =
>
> 'Lucene in Action Erik hatcher and  Otis  + Gospodnetic '   =    
> lucene AND action AND Eric  AND hatcher AND otis + gospodnetic .
>
>
> How to Achieve this , Is there any mechanism built into Lucene to  
> handle such situations.

Yes, this sounds like the default operator is what you're looking  
for.  Since you use "Lucene in Action" as an example, flip to page 94  
for more discussion on this, and then flip to the other pages  
mentioned here:

     http://www.lucenebook.com/search?query=default+operator

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 18:40:33 2005
Return-Path: <java-user-return-15472-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98933 invoked from network); 18 Jul 2005 18:40:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 18:40:32 -0000
Received: (qmail 73593 invoked by uid 500); 18 Jul 2005 18:40:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73571 invoked by uid 500); 18 Jul 2005 18:40:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73558 invoked by uid 99); 18 Jul 2005 18:40:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 11:40:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [199.4.160.64] (HELO pb-exchcon2.scansoft.com) (199.4.160.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 11:40:21 -0700
Received: by pb-exchcon2.pb.scansoft.com with Internet Mail Service (5.5.2658.27)
	id <PFLKZXJD>; Mon, 18 Jul 2005 14:40:21 -0400
Message-ID: <FBA9F803D33470489B9B4676A6B09F0B01624B29@mt-exch1.montreal.speechworks.com>
From: "Robichaud, Jean-Philippe" <Jean-Philippe.Robichaud@scansoft.com>
To: java-user@lucene.apache.org
Subject: Writting a custom query/indexSearcher
Date: Mon, 18 Jul 2005 14:24:18 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2658.27)
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C58BC5.E8CD9032"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C58BC5.E8CD9032
Content-Type: text/plain

Hi everyone.

 

I need a special query type that looks like a phrase query but with special
logic inside (like allowing inversions of certain terms only and not of
others, special score manipulation on certain 'events', ...)  I wonder what
approach I should take?  How does someone build a custom query ?  With
scorers and everything

 

Any help appreciated !!

 

Jp


------_=_NextPart_001_01C58BC5.E8CD9032--

From java-user-return-15473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 20:32:45 2005
Return-Path: <java-user-return-15473-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38021 invoked from network); 18 Jul 2005 20:32:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 20:32:43 -0000
Received: (qmail 45033 invoked by uid 500); 18 Jul 2005 20:32:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45007 invoked by uid 500); 18 Jul 2005 20:32:37 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44994 invoked by uid 99); 18 Jul 2005 20:32:37 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 13:32:37 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [162.10.250.1] (HELO ussd300.anacomp.com) (162.10.250.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 13:32:32 -0700
Received: from usrd104.corp.anacomp.com (usrd104.anacomp.com [162.10.170.234])
	by ussd300.anacomp.com (Postfix) with ESMTP id 6437457268
	for <java-user@lucene.apache.org>; Mon, 18 Jul 2005 13:32:34 -0700 (PDT)
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
Subject: Static index on CD, how much forward compatible is the index 
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Date: Mon, 18 Jul 2005 16:32:33 -0400
Message-ID: <66911C8E1F2DA24EB29DE289297A135ED5DDD6@usrd104>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Static index on CD, how much forward compatible is the index 
Thread-Index: AcWJdF9i7F8qS5ZrS/CoK3t3Ycs0PwCYsEvQ
From: "Tardif, Sebastien" <STARDIF@anacomp.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis,

Let say I have a static index on CD, and my customer will be using this
CD for the next 10 years. I will also probably fix bug in the
application that use the CD and probably want to upgrade Lucene library
at some point. How much backward compatible is Lucene with old index
when Lucene release new version?

Does Lucene has any "good" history on index backward compatibility?



-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Friday, July 15, 2005 3:34 PM
To: java-user@lucene.apache.org
Subject: Re: Runtime full text search like in Microsoft Windows Search

As somebody already said, you can have an in-memory index with
RAMDirectory.  You can also pre-build a Lucene index on that CD - CD is
"static", you can't add/remove/change files on it, so you can build an
index and burn it onto the CD at the same time when you put the Word
files on it.

As for getting the indexable text out of Word and other documents, look
at the code for the Lucene book - http://lucenebook.com - there is a
little framework there, that parses and indexes a number of common file
types.

Otis


--- "Tardif, Sebastien" <STARDIF@anacomp.com> wrote:

> How can you use Lucene like the very limited but fast search that=20
> Microsoft Windows Search provide?
> =20
> The use case is that the users have a CD with lot of files. I provide=20
> them a nice user interface. They have the option to generate the full=20
> text search index but they should also be able to search without an=20
> index generated. I know that will be slow, but Microsoft Windows=20
> Search is still able to search 500 MB in less than 30 seconds for=20
> simpler matching.
> =20
> How can I use Lucene for this simpler, not existing index, search?
> =20
> Or should I have to hook to operating system specific API like Win32=20
> on Windows?
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 21:25:54 2005
Return-Path: <java-user-return-15474-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58654 invoked from network); 18 Jul 2005 21:25:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 21:25:53 -0000
Received: (qmail 28180 invoked by uid 500); 18 Jul 2005 21:25:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 28019 invoked by uid 500); 18 Jul 2005 21:25:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 28006 invoked by uid 99); 18 Jul 2005 21:25:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 14:25:46 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_40_50,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.84.113.130] (HELO mail.dessci.com) (65.84.113.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 14:25:40 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C58BDF.80006BAA"
Subject: n-gram indexing
Date: Mon, 18 Jul 2005 14:27:28 -0700
Message-ID: <D1EFB337111B674B8F1BE155B01C6DD6355760@franklin.corp.dessci>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: n-gram indexing
Thread-Index: AcWL33+UM5BdCWT+RjG30YsS/Ba5NA==
From: "Rajesh Munavalli" <rajeshm@dessci.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C58BDF.80006BAA
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable

At what point do I add n-grams? Does the order in which I add n-grams
affect exact phrase queries later? My questions are

(1) Should I add all the 1-grams followed by 2-grams followed by
3-grams..etc sentence by sentence OR

(2) Add all the 1 grams of entire document first before starting 2-grams
for the entire document?

What is the general accepted notion of adding n-grams of a document?

thanks,

Rajesh


------_=_NextPart_001_01C58BDF.80006BAA--

From java-user-return-15475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 21:36:12 2005
Return-Path: <java-user-return-15475-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63976 invoked from network); 18 Jul 2005 21:36:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 21:36:11 -0000
Received: (qmail 36786 invoked by uid 500); 18 Jul 2005 21:36:04 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36765 invoked by uid 500); 18 Jul 2005 21:36:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36752 invoked by uid 99); 18 Jul 2005 21:36:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 14:36:03 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 14:35:59 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id D6E4D5B7AA; Mon, 18 Jul 2005 14:36:00 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id D422B7F459
	for <java-user@lucene.apache.org>; Mon, 18 Jul 2005 14:36:00 -0700 (PDT)
Date: Mon, 18 Jul 2005 14:36:00 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Static index on CD, how much forward compatible is the index 
In-Reply-To: <66911C8E1F2DA24EB29DE289297A135ED5DDD6@usrd104>
Message-ID: <Pine.LNX.4.58.0507181434060.18433@hal.rescomp.berkeley.edu>
References: <66911C8E1F2DA24EB29DE289297A135ED5DDD6@usrd104>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Why not put the application on the CD as well? .. or at a minimum, the
lucene JAR.  That way you never have to worry about the possibility of it
changing.

: Date: Mon, 18 Jul 2005 16:32:33 -0400
: From: "Tardif, Sebastien" <STARDIF@anacomp.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Static index on CD, how much forward compatible is the index
:
: Otis,
:
: Let say I have a static index on CD, and my customer will be using this
: CD for the next 10 years. I will also probably fix bug in the
: application that use the CD and probably want to upgrade Lucene library
: at some point. How much backward compatible is Lucene with old index
: when Lucene release new version?
:
: Does Lucene has any "good" history on index backward compatibility?
:
:
:
: -----Original Message-----
: From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
: Sent: Friday, July 15, 2005 3:34 PM
: To: java-user@lucene.apache.org
: Subject: Re: Runtime full text search like in Microsoft Windows Search
:
: As somebody already said, you can have an in-memory index with
: RAMDirectory.  You can also pre-build a Lucene index on that CD - CD is
: "static", you can't add/remove/change files on it, so you can build an
: index and burn it onto the CD at the same time when you put the Word
: files on it.
:
: As for getting the indexable text out of Word and other documents, look
: at the code for the Lucene book - http://lucenebook.com - there is a
: little framework there, that parses and indexes a number of common file
: types.
:
: Otis
:
:
: --- "Tardif, Sebastien" <STARDIF@anacomp.com> wrote:
:
: > How can you use Lucene like the very limited but fast search that
: > Microsoft Windows Search provide?
: >
: > The use case is that the users have a CD with lot of files. I provide
: > them a nice user interface. They have the option to generate the full
: > text search index but they should also be able to search without an
: > index generated. I know that will be slow, but Microsoft Windows
: > Search is still able to search 500 MB in less than 30 seconds for
: > simpler matching.
: >
: > How can I use Lucene for this simpler, not existing index, search?
: >
: > Or should I have to hook to operating system specific API like Win32
: > on Windows?
: >
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 21:47:21 2005
Return-Path: <java-user-return-15476-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 70996 invoked from network); 18 Jul 2005 21:47:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 21:47:20 -0000
Received: (qmail 53132 invoked by uid 500); 18 Jul 2005 21:47:16 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53107 invoked by uid 500); 18 Jul 2005 21:47:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53094 invoked by uid 99); 18 Jul 2005 21:47:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 14:47:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.35] (HELO web31102.mail.mud.yahoo.com) (68.142.200.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 18 Jul 2005 14:47:11 -0700
Received: (qmail 42280 invoked by uid 60001); 18 Jul 2005 21:47:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=WywGa9ABHbdSjeXYrr05RlCaEqnM8E5HXEyDkfkBGfo3xCHXh5DzJK37Dx/o5o1UrMWtGAUcPFPN8BdEdtM9AhYbS1Z1Xg4P5j9LdVEutFqhGGUy2hHvbzMF8hde2Xl21VeRQc3awkj5EtALsXn3L7zdI8atMJoaZh14YMFMUUg=  ;
Message-ID: <20050718214712.42278.qmail@web31102.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31102.mail.mud.yahoo.com via HTTP; Mon, 18 Jul 2005 14:47:12 PDT
Date: Mon, 18 Jul 2005 14:47:12 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Static index on CD, how much forward compatible is the index 
To: java-user@lucene.apache.org
In-Reply-To: <Pine.LNX.4.58.0507181434060.18433@hal.rescomp.berkeley.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I was going to make the same suggestion.  That's how I'd do it.
For index format changes, check CHANGES.txt file (should be linked from
Lucene's home page).

Otis

--- Chris Hostetter <hossman_lucene@fucit.org> wrote:

> Why not put the application on the CD as well? .. or at a minimum,
> the
> lucene JAR.  That way you never have to worry about the possibility
> of it
> changing.
> 
> : Date: Mon, 18 Jul 2005 16:32:33 -0400
> : From: "Tardif, Sebastien" <STARDIF@anacomp.com>
> : Reply-To: java-user@lucene.apache.org
> : To: java-user@lucene.apache.org
> : Subject: Static index on CD, how much forward compatible is the
> index
> :
> : Otis,
> :
> : Let say I have a static index on CD, and my customer will be using
> this
> : CD for the next 10 years. I will also probably fix bug in the
> : application that use the CD and probably want to upgrade Lucene
> library
> : at some point. How much backward compatible is Lucene with old
> index
> : when Lucene release new version?
> :
> : Does Lucene has any "good" history on index backward compatibility?
> :
> :
> :
> : -----Original Message-----
> : From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
> : Sent: Friday, July 15, 2005 3:34 PM
> : To: java-user@lucene.apache.org
> : Subject: Re: Runtime full text search like in Microsoft Windows
> Search
> :
> : As somebody already said, you can have an in-memory index with
> : RAMDirectory.  You can also pre-build a Lucene index on that CD -
> CD is
> : "static", you can't add/remove/change files on it, so you can build
> an
> : index and burn it onto the CD at the same time when you put the
> Word
> : files on it.
> :
> : As for getting the indexable text out of Word and other documents,
> look
> : at the code for the Lucene book - http://lucenebook.com - there is
> a
> : little framework there, that parses and indexes a number of common
> file
> : types.
> :
> : Otis
> :
> :
> : --- "Tardif, Sebastien" <STARDIF@anacomp.com> wrote:
> :
> : > How can you use Lucene like the very limited but fast search that
> : > Microsoft Windows Search provide?
> : >
> : > The use case is that the users have a CD with lot of files. I
> provide
> : > them a nice user interface. They have the option to generate the
> full
> : > text search index but they should also be able to search without
> an
> : > index generated. I know that will be slow, but Microsoft Windows
> : > Search is still able to search 500 MB in less than 30 seconds for
> : > simpler matching.
> : >
> : > How can I use Lucene for this simpler, not existing index,
> search?
> : >
> : > Or should I have to hook to operating system specific API like
> Win32
> : > on Windows?
> : >
> :
> :
> :
> ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
> :
> :
> ---------------------------------------------------------------------
> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> : For additional commands, e-mail: java-user-help@lucene.apache.org
> :
> 
> 
> 
> -Hoss
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 21:53:46 2005
Return-Path: <java-user-return-15477-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75970 invoked from network); 18 Jul 2005 21:53:45 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 21:53:45 -0000
Received: (qmail 64643 invoked by uid 500); 18 Jul 2005 21:53:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64428 invoked by uid 500); 18 Jul 2005 21:53:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64415 invoked by uid 99); 18 Jul 2005 21:53:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 14:53:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.92.193.19] (HELO cmailm3.svr.pol.co.uk) (195.92.193.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 14:53:34 -0700
Received: from user-2944.l2.c2.dsl.pol.co.uk ([81.77.107.128] helo=[192.168.1.2])
	by cmailm3.svr.pol.co.uk with esmtp (Exim 4.41)
	id 1DudYN-0002oD-FU
	for java-user@lucene.apache.org; Mon, 18 Jul 2005 22:53:35 +0100
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Re: n-gram indexing
Date: Mon, 18 Jul 2005 22:55:46 +0000
User-Agent: KMail/1.8.1
References: <D1EFB337111B674B8F1BE155B01C6DD6355760@franklin.corp.dessci>
In-Reply-To: <D1EFB337111B674B8F1BE155B01C6DD6355760@franklin.corp.dessci>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-6"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200507182255.46464.mail@andy-roberts.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 18 Jul 2005 21:27, Rajesh Munavalli wrote:
> At what point do I add n-grams? Does the order in which I add n-grams
> affect exact phrase queries later? My questions are
>
> (1) Should I add all the 1-grams followed by 2-grams followed by
> 3-grams..etc sentence by sentence OR
>
> (2) Add all the 1 grams of entire document first before starting 2-grams
> for the entire document?
>
> What is the general accepted notion of adding n-grams of a document?
>
> thanks,
>
> Rajesh

I can't see any real advantage of storing n-grams explicitly. Just index the 
document and use phrase queries. Order is significant with phrase queries if 
I recall correctly, although you can use SpanNearQueries to look for 
unordered ngrams, although I don't know why you would want to!

Perhaps if you explain a little more about what you are trying to achieve more 
generally, we can confirm that you don't need to mess with explicit indexing 
of indexing.

Andy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 22:05:03 2005
Return-Path: <java-user-return-15478-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84765 invoked from network); 18 Jul 2005 22:05:02 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 22:05:02 -0000
Received: (qmail 89146 invoked by uid 500); 18 Jul 2005 22:04:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 89112 invoked by uid 500); 18 Jul 2005 22:04:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 89079 invoked by uid 99); 18 Jul 2005 22:04:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 15:04:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.84.113.130] (HELO mail.dessci.com) (65.84.113.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 15:04:49 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: n-gram indexing
Date: Mon, 18 Jul 2005 15:06:37 -0700
Message-ID: <D1EFB337111B674B8F1BE155B01C6DD635576B@franklin.corp.dessci>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: n-gram indexing
Thread-Index: AcWL42xgyxntR36mTYW5vu4qFeahwQAAJ7oQ
From: "Rajesh Munavalli" <rajeshm@dessci.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Intution behind adding n-grams is to boost naturally occurring larger
phrases versus using phrase queries. For example, if I am searching for
"united states of america", I want the search results to return the
documents ordered as follows

Rank 1 - Documents containing all the words occurring together
Rank 2 - Documents containing maximum number of words in the same
sentence
Rank 3 - Documents containing all the words but some might appear in the
same sentence some may not
Rank 4 - Documents containig atleast one or two words

If we have a n-gram index, most probably document talking about "united
states" gets preference over document containing "united" and "states"
seperately. If I am correct, this can be achieved without using phrase
queries. I am not sure if there is a better way to achieve the same
effect.

Thanks,

Rajesh


-----Original Message-----
From: Andy Roberts [mailto:mail@andy-roberts.net]=20
Sent: Monday, July 18, 2005 5:56 PM
To: java-user@lucene.apache.org
Subject: Re: n-gram indexing

On Monday 18 Jul 2005 21:27, Rajesh Munavalli wrote:
> At what point do I add n-grams? Does the order in which I add n-grams=20
> affect exact phrase queries later? My questions are
>
> (1) Should I add all the 1-grams followed by 2-grams followed by=20
> 3-grams..etc sentence by sentence OR
>
> (2) Add all the 1 grams of entire document first before starting=20
> 2-grams for the entire document?
>
> What is the general accepted notion of adding n-grams of a document?
>
> thanks,
>
> Rajesh

I can't see any real advantage of storing n-grams explicitly. Just index
the document and use phrase queries. Order is significant with phrase
queries if I recall correctly, although you can use SpanNearQueries to
look for unordered ngrams, although I don't know why you would want to!

Perhaps if you explain a little more about what you are trying to
achieve more generally, we can confirm that you don't need to mess with
explicit indexing of indexing.

Andy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 22:11:36 2005
Return-Path: <java-user-return-15479-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87394 invoked from network); 18 Jul 2005 22:11:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 22:11:35 -0000
Received: (qmail 93282 invoked by uid 500); 18 Jul 2005 22:11:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93091 invoked by uid 500); 18 Jul 2005 22:11:27 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93078 invoked by uid 99); 18 Jul 2005 22:11:27 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 15:11:27 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 15:11:23 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id DEB015B7AA; Mon, 18 Jul 2005 15:11:24 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id DBC8B7F459
	for <java-user@lucene.apache.org>; Mon, 18 Jul 2005 15:11:24 -0700 (PDT)
Date: Mon, 18 Jul 2005 15:11:24 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: RE: n-gram indexing
In-Reply-To: <D1EFB337111B674B8F1BE155B01C6DD635576B@franklin.corp.dessci>
Message-ID: <Pine.LNX.4.58.0507181506370.3782@hal.rescomp.berkeley.edu>
References: <D1EFB337111B674B8F1BE155B01C6DD635576B@franklin.corp.dessci>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Your intuition is right, but i can't think of any reason why you need to
add the n-grams at indexing time -- or why using phrase queries would be a
bad thing in this case.  When you get a multiword query, construct the
n-grams of the query words as multiple phrase queries and search for a
BooleanQuery of all those phrases (with bigger boosts given to longer
phrases)

Using your example of "united states of america" generate a query that
looks something like...

     united states america
     "united states"^10 "states america"^10
     "united states america"^100

: Intution behind adding n-grams is to boost naturally occurring larger
: phrases versus using phrase queries. For example, if I am searching for
: "united states of america", I want the search results to return the
: documents ordered as follows
:
: Rank 1 - Documents containing all the words occurring together
: Rank 2 - Documents containing maximum number of words in the same
: sentence
: Rank 3 - Documents containing all the words but some might appear in the
: same sentence some may not
: Rank 4 - Documents containig atleast one or two words
:
: If we have a n-gram index, most probably document talking about "united
: states" gets preference over document containing "united" and "states"
: seperately. If I am correct, this can be achieved without using phrase
: queries. I am not sure if there is a better way to achieve the same
: effect.
:
: Thanks,
:
: Rajesh
:
:
: -----Original Message-----
: From: Andy Roberts [mailto:mail@andy-roberts.net]
: Sent: Monday, July 18, 2005 5:56 PM
: To: java-user@lucene.apache.org
: Subject: Re: n-gram indexing
:
: On Monday 18 Jul 2005 21:27, Rajesh Munavalli wrote:
: > At what point do I add n-grams? Does the order in which I add n-grams
: > affect exact phrase queries later? My questions are
: >
: > (1) Should I add all the 1-grams followed by 2-grams followed by
: > 3-grams..etc sentence by sentence OR
: >
: > (2) Add all the 1 grams of entire document first before starting
: > 2-grams for the entire document?
: >
: > What is the general accepted notion of adding n-grams of a document?
: >
: > thanks,
: >
: > Rajesh
:
: I can't see any real advantage of storing n-grams explicitly. Just index
: the document and use phrase queries. Order is significant with phrase
: queries if I recall correctly, although you can use SpanNearQueries to
: look for unordered ngrams, although I don't know why you would want to!
:
: Perhaps if you explain a little more about what you are trying to
: achieve more generally, we can confirm that you don't need to mess with
: explicit indexing of indexing.
:
: Andy
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 18 22:14:13 2005
Return-Path: <java-user-return-15480-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88415 invoked from network); 18 Jul 2005 22:14:11 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 18 Jul 2005 22:14:11 -0000
Received: (qmail 95694 invoked by uid 500); 18 Jul 2005 22:14:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95657 invoked by uid 500); 18 Jul 2005 22:14:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95644 invoked by uid 99); 18 Jul 2005 22:14:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 15:14:05 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [195.92.193.211] (HELO cmailm4.svr.pol.co.uk) (195.92.193.211)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 15:14:00 -0700
Received: from user-2944.l2.c2.dsl.pol.co.uk ([81.77.107.128] helo=[192.168.1.2])
	by cmailm4.svr.pol.co.uk with esmtp (Exim 4.41)
	id 1DudsA-0007ZS-Tf
	for java-user@lucene.apache.org; Mon, 18 Jul 2005 23:14:03 +0100
From: Andy Roberts <mail@andy-roberts.net>
To: java-user@lucene.apache.org
Subject: Re: n-gram indexing
Date: Mon, 18 Jul 2005 23:16:13 +0000
User-Agent: KMail/1.8.1
References: <D1EFB337111B674B8F1BE155B01C6DD635576B@franklin.corp.dessci>
In-Reply-To: <D1EFB337111B674B8F1BE155B01C6DD635576B@franklin.corp.dessci>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200507182316.13810.mail@andy-roberts.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Monday 18 Jul 2005 22:06, Rajesh Munavalli wrote:
> Intution behind adding n-grams is to boost naturally occurring larger
> phrases versus using phrase queries. For example, if I am searching for
> "united states of america", I want the search results to return the
> documents ordered as follows
>
> Rank 1 - Documents containing all the words occurring together
> Rank 2 - Documents containing maximum number of words in the same
> sentence
> Rank 3 - Documents containing all the words but some might appear in the
> same sentence some may not
> Rank 4 - Documents containig atleast one or two words
>
> If we have a n-gram index, most probably document talking about "united
> states" gets preference over document containing "united" and "states"
> seperately. If I am correct, this can be achieved without using phrase
> queries. I am not sure if there is a better way to achieve the same
> effect.
>

I don't think ngrams will help either. You could perform a set of individual 
queries. Firstly, run the phrase query to find hits with the exact phrase, 
then perhaps run a SpanNear query to find the docs with the terms close to 
each other. Thirdly, do a boolean AND query for all terms and fourthly run an 
OR boolean query. It will require a little extra processing of course, as you 
are technically executing 4 queries in 1. Naturally, this only has to be done 
when there are more than one term in the search query. Also, there is 
obviously going to be some duplication of hits, so you could use a HashMap 
when iterating of the Hits to ensure you get unique hits when the queries are 
collated.

Andy

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 05:09:19 2005
Return-Path: <java-user-return-15481-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 30145 invoked from network); 19 Jul 2005 05:09:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 05:09:18 -0000
Received: (qmail 35820 invoked by uid 500); 19 Jul 2005 05:09:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 35793 invoked by uid 500); 19 Jul 2005 05:09:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35780 invoked by uid 99); 19 Jul 2005 05:09:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 22:09:12 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of clamprecht@gmail.com designates 64.233.170.205 as permitted sender)
Received: from [64.233.170.205] (HELO rproxy.gmail.com) (64.233.170.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 22:09:08 -0700
Received: by rproxy.gmail.com with SMTP id y7so590675rne
        for <java-user@lucene.apache.org>; Mon, 18 Jul 2005 22:09:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=QaMV2PERJoK/y4K1rpuKN5D+olj8mCA/DO6Ns6K2rHluq3K9cuj3wyi6vAtx/uF5OhoByF3R2a1ZgNG8J1Aw1SGn3GPBadj92okAXSuxI1qNlVeTi6CsKg8TChXVPLIbv4NUIugzm5JtgA9Uulcf+womSqXVpXIFFXbkGX/UdTk=
Received: by 10.38.89.20 with SMTP id m20mr2529751rnb;
        Mon, 18 Jul 2005 22:09:11 -0700 (PDT)
Received: by 10.38.104.23 with HTTP; Mon, 18 Jul 2005 22:09:11 -0700 (PDT)
Message-ID: <88c6a672050718220967b0578c@mail.gmail.com>
Date: Tue, 19 Jul 2005 00:09:11 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Best Practices for Distributing Lucene Indexing and Searching
In-Reply-To: <BE3E7BC7F7553B4A9362D4192ECD308A9FC18B@neptune.int.mediasurface.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <BE3E7BC7F7553B4A9362D4192ECD308A9FC18B@neptune.int.mediasurface.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

See the paper at: http://labs.google.com/papers/mapreduce.html=20

"MapReduce is a programming model and an associated implementation for
processing and generating large data sets. Users specify a map
function that processes a key/value pair to generate a set of
intermediate key/value pairs, and a reduce function that merges all
intermediate values associated with the same intermediate key. Many
real world tasks are expressible in this model, as shown in the paper.
"

cool stuff

On 7/18/05, Peter Gelderbloem <Peter.Gelderbloem@mediasurface.com> wrote:
> I am thinking of having a cluster of one indexer and a few searchers 1
> to n.
> The indexer will consist of a number of stages as defined in SEDA. I
> must still do this decomposition.  the resulting index will be published
> via message q to the searchers that will stop doing searches long enough
> to update the local index.
> What is the purpose behind the nutch mapreduce component?
> Would it be useful for me to look at it in order to better decompose the
> indexer component?
> Cheers,
> Peter Gelderbloem
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 05:16:00 2005
Return-Path: <java-user-return-15482-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31533 invoked from network); 19 Jul 2005 05:15:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 05:15:59 -0000
Received: (qmail 41572 invoked by uid 500); 19 Jul 2005 05:15:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 41543 invoked by uid 500); 19 Jul 2005 05:15:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 41530 invoked by uid 99); 19 Jul 2005 05:15:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 22:15:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of clamprecht@gmail.com designates 64.233.170.192 as permitted sender)
Received: from [64.233.170.192] (HELO rproxy.gmail.com) (64.233.170.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 22:15:50 -0700
Received: by rproxy.gmail.com with SMTP id j1so1480435rnf
        for <java-user@lucene.apache.org>; Mon, 18 Jul 2005 22:15:52 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=r1uYbeighk5TZAX8ORdaq6DGG/ejCRaQzqLRPlpZtqHxqtjcDoK7EM6+DlhJZcro5pobaTQKMhx09AjV71P2LJ5N73FrebDw8HRfHkDH8gPHn2RGMM5wLsaAWSJCxGAvWaw/BUwQ8DCfWelqp7ractf8pgykDeYhczVTl+fyYWs=
Received: by 10.38.97.67 with SMTP id u67mr2518975rnb;
        Mon, 18 Jul 2005 22:15:52 -0700 (PDT)
Received: by 10.38.104.23 with HTTP; Mon, 18 Jul 2005 22:15:52 -0700 (PDT)
Message-ID: <88c6a672050718221543a3915c@mail.gmail.com>
Date: Tue, 19 Jul 2005 00:15:52 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: n-gram indexing
In-Reply-To: <D1EFB337111B674B8F1BE155B01C6DD635576B@franklin.corp.dessci>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <D1EFB337111B674B8F1BE155B01C6DD635576B@franklin.corp.dessci>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Can you run a phrase query with high slop factor?  like=20

"united states of america"~999999

This will match documents with all the terms anywhere in the document.
 But it will also give higher scores when the terms are closer
together, using edit distance I believe.

-chris

On 7/18/05, Rajesh Munavalli <rajeshm@dessci.com> wrote:
> Intution behind adding n-grams is to boost naturally occurring larger
> phrases versus using phrase queries. For example, if I am searching for
> "united states of america", I want the search results to return the
> documents ordered as follows
>=20
> Rank 1 - Documents containing all the words occurring together
> Rank 2 - Documents containing maximum number of words in the same
> sentence
> Rank 3 - Documents containing all the words but some might appear in the
> same sentence some may not
> Rank 4 - Documents containig atleast one or two words
>=20
> If we have a n-gram index, most probably document talking about "united
> states" gets preference over document containing "united" and "states"
> seperately. If I am correct, this can be achieved without using phrase
> queries. I am not sure if there is a better way to achieve the same
> effect.
>=20
> Thanks,
>=20
> Rajesh
>=20
>=20
> -----Original Message-----
> From: Andy Roberts [mailto:mail@andy-roberts.net]
> Sent: Monday, July 18, 2005 5:56 PM
> To: java-user@lucene.apache.org
> Subject: Re: n-gram indexing
>=20
> On Monday 18 Jul 2005 21:27, Rajesh Munavalli wrote:
> > At what point do I add n-grams? Does the order in which I add n-grams
> > affect exact phrase queries later? My questions are
> >
> > (1) Should I add all the 1-grams followed by 2-grams followed by
> > 3-grams..etc sentence by sentence OR
> >
> > (2) Add all the 1 grams of entire document first before starting
> > 2-grams for the entire document?
> >
> > What is the general accepted notion of adding n-grams of a document?
> >
> > thanks,
> >
> > Rajesh
>=20
> I can't see any real advantage of storing n-grams explicitly. Just index
> the document and use phrase queries. Order is significant with phrase
> queries if I recall correctly, although you can use SpanNearQueries to
> look for unordered ngrams, although I don't know why you would want to!
>=20
> Perhaps if you explain a little more about what you are trying to
> achieve more generally, we can confirm that you don't need to mess with
> explicit indexing of indexing.
>=20
> Andy
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 05:29:58 2005
Return-Path: <java-user-return-15483-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34977 invoked from network); 19 Jul 2005 05:29:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 05:29:56 -0000
Received: (qmail 50772 invoked by uid 500); 19 Jul 2005 05:29:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 50749 invoked by uid 500); 19 Jul 2005 05:29:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 50735 invoked by uid 99); 19 Jul 2005 05:29:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 18 Jul 2005 22:29:49 -0700
X-ASF-Spam-Status: No, hits=2.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_40_50,HTML_IMAGE_ONLY_08,HTML_MESSAGE,MSGID_FROM_MTA_HEADER
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.83.38] (HELO rediffmail.com) (203.199.83.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 18 Jul 2005 22:29:44 -0700
Received: (qmail 15087 invoked by uid 510); 19 Jul 2005 05:31:08 -0000
Date: 19 Jul 2005 05:31:08 -0000
Message-ID: <20050719053108.15086.qmail@webmail28.rediffmail.com>
Received: from unknown (61.95.167.91) by rediffmail.com via HTTP; 19 jul 2005 05:31:08 -0000
MIME-Version: 1.0
From: "Rahul D Thakare" <rahul_thakare@rediffmail.com>
Reply-To: "Rahul D Thakare" <rahul_thakare@rediffmail.com>
To: java-user@lucene.apache.org
Subject: wild card with keyword fileld
Content-type: multipart/alternative;
	boundary="Next_1121751068---0-203.199.83.38-15061"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Next_1121751068---0-203.199.83.38-15061
Content-type: text/plain;
	charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

 =A0=0AHi,=0A=0A  I am using Field.Keyword for indexing multi-word keyword =
(eg: MAIN LOGIG). Also used keywordAnalyzer, but wild card search is not co=
ming up. Is there anything which I need to do in addition or, wild card sea=
rch is not possible with keyword field.=0A=0Athanks and regards,=0A=0ARahul=
 Thakare..
--Next_1121751068---0-203.199.83.38-15061--


From java-user-return-15484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 11:43:22 2005
Return-Path: <java-user-return-15484-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51887 invoked from network); 19 Jul 2005 11:43:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 11:43:22 -0000
Received: (qmail 14345 invoked by uid 500); 19 Jul 2005 11:43:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14310 invoked by uid 500); 19 Jul 2005 11:43:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14297 invoked by uid 99); 19 Jul 2005 11:43:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 04:43:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ian.lea@gmail.com designates 64.233.182.195 as permitted sender)
Received: from [64.233.182.195] (HELO nproxy.gmail.com) (64.233.182.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 04:43:08 -0700
Received: by nproxy.gmail.com with SMTP id d4so309908nfe
        for <java-user@lucene.apache.org>; Tue, 19 Jul 2005 04:43:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=WbDvUnRqd9B2cndbc12Rq4PlYfKk2E8zWF+CdPovhbLVlvPBlbFhgmyxxSlJZMdNtdbs5dLXJcX104l/Ff7r40AV98kkiMR0btTWOBmgXW/e8lZwx9Lc7Vm2xB0G2mB1GnRdChLOYegb6wYwAbffNNUtCiQFkO3+pr5GgOtQM+o=
Received: by 10.48.143.9 with SMTP id q9mr216105nfd;
        Tue, 19 Jul 2005 04:43:09 -0700 (PDT)
Received: by 10.48.250.3 with HTTP; Tue, 19 Jul 2005 04:43:09 -0700 (PDT)
Message-ID: <8c4e6861050719044356b33779@mail.gmail.com>
Date: Tue, 19 Jul 2005 12:43:09 +0100
From: Ian Lea <ian.lea@gmail.com>
Reply-To: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org, Rahul D Thakare <rahul_thakare@rediffmail.com>
Subject: Re: wild card with keyword fileld
In-Reply-To: <20050719053108.15086.qmail@webmail28.rediffmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20050719053108.15086.qmail@webmail28.rediffmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Have you tried Erik's suggestion from last week?
http://mail-archives.apache.org/mod_mbox/lucene-java-user/200507.mbox/%3cFC=
E3C9A0-2707-4303-9F33-175015F02EE3@ehatchersolutions.com%3e

There is certainly some case confusion in your examples there.=20
Personally, I tend to just lowercase all text on indexing and
searching.

--
Ian.

On 19 Jul 2005 05:31:08 -0000, Rahul D Thakare
<rahul_thakare@rediffmail.com> wrote:
> =20
> Hi,
>=20
>   I am using Field.Keyword for indexing multi-word keyword (eg: MAIN LOGI=
G). Also used keywordAnalyzer, but wild card search is not coming up. Is th=
ere anything which I need to do in addition or, wild card search is not pos=
sible with keyword field.
>=20
> thanks and regards,
>=20
> Rahul Thakare..
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 12:18:57 2005
Return-Path: <java-user-return-15485-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64954 invoked from network); 19 Jul 2005 12:18:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 12:18:56 -0000
Received: (qmail 56556 invoked by uid 500); 19 Jul 2005 12:18:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56437 invoked by uid 500); 19 Jul 2005 12:18:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56424 invoked by uid 99); 19 Jul 2005 12:18:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 05:18:49 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 19 Jul 2005 05:18:44 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IJVKGV00.U9R for <java-user@lucene.apache.org>; Tue, 19
          Jul 2005 18:08:55 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: BOOLEAN OPERATOR HOWTO
Date: Tue, 19 Jul 2005 18:01:15 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKGEHGCEAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
In-Reply-To: <A6195159-2779-4825-AEE4-D55CC190E8C3@ehatchersolutions.com>
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

Apologies.......

Given a Search word = 'erik OR hatcher AND otis OR gospodnetic' , Is it
possible to RETURN COUNT
occurances for each of the word with in the Searched documents.


This would give me the Each word's Term Frequency.


How to achieve this

Thx in advance
karthik




-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Monday, July 18, 2005 6:39 PM
To: java-user@lucene.apache.org
Subject: Re: BOOLEAN OPERATOR HOWTO



On Jul 18, 2005, at 8:12 AM, Karthik N S wrote:
> I have 2 Questions.
But there were no question marks!   I don't understand your questions
at all, sorry, but I'll see if I can decipher it somewhat....

> 1) The Search Criteria  src  requires to automatically fill   "  "
> between  Search words with a Boolean Operator   "  AND ".

You mean to achieve AND'd clauses?   By default, OR is the operator,
and AND must be explicit.  You can construct a QueryParser instance
and set the default operator to AND, though, and then OR must be
explicit.

>  2) The Search Criteria  src  requires to automatically recognise
> the existing  Boolean Query  ' AND , + '  present and append the same
>      with  out any manupulations.
>
> Ex : -
> Search Word  =
>
> 'Lucene in Action Erik hatcher and  Otis  + Gospodnetic '   =
> lucene AND action AND Eric  AND hatcher AND otis + gospodnetic .
>
>
> How to Achieve this , Is there any mechanism built into Lucene to
> handle such situations.

Yes, this sounds like the default operator is what you're looking
for.  Since you use "Lucene in Action" as an example, flip to page 94
for more discussion on this, and then flip to the other pages
mentioned here:

     http://www.lucenebook.com/search?query=default+operator

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 12:25:49 2005
Return-Path: <java-user-return-15486-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 67036 invoked from network); 19 Jul 2005 12:25:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 12:25:47 -0000
Received: (qmail 66568 invoked by uid 500); 19 Jul 2005 12:25:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66551 invoked by uid 500); 19 Jul 2005 12:25:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 37756 invoked by uid 99); 19 Jul 2005 12:05:08 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 84.95.2.1 is neither permitted nor denied by domain of eyal.junk@gmail.com)
Date: Tue, 19 Jul 2005 15:10:33 +0300
From: Eyal <eyal.junk@gmail.com>
Subject: Using QueryParser with a single field
To: java-user@lucene.apache.org
Message-id: <0IJV00GNSJ3ZGO81@i_mtaout1.012.net.il>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Content-type: text/plain; charset=us-ascii
Content-transfer-encoding: 7BIT
Thread-index: AcWMWtzcDZ/kc06XTMuCoNtCFqTkDQ==
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,
 
In my client application I allow the user to build a query by selecting a
field from a combobox and entering a value to search by.
I want the user to enter free text queries for each field, but I don't want
to parse it myself so I thought I'd use QueryParser for that. My problem is
that if the user will (for example) select a field called author and enter
the following text: 'John content:MyContent' 
QueryParser will build a query for author:John OR content:MyContent. I want
QueryParser to ignore other fields.
Any method in QueryParser to allow that? If not - any other suggestions?
 
Thanks,
Eyal 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 14:15:51 2005
Return-Path: <java-user-return-15487-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99135 invoked from network); 19 Jul 2005 14:15:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 14:15:51 -0000
Received: (qmail 54456 invoked by uid 500); 19 Jul 2005 14:15:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54438 invoked by uid 500); 19 Jul 2005 14:15:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54425 invoked by uid 99); 19 Jul 2005 14:15:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 07:15:42 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.58] (HELO pop05.mail.atl.earthlink.net) (207.69.200.58)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 07:15:37 -0700
Received: from wamui-billy.atl.sa.earthlink.net ([209.86.224.27])
	by pop05.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1Dussm-0001bM-00
	for java-user@lucene.apache.org; Tue, 19 Jul 2005 10:15:40 -0400
Message-ID: <25176700.1121782539973.JavaMail.root@wamui-billy.atl.sa.earthlink.net>
Date: Tue, 19 Jul 2005 09:15:39 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Re: Lucene and numerical fields search
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I second the motion.  It sounds like a good solution to TooManyClauses exce=
ption.

-----Original Message-----
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Sent: Jul 16, 2005 5:59 PM
To: java-user@lucene.apache.org, Ray Tsang <saturnism@gmail.com>
Subject: Re: Lucene and numerical fields search

Hi Ray,

If you can share your BitSetQuery and QP modifications, feel free to
suggest them for inclusion to the core or contrib (by attaching them to
a new entry in Bugzilla).

Otis


--- Ray Tsang <saturnism@gmail.com> wrote:

> It seems TooManyClauses is a potential problem for any query that
> expands to a series of OR'ed boolean queries (PrefixQuery,
> WildcardQuery, RangeQuery...).  If the max was set too high, the
> inefficiency would make the search unsable.
>=20
> I kind of worked around this by creating a BitSetQuery, and extended
> PrefixQuery and WildcardQuery so that they rewrite to BitSetQuery.=20
> This at least made both queries usable on a large index (~40mil
> documents) with acceptable speed, without the use of filters.  I also
> extended QueryParser so it creates the new PrefixQuery and the new
> WildcardQuery instead of the ones provided by the distribution.
>=20
> Ray
>=20
> On 7/12/05, Paul.Illingworth@saaconsultants.com
> <Paul.Illingworth@saaconsultants.com> wrote:
> >=20
> >=20
> >=20
> >=20
> >=20
> > Hi Micka=EBl,
> >=20
> > Take a look at the org.apache.lucene.search.DateFilter class that
> comes
> > with Lucene. This does date range filtering (I am using a modified
> version
> > of this class for filtering my date format). It should be
> relatively
> > strightforward to modify this for filtering numeric ranges. If your
> numbers
> > are stored as zero padded Strings then you should be able to leave
> the
> > bits() method as is otherwise you might have to put some String to
> number
> > conversion in there somewhere.
> >=20
> > Regards
> >=20
> > Paul I
> >=20
> >=20
> >=20
> >              Rifflard Micka=EBl
> >              <Mickael.Rifflard
> >              @atosorigin.com>                                     =20
>     To
> >                                      =20
> <java-user@lucene.apache.org>
> >              12/07/2005 09:31                                     =20
>     cc
> >=20
> >                                                                  =20
> Subject
> >              Please respond to         RE: Lucene and numerical
> fields
> >              java-user@lucene.         search
> >                 apache.org
> >=20
> >=20
> >=20
> >=20
> >=20
> >=20
> >=20
> >=20
> >=20
> > Hi Paul,
> >=20
> > I have seen Filter feature and search how to use it to solve my
> problem
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
> >
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 14:19:32 2005
Return-Path: <java-user-return-15488-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8293 invoked from network); 19 Jul 2005 14:19:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 14:19:32 -0000
Received: (qmail 57923 invoked by uid 500); 19 Jul 2005 14:19:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57853 invoked by uid 500); 19 Jul 2005 14:19:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57837 invoked by uid 99); 19 Jul 2005 14:19:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 07:19:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.84.113.130] (HELO mail.dessci.com) (65.84.113.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 07:19:18 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: n-gram indexing
Date: Tue, 19 Jul 2005 07:21:06 -0700
Message-ID: <D1EFB337111B674B8F1BE155B01C6DD63557B6@franklin.corp.dessci>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: n-gram indexing
Thread-Index: AcWL5ejc+Q4GMCJuSSO7+2Zg5LlH1QAhnjdg
From: "Rajesh Munavalli" <rajeshm@dessci.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Let me explain a scenario where I would need to add the n-grams at
indexing time.=20

Consider two documents:

Document 1:
"united states is .... United airlines operates in 50 states. United
states government....."

Document 2:
"united states is .... United airlines operates in 50 states. United
some other word states"

If you consider the tf-idf weight of individual terms "united" and
"states" they would have exact score in both the documents. But the term
"united states" should have higher weight in Document 1. The higher
weight can be achieved through bi-grams which would include the word
"united states". My guess is, lucene will retrieve both documents with
equal score.

Thanks,

Rajesh



-----Original Message-----
From: hossman@hal.rescomp.berkeley.edu
[mailto:hossman@hal.rescomp.berkeley.edu] On Behalf Of Chris Hostetter
Sent: Monday, July 18, 2005 5:11 PM
To: java-user@lucene.apache.org
Subject: RE: n-gram indexing


Your intuition is right, but i can't think of any reason why you need to
add the n-grams at indexing time -- or why using phrase queries would be
a bad thing in this case.  When you get a multiword query, construct the
n-grams of the query words as multiple phrase queries and search for a
BooleanQuery of all those phrases (with bigger boosts given to longer
phrases)

Using your example of "united states of america" generate a query that
looks something like...

     united states america
     "united states"^10 "states america"^10
     "united states america"^100

: Intution behind adding n-grams is to boost naturally occurring larger
: phrases versus using phrase queries. For example, if I am searching
for
: "united states of america", I want the search results to return the
: documents ordered as follows
:
: Rank 1 - Documents containing all the words occurring together
: Rank 2 - Documents containing maximum number of words in the same
: sentence
: Rank 3 - Documents containing all the words but some might appear in
the
: same sentence some may not
: Rank 4 - Documents containig atleast one or two words
:
: If we have a n-gram index, most probably document talking about
"united
: states" gets preference over document containing "united" and "states"
: seperately. If I am correct, this can be achieved without using phrase
: queries. I am not sure if there is a better way to achieve the same
: effect.
:
: Thanks,
:
: Rajesh
:
:
: -----Original Message-----
: From: Andy Roberts [mailto:mail@andy-roberts.net]
: Sent: Monday, July 18, 2005 5:56 PM
: To: java-user@lucene.apache.org
: Subject: Re: n-gram indexing
:
: On Monday 18 Jul 2005 21:27, Rajesh Munavalli wrote:
: > At what point do I add n-grams? Does the order in which I add
n-grams
: > affect exact phrase queries later? My questions are
: >
: > (1) Should I add all the 1-grams followed by 2-grams followed by
: > 3-grams..etc sentence by sentence OR
: >
: > (2) Add all the 1 grams of entire document first before starting
: > 2-grams for the entire document?
: >
: > What is the general accepted notion of adding n-grams of a document?
: >
: > thanks,
: >
: > Rajesh
:
: I can't see any real advantage of storing n-grams explicitly. Just
index
: the document and use phrase queries. Order is significant with phrase
: queries if I recall correctly, although you can use SpanNearQueries to
: look for unordered ngrams, although I don't know why you would want
to!
:
: Perhaps if you explain a little more about what you are trying to
: achieve more generally, we can confirm that you don't need to mess
with
: explicit indexing of indexing.
:
: Andy
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 14:45:13 2005
Return-Path: <java-user-return-15489-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54328 invoked from network); 19 Jul 2005 14:45:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 14:45:13 -0000
Received: (qmail 95975 invoked by uid 500); 19 Jul 2005 14:45:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95949 invoked by uid 500); 19 Jul 2005 14:45:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95927 invoked by uid 99); 19 Jul 2005 14:45:05 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 07:45:05 -0700
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,RCVD_IN_BL_SPAMCOP_NET,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fersher@hotmail.com designates 65.54.224.36 as permitted sender)
Received: from [65.54.224.36] (HELO hotmail.com) (65.54.224.36)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 07:45:00 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 19 Jul 2005 07:45:03 -0700
Message-ID: <BAY105-F260A2C78D296CC1E49FA9CB2D40@phx.gbl>
Received: from 65.54.224.200 by by105fd.bay105.hotmail.msn.com with HTTP;
	Tue, 19 Jul 2005 14:45:03 GMT
X-Originating-IP: [65.54.224.200]
X-Originating-Email: [fersher@hotmail.com]
X-Sender: fersher@hotmail.com
From: "christopher may" <fersher@hotmail.com>
To: java-user@lucene.apache.org, general-help@lucene.apache.org
Subject: Summary
Date: Tue, 19 Jul 2005 10:45:03 -0400
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 19 Jul 2005 14:45:03.0516 (UTC) FILETIME=[72803DC0:01C58C70]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How can I personalize the summary results ? Where and how does Lucene 
retrieve this data.
The source location would be great to know but any help would be 
appreciated. Thanks



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 15:20:10 2005
Return-Path: <java-user-return-15490-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66859 invoked from network); 19 Jul 2005 15:20:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 15:20:07 -0000
Received: (qmail 38238 invoked by uid 500); 19 Jul 2005 15:19:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38206 invoked by uid 500); 19 Jul 2005 15:19:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38193 invoked by uid 99); 19 Jul 2005 15:19:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 08:19:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jadavis@gmail.com designates 64.233.170.206 as permitted sender)
Received: from [64.233.170.206] (HELO rproxy.gmail.com) (64.233.170.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 08:19:53 -0700
Received: by rproxy.gmail.com with SMTP id f1so1628454rne
        for <java-user@lucene.apache.org>; Tue, 19 Jul 2005 08:19:51 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=LCu9+Q76y6aym14WVrtrgbpS0YXINTUznv0Zsf2SdffJ0pKYCAJJq1oFcuIE9zf3Uc2YqcLTm8ONW08AWj3eunwV8LT1pLLSjv1p5mxSRHCLhEnzCQaPFbbHs5Ujk6dSecSS2j5oNVin8kXPjxyFEB1VF+uuBYWbx0ewVs78/OA=
Received: by 10.38.9.70 with SMTP id 70mr2888128rni;
        Tue, 19 Jul 2005 08:19:51 -0700 (PDT)
Received: by 10.39.1.13 with HTTP; Tue, 19 Jul 2005 08:19:51 -0700 (PDT)
Message-ID: <418eb29d0507190819102390b2@mail.gmail.com>
Date: Tue, 19 Jul 2005 10:19:51 -0500
From: Jeff Davis <jadavis@gmail.com>
Reply-To: Jeff Davis <jadavis@gmail.com>
To: java-user@lucene.apache.org
Subject: QueryParser handling of backslash characters
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I'm seeing some strange behavior in the way the QueryParser handles
consecutive backslash characters.  I know that backslash is the escape
character in Lucene, and so I would expect "\\\\" to match fields that
have two consecutive backslashes, but this does not seem to be the
case.

The fields I'm searching are UNC paths, e.g. "\\192.168.0.15\public".=20
The only way I can get my query to find the record containing that
value is to type "FieldName:\\\192.168.0.15\\public" (three slashes).=20
Why is the third backslash character not treated as an escape?  Is it
just that any backslash that is preceded by a backslash is interpreted
as a literal backslash character, regardless of whether the "escape"
backslash was itself escaped?

I can code around this, but it seems inconsistent with the way that
escape characters usually work.  Is this a bug, or is it intentional,
or am I missing something?

Thanks,
Jeff

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 16:01:57 2005
Return-Path: <java-user-return-15491-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3835 invoked from network); 19 Jul 2005 16:01:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 16:01:56 -0000
Received: (qmail 94769 invoked by uid 500); 19 Jul 2005 16:01:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94751 invoked by uid 500); 19 Jul 2005 16:01:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94738 invoked by uid 99); 19 Jul 2005 16:01:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 09:01:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of saturnism@gmail.com designates 64.233.184.204 as permitted sender)
Received: from [64.233.184.204] (HELO wproxy.gmail.com) (64.233.184.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 09:01:43 -0700
Received: by wproxy.gmail.com with SMTP id i8so1244175wra
        for <java-user@lucene.apache.org>; Tue, 19 Jul 2005 09:01:46 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=rtOxQMs765as8ZqgmBVeOOSOn/Ql0OREEDMVb7C7IvpzD/Rmv8PpE6gQZ/eNtL5VDsQ2stTEFbVhQ+dqUsT8O9VYN8BN/fUygYec1jjoo8/9LVFdvk1Hc4bvBEAvl890gTh4V5GPOzbNr3Az2fNtg/1LsQJW78NxY013BmCqm8o=
Received: by 10.54.2.57 with SMTP id 57mr790222wrb;
        Tue, 19 Jul 2005 09:00:57 -0700 (PDT)
Received: by 10.54.118.4 with HTTP; Tue, 19 Jul 2005 09:00:57 -0700 (PDT)
Message-ID: <fb9748c905071909004a5c1196@mail.gmail.com>
Date: Wed, 20 Jul 2005 00:00:57 +0800
From: Ray Tsang <saturnism@gmail.com>
Reply-To: Ray Tsang <saturnism@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Lucene and numerical fields search
In-Reply-To: <20050716225950.18499.qmail@web31111.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <fb9748c905071209392599a9b5@mail.gmail.com>
	 <20050716225950.18499.qmail@web31111.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

That'd be great!  I will post the code as is, hope to get feedbacks.
There are some problems with BitSetQuery by itself with MultiSearcher
due to different offsets, so it's in a bit of a mess right now, and
cannot work by itself unless used with a custom ParallelMultiSearcher.
 However, It should be fine if it was rewritten from other queries.
Perhaps it should get cleaned up and be made a protected class for
now.

ray,

On 7/17/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Hi Ray,
>=20
> If you can share your BitSetQuery and QP modifications, feel free to
> suggest them for inclusion to the core or contrib (by attaching them to
> a new entry in Bugzilla).
>=20
> Otis
>=20
>=20
> --- Ray Tsang <saturnism@gmail.com> wrote:
>=20
> > It seems TooManyClauses is a potential problem for any query that
> > expands to a series of OR'ed boolean queries (PrefixQuery,
> > WildcardQuery, RangeQuery...).  If the max was set too high, the
> > inefficiency would make the search unsable.
> >
> > I kind of worked around this by creating a BitSetQuery, and extended
> > PrefixQuery and WildcardQuery so that they rewrite to BitSetQuery.
> > This at least made both queries usable on a large index (~40mil
> > documents) with acceptable speed, without the use of filters.  I also
> > extended QueryParser so it creates the new PrefixQuery and the new
> > WildcardQuery instead of the ones provided by the distribution.
> >
> > Ray
> >
> > On 7/12/05, Paul.Illingworth@saaconsultants.com
> > <Paul.Illingworth@saaconsultants.com> wrote:
> > >
> > >
> > >
> > >
> > >
> > > Hi Micka=EBl,
> > >
> > > Take a look at the org.apache.lucene.search.DateFilter class that
> > comes
> > > with Lucene. This does date range filtering (I am using a modified
> > version
> > > of this class for filtering my date format). It should be
> > relatively
> > > strightforward to modify this for filtering numeric ranges. If your
> > numbers
> > > are stored as zero padded Strings then you should be able to leave
> > the
> > > bits() method as is otherwise you might have to put some String to
> > number
> > > conversion in there somewhere.
> > >
> > > Regards
> > >
> > > Paul I
> > >
> > >
> > >
> > >              Rifflard Micka=EBl
> > >              <Mickael.Rifflard
> > >              @atosorigin.com>
> >     To
> > >
> > <java-user@lucene.apache.org>
> > >              12/07/2005 09:31
> >     cc
> > >
> > >
> > Subject
> > >              Please respond to         RE: Lucene and numerical
> > fields
> > >              java-user@lucene.         search
> > >                 apache.org
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > >
> > > Hi Paul,
> > >
> > > I have seen Filter feature and search how to use it to solve my
> > problem
> > >
> > ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 16:06:52 2005
Return-Path: <java-user-return-15492-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6879 invoked from network); 19 Jul 2005 16:06:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 16:06:49 -0000
Received: (qmail 4296 invoked by uid 500); 19 Jul 2005 16:06:38 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4260 invoked by uid 500); 19 Jul 2005 16:06:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4227 invoked by uid 99); 19 Jul 2005 16:06:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 09:06:38 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.128] (HELO mis011-1.exch011.intermedia.net) (64.78.21.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 09:06:31 -0700
Received: from ehost011-1.exch011.intermedia.net ([64.78.21.3]) by mis011-1.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 19 Jul 2005 09:06:34 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Searching for similar documents
Date: Tue, 19 Jul 2005 09:06:33 -0700
Message-ID: <41EE526EC2D3C74286415780D3BA9F870CE04A9B@ehost011-1.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching for similar documents
Thread-Index: AcWKFgOaZJaehFQoRfqFoVqODuuYEgCZtG8w
From: "Derek Westfall" <dwestfall@TradelineInc.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 19 Jul 2005 16:06:34.0358 (UTC) FILETIME=[D5AB8160:01C58C7B]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've been trying to compile the .java into a .class and I am getting the
error below.

Any idea what I am missing?

Thanks,

Derek


C:\CFusionMX\wwwroot\WEB-INF\classes>javac morelikethis.java -classpath
c:\cfusi
onmx\lib\lucene-1.4.3.jar
morelikethis.java:509: cannot resolve symbol
symbol  : variable FieldOption
location: class org.apache.lucene.index.IndexReader
            Collection fields =3D ir.getFieldNames(
IndexReader.FieldOption.INDEXED);
                                                             ^
morelikethis.java:524: cannot resolve symbol
symbol  : variable FieldOption
location: class org.apache.lucene.index.IndexReader
            Collection fields =3D ir.getFieldNames(
IndexReader.FieldOption.INDEXED);
                                                             ^
morelikethis.java:581: cannot resolve symbol
symbol  : variable Occur
location: class org.apache.lucene.search.BooleanClause
                query.add(tq, BooleanClause.Occur.SHOULD);
                                           ^
3 errors
=20

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]=20
Sent: Saturday, July 16, 2005 7:52 AM
To: java-user@lucene.apache.org
Subject: RE: Searching for similar documents

They should work with the version in SVN, as well as with 1.4.3.

Otis


--- "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com> wrote:

> Thanks Otis!
>=20
> Are there Lucene 1.4 compatiable version of these classes?
>=20
> Thanks very much
> -Hareesh
>=20
> -----Original Message-----
> From: Otis Gospodnetic
> To: java-user@lucene.apache.org
> Sent: 7/16/2005 3:30 AM
> Subject: Re: Searching for similar documents
>=20
> We've got this in Lucene's contrib/:
>=20
> $ ll
> contrib/similarity/src/java/org/apache/lucene/search/similar/*java
>=20
> -rwxrwxr-x  1 otis otis 30431 Jul  9 09:20 MoreLikeThis.java*=20
> -rwxrwxr-x  1 otis otis  3612 Mar 16 17:31 SimilarityQueries.java*
>=20
> Otis
>=20
> --- "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com> wrote:
>=20
> > Hi,
> > I am trying to build a search utility that looks for 'similarities'
> > between
> > documents.
> > In other words, for every document listed as a part of search
> result
> > for a
> > phrase, I want to be able to list documents that are similar to it=20
> > (but not necessarily match the same search criterion). For example,=20
> > if my search for "Tomcat" returned "Tomcat installation guide", I=20
> > want to write a utility that looks for all similar installation=20
> > guides that may or may not
> be
> > related to Tomcat.
> >=20
> > One approach I am thinking is to use term vectors. Algorithm: first=20
> > extract the top X term vectors from the current document and create=20
> > a
> Boolean
> > query
> > for those terms. Run it against contents of other documents (I will=20
> > probably have to remove commonly used terms manually?). Resulting=20
> > documents should be similar to the original one.
> >=20
> > I am wondering if something like this already exists or someone has
> a
> > better
> > algorithm/solution. Or am I headed off in the wrong direction with=20
> > this algorithm? Your advice is highly appreciated.
> >=20
> > Thanks
> > -Hareesh
> >=20
> >=20
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >=20
> >=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 16:16:48 2005
Return-Path: <java-user-return-15493-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13621 invoked from network); 19 Jul 2005 16:16:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 16:16:48 -0000
Received: (qmail 29249 invoked by uid 500); 19 Jul 2005 16:16:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29223 invoked by uid 500); 19 Jul 2005 16:16:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29200 invoked by uid 99); 19 Jul 2005 16:16:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 09:16:39 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.35] (HELO web31102.mail.mud.yahoo.com) (68.142.200.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 19 Jul 2005 09:16:34 -0700
Received: (qmail 11646 invoked by uid 60001); 19 Jul 2005 16:16:34 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=sxcnMicfV/eb69PhA4IljStRArjMfy9QVW5h8/9IF5meAEkhWyQAV8Pu6VtLoU3uhfxsxOI8RtwF1Q8Y3pSqqbSudfyROstwxJtp2kwdwywxZ8GoODLYxLDOgbNA8aLK5A193T02i6XQlCNCXX2bG0a3znALCKtHdKaGLEhyDs8=  ;
Message-ID: <20050719161634.11644.qmail@web31102.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31102.mail.mud.yahoo.com via HTTP; Tue, 19 Jul 2005 09:16:34 PDT
Date: Tue, 19 Jul 2005 09:16:34 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: Searching for similar documents
To: java-user@lucene.apache.org
In-Reply-To: <41EE526EC2D3C74286415780D3BA9F870CE04A9B@ehost011-1.exch011.intermedia.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You need to point to the new Lucene Jar (from SVN, not the 1.4.3)
version. 

Otis


--- Derek Westfall <dwestfall@TradelineInc.com> wrote:

> I've been trying to compile the .java into a .class and I am getting
> the
> error below.
> 
> Any idea what I am missing?
> 
> Thanks,
> 
> Derek
> 
> 
> C:\CFusionMX\wwwroot\WEB-INF\classes>javac morelikethis.java
> -classpath
> c:\cfusi
> onmx\lib\lucene-1.4.3.jar
> morelikethis.java:509: cannot resolve symbol
> symbol  : variable FieldOption
> location: class org.apache.lucene.index.IndexReader
>             Collection fields = ir.getFieldNames(
> IndexReader.FieldOption.INDEXED);
>                                                              ^
> morelikethis.java:524: cannot resolve symbol
> symbol  : variable FieldOption
> location: class org.apache.lucene.index.IndexReader
>             Collection fields = ir.getFieldNames(
> IndexReader.FieldOption.INDEXED);
>                                                              ^
> morelikethis.java:581: cannot resolve symbol
> symbol  : variable Occur
> location: class org.apache.lucene.search.BooleanClause
>                 query.add(tq, BooleanClause.Occur.SHOULD);
>                                            ^
> 3 errors
>  
> 
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Saturday, July 16, 2005 7:52 AM
> To: java-user@lucene.apache.org
> Subject: RE: Searching for similar documents
> 
> They should work with the version in SVN, as well as with 1.4.3.
> 
> Otis
> 
> 
> --- "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com> wrote:
> 
> > Thanks Otis!
> > 
> > Are there Lucene 1.4 compatiable version of these classes?
> > 
> > Thanks very much
> > -Hareesh
> > 
> > -----Original Message-----
> > From: Otis Gospodnetic
> > To: java-user@lucene.apache.org
> > Sent: 7/16/2005 3:30 AM
> > Subject: Re: Searching for similar documents
> > 
> > We've got this in Lucene's contrib/:
> > 
> > $ ll
> > contrib/similarity/src/java/org/apache/lucene/search/similar/*java
> > 
> > -rwxrwxr-x  1 otis otis 30431 Jul  9 09:20 MoreLikeThis.java* 
> > -rwxrwxr-x  1 otis otis  3612 Mar 16 17:31 SimilarityQueries.java*
> > 
> > Otis
> > 
> > --- "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com> wrote:
> > 
> > > Hi,
> > > I am trying to build a search utility that looks for
> 'similarities'
> > > between
> > > documents.
> > > In other words, for every document listed as a part of search
> > result
> > > for a
> > > phrase, I want to be able to list documents that are similar to
> it 
> > > (but not necessarily match the same search criterion). For
> example, 
> > > if my search for "Tomcat" returned "Tomcat installation guide", I
> 
> > > want to write a utility that looks for all similar installation 
> > > guides that may or may not
> > be
> > > related to Tomcat.
> > > 
> > > One approach I am thinking is to use term vectors. Algorithm:
> first 
> > > extract the top X term vectors from the current document and
> create 
> > > a
> > Boolean
> > > query
> > > for those terms. Run it against contents of other documents (I
> will 
> > > probably have to remove commonly used terms manually?). Resulting
> 
> > > documents should be similar to the original one.
> > > 
> > > I am wondering if something like this already exists or someone
> has
> > a
> > > better
> > > algorithm/solution. Or am I headed off in the wrong direction
> with 
> > > this algorithm? Your advice is highly appreciated.
> > > 
> > > Thanks
> > > -Hareesh
> > > 
> > > 
> > >
> >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > 
> > > 
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 16:37:03 2005
Return-Path: <java-user-return-15494-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55500 invoked from network); 19 Jul 2005 16:37:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 16:37:03 -0000
Received: (qmail 67059 invoked by uid 500); 19 Jul 2005 16:36:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 67038 invoked by uid 500); 19 Jul 2005 16:36:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 67024 invoked by uid 99); 19 Jul 2005 16:36:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 09:36:56 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.148.252.100] (HELO w09.bloglines.com) (216.148.252.100)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 19 Jul 2005 09:36:51 -0700
Received: (qmail 4981 invoked by uid 99); 19 Jul 2005 16:36:54 -0000
Message-ID: <1121791014.2809713759.4979.sendItem@bloglines.com>
Date: 19 Jul 2005 16:36:54 -0000
From: yahootintin.11533894@bloglines.com
To: java-user@lucene.apache.org
Subject: retrieving raw scores
MIME-Version: 1.0
Content-Type: text/plain;charset="utf-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

hi,

i need to retrieve the raw scores (3.6, 2.8, etc) for a hit and not
the normalized score (1.0, 0.8, etc).  commenting out the normalizing code
in Hits.java does what i want.  is there a better way to do this?

i'm wondering
about adding a method to Similarity.java that looks like this:
  boolean
normalizeRawScores() {
    return true;
  }

is there a better way to
do this?

thanks.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 16:42:27 2005
Return-Path: <java-user-return-15495-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89290 invoked from network); 19 Jul 2005 16:42:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 16:42:27 -0000
Received: (qmail 77336 invoked by uid 500); 19 Jul 2005 16:42:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77316 invoked by uid 500); 19 Jul 2005 16:42:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77303 invoked by uid 99); 19 Jul 2005 16:42:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 09:42:20 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.212.94.12] (HELO blackhole.fatwire.com) (209.212.94.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 09:42:15 -0700
Received: by blackhole.fatwire.com with Internet Mail Service (5.5.2656.59)
	id <3NK37QXM>; Tue, 19 Jul 2005 12:42:17 -0400
Message-ID: <E9C070038E79D411B73700D0B73EC81006DBA20B@blackhole.fatwire.com>
From: "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Searching for similar documents
Date: Tue, 19 Jul 2005 12:42:13 -0400
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2656.59)
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I want to use Lucene version 1.4.3 and upgrade to the current SVN version
later on. I was hoping if there is some way to use 'morelikethis' code in
1.4.3.

If someone could someone please extract a version of this file from source
control that corresponds to lucene 1.4.3 or if this can file can be
back-ported, it would be greatly helpful. 

Or, here are some 'guesses' to get around compilation errors using lucene
1.4.3. Please review if this correct (because I am not familiar with recent
changes)

1. 
IndexReader.getFieldNames( IndexReader.FieldOption.INDEXED ) does not
compile on 1.4.3, replace with IndexReader.getIndexedFieldNames( true )?

2. 
query.add(tq, BooleanClause.Occur.SHOULD) does not compile on 1.4.3, is this
the same as query.add( tq, true, true )?

Thank you
-Hareesh

All developers in the lucene group, you guys are awesome and it is a
pleasure to work with this library. I have one small request, is it possible
to make the archive of 'Contribution' section that corresponds to Lucene
1.4.3 release available online? 



-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Tuesday, July 19, 2005 12:17 PM
To: java-user@lucene.apache.org
Subject: RE: Searching for similar documents

You need to point to the new Lucene Jar (from SVN, not the 1.4.3)
version. 

Otis


--- Derek Westfall <dwestfall@TradelineInc.com> wrote:

> I've been trying to compile the .java into a .class and I am getting
> the
> error below.
> 
> Any idea what I am missing?
> 
> Thanks,
> 
> Derek
> 
> 
> C:\CFusionMX\wwwroot\WEB-INF\classes>javac morelikethis.java
> -classpath
> c:\cfusi
> onmx\lib\lucene-1.4.3.jar
> morelikethis.java:509: cannot resolve symbol
> symbol  : variable FieldOption
> location: class org.apache.lucene.index.IndexReader
>             Collection fields = ir.getFieldNames(
> IndexReader.FieldOption.INDEXED);
>                                                              ^
> morelikethis.java:524: cannot resolve symbol
> symbol  : variable FieldOption
> location: class org.apache.lucene.index.IndexReader
>             Collection fields = ir.getFieldNames(
> IndexReader.FieldOption.INDEXED);
>                                                              ^
> morelikethis.java:581: cannot resolve symbol
> symbol  : variable Occur
> location: class org.apache.lucene.search.BooleanClause
>                 query.add(tq, BooleanClause.Occur.SHOULD);
>                                            ^
> 3 errors
>  
> 
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Saturday, July 16, 2005 7:52 AM
> To: java-user@lucene.apache.org
> Subject: RE: Searching for similar documents
> 
> They should work with the version in SVN, as well as with 1.4.3.
> 
> Otis
> 
> 
> --- "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com> wrote:
> 
> > Thanks Otis!
> > 
> > Are there Lucene 1.4 compatiable version of these classes?
> > 
> > Thanks very much
> > -Hareesh
> > 
> > -----Original Message-----
> > From: Otis Gospodnetic
> > To: java-user@lucene.apache.org
> > Sent: 7/16/2005 3:30 AM
> > Subject: Re: Searching for similar documents
> > 
> > We've got this in Lucene's contrib/:
> > 
> > $ ll
> > contrib/similarity/src/java/org/apache/lucene/search/similar/*java
> > 
> > -rwxrwxr-x  1 otis otis 30431 Jul  9 09:20 MoreLikeThis.java* 
> > -rwxrwxr-x  1 otis otis  3612 Mar 16 17:31 SimilarityQueries.java*
> > 
> > Otis
> > 
> > --- "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com> wrote:
> > 
> > > Hi,
> > > I am trying to build a search utility that looks for
> 'similarities'
> > > between
> > > documents.
> > > In other words, for every document listed as a part of search
> > result
> > > for a
> > > phrase, I want to be able to list documents that are similar to
> it 
> > > (but not necessarily match the same search criterion). For
> example, 
> > > if my search for "Tomcat" returned "Tomcat installation guide", I
> 
> > > want to write a utility that looks for all similar installation 
> > > guides that may or may not
> > be
> > > related to Tomcat.
> > > 
> > > One approach I am thinking is to use term vectors. Algorithm:
> first 
> > > extract the top X term vectors from the current document and
> create 
> > > a
> > Boolean
> > > query
> > > for those terms. Run it against contents of other documents (I
> will 
> > > probably have to remove commonly used terms manually?). Resulting
> 
> > > documents should be similar to the original one.
> > > 
> > > I am wondering if something like this already exists or someone
> has
> > a
> > > better
> > > algorithm/solution. Or am I headed off in the wrong direction
> with 
> > > this algorithm? Your advice is highly appreciated.
> > > 
> > > Thanks
> > > -Hareesh
> > > 
> > > 
> > >
> >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > 
> > > 
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 17:13:32 2005
Return-Path: <java-user-return-15496-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7580 invoked from network); 19 Jul 2005 17:13:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 17:13:31 -0000
Received: (qmail 38327 invoked by uid 500); 19 Jul 2005 17:13:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38295 invoked by uid 500); 19 Jul 2005 17:13:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38273 invoked by uid 99); 19 Jul 2005 17:13:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 10:13:24 -0700
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,RCVD_IN_BL_SPAMCOP_NET,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fersher@hotmail.com designates 65.54.224.48 as permitted sender)
Received: from [65.54.224.48] (HELO hotmail.com) (65.54.224.48)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 10:13:19 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Tue, 19 Jul 2005 10:13:22 -0700
Message-ID: <BAY105-F38128802FEA525E6BB1044B2D40@phx.gbl>
Received: from 65.54.224.200 by by105fd.bay105.hotmail.msn.com with HTTP;
	Tue, 19 Jul 2005 17:13:21 GMT
X-Originating-IP: [65.54.224.200]
X-Originating-Email: [fersher@hotmail.com]
X-Sender: fersher@hotmail.com
From: "christopher may" <fersher@hotmail.com>
To: general-help@lucene.apache.org, java-user@lucene.apache.org
Subject: New line
Date: Tue, 19 Jul 2005 13:13:21 -0400
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 19 Jul 2005 17:13:22.0200 (UTC) FILETIME=[2A87A980:01C58C85]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I am using text files in my index. What can be used as the new line 
character ? Say I have
A batch of apples <Title> Apples . So the doc is returned as Apples and the 
summary is A batch of apples. If I want to then on the next line of the file 
put A state out west <Title>Arizona. This all blends together. What is my 
default line separator ? Or new line character. Thanks all



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 17:14:35 2005
Return-Path: <java-user-return-15497-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8302 invoked from network); 19 Jul 2005 17:14:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 17:14:35 -0000
Received: (qmail 39931 invoked by uid 500); 19 Jul 2005 17:14:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 39888 invoked by uid 500); 19 Jul 2005 17:14:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 39856 invoked by uid 99); 19 Jul 2005 17:14:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 10:14:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.39] (HELO web31106.mail.mud.yahoo.com) (68.142.200.39)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 19 Jul 2005 10:14:11 -0700
Received: (qmail 94494 invoked by uid 60001); 19 Jul 2005 17:13:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=CwJ+X/IpCl7Q8t5dxREbKTjBJv3KzyOOIdQbjf9jfJCshEAjjQWEPkpqroksBx1oMeFKFXvsQdrxD7DLpQAZrAZmmRzbPlGY17WvuchXONN0piMMUx0a/tpiZ1DW2q76DYEuKuDXCza3z4urWx2kg33ejcajTKkTIrWpvr4pqJI=  ;
Message-ID: <20050719171356.94492.qmail@web31106.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31106.mail.mud.yahoo.com via HTTP; Tue, 19 Jul 2005 10:13:51 PDT
Date: Tue, 19 Jul 2005 10:13:51 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: Searching for similar documents
To: java-user@lucene.apache.org
In-Reply-To: <E9C070038E79D411B73700D0B73EC81006DBA20B@blackhole.fatwire.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hareesh - you should be able to search for "David Spencer" and
MoreLikeThis in the mailing list archives.  He contributed that class
with 1.4.3 support originally.

Otis


--- "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com> wrote:

> I want to use Lucene version 1.4.3 and upgrade to the current SVN
> version
> later on. I was hoping if there is some way to use 'morelikethis'
> code in
> 1.4.3.
> 
> If someone could someone please extract a version of this file from
> source
> control that corresponds to lucene 1.4.3 or if this can file can be
> back-ported, it would be greatly helpful. 
> 
> Or, here are some 'guesses' to get around compilation errors using
> lucene
> 1.4.3. Please review if this correct (because I am not familiar with
> recent
> changes)
> 
> 1. 
> IndexReader.getFieldNames( IndexReader.FieldOption.INDEXED ) does not
> compile on 1.4.3, replace with IndexReader.getIndexedFieldNames( true
> )?
> 
> 2. 
> query.add(tq, BooleanClause.Occur.SHOULD) does not compile on 1.4.3,
> is this
> the same as query.add( tq, true, true )?
> 
> Thank you
> -Hareesh
> 
> All developers in the lucene group, you guys are awesome and it is a
> pleasure to work with this library. I have one small request, is it
> possible
> to make the archive of 'Contribution' section that corresponds to
> Lucene
> 1.4.3 release available online? 
> 
> 
> 
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Tuesday, July 19, 2005 12:17 PM
> To: java-user@lucene.apache.org
> Subject: RE: Searching for similar documents
> 
> You need to point to the new Lucene Jar (from SVN, not the 1.4.3)
> version. 
> 
> Otis
> 
> 
> --- Derek Westfall <dwestfall@TradelineInc.com> wrote:
> 
> > I've been trying to compile the .java into a .class and I am
> getting
> > the
> > error below.
> > 
> > Any idea what I am missing?
> > 
> > Thanks,
> > 
> > Derek
> > 
> > 
> > C:\CFusionMX\wwwroot\WEB-INF\classes>javac morelikethis.java
> > -classpath
> > c:\cfusi
> > onmx\lib\lucene-1.4.3.jar
> > morelikethis.java:509: cannot resolve symbol
> > symbol  : variable FieldOption
> > location: class org.apache.lucene.index.IndexReader
> >             Collection fields = ir.getFieldNames(
> > IndexReader.FieldOption.INDEXED);
> >                                                              ^
> > morelikethis.java:524: cannot resolve symbol
> > symbol  : variable FieldOption
> > location: class org.apache.lucene.index.IndexReader
> >             Collection fields = ir.getFieldNames(
> > IndexReader.FieldOption.INDEXED);
> >                                                              ^
> > morelikethis.java:581: cannot resolve symbol
> > symbol  : variable Occur
> > location: class org.apache.lucene.search.BooleanClause
> >                 query.add(tq, BooleanClause.Occur.SHOULD);
> >                                            ^
> > 3 errors
> >  
> > 
> > -----Original Message-----
> > From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> > Sent: Saturday, July 16, 2005 7:52 AM
> > To: java-user@lucene.apache.org
> > Subject: RE: Searching for similar documents
> > 
> > They should work with the version in SVN, as well as with 1.4.3.
> > 
> > Otis
> > 
> > 
> > --- "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com> wrote:
> > 
> > > Thanks Otis!
> > > 
> > > Are there Lucene 1.4 compatiable version of these classes?
> > > 
> > > Thanks very much
> > > -Hareesh
> > > 
> > > -----Original Message-----
> > > From: Otis Gospodnetic
> > > To: java-user@lucene.apache.org
> > > Sent: 7/16/2005 3:30 AM
> > > Subject: Re: Searching for similar documents
> > > 
> > > We've got this in Lucene's contrib/:
> > > 
> > > $ ll
> > >
> contrib/similarity/src/java/org/apache/lucene/search/similar/*java
> > > 
> > > -rwxrwxr-x  1 otis otis 30431 Jul  9 09:20 MoreLikeThis.java* 
> > > -rwxrwxr-x  1 otis otis  3612 Mar 16 17:31
> SimilarityQueries.java*
> > > 
> > > Otis
> > > 
> > > --- "Kadlabalu, Hareesh" <hareesh.kadlabalu@fatwire.com> wrote:
> > > 
> > > > Hi,
> > > > I am trying to build a search utility that looks for
> > 'similarities'
> > > > between
> > > > documents.
> > > > In other words, for every document listed as a part of search
> > > result
> > > > for a
> > > > phrase, I want to be able to list documents that are similar to
> > it 
> > > > (but not necessarily match the same search criterion). For
> > example, 
> > > > if my search for "Tomcat" returned "Tomcat installation guide",
> I
> > 
> > > > want to write a utility that looks for all similar installation
> 
> > > > guides that may or may not
> > > be
> > > > related to Tomcat.
> > > > 
> > > > One approach I am thinking is to use term vectors. Algorithm:
> > first 
> > > > extract the top X term vectors from the current document and
> > create 
> > > > a
> > > Boolean
> > > > query
> > > > for those terms. Run it against contents of other documents (I
> > will 
> > > > probably have to remove commonly used terms manually?).
> Resulting
> > 
> > > > documents should be similar to the original one.
> > > > 
> > > > I am wondering if something like this already exists or someone
> > has
> > > a
> > > > better
> > > > algorithm/solution. Or am I headed off in the wrong direction
> > with 
> > > > this algorithm? Your advice is highly appreciated.
> > > > 
> > > > Thanks
> > > > -Hareesh
> > > > 
> > > > 
> > > >
> > >
> >
> ---------------------------------------------------------------------
> > > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > > For additional commands, e-mail:
> java-user-help@lucene.apache.org
> > > > 
> > > > 
> > > 
> > > 
> > >
> >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > 
> > >
> >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > > 
> > > 
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 17:15:26 2005
Return-Path: <java-user-return-15498-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8939 invoked from network); 19 Jul 2005 17:15:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 17:15:25 -0000
Received: (qmail 43388 invoked by uid 500); 19 Jul 2005 17:15:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43371 invoked by uid 500); 19 Jul 2005 17:15:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43358 invoked by uid 99); 19 Jul 2005 17:15:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 10:15:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.38] (HELO web31105.mail.mud.yahoo.com) (68.142.200.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 19 Jul 2005 10:15:14 -0700
Received: (qmail 71839 invoked by uid 60001); 19 Jul 2005 17:15:16 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=p3XDGNU/JnZvivJRbHRPepRZTsP0m3s5gmFHOPEB6ZmyW2XXF/wDzY8Wf66fDNhFq7AhzFdI6CLuFToiGcP9LNMK0FratXdJmOa5L4r07g8Rf9fZooyymXa2RJGrX/uVxUrVbhKHI4nFOYAWyhTo1VsB26VS/zXv9o+EWzCWNpk=  ;
Message-ID: <20050719171516.71837.qmail@web31105.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31105.mail.mud.yahoo.com via HTTP; Tue, 19 Jul 2005 10:15:15 PDT
Date: Tue, 19 Jul 2005 10:15:15 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: New line
To: java-user@lucene.apache.org
In-Reply-To: <BAY105-F38128802FEA525E6BB1044B2D40@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I may be misunderstanding you, but \n is the "newline" character.
http://www.google.com/search?q=newline%20character%20java

Otis


--- christopher may <fersher@hotmail.com> wrote:

> 
> I am using text files in my index. What can be used as the new line 
> character ? Say I have
> A batch of apples <Title> Apples . So the doc is returned as Apples
> and the 
> summary is A batch of apples. If I want to then on the next line of
> the file 
> put A state out west <Title>Arizona. This all blends together. What
> is my 
> default line separator ? Or new line character. Thanks all
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 17:16:48 2005
Return-Path: <java-user-return-15499-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10169 invoked from network); 19 Jul 2005 17:16:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 17:16:47 -0000
Received: (qmail 45490 invoked by uid 500); 19 Jul 2005 17:16:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45464 invoked by uid 500); 19 Jul 2005 17:16:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45451 invoked by uid 99); 19 Jul 2005 17:16:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 10:16:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.37] (HELO web31104.mail.mud.yahoo.com) (68.142.200.37)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 19 Jul 2005 10:16:36 -0700
Received: (qmail 79854 invoked by uid 60001); 19 Jul 2005 17:16:37 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=KrsJJBuW2LZn9qoffFlDBmOvkeoqqk4xN6WQKXQkVcoajIMQe9+ngW9x/JcXQsgTshNEYeKrNqITqBZb+xBI6Iu3Vbs3dpGLCXXuBQm9JR2calueaVqrBbfaBD4s5+QY//YK0SSdecRSCm2vcYdS9dV5kDqE5+Rei74aPmryvEQ=  ;
Message-ID: <20050719171637.79852.qmail@web31104.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31104.mail.mud.yahoo.com via HTTP; Tue, 19 Jul 2005 10:16:37 PDT
Date: Tue, 19 Jul 2005 10:16:37 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: retrieving raw scores
To: java-user@lucene.apache.org
In-Reply-To: <1121791014.2809713759.4979.sendItem@bloglines.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Use HitCollector's collect method:

http://lucene.apache.org/java/docs/api/org/apache/lucene/search/HitCollector.html#collect(int,%20float)

Otis


--- yahootintin.11533894@bloglines.com wrote:

> hi,
> 
> i need to retrieve the raw scores (3.6, 2.8, etc) for a hit and not
> the normalized score (1.0, 0.8, etc).  commenting out the normalizing
> code
> in Hits.java does what i want.  is there a better way to do this?
> 
> i'm wondering
> about adding a method to Similarity.java that looks like this:
>   boolean
> normalizeRawScores() {
>     return true;
>   }
> 
> is there a better way to
> do this?
> 
> thanks.
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 17:19:59 2005
Return-Path: <java-user-return-15500-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13034 invoked from network); 19 Jul 2005 17:19:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 17:19:59 -0000
Received: (qmail 48521 invoked by uid 500); 19 Jul 2005 17:19:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48495 invoked by uid 500); 19 Jul 2005 17:19:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48476 invoked by uid 99); 19 Jul 2005 17:19:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 10:19:51 -0700
X-ASF-Spam-Status: No, hits=0.7 required=10.0
	tests=FROM_ENDS_IN_NUMS,NO_REAL_NAME
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.148.252.100] (HELO w09.bloglines.com) (216.148.252.100)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 19 Jul 2005 10:19:46 -0700
Received: (qmail 13375 invoked by uid 99); 19 Jul 2005 17:19:49 -0000
Message-ID: <1121793589.1396565303.13374.sendItem@bloglines.com>
Date: 19 Jul 2005 17:19:49 -0000
From: yahootintin.11533894@bloglines.com
To: java-user@lucene.apache.org
Subject: Re: retrieving raw scores
MIME-Version: 1.0
Content-Type: text/plain;charset="utf-8"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks.  I'll try that...

--- java-user@lucene.apache.org wrote:
Use HitCollector's
collect method:
> 
> http://lucene.apache.org/java/docs/api/org/apache/lucene/search/HitCollector.html#collect(int,%20float)

> 
> Otis
> 
> 
> --- yahootintin.11533894@bloglines.com wrote:
> 
> > hi,
> > 
> > i need to retrieve the raw scores (3.6, 2.8, etc) for a
hit and not
> > the normalized score (1.0, 0.8, etc).  commenting out the
normalizing
> > code
> > in Hits.java does what i want.  is there a better
way to do this?
> > 
> > i'm wondering
> > about adding a method to Similarity.java
that looks like this:
> >   boolean
> > normalizeRawScores() {
> >    
return true;
> >   }
> > 
> > is there a better way to
> > do this?
>
> 
> > thanks.
> > 
> > ---------------------------------------------------------------------

> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >
For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
>
> 
> 
> 
> ---------------------------------------------------------------------

> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For
additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 17:58:53 2005
Return-Path: <java-user-return-15501-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47814 invoked from network); 19 Jul 2005 17:58:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 17:58:52 -0000
Received: (qmail 10576 invoked by uid 500); 19 Jul 2005 17:58:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10550 invoked by uid 500); 19 Jul 2005 17:58:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10536 invoked by uid 99); 19 Jul 2005 17:58:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 10:58:45 -0700
X-ASF-Spam-Status: No, hits=0.1 required=10.0
	tests=HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [209.11.111.138] (HELO smtp.globixmail.com) (209.11.111.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 10:58:41 -0700
Received: from STEVESLAPTOP (unknown [213.52.147.232])
	by smtp.globixmail.com (Postfix) with ESMTP id 90582705
	for <java-user@lucene.apache.org>; Tue, 19 Jul 2005 13:58:43 -0400 (EDT)
Message-ID: <006101c58c8b$806ae8c0$0c01a8c0@STEVESLAPTOP>
From: "Stephen Halsey" <steve@moreover.com>
To: <java-user@lucene.apache.org>
References: <FBA9F803D33470489B9B4676A6B09F0B0155FA27@mt-exch1.montreal.speechworks.com> <42B05381.9060409@cos.com> <E32D5763-D04B-4EBD-A96A-8FCFDD9A4EA5@ehatchersolutions.com> <200506162003.27303@danielnaber.de> <976FC5C5-255F-4671-B844-0B2A1593A3AC@ehatchersolutions.com>
Subject: Re: QueryParser, phrases and stopwords
Date: Tue, 19 Jul 2005 18:58:42 +0100
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_005E_01C58C93.E191D840"
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2800.1506
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1506
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_005E_01C58C93.E191D840
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

Hi,

I'm just writing to ask if you know if the the change discussed below is =
likely to be in the next version of Lucene as a default for StopFilter.  =
 I'm happy to apply the diff supplied by Mike Barry on my own source =
code to stop "climate control" matching "climate of control", but if its =
likely to go into the new version soon I'll hold off and and download =
that.

thanks a lot

Stephen Halsey
  ----- Original Message -----=20
  From: Erik Hatcher=20
  To: java-user@lucene.apache.org=20
  Sent: Thursday, June 16, 2005 7:55 PM
  Subject: Re: QueryParser, phrases and stopwords



  On Jun 16, 2005, at 2:03 PM, Daniel Naber wrote:

  > On Thursday 16 June 2005 04:17, Erik Hatcher wrote:
  >
  >
  >> So we could change StopFilter to put the gaps back in safely now, I
  >> think.
  >>
  >> Thoughts?
  >>
  >
  > I personally don't have a problem with this, but shouldn't such a =20
  > change be
  > optional? Like a parameter for StopFilter or a StopGapFilter? I'm =
sure
  > there are people who prefer the way it is done now.

  Making it optional is ok by me, though I'm curious about a use case =20
  that would prefer it the way it is now.  Searching for "lucene in =20
  action" and having it match documents with "lucene action" in them =20
  seems awkward to me in a precision context.  Google allows =20
  wildcarding of words with an asterisk:

       =
<http://www.google.com/search?client=3Dsafari&rls=3Den&q=3D%22lucene+*=20
  +action%22&ie=3DUTF-8&oe=3DUTF-8>

  Erik


  ---------------------------------------------------------------------
  To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
  For additional commands, e-mail: java-user-help@lucene.apache.org


------=_NextPart_000_005E_01C58C93.E191D840--


From java-user-return-15502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 17:59:55 2005
Return-Path: <java-user-return-15502-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 48310 invoked from network); 19 Jul 2005 17:59:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 17:59:55 -0000
Received: (qmail 13613 invoked by uid 500); 19 Jul 2005 17:59:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13590 invoked by uid 500); 19 Jul 2005 17:59:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13577 invoked by uid 99); 19 Jul 2005 17:59:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 10:59:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 10:59:43 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 52A7013E2005; Tue, 19 Jul 2005 13:59:45 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id B825413E2005
	for <java-user@lucene.apache.org>; Tue, 19 Jul 2005 13:59:32 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <E9C070038E79D411B73700D0B73EC81006DBA20B@blackhole.fatwire.com>
References: <E9C070038E79D411B73700D0B73EC81006DBA20B@blackhole.fatwire.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6028A530-0414-4E4D-83AC-7F9CA02FCE53@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Searching for similar documents
Date: Tue, 19 Jul 2005 13:59:28 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.7 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Jul 19, 2005, at 12:42 PM, Kadlabalu, Hareesh wrote:
> If someone could someone please extract a version of this file from  
> source
> control that corresponds to lucene 1.4.3 or if this can file can be
> back-ported, it would be greatly helpful.

The old Jakarta Lucene Sandbox is still available via CVS:

     cvs -d:pserver:anoncvs@cvs.apache.org:/home/cvspublic co jakarta- 
lucene-sandbox

> 1.
> IndexReader.getFieldNames( IndexReader.FieldOption.INDEXED ) does not
> compile on 1.4.3, replace with IndexReader.getIndexedFieldNames 
> ( true )?

I think you want false, not true.  The boolean flag refers to term  
vector data.

> 2.
> query.add(tq, BooleanClause.Occur.SHOULD) does not compile on  
> 1.4.3, is this
> the same as query.add( tq, true, true )?

No.  It's the same as add(tq, false, false)

> I have one small request, is it possible
> to make the archive of 'Contribution' section that corresponds to  
> Lucene
> 1.4.3 release available online?

At this point we're probably too far removed from it to accomplish  
that cleanly.  MoreLikeThis may not have ever been 1.4.3 compatible -  
I don't recall - it certainly wasn't added until well after 1.4.3 was  
released.  The CVS repository should be sufficient for folks to build  
it themselves if necessary.

For most of the old Sandbox contributions, you can find binary  
releases of those in the Lucene in Action code distribution at  
www.lucenebook.com

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 19 18:02:33 2005
Return-Path: <java-user-return-15503-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49441 invoked from network); 19 Jul 2005 18:02:33 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 19 Jul 2005 18:02:33 -0000
Received: (qmail 18288 invoked by uid 500); 19 Jul 2005 18:02:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18072 invoked by uid 500); 19 Jul 2005 18:02:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18059 invoked by uid 99); 19 Jul 2005 18:02:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 11:02:25 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_60_70,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [65.244.170.27] (HELO flexbe01.crcpress.com) (65.244.170.27)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 11:02:21 -0700
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----_=_NextPart_001_01C58C8C.03892258"
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Subject: Corrupt index?
Date: Tue, 19 Jul 2005 14:02:23 -0400
Message-ID: <78A2AFE317F5AD48B823BE740D4A8152240739@flexbe01.crcpress.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Corrupt index?
Thread-Index: AcWMjAK+1FRs2uEeTEWyFpJqojiJfw==
From: "Kipping, Peter" <Peter.Kipping@taylorandfrancis.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------_=_NextPart_001_01C58C8C.03892258
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable

Hi,

I rebuilt my index with only a few minor changes, and now when I search
on it I get nothing but out of memory exceptions.  I don't know what
would cause this but is there a way you can test the integrity of your
index? =20

Thanks,
Peter

------_=_NextPart_001_01C58C8C.03892258--

From java-user-return-15504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 05:21:54 2005
Return-Path: <java-user-return-15504-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 90367 invoked from network); 20 Jul 2005 05:21:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 05:21:53 -0000
Received: (qmail 85408 invoked by uid 500); 20 Jul 2005 05:21:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85388 invoked by uid 500); 20 Jul 2005 05:21:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85375 invoked by uid 99); 20 Jul 2005 05:21:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 19 Jul 2005 22:21:47 -0700
X-ASF-Spam-Status: No, hits=0.9 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_20_30,HTML_MESSAGE,MSGID_FROM_MTA_HEADER
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.83.28] (HELO rediffmail.com) (203.199.83.28)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 19 Jul 2005 22:21:41 -0700
Received: (qmail 29010 invoked by uid 510); 20 Jul 2005 05:22:29 -0000
Date: 20 Jul 2005 05:22:29 -0000
Message-ID: <20050720052229.29005.qmail@webmail18.rediffmail.com>
Received: from unknown (61.95.167.91) by rediffmail.com via HTTP; 20 jul 2005 05:22:28 -0000
MIME-Version: 1.0
From: "Rahul D Thakare" <rahul_thakare@rediffmail.com>
Reply-To: "Rahul D Thakare" <rahul_thakare@rediffmail.com>
To: java-user@lucene.apache.org
Cc: "Ian Lea" <ian.lea@gmail.com>
Subject: Re: Re: wild card with keyword fileld
Content-type: multipart/alternative;
	boundary="Next_1121836948---0-203.199.83.28-28933"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Next_1121836948---0-203.199.83.28-28933
Content-type: text/plain;
	charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

 =A0=0AHi Ian,=0A=0A  Yes, I did implement Eric's suggestion last week, but=
 couldn't help.=0A I am using a demo program from Lucene.jar to test this, =
let me put a code here.=0A=0A  doc.add(Field.Keyword("keywords", "MAIN BOAR=
D"));=0A  while indexing=0A=0Aand for retrieving=0A=0A PerFieldAnalyzerWrap=
per analyzer =3D new PerFieldAnalyzerWrapper( new StandardAnalyzer() );=0A =
analyzer.addAnalyzer( "keywords", new KeywordAnalyzer() );=0A=0A/* QueryPar=
ser qp =3D new QueryParser(line,analyzer);=0A  qp.setLowercaseWildcardTerms=
(false);=0A  Query query =3D qp.parse(line, "keywords", analyzer);=0A*/=0A =
Query query =3D QueryParser.parse(line, "keywords", analyzer);=0A=0A  you c=
an see Eric's suggestion implemented in commented line.=0A=0A am I doing so=
mething wrong here ? please let me know.=0A=0A  thanks and regards=0A=0A  R=
ahul Thakare..=0A=0A=0AOn Tue, 19 Jul 2005 Ian Lea wrote :=0A>Have you trie=
d Erik's suggestion from last week?=0A>http://mail-archives.apache.org/mod_=
mbox/lucene-java-user/200507.mbox/%3cFCE3C9A0-2707-4303-9F33-175015F02EE3@e=
hatchersolutions.com%3e=0A>=0A>There is certainly some case confusion in yo=
ur examples there.=0A>Personally, I tend to just lowercase all text on inde=
xing and=0A>searching.=0A>=0A>--=0A>Ian.=0A>=0A>On 19 Jul 2005 05:31:08 -00=
00, Rahul D Thakare=0A><rahul_thakare@rediffmail.com> wrote:=0A> >=0A> > Hi=
,=0A> >=0A> >   I am using Field.Keyword for indexing multi-word keyword (e=
g: MAIN LOGIG). Also used keywordAnalyzer, but wild card search is not comi=
ng up. Is there anything which I need to do in addition or, wild card searc=
h is not possible with keyword field.=0A> >=0A> > thanks and regards,=0A> >=
=0A> > Rahul Thakare..=0A> >=0A>=0A>---------------------------------------=
------------------------------=0A>To unsubscribe, e-mail: java-user-unsubsc=
ribe@lucene.apache.org=0A>For additional commands, e-mail: java-user-help@l=
ucene.apache.org=0A>=0A
--Next_1121836948---0-203.199.83.28-28933--


From java-user-return-15505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 08:59:30 2005
Return-Path: <java-user-return-15505-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89723 invoked from network); 20 Jul 2005 08:59:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 08:59:29 -0000
Received: (qmail 23132 invoked by uid 500); 20 Jul 2005 08:59:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23096 invoked by uid 500); 20 Jul 2005 08:59:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23072 invoked by uid 99); 20 Jul 2005 08:59:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 01:59:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ian.lea@gmail.com designates 64.233.182.202 as permitted sender)
Received: from [64.233.182.202] (HELO nproxy.gmail.com) (64.233.182.202)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 01:59:14 -0700
Received: by nproxy.gmail.com with SMTP id d4so360364nfe
        for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 01:59:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=SrKa5VUjWHM03xn1+qalCxXUjbk0B7ks49qyPvRm54IUEYToLCaaLQ/OT7QXJywZrJWut+GIXHjmnkLqALiTNSLJRcsb3ZB2evfit7iBTX2kU93uQ+NAew8R0kel0GaUl7sYC+ZEdWjq26T8r98dp91+9RtDtNMF3ky417G7yqk=
Received: by 10.48.250.9 with SMTP id x9mr1614nfh;
        Wed, 20 Jul 2005 01:59:15 -0700 (PDT)
Received: by 10.48.250.3 with HTTP; Wed, 20 Jul 2005 01:59:15 -0700 (PDT)
Message-ID: <8c4e686105072001593968ece5@mail.gmail.com>
Date: Wed, 20 Jul 2005 09:59:15 +0100
From: Ian Lea <ian.lea@gmail.com>
Reply-To: Ian Lea <ian.lea@gmail.com>
To: Rahul D Thakare <rahul_thakare@rediffmail.com>, java-user@lucene.apache.org
Subject: Re: Re: wild card with keyword fileld
In-Reply-To: <20050720052229.29005.qmail@webmail18.rediffmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20050720052229.29005.qmail@webmail18.rediffmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What does query.toString() show in each case?  I still think you
should try lowercasing everything, if only to see if it helps.  If it
does you could either keep it or figure out what you need to do.


--
Ian.


On 20 Jul 2005 05:22:29 -0000, Rahul D Thakare
<rahul_thakare@rediffmail.com> wrote:
>=20
>=20
>   =20
>  Hi Ian,
> =20
>    Yes, I did implement Eric's suggestion last week, but couldn't help.
>  I am using a demo program from Lucene.jar to test this, let me put a cod=
e
> here.
> =20
>    doc.add(Field.Keyword("keywords", "MAIN BOARD"));
>    while indexing
> =20
>  and for retrieving
> =20
>  PerFieldAnalyzerWrapper analyzer =3D new PerFieldAnalyzerWrapper( new
> StandardAnalyzer() );
>  analyzer.addAnalyzer( "keywords", new KeywordAnalyzer() );
> =20
>  /* QueryParser qp =3D new QueryParser(line,analyzer);
>    qp.setLowercaseWildcardTerms(false);
>    Query query =3D qp.parse(line, "keywords", analyzer);
>  */
>  Query query =3D QueryParser.parse(line, "keywords", analyzer);
> =20
>    you can see Eric's suggestion implemented in commented line.
> =20
>  am I doing something wrong here ? please let me know.
> =20
>    thanks and regards
> =20
>    Rahul Thakare..
> =20
> =20
>  On Tue, 19 Jul 2005 Ian Lea wrote :
>=20
>  >Have you tried Erik's suggestion from last week?
> >http://mail-archives.apache.org/mod_mbox/lucene-java-user/200507.mbox/%3=
cFCE3C9A0-2707-4303-9F33-175015F02EE3@ehatchersolutions.com%3e
>  >
>  >There is certainly some case confusion in your examples there.
>  >Personally, I tend to just lowercase all text on indexing and
>  >searching.
>  >
>  >--
>  >Ian.
>  >
>  >On 19 Jul 2005 05:31:08 -0000, Rahul D Thakare
>  ><rahul_thakare@rediffmail.com> wrote:
>  > >
>  > > Hi,
>  > >
>  > >  I am using Field.Keyword for indexing multi-word keyword (eg: MAIN
> LOGIG). Also used keywordAnalyzer, but wild card search is not coming up.=
 Is
> there anything which I need to do in addition or, wild card search is not
> possible with keyword field.
>  > >
>  > > thanks and regards,
>  > >
>  > > Rahul Thakare..

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 09:45:59 2005
Return-Path: <java-user-return-15506-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9924 invoked from network); 20 Jul 2005 09:45:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 09:45:59 -0000
Received: (qmail 74915 invoked by uid 500); 20 Jul 2005 09:45:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74787 invoked by uid 500); 20 Jul 2005 09:45:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74756 invoked by uid 99); 20 Jul 2005 09:45:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 02:45:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 02:45:36 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D00BF13E2005; Wed, 20 Jul 2005 05:45:35 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 5EC2C13E2005
	for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 05:45:10 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050720052229.29005.qmail@webmail18.rediffmail.com>
References: <20050720052229.29005.qmail@webmail18.rediffmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <526DC826-50C1-4302-ADA0-629E010F265D@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: wild card with keyword fileld
Date: Wed, 20 Jul 2005 05:45:06 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 20, 2005, at 1:22 AM, Rahul D Thakare wrote:
> /* QueryParser qp = new QueryParser(line,analyzer);
>   qp.setLowercaseWildcardTerms(false);
>   Query query = qp.parse(line, "keywords", analyzer);
> */
>  Query query = QueryParser.parse(line, "keywords", analyzer);

You've been bitten, as many others have, of not using the proper  
parse method.  parse(String, String, Analyzer) is a _static_ method  
and completely ignores your set* calls.  Use parse(String).

I have deprecated the static method for the 1.9 release and will  
remove it in the 2.0 release (coming in the near unknown future).

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 09:47:35 2005
Return-Path: <java-user-return-15507-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10477 invoked from network); 20 Jul 2005 09:47:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 09:47:35 -0000
Received: (qmail 78131 invoked by uid 500); 20 Jul 2005 09:47:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77931 invoked by uid 500); 20 Jul 2005 09:47:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77917 invoked by uid 99); 20 Jul 2005 09:47:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 02:47:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 02:47:22 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id E455F13E2006; Wed, 20 Jul 2005 05:47:24 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 18AC513E2005
	for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 05:47:07 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <20050720052229.29005.qmail@webmail18.rediffmail.com>
References: <20050720052229.29005.qmail@webmail18.rediffmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CCA01420-B1A2-44E3-99DC-C0651E8E60BA@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: wild card with keyword fileld
Date: Wed, 20 Jul 2005 05:46:17 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 20, 2005, at 1:22 AM, Rahul D Thakare wrote:

>
> Hi Ian,
>
>   Yes, I did implement Eric's suggestion last week, but couldn't help.

Also, just to note it.... I did mention the parse(String) method in  
the e-mail referenced below!  :)

     Erik

>  I am using a demo program from Lucene.jar to test this, let me put  
> a code here.
>
>   doc.add(Field.Keyword("keywords", "MAIN BOARD"));
>   while indexing
>
> and for retrieving
>
>  PerFieldAnalyzerWrapper analyzer = new PerFieldAnalyzerWrapper 
> ( new StandardAnalyzer() );
>  analyzer.addAnalyzer( "keywords", new KeywordAnalyzer() );
>
> /* QueryParser qp = new QueryParser(line,analyzer);
>   qp.setLowercaseWildcardTerms(false);
>   Query query = qp.parse(line, "keywords", analyzer);
> */
>  Query query = QueryParser.parse(line, "keywords", analyzer);
>
>   you can see Eric's suggestion implemented in commented line.
>
>  am I doing something wrong here ? please let me know.
>
>   thanks and regards
>
>   Rahul Thakare..
>
>
> On Tue, 19 Jul 2005 Ian Lea wrote :
>
>> Have you tried Erik's suggestion from last week?
>> http://mail-archives.apache.org/mod_mbox/lucene-java-user/ 
>> 200507.mbox/% 
>> 3cFCE3C9A0-2707-4303-9F33-175015F02EE3@ehatchersolutions.com%3e
>>
>> There is certainly some case confusion in your examples there.
>> Personally, I tend to just lowercase all text on indexing and
>> searching.
>>
>> --
>> Ian.
>>
>> On 19 Jul 2005 05:31:08 -0000, Rahul D Thakare
>> <rahul_thakare@rediffmail.com> wrote:
>>
>>>
>>> Hi,
>>>
>>>   I am using Field.Keyword for indexing multi-word keyword (eg:  
>>> MAIN LOGIG). Also used keywordAnalyzer, but wild card search is  
>>> not coming up. Is there anything which I need to do in addition  
>>> or, wild card search is not possible with keyword field.
>>>
>>> thanks and regards,
>>>
>>> Rahul Thakare..
>>>
>>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 14:05:56 2005
Return-Path: <java-user-return-15508-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27381 invoked from network); 20 Jul 2005 14:05:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 14:05:56 -0000
Received: (qmail 49789 invoked by uid 500); 20 Jul 2005 14:05:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49752 invoked by uid 500); 20 Jul 2005 14:05:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49732 invoked by uid 99); 20 Jul 2005 14:05:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 07:05:47 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_30_40,HTML_MESSAGE,MSGID_FROM_MTA_HEADER
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.83.38] (HELO rediffmail.com) (203.199.83.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Jul 2005 07:05:42 -0700
Received: (qmail 26200 invoked by uid 510); 20 Jul 2005 14:06:32 -0000
Date: 20 Jul 2005 14:06:32 -0000
Message-ID: <20050720140632.26199.qmail@webmail28.rediffmail.com>
Received: from unknown (61.95.167.91) by rediffmail.com via HTTP; 20 jul 2005 14:06:32 -0000
MIME-Version: 1.0
From: "Rahul D Thakare" <rahul_thakare@rediffmail.com>
Reply-To: "Rahul D Thakare" <rahul_thakare@rediffmail.com>
To: java-user@lucene.apache.org
Subject: Re: Re: wild card with keyword fileld
Content-type: multipart/alternative;
	boundary="Next_1121868392---0-203.199.83.38-26190"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Next_1121868392---0-203.199.83.38-26190
Content-type: text/plain;
	charset=iso-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

 =A0 =0AErik/Ian=0A=0A I tried using query.parse(String) did't return any r=
esult=0A also my query.toString() returns mainboard:keywords  if i give the=
 keyword as mainboard. pls see the changed code again.=0A=0A   PerFieldAnal=
yzerWrapper analyzer =3D new PerFieldAnalyzerWrapper( new StandardAnalyzer(=
) );=0A analyzer.addAnalyzer( "keywords", new KeywordAnalyzer() );=0A     =
=0A  QueryParser qp =3D new QueryParser(line,analyzer);=0A  qp.setLowercase=
WildcardTerms(false);=0A  Query query =3D qp.parse("keywords");=0A=0A  and =
=0A  doc.add(Field.Keyword("keywords", "mainboard"));=0A=0A  please advice =
if I am doing someting wrong=0A=0A  regards=0A  rahul...=0A=0A=0AOn Wed, 20=
 Jul 2005 Erik Hatcher wrote :=0A>=0A>On Jul 20, 2005, at 1:22 AM, Rahul D =
Thakare wrote:=0A>=0A>>=0A>>Hi Ian,=0A>>=0A>>   Yes, I did implement Eric's=
 suggestion last week, but couldn't help.=0A>=0A>Also, just to note it.... =
I did mention the parse(String) method in  the e-mail referenced below!  :)=
=0A>=0A>     Erik=0A>=0A>>  I am using a demo program from Lucene.jar to te=
st this, let me put  a code here.=0A>>=0A>>   doc.add(Field.Keyword("keywor=
ds", "MAIN BOARD"));=0A>>   while indexing=0A>>=0A>>and for retrieving=0A>>=
=0A>>  PerFieldAnalyzerWrapper analyzer =3D new PerFieldAnalyzerWrapper ( n=
ew StandardAnalyzer() );=0A>>  analyzer.addAnalyzer( "keywords", new Keywor=
dAnalyzer() );=0A>>=0A>>/* QueryParser qp =3D new QueryParser(line,analyzer=
);=0A>>   qp.setLowercaseWildcardTerms(false);=0A>>   Query query =3D qp.pa=
rse(line, "keywords", analyzer);=0A>>*/=0A>>  Query query =3D QueryParser.p=
arse(line, "keywords", analyzer);=0A>>=0A>>   you can see Eric's suggestion=
 implemented in commented line.=0A>>=0A>>  am I doing something wrong here =
? please let me know.=0A>>=0A>>   thanks and regards=0A>>=0A>>   Rahul Thak=
are..=0A>>=0A>>=0A>>On Tue, 19 Jul 2005 Ian Lea wrote :=0A>>=0A>>>Have you =
tried Erik's suggestion from last week?=0A>>>http://mail-archives.apache.or=
g/mod_mbox/lucene-java-user/ 200507.mbox/% 3cFCE3C9A0-2707-4303-9F33-175015=
F02EE3@ehatchersolutions.com%3e=0A>>>=0A>>>There is certainly some case con=
fusion in your examples there.=0A>>>Personally, I tend to just lowercase al=
l text on indexing and=0A>>>searching.=0A>>>=0A>>>--=0A>>>Ian.=0A>>>=0A>>>O=
n 19 Jul 2005 05:31:08 -0000, Rahul D Thakare=0A>>><rahul_thakare@rediffmai=
l.com> wrote:=0A>>>=0A>>>>=0A>>>>Hi,=0A>>>>=0A>>>>   I am using Field.Keywo=
rd for indexing multi-word keyword (eg:  MAIN LOGIG). Also used keywordAnal=
yzer, but wild card search is  not coming up. Is there anything which I nee=
d to do in addition  or, wild card search is not possible with keyword fiel=
d.=0A>>>>=0A>>>>thanks and regards,=0A>>>>=0A>>>>Rahul Thakare..=0A>>>>=0A>=
>>>=0A>>>=0A>>>------------------------------------------------------------=
---------=0A>>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.=
org=0A>>>For additional commands, e-mail: java-user-help@lucene.apache.org=
=0A>>>=0A>>=0A>=0A>=0A>----------------------------------------------------=
-----------------=0A>To unsubscribe, e-mail: java-user-unsubscribe@lucene.a=
pache.org=0A>For additional commands, e-mail: java-user-help@lucene.apache.=
org=0A>=0A
--Next_1121868392---0-203.199.83.38-26190--


From java-user-return-15509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 14:15:47 2005
Return-Path: <java-user-return-15509-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 34973 invoked from network); 20 Jul 2005 14:15:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 14:15:47 -0000
Received: (qmail 78054 invoked by uid 500); 20 Jul 2005 14:15:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78033 invoked by uid 500); 20 Jul 2005 14:15:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78020 invoked by uid 99); 20 Jul 2005 14:15:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 07:15:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ian.lea@gmail.com designates 64.233.182.197 as permitted sender)
Received: from [64.233.182.197] (HELO nproxy.gmail.com) (64.233.182.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 07:15:30 -0700
Received: by nproxy.gmail.com with SMTP id d4so384485nfe
        for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 07:15:32 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=V/2mIRpXVP393wuOZJ7smMinlaUqrlIZ/rI6H613BG8v3qIHaDGAH84yruzfTK7XUHnV3nRC1WcNDRDtjuryGPt2fhtELstTkQpKebhDbCV4rKoKtKQ2L5x+8MHOWIq/W6ihSbLdf15lx0TQMh0fybj1XheOxe4dK+kBiHTIyRU=
Received: by 10.48.249.6 with SMTP id w6mr18378nfh;
        Wed, 20 Jul 2005 07:15:32 -0700 (PDT)
Received: by 10.48.250.3 with HTTP; Wed, 20 Jul 2005 07:15:32 -0700 (PDT)
Message-ID: <8c4e6861050720071553228f2e@mail.gmail.com>
Date: Wed, 20 Jul 2005 15:15:32 +0100
From: Ian Lea <ian.lea@gmail.com>
Reply-To: Ian Lea <ian.lea@gmail.com>
To: java-user@lucene.apache.org, Rahul D Thakare <rahul_thakare@rediffmail.com>
Subject: Re: Re: wild card with keyword fileld
In-Reply-To: <20050720140632.26199.qmail@webmail28.rediffmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20050720140632.26199.qmail@webmail28.rediffmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Rahul

Looks like you've got the args mixed up in your qp calls.  I think it shoul=
d be:

 QueryParser qp =3D new QueryParser("keywords",analyzer);
 qp.setLowercaseWildcardTerms(false);=20
 Query query =3D qp.parse(line);


--
Ian.


On 20 Jul 2005 14:06:32 -0000, Rahul D Thakare
<rahul_thakare@rediffmail.com> wrote:
> =20
> Erik/Ian
>=20
>  I tried using query.parse(String) did't return any result
>  also my query.toString() returns mainboard:keywords  if i give the keywo=
rd as mainboard. pls see the changed code again.
>=20
>    PerFieldAnalyzerWrapper analyzer =3D new PerFieldAnalyzerWrapper( new =
StandardAnalyzer() );
>  analyzer.addAnalyzer( "keywords", new KeywordAnalyzer() );
>=20
>   QueryParser qp =3D new QueryParser(line,analyzer);
>   qp.setLowercaseWildcardTerms(false);
>   Query query =3D qp.parse("keywords");
>=20
>   and
>   doc.add(Field.Keyword("keywords", "mainboard"));
>=20
>   please advice if I am doing someting wrong
>=20
>   regards
>   rahul...
>=20
>=20
> On Wed, 20 Jul 2005 Erik Hatcher wrote :
> >
> >On Jul 20, 2005, at 1:22 AM, Rahul D Thakare wrote:
> >
> >>
> >>Hi Ian,
> >>
> >>   Yes, I did implement Eric's suggestion last week, but couldn't help.
> >
> >Also, just to note it.... I did mention the parse(String) method in  the=
 e-mail referenced below!  :)
> >
> >     Erik
> >
> >>  I am using a demo program from Lucene.jar to test this, let me put  a=
 code here.
> >>
> >>   doc.add(Field.Keyword("keywords", "MAIN BOARD"));
> >>   while indexing
> >>
> >>and for retrieving
> >>
> >>  PerFieldAnalyzerWrapper analyzer =3D new PerFieldAnalyzerWrapper ( ne=
w StandardAnalyzer() );
> >>  analyzer.addAnalyzer( "keywords", new KeywordAnalyzer() );
> >>
> >>/* QueryParser qp =3D new QueryParser(line,analyzer);
> >>   qp.setLowercaseWildcardTerms(false);
> >>   Query query =3D qp.parse(line, "keywords", analyzer);
> >>*/
> >>  Query query =3D QueryParser.parse(line, "keywords", analyzer);
> >>
> >>   you can see Eric's suggestion implemented in commented line.
> >>
> >>  am I doing something wrong here ? please let me know.
> >>
> >>   thanks and regards
> >>
> >>   Rahul Thakare..
> >>
> >>
> >>On Tue, 19 Jul 2005 Ian Lea wrote :
> >>
> >>>Have you tried Erik's suggestion from last week?
> >>>http://mail-archives.apache.org/mod_mbox/lucene-java-user/ 200507.mbox=
/% 3cFCE3C9A0-2707-4303-9F33-175015F02EE3@ehatchersolutions.com%3e
> >>>
> >>>There is certainly some case confusion in your examples there.
> >>>Personally, I tend to just lowercase all text on indexing and
> >>>searching.
> >>>
> >>>--
> >>>Ian.
> >>>
> >>>On 19 Jul 2005 05:31:08 -0000, Rahul D Thakare
> >>><rahul_thakare@rediffmail.com> wrote:
> >>>
> >>>>
> >>>>Hi,
> >>>>
> >>>>   I am using Field.Keyword for indexing multi-word keyword (eg:  MAI=
N LOGIG). Also used keywordAnalyzer, but wild card search is  not coming up=
. Is there anything which I need to do in addition  or, wild card search is=
 not possible with keyword field.
> >>>>
> >>>>thanks and regards,
> >>>>
> >>>>Rahul Thakare..
> >>>>
> >>>>
> >>>
> >>>---------------------------------------------------------------------
> >>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>>For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>
> >
> >
> >---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 17:47:46 2005
Return-Path: <java-user-return-15510-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40725 invoked from network); 20 Jul 2005 17:47:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 17:47:46 -0000
Received: (qmail 85639 invoked by uid 500); 20 Jul 2005 17:47:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85619 invoked by uid 500); 20 Jul 2005 17:47:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85606 invoked by uid 99); 20 Jul 2005 17:47:39 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 10:47:39 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.128] (HELO mis011-1.exch011.intermedia.net) (64.78.21.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 10:47:33 -0700
Received: from ehost011-1.exch011.intermedia.net ([64.78.21.3]) by mis011-1.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 20 Jul 2005 10:47:36 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Searching for similar documents
Date: Wed, 20 Jul 2005 10:47:35 -0700
Message-ID: <41EE526EC2D3C74286415780D3BA9F870CEB05CD@ehost011-1.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching for similar documents
Thread-Index: AcWMi6sU46GjCanVSjK2odRDqBOULAAx2biw
From: "Derek Westfall" <dwestfall@TradelineInc.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Jul 2005 17:47:36.0184 (UTC) FILETIME=[1D367F80:01C58D53]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I hope you will forgive the newbie question but do I have to add the
MoreLikeThis.class file to the Lucene-1.4.3.JAR for it to work?

I put the .class file in my \wwwroot\web-inf\classes folder and I am
getting an error I don't understand when trying to instantiate the
object from Cold Fusion. I also added the .class to a .jar and put it in
\lib to no avail. I don't know if this is a CF problem or a Java
problem.

CF Error: Object Instantiation Exception. =20
An exception occurred when instantiating a java object. The cause of
this exception was that: MoreLikeThis (wrong name:
org/apache/lucene/search/similar/MoreLikeThis). =20


<cfscript>
	index=3D"\\www\lucene\myindex";
	// get an IndexReader object to use in the constructor to the
searcher var
	indexReader =3D CreateObject("java",
"org.apache.lucene.index.IndexReader");
=09
	// get an IndexSearcher object
	searcher =3D CreateObject("java",
"org.apache.lucene.search.IndexSearcher");
	searcher =3D searcher.init(indexReader.open(index));

	// get an Analyzer object	 =20
	analyzer =3D CreateObject("java",
"org.apache.lucene.analysis.standard.StandardAnalyzer");=09
	analyzer.init();
=09
	mlt =3D CreateObject("java", "MoreLikeThis"); // <---- this is the
line that causes the error
	mlt=3Dmlt.init(indexReader);
=09
	// [ I have also tried 	mlt =3D CreateObject("java",
"org.apache.lucene.search.similar.MoreLikeThis");]


 	target =3D "test of the similarity feature";
=09
 	query =3D mlt.like( target);
	hits =3D CreateObject("java", "org.apache.lucene.search.Hits");
	hits =3D searcher.search(query);
 </cfscript>



-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Tuesday, July 19, 2005 10:59 AM
To: java-user@lucene.apache.org
Subject: Re: Searching for similar documents

On Jul 19, 2005, at 12:42 PM, Kadlabalu, Hareesh wrote:
> If someone could someone please extract a version of this file from=20
> source control that corresponds to lucene 1.4.3 or if this can file=20
> can be back-ported, it would be greatly helpful.

The old Jakarta Lucene Sandbox is still available via CVS:

     cvs -d:pserver:anoncvs@cvs.apache.org:/home/cvspublic co jakarta-
lucene-sandbox

> 1.
> IndexReader.getFieldNames( IndexReader.FieldOption.INDEXED ) does not=20
> compile on 1.4.3, replace with IndexReader.getIndexedFieldNames ( true

> )?

I think you want false, not true.  The boolean flag refers to term
vector data.

> 2.
> query.add(tq, BooleanClause.Occur.SHOULD) does not compile on 1.4.3,=20
> is this the same as query.add( tq, true, true )?

No.  It's the same as add(tq, false, false)

> I have one small request, is it possible to make the archive of=20
> 'Contribution' section that corresponds to Lucene
> 1.4.3 release available online?

At this point we're probably too far removed from it to accomplish that
cleanly.  MoreLikeThis may not have ever been 1.4.3 compatible - I don't
recall - it certainly wasn't added until well after 1.4.3 was released.
The CVS repository should be sufficient for folks to build it themselves
if necessary.

For most of the old Sandbox contributions, you can find binary releases
of those in the Lucene in Action code distribution at www.lucenebook.com

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 19:18:50 2005
Return-Path: <java-user-return-15511-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61239 invoked from network); 20 Jul 2005 19:18:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 19:18:50 -0000
Received: (qmail 22605 invoked by uid 500); 20 Jul 2005 19:18:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 22574 invoked by uid 500); 20 Jul 2005 19:18:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 22561 invoked by uid 99); 20 Jul 2005 19:18:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 12:18:42 -0700
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=DNS_FROM_RFC_ABUSE,DNS_FROM_RFC_POST,MSGID_FROM_MTA_HEADER,RCVD_IN_BL_SPAMCOP_NET,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fersher@hotmail.com designates 65.54.224.19 as permitted sender)
Received: from [65.54.224.19] (HELO hotmail.com) (65.54.224.19)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 12:18:38 -0700
Received: from mail pickup service by hotmail.com with Microsoft SMTPSVC;
	 Wed, 20 Jul 2005 12:16:57 -0700
Message-ID: <BAY105-F91CC77ADBC918D60B45E1B2D70@phx.gbl>
Received: from 65.54.224.200 by by105fd.bay105.hotmail.msn.com with HTTP;
	Wed, 20 Jul 2005 19:16:57 GMT
X-Originating-IP: [65.54.224.200]
X-Originating-Email: [fersher@hotmail.com]
X-Sender: fersher@hotmail.com
From: "christopher may" <fersher@hotmail.com>
To: java-user@lucene.apache.org
Subject: Re: New line
Date: Wed, 20 Jul 2005 15:16:57 -0400
Mime-Version: 1.0
Content-Type: text/plain; format=flowed
X-OriginalArrivalTime: 20 Jul 2005 19:16:57.0617 (UTC) FILETIME=[98E04010:01C58D5F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


When my text file is being searched it seems every line is  blending. So I 
need the index searcher to see a newline character or field separator in the 
text file. What can be used in the text file to separate my lines ?

>From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
>Reply-To: java-user@lucene.apache.org
>To: java-user@lucene.apache.org
>Subject: Re: New line
>Date: Tue, 19 Jul 2005 10:15:15 -0700 (PDT)
>
>I may be misunderstanding you, but \n is the "newline" character.
>http://www.google.com/search?q=newline%20character%20java
>
>Otis
>
>
>--- christopher may <fersher@hotmail.com> wrote:
>
> >
> > I am using text files in my index. What can be used as the new line
> > character ? Say I have
> > A batch of apples <Title> Apples . So the doc is returned as Apples
> > and the
> > summary is A batch of apples. If I want to then on the next line of
> > the file
> > put A state out west <Title>Arizona. This all blends together. What
> > is my
> > default line separator ? Or new line character. Thanks all
> >
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 19:38:13 2005
Return-Path: <java-user-return-15512-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 75212 invoked from network); 20 Jul 2005 19:38:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 19:38:13 -0000
Received: (qmail 64439 invoked by uid 500); 20 Jul 2005 19:38:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64420 invoked by uid 500); 20 Jul 2005 19:38:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64407 invoked by uid 99); 20 Jul 2005 19:38:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 12:38:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 12:38:01 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id F042A13E2007; Wed, 20 Jul 2005 15:38:01 -0400 (EDT)
Received: from [128.143.143.221] (d-128-143-221.bootp.Virginia.EDU [128.143.143.221])
	by ehatchersolutions.com (Postfix) with ESMTP id 4B62513E2006
	for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 15:37:45 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <418eb29d0507190819102390b2@mail.gmail.com>
References: <418eb29d0507190819102390b2@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6E366C0B-DCC4-445A-89E7-D22C3BEEAFBF@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: QueryParser handling of backslash characters
Date: Wed, 20 Jul 2005 15:37:45 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 19, 2005, at 11:19 AM, Jeff Davis wrote:

> Hi,
>
> I'm seeing some strange behavior in the way the QueryParser handles
> consecutive backslash characters.  I know that backslash is the escape
> character in Lucene, and so I would expect "\\\\" to match fields that
> have two consecutive backslashes, but this does not seem to be the
> case.
>
> The fields I'm searching are UNC paths, e.g. "\\192.168.0.15\public".
> The only way I can get my query to find the record containing that
> value is to type "FieldName:\\\192.168.0.15\\public" (three slashes).
> Why is the third backslash character not treated as an escape?  Is it
> just that any backslash that is preceded by a backslash is interpreted
> as a literal backslash character, regardless of whether the "escape"
> backslash was itself escaped?
>
> I can code around this, but it seems inconsistent with the way that
> escape characters usually work.  Is this a bug, or is it intentional,
> or am I missing something?

I've waited until I had a chance to experiment with this before  
replying.  I say that this is a bug.  There is a private method in  
QueryParser called discardEscapeChar (shown below).  I copied it to a  
JUnit test case and gave it this assert:

     assertEquals("\\\\\\\\192.168.0.15\\\\public", discardEscapeChar 
("\\\\192.168.0.15\\\\public"));

This test fails with:

     Expected:\\\\192.168.0.15\\public
     Actual  :\192.168.0.15\public

Which is wrong in my opinion.  (though my head hurts thinking about  
metaescaping backslashes in Java code to make this a proper test)

The bug is isolated to the discardEscapeChar() method where it eats  
too many backslashes.  Could you have a shot at tweaking that method  
to do the right thing and submit a patch?

   private String discardEscapeChar(String input) {
     char[] caSource = input.toCharArray();
     char[] caDest = new char[caSource.length];
     int j = 0;
     for (int i = 0; i < caSource.length; i++) {
       if ((caSource[i] != '\\') || (i > 0 && caSource[i-1] == '\\')) {
         caDest[j++]=caSource[i];
       }
     }
     return new String(caDest, 0, j);
   }

Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 20:31:16 2005
Return-Path: <java-user-return-15513-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93813 invoked from network); 20 Jul 2005 20:31:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 20:31:16 -0000
Received: (qmail 54737 invoked by uid 500); 20 Jul 2005 20:31:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54711 invoked by uid 500); 20 Jul 2005 20:31:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54695 invoked by uid 99); 20 Jul 2005 20:31:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 13:31:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 13:31:04 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A8AE313E2006; Wed, 20 Jul 2005 16:31:06 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 1764C13E2005
	for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 16:31:01 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <41EE526EC2D3C74286415780D3BA9F870CEB05CD@ehost011-1.exch011.intermedia.net>
References: <41EE526EC2D3C74286415780D3BA9F870CEB05CD@ehost011-1.exch011.intermedia.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <18D2E737-BB8B-47F9-AB30-B844DBCA9478@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Searching for similar documents
Date: Wed, 20 Jul 2005 16:31:00 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.0 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Jul 20, 2005, at 1:47 PM, Derek Westfall wrote:
> I hope you will forgive the newbie question but do I have to add the
> MoreLikeThis.class file to the Lucene-1.4.3.JAR for it to work?
>
> I put the .class file in my \wwwroot\web-inf\classes folder

If you put it in the right package directory under WEB-INF/classes  
then it should work (provided all the dependencies it has are in WEB- 
INF/lib, which may just be the Lucene JAR file).  The package is  
org.apache.lucene.search.similar, so it should go in WEB-INF/classes/ 
org/apache/lucene/search/similar.  I recommend you put this under  
your webapps WEB-INF/classes directory, not in a common directory to  
your container.

>     mlt = CreateObject("java", "MoreLikeThis"); // <---- this is the
> line that causes the error

You should use org.apache.lucene.search.similar.MoreLikeThis

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 20:49:37 2005
Return-Path: <java-user-return-15514-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99567 invoked from network); 20 Jul 2005 20:49:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 20:49:37 -0000
Received: (qmail 77355 invoked by uid 500); 20 Jul 2005 20:49:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77329 invoked by uid 500); 20 Jul 2005 20:49:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77316 invoked by uid 99); 20 Jul 2005 20:49:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 13:49:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.44.1.105] (HELO ams.org) (130.44.1.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 13:49:26 -0700
Received: from [130.44.10.126] (dnp.ams.org [130.44.10.126])
	by ams.org (Switch-3.1.6/Switch-3.1.6) with ESMTP id j6KKnRZb004145;
	Wed, 20 Jul 2005 16:49:28 -0400 (EDT)
Message-ID: <42DEB8D7.6030007@ams.org>
Date: Wed, 20 Jul 2005 16:49:27 -0400
From: Dan Pelton <dnp@ams.org>
User-Agent: Mozilla Thunderbird 1.0.2 (X11/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Too many open files error using tomcat and lucene
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scanned-By: MIMEDefang 2.49 on 130.44.1.105
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

We are getting the following error in our tomcat error log.
/dsk1/db/lucene/journals/_clr.f7 (Too many open files)
java.io.FileNotFoundException: /dsk1/db/lucene/journals/_clr.f7 (Too many open files)
         at java.io.RandomAccessFile.open(Native Method)

We are using the following
lucene-1.3-final
SunOS thor 5.8 Generic_117350-21 sun4u sparc SUNW,Ultra-250
tomcat 4.1.34
Java 1.4.2


Does any one have any idea how to resolve this. Is it an OS, java or tomcat
problem.

thanks,
Dan P.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 20:56:16 2005
Return-Path: <java-user-return-15515-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1737 invoked from network); 20 Jul 2005 20:56:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 20:56:16 -0000
Received: (qmail 88659 invoked by uid 500); 20 Jul 2005 20:56:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88645 invoked by uid 500); 20 Jul 2005 20:56:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 81587 invoked by uid 99); 20 Jul 2005 20:53:24 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 84.95.2.4 is neither permitted nor denied by domain of eyal.junk@gmail.com)
Date: Wed, 20 Jul 2005 23:58:55 +0300
From: Eyal <eyal.junk@gmail.com>
Subject: RE: QueryParser handling of backslash characters
In-reply-to: <6E366C0B-DCC4-445A-89E7-D22C3BEEAFBF@ehatchersolutions.com>
To: java-user@lucene.apache.org
Message-id: <0IJY00CDE28JJGH1@i_mtaout2.012.net.il>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
Content-type: text/plain; charset=US-ASCII
Content-transfer-encoding: 7BIT
Thread-index: AcWNYpNySxWClhSnRgqjSPtNh/eScAACgXVQ
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think this should work:

(Written in C# originally - so someone please check if it compiles - I don't
have a java compiler here)

    private String discardEscapeChar(String input) 
    {
      char[] caSource = input.toCharArray();
      char[] caDest = new char[caSource.length];
      int j = 0;

      for (int i = 0; i < caSource.length; i++) 
      {
        if (caSource[i] == '\\')
        {
          if (caSource.length == ++i)
            break;
        }
        caDest[j++]=caSource[i];
      }
      return new String(caDest, 0, j);
    }
 

Regarding your UnitTest - It think it's wrong:

>      assertEquals("\\\\\\\\192.168.0.15\\\\public", 
> discardEscapeChar ("\\\\192.168.0.15\\\\public"));

It should be: assertEquals("\\\\192.168.0.15\\\\public", discardEscapeChar
("\\\\\\\\192.168.0.15\\\\public"));

I would also suggest to add the following:
String s="\\\\some.host.name\\dir+:+-!():^[]\{}~*?";
assertEquals(s,discardEscapeChar(escape(s)));

Eyal

> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com] 
> Sent: Wednesday, July 20, 2005 22:38 PM
> To: java-user@lucene.apache.org
> Subject: Re: QueryParser handling of backslash characters
> 
> 
> On Jul 19, 2005, at 11:19 AM, Jeff Davis wrote:
> 
> > Hi,
> >
> > I'm seeing some strange behavior in the way the QueryParser handles 
> > consecutive backslash characters.  I know that backslash is 
> the escape 
> > character in Lucene, and so I would expect "\\\\" to match 
> fields that 
> > have two consecutive backslashes, but this does not seem to be the 
> > case.
> >
> > The fields I'm searching are UNC paths, e.g. 
> "\\192.168.0.15\public".
> > The only way I can get my query to find the record containing that 
> > value is to type "FieldName:\\\192.168.0.15\\public" (three 
> slashes).
> > Why is the third backslash character not treated as an 
> escape?  Is it 
> > just that any backslash that is preceded by a backslash is 
> interpreted 
> > as a literal backslash character, regardless of whether the "escape"
> > backslash was itself escaped?
> >
> > I can code around this, but it seems inconsistent with the way that 
> > escape characters usually work.  Is this a bug, or is it 
> intentional, 
> > or am I missing something?
> 
> I've waited until I had a chance to experiment with this 
> before replying.  I say that this is a bug.  There is a 
> private method in QueryParser called discardEscapeChar (shown 
> below).  I copied it to a JUnit test case and gave it this assert:
> 
>      assertEquals("\\\\\\\\192.168.0.15\\\\public", 
> discardEscapeChar ("\\\\192.168.0.15\\\\public"));
> 
> This test fails with:
> 
>      Expected:\\\\192.168.0.15\\public
>      Actual  :\192.168.0.15\public
> 
> Which is wrong in my opinion.  (though my head hurts thinking 
> about metaescaping backslashes in Java code to make this a 
> proper test)
> 
> The bug is isolated to the discardEscapeChar() method where 
> it eats too many backslashes.  Could you have a shot at 
> tweaking that method to do the right thing and submit a patch?
> 
>    private String discardEscapeChar(String input) {
>      char[] caSource = input.toCharArray();
>      char[] caDest = new char[caSource.length];
>      int j = 0;
>      for (int i = 0; i < caSource.length; i++) {
>        if ((caSource[i] != '\\') || (i > 0 && caSource[i-1] 
> == '\\')) {
>          caDest[j++]=caSource[i];
>        }
>      }
>      return new String(caDest, 0, j);
>    }
> 
> Erik
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 20:59:08 2005
Return-Path: <java-user-return-15516-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 3078 invoked from network); 20 Jul 2005 20:59:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 20:59:07 -0000
Received: (qmail 93279 invoked by uid 500); 20 Jul 2005 20:59:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93254 invoked by uid 500); 20 Jul 2005 20:59:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93241 invoked by uid 99); 20 Jul 2005 20:59:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 13:59:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 13:58:55 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6A79513E2006; Wed, 20 Jul 2005 16:58:54 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 353E813E2005
	for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 16:58:10 -0400 (EDT)
In-Reply-To: <OBELINLGKPEMCIEIJJNKGEHGCEAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKGEHGCEAA.karthik@controlnet.co.in>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3C343022-4E0B-4D83-9A40-5B56A02D8611@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: BOOLEAN OPERATOR HOWTO
Date: Wed, 20 Jul 2005 16:58:10 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 19, 2005, at 8:31 AM, Karthik N S wrote:
> Given a Search word = 'erik OR hatcher AND otis OR gospodnetic' ,  
> Is it
> possible to RETURN COUNT
> occurances for each of the word with in the Searched documents.
>
>
> This would give me the Each word's Term Frequency.
>
>
> How to achieve this

Wow - I really missed my guess on your question! :)

It is possible, but not directly (though you could spelunk the  
Explanation to get this information per document).  Do you want term  
frequency across an individual document or the entire index?

     Erik


>
> Thx in advance
> karthik
>
>
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Monday, July 18, 2005 6:39 PM
> To: java-user@lucene.apache.org
> Subject: Re: BOOLEAN OPERATOR HOWTO
>
>
>
> On Jul 18, 2005, at 8:12 AM, Karthik N S wrote:
>
>> I have 2 Questions.
>>
> But there were no question marks!   I don't understand your questions
> at all, sorry, but I'll see if I can decipher it somewhat....
>
>
>> 1) The Search Criteria  src  requires to automatically fill   "  "
>> between  Search words with a Boolean Operator   "  AND ".
>>
>
> You mean to achieve AND'd clauses?   By default, OR is the operator,
> and AND must be explicit.  You can construct a QueryParser instance
> and set the default operator to AND, though, and then OR must be
> explicit.
>
>
>>  2) The Search Criteria  src  requires to automatically recognise
>> the existing  Boolean Query  ' AND , + '  present and append the same
>>      with  out any manupulations.
>>
>> Ex : -
>> Search Word  =
>>
>> 'Lucene in Action Erik hatcher and  Otis  + Gospodnetic '   =
>> lucene AND action AND Eric  AND hatcher AND otis + gospodnetic .
>>
>>
>> How to Achieve this , Is there any mechanism built into Lucene to
>> handle such situations.
>>
>
> Yes, this sounds like the default operator is what you're looking
> for.  Since you use "Lucene in Action" as an example, flip to page 94
> for more discussion on this, and then flip to the other pages
> mentioned here:
>
>      http://www.lucenebook.com/search?query=default+operator
>
> Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 21:01:54 2005
Return-Path: <java-user-return-15517-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4137 invoked from network); 20 Jul 2005 21:01:54 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 21:01:54 -0000
Received: (qmail 99467 invoked by uid 500); 20 Jul 2005 21:01:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99418 invoked by uid 500); 20 Jul 2005 21:01:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99381 invoked by uid 99); 20 Jul 2005 21:01:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:01:35 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=RCVD_IN_NJABL_PROXY
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [17.250.248.85] (HELO smtpout.mac.com) (17.250.248.85)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:01:29 -0700
Received: from mac.com (smtpin08-en2 [10.13.10.153])
	by smtpout.mac.com (Xserve/8.12.11/smtpout03/MantshX 4.0) with ESMTP id j6KL1WR4007864
	for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 14:01:32 -0700 (PDT)
Received: from [192.168.15.100] (66-214-154-12.mpk-mres.charterpipeline.net [66.214.154.12])
	(authenticated bits=0)
	by mac.com (Xserve/smtpin08/MantshX 4.0) with ESMTP id j6KL1UhD000308
	(version=TLSv1/SSLv3 cipher=DHE-RSA-AES256-SHA bits=256 verify=NO)
	for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 14:01:31 -0700 (PDT)
Message-ID: <42DEBBA9.4080707@mac.com>
Date: Wed, 20 Jul 2005 14:01:29 -0700
From: "xing@mac.com" <xing@mac.com>
User-Agent: Mozilla Thunderbird 1.0.5 (Windows/20050711)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: New line
References: <BAY105-F91CC77ADBC918D60B45E1B2D70@phx.gbl>
In-Reply-To: <BAY105-F91CC77ADBC918D60B45E1B2D70@phx.gbl>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris,

If I understand your question correctly, you are saying why is the the 
search output of lucene not returning the two lines as distinct two lines?

If you are returning the lucene search output to the web and want the 
new line \n to be dispalyed as such, you need to replace the character 
with [br] tags.

To lucene, the new line is likely used as part of the tokenizer to 
distinguish words/tokens for the index but it does not do anything 
special with it is stored or displayed. However, depending on your 
lucene client/app, you might need to tweak the client output to display 
the 2 lines separately.

I think that is your question.

Xing



christopher may wrote:
> 
> When my text file is being searched it seems every line is  blending. So 
> I need the index searcher to see a newline character or field separator 
> in the text file. What can be used in the text file to separate my lines ?
> 
>> From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
>> Reply-To: java-user@lucene.apache.org
>> To: java-user@lucene.apache.org
>> Subject: Re: New line
>> Date: Tue, 19 Jul 2005 10:15:15 -0700 (PDT)
>>
>> I may be misunderstanding you, but \n is the "newline" character.
>> http://www.google.com/search?q=newline%20character%20java
>>
>> Otis
>>
>>
>> --- christopher may <fersher@hotmail.com> wrote:
>>
>> >
>> > I am using text files in my index. What can be used as the new line
>> > character ? Say I have
>> > A batch of apples <Title> Apples . So the doc is returned as Apples
>> > and the
>> > summary is A batch of apples. If I want to then on the next line of
>> > the file
>> > put A state out west <Title>Arizona. This all blends together. What
>> > is my
>> > default line separator ? Or new line character. Thanks all
>> >
>> >
>> >
>> > ---------------------------------------------------------------------
>> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> > For additional commands, e-mail: java-user-help@lucene.apache.org
>> >
>> >
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 21:02:16 2005
Return-Path: <java-user-return-15518-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4451 invoked from network); 20 Jul 2005 21:02:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 21:02:16 -0000
Received: (qmail 3909 invoked by uid 500); 20 Jul 2005 21:02:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3832 invoked by uid 500); 20 Jul 2005 21:02:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3705 invoked by uid 99); 20 Jul 2005 21:02:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:02:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:01:58 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4C58213E2007; Wed, 20 Jul 2005 17:01:56 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 6ECAE13E2005
	for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 17:01:29 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <0IJV00GNSJ3ZGO81@i_mtaout1.012.net.il>
References: <0IJV00GNSJ3ZGO81@i_mtaout1.012.net.il>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DA81FA60-4C1E-459D-923A-4D6FD80ACFA9@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Using QueryParser with a single field
Date: Wed, 20 Jul 2005 17:00:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 19, 2005, at 8:10 AM, Eyal wrote:

> Hi,
>
> In my client application I allow the user to build a query by  
> selecting a
> field from a combobox and entering a value to search by.
> I want the user to enter free text queries for each field, but I  
> don't want
> to parse it myself so I thought I'd use QueryParser for that. My  
> problem is
> that if the user will (for example) select a field called author  
> and enter
> the following text: 'John content:MyContent'
> QueryParser will build a query for author:John OR  
> content:MyContent. I want
> QueryParser to ignore other fields.
> Any method in QueryParser to allow that? If not - any other  
> suggestions?

There is no such switch in QueryParser to disable fielded queries.  A  
custom QueryParser would be needed to make this happen.

If you only need TermQuery and PhraseQuery you could do without  
QueryParser altogether in this situation and process (not quite  
"parse") the text fields by building up the appropriate query.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 21:08:29 2005
Return-Path: <java-user-return-15519-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6521 invoked from network); 20 Jul 2005 21:08:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 21:08:29 -0000
Received: (qmail 15433 invoked by uid 500); 20 Jul 2005 21:08:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14536 invoked by uid 500); 20 Jul 2005 21:08:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14523 invoked by uid 99); 20 Jul 2005 21:08:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:08:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lucenelist@danielnaber.de designates 80.67.18.13 as permitted sender)
Received: from [80.67.18.13] (HELO smtprelay01.ispgateway.de) (80.67.18.13)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:08:18 -0700
Received: (qmail 7307 invoked from network); 20 Jul 2005 21:08:19 -0000
Received: from unknown (HELO p5496EED0.dip.t-dialin.net) ([pbs]695637@[84.150.238.208])
          (envelope-sender <lucenelist@danielnaber.de>)
          by smtprelay01.ispgateway.de (qmail-ldap-1.03) with RC4-MD5 encrypted SMTP
          for <java-user@lucene.apache.org>; 20 Jul 2005 21:08:19 -0000
From: Daniel Naber <lucenelist@danielnaber.de>
To: java-user@lucene.apache.org
Subject: Re: Too many open files error using tomcat and lucene
Date: Wed, 20 Jul 2005 23:10:44 +0200
User-Agent: KMail/1.8
References: <42DEB8D7.6030007@ams.org>
In-Reply-To: <42DEB8D7.6030007@ams.org>
MIME-Version: 1.0
Content-Type: text/plain;
  charset="us-ascii"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline
Message-Id: <200507202310.44494@danielnaber.de>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Wednesday 20 July 2005 22:49, Dan Pelton wrote:

> We are getting the following error in our tomcat error log.
> /dsk1/db/lucene/journals/_clr.f7 (Too many open files)
> java.io.FileNotFoundException: /dsk1/db/lucene/journals/_clr.f7 (Too
> many open files)

See 
http://wiki.apache.org/jakarta-lucene/LuceneFAQ#head-48921635adf2c968f7936dc07d51dfb40d638b82

-- 
http://www.danielnaber.de

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 21:09:01 2005
Return-Path: <java-user-return-15520-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6679 invoked from network); 20 Jul 2005 21:09:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 21:09:00 -0000
Received: (qmail 15686 invoked by uid 500); 20 Jul 2005 21:08:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15656 invoked by uid 500); 20 Jul 2005 21:08:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15643 invoked by uid 99); 20 Jul 2005 21:08:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:08:55 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS,RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chenjian1227@gmail.com designates 64.233.170.201 as permitted sender)
Received: from [64.233.170.201] (HELO rproxy.gmail.com) (64.233.170.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:08:50 -0700
Received: by rproxy.gmail.com with SMTP id 1so122016rny
        for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 14:08:53 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sP3tRynfRSYlz3ltgpsIwjnwmiTYVtFDHLkGplcQQWT24hZiybBBw8ejpKM8y4XD/1ppbpMnNUrg7Az2RkoXhtc1D7HA2iHE6DRDpd4n2QG/SO4+tN09Zj1fc4JdPsCK9SSSc5pAPPY/s9vU5Q1iJZsWetfcDI0s4268vjes0aE=
Received: by 10.38.103.16 with SMTP id a16mr14879rnc;
        Wed, 20 Jul 2005 14:08:53 -0700 (PDT)
Received: by 10.38.8.79 with HTTP; Wed, 20 Jul 2005 14:08:53 -0700 (PDT)
Message-ID: <7ca123910507201408384bf85b@mail.gmail.com>
Date: Wed, 20 Jul 2005 14:08:53 -0700
From: jian chen <chenjian1227@gmail.com>
Reply-To: jian chen <chenjian1227@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Too many open files error using tomcat and lucene
In-Reply-To: <42DEB8D7.6030007@ams.org>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42DEB8D7.6030007@ams.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi, Dan,

I think the problem you mentioned is the one that has been discussed
lot of times in this mailing list.

Bottomline is that you'd better use the compound file format to store
indexes. I am not sure Lucene 1.3 has that available, but, if
possible, can you upgrade to lucene 1.4.3?

Cheers,

Jian

On 7/20/05, Dan Pelton <dnp@ams.org> wrote:
> We are getting the following error in our tomcat error log.
> /dsk1/db/lucene/journals/_clr.f7 (Too many open files)
> java.io.FileNotFoundException: /dsk1/db/lucene/journals/_clr.f7 (Too many=
 open files)
>          at java.io.RandomAccessFile.open(Native Method)
>=20
> We are using the following
> lucene-1.3-final
> SunOS thor 5.8 Generic_117350-21 sun4u sparc SUNW,Ultra-250
> tomcat 4.1.34
> Java 1.4.2
>=20
>=20
> Does any one have any idea how to resolve this. Is it an OS, java or tomc=
at
> problem.
>=20
> thanks,
> Dan P.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 21:12:28 2005
Return-Path: <java-user-return-15521-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 8415 invoked from network); 20 Jul 2005 21:12:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 21:12:28 -0000
Received: (qmail 23665 invoked by uid 500); 20 Jul 2005 21:12:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 23646 invoked by uid 500); 20 Jul 2005 21:12:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 23632 invoked by uid 99); 20 Jul 2005 21:12:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:12:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.41] (HELO web31108.mail.mud.yahoo.com) (68.142.200.41)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Jul 2005 14:12:16 -0700
Received: (qmail 41249 invoked by uid 60001); 20 Jul 2005 21:12:19 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Wtq0uh5H7B5AJB6eKVTWvImP0VndQlqvX3mRGmXvKZRPKPQIJpZREfxudIKESpDxoZxAW8LSw8lNWOrdcZgiPqTvLYnitVDTMtoC0D7OxKvn1lnqjLoyQZ/g0p8SUVkhfwkI/qdNiGbhAcFi74kFNMXJLF8ZkZjEG5fnEcQLJGc=  ;
Message-ID: <20050720211219.41247.qmail@web31108.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31108.mail.mud.yahoo.com via HTTP; Wed, 20 Jul 2005 14:12:19 PDT
Date: Wed, 20 Jul 2005 14:12:19 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: New line
To: java-user@lucene.apache.org
In-Reply-To: <BAY105-F91CC77ADBC918D60B45E1B2D70@phx.gbl>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

How you tokenize your input is up to you.  It sounds like you want a
custom Analyzer that has a tokenizer that knows about newline
characters and does whatever you need it to do when a newline character
is encountered (e.g. stop reading or whatever).  The search part of
Lucene has no notion of newline characters and such.  It only knows
about documents and words/tokens in them.

Otis


--- christopher may <fersher@hotmail.com> wrote:

> 
> When my text file is being searched it seems every line is  blending.
> So I 
> need the index searcher to see a newline character or field separator
> in the 
> text file. What can be used in the text file to separate my lines ?
> 
> >From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
> >Reply-To: java-user@lucene.apache.org
> >To: java-user@lucene.apache.org
> >Subject: Re: New line
> >Date: Tue, 19 Jul 2005 10:15:15 -0700 (PDT)
> >
> >I may be misunderstanding you, but \n is the "newline" character.
> >http://www.google.com/search?q=newline%20character%20java
> >
> >Otis
> >
> >
> >--- christopher may <fersher@hotmail.com> wrote:
> >
> > >
> > > I am using text files in my index. What can be used as the new
> line
> > > character ? Say I have
> > > A batch of apples <Title> Apples . So the doc is returned as
> Apples
> > > and the
> > > summary is A batch of apples. If I want to then on the next line
> of
> > > the file
> > > put A state out west <Title>Arizona. This all blends together.
> What
> > > is my
> > > default line separator ? Or new line character. Thanks all
> > >
> > >
> > >
> > >
> ---------------------------------------------------------------------
> > > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > > For additional commands, e-mail: java-user-help@lucene.apache.org
> > >
> > >
> >
> >
>
>---------------------------------------------------------------------
> >To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 21:18:30 2005
Return-Path: <java-user-return-15522-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10280 invoked from network); 20 Jul 2005 21:18:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 21:18:30 -0000
Received: (qmail 33016 invoked by uid 500); 20 Jul 2005 21:18:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32665 invoked by uid 500); 20 Jul 2005 21:18:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32652 invoked by uid 99); 20 Jul 2005 21:18:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:18:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jadavis@gmail.com designates 64.233.170.207 as permitted sender)
Received: from [64.233.170.207] (HELO rproxy.gmail.com) (64.233.170.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:18:19 -0700
Received: by rproxy.gmail.com with SMTP id g11so1296032rne
        for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 14:18:22 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=W8q9GBEgrMXvxyliP0qpuutM4cl7s1z2xpU7zPR0ewq9ascxRKiA1NOfjtBWpgKQP9VlscwZKwpC/Y7Z4UoSAk0haL4vdyULZy9ZtAKap5zA7ZDMRydxN5iWVxltM0eFdOLOJ6LRxe/MauLNgRZGvqnZ6m4cVP/C/TIPLukAEmo=
Received: by 10.38.59.80 with SMTP id h80mr687206rna;
        Wed, 20 Jul 2005 14:18:01 -0700 (PDT)
Received: by 10.39.1.13 with HTTP; Wed, 20 Jul 2005 14:18:00 -0700 (PDT)
Message-ID: <418eb29d05072014186e125b1b@mail.gmail.com>
Date: Wed, 20 Jul 2005 16:18:00 -0500
From: Jeff Davis <jadavis@gmail.com>
Reply-To: Jeff Davis <jadavis@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: QueryParser handling of backslash characters
In-Reply-To: <0IJY00CDE28JJGH1@i_mtaout2.012.net.il>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <6E366C0B-DCC4-445A-89E7-D22C3BEEAFBF@ehatchersolutions.com>
	 <0IJY00CDE28JJGH1@i_mtaout2.012.net.il>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

That fix works perfectly, as far as I can tell.

As for the unit test, it should actually be:
assertEquals("\\\\192.168.0.15\\public", discardEscapeChar
("\\\\\\\\192.168.0.15\\\\public"));

Jeff


On 7/20/05, Eyal <eyal.junk@gmail.com> wrote:
> I think this should work:
>=20
> (Written in C# originally - so someone please check if it compiles - I do=
n't
> have a java compiler here)
>=20
>     private String discardEscapeChar(String input)
>     {
>       char[] caSource =3D input.toCharArray();
>       char[] caDest =3D new char[caSource.length];
>       int j =3D 0;
>=20
>       for (int i =3D 0; i < caSource.length; i++)
>       {
>         if (caSource[i] =3D=3D '\\')
>         {
>           if (caSource.length =3D=3D ++i)
>             break;
>         }
>         caDest[j++]=3DcaSource[i];
>       }
>       return new String(caDest, 0, j);
>     }
>=20
>=20
> Regarding your UnitTest - It think it's wrong:
>=20
> >      assertEquals("\\\\\\\\192.168.0.15\\\\public",
> > discardEscapeChar ("\\\\192.168.0.15\\\\public"));
>=20
> It should be: assertEquals("\\\\192.168.0.15\\\\public", discardEscapeCha=
r
> ("\\\\\\\\192.168.0.15\\\\public"));
>=20
> I would also suggest to add the following:
> String s=3D"\\\\some.host.name\\dir+:+-!():^[]\{}~*?";
> assertEquals(s,discardEscapeChar(escape(s)));
>=20
> Eyal
>=20
> > -----Original Message-----
> > From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> > Sent: Wednesday, July 20, 2005 22:38 PM
> > To: java-user@lucene.apache.org
> > Subject: Re: QueryParser handling of backslash characters
> >
> >
> > On Jul 19, 2005, at 11:19 AM, Jeff Davis wrote:
> >
> > > Hi,
> > >
> > > I'm seeing some strange behavior in the way the QueryParser handles
> > > consecutive backslash characters.  I know that backslash is
> > the escape
> > > character in Lucene, and so I would expect "\\\\" to match
> > fields that
> > > have two consecutive backslashes, but this does not seem to be the
> > > case.
> > >
> > > The fields I'm searching are UNC paths, e.g.
> > "\\192.168.0.15\public".
> > > The only way I can get my query to find the record containing that
> > > value is to type "FieldName:\\\192.168.0.15\\public" (three
> > slashes).
> > > Why is the third backslash character not treated as an
> > escape?  Is it
> > > just that any backslash that is preceded by a backslash is
> > interpreted
> > > as a literal backslash character, regardless of whether the "escape"
> > > backslash was itself escaped?
> > >
> > > I can code around this, but it seems inconsistent with the way that
> > > escape characters usually work.  Is this a bug, or is it
> > intentional,
> > > or am I missing something?
> >
> > I've waited until I had a chance to experiment with this
> > before replying.  I say that this is a bug.  There is a
> > private method in QueryParser called discardEscapeChar (shown
> > below).  I copied it to a JUnit test case and gave it this assert:
> >
> >      assertEquals("\\\\\\\\192.168.0.15\\\\public",
> > discardEscapeChar ("\\\\192.168.0.15\\\\public"));
> >
> > This test fails with:
> >
> >      Expected:\\\\192.168.0.15\\public
> >      Actual  :\192.168.0.15\public
> >
> > Which is wrong in my opinion.  (though my head hurts thinking
> > about metaescaping backslashes in Java code to make this a
> > proper test)
> >
> > The bug is isolated to the discardEscapeChar() method where
> > it eats too many backslashes.  Could you have a shot at
> > tweaking that method to do the right thing and submit a patch?
> >
> >    private String discardEscapeChar(String input) {
> >      char[] caSource =3D input.toCharArray();
> >      char[] caDest =3D new char[caSource.length];
> >      int j =3D 0;
> >      for (int i =3D 0; i < caSource.length; i++) {
> >        if ((caSource[i] !=3D '\\') || (i > 0 && caSource[i-1]
> > =3D=3D '\\')) {
> >          caDest[j++]=3DcaSource[i];
> >        }
> >      }
> >      return new String(caDest, 0, j);
> >    }
> >
> > Erik
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 21:23:38 2005
Return-Path: <java-user-return-15523-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11930 invoked from network); 20 Jul 2005 21:23:38 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 21:23:38 -0000
Received: (qmail 43415 invoked by uid 500); 20 Jul 2005 21:20:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43360 invoked by uid 500); 20 Jul 2005 21:20:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43321 invoked by uid 99); 20 Jul 2005 21:20:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:20:55 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=NO_REAL_NAME,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of Gayo.Diallo@imag.fr designates 129.88.30.1 as permitted sender)
Received: from [129.88.30.1] (HELO imag.imag.fr) (129.88.30.1)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:20:43 -0700
Received: from localhost (trottinette.imag.fr [129.88.34.202])
	by imag.imag.fr (8.13.0/8.13.0) with ESMTP id j6KLKi4X001445
	for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 23:20:44 +0200 (CEST)
Received: from 82.67.62.72 ( [82.67.62.72])
	as user gdiallo@mail-timc.imag.fr by webmail.imag.fr with HTTP;
	Wed, 20 Jul 2005 23:20:44 +0200
Message-ID: <1121894444.42dec02cde2f4@webmail.imag.fr>
Date: Wed, 20 Jul 2005 23:20:44 +0200
From: Gayo.Diallo@imag.fr
To: java-user@lucene.apache.org
Subject: StackOverflowError when index pdf files
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.1
X-Originating-IP: 82.67.62.72
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.6 (imag.imag.fr [129.88.30.1]); Wed, 20 Jul 2005 23:20:44 +0200 (CEST)
X-IMAG-MailScanner: Found to be clean
X-IMAG-MailScanner-Information: Please contact the ISP for more information
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Hi,
I've the error "java.lang.StackOverflowError" when I try to index text files
that I got from transforming pdf files through pdfbox API.
When I index normal text repository, I havn't this error.
may some one help me ?

Thanks,

Gayo

-------------------------------------------------
envoy via Webmail/IMAG !


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 21:37:23 2005
Return-Path: <java-user-return-15524-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16940 invoked from network); 20 Jul 2005 21:37:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 21:37:22 -0000
Received: (qmail 90847 invoked by uid 500); 20 Jul 2005 21:37:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90819 invoked by uid 500); 20 Jul 2005 21:37:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90806 invoked by uid 99); 20 Jul 2005 21:37:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:37:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.74] (HELO web31112.mail.mud.yahoo.com) (68.142.201.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 20 Jul 2005 14:37:11 -0700
Received: (qmail 37103 invoked by uid 60001); 20 Jul 2005 21:37:12 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=rig0nbzUQWSeDcpFumjrWE4ahxECbpkNEDJMcc6FK9t9KqzaaDb8lidzSC+1baXRAtUVZbIXm4nkkMP9PXPxouCjvSMwmhX47F/aQxh8M08BalPLZKsLJ/trBhbhqR5FvdKx8MeO4YN+g3SsGx9uKmWUf+Bv3LEt/WtfE1LPOeA=  ;
Message-ID: <20050720213712.37101.qmail@web31112.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31112.mail.mud.yahoo.com via HTTP; Wed, 20 Jul 2005 14:37:12 PDT
Date: Wed, 20 Jul 2005 14:37:12 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: StackOverflowError when index pdf files
To: java-user@lucene.apache.org
In-Reply-To: <1121894444.42dec02cde2f4@webmail.imag.fr>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It sounds like the problem may stem from your PDF parser....

Otis

--- Gayo.Diallo@imag.fr wrote:

> 
> Hi,
> I've the error "java.lang.StackOverflowError" when I try to index
> text files
> that I got from transforming pdf files through pdfbox API.
> When I index normal text repository, I havn't this error.
> may some one help me ?
> 
> Thanks,
> 
> Gayo
> 
> -------------------------------------------------
> envoy via Webmail/IMAG !
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 21:45:13 2005
Return-Path: <java-user-return-15525-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 19440 invoked from network); 20 Jul 2005 21:45:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 21:45:13 -0000
Received: (qmail 5843 invoked by uid 500); 20 Jul 2005 21:45:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5564 invoked by uid 500); 20 Jul 2005 21:45:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5551 invoked by uid 99); 20 Jul 2005 21:45:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:45:07 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.128] (HELO mis011-1.exch011.intermedia.net) (64.78.21.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 14:45:01 -0700
Received: from ehost011-1.exch011.intermedia.net ([64.78.21.3]) by mis011-1.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 20 Jul 2005 14:45:04 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Searching for similar documents
Date: Wed, 20 Jul 2005 14:44:48 -0700
Message-ID: <41EE526EC2D3C74286415780D3BA9F870CEB0B67@ehost011-1.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching for similar documents
Thread-Index: AcWNafqazVzBCR9mS1+AXOIGxsfWrgAAzbOA
From: "Derek Westfall" <dwestfall@TradelineInc.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 20 Jul 2005 21:45:04.0783 (UTC) FILETIME=[4A0A29F0:01C58D74]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Okay, I figured out how to use JAR, extracted all the files from
lucene-1.4.3.jar, added the MoreLikeThis classes in the appropriate
folder, recreated and replaced the JAR. Since Lucene is my first
exposure to Java I am pretty proud of myself at this point.

The only thing that still wasn't working was the setFieldNames function,
so I just set it to NULL in the .java code, recompiled and recreated the
.jar and now it is working! And doing a good job, too!

Thanks!

Derek



=20

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Wednesday, July 20, 2005 1:31 PM
To: java-user@lucene.apache.org
Subject: Re: Searching for similar documents

On Jul 20, 2005, at 1:47 PM, Derek Westfall wrote:
> I hope you will forgive the newbie question but do I have to add the=20
> MoreLikeThis.class file to the Lucene-1.4.3.JAR for it to work?
>
> I put the .class file in my \wwwroot\web-inf\classes folder

If you put it in the right package directory under WEB-INF/classes then
it should work (provided all the dependencies it has are in WEB-
INF/lib, which may just be the Lucene JAR file).  The package is
org.apache.lucene.search.similar, so it should go in WEB-INF/classes/
org/apache/lucene/search/similar.  I recommend you put this under your
webapps WEB-INF/classes directory, not in a common directory to your
container.

>     mlt =3D CreateObject("java", "MoreLikeThis"); // <---- this is the =

> line that causes the error

You should use org.apache.lucene.search.similar.MoreLikeThis

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 22:11:44 2005
Return-Path: <java-user-return-15526-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26284 invoked from network); 20 Jul 2005 22:11:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 22:11:44 -0000
Received: (qmail 38611 invoked by uid 500); 20 Jul 2005 22:11:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 38373 invoked by uid 500); 20 Jul 2005 22:11:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 38360 invoked by uid 99); 20 Jul 2005 22:11:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 15:11:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 15:11:33 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 345F813E2006; Wed, 20 Jul 2005 18:11:36 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 0FFB613E2005
	for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 18:11:34 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <0IJV00GNSJ3ZGO81@i_mtaout1.012.net.il>
References: <0IJV00GNSJ3ZGO81@i_mtaout1.012.net.il>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DA81FA60-4C1E-459D-923A-4D6FD80ACFA9@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Using QueryParser with a single field
Date: Wed, 20 Jul 2005 17:00:27 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 19, 2005, at 8:10 AM, Eyal wrote:

> Hi,
>
> In my client application I allow the user to build a query by  
> selecting a
> field from a combobox and entering a value to search by.
> I want the user to enter free text queries for each field, but I  
> don't want
> to parse it myself so I thought I'd use QueryParser for that. My  
> problem is
> that if the user will (for example) select a field called author  
> and enter
> the following text: 'John content:MyContent'
> QueryParser will build a query for author:John OR  
> content:MyContent. I want
> QueryParser to ignore other fields.
> Any method in QueryParser to allow that? If not - any other  
> suggestions?

There is no such switch in QueryParser to disable fielded queries.  A  
custom QueryParser would be needed to make this happen.

If you only need TermQuery and PhraseQuery you could do without  
QueryParser altogether in this situation and process (not quite  
"parse") the text fields by building up the appropriate query.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 20 22:36:04 2005
Return-Path: <java-user-return-15527-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32931 invoked from network); 20 Jul 2005 22:36:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 20 Jul 2005 22:36:04 -0000
Received: (qmail 54850 invoked by uid 500); 20 Jul 2005 22:35:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54534 invoked by uid 500); 20 Jul 2005 22:35:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54521 invoked by uid 99); 20 Jul 2005 22:35:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 15:35:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 15:35:52 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 756DD13E2006; Wed, 20 Jul 2005 18:35:53 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 796F313E2005
	for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 18:35:35 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <41EE526EC2D3C74286415780D3BA9F870CEB0B67@ehost011-1.exch011.intermedia.net>
References: <41EE526EC2D3C74286415780D3BA9F870CEB0B67@ehost011-1.exch011.intermedia.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <872AF24A-618B-489C-92FF-EA708E0823F9@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Searching for similar documents
Date: Wed, 20 Jul 2005 18:35:33 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You'll want to re-think that re-JARing approach for the long term, as  
you'll want to upgrade Lucene at some point I suspect.   But congrats  
on hacking it!

     Erik


On Jul 20, 2005, at 5:44 PM, Derek Westfall wrote:

> Okay, I figured out how to use JAR, extracted all the files from
> lucene-1.4.3.jar, added the MoreLikeThis classes in the appropriate
> folder, recreated and replaced the JAR. Since Lucene is my first
> exposure to Java I am pretty proud of myself at this point.
>
> The only thing that still wasn't working was the setFieldNames  
> function,
> so I just set it to NULL in the .java code, recompiled and  
> recreated the
> .jar and now it is working! And doing a good job, too!
>
> Thanks!
>
> Derek
>
>
>
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Wednesday, July 20, 2005 1:31 PM
> To: java-user@lucene.apache.org
> Subject: Re: Searching for similar documents
>
> On Jul 20, 2005, at 1:47 PM, Derek Westfall wrote:
>
>> I hope you will forgive the newbie question but do I have to add the
>> MoreLikeThis.class file to the Lucene-1.4.3.JAR for it to work?
>>
>> I put the .class file in my \wwwroot\web-inf\classes folder
>>
>
> If you put it in the right package directory under WEB-INF/classes  
> then
> it should work (provided all the dependencies it has are in WEB-
> INF/lib, which may just be the Lucene JAR file).  The package is
> org.apache.lucene.search.similar, so it should go in WEB-INF/classes/
> org/apache/lucene/search/similar.  I recommend you put this under your
> webapps WEB-INF/classes directory, not in a common directory to your
> container.
>
>
>>     mlt = CreateObject("java", "MoreLikeThis"); // <---- this is the
>> line that causes the error
>>
>
> You should use org.apache.lucene.search.similar.MoreLikeThis
>
>      Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 21 00:48:10 2005
Return-Path: <java-user-return-15528-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 69985 invoked from network); 21 Jul 2005 00:48:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2005 00:48:10 -0000
Received: (qmail 50161 invoked by uid 500); 21 Jul 2005 00:48:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49299 invoked by uid 500); 21 Jul 2005 00:48:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49286 invoked by uid 99); 21 Jul 2005 00:48:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 17:48:04 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of ben@csh.rit.edu designates 129.21.60.6 as permitted sender)
Received: from [129.21.60.6] (HELO blacksheep.csh.rit.edu) (129.21.60.6)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 17:47:59 -0700
Received: from fury.csh.rit.edu (fury.csh.rit.edu [IPv6:2001:470:1f00:135:a00:20ff:fe8d:5399])
	by blacksheep.csh.rit.edu (Postfix) with ESMTP id 39ED624F1
	for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 20:48:02 -0400 (EDT)
Received: by fury.csh.rit.edu (Postfix, from userid 38448)
	id E20EA1529; Wed, 20 Jul 2005 20:48:01 -0400 (EDT)
Received: from localhost (localhost [127.0.0.1])
	by fury.csh.rit.edu (Postfix) with ESMTP id BE6541511
	for <java-user@lucene.apache.org>; Wed, 20 Jul 2005 20:48:01 -0400 (EDT)
Date: Wed, 20 Jul 2005 20:48:01 -0400 (EDT)
From: Ben Litchfield <ben@csh.rit.edu>
To: java-user@lucene.apache.org
Subject: Re: StackOverflowError when index pdf files
In-Reply-To: <20050720213712.37101.qmail@web31112.mail.mud.yahoo.com>
Message-ID: <Pine.GSO.4.53.0507202047180.26926@fury.csh.rit.edu>
References: <20050720213712.37101.qmail@web31112.mail.mud.yahoo.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Yes, this sounds like an issue with PDFBox, can you determine if it is a
single PDF document and post an issue on the PDFBox sourceforge site.

Thanks,
Ben Litchfield


On Wed, 20 Jul 2005, Otis Gospodnetic wrote:

> It sounds like the problem may stem from your PDF parser....
>
> Otis
>
> --- Gayo.Diallo@imag.fr wrote:
>
> >
> > Hi,
> > I've the error "java.lang.StackOverflowError" when I try to index
> > text files
> > that I got from transforming pdf files through pdfbox API.
> > When I index normal text repository, I havn't this error.
> > may some one help me ?
> >
> > Thanks,
> >
> > Gayo
> >
> > -------------------------------------------------
> > envoy=E9 via Webmail/IMAG !
> >
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 21 04:27:18 2005
Return-Path: <java-user-return-15529-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52725 invoked from network); 21 Jul 2005 04:27:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2005 04:27:18 -0000
Received: (qmail 15871 invoked by uid 500); 21 Jul 2005 04:27:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 15842 invoked by uid 500); 21 Jul 2005 04:27:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 15828 invoked by uid 99); 21 Jul 2005 04:27:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 21:27:11 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.128] (HELO mis011-1.exch011.intermedia.net) (64.78.21.128)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 20 Jul 2005 21:27:05 -0700
Received: from ehost011-1.exch011.intermedia.net ([64.78.21.3]) by mis011-1.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 20 Jul 2005 21:27:08 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Searching for similar documents
Date: Wed, 20 Jul 2005 21:27:02 -0700
Message-ID: <41EE526EC2D3C74286415780D3BA9F870CF85157@ehost011-1.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Searching for similar documents
Thread-Index: AcWNafqazVzBCR9mS1+AXOIGxsfWrgAQkbXg
From: "Derek Westfall" <dwestfall@TradelineInc.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 21 Jul 2005 04:27:08.0858 (UTC) FILETIME=[751BE1A0:01C58DAC]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Your solution below is undoubtedly my problem. I didn't even consider
the need to create all those directory levels. I'm sure that will solve
it!=20

-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: Wednesday, July 20, 2005 1:31 PM
To: java-user@lucene.apache.org
Subject: Re: Searching for similar documents

If you put it in the right package directory under WEB-INF/classes then
it should work (provided all the dependencies it has are in WEB-
INF/lib, which may just be the Lucene JAR file).  The package is
org.apache.lucene.search.similar, so it should go in WEB-INF/classes/
org/apache/lucene/search/similar.  I recommend you put this under your
webapps WEB-INF/classes directory, not in a common directory to your
container.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 21 08:57:07 2005
Return-Path: <java-user-return-15530-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47632 invoked from network); 21 Jul 2005 08:57:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2005 08:57:07 -0000
Received: (qmail 1765 invoked by uid 500); 21 Jul 2005 08:56:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1733 invoked by uid 500); 21 Jul 2005 08:56:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1720 invoked by uid 99); 21 Jul 2005 08:56:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 01:56:58 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=SUBJ_ALL_CAPS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.199.26.74] (HELO daakghar.controlnet.co.in) (203.199.26.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Jul 2005 01:56:52 -0700
Received: from kartik1 ([192.168.4.1]) by
          dakiya.controlnet.co.in (Netscape Messaging Server 4.15) with
          ESMTP id IJZ0GJ00.JPP for <java-user@lucene.apache.org>; Thu, 21
          Jul 2005 14:47:07 +0530 
From: "Karthik N S" <karthik@controlnet.co.in>
To: <java-user@lucene.apache.org>
Subject: RE: BOOLEAN OPERATOR HOWTO
Date: Thu, 21 Jul 2005 14:39:29 +0530
Message-ID: <OBELINLGKPEMCIEIJJNKCEIFCEAA.karthik@controlnet.co.in>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2600.0000
Importance: Normal
In-Reply-To: <3C343022-4E0B-4D83-9A40-5B56A02D8611@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

Erik


Apologies......



>> Do you want term  frequency across an individual document or the entire
index?

Of course the Frequency will have to be across the entire index.

In such case How does Explanation be usefull (Since Explanation is per
document)


Thx in advance
Karthik



-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Thursday, July 21, 2005 2:28 AM
To: java-user@lucene.apache.org
Subject: Re: BOOLEAN OPERATOR HOWTO



On Jul 19, 2005, at 8:31 AM, Karthik N S wrote:
> Given a Search word = 'erik OR hatcher AND otis OR gospodnetic' ,
> Is it
> possible to RETURN COUNT
> occurances for each of the word with in the Searched documents.
>
>
> This would give me the Each word's Term Frequency.
>
>
> How to achieve this

Wow - I really missed my guess on your question! :)

It is possible, but not directly (though you could spelunk the
Explanation to get this information per document).  Do you want term
frequency across an individual document or the entire index?

     Erik


>
> Thx in advance
> karthik
>
>
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Monday, July 18, 2005 6:39 PM
> To: java-user@lucene.apache.org
> Subject: Re: BOOLEAN OPERATOR HOWTO
>
>
>
> On Jul 18, 2005, at 8:12 AM, Karthik N S wrote:
>
>> I have 2 Questions.
>>
> But there were no question marks!   I don't understand your questions
> at all, sorry, but I'll see if I can decipher it somewhat....
>
>
>> 1) The Search Criteria  src  requires to automatically fill   "  "
>> between  Search words with a Boolean Operator   "  AND ".
>>
>
> You mean to achieve AND'd clauses?   By default, OR is the operator,
> and AND must be explicit.  You can construct a QueryParser instance
> and set the default operator to AND, though, and then OR must be
> explicit.
>
>
>>  2) The Search Criteria  src  requires to automatically recognise
>> the existing  Boolean Query  ' AND , + '  present and append the same
>>      with  out any manupulations.
>>
>> Ex : -
>> Search Word  =
>>
>> 'Lucene in Action Erik hatcher and  Otis  + Gospodnetic '   =
>> lucene AND action AND Eric  AND hatcher AND otis + gospodnetic .
>>
>>
>> How to Achieve this , Is there any mechanism built into Lucene to
>> handle such situations.
>>
>
> Yes, this sounds like the default operator is what you're looking
> for.  Since you use "Lucene in Action" as an example, flip to page 94
> for more discussion on this, and then flip to the other pages
> mentioned here:
>
>      http://www.lucenebook.com/search?query=default+operator
>
> Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 21 10:18:35 2005
Return-Path: <java-user-return-15531-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81273 invoked from network); 21 Jul 2005 10:18:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2005 10:18:35 -0000
Received: (qmail 781 invoked by uid 500); 21 Jul 2005 10:18:25 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 736 invoked by uid 500); 21 Jul 2005 10:18:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 716 invoked by uid 99); 21 Jul 2005 10:18:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 03:18:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 03:18:16 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 42A9813E2006; Thu, 21 Jul 2005 06:18:18 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 9514113E2005
	for <java-user@lucene.apache.org>; Thu, 21 Jul 2005 06:18:16 -0400 (EDT)
In-Reply-To: <OBELINLGKPEMCIEIJJNKCEIFCEAA.karthik@controlnet.co.in>
References: <OBELINLGKPEMCIEIJJNKCEIFCEAA.karthik@controlnet.co.in>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <0E20F0D9-BFFD-4E30-BE1E-5E1E7E89BD97@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: BOOLEAN OPERATOR HOWTO
Date: Thu, 21 Jul 2005 06:18:12 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 21, 2005, at 5:09 AM, Karthik N S wrote:
>>> Do you want term  frequency across an individual document or the  
>>> entire
>>>
> index?
>
> Of course the Frequency will have to be across the entire index.
>
> In such case How does Explanation be usefull (Since Explanation is per
> document)

Explanation would not be useful for index level frequencies.  The  
only idea I have at the moment is for you to extract all the terms  
from the Query and individually find the frequency from IndexReader  
API.  I don't know of any other ways.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 21 11:48:15 2005
Return-Path: <java-user-return-15532-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 98863 invoked from network); 21 Jul 2005 11:48:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2005 11:48:15 -0000
Received: (qmail 83812 invoked by uid 500); 21 Jul 2005 11:48:08 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83663 invoked by uid 500); 21 Jul 2005 11:48:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83650 invoked by uid 99); 21 Jul 2005 11:48:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 04:48:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.123.241.50] (HELO rivette.int.mediasurface.com) (193.123.241.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 04:48:01 -0700
Received: from rivette.int.mediasurface.com (localhost [127.0.0.1])
	by rivette.int.mediasurface.com (8.11.6+Sun/8.11.6) with ESMTP id j6LBlvc21454
	for <java-user@lucene.apache.org>; Thu, 21 Jul 2005 12:47:57 +0100 (BST)
Received: from neptune.int.mediasurface.com (neptune.int.mediasurface.com [10.0.5.71])
	by rivette.int.mediasurface.com (8.11.6+Sun/8.11.6) with ESMTP id j6LBlul21448
	for <java-user@lucene.apache.org>; Thu, 21 Jul 2005 12:47:56 +0100 (BST)
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Using QueryParser with a single field
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Date: Thu, 21 Jul 2005 12:47:59 +0100
Message-ID: <BE3E7BC7F7553B4A9362D4192ECD308AB18115@neptune.int.mediasurface.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Using QueryParser with a single field
Thread-Index: AcWMWtzcDZ/kc06XTMuCoNtCFqTkDQBjwEHQ
From: "Peter Gelderbloem" <Peter.Gelderbloem@mediasurface.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think it would be better in this case to not use QueryParser. It is
not designed for your situation.
Build the query using BooleanQuery instead.

Peter Gelderbloem=20

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 21 15:54:15 2005
Return-Path: <java-user-return-15533-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 57580 invoked from network); 21 Jul 2005 15:54:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2005 15:54:14 -0000
Received: (qmail 81558 invoked by uid 500); 21 Jul 2005 15:54:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 81537 invoked by uid 500); 21 Jul 2005 15:54:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 81524 invoked by uid 99); 21 Jul 2005 15:54:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 08:54:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rdaviddi@gmail.com designates 64.233.184.206 as permitted sender)
Received: from [64.233.184.206] (HELO wproxy.gmail.com) (64.233.184.206)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 08:54:01 -0700
Received: by wproxy.gmail.com with SMTP id i16so294600wra
        for <java-user@lucene.apache.org>; Thu, 21 Jul 2005 08:54:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Zfer3hZBq9uCYNzJtCKiFWcL5YwJ0S3fqJmPJiKMCakHp9HnR7ZfzUXoF4jCwfJxHaFHh7RqlWmJYTNML1muRsZmMapZorIbhPVskzyRtRksNKqn6HJnHwScmX0qgIb6sQLOuJD+VPlpiyg1DfCPVHkmnX102s0ibCEv6rAX5V8=
Received: by 10.54.139.7 with SMTP id m7mr572125wrd;
        Thu, 21 Jul 2005 08:53:43 -0700 (PDT)
Received: by 10.54.94.10 with HTTP; Thu, 21 Jul 2005 08:53:43 -0700 (PDT)
Message-ID: <8a484a7805072108533a1d1d45@mail.gmail.com>
Date: Thu, 21 Jul 2005 17:53:43 +0200
From: Riccardo Daviddi <rdaviddi@gmail.com>
Reply-To: Riccardo Daviddi <rdaviddi@gmail.com>
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: Add unique id to a doc
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

it's possible to set an unique id (as keyword field) to a doc by
looking in the index? I mean, it's possible to look in the index and
know what is the last id (which is a keyword field) and then decide
for the new id to associate to the new indexed doc? Or it's better
store the doc in a db and get so a unique id (the key of the row in
the db) and use it as the unique id for the keyword field in the
index?

--=20
Riccardo Daviddi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 21 17:17:56 2005
Return-Path: <java-user-return-15534-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97655 invoked from network); 21 Jul 2005 17:17:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2005 17:17:55 -0000
Received: (qmail 29240 invoked by uid 500); 21 Jul 2005 17:17:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29106 invoked by uid 500); 21 Jul 2005 17:17:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29093 invoked by uid 99); 21 Jul 2005 17:17:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 10:17:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.41] (HELO web31108.mail.mud.yahoo.com) (68.142.200.41)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 21 Jul 2005 10:17:42 -0700
Received: (qmail 13111 invoked by uid 60001); 21 Jul 2005 17:17:44 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=F+jJnQ+eOlcQccdLFT4gYF5+6gdLSP5WxxX3+frxw3NjHkSNMsju4qsrT1W36cnIJNx4WqWxkyuSun498Zftb0b6Temy+LlKUagVJO/ydlI0WS42STAS9UvRoF/65flwBWoxTBaLbX37ZmWhD8PnF8v7KoQo6UG1MpaGi4gew/s=  ;
Message-ID: <20050721171744.13109.qmail@web31108.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31108.mail.mud.yahoo.com via HTTP; Thu, 21 Jul 2005 10:17:44 PDT
Date: Thu, 21 Jul 2005 10:17:44 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Add unique id to a doc
To: java-user@lucene.apache.org
In-Reply-To: <8a484a7805072108533a1d1d45@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Going the DB way may be safer.
But you could use IndexReader's maxDoc() method to use the other
approach:
http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReader.html#maxDoc()

Otis

--- Riccardo Daviddi <rdaviddi@gmail.com> wrote:

> Hi all,
> 
> it's possible to set an unique id (as keyword field) to a doc by
> looking in the index? I mean, it's possible to look in the index and
> know what is the last id (which is a keyword field) and then decide
> for the new id to associate to the new indexed doc? Or it's better
> store the doc in a db and get so a unique id (the key of the row in
> the db) and use it as the unique id for the keyword field in the
> index?
> 
> -- 
> Riccardo Daviddi
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 21 17:19:47 2005
Return-Path: <java-user-return-15535-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99453 invoked from network); 21 Jul 2005 17:19:47 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2005 17:19:47 -0000
Received: (qmail 33054 invoked by uid 500); 21 Jul 2005 17:19:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33032 invoked by uid 500); 21 Jul 2005 17:19:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 33019 invoked by uid 99); 21 Jul 2005 17:19:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 10:19:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 10:19:35 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C260B13E2008; Thu, 21 Jul 2005 13:19:36 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 9936A13E2006
	for <java-user@lucene.apache.org>; Thu, 21 Jul 2005 13:18:57 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <8a484a7805072108533a1d1d45@mail.gmail.com>
References: <8a484a7805072108533a1d1d45@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7C8F343C-774F-487C-8B0E-C108CA943319@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Add unique id to a doc
Date: Thu, 21 Jul 2005 13:18:53 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You could certainly use IndexReader to get the last document in the  
index and retrieve its ID, but why?

What use case do you have in mind for such id's?  Do they have a non- 
arbitrary meaning?  Do your documents have nothing unique to identify  
them already?

     Erik


On Jul 21, 2005, at 11:53 AM, Riccardo Daviddi wrote:

> Hi all,
>
> it's possible to set an unique id (as keyword field) to a doc by
> looking in the index? I mean, it's possible to look in the index and
> know what is the last id (which is a keyword field) and then decide
> for the new id to associate to the new indexed doc? Or it's better
> store the doc in a db and get so a unique id (the key of the row in
> the db) and use it as the unique id for the keyword field in the
> index?
>
> -- 
> Riccardo Daviddi
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 21 17:40:20 2005
Return-Path: <java-user-return-15536-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 9800 invoked from network); 21 Jul 2005 17:40:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2005 17:40:19 -0000
Received: (qmail 76625 invoked by uid 500); 21 Jul 2005 17:40:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76606 invoked by uid 500); 21 Jul 2005 17:40:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76593 invoked by uid 99); 21 Jul 2005 17:40:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 10:40:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rdaviddi@gmail.com designates 64.233.184.200 as permitted sender)
Received: from [64.233.184.200] (HELO wproxy.gmail.com) (64.233.184.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 10:40:08 -0700
Received: by wproxy.gmail.com with SMTP id i16so24499wra
        for <java-user@lucene.apache.org>; Thu, 21 Jul 2005 10:40:11 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=lkOarT2fsWahBpG9jOrAA30q+IujId45U5idw+0ZgMmaa9DeFtJ7d0XtRkHIWLstF8JFW5YtBYQAcvR82PzKwjmTZYjcyk7VTcvS3Cl9ucNPKvs5L8P8s9Kyr/COCAOGbnGQFLUK/zGKpewAhBQeYJoblEZfi5XVX8aZWPcDzm8=
Received: by 10.54.147.3 with SMTP id u3mr616818wrd;
        Thu, 21 Jul 2005 10:39:47 -0700 (PDT)
Received: by 10.54.94.10 with HTTP; Thu, 21 Jul 2005 10:39:47 -0700 (PDT)
Message-ID: <8a484a7805072110396438deec@mail.gmail.com>
Date: Thu, 21 Jul 2005 19:39:47 +0200
From: Riccardo Daviddi <rdaviddi@gmail.com>
Reply-To: Riccardo Daviddi <rdaviddi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Add unique id to a doc
In-Reply-To: <20050721171744.13109.qmail@web31108.mail.mud.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <8a484a7805072108533a1d1d45@mail.gmail.com>
	 <20050721171744.13109.qmail@web31108.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I think maxDoc doesn't sole my problem at all.
Correct me if I am wrong: suppose I have 5 docs in my index, and I
wanto to add one new doc to the index. if I use the maxDoc as the new
unique id for that document I obtain 5 (the first free position,
considering it starts from 0). Now suppose I delete a doc what happen?
there is a reordering of the docs inside the index? I don't know, I am
asking you that. couse if there is a reorder at the next doc to add,
if i call maxdoc this doc receive 5 again and it's not correct. for
that you said db way is safer?
thx

On 7/21/05, Otis Gospodnetic <otis_gospodnetic@yahoo.com> wrote:
> Going the DB way may be safer.
> But you could use IndexReader's maxDoc() method to use the other
> approach:
> http://lucene.apache.org/java/docs/api/org/apache/lucene/index/IndexReade=
r.html#maxDoc()
>=20
> Otis
>=20
> --- Riccardo Daviddi <rdaviddi@gmail.com> wrote:
>=20
> > Hi all,
> >
> > it's possible to set an unique id (as keyword field) to a doc by
> > looking in the index? I mean, it's possible to look in the index and
> > know what is the last id (which is a keyword field) and then decide
> > for the new id to associate to the new indexed doc? Or it's better
> > store the doc in a db and get so a unique id (the key of the row in
> > the db) and use it as the unique id for the keyword field in the
> > index?
> >
> > --
> > Riccardo Daviddi
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Riccardo Daviddi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 21 19:44:25 2005
Return-Path: <java-user-return-15537-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64638 invoked from network); 21 Jul 2005 19:44:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2005 19:44:24 -0000
Received: (qmail 91157 invoked by uid 500); 21 Jul 2005 19:44:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91115 invoked by uid 500); 21 Jul 2005 19:44:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 91102 invoked by uid 99); 21 Jul 2005 19:44:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 12:44:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rdaviddi@gmail.com designates 64.233.184.196 as permitted sender)
Received: from [64.233.184.196] (HELO wproxy.gmail.com) (64.233.184.196)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 12:44:11 -0700
Received: by wproxy.gmail.com with SMTP id i16so69168wra
        for <java-user@lucene.apache.org>; Thu, 21 Jul 2005 12:44:14 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Ha2lKnmNnC2mZoo5VnHRs1JtyjLAbjeToI+1CUmu2p5UsH9/ub4YENgEqHhHpeOiOZi41rWsnIgpxP7zpf4FSoBFC4ixg9y55Ks/FIV724EL4tKJFNXcL1yCYNCVgI4k+gb4UuYAe/JGwmfXbFgj5kW/bYg7ekFkGWm1Rw0N4EE=
Received: by 10.54.4.3 with SMTP id 3mr680264wrd;
        Thu, 21 Jul 2005 12:43:55 -0700 (PDT)
Received: by 10.54.94.10 with HTTP; Thu, 21 Jul 2005 12:43:55 -0700 (PDT)
Message-ID: <8a484a780507211243791da55f@mail.gmail.com>
Date: Thu, 21 Jul 2005 21:43:55 +0200
From: Riccardo Daviddi <rdaviddi@gmail.com>
Reply-To: Riccardo Daviddi <rdaviddi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Add unique id to a doc
In-Reply-To: <7C8F343C-774F-487C-8B0E-C108CA943319@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <8a484a7805072108533a1d1d45@mail.gmail.com>
	 <7C8F343C-774F-487C-8B0E-C108CA943319@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What I want to to is to assign a unique id to each doc I add to the index.=
=20
I was wondering if there is a method to assign a unique id directly
looking in the index so after I could store my doc in a db with the
same id as key.

On 7/21/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> You could certainly use IndexReader to get the last document in the
> index and retrieve its ID, but why?
>=20
> What use case do you have in mind for such id's?  Do they have a non-
> arbitrary meaning?  Do your documents have nothing unique to identify
> them already?
>=20
>      Erik
>=20
>=20
> On Jul 21, 2005, at 11:53 AM, Riccardo Daviddi wrote:
>=20
> > Hi all,
> >
> > it's possible to set an unique id (as keyword field) to a doc by
> > looking in the index? I mean, it's possible to look in the index and
> > know what is the last id (which is a keyword field) and then decide
> > for the new id to associate to the new indexed doc? Or it's better
> > store the doc in a db and get so a unique id (the key of the row in
> > the db) and use it as the unique id for the keyword field in the
> > index?
> >
> > --
> > Riccardo Daviddi
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Riccardo Daviddi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 21 20:20:50 2005
Return-Path: <java-user-return-15538-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77681 invoked from network); 21 Jul 2005 20:20:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2005 20:20:49 -0000
Received: (qmail 43560 invoked by uid 500); 21 Jul 2005 20:20:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43503 invoked by uid 500); 21 Jul 2005 20:20:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43473 invoked by uid 99); 21 Jul 2005 20:20:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 13:20:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 13:20:27 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 9569213E2005; Thu, 21 Jul 2005 16:20:30 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id D06CD13E2005
	for <java-user@lucene.apache.org>; Thu, 21 Jul 2005 16:20:12 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <8a484a780507211243791da55f@mail.gmail.com>
References: <8a484a7805072108533a1d1d45@mail.gmail.com> <7C8F343C-774F-487C-8B0E-C108CA943319@ehatchersolutions.com> <8a484a780507211243791da55f@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <88EA1632-D940-4E37-B5CD-63266F77E5AC@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Add unique id to a doc
Date: Thu, 21 Jul 2005 16:20:11 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.7 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 21, 2005, at 3:43 PM, Riccardo Daviddi wrote:
> What I want to to is to assign a unique id to each doc I add to the  
> index.
> I was wondering if there is a method to assign a unique id directly
> looking in the index so after I could store my doc in a db with the
> same id as key.

So first Lucene, then the DB?

How about generating a GUID for each document?  Or perhaps a digest  
of it's contents?

     Erik



>
> On 7/21/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>
>> You could certainly use IndexReader to get the last document in the
>> index and retrieve its ID, but why?
>>
>> What use case do you have in mind for such id's?  Do they have a non-
>> arbitrary meaning?  Do your documents have nothing unique to identify
>> them already?
>>
>>      Erik
>>
>>
>> On Jul 21, 2005, at 11:53 AM, Riccardo Daviddi wrote:
>>
>>
>>> Hi all,
>>>
>>> it's possible to set an unique id (as keyword field) to a doc by
>>> looking in the index? I mean, it's possible to look in the index and
>>> know what is the last id (which is a keyword field) and then decide
>>> for the new id to associate to the new indexed doc? Or it's better
>>> store the doc in a db and get so a unique id (the key of the row in
>>> the db) and use it as the unique id for the keyword field in the
>>> index?
>>>
>>> --
>>> Riccardo Daviddi
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> -- 
> Riccardo Daviddi
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 21 20:31:13 2005
Return-Path: <java-user-return-15539-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82732 invoked from network); 21 Jul 2005 20:31:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2005 20:31:12 -0000
Received: (qmail 72545 invoked by uid 500); 21 Jul 2005 20:31:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 72499 invoked by uid 500); 21 Jul 2005 20:31:05 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 72482 invoked by uid 99); 21 Jul 2005 20:31:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 13:31:04 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rdaviddi@gmail.com designates 64.233.184.203 as permitted sender)
Received: from [64.233.184.203] (HELO wproxy.gmail.com) (64.233.184.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 13:30:59 -0700
Received: by wproxy.gmail.com with SMTP id 67so93905wri
        for <java-user@lucene.apache.org>; Thu, 21 Jul 2005 13:31:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=ihKOrvvnulFCir8G0bEW20uLoIAESiyjhzVy88dYaGjVeLfp+BrcAj3VFnURqHjWER/lTbSZLL0wRGZ8AvUf80S9M9gdOaXeT6LIGMoXvvVnX5FEgMO2WmrzW+eBX5dMTgHjlisMpk4+N9M6XuZ52Z4GRDbnkxTx0LSbgRvrmLM=
Received: by 10.54.61.20 with SMTP id j20mr701204wra;
        Thu, 21 Jul 2005 13:30:48 -0700 (PDT)
Received: by 10.54.94.10 with HTTP; Thu, 21 Jul 2005 13:30:47 -0700 (PDT)
Message-ID: <8a484a7805072113304c1c6c64@mail.gmail.com>
Date: Thu, 21 Jul 2005 22:30:47 +0200
From: Riccardo Daviddi <rdaviddi@gmail.com>
Reply-To: Riccardo Daviddi <rdaviddi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Add unique id to a doc
In-Reply-To: <88EA1632-D940-4E37-B5CD-63266F77E5AC@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <8a484a7805072108533a1d1d45@mail.gmail.com>
	 <7C8F343C-774F-487C-8B0E-C108CA943319@ehatchersolutions.com>
	 <8a484a780507211243791da55f@mail.gmail.com>
	 <88EA1632-D940-4E37-B5CD-63266F77E5AC@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

yes I was wondering if I could "use" lucene before the db.
What you mean with GUID? About the digest, well it's a possibility but
considering I have to store my docs in a db I think the best is abort
this and first of all store in db the doc and assign the key as unique
id in the index.

On 7/21/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>=20
> On Jul 21, 2005, at 3:43 PM, Riccardo Daviddi wrote:
> > What I want to to is to assign a unique id to each doc I add to the
> > index.
> > I was wondering if there is a method to assign a unique id directly
> > looking in the index so after I could store my doc in a db with the
> > same id as key.
>=20
> So first Lucene, then the DB?
>=20
> How about generating a GUID for each document?  Or perhaps a digest
> of it's contents?
>=20
>      Erik
>=20
>=20
>=20
> >
> > On 7/21/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
> >
> >> You could certainly use IndexReader to get the last document in the
> >> index and retrieve its ID, but why?
> >>
> >> What use case do you have in mind for such id's?  Do they have a non-
> >> arbitrary meaning?  Do your documents have nothing unique to identify
> >> them already?
> >>
> >>      Erik
> >>
> >>
> >> On Jul 21, 2005, at 11:53 AM, Riccardo Daviddi wrote:
> >>
> >>
> >>> Hi all,
> >>>
> >>> it's possible to set an unique id (as keyword field) to a doc by
> >>> looking in the index? I mean, it's possible to look in the index and
> >>> know what is the last id (which is a keyword field) and then decide
> >>> for the new id to associate to the new indexed doc? Or it's better
> >>> store the doc in a db and get so a unique id (the key of the row in
> >>> the db) and use it as the unique id for the keyword field in the
> >>> index?
> >>>
> >>> --
> >>> Riccardo Daviddi
> >>>
> >>> --------------------------------------------------------------------
> >>> -
> >>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >>> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>>
> >>>
> >>
> >>
> >> ---------------------------------------------------------------------
> >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> >> For additional commands, e-mail: java-user-help@lucene.apache.org
> >>
> >>
> >>
> >
> >
> > --
> > Riccardo Daviddi
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Riccardo Daviddi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 21 21:53:00 2005
Return-Path: <java-user-return-15540-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13161 invoked from network); 21 Jul 2005 21:53:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2005 21:53:00 -0000
Received: (qmail 49337 invoked by uid 500); 21 Jul 2005 21:52:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 49307 invoked by uid 500); 21 Jul 2005 21:52:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 49294 invoked by uid 99); 21 Jul 2005 21:52:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 14:52:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.209.1.80] (HELO webmail.cymfony.com) (65.209.1.80)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 14:52:48 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.6944.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
Subject: Problem with deleting and optimizing index
Date: Thu, 21 Jul 2005 17:51:13 -0400
Message-ID: <13F36D2926AD444697093282F20041B70162353C@buf-ex01.cymfony.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Problem with deleting and optimizing index
Thread-Index: AcWOPlApPaUOZA1jREut6oNMpQPRvg==
From: "Peter Kim" <pkim@cymfony.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I have a problem related to index size and deleting and optimizing. So
from reading various sources online, it seems as though the size of the
Lucene index should become no larger than half the size of the disk
since during optimization, the size of the index can ballon to double
the original unoptimized size. Unfortunately, I've allowed my index to
grow past half the size of the disk (well, actually I only have 8% disk
capacity remaining).=20

So, I can delete a chunk of documents by using IndexReader.delete() but
disk space won't actually be freed up until I run optimize(). But
running optimize() may cause the index to grow until the disk runs out
of space.=20

What should I do? Should I just not optimize and believe that adding new
documents will automatically replace the space taken up by the deleted
documents? Or is my only option to nuke the index and remember next time
to not allow the index to grow to more than half the size of the disk?

Thanks,
Peter

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 21 22:52:30 2005
Return-Path: <java-user-return-15541-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 32416 invoked from network); 21 Jul 2005 22:52:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 21 Jul 2005 22:52:30 -0000
Received: (qmail 45943 invoked by uid 500); 21 Jul 2005 22:52:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 45921 invoked by uid 500); 21 Jul 2005 22:52:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 45908 invoked by uid 99); 21 Jul 2005 22:52:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 15:52:23 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [209.86.89.61] (HELO smtpauth01.mail.atl.earthlink.net) (209.86.89.61)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 15:52:18 -0700
Received: from [207.217.90.95] (helo=[207.217.90.95])
	by smtpauth01.mail.atl.earthlink.net with asmtp (Exim 4.34)
	id 1Dvjtt-0001Gb-Dq
	for java-user@lucene.apache.org; Thu, 21 Jul 2005 18:52:21 -0400
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <8a484a7805072108533a1d1d45@mail.gmail.com>
References: <8a484a7805072108533a1d1d45@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <FADA8BDF-6400-4708-91FB-357332ED4AFE@corp.earthlink.net>
Content-Transfer-Encoding: 7bit
From: Peter Friend <octavian@corp.earthlink.net>
Subject: Re: Add unique id to a doc
Date: Thu, 21 Jul 2005 15:50:59 -0700
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-ELNK-Trace: e38a400786bfeea01aa676d7e74259b7b3291a7d08dfec796b98eb86e2eb66ef05f04ad4eb5e6039350badd9bab72f9c350badd9bab72f9c350badd9bab72f9c
X-Originating-IP: 207.217.90.95
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 21, 2005, at 8:53 AM, Riccardo Daviddi wrote:

> it's possible to set an unique id (as keyword field) to a doc by
> looking in the index? I mean, it's possible to look in the index and
> know what is the last id (which is a keyword field) and then decide
> for the new id to associate to the new indexed doc?

I am planning on using a DCE UUID for the purpose of identifying  
documents in the index. It is well defined, and the id contains all  
sorts of information that could be useful.

Peter

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 22 06:24:32 2005
Return-Path: <java-user-return-15542-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64130 invoked from network); 22 Jul 2005 06:24:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jul 2005 06:24:32 -0000
Received: (qmail 83850 invoked by uid 500); 22 Jul 2005 06:24:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83826 invoked by uid 500); 22 Jul 2005 06:24:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83813 invoked by uid 99); 22 Jul 2005 06:24:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 23:24:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [210.7.75.236] (HELO noida.naukri.com) (210.7.75.236)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 21 Jul 2005 23:24:18 -0700
Received: from [192.168.2.215] ([192.168.2.215])
          by noida.naukri.com (Lotus Domino Release 6.5.4)
          with ESMTP id 2005072211454083-81397 ;
          Fri, 22 Jul 2005 11:45:40 +0530 
Subject: Re: Corrupt index?
From: Kapil Chhabra <kapil.chhabra@naukri.com>
To: LUCENE USERS <java-user@lucene.apache.org>
In-Reply-To: <78A2AFE317F5AD48B823BE740D4A8152240739@flexbe01.crcpress.com>
References: <78A2AFE317F5AD48B823BE740D4A8152240739@flexbe01.crcpress.com>
Organization: naukri.com
Message-Id: <1122013468.2536.226.camel@kapil>
Mime-Version: 1.0
X-Mailer: Ximian Evolution 1.4.6 (1.4.6-2) 
Date: Fri, 22 Jul 2005 11:54:28 +0530
X-MIMETrack: Itemize by SMTP Server on noida/naukri(Release 6.5.4|March 27, 2005) at 07/22/2005
 11:45:41 AM,
	Serialize by Router on noida/naukri(Release 6.5.4|March 27, 2005) at 07/22/2005
 11:45:43 AM,
	Serialize complete at 07/22/2005 11:45:43 AM
Content-Transfer-Encoding: 7bit
Content-Type: text/plain
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

try to allocate more memory to your searcher.
ex. java -mx1024m ...

kapilChhabra

On Tue, 2005-07-19 at 23:32, Kipping, Peter wrote:
> Hi,
> 
> I rebuilt my index with only a few minor changes, and now when I search
> on it I get nothing but out of memory exceptions.  I don't know what
> would cause this but is there a way you can test the integrity of your
> index?  
> 
> Thanks,
> Peter


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 22 10:13:23 2005
Return-Path: <java-user-return-15543-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 54984 invoked from network); 22 Jul 2005 10:13:22 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jul 2005 10:13:22 -0000
Received: (qmail 18337 invoked by uid 500); 22 Jul 2005 10:13:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18288 invoked by uid 500); 22 Jul 2005 10:13:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18275 invoked by uid 99); 22 Jul 2005 10:13:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jul 2005 03:13:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rdaviddi@gmail.com designates 64.233.184.194 as permitted sender)
Received: from [64.233.184.194] (HELO wproxy.gmail.com) (64.233.184.194)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jul 2005 03:13:12 -0700
Received: by wproxy.gmail.com with SMTP id i16so322068wra
        for <java-user@lucene.apache.org>; Fri, 22 Jul 2005 03:13:15 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Arjw4Ul+/K57AQpSOLC7jBToqp4riyO6rhlLHn1e7+GgGTneQGHXyDmwWZsY/elsVH2odwGdUN7/GFKvguqOBnLP7Sljn5lFaunfSr9f0O9+AoSBTZHty+O45afMSM6ajdp2vT2oYJZwivoRBWKwYp0URFhORbq6oKvWbMAkRLQ=
Received: by 10.54.47.59 with SMTP id u59mr1057470wru;
        Fri, 22 Jul 2005 03:13:15 -0700 (PDT)
Received: by 10.54.94.10 with HTTP; Fri, 22 Jul 2005 03:13:15 -0700 (PDT)
Message-ID: <8a484a7805072203137a42759f@mail.gmail.com>
Date: Fri, 22 Jul 2005 12:13:15 +0200
From: Riccardo Daviddi <rdaviddi@gmail.com>
Reply-To: Riccardo Daviddi <rdaviddi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Add unique id to a doc
In-Reply-To: <FADA8BDF-6400-4708-91FB-357332ED4AFE@corp.earthlink.net>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <8a484a7805072108533a1d1d45@mail.gmail.com>
	 <FADA8BDF-6400-4708-91FB-357332ED4AFE@corp.earthlink.net>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I 'll take a look at it, thx.

On 7/22/05, Peter Friend <octavian@corp.earthlink.net> wrote:
>=20
> On Jul 21, 2005, at 8:53 AM, Riccardo Daviddi wrote:
>=20
> > it's possible to set an unique id (as keyword field) to a doc by
> > looking in the index? I mean, it's possible to look in the index and
> > know what is the last id (which is a keyword field) and then decide
> > for the new id to associate to the new indexed doc?
>=20
> I am planning on using a DCE UUID for the purpose of identifying
> documents in the index. It is well defined, and the id contains all
> sorts of information that could be useful.
>=20
> Peter
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Riccardo Daviddi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 22 13:39:26 2005
Return-Path: <java-user-return-15544-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 77196 invoked from network); 22 Jul 2005 13:39:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 22 Jul 2005 13:39:26 -0000
Received: (qmail 95408 invoked by uid 500); 22 Jul 2005 13:39:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95389 invoked by uid 500); 22 Jul 2005 13:39:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95374 invoked by uid 500); 22 Jul 2005 13:39:19 -0000
Delivered-To: apmail-jakarta-lucene-user@jakarta.apache.org
Received: (qmail 95370 invoked by uid 99); 22 Jul 2005 13:39:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jul 2005 06:39:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [147.83.41.105] (HELO mail.fib.upc.es) (147.83.41.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 22 Jul 2005 06:39:13 -0700
Received: from [147.83.58.160] (tarragona.fib.upc.es [147.83.58.160])
	by mail.fib.upc.es (Postfix) with ESMTP id 24131C9A33
	for <lucene-user@jakarta.apache.org>; Fri, 22 Jul 2005 15:39:10 +0200 (CEST)
Message-ID: <42E0F702.5060603@fib.upc.edu>
Date: Fri, 22 Jul 2005 15:39:14 +0200
From: Daniel Cortes <dcortes@fib.upc.edu>
Organization: FIB
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: Lucene Users List <lucene-user@jakarta.apache.org>
Subject: Multisearcher problem
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scaned-FIB: AntiVirus/AntiSpam en fib.upc.es
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi everyboy, the context of the problem
I have 6 index created by IndexWriter (1 index has something indexed, 
but the others are empty (only the segment file)).
I Use this to search in all index at same time
 
//This line I don't know what is her function, but I don't think that is 
the problem
private String[] fields= new String[] {"TITLE","CONTENTS","DESCRIPTION"};
private int[] required= 
{MultiFieldQueryParser.NORMAL_FIELD,MultiFieldQueryParser.NORMAL_FIELD,MultiFieldQueryParser.NORMAL_FIELD};
IndexSearcher[] searchers;

//I  initialize  searchers and do this;
            MultiSearcher searcher = new MultiSearcher(searchers);
            Query searcht = 
MultiFieldQueryParser.parse("something",fields,required,getTheInstanceOfMyAnalizer());
            Hits resul=searcher.search(searcht);


and the firsts search works, but after I have this:

java.io.IOException: Bad file descriptor
        at java.io.RandomAccessFile.seek(Native Method)
        at 
org.apache.lucene.store.FSInputStream.readInternal(FSDirectory.java:415)
        at 
org.apache.lucene.store.InputStream.readBytes(InputStream.java:61)
        at 
org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:220)
        at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
        at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
        at 
org.apache.lucene.index.SegmentTermEnum.readTerm(SegmentTermEnum.java:142)
        at 
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:115)
        at 
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:143)
        at 
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:137)
        at 
org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:253)
        at 
org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:69)
        at org.apache.lucene.search.Similarity.idf(Similarity.java:255)
        at 
org.apache.lucene.search.TermQuery$TermWeight.sumOfSquaredWeights(TermQuery.java:47)
        at 
org.apache.lucene.search.BooleanQuery$BooleanWeight.sumOfSquaredWeights(BooleanQuery.java:110)
        at org.apache.lucene.search.Query.weight(Query.java:86)
        at 
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
        at 
org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:116)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:43)
        at org.apache.lucene.search.Searcher.search(Searcher.java:33)


some ideas please?
If I try to open my indexs with LUKE the index that has something, don't 
give me problems and I acan see their fields, but the other empties 
index (only a file called segments) ever reply my: Invalid path, or not 
a Lucene index.
Perhaps don't  I create well the indexs?

I do this for every File indexDir
            IndexWriter writer;
            File dir = new File();
             if (dir.isDirectory()) {
                writer = new IndexWriter(dir, myAnalyzer, false);
                writer.setUseCompoundFile(true);
             } else {
                dir.mkdirs();
                 writer = new IndexWriter(dir, myAnalyzer, true);
                writer.setUseCompoundFile(true);
             }
                writer.optimize();
                writer.close();

Is it correct?
I hope this lines with a solution for my problem can be used already for 
someone.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 24 16:25:01 2005
Return-Path: <java-user-return-15545-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 99545 invoked from network); 24 Jul 2005 16:25:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2005 16:25:00 -0000
Received: (qmail 13755 invoked by uid 500); 24 Jul 2005 16:24:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 12988 invoked by uid 500); 24 Jul 2005 16:24:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 12972 invoked by uid 99); 24 Jul 2005 16:24:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jul 2005 09:24:54 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.160.230.40] (HELO mout.perfora.net) (217.160.230.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jul 2005 09:24:46 -0700
Received: from [59.93.48.115] (helo=D2Q9FF1S)
	by mrelay.perfora.net with ESMTP (Nemesis),
	id 0MKz1m-1DwjHU0R32-0008F9; Sun, 24 Jul 2005 12:24:48 -0400
Message-ID: <000c01c5906b$281e4520$5d1afea9@dsil.danlawinc.com>
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: <java-user@lucene.apache.org>
References: <20050718043336.2779.qmail@web31109.mail.mud.yahoo.com> <000501c58b53$297f1d30$ea01a8c0@dsil.danlawinc.com>
Subject: Re: Index locked exception while updating index
Date: Sun, 24 Jul 2005 21:47:09 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,

I am trying to add paging functionality while using lucene search. I have 
created a PageFilter what takes in the current page num and the number of 
records as input and invoking the IndexSearcher passing the a Boolean Query 
object and the PageFilter. The search returns around 1000 records when 
invoked without the PageFilter, but with the PageFilter, it returns only 6 
records. I did some debugging and realised that the in the 
org.apache.lucene.search.IndexSearcher.search method, the bitset.get(doc) is 
returning false for all the other documents and so they are not added to the 
results.
Has someone implemented Paging using filters or tell me if I am missing 
something here?

Here is the code :

 public List searchDocuments(DocumentSearchCriteria searchCriteria) throws 
ApplicationException {
      List results = new ArrayList();
      String indexLoc = luceneConfig.getIndexDir();
      Directory fsDir = getIndexDirectory(indexLoc, false);
      IndexSearcher searcher = getIndexSearcher(fsDir);

      Query query = indexSearchUtil.getSearchQuery(searchCriteria);
      try {
            Hits hits = searcher.search(query, new PageFilter(0,20));
            logger.info("Found " + hits.length() + " document(s) that 
matched query '" + query + "':");
            results = indexSearchUtil.populateDocumentInfoView(hits, 
results);
      } catch(Exception e) {
           logger.error("Exception occurred in searchDocuments()");
      }
      return results;
 }

Here is the PageFilter :

public class PageFilter extends Filter {
    private int start;
    private int end;

    public PageFilter(int pageNum, int pageSize) {
        start = pageNum * pageSize;
        end = (pageNum+1) * pageSize;
    }

    public BitSet bits(IndexReader reader) throws IOException {
        BitSet result = new BitSet(reader.maxDoc());
        for(int i=start; (i<end) && (i<result.size()); i++) {
            result.set(i);
        }
        return result;
    }
}

Any suggestion would be greatly appreciated.
Thanks,
Harini


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 24 16:28:28 2005
Return-Path: <java-user-return-15546-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 565 invoked from network); 24 Jul 2005 16:28:28 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2005 16:28:28 -0000
Received: (qmail 15772 invoked by uid 500); 24 Jul 2005 16:28:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14843 invoked by uid 500); 24 Jul 2005 16:28:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14830 invoked by uid 99); 24 Jul 2005 16:28:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jul 2005 09:28:23 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.160.230.40] (HELO mout.perfora.net) (217.160.230.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jul 2005 09:28:17 -0700
Received: from [59.93.48.115] (helo=D2Q9FF1S)
	by mrelay.perfora.net with ESMTP (Nemesis),
	id 0MKz1m-1DwjKt0WMV-0008Tq; Sun, 24 Jul 2005 12:28:19 -0400
Message-ID: <001601c5906b$a5dd95b0$5d1afea9@dsil.danlawinc.com>
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: <java-user@lucene.apache.org>
Subject: Implementing paging functionality in lucene
Date: Sun, 24 Jul 2005 21:50:41 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,

I am trying to add paging functionality while using lucene search. I have
created a PageFilter what takes in the current page num and the number of
records as input and invoking the IndexSearcher passing the a Boolean Query
object and the PageFilter. The search returns around 1000 records when
invoked without the PageFilter, but with the PageFilter, it returns only 6
records. I did some debugging and realised that the in the
org.apache.lucene.search.IndexSearcher.search method, the bitset.get(doc) is
returning false for all the other documents and so they are not added to the
results.
Has someone implemented Paging using filters or tell me if I am missing
something here?

Here is the code :

 public List searchDocuments(DocumentSearchCriteria searchCriteria) throws
ApplicationException {
      List results = new ArrayList();
      String indexLoc = luceneConfig.getIndexDir();
      Directory fsDir = getIndexDirectory(indexLoc, false);
      IndexSearcher searcher = getIndexSearcher(fsDir);

      Query query = indexSearchUtil.getSearchQuery(searchCriteria);
      try {
            Hits hits = searcher.search(query, new PageFilter(0,20));
            logger.info("Found " + hits.length() + " document(s) that
matched query '" + query + "':");
            results = indexSearchUtil.populateDocumentInfoView(hits,
results);
      } catch(Exception e) {
           logger.error("Exception occurred in searchDocuments()");
      }
      return results;
 }

Here is the PageFilter :

public class PageFilter extends Filter {
    private int start;
    private int end;

    public PageFilter(int pageNum, int pageSize) {
        start = pageNum * pageSize;
        end = (pageNum+1) * pageSize;
    }

    public BitSet bits(IndexReader reader) throws IOException {
        BitSet result = new BitSet(reader.maxDoc());
        for(int i=start; (i<end) && (i<result.size()); i++) {
            result.set(i);
        }
        return result;
    }
}

Any suggestion would be greatly appreciated.
Thanks,
Harini


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 24 16:33:56 2005
Return-Path: <java-user-return-15547-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2203 invoked from network); 24 Jul 2005 16:33:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2005 16:33:56 -0000
Received: (qmail 18197 invoked by uid 500); 24 Jul 2005 16:33:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17264 invoked by uid 500); 24 Jul 2005 16:33:52 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17251 invoked by uid 99); 24 Jul 2005 16:33:51 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jul 2005 09:33:51 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.68.218.166] (HELO home.simpleobjects.com) (216.68.218.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jul 2005 09:33:45 -0700
Received: from graphite (graphite.intranet [192.168.2.2])
	by home.simpleobjects.com (Postfix) with ESMTP id E927033C3B
	for <java-user@lucene.apache.org>; Sun, 24 Jul 2005 12:33:46 -0400 (EDT)
From: "Tony Schwartz" <tony@simpleobjects.com>
To: <java-user@lucene.apache.org>
Subject: RE: Implementing paging functionality in lucene
Date: Sun, 24 Jul 2005 12:33:46 -0400
Message-ID: <004901c5906d$7720cb00$0202a8c0@graphite>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2527
In-Reply-To: <001601c5906b$a5dd95b0$5d1afea9@dsil.danlawinc.com>
Importance: Normal
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Don't do that.  Don't use a filter for paging.  Just use the Hits object =
and
get from it only the records applicable for that page.

Tony Schwartz
tony@simpleobjects.com
"We're going to need a lot more cowbell."




-----Original Message-----
From: Harini Raghavan [mailto:harini.raghavan@insideview.com]=20
Sent: Sunday, July 24, 2005 12:21 PM
To: java-user@lucene.apache.org
Subject: Implementing paging functionality in lucene

Hi All,

I am trying to add paging functionality while using lucene search. I =
have
created a PageFilter what takes in the current page num and the number =
of
records as input and invoking the IndexSearcher passing the a Boolean =
Query
object and the PageFilter. The search returns around 1000 records when
invoked without the PageFilter, but with the PageFilter, it returns only =
6
records. I did some debugging and realised that the in the
org.apache.lucene.search.IndexSearcher.search method, the =
bitset.get(doc) is
returning false for all the other documents and so they are not added to =
the
results.
Has someone implemented Paging using filters or tell me if I am missing
something here?

Here is the code :

 public List searchDocuments(DocumentSearchCriteria searchCriteria) =
throws
ApplicationException {
      List results =3D new ArrayList();
      String indexLoc =3D luceneConfig.getIndexDir();
      Directory fsDir =3D getIndexDirectory(indexLoc, false);
      IndexSearcher searcher =3D getIndexSearcher(fsDir);

      Query query =3D indexSearchUtil.getSearchQuery(searchCriteria);
      try {
            Hits hits =3D searcher.search(query, new PageFilter(0,20));
            logger.info("Found " + hits.length() + " document(s) that
matched query '" + query + "':");
            results =3D indexSearchUtil.populateDocumentInfoView(hits,
results);
      } catch(Exception e) {
           logger.error("Exception occurred in searchDocuments()");
      }
      return results;
 }

Here is the PageFilter :

public class PageFilter extends Filter {
    private int start;
    private int end;

    public PageFilter(int pageNum, int pageSize) {
        start =3D pageNum * pageSize;
        end =3D (pageNum+1) * pageSize;
    }

    public BitSet bits(IndexReader reader) throws IOException {
        BitSet result =3D new BitSet(reader.maxDoc());
        for(int i=3Dstart; (i<end) && (i<result.size()); i++) {
            result.set(i);
        }
        return result;
    }
}

Any suggestion would be greatly appreciated.
Thanks,
Harini


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 24 17:00:09 2005
Return-Path: <java-user-return-15548-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11491 invoked from network); 24 Jul 2005 17:00:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2005 17:00:09 -0000
Received: (qmail 32698 invoked by uid 500); 24 Jul 2005 16:59:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32263 invoked by uid 500); 24 Jul 2005 16:59:25 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31114 invoked by uid 99); 24 Jul 2005 16:59:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jul 2005 09:59:17 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.215.166.64] (HELO grassmarket.ucs.ed.ac.uk) (129.215.166.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jul 2005 09:59:12 -0700
Received: from grassmarket.ucs.ed.ac.uk (localhost [127.0.0.1])
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.10) with ESMTP id j6OGxCWn011662;
	Sun, 24 Jul 2005 17:59:12 +0100 (BST)
Received: (from nobody@localhost)
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.9/Submit) id j6OGxCoo011659;
	Sun, 24 Jul 2005 17:59:12 +0100 (BST)
X-Authentication-Warning: grassmarket.ucs.ed.ac.uk: nobody set sender to s0454888@sms.ed.ac.uk using -f
Received: from haggis.cache.ed.ac.uk (haggis.cache.ed.ac.uk [129.215.13.83]) 
	by sms.ed.ac.uk (IMP) with HTTP 
	for <s0454888@sms.ed.ac.uk>; Sun, 24 Jul 2005 17:59:11 +0100
Message-ID: <1122224351.42e3c8dfe4fc7@sms.ed.ac.uk>
Date: Sun, 24 Jul 2005 17:59:11 +0100
From: Dave Kor <s0454888@sms.ed.ac.uk>
To: java-user@lucene.apache.org, Rajesh Munavalli <rajeshm@dessci.com>
Cc: java-user@lucene.apache.org
Subject: RE: n-gram indexing
References: <D1EFB337111B674B8F1BE155B01C6DD63557B6@franklin.corp.dessci>
In-Reply-To: <D1EFB337111B674B8F1BE155B01C6DD63557B6@franklin.corp.dessci>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.3
X-Scanned-By: MIMEDefang 2.33 (www . roaringpenguin . com / mimedefang)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Quoting Rajesh Munavalli <rajeshm@dessci.com>:

> Let me explain a scenario where I would need to add the n-grams at
> indexing time.

I see your point and I do agree. As it stands, Lucene does not innately support
n-gram indexing. However it is not impossible to adapt Lucene to serve as an
n-gram index. The method I will describe can be adapted to any search engine,
not just Lucene. But before I go on I must warn you that the end result will
use a lot of diskspace and will also result in longer search time (by a
multiple of N).

What's the method? Use of multiple incompatible indexes, N indexes to be exact.

You can write an Analyzer that churns out bi-grams and use it to create an index
of bi-grams. Likewise, you can also write an Analyzer that churns out tri-grams
and create an index of tri-grams. Its a tedious and diskspace wasting method of
n-gram indexing, but it can be done.

You can then separately search all three indexes, the unigram index, bigram
index and trigram index, to generate three separate scores for every document,
then combine the three scores using weights.



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 24 17:23:08 2005
Return-Path: <java-user-return-15549-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18036 invoked from network); 24 Jul 2005 17:23:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2005 17:23:07 -0000
Received: (qmail 55580 invoked by uid 500); 24 Jul 2005 17:23:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 55551 invoked by uid 500); 24 Jul 2005 17:23:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 55538 invoked by uid 99); 24 Jul 2005 17:23:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jul 2005 10:23:03 -0700
X-ASF-Spam-Status: No, hits=0.3 required=10.0
	tests=HTML_10_20,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [66.163.178.105] (HELO web34107.mail.mud.yahoo.com) (66.163.178.105)
    by apache.org (qpsmtpd/0.29) with SMTP; Sun, 24 Jul 2005 10:22:57 -0700
Received: (qmail 87361 invoked by uid 60001); 24 Jul 2005 17:23:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=zw0LXuawmK0rrgtG3m7COgNIoy/M6aen0C4fBWds9emwgEWfK8v3ExpMP9AwMKccR1YpioQv7IyQIIFOrxx3i8kxdO3vOm8kv5fwQGJNK0yyxXE+ALv3kvX1XM61w7N3KwLeGNirfWgb128XopkjvhiEmr3gdhtKAkOlOIoSy7I=  ;
Message-ID: <20050724172301.87359.qmail@web34107.mail.mud.yahoo.com>
Received: from [24.6.76.66] by web34107.mail.mud.yahoo.com via HTTP; Sun, 24 Jul 2005 10:23:01 PDT
Date: Sun, 24 Jul 2005 10:23:01 -0700 (PDT)
From: Lokesh Bajaj <lokesh_bajaj@yahoo.com>
Subject: Re: Problem with deleting and optimizing index
To: java-user@lucene.apache.org
In-Reply-To: <13F36D2926AD444697093282F20041B70162353C@buf-ex01.cymfony.com>
MIME-Version: 1.0
Content-Type: multipart/alternative; boundary="0-1732932240-1122225781=:87294"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-1732932240-1122225781=:87294
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit

Actually, you should probably not let your index grow beyond one-third the size of your disk.
 
a] You start of with your original index
b] During optimize, Lucene will initially write out files in non-compound file format.
c] Lucene will than combine the non-compound file format into the compound file format.
 
So before producing your final index, the disk usage can be three times the size of your final index. You can get around it by not trying to use the compound file format - but various people have mentioned other issues with having too many files open errors.
Lokesh

Peter Kim <pkim@cymfony.com> wrote:
Hi all,

I have a problem related to index size and deleting and optimizing. So
from reading various sources online, it seems as though the size of the
Lucene index should become no larger than half the size of the disk
since during optimization, the size of the index can ballon to double
the original unoptimized size. Unfortunately, I've allowed my index to
grow past half the size of the disk (well, actually I only have 8% disk
capacity remaining). 

So, I can delete a chunk of documents by using IndexReader.delete() but
disk space won't actually be freed up until I run optimize(). But
running optimize() may cause the index to grow until the disk runs out
of space. 

What should I do? Should I just not optimize and believe that adding new
documents will automatically replace the space taken up by the deleted
documents? Or is my only option to nuke the index and remember next time
to not allow the index to grow to more than half the size of the disk?

Thanks,
Peter

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


--0-1732932240-1122225781=:87294--

From java-user-return-15550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 24 17:44:20 2005
Return-Path: <java-user-return-15550-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24759 invoked from network); 24 Jul 2005 17:44:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 24 Jul 2005 17:44:20 -0000
Received: (qmail 71194 invoked by uid 500); 24 Jul 2005 17:44:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70289 invoked by uid 500); 24 Jul 2005 17:44:16 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70276 invoked by uid 99); 24 Jul 2005 17:44:16 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jul 2005 10:44:16 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [81.169.158.23] (HELO mail.aurisp.de) (81.169.158.23)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 24 Jul 2005 10:44:10 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail.aurisp.de (Postfix) with ESMTP id 5768FB808
	for <java-user@lucene.apache.org>; Sun, 24 Jul 2005 19:44:13 +0200 (CEST)
Received: from mail.aurisp.de ([127.0.0.1])
	by localhost (mail.aurisp.de [127.0.0.1]) (amavisd-new, port 10024)
	with LMTP id 01598-05 for <java-user@lucene.apache.org>;
	Sun, 24 Jul 2005 19:44:08 +0200 (CEST)
Received: from localhost (p50883E5B.dip.t-dialin.net [80.136.62.91])
	by mail.aurisp.de (Postfix) with ESMTP id 51C91B806
	for <java-user@lucene.apache.org>; Sun, 24 Jul 2005 19:44:07 +0200 (CEST)
Date: Sun, 24 Jul 2005 19:45:03 +0200
From: Sebastian Marius Kirsch <skirsch@sebastian-kirsch.org>
To: java-user@lucene.apache.org
Subject: Re: n-gram indexing
Message-ID: <20050724174503.GE846@amok.local>
References: <D1EFB337111B674B8F1BE155B01C6DD6355760@franklin.corp.dessci>
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline
In-Reply-To: <D1EFB337111B674B8F1BE155B01C6DD6355760@franklin.corp.dessci>
User-Agent: Mutt/1.4i
X-Virus-Scanned: by amavisd-maia-1.0.0-rc5 (Debian) at aurisp.de
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Rajeev,

I wrote a filter for generating n-grams a while back; I intended to
use it for statistics, but I guess you can also use it for search. I
also thought of the "boosting effect" you describe when I implemented
it, though I never actually tried whether it works that way.

It's in the Lucene bugzilla section:

http://issues.apache.org/bugzilla/show_bug.cgi?id=35456

Let me know if you have any problems with it.

If the lucene phrase queries honour position increments correctly,
they should work out of the box with my code. (My code adds the
unigram first with a position increment of 1, and then all n-grams
starting with that unigram with an increment of 0.) Just make sure you
use the same Analyzer for the queries as you do for the indexing, so
that n-grams are added to the query as well.

As regards the suggestion to rather use a very sloppy phrase or span
query: I expect this approach to be faster, as it would only use
TermQuery/BooleanQuery. You basically trade index size for search
speed.

If you get this to work with phrase queries, please add a test case
demonstrating it.

I saw something about n-gram queries in nutch, as far as I remember;
does anyone know whether nutch uses n-grams to speed up phrase
queries?

Regards, Sebastian

On Mon, Jul 18, 2005 at 02:27:28PM -0700, Rajesh Munavalli wrote:
> At what point do I add n-grams? Does the order in which I add n-grams
> affect exact phrase queries later? My questions are
> 
> (1) Should I add all the 1-grams followed by 2-grams followed by
> 3-grams..etc sentence by sentence OR
> 
> (2) Add all the 1 grams of entire document first before starting 2-grams
> for the entire document?

-- 
Sebastian Kirsch <skirsch@sebastian-kirsch.org> [http://www.sebastian-kirsch.org/]

NOTE: New email address! Please update your address book.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 09:26:32 2005
Return-Path: <java-user-return-15551-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93090 invoked from network); 25 Jul 2005 09:26:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 09:26:32 -0000
Received: (qmail 66313 invoked by uid 500); 25 Jul 2005 09:26:26 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66098 invoked by uid 500); 25 Jul 2005 09:26:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66085 invoked by uid 99); 25 Jul 2005 09:26:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 02:26:24 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 02:26:17 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 3375413E2006; Mon, 25 Jul 2005 05:26:20 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id EBDF513E2005
	for <java-user@lucene.apache.org>; Mon, 25 Jul 2005 05:25:52 -0400 (EDT)
In-Reply-To: <000c01c5906b$281e4520$5d1afea9@dsil.danlawinc.com>
References: <20050718043336.2779.qmail@web31109.mail.mud.yahoo.com> <000501c58b53$297f1d30$ea01a8c0@dsil.danlawinc.com> <000c01c5906b$281e4520$5d1afea9@dsil.danlawinc.com>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <18FDDD68-9D2C-4393-B64E-C209FBCF9EA2@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Index locked exception while updating index
Date: Mon, 25 Jul 2005 05:25:49 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 24, 2005, at 12:17 PM, Harini Raghavan wrote:

> Hi All,
>
> I am trying to add paging functionality while using lucene search.  
> I have created a PageFilter what takes in the current page num and  
> the number of records as input and invoking the IndexSearcher  
> passing the a Boolean Query object and the PageFilter. The search  
> returns around 1000 records when invoked without the PageFilter,  
> but with the PageFilter, it returns only 6 records. I did some  
> debugging and realised that the in the  
> org.apache.lucene.search.IndexSearcher.search method, the bitset.get 
> (doc) is returning false for all the other documents and so they  
> are not added to the results.
> Has someone implemented Paging using filters or tell me if I am  
> missing something here?

A Filter really isn't the right place to add paging.  A Filter makes  
a subset of documents available to searching.  Your example is making  
the first 20 documents available for search, but only 6 of those  
matched the query (so it seems at first glance).

Paging can be done a couple of different ways - 1) keep Hits around  
(and the associated IndexSearcher) and reuse it for paging rather  
than searching again.  2) Simply re-search and pick the appropriate  
starting point in Hits.   I've always used option #2 as it has always  
been fast enough.

     Erik


>
> Here is the code :
>
> public List searchDocuments(DocumentSearchCriteria searchCriteria)  
> throws ApplicationException {
>      List results = new ArrayList();
>      String indexLoc = luceneConfig.getIndexDir();
>      Directory fsDir = getIndexDirectory(indexLoc, false);
>      IndexSearcher searcher = getIndexSearcher(fsDir);
>
>      Query query = indexSearchUtil.getSearchQuery(searchCriteria);
>      try {
>            Hits hits = searcher.search(query, new PageFilter(0,20));
>            logger.info("Found " + hits.length() + " document(s)  
> that matched query '" + query + "':");
>            results = indexSearchUtil.populateDocumentInfoView(hits,  
> results);
>      } catch(Exception e) {
>           logger.error("Exception occurred in searchDocuments()");
>      }
>      return results;
> }
>
> Here is the PageFilter :
>
> public class PageFilter extends Filter {
>    private int start;
>    private int end;
>
>    public PageFilter(int pageNum, int pageSize) {
>        start = pageNum * pageSize;
>        end = (pageNum+1) * pageSize;
>    }
>
>    public BitSet bits(IndexReader reader) throws IOException {
>        BitSet result = new BitSet(reader.maxDoc());
>        for(int i=start; (i<end) && (i<result.size()); i++) {
>            result.set(i);
>        }
>        return result;
>    }
> }
>
> Any suggestion would be greatly appreciated.
> Thanks,
> Harini
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 11:05:44 2005
Return-Path: <java-user-return-15552-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53238 invoked from network); 25 Jul 2005 11:05:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 11:05:43 -0000
Received: (qmail 80326 invoked by uid 500); 25 Jul 2005 11:05:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 80001 invoked by uid 500); 25 Jul 2005 11:05:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79986 invoked by uid 99); 25 Jul 2005 11:05:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 04:05:38 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rdaviddi@gmail.com designates 64.233.184.205 as permitted sender)
Received: from [64.233.184.205] (HELO wproxy.gmail.com) (64.233.184.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 04:05:31 -0700
Received: by wproxy.gmail.com with SMTP id i11so965880wra
        for <java-user@lucene.apache.org>; Mon, 25 Jul 2005 04:05:35 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=RX7Lf6sx0DCV9MsgGGs6QDnPQr7lMUC+ADIiVSmtkW5gx/5u/fD0qWGmoxFdKG24BcpEbiavZYlqMawXCSqgf40o1R9kqRgcLGxacCOq9gDeCbray07xBzwDGsyvhmdM1fgEdNG6aMNJnFGTog+qYxr5jPmMl2GsaN7Wjn1yJOM=
Received: by 10.54.29.29 with SMTP id c29mr2105018wrc;
        Mon, 25 Jul 2005 04:05:35 -0700 (PDT)
Received: by 10.54.94.10 with HTTP; Mon, 25 Jul 2005 04:05:35 -0700 (PDT)
Message-ID: <8a484a7805072504051af8b50c@mail.gmail.com>
Date: Mon, 25 Jul 2005 13:05:35 +0200
From: Riccardo Daviddi <rdaviddi@gmail.com>
Reply-To: Riccardo Daviddi <rdaviddi@gmail.com>
To: Lucene Mailing List <java-user@lucene.apache.org>
Subject: filtering on searching or after through hits?
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,
I have to filter my searching in two ways:
1) by score, I want that only docs with score higher than a threshold
are returned.
2) by num of docs, I want that only, for example, the first 20 docs
are returned.

It's better do it with a queryfilter or search for all and after look
through the hits with some conditions?
--=20
Riccardo Daviddi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 11:38:04 2005
Return-Path: <java-user-return-15553-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 65936 invoked from network); 25 Jul 2005 11:38:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 11:38:04 -0000
Received: (qmail 11945 invoked by uid 500); 25 Jul 2005 11:37:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 11924 invoked by uid 500); 25 Jul 2005 11:37:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 11911 invoked by uid 99); 25 Jul 2005 11:37:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 04:37:55 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.160.230.40] (HELO mout.perfora.net) (217.160.230.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 04:37:48 -0700
Received: from ptil-66-8-in.primus-direct.net [61.12.8.66] (helo=D2Q9FF1S)
	by mrelay.perfora.net with ESMTP (Nemesis),
	id 0MKz1m-1Dx1HJ288W-00068T; Mon, 25 Jul 2005 07:37:49 -0400
Message-ID: <006301c5910c$3a685bc0$5d1afea9@dsil.danlawinc.com>
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: <java-user@lucene.apache.org>
References: <20050718043336.2779.qmail@web31109.mail.mud.yahoo.com> <000501c58b53$297f1d30$ea01a8c0@dsil.danlawinc.com> <000c01c5906b$281e4520$5d1afea9@dsil.danlawinc.com> <18FDDD68-9D2C-4393-B64E-C209FBCF9EA2@ehatchersolutions.com>
Subject: OutOfMemory errors while indexing large documents
Date: Mon, 25 Jul 2005 17:00:07 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,
I am using lucene to index large documents(HTML pages). The application is 
running on JBoss and MySQL on UNIX. The indexing is throwing OutOfMemory 
errors beyond a certain point. I am not sure why this is happening. I am 
using the default IndexWriter properties, but the lucene documentation 
mentions about setting the max field length on the IndexWriter to some 
optimum value for large documents. Is anyone aware of any optimum settings 
for maxFieldLength, mergeFactor, minMergeDoc and maxMergeDoc?
Thanks,
Harini 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 11:39:46 2005
Return-Path: <java-user-return-15554-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 66769 invoked from network); 25 Jul 2005 11:39:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 11:39:46 -0000
Received: (qmail 17873 invoked by uid 500); 25 Jul 2005 11:39:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17829 invoked by uid 500); 25 Jul 2005 11:39:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17758 invoked by uid 99); 25 Jul 2005 11:39:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 04:39:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [147.83.41.105] (HELO mail.fib.upc.es) (147.83.41.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 04:39:21 -0700
Received: from [147.83.58.160] (tarragona.fib.upc.es [147.83.58.160])
	by mail.fib.upc.es (Postfix) with ESMTP id ECDACC9A25
	for <java-user@lucene.apache.org>; Mon, 25 Jul 2005 13:39:17 +0200 (CEST)
Message-ID: <42E4CF65.1010109@fib.upc.edu>
Date: Mon, 25 Jul 2005 13:39:17 +0200
From: Daniel Cortes <dcortes@fib.upc.edu>
Organization: FIB
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Searching in Multiple Index
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scaned-FIB: AntiVirus/AntiSpam en fib.upc.es
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a problem searching in 6 index lucene at same time, i founded the 
class MultiSearcher but I think I don't use corretly because it show me 
this error:

java.io.IOException: Bad file descriptor
       at java.io.RandomAccessFile.seek(Native Method)
       at 
org.apache.lucene.store.FSInputStream.readInternal(FSDirectory.java:415)
       at 
org.apache.lucene.store.InputStream.readBytes(InputStream.java:61)
       at 
org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:220) 

       at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
       at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
       at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
       at 
org.apache.lucene.index.SegmentTermEnum.readTerm(SegmentTermEnum.java:142)
       at 
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:115)
       at 
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:143)
       at 
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:137)
       at 
org.apache.lucene.index.SegmentReader.docFreq(SegmentReader.java:253)
       at 
org.apache.lucene.search.IndexSearcher.docFreq(IndexSearcher.java:69)
       at org.apache.lucene.search.Similarity.idf(Similarity.java:255)
       at 
org.apache.lucene.search.TermQuery$TermWeight.sumOfSquaredWeights(TermQuery.java:47) 

       at 
org.apache.lucene.search.BooleanQuery$BooleanWeight.sumOfSquaredWeights(BooleanQuery.java:110) 

       at org.apache.lucene.search.Query.weight(Query.java:86)
       at 
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
       at 
org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:116)
       at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
       at org.apache.lucene.search.Hits.<init>(Hits.java:43)
       at org.apache.lucene.search.Searcher.search(Searcher.java:33)


I have 6 index created by IndexWriter (1 index has something indexed, 
but the others are empty (only the segment file)).
If I try to open my indexs with LUKE the index that has something, don't 
give me problems and I can see their fields, but the other empties 
indexsever reply my:                     Invalid path, or not a Lucene 
index.

My code to use the search is this:

private String[] fields= new String[] {"TITLE","CONTENTS","DESCRIPTION"};
//This line I don't know what it do, but I don't think that is the problem
private int[] required= 
{MultiFieldQueryParser.NORMAL_FIELD,MultiFieldQueryParser.NORMAL_FIELD,MultiFieldQueryParser.NORMAL_FIELD}; 

IndexSearcher[] searchers;

//I  initialize  searchers and do this;
           MultiSearcher searcher = new MultiSearcher(searchers);
           Query searcht = 
MultiFieldQueryParser.parse("something",fields,required,getTheInstanceOfMyAnalizer()); 

           Hits resul=searcher.search(searcht);

Perhaps don't  I create well the indexs?

I do this for every File indexDir
           IndexWriter writer;
           File dir = new File();
            if (dir.isDirectory()) {
               writer = new IndexWriter(dir, myAnalyzer, false);
               writer.setUseCompoundFile(true);
            } else {
               dir.mkdirs();
                writer = new IndexWriter(dir, myAnalyzer, true);
               writer.setUseCompoundFile(true);
            }
               writer.optimize();
               writer.close();

Is it correct,true?

I'm sure that my problem is in MultiSearcher caller, but I can't see 
where's my mistake (and not in my english :D) thks in advance.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 13:12:10 2005
Return-Path: <java-user-return-15555-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 21987 invoked from network); 25 Jul 2005 13:12:10 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 13:12:10 -0000
Received: (qmail 43402 invoked by uid 500); 25 Jul 2005 13:12:03 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 43378 invoked by uid 500); 25 Jul 2005 13:12:03 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 43365 invoked by uid 99); 25 Jul 2005 13:12:03 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 06:12:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 06:11:56 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id D155D13E210D; Mon, 25 Jul 2005 09:11:59 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id DE85E13E2005
	for <java-user@lucene.apache.org>; Mon, 25 Jul 2005 09:01:56 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <8a484a7805072504051af8b50c@mail.gmail.com>
References: <8a484a7805072504051af8b50c@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <CF0AE4F3-011D-4B53-A4F7-A39D76284C7F@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: filtering on searching or after through hits?
Date: Mon, 25 Jul 2005 09:01:48 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 25, 2005, at 7:05 AM, Riccardo Daviddi wrote:
> Hi all,
> I have to filter my searching in two ways:
> 1) by score, I want that only docs with score higher than a threshold
> are returned.
> 2) by num of docs, I want that only, for example, the first 20 docs
> are returned.
>
> It's better do it with a queryfilter or search for all and after look
> through the hits with some conditions?

A QueryFilter can do neither of these criteria.  I recommend simply  
doing a search and limiting the Hits shown based on the desired  
criteria.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 13:14:20 2005
Return-Path: <java-user-return-15556-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24078 invoked from network); 25 Jul 2005 13:14:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 13:14:19 -0000
Received: (qmail 47169 invoked by uid 500); 25 Jul 2005 13:13:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47100 invoked by uid 500); 25 Jul 2005 13:13:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47020 invoked by uid 99); 25 Jul 2005 13:13:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 06:13:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 06:13:41 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id A122C13E2005; Mon, 25 Jul 2005 09:13:45 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 81BBA13E2006
	for <java-user@lucene.apache.org>; Mon, 25 Jul 2005 09:13:33 -0400 (EDT)
In-Reply-To: <006301c5910c$3a685bc0$5d1afea9@dsil.danlawinc.com>
References: <20050718043336.2779.qmail@web31109.mail.mud.yahoo.com> <000501c58b53$297f1d30$ea01a8c0@dsil.danlawinc.com> <000c01c5906b$281e4520$5d1afea9@dsil.danlawinc.com> <18FDDD68-9D2C-4393-B64E-C209FBCF9EA2@ehatchersolutions.com> <006301c5910c$3a685bc0$5d1afea9@dsil.danlawinc.com>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <01170577-52D2-40CC-9E90-8F3821F602AD@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: OutOfMemory errors while indexing large documents
Date: Mon, 25 Jul 2005 09:13:21 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.8 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Could you be more specific about where the OutOfMemory error is  
happening?  Do you have a complete stack trace?

As for maxFieldLength - in my use of Lucene, it is necessary to index  
the entire document and not just the first 10,000 or so terms - I set  
maxFieldLength to Integer.MAX_VALUE.

     Erik


On Jul 25, 2005, at 7:30 AM, Harini Raghavan wrote:

> Hi All,
> I am using lucene to index large documents(HTML pages). The  
> application is running on JBoss and MySQL on UNIX. The indexing is  
> throwing OutOfMemory errors beyond a certain point. I am not sure  
> why this is happening. I am using the default IndexWriter  
> properties, but the lucene documentation mentions about setting the  
> max field length on the IndexWriter to some optimum value for large  
> documents. Is anyone aware of any optimum settings for  
> maxFieldLength, mergeFactor, minMergeDoc and maxMergeDoc?
> Thanks,
> Harini
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 13:15:56 2005
Return-Path: <java-user-return-15557-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25563 invoked from network); 25 Jul 2005 13:15:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 13:15:56 -0000
Received: (qmail 52415 invoked by uid 500); 25 Jul 2005 13:15:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52395 invoked by uid 500); 25 Jul 2005 13:15:47 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52382 invoked by uid 99); 25 Jul 2005 13:15:47 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 06:15:47 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 06:15:41 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 778BE13E2006; Mon, 25 Jul 2005 09:15:46 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id ECE5513E2005
	for <java-user@lucene.apache.org>; Mon, 25 Jul 2005 09:15:37 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <42E4CF65.1010109@fib.upc.edu>
References: <42E4CF65.1010109@fib.upc.edu>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <C1602113-723A-470E-84CE-C3A3F623A67A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Searching in Multiple Index
Date: Mon, 25 Jul 2005 09:15:35 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.4 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What is the point of having empty indexes?   I don't know for sure  
without trying it myself, but perhaps  you need to write at least one  
document to the index for it to be a valid index?   Don't continue  
until Luke is happy with your index.

     Erik


On Jul 25, 2005, at 7:39 AM, Daniel Cortes wrote:

> I have a problem searching in 6 index lucene at same time, i  
> founded the class MultiSearcher but I think I don't use corretly  
> because it show me this error:
>
> java.io.IOException: Bad file descriptor
>       at java.io.RandomAccessFile.seek(Native Method)
>       at org.apache.lucene.store.FSInputStream.readInternal 
> (FSDirectory.java:415)
>       at org.apache.lucene.store.InputStream.readBytes 
> (InputStream.java:61)
>       at org.apache.lucene.index.CompoundFileReader 
> $CSInputStream.readInternal(CompoundFileReader.java:220)
>       at org.apache.lucene.store.InputStream.refill 
> (InputStream.java:158)
>       at org.apache.lucene.store.InputStream.readByte 
> (InputStream.java:43)
>       at org.apache.lucene.store.InputStream.readVInt 
> (InputStream.java:83)
>       at org.apache.lucene.index.SegmentTermEnum.readTerm 
> (SegmentTermEnum.java:142)
>       at org.apache.lucene.index.SegmentTermEnum.next 
> (SegmentTermEnum.java:115)
>       at org.apache.lucene.index.TermInfosReader.scanEnum 
> (TermInfosReader.java:143)
>       at org.apache.lucene.index.TermInfosReader.get 
> (TermInfosReader.java:137)
>       at org.apache.lucene.index.SegmentReader.docFreq 
> (SegmentReader.java:253)
>       at org.apache.lucene.search.IndexSearcher.docFreq 
> (IndexSearcher.java:69)
>       at org.apache.lucene.search.Similarity.idf(Similarity.java:255)
>       at org.apache.lucene.search.TermQuery 
> $TermWeight.sumOfSquaredWeights(TermQuery.java:47)
>       at org.apache.lucene.search.BooleanQuery 
> $BooleanWeight.sumOfSquaredWeights(BooleanQuery.java:110)
>       at org.apache.lucene.search.Query.weight(Query.java:86)
>       at org.apache.lucene.search.IndexSearcher.search 
> (IndexSearcher.java:85)
>       at org.apache.lucene.search.MultiSearcher.search 
> (MultiSearcher.java:116)
>       at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>       at org.apache.lucene.search.Hits.<init>(Hits.java:43)
>       at org.apache.lucene.search.Searcher.search(Searcher.java:33)
>
>
> I have 6 index created by IndexWriter (1 index has something  
> indexed, but the others are empty (only the segment file)).
> If I try to open my indexs with LUKE the index that has something,  
> don't give me problems and I can see their fields, but the other  
> empties indexsever reply my:                     Invalid path, or  
> not a Lucene index.
>
> My code to use the search is this:
>
> private String[] fields= new String[]  
> {"TITLE","CONTENTS","DESCRIPTION"};
> //This line I don't know what it do, but I don't think that is the  
> problem
> private int[] required=  
> {MultiFieldQueryParser.NORMAL_FIELD,MultiFieldQueryParser.NORMAL_FIELD 
> ,MultiFieldQueryParser.NORMAL_FIELD};
> IndexSearcher[] searchers;
>
> //I  initialize  searchers and do this;
>           MultiSearcher searcher = new MultiSearcher(searchers);
>           Query searcht = MultiFieldQueryParser.parse 
> ("something",fields,required,getTheInstanceOfMyAnalizer());
>           Hits resul=searcher.search(searcht);
>
> Perhaps don't  I create well the indexs?
>
> I do this for every File indexDir
>           IndexWriter writer;
>           File dir = new File();
>            if (dir.isDirectory()) {
>               writer = new IndexWriter(dir, myAnalyzer, false);
>               writer.setUseCompoundFile(true);
>            } else {
>               dir.mkdirs();
>                writer = new IndexWriter(dir, myAnalyzer, true);
>               writer.setUseCompoundFile(true);
>            }
>               writer.optimize();
>               writer.close();
>
> Is it correct,true?
>
> I'm sure that my problem is in MultiSearcher caller, but I can't  
> see where's my mistake (and not in my english :D) thks in advance.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 14:30:32 2005
Return-Path: <java-user-return-15558-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87610 invoked from network); 25 Jul 2005 14:30:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 14:30:31 -0000
Received: (qmail 79239 invoked by uid 500); 25 Jul 2005 14:30:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 79197 invoked by uid 500); 25 Jul 2005 14:30:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 79184 invoked by uid 99); 25 Jul 2005 14:30:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 07:30:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.160.230.41] (HELO mout.perfora.net) (217.160.230.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 07:30:14 -0700
Received: from [59.93.56.155] (helo=D2Q9FF1S)
	by mrelay.perfora.net with ESMTP (Nemesis),
	id 0MKz1m-1Dx3yC3dkl-0002Fb; Mon, 25 Jul 2005 10:30:16 -0400
Message-ID: <007301c59124$50c70e80$5d1afea9@dsil.danlawinc.com>
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: <java-user@lucene.apache.org>
References: <20050718043336.2779.qmail@web31109.mail.mud.yahoo.com> <000501c58b53$297f1d30$ea01a8c0@dsil.danlawinc.com> <000c01c5906b$281e4520$5d1afea9@dsil.danlawinc.com> <18FDDD68-9D2C-4393-B64E-C209FBCF9EA2@ehatchersolutions.com> <006301c5910c$3a685bc0$5d1afea9@dsil.danlawinc.com> <01170577-52D2-40CC-9E90-8F3821F602AD@ehatchersolutions.com>
Subject: Re: OutOfMemory errors while indexing large documents
Date: Mon, 25 Jul 2005 19:52:35 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am using org.htmlparser.parserapplications.StringExtractor to parse the 
html pages,  I guess the OutOfMemory occurs while parsing the large HTML 
pages and not while indexing. Sorry about the confusion.

----- Original Message ----- 
From: "Erik Hatcher" <erik@ehatchersolutions.com>
To: <java-user@lucene.apache.org>
Sent: Monday, July 25, 2005 6:43 PM
Subject: Re: OutOfMemory errors while indexing large documents


> Could you be more specific about where the OutOfMemory error is 
> happening?  Do you have a complete stack trace?
>
> As for maxFieldLength - in my use of Lucene, it is necessary to index  the 
> entire document and not just the first 10,000 or so terms - I set 
> maxFieldLength to Integer.MAX_VALUE.
>
>     Erik
>
>
> On Jul 25, 2005, at 7:30 AM, Harini Raghavan wrote:
>
>> Hi All,
>> I am using lucene to index large documents(HTML pages). The  application 
>> is running on JBoss and MySQL on UNIX. The indexing is  throwing 
>> OutOfMemory errors beyond a certain point. I am not sure  why this is 
>> happening. I am using the default IndexWriter  properties, but the lucene 
>> documentation mentions about setting the  max field length on the 
>> IndexWriter to some optimum value for large  documents. Is anyone aware 
>> of any optimum settings for  maxFieldLength, mergeFactor, minMergeDoc and 
>> maxMergeDoc?
>> Thanks,
>> Harini
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 14:41:05 2005
Return-Path: <java-user-return-15559-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95638 invoked from network); 25 Jul 2005 14:41:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 14:41:04 -0000
Received: (qmail 181 invoked by uid 500); 25 Jul 2005 14:40:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 143 invoked by uid 500); 25 Jul 2005 14:40:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 117 invoked by uid 99); 25 Jul 2005 14:40:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 07:40:55 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [129.177.30.12] (HELO noralf.uib.no) (129.177.30.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 07:40:48 -0700
Received: from alfred.uib.no (smtp.uib.no) [129.177.30.120] 
	by noralf.uib.no with esmtp  (Exim 4.34)
	id 1Dx48R-0000oG-Fx; Mon, 25 Jul 2005 16:40:52 +0200
Received: from 157.84-48-88.nextgentel.com ([10.0.0.3]) [84.48.88.157] 
	by smtp.uib.no for java-user@lucene.apache.org with esmtp (Exim 4.34)
	id 1Dx48R-0002Je-9D; Mon, 25 Jul 2005 16:40:51 +0200
Message-ID: <42E4F9F3.2070902@broadpark.no>
Date: Mon, 25 Jul 2005 16:40:51 +0200
From: Magne Skjeret <magne.skjeret@broadpark.no>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Relations between documents
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-checked-clean: by exiscan on noralf
X-Scanner: b215d40c921de83079b77583cfe43455 http://tjinfo.uib.no/virus.html
X-UiB-SpamFlag: NO UIB: -15 hits, 8.0 required
X-UiB-SpamReport: spamassassin found;
   -15 From is listed in 'whitelist_from'
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi

I have been reading around a bit on the net to find a solution for my
problem, but no luck yet. I am pretty sure it can be done, but I haven't
found out how yet.

My problem is that I have relations between documents.

E.g
   Survey --> Variables

   Each survey can have loads of variables, and I want to be able to run
queries like this:

Get Survey where Variable.label contains 'gender'
Get Variable where Survey.abstract contains 'cancer'

Is this possible to do this in the index? Or does it belong in the query?

If anyone has some comments on best practice or other comments I would
very much appreciate hearing about them.

Magne Skjeret








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 15:22:49 2005
Return-Path: <java-user-return-15560-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 26534 invoked from network); 25 Jul 2005 15:22:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 15:22:35 -0000
Received: (qmail 63867 invoked by uid 500); 25 Jul 2005 15:22:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63780 invoked by uid 500); 25 Jul 2005 15:22:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63719 invoked by uid 99); 25 Jul 2005 15:22:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 08:22:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.200 as permitted sender)
Received: from [64.233.184.200] (HELO wproxy.gmail.com) (64.233.184.200)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 08:21:59 -0700
Received: by wproxy.gmail.com with SMTP id 70so946987wra
        for <java-user@lucene.apache.org>; Mon, 25 Jul 2005 08:22:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sagEn5ysfpkDC+zjooZRxFHytTKsKbHwBbLGzc3gZusPK2FAFxrqRWXJkKvKAXb8iBLUB+YnIQHyJfYJEnaJGr0TFmTOMXHyY3d4vpmohBlql9CPpk/b0+RHSFk22y3drp/5vPxAWhPg/Pb+LMpW+ng32RocBB39XIcQX0zIbYQ=
Received: by 10.54.38.57 with SMTP id l57mr2231543wrl;
        Mon, 25 Jul 2005 08:22:03 -0700 (PDT)
Received: by 10.54.24.34 with HTTP; Mon, 25 Jul 2005 08:22:03 -0700 (PDT)
Message-ID: <6e3ae63105072508222f0f44c3@mail.gmail.com>
Date: Mon, 25 Jul 2005 08:22:03 -0700
From: Chris Lu <chris.lu@gmail.com>
Reply-To: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemory errors while indexing large documents
In-Reply-To: <007301c59124$50c70e80$5d1afea9@dsil.danlawinc.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20050718043336.2779.qmail@web31109.mail.mud.yahoo.com>
	 <000501c58b53$297f1d30$ea01a8c0@dsil.danlawinc.com>
	 <000c01c5906b$281e4520$5d1afea9@dsil.danlawinc.com>
	 <18FDDD68-9D2C-4393-B64E-C209FBCF9EA2@ehatchersolutions.com>
	 <006301c5910c$3a685bc0$5d1afea9@dsil.danlawinc.com>
	 <01170577-52D2-40CC-9E90-8F3821F602AD@ehatchersolutions.com>
	 <007301c59124$50c70e80$5d1afea9@dsil.danlawinc.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Also, be careful with MySql JDBC driver.

Depends on how you use MySql, you could have OutOfMemory errors, which
may not be Lucene or parsers' problem.
--=20
Chris Lu
---------------------
Full-Text Search on Any Database
http://www.dbsight.net

On 7/25/05, Harini Raghavan <harini.raghavan@insideview.com> wrote:
> I am using org.htmlparser.parserapplications.StringExtractor to parse the
> html pages,  I guess the OutOfMemory occurs while parsing the large HTML
> pages and not while indexing. Sorry about the confusion.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 15:26:53 2005
Return-Path: <java-user-return-15561-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 29001 invoked from network); 25 Jul 2005 15:26:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 15:26:52 -0000
Received: (qmail 73070 invoked by uid 500); 25 Jul 2005 15:26:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 73049 invoked by uid 500); 25 Jul 2005 15:26:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 73036 invoked by uid 99); 25 Jul 2005 15:26:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 08:26:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.201 as permitted sender)
Received: from [64.233.184.201] (HELO wproxy.gmail.com) (64.233.184.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 08:26:38 -0700
Received: by wproxy.gmail.com with SMTP id 50so908762wri
        for <java-user@lucene.apache.org>; Mon, 25 Jul 2005 08:26:43 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=sFjJDk2K+k8MNBzTJOUM+6gMfo4etNQbylkyu5TUCdbHHoHGmcAd6x6sVSuss93+8lWBFqYVo4kEmSnmfUh5nZqxYYmqLEYR6F+ZP9g/sDZff2NknMG0ouivgqsN9FHBOejOFZ/2Zc6LyGuaU6QRu3SoeHUW8OSJPAtxYKNIYOw=
Received: by 10.54.13.37 with SMTP id 37mr2234539wrm;
        Mon, 25 Jul 2005 08:26:42 -0700 (PDT)
Received: by 10.54.24.34 with HTTP; Mon, 25 Jul 2005 08:26:42 -0700 (PDT)
Message-ID: <6e3ae63105072508262365c936@mail.gmail.com>
Date: Mon, 25 Jul 2005 08:26:42 -0700
From: Chris Lu <chris.lu@gmail.com>
Reply-To: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Relations between documents
In-Reply-To: <42E4F9F3.2070902@broadpark.no>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42E4F9F3.2070902@broadpark.no>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Maybe you can have one Document =3D Survey+Variable,
and have fields like "abstract", "label".

Just search on the combined documents.

--=20
Chris Lu
---------------------
Full-Text Search on Any Database
http://www.dbsight.net


On 7/25/05, Magne Skjeret <magne.skjeret@broadpark.no> wrote:
> Hi
>=20
> I have been reading around a bit on the net to find a solution for my
> problem, but no luck yet. I am pretty sure it can be done, but I haven't
> found out how yet.
>=20
> My problem is that I have relations between documents.
>=20
> E.g
>    Survey --> Variables
>=20
>    Each survey can have loads of variables, and I want to be able to run
> queries like this:
>=20
> Get Survey where Variable.label contains 'gender'
> Get Variable where Survey.abstract contains 'cancer'
>=20
> Is this possible to do this in the index? Or does it belong in the query?
>=20
> If anyone has some comments on best practice or other comments I would
> very much appreciate hearing about them.
>=20
> Magne Skjeret
>=20
>=20
>=20
>=20
>=20
>=20
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 15:43:09 2005
Return-Path: <java-user-return-15562-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44149 invoked from network); 25 Jul 2005 15:43:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 15:43:09 -0000
Received: (qmail 98694 invoked by uid 500); 25 Jul 2005 15:42:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98650 invoked by uid 500); 25 Jul 2005 15:42:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98626 invoked by uid 99); 25 Jul 2005 15:42:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 08:42:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=FORGED_RCVD_HELO,SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [129.177.30.12] (HELO noralf.uib.no) (129.177.30.12)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 08:42:50 -0700
Received: from alfred.uib.no (smtp.uib.no) [129.177.30.120] 
	by noralf.uib.no with esmtp  (Exim 4.34)
	id 1Dx56R-0002Z1-B4; Mon, 25 Jul 2005 17:42:52 +0200
Received: from 157.84-48-88.nextgentel.com ([10.0.0.3]) [84.48.88.157] 
	by smtp.uib.no for java-user@lucene.apache.org with esmtp (Exim 4.34)
	id 1Dx56R-0002RG-3t; Mon, 25 Jul 2005 17:42:51 +0200
Message-ID: <42E5087B.2000203@broadpark.no>
Date: Mon, 25 Jul 2005 17:42:51 +0200
From: Magne Skjeret <magne.skjeret@broadpark.no>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Relations between documents
References: <42E4F9F3.2070902@broadpark.no> <6e3ae63105072508262365c936@mail.gmail.com>
In-Reply-To: <6e3ae63105072508262365c936@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
X-checked-clean: by exiscan on noralf
X-Scanner: ad248bef47c3e2207ffdb57fa0225450 http://tjinfo.uib.no/virus.html
X-UiB-SpamFlag: NO UIB: -15 hits, 8.0 required
X-UiB-SpamReport: spamassassin found;
   -15 From is listed in 'whitelist_from'
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris Lu wrote:

>Maybe you can have one Document = Survey+Variable,
>and have fields like "abstract", "label".
>
>Just search on the combined documents.
>  
>
Hi

A Survey can have 100's of variables. That means that the Survey part is
duplicated N variable times.
Or did I misunderstand you?

Magne


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 16:24:21 2005
Return-Path: <java-user-return-15563-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64157 invoked from network); 25 Jul 2005 16:24:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 16:24:21 -0000
Received: (qmail 54098 invoked by uid 500); 25 Jul 2005 16:24:14 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54068 invoked by uid 500); 25 Jul 2005 16:24:14 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54050 invoked by uid 99); 25 Jul 2005 16:24:14 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 09:24:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.84.113.130] (HELO mail.dessci.com) (65.84.113.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 09:24:06 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Relations between documents
Date: Mon, 25 Jul 2005 09:26:00 -0700
Message-ID: <D1EFB337111B674B8F1BE155B01C6DD6355C97@franklin.corp.dessci>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Relations between documents
Thread-Index: AcWRJyUFS/tCTpNrSzKMdm2eWeyD8AADllDA
From: "Rajesh Munavalli" <rajeshm@dessci.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Magne,
         Assuming number of variables will not be large, build 2 indexes

Index 1: contents and documents(variable1 + variable2 + variable3...)
Index 2: documents and variables


Example Query: Get "Survey" where "Variable.label" contains "gender"

Step 1) First query would be to "Index 1" to retrieve all the documents
which contains "gender" in variable "label"

Example Query: Get "Variable" where "Survey.abstract" contains "cancer"
Step 1) First query will be to "Index 1" to retrieve all the documents
which contains "cancer" in variable "abstract"
Step 2) Second query will be to retrieve all variables containing
documents retrieved from Step 1


Rajesh Munavalli =20

-----Original Message-----
From: Magne Skjeret [mailto:magne.skjeret@broadpark.no]=20
Sent: Monday, July 25, 2005 9:41 AM
To: java-user@lucene.apache.org
Subject: Relations between documents

Hi

I have been reading around a bit on the net to find a solution for my
problem, but no luck yet. I am pretty sure it can be done, but I haven't
found out how yet.

My problem is that I have relations between documents.

E.g
   Survey --> Variables

   Each survey can have loads of variables, and I want to be able to run
queries like this:

Get Survey where Variable.label contains 'gender'
Get Variable where Survey.abstract contains 'cancer'

Is this possible to do this in the index? Or does it belong in the
query?

If anyone has some comments on best practice or other comments I would
very much appreciate hearing about them.

Magne Skjeret








---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 16:26:14 2005
Return-Path: <java-user-return-15564-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 64872 invoked from network); 25 Jul 2005 16:26:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 16:26:13 -0000
Received: (qmail 56472 invoked by uid 500); 25 Jul 2005 16:26:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56452 invoked by uid 500); 25 Jul 2005 16:26:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56439 invoked by uid 99); 25 Jul 2005 16:26:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 09:26:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.195 as permitted sender)
Received: from [64.233.184.195] (HELO wproxy.gmail.com) (64.233.184.195)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 09:26:00 -0700
Received: by wproxy.gmail.com with SMTP id 70so959363wra
        for <java-user@lucene.apache.org>; Mon, 25 Jul 2005 09:26:04 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=C8AkSBrB3/uC03M/3SRBPTnAELCWzDoxudHBbB8EJhAOSAvc3YpTTY4HHVek/2Fusg95dvSARy+BnOi4yK7ML+ZJGb0gDLkgucfcePs65xpLfAtddcBA8OLxqTZL9rFX5L6bZAILdTxKgtKMwmtLdEXaFSvuFd/xPLqW1s37ywY=
Received: by 10.54.32.41 with SMTP id f41mr908125wrf;
        Mon, 25 Jul 2005 09:26:04 -0700 (PDT)
Received: by 10.54.24.34 with HTTP; Mon, 25 Jul 2005 09:26:04 -0700 (PDT)
Message-ID: <6e3ae63105072509262b80e85@mail.gmail.com>
Date: Mon, 25 Jul 2005 09:26:04 -0700
From: Chris Lu <chris.lu@gmail.com>
Reply-To: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Relations between documents
In-Reply-To: <42E5087B.2000203@broadpark.no>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42E4F9F3.2070902@broadpark.no>
	 <6e3ae63105072508262365c936@mail.gmail.com>
	 <42E5087B.2000203@broadpark.no>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Then your lucene Document can be:

Survey + n Variables,

The idea is just to put everything related to a combined Document, and
search on it.

--=20
Chris Lu
---------------------
Full-Text Search on Any Database
http://www.dbsight.net


On 7/25/05, Magne Skjeret <magne.skjeret@broadpark.no> wrote:
> Chris Lu wrote:
>=20
> >Maybe you can have one Document =3D Survey+Variable,
> >and have fields like "abstract", "label".
> >
> >Just search on the combined documents.
> >
> >
> Hi
>=20
> A Survey can have 100's of variables. That means that the Survey part is
> duplicated N variable times.
> Or did I misunderstand you?
>=20
> Magne
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 16:40:09 2005
Return-Path: <java-user-return-15565-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72173 invoked from network); 25 Jul 2005 16:40:08 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 16:40:08 -0000
Received: (qmail 75786 invoked by uid 500); 25 Jul 2005 16:40:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75766 invoked by uid 500); 25 Jul 2005 16:40:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75737 invoked by uid 99); 25 Jul 2005 16:40:01 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 09:40:01 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of rdaviddi@gmail.com designates 64.233.184.197 as permitted sender)
Received: from [64.233.184.197] (HELO wproxy.gmail.com) (64.233.184.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 09:39:56 -0700
Received: by wproxy.gmail.com with SMTP id i16so989156wra
        for <java-user@lucene.apache.org>; Mon, 25 Jul 2005 09:40:00 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=YV5DQIjnAnQ8lyxVDRLnwQ1DSuQ/UpBSFZdd8xVPA6tWw5uWaXaRtYxrMqM5cveIHGX2VAg+IOOcCDIt3TIifS6Jb4xk7KfgnmKKq6fcIZwS1wsIjMPQGZlX7GViC+HIJbW87CCkdszX5KN0bFnxX0marnUhJ8h7C/u4mJ/y2bM=
Received: by 10.54.139.7 with SMTP id m7mr2213287wrd;
        Mon, 25 Jul 2005 09:40:00 -0700 (PDT)
Received: by 10.54.94.10 with HTTP; Mon, 25 Jul 2005 09:40:00 -0700 (PDT)
Message-ID: <8a484a78050725094036dcfe5e@mail.gmail.com>
Date: Mon, 25 Jul 2005 18:40:00 +0200
From: Riccardo Daviddi <rdaviddi@gmail.com>
Reply-To: Riccardo Daviddi <rdaviddi@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: filtering on searching or after through hits?
In-Reply-To: <CF0AE4F3-011D-4B53-A4F7-A39D76284C7F@ehatchersolutions.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <8a484a7805072504051af8b50c@mail.gmail.com>
	 <CF0AE4F3-011D-4B53-A4F7-A39D76284C7F@ehatchersolutions.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

ok:)
so I do this "filtering" on the hits.
thx

On 7/25/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>=20
> On Jul 25, 2005, at 7:05 AM, Riccardo Daviddi wrote:
> > Hi all,
> > I have to filter my searching in two ways:
> > 1) by score, I want that only docs with score higher than a threshold
> > are returned.
> > 2) by num of docs, I want that only, for example, the first 20 docs
> > are returned.
> >
> > It's better do it with a queryfilter or search for all and after look
> > through the hits with some conditions?
>=20
> A QueryFilter can do neither of these criteria.  I recommend simply
> doing a search and limiting the Hits shown based on the desired
> criteria.
>=20
>      Erik
>=20
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


--=20
Riccardo Daviddi

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 18:03:19 2005
Return-Path: <java-user-return-15566-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 12589 invoked from network); 25 Jul 2005 18:03:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 18:03:19 -0000
Received: (qmail 17904 invoked by uid 500); 25 Jul 2005 18:03:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17782 invoked by uid 500); 25 Jul 2005 18:03:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17747 invoked by uid 99); 25 Jul 2005 18:03:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 11:03:10 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.58] (HELO pop05.mail.atl.earthlink.net) (207.69.200.58)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 11:03:02 -0700
Received: from wamui-thinleaf.atl.sa.earthlink.net ([209.86.224.51])
	by pop05.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1Dx7I2-0004Qg-00
	for java-user@lucene.apache.org; Mon, 25 Jul 2005 14:02:58 -0400
Message-ID: <1393645.1122314578546.JavaMail.root@wamui-thinleaf.atl.sa.earthlink.net>
Date: Mon, 25 Jul 2005 14:02:58 -0400 (EDT)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Index with more than one analyzer?
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi All,
  When I first started my project I was creating 3 indexes.  Standard, Synonym and SoundsLike.
Now that the QueryParser has the ability to put multiple tokens in one position I no longer have to inject the synonyms at index creation time.  So I really don't have to have a seperate index for Synonyms I can just point to my standard index and inject the synonyms into the query.  

That should make adminstration easier.  Along that train of thought it would be nice if I could have only one index.  That brings me to my question.  When constructing an index only one anlyzer is allowed.  Do you think it would be better to build 2 indexes and then merge them or somehow merge the standard tokens with the soundslike tokens at index creating time? 

Thanks,

Andrew

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 18:54:20 2005
Return-Path: <java-user-return-15567-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44178 invoked from network); 25 Jul 2005 18:54:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 18:54:20 -0000
Received: (qmail 96413 invoked by uid 500); 25 Jul 2005 18:54:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96289 invoked by uid 500); 25 Jul 2005 18:54:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96262 invoked by uid 99); 25 Jul 2005 18:54:11 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 11:54:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.77] (HELO web31115.mail.mud.yahoo.com) (68.142.201.77)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 25 Jul 2005 11:54:03 -0700
Received: (qmail 62887 invoked by uid 60001); 25 Jul 2005 18:54:01 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=yNsVmpGuV1G+xR7lc06RYUcvGukghgKoa8iKmRXGJDBFYJWMksqSlixKpX7wLpW8heT4C1J7Covk+thu0MGnS2k7vzBiIGTkl8HyVYYPLToFCNeZkbhTJt5LO+Nsci7ZNK5I8lxGY2Iqx/pd3mO6bOcQ1leDf66lnoEntbylcRs=  ;
Message-ID: <20050725185400.62835.qmail@web31115.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31115.mail.mud.yahoo.com via HTTP; Mon, 25 Jul 2005 11:54:00 PDT
Date: Mon, 25 Jul 2005 11:54:00 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Index with more than one analyzer?
To: java-user@lucene.apache.org
In-Reply-To: <1393645.1122314578546.JavaMail.root@wamui-thinleaf.atl.sa.earthlink.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

If you go with one index and distinct fields for the 3 variations you
mentioned, then you can perhaps make use of PerFieldAnalyzerWrapper.

Otis


--- Andrew Boyd <andrew.boyd@mindspring.com> wrote:

> Hi All,
>   When I first started my project I was creating 3 indexes. 
> Standard, Synonym and SoundsLike.
> Now that the QueryParser has the ability to put multiple tokens in
> one position I no longer have to inject the synonyms at index
> creation time.  So I really don't have to have a seperate index for
> Synonyms I can just point to my standard index and inject the
> synonyms into the query.  
> 
> That should make adminstration easier.  Along that train of thought
> it would be nice if I could have only one index.  That brings me to
> my question.  When constructing an index only one anlyzer is allowed.
>  Do you think it would be better to build 2 indexes and then merge
> them or somehow merge the standard tokens with the soundslike tokens
> at index creating time? 
> 
> Thanks,
> 
> Andrew
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Jul 25 21:32:57 2005
Return-Path: <java-user-return-15568-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 38109 invoked from network); 25 Jul 2005 21:32:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 25 Jul 2005 21:32:57 -0000
Received: (qmail 36773 invoked by uid 500); 25 Jul 2005 21:32:52 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36523 invoked by uid 500); 25 Jul 2005 21:32:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 36510 invoked by uid 99); 25 Jul 2005 21:32:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 14:32:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [216.136.173.32] (HELO smtp012.mail.yahoo.com) (216.136.173.32)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 25 Jul 2005 14:32:45 -0700
Received: (qmail 35613 invoked from network); 25 Jul 2005 21:32:49 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:Message-ID:Date:From:User-Agent:X-Accept-Language:MIME-Version:To:Subject:Content-Type;
  b=BzjFrp24XM7G08AiUuR7AA37niyzKVl3KHfbfr/x4xm48Bi6O/VYzmYxrGLvX0AxITYRVmVplPi/0yHqXdRO4uSkVi++lrtKdCVB7PUL8ZE+zgREAtlQwqoBsmI1sWo0iyhzHDRImhDQWC30+pWV1SMZD5f4kRan0GVTtd3rmDc=  ;
Received: from unknown (HELO ?216.145.63.13?) (thomaspan2@216.145.63.13 with plain)
  by smtp012.mail.yahoo.com with SMTP; 25 Jul 2005 21:32:49 -0000
Message-ID: <42E55A81.50001@yahoo.com>
Date: Mon, 25 Jul 2005 14:32:49 -0700
From: Thomas Pan <thomaspan2@yahoo.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: [Fwd: rename bug]
Content-Type: multipart/mixed;
 boundary="------------070801040303060809000500"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--------------070801040303060809000500
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit



--------------070801040303060809000500
Content-Type: message/rfc822;
 name="rename bug"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="rename bug"

Message-ID: <42E55A25.6090708@yahoo.com>
Date: Mon, 25 Jul 2005 14:31:17 -0700
From: Thomas Pan <thomaspan2@yahoo.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: rename bug
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit


Run a small indexer within Eclipse 3.1 under Windows and encounter 
rename bug all the time:
java.io.IOException: Cannot rename deleteable.new to deletable
    at org.apache.lucene.store.FSDirectory.renameFile(FSDirectory.java:239)
    at 
org.apache.lucene.index.IndexWriter.writeDeleteableFiles(IndexWriter.java:579)
    at 
org.apache.lucene.index.IndexWriter.deleteSegments(IndexWriter.java:530)
    at org.apache.lucene.index.IndexWriter.access$200(IndexWriter.java:51)
    at org.apache.lucene.index.IndexWriter$3.doBody(IndexWriter.java:504)
    at org.apache.lucene.store.Lock$With.run(Lock.java:109)
    at 
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:501)[4751]Add 
655:ACKHQ.OB:Armstrong Holdings Inc !
    at 
org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:458)
    at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:310)
    at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:294)

The version of Lucene is 1.4.3. The Java class only has one main method 
implemented. Any clue?


-Thomas



--------------070801040303060809000500
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--------------070801040303060809000500--

From java-user-return-15569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 26 00:12:51 2005
Return-Path: <java-user-return-15569-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 71260 invoked from network); 26 Jul 2005 00:12:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2005 00:12:51 -0000
Received: (qmail 3805 invoked by uid 500); 26 Jul 2005 00:12:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3792 invoked by uid 500); 26 Jul 2005 00:12:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 33553 invoked by uid 99); 25 Jul 2005 21:31:22 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Received:Message-ID:Date:From:User-Agent:X-Accept-Language:MIME-Version:To:Subject:Content-Type:Content-Transfer-Encoding;
  b=3hrUDTSoAWCZm1e6a38cpnHmExXroF0kZE1EtqPwhBV2wBPBEY15EEjvJUUhOvHswt/EVJ0e8G5TqdDNBImjHWWfps4FgeFQQmmzGikPE1Be5kwTRieoKOpyCXDB0VPbB4ahB8Yd3uToVNbxMXyEYkWYBh1g8WvpJkSQ7ZMrZUg=  ;
Message-ID: <42E55A25.6090708@yahoo.com>
Date: Mon, 25 Jul 2005 14:31:17 -0700
From: Thomas Pan <thomaspan2@yahoo.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: rename bug
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Run a small indexer within Eclipse 3.1 under Windows and encounter 
rename bug all the time:
java.io.IOException: Cannot rename deleteable.new to deletable
    at org.apache.lucene.store.FSDirectory.renameFile(FSDirectory.java:239)
    at 
org.apache.lucene.index.IndexWriter.writeDeleteableFiles(IndexWriter.java:579)
    at 
org.apache.lucene.index.IndexWriter.deleteSegments(IndexWriter.java:530)
    at org.apache.lucene.index.IndexWriter.access$200(IndexWriter.java:51)
    at org.apache.lucene.index.IndexWriter$3.doBody(IndexWriter.java:504)
    at org.apache.lucene.store.Lock$With.run(Lock.java:109)
    at 
org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:501)[4751]Add 
655:ACKHQ.OB:Armstrong Holdings Inc !
    at 
org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:458)
    at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:310)
    at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:294)

The version of Lucene is 1.4.3. The Java class only has one main method 
implemented. Any clue?


-Thomas

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 26 00:22:58 2005
Return-Path: <java-user-return-15570-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 73040 invoked from network); 26 Jul 2005 00:22:57 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2005 00:22:57 -0000
Received: (qmail 14472 invoked by uid 500); 26 Jul 2005 00:22:55 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13535 invoked by uid 500); 26 Jul 2005 00:22:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13522 invoked by uid 99); 26 Jul 2005 00:22:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 17:22:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.201 as permitted sender)
Received: from [64.233.184.201] (HELO wproxy.gmail.com) (64.233.184.201)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 17:22:46 -0700
Received: by wproxy.gmail.com with SMTP id 70so1030977wra
        for <java-user@lucene.apache.org>; Mon, 25 Jul 2005 17:22:50 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=DbJeTXkJe/XyewNFVMSsG/oGsb0OyJzxC9mXQx1pAhGSdagCbSAQXic4cJDXxfA9+Y4rAWAlWxpGl1yLe4md+5NJ5mv6cp+qiZIR+7vbF32S57IflaM+HhMDsXaxT/2AZuwaIXTnHRkpJpA06yftEiloc5KS2tC5LpbEZy7eO/I=
Received: by 10.54.37.72 with SMTP id k72mr2388034wrk;
        Mon, 25 Jul 2005 17:22:50 -0700 (PDT)
Received: by 10.54.24.34 with HTTP; Mon, 25 Jul 2005 17:22:50 -0700 (PDT)
Message-ID: <6e3ae63105072517226f54612c@mail.gmail.com>
Date: Mon, 25 Jul 2005 17:22:50 -0700
From: Chris Lu <chris.lu@gmail.com>
Reply-To: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: rename bug
In-Reply-To: <42E55A25.6090708@yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <42E55A25.6090708@yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This is actually a known problem, particular to windows OS.
I remember Doug Cuttings has talked about it before.

Inside Lucene, the get-around is to try to rename the file until successful=
.

The IOException you saw may not affect your indexes' integrity. But I
said so just based on experience, not thoroghly tested.

There was a patch for this, but somehow it's not made into Lucene
1.4.3, or the latest dev version, AFAIK.

--=20
Chris Lu
---------------------
Full-Text Search on Any Database
http://www.dbsight.net


On 7/25/05, Thomas Pan <thomaspan2@yahoo.com> wrote:
>=20
> Run a small indexer within Eclipse 3.1 under Windows and encounter
> rename bug all the time:
> java.io.IOException: Cannot rename deleteable.new to deletable
>     at org.apache.lucene.store.FSDirectory.renameFile(FSDirectory.java:23=
9)
>     at
> org.apache.lucene.index.IndexWriter.writeDeleteableFiles(IndexWriter.java=
:579)
>     at
> org.apache.lucene.index.IndexWriter.deleteSegments(IndexWriter.java:530)
>     at org.apache.lucene.index.IndexWriter.access$200(IndexWriter.java:51=
)
>     at org.apache.lucene.index.IndexWriter$3.doBody(IndexWriter.java:504)
>     at org.apache.lucene.store.Lock$With.run(Lock.java:109)
>     at
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:501)[4=
751]Add
> 655:ACKHQ.OB:Armstrong Holdings Inc !
>     at
> org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:4=
58)
>     at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:3=
10)
>     at org.apache.lucene.index.IndexWriter.addDocument(IndexWriter.java:2=
94)
>=20
> The version of Lucene is 1.4.3. The Java class only has one main method
> implemented. Any clue?
>=20
>=20
> -Thomas
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 26 00:34:40 2005
Return-Path: <java-user-return-15571-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 76432 invoked from network); 26 Jul 2005 00:34:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2005 00:34:40 -0000
Received: (qmail 26458 invoked by uid 500); 26 Jul 2005 00:34:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26274 invoked by uid 500); 26 Jul 2005 00:34:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26261 invoked by uid 99); 26 Jul 2005 00:34:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Mon, 25 Jul 2005 17:34:32 -0700
X-ASF-Spam-Status: No, hits=2.2 required=10.0
	tests=FORGED_YAHOO_RCVD
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.207.76] (HELO web31813.mail.mud.yahoo.com) (68.142.207.76)
    by apache.org (qpsmtpd/0.29) with SMTP; Mon, 25 Jul 2005 17:34:25 -0700
Received: (qmail 7891 invoked by uid 60001); 26 Jul 2005 00:34:29 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Date:From:Reply-To:Subject:To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=qXHCG5zT2Hs+s7bBK/oChDvEXqfdmDQLOYdPIl+bsBQNAR6+vP3g/Tel8mFuXxf4VA31Po8TS/lkNteuwrLDsAxmSaDcoNEKKObwYzlJ8HwzDyPlRwa931PT97aXthELpC60iX2qGLM47aiKhxbTgq4Pkx+hIVu4z5AKn5wsLPs=  ;
Message-ID: <20050726003429.7889.qmail@web31813.mail.mud.yahoo.com>
Date: Mon, 25 Jul 2005 17:34:29 -0700 (PDT)
From: Hu Pan <thomaspan2@yahoo.com>
Reply-To: Hu Pan <thomaspan2@yahoo.com>
Subject: Re: rename bug
To: java-user@lucene.apache.org
MIME-Version: 1.0
Content-Type: text/plain; charset=utf-8
Content-Transfer-Encoding: quoted-printable
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


 I have downloaded the source code and use File renameTo to do the rename i=
nstead of input/output stream copying. Things are working under Windows. Is=
 it possible to check OS type and call the correct methods? Anyway, I would=
 put up a blog when having time so that people can search for the solution.=
 :-)
=20
=20
 -Thomas
=C2=A0
----- Original Message ----
From: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Sent: Mon Jul 25 17:22:50 2005
Subject: Re: rename bug

This is actually a known problem, particular to windows OS.
I remember Doug Cuttings has talked about it before.

Inside Lucene, the get-around is to try to rename the file until successful=
.

The IOException you saw may not affect your indexes' integrity. But I
said so just based on experience, not thoroghly tested.

There was a patch for this, but somehow it's not made into Lucene
1.4.3, or the latest dev version, AFAIK.

--=20
Chris Lu
---------------------
Full-Text Search on Any Database
http://www.dbsight.net


On 7/25/05, Thomas Pan <thomaspan2@yahoo.com> wrote:
>=20
> Run a small indexer within Eclipse 3.1 under Windows and encounter
> rename bug all the time:
> java.io.IOException: Cannot rename deleteable.new to deletable
>=C2=A0=C2=A0=C2=A0=C2=A0 at org.apache.lucene.store.FSDirectory.renameFile=
(FSDirectory.java:239)
>=C2=A0=C2=A0=C2=A0=C2=A0 at
> org.apache.lucene.index.IndexWriter.writeDeleteableFiles(IndexWriter.java=
:579)
>=C2=A0=C2=A0=C2=A0=C2=A0 at
> org.apache.lucene.index.IndexWriter.deleteSegments(IndexWriter.java:530)
>=C2=A0=C2=A0=C2=A0=C2=A0 at org.apache.lucene.index.IndexWriter.access$200=
(IndexWriter.java:51)
>=C2=A0=C2=A0=C2=A0=C2=A0 at org.apache.lucene.index.IndexWriter$3.doBody(I=
ndexWriter.java:504)
>=C2=A0=C2=A0=C2=A0=C2=A0 at org.apache.lucene.store.Lock$With.run(Lock.jav=
a:109)
>=C2=A0=C2=A0=C2=A0=C2=A0 at
> org.apache.lucene.index.IndexWriter.mergeSegments(IndexWriter.java:501)[4=
751]Add
> 655:ACKHQ.OB:Armstrong Holdings Inc !
>=C2=A0=C2=A0=C2=A0=C2=A0 at
> org.apache.lucene.index.IndexWriter.maybeMergeSegments(IndexWriter.java:4=
58)
>=C2=A0=C2=A0=C2=A0=C2=A0 at org.apache.lucene.index.IndexWriter.addDocumen=
t(IndexWriter.java:310)
>=C2=A0=C2=A0=C2=A0=C2=A0 at org.apache.lucene.index.IndexWriter.addDocumen=
t(IndexWriter.java:294)
>=20
> The version of Lucene is 1.4.3. The Java class only has one main method
> implemented. Any clue?
>=20
>=20
> -Thomas
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 26 07:15:29 2005
Return-Path: <java-user-return-15572-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72791 invoked from network); 26 Jul 2005 07:15:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2005 07:15:29 -0000
Received: (qmail 5191 invoked by uid 500); 26 Jul 2005 07:15:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 5168 invoked by uid 500); 26 Jul 2005 07:15:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 5155 invoked by uid 99); 26 Jul 2005 07:15:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 00:15:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [134.96.188.26] (HELO mail.dfki.de) (134.96.188.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 00:15:10 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 87DA8E4822
	for <java-user@lucene.apache.org>; Tue, 26 Jul 2005 09:15:07 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id C6174E4823
	for <java-user@lucene.apache.org>; Tue, 26 Jul 2005 09:15:06 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <8a484a78050725094036dcfe5e@mail.gmail.com>
References: <8a484a7805072504051af8b50c@mail.gmail.com> <CF0AE4F3-011D-4B53-A4F7-A39D76284C7F@ehatchersolutions.com> <8a484a78050725094036dcfe5e@mail.gmail.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <fc362455d46cd749591f40f1f8bab1f7@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: filtering on searching or after through hits?
Date: Tue, 26 Jul 2005 09:15:03 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

But filters are in-memory biests so have to be recomputed every-time...=20=

what would be the best approach:
- store the filter (that shouldn't be very expensive but I never tried)
- modify the index to add a flag ?
Say, for now, my filter contains 70% of the documents.

thanks

paul


Le 25 juil. 05, =E0 18:40, Riccardo Daviddi a =E9crit :

> ok:)
> so I do this "filtering" on the hits.
> thx
>
> On 7/25/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>
>> On Jul 25, 2005, at 7:05 AM, Riccardo Daviddi wrote:
>>> Hi all,
>>> I have to filter my searching in two ways:
>>> 1) by score, I want that only docs with score higher than a =
threshold
>>> are returned.
>>> 2) by num of docs, I want that only, for example, the first 20 docs
>>> are returned.
>>>
>>> It's better do it with a queryfilter or search for all and after =
look
>>> through the hits with some conditions?
>>
>> A QueryFilter can do neither of these criteria.  I recommend simply
>> doing a search and limiting the Hits shown based on the desired
>> criteria.
>>
>>      Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> --=20
> Riccardo Daviddi
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 26 12:02:05 2005
Return-Path: <java-user-return-15573-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72311 invoked from network); 26 Jul 2005 12:02:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2005 12:02:04 -0000
Received: (qmail 88047 invoked by uid 500); 26 Jul 2005 12:01:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 88023 invoked by uid 500); 26 Jul 2005 12:01:56 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 88010 invoked by uid 99); 26 Jul 2005 12:01:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 05:01:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 05:01:48 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 1446513E2007; Tue, 26 Jul 2005 08:01:46 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id A66E213E2006
	for <java-user@lucene.apache.org>; Tue, 26 Jul 2005 07:56:30 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <fc362455d46cd749591f40f1f8bab1f7@activemath.org>
References: <8a484a7805072504051af8b50c@mail.gmail.com> <CF0AE4F3-011D-4B53-A4F7-A39D76284C7F@ehatchersolutions.com> <8a484a78050725094036dcfe5e@mail.gmail.com> <fc362455d46cd749591f40f1f8bab1f7@activemath.org>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <5E835F98-4C34-43AC-8CAB-A498D339DECE@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: filtering on searching or after through hits?
Date: Tue, 26 Jul 2005 07:56:24 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-4.2 required=5.0 tests=AWL,BAYES_00 
	autolearn=unavailable version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 26, 2005, at 3:15 AM, Paul Libbrecht wrote:

> But filters are in-memory biests so have to be recomputed every-=20
> time... what would be the best approach:
> - store the filter (that shouldn't be very expensive but I never =20
> tried)
> - modify the index to add a flag ?
> Say, for now, my filter contains 70% of the documents.

Could you frame your questions around a use case?

A filter is really designed for long-term use, not for instantiation =20
for every search.

     Erik


>
> thanks
>
> paul
>
>
> Le 25 juil. 05, =E0 18:40, Riccardo Daviddi a =E9crit :
>
>
>> ok:)
>> so I do this "filtering" on the hits.
>> thx
>>
>> On 7/25/05, Erik Hatcher <erik@ehatchersolutions.com> wrote:
>>
>>>
>>> On Jul 25, 2005, at 7:05 AM, Riccardo Daviddi wrote:
>>>
>>>> Hi all,
>>>> I have to filter my searching in two ways:
>>>> 1) by score, I want that only docs with score higher than a =20
>>>> threshold
>>>> are returned.
>>>> 2) by num of docs, I want that only, for example, the first 20 docs
>>>> are returned.
>>>>
>>>> It's better do it with a queryfilter or search for all and after =20=

>>>> look
>>>> through the hits with some conditions?
>>>>
>>>
>>> A QueryFilter can do neither of these criteria.  I recommend simply
>>> doing a search and limiting the Hits shown based on the desired
>>> criteria.
>>>
>>>      Erik
>>>
>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>> --=20
>> Riccardo Daviddi
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 26 16:58:46 2005
Return-Path: <java-user-return-15574-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6295 invoked from network); 26 Jul 2005 16:58:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2005 16:58:46 -0000
Received: (qmail 42483 invoked by uid 500); 26 Jul 2005 16:58:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 42456 invoked by uid 500); 26 Jul 2005 16:58:39 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 42439 invoked by uid 99); 26 Jul 2005 16:58:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 09:58:38 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.10] (HELO mis011.exch011.intermedia.net) (64.78.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 09:58:31 -0700
Received: from ehost011-1.exch011.intermedia.net ([64.78.21.3]) by mis011.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 26 Jul 2005 09:58:36 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Analyzer or QueryParser problem?
Date: Tue, 26 Jul 2005 09:53:34 -0700
Message-ID: <41EE526EC2D3C74286415780D3BA9F870D199A3A@ehost011-1.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Analyzer or QueryParser problem?
Thread-Index: AcWR2frkZcPKJ2sRRDmESdUXgN/GewAKGAUw
From: "Derek Westfall" <dwestfall@TradelineInc.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Jul 2005 16:58:36.0308 (UTC) FILETIME=[43638540:01C59203]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I am working on a business directory app.

As you would expect, some companies have unusual names.

My first problem is the company with title: "GM:Systems"

I indexed the title field as a text field with the English
standardAnalyzer. Searching on "GM Systems" will turn it up, but
searching on "GM:Systems" or "GMSystems" will not. Since I'm using the
same analyzer for indexing and for searching, on the same text,
shouldn't it turn up? I'm searching using the MultiFieldQueryParser.

Any input appreciated, as always. :)

Derek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 26 17:11:08 2005
Return-Path: <java-user-return-15575-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10400 invoked from network); 26 Jul 2005 17:11:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2005 17:11:07 -0000
Received: (qmail 59863 invoked by uid 500); 26 Jul 2005 17:11:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 59828 invoked by uid 500); 26 Jul 2005 17:11:00 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 59815 invoked by uid 99); 26 Jul 2005 17:11:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 10:11:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.38] (HELO web31105.mail.mud.yahoo.com) (68.142.200.38)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 26 Jul 2005 10:10:53 -0700
Received: (qmail 77932 invoked by uid 60001); 26 Jul 2005 17:10:57 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=vkqWOwPdAQrnfZw8BQz3uHNKtszG+yLtYNSewQv+roPb6ZYnAlsxk+h6fDmKE/YDwDUgPJIre5Whhbh9BK32Glk3oPQO7jNQYgZunK8q4nj2W+gvzdjVSAWFORyhBdjFDJku3gd1xllHPYjCMv+NOfkZuk7pVyt5YY7gkYw1bIw=  ;
Message-ID: <20050726171057.77930.qmail@web31105.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31105.mail.mud.yahoo.com via HTTP; Tue, 26 Jul 2005 10:10:57 PDT
Date: Tue, 26 Jul 2005 10:10:57 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Analyzer or QueryParser problem?
To: java-user@lucene.apache.org
In-Reply-To: <41EE526EC2D3C74286415780D3BA9F870D199A3A@ehost011-1.exch011.intermedia.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

You can use Luke to see what got indexed.  This will tell you what the
Analyzer did.
You can then use QueryParser from the command line (it's got a main
method), give it your input, and see what it returns.  This will tell
you what QueryParser+Analyzer did.  Oh, you use MFQP.  It may have a
main method, too, I'd have to check... To simplify, try getting it
working with the regular QueryParser first.

Otis


--- Derek Westfall <dwestfall@TradelineInc.com> wrote:

> I am working on a business directory app.
> 
> As you would expect, some companies have unusual names.
> 
> My first problem is the company with title: "GM:Systems"
> 
> I indexed the title field as a text field with the English
> standardAnalyzer. Searching on "GM Systems" will turn it up, but
> searching on "GM:Systems" or "GMSystems" will not. Since I'm using
> the
> same analyzer for indexing and for searching, on the same text,
> shouldn't it turn up? I'm searching using the MultiFieldQueryParser.
> 
> Any input appreciated, as always. :)
> 
> Derek
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 26 17:24:37 2005
Return-Path: <java-user-return-15576-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15327 invoked from network); 26 Jul 2005 17:24:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2005 17:24:37 -0000
Received: (qmail 91118 invoked by uid 500); 26 Jul 2005 17:24:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90970 invoked by uid 500); 26 Jul 2005 17:24:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90957 invoked by uid 99); 26 Jul 2005 17:24:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 10:24:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [64.18.1.126] (HELO psmtp.com) (64.18.1.126)
    by apache.org (qpsmtpd/0.29) with SMTP; Tue, 26 Jul 2005 10:24:23 -0700
Received: from source ([139.56.4.14]) by exprod6ob6.obsmtp.com ([64.18.5.12]) with SMTP;
	Tue, 26 Jul 2005 10:24:25 PDT
Received: from triangulum1.broadvision.com (triangulum1.broadvision.com [10.10.102.100])
	by nebula3.broadvision.com (8.10.2+Sun/8.10.2) with ESMTP id j6QHNUL10389
	for <java-user@lucene.apache.org>; Tue, 26 Jul 2005 10:23:30 -0700 (PDT)
Received: from rw-gw-02.BroadVision.com (localhost [127.0.0.1])
	by triangulum1.broadvision.com (8.9.3+Sun/8.9.3) with ESMTP id KAA16112
	for <java-user@lucene.apache.org>; Tue, 26 Jul 2005 10:24:52 -0700 (PDT)
Received: by rw-gw-02.broadvision.com with Internet Mail Service (5.5.2655.55)
	id <NF0AZZP8>; Tue, 26 Jul 2005 10:24:59 -0700
Message-ID: <8220B8D6B56A9A4E8480489F38E425294245F0@rw-msg-02.broadvision.com>
From: "Zhang, Lisheng" <Lisheng.Zhang@broadvision.com>
To: "'java-user@lucene.apache.org'" <java-user@lucene.apache.org>
Subject: RE: Analyzer or QueryParser problem?
Date: Tue, 26 Jul 2005 10:24:52 -0700
MIME-Version: 1.0
X-Mailer: Internet Mail Service (5.5.2655.55)
Content-Type: text/plain;
	charset="iso-8859-1"
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Derek,

My guessing is that ":" is special, QueryParser
may regard ":" as for qualifying a field, we may
need to escape this special symbol as:

"GM\:Systems"

as query string.

Regards, Lisheng

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Tuesday, July 26, 2005 9:11 AM
To: java-user@lucene.apache.org
Subject: Re: Analyzer or QueryParser problem?


You can use Luke to see what got indexed.  This will tell you what the
Analyzer did.
You can then use QueryParser from the command line (it's got a main
method), give it your input, and see what it returns.  This will tell
you what QueryParser+Analyzer did.  Oh, you use MFQP.  It may have a
main method, too, I'd have to check... To simplify, try getting it
working with the regular QueryParser first.

Otis


--- Derek Westfall <dwestfall@TradelineInc.com> wrote:

> I am working on a business directory app.
> 
> As you would expect, some companies have unusual names.
> 
> My first problem is the company with title: "GM:Systems"
> 
> I indexed the title field as a text field with the English
> standardAnalyzer. Searching on "GM Systems" will turn it up, but
> searching on "GM:Systems" or "GMSystems" will not. Since I'm using
> the
> same analyzer for indexing and for searching, on the same text,
> shouldn't it turn up? I'm searching using the MultiFieldQueryParser.
> 
> Any input appreciated, as always. :)
> 
> Derek
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 26 17:29:19 2005
Return-Path: <java-user-return-15577-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16968 invoked from network); 26 Jul 2005 17:29:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2005 17:29:19 -0000
Received: (qmail 102 invoked by uid 500); 26 Jul 2005 17:29:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99983 invoked by uid 500); 26 Jul 2005 17:29:12 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99970 invoked by uid 99); 26 Jul 2005 17:29:12 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 10:29:11 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of jm.tinghir@gmail.com designates 64.233.182.199 as permitted sender)
Received: from [64.233.182.199] (HELO nproxy.gmail.com) (64.233.182.199)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 10:29:05 -0700
Received: by nproxy.gmail.com with SMTP id d4so450nfe
        for <java-user@lucene.apache.org>; Tue, 26 Jul 2005 10:29:09 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=Yb93Aa2RE6HnhCLtK4+LAq61Taw7ZNSNXMuHXbsQGF0oZ1CiFHpBgHZyafaYdJGItRrb71m6zHAjG0/hNY/qmXFglnJb3bdG0k39X84lAIm831bXklof7O4ZdQPBCwNpNiB1YnA3flUqDvxQIBPmnEyIPozFg315aTiqC1pE4UY=
Received: by 10.48.143.9 with SMTP id q9mr514nfd;
        Tue, 26 Jul 2005 10:29:09 -0700 (PDT)
Received: by 10.48.249.5 with HTTP; Tue, 26 Jul 2005 10:29:09 -0700 (PDT)
Message-ID: <6f3b242905072610293aaa540c@mail.gmail.com>
Date: Tue, 26 Jul 2005 19:29:09 +0200
From: JM Tinghir <jm.tinghir@gmail.com>
Reply-To: JM Tinghir <jm.tinghir@gmail.com>
To: java-user@lucene.apache.org
Subject: Querying the values of a field
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I have an index with about 20 different fields.
I'd like to query my index to get the list of all different terms for
a given field.
Is it something possible in a simple way? I mean simpler than getting
every terms of the index and then keeping only those which match the
given field.

Thanks in advance,
Jean-Marie Tinghir

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 26 17:32:50 2005
Return-Path: <java-user-return-15578-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17916 invoked from network); 26 Jul 2005 17:32:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2005 17:32:49 -0000
Received: (qmail 3416 invoked by uid 500); 26 Jul 2005 17:32:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3373 invoked by uid 500); 26 Jul 2005 17:32:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3327 invoked by uid 99); 26 Jul 2005 17:32:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 10:32:23 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.10] (HELO mis011.exch011.intermedia.net) (64.78.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 10:32:15 -0700
Received: from ehost011-1.exch011.intermedia.net ([64.78.21.3]) by mis011.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Tue, 26 Jul 2005 10:32:20 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Analyzer or QueryParser problem?
Date: Tue, 26 Jul 2005 10:32:19 -0700
Message-ID: <41EE526EC2D3C74286415780D3BA9F870D199B14@ehost011-1.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Analyzer or QueryParser problem?
Thread-Index: AcWSBujHyLvFRT5qT5++6Pfq22ZxcAAAlpIQ
From: "Derek Westfall" <dwestfall@TradelineInc.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 26 Jul 2005 17:32:20.0208 (UTC) FILETIME=[F9BA2700:01C59207]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

D'OH! That was it!=20

-----Original Message-----
From: Zhang, Lisheng [mailto:Lisheng.Zhang@broadvision.com]=20
Sent: Tuesday, July 26, 2005 10:25 AM
To: java-user@lucene.apache.org
Subject: RE: Analyzer or QueryParser problem?

Hi Derek,

My guessing is that ":" is special, QueryParser may regard ":" as for
qualifying a field, we may need to escape this special symbol as:

"GM\:Systems"

as query string.

Regards, Lisheng

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Tuesday, July 26, 2005 9:11 AM
To: java-user@lucene.apache.org
Subject: Re: Analyzer or QueryParser problem?


You can use Luke to see what got indexed.  This will tell you what the
Analyzer did.
You can then use QueryParser from the command line (it's got a main
method), give it your input, and see what it returns.  This will tell
you what QueryParser+Analyzer did.  Oh, you use MFQP.  It may have a
main method, too, I'd have to check... To simplify, try getting it
working with the regular QueryParser first.

Otis


--- Derek Westfall <dwestfall@TradelineInc.com> wrote:

> I am working on a business directory app.
>=20
> As you would expect, some companies have unusual names.
>=20
> My first problem is the company with title: "GM:Systems"
>=20
> I indexed the title field as a text field with the English=20
> standardAnalyzer. Searching on "GM Systems" will turn it up, but=20
> searching on "GM:Systems" or "GMSystems" will not. Since I'm using the

> same analyzer for indexing and for searching, on the same text,=20
> shouldn't it turn up? I'm searching using the MultiFieldQueryParser.
>=20
> Any input appreciated, as always. :)
>=20
> Derek
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>=20


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Tue Jul 26 23:29:20 2005
Return-Path: <java-user-return-15579-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95910 invoked from network); 26 Jul 2005 23:29:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 26 Jul 2005 23:29:20 -0000
Received: (qmail 83253 invoked by uid 500); 26 Jul 2005 23:29:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 83234 invoked by uid 500); 26 Jul 2005 23:29:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 83220 invoked by uid 99); 26 Jul 2005 23:29:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 16:29:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 16:29:06 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id A9FC2159F9D
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 09:29:08 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 9251964007
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 09:29:08 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 10382-02 for <java-user@lucene.apache.org>;
 Wed, 27 Jul 2005 09:29:07 +1000 (EST)
Received: from pc004 (unknown [192.168.0.12])
	by herald.aconex.com (Postfix) with SMTP id 3D15064002
	for <java-user@lucene.apache.org>; Tue, 26 Jul 2005 19:29:07 -0400 (EDT)
From: "Indu Abeyaratna" <iabeyaratna@aconex.com>
To: <java-user@lucene.apache.org>
Subject: RE: Analyzer or QueryParser problem?
Date: Wed, 27 Jul 2005 09:29:07 +1000
Message-ID: <CBECJKOBLBEIELOPAOGPAEGICGAA.iabeyaratna@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Importance: Normal
In-Reply-To: <8220B8D6B56A9A4E8480489F38E425294245F0@rw-msg-02.broadvision.com>
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have a question related to this.

when I search for wildcard "*11" IndexSearcher throws an exception but when
I tries "\**11" it works.

I couldn't find any documentation related to this. What could be the reason
for this?

I am using QueryParser and StandardAnalyser

And the query it generate looks like : "+orgId:9146 +isRegistered:1
+docNo:**11"

Regard,
Indu

-----Original Message-----
From: Zhang, Lisheng [mailto:Lisheng.Zhang@broadvision.com]
Sent: Wednesday, 27 July 2005 3:25 AM
To: 'java-user@lucene.apache.org'
Subject: RE: Analyzer or QueryParser problem?


Hi Derek,

My guessing is that ":" is special, QueryParser
may regard ":" as for qualifying a field, we may
need to escape this special symbol as:

"GM\:Systems"

as query string.

Regards, Lisheng

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com]
Sent: Tuesday, July 26, 2005 9:11 AM
To: java-user@lucene.apache.org
Subject: Re: Analyzer or QueryParser problem?


You can use Luke to see what got indexed.  This will tell you what the
Analyzer did.
You can then use QueryParser from the command line (it's got a main
method), give it your input, and see what it returns.  This will tell
you what QueryParser+Analyzer did.  Oh, you use MFQP.  It may have a
main method, too, I'd have to check... To simplify, try getting it
working with the regular QueryParser first.

Otis


--- Derek Westfall <dwestfall@TradelineInc.com> wrote:

> I am working on a business directory app.
>
> As you would expect, some companies have unusual names.
>
> My first problem is the company with title: "GM:Systems"
>
> I indexed the title field as a text field with the English
> standardAnalyzer. Searching on "GM Systems" will turn it up, but
> searching on "GM:Systems" or "GMSystems" will not. Since I'm using
> the
> same analyzer for indexing and for searching, on the same text,
> shouldn't it turn up? I'm searching using the MultiFieldQueryParser.
>
> Any input appreciated, as always. :)
>
> Derek
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 00:35:16 2005
Return-Path: <java-user-return-15580-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 11526 invoked from network); 27 Jul 2005 00:35:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 00:35:16 -0000
Received: (qmail 47028 invoked by uid 500); 27 Jul 2005 00:35:07 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46999 invoked by uid 500); 27 Jul 2005 00:35:07 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46986 invoked by uid 99); 27 Jul 2005 00:35:07 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 17:35:07 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 17:35:00 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4784613E2007; Tue, 26 Jul 2005 20:35:02 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 5C48F13E2006
	for <java-user@lucene.apache.org>; Tue, 26 Jul 2005 20:34:57 -0400 (EDT)
In-Reply-To: <CBECJKOBLBEIELOPAOGPAEGICGAA.iabeyaratna@aconex.com>
References: <CBECJKOBLBEIELOPAOGPAEGICGAA.iabeyaratna@aconex.com>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <7D92DDCB-9525-4429-8880-BDF25941E1D7@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Analyzer or QueryParser problem?
Date: Tue, 26 Jul 2005 20:34:56 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 26, 2005, at 7:29 PM, Indu Abeyaratna wrote:

> I have a question related to this.
>
> when I search for wildcard "*11" IndexSearcher throws an exception  
> but when
> I tries "\**11" it works.

I'm guessing QueryParser actually throws an exception, not  
IndexSearcher, correct?  Wildcards at the beginning of a term are not  
allowed by QueryParser.

Using \**11 works because the first character is literally an  
asterisk, and thus is a legal expression.

> I couldn't find any documentation related to this. What could be  
> the reason
> for this?
>
> I am using QueryParser and StandardAnalyser
>
> And the query it generate looks like : "+orgId:9146 +isRegistered:1
> +docNo:**11"

I see the issue though - by making it \** at the beginning, you've  
effectively bypassed the QueryParser protection of not allowing  
prefixed wildcard terms but achieved the same thing.  Interesting hack!

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 01:26:04 2005
Return-Path: <java-user-return-15581-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27396 invoked from network); 27 Jul 2005 01:26:04 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 01:26:04 -0000
Received: (qmail 91271 invoked by uid 500); 27 Jul 2005 01:26:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90353 invoked by uid 500); 27 Jul 2005 01:25:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90336 invoked by uid 99); 27 Jul 2005 01:25:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 18:25:58 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 18:25:51 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id 98606159F8F
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 11:25:52 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 5A73064007
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 11:25:52 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 18067-01-8 for <java-user@lucene.apache.org>;
 Wed, 27 Jul 2005 11:25:51 +1000 (EST)
Received: from pc004 (unknown [192.168.0.12])
	by herald.aconex.com (Postfix) with SMTP id 4D6D264002
	for <java-user@lucene.apache.org>; Tue, 26 Jul 2005 21:25:51 -0400 (EDT)
From: "Indu Abeyaratna" <iabeyaratna@aconex.com>
To: <java-user@lucene.apache.org>
Subject: RE: Analyzer or QueryParser problem?
Date: Wed, 27 Jul 2005 11:25:51 +1000
Message-ID: <CBECJKOBLBEIELOPAOGPEEGJCGAA.iabeyaratna@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Importance: Normal
In-Reply-To: <7D92DDCB-9525-4429-8880-BDF25941E1D7@ehatchersolutions.com>
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


your are right its QueryParser throw the exception.

I think I got the point. QueryParser doesn't allows asterisk at the begining
but SerchIndexer (could) work.


For a example when I quering "\**TI" it returned me machings
"J400-C-V-S10-T1" and "J400-C-V-S8-T1".



-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
Sent: Wednesday, 27 July 2005 10:35 AM
To: java-user@lucene.apache.org
Subject: Re: Analyzer or QueryParser problem?



On Jul 26, 2005, at 7:29 PM, Indu Abeyaratna wrote:

> I have a question related to this.
>
> when I search for wildcard "*11" IndexSearcher throws an exception
> but when
> I tries "\**11" it works.

I'm guessing QueryParser actually throws an exception, not
IndexSearcher, correct?  Wildcards at the beginning of a term are not
allowed by QueryParser.

Using \**11 works because the first character is literally an
asterisk, and thus is a legal expression.

> I couldn't find any documentation related to this. What could be
> the reason
> for this?
>
> I am using QueryParser and StandardAnalyser
>
> And the query it generate looks like : "+orgId:9146 +isRegistered:1
> +docNo:**11"

I see the issue though - by making it \** at the beginning, you've
effectively bypassed the QueryParser protection of not allowing
prefixed wildcard terms but achieved the same thing.  Interesting hack!

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 02:43:32 2005
Return-Path: <java-user-return-15582-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 40577 invoked from network); 27 Jul 2005 02:43:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 02:43:31 -0000
Received: (qmail 63047 invoked by uid 500); 27 Jul 2005 02:43:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63026 invoked by uid 500); 27 Jul 2005 02:43:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63013 invoked by uid 99); 27 Jul 2005 02:43:24 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 19:43:24 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alex@gossamer-threads.com designates 209.139.239.21 as permitted sender)
Received: from [209.139.239.21] (HELO gossamer-threads.com) (209.139.239.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 19:43:17 -0700
Received: (qmail 25751 invoked from network); 27 Jul 2005 02:43:22 -0000
X-AntiVirus: Clean
Received: from unknown (HELO ?192.168.1.98?) (alex@gossamer-threads.com@216.18.5.209)
  by gossamer.nmsrv.com with (RC4-MD5 encrypted) SMTP; 27 Jul 2005 02:43:22 -0000
Date: Tue, 26 Jul 2005 19:42:00 -0700
From: Alex Krohn <alex@gossamer-threads.com>
To: java-user@lucene.apache.org
Subject: searchable mailing list archive
Message-Id: <20050726193841.B0A7.ALEX@gossamer-threads.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Becky! ver. 2.21.02 [en]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I've added the Lucene mailing lists to our searchable archive found
here:

	http://www.gossamer-threads.com/lists/lucene/

The search is, of course, powered by Lucene. =) I hope you find it
useful, and thanks for the great work! If you have any questions or
problems with it, please feel free to email me off list.

Cheers,

Alex

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 06:07:07 2005
Return-Path: <java-user-return-15583-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 94834 invoked from network); 27 Jul 2005 06:07:07 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 06:07:07 -0000
Received: (qmail 56097 invoked by uid 500); 27 Jul 2005 06:06:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56070 invoked by uid 500); 27 Jul 2005 06:06:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56050 invoked by uid 99); 27 Jul 2005 06:06:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 23:06:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.lu@gmail.com designates 64.233.184.207 as permitted sender)
Received: from [64.233.184.207] (HELO wproxy.gmail.com) (64.233.184.207)
    by apache.org (qpsmtpd/0.29) with ESMTP; Tue, 26 Jul 2005 23:06:50 -0700
Received: by wproxy.gmail.com with SMTP id i23so111604wra
        for <java-user@lucene.apache.org>; Tue, 26 Jul 2005 23:06:55 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=QvTGnds5qdKgyc08VFHykrD/1DjQaoitTEuP3WLOrqDq9giyyod6dF9oOA5ENnw/Z07yRESEU/SrYW4RVYyhd6huew7o1yO0g6+gbGGwtzkPdMBCUM4a2FYOBHTuBu4NFXV1FglcVl7rNvEWTUSKdCjCJBPQe6yzhnHcZ+w0CU4=
Received: by 10.54.13.59 with SMTP id 59mr218255wrm;
        Tue, 26 Jul 2005 23:06:55 -0700 (PDT)
Received: by 10.54.24.34 with HTTP; Tue, 26 Jul 2005 23:06:55 -0700 (PDT)
Message-ID: <6e3ae631050726230649e6f76f@mail.gmail.com>
Date: Tue, 26 Jul 2005 23:06:55 -0700
From: Chris Lu <chris.lu@gmail.com>
Reply-To: Chris Lu <chris.lu@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: searchable mailing list archive
In-Reply-To: <20050726193841.B0A7.ALEX@gossamer-threads.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20050726193841.B0A7.ALEX@gossamer-threads.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Very nice!

Can I know how did you retrieve and store the mails?

--=20
Chris Lu
---------------------
Full-Text Search on Any Database
http://www.dbsight.net=20

On 7/26/05, Alex Krohn <alex@gossamer-threads.com> wrote:
> Hi,
>=20
> I've added the Lucene mailing lists to our searchable archive found
> here:
>=20
>         http://www.gossamer-threads.com/lists/lucene/
>=20
> The search is, of course, powered by Lucene. =3D) I hope you find it
> useful, and thanks for the great work! If you have any questions or
> problems with it, please feel free to email me off list.
>=20
> Cheers,
>=20
> Alex
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 10:38:56 2005
Return-Path: <java-user-return-15584-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 92800 invoked from network); 27 Jul 2005 10:38:55 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 10:38:55 -0000
Received: (qmail 71032 invoked by uid 500); 27 Jul 2005 10:38:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 71012 invoked by uid 500); 27 Jul 2005 10:38:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70999 invoked by uid 99); 27 Jul 2005 10:38:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 03:38:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of magawake@gmail.com designates 64.233.184.205 as permitted sender)
Received: from [64.233.184.205] (HELO wproxy.gmail.com) (64.233.184.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 03:38:41 -0700
Received: by wproxy.gmail.com with SMTP id i5so143946wra
        for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 03:38:47 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=F6e35kZ7MJ1ztr+GTPvaUam1tAq/vQ5nMwnYjNOHoRraQ73YpzQlE9NiAoIl+LakkuI3PRU4fWsO3rt+jbdEQi0OUekcSjsA9MalZJsCjtTJfpd9d/dkiEPPAi/YFBCswvqUkip2DJ07JsV5hA4p6MINf+v0+YNGJhOrtwMV/as=
Received: by 10.54.8.60 with SMTP id 60mr270414wrh;
        Wed, 27 Jul 2005 03:38:47 -0700 (PDT)
Received: by 10.54.147.18 with HTTP; Wed, 27 Jul 2005 03:38:47 -0700 (PDT)
Message-ID: <1cbd6f83050727033853446f93@mail.gmail.com>
Date: Wed, 27 Jul 2005 06:38:47 -0400
From: Mag Gam <magawake@gmail.com>
Reply-To: Mag Gam <magawake@gmail.com>
To: java-user@lucene.apache.org
Subject: Derby + Lucene
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Anyone here have any luck with integration of Apache Derby and Lucene?

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 15:06:24 2005
Return-Path: <java-user-return-15585-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7820 invoked from network); 27 Jul 2005 15:06:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 15:06:24 -0000
Received: (qmail 93905 invoked by uid 500); 27 Jul 2005 15:06:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93880 invoked by uid 500); 27 Jul 2005 15:06:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93867 invoked by uid 99); 27 Jul 2005 15:06:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 08:06:17 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=DNS_FROM_RFC_ABUSE,HTML_50_60,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [194.119.192.4] (HELO mx2.isti.cnr.it) (194.119.192.4)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 08:06:09 -0700
Received: from conversionlocal.isti.cnr.it by mx.isti.cnr.it
 (PMDF V6.2-1x9 #31069) id <01LR4LGCGJQ88ZDVN2@mx.isti.cnr.it> for
 java-user@lucene.apache.org; Wed, 27 Jul 2005 17:05:47 +0200
Received: from fedeh (fedeh.isti.cnr.it [146.48.86.29])
 by mx.isti.cnr.it (PMDF V6.2-1x9 #31069)
 with ESMTPA id <01LR4LGBZP8Q90MU5Y@mx.isti.cnr.it> for
 java-user@lucene.apache.org; Wed, 27 Jul 2005 17:05:46 +0200
Date: Wed, 27 Jul 2005 17:07:06 +0200
From: Federico Tonioni <Federico.Tonioni@isti.cnr.it>
Subject: Quick newbie question
To: java-user@lucene.apache.org
Message-id: <004801c592bc$da756200$1d563092@isti.cnr.it>
MIME-version: 1.0
X-MIMEOLE: Produced By Microsoft MimeOLE V6.00.2800.1441
X-Mailer: Microsoft Outlook Express 6.00.2800.1437
Content-type: multipart/alternative;
 boundary="Boundary_(ID_a4ujm8SEqkyUNSPoUKPTsg)"
X-Priority: 3
X-MSMail-priority: Normal
X-IP-SOURCE: 146.48.86.29 Auth Optional-Done
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--Boundary_(ID_a4ujm8SEqkyUNSPoUKPTsg)
Content-type: text/plain;	charset="iso-8859-1"
Content-transfer-encoding: quoted-printable

Hi all!
I have just a simple question

How can I retrieve all documents in an index by using QueryParser?
I thought=20

Query query =3D QueryParser.parse("*", "contents",
                    new StandardAnalyzer());

might be the solution, but it's not:)

thanks in advance
fede
--
-------------------------------------------------------------------------=
--------------------------
Federico Tonioni

Email1: Federico.Tonioni@isti.cnr.it
Email2: Federico.Tonioni@iet.unipi.it

Tel. : +39 339 3741340
=20
Istituto di Scienza e Tecnologie dell'Informazione "Alessandro Faedo"
Networked Multimedia Information Systems (NMIS) Laboratory
Area della Ricerca CNR di Pisa
Via G. Moruzzi 1 56124 PISA - Italy
-------------------------------------------------------------------------=
------------------------------=

--Boundary_(ID_a4ujm8SEqkyUNSPoUKPTsg)--

From java-user-return-15586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 15:50:12 2005
Return-Path: <java-user-return-15586-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 25026 invoked from network); 27 Jul 2005 15:50:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 15:50:12 -0000
Received: (qmail 70322 invoked by uid 500); 27 Jul 2005 15:49:57 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 70249 invoked by uid 500); 27 Jul 2005 15:49:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 70197 invoked by uid 99); 27 Jul 2005 15:49:56 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 08:49:56 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 08:49:49 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id EFCE613E2007; Wed, 27 Jul 2005 11:49:51 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id F23BC13E2006
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 11:49:43 -0400 (EDT)
In-Reply-To: <004801c592bc$da756200$1d563092@isti.cnr.it>
References: <004801c592bc$da756200$1d563092@isti.cnr.it>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9867B731-4BFC-4680-9945-A435914A54AB@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Quick newbie question
Date: Wed, 27 Jul 2005 11:49:42 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.9 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 27, 2005, at 11:07 AM, Federico Tonioni wrote:

> Hi all!
> I have just a simple question
>
> How can I retrieve all documents in an index by using QueryParser?
> I thought
>
> Query query = QueryParser.parse("*", "contents",
>                     new StandardAnalyzer());
>
> might be the solution, but it's not:)

In general, you can't.  Many have used a technique of indexing a  
single field with the same value for all documents and done a query  
for field:value to find all documents.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 16:23:21 2005
Return-Path: <java-user-return-15587-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44641 invoked from network); 27 Jul 2005 16:23:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 16:23:21 -0000
Received: (qmail 36141 invoked by uid 500); 27 Jul 2005 16:22:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 36107 invoked by uid 500); 27 Jul 2005 16:22:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 35992 invoked by uid 99); 27 Jul 2005 16:22:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 09:22:43 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.28] (HELO pop04.mail.atl.earthlink.net) (207.69.200.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 09:22:35 -0700
Received: from wamui-thinleaf.atl.sa.earthlink.net ([209.86.224.51])
	by pop04.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1Dxog3-0003VA-00
	for java-user@lucene.apache.org; Wed, 27 Jul 2005 12:22:39 -0400
Message-ID: <33359005.1122481359736.JavaMail.root@wamui-thinleaf.atl.sa.earthlink.net>
Date: Wed, 27 Jul 2005 11:22:39 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Re: Quick newbie question
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Of course you can do the inverse of what Erik said.  
That is search for a term that you know is not in the index and use the NOT operator.

Andrew

-----Original Message-----
From: Erik Hatcher <erik@ehatchersolutions.com>
Sent: Jul 27, 2005 10:49 AM
To: java-user@lucene.apache.org
Subject: Re: Quick newbie question


On Jul 27, 2005, at 11:07 AM, Federico Tonioni wrote:

> Hi all!
> I have just a simple question
>
> How can I retrieve all documents in an index by using QueryParser?
> I thought
>
> Query query = QueryParser.parse("*", "contents",
>                     new StandardAnalyzer());
>
> might be the solution, but it's not:)

In general, you can't.  Many have used a technique of indexing a  
single field with the same value for all documents and done a query  
for field:value to find all documents.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



Andrew Boyd
Software Architect
Sun Certified J2EE Architect
B&B Technical Services Inc.
205.422.2557

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 16:37:03 2005
Return-Path: <java-user-return-15588-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49256 invoked from network); 27 Jul 2005 16:37:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 16:37:03 -0000
Received: (qmail 68851 invoked by uid 500); 27 Jul 2005 16:36:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68791 invoked by uid 500); 27 Jul 2005 16:36:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68764 invoked by uid 99); 27 Jul 2005 16:36:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 09:36:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 09:36:42 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id C98A213E2007; Wed, 27 Jul 2005 12:36:45 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 4EF2813E2006
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 12:36:22 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <33359005.1122481359736.JavaMail.root@wamui-thinleaf.atl.sa.earthlink.net>
References: <33359005.1122481359736.JavaMail.root@wamui-thinleaf.atl.sa.earthlink.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <76B15BB2-C646-45F9-AF5C-FFD7C483C80A@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Quick newbie question
Date: Wed, 27 Jul 2005 12:36:22 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.8 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 27, 2005, at 12:22 PM, Andrew Boyd wrote:

> Of course you can do the inverse of what Erik said.
> That is search for a term that you know is not in the index and use  
> the NOT operator.

Ummm... no you can't.   A purely negative query is not allowed with  
Lucene.

     Erik


>
> Andrew
>
> -----Original Message-----
> From: Erik Hatcher <erik@ehatchersolutions.com>
> Sent: Jul 27, 2005 10:49 AM
> To: java-user@lucene.apache.org
> Subject: Re: Quick newbie question
>
>
> On Jul 27, 2005, at 11:07 AM, Federico Tonioni wrote:
>
>
>> Hi all!
>> I have just a simple question
>>
>> How can I retrieve all documents in an index by using QueryParser?
>> I thought
>>
>> Query query = QueryParser.parse("*", "contents",
>>                     new StandardAnalyzer());
>>
>> might be the solution, but it's not:)
>>
>
> In general, you can't.  Many have used a technique of indexing a
> single field with the same value for all documents and done a query
> for field:value to find all documents.
>
>      Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> Andrew Boyd
> Software Architect
> Sun Certified J2EE Architect
> B&B Technical Services Inc.
> 205.422.2557
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 16:40:26 2005
Return-Path: <java-user-return-15589-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50441 invoked from network); 27 Jul 2005 16:40:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 16:40:26 -0000
Received: (qmail 78592 invoked by uid 500); 27 Jul 2005 16:40:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78573 invoked by uid 500); 27 Jul 2005 16:40:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78560 invoked by uid 99); 27 Jul 2005 16:40:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 09:40:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.123.241.50] (HELO rivette.int.mediasurface.com) (193.123.241.50)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 09:40:12 -0700
Received: from rivette.int.mediasurface.com (localhost [127.0.0.1])
	by rivette.int.mediasurface.com (8.11.6+Sun/8.11.6) with ESMTP id j6RGeEc07548
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 17:40:15 +0100 (BST)
Received: from neptune.int.mediasurface.com (neptune.int.mediasurface.com [10.0.5.71])
	by rivette.int.mediasurface.com (8.11.6+Sun/8.11.6) with ESMTP id j6RGeEl07544
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 17:40:14 +0100 (BST)
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Quick newbie question
Date: Wed, 27 Jul 2005 17:40:13 +0100
Message-ID: <BE3E7BC7F7553B4A9362D4192ECD308AB18838@neptune.int.mediasurface.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Quick newbie question
Thread-Index: AcWSyW4ZdhG3/hJBSUyTk8za4irs7QAAGKMg
From: "Peter Gelderbloem" <Peter.Gelderbloem@mediasurface.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I wonder what would happen

Peter Gelderbloem -----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=20
Sent: 27 July 2005 17:36
To: java-user@lucene.apache.org
Subject: Re: Quick newbie question


On Jul 27, 2005, at 12:22 PM, Andrew Boyd wrote:

> Of course you can do the inverse of what Erik said.
> That is search for a term that you know is not in the index and use =20
> the NOT operator.

Ummm... no you can't.   A purely negative query is not allowed with =20
Lucene.

     Erik


>
> Andrew
>
> -----Original Message-----
> From: Erik Hatcher <erik@ehatchersolutions.com>
> Sent: Jul 27, 2005 10:49 AM
> To: java-user@lucene.apache.org
> Subject: Re: Quick newbie question
>
>
> On Jul 27, 2005, at 11:07 AM, Federico Tonioni wrote:
>
>
>> Hi all!
>> I have just a simple question
>>
>> How can I retrieve all documents in an index by using QueryParser?
>> I thought
>>
>> Query query =3D QueryParser.parse("*", "contents",
>>                     new StandardAnalyzer());
>>
>> might be the solution, but it's not:)
>>
>
> In general, you can't.  Many have used a technique of indexing a
> single field with the same value for all documents and done a query
> for field:value to find all documents.
>
>      Erik
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
>
> Andrew Boyd
> Software Architect
> Sun Certified J2EE Architect
> B&B Technical Services Inc.
> 205.422.2557
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 17:15:40 2005
Return-Path: <java-user-return-15590-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 63997 invoked from network); 27 Jul 2005 17:15:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 17:15:39 -0000
Received: (qmail 52643 invoked by uid 500); 27 Jul 2005 17:15:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52614 invoked by uid 500); 27 Jul 2005 17:15:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52599 invoked by uid 99); 27 Jul 2005 17:15:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 10:15:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 10:15:25 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 6085213E2007; Wed, 27 Jul 2005 13:15:29 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 3197B13E2006
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 13:14:59 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <BE3E7BC7F7553B4A9362D4192ECD308AB18838@neptune.int.mediasurface.com>
References: <BE3E7BC7F7553B4A9362D4192ECD308AB18838@neptune.int.mediasurface.com>
Content-Type: text/plain; charset=US-ASCII; format=flowed
Message-Id: <FD86C966-09CE-41B5-A098-34A3A7550583@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Quick newbie question
Date: Wed, 27 Jul 2005 13:14:56 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.8 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Jul 27, 2005, at 12:40 PM, Peter Gelderbloem wrote:
> I wonder what would happen

An exception :)

>
> Peter Gelderbloem -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: 27 July 2005 17:36
> To: java-user@lucene.apache.org
> Subject: Re: Quick newbie question
>
>
> On Jul 27, 2005, at 12:22 PM, Andrew Boyd wrote:
>
>
>> Of course you can do the inverse of what Erik said.
>> That is search for a term that you know is not in the index and use
>> the NOT operator.
>>
>
> Ummm... no you can't.   A purely negative query is not allowed with
> Lucene.
>
>      Erik
>
>
>
>>
>> Andrew
>>
>> -----Original Message-----
>> From: Erik Hatcher <erik@ehatchersolutions.com>
>> Sent: Jul 27, 2005 10:49 AM
>> To: java-user@lucene.apache.org
>> Subject: Re: Quick newbie question
>>
>>
>> On Jul 27, 2005, at 11:07 AM, Federico Tonioni wrote:
>>
>>
>>
>>> Hi all!
>>> I have just a simple question
>>>
>>> How can I retrieve all documents in an index by using QueryParser?
>>> I thought
>>>
>>> Query query = QueryParser.parse("*", "contents",
>>>                     new StandardAnalyzer());
>>>
>>> might be the solution, but it's not:)
>>>
>>>
>>
>> In general, you can't.  Many have used a technique of indexing a
>> single field with the same value for all documents and done a query
>> for field:value to find all documents.
>>
>>      Erik
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>> Andrew Boyd
>> Software Architect
>> Sun Certified J2EE Architect
>> B&B Technical Services Inc.
>> 205.422.2557
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 18:33:51 2005
Return-Path: <java-user-return-15591-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89386 invoked from network); 27 Jul 2005 18:33:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 18:33:50 -0000
Received: (qmail 64993 invoked by uid 500); 27 Jul 2005 18:33:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 64974 invoked by uid 500); 27 Jul 2005 18:33:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 64961 invoked by uid 99); 27 Jul 2005 18:33:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 11:33:43 -0700
X-ASF-Spam-Status: No, hits=0.2 required=10.0
	tests=HTML_90_100,HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [70.19.127.127] (HELO mail01.nyc-ofc.criticalmention.com) (70.19.127.127)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 11:33:36 -0700
Received: from michael (unknown [192.168.42.2])
	by mail01.nyc-ofc.criticalmention.com (Postfix) with ESMTP id 78EE8120B6
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 14:33:41 -0400 (EDT)
From: "Michael Celona" <mcelona@criticalmention.com>
To: <java-user@lucene.apache.org>
Subject: Hardware Question
Date: Wed, 27 Jul 2005 14:33:39 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_0725_01C592B8.2E6B0310"
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcWS2bVgFa2Sk0OQR32x//ZtGqpJng==
Message-Id: <20050727183341.78EE8120B6@mail01.nyc-ofc.criticalmention.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_0725_01C592B8.2E6B0310
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit

I am going over ways to increase overall search performance.  

 

Currently, I have a dual zeon with 2G of ram dedicated to java searching an
8G index on one 7200 rpm drive.

 

Which will give the greatest payoff?

 

1)       Going to 64bit server and giving more memory to java with faster
drives 

 

Or

 

2)       Staying with 32bit server but going with faster drives and
splitting the operating system from the index drive.

 

 

Basically, what are the performance improvements from separating the
operation system form the index drive(s).

 

 

Thanks,

Michael

 


------=_NextPart_000_0725_01C592B8.2E6B0310--



From java-user-return-15592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 18:42:31 2005
Return-Path: <java-user-return-15592-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 91527 invoked from network); 27 Jul 2005 18:42:30 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 18:42:30 -0000
Received: (qmail 76132 invoked by uid 500); 27 Jul 2005 18:42:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 76017 invoked by uid 500); 27 Jul 2005 18:42:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 76004 invoked by uid 99); 27 Jul 2005 18:42:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 11:42:23 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [147.83.41.105] (HELO mail.fib.upc.es) (147.83.41.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 11:42:17 -0700
Received: from [147.83.58.160] (tarragona.fib.upc.es [147.83.58.160])
	by mail.fib.upc.es (Postfix) with ESMTP id 47EFD1BB3C
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 20:42:16 +0200 (CEST)
Message-ID: <42E7D588.10001@fib.upc.edu>
Date: Wed, 27 Jul 2005 20:42:16 +0200
From: Daniel Cortes <dcortes@fib.upc.edu>
Organization: FIB
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: another problem with Multisearcher
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scaned-FIB: AntiVirus/AntiSpam en fib.upc.es
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I don't know why, but all this problems that I shared with you are 
produced for my use of multisearcher

Now I've obtained this, anyone had this problem sometimes?

java.lang.IndexOutOfBoundsException: Index: 43, Size: 12
        at java.util.ArrayList.RangeCheck(ArrayList.java:507)
        at java.util.ArrayList.get(ArrayList.java:324)
        at org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:155)
        at org.apache.lucene.index.FieldInfos.fieldName(FieldInfos.java:151)
        at 
org.apache.lucene.index.SegmentTermEnum.readTerm(SegmentTermEnum.java:149)
        at 
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:115)
        at 
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:143)
        at 
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:137)
        at 
org.apache.lucene.index.TermInfosReader.terms(TermInfosReader.java:196)
        at 
org.apache.lucene.index.SegmentReader.terms(SegmentReader.java:230)
        at org.apache.lucene.search.PrefixQuery.rewrite(PrefixQuery.java:39)
        at 
org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:243)
        at 
org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:166)
        at org.apache.lucene.search.Query.weight(Query.java:84)
        at 
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
        at 
org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:116)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:43)
        at org.apache.lucene.search.Searcher.search(Searcher.java:33)
        at org.apache.lucene.search.Searcher.search(Searcher.java:27)

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 18:52:19 2005
Return-Path: <java-user-return-15593-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 95950 invoked from network); 27 Jul 2005 18:52:19 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 18:52:19 -0000
Received: (qmail 95427 invoked by uid 500); 27 Jul 2005 18:52:12 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95377 invoked by uid 500); 27 Jul 2005 18:52:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95292 invoked by uid 99); 27 Jul 2005 18:52:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 11:52:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of clamprecht@gmail.com designates 64.233.170.197 as permitted sender)
Received: from [64.233.170.197] (HELO rproxy.gmail.com) (64.233.170.197)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 11:52:02 -0700
Received: by rproxy.gmail.com with SMTP id c51so384726rne
        for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 11:52:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=uaZp+wsnmJTXv/Fr4dzLvtHL9qI/UT9rMqVOISlbNSrD5RrRK6Upw5cpWq3GbQLsh4wsL/tDQOPY2FgcY+0U1Ft9WcfwXIgegrQ8Ycb5v6rKe1X+2MEKz+I8UmCmKs9M8b84wQmVCgQYET7l5MgKOkP860lrdOxRddtHKUBdr1Q=
Received: by 10.39.2.12 with SMTP id e12mr678501rni;
        Wed, 27 Jul 2005 11:52:07 -0700 (PDT)
Received: by 10.38.104.23 with HTTP; Wed, 27 Jul 2005 11:52:07 -0700 (PDT)
Message-ID: <88c6a67205072711525b62356@mail.gmail.com>
Date: Wed, 27 Jul 2005 13:52:07 -0500
From: Chris Lamprecht <clamprecht@gmail.com>
Reply-To: Chris Lamprecht <clamprecht@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Hardware Question
In-Reply-To: <20050727183341.78EE8120B6@mail01.nyc-ofc.criticalmention.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <20050727183341.78EE8120B6@mail01.nyc-ofc.criticalmention.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It depends on your usage.   When you search, does your code also
retrieve the docs (using Searcher.document(n), for instance).  If your
index is 8GB, part of that is the "indexed" part (searchable), and
part is just "stored" document fields.

It may be as simple as adding more RAM (try 4, 6, and 8GB) -- but not
for your java heap -- instead for the linux filesystem cache.

I suggest first adding some simple timing output to your search.  You
want to see how much time you are spending in the call to search(),
and then how much time you're spending pulling the Documents from the
index (and how much time you're spending in other parts of your search
application).   The call to search() is typically CPU-intensive, while
pulling Documents is I/O-bound.  And RAM is about 5 or 6 orders of
magnitude faster than disk I/O.

-chris

On 7/27/05, Michael Celona <mcelona@criticalmention.com> wrote:
> I am going over ways to increase overall search performance.
>=20
>=20
>=20
> Currently, I have a dual zeon with 2G of ram dedicated to java searching =
an
> 8G index on one 7200 rpm drive.
>=20
>=20
>=20
> Which will give the greatest payoff?
>=20
>=20
>=20
> 1)       Going to 64bit server and giving more memory to java with faster
> drives
>=20
>=20
>=20
> Or
>=20
>=20
>=20
> 2)       Staying with 32bit server but going with faster drives and
> splitting the operating system from the index drive.
>=20
>=20
>=20
>=20
>=20
> Basically, what are the performance improvements from separating the
> operation system form the index drive(s).
>=20
>=20
>=20
>=20
>=20
> Thanks,
>=20
> Michael
>=20
>=20
>=20
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 19:05:52 2005
Return-Path: <java-user-return-15594-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1003 invoked from network); 27 Jul 2005 19:05:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 19:05:51 -0000
Received: (qmail 30790 invoked by uid 500); 27 Jul 2005 19:05:39 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 30608 invoked by uid 500); 27 Jul 2005 19:05:38 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 30566 invoked by uid 99); 27 Jul 2005 19:05:38 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 12:05:37 -0700
X-ASF-Spam-Status: No, hits=1.8 required=10.0
	tests=RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.46] (HELO ylpvm15.prodigy.net) (207.115.57.46)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 12:05:27 -0700
Received: from pimout7-ext.prodigy.net (pimout7-int.prodigy.net [207.115.4.147])
	by ylpvm15.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j6RJ5raR003898
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 15:05:53 -0400
X-ORBL: [67.121.68.97]
Received: from polaris (adsl-67-121-68-97.dsl.snfc21.pacbell.net [67.121.68.97])
	by pimout7-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id j6RJ5Qt5072820;
	Wed, 27 Jul 2005 15:05:26 -0400
Message-Id: <200507271905.j6RJ5Qt5072820@pimout7-ext.prodigy.net>
Reply-To: <mbennett@ideaeng.com>
From: "Mark Bennett" <mbennett@ideaeng.com>
To: <java-user@lucene.apache.org>, "'Chris Lamprecht'" <clamprecht@gmail.com>
Subject: RE: Hardware Question
Date: Wed, 27 Jul 2005 12:05:37 -0700
Organization: New Idea Engineering, Inc.
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcWS3VO5509FW4H+SCiJc7nbCJsPRgAAMTSQ
In-Reply-To: <88c6a67205072711525b62356@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Also, non-hardware, have you considered turning off CFS?

Our client told us this sped up their system.

-----Original Message-----
From: Chris Lamprecht [mailto:clamprecht@gmail.com] 
Sent: Wednesday, July 27, 2005 11:52 AM
To: java-user@lucene.apache.org
Subject: Re: Hardware Question

It depends on your usage.   When you search, does your code also
retrieve the docs (using Searcher.document(n), for instance).  If your
index is 8GB, part of that is the "indexed" part (searchable), and
part is just "stored" document fields.

It may be as simple as adding more RAM (try 4, 6, and 8GB) -- but not
for your java heap -- instead for the linux filesystem cache.

I suggest first adding some simple timing output to your search.  You
want to see how much time you are spending in the call to search(),
and then how much time you're spending pulling the Documents from the
index (and how much time you're spending in other parts of your search
application).   The call to search() is typically CPU-intensive, while
pulling Documents is I/O-bound.  And RAM is about 5 or 6 orders of
magnitude faster than disk I/O.

-chris

On 7/27/05, Michael Celona <mcelona@criticalmention.com> wrote:
> I am going over ways to increase overall search performance.
> 
> 
> 
> Currently, I have a dual zeon with 2G of ram dedicated to java searching
an
> 8G index on one 7200 rpm drive.
> 
> 
> 
> Which will give the greatest payoff?
> 
> 
> 
> 1)       Going to 64bit server and giving more memory to java with faster
> drives
> 
> 
> 
> Or
> 
> 
> 
> 2)       Staying with 32bit server but going with faster drives and
> splitting the operating system from the index drive.
> 
> 
> 
> 
> 
> Basically, what are the performance improvements from separating the
> operation system form the index drive(s).
> 
> 
> 
> 
> 
> Thanks,
> 
> Michael
> 
> 
> 
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 19:47:01 2005
Return-Path: <java-user-return-15595-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 22429 invoked from network); 27 Jul 2005 19:47:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 19:47:00 -0000
Received: (qmail 13539 invoked by uid 500); 27 Jul 2005 19:46:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13518 invoked by uid 500); 27 Jul 2005 19:46:53 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13505 invoked by uid 99); 27 Jul 2005 19:46:53 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 12:46:53 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 195.92.195.173 is neither permitted nor denied by domain of chris.may@warwick.ac.uk)
Received: from [195.92.195.173] (HELO cmailg3.svr.pol.co.uk) (195.92.195.173)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 12:46:47 -0700
Received: from user-6549.l2.c1.dsl.pol.co.uk ([81.77.185.149] helo=[10.0.0.17])
	by cmailg3.svr.pol.co.uk with esmtp (Exim 4.41)
	id 1Dxrrf-0003E8-Gv
	for java-user@lucene.apache.org; Wed, 27 Jul 2005 20:46:51 +0100
Mime-Version: 1.0 (Apple Message framework v733)
Content-Transfer-Encoding: 7bit
Message-Id: <A7EFFB8D-C7DB-48A9-831F-A934ED012B28@warwick.ac.uk>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
To: java-user@lucene.apache.org
From: Chris May <chris.may@warwick.ac.uk>
Subject: Searching a URL with a PrefixQuery / Too Many Clauses (again...)
Date: Wed, 27 Jul 2005 20:47:01 +0100
X-Mailer: Apple Mail (2.733)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

First, apologies for what seems to be something of an FAQ.

However, I've not been able to find an answer either in LIA or in the  
relevant section of the FAQ (http://wiki.apache.org/jakarta-lucene/ 
LuceneFAQ#head-06fafb5d19e786a50fb3dfb8821a6af9f37aa831)

My setup is as follows: I have an index of a few hundred thousand web  
pages. I'd like the be able to construct queries that search for some  
arbitrary text within a specified URL. Kind of like google's syntax

searchterm +site:www.foo.com/some/section

So, I have the page title & content indexed, and the URL stored as a  
keywords field, and I imagined that I'd be able to construct a query  
something like this:

String[] fields = new String[]  
{DocumentFields.TITLE,DocumentFields.CONTENT};
Query searchTextQuery = MultiFieldQueryParser.parse 
(request.getSearchQuery(), fields, analyzer);
PrefixQuery urlPrefix = new PrefixQuery(new Term(DocumentFields.URL,  
request.getUrlPrefix()));
hits = searcher.search(searchTextQuery, new QueryFilter(urlPrefix));

However, as soon as the set of documents returned by the prefixquery  
is more than a thousand or so, I get a TooManyClausesException, as  
you might expect.

AFAICS the solutions suggested in the FAQ don't seem to apply here:  
I'm already using a Filter, and that's not helping (pace suggestion  
1), I don't think I can reduce the number of terms in the index, else  
my URLs wouldn't be unique any more, and increasing the number of  
clauses seems like a poor choice from a scalability point of view - I  
anticipate queries that could filter perhaps a hundred thousand  
documents or so.

I'm guessing that it might be possible to do something smart by  
splitting the URL up into multiple fields - for example, one for the  
host and one for the path, or even one for the host and one for host 
+path together - but I'm not clear on exactly how I'd use the two  
fields, and how they'd help. Can someone enlighten me?

Thanks in advance

Chris





---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 20:33:05 2005
Return-Path: <java-user-return-15596-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41025 invoked from network); 27 Jul 2005 20:33:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 20:33:05 -0000
Received: (qmail 26324 invoked by uid 500); 27 Jul 2005 20:32:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 26270 invoked by uid 500); 27 Jul 2005 20:32:46 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 26214 invoked by uid 99); 27 Jul 2005 20:32:46 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 13:32:46 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.203.212] (HELO sccmmhc92.asp.att.net) (204.127.203.212)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 13:32:35 -0700
Received: from traveler (12-219-116-136.client.mchsi.com[12.219.116.136])
          by sccmmhc92.asp.att.net (sccmmhc92) with SMTP
          id <20050727203240m9200g4ngoe>; Wed, 27 Jul 2005 20:32:40 +0000
From: "Tim Johnson" <timothy.w.johnson@saic.com>
To: <java-user@lucene.apache.org>
Subject: hit count within categories
Date: Wed, 27 Jul 2005 16:32:36 -0400
Message-ID: <001101c592ea$533ac450$6501a80a@traveler>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4024
Importance: Normal
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I'm working on a problem where I need to search over 160 million
documents.  I know Lucene can do this no sweat; my problem is that these
documents are grouped in more then 500 categories.  I need to get a
count of documents that match a given query, within each category.
There is no need for scoring the documents or even access the documents,
I just need the count.

Currently I'm using an index per category so I can access the total
number of hits quickly.  I've tried to use a custom HitsCollector object
and one large index to achieve the same thing but found that it was 3 to
4 times slower then iterating over 500 individual indexes.

Searches are sometimes taking more than 60 sec to run and can return
counts in the millions.

So my overall question is can this be done??  Any suggestions would be
helpful.

Thanks

Tim


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 20:33:13 2005
Return-Path: <java-user-return-15597-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41076 invoked from network); 27 Jul 2005 20:33:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 20:33:13 -0000
Received: (qmail 27413 invoked by uid 500); 27 Jul 2005 20:32:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 27377 invoked by uid 500); 27 Jul 2005 20:32:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 27322 invoked by uid 99); 27 Jul 2005 20:32:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 13:32:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [63.240.76.166] (HELO sccimhc92.asp.att.net) (63.240.76.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 13:32:43 -0700
Received: from [192.168.1.42] (rrcs-24-172-168-17.central.biz.rr.com[24.172.168.17])
          by sccimhc92.asp.att.net (sccimhc92) with SMTP
          id <20050727203248i9200r29rke>; Wed, 27 Jul 2005 20:32:48 +0000
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <FD86C966-09CE-41B5-A098-34A3A7550583@ehatchersolutions.com>
References: <BE3E7BC7F7553B4A9362D4192ECD308AB18838@neptune.int.mediasurface.com> <FD86C966-09CE-41B5-A098-34A3A7550583@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <62ABAF49-8E53-4AA9-899F-8DEB1AFE6EA1@ganyo.com>
Content-Transfer-Encoding: 7bit
From: Scott Ganyo <scott@ganyo.com>
Subject: Re: Quick newbie question
Date: Wed, 27 Jul 2005 15:32:51 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Actually, I believe the correct answer is an empty result set.

On Jul 27, 2005, at 12:14 PM, Erik Hatcher wrote:

> On Jul 27, 2005, at 12:40 PM, Peter Gelderbloem wrote:
>
>> I wonder what would happen
>>
>
> An exception :)
>
>
>>
>> Peter Gelderbloem -----Original Message-----
>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>> Sent: 27 July 2005 17:36
>> To: java-user@lucene.apache.org
>> Subject: Re: Quick newbie question
>>
>>
>> On Jul 27, 2005, at 12:22 PM, Andrew Boyd wrote:
>>
>>
>>
>>> Of course you can do the inverse of what Erik said.
>>> That is search for a term that you know is not in the index and use
>>> the NOT operator.
>>>
>>>
>>
>> Ummm... no you can't.   A purely negative query is not allowed with
>> Lucene.
>>
>>      Erik
>>
>>
>>
>>
>>>
>>> Andrew
>>>
>>> -----Original Message-----
>>> From: Erik Hatcher <erik@ehatchersolutions.com>
>>> Sent: Jul 27, 2005 10:49 AM
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Quick newbie question
>>>
>>>
>>> On Jul 27, 2005, at 11:07 AM, Federico Tonioni wrote:
>>>
>>>
>>>
>>>
>>>> Hi all!
>>>> I have just a simple question
>>>>
>>>> How can I retrieve all documents in an index by using QueryParser?
>>>> I thought
>>>>
>>>> Query query = QueryParser.parse("*", "contents",
>>>>                     new StandardAnalyzer());
>>>>
>>>> might be the solution, but it's not:)
>>>>
>>>>
>>>>
>>>
>>> In general, you can't.  Many have used a technique of indexing a
>>> single field with the same value for all documents and done a query
>>> for field:value to find all documents.
>>>
>>>      Erik
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>> Andrew Boyd
>>> Software Architect
>>> Sun Certified J2EE Architect
>>> B&B Technical Services Inc.
>>> 205.422.2557
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 20:34:24 2005
Return-Path: <java-user-return-15598-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 41531 invoked from network); 27 Jul 2005 20:34:24 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 20:34:24 -0000
Received: (qmail 32611 invoked by uid 500); 27 Jul 2005 20:34:17 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32591 invoked by uid 500); 27 Jul 2005 20:34:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32578 invoked by uid 99); 27 Jul 2005 20:34:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 13:34:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 13:34:09 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 4A6DC13E2006; Wed, 27 Jul 2005 16:34:10 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 75B4213E2007
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 16:33:43 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <A7EFFB8D-C7DB-48A9-831F-A934ED012B28@warwick.ac.uk>
References: <A7EFFB8D-C7DB-48A9-831F-A934ED012B28@warwick.ac.uk>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <557EFEDE-002B-41BA-B787-5DEB5940AF52@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Searching a URL with a PrefixQuery / Too Many Clauses (again...)
Date: Wed, 27 Jul 2005 16:33:44 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.8 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Could you give some examples of the types of PrefixQuery's you'd like  
to use?   Is it always at a granularity of domain and path?  Or are  
you wanting to do a prefix pieces of the domain and path?

     Erik

On Jul 27, 2005, at 3:47 PM, Chris May wrote:

> First, apologies for what seems to be something of an FAQ.
>
> However, I've not been able to find an answer either in LIA or in  
> the relevant section of the FAQ (http://wiki.apache.org/jakarta- 
> lucene/LuceneFAQ#head-06fafb5d19e786a50fb3dfb8821a6af9f37aa831)
>
> My setup is as follows: I have an index of a few hundred thousand  
> web pages. I'd like the be able to construct queries that search  
> for some arbitrary text within a specified URL. Kind of like  
> google's syntax
>
> searchterm +site:www.foo.com/some/section
>
> So, I have the page title & content indexed, and the URL stored as  
> a keywords field, and I imagined that I'd be able to construct a  
> query something like this:
>
> String[] fields = new String[]  
> {DocumentFields.TITLE,DocumentFields.CONTENT};
> Query searchTextQuery = MultiFieldQueryParser.parse 
> (request.getSearchQuery(), fields, analyzer);
> PrefixQuery urlPrefix = new PrefixQuery(new Term 
> (DocumentFields.URL, request.getUrlPrefix()));
> hits = searcher.search(searchTextQuery, new QueryFilter(urlPrefix));
>
> However, as soon as the set of documents returned by the  
> prefixquery is more than a thousand or so, I get a  
> TooManyClausesException, as you might expect.
>
> AFAICS the solutions suggested in the FAQ don't seem to apply here:  
> I'm already using a Filter, and that's not helping (pace suggestion  
> 1), I don't think I can reduce the number of terms in the index,  
> else my URLs wouldn't be unique any more, and increasing the number  
> of clauses seems like a poor choice from a scalability point of  
> view - I anticipate queries that could filter perhaps a hundred  
> thousand documents or so.
>
> I'm guessing that it might be possible to do something smart by  
> splitting the URL up into multiple fields - for example, one for  
> the host and one for the path, or even one for the host and one for  
> host+path together - but I'm not clear on exactly how I'd use the  
> two fields, and how they'd help. Can someone enlighten me?
>
> Thanks in advance
>
> Chris
>
>
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 20:40:54 2005
Return-Path: <java-user-return-15599-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45900 invoked from network); 27 Jul 2005 20:40:53 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 20:40:53 -0000
Received: (qmail 57202 invoked by uid 500); 27 Jul 2005 20:40:33 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57164 invoked by uid 500); 27 Jul 2005 20:40:33 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57133 invoked by uid 99); 27 Jul 2005 20:40:33 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 13:40:33 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 13:40:25 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 8EC9B13E2007; Wed, 27 Jul 2005 16:40:30 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 5372613E2006
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 16:39:14 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <62ABAF49-8E53-4AA9-899F-8DEB1AFE6EA1@ganyo.com>
References: <BE3E7BC7F7553B4A9362D4192ECD308AB18838@neptune.int.mediasurface.com> <FD86C966-09CE-41B5-A098-34A3A7550583@ehatchersolutions.com> <62ABAF49-8E53-4AA9-899F-8DEB1AFE6EA1@ganyo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <6B7B5CA4-4F60-4158-BAF2-376B67CDDC92@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Quick newbie question
Date: Wed, 27 Jul 2005 16:39:14 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-2.8 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

On Jul 27, 2005, at 4:32 PM, Scott Ganyo wrote:
> Actually, I believe the correct answer is an empty result set.

Oops.... I really screwed that one up!  :O

You're absolutely right, my apologies.

     Erik


>
> On Jul 27, 2005, at 12:14 PM, Erik Hatcher wrote:
>
>
>> On Jul 27, 2005, at 12:40 PM, Peter Gelderbloem wrote:
>>
>>
>>> I wonder what would happen
>>>
>>>
>>
>> An exception :)
>>
>>
>>
>>>
>>> Peter Gelderbloem -----Original Message-----
>>> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
>>> Sent: 27 July 2005 17:36
>>> To: java-user@lucene.apache.org
>>> Subject: Re: Quick newbie question
>>>
>>>
>>> On Jul 27, 2005, at 12:22 PM, Andrew Boyd wrote:
>>>
>>>
>>>
>>>
>>>> Of course you can do the inverse of what Erik said.
>>>> That is search for a term that you know is not in the index and use
>>>> the NOT operator.
>>>>
>>>>
>>>>
>>>
>>> Ummm... no you can't.   A purely negative query is not allowed with
>>> Lucene.
>>>
>>>      Erik
>>>
>>>
>>>
>>>
>>>
>>>>
>>>> Andrew
>>>>
>>>> -----Original Message-----
>>>> From: Erik Hatcher <erik@ehatchersolutions.com>
>>>> Sent: Jul 27, 2005 10:49 AM
>>>> To: java-user@lucene.apache.org
>>>> Subject: Re: Quick newbie question
>>>>
>>>>
>>>> On Jul 27, 2005, at 11:07 AM, Federico Tonioni wrote:
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>> Hi all!
>>>>> I have just a simple question
>>>>>
>>>>> How can I retrieve all documents in an index by using QueryParser?
>>>>> I thought
>>>>>
>>>>> Query query = QueryParser.parse("*", "contents",
>>>>>                     new StandardAnalyzer());
>>>>>
>>>>> might be the solution, but it's not:)
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>> In general, you can't.  Many have used a technique of indexing a
>>>> single field with the same value for all documents and done a query
>>>> for field:value to find all documents.
>>>>
>>>>      Erik
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>> Andrew Boyd
>>>> Software Architect
>>>> Sun Certified J2EE Architect
>>>> B&B Technical Services Inc.
>>>> 205.422.2557
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 20:41:44 2005
Return-Path: <java-user-return-15600-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 46287 invoked from network); 27 Jul 2005 20:41:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 20:41:43 -0000
Received: (qmail 63304 invoked by uid 500); 27 Jul 2005 20:41:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63281 invoked by uid 500); 27 Jul 2005 20:41:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63268 invoked by uid 99); 27 Jul 2005 20:41:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 13:41:35 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.11.32] (HELO smtp001.mail.ukl.yahoo.com) (217.12.11.32)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Jul 2005 13:41:27 -0700
Received: (qmail 96457 invoked from network); 27 Jul 2005 20:41:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:Message-ID:Date:From:User-Agent:X-Accept-Language:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=tsCKskypc3QOiKhweGYAAy9LejtSFCDNqrRs+FXPVsToCx3xiZDjpfD/3Xc6HjPGpTurWdM5/p1aH8m8LlUjm2YlFcVHKQGsejlKgn8oDIF2kUJ+cfTat9PZI4e6esPfudNeGKZXRqqdhLr2cciVA7iKYopc89l0DuIt5gVT2T4=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp001.mail.ukl.yahoo.com with SMTP; 27 Jul 2005 20:41:31 -0000
Message-ID: <42E7F17B.90007@yahoo.co.uk>
Date: Wed, 27 Jul 2005 21:41:31 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 1.0.5 (Windows/20050711)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: hit count within categories
References: <001101c592ea$533ac450$6501a80a@traveler>
In-Reply-To: <001101c592ea$533ac450$6501a80a@traveler>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I posted the code I use to do this (based on a single index) here:

http://marc.theaimsgroup.com/?l=lucene-dev&m=111044178212335&w=2

Cheers
Mark


	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with voicemail http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 20:45:31 2005
Return-Path: <java-user-return-15601-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 47654 invoked from network); 27 Jul 2005 20:45:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 20:45:31 -0000
Received: (qmail 74801 invoked by uid 500); 27 Jul 2005 20:45:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74776 invoked by uid 500); 27 Jul 2005 20:45:23 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74763 invoked by uid 99); 27 Jul 2005 20:45:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 13:45:23 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of alex@gossamer-threads.com designates 209.139.239.21 as permitted sender)
Received: from [209.139.239.21] (HELO gossamer-threads.com) (209.139.239.21)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 13:45:15 -0700
Received: (qmail 6769 invoked from network); 27 Jul 2005 20:45:21 -0000
X-AntiVirus: Clean
Received: from unknown (HELO ?192.168.1.98?) (alex@gossamer-threads.com@216.18.5.209)
  by gossamer.nmsrv.com with (RC4-MD5 encrypted) SMTP; 27 Jul 2005 20:45:21 -0000
Date: Wed, 27 Jul 2005 13:43:57 -0700
From: Alex Krohn <alex@gossamer-threads.com>
To: java-user@lucene.apache.org
Subject: Re: searchable mailing list archive
In-Reply-To: <6e3ae631050726230649e6f76f@mail.gmail.com>
References: <20050726193841.B0A7.ALEX@gossamer-threads.com> <6e3ae631050726230649e6f76f@mail.gmail.com>
Message-Id: <20050727133210.1D1F.ALEX@gossamer-threads.com>
MIME-Version: 1.0
Content-Type: text/plain; charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Becky! ver. 2.21.02 [en]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

> > I've added the Lucene mailing lists to our searchable archive found
> > here:
> > 
> >         http://www.gossamer-threads.com/lists/lucene/
> > 
> > The search is, of course, powered by Lucene. =) I hope you find it
> > useful, and thanks for the great work! If you have any questions or
> > problems with it, please feel free to email me off list.
>
> Very nice!
> 
> Can I know how did you retrieve and store the mails?

Thanks. The mail is stored in MySQL, and managed by our own forum
software, Gossamer Forum. We have a separate lucene daemon that handles
all inserts, updates, deletes and searches.

Cheers,

Alex

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 20:54:50 2005
Return-Path: <java-user-return-15602-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52132 invoked from network); 27 Jul 2005 20:54:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 20:54:49 -0000
Received: (qmail 13573 invoked by uid 500); 27 Jul 2005 20:54:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 13547 invoked by uid 500); 27 Jul 2005 20:54:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 13532 invoked by uid 99); 27 Jul 2005 20:54:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 13:54:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [70.19.127.127] (HELO mail01.nyc-ofc.criticalmention.com) (70.19.127.127)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 13:54:32 -0700
Received: from michael (unknown [192.168.42.2])
	by mail01.nyc-ofc.criticalmention.com (Postfix) with ESMTP id 0711D120B6
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 16:54:34 -0400 (EDT)
From: "Michael Celona" <michael@nyclabs.com>
To: <java-user@lucene.apache.org>
Subject: RE: Hardware Question
Date: Wed, 27 Jul 2005 16:54:32 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <200507271905.j6RJ5Qt5072820@pimout7-ext.prodigy.net>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcWS3VO5509FW4H+SCiJc7nbCJsPRgAAMTSQAANfxkA=
Message-Id: <20050727205434.0711D120B6@mail01.nyc-ofc.criticalmention.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


I am retrieving the documents using "hits.doc(i)".  I put in some timing
output.  Here are the results:

Before Search 1122497423976
After Search  1122497426795
After Build   1122497426839 (after I retrieve 10 results from hits )

What is CFS?

Thanks,
Michael
 

-----Original Message-----
From: Mark Bennett [mailto:mbennett@ideaeng.com] 
Sent: Wednesday, July 27, 2005 3:06 PM
To: java-user@lucene.apache.org; 'Chris Lamprecht'
Subject: RE: Hardware Question

Also, non-hardware, have you considered turning off CFS?

Our client told us this sped up their system.

-----Original Message-----
From: Chris Lamprecht [mailto:clamprecht@gmail.com] 
Sent: Wednesday, July 27, 2005 11:52 AM
To: java-user@lucene.apache.org
Subject: Re: Hardware Question

It depends on your usage.   When you search, does your code also
retrieve the docs (using Searcher.document(n), for instance).  If your
index is 8GB, part of that is the "indexed" part (searchable), and
part is just "stored" document fields.

It may be as simple as adding more RAM (try 4, 6, and 8GB) -- but not
for your java heap -- instead for the linux filesystem cache.

I suggest first adding some simple timing output to your search.  You
want to see how much time you are spending in the call to search(),
and then how much time you're spending pulling the Documents from the
index (and how much time you're spending in other parts of your search
application).   The call to search() is typically CPU-intensive, while
pulling Documents is I/O-bound.  And RAM is about 5 or 6 orders of
magnitude faster than disk I/O.

-chris

On 7/27/05, Michael Celona <mcelona@criticalmention.com> wrote:
> I am going over ways to increase overall search performance.
> 
> 
> 
> Currently, I have a dual zeon with 2G of ram dedicated to java searching
an
> 8G index on one 7200 rpm drive.
> 
> 
> 
> Which will give the greatest payoff?
> 
> 
> 
> 1)       Going to 64bit server and giving more memory to java with faster
> drives
> 
> 
> 
> Or
> 
> 
> 
> 2)       Staying with 32bit server but going with faster drives and
> splitting the operating system from the index drive.
> 
> 
> 
> 
> 
> Basically, what are the performance improvements from separating the
> operation system form the index drive(s).
> 
> 
> 
> 
> 
> Thanks,
> 
> Michael
> 
> 
> 
> 
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 20:56:26 2005
Return-Path: <java-user-return-15603-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52474 invoked from network); 27 Jul 2005 20:56:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 20:56:25 -0000
Received: (qmail 17519 invoked by uid 500); 27 Jul 2005 20:56:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17500 invoked by uid 500); 27 Jul 2005 20:56:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17487 invoked by uid 99); 27 Jul 2005 20:56:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 13:56:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: 195.92.195.172 is neither permitted nor denied by domain of chris.may@warwick.ac.uk)
Received: from [195.92.195.172] (HELO cmailg2.svr.pol.co.uk) (195.92.195.172)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 13:56:09 -0700
Received: from user-6549.l2.c1.dsl.pol.co.uk ([81.77.185.149] helo=[10.0.0.17])
	by cmailg2.svr.pol.co.uk with esmtp (Exim 4.41)
	id 1Dxswn-0000Qp-QD
	for java-user@lucene.apache.org; Wed, 27 Jul 2005 21:56:13 +0100
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <557EFEDE-002B-41BA-B787-5DEB5940AF52@ehatchersolutions.com>
References: <A7EFFB8D-C7DB-48A9-831F-A934ED012B28@warwick.ac.uk> <557EFEDE-002B-41BA-B787-5DEB5940AF52@ehatchersolutions.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <9D54CF77-90DD-4F5E-B0CF-40FC921F5E4B@warwick.ac.uk>
Content-Transfer-Encoding: 7bit
From: Chris May <chris.may@warwick.ac.uk>
Subject: Re: Searching a URL with a PrefixQuery / Too Many Clauses (again...)
Date: Wed, 27 Jul 2005 21:56:24 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Always domain + part of a path e.g.

url:http://blogs.warwick.ac.uk/chrismay/*

or

url:http://www2.warwick.ac.uk/fac/soc/law/ug/prospective/degrees/ 
modules/commonlaw/*

or

url:http://www2.warwick.ac.uk/services/its/*


... and so on. Part of the problem is that we may need to go an  
arbitrary number of levels down the path to get an acceptably small  
set of documents to start from - we couldn't impose a rule that said  
something like 'specify the first 2 directories on the path' (c.f my  
second example). We wouldn't need to query for the same path over  
different domains though (e.g. url:*.warwick.ac.uk/about/* )

thanks

Chris




On 27 Jul 2005, at 21:33, Erik Hatcher wrote:

> Could you give some examples of the types of PrefixQuery's you'd  
> like to use?   Is it always at a granularity of domain and path?   
> Or are you wanting to do a prefix pieces of the domain and path?
>
>     Erik
>
> On Jul 27, 2005, at 3:47 PM, Chris May wrote:
>
>
>> First, apologies for what seems to be something of an FAQ.
>>
>> However, I've not been able to find an answer either in LIA or in  
>> the relevant section of the FAQ (http://wiki.apache.org/jakarta- 
>> lucene/LuceneFAQ#head-06fafb5d19e786a50fb3dfb8821a6af9f37aa831)
>>
>> My setup is as follows: I have an index of a few hundred thousand  
>> web pages. I'd like the be able to construct queries that search  
>> for some arbitrary text within a specified URL. Kind of like  
>> google's syntax
>>
>> searchterm +site:www.foo.com/some/section
>>
>> So, I have the page title & content indexed, and the URL stored as  
>> a keywords field, and I imagined that I'd be able to construct a  
>> query something like this:
>>
>> String[] fields = new String[]  
>> {DocumentFields.TITLE,DocumentFields.CONTENT};
>> Query searchTextQuery = MultiFieldQueryParser.parse 
>> (request.getSearchQuery(), fields, analyzer);
>> PrefixQuery urlPrefix = new PrefixQuery(new Term 
>> (DocumentFields.URL, request.getUrlPrefix()));
>> hits = searcher.search(searchTextQuery, new QueryFilter(urlPrefix));
>>
>> However, as soon as the set of documents returned by the  
>> prefixquery is more than a thousand or so, I get a  
>> TooManyClausesException, as you might expect.
>>
>> AFAICS the solutions suggested in the FAQ don't seem to apply  
>> here: I'm already using a Filter, and that's not helping (pace  
>> suggestion 1), I don't think I can reduce the number of terms in  
>> the index, else my URLs wouldn't be unique any more, and  
>> increasing the number of clauses seems like a poor choice from a  
>> scalability point of view - I anticipate queries that could filter  
>> perhaps a hundred thousand documents or so.
>>
>> I'm guessing that it might be possible to do something smart by  
>> splitting the URL up into multiple fields - for example, one for  
>> the host and one for the path, or even one for the host and one  
>> for host+path together - but I'm not clear on exactly how I'd use  
>> the two fields, and how they'd help. Can someone enlighten me?
>>
>> Thanks in advance
>>
>> Chris
>>
>>
>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 22:13:14 2005
Return-Path: <java-user-return-15604-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 79727 invoked from network); 27 Jul 2005 22:13:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 22:13:14 -0000
Received: (qmail 48515 invoked by uid 500); 27 Jul 2005 22:13:01 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 48460 invoked by uid 500); 27 Jul 2005 22:13:01 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 48297 invoked by uid 99); 27 Jul 2005 22:13:00 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 15:13:00 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.77] (HELO web31115.mail.mud.yahoo.com) (68.142.201.77)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Jul 2005 15:12:52 -0700
Received: (qmail 96055 invoked by uid 60001); 27 Jul 2005 22:12:56 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=U94ZehswPnXGHMsm4up1QX7JD08t8iN0/8Ejtk4uf/EDDJxmmDe9DdLlRUB8N0rNvOhfXYfrBFQaV2LtX5mmma1t4xHpbAlOGDfvAQkAlvqfelEGII7/UZRxc5unPMElLTp1siwEzAh8gBF1qWHsczdbR17AcVJRUTiR6dFxms0=  ;
Message-ID: <20050727221256.96053.qmail@web31115.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31115.mail.mud.yahoo.com via HTTP; Wed, 27 Jul 2005 15:12:56 PDT
Date: Wed, 27 Jul 2005 15:12:56 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: another problem with Multisearcher
To: java-user@lucene.apache.org
In-Reply-To: <42E7D588.10001@fib.upc.edu>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Some changes were made to MultiSearcher version that is in the SVN
repository.  Which version of Lucene are you using, and can you provide
an index and a query that cause this exception?

Otis


--- Daniel Cortes <dcortes@fib.upc.edu> wrote:

> I don't know why, but all this problems that I shared with you are 
> produced for my use of multisearcher
> 
> Now I've obtained this, anyone had this problem sometimes?
> 
> java.lang.IndexOutOfBoundsException: Index: 43, Size: 12
>         at java.util.ArrayList.RangeCheck(ArrayList.java:507)
>         at java.util.ArrayList.get(ArrayList.java:324)
>         at
> org.apache.lucene.index.FieldInfos.fieldInfo(FieldInfos.java:155)
>         at
> org.apache.lucene.index.FieldInfos.fieldName(FieldInfos.java:151)
>         at 
>
org.apache.lucene.index.SegmentTermEnum.readTerm(SegmentTermEnum.java:149)
>         at 
>
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:115)
>         at 
>
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:143)
>         at 
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:137)
>         at 
>
org.apache.lucene.index.TermInfosReader.terms(TermInfosReader.java:196)
>         at 
> org.apache.lucene.index.SegmentReader.terms(SegmentReader.java:230)
>         at
> org.apache.lucene.search.PrefixQuery.rewrite(PrefixQuery.java:39)
>         at 
> org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:243)
>         at 
>
org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:166)
>         at org.apache.lucene.search.Query.weight(Query.java:84)
>         at 
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
>         at 
> org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:116)
>         at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>         at org.apache.lucene.search.Hits.<init>(Hits.java:43)
>         at org.apache.lucene.search.Searcher.search(Searcher.java:33)
>         at org.apache.lucene.search.Searcher.search(Searcher.java:27)
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 22:17:07 2005
Return-Path: <java-user-return-15605-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 80904 invoked from network); 27 Jul 2005 22:17:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 22:17:06 -0000
Received: (qmail 54110 invoked by uid 500); 27 Jul 2005 22:17:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 54081 invoked by uid 500); 27 Jul 2005 22:16:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 54063 invoked by uid 99); 27 Jul 2005 22:16:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 15:16:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.35] (HELO web31102.mail.mud.yahoo.com) (68.142.200.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Jul 2005 15:16:51 -0700
Received: (qmail 7440 invoked by uid 60001); 27 Jul 2005 22:16:55 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=M0earv9K/jNEPi4KyfhNuzteTrcWr1W8FesINcnGM4KGhBYdUQgt5xCYUp0aNxvLFAaJPNs9FXnzP2nkcd+Ts+I2aoj8HM6KFVd9IOaE4vKOE+J4G0lDiD5jBNsOu59mrO/FZGE+IUgnZbE/Mek6jo8dVu0yWotAXcUSBzg7QYk=  ;
Message-ID: <20050727221655.7438.qmail@web31102.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31102.mail.mud.yahoo.com via HTTP; Wed, 27 Jul 2005 15:16:55 PDT
Date: Wed, 27 Jul 2005 15:16:55 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Derby + Lucene
To: java-user@lucene.apache.org
In-Reply-To: <1cbd6f83050727033853446f93@mail.gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--- Mag Gam <magawake@gmail.com> wrote:
> Anyone here have any luck with integration of Apache Derby and
> Lucene?

I believe Mark Harwood has done some experiments with Lucene and
Derby... here: 
http://www.google.com/search?q=Lucene+derby+harwood

Otis

____________________________________________________________________
Simpy -- simpy.com -- tags, social bookmarks, personal search engine

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 22:20:35 2005
Return-Path: <java-user-return-15606-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 82615 invoked from network); 27 Jul 2005 22:20:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 22:20:34 -0000
Received: (qmail 61377 invoked by uid 500); 27 Jul 2005 22:20:28 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 61337 invoked by uid 500); 27 Jul 2005 22:20:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 61324 invoked by uid 99); 27 Jul 2005 22:20:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 15:20:28 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.43] (HELO web31110.mail.mud.yahoo.com) (68.142.200.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Jul 2005 15:20:20 -0700
Received: (qmail 25869 invoked by uid 60001); 27 Jul 2005 22:20:25 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=L5Rme0+uEJvgto6gKPP7QPE0y9g09jdvtf6ktyE6mxJfzwkRFcpZBjBfETHCkP89e4n5Ho334mgZLgNUCn/uk4pR9i0P0KVKSGZ4WKTuNNjtJINxpvSV6qLQdwhXfPc86lYDRZ8GSasUeVzUFwPTcm3LVju1PWntRsnahtb+Zrs=  ;
Message-ID: <20050727222025.25867.qmail@web31110.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31110.mail.mud.yahoo.com via HTTP; Wed, 27 Jul 2005 15:20:25 PDT
Date: Wed, 27 Jul 2005 15:20:25 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: Hardware Question
To: java-user@lucene.apache.org, mbennett@ideaeng.com
In-Reply-To: <200507271905.j6RJ5Qt5072820@pimout7-ext.prodigy.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What's CFS?  Cryptographic File System?  I'm not being sarcastic here,
I'm really curious about what you referring to.

Otis

--- Mark Bennett <mbennett@ideaeng.com> wrote:

> Also, non-hardware, have you considered turning off CFS?
> 
> Our client told us this sped up their system.
> 
> -----Original Message-----
> From: Chris Lamprecht [mailto:clamprecht@gmail.com] 
> Sent: Wednesday, July 27, 2005 11:52 AM
> To: java-user@lucene.apache.org
> Subject: Re: Hardware Question
> 
> It depends on your usage.   When you search, does your code also
> retrieve the docs (using Searcher.document(n), for instance).  If
> your
> index is 8GB, part of that is the "indexed" part (searchable), and
> part is just "stored" document fields.
> 
> It may be as simple as adding more RAM (try 4, 6, and 8GB) -- but not
> for your java heap -- instead for the linux filesystem cache.
> 
> I suggest first adding some simple timing output to your search.  You
> want to see how much time you are spending in the call to search(),
> and then how much time you're spending pulling the Documents from the
> index (and how much time you're spending in other parts of your
> search
> application).   The call to search() is typically CPU-intensive,
> while
> pulling Documents is I/O-bound.  And RAM is about 5 or 6 orders of
> magnitude faster than disk I/O.
> 
> -chris
> 
> On 7/27/05, Michael Celona <mcelona@criticalmention.com> wrote:
> > I am going over ways to increase overall search performance.
> > 
> > 
> > 
> > Currently, I have a dual zeon with 2G of ram dedicated to java
> searching
> an
> > 8G index on one 7200 rpm drive.
> > 
> > 
> > 
> > Which will give the greatest payoff?
> > 
> > 
> > 
> > 1)       Going to 64bit server and giving more memory to java with
> faster
> > drives
> > 
> > 
> > 
> > Or
> > 
> > 
> > 
> > 2)       Staying with 32bit server but going with faster drives and
> > splitting the operating system from the index drive.
> > 
> > 
> > 
> > 
> > 
> > Basically, what are the performance improvements from separating
> the
> > operation system form the index drive(s).
> > 
> > 
> > 
> > 
> > 
> > Thanks,
> > 
> > Michael
> > 
> > 
> > 
> > 
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 22:24:41 2005
Return-Path: <java-user-return-15607-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 83231 invoked from network); 27 Jul 2005 22:24:41 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 22:24:41 -0000
Received: (qmail 68981 invoked by uid 500); 27 Jul 2005 22:24:35 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 68958 invoked by uid 500); 27 Jul 2005 22:24:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 68945 invoked by uid 99); 27 Jul 2005 22:24:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 15:24:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.76] (HELO web31114.mail.mud.yahoo.com) (68.142.201.76)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Jul 2005 15:24:27 -0700
Received: (qmail 30532 invoked by uid 60001); 27 Jul 2005 22:24:32 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=TIKXNKn0WsM3og12L9bSkU44ovHVY7+OTr6JTYbul8xKU8pEKc5xUK44KvXVM5TILTGlg0SSjqk+naYdfrdzmjU5NObpy/ZL+bu0yYQ3v6SjPFdLocIq0EqpzDifRJXPvKTC2E/Mjtdo/bY+2MKIQ1fJ1FOOem8fAzEiPXAhWyo=  ;
Message-ID: <20050727222432.30530.qmail@web31114.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31114.mail.mud.yahoo.com via HTTP; Wed, 27 Jul 2005 15:24:32 PDT
Date: Wed, 27 Jul 2005 15:24:32 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Hardware Question
To: java-user@lucene.apache.org
In-Reply-To: <20050727183341.78EE8120B6@mail01.nyc-ofc.criticalmention.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Option 1) will most likely give you more, but there are a number of
other things you could do before going for monster hardware.  Splitting
the index, more than 1 disk, ParallelIndexReader, the patch that splits
index files into a number of data files, etc.

Otis


--- Michael Celona <mcelona@criticalmention.com> wrote:

> I am going over ways to increase overall search performance.  
> 
>  
> 
> Currently, I have a dual zeon with 2G of ram dedicated to java
> searching an
> 8G index on one 7200 rpm drive.
> 
>  
> 
> Which will give the greatest payoff?
> 
>  
> 
> 1)       Going to 64bit server and giving more memory to java with
> faster
> drives 
> 
>  
> 
> Or
> 
>  
> 
> 2)       Staying with 32bit server but going with faster drives and
> splitting the operating system from the index drive.
> 
>  
> 
>  
> 
> Basically, what are the performance improvements from separating the
> operation system form the index drive(s).
> 
>  
> 
>  
> 
> Thanks,
> 
> Michael
> 
>  
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 22:37:16 2005
Return-Path: <java-user-return-15608-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86836 invoked from network); 27 Jul 2005 22:37:16 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 22:37:16 -0000
Received: (qmail 85609 invoked by uid 500); 27 Jul 2005 22:37:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 85424 invoked by uid 500); 27 Jul 2005 22:37:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 85411 invoked by uid 99); 27 Jul 2005 22:37:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 15:37:09 -0700
X-ASF-Spam-Status: No, hits=3.6 required=10.0
	tests=RCVD_IN_BL_SPAMCOP_NET,RCVD_IN_NJABL_DUL,RCVD_IN_SORBS_DUL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [207.115.57.43] (HELO ylpvm12.prodigy.net) (207.115.57.43)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 15:37:02 -0700
Received: from pimout5-ext.prodigy.net (pimout5-int.prodigy.net [207.115.4.21])
	by ylpvm12.prodigy.net (8.12.10 outbound/8.12.10) with ESMTP id j6RMavck023734
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 18:36:57 -0400
X-ORBL: [67.121.68.97]
Received: from polaris (adsl-67-121-68-97.dsl.snfc21.pacbell.net [67.121.68.97])
	by pimout5-ext.prodigy.net (8.13.4 outbound domainkey aix/8.13.4) with ESMTP id j6RMavV9506812;
	Wed, 27 Jul 2005 18:37:02 -0400
Message-Id: <200507272237.j6RMavV9506812@pimout5-ext.prodigy.net>
Reply-To: <mbennett@ideaeng.com>
From: "Mark Bennett" <mbennett@ideaeng.com>
To: "'Otis Gospodnetic'" <otis_gospodnetic@yahoo.com>,
        <java-user@lucene.apache.org>
Subject: RE: Hardware Question
Date: Wed, 27 Jul 2005 15:37:09 -0700
Organization: New Idea Engineering, Inc.
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcWS+lN7whGavOgVSwaH/twYmVqbcwAAKXZA
In-Reply-To: <20050727222025.25867.qmail@web31110.mail.mud.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

My apologies Otis, I should have spelled that out.

I'm going to take a stab at answering this.  But please, others on the list,
chime in with corrections / clarifications.

CFS = "compact file system" or "consolidate file system" or something like
that.

Essentially, each Lucene index segment is actually a set of files; files for
a segment have a common file name and then a set of extensions; OR a segment
is just stored as ONE file, with a .cfs extension.

CFS means that the multiple files for that segment have been joined together
into one physical file; inside there is actually the original set of logical
files, but on your disk it's just one file and one set of file handles to
open that segmgent.

If you do a DIR / ls on your indexes, if you see a bunch of .cfs files, then
you're using CFS.  The default for the past version or so is that you DO get
CFS files unless you say otherwise.

I think the idea is that, generally, having fewer physical files is better,
in terms of file handles, etc.  But for search performance, I'm not sure if
that's always the best case; certainly for indexing it takes more work to
create CFS files.


-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Wednesday, July 27, 2005 3:20 PM
To: java-user@lucene.apache.org; mbennett@ideaeng.com
Subject: RE: Hardware Question

What's CFS?  Cryptographic File System?  I'm not being sarcastic here,
I'm really curious about what you referring to.

Otis

--- Mark Bennett <mbennett@ideaeng.com> wrote:

> Also, non-hardware, have you considered turning off CFS?
> 
> Our client told us this sped up their system.
> 
> -----Original Message-----
> From: Chris Lamprecht [mailto:clamprecht@gmail.com] 
> Sent: Wednesday, July 27, 2005 11:52 AM
> To: java-user@lucene.apache.org
> Subject: Re: Hardware Question
> 
> It depends on your usage.   When you search, does your code also
> retrieve the docs (using Searcher.document(n), for instance).  If
> your
> index is 8GB, part of that is the "indexed" part (searchable), and
> part is just "stored" document fields.
> 
> It may be as simple as adding more RAM (try 4, 6, and 8GB) -- but not
> for your java heap -- instead for the linux filesystem cache.
> 
> I suggest first adding some simple timing output to your search.  You
> want to see how much time you are spending in the call to search(),
> and then how much time you're spending pulling the Documents from the
> index (and how much time you're spending in other parts of your
> search
> application).   The call to search() is typically CPU-intensive,
> while
> pulling Documents is I/O-bound.  And RAM is about 5 or 6 orders of
> magnitude faster than disk I/O.
> 
> -chris
> 
> On 7/27/05, Michael Celona <mcelona@criticalmention.com> wrote:
> > I am going over ways to increase overall search performance.
> > 
> > 
> > 
> > Currently, I have a dual zeon with 2G of ram dedicated to java
> searching
> an
> > 8G index on one 7200 rpm drive.
> > 
> > 
> > 
> > Which will give the greatest payoff?
> > 
> > 
> > 
> > 1)       Going to 64bit server and giving more memory to java with
> faster
> > drives
> > 
> > 
> > 
> > Or
> > 
> > 
> > 
> > 2)       Staying with 32bit server but going with faster drives and
> > splitting the operating system from the index drive.
> > 
> > 
> > 
> > 
> > 
> > Basically, what are the performance improvements from separating
> the
> > operation system form the index drive(s).
> > 
> > 
> > 
> > 
> > 
> > Thanks,
> > 
> > Michael
> > 
> > 
> > 
> > 
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 22:42:35 2005
Return-Path: <java-user-return-15609-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88395 invoked from network); 27 Jul 2005 22:42:35 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 22:42:35 -0000
Received: (qmail 94000 invoked by uid 500); 27 Jul 2005 22:42:29 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93977 invoked by uid 500); 27 Jul 2005 22:42:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93964 invoked by uid 99); 27 Jul 2005 22:42:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 15:42:28 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.11.33] (HELO smtp002.mail.ukl.yahoo.com) (217.12.11.33)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Jul 2005 15:42:21 -0700
Received: (qmail 56463 invoked from network); 27 Jul 2005 22:42:25 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:Message-ID:Date:From:User-Agent:X-Accept-Language:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=Hqoy4TrCP+mTrczZtItiYO66dmnXXyqBX+bjkjoGfgN0hmgvVFZEqCcBKayZDidWjAQ18QL5+54Bm3B6+VCdGFNwKrK7kps8G76m5ZxP/DNN4e5ni3CZ7TuXAChR+PkcVtBDlcC+644qlJUyAUN+1jPW3w89ziJaH0wZ7hWZm+4=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp002.mail.ukl.yahoo.com with SMTP; 27 Jul 2005 22:42:25 -0000
Message-ID: <42E80DD2.8050707@yahoo.co.uk>
Date: Wed, 27 Jul 2005 23:42:26 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 1.0.5 (Windows/20050711)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Derby + Lucene
References: <20050727221655.7438.qmail@web31102.mail.mud.yahoo.com>
In-Reply-To: <20050727221655.7438.qmail@web31102.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks for the reminder, Otis.

I haven't done any more on this since this post:

http://archives.devshed.com/a/ml/200501-114586/lucene-query-sql-kind

The scalability concerns with the user-defined-functions I created 
prevented me from taking it any further. A proper solution would need a 
tighter (ie more complex) integration with Derby internals.
If you have some small-scale requirements and are still interested in 
this UDF-based approach let me know and I can mail you the experimental 
code I wrote.

Cheers
Mark


		
___________________________________________________________ 
How much free photo storage do you get? Store your holiday 
snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 22:42:47 2005
Return-Path: <java-user-return-15610-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88483 invoked from network); 27 Jul 2005 22:42:46 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 22:42:46 -0000
Received: (qmail 95242 invoked by uid 500); 27 Jul 2005 22:42:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95217 invoked by uid 500); 27 Jul 2005 22:42:40 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95204 invoked by uid 99); 27 Jul 2005 22:42:40 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 15:42:40 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [64.78.21.10] (HELO mis011.exch011.intermedia.net) (64.78.21.10)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 15:42:32 -0700
Received: from ehost011-1.exch011.intermedia.net ([64.78.21.3]) by mis011.exch011.intermedia.net with Microsoft SMTPSVC(6.0.3790.1830);
	 Wed, 27 Jul 2005 15:42:38 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: Regex for legal user search input
Date: Wed, 27 Jul 2005 15:42:37 -0700
Message-ID: <41EE526EC2D3C74286415780D3BA9F870D2E19C7@ehost011-1.exch011.intermedia.net>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Regex for legal user search input
Thread-Index: AcWS7adwB6tabMWuRuqfSP/40BEPNQAD3dQA
From: "Derek Westfall" <dwestfall@TradelineInc.com>
To: <java-user@lucene.apache.org>
X-OriginalArrivalTime: 27 Jul 2005 22:42:38.0191 (UTC) FILETIME=[7D52A7F0:01C592FC]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Is there a way to allow users to use + and - and special operators in
free-text searches, but also allow them to search for a last name like
Smith-Jones? (which I'd have to escape?)

Is there a regular expression to determine/fix this kind of user input
so it is queryparser-legal?

Ie they can't just type * or + in the search box.

How are y'all handling this kind of thing?

Derek

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 22:44:49 2005
Return-Path: <java-user-return-15611-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 89476 invoked from network); 27 Jul 2005 22:44:48 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 22:44:48 -0000
Received: (qmail 1925 invoked by uid 500); 27 Jul 2005 22:44:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 1899 invoked by uid 500); 27 Jul 2005 22:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 1886 invoked by uid 99); 27 Jul 2005 22:44:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 15:44:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.37] (HELO web31104.mail.mud.yahoo.com) (68.142.200.37)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Jul 2005 15:44:34 -0700
Received: (qmail 78522 invoked by uid 60001); 27 Jul 2005 22:44:39 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=Ep5wDOd8YPL1DwSkj5rz4OCSZCRjFKvly0UexDQdvam2QpBJVZIR7qwseqHyQVqujO0pypusItNDvOKMlCCVBYx+rZtWMFPYqpODHCAqoy1wH3CX4nMgjl8INCcmGcnLTB0PQBoQETMPOC6V80T71zwX+xI1RAiZfMGuYRh6NWk=  ;
Message-ID: <20050727224439.78520.qmail@web31104.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31104.mail.mud.yahoo.com via HTTP; Wed, 27 Jul 2005 15:44:39 PDT
Date: Wed, 27 Jul 2005 15:44:39 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: RE: Hardware Question
To: java-user@lucene.apache.org
In-Reply-To: <200507272237.j6RMavV9506812@pimout5-ext.prodigy.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ah - my brain was off. :)
In the Lucene book we refer to that index format as "compound index
format", while the original format we call "multifile index format"

  http://www.lucenebook.com/search?query=compound+index
  http://www.lucenebook.com/search?query=multifile+index

Yes, the latter will give you a bit more juice.

Otis


--- Mark Bennett <mbennett@ideaeng.com> wrote:

> My apologies Otis, I should have spelled that out.
> 
> I'm going to take a stab at answering this.  But please, others on
> the list,
> chime in with corrections / clarifications.
> 
> CFS = "compact file system" or "consolidate file system" or something
> like
> that.
> 
> Essentially, each Lucene index segment is actually a set of files;
> files for
> a segment have a common file name and then a set of extensions; OR a
> segment
> is just stored as ONE file, with a .cfs extension.
> 
> CFS means that the multiple files for that segment have been joined
> together
> into one physical file; inside there is actually the original set of
> logical
> files, but on your disk it's just one file and one set of file
> handles to
> open that segmgent.
> 
> If you do a DIR / ls on your indexes, if you see a bunch of .cfs
> files, then
> you're using CFS.  The default for the past version or so is that you
> DO get
> CFS files unless you say otherwise.
> 
> I think the idea is that, generally, having fewer physical files is
> better,
> in terms of file handles, etc.  But for search performance, I'm not
> sure if
> that's always the best case; certainly for indexing it takes more
> work to
> create CFS files.
> 
> 
> -----Original Message-----
> From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
> Sent: Wednesday, July 27, 2005 3:20 PM
> To: java-user@lucene.apache.org; mbennett@ideaeng.com
> Subject: RE: Hardware Question
> 
> What's CFS?  Cryptographic File System?  I'm not being sarcastic
> here,
> I'm really curious about what you referring to.
> 
> Otis
> 
> --- Mark Bennett <mbennett@ideaeng.com> wrote:
> 
> > Also, non-hardware, have you considered turning off CFS?
> > 
> > Our client told us this sped up their system.
> > 
> > -----Original Message-----
> > From: Chris Lamprecht [mailto:clamprecht@gmail.com] 
> > Sent: Wednesday, July 27, 2005 11:52 AM
> > To: java-user@lucene.apache.org
> > Subject: Re: Hardware Question
> > 
> > It depends on your usage.   When you search, does your code also
> > retrieve the docs (using Searcher.document(n), for instance).  If
> > your
> > index is 8GB, part of that is the "indexed" part (searchable), and
> > part is just "stored" document fields.
> > 
> > It may be as simple as adding more RAM (try 4, 6, and 8GB) -- but
> not
> > for your java heap -- instead for the linux filesystem cache.
> > 
> > I suggest first adding some simple timing output to your search. 
> You
> > want to see how much time you are spending in the call to search(),
> > and then how much time you're spending pulling the Documents from
> the
> > index (and how much time you're spending in other parts of your
> > search
> > application).   The call to search() is typically CPU-intensive,
> > while
> > pulling Documents is I/O-bound.  And RAM is about 5 or 6 orders of
> > magnitude faster than disk I/O.
> > 
> > -chris
> > 
> > On 7/27/05, Michael Celona <mcelona@criticalmention.com> wrote:
> > > I am going over ways to increase overall search performance.
> > > 
> > > 
> > > 
> > > Currently, I have a dual zeon with 2G of ram dedicated to java
> > searching
> > an
> > > 8G index on one 7200 rpm drive.
> > > 
> > > 
> > > 
> > > Which will give the greatest payoff?
> > > 
> > > 
> > > 
> > > 1)       Going to 64bit server and giving more memory to java
> with
> > faster
> > > drives
> > > 
> > > 
> > > 
> > > Or
> > > 
> > > 
> > > 
> > > 2)       Staying with 32bit server but going with faster drives
> and
> > > splitting the operating system from the index drive.
> > > 
> > > 
> > > 
> > > 
> > > 
> > > Basically, what are the performance improvements from separating
> > the
> > > operation system form the index drive(s).
> > > 
> > > 
> > > 
> > > 
> > > 
> > > Thanks,
> > > 
> > > Michael
> > > 
> > > 
> > > 
> > > 
> > >
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> > 
> >
> ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> > 
> > 
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 23:16:16 2005
Return-Path: <java-user-return-15612-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 97482 invoked from network); 27 Jul 2005 23:16:15 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 23:16:15 -0000
Received: (qmail 41032 invoked by uid 500); 27 Jul 2005 23:16:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 40777 invoked by uid 500); 27 Jul 2005 23:16:08 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 40763 invoked by uid 99); 27 Jul 2005 23:16:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 16:16:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fraschetti@gmail.com designates 64.233.162.198 as permitted sender)
Received: from [64.233.162.198] (HELO zproxy.gmail.com) (64.233.162.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 16:16:02 -0700
Received: by zproxy.gmail.com with SMTP id n29so230864nzf
        for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 16:16:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=nIpTPBvHCdL/ulKw5JttDpFGkvWN9YsgXwqFF3kVd72e6jSmbhwcEkAHO54kvEpUcudLytrqkszWyl12H24/FgcE/pPutMGpwMua8eWW6mckc2UqmvaJhf04HX3JQr4haGRtgJ00DO6TtcZagkWZVKfPYMvBxnyceiVvLFRMaVw=
Received: by 10.36.251.29 with SMTP id y29mr805191nzh;
        Wed, 27 Jul 2005 16:16:07 -0700 (PDT)
Received: by 10.36.55.12 with HTTP; Wed, 27 Jul 2005 16:16:07 -0700 (PDT)
Message-ID: <cbdebdf80507271616132312ae@mail.gmail.com>
Date: Wed, 27 Jul 2005 16:16:07 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: java-user@lucene.apache.org
Subject: URL Stemmer
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Writing simple code to trim down a URL is trivial, but to actually
trim it down to its most meaningful state is very hard. In same cases
the URL parameters actually define the page in others they are useless
babble. I'd like to use the hash of a page's URL as well as a hash of
the content data to help me eliminate duplicates... is there any good
methods that are commonly used for URL stemming?

--=20
___________________________________________________
Chris Fraschetti
e fraschetti@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 23:26:37 2005
Return-Path: <java-user-return-15613-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1202 invoked from network); 27 Jul 2005 23:26:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 23:26:37 -0000
Received: (qmail 57044 invoked by uid 500); 27 Jul 2005 23:26:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57017 invoked by uid 500); 27 Jul 2005 23:26:30 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 57004 invoked by uid 99); 27 Jul 2005 23:26:30 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 16:26:30 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [203.89.192.138] (HELO mail.app.aconex.com) (203.89.192.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 16:26:23 -0700
Received: from herald.aconex.com (herald.aconex.com [192.168.0.211])
	by mail.app.aconex.com (Postfix) with ESMTP id 9C1BB159FA6
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 09:26:23 +1000 (EST)
Received: from localhost (localhost [127.0.0.1])
	by herald.aconex.com (Postfix) with ESMTP id 88DAA64007
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 09:26:23 +1000 (EST)
Received: from herald.aconex.com ([127.0.0.1])
 by localhost (herald [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 30952-01-9 for <java-user@lucene.apache.org>;
 Thu, 28 Jul 2005 09:26:22 +1000 (EST)
Received: from pc004 (unknown [192.168.0.12])
	by herald.aconex.com (Postfix) with SMTP id 56A9564002
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 19:26:22 -0400 (EDT)
From: "Indu Abeyaratna" <iabeyaratna@aconex.com>
To: <java-user@lucene.apache.org>
Subject: Query text Tokenize issue 
Date: Thu, 28 Jul 2005 09:26:22 +1000
Message-ID: <CBECJKOBLBEIELOPAOGPIEGLCGAA.iabeyaratna@aconex.com>
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_009D_01C59356.6B197C30"
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook IMO, Build 9.0.2416 (9.0.2910.0)
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2800.1409
Importance: Normal
X-MS-TNEF-Correlator: <CBECJKOBLBEIELOPAOGPIEGLCGAA.iabeyaratna@aconex.com>
X-Virus-Scanned: by amavisd-new at aconex.com
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_009D_01C59356.6B197C30
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: 7bit


I have a field index as keyword. And have two records "J400-C-V1-S10-T1" and
"J400-C-V-S10-T1"

When I search for  "J400-C-V1-S10-T1", it returns me matching record, but
when I Search for "J400-C-V-S10-T1" it doesn't return the matching one.

Further I found that "J400-C-V-S10-T1" is incorrectly tokenised to "J400-C"
and "V-S10-T1" but nothing like that happened to "J400-C-V1-S10-T1".

This happens when there is combination like "?-?-" and its get tokenised
into "?" and "?-".

I attached test case for further clarification.

I am using StandardAnalyser and query parser.

Is this a bug in the lucene or JavaCC??  Or am I missing something here? any
suggestion to get away with this?

 
 


------=_NextPart_000_009D_01C59356.6B197C30
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
------=_NextPart_000_009D_01C59356.6B197C30--


From java-user-return-15614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 23:31:17 2005
Return-Path: <java-user-return-15614-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 1979 invoked from network); 27 Jul 2005 23:31:17 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 23:31:17 -0000
Received: (qmail 63548 invoked by uid 500); 27 Jul 2005 23:31:11 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 63530 invoked by uid 500); 27 Jul 2005 23:31:11 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 63510 invoked by uid 99); 27 Jul 2005 23:31:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 16:31:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.36] (HELO web31103.mail.mud.yahoo.com) (68.142.200.36)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Jul 2005 16:31:02 -0700
Received: (qmail 34971 invoked by uid 60001); 27 Jul 2005 23:31:07 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=AHT4K+t+4Tu1k2LOBivQGpwd40/dqCCWZsSvSHXFyqhxBrPweW83iEgOa0ewExtuqrvifO5HUjfpB/bPfi2FMK0kWl+MZb8JCe3KdWzWXw4NhAc+1EG0fvf2QQ++9IT+bJJZg03gJf1nYB6H7nz9kSSJLx0Yh3ke4KF4RqDEA08=  ;
Message-ID: <20050727233107.34969.qmail@web31103.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31103.mail.mud.yahoo.com via HTTP; Wed, 27 Jul 2005 16:31:07 PDT
Date: Wed, 27 Jul 2005 16:31:07 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: URL Stemmer
To: java-user@lucene.apache.org, Chris Fraschetti <fraschetti@gmail.com>
In-Reply-To: <cbdebdf80507271616132312ae@mail.gmail.com>
MIME-Version: 1.0
Content-Type: multipart/mixed; boundary="0-483140593-1122507067=:34272"
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

--0-483140593-1122507067=:34272
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
Content-Id: 
Content-Disposition: inline

Hm, not sure why you're emailing java-user@lucene.  nutch-user@lucene
may be better.  Here are 2 ancient classes from 2003 that I once used
to normalize URLs, to help me identify URL duplicates.  This may get
stripped on its way to the list.

Otis


--- Chris Fraschetti <fraschetti@gmail.com> wrote:

> Writing simple code to trim down a URL is trivial, but to actually
> trim it down to its most meaningful state is very hard. In same cases
> the URL parameters actually define the page in others they are
> useless
> babble. I'd like to use the hash of a page's URL as well as a hash of
> the content data to help me eliminate duplicates... is there any good
> methods that are commonly used for URL stemming?
> 
> -- 
> ___________________________________________________
> Chris Fraschetti
> e fraschetti@gmail.com
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
--0-483140593-1122507067=:34272
Content-Type: text/x-java; name="FullURLFormatter.java"
Content-Description: 1348543227-FullURLFormatter.java
Content-Disposition: inline; filename="FullURLFormatter.java"

package com.krumpir.util;

import java.net.MalformedURLException;
import java.net.URL;


/**
 * Class <code>FullURLFormatter</code> FIXME.
 *
 * @author Otis Gospodnetic
 * @version $Id: FullURLFormatter.java,v 1.1.1.1 2003/11/03 13:31:58 otis Exp $
 */
public class FullURLFormatter extends URLFormatter
{
    /**********************************************************************************************/

    // Constructors

    /**********************************************************************************************/
    public FullURLFormatter(int cacheSize)
    {
        super(cacheSize);
    }

    /**
     * Sets an URL for formatting.
     */
    public void setURL(URL url)
    {
        originalURL = url;
        protocol = url.getProtocol();
        host = url.getHost();
        file = url.getFile();
        port = url.getPort();

        if (port < 1)
        {
            port = HTTPUtils.getDefaultPort();
        }

        if (file.indexOf("?") != -1)
        {
            query = file.substring(file.indexOf("?") + 1);
            file = file.substring(0, file.indexOf("?"));
        }

        reference = url.getRef();
    }

    /**********************************************************************************************/

    // Methods

    /**********************************************************************************************/
    /**
     * Given a dirty URL, returns a consistently formatted URL.
     */
    public URL format(URL url)
    {
        // getFromCache() will return null if the cache is not enabled or
        // if the url has not been seen before.
        URL cachedURL = getFromCache(url);

        if (cachedURL != null)
        {
            return cachedURL;
        }
        else
        {
            setURL(url);
            lowerCaseProtocol();
            lowerCaseHost();

            //stripPortNumber();
            stripReference();
            stripQuery();
            removeDuplicateSlashes();
            stringifyTilde();

            URL formattedURL = toURL();
            cacheURL(originalURL, formattedURL);

            return formattedURL;
        }
    }

    /**
     *
     */
    public String toString()
    {
        // FIXME: OG: toURL() can return null
        return toURL().toString();
    }

    /**
     *
     */
    public URL toURL()
    {
        StringBuffer urlBuffer = new StringBuffer();

        try
        {
            // protocol :// host : port file
            urlBuffer.append(protocol + "://" + host + ":" + port + file);

            // add query if it existed in the original URL
            if (query != null)
            {
                urlBuffer.append("?" + query);
            }

            // add referece if it existed in the original URL
            if (reference != null)
            {
                urlBuffer.append("#" + reference);
            }

            return new URL(urlBuffer.toString());
        }
        catch (MalformedURLException e)
        {
            // FIXME: OG
            System.err.println(
                "Problem constructing URL <" + urlBuffer.toString() + ">: " + e.getMessage());

            return null;
        }
    }
}

--0-483140593-1122507067=:34272
Content-Type: text/x-java; name="URLFormatter.java"
Content-Description: 3359476471-URLFormatter.java
Content-Disposition: inline; filename="URLFormatter.java"

package com.krumpir.util;

import java.net.MalformedURLException;
import java.net.URL;

import com.krumpir.util.adt.LRUHashtable;

/**
 * Utility for making URLs consistent.
 *
 * <p>
 *
 * This class provides a bunch of little methods for altering an URL,
 * to make URLs print more readably and match more consistently.  The
 * JDK URL class does some things to clean up URLs passed in as weird
 * strings, but it takes a conservative approach and does not do as
 * much as some applications might need -- particularly those that
 * deal with document addresses equivalent from a network or Web
 * server perspective but unequal as a string comparison.
 *
 * @author Otis Gospodnetic
 * @version $Id: URLFormatter.java,v 1.1.1.1 2003/11/03 13:32:00 otis Exp $
 */
public abstract class URLFormatter
{
    protected LRUHashtable cache = null;
    protected boolean cacheEnabled = false;
    protected int cacheSize = 0;

    protected URL originalURL;
    protected String protocol, host, file, reference, query;
    protected int port;

    /**********************************************************************************************/
    // Methods
    /**********************************************************************************************/

    /**
     * Constructs an empty URLFormatter.
     */
    public URLFormatter(int cacheSize)
    {
        if (cacheSize > 0)
        {
            cache = new LRUHashtable(cacheSize);
            cacheEnabled = true;
        }
        this.cacheSize  = cacheSize;
    }

    /**
     * Given a dirty URL, returns a consistently formatted URL.
     */
    public abstract URL format(URL url);

    /**
     *
     */
    public abstract void setURL(URL url);

    /**
     *
     */
    public abstract URL toURL();

    /**
     *
     */
    public abstract String toString();

    /**
     * Enables a cache of (un)formatted URLs to avoid reprocessing the same
     * URL.  The cache is disabled by default.
     */
    public void cacheSwitch(short cacheSize)
    {
        if (cacheSize > 0)
        {
            cache = new LRUHashtable(cacheSize);
            cacheEnabled = true;
        }
        else
        {
            cacheEnabled = false;
            cache = null;
        }
        this.cacheSize = cacheSize;
    }

    /**
     * Indicates whether the cache is currently enabled or disabled.
     */
    public boolean isCacheEnabled()
    {
        return cacheEnabled;
    }

    /**
     * Empties the cache of its current contents.
     */
    public void clearCache()
    {
        if (cacheEnabled)
            cache.clear();
    }

    /**
     * Retrieves a formatted URL from the cache of previously-seen
     * URLs, using the original URL as a cache key.  If the cache is
     * disabled, this will always return null.  If the cache does not
     * contain the argument URL as a key, it will return null.  An URL
     * is stored in the cache when it is first seen by the format(URL).
     */
    protected URL getFromCache(URL url)
    {
        String strURL = url.toString();
        if (cacheEnabled && cache.containsKey(strURL))
        {
            return (URL)cache.get(strURL);
        }
        else
        {
            return null;
        }
    }

    /**
     * Converts the protocol (<code>http</code> in
     * <code>HTTP://www.company.com/</code>) to lower-case.  An upper- or
     * lower-case protocol is valid in most browsers, and this method
     * masks the apparent difference between them.
     */
    protected void lowerCaseProtocol()
    {
        protocol = protocol.toLowerCase();
    }

    /**
     * Converts the host (<code>WWW.COMPANY.COM</code> in
     * <code>HTTP://WWW.COMPANY.COM/</code>) to lower-case.  Most domain
     * name resolvers are case-insensitive, so this prevents host case from
     * making two URLs unequal.
     */
    protected void lowerCaseHost()
    {
        host = host.toLowerCase();
    }

    /**
     *
     */
    protected String stripReference()
    {
        // get a reference to it, null the original reference to it, and return a copy
        String foundRef = reference;
        reference = null;
        return foundRef;
    }

    /**
     *
     */
    protected String stripQuery()
    {
        // get a reference to it, null the original reference to it, and return a copy
        String foundQuery = query;
        query = null;
        return foundQuery;
    }

    // This may be buggy.  I'm seeing weird behavior when dupes appears
    // within a string rather than at the head of it.  Maybe use
    // StringCharacterIterator instead of doing it this way.
    protected int removeDuplicateSlashes()
    {
        char[] fileChars = new char[file.length()];
        char lastChar = '\u0000';
        StringBuffer fileBuffer = new StringBuffer();
        int duplicateCount = 0;
        file.getChars(0, file.length(), fileChars, 0);
        for (int i = 0; i < fileChars.length; i++)
        {
            if (fileChars[i] == '/' && fileChars[i] == lastChar)
            {
                duplicateCount++;
            }
            else
            {
                lastChar = fileChars[i];
                fileBuffer.append(fileChars[i]);
            }
        }
        file = fileBuffer.toString();
        return duplicateCount;
    }

    /**
     *
     */
    protected boolean stringifyTilde()
    {
        if ((file.startsWith("/%7E") || file.startsWith("/%7e")) && file.length() > 4)
        {
            String afterTilde = file.substring(4);
            file = "/~" + afterTilde;
            return true;
        }
        else
        {
            return false;
        }
    }

    /**
     *
     */
    protected void cacheURL(URL originalURL, URL formattedURL)
    {
        // TODO: OG: should we include the else case? Throw an exception? Why?
        if (cacheEnabled && !cache.containsKey(originalURL.toString()))
        {
            cache.put(originalURL.toString(), formattedURL);
        }
    }
}


--0-483140593-1122507067=:34272
Content-Type: text/plain; charset=us-ascii

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org
--0-483140593-1122507067=:34272--

From java-user-return-15615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Wed Jul 27 23:37:52 2005
Return-Path: <java-user-return-15615-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 2973 invoked from network); 27 Jul 2005 23:37:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 27 Jul 2005 23:37:52 -0000
Received: (qmail 75874 invoked by uid 500); 27 Jul 2005 23:37:47 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 75617 invoked by uid 500); 27 Jul 2005 23:37:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 75604 invoked by uid 99); 27 Jul 2005 23:37:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 16:37:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.201.74] (HELO web31112.mail.mud.yahoo.com) (68.142.201.74)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Jul 2005 16:37:38 -0700
Received: (qmail 85843 invoked by uid 60001); 27 Jul 2005 23:37:43 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=a7XP+/YsNHGODGJoEt6OxnBLA9UaoYTaU92TFs3lIneJ9fMsVS/E24XBjg0up598NcdRjLAAkt9aSuusDSrTm0aZjD1SAFY+bN6OmXJHMYokrycDuGrHdopQLr9b6tnW7X30H9iNqxMetWv8j4fvnGNeflSV7cUa9OsvH85YL90=  ;
Message-ID: <20050727233742.85841.qmail@web31112.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31112.mail.mud.yahoo.com via HTTP; Wed, 27 Jul 2005 16:37:42 PDT
Date: Wed, 27 Jul 2005 16:37:42 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Query text Tokenize issue 
To: java-user@lucene.apache.org
In-Reply-To: <CBECJKOBLBEIELOPAOGPIEGLCGAA.iabeyaratna@aconex.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

I believe your problem is described on page 121 in the Lucene book:
http://www.lucenebook.com/search?query=%22dealing+with+keyword+fields%22

The solution for you may be to write your own Analyzer that knows how
to correctly tokenize or not tokenize certain fields in your index. 
Using PerFieldAnalyzerWrapper may help you here.

Otis



--- Indu Abeyaratna <iabeyaratna@aconex.com> wrote:

> 
> I have a field index as keyword. And have two records
> "J400-C-V1-S10-T1" and
> "J400-C-V-S10-T1"
> 
> When I search for  "J400-C-V1-S10-T1", it returns me matching record,
> but
> when I Search for "J400-C-V-S10-T1" it doesn't return the matching
> one.
> 
> Further I found that "J400-C-V-S10-T1" is incorrectly tokenised to
> "J400-C"
> and "V-S10-T1" but nothing like that happened to "J400-C-V1-S10-T1".
> 
> This happens when there is combination like "?-?-" and its get
> tokenised
> into "?" and "?-".
> 
> I attached test case for further clarification.
> 
> I am using StandardAnalyser and query parser.
> 
> Is this a bug in the lucene or JavaCC??  Or am I missing something
> here? any
> suggestion to get away with this?
> 
>  
>  
> 
> >
---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 00:51:26 2005
Return-Path: <java-user-return-15616-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15821 invoked from network); 28 Jul 2005 00:51:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 00:51:26 -0000
Received: (qmail 53652 invoked by uid 500); 28 Jul 2005 00:51:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 53443 invoked by uid 500); 28 Jul 2005 00:51:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 53430 invoked by uid 99); 28 Jul 2005 00:51:19 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 17:51:19 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 17:51:11 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7D4A813E2007; Wed, 27 Jul 2005 20:51:13 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id 8F86113E2006
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 20:50:57 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <9D54CF77-90DD-4F5E-B0CF-40FC921F5E4B@warwick.ac.uk>
References: <A7EFFB8D-C7DB-48A9-831F-A934ED012B28@warwick.ac.uk> <557EFEDE-002B-41BA-B787-5DEB5940AF52@ehatchersolutions.com> <9D54CF77-90DD-4F5E-B0CF-40FC921F5E4B@warwick.ac.uk>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AD4B539A-F0AC-49B6-81DC-4D69A6207AC0@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Searching a URL with a PrefixQuery / Too Many Clauses (again...)
Date: Wed, 27 Jul 2005 20:50:57 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 27, 2005, at 4:56 PM, Chris May wrote:

> Always domain + part of a path e.g.
>
> url:http://blogs.warwick.ac.uk/chrismay/*
>
> or
>
> url:http://www2.warwick.ac.uk/fac/soc/law/ug/prospective/degrees/ 
> modules/commonlaw/*
>
> or
>
> url:http://www2.warwick.ac.uk/services/its/*
>
>
> ... and so on. Part of the problem is that we may need to go an  
> arbitrary number of levels down the path to get an acceptably small  
> set of documents to start from - we couldn't impose a rule that  
> said something like 'specify the first 2 directories on the  
> path' (c.f my second example). We wouldn't need to query for the  
> same path over different domains though (e.g. url:*.warwick.ac.uk/ 
> about/* )

Here's an idea off the top of my head that I haven't fully explored.   
Maybe it'll do the trick...

Adjust the analysis of the url field to tokenize something like  
http://lucene.apache.org/nutch/ into [http://lucene.apache.org] and [/ 
nutch].  Prefix queries, as you've shown, would be turned into an  
ordered zero-slop PhraseQuery.  The tokenization shouldn't be too  
difficult.  But getting QueryParser happy will require subclassing  
and overriding getWildcardQuery to return an appropriate PhraseQuery.

That will definitely solve the issue of too many clauses!   Are there  
any issues with this approach?

     Erik


>
> thanks
>
> Chris
>
>
>
>
> On 27 Jul 2005, at 21:33, Erik Hatcher wrote:
>
>
>> Could you give some examples of the types of PrefixQuery's you'd  
>> like to use?   Is it always at a granularity of domain and path?   
>> Or are you wanting to do a prefix pieces of the domain and path?
>>
>>     Erik
>>
>> On Jul 27, 2005, at 3:47 PM, Chris May wrote:
>>
>>
>>
>>> First, apologies for what seems to be something of an FAQ.
>>>
>>> However, I've not been able to find an answer either in LIA or in  
>>> the relevant section of the FAQ (http://wiki.apache.org/jakarta- 
>>> lucene/LuceneFAQ#head-06fafb5d19e786a50fb3dfb8821a6af9f37aa831)
>>>
>>> My setup is as follows: I have an index of a few hundred thousand  
>>> web pages. I'd like the be able to construct queries that search  
>>> for some arbitrary text within a specified URL. Kind of like  
>>> google's syntax
>>>
>>> searchterm +site:www.foo.com/some/section
>>>
>>> So, I have the page title & content indexed, and the URL stored  
>>> as a keywords field, and I imagined that I'd be able to construct  
>>> a query something like this:
>>>
>>> String[] fields = new String[]  
>>> {DocumentFields.TITLE,DocumentFields.CONTENT};
>>> Query searchTextQuery = MultiFieldQueryParser.parse 
>>> (request.getSearchQuery(), fields, analyzer);
>>> PrefixQuery urlPrefix = new PrefixQuery(new Term 
>>> (DocumentFields.URL, request.getUrlPrefix()));
>>> hits = searcher.search(searchTextQuery, new QueryFilter(urlPrefix));
>>>
>>> However, as soon as the set of documents returned by the  
>>> prefixquery is more than a thousand or so, I get a  
>>> TooManyClausesException, as you might expect.
>>>
>>> AFAICS the solutions suggested in the FAQ don't seem to apply  
>>> here: I'm already using a Filter, and that's not helping (pace  
>>> suggestion 1), I don't think I can reduce the number of terms in  
>>> the index, else my URLs wouldn't be unique any more, and  
>>> increasing the number of clauses seems like a poor choice from a  
>>> scalability point of view - I anticipate queries that could  
>>> filter perhaps a hundred thousand documents or so.
>>>
>>> I'm guessing that it might be possible to do something smart by  
>>> splitting the URL up into multiple fields - for example, one for  
>>> the host and one for the path, or even one for the host and one  
>>> for host+path together - but I'm not clear on exactly how I'd use  
>>> the two fields, and how they'd help. Can someone enlighten me?
>>>
>>> Thanks in advance
>>>
>>> Chris
>>>
>>>
>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 00:56:06 2005
Return-Path: <java-user-return-15617-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16749 invoked from network); 28 Jul 2005 00:56:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 00:56:06 -0000
Received: (qmail 56833 invoked by uid 500); 28 Jul 2005 00:56:00 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 56813 invoked by uid 500); 28 Jul 2005 00:55:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 56800 invoked by uid 99); 28 Jul 2005 00:55:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 17:55:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 17:55:52 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0117613E2008; Wed, 27 Jul 2005 20:55:52 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-129-227.dhcp.sprint-hsd.net [71.48.129.227])
	by ehatchersolutions.com (Postfix) with ESMTP id BB2C313E2007
	for <java-user@lucene.apache.org>; Wed, 27 Jul 2005 20:55:39 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <41EE526EC2D3C74286415780D3BA9F870D2E19C7@ehost011-1.exch011.intermedia.net>
References: <41EE526EC2D3C74286415780D3BA9F870D2E19C7@ehost011-1.exch011.intermedia.net>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <E20EE48C-521D-4531-B814-26D3BF705EE3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Regex for legal user search input
Date: Wed, 27 Jul 2005 20:55:40 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

What version of Lucene are you using?   There was a change that  
helped with that situation such that interior +/- was not considered  
an operator.   That changed is in the 1.4 versions - might you be  
running a  previous version of Lucene?

     Erik



On Jul 27, 2005, at 6:42 PM, Derek Westfall wrote:

> Is there a way to allow users to use + and - and special operators in
> free-text searches, but also allow them to search for a last name like
> Smith-Jones? (which I'd have to escape?)
>
> Is there a regular expression to determine/fix this kind of user input
> so it is queryparser-legal?
>
> Ie they can't just type * or + in the search box.
>
> How are y'all handling this kind of thing?
>
> Derek
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 01:03:05 2005
Return-Path: <java-user-return-15618-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17897 invoked from network); 28 Jul 2005 01:03:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 01:03:05 -0000
Received: (qmail 66007 invoked by uid 500); 28 Jul 2005 01:02:58 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 65982 invoked by uid 500); 28 Jul 2005 01:02:57 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 65967 invoked by uid 99); 28 Jul 2005 01:02:57 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 18:02:57 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [63.240.76.165] (HELO sccimhc91.asp.att.net) (63.240.76.165)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 18:02:50 -0700
Received: from [10.0.1.8] (12-222-29-197.client.insightbb.com[12.222.29.197])
          by sccimhc91.asp.att.net (sccimhc91) with SMTP
          id <20050728010254i9100an92ae>; Thu, 28 Jul 2005 01:02:54 +0000
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <9D54CF77-90DD-4F5E-B0CF-40FC921F5E4B@warwick.ac.uk>
References: <A7EFFB8D-C7DB-48A9-831F-A934ED012B28@warwick.ac.uk> <557EFEDE-002B-41BA-B787-5DEB5940AF52@ehatchersolutions.com> <9D54CF77-90DD-4F5E-B0CF-40FC921F5E4B@warwick.ac.uk>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <38EA254E-A1A7-422B-A146-6003BAF2C83A@ganyo.com>
Content-Transfer-Encoding: 7bit
From: Scott Ganyo <scott@ganyo.com>
Subject: Re: Searching a URL with a PrefixQuery / Too Many Clauses (again...)
Date: Wed, 27 Jul 2005 20:02:55 -0500
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Chris,

How about indexing the domain as one field and each part of the path  
as separate terms in another field?  I'm sure you've probably already  
thought of doing this... and maybe discarded the idea because you'd  
lose the position information.  However, even though you can't just  
simply split the URL on '/' and shove it into the field, you can add  
the position information back into the term and then put it into the  
field.  Then, you would be able to completely ditch the prefix query  
and still retrieve the documents using the entire, ordered path in (I  
think) the most efficient way possible.

For example:

http://www2.warwick.ac.uk/fac/soc/law/ug/prospective/degrees/modules/ 
commonlaw/

becomes something like (using n/*** to identify the position):

domain: www2.warwick.ac.uk
path: 1/fac, 2/soc, 3/law, 4/ug, 5/propective, 6/degrees, 7/modules,  
8/commonlaw

And you could search based on any prefix you desired.  For example  
searching for this:

http://www2.warwick.ac.uk/fac/soc/law/*

would end up being a Lucene search that looks something like this  
(note: not query parser syntax!):

domain: www2.warwick.ac.uk AND path: 1/fac AND path: 2/soc AND path:  
3/law

Does that make sense?  Would it work for you?

S

On Jul 27, 2005, at 3:56 PM, Chris May wrote:

> Always domain + part of a path e.g.
>
> url:http://blogs.warwick.ac.uk/chrismay/*
>
> or
>
> url:http://www2.warwick.ac.uk/fac/soc/law/ug/prospective/degrees/ 
> modules/commonlaw/*
>
> or
>
> url:http://www2.warwick.ac.uk/services/its/*
>
>
> ... and so on. Part of the problem is that we may need to go an  
> arbitrary number of levels down the path to get an acceptably small  
> set of documents to start from - we couldn't impose a rule that  
> said something like 'specify the first 2 directories on the  
> path' (c.f my second example). We wouldn't need to query for the  
> same path over different domains though (e.g. url:*.warwick.ac.uk/ 
> about/* )
>
> thanks
>
> Chris
>
>
>
>
> On 27 Jul 2005, at 21:33, Erik Hatcher wrote:
>
>
>> Could you give some examples of the types of PrefixQuery's you'd  
>> like to use?   Is it always at a granularity of domain and path?   
>> Or are you wanting to do a prefix pieces of the domain and path?
>>
>>     Erik
>>
>> On Jul 27, 2005, at 3:47 PM, Chris May wrote:
>>
>>
>>
>>> First, apologies for what seems to be something of an FAQ.
>>>
>>> However, I've not been able to find an answer either in LIA or in  
>>> the relevant section of the FAQ (http://wiki.apache.org/jakarta- 
>>> lucene/LuceneFAQ#head-06fafb5d19e786a50fb3dfb8821a6af9f37aa831)
>>>
>>> My setup is as follows: I have an index of a few hundred thousand  
>>> web pages. I'd like the be able to construct queries that search  
>>> for some arbitrary text within a specified URL. Kind of like  
>>> google's syntax
>>>
>>> searchterm +site:www.foo.com/some/section
>>>
>>> So, I have the page title & content indexed, and the URL stored  
>>> as a keywords field, and I imagined that I'd be able to construct  
>>> a query something like this:
>>>
>>> String[] fields = new String[]  
>>> {DocumentFields.TITLE,DocumentFields.CONTENT};
>>> Query searchTextQuery = MultiFieldQueryParser.parse 
>>> (request.getSearchQuery(), fields, analyzer);
>>> PrefixQuery urlPrefix = new PrefixQuery(new Term 
>>> (DocumentFields.URL, request.getUrlPrefix()));
>>> hits = searcher.search(searchTextQuery, new QueryFilter(urlPrefix));
>>>
>>> However, as soon as the set of documents returned by the  
>>> prefixquery is more than a thousand or so, I get a  
>>> TooManyClausesException, as you might expect.
>>>
>>> AFAICS the solutions suggested in the FAQ don't seem to apply  
>>> here: I'm already using a Filter, and that's not helping (pace  
>>> suggestion 1), I don't think I can reduce the number of terms in  
>>> the index, else my URLs wouldn't be unique any more, and  
>>> increasing the number of clauses seems like a poor choice from a  
>>> scalability point of view - I anticipate queries that could  
>>> filter perhaps a hundred thousand documents or so.
>>>
>>> I'm guessing that it might be possible to do something smart by  
>>> splitting the URL up into multiple fields - for example, one for  
>>> the host and one for the path, or even one for the host and one  
>>> for host+path together - but I'm not clear on exactly how I'd use  
>>> the two fields, and how they'd help. Can someone enlighten me?
>>>
>>> Thanks in advance
>>>
>>> Chris
>>>
>>>
>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 01:41:52 2005
Return-Path: <java-user-return-15619-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 31539 invoked from network); 28 Jul 2005 01:41:52 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 01:41:52 -0000
Received: (qmail 97162 invoked by uid 500); 28 Jul 2005 01:41:45 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 97137 invoked by uid 500); 28 Jul 2005 01:41:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 97123 invoked by uid 99); 28 Jul 2005 01:41:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 18:41:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [204.127.202.56] (HELO sccrmhc12.comcast.net) (204.127.202.56)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 18:41:38 -0700
Received: from domain.com (unknown[69.252.201.233](misconfigured sender))
          by comcast.net (sccrmhc12) with ESMTP
          id <2005072801413601200a0fb2e>; Thu, 28 Jul 2005 01:41:40 +0000
Date: Wed, 27 Jul 2005 19:42:18 -0600 (MDT)
From: Barry Carter <barry.carter@bigfoot.com>
To: java-user@lucene.apache.org
Subject: Lucene vs Derby (vs MySQL) for spatial indexing
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20050728014138.9EC4D10FB2B7@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Does Lucene optimize range queries that use Sort and/or limit the number 
of hits?

My situation: I have a listing of 2 million cities, with the name,
latitude, longitude, and population of each city. I want to efficiently
find the 50 most populous cities between (for example) latitudes 35.2 and
41.7 and longitudes 19.8 and 27.9

Assuming I normalize the data to be lexically sorted (in other words, I'll
write 7.52 as 007.52, so it comes before 111.01 instead of after it), can
I use a range query on the latitude and longitude fields (limiting the
number of hits to 50, and sorting by population descending) to efficiently
find what I want?

If sorting isn't efficient, can I simply boost each record by its
population (so that high population cities are returned first) and then
limit the number of hits (so I see only the 50 most populous cities in a
given area)?

I tried this in Derby, the code being:

Statement s = DriverManager.getConnection("jdbc:derby:test;create=false").createStatement();
s.setMaxRows(50);
rs = s.executeQuery("SELECT * FROM cities where lat>35.2 and lat<41.7 and lon>19.8 and lon<27.9 ORDER BY population desc");

but Derby inefficiently looks at ALL the cities matching my criteria (even
with indexes on lat and lon and population) before returning the top 50
(this is really bad when the condition is "lat>-90 and lat<90 and lon>-180
and lon<-180", for example).

The MySQL equivalent ("SELECT * FROM cities where lat>35.2 and lat<41.7
and lon>19.8 and lon<27.9 ORDER BY population desc LIMIT 50") with the
same indexes is more efficient (it uses the LIMIT condition to optimize
the query), and using MySQL w/ spatial indexes is even more efficient.  
However, I'm doing this as part of a Java application, so need something
that can be embedded in Java.

Is this a reasonable use of Lucene? Or is coercing Lucene into doing
range-based numeric queries a bad idea?

(In case anyone's interested, I'm writing a zoomable/pannable world map,
so finding the biggest cities in a given area quickly is important)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 03:51:01 2005
Return-Path: <java-user-return-15620-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55628 invoked from network); 28 Jul 2005 03:51:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 03:51:01 -0000
Received: (qmail 10488 invoked by uid 500); 28 Jul 2005 03:50:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10429 invoked by uid 500); 28 Jul 2005 03:50:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 10410 invoked by uid 99); 28 Jul 2005 03:50:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 20:50:54 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.43] (HELO web31110.mail.mud.yahoo.com) (68.142.200.43)
    by apache.org (qpsmtpd/0.29) with SMTP; Wed, 27 Jul 2005 20:50:46 -0700
Received: (qmail 5288 invoked by uid 60001); 28 Jul 2005 03:50:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=ZXb6RLuK6cxmkOphRcYal2R3tO9+gIAqqK/oDKYzQc7cYYzulwmGLkhWIvJHsCB1mJnKckG4mIVgg5Y+5PCNK4uplRBQFAFHXjj4LMq/JuG+5lNTHy4mzUz7sDgd3cdMkX2HyuQMGCoaDCs7S/KxC7UHexg0/WRtPkp7+C1KPPA=  ;
Message-ID: <20050728035051.5286.qmail@web31110.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31110.mail.mud.yahoo.com via HTTP; Wed, 27 Jul 2005 20:50:51 PDT
Date: Wed, 27 Jul 2005 20:50:51 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Lucene vs Derby (vs MySQL) for spatial indexing
To: java-user@lucene.apache.org
In-Reply-To: <20050728014138.9EC4D10FB2B7@asf.osuosl.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Barry,

You may also want to consider PostgreSQL for a few reasons: 1) it's
historically known to work well for geo-spatial data, 2) has
GIS/geo-spatial data types and such, and 3) it seems that the new
versions let you embed Java directly into the database (perhaps
something like Oracle's Java-embedding thing).

Otis


--- Barry Carter <barry.carter@bigfoot.com> wrote:

> Does Lucene optimize range queries that use Sort and/or limit the
> number 
> of hits?
> 
> My situation: I have a listing of 2 million cities, with the name,
> latitude, longitude, and population of each city. I want to
> efficiently
> find the 50 most populous cities between (for example) latitudes 35.2
> and
> 41.7 and longitudes 19.8 and 27.9
> 
> Assuming I normalize the data to be lexically sorted (in other words,
> I'll
> write 7.52 as 007.52, so it comes before 111.01 instead of after it),
> can
> I use a range query on the latitude and longitude fields (limiting
> the
> number of hits to 50, and sorting by population descending) to
> efficiently
> find what I want?
> 
> If sorting isn't efficient, can I simply boost each record by its
> population (so that high population cities are returned first) and
> then
> limit the number of hits (so I see only the 50 most populous cities
> in a
> given area)?
> 
> I tried this in Derby, the code being:
> 
> Statement s =
>
DriverManager.getConnection("jdbc:derby:test;create=false").createStatement();
> s.setMaxRows(50);
> rs = s.executeQuery("SELECT * FROM cities where lat>35.2 and lat<41.7
> and lon>19.8 and lon<27.9 ORDER BY population desc");
> 
> but Derby inefficiently looks at ALL the cities matching my criteria
> (even
> with indexes on lat and lon and population) before returning the top
> 50
> (this is really bad when the condition is "lat>-90 and lat<90 and
> lon>-180
> and lon<-180", for example).
> 
> The MySQL equivalent ("SELECT * FROM cities where lat>35.2 and
> lat<41.7
> and lon>19.8 and lon<27.9 ORDER BY population desc LIMIT 50") with
> the
> same indexes is more efficient (it uses the LIMIT condition to
> optimize
> the query), and using MySQL w/ spatial indexes is even more
> efficient.  
> However, I'm doing this as part of a Java application, so need
> something
> that can be embedded in Java.
> 
> Is this a reasonable use of Lucene? Or is coercing Lucene into doing
> range-based numeric queries a bad idea?
> 
> (In case anyone's interested, I'm writing a zoomable/pannable world
> map,
> so finding the biggest cities in a given area quickly is important)
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 06:07:27 2005
Return-Path: <java-user-return-15621-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 88910 invoked from network); 28 Jul 2005 06:07:27 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 06:07:27 -0000
Received: (qmail 33036 invoked by uid 500); 28 Jul 2005 06:07:19 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 33013 invoked by uid 500); 28 Jul 2005 06:07:19 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32995 invoked by uid 99); 28 Jul 2005 06:07:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 23:07:18 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [212.179.127.169] (HELO koutmail.amdocs.com) (212.179.127.169)
    by apache.org (qpsmtpd/0.29) with ESMTP; Wed, 27 Jul 2005 23:07:10 -0700
Received: from omail2.amdocs.com ([212.179.127.133])
	by koutmail.amdocs.com (8.12.11/8.12.9) with ESMTP id j6S5kpH6026378
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 08:46:51 +0300
Received: from tlvmail7.corp.amdocs.com (localhost.localdomain [127.0.0.1])
	by omail2.amdocs.com (8.12.11/8.12.11) with ESMTP id j6S67AWf007482
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 09:07:10 +0300
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: Regex for legal user search input
Date: Thu, 28 Jul 2005 09:07:43 +0300
Message-ID: <191B11CF22BAC54292E97F3B5CDC9C8506C6B4@tlvmail7.corp.amdocs.com>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: Regex for legal user search input
Thread-Index: AcWTDzwZRuq10GgoTiavljstpd3KcgAKuTfw
From: "Alex Kiselevski" <ALEXKIS@Amdocs.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


Erik,=0D

Just to make it clear for me. The last Lucene version supports interior
+/-.
So, how looks the query that deals with "BOOK NAME" as keyword fields
And I want to find C++ tutorial ?=0D

Thanks in advanvce
Alex Kiselevski=0D

Development Expert, Amdocs Advanced Technologies

+9.729.776.4346 (desk)
+9.729.776.1504 (fax)

AMDOCS > INTEGRATED CUSTOMER MANAGEMENT


-----Original Message-----
From: Erik Hatcher [mailto:erik@ehatchersolutions.com]=0D
Sent: Thursday, July 28, 2005 3:56 AM
To: java-user@lucene.apache.org
Subject: Re: Regex for legal user search input

What version of Lucene are you using?   There was a change that =0D
helped with that situation such that interior +/- was not considered =0D
an operator.   That changed is in the 1.4 versions - might you be =0D
running a  previous version of Lucene?

     Erik



On Jul 27, 2005, at 6:42 PM, Derek Westfall wrote:

> Is there a way to allow users to use + and - and special operators in=0D
> free-text searches, but also allow them to search for a last name like

> Smith-Jones? (which I'd have to escape?)
>
> Is there a regular expression to determine/fix this kind of user input

> so it is queryparser-legal?
>
> Ie they can't just type * or + in the search box.
>
> How are y'all handling this kind of thing?
>
> Derek
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


The information contained in this message is proprietary of Amdocs,
protected from disclosure, and may be privileged.
The information is intended to be conveyed only to the designated=
 recipient(s)
of the message. If the reader of this message is not the intended=
 recipient,
you are hereby notified that any dissemination, use, distribution or=
 copying of=0D
this communication is strictly prohibited and may be unlawful.=0D
If you have received this communication in error, please notify us=
 immediately
by replying to the message and deleting it from your computer.
Thank you.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 07:24:03 2005
Return-Path: <java-user-return-15622-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 16538 invoked from network); 28 Jul 2005 07:24:03 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 07:24:03 -0000
Received: (qmail 46712 invoked by uid 500); 28 Jul 2005 07:23:54 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46686 invoked by uid 500); 28 Jul 2005 07:23:54 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46667 invoked by uid 99); 28 Jul 2005 07:23:54 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 00:23:54 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.12.11.35] (HELO smtp004.mail.ukl.yahoo.com) (217.12.11.35)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Jul 2005 00:23:46 -0700
Received: (qmail 44514 invoked from network); 28 Jul 2005 07:23:51 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Received:Message-ID:Date:From:User-Agent:X-Accept-Language:MIME-Version:To:Subject:References:In-Reply-To:Content-Type:Content-Transfer-Encoding;
  b=sh91PJQMA7Jk8c+u4/38K/UiUfTNn6bZxb6qcDLdpZsXBzOXonDzWsFokAAxMxIDWw/DTGLnZ5Yx3mhyvsHpwVTEMxxaOZKNPIIF7cVpjzOwleRYN0Cv9mOqo4KVG2rf6ZIcJXNS3ePXL8mD0cMo4536GXSZq1ayvRGC0LzZ3KE=  ;
Received: from unknown (HELO ?127.0.0.1?) (markharw00d@194.106.34.5 with plain)
  by smtp004.mail.ukl.yahoo.com with SMTP; 28 Jul 2005 07:23:50 -0000
Message-ID: <42E88803.7090503@yahoo.co.uk>
Date: Thu, 28 Jul 2005 08:23:47 +0100
From: markharw00d <markharw00d@yahoo.co.uk>
User-Agent: Mozilla Thunderbird 1.0.5 (Windows/20050711)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: Lucene vs Derby (vs MySQL) for spatial indexing
References: <20050728014138.9EC4D10FB2B7@asf.osuosl.org>
In-Reply-To: <20050728014138.9EC4D10FB2B7@asf.osuosl.org>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

MySQL has spatial extensions now too.
Your queries lack any free-text criteria so are probably best handled by 
a database, not Lucene..

 >>In case anyone's interested, I'm writing a zoomable/pannable world map

Save yourself some time. Just use the Google maps API.  :-)


		
___________________________________________________________ 
How much free photo storage do you get? Store your holiday 
snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 08:04:29 2005
Return-Path: <java-user-return-15623-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 27713 invoked from network); 28 Jul 2005 08:04:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 08:04:29 -0000
Received: (qmail 95011 invoked by uid 500); 28 Jul 2005 08:04:22 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94993 invoked by uid 500); 28 Jul 2005 08:04:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94966 invoked by uid 99); 28 Jul 2005 08:04:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 01:04:22 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [147.83.41.105] (HELO mail.fib.upc.es) (147.83.41.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 01:04:15 -0700
Received: from [147.83.58.160] (tarragona.fib.upc.es [147.83.58.160])
	by mail.fib.upc.es (Postfix) with ESMTP id DB0241BB40;
	Thu, 28 Jul 2005 10:04:13 +0200 (CEST)
Message-ID: <42E8917D.1060205@fib.upc.edu>
Date: Thu, 28 Jul 2005 10:04:13 +0200
From: Daniel Cortes <dcortes@fib.upc.edu>
Organization: FIB
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org, otis_gospodnetic@yahoo.com
Subject: Re: another problem with Multisearcher
References: <20050727221256.96053.qmail@web31115.mail.mud.yahoo.com>
In-Reply-To: <20050727221256.96053.qmail@web31115.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scaned-FIB: AntiVirus/AntiSpam en fib.upc.es
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

It's very strange because the first search works good , but next search 
not works and give me the error message

java.io.IOException: Bad file descriptor
        at java.io.RandomAccessFile.seek(Native Method)
        at 
org.apache.lucene.store.FSInputStream.readInternal(FSDirectory.java:415)
        at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
        at 
org.apache.lucene.store.InputStream.readBytes(InputStream.java:57)
        at 
org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:220)
        at org.apache.lucene.store.InputStream.refill(InputStream.java:158)
        at org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
        at org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
        at 
org.apache.lucene.index.SegmentTermEnum.readTerm(SegmentTermEnum.java:142)
        at 
org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:115)
        at 
org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:143)
        at 
org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:137)
        at 
org.apache.lucene.index.TermInfosReader.terms(TermInfosReader.java:196)
        at 
org.apache.lucene.index.SegmentReader.terms(SegmentReader.java:230)
        at org.apache.lucene.search.PrefixQuery.rewrite(PrefixQuery.java:39)
        at 
org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:243)
        at 
org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:166)
        at org.apache.lucene.search.Query.weight(Query.java:84)
        at 
org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
        at 
org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:116)
        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
        at org.apache.lucene.search.Hits.<init>(Hits.java:43)
        at org.apache.lucene.search.Searcher.search(Searcher.java:33)
        at org.apache.lucene.search.Searcher.search(Searcher.java:27)

I've opened the index with Luke and the index are good.

My code that use Multisearcher:

this line I don't know what it do, but i think that is not the problem
private int[] required= 
{MultiFieldQueryParser.NORMAL_FIELD,MultiFieldQueryParser.NORMAL_FIELD,MultiFieldQueryParser.NORMAL_FIELD};
private IndexSearcher[] searchers;
       
//indexs have the path of my indexs Lucene

       for (int i = 0; i < indexs.length; i++) {
            searchers[i] = new IndexSearcher(getPath(indexs[i]));
       }
        searcher = new MultiSearcher(searchers);
        MultiSearcher searcher=iService.openMultiSearcher();
        SearchResults sr=null;
            Query buscar = 
MultiFieldQueryParser.parse(search_text,fields,required,analyzer);
            Hits encontrados=searcher.search(buscar);
            sr = new SearchResults(encontrados,userviewer,idPortal);
        searcher.close();



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 09:03:15 2005
Return-Path: <java-user-return-15624-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 42242 invoked from network); 28 Jul 2005 09:03:14 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 09:03:14 -0000
Received: (qmail 44881 invoked by uid 500); 28 Jul 2005 09:03:09 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 44819 invoked by uid 500); 28 Jul 2005 09:03:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 44805 invoked by uid 99); 28 Jul 2005 09:03:08 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 02:03:08 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 02:03:00 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 63EE213E2007; Thu, 28 Jul 2005 05:03:03 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-138-146.dyn.sprint-hsd.net [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id 8653713E2006
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 05:02:43 -0400 (EDT)
In-Reply-To: <CBECJKOBLBEIELOPAOGPIEGLCGAA.iabeyaratna@aconex.com>
References: <CBECJKOBLBEIELOPAOGPIEGLCGAA.iabeyaratna@aconex.com>
Mime-Version: 1.0 (Apple Message framework v730)
X-Priority: 3 (Normal)
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <8502390A-59AC-4461-A800-FC2DCEA21073@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Query text Tokenize issue 
Date: Thu, 28 Jul 2005 05:02:44 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.7 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 27, 2005, at 7:26 PM, Indu Abeyaratna wrote:

>
> I have a field index as keyword. And have two records "J400-C-V1- 
> S10-T1" and
> "J400-C-V-S10-T1"
>
> When I search for  "J400-C-V1-S10-T1", it returns me matching  
> record, but
> when I Search for "J400-C-V-S10-T1" it doesn't return the matching  
> one.
>
> Further I found that "J400-C-V-S10-T1" is incorrectly tokenised to  
> "J400-C"
> and "V-S10-T1" but nothing like that happened to "J400-C-V1-S10-T1".
>
> This happens when there is combination like "?-?-" and its get  
> tokenised
> into "?" and "?-".
>
> I attached test case for further clarification.
>
> I am using StandardAnalyser and query parser.
>
> Is this a bug in the lucene or JavaCC??  Or am I missing something  
> here? any
> suggestion to get away with this?

It's not a "bug" per se.... but rather just how StandardAnalyzer  
works.  StandardAnalyzer is a general-purpose text analyzer, and  
cannot reasonably deal with this issue and also deal with the much  
more common scenario of "hyphenated-text" that should be split into  
separate tokens.

As Otis said, this is really the job for a custom analyzer.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 09:11:56 2005
Return-Path: <java-user-return-15625-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 44067 invoked from network); 28 Jul 2005 09:11:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 09:11:56 -0000
Received: (qmail 51055 invoked by uid 500); 28 Jul 2005 09:11:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 51030 invoked by uid 500); 28 Jul 2005 09:11:50 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 51017 invoked by uid 99); 28 Jul 2005 09:11:50 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 02:11:50 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [130.75.2.41] (HELO mrelay3.uni-hannover.de) (130.75.2.41)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 02:11:42 -0700
Received: from mail.l3s.uni-hannover.de (server1.l3s.uni-hannover.de [130.75.87.1])
	by mrelay3.uni-hannover.de (8.12.10/8.12.10) with ESMTP id j6S9BjwE001917
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 11:11:45 +0200 (MEST)
Received: by mail.l3s.uni-hannover.de (Postfix, from userid 21011)
	id 48C6B1D64E4F; Thu, 28 Jul 2005 11:11:45 +0200 (CEST)
Received: from [130.75.87.185] (pc185.l3s.uni-hannover.de [130.75.87.185])
	by mail.l3s.uni-hannover.de (Postfix) with ESMTP id 82A411D64E4E
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 11:11:43 +0200 (CEST)
Message-ID: <42E8A150.3030506@l3s.de>
Date: Thu, 28 Jul 2005 11:11:44 +0200
From: Sergey Chernov <chernov@l3s.de>
Reply-To: chernov@l3s.de
Organization: L3S
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Index scalability, IDF normalization for distributed indices
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Spam-Checker-Version: SpamAssassin 3.0.4 (2005-06-05) on 
	server1.l3s.uni-hannover.de
X-Spam-Level: 
X-Greylist: Sender IP whitelisted, not delayed by milter-greylist-1.2.2 (mrelay3.uni-hannover.de [130.75.2.41]); Thu, 28 Jul 2005 11:11:45 +0200 (MEST)
X-Scanned-By: MIMEDefang 2.42
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-1.1 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.4
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi all,

I would like to know, if I use LUCENE in distributed environment, e.g. 
on two indices on different document sets and in different locations, 
does Searcher use local IDF values for every index separately during 
query execution or it computes and uses one global IDF value?

Another question, does LUCENE scale well to millions and dozens of 
millions documents?

Best regards,
Sergey Chernov

chernov@l3s.de
L3S Research Center
Deutscher Pavillon
Expo Plaza 1
30539 Hannover
Germany

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 09:37:51 2005
Return-Path: <java-user-return-15626-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52027 invoked from network); 28 Jul 2005 09:37:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 09:37:51 -0000
Received: (qmail 95262 invoked by uid 500); 28 Jul 2005 09:37:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 95237 invoked by uid 500); 28 Jul 2005 09:37:43 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 95224 invoked by uid 99); 28 Jul 2005 09:37:43 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 02:37:43 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [134.96.188.26] (HELO mail.dfki.de) (134.96.188.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 02:37:36 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 796D8E483E
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 11:37:36 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 4BCF1E483C
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 11:37:36 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
Content-Transfer-Encoding: 7bit
Message-Id: <920d976d9fac6df5a627dad57bf0de8c@activemath.org>
Content-Type: text/plain; charset=US-ASCII; format=flowed
To: java-user@lucene.apache.org
From: Paul Libbrecht <paul@activemath.org>
Subject: updating an index... with existing documents ?
Date: Thu, 28 Jul 2005 11:37:32 +0200
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


hi,

My mission is currently to update an index by marking adding a flag 
field on some documents.
For this, I seem to have the only following possibility:
- search for the documents in question, store them, filter them
- modify the documents in accordance
- delete the modified documents
- put back the documents

However, I seem to experiment and fear that unstored-fields will be 
lost underway... I, of course, do not wish to re-run the analysis 
process here (which is complex because of the xml-nature on the back).

Will these fields indeed be lost ?
Is there no way to "copy the token-streams" (as it's anyways stored in 
the index in some way) ?

thanks

paul


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 09:41:43 2005
Return-Path: <java-user-return-15627-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 52830 invoked from network); 28 Jul 2005 09:41:43 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 09:41:43 -0000
Received: (qmail 99514 invoked by uid 500); 28 Jul 2005 09:41:40 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98627 invoked by uid 500); 28 Jul 2005 09:41:36 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98614 invoked by uid 99); 28 Jul 2005 09:41:36 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 02:41:36 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 02:41:29 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id BD8E213E2007; Thu, 28 Jul 2005 05:41:34 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-138-146.dyn.sprint-hsd.net [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id 6151513E2006
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 05:41:29 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <191B11CF22BAC54292E97F3B5CDC9C8506C6B4@tlvmail7.corp.amdocs.com>
References: <191B11CF22BAC54292E97F3B5CDC9C8506C6B4@tlvmail7.corp.amdocs.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <80122688-87A9-4CBA-B6BC-7C80F243A325@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Regex for legal user search input
Date: Thu, 28 Jul 2005 05:41:29 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.8 required=5.0 tests=ALL_TRUSTED,AWL,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

This really requires some experimentation, and I encourage all that  
are curious to write a little bit of toy code to play with  
combinations of analyzers and QueryParser techniques.


On Jul 28, 2005, at 2:07 AM, Alex Kiselevski wrote:
> Just to make it clear for me. The last Lucene version supports  
> interior
> +/-.
> So, how looks the query that deals with "BOOK NAME" as keyword fields
> And I want to find C++ tutorial ?

C++ works just fine, but of course the analyzer is important -  
QueryParser won't mess with it though.

A Keyword field with "BOOK NAME" is trickier because of the space.   
If you use a KeywordAnalyzer (now found in the contrib/analyzers  
codebase) surrounding it with quotes would work I believe.

Let there be no doubt that QueryParser and how it interacts with the  
analysis process is fiddly stuff.  There are interactions with  
special operators, the analyzer, and escaping.

     Erik




>
> Thanks in advanvce
> Alex Kiselevski
>
> Development Expert, Amdocs Advanced Technologies
>
> +9.729.776.4346 (desk)
> +9.729.776.1504 (fax)
>
> AMDOCS > INTEGRATED CUSTOMER MANAGEMENT
>
>
> -----Original Message-----
> From: Erik Hatcher [mailto:erik@ehatchersolutions.com]
> Sent: Thursday, July 28, 2005 3:56 AM
> To: java-user@lucene.apache.org
> Subject: Re: Regex for legal user search input
>
> What version of Lucene are you using?   There was a change that
> helped with that situation such that interior +/- was not considered
> an operator.   That changed is in the 1.4 versions - might you be
> running a  previous version of Lucene?
>
>      Erik
>
>
>
> On Jul 27, 2005, at 6:42 PM, Derek Westfall wrote:
>
>
>> Is there a way to allow users to use + and - and special operators in
>> free-text searches, but also allow them to search for a last name  
>> like
>>
>
>
>> Smith-Jones? (which I'd have to escape?)
>>
>> Is there a regular expression to determine/fix this kind of user  
>> input
>>
>
>
>> so it is queryparser-legal?
>>
>> Ie they can't just type * or + in the search box.
>>
>> How are y'all handling this kind of thing?
>>
>> Derek
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>
> The information contained in this message is proprietary of Amdocs,
> protected from disclosure, and may be privileged.
> The information is intended to be conveyed only to the designated  
> recipient(s)
> of the message. If the reader of this message is not the intended  
> recipient,
> you are hereby notified that any dissemination, use, distribution  
> or copying of
> this communication is strictly prohibited and may be unlawful.
> If you have received this communication in error, please notify us  
> immediately
> by replying to the message and deleting it from your computer.
> Thank you.
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 11:23:25 2005
Return-Path: <java-user-return-15628-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 87762 invoked from network); 28 Jul 2005 11:23:21 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 11:23:21 -0000
Received: (qmail 93791 invoked by uid 500); 28 Jul 2005 11:23:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93768 invoked by uid 500); 28 Jul 2005 11:23:10 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93753 invoked by uid 99); 28 Jul 2005 11:23:10 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 04:23:10 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of lasse.lindgaard@gmail.com designates 64.233.184.204 as permitted sender)
Received: from [64.233.184.204] (HELO wproxy.gmail.com) (64.233.184.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 04:23:02 -0700
Received: by wproxy.gmail.com with SMTP id i5so397900wra
        for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 04:23:07 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=Iqhq7nKpb598c+PAOlxLl19felJ1PyiBcqUEAu0v3uTUa34hflePHcQ9K3izLEdKeuCMU4SwGZigl7gb2ryUydME0BU4Ans97X1oLdRGcV2RwjXc9pno6LZXbrQVn6Nx+owdwgMI5OhbfZFMAypgjct5TvEJSDgkdwyEi9rVzvc=
Received: by 10.54.11.11 with SMTP id 11mr756656wrk;
        Thu, 28 Jul 2005 04:23:07 -0700 (PDT)
Received: by 10.54.146.15 with HTTP; Thu, 28 Jul 2005 04:23:07 -0700 (PDT)
Message-ID: <300d7b1905072804235a08fe5e@mail.gmail.com>
Date: Thu, 28 Jul 2005 13:23:07 +0200
From: Lasse L <lasse.lindgaard@gmail.com>
Reply-To: Lasse L <lasse.lindgaard@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: OutOfMemoryError
In-Reply-To: <8c4e686105071308452eb5c647@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <300d7b19050713080663169823@mail.gmail.com>
	 <8c4e686105071308452eb5c647@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi,

If I replace my lucene wrapper with a dummy one the problem goes away.
If I close my index-thread every 30 minutes and start a new thread it
also goes away.
If I exit the thread on OutOfMemory errors it regains all memory.
I do not use static variables. If I did they wouldn't get garbage
collected anyway when the thread exits.

My guess: Lucene builds up something in ThreadLocals that only gets
garbage collected when the thread exits.

Maybe it is related to this bug:
http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=3D4414045

- I can't upgrade the jdk without also upgrading the server. Something
that won't happen until EOL next year :(

Original message:
http://mail-archives.apache.org/mod_mbox/lucene-java-user/200507.mbox/%3c30=
0d7b19050713080663169823@mail.gmail.com%3e

I consider my problem more or less solved with the workaround of
restarting the thread.
It is unsatisfactory but it seems to work.

/Lasse

On 7/13/05, Ian Lea <ian.lea@gmail.com> wrote:
> Might be interesting to know if it crashed on 20000 docs if you ran it
> with heap size of 512Mb.  I guess you've already tried with default
> merge values.  Shouldn't need to optimize after every 100 docs.  jdk
> 1.3 is pretty ancient - can you use 1.5?
>=20
> I'd try it with a larger heap size, and then look for leaks in your
> code. Maybe run the load program without the lucene calls and see if
> it still fails.
>=20
>=20
> --
> Ian.
>=20
>=20
> On 13/07/05, Lasse L <lasse.lindgaard@gmail.com> wrote:
> > Hi,
> >
> > I can see that this has been up before, but I still hope to get some
> > advice based on my specific environment.
> >
> > I index some documents with 26 fields in them. The size 10000 indexed
> > documents is 4mb, so it shouldn't be overwhelming amounts of data
> > compared to what I have heard lucene can do.
> >
> > Nevertheless. When I run my daemon thread at night it consistently
> > crashes with an OutOfMemoryError after about 10000 documents. If I
> > restart the bea 6.1 / sun jdk 1.3 server it continues without a hitch,
> > then crashes again after about 10000 more documents.
> >
> > I manually call optimize after each 100 documents.
> >
> > I create my IndexWriter like this:
> >                 IndexWriter writer;
> >                 writer =3D new IndexWriter(_indexPath, getAnalyzer(), f=
alse);
> >                 writer.setUseCompoundFile(true);
> >                 writer.mergeFactor =3D 5;
> >                 writer.minMergeDocs =3D 10;
> >                 writer.maxMergeDocs =3D 500;
> >
> > My heap size is just 256mb. I can double that easy, but I can't make
> > it 15 times larger.
> >
> > I need to index a total of 150000 documents. The creation of a
> > document takes about 1 second so performance from lucene is not so
> > critical. Just don't crash on me.
> >
> > I read elsewhere about some gc issues on jdk 1.3. Is that true and is
> > there some workaround I would need to do? Threadlocals? static
> > variables that can be reset?
> >
> > I didn't get around to run a profiler on our app to see if the way I
> > use our own code somehow creates a leak. But I don't see why it would.
> >
> > ---------------------------------------------------------------------
> > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> > For additional commands, e-mail: java-user-help@lucene.apache.org
> >
> >
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 12:26:26 2005
Return-Path: <java-user-return-15629-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10020 invoked from network); 28 Jul 2005 12:26:25 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 12:26:25 -0000
Received: (qmail 91030 invoked by uid 500); 28 Jul 2005 12:26:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 91010 invoked by uid 500); 28 Jul 2005 12:26:17 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90994 invoked by uid 99); 28 Jul 2005 12:26:17 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 05:26:17 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 05:26:10 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 0361913E2007; Thu, 28 Jul 2005 08:26:14 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 7D27A13E2006
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 08:26:11 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <920d976d9fac6df5a627dad57bf0de8c@activemath.org>
References: <920d976d9fac6df5a627dad57bf0de8c@activemath.org>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <3A9336CE-0661-442D-A544-932219DC03E3@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: updating an index... with existing documents ?
Date: Thu, 28 Jul 2005 08:26:13 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.7 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Paul,

It is possible to reconstruct a document from the index, but it is a  
potentially lossy proposition, since stemming and other manglings  
might have gone on.  Look at Luke and see how it does it (you can  
"reconstruct and edit" a document from its UI).

     Erik

On Jul 28, 2005, at 5:37 AM, Paul Libbrecht wrote:

>
> hi,
>
> My mission is currently to update an index by marking adding a flag  
> field on some documents.
> For this, I seem to have the only following possibility:
> - search for the documents in question, store them, filter them
> - modify the documents in accordance
> - delete the modified documents
> - put back the documents
>
> However, I seem to experiment and fear that unstored-fields will be  
> lost underway... I, of course, do not wish to re-run the analysis  
> process here (which is complex because of the xml-nature on the back).
>
> Will these fields indeed be lost ?
> Is there no way to "copy the token-streams" (as it's anyways stored  
> in the index in some way) ?
>
> thanks
>
> paul
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 12:37:10 2005
Return-Path: <java-user-return-15630-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 13202 invoked from network); 28 Jul 2005 12:37:09 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 12:37:09 -0000
Received: (qmail 4526 invoked by uid 500); 28 Jul 2005 12:37:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 4502 invoked by uid 500); 28 Jul 2005 12:37:02 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 4489 invoked by uid 99); 28 Jul 2005 12:37:02 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 05:37:02 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [134.96.188.26] (HELO mail.dfki.de) (134.96.188.26)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 05:36:54 -0700
Received: from mail.dfki.de (localhost.dfki.uni-sb.de [127.0.0.1])
	by localhost (Postfix) with ESMTP id 410B9E47E2
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 14:36:54 +0200 (CEST)
Received: from [IPv6:::1] (dave.dfki.uni-sb.de [134.96.184.220])
	by mail.dfki.de (Postfix) with ESMTP id 1BAC1E47C5
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 14:36:54 +0200 (CEST)
Mime-Version: 1.0 (Apple Message framework v622)
In-Reply-To: <3A9336CE-0661-442D-A544-932219DC03E3@ehatchersolutions.com>
References: <920d976d9fac6df5a627dad57bf0de8c@activemath.org> <3A9336CE-0661-442D-A544-932219DC03E3@ehatchersolutions.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Message-Id: <6628f3df18dd5d80dc01b89e476e307b@activemath.org>
Content-Transfer-Encoding: quoted-printable
From: Paul Libbrecht <paul@activemath.org>
Subject: Re: updating an index... with existing documents ?
Date: Thu, 28 Jul 2005 14:36:50 +0200
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.622)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Dare I ask wether this implies that the fields are stored ?

thanks

paul


Le 28 juil. 05, =E0 14:26, Erik Hatcher a =E9crit :
> It is possible to reconstruct a document from the index, but it is a=20=

> potentially lossy proposition, since stemming and other manglings=20
> might have gone on.  Look at Luke and see how it does it (you can=20
> "reconstruct and edit" a document from its UI).
>
> On Jul 28, 2005, at 5:37 AM, Paul Libbrecht wrote:
>> My mission is currently to update an index by marking adding a flag=20=

>> field on some documents.
>> For this, I seem to have the only following possibility:
>> - search for the documents in question, store them, filter them
>> - modify the documents in accordance
>> - delete the modified documents
>> - put back the documents
>>
>> However, I seem to experiment and fear that unstored-fields will be=20=

>> lost underway... I, of course, do not wish to re-run the analysis=20
>> process here (which is complex because of the xml-nature on the=20
>> back).
>>
>> Will these fields indeed be lost ?
>> Is there no way to "copy the token-streams" (as it's anyways stored=20=

>> in the index in some way) ?
>>
>> thanks
>>
>> paul
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 12:44:43 2005
Return-Path: <java-user-return-15631-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 15122 invoked from network); 28 Jul 2005 12:44:42 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 12:44:42 -0000
Received: (qmail 14447 invoked by uid 500); 28 Jul 2005 12:44:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14424 invoked by uid 500); 28 Jul 2005 12:44:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14411 invoked by uid 99); 28 Jul 2005 12:44:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 05:44:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [70.19.127.127] (HELO mail01.nyc-ofc.criticalmention.com) (70.19.127.127)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 05:44:26 -0700
Received: from michael (unknown [192.168.42.2])
	by mail01.nyc-ofc.criticalmention.com (Postfix) with ESMTP id 1A1DE122DF
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 08:44:28 -0400 (EDT)
From: "Michael Celona" <michael@nyclabs.com>
To: <java-user@lucene.apache.org>
Subject: RE: Hardware Question
Date: Thu, 28 Jul 2005 08:44:27 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <20050727222025.25867.qmail@web31110.mail.mud.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcWS+Wdy2qXz6KUiS4m5KbWQKLYRUwAeHlBg
Message-Id: <20050728124428.1A1DE122DF@mail01.nyc-ofc.criticalmention.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Someone posted to turn CFS off.  I wasn't sure what that was, after I looked
it up I still unsure why someone use that for Lucene.

Michael  

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Wednesday, July 27, 2005 6:20 PM
To: java-user@lucene.apache.org; mbennett@ideaeng.com
Subject: RE: Hardware Question

What's CFS?  Cryptographic File System?  I'm not being sarcastic here,
I'm really curious about what you referring to.

Otis

--- Mark Bennett <mbennett@ideaeng.com> wrote:

> Also, non-hardware, have you considered turning off CFS?
> 
> Our client told us this sped up their system.
> 
> -----Original Message-----
> From: Chris Lamprecht [mailto:clamprecht@gmail.com] 
> Sent: Wednesday, July 27, 2005 11:52 AM
> To: java-user@lucene.apache.org
> Subject: Re: Hardware Question
> 
> It depends on your usage.   When you search, does your code also
> retrieve the docs (using Searcher.document(n), for instance).  If
> your
> index is 8GB, part of that is the "indexed" part (searchable), and
> part is just "stored" document fields.
> 
> It may be as simple as adding more RAM (try 4, 6, and 8GB) -- but not
> for your java heap -- instead for the linux filesystem cache.
> 
> I suggest first adding some simple timing output to your search.  You
> want to see how much time you are spending in the call to search(),
> and then how much time you're spending pulling the Documents from the
> index (and how much time you're spending in other parts of your
> search
> application).   The call to search() is typically CPU-intensive,
> while
> pulling Documents is I/O-bound.  And RAM is about 5 or 6 orders of
> magnitude faster than disk I/O.
> 
> -chris
> 
> On 7/27/05, Michael Celona <mcelona@criticalmention.com> wrote:
> > I am going over ways to increase overall search performance.
> > 
> > 
> > 
> > Currently, I have a dual zeon with 2G of ram dedicated to java
> searching
> an
> > 8G index on one 7200 rpm drive.
> > 
> > 
> > 
> > Which will give the greatest payoff?
> > 
> > 
> > 
> > 1)       Going to 64bit server and giving more memory to java with
> faster
> > drives
> > 
> > 
> > 
> > Or
> > 
> > 
> > 
> > 2)       Staying with 32bit server but going with faster drives and
> > splitting the operating system from the index drive.
> > 
> > 
> > 
> > 
> > 
> > Basically, what are the performance improvements from separating
> the
> > operation system form the index drive(s).
> > 
> > 
> > 
> > 
> > 
> > Thanks,
> > 
> > Michael
> > 
> > 
> > 
> > 
> >
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 12:54:00 2005
Return-Path: <java-user-return-15632-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 18412 invoked from network); 28 Jul 2005 12:54:00 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 12:54:00 -0000
Received: (qmail 31839 invoked by uid 500); 28 Jul 2005 12:53:48 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 31807 invoked by uid 500); 28 Jul 2005 12:53:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 31739 invoked by uid 99); 28 Jul 2005 12:53:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 05:53:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 05:53:40 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 7E06913E2007; Thu, 28 Jul 2005 08:53:44 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id B23D313E2006
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 08:53:38 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <6628f3df18dd5d80dc01b89e476e307b@activemath.org>
References: <920d976d9fac6df5a627dad57bf0de8c@activemath.org> <3A9336CE-0661-442D-A544-932219DC03E3@ehatchersolutions.com> <6628f3df18dd5d80dc01b89e476e307b@activemath.org>
Content-Type: text/plain; charset=ISO-8859-1; delsp=yes; format=flowed
Message-Id: <6331EA1F-E73C-4B17-8993-60D6F25C09DA@ehatchersolutions.com>
Content-Transfer-Encoding: quoted-printable
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: updating an index... with existing documents ?
Date: Thu, 28 Jul 2005 08:53:39 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.6 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 28, 2005, at 8:36 AM, Paul Libbrecht wrote:
> Dare I ask wether this implies that the fields are stored ?

I don't quite understand.  The "reconstruct" feature of Luke (and =20
thus the code you can borrow from) does not require that fields are =20
stored - it pulls the indexed terms from the index and puts it back =20
together.  Again, this is risky business depending on the analysis =20
process that you used to originally index a document.

Give Luke a try to see it first-hand.

     Erik


>
> thanks
>
> paul
>
>
> Le 28 juil. 05, =E0 14:26, Erik Hatcher a =E9crit :
>
>> It is possible to reconstruct a document from the index, but it is =20=

>> a potentially lossy proposition, since stemming and other =20
>> manglings might have gone on.  Look at Luke and see how it does it =20=

>> (you can "reconstruct and edit" a document from its UI).
>>
>> On Jul 28, 2005, at 5:37 AM, Paul Libbrecht wrote:
>>
>>> My mission is currently to update an index by marking adding a =20
>>> flag field on some documents.
>>> For this, I seem to have the only following possibility:
>>> - search for the documents in question, store them, filter them
>>> - modify the documents in accordance
>>> - delete the modified documents
>>> - put back the documents
>>>
>>> However, I seem to experiment and fear that unstored-fields will =20
>>> be lost underway... I, of course, do not wish to re-run the =20
>>> analysis process here (which is complex because of the xml-nature =20=

>>> on the back).
>>>
>>> Will these fields indeed be lost ?
>>> Is there no way to "copy the token-streams" (as it's anyways =20
>>> stored in the index in some way) ?
>>>
>>> thanks
>>>
>>> paul
>>>
>>>
>>> --------------------------------------------------------------------=20=

>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 13:44:51 2005
Return-Path: <java-user-return-15633-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 49034 invoked from network); 28 Jul 2005 13:44:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 13:44:50 -0000
Received: (qmail 18142 invoked by uid 500); 28 Jul 2005 13:44:43 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 18093 invoked by uid 500); 28 Jul 2005 13:44:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 18080 invoked by uid 99); 28 Jul 2005 13:44:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 06:44:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [70.19.127.127] (HELO mail01.nyc-ofc.criticalmention.com) (70.19.127.127)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 06:44:34 -0700
Received: from michael (unknown [192.168.42.2])
	by mail01.nyc-ofc.criticalmention.com (Postfix) with ESMTP id 6B27012048
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 09:44:39 -0400 (EDT)
From: "Michael Celona" <michael@nyclabs.com>
To: <java-user@lucene.apache.org>
Subject: RE: Hardware Question
Date: Thu, 28 Jul 2005 09:44:39 -0400
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Mailer: Microsoft Office Outlook, Build 11.0.5510
In-Reply-To: <20050727222432.30530.qmail@web31114.mail.mud.yahoo.com>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Thread-Index: AcWS+fqrKtvxlLLWTDOZUCxBG6htygAf+A+A
Message-Id: <20050728134439.6B27012048@mail01.nyc-ofc.criticalmention.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Will using a striped raid configuration (i.e. raid 5/10 ) yield the same
performance improvements as using multiple drives with ParallelIndexReader.

Also, for searching are you suggesting using ParallelMultiSearcher against
multiple indexes on separate drives and/or using ParallelIndexReader.

Michael

-----Original Message-----
From: Otis Gospodnetic [mailto:otis_gospodnetic@yahoo.com] 
Sent: Wednesday, July 27, 2005 6:25 PM
To: java-user@lucene.apache.org
Subject: Re: Hardware Question

Option 1) will most likely give you more, but there are a number of
other things you could do before going for monster hardware.  Splitting
the index, more than 1 disk, ParallelIndexReader, the patch that splits
index files into a number of data files, etc.

Otis


--- Michael Celona <mcelona@criticalmention.com> wrote:

> I am going over ways to increase overall search performance.  
> 
>  
> 
> Currently, I have a dual zeon with 2G of ram dedicated to java
> searching an
> 8G index on one 7200 rpm drive.
> 
>  
> 
> Which will give the greatest payoff?
> 
>  
> 
> 1)       Going to 64bit server and giving more memory to java with
> faster
> drives 
> 
>  
> 
> Or
> 
>  
> 
> 2)       Staying with 32bit server but going with faster drives and
> splitting the operating system from the index drive.
> 
>  
> 
>  
> 
> Basically, what are the performance improvements from separating the
> operation system form the index drive(s).
> 
>  
> 
>  
> 
> Thanks,
> 
> Michael
> 
>  
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 14:24:34 2005
Return-Path: <java-user-return-15634-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 72986 invoked from network); 28 Jul 2005 14:24:34 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 14:24:34 -0000
Received: (qmail 3492 invoked by uid 500); 28 Jul 2005 14:24:24 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 3454 invoked by uid 500); 28 Jul 2005 14:24:24 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 3430 invoked by uid 99); 28 Jul 2005 14:24:23 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 07:24:23 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [207.69.200.28] (HELO pop04.mail.atl.earthlink.net) (207.69.200.28)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 07:24:16 -0700
Received: from wamui-backed.atl.sa.earthlink.net ([209.86.224.25])
	by pop04.mail.atl.earthlink.net with esmtp (Exim 3.36 #10)
	id 1Dy9J7-0001nw-00
	for java-user@lucene.apache.org; Thu, 28 Jul 2005 10:24:21 -0400
Message-ID: <7199239.1122560661210.JavaMail.root@wamui-backed.atl.sa.earthlink.net>
Date: Thu, 28 Jul 2005 09:24:20 -0500 (GMT-05:00)
From: Andrew Boyd <andrew.boyd@mindspring.com>
Reply-To: Andrew Boyd <Andrew.Boyd@bbtech.net>
To: java-user@lucene.apache.org
Subject: Re: Lucene vs Derby (vs MySQL) for spatial indexing
Mime-Version: 1.0
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit
X-Mailer: Earthlink Zoo Mail 1.0
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I did a small demonstration application using lucene's range query and it worked fine.
I didn't use a DB at all


"Mosul_Iraq.html", "E043.13535"
"Mosul_Iraq.html", "N36.33608"

Having the directional (E, W, N, S) worked out well 

Andrew


-----Original Message-----
From: Barry Carter <barry.carter@bigfoot.com>
Sent: Jul 27, 2005 8:42 PM
To: java-user@lucene.apache.org
Subject: Lucene vs Derby (vs MySQL) for spatial indexing

Does Lucene optimize range queries that use Sort and/or limit the number 
of hits?

My situation: I have a listing of 2 million cities, with the name,
latitude, longitude, and population of each city. I want to efficiently
find the 50 most populous cities between (for example) latitudes 35.2 and
41.7 and longitudes 19.8 and 27.9

Assuming I normalize the data to be lexically sorted (in other words, I'll
write 7.52 as 007.52, so it comes before 111.01 instead of after it), can
I use a range query on the latitude and longitude fields (limiting the
number of hits to 50, and sorting by population descending) to efficiently
find what I want?

If sorting isn't efficient, can I simply boost each record by its
population (so that high population cities are returned first) and then
limit the number of hits (so I see only the 50 most populous cities in a
given area)?

I tried this in Derby, the code being:

Statement s = DriverManager.getConnection("jdbc:derby:test;create=false").createStatement();
s.setMaxRows(50);
rs = s.executeQuery("SELECT * FROM cities where lat>35.2 and lat<41.7 and lon>19.8 and lon<27.9 ORDER BY population desc");

but Derby inefficiently looks at ALL the cities matching my criteria (even
with indexes on lat and lon and population) before returning the top 50
(this is really bad when the condition is "lat>-90 and lat<90 and lon>-180
and lon<-180", for example).

The MySQL equivalent ("SELECT * FROM cities where lat>35.2 and lat<41.7
and lon>19.8 and lon<27.9 ORDER BY population desc LIMIT 50") with the
same indexes is more efficient (it uses the LIMIT condition to optimize
the query), and using MySQL w/ spatial indexes is even more efficient.  
However, I'm doing this as part of a Java application, so need something
that can be embedded in Java.

Is this a reasonable use of Lucene? Or is coercing Lucene into doing
range-based numeric queries a bad idea?

(In case anyone's interested, I'm writing a zoomable/pannable world map,
so finding the biggest cities in a given area quickly is important)


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org



Andrew Boyd
Software Architect
Sun Certified J2EE Architect
B&B Technical Services Inc.
205.422.2557

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 14:44:29 2005
Return-Path: <java-user-return-15635-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 81776 invoked from network); 28 Jul 2005 14:44:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 14:44:29 -0000
Received: (qmail 32618 invoked by uid 500); 28 Jul 2005 14:44:05 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 32596 invoked by uid 500); 28 Jul 2005 14:44:04 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 32564 invoked by uid 99); 28 Jul 2005 14:44:04 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 07:44:04 -0700
X-ASF-Spam-Status: No, hits=0.5 required=10.0
	tests=FROM_ENDS_IN_NUMS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [129.215.166.64] (HELO grassmarket.ucs.ed.ac.uk) (129.215.166.64)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 07:43:56 -0700
Received: from grassmarket.ucs.ed.ac.uk (localhost [127.0.0.1])
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.10) with ESMTP id j6SEhxWn009081;
	Thu, 28 Jul 2005 15:43:59 +0100 (BST)
Received: (from nobody@localhost)
	by grassmarket.ucs.ed.ac.uk (8.12.10/8.12.9/Submit) id j6SEhxw8009080;
	Thu, 28 Jul 2005 15:43:59 +0100 (BST)
X-Authentication-Warning: grassmarket.ucs.ed.ac.uk: nobody set sender to s0454888@sms.ed.ac.uk using -f
Received: from sausages.cache.ed.ac.uk (sausages.cache.ed.ac.uk [129.215.16.39]) 
	by sms.ed.ac.uk (IMP) with HTTP 
	for <s0454888@sms.ed.ac.uk>; Thu, 28 Jul 2005 15:43:59 +0100
Message-ID: <1122561839.42e8ef2f93df8@sms.ed.ac.uk>
Date: Thu, 28 Jul 2005 15:43:59 +0100
From: Dave Kor <s0454888@sms.ed.ac.uk>
To: java-user@lucene.apache.org, Andrew Boyd <Andrew.Boyd@bbtech.net>
Subject: Re: Lucene vs Derby (vs MySQL) for spatial indexing
References: <7199239.1122560661210.JavaMail.root@wamui-backed.atl.sa.earthlink.net>
In-Reply-To: <7199239.1122560661210.JavaMail.root@wamui-backed.atl.sa.earthlink.net>
MIME-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-15
Content-Transfer-Encoding: 8bit
User-Agent: Internet Messaging Program (IMP) 3.2.3
X-Scanned-By: MIMEDefang 2.33 (www . roaringpenguin . com / mimedefang)
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Quoting Andrew Boyd <andrew.boyd@mindspring.com>:

> I did a small demonstration application using lucene's range query and it
> worked fine.
> I didn't use a DB at all
>
>
> "Mosul_Iraq.html", "E043.13535"
> "Mosul_Iraq.html", "N36.33608"
>
> Having the directional (E, W, N, S) worked out well
>
> Andrew

The reason Lucene is called a search engine and not a database is because it is
optimized for text-data or data which obey zipf's law. Sure, you can use Lucene
on data that doesn't obey zipf's law, but there will be an linearly increasing
(or is it exponential?) performance cost. As you add more ordinal data
(especially floating point numbers) to Lucene, you increase the time taken for
each and every single query.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 16:07:49 2005
Return-Path: <java-user-return-15636-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 24588 invoked from network); 28 Jul 2005 16:07:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 16:07:49 -0000
Received: (qmail 17918 invoked by uid 500); 28 Jul 2005 16:07:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17901 invoked by uid 500); 28 Jul 2005 16:07:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17888 invoked by uid 99); 28 Jul 2005 16:07:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 09:07:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fraschetti@gmail.com designates 64.233.162.205 as permitted sender)
Received: from [64.233.162.205] (HELO zproxy.gmail.com) (64.233.162.205)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 09:07:33 -0700
Received: by zproxy.gmail.com with SMTP id n29so365079nzf
        for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 09:07:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=kpLA/vq6r7m+YCkFAbb41vO/YmsSNvuLrVJsyw3Xd6niYokG6f/fqYjqARb4o46kMJb7jfuXCcW6nbjSI1vZY7Sr99W0N8ph+Qp6qzub0+pfo9RLOdtSjhOnFUBXhVU92RJWOu8earEwh557PB7vpMZbYmCj+u7zuMr6xSZRL14=
Received: by 10.36.75.10 with SMTP id x10mr2063567nza;
        Thu, 28 Jul 2005 09:07:17 -0700 (PDT)
Received: by 10.36.55.12 with HTTP; Thu, 28 Jul 2005 09:07:17 -0700 (PDT)
Message-ID: <cbdebdf805072809072d1235bf@mail.gmail.com>
Date: Thu, 28 Jul 2005 09:07:17 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
Reply-To: Chris Fraschetti <fraschetti@gmail.com>
To: java-user@lucene.apache.org
Subject: Index merge and java heap space
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've read of people combining smaller indexer to help distribute
indexing and such, but I've been unable to find any descriptions of
large index merges. I've seen a post of two in regards to a merge
taking a nice amount of heap space (I've also observed this) but I
wanted to poll you folks to see how merging two indexes actually
performs on a large set of data. Does there read a point to where the
indexes are similar too large for the JVM to handle or does index size
(either of them) not have that great of an affect on merge memory
usage? Any success stories out there with using merge on a large
scale?

Thanks in advance

--=20
___________________________________________________
Chris Fraschetti
e fraschetti@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 16:39:32 2005
Return-Path: <java-user-return-15637-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43004 invoked from network); 28 Jul 2005 16:39:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 16:39:29 -0000
Received: (qmail 77283 invoked by uid 500); 28 Jul 2005 16:39:20 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 77259 invoked by uid 500); 28 Jul 2005 16:39:20 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 77228 invoked by uid 99); 28 Jul 2005 16:39:20 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 09:39:19 -0700
X-ASF-Spam-Status: No, hits=-0.0 required=10.0
	tests=SPF_HELO_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of chris.may@warwick.ac.uk designates 137.205.128.8 as permitted sender)
Received: from [137.205.128.8] (HELO mail-relay-2.warwick.ac.uk) (137.205.128.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 09:39:08 -0700
Received: from localhost (localhost [127.0.0.1])
	by mail-relay-2.csv.warwick.ac.uk (8.12.11/8.12.9) with ESMTP id j6SGdDvm023585
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 17:39:13 +0100 (BST)
Received: from mail-relay-2.csv.warwick.ac.uk ([127.0.0.1])
 by localhost (campion [127.0.0.1]) (amavisd-new, port 10024) with LMTP
 id 20252-12-2 for <java-user@lucene.apache.org>;
 Thu, 28 Jul 2005 17:39:05 +0100 (BST)
Received: from mail.csv.warwick.ac.uk (root@mail [137.205.128.10])
	by mail-relay-2.csv.warwick.ac.uk (8.12.11/8.12.9) with ESMTP id j6SGcHgT023364
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 17:38:17 +0100 (BST)
X-Envelope-From: chris.may@warwick.ac.uk
Received: from [137.205.194.211] (liathach [137.205.194.211])
	by mail.csv.warwick.ac.uk (8.12.10/8.12.10) with ESMTP id j6SGbwbT006494
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 17:37:59 +0100 (BST)
Mime-Version: 1.0 (Apple Message framework v733)
In-Reply-To: <38EA254E-A1A7-422B-A146-6003BAF2C83A@ganyo.com>
References: <A7EFFB8D-C7DB-48A9-831F-A934ED012B28@warwick.ac.uk> <557EFEDE-002B-41BA-B787-5DEB5940AF52@ehatchersolutions.com> <9D54CF77-90DD-4F5E-B0CF-40FC921F5E4B@warwick.ac.uk> <38EA254E-A1A7-422B-A146-6003BAF2C83A@ganyo.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <AD4091EA-831D-44F4-92EC-71ED4255E2B2@warwick.ac.uk>
Content-Transfer-Encoding: 7bit
From: Chris May <chris.may@warwick.ac.uk>
Subject: Re: Searching a URL with a PrefixQuery / Too Many Clauses (again...)
Date: Thu, 28 Jul 2005 17:37:53 +0100
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.733)
X-Virus-Scanned: by amavisd-new
X-Virus-Scanned: amavisd-new at warwick.ac.uk
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Works beautifully (at least on my 30K-document test index ). I'll  
need to do some fiddling if I want to allow partial URLs (i.e. http:// 
www2.warwick.ac.uk/ab* to match http://www2.warwick.ac.uk/about) but  
I can see how to do that, I think (and I'm not sure I need it anyway).

  Thanks Scott!

Incidentally, is there an easy way to make QueryParser not treat the  
colon in 'http://' as a term separator? It seems that URLS get broken  
into two chunks ('http' and 'www.warwick.ac.uk/somewhere')  before  
they get fed to my custom analyzer. I got round it by just  
constructing the PhraseQuery by hand,  but I wonder if there's an  
easier way ?

Chris

On 28 Jul 2005, at 02:02, Scott Ganyo wrote:

> Chris,
>
> How about indexing the domain as one field and each part of the  
> path as separate terms in another field?  I'm sure you've probably  
> already thought of doing this... and maybe discarded the idea  
> because you'd lose the position information.  However, even though  
> you can't just simply split the URL on '/' and shove it into the  
> field, you can add the position information back into the term and  
> then put it into the field.  Then, you would be able to completely  
> ditch the prefix query and still retrieve the documents using the  
> entire, ordered path in (I think) the most efficient way possible.
>
> For example:
>
> http://www2.warwick.ac.uk/fac/soc/law/ug/prospective/degrees/ 
> modules/commonlaw/
>
> becomes something like (using n/*** to identify the position):
>
> domain: www2.warwick.ac.uk
> path: 1/fac, 2/soc, 3/law, 4/ug, 5/propective, 6/degrees, 7/ 
> modules, 8/commonlaw
>
> And you could search based on any prefix you desired.  For example  
> searching for this:
>
> http://www2.warwick.ac.uk/fac/soc/law/*
>
> would end up being a Lucene search that looks something like this  
> (note: not query parser syntax!):
>
> domain: www2.warwick.ac.uk AND path: 1/fac AND path: 2/soc AND  
> path: 3/law
>
> Does that make sense?  Would it work for you?
>
> S
>
> On Jul 27, 2005, at 3:56 PM, Chris May wrote:
>
>
>> Always domain + part of a path e.g.
>>
>> url:http://blogs.warwick.ac.uk/chrismay/*
>>
>> or
>>
>> url:http://www2.warwick.ac.uk/fac/soc/law/ug/prospective/degrees/ 
>> modules/commonlaw/*
>>
>> or
>>
>> url:http://www2.warwick.ac.uk/services/its/*
>>
>>
>> ... and so on. Part of the problem is that we may need to go an  
>> arbitrary number of levels down the path to get an acceptably  
>> small set of documents to start from - we couldn't impose a rule  
>> that said something like 'specify the first 2 directories on the  
>> path' (c.f my second example). We wouldn't need to query for the  
>> same path over different domains though (e.g. url:*.warwick.ac.uk/ 
>> about/* )
>>
>> thanks
>>
>> Chris
>>
>>
>>
>>
>> On 27 Jul 2005, at 21:33, Erik Hatcher wrote:
>>
>>
>>
>>> Could you give some examples of the types of PrefixQuery's you'd  
>>> like to use?   Is it always at a granularity of domain and path?   
>>> Or are you wanting to do a prefix pieces of the domain and path?
>>>
>>>     Erik
>>>
>>> On Jul 27, 2005, at 3:47 PM, Chris May wrote:
>>>
>>>
>>>
>>>
>>>> First, apologies for what seems to be something of an FAQ.
>>>>
>>>> However, I've not been able to find an answer either in LIA or  
>>>> in the relevant section of the FAQ (http://wiki.apache.org/ 
>>>> jakarta-lucene/ 
>>>> LuceneFAQ#head-06fafb5d19e786a50fb3dfb8821a6af9f37aa831)
>>>>
>>>> My setup is as follows: I have an index of a few hundred  
>>>> thousand web pages. I'd like the be able to construct queries  
>>>> that search for some arbitrary text within a specified URL. Kind  
>>>> of like google's syntax
>>>>
>>>> searchterm +site:www.foo.com/some/section
>>>>
>>>> So, I have the page title & content indexed, and the URL stored  
>>>> as a keywords field, and I imagined that I'd be able to  
>>>> construct a query something like this:
>>>>
>>>> String[] fields = new String[]  
>>>> {DocumentFields.TITLE,DocumentFields.CONTENT};
>>>> Query searchTextQuery = MultiFieldQueryParser.parse 
>>>> (request.getSearchQuery(), fields, analyzer);
>>>> PrefixQuery urlPrefix = new PrefixQuery(new Term 
>>>> (DocumentFields.URL, request.getUrlPrefix()));
>>>> hits = searcher.search(searchTextQuery, new QueryFilter 
>>>> (urlPrefix));
>>>>
>>>> However, as soon as the set of documents returned by the  
>>>> prefixquery is more than a thousand or so, I get a  
>>>> TooManyClausesException, as you might expect.
>>>>
>>>> AFAICS the solutions suggested in the FAQ don't seem to apply  
>>>> here: I'm already using a Filter, and that's not helping (pace  
>>>> suggestion 1), I don't think I can reduce the number of terms in  
>>>> the index, else my URLs wouldn't be unique any more, and  
>>>> increasing the number of clauses seems like a poor choice from a  
>>>> scalability point of view - I anticipate queries that could  
>>>> filter perhaps a hundred thousand documents or so.
>>>>
>>>> I'm guessing that it might be possible to do something smart by  
>>>> splitting the URL up into multiple fields - for example, one for  
>>>> the host and one for the path, or even one for the host and one  
>>>> for host+path together - but I'm not clear on exactly how I'd  
>>>> use the two fields, and how they'd help. Can someone enlighten me?
>>>>
>>>> Thanks in advance
>>>>
>>>> Chris
>>>>
>>>>
>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 16:40:07 2005
Return-Path: <java-user-return-15638-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 43219 invoked from network); 28 Jul 2005 16:40:06 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 16:40:06 -0000
Received: (qmail 78920 invoked by uid 500); 28 Jul 2005 16:39:59 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 78900 invoked by uid 500); 28 Jul 2005 16:39:59 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 78887 invoked by uid 99); 28 Jul 2005 16:39:59 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 09:39:59 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.108.181.138] (HELO quimby.programmfabrik.de) (193.108.181.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 09:39:51 -0700
Received: from [84.188.235.74] (helo=xen)
	by quimby.programmfabrik.de with asmtp (Exim 3.35 #1 (Debian))
	id 1DyAJZ-0004iJ-00
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 17:28:53 +0200
Received: from [192.168.0.222] (helo=[127.0.0.1])
	by xen with esmtp (Exim 4.34 #1 (Debian))
	id 1DyBQE-0004st-S6
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 18:39:50 +0200
Message-ID: <42E90A6E.5090700@programmfabrik.de>
Date: Thu, 28 Jul 2005 18:40:14 +0200
From: Martin Rode <martin.rode@programmfabrik.de>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: European Languages search problem
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello everybody,

First of congrats for that great piece of software!


I am working on a Europe-wide project, where we have texts on more than 
one European language, namely French, German, and English. Having tried 
the German and the FrenchAnalyzer both are not satisfying for what I need.

The GermanAnalyer should do a classic German umlaut conversion:

 -> ae
 -> oe
u -> ue

It does ->a, ->o, ->u. This is not useful. If a word appears like 
"Oeffner" and i search for "ffner", i dont find it! It does the 
conversion right for "", which converts to "ss".

For French I tried the FrenchAnalyzer, but it does not work (at least 
not the one in lukeall.jar, which is pretty up-to-date, I guess).

Well, in short, it would be nice to have a simple Analyzer which does 
the great job of the StandardAnalyzer, PLUS a few extras for European 
languages, and that is pretty easy:

For German: See above,
For French: Remove all the `  ^ and the hook below the c
For Swedish, Polish, Czech ... remove everything which crosses, slashes 
or whatever the ascci letters a-z

Before I write my own Analyzer for that I was wondering if anybody has 
had the same problems and found already a solution for that!


Thanks for your help!

Take Care,
Martin










---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 16:46:41 2005
Return-Path: <java-user-return-15639-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 45898 invoked from network); 28 Jul 2005 16:46:40 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 16:46:40 -0000
Received: (qmail 93655 invoked by uid 500); 28 Jul 2005 16:46:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 93636 invoked by uid 500); 28 Jul 2005 16:46:29 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 93623 invoked by uid 99); 28 Jul 2005 16:46:29 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 09:46:29 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.39] (HELO web31106.mail.mud.yahoo.com) (68.142.200.39)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Jul 2005 09:46:22 -0700
Received: (qmail 19546 invoked by uid 60001); 28 Jul 2005 16:46:28 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=131unUpi5eevsPygknwLEWPCBv9jlspoEvQ/HknRuZ5Va5MjR8TIA1XFjHesEqPGl2z65AjIDnq/jdZFHt7ZrChL/H8LLtzXQ5eMI2yq7Hj/GOaqEOCXlnjtriveZ1kUYKRiG9kywQ/1nld/0J97WxgS/pL42mbiyrgp5kpaQBI=  ;
Message-ID: <20050728164628.19544.qmail@web31106.mail.mud.yahoo.com>
Received: from [216.194.55.187] by web31106.mail.mud.yahoo.com via HTTP; Thu, 28 Jul 2005 09:46:27 PDT
Date: Thu, 28 Jul 2005 09:46:27 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: European Languages search problem
To: java-user@lucene.apache.org
In-Reply-To: <42E90A6E.5090700@programmfabrik.de>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Martin,

When you write your own tokenizer/analyzer for this, you'll probably
want to emit multiple tokens for words that have umlauts and such - one
version with  -> ae, the other with  -> a perhaps.

As for stripping accents from characters, somebody posted
ISOLatinFilter.java (I think that was the class name) a few months
back.

If you can contribute your Analyzers, that would be great, as we
already have a small set of Analyzers in Lucene's contrib area in SVN.

Otis


--- Martin Rode <martin.rode@programmfabrik.de> wrote:

> Hello everybody,
> 
> First of congrats for that great piece of software!
> 
> 
> I am working on a Europe-wide project, where we have texts on more
> than 
> one European language, namely French, German, and English. Having
> tried 
> the German and the FrenchAnalyzer both are not satisfying for what I
> need.
> 
> The GermanAnalyer should do a classic German umlaut conversion:
> 
>  -> ae
>  -> oe
> u -> ue
> 
> It does ->a, ->o, ->u. This is not useful. If a word appears like 
> "Oeffner" and i search for "ffner", i dont find it! It does the 
> conversion right for "", which converts to "ss".
> 
> For French I tried the FrenchAnalyzer, but it does not work (at least
> 
> not the one in lukeall.jar, which is pretty up-to-date, I guess).
> 
> Well, in short, it would be nice to have a simple Analyzer which does
> 
> the great job of the StandardAnalyzer, PLUS a few extras for European
> 
> languages, and that is pretty easy:
> 
> For German: See above,
> For French: Remove all the `  ^ and the hook below the c
> For Swedish, Polish, Czech ... remove everything which crosses,
> slashes 
> or whatever the ascci letters a-z
> 
> Before I write my own Analyzer for that I was wondering if anybody
> has 
> had the same problems and found already a solution for that!
> 
> 
> Thanks for your help!
> 
> Take Care,
> Martin
> 
> 
> 
> 
> 
> 
> 
> 
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 16:58:18 2005
Return-Path: <java-user-return-15640-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51451 invoked from network); 28 Jul 2005 16:58:18 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 16:58:18 -0000
Received: (qmail 18057 invoked by uid 500); 28 Jul 2005 16:58:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 17967 invoked by uid 500); 28 Jul 2005 16:58:09 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 17919 invoked by uid 99); 28 Jul 2005 16:58:09 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 09:58:09 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [193.108.181.138] (HELO quimby.programmfabrik.de) (193.108.181.138)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 09:58:00 -0700
Received: from [84.188.235.74] (helo=xen)
	by quimby.programmfabrik.de with asmtp (Exim 3.35 #1 (Debian))
	id 1DyAb7-0004mI-00
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 17:47:01 +0200
Received: from [192.168.0.222] (helo=[127.0.0.1])
	by xen with esmtp (Exim 4.34 #1 (Debian))
	id 1DyBhn-0004vz-8C
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 18:57:59 +0200
Message-ID: <42E90EAF.5000101@programmfabrik.de>
Date: Thu, 28 Jul 2005 18:58:23 +0200
From: Martin Rode <martin.rode@programmfabrik.de>
User-Agent: Mozilla Thunderbird 1.0.2 (Windows/20050317)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Re: European Languages search problem
References: <20050728164628.19544.qmail@web31106.mail.mud.yahoo.com>
In-Reply-To: <20050728164628.19544.qmail@web31106.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis,

Thanks for the quick reply.

The idea to emit multiple tokens is great!

I was looking for a solution of another problem: I want to present a 
word completition list to the user, so I use reader.terms(new 
Term("start","here"). If I start searching at "henrie", the 
reader.terms() should really start at "henriette" which is the next 
term. But it start at "her" in my case, because "henriette" is the only 
term between "henrie"(which is no term) and "her". This is very much not 
useful! May be the developers can at least at an option, so that 
reader.terms(new Term("henrie")) yields "henriette".

Anyway... I need a comletition which includes the Umlauts, so I can just 
emit two tokens and be happy. That should do it, shouldn't it?

Best Regards,
Martin

P.S.: When I am done with my Anaylzer I will contribute it.


Otis Gospodnetic wrote:

>Hi Martin,
>
>When you write your own tokenizer/analyzer for this, you'll probably
>want to emit multiple tokens for words that have umlauts and such - one
>version with  -> ae, the other with  -> a perhaps.
>
>As for stripping accents from characters, somebody posted
>ISOLatinFilter.java (I think that was the class name) a few months
>back.
>
>If you can contribute your Analyzers, that would be great, as we
>already have a small set of Analyzers in Lucene's contrib area in SVN.
>
>Otis
>
>
>--- Martin Rode <martin.rode@programmfabrik.de> wrote:
>
>  
>
>>Hello everybody,
>>
>>First of congrats for that great piece of software!
>>
>>
>>I am working on a Europe-wide project, where we have texts on more
>>than 
>>one European language, namely French, German, and English. Having
>>tried 
>>the German and the FrenchAnalyzer both are not satisfying for what I
>>need.
>>
>>The GermanAnalyer should do a classic German umlaut conversion:
>>
>> -> ae
>> -> oe
>>u -> ue
>>
>>It does ->a, ->o, ->u. This is not useful. If a word appears like 
>>"Oeffner" and i search for "ffner", i dont find it! It does the 
>>conversion right for "", which converts to "ss".
>>
>>For French I tried the FrenchAnalyzer, but it does not work (at least
>>
>>not the one in lukeall.jar, which is pretty up-to-date, I guess).
>>
>>Well, in short, it would be nice to have a simple Analyzer which does
>>
>>the great job of the StandardAnalyzer, PLUS a few extras for European
>>
>>languages, and that is pretty easy:
>>
>>For German: See above,
>>For French: Remove all the `  ^ and the hook below the c
>>For Swedish, Polish, Czech ... remove everything which crosses,
>>slashes 
>>or whatever the ascci letters a-z
>>
>>Before I write my own Analyzer for that I was wondering if anybody
>>has 
>>had the same problems and found already a solution for that!
>>
>>
>>Thanks for your help!
>>
>>Take Care,
>>Martin
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>
>>---------------------------------------------------------------------
>>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>    
>>
>
>
>---------------------------------------------------------------------
>To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>For additional commands, e-mail: java-user-help@lucene.apache.org
>
>  
>



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 17:09:51 2005
Return-Path: <java-user-return-15641-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 55552 invoked from network); 28 Jul 2005 17:09:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 17:09:51 -0000
Received: (qmail 29615 invoked by uid 500); 28 Jul 2005 17:09:44 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 29590 invoked by uid 500); 28 Jul 2005 17:09:44 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 29571 invoked by uid 99); 28 Jul 2005 17:09:44 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 10:09:44 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of daniel.armbrust.list@gmail.com designates 64.233.162.192 as permitted sender)
Received: from [64.233.162.192] (HELO zproxy.gmail.com) (64.233.162.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 10:09:33 -0700
Received: by zproxy.gmail.com with SMTP id i11so293856nzi
        for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 10:09:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:user-agent:x-accept-language:mime-version:to:subject:references:in-reply-to:content-type:content-transfer-encoding;
        b=nk+PbarJtyUhF/K7Fa5A9gqWElAGldRrjbl4WYbL0Cxe2HN6jcHHeN4DVwCGp/jPK9yQmuu3yohstMCE6V5p1u971vaP+3LzQh+U0LiU2hV9Ar8nLm8RXzgTHfC0fZdi8byEM0tVI5+bOPkpqTpri1sNyKYXmmdu9pnFnQHJjlE=
Received: by 10.36.247.31 with SMTP id u31mr1826620nzh;
        Thu, 28 Jul 2005 10:09:07 -0700 (PDT)
Received: from ?172.22.19.82? ([129.176.197.15])
        by mx.gmail.com with ESMTP id 38sm863275nza.2005.07.28.10.09.06;
        Thu, 28 Jul 2005 10:09:06 -0700 (PDT)
Message-ID: <42E91132.8020506@gmail.com>
Date: Thu, 28 Jul 2005 12:09:06 -0500
From: Dan Armbrust <daniel.armbrust.list@gmail.com>
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To:  java-user@lucene.apache.org
Subject: Off Topic: Lucene vs Derby (vs MySQL) for spatial indexing
References: <20050728035051.5286.qmail@web31110.mail.mud.yahoo.com>
In-Reply-To: <20050728035051.5286.qmail@web31110.mail.mud.yahoo.com>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Otis Gospodnetic wrote:

>You may also want to consider PostgreSQL for a few reasons:  <snip>
>3) it seems that the new
>versions let you embed Java directly into the database (perhaps
>something like Oracle's Java-embedding thing).
>  
>
Really?  I realize this is off topic, but could you point me to some 
documentation on that? 

Are you saying it may be possible to embed lucene into PostgreSQL, and 
use it for text searching?

Dan

-- 
****************************
Daniel Armbrust
Biomedical Informatics
Mayo Clinic Rochester
daniel.armbrust(at)mayo.edu
http://informatics.mayo.edu/


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Thu Jul 28 17:55:49 2005
Return-Path: <java-user-return-15642-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 68360 invoked from network); 28 Jul 2005 17:55:49 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 28 Jul 2005 17:55:49 -0000
Received: (qmail 90474 invoked by uid 500); 28 Jul 2005 17:55:41 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 90454 invoked by uid 500); 28 Jul 2005 17:55:41 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 90441 invoked by uid 99); 28 Jul 2005 17:55:41 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 10:55:41 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 10:55:33 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 807E713E2007; Thu, 28 Jul 2005 13:55:35 -0400 (EDT)
Received: from [128.143.167.108] (d-128-167-108.bootp.Virginia.EDU [128.143.167.108])
	by ehatchersolutions.com (Postfix) with ESMTP id 9CE4413E2006
	for <java-user@lucene.apache.org>; Thu, 28 Jul 2005 13:54:43 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <AD4091EA-831D-44F4-92EC-71ED4255E2B2@warwick.ac.uk>
References: <A7EFFB8D-C7DB-48A9-831F-A934ED012B28@warwick.ac.uk> <557EFEDE-002B-41BA-B787-5DEB5940AF52@ehatchersolutions.com> <9D54CF77-90DD-4F5E-B0CF-40FC921F5E4B@warwick.ac.uk> <38EA254E-A1A7-422B-A146-6003BAF2C83A@ganyo.com> <AD4091EA-831D-44F4-92EC-71ED4255E2B2@warwick.ac.uk>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <B632A71C-B282-468E-8F3A-281C7FBEF045@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: Searching a URL with a PrefixQuery / Too Many Clauses (again...)
Date: Thu, 28 Jul 2005 13:54:42 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-3.3 required=5.0 tests=AWL,BAYES_00 autolearn=ham 
	version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 28, 2005, at 12:37 PM, Chris May wrote:

> Works beautifully (at least on my 30K-document test index ). I'll  
> need to do some fiddling if I want to allow partial URLs (i.e.  
> http://www2.warwick.ac.uk/ab* to match http://www2.warwick.ac.uk/ 
> about) but I can see how to do that, I think (and I'm not sure I  
> need it anyway).
>
>  Thanks Scott!
>
> Incidentally, is there an easy way to make QueryParser not treat  
> the colon in 'http://' as a term separator? It seems that URLS get  
> broken into two chunks ('http' and 'www.warwick.ac.uk/somewhere')   
> before they get fed to my custom analyzer. I got round it by just  
> constructing the PhraseQuery by hand,  but I wonder if there's an  
> easier way ?

I'm not sure what string you're passing to QP, but the : denotes a  
field selector (such as title:lucene).  There is no easy way for  
QueryParser to deal with that differently - it'd be custom parser at  
that point.  You can backslash escape it \:, but that is probably not  
desirable.  Or you could pre-process the string from the user before  
handing it to QP and escape it under the covers.

     Erik


>
> Chris
>
> On 28 Jul 2005, at 02:02, Scott Ganyo wrote:
>
>
>> Chris,
>>
>> How about indexing the domain as one field and each part of the  
>> path as separate terms in another field?  I'm sure you've probably  
>> already thought of doing this... and maybe discarded the idea  
>> because you'd lose the position information.  However, even though  
>> you can't just simply split the URL on '/' and shove it into the  
>> field, you can add the position information back into the term and  
>> then put it into the field.  Then, you would be able to completely  
>> ditch the prefix query and still retrieve the documents using the  
>> entire, ordered path in (I think) the most efficient way possible.
>>
>> For example:
>>
>> http://www2.warwick.ac.uk/fac/soc/law/ug/prospective/degrees/ 
>> modules/commonlaw/
>>
>> becomes something like (using n/*** to identify the position):
>>
>> domain: www2.warwick.ac.uk
>> path: 1/fac, 2/soc, 3/law, 4/ug, 5/propective, 6/degrees, 7/ 
>> modules, 8/commonlaw
>>
>> And you could search based on any prefix you desired.  For example  
>> searching for this:
>>
>> http://www2.warwick.ac.uk/fac/soc/law/*
>>
>> would end up being a Lucene search that looks something like this  
>> (note: not query parser syntax!):
>>
>> domain: www2.warwick.ac.uk AND path: 1/fac AND path: 2/soc AND  
>> path: 3/law
>>
>> Does that make sense?  Would it work for you?
>>
>> S
>>
>> On Jul 27, 2005, at 3:56 PM, Chris May wrote:
>>
>>
>>
>>> Always domain + part of a path e.g.
>>>
>>> url:http://blogs.warwick.ac.uk/chrismay/*
>>>
>>> or
>>>
>>> url:http://www2.warwick.ac.uk/fac/soc/law/ug/prospective/degrees/ 
>>> modules/commonlaw/*
>>>
>>> or
>>>
>>> url:http://www2.warwick.ac.uk/services/its/*
>>>
>>>
>>> ... and so on. Part of the problem is that we may need to go an  
>>> arbitrary number of levels down the path to get an acceptably  
>>> small set of documents to start from - we couldn't impose a rule  
>>> that said something like 'specify the first 2 directories on the  
>>> path' (c.f my second example). We wouldn't need to query for the  
>>> same path over different domains though (e.g. url:*.warwick.ac.uk/ 
>>> about/* )
>>>
>>> thanks
>>>
>>> Chris
>>>
>>>
>>>
>>>
>>> On 27 Jul 2005, at 21:33, Erik Hatcher wrote:
>>>
>>>
>>>
>>>
>>>> Could you give some examples of the types of PrefixQuery's you'd  
>>>> like to use?   Is it always at a granularity of domain and  
>>>> path?  Or are you wanting to do a prefix pieces of the domain  
>>>> and path?
>>>>
>>>>     Erik
>>>>
>>>> On Jul 27, 2005, at 3:47 PM, Chris May wrote:
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>> First, apologies for what seems to be something of an FAQ.
>>>>>
>>>>> However, I've not been able to find an answer either in LIA or  
>>>>> in the relevant section of the FAQ (http://wiki.apache.org/ 
>>>>> jakarta-lucene/ 
>>>>> LuceneFAQ#head-06fafb5d19e786a50fb3dfb8821a6af9f37aa831)
>>>>>
>>>>> My setup is as follows: I have an index of a few hundred  
>>>>> thousand web pages. I'd like the be able to construct queries  
>>>>> that search for some arbitrary text within a specified URL.  
>>>>> Kind of like google's syntax
>>>>>
>>>>> searchterm +site:www.foo.com/some/section
>>>>>
>>>>> So, I have the page title & content indexed, and the URL stored  
>>>>> as a keywords field, and I imagined that I'd be able to  
>>>>> construct a query something like this:
>>>>>
>>>>> String[] fields = new String[]  
>>>>> {DocumentFields.TITLE,DocumentFields.CONTENT};
>>>>> Query searchTextQuery = MultiFieldQueryParser.parse 
>>>>> (request.getSearchQuery(), fields, analyzer);
>>>>> PrefixQuery urlPrefix = new PrefixQuery(new Term 
>>>>> (DocumentFields.URL, request.getUrlPrefix()));
>>>>> hits = searcher.search(searchTextQuery, new QueryFilter 
>>>>> (urlPrefix));
>>>>>
>>>>> However, as soon as the set of documents returned by the  
>>>>> prefixquery is more than a thousand or so, I get a  
>>>>> TooManyClausesException, as you might expect.
>>>>>
>>>>> AFAICS the solutions suggested in the FAQ don't seem to apply  
>>>>> here: I'm already using a Filter, and that's not helping (pace  
>>>>> suggestion 1), I don't think I can reduce the number of terms  
>>>>> in the index, else my URLs wouldn't be unique any more, and  
>>>>> increasing the number of clauses seems like a poor choice from  
>>>>> a scalability point of view - I anticipate queries that could  
>>>>> filter perhaps a hundred thousand documents or so.
>>>>>
>>>>> I'm guessing that it might be possible to do something smart by  
>>>>> splitting the URL up into multiple fields - for example, one  
>>>>> for the host and one for the path, or even one for the host and  
>>>>> one for host+path together - but I'm not clear on exactly how  
>>>>> I'd use the two fields, and how they'd help. Can someone  
>>>>> enlighten me?
>>>>>
>>>>> Thanks in advance
>>>>>
>>>>> Chris
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ------------------------------------------------------------------ 
>>>>> ---
>>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>> ------------------------------------------------------------------- 
>>>> --
>>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>>
>>>>
>>>>
>>>>
>>>>
>>>
>>>
>>> -------------------------------------------------------------------- 
>>> -
>>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>>
>>>
>>>
>>>
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>>
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 29 00:11:39 2005
Return-Path: <java-user-return-15643-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10379 invoked from network); 29 Jul 2005 00:11:39 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2005 00:11:39 -0000
Received: (qmail 19929 invoked by uid 500); 29 Jul 2005 00:11:31 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 19902 invoked by uid 500); 29 Jul 2005 00:11:31 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 19876 invoked by uid 99); 29 Jul 2005 00:11:31 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 17:11:31 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [216.68.218.166] (HELO home.simpleobjects.com) (216.68.218.166)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 17:11:22 -0700
Received: from graphite (graphite.intranet [192.168.2.2])
	by home.simpleobjects.com (Postfix) with ESMTP
	id DEC2433C3B; Thu, 28 Jul 2005 20:11:25 -0400 (EDT)
From: "Tony Schwartz" <tony@simpleobjects.com>
To: <java-user@lucene.apache.org>,
	"'Andrew Boyd'" <Andrew.Boyd@bbtech.net>
Subject: RE: Lucene vs Derby (vs MySQL) for spatial indexing
Date: Thu, 28 Jul 2005 20:11:24 -0400
Message-ID: <003701c593d2$0f969830$0202a8c0@graphite>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: quoted-printable
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.6626
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2527
Importance: Normal
In-Reply-To: <1122561839.42e8ef2f93df8@sms.ed.ac.uk>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Lucene will work perfectly for what you need.
Use a "RangeFilter" for the latitude/longitude and a "Sort" on your
population.
If you have a crazy amount of data and limited memory, you can modify =
lucene
easily (open source) to to handle filtering and sorting in a more =
"memory
friendly" way.  Since you only have 2 million records, I think lucene, =
out
of the box, is exactly what you're looking for.  It will perform =
extremely
well.

Tony Schwartz
tony@simpleobjects.com
"We're going to need a lot more cowbell."




-----Original Message-----
From: Dave Kor [mailto:s0454888@sms.ed.ac.uk]=20
Sent: Thursday, July 28, 2005 10:44 AM
To: java-user@lucene.apache.org; Andrew Boyd
Subject: Re: Lucene vs Derby (vs MySQL) for spatial indexing

Quoting Andrew Boyd <andrew.boyd@mindspring.com>:

> I did a small demonstration application using lucene's range query and =
it
> worked fine.
> I didn't use a DB at all
>
>
> "Mosul_Iraq.html", "E043.13535"
> "Mosul_Iraq.html", "N36.33608"
>
> Having the directional (E, W, N, S) worked out well
>
> Andrew

The reason Lucene is called a search engine and not a database is =
because it
is
optimized for text-data or data which obey zipf's law. Sure, you can use
Lucene
on data that doesn't obey zipf's law, but there will be an linearly
increasing
(or is it exponential?) performance cost. As you add more ordinal data
(especially floating point numbers) to Lucene, you increase the time =
taken
for
each and every single query.


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org




---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 29 01:47:20 2005
Return-Path: <java-user-return-15644-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 37592 invoked from network); 29 Jul 2005 01:47:20 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2005 01:47:20 -0000
Received: (qmail 94958 invoked by uid 500); 29 Jul 2005 01:47:13 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94936 invoked by uid 500); 29 Jul 2005 01:47:13 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94923 invoked by uid 99); 29 Jul 2005 01:47:13 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Thu, 28 Jul 2005 18:47:13 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [68.142.200.34] (HELO web31101.mail.mud.yahoo.com) (68.142.200.34)
    by apache.org (qpsmtpd/0.29) with SMTP; Thu, 28 Jul 2005 18:47:05 -0700
Received: (qmail 96617 invoked by uid 60001); 29 Jul 2005 01:47:10 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.com;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=iGh9JRDmhTjskcAsRE7Vb+6oORR0V9KhGVjQ59E1T/+7Sf36G4yFDyqXm4L4mgi5CWwgZgbT5So677DuZvy/oRyVM4S/AfPGSQgsPznZvMGu1+M5k78lgukISa+vldcz2YCz3iL/RC9BlOrIRwCAspzWtoSkxwxRVRE3zvHxsBc=  ;
Message-ID: <20050729014710.96615.qmail@web31101.mail.mud.yahoo.com>
Received: from [69.201.142.17] by web31101.mail.mud.yahoo.com via HTTP; Thu, 28 Jul 2005 18:47:10 PDT
Date: Thu, 28 Jul 2005 18:47:10 -0700 (PDT)
From: Otis Gospodnetic <otis_gospodnetic@yahoo.com>
Subject: Re: Off Topic: Lucene vs Derby (vs MySQL) for spatial indexing
To: java-user@lucene.apache.org
In-Reply-To: <42E91132.8020506@gmail.com>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Ah, I saw it about a month or two ago when moving Simpy to PostgreSQL
8.0.3.  I think I saw mentions of Java inside PostgreSQL in a
development version (8.1.*).

Otis
--
http://simpy.com


--- Dan Armbrust <daniel.armbrust.list@gmail.com> wrote:

> Otis Gospodnetic wrote:
> 
> >You may also want to consider PostgreSQL for a few reasons:  <snip>
> >3) it seems that the new
> >versions let you embed Java directly into the database (perhaps
> >something like Oracle's Java-embedding thing).
> >  
> >
> Really?  I realize this is off topic, but could you point me to some 
> documentation on that? 
> 
> Are you saying it may be possible to embed lucene into PostgreSQL,
> and 
> use it for text searching?
> 
> Dan
> 
> -- 
> ****************************
> Daniel Armbrust
> Biomedical Informatics
> Mayo Clinic Rochester
> daniel.armbrust(at)mayo.edu
> http://informatics.mayo.edu/
> 
> 
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 29 08:44:33 2005
Return-Path: <java-user-return-15646-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 5744 invoked from network); 29 Jul 2005 08:44:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2005 08:44:31 -0000
Received: (qmail 98304 invoked by uid 500); 29 Jul 2005 08:14:34 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 98277 invoked by uid 500); 29 Jul 2005 08:14:34 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 98264 invoked by uid 99); 29 Jul 2005 08:14:34 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 01:14:34 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of mailing.patrick.kimber@gmail.com designates 64.233.184.193 as permitted sender)
Received: from [64.233.184.193] (HELO wproxy.gmail.com) (64.233.184.193)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 01:14:26 -0700
Received: by wproxy.gmail.com with SMTP id 67so590313wri
        for <java-user@lucene.apache.org>; Fri, 29 Jul 2005 01:14:31 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=CBjo17hNZV6ZN64Cbtza1nBIo2y0Q/l7/GM9EThBAcBJXFsKzYKB+lKyIo8LM+RR2FiRkqhcixRvqwnMxN7svyETeJ3UUcNnDhwN66/aZtqnVCUZx5uNpDVW8Peqe/jX9fcS6VPA/8kg6XmrBmoh9lYUXEGaekCd7lBllyB1R8s=
Received: by 10.54.46.20 with SMTP id t20mr1184993wrt;
        Fri, 29 Jul 2005 01:14:31 -0700 (PDT)
Received: by 10.54.159.16 with HTTP; Fri, 29 Jul 2005 01:14:30 -0700 (PDT)
Message-ID: <4f9b23800507290114557923fb@mail.gmail.com>
Date: Fri, 29 Jul 2005 09:14:30 +0100
From: Patrick Kimber <mailing.patrick.kimber@gmail.com>
Reply-To: Patrick Kimber <mailing.patrick.kimber@gmail.com>
To: java-user@lucene.apache.org, Giovanni Novelli <giovanni.novelli@gmail.com>
Subject: Re: Text extraction from HTML
In-Reply-To: <acee472d05072900177f78cb8c@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <acee472d05072900177f78cb8c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Giovanni
We are using the Neko HTML parser.  Some simple example code can be
found in the "Lucene in Action" book.

For more information:
http://www.manning.com/books/hatcher2
http://www.apache.org/~andyc/neko/doc/html/

Patrick

On 29/07/05, Giovanni Novelli <giovanni.novelli@gmail.com> wrote:
> Hello,
> I'm working to the development of a multi-agents software that
> involves some information indexing, information retrieval and
> information categorization tasks. I want to build the training set for
> categorization using a set of HTML pages fetched from DMOZ RDF dumps.
> I have tried the HtmlParser coming with Nutch but I wasn't able to
> make it work without adjusting global configuration Nutch's xml;
> perhaps it's the only way to make such plugin work? Does Lucene expose
> any good HTML parser in the contrib section to parse web pages found
> in the wild?
>=20
> Best regards,
> Giovanni Novelli
>=20
> P.S.: This is a crosspost as I'm relying on both Lucene and Nutch.
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 29 08:53:31 2005
Return-Path: <java-user-return-15647-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 10919 invoked from network); 29 Jul 2005 08:53:31 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2005 08:53:31 -0000
Received: (qmail 8835 invoked by uid 500); 29 Jul 2005 08:22:42 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 8798 invoked by uid 500); 29 Jul 2005 08:22:42 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 8785 invoked by uid 99); 29 Jul 2005 08:22:42 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 01:22:42 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of giovanni.novelli@gmail.com designates 64.233.182.192 as permitted sender)
Received: from [64.233.182.192] (HELO nproxy.gmail.com) (64.233.182.192)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 01:22:35 -0700
Received: by nproxy.gmail.com with SMTP id d4so141326nfe
        for <java-user@lucene.apache.org>; Fri, 29 Jul 2005 01:22:39 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=QgF3A2JI0Kbwo2j5rv9KzaMyxzrsIZrCStszVDeRNW/VrgJ8VrCriUTWUPQL9bPTempU/AU+tEXLxnnzJOXdg2be3aKYIXvaI9J/zDh/N/jPzNea0gu6ZO9dtCK5QHB2NJgmdjAJkaJ4h6//chxK5FszhlZpaoUJrZYt6bJoIcs=
Received: by 10.48.144.1 with SMTP id r1mr96566nfd;
        Fri, 29 Jul 2005 01:22:39 -0700 (PDT)
Received: by 10.48.43.19 with HTTP; Fri, 29 Jul 2005 01:22:39 -0700 (PDT)
Message-ID: <acee472d05072901225ac5ebe2@mail.gmail.com>
Date: Fri, 29 Jul 2005 10:22:39 +0200
From: Giovanni Novelli <giovanni.novelli@gmail.com>
Reply-To: Giovanni Novelli <giovanni.novelli@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: Text extraction from HTML
In-Reply-To: <4f9b23800507290114557923fb@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <acee472d05072900177f78cb8c@mail.gmail.com>
	 <4f9b23800507290114557923fb@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I have tried both HtmlParser v1.5 and NekoHTML. About the former my
implementation doesn't work as i.e. it get text from javascripts; I
have followed the hint from
http://htmlparser.sourceforge.net/javadoc/org/htmlparser/visitors/TextExtra=
ctingVisitor.html

The following is my NOT working implementation relying upon HtmlParser v1.5=
:

import org.htmlparser.visitors.TextExtractingVisitor;
import org.htmlparser.*;
import org.htmlparser.util.*;

public class HtmlFilter {
        public static String getText(String html) {
                Parser parser =3D Parser.createParser(html, "UTF-8");
                TextExtractingVisitor visitor =3D new TextExtractingVisitor=
();
                try {
                        parser.visitAllNodesWith(visitor);
                } catch (ParserException e) {
                        e.printStackTrace();
                }
                String textInPage =3D visitor.getExtractedText();
                return textInPage;
        }
}

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 29 09:09:56 2005
Return-Path: <java-user-return-15645-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28714 invoked from network); 29 Jul 2005 09:09:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2005 09:09:56 -0000
Received: (qmail 46988 invoked by uid 500); 29 Jul 2005 07:17:50 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 46965 invoked by uid 500); 29 Jul 2005 07:17:49 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 46940 invoked by uid 99); 29 Jul 2005 07:17:49 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 00:17:49 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of giovanni.novelli@gmail.com designates 64.233.182.198 as permitted sender)
Received: from [64.233.182.198] (HELO nproxy.gmail.com) (64.233.182.198)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 00:17:41 -0700
Received: by nproxy.gmail.com with SMTP id d4so137555nfe
        for <java-user@lucene.apache.org>; Fri, 29 Jul 2005 00:17:45 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=E/ZFJAyBkvafjh3HwQJlazZ5sLPT/Yv+HBkroBZiPgQaJU1yGPMyK1O2H+w9I5WnNOW5p06nhSLJLs4Fvij8ja+MdaYl0ypmJvdDF+D629iCyrUgfnKKxRBwm1qXNxesMwlheSX2Fcn1T37RvNAjhqTwpGnxJMlktcsvQ6R6OzI=
Received: by 10.48.249.6 with SMTP id w6mr93821nfh;
        Fri, 29 Jul 2005 00:17:45 -0700 (PDT)
Received: by 10.48.43.19 with HTTP; Fri, 29 Jul 2005 00:17:45 -0700 (PDT)
Message-ID: <acee472d05072900177f78cb8c@mail.gmail.com>
Date: Fri, 29 Jul 2005 09:17:45 +0200
From: Giovanni Novelli <giovanni.novelli@gmail.com>
Reply-To: Giovanni Novelli <giovanni.novelli@gmail.com>
To: nutch-user@lucene.apache.org, java-user@lucene.apache.org
Subject: Text extraction from HTML
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello,
I'm working to the development of a multi-agents software that
involves some information indexing, information retrieval and
information categorization tasks. I want to build the training set for
categorization using a set of HTML pages fetched from DMOZ RDF dumps.
I have tried the HtmlParser coming with Nutch but I wasn't able to
make it work without adjusting global configuration Nutch's xml;
perhaps it's the only way to make such plugin work? Does Lucene expose
any good HTML parser in the contrib section to parse web pages found
in the wild?

Best regards,
Giovanni Novelli

P.S.: This is a crosspost as I'm relying on both Lucene and Nutch.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 29 10:25:50 2005
Return-Path: <java-user-return-15648-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 17652 invoked from network); 29 Jul 2005 10:25:50 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2005 10:25:50 -0000
Received: (qmail 58763 invoked by uid 500); 29 Jul 2005 09:21:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 58742 invoked by uid 500); 29 Jul 2005 09:21:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 58727 invoked by uid 99); 29 Jul 2005 09:21:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 02:21:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [147.83.41.105] (HELO mail.fib.upc.es) (147.83.41.105)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 02:21:37 -0700
Received: from [147.83.58.160] (tarragona.fib.upc.es [147.83.58.160])
	by mail.fib.upc.es (Postfix) with ESMTP id 52A3E1BB47
	for <java-user@lucene.apache.org>; Fri, 29 Jul 2005 11:21:36 +0200 (CEST)
Message-ID: <42E9F51C.30303@fib.upc.edu>
Date: Fri, 29 Jul 2005 11:21:32 +0200
From: Daniel Cortes <dcortes@fib.upc.edu>
Organization: FIB
User-Agent: Mozilla Thunderbird 1.0 (Windows/20041206)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Re: another problem with Multisearcher
References: <20050727221256.96053.qmail@web31115.mail.mud.yahoo.com> <42E8917D.1060205@fib.upc.edu>
In-Reply-To: <42E8917D.1060205@fib.upc.edu>
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Scaned-FIB: AntiVirus/AntiSpam en fib.upc.es
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I reply myself, the problem was generated because I closed multisearcher 
when I finalize:

       SearchResults sr=null;
           Query buscar = 
MultiFieldQueryParser.parse(search_text,fields,required,analyzer);
           Hits encontrados=searcher.search(buscar);
           sr = new SearchResults(encontrados,userviewer,idPortal);
       searcher.close();  
<-------!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
But when I have to close?

I have another question about mulisearcher,  how I have to use this     
                    MultiFieldQueryParser.NORMAL_FIELD

thks to all for yours replies
Daniel Cortes wrote:

> It's very strange because the first search works good , but next 
> search not works and give me the error message
>
> java.io.IOException: Bad file descriptor
>        at java.io.RandomAccessFile.seek(Native Method)
>        at 
> org.apache.lucene.store.FSInputStream.readInternal(FSDirectory.java:415)
>        at 
> org.apache.lucene.store.InputStream.refill(InputStream.java:158)
>        at 
> org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
>        at 
> org.apache.lucene.store.InputStream.readBytes(InputStream.java:57)
>        at 
> org.apache.lucene.index.CompoundFileReader$CSInputStream.readInternal(CompoundFileReader.java:220) 
>
>        at 
> org.apache.lucene.store.InputStream.refill(InputStream.java:158)
>        at 
> org.apache.lucene.store.InputStream.readByte(InputStream.java:43)
>        at 
> org.apache.lucene.store.InputStream.readVInt(InputStream.java:83)
>        at 
> org.apache.lucene.index.SegmentTermEnum.readTerm(SegmentTermEnum.java:142) 
>
>        at 
> org.apache.lucene.index.SegmentTermEnum.next(SegmentTermEnum.java:115)
>        at 
> org.apache.lucene.index.TermInfosReader.scanEnum(TermInfosReader.java:143) 
>
>        at 
> org.apache.lucene.index.TermInfosReader.get(TermInfosReader.java:137)
>        at 
> org.apache.lucene.index.TermInfosReader.terms(TermInfosReader.java:196)
>        at 
> org.apache.lucene.index.SegmentReader.terms(SegmentReader.java:230)
>        at 
> org.apache.lucene.search.PrefixQuery.rewrite(PrefixQuery.java:39)
>        at 
> org.apache.lucene.search.BooleanQuery.rewrite(BooleanQuery.java:243)
>        at 
> org.apache.lucene.search.IndexSearcher.rewrite(IndexSearcher.java:166)
>        at org.apache.lucene.search.Query.weight(Query.java:84)
>        at 
> org.apache.lucene.search.IndexSearcher.search(IndexSearcher.java:85)
>        at 
> org.apache.lucene.search.MultiSearcher.search(MultiSearcher.java:116)
>        at org.apache.lucene.search.Hits.getMoreDocs(Hits.java:64)
>        at org.apache.lucene.search.Hits.<init>(Hits.java:43)
>        at org.apache.lucene.search.Searcher.search(Searcher.java:33)
>        at org.apache.lucene.search.Searcher.search(Searcher.java:27)
>
> I've opened the index with Luke and the index are good.
>
> My code that use Multisearcher:
>
> this line I don't know what it do, but i think that is not the problem
> private int[] required= 
> {MultiFieldQueryParser.NORMAL_FIELD,MultiFieldQueryParser.NORMAL_FIELD,MultiFieldQueryParser.NORMAL_FIELD}; 
>
> private IndexSearcher[] searchers;
>       //indexs have the path of my indexs Lucene
>
>       for (int i = 0; i < indexs.length; i++) {
>            searchers[i] = new IndexSearcher(getPath(indexs[i]));
>       }
>        searcher = new MultiSearcher(searchers);
>        MultiSearcher searcher=iService.openMultiSearcher();
>        SearchResults sr=null;
>            Query buscar = 
> MultiFieldQueryParser.parse(search_text,fields,required,analyzer);
>            Hits encontrados=searcher.search(buscar);
>            sr = new SearchResults(encontrados,userviewer,idPortal);
>        searcher.close();
>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 29 11:37:59 2005
Return-Path: <java-user-return-15649-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 39924 invoked from network); 29 Jul 2005 11:37:59 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2005 11:37:59 -0000
Received: (qmail 57715 invoked by uid 500); 29 Jul 2005 11:37:51 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 57699 invoked by uid 500); 29 Jul 2005 11:37:51 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Delivered-To: moderator for java-user@lucene.apache.org
Received: (qmail 59729 invoked by uid 99); 29 Jul 2005 07:33:18 -0000
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of himars@gmail.com designates 64.233.162.206 as permitted sender)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:cc:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=oDioe83wPzDCviA61g/HPxqTMBMJ1ZzFXWuftOoc0+XDudh8nWnkFh+j53Rih4UrDDhqg9aQra5UMOW9PbDZTTXgvovu/AdJKn1966Hw/cQVSREZUaso7IHnpBiqNeKLIzOL3WlOFr3EiidMbJcNPxG9WpdUmgVpnFO217KmDdA=
Message-ID: <1263a5c7050729003248b424f4@mail.gmail.com>
Date: Fri, 29 Jul 2005 15:32:41 +0800
From: Jack Tang <himars@gmail.com>
Reply-To: Jack Tang <himars@gmail.com>
To: nutch-user@lucene.apache.org, Giovanni Novelli <giovanni.novelli@gmail.com>
Subject: Re: Text extraction from HTML
Cc: java-user@lucene.apache.org
In-Reply-To: <acee472d05072900177f78cb8c@mail.gmail.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <acee472d05072900177f78cb8c@mail.gmail.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hi Novelli

Do you insist on HtmlParser in Nutch?=20
Or some alternatives are available, maybe, you can try htmlparser
hosted on sf.net

http://htmlparser.sourceforge.net/

Regards
/Jack

On 7/29/05, Giovanni Novelli <giovanni.novelli@gmail.com> wrote:
> Hello,
> I'm working to the development of a multi-agents software that
> involves some information indexing, information retrieval and
> information categorization tasks. I want to build the training set for
> categorization using a set of HTML pages fetched from DMOZ RDF dumps.
> I have tried the HtmlParser coming with Nutch but I wasn't able to
> make it work without adjusting global configuration Nutch's xml;
> perhaps it's the only way to make such plugin work? Does Lucene expose
> any good HTML parser in the contrib section to parse web pages found
> in the wild?
>=20
> Best regards,
> Giovanni Novelli
>=20
> P.S.: This is a crosspost as I'm relying on both Lucene and Nutch.
>=20


--=20
Keep Discovering ... ...
http://www.jroller.com/page/jmars

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 29 13:16:56 2005
Return-Path: <java-user-return-15650-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 84439 invoked from network); 29 Jul 2005 13:16:56 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2005 13:16:56 -0000
Received: (qmail 96078 invoked by uid 500); 29 Jul 2005 13:16:49 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 96054 invoked by uid 500); 29 Jul 2005 13:16:48 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 96041 invoked by uid 99); 29 Jul 2005 13:16:48 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 06:16:48 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [204.115.178.55] (HELO saturn) (204.115.178.55)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 06:16:39 -0700
Received: from traveler ([192.168.1.70]) by saturn with Microsoft SMTPSVC(5.0.2195.6713);
	 Fri, 29 Jul 2005 09:16:44 -0400
From: "Tim Johnson" <timothy.w.johnson@saic.com>
To: <java-user@lucene.apache.org>
Subject: RE: hit count within categories
Date: Fri, 29 Jul 2005 09:16:39 -0400
Message-ID: <000801c5943f$c104b990$4601a8c0@traveler>
MIME-Version: 1.0
Content-Type: text/plain;
	charset="US-ASCII"
Content-Transfer-Encoding: 7bit
X-Priority: 3 (Normal)
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook, Build 10.0.4024
In-Reply-To: <42E7F17B.90007@yahoo.co.uk>
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
Importance: Normal
X-OriginalArrivalTime: 29 Jul 2005 13:16:44.0229 (UTC) FILETIME=[C402B750:01C5943F]
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Thanks Mark

I've looked at your posting and it's not the answer to my problem.  In
testing one large index v. several small indexes, I've found that for
high frequency terms, the small individual indexes perform better by a
factory of 2 to 3 times.  I know this is contrary to what is recommended
but in my case I need a total hits count, not a ranked list with the
first 100 docs cached.

It appears the overhead involved in resolving terms to docs ids, for
large indexes (+25G), and well getting a total count is what is slowing
things down.

Is there a faster way to access the total hits count??

-----Original Message-----
From:
java-user-return-15600-timothy.w.johnson=saic.com@lucene.apache.org
[mailto:java-user-return-15600-timothy.w.johnson=saic.com@lucene.apache.
org] On Behalf Of markharw00d
Sent: Wednesday, July 27, 2005 4:42 PM
To: java-user@lucene.apache.org
Subject: Re: hit count within categories

I posted the code I use to do this (based on a single index) here:

http://marc.theaimsgroup.com/?l=lucene-dev&m=111044178212335&w=2

Cheers
Mark


	
	
		
___________________________________________________________ 
Yahoo! Messenger - NEW crystal clear PC to PC calling worldwide with
voicemail http://uk.messenger.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 29 14:08:36 2005
Return-Path: <java-user-return-15651-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 7234 invoked from network); 29 Jul 2005 14:08:36 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2005 14:08:36 -0000
Received: (qmail 66485 invoked by uid 500); 29 Jul 2005 14:08:30 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66309 invoked by uid 500); 29 Jul 2005 14:08:28 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66296 invoked by uid 99); 29 Jul 2005 14:08:28 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 07:08:28 -0700
X-ASF-Spam-Status: No, hits=0.4 required=10.0
	tests=DNS_FROM_RFC_ABUSE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy includes SPF record at spf.trusted-forwarder.org)
Received: from [217.12.10.214] (HELO web26003.mail.ukl.yahoo.com) (217.12.10.214)
    by apache.org (qpsmtpd/0.29) with SMTP; Fri, 29 Jul 2005 07:08:18 -0700
Received: (qmail 59067 invoked by uid 60001); 29 Jul 2005 14:08:23 -0000
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
  s=s1024; d=yahoo.co.uk;
  h=Message-ID:Received:Date:From:Subject:To:In-Reply-To:MIME-Version:Content-Type:Content-Transfer-Encoding;
  b=J34/6u4WjuJqkXpO3xy0a2zrZ9SZtr+zLN2Sn42AHu4VxFXU0S5KqC33vq6kUzvccuPRLsch1e4Z4O8pJArTmBBci5RdM8NyFj0Dbo6Edkql6fEBLJjWrnZYcUwsVtv+tEyMzVAXg0or4LPRDyRvme6m1rWn6VI/btRXFofr+1U=  ;
Message-ID: <20050729140823.59065.qmail@web26003.mail.ukl.yahoo.com>
Received: from [193.36.230.96] by web26003.mail.ukl.yahoo.com via HTTP; Fri, 29 Jul 2005 15:08:23 BST
Date: Fri, 29 Jul 2005 15:08:23 +0100 (BST)
From: mark harwood <markharw00d@yahoo.co.uk>
Subject: RE: hit count within categories
To: java-user@lucene.apache.org
In-Reply-To: <000801c5943f$c104b990$4601a8c0@traveler>
MIME-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 8bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

> Is there a faster way to access the total hits
> count??

The solution I outlined could be adapted to work
across multiple indexes - you'd just have to aggregate
the totals.

If going from all category terms to matching doc ids
is slow you could do it the other way going from
matching doc ids to terms.

You can feasibly do this by :
a) IndexReader.document(hitDocId).get("category")
or
b)
IndexReader.getTermFreqVector(hitDocId,"category").getTerms()

Unfortunately a) reads ALL fields for a doc off the
disk and is probably very slow. b) would be quicker
but would require you to index with TermFreqVector
support.
I'm not sure if b) would be faster than the term to
docids approach I originally suggested - you'd have to
try it and see how it performs on your data.

Cheers,
Mark



		
___________________________________________________________ 
How much free photo storage do you get? Store your holiday 
snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 29 15:32:44 2005
Return-Path: <java-user-return-15652-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 33840 invoked from network); 29 Jul 2005 15:32:44 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2005 15:32:44 -0000
Received: (qmail 99329 invoked by uid 500); 29 Jul 2005 15:32:36 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 99284 invoked by uid 500); 29 Jul 2005 15:32:35 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 99254 invoked by uid 99); 29 Jul 2005 15:32:35 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 08:32:35 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [65.84.113.130] (HELO mail.dessci.com) (65.84.113.130)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 08:32:25 -0700
X-MimeOLE: Produced By Microsoft Exchange V6.5.7226.0
Content-class: urn:content-classes:message
MIME-Version: 1.0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable
Subject: RE: n-gram indexing
Date: Fri, 29 Jul 2005 08:34:25 -0700
Message-ID: <D1EFB337111B674B8F1BE155B01C6DD6355FF3@franklin.corp.dessci>
X-MS-Has-Attach: 
X-MS-TNEF-Correlator: 
Thread-Topic: n-gram indexing
Thread-Index: AcWQd5dL+W1Kt67tQxWyYKTOXigliAD2sPMg
From: "Rajesh Munavalli" <rajeshm@dessci.com>
To: <java-user@lucene.apache.org>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I was wondering how Lucene's phrase query would work in case of n-gram
indexing. There are two scenarios for popsition increments while adding
the index for n-grams. For example consider tri-grams of "united states
of america".
=20
Scenario 1:
Index position     token
0                  "united"
1                  "states", "united states"
2                  "of", "states of", "united states of"
3                  "america", "of america", "states of america"
=20
Scenario 2:
Index position    token
0                 "united", "united states", "united states of"
1                 "states", "states of", "states of america"
2                 "of", "of america"
3                 "america"
=20
Does Lucene's performance(fail to match) degrade if I choose one over
another?=20
=20
thanks,
=20
Rajesh Munavalli

-----Original Message-----
From: Sebastian Marius Kirsch [mailto:skirsch@sebastian-kirsch.org]=20
Sent: Sunday, July 24, 2005 12:45 PM
To: java-user@lucene.apache.org
Subject: Re: n-gram indexing

Hi Rajeev,

I wrote a filter for generating n-grams a while back; I intended to use
it for statistics, but I guess you can also use it for search. I also
thought of the "boosting effect" you describe when I implemented it,
though I never actually tried whether it works that way.

It's in the Lucene bugzilla section:

http://issues.apache.org/bugzilla/show_bug.cgi?id=3D35456

Let me know if you have any problems with it.

If the lucene phrase queries honour position increments correctly, they
should work out of the box with my code. (My code adds the unigram first
with a position increment of 1, and then all n-grams starting with that
unigram with an increment of 0.) Just make sure you use the same
Analyzer for the queries as you do for the indexing, so that n-grams are
added to the query as well.

As regards the suggestion to rather use a very sloppy phrase or span
query: I expect this approach to be faster, as it would only use
TermQuery/BooleanQuery. You basically trade index size for search speed.

If you get this to work with phrase queries, please add a test case
demonstrating it.

I saw something about n-gram queries in nutch, as far as I remember;
does anyone know whether nutch uses n-grams to speed up phrase queries?

Regards, Sebastian

On Mon, Jul 18, 2005 at 02:27:28PM -0700, Rajesh Munavalli wrote:
> At what point do I add n-grams? Does the order in which I add n-grams=20
> affect exact phrase queries later? My questions are
>=20
> (1) Should I add all the 1-grams followed by 2-grams followed by=20
> 3-grams..etc sentence by sentence OR
>=20
> (2) Add all the 1 grams of entire document first before starting=20
> 2-grams for the entire document?

--
Sebastian Kirsch <skirsch@sebastian-kirsch.org>
[http://www.sebastian-kirsch.org/]

NOTE: New email address! Please update your address book.

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Fri Jul 29 22:45:07 2005
Return-Path: <java-user-return-15653-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 86299 invoked from network); 29 Jul 2005 20:41:13 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 29 Jul 2005 20:41:13 -0000
Received: (qmail 47386 invoked by uid 500); 29 Jul 2005 20:41:06 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 47357 invoked by uid 500); 29 Jul 2005 20:41:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 47344 invoked by uid 99); 29 Jul 2005 20:41:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 13:41:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of fraschetti@gmail.com designates 64.233.162.204 as permitted sender)
Received: from [64.233.162.204] (HELO zproxy.gmail.com) (64.233.162.204)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 13:40:58 -0700
Received: by zproxy.gmail.com with SMTP id n29so624887nzf
        for <java-user@lucene.apache.org>; Fri, 29 Jul 2005 13:41:03 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:to:subject:mime-version:content-type:content-transfer-encoding:content-disposition;
        b=gouXxt1WpZLIB91cl5ULLXf78Dn7V0SjfLqXQo341UKZr9G6T7l00Caj/F1OuRC4InKLQxxfCfrJaXTp9OeaPbhd9IR8pTuyKcGkQETh5rSq+P5P9BRJmT77gjngQQakNmaVkcr4s36+wqxxvjVEY0G61+t022S2zuMiB5uho8c=
Received: by 10.36.227.61 with SMTP id z61mr3027712nzg;
        Fri, 29 Jul 2005 13:40:30 -0700 (PDT)
Received: by 10.36.55.12 with HTTP; Fri, 29 Jul 2005 13:40:30 -0700 (PDT)
Message-ID: <cbdebdf805072913403699c484@mail.gmail.com>
Date: Fri, 29 Jul 2005 13:40:30 -0700
From: Chris Fraschetti <fraschetti@gmail.com>
To: java-user@lucene.apache.org
Subject: indexed document id
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I've got an index which I rebuild each time and don't do any deletes
until the end, so doc ids shouldn't change... at index time, is there
a better way to discover the id of the document i just added than
docCount() ?
--=20
___________________________________________________
Chris Fraschetti
e fraschetti@gmail.com

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 30 00:47:12 2005
Return-Path: <java-user-return-15654-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 58846 invoked from network); 30 Jul 2005 00:47:12 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jul 2005 00:47:12 -0000
Received: (qmail 95623 invoked by uid 500); 30 Jul 2005 00:47:10 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 94717 invoked by uid 500); 30 Jul 2005 00:47:06 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 94691 invoked by uid 99); 30 Jul 2005 00:47:06 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 17:47:06 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.55.225.129] (HELO ehatchersolutions.com) (69.55.225.129)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 17:46:57 -0700
Received: by ehatchersolutions.com (Postfix, from userid 504)
	id 89D3B13E2006; Fri, 29 Jul 2005 20:47:03 -0400 (EDT)
Received: from [172.16.1.101] (va-71-48-138-146.dyn.sprint-hsd.net [71.48.138.146])
	by ehatchersolutions.com (Postfix) with ESMTP id 2936413E2006
	for <java-user@lucene.apache.org>; Fri, 29 Jul 2005 20:46:59 -0400 (EDT)
Mime-Version: 1.0 (Apple Message framework v730)
In-Reply-To: <cbdebdf805072913403699c484@mail.gmail.com>
References: <cbdebdf805072913403699c484@mail.gmail.com>
Content-Type: text/plain; charset=US-ASCII; delsp=yes; format=flowed
Message-Id: <DE8BA09A-E365-4DFB-BF96-B6BA6F62EB73@ehatchersolutions.com>
Content-Transfer-Encoding: 7bit
From: Erik Hatcher <erik@ehatchersolutions.com>
Subject: Re: indexed document id
Date: Fri, 29 Jul 2005 20:46:56 -0400
To: java-user@lucene.apache.org
X-Mailer: Apple Mail (2.730)
X-Spam-Checker-Version: SpamAssassin 3.0.1 (2004-10-22) on javelina
X-Spam-Level: 
X-Virus-Checked: Checked by ClamAV on apache.org
X-Old-Spam-Status: No, score=-5.9 required=5.0 tests=ALL_TRUSTED,BAYES_00 
	autolearn=ham version=3.0.1
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


On Jul 29, 2005, at 4:40 PM, Chris Fraschetti wrote:
> I've got an index which I rebuild each time and don't do any deletes
> until the end, so doc ids shouldn't change... at index time, is there
> a better way to discover the id of the document i just added than
> docCount() ?

When building a new index by strictly adding documents, you could  
keep a zero-based counter which would reflect document id at that  
time.  They are simply in ascending order.

     Erik


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sat Jul 30 01:11:24 2005
Return-Path: <java-user-return-15655-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 61802 invoked from network); 30 Jul 2005 01:11:23 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 30 Jul 2005 01:11:23 -0000
Received: (qmail 14404 invoked by uid 500); 30 Jul 2005 01:11:18 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 14386 invoked by uid 500); 30 Jul 2005 01:11:18 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 14373 invoked by uid 99); 30 Jul 2005 01:11:18 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 18:11:18 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Fri, 29 Jul 2005 18:11:09 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 46D9C5B7C4; Fri, 29 Jul 2005 18:11:15 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 43FA47F460
	for <java-user@lucene.apache.org>; Fri, 29 Jul 2005 18:11:15 -0700 (PDT)
Date: Fri, 29 Jul 2005 18:11:15 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: RE: n-gram indexing
In-Reply-To: <D1EFB337111B674B8F1BE155B01C6DD63557B6@franklin.corp.dessci>
Message-ID: <Pine.LNX.4.58.0507291758310.5639@hal.rescomp.berkeley.edu>
References: <D1EFB337111B674B8F1BE155B01C6DD63557B6@franklin.corp.dessci>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: Document 1:
: "united states is .... United airlines operates in 50 states. United
: states government....."
:
: Document 2:
: "united states is .... United airlines operates in 50 states. United
: some other word states"
:
: If you consider the tf-idf weight of individual terms "united" and
: "states" they would have exact score in both the documents. But the term
: "united states" should have higher weight in Document 1. The higher
: weight can be achieved through bi-grams which would include the word
: "united states". My guess is, lucene will retrieve both documents with
: equal score.

I believe yyour intuition is correct, but did you try what i suggested
below? .. i don't believe you have to index all of hte possible n-grams,
just construct a boolean query containing the n-grams, and boost the
larger n-grams (by some factor only experimenting will tell you).

you should also try out SpanNearQuery ... I believe it scores thingsw
higher if they appear closer together -- but i'm not confident of my
memory in htat case.

Seriously, try what i suggest below ... experimentation is the best way to
answer questions like this...

: -----Original Message-----
: Sent: Monday, July 18, 2005 5:11 PM
: To: java-user@lucene.apache.org
: Subject: RE: n-gram indexing
:
:
: Your intuition is right, but i can't think of any reason why you need to
: add the n-grams at indexing time -- or why using phrase queries would be
: a bad thing in this case.  When you get a multiword query, construct the
: n-grams of the query words as multiple phrase queries and search for a
: BooleanQuery of all those phrases (with bigger boosts given to longer
: phrases)
:
: Using your example of "united states of america" generate a query that
: looks something like...
:
:      united states america
:      "united states"^10 "states america"^10
:      "united states america"^100


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 31 07:18:05 2005
Return-Path: <java-user-return-15658-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 28246 invoked from network); 31 Jul 2005 07:18:05 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2005 07:18:05 -0000
Received: (qmail 52930 invoked by uid 500); 31 Jul 2005 07:18:02 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 52023 invoked by uid 500); 31 Jul 2005 07:17:58 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 52008 invoked by uid 99); 31 Jul 2005 07:17:58 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Jul 2005 00:17:58 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Jul 2005 00:17:49 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 52D1A5B7AA; Sun, 31 Jul 2005 00:17:52 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP
	id 4FF767F45E; Sun, 31 Jul 2005 00:17:52 -0700 (PDT)
Date: Sun, 31 Jul 2005 00:17:52 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org, JM Tinghir <jm.tinghir@gmail.com>
Subject: Re: Querying the values of a field
In-Reply-To: <6f3b242905072610293aaa540c@mail.gmail.com>
Message-ID: <Pine.LNX.4.58.0507310008200.23302@hal.rescomp.berkeley.edu>
References: <6f3b242905072610293aaa540c@mail.gmail.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: I have an index with about 20 different fields.
: I'd like to query my index to get the list of all different terms for
: a given field.
: Is it something possible in a simple way? I mean simpler than getting
: every terms of the index and then keeping only those which match the
: given field.

I'm guessing you are refering to using a TermEnum to iterate over all the
terms in the index.  The two key aspects of a TermEnum that you should
allways remember are:

1) when you get one from an IndexReader, you can specify a "starting Term"
and be garunteed that the first Term returned by the TermENum willl either
be that term, or some "later" Term (look at IndexReader.terms(Term))

2) TermEnums allways iterate in Term order, which is Field order then
value order.  so if you are iterating over a bunch of terms, and the field
of the Terms changes, then you are garunteed that there are no more Terms
using the old field (look at the javadocs for TermEnum and Term.compareTo)

Which means something like this (untested psuedocode) should be usefull...

	String f = "myField";
	List allInFieldF = new LinkedList();
	TermEnum e = r.terms(new Term(f, ""));
	while (e.next() && e.term().field().equals(f)) {
		allInFieldF.add(e.term().text());
	}


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 31 08:32:26 2005
Return-Path: <java-user-return-15659-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 50444 invoked from network); 31 Jul 2005 08:32:26 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2005 08:32:26 -0000
Received: (qmail 74502 invoked by uid 500); 31 Jul 2005 08:32:21 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 74475 invoked by uid 500); 31 Jul 2005 08:32:21 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 74462 invoked by uid 99); 31 Jul 2005 08:32:21 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Jul 2005 01:32:21 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [217.160.230.40] (HELO mout.perfora.net) (217.160.230.40)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Jul 2005 01:32:12 -0700
Received: from [59.93.48.211] (helo=D2Q9FF1S)
	by mrelay.perfora.net with ESMTP (Nemesis),
	id 0MKz1m-1Dz9F21dLU-0003ap; Sun, 31 Jul 2005 04:32:16 -0400
Message-ID: <006f01c595a9$496bf270$5d1afea9@dsil.danlawinc.com>
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: <java-user@lucene.apache.org>
References: <20050718043336.2779.qmail@web31109.mail.mud.yahoo.com> <000501c58b53$297f1d30$ea01a8c0@dsil.danlawinc.com> <Pine.LNX.4.58.0507180030230.2147@hal.rescomp.berkeley.edu> <005301c5952f$a95c7ee0$5d1afea9@dsil.danlawinc.com>
Subject: Re: IOException : Lock obtain timed out
Date: Sun, 31 Jul 2005 13:54:30 +0530
MIME-Version: 1.0
Content-Type: text/plain;
	format=flowed;
	charset="iso-8859-1";
	reply-type=response
Content-Transfer-Encoding: 7bit
X-Priority: 3
X-MSMail-Priority: Normal
X-Mailer: Microsoft Outlook Express 6.00.2900.2180
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.2900.2180
X-Provags-ID: perfora.net abuse@perfora.net login:9759476ad67fa08aca5d9352c82c69ea
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

The default value of IndexWriter.WRITE_LOCK_TIMEOUT property is 1000ms. Can 
this value be increased to some optimum value?

----- Original Message ----- 
From: "Harini Raghavan" <harini.raghavan@insideview.com>
To: <java-user@lucene.apache.org>
Sent: Saturday, July 30, 2005 11:23 PM
Subject: IOException : Lock obtain timed out


>
> Hi All,
>
> As mentioned in the mail below, I am adding documents to the Lucene index 
> based on JMS triggered events. I have made the method addDocument in the 
> LuceneActions class as 'synchronized'  as I was getting Index locked 
> exception. The problem was solved temporarily, but now I am getting a 
> different exception :  IOException : Lock obtain timed out.
> If I manually delete the lock file from the index directory, then it works 
> fine for a while and again throws the same exception.
> Below is the exception stack trace.
>
> java.io.IOException: Lock obtain timed out: 
> Lock@/var/tmp/lucene-9b05e175384cccd1f07bf2311a393c87-write.lock
>         at org.apache.lucene.store.Lock.obtain(Lock.java:58)
>         at 
> org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:223)
>         at 
> org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:173)
>         at lucene.LuceneActions.getIndexWriter(LuceneActions.java:160)
>         at lucene.LuceneActions.addDocument(LuceneActions.java:48)
>         at index.IndexServiceImpl.addData(IndexServiceImpl.java:63)
>         at index.IndexServiceImpl.addToIndex(IndexServiceImpl.java:28)
>         at 
> persistence.listener.DataEventsListenerImpl.consumeEvent(DataEventsListenerImpl.java:56)
>         at 
> persistence.listener.service.DataEventListenerBean.onMessage(DataEventListenerBean.java:34
>
> The LuceneActions.addDocument method is synchronized, so ideally till one 
> thread releases the lock and closes the index, the next thread will not 
> try to initialise a new IndexWriter. So I am wondering why this problem is 
> occuring. Can someone please help?
>
> Thanks,
> Harini
>
>> : Date: Mon, 18 Jul 2005 10:12:39 +0530
>> : From: Harini Raghavan <harini.raghavan@insideview.com>
>> : Reply-To: java-user@lucene.apache.org
>> : To: otis_gospodnetic@yahoo.com
>> : Cc: java-user@lucene.apache.org
>> : Subject: Re: Index locked exception while updating index
>> :
>> : Hi Otis,
>> :
>> : I tried to print the stack but there was no exception. I think I found 
>> the
>> : cause for the exception. The addDocument was being called by different
>> : threads simultaneously and so when a second thread was trying to access 
>> the
>> : index, it was already locked. So I made the method addDocument 
>> synchronized
>> : and that fixed the problem.
>> :
>> : Thanks for your quick response,
>> : Harini
>> :
>> :
>> : ----- Original Message -----
>> : From: "Otis Gospodnetic" <otis_gospodnetic@yahoo.com>
>> : To: <java-user@lucene.apache.org>
>> : Sent: Monday, July 18, 2005 10:03 AM
>> : Subject: Re: Index locked exception while updating index
>> :
>> :
>> : > Harini,
>> : >
>> : > You are catching IOException in the finally block, but you are not 
>> even
>> : > printing out the exception stack trace.  Perhaps you are not able to
>> : > close your IndexWriter for some reason.
>> : >
>> : > Otis
>> : >
>> : >
>> : > --- Harini Raghavan <harini.raghavan@insideview.com> wrote:
>> : >
>> : >> Hi All,
>> : >> I am quite new to Lucene and I have problem with locking. I have a
>> : >> MessageDrivenBean that sends messages to my Lucene indexer whenever
>> : >> there is
>> : >> a  new database update. The indexer updates the index incrementally 
>> .
>> : >> Below
>> : >> is the code fragment in the indexer method that gets invoked by the
>> : >> MDB
>> : >> listener.
>> : >>
>> : >>  public void addDocument(Document doc) {
>> : >>      String indexLoc = luceneConfig.getIndexDir();
>> : >>      IndexWriter writer = getIndexWriter(indexLoc, false);
>> : >>      try{
>> : >>           writer.addDocument(doc);
>> : >>      } catch(IOException e) {
>> : >>             logger.error("IOException occurred in addDocument()");
>> : >>      } catch(Exception e) {
>> : >>             logger.error("Exception occurred in addDocument()");
>> : >>      } finally {
>> : >>             try {
>> : >>                 writer.close();
>> : >>            } catch(IOException e){
>> : >>     }
>> : >> }
>> : >>
>> : >> The incremental update works fine twice and the third time it throws
>> : >> the
>> : >> following exception :
>> : >>
>> : >> java.io.IOException: Index locked for write:
>> : >> Lock@C:\tmpIndex\write.lock
>> : >> at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
>> : >> at org.apache.lucene.index.IndexWriter.<init>(Unknown Source)
>> : >> at lucene.LuceneActions.getIndexWriter(LuceneActions.java:151)
>> : >> at lucene.LuceneActions.addDocument(LuceneActions.java:43)
>> : >> at index.IndexServiceImpl.addData(IndexServiceImpl.java:63)
>> : >> at index.IndexServiceImpl.addToIndex(IndexServiceImpl.java:28)
>> : >>
>> : >> The Index Writer is created every time and also closed in the 
>> finally
>> : >> block.
>> : >> Should I be doing something else?
>> : >> Any help would be appreciated.
>> : >> Thanks,
>> : >> Harini
>> : >>
>> : >>
>> : 
>>  >> ---------------------------------------------------------------------
>> : >> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> : >> For additional commands, e-mail: java-user-help@lucene.apache.org
>> : >>
>> : >>
>> : >
>> : >
>> : > ---------------------------------------------------------------------
>> : > To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> : > For additional commands, e-mail: java-user-help@lucene.apache.org
>> : >
>> :
>> :
>> : ---------------------------------------------------------------------
>> : To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> : For additional commands, e-mail: java-user-help@lucene.apache.org
>> :
>>
>>
>>
>> -Hoss
>>
>>
>> ---------------------------------------------------------------------
>> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
>> For additional commands, e-mail: java-user-help@lucene.apache.org
>>
>
>
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
> 


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Sun Jul 31 17:28:51 2005
Return-Path: <java-user-return-15660-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 93256 invoked from network); 31 Jul 2005 17:28:51 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 31 Jul 2005 17:28:51 -0000
Received: (qmail 20220 invoked by uid 500); 31 Jul 2005 17:28:46 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 20189 invoked by uid 500); 31 Jul 2005 17:28:45 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 20176 invoked by uid 99); 31 Jul 2005 17:28:45 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Jul 2005 10:28:45 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=RCVD_BY_IP,SPF_HELO_PASS,SPF_PASS
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: domain of saturnism@gmail.com designates 64.233.184.203 as permitted sender)
Received: from [64.233.184.203] (HELO wproxy.gmail.com) (64.233.184.203)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Jul 2005 10:28:36 -0700
Received: by wproxy.gmail.com with SMTP id i5so890957wra
        for <java-user@lucene.apache.org>; Sun, 31 Jul 2005 10:28:42 -0700 (PDT)
DomainKey-Signature: a=rsa-sha1; q=dns; c=nofws;
        s=beta; d=gmail.com;
        h=received:message-id:date:from:reply-to:to:subject:in-reply-to:mime-version:content-type:content-transfer-encoding:content-disposition:references;
        b=O7FBJlrMwxHR+qEe7ogV5GYPnrtvwo7utFURrBkaWKxztqkK48BMylKRoweAN4fdG7jJSh82EBdo194R9GyJQmGpfAXrMzzNMcwSLUNg9yUzzunqjJ7yor8nrDjv9WsEbSHeJL3vi7hkhfryliP6VXNmrN/dv0Pji6gSnaUrJwk=
Received: by 10.54.28.73 with SMTP id b73mr2380272wrb;
        Sun, 31 Jul 2005 10:28:42 -0700 (PDT)
Received: by 10.54.118.4 with HTTP; Sun, 31 Jul 2005 10:28:41 -0700 (PDT)
Message-ID: <fb9748c90507311028618dcbfb@mail.gmail.com>
Date: Mon, 1 Aug 2005 01:28:41 +0800
From: Ray Tsang <saturnism@gmail.com>
Reply-To: Ray Tsang <saturnism@gmail.com>
To: java-user@lucene.apache.org
Subject: Re: hit count within categories
In-Reply-To: <20050729140823.59065.qmail@web26003.mail.ukl.yahoo.com>
Mime-Version: 1.0
Content-Type: text/plain; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline
References: <000801c5943f$c104b990$4601a8c0@traveler>
	 <20050729140823.59065.qmail@web26003.mail.ukl.yahoo.com>
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

I also had similar problem.  It was essentially a 'group by'-like
requirement.    I used both get(fieldName) and getTermFreqVector(...),
it seemed that get(fieldName) on a page of results (say, 10 results
per page) was faster than getTermFreqVector() for me.

ray,

On 7/29/05, mark harwood <markharw00d@yahoo.co.uk> wrote:
> > Is there a faster way to access the total hits
> > count??
>=20
> The solution I outlined could be adapted to work
> across multiple indexes - you'd just have to aggregate
> the totals.
>=20
> If going from all category terms to matching doc ids
> is slow you could do it the other way going from
> matching doc ids to terms.
>=20
> You can feasibly do this by :
> a) IndexReader.document(hitDocId).get("category")
> or
> b)
> IndexReader.getTermFreqVector(hitDocId,"category").getTerms()
>=20
> Unfortunately a) reads ALL fields for a doc off the
> disk and is probably very slow. b) would be quicker
> but would require you to index with TermFreqVector
> support.
> I'm not sure if b) would be faster than the term to
> docids approach I originally suggested - you'd have to
> try it and see how it performs on your data.
>=20
> Cheers,
> Mark
>=20
>=20
>=20
>=20
> ___________________________________________________________
> How much free photo storage do you get? Store your holiday
> snaps for FREE with Yahoo! Photos http://uk.photos.yahoo.com
>=20
> ---------------------------------------------------------------------
> To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
> For additional commands, e-mail: java-user-help@lucene.apache.org
>=20
>

---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 01 03:19:32 2005
Return-Path: <java-user-return-15661-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 4578 invoked from network); 1 Aug 2005 03:19:32 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2005 03:19:32 -0000
Received: (qmail 60719 invoked by uid 500); 1 Aug 2005 03:19:27 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 60402 invoked by uid 500); 1 Aug 2005 03:19:26 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 60389 invoked by uid 99); 1 Aug 2005 03:19:26 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Jul 2005 20:19:26 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [67.19.185.234] (HELO mail.telparia.com) (67.19.185.234)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Jul 2005 20:19:17 -0700
Received: from [192.168.77.2] (68-65-6-113.bflony.adelphia.net [68.65.6.113])
	by mail.telparia.com (Postfix) with ESMTP id 9975F5D8498
	for <java-user@lucene.apache.org>; Sun, 31 Jul 2005 22:57:01 -0500 (CDT)
Message-ID: <42ED9504.8040101@cosmicrealms.com>
Date: Sun, 31 Jul 2005 23:20:36 -0400
From: Robert Schultz <robert@cosmicrealms.com>
User-Agent: Mozilla Thunderbird 1.0.6 (Windows/20050716)
X-Accept-Language: en-us, en
MIME-Version: 1.0
To: java-user@lucene.apache.org
Subject: Any problems with a failed IndexWriter optimize call?
Content-Type: text/plain; charset=ISO-8859-1; format=flowed
Content-Transfer-Encoding: 7bit
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

Hello! I am using Lucene 1.4.3

I'm building a Lucene index, that will have about 25 million documents 
when it is done.
I'm adding 250,000 at a time.

Currently there is about 1.2Million in there, and I ran into a problem.
After I had added a batch of 250,000 I go a 'java.lang.outOfMemory' 
threw by writer.optimize(); (a standard IndexWriter)

The exception caused my program to quit out, and it didn't call 
'writer.close();'

First, with it dying in the middle of an .optimize() is there any chance 
my index is corrupted?

Second, I know I can remove the /tmp/lucene*.lock file to remove the 
lock in order to add more, but is it safe to do that?

I've since figured out that I can pass -Xmx to the 'java' program in 
order to increase the maximum amount of RAM.
It was using the default of 64M, I plan on increasing that to 175M to 
start with.
That should solve the memory problems (I can allocate more if necessary 
down the line).

Lastly, when I go back, open it again, and add another 250,000 and then 
call optimize again, will a failed previous optimize hurt the index at all?



---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 01 03:32:37 2005
Return-Path: <java-user-return-15662-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 6882 invoked from network); 1 Aug 2005 03:32:37 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2005 03:32:37 -0000
Received: (qmail 66453 invoked by uid 500); 1 Aug 2005 03:32:32 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 66422 invoked by uid 500); 1 Aug 2005 03:32:32 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 66409 invoked by uid 99); 1 Aug 2005 03:32:32 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Jul 2005 20:32:32 -0700
X-ASF-Spam-Status: No, hits=0.0 required=10.0
	tests=HTML_MESSAGE
X-Spam-Check-By: apache.org
Received-SPF: pass (asf.osuosl.org: local policy)
Received: from [69.45.152.8] (HELO alagad.com) (69.45.152.8)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Jul 2005 20:32:23 -0700
Received: from doug ([67.22.212.241]) by alagad.com with MailEnable ESMTP; Sun, 31 Jul 2005 23:36:30 -0400
From: "Doug Hughes" <dhughes@alagad.com>
To: <java-user@lucene.apache.org>
Subject: Keyword Searches don't seem to be working.
Date: Sun, 31 Jul 2005 23:32:22 -0400
MIME-Version: 1.0
Content-Type: multipart/alternative;
	boundary="----=_NextPart_000_001C_01C59628.1BDD3FB0"
X-Mailer: Microsoft Office Outlook, Build 11.0.6353
X-MimeOLE: Produced By Microsoft MimeOLE V6.00.3790.1830
Thread-Index: AcWWSaDD+j3eWzztQ/mUSs/XaHjjnw==
X-Virus-Checked: Checked by ClamAV on apache.org
Message-Id: <20050801033224.A7B5C10FB2A7@asf.osuosl.org>
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

------=_NextPart_000_001C_01C59628.1BDD3FB0
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: 7bit

 

Hello,

 

I have a process which indexes several hundred documents.  As a part of the
indexing process I've been adding keywords for the document's path on disk
and it's URL. 

 

The indexing process seems to work fine.  When I look at my index using Luke
I see 1875 documents in the index and 25162 terms.  I can also browse though
all the documents.  As a result, I can see that the fields "path" and "url"
have values for all of these documents and that the values are correct.  

 

Here's an example from the first document:

 

path: C:\Inetpub\wwwroot\cfdocs\htmldocs\00000001.htm

url: http://cfdocs.office.alagad.com/htmldocs/00000001.htm

 

However, when I search either the path or url fields on this index for those
values I'm not getting any results.  Here's an example:

 

IndexSearcher searcher = new
IndexSearcher(FSDirectory.getDirectory(indexDir, false));

Query q = new TermQuery(new
Term("http://cfdocs.office.alagad.com/htmldocs/00000001.htm", "url"));

Hits hits = searcher.search(q);

 

However, after running this query hits.length == 0.

 

Anyone have any ideas what I'm doing wrong?

 

Thanks,

 

Doug Hughes

dhughes@alagad.com

 

 


------=_NextPart_000_001C_01C59628.1BDD3FB0--



From java-user-return-15663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 01 06:28:01 2005
Return-Path: <java-user-return-15663-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 51934 invoked from network); 1 Aug 2005 06:28:01 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2005 06:28:01 -0000
Received: (qmail 780 invoked by uid 500); 1 Aug 2005 06:27:56 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 745 invoked by uid 500); 1 Aug 2005 06:27:55 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 729 invoked by uid 99); 1 Aug 2005 06:27:55 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Jul 2005 23:27:55 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Jul 2005 23:27:46 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id 25A0E5B7CB; Sun, 31 Jul 2005 23:27:48 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id 246467F45C
	for <java-user@lucene.apache.org>; Sun, 31 Jul 2005 23:27:48 -0700 (PDT)
Date: Sun, 31 Jul 2005 23:27:48 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Keyword Searches don't seem to be working.
In-Reply-To: <20050801033224.A7B5C10FB2A7@asf.osuosl.org>
Message-ID: <Pine.LNX.4.58.0507312327050.7184@hal.rescomp.berkeley.edu>
References: <20050801033224.A7B5C10FB2A7@asf.osuosl.org>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N

: However, when I search either the path or url fields on this index for those
: values I'm not getting any results.  Here's an example:

: Query q = new TermQuery(new
: Term("http://cfdocs.office.alagad.com/htmldocs/00000001.htm", "url"));

simple mistake - the constructor for a Term takes the field name first,
then the value.


-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


From java-user-return-15664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org Mon Aug 01 06:35:30 2005
Return-Path: <java-user-return-15664-apmail-lucene-java-user-archive=lucene.apache.org@lucene.apache.org>
Delivered-To: apmail-lucene-java-user-archive@www.apache.org
Received: (qmail 53554 invoked from network); 1 Aug 2005 06:35:29 -0000
Received: from hermes.apache.org (HELO mail.apache.org) (209.237.227.199)
  by minotaur.apache.org with SMTP; 1 Aug 2005 06:35:29 -0000
Received: (qmail 10234 invoked by uid 500); 1 Aug 2005 06:35:23 -0000
Delivered-To: apmail-lucene-java-user-archive@lucene.apache.org
Received: (qmail 10011 invoked by uid 500); 1 Aug 2005 06:35:22 -0000
Mailing-List: contact java-user-help@lucene.apache.org; run by ezmlm
Precedence: bulk
List-Help: <mailto:java-user-help@lucene.apache.org>
List-Unsubscribe: <mailto:java-user-unsubscribe@lucene.apache.org>
List-Post: <mailto:java-user@lucene.apache.org>
List-Id: <java-user.lucene.apache.org>
Reply-To: java-user@lucene.apache.org
Delivered-To: mailing list java-user@lucene.apache.org
Received: (qmail 9994 invoked by uid 99); 1 Aug 2005 06:35:22 -0000
Received: from asf.osuosl.org (HELO asf.osuosl.org) (140.211.166.49)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Jul 2005 23:35:22 -0700
X-ASF-Spam-Status: No, hits=1.0 required=10.0
	tests=SPF_HELO_SOFTFAIL
X-Spam-Check-By: apache.org
Received-SPF: neutral (asf.osuosl.org: local policy)
Received: from [169.229.70.167] (HELO rescomp.berkeley.edu) (169.229.70.167)
    by apache.org (qpsmtpd/0.29) with ESMTP; Sun, 31 Jul 2005 23:35:14 -0700
Received: by rescomp.berkeley.edu (Postfix, from userid 1007)
	id EABD75B7CC; Sun, 31 Jul 2005 23:35:20 -0700 (PDT)
Received: from localhost (localhost [127.0.0.1])
	by rescomp.berkeley.edu (Postfix) with ESMTP id E3C207F45C
	for <java-user@lucene.apache.org>; Sun, 31 Jul 2005 23:35:20 -0700 (PDT)
Date: Sun, 31 Jul 2005 23:35:20 -0700 (PDT)
From: Chris Hostetter <hossman_lucene@fucit.org>
Sender: hossman@hal.rescomp.berkeley.edu
To: java-user@lucene.apache.org
Subject: Re: Any problems with a failed IndexWriter optimize call?
In-Reply-To: <42ED9504.8040101@cosmicrealms.com>
Message-ID: <Pine.LNX.4.58.0507312328000.7184@hal.rescomp.berkeley.edu>
References: <42ED9504.8040101@cosmicrealms.com>
MIME-Version: 1.0
Content-Type: TEXT/PLAIN; charset=US-ASCII
X-Virus-Checked: Checked by ClamAV on apache.org
X-Spam-Rating: minotaur.apache.org 1.6.2 0/1000/N


If i remember correctly, what you'll find when you remove the lock file is
that your index is still usable, and from the perspective of new
IndexWriter/IndexReaders it's in the same state it was prior to the call
to optimize, but from the perspective of an external observer, the index
directory will contain a bunch of garbage files from the aborted optimize.

At my work, we've taken the "safe" attitude that if you get an OOM
exception, you should assume your index is corrupted, and rebuild from
scratch for safety -- but i think it's safe to cleanup up the garbage
files manually.

which brings up something i ment to ask a while back:  Has anyone written
any index cleaning code?  that locks an index (using the public API) and
then inspects the file (using the API, or using low level knowledge of hte
file structure) to generate a list of 'garbage' files in the index
directory that should be safely deletable?

(I considered writing this a few months ago, but then our "play it safe,
treat it as corrupt" policy came out, and it wasn't all that neccessary
for me)

It seems like it might be a handy addition to the sandbox.


: Date: Sun, 31 Jul 2005 23:20:36 -0400
: From: Robert Schultz <robert@cosmicrealms.com>
: Reply-To: java-user@lucene.apache.org
: To: java-user@lucene.apache.org
: Subject: Any problems with a failed IndexWriter optimize call?
:
: Hello! I am using Lucene 1.4.3
:
: I'm building a Lucene index, that will have about 25 million documents
: when it is done.
: I'm adding 250,000 at a time.
:
: Currently there is about 1.2Million in there, and I ran into a problem.
: After I had added a batch of 250,000 I go a 'java.lang.outOfMemory'
: threw by writer.optimize(); (a standard IndexWriter)
:
: The exception caused my program to quit out, and it didn't call
: 'writer.close();'
:
: First, with it dying in the middle of an .optimize() is there any chance
: my index is corrupted?
:
: Second, I know I can remove the /tmp/lucene*.lock file to remove the
: lock in order to add more, but is it safe to do that?
:
: I've since figured out that I can pass -Xmx to the 'java' program in
: order to increase the maximum amount of RAM.
: It was using the default of 64M, I plan on increasing that to 175M to
: start with.
: That should solve the memory problems (I can allocate more if necessary
: down the line).
:
: Lastly, when I go back, open it again, and add another 250,000 and then
: call optimize again, will a failed previous optimize hurt the index at all?
:
:
:
: ---------------------------------------------------------------------
: To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
: For additional commands, e-mail: java-user-help@lucene.apache.org
:



-Hoss


---------------------------------------------------------------------
To unsubscribe, e-mail: java-user-unsubscribe@lucene.apache.org
For additional commands, e-mail: java-user-help@lucene.apache.org


